id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2369859962,pull_request,closed,,"fix: creation of contact, customer, opportunity, quotation and prospect from lead","versions: dev & 15

fixes: #42009

**Before:**

- In v15, if there is an existing contact, then ""Create Contact"" shouldn't appear.
- In dev, customer, opportunity, and prospect creation fail (because of this PR: #40987).

https://github.com/frappe/erpnext/assets/141945075/5229cd92-ad6a-4773-b99a-d6e646821494


**After:**


https://github.com/frappe/erpnext/assets/141945075/23fcb8e0-8941-4b50-ad06-6e20b5ca673c

",Nihantra-Patel,2024-06-24 10:29:25+00:00,['ruthra-kumar'],2024-09-19 05:56:16+00:00,2024-07-01 07:35:42+00:00,https://github.com/frappe/erpnext/pull/42014,"[('backport version-15-hotfix', '')]",[],
2369712912,pull_request,closed,,fix: incorrect Difference Amount (backport #42008),"**Issue**

<img width=""1324"" alt=""Screenshot 2024-06-24 at 1 00 42 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/1e6ba867-2a1d-43df-836c-9f166cc1950b"">



**After Fix**

<img width=""1322"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8780500/7aa29c68-69f4-4ab9-a5e2-8098c6112683"">
<hr>This is an automatic backport of pull request #42008 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-24 09:27:26+00:00,['rohitwaghchaure'],2024-07-19 00:10:08+00:00,2024-06-24 11:34:24+00:00,https://github.com/frappe/erpnext/pull/42013,"[('released', None)]","[{'comment_id': 2205109956, 'issue_id': 2369712912, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 7, 51, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:07:51 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2369712814,pull_request,closed,,fix: Wrong Delete Batch on Purchase Receipt (backport #42007),Fixed https://github.com/frappe/erpnext/issues/41948<hr>This is an automatic backport of pull request #42007 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-24 09:27:24+00:00,['rohitwaghchaure'],2024-07-19 00:10:07+00:00,2024-06-24 11:34:14+00:00,https://github.com/frappe/erpnext/pull/42012,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205109996, 'issue_id': 2369712814, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 7, 54, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:07:54 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2369709085,pull_request,closed,,fix: valuation rate for the legacy batches,,rohitwaghchaure,2024-06-24 09:25:35+00:00,[],2024-07-10 00:11:10+00:00,2024-06-25 07:02:28+00:00,https://github.com/frappe/erpnext/pull/42011,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2369465186,pull_request,closed,,fix: incorrect Difference Amount,"**Issue**

<img width=""1324"" alt=""Screenshot 2024-06-24 at 1 00 42 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/1e6ba867-2a1d-43df-836c-9f166cc1950b"">



**After Fix**

<img width=""1322"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8780500/7aa29c68-69f4-4ab9-a5e2-8098c6112683"">
",rohitwaghchaure,2024-06-24 07:31:54+00:00,[],2024-07-10 00:11:12+00:00,2024-06-24 09:25:57+00:00,https://github.com/frappe/erpnext/pull/42008,"[('backport version-15-hotfix', '')]",[],
2369399038,pull_request,closed,,fix: Wrong Delete Batch on Purchase Receipt,Fixed https://github.com/frappe/erpnext/issues/41948,rohitwaghchaure,2024-06-24 06:59:03+00:00,[],2024-07-10 00:11:11+00:00,2024-06-24 09:26:09+00:00,https://github.com/frappe/erpnext/pull/42007,"[('backport version-15-hotfix', '')]",[],
2369240850,pull_request,closed,,feat: accounting dimension filters in gp report (backport #41751),"![image](https://github.com/frappe/erpnext/assets/52111700/6b67e5fd-69ea-4b74-abbc-0d8ed3b46845)

`no-docs`<hr>This is an automatic backport of pull request #41751 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-24 05:22:42+00:00,[],2024-07-19 00:10:06+00:00,2024-06-24 05:54:24+00:00,https://github.com/frappe/erpnext/pull/42006,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205110038, 'issue_id': 2369240850, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 7, 57, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:07:57 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2368816493,pull_request,closed,,chore: patch to enable total number of booked depreciations field,"This PR addresses a bug in the calculation of the ""Total Number of Booked Depreciation"" field by implementing a necessary patch that was overlooked during the initial release. Additionally, it includes optimisations to related code for improved system efficiency.
no-docs
",khushi8112,2024-06-23 18:16:35+00:00,[],2024-07-08 00:11:15+00:00,2024-06-23 18:27:36+00:00,https://github.com/frappe/erpnext/pull/42002,"[('backport version-15-hotfix', '')]",[],
2368576958,pull_request,closed,,refactor: set status of payment request on 'before_submit',"Part of https://github.com/frappe/erpnext/pull/40845


cc @ruthra-kumar
",blaggacao,2024-06-23 13:59:55+00:00,['ruthra-kumar'],2024-07-16 00:10:58+00:00,2024-07-01 04:28:08+00:00,https://github.com/frappe/erpnext/pull/42000,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2185006696, 'issue_id': 2368576958, 'author': 'blaggacao', 'body': 'ping', 'created_at': datetime.datetime(2024, 6, 23, 14, 13, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2187006171, 'issue_id': 2368576958, 'author': 'blaggacao', 'body': '@ruthra-kumar this is green now on its own.', 'created_at': datetime.datetime(2024, 6, 24, 16, 52, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2196448241, 'issue_id': 2368576958, 'author': 'blaggacao', 'body': '> Go for it now. The future is promised to no one.   - Wayne Dyer\n\n---\n\n<sub>Kindly help move this PR forward. Many thanks from Yours Sincerely!</sub>', 'created_at': datetime.datetime(2024, 6, 28, 8, 57, 58, tzinfo=datetime.timezone.utc)}]","blaggacao (Issue Creator) on (2024-06-23 14:13:15 UTC): ping

blaggacao (Issue Creator) on (2024-06-24 16:52:25 UTC): @ruthra-kumar this is green now on its own.

blaggacao (Issue Creator) on (2024-06-28 08:57:58 UTC): ---

<sub>Kindly help move this PR forward. Many thanks from Yours Sincerely!</sub>

"
2368470992,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-06-23 09:35:05+00:00,[],2024-07-26 00:09:46+00:00,2024-07-08 13:05:58+00:00,https://github.com/frappe/erpnext/pull/41999,[],[],
2368083761,pull_request,closed,,fix: pricing rule with and without 'apply multiple' and priority (backport #41976),"Change in behavior on `Apply Multiple Pricing Rules`:
`Apply Multiple Pricing Rules` only takes effect when all the pricing rules identified for an item has it enabled. Else, Priority is applied and only the highest priority takes effect.

Combining rules with and without `Apply Multiple Pricing Rules` enabled doesn't make sense. Hence the change.<hr>This is an automatic backport of pull request #41976 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-23 00:02:12+00:00,['ruthra-kumar'],2024-07-19 00:10:05+00:00,2024-06-23 00:19:07+00:00,https://github.com/frappe/erpnext/pull/41998,"[('released', None)]","[{'comment_id': 2205110083, 'issue_id': 2368083761, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:00 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2368081151,pull_request,closed,,refactor: allow foreign currency advance accounts (backport #41844),"extends: https://github.com/frappe/erpnext/pull/35609

Advance accounts can be in either: Customer Billing currency or Company default currency.

Validations are added in Customer/Supplier master and Customer/Supplier Group master to force both normal 'Receivable/Payable' accounts and the 'Advance' accounts to be in either Customer/Suppliers' billing currency or company default billing currency.<hr>This is an automatic backport of pull request #41844 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-22 23:58:12+00:00,['ruthra-kumar'],2024-07-19 00:10:04+00:00,2024-06-23 00:13:11+00:00,https://github.com/frappe/erpnext/pull/41997,"[('accounts', ''), ('released', None)]","[{'comment_id': 2205110125, 'issue_id': 2368081151, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 3, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:03 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2367995214,pull_request,closed,,fix: use item default valuation rate,"The valuation rate set on an item is ignored when adding items to transactions to calculate gross profit.

This fixes the problem by using it as a fallback after other sources.

no-docs
version-14-hotfix
version-15-hotfix
",casesolved-co-uk,2024-06-22 19:50:21+00:00,[],2025-01-14 00:09:56+00:00,2024-12-30 16:12:51+00:00,https://github.com/frappe/erpnext/pull/41996,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2219036776, 'issue_id': 2367995214, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 9, 23, 50, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2220905518, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': 'Available here:\r\nhttps://github.com/CaseSolvedUK/erpnext', 'created_at': datetime.datetime(2024, 7, 10, 15, 57, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2240896153, 'issue_id': 2367995214, 'author': 'vorasmit', 'body': 'With this PR, it will only compute valuation rate in Quotation or Sales Order. Is that what you are looking for?\r\n\r\nFollowing function still calculates valuation rate correctly in actual transaction with all additional fallbacks possible and give correct gross profit:\r\nhttps://github.com/frappe/erpnext/blob/develop/erpnext/stock/stock_ledger.py#L1732', 'created_at': datetime.datetime(2024, 7, 20, 3, 38, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2241194805, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': ""> With this PR, it will only compute valuation rate in Quotation or Sales Order. Is that what you are looking for?\r\n> \r\n> Following function still calculates valuation rate correctly in actual transaction with all additional fallbacks possible and give correct gross profit: https://github.com/frappe/erpnext/blob/develop/erpnext/stock/stock_ledger.py#L1732\r\n\r\nThen why isn't it used everywhere including in transactions to calculate gross profit?\r\n\r\nJust like stock transactions and BOMs, if there is a valuation rate in the system it should be used in the same way everywhere."", 'created_at': datetime.datetime(2024, 7, 20, 16, 9, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2252434409, 'issue_id': 2367995214, 'author': 'vorasmit', 'body': ""Different functionality for 2 reasons:\r\n- Enforcing it's requirement and it's validation is not necessary for Sales Order or Quotation\r\n- Serial Numbers/Batches/From Warehouse is determined or finalized only with Delivery Note or Sales Invoice. Only with this additional information will we be able to accurately determine valuation rate.\r\n\r\nWhat's the use of valuation rate in Sales Order or Quotation?\r\nGives prima facie understanding of expected Gross Profit. Other than this, it's of no actual use here. Hence it's not mandatory to have it in these docs."", 'created_at': datetime.datetime(2024, 7, 26, 10, 12, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2252559981, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': ""> Gives prima facie understanding of expected Gross Profit. Other than this, it's of no actual use here.\r\n\r\nIt's useful for calculating gross profit and margin for a Quotation where a company needs to change pricing to win the sale based on price.\r\nI can't imagine there are many companies with multiple warehouses where the cost of items varies with the warehouse."", 'created_at': datetime.datetime(2024, 7, 26, 11, 27, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2253281629, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': ""> This get's set in two unrealistic scenarios: When warehouse is group (or parent). This should never be allowed\r\n\r\nThe system goes to great lengths to maintain separate valuation rates for the same item depending on Warehouse. Why is that? The only scenario I can think is if the warehouses are in vastly different geographic locations/countries. In which case wouldn't you want a separate company?"", 'created_at': datetime.datetime(2024, 7, 26, 18, 39, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2282749284, 'issue_id': 2367995214, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 11, 12, 45, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2282766299, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': ""I answer the questions using real world information from your own customers and it's ignored.\r\nI understand the whole frappe team is abandoning ERPNext to focus on new pet projects, but please don't defend bad design choices.\r\n\r\nAnswer this: why would anyone expect the value/cost of an item to change depending on the document you use in the system?"", 'created_at': datetime.datetime(2024, 8, 11, 13, 45, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311359355, 'issue_id': 2367995214, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 27, 0, 48, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311924499, 'issue_id': 2367995214, 'author': 'casesolved-co-uk', 'body': 'Glad this is being looked into', 'created_at': datetime.datetime(2024, 8, 27, 8, 45, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343602737, 'issue_id': 2367995214, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 11, 12, 58, 25, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-07-09 23:50:08 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

casesolved-co-uk (Issue Creator) on (2024-07-10 15:57:38 UTC): Available here:
https://github.com/CaseSolvedUK/erpnext

vorasmit on (2024-07-20 03:38:06 UTC): With this PR, it will only compute valuation rate in Quotation or Sales Order. Is that what you are looking for?

Following function still calculates valuation rate correctly in actual transaction with all additional fallbacks possible and give correct gross profit:
https://github.com/frappe/erpnext/blob/develop/erpnext/stock/stock_ledger.py#L1732

casesolved-co-uk (Issue Creator) on (2024-07-20 16:09:45 UTC): Then why isn't it used everywhere including in transactions to calculate gross profit?

Just like stock transactions and BOMs, if there is a valuation rate in the system it should be used in the same way everywhere.

vorasmit on (2024-07-26 10:12:35 UTC): Different functionality for 2 reasons:
- Enforcing it's requirement and it's validation is not necessary for Sales Order or Quotation
- Serial Numbers/Batches/From Warehouse is determined or finalized only with Delivery Note or Sales Invoice. Only with this additional information will we be able to accurately determine valuation rate.

What's the use of valuation rate in Sales Order or Quotation?
Gives prima facie understanding of expected Gross Profit. Other than this, it's of no actual use here. Hence it's not mandatory to have it in these docs.

casesolved-co-uk (Issue Creator) on (2024-07-26 11:27:05 UTC): It's useful for calculating gross profit and margin for a Quotation where a company needs to change pricing to win the sale based on price.
I can't imagine there are many companies with multiple warehouses where the cost of items varies with the warehouse.

casesolved-co-uk (Issue Creator) on (2024-07-26 18:39:17 UTC): The system goes to great lengths to maintain separate valuation rates for the same item depending on Warehouse. Why is that? The only scenario I can think is if the warehouses are in vastly different geographic locations/countries. In which case wouldn't you want a separate company?

stale[bot] on (2024-08-11 12:45:06 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

casesolved-co-uk (Issue Creator) on (2024-08-11 13:45:19 UTC): I answer the questions using real world information from your own customers and it's ignored.
I understand the whole frappe team is abandoning ERPNext to focus on new pet projects, but please don't defend bad design choices.

Answer this: why would anyone expect the value/cost of an item to change depending on the document you use in the system?

stale[bot] on (2024-08-27 00:48:40 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

casesolved-co-uk (Issue Creator) on (2024-08-27 08:45:12 UTC): Glad this is being looked into

stale[bot] on (2024-09-11 12:58:25 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2367885190,pull_request,closed,,"perf: dont run queries unnecessarily, improved filters (backport #41993)","Purchase Receipt that took 300 seconds to submit, now submitting with 2-3 seconds.

Internal Issue ID: **16614**

### Changes Made
- The data for `return_consumed_items` is now returned before `voucher_bundle_data` is fetched, because that is not changing the return value in any way.
- Avoiding unnecessary queries if there are no consumed materials by returning earlier.
- Some filters can be non-truthy values like `[]` (empty list) or `0`. They should still get applied in `get_ledgers_from_serial_batch_bundle`. Checking `None` values instead of non-truthy values now.<hr>This is an automatic backport of pull request #41993 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-22 15:58:03+00:00,['sagarvora'],2024-07-19 00:10:03+00:00,2024-06-22 16:21:27+00:00,https://github.com/frappe/erpnext/pull/41995,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205110170, 'issue_id': 2367885190, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 6, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:06 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2367815140,pull_request,closed,,"perf: dont run queries unnecessarily, improved filters","Purchase Receipt that took 300 seconds to submit, now submitting in 2-3 seconds.

Internal Issue ID: **16614**

### Changes Made
- The data for `return_consumed_items` is now returned before `voucher_bundle_data` is fetched, because that is not changing the return value in any way.
- Avoiding unnecessary queries if there are no consumed materials by returning earlier.
- Some filters can be non-truthy values like `[]` (empty list) or `0`. They should still get applied in `get_ledgers_from_serial_batch_bundle`. Checking `None` values instead of non-truthy values now.",sagarvora,2024-06-22 13:06:45+00:00,[],2024-07-08 00:11:19+00:00,2024-06-22 15:57:01+00:00,https://github.com/frappe/erpnext/pull/41993,"[('backport version-15-hotfix', '')]","[{'comment_id': 2184027873, 'issue_id': 2367815140, 'author': 'ljain112', 'body': 'https://support.frappe.io/app/hd-ticket/16614', 'created_at': datetime.datetime(2024, 6, 22, 13, 11, 58, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-06-22 13:11:58 UTC): https://support.frappe.io/app/hd-ticket/16614

"
2367788204,pull_request,closed,,fix: user confirmation before updating date,"Currently posting date automatically changes on submit if Edit Posting Date and Time is unchecked.
This PR takes a user confirmation before doing so.

https://github.com/frappe/erpnext/assets/52111700/814a1e98-3098-4d5c-82df-0c42e0cec447

",rtdany10,2024-06-22 12:19:29+00:00,[],2024-09-02 00:11:17+00:00,2024-08-12 23:48:24+00:00,https://github.com/frappe/erpnext/pull/41992,"[('inactive', '')]","[{'comment_id': 2188940322, 'issue_id': 2367788204, 'author': 'rtdany10', 'body': '@rohitwaghchaure please review', 'created_at': datetime.datetime(2024, 6, 25, 13, 18, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2221718378, 'issue_id': 2367788204, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 10, 23, 45, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2222240734, 'issue_id': 2367788204, 'author': 'rtdany10', 'body': '@ruthra-kumar @rohitwaghchaure  please review', 'created_at': datetime.datetime(2024, 7, 11, 7, 34, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2222250536, 'issue_id': 2367788204, 'author': 'rohitwaghchaure', 'body': '@rtdany10 The confirmation trigger you have added on saving of the sales invoice which will slow down sales invoice updates, especially when the user needs to make multiple changes before submission. This is not a proper solution to fix the issue. Maybe add an option to disable this feature in the sales settings or buying settings (Keep it on by default).', 'created_at': datetime.datetime(2024, 7, 11, 7, 40, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227888344, 'issue_id': 2367788204, 'author': 'rohitwaghchaure', 'body': '@rtdany10 Can you make this configurable? also implement same for other doctypes like purchase invoice, delivery note, purchase receipt etc.', 'created_at': datetime.datetime(2024, 7, 15, 7, 48, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2267166103, 'issue_id': 2367788204, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 3, 21, 31, 58, tzinfo=datetime.timezone.utc)}]","rtdany10 (Issue Creator) on (2024-06-25 13:18:09 UTC): @rohitwaghchaure please review

stale[bot] on (2024-07-10 23:45:54 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

rtdany10 (Issue Creator) on (2024-07-11 07:34:37 UTC): @ruthra-kumar @rohitwaghchaure  please review

rohitwaghchaure on (2024-07-11 07:40:28 UTC): @rtdany10 The confirmation trigger you have added on saving of the sales invoice which will slow down sales invoice updates, especially when the user needs to make multiple changes before submission. This is not a proper solution to fix the issue. Maybe add an option to disable this feature in the sales settings or buying settings (Keep it on by default).

rohitwaghchaure on (2024-07-15 07:48:34 UTC): @rtdany10 Can you make this configurable? also implement same for other doctypes like purchase invoice, delivery note, purchase receipt etc.

stale[bot] on (2024-08-03 21:31:58 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2367566064,pull_request,closed,,feat: default account head for operating cost (backport #41985) (backport #41987),"<img width=""1023"" alt=""Screenshot 2024-06-21 at 6 15 46 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/92acb708-0aa3-48ab-955e-8c5cf90e7632"">


Docs https://docs.erpnext.com/docs/user/manual/en/company-setup#2-3-stock-and-manufacturing-settings

<hr>This is an automatic backport of pull request #41985 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #41987 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-22 05:12:36+00:00,[],2024-07-08 00:11:20+00:00,2024-06-22 05:48:18+00:00,https://github.com/frappe/erpnext/pull/41991,"[('released', None)]","[{'comment_id': 2183822222, 'issue_id': 2367566064, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.28.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.28.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 22, 5, 49, 41, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-22 05:49:41 UTC): :tada: This PR is included in version 15.28.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.28.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2367082221,pull_request,closed,,refactor: renamed number of depreciations booked to opening booked depreciations,Manual backport for #41515,khushi8112,2024-06-21 18:49:36+00:00,[],2024-07-19 00:10:01+00:00,2024-06-21 19:49:16+00:00,https://github.com/frappe/erpnext/pull/41989,"[('released', None)]","[{'comment_id': 2205110277, 'issue_id': 2367082221, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 12, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:12 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366554489,pull_request,closed,,feat: default account head for operating cost (backport #41985),"<img width=""1023"" alt=""Screenshot 2024-06-21 at 6 15 46 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/92acb708-0aa3-48ab-955e-8c5cf90e7632"">


Docs https://docs.erpnext.com/docs/user/manual/en/company-setup#2-3-stock-and-manufacturing-settings

<hr>This is an automatic backport of pull request #41985 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-21 13:28:30+00:00,['rohitwaghchaure'],2024-07-19 00:10:02+00:00,2024-06-22 05:09:53+00:00,https://github.com/frappe/erpnext/pull/41987,"[('conflicts', None), ('released', None)]","[{'comment_id': 2182757281, 'issue_id': 2366554489, 'author': 'mergify[bot]', 'body': 'Cherry-pick of fd7666a029a430c0b3cf4d1c9d0b728f4d0e4476 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-41985\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit fd7666a029.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/manufacturing/doctype/work_order/test_work_order.py\n\tmodified:   erpnext/setup/doctype/company/company.js\n\tmodified:   erpnext/setup/doctype/company/company.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/manufacturing/doctype/bom/bom.py\n\tboth modified:   erpnext/setup/doctype/company/company.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 21, 13, 28, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2183799491, 'issue_id': 2366554489, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 6, 22, 5, 12, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2183799568, 'issue_id': 2366554489, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#41991 feat: default account head for operating cost (backport #41985) (backport #41987)](https://github.com/frappe/erpnext/pull/41991) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 6, 22, 5, 12, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2205110222, 'issue_id': 2366554489, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 9, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-21 13:28:32 UTC): Cherry-pick of fd7666a029a430c0b3cf4d1c9d0b728f4d0e4476 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-41985
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit fd7666a029.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/manufacturing/doctype/work_order/test_work_order.py
	modified:   erpnext/setup/doctype/company/company.js
	modified:   erpnext/setup/doctype/company/company.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/manufacturing/doctype/bom/bom.py
	both modified:   erpnext/setup/doctype/company/company.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

rohitwaghchaure (Assginee) on (2024-06-22 05:12:17 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-06-22 05:12:22 UTC): #### ✅ Backports have been created

<details>

* [#41991 feat: default account head for operating cost (backport #41985) (backport #41987)](https://github.com/frappe/erpnext/pull/41991) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-07-03 05:08:09 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366476717,pull_request,closed,,feat: default account head for operating cost,"<img width=""1023"" alt=""Screenshot 2024-06-21 at 6 15 46 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/92acb708-0aa3-48ab-955e-8c5cf90e7632"">


Docs https://docs.erpnext.com/docs/user/manual/en/company-setup#2-3-stock-and-manufacturing-settings

",rohitwaghchaure,2024-06-21 12:46:24+00:00,[],2024-07-08 00:11:22+00:00,2024-06-21 13:26:48+00:00,https://github.com/frappe/erpnext/pull/41985,"[('backport version-15-hotfix', '')]",[],
2366448157,pull_request,closed,,fix: incorrect against_account upon reposting (backport #41981),"Upon repost, `against_income_account` and `against_expense_account` on Sales/Purchase Invoice should be updated. This makes sure `against_account` reflects the latest accounts in Ledger<hr>This is an automatic backport of pull request #41981 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-21 12:30:45+00:00,['ruthra-kumar'],2024-07-19 00:10:00+00:00,2024-06-21 13:40:33+00:00,https://github.com/frappe/erpnext/pull/41984,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205110320, 'issue_id': 2366448157, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 15, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:15 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366448095,pull_request,closed,,fix: incorrect against_account upon reposting (backport #41981),"Upon repost, `against_income_account` and `against_expense_account` on Sales/Purchase Invoice should be updated. This makes sure `against_account` reflects the latest accounts in Ledger<hr>This is an automatic backport of pull request #41981 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-21 12:30:43+00:00,['ruthra-kumar'],2024-07-20 00:09:52+00:00,2024-06-21 13:40:42+00:00,https://github.com/frappe/erpnext/pull/41983,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205106020, 'issue_id': 2366448095, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 3, 26, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:03:26 UTC): :tada: This issue has been resolved in version 14.70.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366418278,pull_request,closed,,fix: decimal issue in pick list (backport #41972),<hr>This is an automatic backport of pull request #41972 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-21 12:13:20+00:00,['rohitwaghchaure'],2024-07-19 00:09:59+00:00,2024-06-21 12:56:05+00:00,https://github.com/frappe/erpnext/pull/41982,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205110373, 'issue_id': 2366418278, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 18, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:18 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366390411,pull_request,closed,,fix: incorrect against_account upon reposting,"Upon repost, `against_income_account` and `against_expense_account` on Sales/Purchase Invoice should be updated. This makes sure `against_account` reflects the latest accounts in Ledger",ruthra-kumar,2024-06-21 11:56:29+00:00,[],2024-07-08 00:11:23+00:00,2024-06-21 12:28:15+00:00,https://github.com/frappe/erpnext/pull/41981,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2366262104,pull_request,closed,,fix: dynamic_link for party in customer and supplier dashboard,"Closes #41978

Backport 
- version-15-hotfix
- version-14-hotfix,

Support Issue: https://support.frappe.io/app/hd-ticket/17415",ljain112,2024-06-21 10:42:04+00:00,[],2024-07-13 00:10:22+00:00,2024-06-28 06:34:23+00:00,https://github.com/frappe/erpnext/pull/41979,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2366229902,pull_request,closed,,fix: incorrect discount on other item (backport #41956),"When discount is applied on other item, don't update `discount_amount` value returned from server side, as that amount is calculated for the current items. Fixing this logic on server-side looks difficult at the moment, as the methods only work in the current items' context.

Only updating the discount percentage is enough, as the rest of the UI logic will recalculate the discounted amount for that other item.

Ex:
1. Create a Pricing rule with Discount on Other item enabled for `brand`. 
![Screenshot from 2024-06-20 12-50-47](https://github.com/frappe/erpnext/assets/3272205/1c0945d7-20e0-49f0-8339-1fc1a2d230ee)

2. Make Sales Invoice with the primary item on which the rule will be triggered and the discounted item 

Before:

https://github.com/frappe/erpnext/assets/3272205/8adffcef-d841-405e-a00c-bff92a29a6a1



After:

https://github.com/frappe/erpnext/assets/3272205/4bfc467d-1f1d-4ef4-8fee-9a61010512ac


<hr>This is an automatic backport of pull request #41956 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-21 10:23:57+00:00,['ruthra-kumar'],2024-07-19 00:09:58+00:00,2024-06-21 10:25:22+00:00,https://github.com/frappe/erpnext/pull/41977,"[('released', None)]","[{'comment_id': 2205110416, 'issue_id': 2366229902, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 21, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:21 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2366228912,pull_request,closed,,fix: pricing rule with and without 'apply multiple' and priority,"Change in behavior on `Apply Multiple Pricing Rules`:
`Apply Multiple Pricing Rules` only takes effect when all the pricing rules identified for an item has it enabled. Else, Priority is applied and only the highest priority takes effect.

Combining rules with and without `Apply Multiple Pricing Rules` enabled doesn't make sense. Hence the change.",ruthra-kumar,2024-06-21 10:23:23+00:00,[],2024-07-08 00:11:17+00:00,2024-06-23 00:01:20+00:00,https://github.com/frappe/erpnext/pull/41976,"[('backport version-15-hotfix', '')]",[],
2366226084,pull_request,closed,,fix: group by in item-wise purchase register,"regression: https://github.com/frappe/erpnext/pull/41424
Version: 15 and 14

**Before:** 


https://github.com/frappe/erpnext/assets/141945075/8ead3d7f-b081-4bde-adef-142e6a1e15e6

**After:**


https://github.com/frappe/erpnext/assets/141945075/380be6c9-bea2-49ac-b48c-8fd4f37f60c4

",Nihantra-Patel,2024-06-21 10:21:59+00:00,[],2024-07-20 00:09:38+00:00,2024-07-04 09:07:35+00:00,https://github.com/frappe/erpnext/pull/41975,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2209871179, 'issue_id': 2366226084, 'author': 'ruthra-kumar', 'body': '@mergify backport version-14 version-15', 'created_at': datetime.datetime(2024, 7, 5, 2, 5, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2209871234, 'issue_id': 2366226084, 'author': 'mergify[bot]', 'body': '> backport version-14 version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42190 fix: group by in item-wise purchase register (backport #41975)](https://github.com/frappe/erpnext/pull/42190) has been created for branch `version-14`\n* [#42191 fix: group by in item-wise purchase register (backport #41975)](https://github.com/frappe/erpnext/pull/42191) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-14 version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 7, 5, 2, 5, 9, tzinfo=datetime.timezone.utc)}]","ruthra-kumar on (2024-07-05 02:05:02 UTC): @mergify backport version-14 version-15

mergify[bot] on (2024-07-05 02:05:09 UTC): #### ✅ Backports have been created

<details>

* [#42190 fix: group by in item-wise purchase register (backport #41975)](https://github.com/frappe/erpnext/pull/42190) has been created for branch `version-14`
* [#42191 fix: group by in item-wise purchase register (backport #41975)](https://github.com/frappe/erpnext/pull/42191) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-14 version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2366002334,pull_request,closed,,fix: decimal issue in pick list,,rohitwaghchaure,2024-06-21 08:23:17+00:00,[],2024-07-08 00:11:24+00:00,2024-06-21 12:11:48+00:00,https://github.com/frappe/erpnext/pull/41972,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2365795947,pull_request,closed,,fix: Wrong calculation issue because of parseFloat.,"1. parseFloat considers value before comma so 22,000 becomes 22 only. So i replaced all the commas from currency.

![issue screenshot](https://github.com/frappe/erpnext/assets/142893750/3d682cc5-72c9-4db4-bd1c-119b68dbe628)
",rohitkumar8848,2024-06-21 06:12:15+00:00,[],2025-01-18 00:10:06+00:00,2025-01-03 08:02:12+00:00,https://github.com/frappe/erpnext/pull/41970,"[('inactive', '')]","[{'comment_id': 2235252297, 'issue_id': 2365795947, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 18, 3, 38, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275584328, 'issue_id': 2365795947, 'author': 'devdiogenes', 'body': 'Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue', 'created_at': datetime.datetime(2024, 8, 8, 11, 25, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2277361419, 'issue_id': 2365795947, 'author': 'rohitkumar8848', 'body': '> Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue\r\n\r\nI do not know exactly. But i think check do not run for the contributors who are contributing first time.', 'created_at': datetime.datetime(2024, 8, 9, 7, 47, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2277713347, 'issue_id': 2365795947, 'author': 'devdiogenes', 'body': '> > Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue\r\n> \r\n> I do not know exactly. But i think check do not run for the contributors who are contributing first time.\r\n\r\nThanks', 'created_at': datetime.datetime(2024, 8, 9, 11, 12, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2308582765, 'issue_id': 2365795947, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 25, 0, 8, 1, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-07-18 03:38:11 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

devdiogenes on (2024-08-08 11:25:07 UTC): Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue

rohitkumar8848 (Issue Creator) on (2024-08-09 07:47:32 UTC): I do not know exactly. But i think check do not run for the contributors who are contributing first time.

devdiogenes on (2024-08-09 11:12:04 UTC): Thanks

stale[bot] on (2024-08-25 00:08:01 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2364330630,pull_request,closed,,fix: move condition for shipment,Does not need backports (it's included in the backports of the original PR that introduced this issue).,barredterra,2024-06-20 12:33:16+00:00,[],2024-07-08 00:11:30+00:00,2024-06-20 12:34:39+00:00,https://github.com/frappe/erpnext/pull/41966,[],[],
2364221758,pull_request,closed,,fix: this.frm.events.update_cost is not a function (backport #41960),<hr>This is an automatic backport of pull request #41960 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-20 11:36:32+00:00,['rohitwaghchaure'],2024-07-20 00:09:41+00:00,2024-07-01 12:49:01+00:00,https://github.com/frappe/erpnext/pull/41965,"[('released', None)]","[{'comment_id': 2180459679, 'issue_id': 2364221758, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d5ed4582c360784863caa223ac74b1bed769032a has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-41960\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit d5ed4582c3.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/manufacturing/doctype/bom_creator/bom_creator.js\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/manufacturing/doctype/workstation/workstation.json\n\tboth modified:   erpnext/manufacturing/doctype/workstation/workstation.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 20, 11, 36, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2205108927, 'issue_id': 2364221758, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 6, 45, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-20 11:36:34 UTC): Cherry-pick of d5ed4582c360784863caa223ac74b1bed769032a has failed:
```
On branch mergify/bp/version-15-hotfix/pr-41960
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit d5ed4582c3.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/manufacturing/doctype/bom_creator/bom_creator.js

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/manufacturing/doctype/workstation/workstation.json
	both modified:   erpnext/manufacturing/doctype/workstation/workstation.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-03 05:06:45 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2364045274,pull_request,closed,,fix: add fetch from to item_group and brand,fix: add fetch from to item_group and brand,nipunanr,2024-06-20 10:03:07+00:00,[],2025-01-14 00:09:58+00:00,2024-12-30 16:12:47+00:00,https://github.com/frappe/erpnext/pull/41964,"[('inactive', '')]","[{'comment_id': 2211533150, 'issue_id': 2364045274, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 6, 0, 21, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2211569397, 'issue_id': 2364045274, 'author': 'nipunanr', 'body': 'Is this a possible fix?', 'created_at': datetime.datetime(2024, 7, 6, 1, 38, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2254045880, 'issue_id': 2364045274, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 27, 8, 14, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2268187819, 'issue_id': 2364045274, 'author': 'nipunanr', 'body': 'need review', 'created_at': datetime.datetime(2024, 8, 5, 5, 12, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275583822, 'issue_id': 2364045274, 'author': 'devdiogenes', 'body': 'Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue', 'created_at': datetime.datetime(2024, 8, 8, 11, 24, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311359440, 'issue_id': 2364045274, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 27, 0, 48, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2316624052, 'issue_id': 2364045274, 'author': 'nipunanr', 'body': '> Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue\r\n\r\nSorry. No Idea about it', 'created_at': datetime.datetime(2024, 8, 29, 3, 3, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2350772227, 'issue_id': 2364045274, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 14, 1, 42, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392711400, 'issue_id': 2364045274, 'author': 'nipunanr', 'body': 'Active', 'created_at': datetime.datetime(2024, 10, 4, 3, 11, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2461734221, 'issue_id': 2364045274, 'author': 'nipunanr', 'body': 'Active', 'created_at': datetime.datetime(2024, 11, 7, 9, 29, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504808644, 'issue_id': 2364045274, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 27, 21, 39, 11, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-07-06 00:21:28 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

nipunanr (Issue Creator) on (2024-07-06 01:38:05 UTC): Is this a possible fix?

stale[bot] on (2024-07-27 08:14:14 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

nipunanr (Issue Creator) on (2024-08-05 05:12:19 UTC): need review

devdiogenes on (2024-08-08 11:24:50 UTC): Hello. Do you know why your pull request not runned the checks? The pull requests I made in the ERPNext is with the same issue

stale[bot] on (2024-08-27 00:48:45 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

nipunanr (Issue Creator) on (2024-08-29 03:03:45 UTC): Sorry. No Idea about it

stale[bot] on (2024-09-14 01:42:41 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

nipunanr (Issue Creator) on (2024-10-04 03:11:54 UTC): Active

nipunanr (Issue Creator) on (2024-11-07 09:29:59 UTC): Active

stale[bot] on (2024-11-27 21:39:11 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2363905186,pull_request,closed,,fix: add string for translation (backport #41903),"fix: add string for translation

<hr>This is an automatic backport of pull request #41903 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-20 08:55:27+00:00,[],2024-07-19 00:09:56+00:00,2024-06-20 11:35:39+00:00,https://github.com/frappe/erpnext/pull/41963,"[('released', None)]","[{'comment_id': 2205110507, 'issue_id': 2363905186, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 27, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:27 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2363899945,pull_request,closed,,fix: expense account from item group not fetched (backport #41957),expense account set in the Item group not fetching in the stock entry <hr>This is an automatic backport of pull request #41957 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-20 08:53:16+00:00,['rohitwaghchaure'],2024-07-19 00:10:23+00:00,2024-06-29 05:29:58+00:00,https://github.com/frappe/erpnext/pull/41962,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2197856010, 'issue_id': 2363899945, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 6, 29, 2, 12, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2197856135, 'issue_id': 2363899945, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42101 fix: expense account from item group not fetched (backport #41957) (backport #41962)](https://github.com/frappe/erpnext/pull/42101) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 6, 29, 2, 12, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2205109265, 'issue_id': 2363899945, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 7, 6, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-29 02:12:24 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-06-29 02:12:53 UTC): #### ✅ Backports have been created

<details>

* [#42101 fix: expense account from item group not fetched (backport #41957) (backport #41962)](https://github.com/frappe/erpnext/pull/42101) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-07-03 05:07:06 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2363894526,pull_request,closed,,fix: do not show zero balance stock items in stock balance report (backport #41958),"<img width=""1343"" alt=""Screenshot 2024-06-20 at 1 49 21 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/32e8dad3-635f-4fd2-b777-740b51a588b8"">
<hr>This is an automatic backport of pull request #41958 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-20 08:50:33+00:00,['rohitwaghchaure'],2024-07-19 00:09:55+00:00,2024-06-20 11:34:59+00:00,https://github.com/frappe/erpnext/pull/41961,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205110551, 'issue_id': 2363894526, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 30, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:30 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2363889166,pull_request,closed,,fix: this.frm.events.update_cost is not a function,,rohitwaghchaure,2024-06-20 08:48:03+00:00,[],2024-07-08 00:11:33+00:00,2024-06-20 11:35:19+00:00,https://github.com/frappe/erpnext/pull/41960,"[('backport version-15-hotfix', '')]",[],
2363879589,pull_request,closed,,fix: Don't allow negative amount on Payment Request #41905,"<img width=""947"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8811185/12a9aa3e-71bb-49e7-9acb-0d5c44bea7af"">
",hiteshprajapati,2024-06-20 08:43:26+00:00,['ruthra-kumar'],2024-08-03 00:09:46+00:00,2024-07-19 05:03:50+00:00,https://github.com/frappe/erpnext/pull/41959,"[('backport version-15-hotfix', '')]","[{'comment_id': 2211533159, 'issue_id': 2363879589, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 6, 0, 21, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2216944804, 'issue_id': 2363879589, 'author': 'hiteshprajapati', 'body': '@deepeshgarg007 @ruthra-kumar : is anything missing in this change?', 'created_at': datetime.datetime(2024, 7, 9, 8, 31, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2216982595, 'issue_id': 2363879589, 'author': 'ruthra-kumar', 'body': '@hiteshprajapati \r\nThe Payment Request with a -ve amount in the screenshot, could you describe how that value came to be? Can you provide a simple replicable scenario?', 'created_at': datetime.datetime(2024, 7, 9, 8, 46, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2217180847, 'issue_id': 2363879589, 'author': 'hiteshprajapati', 'body': '> @hiteshprajapati The Payment Request with a -ve amount in the screenshot, could you describe how that value came to be? Can you provide a simple replicable scenario?\r\n\r\n@ruthra-kumar : I am not sure whether I understand your question correctly. \r\nAbout the screenshot, it is taken while creating payment request with -ve amount after making the code changes locally. Its new Payment Request and not the existing one and when I hit the save button, non-negative validation error returned by framework due to my changes', 'created_at': datetime.datetime(2024, 7, 9, 9, 43, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2235971885, 'issue_id': 2363879589, 'author': 'hiteshprajapati', 'body': '> > @hiteshprajapati The Payment Request with a -ve amount in the screenshot, could you describe how that value came to be? Can you provide a simple replicable scenario?\r\n> \r\n> @ruthra-kumar : I am not sure whether I understand your question correctly. About the screenshot, it is taken while creating payment request with -ve amount after making the code changes locally. Its new Payment Request and not the existing one and when I hit the save button, non-negative validation error returned by framework due to my changes\r\n\r\n@ruthra-kumar : could you please provide your thoughts ? Its been here for a while', 'created_at': datetime.datetime(2024, 7, 18, 8, 49, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2236316848, 'issue_id': 2363879589, 'author': 'ruthra-kumar', 'body': '@hiteshprajapati \r\n\r\nFrom the screenshot, it looks like payment request is made against purchase order. But -ve purchase orders are not possible. So, how was the PO made?', 'created_at': datetime.datetime(2024, 7, 18, 11, 57, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2236401825, 'issue_id': 2363879589, 'author': 'hiteshprajapati', 'body': '> @hiteshprajapati\r\n> \r\n> From the screenshot, it looks like payment request is made against purchase order. But -ve purchase orders are not possible. So, how was the PO made?\r\n\r\n@ruthra-kumar : Yes, the payment request is made against the purchase order. But you can edit the amount while creating payment request from PO. Please refer this screenshot\r\n\r\nhttps://github.com/user-attachments/assets/3ed2ec6a-0366-4ab8-8477-73b8cccc2360', 'created_at': datetime.datetime(2024, 7, 18, 12, 42, 49, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-07-06 00:21:29 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

hiteshprajapati (Issue Creator) on (2024-07-09 08:31:37 UTC): @deepeshgarg007 @ruthra-kumar : is anything missing in this change?

ruthra-kumar (Assginee) on (2024-07-09 08:46:37 UTC): @hiteshprajapati 
The Payment Request with a -ve amount in the screenshot, could you describe how that value came to be? Can you provide a simple replicable scenario?

hiteshprajapati (Issue Creator) on (2024-07-09 09:43:47 UTC): @ruthra-kumar : I am not sure whether I understand your question correctly. 
About the screenshot, it is taken while creating payment request with -ve amount after making the code changes locally. Its new Payment Request and not the existing one and when I hit the save button, non-negative validation error returned by framework due to my changes

hiteshprajapati (Issue Creator) on (2024-07-18 08:49:53 UTC): @ruthra-kumar : could you please provide your thoughts ? Its been here for a while

ruthra-kumar (Assginee) on (2024-07-18 11:57:46 UTC): @hiteshprajapati 

From the screenshot, it looks like payment request is made against purchase order. But -ve purchase orders are not possible. So, how was the PO made?

hiteshprajapati (Issue Creator) on (2024-07-18 12:42:49 UTC): @ruthra-kumar : Yes, the payment request is made against the purchase order. But you can edit the amount while creating payment request from PO. Please refer this screenshot

https://github.com/user-attachments/assets/3ed2ec6a-0366-4ab8-8477-73b8cccc2360

"
2363853785,pull_request,closed,,fix: do not show zero balance stock items in stock balance report,"<img width=""1343"" alt=""Screenshot 2024-06-20 at 1 49 21 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/32e8dad3-635f-4fd2-b777-740b51a588b8"">
",rohitwaghchaure,2024-06-20 08:30:20+00:00,[],2024-07-08 00:11:35+00:00,2024-06-20 08:49:13+00:00,https://github.com/frappe/erpnext/pull/41958,"[('backport version-15-hotfix', '')]",[],
2363816219,pull_request,closed,,fix: expense account from item group not fetched,expense account set in the Item group not fetching in the stock entry ,rohitwaghchaure,2024-06-20 08:13:19+00:00,[],2024-07-08 00:11:34+00:00,2024-06-20 08:52:22+00:00,https://github.com/frappe/erpnext/pull/41957,"[('backport version-15-hotfix', '')]",[],
2363637404,pull_request,closed,,fix: incorrect discount on other item,"When discount is applied on other item, don't update `discount_amount` value returned from server side, as that amount is calculated for the current items. Fixing this logic on server-side looks difficult at the moment, as the methods only work in the current items' context.

Only updating the discount percentage is enough, as the rest of the UI logic will recalculate the discounted amount for that other item.

Ex:
1. Create a Pricing rule with Discount on Other item enabled for `brand`. 
![Screenshot from 2024-06-20 12-50-47](https://github.com/frappe/erpnext/assets/3272205/1c0945d7-20e0-49f0-8339-1fc1a2d230ee)

2. Make Sales Invoice with the primary item on which the rule will be triggered and the discounted item 

Before:

https://github.com/frappe/erpnext/assets/3272205/8adffcef-d841-405e-a00c-bff92a29a6a1



After:

https://github.com/frappe/erpnext/assets/3272205/4bfc467d-1f1d-4ef4-8fee-9a61010512ac


",ruthra-kumar,2024-06-20 06:35:06+00:00,[],2024-07-08 00:11:25+00:00,2024-06-21 10:21:17+00:00,https://github.com/frappe/erpnext/pull/41956,"[('backport version-15-hotfix', '')]",[],
2363565731,pull_request,closed,,fix: consistent query field name in item wise purchase register with …,Manual Backport of #41927,ljain112,2024-06-20 05:43:13+00:00,[],2024-07-20 00:09:50+00:00,2024-06-20 08:33:12+00:00,https://github.com/frappe/erpnext/pull/41954,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2205106112, 'issue_id': 2363565731, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 3, 32, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:03:32 UTC): :tada: This issue has been resolved in version 14.70.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2363262431,pull_request,closed,,#39472 Update on Valuation Method for Items with Moving Average,"This changes applies like this: if Moving Average is set as the default valuation method in the company, or if item is specified to use the Moving Average method, the system will now prioritize this method over the purchase rate of the Serial or Batch Bundle.

This change ensures that inventory valuation remains consistent and aligns with the preferred accounting practices set in the configurations.

Reference: #39472",monroy95,2024-06-19 23:53:38+00:00,[],2024-07-08 00:11:29+00:00,2024-06-20 08:34:32+00:00,https://github.com/frappe/erpnext/pull/41952,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2180125618, 'issue_id': 2363262431, 'author': 'rohitwaghchaure', 'body': '@monroy95 This is incorrect fix', 'created_at': datetime.datetime(2024, 6, 20, 8, 34, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2180941602, 'issue_id': 2363262431, 'author': 'chrisdent', 'body': 'Why is it incorrect? \r\n\r\nAdding a parameter in the Stock settings would be better?', 'created_at': datetime.datetime(2024, 6, 20, 15, 8, 55, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-06-20 08:34:32 UTC): @monroy95 This is incorrect fix

chrisdent on (2024-06-20 15:08:55 UTC): Why is it incorrect? 

Adding a parameter in the Stock settings would be better?

"
2361836149,pull_request,closed,,refactor: item-wise purchase history (query to script report),"**Before:**

- item-wise sales history is a server script report, and item-wise purchase history is a query report. It is difficult to view in the query report because it lacks filters.

![image](https://github.com/frappe/erpnext/assets/141945075/fd9b55b9-fa4e-4a8e-8ed4-55e2cac51d3a)

**After:**

- We've developed a server script report from the query report. The ""item-wise purchase history"" report now resembles the ""item-wise sales history"" report, making it easier to view.


https://github.com/frappe/erpnext/assets/141945075/b3e551ab-b907-4087-b14e-6331374fe2d5

",Nihantra-Patel,2024-06-19 09:21:13+00:00,['ruthra-kumar'],2024-09-17 00:09:59+00:00,2024-08-27 11:14:45+00:00,https://github.com/frappe/erpnext/pull/41949,"[('squash', 'Meant to tell reviewers that this PR should be squashed into a single commit while merging.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2312274241, 'issue_id': 2361836149, 'author': 'ruthra-kumar', 'body': '@Nihantra-Patel \r\nDo want this backported?', 'created_at': datetime.datetime(2024, 8, 27, 11, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312277784, 'issue_id': 2361836149, 'author': 'Nihantra-Patel', 'body': 'Yes @ruthra-kumar', 'created_at': datetime.datetime(2024, 8, 27, 11, 15, 53, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-08-27 11:15:00 UTC): @Nihantra-Patel 
Do want this backported?

Nihantra-Patel (Issue Creator) on (2024-08-27 11:15:53 UTC): Yes @ruthra-kumar

"
2361339301,pull_request,closed,,perf: Performance optmization for Purchase Invoice submission (backport #40263),"### Performance optimization for Purchase Invoice submission and cancellation
This PR mainly tries to optimize the Purchase Invoice where there are a large number of service items in the invoice and provisional accounting is enabled.

**Reported Usecase:**
Number of service items in Purchase Invoice: 2750
Submit Time: ~10 mins
Cancel Time: > 20 mins (cancelled the job)

**After Optimization:**
Submit Time: ~2 mins
Cancel Time: ~30 secs

<hr>This is an automatic backport of pull request #40263 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-19 05:28:22+00:00,['nabinhait'],2024-07-19 00:10:21+00:00,2024-06-27 12:02:43+00:00,https://github.com/frappe/erpnext/pull/41946,"[('accounts', ''), ('stock', None), ('released', None)]","[{'comment_id': 2177777080, 'issue_id': 2361339301, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d7b738ff61e0ebab62ff2c15247f90b79401e9a4 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit d7b738ff61.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of f204d810bba5a6fdb3137b780489907c30b650fc has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit f204d810bb.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/budget_account/budget_account.json\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/budget/budget.py\n\n```\n\n\nCherry-pick of e4bd1738752896e9a50231561c8ca5f3a2ee15c5 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 5 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit e4bd173875.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/accounting_dimension_filter/accounting_dimension_filter.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 49c74369a58c313f114a8a9d99bb3b316febe4cf has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 8 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 49c74369a5.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 6ff9e6ee848e68c1d84bc17ad682b376214c5d59 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 10 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 6ff9e6ee84.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/get_item_details.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of d279e23623f13f93c6f7c870fef0c2335e6d2b15 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 11 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit d279e23623.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/item_price/item_price.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of b07769d8d7890580a9c47598bd166347ca8c1aec has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40263\nYour branch is ahead of \'origin/version-15-hotfix\' by 13 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit b07769d8d7.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/gl_entry/gl_entry.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 19, 5, 28, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2194087471, 'issue_id': 2361339301, 'author': 'ruthra-kumar', 'body': ""@nabinhait\r\nCan you check the code in `purchase_invoice.py`? I've resolved the conflicts as much as possible, but it would be better for you to check that it matches the changes done to that file in https://github.com/frappe/erpnext/pull/40263"", 'created_at': datetime.datetime(2024, 6, 27, 8, 23, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2200019070, 'issue_id': 2361339301, 'author': 'vorasmit', 'body': '**Issue:** \r\n```\r\nTraceback (most recent call last):\r\n  File ""/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/contextlib.py"", line 81, in inner\r\n    return func(*args, **kwds)\r\n           ^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/india_compliance/india_compliance/gst_india/overrides/test_ineligible_itc.py"", line 770, in test_purchase_receipt_and_then_purchase_invoice_for_provisional_expense\r\n    doc.submit()\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1048, in submit\r\n    return self._submit()\r\n           ^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1031, in _submit\r\n    return self.save()\r\n           ^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 337, in save\r\n    return self._save(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 3[59](https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320#step:12:60), in _save\r\n    return self.insert()\r\n           ^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 315, in insert\r\n    self.run_post_save_methods()\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods\r\n    self.run_method(""on_submit"")\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 962, in run_method\r\n    out = Document.hook(fn)(self, *args, **kwargs)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1322, in composer\r\n    return composed(self, method, *args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1304, in runner\r\n    add_to_return_value(self, fn(self, *args, **kwargs))\r\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in fn\r\n    return method_object(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 770, in on_submit\r\n    self.make_gl_entries()\r\n  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 801, in make_gl_entries\r\n    gl_entries = self.get_gl_entries()\r\n                 ^^^^^^^^^^^^^^^^^^^^^\r\n  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 8[61](https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320#step:12:62), in get_gl_entries\r\n    self.make_item_gl_entries(gl_entries)\r\n  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 1101, in make_item_gl_entries\r\n    self.make_provisional_gl_entry(gl_entries, item)\r\n  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 1244, in make_provisional_gl_entry\r\n    provisional_account,\r\n    ^^^^^^^^^^^^^^^^^^^\r\nUnboundLocalError: cannot access local variable \'provisional_account\' where it is not associated with a value\r\n```\r\n\r\nReference: https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320', 'created_at': datetime.datetime(2024, 7, 1, 12, 29, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2205109345, 'issue_id': 2361339301, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 7, 12, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-19 05:28:24 UTC): Cherry-pick of d7b738ff61e0ebab62ff2c15247f90b79401e9a4 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit d7b738ff61.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of f204d810bba5a6fdb3137b780489907c30b650fc has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit f204d810bb.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/budget_account/budget_account.json

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/budget/budget.py

```


Cherry-pick of e4bd1738752896e9a50231561c8ca5f3a2ee15c5 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 5 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit e4bd173875.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/accounting_dimension_filter/accounting_dimension_filter.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 49c74369a58c313f114a8a9d99bb3b316febe4cf has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 8 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 49c74369a5.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 6ff9e6ee848e68c1d84bc17ad682b376214c5d59 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 10 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 6ff9e6ee84.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/get_item_details.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of d279e23623f13f93c6f7c870fef0c2335e6d2b15 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 11 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit d279e23623.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/item_price/item_price.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of b07769d8d7890580a9c47598bd166347ca8c1aec has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40263
Your branch is ahead of 'origin/version-15-hotfix' by 13 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit b07769d8d7.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/gl_entry/gl_entry.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

ruthra-kumar on (2024-06-27 08:23:25 UTC): @nabinhait
Can you check the code in `purchase_invoice.py`? I've resolved the conflicts as much as possible, but it would be better for you to check that it matches the changes done to that file in https://github.com/frappe/erpnext/pull/40263

vorasmit on (2024-07-01 12:29:50 UTC): **Issue:** 
```
Traceback (most recent call last):
  File ""/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/contextlib.py"", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/india_compliance/india_compliance/gst_india/overrides/test_ineligible_itc.py"", line 770, in test_purchase_receipt_and_then_purchase_invoice_for_provisional_expense
    doc.submit()
  File ""/home/runner/frappe-bench/apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 3[59](https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320#step:12:60), in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 770, in on_submit
    self.make_gl_entries()
  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 801, in make_gl_entries
    gl_entries = self.get_gl_entries()
                 ^^^^^^^^^^^^^^^^^^^^^
  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 8[61](https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320#step:12:62), in get_gl_entries
    self.make_item_gl_entries(gl_entries)
  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 1101, in make_item_gl_entries
    self.make_provisional_gl_entry(gl_entries, item)
  File ""/home/runner/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py"", line 1244, in make_provisional_gl_entry
    provisional_account,
    ^^^^^^^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'provisional_account' where it is not associated with a value
```

Reference: https://github.com/resilient-tech/india-compliance/actions/runs/9741427737/job/26880617909?pr=2320

frappe-pr-bot on (2024-07-03 05:07:12 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2360877919,pull_request,closed,,fix: migrate lead notes (backport #41421),"### Reproduce

On a v13 instance,

(1) **User** _A_ creates a **Lead** and adds some notes,
(2) **User** _B_ modifies the **Lead** status,

Then, the site is migrated to v14.

### Before

**User** _B_ is set as the creator of the notes.

### After

The creator of the note and it's creation date are not set, because they are not known.

![Bildschirmfoto 2024-06-14 um 17 46 37](https://github.com/frappe/erpnext/assets/14891507/b2bf8d6a-740b-4be0-aae3-b4a07320f2eb)
<hr>This is an automatic backport of pull request #41421 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-18 22:57:29+00:00,[],2024-07-08 00:11:54+00:00,2024-06-18 23:17:52+00:00,https://github.com/frappe/erpnext/pull/41945,"[('released', None)]","[{'comment_id': 2177849437, 'issue_id': 2360877919, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 38, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:38 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2360877811,pull_request,closed,,fix: migrate lead notes (backport #41421),"### Reproduce

On a v13 instance,

(1) **User** _A_ creates a **Lead** and adds some notes,
(2) **User** _B_ modifies the **Lead** status,

Then, the site is migrated to v14.

### Before

**User** _B_ is set as the creator of the notes.

### After

The creator of the note and it's creation date are not set, because they are not known.

![Bildschirmfoto 2024-06-14 um 17 46 37](https://github.com/frappe/erpnext/assets/14891507/b2bf8d6a-740b-4be0-aae3-b4a07320f2eb)
<hr>This is an automatic backport of pull request #41421 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-18 22:57:22+00:00,[],2024-07-08 00:12:03+00:00,2024-06-18 23:17:49+00:00,https://github.com/frappe/erpnext/pull/41944,"[('released', None)]","[{'comment_id': 2177846225, 'issue_id': 2360877811, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 3, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:26:03 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2360544793,pull_request,closed,,fix: asset value correction in fixed asset register,"Fixed issue in Fixed Asset Register where asset values were incorrectly displayed based only on the current date instead of respecting the selected date range.
no-docs",khushi8112,2024-06-18 19:24:58+00:00,[],2024-07-20 00:09:53+00:00,2024-06-25 10:34:20+00:00,https://github.com/frappe/erpnext/pull/41943,"[('assets', ''), ('released', None), ('backport version-14-hotfix', 'backport to version 14')]","[{'comment_id': 2205105971, 'issue_id': 2360544793, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 3, 23, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:03:23 UTC): :tada: This issue has been resolved in version 14.70.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2359405735,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-06-18 09:34:30+00:00,[],2024-07-08 00:12:04+00:00,2024-06-19 06:24:25+00:00,https://github.com/frappe/erpnext/pull/41942,"[('stock', None), ('buying', None), ('released', None)]","[{'comment_id': 2177846173, 'issue_id': 2359405735, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-06-19 06:26:00 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2359405401,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-06-18 09:34:21+00:00,[],2024-07-08 00:11:55+00:00,2024-06-19 06:26:54+00:00,https://github.com/frappe/erpnext/pull/41941,"[('stock', None), ('buying', None), ('released', None)]","[{'comment_id': 2177849366, 'issue_id': 2359405401, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 35, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-06-19 06:28:35 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2359399460,pull_request,closed,,chore: patch to enable total number of booked depreciations field,"This PR addresses a bug in the calculation of the ""Total Number of Booked Depreciation"" field by implementing a necessary patch that was overlooked during the initial release. Additionally, it includes optimisations to related code for improved system efficiency.
no-docs",khushi8112,2024-06-18 09:31:25+00:00,[],2024-07-12 00:12:04+00:00,2024-06-26 10:58:28+00:00,https://github.com/frappe/erpnext/pull/41940,"[('assets', ''), ('backport version-15-hotfix', '')]",[],
2359325745,pull_request,closed,,chore: patch to enable total number of booked depreciations field,"This PR addresses a bug in the calculation of the ""Total Number of Booked Depreciation"" field by implementing a necessary patch that was overlooked during the initial release. Additionally, it includes optimisations to related code for improved system efficiency.
no-docs
",khushi8112,2024-06-18 08:56:05+00:00,[],2024-07-10 00:11:15+00:00,2024-06-18 09:19:24+00:00,https://github.com/frappe/erpnext/pull/41939,"[('assets', ''), ('backport version-15-hotfix', '')]",[],
2358900967,pull_request,closed,,refactor: ignore unreconcile doc for PO and SO on cancel/delete (backport #41900),"Cannot cancel Sales Order if Payment is unreconciled.

Internal Support Ticket: https://support.frappe.io/app/hd-ticket/17140

Error Message:
![image](https://github.com/frappe/erpnext/assets/108322669/69beeff7-c059-4326-8b7a-6cc74ca17425)

<hr>This is an automatic backport of pull request #41900 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-18 04:58:35+00:00,[],2024-07-08 00:11:53+00:00,2024-06-18 05:24:51+00:00,https://github.com/frappe/erpnext/pull/41938,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177849512, 'issue_id': 2358900967, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 41, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:41 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2358900258,pull_request,closed,,refactor: ignore unreconcile doc for PO and SO on cancel/delete (backport #41900),"Cannot cancel Sales Order if Payment is unreconciled.

Internal Support Ticket: https://support.frappe.io/app/hd-ticket/17140

Error Message:
![image](https://github.com/frappe/erpnext/assets/108322669/69beeff7-c059-4326-8b7a-6cc74ca17425)

<hr>This is an automatic backport of pull request #41900 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-18 04:57:58+00:00,[],2024-07-08 00:12:01+00:00,2024-06-18 06:27:27+00:00,https://github.com/frappe/erpnext/pull/41937,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2175003479, 'issue_id': 2358900258, 'author': 'mergify[bot]', 'body': 'Cherry-pick of b618d685c62837657fe808d6c30dc3582a12d0ec has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-41900\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit b618d685c6.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/buying/doctype/purchase_order/purchase_order.py\n\tmodified:   erpnext/selling/doctype/sales_order/sales_order.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/purchase_order/purchase_order.js\n\tboth modified:   erpnext/selling/doctype/sales_order/sales_order.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 18, 4, 57, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177846348, 'issue_id': 2358900258, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 9, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-18 04:57:59 UTC): Cherry-pick of b618d685c62837657fe808d6c30dc3582a12d0ec has failed:
```
On branch mergify/bp/version-14-hotfix/pr-41900
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit b618d685c6.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/buying/doctype/purchase_order/purchase_order.py
	modified:   erpnext/selling/doctype/sales_order/sales_order.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/purchase_order/purchase_order.js
	both modified:   erpnext/selling/doctype/sales_order/sales_order.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:26:09 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2357797143,pull_request,closed,,feat: add production plan test for complex bom qtys,"Check quantity calculation for complex BOMs

no-docs
version-14-hotfix
version-15-hotfix",casesolved-co-uk,2024-06-17 16:51:38+00:00,[],2024-07-10 00:11:17+00:00,2024-06-18 04:12:35+00:00,https://github.com/frappe/erpnext/pull/41936,[],[],
2357213742,pull_request,closed,,fix: reposting validation related PCV (backport #41931),Use posting date instead of the fiscal year end date while validating reposting with PCV<hr>This is an automatic backport of pull request #41931 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-17 12:22:21+00:00,['rohitwaghchaure'],2024-07-08 00:11:52+00:00,2024-06-18 04:11:43+00:00,https://github.com/frappe/erpnext/pull/41935,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177849571, 'issue_id': 2357213742, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 44, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:44 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2357213676,pull_request,closed,,fix: reposting validation related PCV (backport #41931),Use posting date instead of the fiscal year end date while validating reposting with PCV<hr>This is an automatic backport of pull request #41931 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-17 12:22:19+00:00,['rohitwaghchaure'],2024-07-08 00:12:00+00:00,2024-06-18 04:11:58+00:00,https://github.com/frappe/erpnext/pull/41934,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177846413, 'issue_id': 2357213676, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 12, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:26:12 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2357212370,pull_request,closed,,fix: received_qty not set,"While making purchase receipt from purchase order, received_qty not set in the line item which cause the below error

<img width=""507"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8780500/9a1bc185-f8e7-42f0-b88d-a1617320d53f"">
",rohitwaghchaure,2024-06-17 12:21:41+00:00,[],2024-07-16 00:10:55+00:00,2024-07-01 13:53:37+00:00,https://github.com/frappe/erpnext/pull/41933,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2357129992,pull_request,closed,,fix: add strings for translation in pos_item_cart.js (backport #41907),"fix: add strings for translation in pos_item_cart.js
<hr>This is an automatic backport of pull request #41907 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 11:40:51+00:00,[],2024-07-08 00:11:50+00:00,2024-06-17 12:19:24+00:00,https://github.com/frappe/erpnext/pull/41932,"[('released', None)]","[{'comment_id': 2177849609, 'issue_id': 2357129992, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 47, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:47 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2357094380,pull_request,closed,,fix: reposting validation related PCV,Use posting date instead of the fiscal year end date while validating reposting with PCV,rohitwaghchaure,2024-06-17 11:22:30+00:00,[],2024-07-02 00:09:41+00:00,2024-06-17 12:19:35+00:00,https://github.com/frappe/erpnext/pull/41931,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2356942565,pull_request,closed,,fix: fixed asset value in Fixed Asset Register,"Fixed issue in Fixed Asset Register where asset values were incorrectly displayed based only on the current date instead of respecting the selected date range.
Please refer the screenshot below. Asset value is same even after changing the dates in the filter.
<img width=""1272"" alt=""Screenshot 2024-06-17 at 3 27 26 PM"" src=""https://github.com/frappe/erpnext/assets/142375893/43ebc717-e0c5-4adf-928e-1cae7aa6e75f"">
<img width=""1272"" alt=""Screenshot 2024-06-17 at 3 31 15 PM"" src=""https://github.com/frappe/erpnext/assets/142375893/bdd83539-1036-4e15-9da6-a172d0240da5"">

no-docs",khushi8112,2024-06-17 10:05:27+00:00,[],2024-07-10 00:11:08+00:00,2024-06-25 10:35:04+00:00,https://github.com/frappe/erpnext/pull/41930,"[('assets', ''), ('backport version-15-hotfix', '')]",[],
2356860966,pull_request,closed,,fix: handle NoneType error where customer details are not available in sales register (backport #41920),"Customer Details are not available because customer is deleted.
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 220, in run
    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 81, in generate_report_result
    res = get_report_result(report, filters) or []
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 62, in get_report_result
    res = report.execute_script_report(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 162, in execute_script_report
    res = self.execute_module(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 179, in execute_module
    return frappe.get_attr(method_name)(frappe._dict(filters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/sales_register/sales_register.py"", line 27, in execute
    return _execute(filters)
           ^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/sales_register/sales_register.py"", line 91, in _execute
    ""customer_group"": customer_details.get(inv.customer).get(""customer_group""),
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
```

Support Issue: https://support.frappe.io/app/hd-ticket/17209<hr>This is an automatic backport of pull request #41920 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 09:30:12+00:00,[],2024-07-08 00:11:51+00:00,2024-06-17 11:22:59+00:00,https://github.com/frappe/erpnext/pull/41929,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177849659, 'issue_id': 2356860966, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 50, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:50 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356858087,pull_request,closed,,fix: consistent query field name in item wise purchase register with item wise sales register (backport #41927),"The get_tax_accounts function was using the invoice_item.name field, which caused an issue in the purchase register because the item name was aliased as pii_item_name. This discrepancy led to taxes not being calculated correctly in the purchase register. This PR fixes the aliasing issue to ensure proper tax calculation.

Changes Made

- Removed alias

Impact

- Accurate tax calculations in the item-wise purchase register.

Testing

- Verified that taxes are now calculated correctly in both item-wise sales and purchase registers.Item wise purchase rigster report uses same function as item wise sales register.

Support Issue: 
- https://support.frappe.io/app/hd-ticket/17213
- https://support.frappe.io/app/hd-ticket/17268


<hr>This is an automatic backport of pull request #41927 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 09:28:42+00:00,[],2024-07-08 00:11:49+00:00,2024-06-17 11:23:28+00:00,https://github.com/frappe/erpnext/pull/41928,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177849743, 'issue_id': 2356858087, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 53, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:53 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356817402,pull_request,closed,,fix: consistent query field name in item wise purchase register with item wise sales register,"The get_tax_accounts function was using the invoice_item.name field, which caused an issue in the purchase register because the item name was aliased as pii_item_name. This discrepancy led to taxes not being calculated correctly in the purchase register. This PR fixes the aliasing issue to ensure proper tax calculation.

Changes Made

- Removed alias

Impact

- Accurate tax calculations in the item-wise purchase register.

Testing

- Verified that taxes are now calculated correctly in both item-wise sales and purchase registers.Item wise purchase rigster report uses same function as item wise sales register.

Support Issue: 
- https://support.frappe.io/app/hd-ticket/17213
- https://support.frappe.io/app/hd-ticket/17268


",ljain112,2024-06-17 09:09:26+00:00,[],2024-07-08 00:11:26+00:00,2024-06-17 09:27:08+00:00,https://github.com/frappe/erpnext/pull/41927,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2356738661,pull_request,closed,,fix: item_code filter in item-wise sales-purchase register (backport #41921),"Version 15

fixes: #41910

**Before:**

- Item code field is in the Sales Invoice Item or Purchase Invoice Item, **is not a field of Sales Invoice or Purchase Invoice**.


https://github.com/frappe/erpnext/assets/141945075/699a4f32-e077-48e0-8e3d-9373e013c53d


**After:**

- Also add the item code filter in the item-wise sales register.

https://github.com/frappe/erpnext/assets/141945075/1e348ca0-1386-4399-b89c-2dc5fc9d6e81

<hr>This is an automatic backport of pull request #41921 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 08:32:35+00:00,['Nihantra-Patel'],2024-07-08 00:11:48+00:00,2024-06-17 09:26:21+00:00,https://github.com/frappe/erpnext/pull/41926,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177849805, 'issue_id': 2356738661, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 28, 56, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:28:56 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356729503,pull_request,closed,,fix: spec mobile and email fields for notifications,"This is required to be eligible as receiver in Frappe/Notifications
",blaggacao,2024-06-17 08:29:19+00:00,[],2024-09-17 00:09:56+00:00,2024-08-27 11:42:40+00:00,https://github.com/frappe/erpnext/pull/41925,[],"[{'comment_id': 2185006705, 'issue_id': 2356729503, 'author': 'blaggacao', 'body': 'ping', 'created_at': datetime.datetime(2024, 6, 23, 14, 13, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2263725089, 'issue_id': 2356729503, 'author': 'blaggacao', 'body': '@ruthra-kumar An easy one :smile: context: https://github.com/frappe/frappe/pull/24725, specifically:\r\n- https://github.com/frappe/frappe/pull/24725/files#diff-a2945bf21739af1497474a3e0c35cb846f6f99b5b678880e461f341b751ef1d3R87\r\n- https://github.com/frappe/frappe/pull/24725/files#diff-a2945bf21739af1497474a3e0c35cb846f6f99b5b678880e461f341b751ef1d3R91', 'created_at': datetime.datetime(2024, 8, 1, 18, 39, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312336404, 'issue_id': 2356729503, 'author': 'blaggacao', 'body': '@Mergifyio backport version-15-hotfix', 'created_at': datetime.datetime(2024, 8, 27, 11, 44, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312336743, 'issue_id': 2356729503, 'author': 'mergify[bot]', 'body': '> backport version-15-hotfix\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42952 fix: spec mobile and email fields for notifications (backport #41925)](https://github.com/frappe/erpnext/pull/42952) has been created for branch `version-15-hotfix`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15-hotfix"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 8, 27, 11, 44, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312378558, 'issue_id': 2356729503, 'author': 'blaggacao', 'body': 'Data fields are detected for eligibility in notifications based on the value of the Option field. E.g.:\n\n- `Email` -> eligible for email notificación \n- `Phone` / `Mobile` -> eligible for SMS / Whatsapp notification\n- etc', 'created_at': datetime.datetime(2024, 8, 27, 12, 4, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312380809, 'issue_id': 2356729503, 'author': 'blaggacao', 'body': 'This was already the case (eg. for `Phone` / `Mobile`) prior to https://github.com/frappe/frappe/pull/24725 but is there augmented further.', 'created_at': datetime.datetime(2024, 8, 27, 12, 5, 31, tzinfo=datetime.timezone.utc)}]","blaggacao (Issue Creator) on (2024-06-23 14:13:16 UTC): ping

blaggacao (Issue Creator) on (2024-08-01 18:39:45 UTC): @ruthra-kumar An easy one :smile: context: https://github.com/frappe/frappe/pull/24725, specifically:
- https://github.com/frappe/frappe/pull/24725/files#diff-a2945bf21739af1497474a3e0c35cb846f6f99b5b678880e461f341b751ef1d3R87
- https://github.com/frappe/frappe/pull/24725/files#diff-a2945bf21739af1497474a3e0c35cb846f6f99b5b678880e461f341b751ef1d3R91

blaggacao (Issue Creator) on (2024-08-27 11:44:32 UTC): @Mergifyio backport version-15-hotfix

mergify[bot] on (2024-08-27 11:44:41 UTC): #### ✅ Backports have been created

<details>

* [#42952 fix: spec mobile and email fields for notifications (backport #41925)](https://github.com/frappe/erpnext/pull/42952) has been created for branch `version-15-hotfix`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15-hotfix"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

blaggacao (Issue Creator) on (2024-08-27 12:04:25 UTC): Data fields are detected for eligibility in notifications based on the value of the Option field. E.g.:

- `Email` -> eligible for email notificación 
- `Phone` / `Mobile` -> eligible for SMS / Whatsapp notification
- etc

blaggacao (Issue Creator) on (2024-08-27 12:05:31 UTC): This was already the case (eg. for `Phone` / `Mobile`) prior to https://github.com/frappe/frappe/pull/24725 but is there augmented further.

"
2356618563,pull_request,closed,,fix: duplicate rows fetching in RFQ (backport #41922),"**Issue**

1. Create 2 Material Request with same 2 items with different qty and of same item group as ""Products"" and submit it.
2. Create Request for Quotation using Get Item From —> Material Request.
3. Apply filter of Item Group(Material Request Item) and select Material Request. 
4. System will add same line item two times (see below GIF)


![rfq_get_items_issue](https://github.com/frappe/erpnext/assets/8780500/1b104da5-b308-4572-b715-49b09c6110ec)


**After Fix**


![rfq_get_items_after_fix](https://github.com/frappe/erpnext/assets/8780500/bc85c536-8dfe-4382-89d5-4b6aa66af585)

<hr>This is an automatic backport of pull request #41922 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 07:37:01+00:00,['rohitwaghchaure'],2024-07-08 00:11:47+00:00,2024-06-17 08:28:16+00:00,https://github.com/frappe/erpnext/pull/41924,"[('released', None)]","[{'comment_id': 2177849867, 'issue_id': 2356618563, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:29:00 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356584772,pull_request,closed,,fix: duplicate rows fetching in RFQ,"**Issue**

1. Create 2 Material Request with same 2 items with different qty and of same item group as ""Products"" and submit it.
2. Create Request for Quotation using Get Item From —> Material Request.
3. Apply filter of Item Group(Material Request Item) and select Material Request. 
4. System will add same line item two times (see below GIF)


![rfq_get_items_issue](https://github.com/frappe/erpnext/assets/8780500/1b104da5-b308-4572-b715-49b09c6110ec)


**After Fix**


![rfq_get_items_after_fix](https://github.com/frappe/erpnext/assets/8780500/bc85c536-8dfe-4382-89d5-4b6aa66af585)

",rohitwaghchaure,2024-06-17 07:21:23+00:00,[],2024-07-02 00:09:45+00:00,2024-06-17 07:35:18+00:00,https://github.com/frappe/erpnext/pull/41922,"[('backport version-15-hotfix', '')]",[],
2356565185,pull_request,closed,,fix: item_code filter in item-wise sales-purchase register,"Version 15

fixes: #41910

**Before:**

- Item code field is in the Sales Invoice Item or Purchase Invoice Item, **is not a field of Sales Invoice or Purchase Invoice**.


https://github.com/frappe/erpnext/assets/141945075/699a4f32-e077-48e0-8e3d-9373e013c53d


**After:**

- Also add the item code filter in the item-wise sales register.

https://github.com/frappe/erpnext/assets/141945075/1e348ca0-1386-4399-b89c-2dc5fc9d6e81

",Nihantra-Patel,2024-06-17 07:11:16+00:00,[],2024-07-02 00:09:44+00:00,2024-06-17 08:31:06+00:00,https://github.com/frappe/erpnext/pull/41921,"[('backport version-15-hotfix', '')]",[],
2356555079,pull_request,closed,,fix: handle NoneType error where customer details are not available in sales register,"Customer Details are not available because customer is deleted.
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 220, in run
    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 81, in generate_report_result
    res = get_report_result(report, filters) or []
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 62, in get_report_result
    res = report.execute_script_report(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 162, in execute_script_report
    res = self.execute_module(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 179, in execute_module
    return frappe.get_attr(method_name)(frappe._dict(filters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/sales_register/sales_register.py"", line 27, in execute
    return _execute(filters)
           ^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/sales_register/sales_register.py"", line 91, in _execute
    ""customer_group"": customer_details.get(inv.customer).get(""customer_group""),
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
```

Support Issue: https://support.frappe.io/app/hd-ticket/17209",ljain112,2024-06-17 07:05:04+00:00,[],2024-07-02 00:09:43+00:00,2024-06-17 09:28:07+00:00,https://github.com/frappe/erpnext/pull/41920,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2356533609,pull_request,closed,,fix: refactor Asset Repair and Stock Entry linkage to resolve amendme…,"This pull request addresses an issue with the linkage between Asset Repair and Stock Entry doctypes that caused errors when amending Asset Repair records. The following changes have been made to resolve the issue and improve the overall functionality:

- **Removed Stock Entry Link from Asset Repair**
- **Added Asset Repair Link in Stock Entry**

Additional Changes: 
- **Moved Warehouse Field to Correct Location**: The warehouse field, previously located in the Asset Repair doctype, has been moved to the Stock Items child table where it appropriately belongs.

Additional validations:

- **Completion Date**: Added validation to ensure that the completion date is appropriately set and follows logical constraints.
- **Purchase Invoice**: Added validation to ensure that a valid purchase invoice is associated where required.

no-docs
",khushi8112,2024-06-17 06:52:21+00:00,[],2024-07-12 00:11:47+00:00,2024-06-27 12:04:25+00:00,https://github.com/frappe/erpnext/pull/41919,"[('assets', ''), ('backport version-15-hotfix', '')]",[],
2356464534,pull_request,closed,,fix: update received qty in MR on purchase invoice submit with update stock (backport #41898),"Version 15

fixes: #41895


**Before:**

- When creating a purchase invoice with ""update stock"" from the purchase order, the received quantity in the purchase order is updated, but the received quantity in the material request is not updated.

https://github.com/frappe/erpnext/assets/141945075/aa08291c-39c6-47bf-9db8-4ff30004604d

**After:**

- fixed it. check the video.


https://github.com/frappe/erpnext/assets/141945075/11a43064-8511-4d16-9a2e-8f7b05b6b726

<hr>This is an automatic backport of pull request #41898 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 06:06:41+00:00,['Nihantra-Patel'],2024-07-08 00:11:46+00:00,2024-06-17 08:29:54+00:00,https://github.com/frappe/erpnext/pull/41918,"[('released', None)]","[{'comment_id': 2172360799, 'issue_id': 2356464534, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 13cb53fa899104ee519c13fe4289e9ea0baf0581 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-41898\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 13cb53fa89.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\tmodified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.py\n\tmodified:   erpnext/buying/doctype/purchase_order/purchase_order.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 17, 6, 6, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177849930, 'issue_id': 2356464534, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 2, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-17 06:06:43 UTC): Cherry-pick of 13cb53fa899104ee519c13fe4289e9ea0baf0581 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-41898
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 13cb53fa89.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py
	modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.py
	modified:   erpnext/buying/doctype/purchase_order/purchase_order.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:29:02 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356439180,pull_request,closed,,fix: incorrect batch return from sales return (backport #41916),"**Issue**

Sales return incorrect batch has picked if the ""Use Serial and Batch Fields"" has unticked<hr>This is an automatic backport of pull request #41916 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-17 05:47:27+00:00,['rohitwaghchaure'],2024-07-08 00:11:44+00:00,2024-06-17 06:05:24+00:00,https://github.com/frappe/erpnext/pull/41917,"[('released', None)]","[{'comment_id': 2177850060, 'issue_id': 2356439180, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 8, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:29:08 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2356355293,pull_request,closed,,fix: incorrect batch return from sales return,"**Issue**

Sales return incorrect batch has picked if the ""Use Serial and Batch Fields"" has unticked",rohitwaghchaure,2024-06-17 04:47:44+00:00,[],2024-07-02 00:09:47+00:00,2024-06-17 05:46:31+00:00,https://github.com/frappe/erpnext/pull/41916,"[('backport version-15-hotfix', '')]",[],
2355611214,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-06-16 09:35:33+00:00,[],2024-07-20 00:10:02+00:00,2024-07-02 22:00:54+00:00,https://github.com/frappe/erpnext/pull/41914,"[('inactive', '')]","[{'comment_id': 2202286986, 'issue_id': 2355611214, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 2, 8, 20, 24, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-07-02 08:20:24 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2354925758,pull_request,closed,,fix: valuation tax entries on LCV after billing PR (backport #40187),"#### Bug

- Create a Purchase Receipt with one or more tax rows having the charge type as ""Valuation and Total"".
- Create a Purchase Invoice against the Purchase Receipt.
- On creation of a Landed Cost Voucher against the PR now, the system creates the tax GL entries using the Stock Received But Not Billed account for the company.
- Although, this should take place for the PR entries if any negative expenses are booked using the invoice, when the GL entries are posted through the LCV, the tax account heads mentioned in the PR should be used.

#### Fix

Do not change tax accounts for GL entries if the entries are getting reposted by the LCV.

Internal Ref: [16516](https://support.frappe.io/helpdesk/tickets/16516), [16718](https://support.frappe.io/helpdesk/tickets/16718)<hr>This is an automatic backport of pull request #40187 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-15 15:12:34+00:00,['GursheenK'],2024-07-08 00:11:45+00:00,2024-06-17 08:23:17+00:00,https://github.com/frappe/erpnext/pull/41913,"[('stock', None), ('released', None)]","[{'comment_id': 2169863574, 'issue_id': 2354925758, 'author': 'mergify[bot]', 'body': 'Cherry-pick of baa3fee1bf9ce814a889ecf264fb6bac4ebaf93c has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40187\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit baa3fee1bf.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/stock_controller.py\n\tmodified:   erpnext/stock/doctype/purchase_receipt/purchase_receipt.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py\n\n```\n\n\nCherry-pick of 53642e7417c54197ba526625902d2671a7a564c2 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40187\nYour branch is ahead of \'origin/version-15-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 53642e7417.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/stock_controller.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py\n\n```\n\n\nCherry-pick of 8b3d46610eacd27edbceaefff6452efb68a83365 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40187\nYour branch is ahead of \'origin/version-15-hotfix\' by 2 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 8b3d46610e.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py\n\tboth modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 0b36cbe307fec68f72ddfdfdeee401134887a884 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40187\nYour branch is ahead of \'origin/version-15-hotfix\' by 3 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 0b36cbe307.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 54a58e9205af43f4aabe1668e8d8cf925a226536 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-40187\nYour branch is ahead of \'origin/version-15-hotfix\' by 4 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 54a58e9205.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 15, 15, 12, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177850008, 'issue_id': 2354925758, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 5, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-15 15:12:36 UTC): Cherry-pick of baa3fee1bf9ce814a889ecf264fb6bac4ebaf93c has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40187
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit baa3fee1bf.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/stock_controller.py
	modified:   erpnext/stock/doctype/purchase_receipt/purchase_receipt.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py

```


Cherry-pick of 53642e7417c54197ba526625902d2671a7a564c2 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40187
Your branch is ahead of 'origin/version-15-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 53642e7417.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/stock_controller.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py

```


Cherry-pick of 8b3d46610eacd27edbceaefff6452efb68a83365 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40187
Your branch is ahead of 'origin/version-15-hotfix' by 2 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 8b3d46610e.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py
	both modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 0b36cbe307fec68f72ddfdfdeee401134887a884 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40187
Your branch is ahead of 'origin/version-15-hotfix' by 3 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 0b36cbe307.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 54a58e9205af43f4aabe1668e8d8cf925a226536 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-40187
Your branch is ahead of 'origin/version-15-hotfix' by 4 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 54a58e9205.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:29:05 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2354925732,pull_request,closed,,fix: valuation tax entries on LCV after billing PR (backport #40187),"#### Bug

- Create a Purchase Receipt with one or more tax rows having the charge type as ""Valuation and Total"".
- Create a Purchase Invoice against the Purchase Receipt.
- On creation of a Landed Cost Voucher against the PR now, the system creates the tax GL entries using the Stock Received But Not Billed account for the company.
- Although, this should take place for the PR entries if any negative expenses are booked using the invoice, when the GL entries are posted through the LCV, the tax account heads mentioned in the PR should be used.

#### Fix

Do not change tax accounts for GL entries if the entries are getting reposted by the LCV.

Internal Ref: [16516](https://support.frappe.io/helpdesk/tickets/16516), [16718](https://support.frappe.io/helpdesk/tickets/16718)<hr>This is an automatic backport of pull request #40187 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-15 15:12:31+00:00,['GursheenK'],2024-07-08 00:11:59+00:00,2024-06-17 08:24:06+00:00,https://github.com/frappe/erpnext/pull/41912,"[('stock', None), ('released', None)]","[{'comment_id': 2169863480, 'issue_id': 2354925732, 'author': 'mergify[bot]', 'body': 'Cherry-pick of baa3fee1bf9ce814a889ecf264fb6bac4ebaf93c has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-40187\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit baa3fee1bf.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py\n\tmodified:   erpnext/stock/doctype/purchase_receipt/purchase_receipt.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/controllers/stock_controller.py\n\n```\n\n\nCherry-pick of 53642e7417c54197ba526625902d2671a7a564c2 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-40187\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 53642e7417.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/stock_controller.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 15, 15, 12, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177846463, 'issue_id': 2354925732, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 15, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-15 15:12:33 UTC): Cherry-pick of baa3fee1bf9ce814a889ecf264fb6bac4ebaf93c has failed:
```
On branch mergify/bp/version-14-hotfix/pr-40187
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit baa3fee1bf.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/stock/doctype/landed_cost_voucher/landed_cost_voucher.py
	modified:   erpnext/stock/doctype/purchase_receipt/purchase_receipt.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/controllers/stock_controller.py

```


Cherry-pick of 53642e7417c54197ba526625902d2671a7a564c2 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-40187
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 53642e7417.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/stock_controller.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/purchase_receipt/test_purchase_receipt.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:26:15 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2354863528,pull_request,closed,,fix: Discount and taxes in return document should follow the reference document,"If a credit note is created against a sales invoice, the credit note should follow the same discount (based on the pricing rule) and tax template as in the original sales invoice.

Previously, if we changed the discount on the pricing rule after creating the original sales invoice, the system overwrites the discount on the credit note based on the updated pricing rule.

Similarly, the item tax template and tax table is overwritten based on the updated item tax template in the Item master.",nabinhait,2024-06-15 13:39:37+00:00,['ruthra-kumar'],2024-08-18 00:11:02+00:00,2024-08-01 09:21:02+00:00,https://github.com/frappe/erpnext/pull/41911,"[('accounts', ''), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2180277106, 'issue_id': 2354863528, 'author': 'ruthra-kumar', 'body': 'This causes https://github.com/frappe/erpnext/blob/f28c692dca5db94460de8828a3f5d6faee9aed05/erpnext/controllers/sales_and_purchase_return.py#L124-L127 to throw', 'created_at': datetime.datetime(2024, 6, 20, 9, 52, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2202437157, 'issue_id': 2354863528, 'author': 'nabinhait', 'body': '> This causes\r\n> \r\n> https://github.com/frappe/erpnext/blob/f28c692dca5db94460de8828a3f5d6faee9aed05/erpnext/controllers/sales_and_purchase_return.py#L124-L127\r\n> \r\n> to throw\r\n\r\nWhen are you getting this validation? Are you manually changing the item rate?', 'created_at': datetime.datetime(2024, 7, 2, 9, 11, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2202465515, 'issue_id': 2354863528, 'author': 'ruthra-kumar', 'body': '> Are you manually changing the item rate?\r\n\r\nNo.\r\nJust try submitting the Credit Note. Above validation will throw.', 'created_at': datetime.datetime(2024, 7, 2, 9, 15, 14, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-06-20 09:52:39 UTC): This causes https://github.com/frappe/erpnext/blob/f28c692dca5db94460de8828a3f5d6faee9aed05/erpnext/controllers/sales_and_purchase_return.py#L124-L127 to throw

nabinhait (Issue Creator) on (2024-07-02 09:11:11 UTC): When are you getting this validation? Are you manually changing the item rate?

ruthra-kumar (Assginee) on (2024-07-02 09:15:14 UTC): No.
Just try submitting the Credit Note. Above validation will throw.

"
2354610863,pull_request,closed,,fix: add strings for translation in pos_item_cart.js,"fix: add strings for translation in pos_item_cart.js
",mahsem,2024-06-15 07:14:37+00:00,[],2024-12-26 07:41:41+00:00,2024-06-17 11:39:42+00:00,https://github.com/frappe/erpnext/pull/41907,"[('backport version-15-hotfix', '')]",[],
2352979717,pull_request,closed,,fix: add string for translation,"fix: add string for translation

",mahsem,2024-06-14 09:44:56+00:00,[],2024-07-08 00:11:28+00:00,2024-06-20 08:53:57+00:00,https://github.com/frappe/erpnext/pull/41903,"[('backport version-15-hotfix', '')]",[],
2352756190,pull_request,closed,,refactor: ignore unreconcile doc for PO and SO on cancel/delete,"Cannot cancel Sales Order if Payment is unreconciled.

Internal Support Ticket: https://support.frappe.io/app/hd-ticket/17140

Error Message:
![image](https://github.com/frappe/erpnext/assets/108322669/69beeff7-c059-4326-8b7a-6cc74ca17425)

",ljain112,2024-06-14 07:47:04+00:00,[],2024-07-10 00:11:16+00:00,2024-06-18 04:56:58+00:00,https://github.com/frappe/erpnext/pull/41900,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2352717393,pull_request,closed,,perf(desk): Defer and cache sync fetch of fiscal year,,cogk,2024-06-14 07:27:09+00:00,[],2024-07-19 00:09:48+00:00,2024-07-04 02:08:22+00:00,https://github.com/frappe/erpnext/pull/41899,"[('inactive', '')]","[{'comment_id': 2198322169, 'issue_id': 2352717393, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 29, 19, 57, 51, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-06-29 19:57:51 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2352701872,pull_request,closed,,fix: update received qty in MR on purchase invoice submit with update stock,"Version 15

fixes: #41895


**Before:**

- When creating a purchase invoice with ""update stock"" from the purchase order, the received quantity in the purchase order is updated, but the received quantity in the material request is not updated.

https://github.com/frappe/erpnext/assets/141945075/aa08291c-39c6-47bf-9db8-4ff30004604d

**After:**

- fixed it. check the video.


https://github.com/frappe/erpnext/assets/141945075/11a43064-8511-4d16-9a2e-8f7b05b6b726

",Nihantra-Patel,2024-06-14 07:17:43+00:00,['rohitwaghchaure'],2024-07-02 00:09:46+00:00,2024-06-17 06:05:36+00:00,https://github.com/frappe/erpnext/pull/41898,"[('backport version-15-hotfix', '')]","[{'comment_id': 2167540049, 'issue_id': 2352701872, 'author': 'rohitwaghchaure', 'body': '@Nihantra-Patel Please add the test case', 'created_at': datetime.datetime(2024, 6, 14, 8, 37, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2167851944, 'issue_id': 2352701872, 'author': 'Nihantra-Patel', 'body': ""@rohitwaghchaure, test case is added, so check it.\r\n\r\npatch failed : https://github.com/frappe/erpnext/actions/runs/9515275882/job/26229184481?pr=41898#step:13:70\r\n\r\n```\r\nERROR: no certificate subject alternative name matches\r\n\trequested host name ‘erpnext.com’.\r\nTo connect to erpnext.com insecurely, use `--no-check-certificate'.\r\n```"", 'created_at': datetime.datetime(2024, 6, 14, 11, 47, 17, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-14 08:37:37 UTC): @Nihantra-Patel Please add the test case

Nihantra-Patel (Issue Creator) on (2024-06-14 11:47:17 UTC): @rohitwaghchaure, test case is added, so check it.

patch failed : https://github.com/frappe/erpnext/actions/runs/9515275882/job/26229184481?pr=41898#step:13:70

```
ERROR: no certificate subject alternative name matches
	requested host name ‘erpnext.com’.
To connect to erpnext.com insecurely, use `--no-check-certificate'.
```

"
2351549577,pull_request,closed,,fix(SO): Fix logic to check if supplier has changed,It should be possible to order the same item from two different suppliers,cogk,2024-06-13 16:16:30+00:00,[],2024-07-16 00:11:03+00:00,2024-07-01 02:39:51+00:00,https://github.com/frappe/erpnext/pull/41896,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2198439406, 'issue_id': 2351549577, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 30, 5, 29, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2198497846, 'issue_id': 2351549577, 'author': 'cogk', 'body': '👋', 'created_at': datetime.datetime(2024, 6, 30, 9, 34, 16, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-06-30 05:29:33 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

cogk (Issue Creator) on (2024-06-30 09:34:16 UTC): 👋

"
2351018076,pull_request,closed,,fix(ledger-summary): show gl balance for supplier,"Added a GL Balance column to match the -ve/+ve symbol.
Supplier Ledger Summary:
![image](https://github.com/frappe/erpnext/assets/52111700/9baade17-cc3a-4fa1-8e74-45baa2c1197f)

General Ledger:
![image](https://github.com/frappe/erpnext/assets/52111700/8bef8fca-f948-4908-8099-e7b16dccf4fe)
",rtdany10,2024-06-13 12:27:39+00:00,[],2024-07-19 00:09:47+00:00,2024-07-04 02:08:23+00:00,https://github.com/frappe/erpnext/pull/41894,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2167209816, 'issue_id': 2351018076, 'author': 'vorasmit', 'body': 'Looks like, this can add more confusion IMO.\r\nEnhancements to existing report should be preferred.', 'created_at': datetime.datetime(2024, 6, 14, 4, 55, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2198003193, 'issue_id': 2351018076, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 29, 6, 28, 28, tzinfo=datetime.timezone.utc)}]","vorasmit on (2024-06-14 04:55:13 UTC): Looks like, this can add more confusion IMO.
Enhancements to existing report should be preferred.

stale[bot] on (2024-06-29 06:28:28 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2350482908,pull_request,closed,,fix: regional overide for updating item valution (backport #41842),Required for: https://github.com/resilient-tech/india-compliance/pull/2206<hr>This is an automatic backport of pull request #41842 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-13 08:09:55+00:00,[],2024-07-08 00:11:43+00:00,2024-06-15 03:46:01+00:00,https://github.com/frappe/erpnext/pull/41890,"[('buying', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177850123, 'issue_id': 2350482908, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 11, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:29:11 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2350481149,pull_request,closed,,fix: regional overide for updating item valution (backport #41842),Required for: https://github.com/resilient-tech/india-compliance/pull/2206<hr>This is an automatic backport of pull request #41842 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-13 08:09:04+00:00,[],2024-07-08 00:11:58+00:00,2024-06-15 03:46:19+00:00,https://github.com/frappe/erpnext/pull/41889,"[('buying', None), ('released', None)]","[{'comment_id': 2177846535, 'issue_id': 2350481149, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 18, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:26:18 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2350206152,pull_request,closed,,fix: download materials request plan in production plan (backport #41886),"Version: 15 & 14

fixes: https://github.com/frappe/erpnext/issues/41862

**Issue:**
When the for_warehouse field in the form is not selected, the warehouses_data array incorrectly includes an object with warehouse: empty string(''). This results in displaying empty string('') in the UI, which is not the desired behavior.

**Changes Made:**
Updated the JavaScript code to check if frm.doc.for_warehouse is not an empty string before adding the warehouse property to the warehouses_data array.
If frm.doc.for_warehouse is an empty string, the array will not include the warehouse property, thus avoiding the display of empty string('') in the UI.

Before:
[Before.webm](https://github.com/frappe/erpnext/assets/117427350/424e4b27-e6de-4fbf-ad56-dde1097f1f28)


After:
[After.webm](https://github.com/frappe/erpnext/assets/117427350/915610a4-57ef-41a2-8af4-39639e0b7944)
<hr>This is an automatic backport of pull request #41886 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-13 05:45:20+00:00,[],2024-07-08 00:11:42+00:00,2024-06-13 05:53:59+00:00,https://github.com/frappe/erpnext/pull/41888,"[('released', None)]","[{'comment_id': 2177850192, 'issue_id': 2350206152, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 14, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:29:14 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2349193584,pull_request,closed,,fix: download materials request plan in production plan,"Version: 15 & 14

fixes: https://github.com/frappe/erpnext/issues/41862

**Issue:**
When the for_warehouse field in the form is not selected, the warehouses_data array incorrectly includes an object with warehouse: empty string(''). This results in displaying empty string('') in the UI, which is not the desired behavior.

**Changes Made:**
Updated the JavaScript code to check if frm.doc.for_warehouse is not an empty string before adding the warehouse property to the warehouses_data array.
If frm.doc.for_warehouse is an empty string, the array will not include the warehouse property, thus avoiding the display of empty string('') in the UI.

Before:
[Before.webm](https://github.com/frappe/erpnext/assets/117427350/424e4b27-e6de-4fbf-ad56-dde1097f1f28)


After:
[After.webm](https://github.com/frappe/erpnext/assets/117427350/915610a4-57ef-41a2-8af4-39639e0b7944)
",Kishan0330,2024-06-12 16:30:24+00:00,[],2024-07-02 00:09:50+00:00,2024-06-13 05:44:03+00:00,https://github.com/frappe/erpnext/pull/41886,"[('backport version-15-hotfix', '')]",[],
2349051218,pull_request,closed,,removed deprecated keyword argument 'print_logs',"Removed deprecated keyword argument 'print_logs' from the has_permission check. Caused this error:
`has_permission() got an unexpected keyword argument 'print_logs'`

",SamuelHelbling,2024-06-12 15:19:53+00:00,[],2024-08-16 09:29:46+00:00,2024-07-23 12:10:19+00:00,https://github.com/frappe/erpnext/pull/41885,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2196381146, 'issue_id': 2349051218, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 28, 8, 15, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2205188237, 'issue_id': 2349051218, 'author': 'SamuelHelbling', 'body': 'Error still exists in version [v15.28.2](https://github.com/frappe/erpnext/releases/tag/v15.28.2)', 'created_at': datetime.datetime(2024, 7, 3, 6, 25, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2237771647, 'issue_id': 2349051218, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 18, 23, 27, 25, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-06-28 08:15:03 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

SamuelHelbling (Issue Creator) on (2024-07-03 06:25:26 UTC): Error still exists in version [v15.28.2](https://github.com/frappe/erpnext/releases/tag/v15.28.2)

stale[bot] on (2024-07-18 23:27:25 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2348624186,pull_request,closed,,fix: correct creation of opportunity with lead dashboard plus button (backport #40987),"Currently the logic used in the ""Create Opportunity"" does not use the same logic as the ""+"" button in the dashboard.
This creates a difference in behavior, especially the created opportunity is not linked by default.

It seems like the make_opportunity function was moved in this pr:
https://github.com/frappe/erpnext/pull/31311

Which fixed the ""Create Opportunity"" button in the top bar but not the  ""+"" button in the dashboard.


This is the current behavior when using the ""+"" button in the dashboard:
![grafik](https://github.com/frappe/erpnext/assets/2150814/ac3c89d4-a205-4fd1-bf5b-f55a955d3121)
![grafik](https://github.com/frappe/erpnext/assets/2150814/c598771e-0652-4124-81e2-b95de5ce8ebb)


This is the expected behavior:
![grafik](https://github.com/frappe/erpnext/assets/2150814/55c0c20e-cb51-41dc-b114-62567c14375c)
![grafik](https://github.com/frappe/erpnext/assets/2150814/3e50b665-9bc4-494b-af65-84b541d99936)



<hr>This is an automatic backport of pull request #40987 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 12:15:53+00:00,[],2024-08-26 00:10:14+00:00,2024-08-11 12:45:20+00:00,https://github.com/frappe/erpnext/pull/41883,"[('inactive', '')]","[{'comment_id': 2196381183, 'issue_id': 2348624186, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 28, 8, 15, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2196485770, 'issue_id': 2348624186, 'author': 'WebsiteDeveloper', 'body': 'not stale', 'created_at': datetime.datetime(2024, 6, 28, 9, 20, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227073047, 'issue_id': 2348624186, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 13, 19, 45, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227083972, 'issue_id': 2348624186, 'author': 'WebsiteDeveloper', 'body': 'active', 'created_at': datetime.datetime(2024, 7, 13, 19, 56, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2267166111, 'issue_id': 2348624186, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 3, 21, 32, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-06-28 08:15:05 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

WebsiteDeveloper on (2024-06-28 09:20:54 UTC): not stale

stale[bot] on (2024-07-13 19:45:01 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

WebsiteDeveloper on (2024-07-13 19:56:22 UTC): active

stale[bot] on (2024-08-03 21:32:00 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2348622980,pull_request,closed,,fix: correct creation of opportunity with lead dashboard plus button (backport #40987),"Currently the logic used in the ""Create Opportunity"" does not use the same logic as the ""+"" button in the dashboard.
This creates a difference in behavior, especially the created opportunity is not linked by default.

It seems like the make_opportunity function was moved in this pr:
https://github.com/frappe/erpnext/pull/31311

Which fixed the ""Create Opportunity"" button in the top bar but not the  ""+"" button in the dashboard.


This is the current behavior when using the ""+"" button in the dashboard:
![grafik](https://github.com/frappe/erpnext/assets/2150814/ac3c89d4-a205-4fd1-bf5b-f55a955d3121)
![grafik](https://github.com/frappe/erpnext/assets/2150814/c598771e-0652-4124-81e2-b95de5ce8ebb)


This is the expected behavior:
![grafik](https://github.com/frappe/erpnext/assets/2150814/55c0c20e-cb51-41dc-b114-62567c14375c)
![grafik](https://github.com/frappe/erpnext/assets/2150814/3e50b665-9bc4-494b-af65-84b541d99936)



<hr>This is an automatic backport of pull request #40987 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 12:15:14+00:00,[],2024-08-26 00:10:16+00:00,2024-08-11 12:45:18+00:00,https://github.com/frappe/erpnext/pull/41882,"[('inactive', '')]","[{'comment_id': 2196381204, 'issue_id': 2348622980, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 6, 28, 8, 15, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2196485640, 'issue_id': 2348622980, 'author': 'WebsiteDeveloper', 'body': 'not stale', 'created_at': datetime.datetime(2024, 6, 28, 9, 20, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227073072, 'issue_id': 2348622980, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 7, 13, 19, 45, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227083882, 'issue_id': 2348622980, 'author': 'WebsiteDeveloper', 'body': 'active', 'created_at': datetime.datetime(2024, 7, 13, 19, 56, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2267642609, 'issue_id': 2348622980, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 4, 19, 22, 2, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-06-28 08:15:06 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

WebsiteDeveloper on (2024-06-28 09:20:49 UTC): not stale

stale[bot] on (2024-07-13 19:45:02 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

WebsiteDeveloper on (2024-07-13 19:56:16 UTC): active

stale[bot] on (2024-08-04 19:22:02 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2348517581,pull_request,closed,,fix: allow Employee role to select Department (backport #41877),allow Employee role to select Department<hr>This is an automatic backport of pull request #41877 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-12 11:20:42+00:00,['ruchamahabal'],2024-07-08 00:11:40+00:00,2024-06-12 11:49:36+00:00,https://github.com/frappe/erpnext/pull/41881,"[('released', None)]","[{'comment_id': 2162758944, 'issue_id': 2348517581, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 56082f5a2911f8f1766b504ff3b34f3ea949cf97 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-41877\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 56082f5a29.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/setup/doctype/department/department.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 12, 11, 20, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177850313, 'issue_id': 2348517581, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 20, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-12 11:20:44 UTC): Cherry-pick of 56082f5a2911f8f1766b504ff3b34f3ea949cf97 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-41877
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 56082f5a29.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/setup/doctype/department/department.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:29:20 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348517498,pull_request,closed,,fix: allow Employee role to select Department (backport #41877),allow Employee role to select Department<hr>This is an automatic backport of pull request #41877 done by [Mergify](https://mergify.com).,mergify[bot],2024-06-12 11:20:39+00:00,['ruchamahabal'],2024-07-08 00:11:56+00:00,2024-06-12 11:49:16+00:00,https://github.com/frappe/erpnext/pull/41880,"[('released', None)]","[{'comment_id': 2162758870, 'issue_id': 2348517498, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 56082f5a2911f8f1766b504ff3b34f3ea949cf97 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-41877\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 56082f5a29.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/setup/doctype/department/department.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 6, 12, 11, 20, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177846684, 'issue_id': 2348517498, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.70.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 26, 24, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-06-12 11:20:41 UTC): Cherry-pick of 56082f5a2911f8f1766b504ff3b34f3ea949cf97 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-41877
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 56082f5a29.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/setup/doctype/department/department.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-06-19 06:26:24 UTC): :tada: This PR is included in version 14.70.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348504002,pull_request,closed,,fix: use invoice outstanding on Dunning (backport #41817),"Dunning should use the latest outstanding of invoice. At the moment, it is restricted to Payment Schdule with only one term / row.<hr>This is an automatic backport of pull request #41817 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 11:13:36+00:00,[],2024-06-27 00:09:39+00:00,2024-06-12 11:31:13+00:00,https://github.com/frappe/erpnext/pull/41879,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2162781022, 'issue_id': 2348504002, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.5 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.5)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 12, 11, 32, 47, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-12 11:32:47 UTC): :tada: This PR is included in version 15.27.5 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.5)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348479565,pull_request,closed,,fix: allow Employee role to select Department,allow Employee role to select Department,ruchamahabal,2024-06-12 11:02:32+00:00,[],2024-06-27 00:09:40+00:00,2024-06-12 11:19:39+00:00,https://github.com/frappe/erpnext/pull/41877,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2348459239,pull_request,closed,,fix: use invoice outstanding on Dunning (backport #41817),"Dunning should use the latest outstanding of invoice. At the moment, it is restricted to Payment Schdule with only one term / row.<hr>This is an automatic backport of pull request #41817 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 10:55:00+00:00,['ruthra-kumar'],2024-07-08 00:11:41+00:00,2024-06-12 11:12:09+00:00,https://github.com/frappe/erpnext/pull/41876,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2177850258, 'issue_id': 2348459239, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 17, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-19 06:29:17 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348453506,pull_request,closed,,fix: return from accepted and rejected warehouse at a same time not working (backport #41872) (backport #41874),"**Issue**
![purchase_return_issue](https://github.com/frappe/erpnext/assets/8780500/49b91fd3-d4a3-465b-b583-a9bd219485db)


<hr>This is an automatic backport of pull request #41872 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #41874 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 10:51:46+00:00,[],2024-06-27 00:09:37+00:00,2024-06-12 11:52:39+00:00,https://github.com/frappe/erpnext/pull/41875,"[('stock', None), ('released', None)]","[{'comment_id': 2162818224, 'issue_id': 2348453506, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.6 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.6)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 12, 11, 54, 22, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-12 11:54:22 UTC): :tada: This PR is included in version 15.27.6 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.6)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348386240,pull_request,closed,,fix: return from accepted and rejected warehouse at a same time not working (backport #41872),"**Issue**
![purchase_return_issue](https://github.com/frappe/erpnext/assets/8780500/49b91fd3-d4a3-465b-b583-a9bd219485db)


<hr>This is an automatic backport of pull request #41872 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 10:17:38+00:00,['rohitwaghchaure'],2024-07-08 00:11:39+00:00,2024-06-12 10:50:15+00:00,https://github.com/frappe/erpnext/pull/41874,"[('stock', None), ('released', None)]","[{'comment_id': 2162700065, 'issue_id': 2348386240, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 6, 12, 10, 50, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2162700375, 'issue_id': 2348386240, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#41875 fix: return from accepted and rejected warehouse at a same time not working (backport #41872) (backport #41874)](https://github.com/frappe/erpnext/pull/41875) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 6, 12, 10, 50, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2177850370, 'issue_id': 2348386240, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 19, 6, 29, 23, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-12 10:50:39 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-06-12 10:50:50 UTC): #### ✅ Backports have been created

<details>

* [#41875 fix: return from accepted and rejected warehouse at a same time not working (backport #41872) (backport #41874)](https://github.com/frappe/erpnext/pull/41875) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-06-19 06:29:23 UTC): :tada: This PR is included in version 15.27.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2348386178,pull_request,closed,,fix: batch qty in the dropdown field (backport #41865) (backport #41868),"**Issue**

<img width=""833"" alt=""Screenshot 2024-06-12 at 12 13 19 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/b26f0500-f763-4bd0-8c66-4f77f0044942"">


**After Fix**
<img width=""795"" alt=""Screenshot 2024-06-12 at 12 11 10 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/475740e2-d10c-4f2d-bf22-e20040808017"">
<hr>This is an automatic backport of pull request #41865 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #41868 done by [Mergify](https://mergify.com).",mergify[bot],2024-06-12 10:17:36+00:00,[],2024-06-27 00:09:38+00:00,2024-06-12 11:52:57+00:00,https://github.com/frappe/erpnext/pull/41873,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2162818139, 'issue_id': 2348386178, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 15.27.6 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.6)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 12, 11, 54, 19, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-12 11:54:19 UTC): :tada: This PR is included in version 15.27.6 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.6)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
