id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2838082094,issue,closed,completed,ERPNext Print Format Language Selection Not Working After Upgrade,"### Information about bug

### **Issue Description:**
After upgrading to the latest version of ERPNext, the **Print Format Language selection** in the Print Preview is not working as expected. Regardless of the language selected from the **Print Format Language dropdown**, the invoice continues to print in **English (or the user’s default language)** instead of changing to the selected language.

#### **Steps to Reproduce:**
1. Open any **Sales Invoice**.
2. Click on **Print Preview**.
3. Change the language from the **Print Format Language dropdown**.
4. The language on the printed document does **not** change to the selected language. Instead, it remains in English (or the user’s language setting).

#### **Expected Behavior:**
- When selecting a different language from the **Print Format Language dropdown**, the invoice should be printed in that selected language.

#### **Actual Behavior:**
- The invoice remains in **English (or the user's language preference) regardless of the selected Print Format Language**.

#### **Troubleshooting Steps Taken:**
- Verified that the **Customer’s Print Language** is set correctly.
- Checked **Global Defaults** for language settings.
- Cleared cache using `bench clear-cache` and `bench clear-website-cache`.
- Restarted ERPNext instance (`bench restart`).
- Tested with both standard and **custom print formats**.
- Issue persists even after changing the **Customer Print Language**.



#### **Additional Context:**
This issue was not present in previous versions and started occurring after the latest upgrade. 

### Module

accounts

### Version

ERPNext: v15.51.0 (version-15)
Frappe Framework: v15.55.1 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",asamawi,2025-02-07 12:47:40+00:00,[],2025-02-07 12:58:17+00:00,2025-02-07 12:58:17+00:00,https://github.com/frappe/erpnext/issues/45791,"[('bug', None)]","[{'comment_id': 2642838272, 'issue_id': 2838082094, 'author': 'asamawi', 'body': 'This issue is already reported in #45778. To avoid duplication, I am closing this one.\nPlease follow and contribute to #45778 for updates.', 'created_at': datetime.datetime(2025, 2, 7, 12, 55, 14, tzinfo=datetime.timezone.utc)}]","asamawi (Issue Creator) on (2025-02-07 12:55:14 UTC): This issue is already reported in #45778. To avoid duplication, I am closing this one.
Please follow and contribute to #45778 for updates.

"
2837885021,issue,open,,Browserslist: caniuse-lite is outdated,"### Information about bug

Hello,

I'm running Ubuntu 24.04.1 and encountered an issue while installing ERPNext. I followed the documentation steps, and everything went well until I tried to start bench. When I launched bench, I received the following error:

Browserslist: caniuse-lite is outdated. Please run: npx update-browserslist-db@latest
![Image](https://github.com/user-attachments/assets/9bb64aff-151f-4609-8203-1262a72bc5fc)

running the command:  npx update-browserslist-db@latest
then it says: update-browserslist-db: Cannot find package.json. Is this the right directory to run `npx update-browserslist-db` in?

To resolve this, I created a package.json using the command: npm init -y

I then retried with: npx update-browserslist-db@latest

This time, it instructed me to run: npm install caniuse-lite
![Image](https://github.com/user-attachments/assets/d90a5b0d-80c7-45b0-bb48-f76afd7c2724)

After running the above installation, when I executed: npx update-browserslist-db@latest

it indicated that I was already running the latest version.
![Image](https://github.com/user-attachments/assets/674962fe-798f-499f-9d06-74a9fcf24e13)

Then i try to start bench again it still give me the same error: Browserslist: caniuse-lite is outdated. Please run: npx update-browserslist-db@latest

I'm now stuck in a loop where starting bench tells me I need to update, but when I update, it reports that I'm on the latest version. What can I do to resolve this issue?


### Module

other

### Version

Frappe version - 15
ERPNext Version - 15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",dvhbliksem,2025-02-07 11:07:46+00:00,[],2025-02-07 11:07:46+00:00,,https://github.com/frappe/erpnext/issues/45790,"[('bug', None)]",[],
2837810238,issue,open,,bug: erpnext.controllers.stock_controller.check_item_quality_inspection is not whitelisted permission error,version-15 code must have the whitelisting as the develop branch,toofun666,2025-02-07 10:31:46+00:00,[],2025-02-07 10:31:46+00:00,,https://github.com/frappe/erpnext/issues/45787,[],[],
2837311157,issue,open,,Material Requests from SO become too big and items are repeated in many different lines of MatReq > PO creation.,"**Is your feature request related to a problem? Please describe.**
We have 10s of Sales Order weekly and each have many item lines from many different suppliers. 
Everything is mapped in the item so as to  create PO from material request
Once a week we create a material request for all the items from Sales Order to purchase to suppliers.
The MatReq gets created alright, but each item from each SO is created as a separate line in the MatReq
We are having MatReq of 12 - 15 pages long in which items are constantly repeated.

**Problems:**
1. This creates PO with the same item repeated in multiple lines in the PO. Unnecessary PO length and is prone to confusion in supplier as he has to go through pages and pages and can easily miss an item due to its repetition in the PO.
2. All major browsers (Firefox, Brave, Chromium) stop working when the PO from MatReq is this big. The client system's cores collapse. Not able to finish the PO creation.  

**Describe the solution you'd like**
1. ERPNext should consolidate same items in 1 line with proper addition of total quantities to be order of that item. Say there are 20 SO with one item line of 1 qty each of item XXX. Then MatReq should be one line of item XXX with 20 qty. Not 20 item lines of 1 each.  This avoids any human error in supplying the PO from the supplier.
2. I don't know if the collapse is due to point 1 or not. But the browsers crash and can't create PO. The numbers are not off from regular small business operations so it should work. 

**Describe alternatives you've considered**
Partially create the MatReq, say 10 SO at a time so as to not queue too much information, item lines, etc

**Additional context**
Frappe CRM: v1.32.9
ERPNext: v15.47.5
Frappe Framework: v15.51.1
Frappe HR: v15.37.1
Frappe LMS: v2.18.0
Payments: v0.0.1
WooCommerce Fusion: v1.10.1

",MartinFulgueiras,2025-02-07 06:03:07+00:00,[],2025-02-07 06:04:43+00:00,,https://github.com/frappe/erpnext/issues/45779,"[('feature-request', None)]",[],
2837079814,issue,open,,Print Language Not Working in ERPNext v15.51.0 / Frappe v15.55.1,"### Information about bug

Description
After upgrading to ERPNext v15.51.0 and Frappe v15.55.1, the ""Print Language"" setting in document printing is no longer functional. The selected language does not affect the printed document, and it always follows the UI language of the logged-in user instead of the chosen print language.

Expected Behavior
When selecting a different ""Print Language"" in a document, the printed output should reflect the chosen language, not the UI language of the user.
Actual Behavior
The print output always follows the UI language of the user, ignoring the ""Print Language"" selection.
Steps to Reproduce
Go to any printable document (e.g., Sales Invoice, Quotation, Purchase Order, etc.).
Select a different ""Print Language"" from the print settings.
Generate the print preview.
The document remains in the user's UI language instead of the selected print language.
Current Setup
ERPNext Version: 15.51.0
Frappe Version: 15.55.1
Deployment Type: (e.g., self-hosted / cloud / Docker)
Browser: (mention if it's browser-specific)
Additional Information
This issue was not present in previous versions (please specify the last working version if known).
No relevant custom scripts are interfering with the print language setting.
The issue persists across different browsers and user accounts.

### Module

selling

### Version

ERPNext Version: 15.51.0
Frappe Version: 15.55.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",kanedai,2025-02-07 02:18:50+00:00,[],2025-02-07 12:57:31+00:00,,https://github.com/frappe/erpnext/issues/45778,"[('bug', None)]","[{'comment_id': 2641965997, 'issue_id': 2837079814, 'author': 'kanedai', 'body': 'Observed Changes in HTTPRequest Class\n@ ~/frappe-bench/apps/frappe/frappe/auth.py\nIn the current version:\n\n```\n# Set request language\nself.set_lang()\n\n# Login and start/resume user session\nself.set_session()\n```\n\nIn the previous (working) version:\n```\n# Login and start/resume user session\nself.set_session()\n\n# Set request language\nself.set_lang()\n```\n\nImpact of the Change\nThis change appears to cause the system to prioritize the user\'s session language over the ""Print Language"" setting. As a result, documents always follow the user\'s UI language instead of the selected print language.\n\nExpected Behavior\nThe ""Print Language"" setting should override the user\'s session language when generating printed documents.\n\nSteps to Reproduce\nGo to any printable document (e.g., Sales Invoice, Quotation, Purchase Order).\nSelect a language in the ""Print Language"" field different from the current UI language.\nPrint or preview the document.\nObserve that the document follows the user\'s UI language instead of the selected ""Print Language.""', 'created_at': datetime.datetime(2025, 2, 7, 5, 15, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642842632, 'issue_id': 2837079814, 'author': 'asamawi', 'body': 'I am also facing this issue after upgrading to the latest version of ERPNext. The Print Format Language selection in Print Preview does not change the document language. It remains in English (or the user’s set language) regardless of the selection.\n\n**Steps I tried to fix it:**\n\n- Changed the Customer Print Language → No effect.\n- Cleared cache using bench clear-cache → Issue persists.\n- Restarted ERPNext using bench restart → No change.\n- Tried different browsers and users → Still not working.\n- Tested with both Standard & Custom Print Formats → Same issue.', 'created_at': datetime.datetime(2025, 2, 7, 12, 57, 30, tzinfo=datetime.timezone.utc)}]","kanedai (Issue Creator) on (2025-02-07 05:15:11 UTC): Observed Changes in HTTPRequest Class
@ ~/frappe-bench/apps/frappe/frappe/auth.py
In the current version:

```
# Set request language
self.set_lang()

# Login and start/resume user session
self.set_session()
```

In the previous (working) version:
```
# Login and start/resume user session
self.set_session()

# Set request language
self.set_lang()
```

Impact of the Change
This change appears to cause the system to prioritize the user's session language over the ""Print Language"" setting. As a result, documents always follow the user's UI language instead of the selected print language.

Expected Behavior
The ""Print Language"" setting should override the user's session language when generating printed documents.

Steps to Reproduce
Go to any printable document (e.g., Sales Invoice, Quotation, Purchase Order).
Select a language in the ""Print Language"" field different from the current UI language.
Print or preview the document.
Observe that the document follows the user's UI language instead of the selected ""Print Language.""

asamawi on (2025-02-07 12:57:30 UTC): I am also facing this issue after upgrading to the latest version of ERPNext. The Print Format Language selection in Print Preview does not change the document language. It remains in English (or the user’s set language) regardless of the selection.

**Steps I tried to fix it:**

- Changed the Customer Print Language → No effect.
- Cleared cache using bench clear-cache → Issue persists.
- Restarted ERPNext using bench restart → No change.
- Tried different browsers and users → Still not working.
- Tested with both Standard & Custom Print Formats → Same issue.

"
2837043182,issue,open,,Asset scrapping triggers depreciation despite completed schedules,"### Information about bug

Go to Assets → Asset List.
Select an asset that has fully recorded depreciation.
Click Scrap.
ERPNext tries to post additional depreciation, even though the schedules are completed.

![Image](https://github.com/user-attachments/assets/0c1b8ff4-7a3b-411e-96f8-5e7b39342375)

Cannot change the status manually.

If an asset has fully recorded depreciation, scrapping should not trigger an additional depreciation entry. Instead, the system should allow directly changing the status to 'Scrapped'.

### Module

assets

### Version

Frappe Framework: v15.55.1 (version-15)
ERPNext: v15.51.0 (version-15)



### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 448, in scrap_asset
    depreciate_asset(asset, date, notes)
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 510, in depreciate_asset
    make_depreciation_entry_for_all_asset_depr_schedules(asset_doc, date)
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 142, in make_depreciation_entry_for_all_asset_depr_schedules
    make_depreciation_entry(asset_depr_schedule_name, date)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 253, in make_depreciation_entry
    raise depreciation_posting_error
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 231, in make_depreciation_entry
    _make_journal_entry_for_depreciation(
  File ""apps/erpnext/erpnext/assets/doctype/asset/depreciation.py"", line 325, in _make_journal_entry_for_depreciation
    je.submit()
  File ""apps/erpnext/erpnext/accounts/doctype/journal_entry/journal_entry.py"", line 175, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1043, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 342, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 395, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1143, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 974, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1334, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1316, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 971, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/journal_entry/journal_entry.py"", line 192, in on_submit
    self.make_gl_entries()
  File ""apps/erpnext/erpnext/accounts/doctype/journal_entry/journal_entry.py"", line 1119, in make_gl_entries
    make_gl_entries(
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 48, in make_gl_entries
    save_entries(gl_map, adv_adj, update_outstanding, from_repost)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 375, in save_entries
    validate_against_pcv(is_opening, gl_map[0][""posting_date""], gl_map[0][""company""])
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 739, in validate_against_pcv
    frappe.throw(message, title=_(""Period Closed""))
  File ""apps/frappe/frappe/__init__.py"", line 603, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 568, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 519, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Books have been closed till the period ending on 31-12-2023</br >You cannot create/amend any accounting entries till this date.
```",asamawi,2025-02-07 01:42:21+00:00,[],2025-02-07 01:42:21+00:00,,https://github.com/frappe/erpnext/issues/45777,"[('bug', None)]",[],
2835340414,issue,open,,Work Order - Disassemble Order  Wrong Qty Calcuation,"### Information about bug

https://github.com/user-attachments/assets/7b4ed3c6-2a6b-4289-a308-ac86b403109d

### Module

manufacturing, stock

### Version

V15 latest

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",dineshpanchal93,2025-02-06 12:02:44+00:00,[],2025-02-06 12:03:57+00:00,,https://github.com/frappe/erpnext/issues/45769,"[('bug', None)]","[{'comment_id': 2639637068, 'issue_id': 2835340414, 'author': 'dineshpanchal93', 'body': '@rohitwaghchaure  can you please look into the same.', 'created_at': datetime.datetime(2025, 2, 6, 12, 3, 55, tzinfo=datetime.timezone.utc)}]","dineshpanchal93 (Issue Creator) on (2025-02-06 12:03:55 UTC): @rohitwaghchaure  can you please look into the same.

"
2835316124,issue,open,,Error in new delivery note,"### Information about bug

Can not create new delivery note. 

![Image](https://github.com/user-attachments/assets/04f03d5d-dd71-4582-8a8d-df8dbea5480b)




### Module

stock

### Version

Latest Version 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/get_item_details.py"", line 123, in get_item_details
    update_stock(args, out, doc)
  File ""apps/erpnext/erpnext/stock/get_item_details.py"", line 210, in update_stock
    {""price_list"": doc.selling_price_list, ""uom"": out.uom, ""batch_no"": batch_no},
                   ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'selling_price_list'

```",mohsinalimat,2025-02-06 11:51:36+00:00,[],2025-02-07 02:40:18+00:00,,https://github.com/frappe/erpnext/issues/45768,"[('bug', None)]","[{'comment_id': 2640119625, 'issue_id': 2835316124, 'author': 'mohsinalimat', 'body': 'site is in FrappeCloud.', 'created_at': datetime.datetime(2025, 2, 6, 15, 19, tzinfo=datetime.timezone.utc)}]","mohsinalimat (Issue Creator) on (2025-02-06 15:19:00 UTC): site is in FrappeCloud.

"
2834854533,issue,open,,The attacment icon bottom doesn't work when pressing,"### Information about bug

The attacment icon bottom doesn't work when pressing in the site ( TAM ) 

### Module

support

### Version

the attachment icon doesn't work 

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
The attacment icon bottom doesn't work when pressing
```",khaled02ha,2025-02-06 08:20:35+00:00,[],2025-02-06 08:20:35+00:00,,https://github.com/frappe/erpnext/issues/45760,"[('bug', None)]",[],
2834581057,issue,open,,Asset Image can't be changed/removed once uploaded and Saved. Draft/Submitted,"### Information about bug

**Description:** The Image Field in the Asset is an ""Allow on Submit"" Field, allowing users to Add/Change the Image after Submitting. But once a User uploads an Image, it can't be removed or changed even though the option is there, it is not working.

**Pre-Requisites:** Create an Asset(Either Draft or Submitted).

**Steps to Recreate the Bug:**

1. Click ""Change"" (in front of the Image Area in Asset).
2. Click ""Upload"" and Select an Image.
3. Click ""Save"".
4. Click on the Image and click ""Remove"". Or ""Upload"" a different image.
5. Click ""Save""

[Click here for the Screen Recording](https://youtu.be/jQu1bAzVx_k)

### Module

assets

### Version

**ERPNext:** v14.74.4 (version-14)
**Frappe Framework:** v14.82.1 (version-14)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",ransikerandeni,2025-02-06 05:26:48+00:00,[],2025-02-06 05:26:48+00:00,,https://github.com/frappe/erpnext/issues/45759,"[('bug', None)]",[],
2834541903,issue,open,,Sales Order Update Items not working --> TypeError: get_item_details() missing 1 required positional argument: 'args',"### Information about bug

<img width=""652"" alt=""Image"" src=""https://github.com/user-attachments/assets/58cea14e-4112-4dc1-a4ac-a51f6a754244"" />

### Module

selling

### Version

<img width=""874"" alt=""Image"" src=""https://github.com/user-attachments/assets/fe15f0b3-8587-485d-ae87-6010e6d50bbc"" />

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
TypeError: get_item_details() missing 1 required positional argument: 'args'
```",dineshpanchal93,2025-02-06 04:55:32+00:00,[],2025-02-07 14:27:51+00:00,,https://github.com/frappe/erpnext/issues/45758,"[('bug', None), ('released', None)]","[{'comment_id': 2639553783, 'issue_id': 2834541903, 'author': 'ljain112', 'body': 'We will fix the issue.', 'created_at': datetime.datetime(2025, 2, 6, 11, 24, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643088697, 'issue_id': 2834541903, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.82.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 7, 14, 27, 49, tzinfo=datetime.timezone.utc)}]","ljain112 on (2025-02-06 11:24:44 UTC): We will fix the issue.

frappe-pr-bot on (2025-02-07 14:27:49 UTC): :tada: This issue has been resolved in version 14.82.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2834241493,issue,open,,European E-Invoicing: -1 numbering for credit notes or revised invoices,"### Information about bug

e-Invoicing is going to be mandatory standard soon and the Italian e-Invoicing actually already covers most of the features requiered thanks to @gaurav-naik and the great work he did on #16259 & #16598. 

One of the critical issues though is that most European Fiscal Jurisdictions do not allow a -1 series for credit notes and cancelling invoices can only happen through credit notes. So it would be nice to set some sane configurations inside the Python:

- force credit note numbering series YYYY-MM-00001
- set them as default
- set permission to disallow deleting invoices as numbers need to be progressive in almost all of Europe by law

### Module

selling

### Version

ERPNext v15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",fthobe,2025-02-06 00:38:55+00:00,[],2025-02-06 12:59:01+00:00,,https://github.com/frappe/erpnext/issues/45757,"[('bug', None)]","[{'comment_id': 2638976959, 'issue_id': 2834241493, 'author': 'ljain112', 'body': 'You can set roles permission accordingly so the users cannot cancel the document.', 'created_at': datetime.datetime(2025, 2, 6, 6, 49, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639761406, 'issue_id': 2834241493, 'author': 'fthobe', 'body': 'Is it possible to modify the default roles for a country through the setup.py for that country?', 'created_at': datetime.datetime(2025, 2, 6, 12, 59, tzinfo=datetime.timezone.utc)}]","ljain112 on (2025-02-06 06:49:46 UTC): You can set roles permission accordingly so the users cannot cancel the document.

fthobe (Issue Creator) on (2025-02-06 12:59:00 UTC): Is it possible to modify the default roles for a country through the setup.py for that country?

"
2833994186,issue,open,,"Unable to view or manage ""Links"" on Doctypes","### Information about bug

When clicking ""Links"" on any DocType:

![Image](https://github.com/user-attachments/assets/88194945-1e06-4988-88ce-556c9dfde63a)

I get this error about the ""Subscription Invoice"" DocType

![Image](https://github.com/user-attachments/assets/efe5a712-4b75-478e-9511-9d97c68987c9)

I am unable to manage permissions for this doctype, and I am logged in as a user with the System Manager role. 


### Module

accounts, other

### Version

frappe - 15.55.1
erpnext - 15.51.0
helpdesk - 1.4.0
hrms - 15.39.1
lms - 2.21.0
wiki - 2.0.0
print_designer - 1.4.3
insights - 2.2.9
gameplan - 0.0.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
Not permitted
Subscription Invoice is not a valid parent DocType for Subscription Invoice
No permission for Subscription Invoice
```",treed593,2025-02-05 21:26:35+00:00,[],2025-02-05 21:26:35+00:00,,https://github.com/frappe/erpnext/issues/45755,"[('bug', None)]",[],
2833761253,issue,open,,BOMS that are not maintained as stock wont update to latest pricing!,"### Information about bug

BOM-ASSEMBLY-001 consist off the following BOMS.

1. BOM 1
2. BOM 2
3. BOM 3

BOM 3's cost wont update if maintain stock is unticked on BOM 3's linked item.

therefore BOM-ASSEMBLY-001 always shows the wrong cost.

when only using maintain stock items the cost on BOM-ASSEMBLY-001 is correct



### Module

manufacturing

### Version

ERPNext: v15.51.0

Frappe Framework: v15.55.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell

```",jacobotha777,2025-02-05 19:13:13+00:00,[],2025-02-05 19:13:13+00:00,,https://github.com/frappe/erpnext/issues/45754,"[('bug', None)]",[],
2833650249,issue,open,,Improper handling of Foreign Exchange Rate for USD-AED,"### Information about bug

calculate AED exchange rate based on pegged value with USD (backport #45215) #45356 adopted a very odd approach of hardcoding the exchange rate.  Not sure why a globally used application will be customized using hardcode to fix an issue for a customer or few of them.

This is a huge integrity issue knowing that the system already has an exchange rate table that customers can use to set the exchange rate without having to revert to such extreme solution.

The correct way is to use the exchange rate table or introduce another field rather than hardcoding.  Very disappointing.

### Module

accounts

### Version

erpnext 15.50.0
frappe 15.54.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",mabdeljawwad,2025-02-05 18:19:51+00:00,[],2025-02-05 18:53:41+00:00,,https://github.com/frappe/erpnext/issues/45753,"[('bug', None)]","[{'comment_id': 2637760931, 'issue_id': 2833650249, 'author': 'mihir-kandoi', 'body': 'Are you a Frappe Cloud customer? If yes, please open a ticket with FC Support/Helpdesk.', 'created_at': datetime.datetime(2025, 2, 5, 18, 53, 23, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-02-05 18:53:23 UTC): Are you a Frappe Cloud customer? If yes, please open a ticket with FC Support/Helpdesk.

"
2832866503,issue,open,,Not showing Party name in Supplier Portal but showing None,"### Information about bug

<img width=""1391"" alt=""Image"" src=""https://github.com/user-attachments/assets/c74bdb0a-897f-4095-80d2-8c4d4959a9e8"" />

### Module

buying

### Version

Frappe Version - v15.55.1
Erpnext Version - v15.51.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell

```",ssuda,2025-02-05 12:49:32+00:00,[],2025-02-05 12:49:32+00:00,,https://github.com/frappe/erpnext/issues/45749,"[('bug', None)]",[],
2832041712,issue,open,,Pay amount is not rendered in invoice page,"### Information about bug

The button for pay for the invoice, for now i am using razor pay using payments app by frappe. But when using customer role we go to the invoices section and select any invoice the pay button shows Pay {{ pay_amount }} instead of loading the amount to be paid.

Here is the screenshot of the same

![Image](https://github.com/user-attachments/assets/da325dba-3bf9-43ae-943c-21f8fce309c3)

### Module

portal

### Version

ERPNext: v15.49.1 (version-15)

Frappe Framework: v15.53.0 (version-15)

Payments: v0.0.1 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",dhrumilpatel30,2025-02-05 06:35:11+00:00,[],2025-02-05 06:35:11+00:00,,https://github.com/frappe/erpnext/issues/45726,"[('bug', None)]",[],
2829790949,issue,open,,Proposal : Lead Status Analysis Report in CRM,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Feature Request**
There is always back and forth in Lead Status, where, depending on the interaction with a Lead, the status changes between Cold, Warm, Hot, etc.
Users can change the status of a lead on demand, but finding when the status was changed and by whom is a challenge. While change logs exist for each entry, additional details are missing.
To address this, users need a report similar to the Lead Conversion report, where they can track:
- The time gap between each status change for a lead
- The User ID of the person changing the Lead Status
- The number of days taken to change the status of a lead
- Previous status
- Updated status

**Solution**
In ERPNext, changes in the Lead Status are not stored in a dedicated table but are logged as version entries. These version entries contain relevant data such as old value, new value, user ID, and timestamps.
By leveraging the Version log, we can create a report that allows users to track Lead Status changes, similar to CRM tools like HubSpot and Salesforce.
",rajat1tripathi,2025-02-04 10:51:20+00:00,[],2025-02-04 10:54:51+00:00,,https://github.com/frappe/erpnext/issues/45709,"[('feature-request', None)]",[],
2829393313,issue,closed,completed,'undefined' error in Timesheet's  From and To Date field,"### Information about bug

Get undefined error in Timesheet's  From and To Date field.  attached snapshot for reference.

![Image](https://github.com/user-attachments/assets/b3c82198-a990-4e39-9c43-3327217a354a)


### Module

projects

### Version

ERPNext: v15.50.0 (version-15)

Frappe Framework: v15.54.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",jecinthamary,2025-02-04 07:50:06+00:00,[],2025-02-04 12:23:17+00:00,2025-02-04 12:23:16+00:00,https://github.com/frappe/erpnext/issues/45700,"[('bug', None)]","[{'comment_id': 2633160163, 'issue_id': 2829393313, 'author': 'nikolas-beckel', 'body': 'Same for ERPNext: v14.81.0\n\nNo errors in console for me. All network requests were successful.', 'created_at': datetime.datetime(2025, 2, 4, 8, 5, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633749814, 'issue_id': 2829393313, 'author': 'mihir-kandoi', 'body': 'This is a known issue which was fixed recently. Please update to the latest version of ERPNext.', 'created_at': datetime.datetime(2025, 2, 4, 12, 23, 16, tzinfo=datetime.timezone.utc)}]","nikolas-beckel on (2025-02-04 08:05:38 UTC): Same for ERPNext: v14.81.0

No errors in console for me. All network requests were successful.

mihir-kandoi on (2025-02-04 12:23:16 UTC): This is a known issue which was fixed recently. Please update to the latest version of ERPNext.

"
2827742666,issue,open,,"Can't Finsih Work Order, error stock entry with Batch Bundle.","### Information about bug

This case is related to the setting, Make serial no / batch from Work Order.

![Image](https://github.com/user-attachments/assets/c9017ca7-d58e-465e-9680-d40baed2b0ab)

Producing FG that require batch / batch bundle. In my case, plan to product 100, but end up finish only 80 because of losses during the process.

So at last step, when click Finish with 100, the Stock Entry will transfer only 80 (as expected).

![Image](https://github.com/user-attachments/assets/ee404081-6ec0-4c16-992f-175e902e239b)

![Image](https://github.com/user-attachments/assets/533a726b-ced8-47d5-a263-9199e3c497d8)

But at the time click Finish 100, the Batch Bundle is created with 100 qty for my batch.

![Image](https://github.com/user-attachments/assets/4f97c34a-6dff-477b-ad6f-6717dde047cc)

However, this contradict with the fact that only 80 will be produced and so it throw error on Stock Entry.

![Image](https://github.com/user-attachments/assets/2273f75b-d471-4ffa-a791-9da9223e88d5)

To get away with this error, I have to,

1) Find the underlining Batch Bundle, and manually change the quantity from 100 to 80. Go back to Stock entry and submit.

or

2) I made the extension app to correct the quantity,

```
from erpnext.stock.doctype.serial_and_batch_bundle.serial_and_batch_bundle import SerialandBatchBundle


class SerialandBatchBundleLPP(SerialandBatchBundle):
    
	def set_serial_and_batch_values(self, parent, row, qty_field=None):
		# Auto adjust batch bundle qty to avoid warning, for a very specific case
		if (
      		parent.doctype == ""Stock Entry""
        	and parent.stock_entry_type == ""Manufacture""
         	and self.has_batch_no
			and self.type_of_transaction == ""Inward""
		):
			# Case using batch (not serial), assume only 1 batch
			self.entries[0].qty = row.transfer_qty
			self.save()
		super().set_serial_and_batch_values(parent, row, qty_field=qty_field)

```

I am sure sure the above is a BUG ?

### Module

stock, manufacturing

### Version

ERPNext: v15.49.3 (version-15)
Frappe Framework: v15.54.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",kittiu,2025-02-03 14:52:02+00:00,[],2025-02-03 15:01:07+00:00,,https://github.com/frappe/erpnext/issues/45689,"[('bug', None)]",[],
2827679146,issue,open,,"BOM item UOM reverts to default when ""Do not explode"" is toggled","### Information about bug

When editing a BOM Item, toggling the checkbox ""Do not explode"" causes the selected item's UOM to revert to its default value. (E.g., from Units to Grams). No other editing action in the form appears to have the same effect. 



### Module

manufacturing

### Version

Frappe version: 15.54.1
ERPNext version 15.50

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",norulz,2025-02-03 14:28:07+00:00,['mihir-kandoi'],2025-02-05 18:51:32+00:00,,https://github.com/frappe/erpnext/issues/45688,"[('bug', None)]",[],
2827433702,issue,closed,completed,Job Cards - Time Logs time picker not working,"### Information about bug

After the latest update, the Time Logs can't be used. There is no way to pick up time (From, To)

![Image](https://github.com/user-attachments/assets/26b0da5f-d9ba-4b22-8042-ca3f3e763e07)

### Module

manufacturing

### Version

Frappe Version - 15.54.1
ERPNext Version - 15.50.0

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",SimTrudeau,2025-02-03 12:53:33+00:00,['mihir-kandoi'],2025-02-04 12:21:18+00:00,2025-02-04 12:21:17+00:00,https://github.com/frappe/erpnext/issues/45684,"[('bug', None)]","[{'comment_id': 2632920537, 'issue_id': 2827433702, 'author': 'mihir-kandoi', 'body': 'This is a known recent issue that has been fixed. Please update to the latest version of Frappe Framework and try again.', 'created_at': datetime.datetime(2025, 2, 4, 5, 34, 12, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-02-04 05:34:12 UTC): This is a known recent issue that has been fixed. Please update to the latest version of Frappe Framework and try again.

"
2827108779,issue,open,,Stocks: filters.to_date might be a datetime object: unsupported operand type(s) for +: 'datetime.date' and 'str',"re: #45612 

# Example

```py
stock_reco = frappe.new_doc(""Stock Reconciliation"")
stock_reco.posting_date = getdate()  # datetime
stock_reco.company = ""Test Company""
stock_reco.purpose = ""Stock Reconciliation""
stock_reco.get_items_for(""Test - TC"")
```

# Stacktrace 

```py
TypeError: unsupported operand type(s) for +: 'datetime.date' and 'str'

File ""bench/apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", in get_items_for
  for item in get_items(warehouse, self.posting_date, self.posting_time, self.company):
                                   ^^^^^^^^^^^^^^^^^

File ""bench/apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", in get_items
  itemwise_batch_data = get_itemwise_batch(warehouse, posting_date, company, item_code)
                                                      ^^^^^^^^^^^^

File ""bench/apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", in get_itemwise_batch
  columns, data = execute(filters)
File ""bench/apps/erpnext/erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py"", in execute
  iwb_map = get_item_warehouse_batch_map(filters, float_precision)
File ""bench/apps/erpnext/erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py"", in get_item_warehouse_batch_map
  sle = get_stock_ledger_entries(filters)
File ""bench/apps/erpnext/erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py"", in get_stock_ledger_entries
  entries += get_stock_ledger_entries_for_batch_bundle(filters)
File ""bench/apps/erpnext/erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py"", in get_stock_ledger_entries_for_batch_bundle
  to_date = get_datetime(filters.to_date + "" 23:59:59"")
                         ^^^^^^^^^^^^^^^

TypeError: unsupported operand type(s) for +: 'datetime.date' and 'str'
```
",cogk,2025-02-03 10:30:02+00:00,[],2025-02-03 10:30:18+00:00,,https://github.com/frappe/erpnext/issues/45681,[],[],
2826499598,issue,open,,Need provision to delete the non available stock from Delivery Note,"We are trying to submit the Delivery Note on removing a row of item whose stock is not available. But, the system is fetching the row again as pricing rule is there. If we select ""Ignore Pricing Rule"", it will remove the the items linked to all entered items in Delivery Note.

There should be provision to change the Qty or Delete the row if pricing rule is there. We are unable to handle this in the ERPNext so maintaining it on excel.",smbcatalyst,2025-02-03 06:04:25+00:00,[],2025-02-03 06:04:25+00:00,,https://github.com/frappe/erpnext/issues/45664,"[('feature-request', None)]",[],
2826039014,issue,open,,Problem validating Purchase Receipt,"### Information about bug

I checked the serial number of the product, and I don't see that it is the same as another. 

This impacts again on the correct functioning of our inventories and in the future for the review of the information of products delivered to customers. 

It is not only one product, but there are also several in this same purchase and I cannot advance, and I cannot take it out because it is the supplier's billing that I need to register.

![Image](https://github.com/user-attachments/assets/8d0f78fd-d883-4b6a-a270-c38cd2170f74)

### Module

buying

### Version

ERPNext: v15.x.x-develop () (develop)

Framework: v15.x.x-develop () (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 118, in application
    response = frappe.api.handle(request)
      request = <Request 'https://cmi.sersis.mx/api/method/frappe.desk.form.save.savedocs' [POST]>
      response = None
      rollback = True
      e = IntegrityError(1062, ""Duplicate entry '2ZR00241C' for key 'PRIMARY'"")
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
      request = <Request 'https://cmi.sersis.mx/api/method/frappe.desk.form.save.savedocs' [POST]>
      endpoint = <function handle_rpc_call at 0x7f07d9f9f760>
      arguments = {'method': 'frappe.desk.form.save.savedocs'}
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
      method = 'frappe.desk.form.save.savedocs'
      frappe = <module 'frappe' from 'apps/frappe/frappe/__init__.py'>
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
      cmd = 'frappe.desk.form.save.savedocs'
      data = None
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
      cmd = 'frappe.desk.form.save.savedocs'
      from_async = False
      server_script = None
      method = <function savedocs at 0x7f07d76ba0e0>
  File ""apps/frappe/frappe/__init__.py"", line 1831, in call
    return fn(*args, **newargs)
      fn = <function savedocs at 0x7f07d76ba0e0>
      args = ()
      kwargs = {'doc': '{""name"":""MAT-PRE-2025-00018"",""owner"":""m.osorio@cmimitsubishi.com"",""creation"":""2025-01-31 16:39:12.424130"",""modified"":""2025-01-31 16:41:22.272066"",""modified_by"":""m.osorio@cmimitsubishi.com"",""docstatus"":0,""idx"":0,""title"":""Trane SA de CV"",""naming_series"":""MAT-PRE-.YYYY.-"",""supplier"":""Trane SA de CV"",""supplier_name"":""Trane SA de CV"",""supplier_delivery_note"":""1261859685"",""posting_date"":""2025-01-02"",""posting_time"":""16:37:53.364252"",""set_posting_time"":1,""company"":""Cabo Mantenimiento Integral"",""apply_putaway_rule"":0,""is_return"":0,""currency"":""USD"",""conversion_rate"":1,""buying_price_list"":""Compra estandar USD"",""price_list_currency"":""USD"",""plc_conversion_rate"":1,""ignore_pricing_rule"":0,""set_warehouse"":""Bodega Zacatal - CMI"",""is_subcontracted"":0,""total_qty"":47,""total_net_weight"":0,""base_total"":10708.58,""base_net_total"":10708.58,""total"":10708.58,""net_total"":10708.58,""tax_withholding_net_total"":10708.58,""base_tax_withholding_net_total"":10708.58,""tax_category"":"""",""taxes_and_charges"":""Mexico T...
      newargs = {'doc': '{""name"":""MAT-PRE-2025-00018"",""owner"":""m.osorio@cmimitsubishi.com"",""creation"":""2025-01-31 16:39:12.424130"",""modified"":""2025-01-31 16:41:22.272066"",""modified_by"":""m.osorio@cmimitsubishi.com"",""docstatus"":0,""idx"":0,""title"":""Trane SA de CV"",""naming_series"":""MAT-PRE-.YYYY.-"",""supplier"":""Trane SA de CV"",""supplier_name"":""Trane SA de CV"",""supplier_delivery_note"":""1261859685"",""posting_date"":""2025-01-02"",""posting_time"":""16:37:53.364252"",""set_posting_time"":1,""company"":""Cabo Mantenimiento Integral"",""apply_putaway_rule"":0,""is_return"":0,""currency"":""USD"",""conversion_rate"":1,""buying_price_list"":""Compra estandar USD"",""price_list_currency"":""USD"",""plc_conversion_rate"":1,""ignore_pricing_rule"":0,""set_warehouse"":""Bodega Zacatal - CMI"",""is_subcontracted"":0,""total_qty"":47,""total_net_weight"":0,""base_total"":10708.58,""base_net_total"":10708.58,""total"":10708.58,""net_total"":10708.58,""tax_withholding_net_total"":10708.58,""base_tax_withholding_net_total"":10708.58,""tax_category"":"""",""taxes_and_charges"":""Mexico T...
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
    return func(*args, **kwargs)
      args = ()
      kwargs = {'doc': '{""name"":""MAT-PRE-2025-00018"",""owner"":""m.osorio@cmimitsubishi.com"",""creation"":""2025-01-31 16:39:12.424130"",""modified"":""2025-01-31 16:41:22.272066"",""modified_by"":""m.osorio@cmimitsubishi.com"",""docstatus"":0,""idx"":0,""title"":""Trane SA de CV"",""naming_series"":""MAT-PRE-.YYYY.-"",""supplier"":""Trane SA de CV"",""supplier_name"":""Trane SA de CV"",""supplier_delivery_note"":""1261859685"",""posting_date"":""2025-01-02"",""posting_time"":""16:37:53.364252"",""set_posting_time"":1,""company"":""Cabo Mantenimiento Integral"",""apply_putaway_rule"":0,""is_return"":0,""currency"":""USD"",""conversion_rate"":1,""buying_price_list"":""Compra estandar USD"",""price_list_currency"":""USD"",""plc_conversion_rate"":1,""ignore_pricing_rule"":0,""set_warehouse"":""Bodega Zacatal - CMI"",""is_subcontracted"":0,""total_qty"":47,""total_net_weight"":0,""base_total"":10708.58,""base_net_total"":10708.58,""total"":10708.58,""net_total"":10708.58,""tax_withholding_net_total"":10708.58,""base_tax_withholding_net_total"":10708.58,""tax_category"":"""",""taxes_and_charges"":""Mexico T...
      apply_condition = <function whitelist.<locals>.innerfn.<locals>.<lambda> at 0x7f07d76ba050>
      func = <function savedocs at 0x7f07d76b9fc0>
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
      doc = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      action = 'Submit'
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
    return func(*args, **kwargs)
      args = (<PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>,)
      kwargs = {}
      apply_condition = <function whitelist.<locals>.innerfn.<locals>.<lambda> at 0x7f07da106b00>
      func = <function Document.submit at 0x7f07da106a70>
  File ""apps/frappe/frappe/model/document.py"", line 1136, in submit
    return self._submit()
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
  File ""apps/frappe/frappe/model/document.py"", line 1119, in _submit
    return self.save()
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
  File ""apps/frappe/frappe/model/document.py"", line 411, in save
    return self._save(*args, **kwargs)
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      args = ()
      kwargs = {}
  File ""apps/frappe/frappe/model/document.py"", line 464, in _save
    self.run_post_save_methods()
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      ignore_permissions = None
      ignore_version = None
  File ""apps/frappe/frappe/model/document.py"", line 1238, in run_post_save_methods
    self.run_method(""on_submit"")
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
  File ""apps/frappe/frappe/model/document.py"", line 1050, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      args = ()
      kwargs = {}
      fn = <function Document.run_method.<locals>.fn at 0x7f07d3e97130>
      method = 'on_submit'
  File ""apps/frappe/frappe/model/document.py"", line 1433, in composer
    return composed(self, method, *args, **kwargs)
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      args = ()
      kwargs = {}
      hooks = []
      method = 'on_submit'
      doc_events = {'*': {'on_update': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.core.doctype.file.utils.attach_files_to_document', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply', 'frappe.automation.doctype.assignment_rule.assignment_rule.update_due_date', 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type', 'frappe.core.doctype.permission_log.permission_log.make_perm_log'], 'after_rename': ['frappe.desk.notifications.clear_doctype_notifications'], 'on_cancel': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply'], 'on_trash': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions'], 'on_update_after_submit': ...
      composed = <function Document.hook.<locals>.compose.<locals>.runner at 0x7f07d3cfcee0>
      compose = <function Document.hook.<locals>.compose at 0x7f07d3cff5b0>
      f = <function Document.run_method.<locals>.fn at 0x7f07d3e97130>
  File ""apps/frappe/frappe/model/document.py"", line 1411, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      method = 'on_submit'
      args = ()
      kwargs = {}
      add_to_return_value = <function Document.hook.<locals>.add_to_return_value at 0x7f07d3e976d0>
      fn = <function Document.run_method.<locals>.fn at 0x7f07d3e97130>
      hooks = ()
  File ""apps/frappe/frappe/model/document.py"", line 1047, in fn
    return method_object(*args, **kwargs)
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      args = ()
      kwargs = {}
      method_object = <bound method PurchaseReceipt.on_submit of <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>>
      method = 'on_submit'
  File ""apps/erpnext/erpnext/stock/doctype/purchase_receipt/purchase_receipt.py"", line 375, in on_submit
    self.make_bundle_using_old_serial_batch_fields()
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      __class__ = <class 'erpnext.stock.doctype.purchase_receipt.purchase_receipt.PurchaseReceipt'>
  File ""apps/erpnext/erpnext/controllers/stock_controller.py"", line 235, in make_bundle_using_old_serial_batch_fields
    self.create_serial_batch_bundle(bundle_details, row)
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      table_name = 'items'
      via_landed_cost_voucher = False
      row = <PurchaseReceiptItem: aal4air7lj docstatus=1 parent=MAT-PRE-2025-00018>
      bundle_details = {'item_code': 'PEFY-P80VMA-E5', 'posting_date': '2025-01-02', 'posting_time': '16:37:53.364252', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2025-00018', 'voucher_detail_no': 'aal4air7lj', 'company': 'Cabo Mantenimiento Integral', 'is_rejected': False, 'use_serial_batch_fields': 1, 'via_landed_cost_voucher': False, 'do_not_submit': True, 'qty': 6.0, 'type_of_transaction': 'Inward', 'warehouse': 'Bodega Zacatal - CMI', 'batches': None, 'serial_nos': ['2ZR00241C', '2ZR00241C', '31R00294B', '31R00295A', '31R00316', '31R00317'], 'batch_no': None}
  File ""apps/erpnext/erpnext/controllers/stock_controller.py"", line 427, in create_serial_batch_bundle
    sn_doc = SerialBatchCreation(bundle_details).make_serial_and_batch_bundle()
      self = <PurchaseReceipt: MAT-PRE-2025-00018 docstatus=1>
      bundle_details = {'item_code': 'PEFY-P80VMA-E5', 'posting_date': '2025-01-02', 'posting_time': '16:37:53.364252', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2025-00018', 'voucher_detail_no': 'aal4air7lj', 'company': 'Cabo Mantenimiento Integral', 'is_rejected': False, 'use_serial_batch_fields': 1, 'via_landed_cost_voucher': False, 'do_not_submit': True, 'qty': 6.0, 'type_of_transaction': 'Inward', 'warehouse': 'Bodega Zacatal - CMI', 'batches': None, 'serial_nos': ['2ZR00241C', '2ZR00241C', '31R00294B', '31R00295A', '31R00316', '31R00317'], 'batch_no': None}
      row = <PurchaseReceiptItem: aal4air7lj docstatus=1 parent=MAT-PRE-2025-00018>
      SerialBatchCreation = <class 'erpnext.stock.serial_batch_bundle.SerialBatchCreation'>
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 931, in make_serial_and_batch_bundle
    self.set_auto_serial_batch_entries_for_inward()
      self = <erpnext.stock.serial_batch_bundle.SerialBatchCreation object at 0x7f07d3db4b50>
      doc = <SerialandBatchBundle: unsaved>
      valid_columns = ['name', 'owner', 'creation', 'modified', 'modified_by', 'docstatus', 'idx', 'naming_series', 'company', 'item_name', 'has_serial_no', 'has_batch_no', 'item_code', 'warehouse', 'type_of_transaction', 'total_qty', 'item_group', 'avg_rate', 'total_amount', 'voucher_type', 'voucher_no', 'voucher_detail_no', 'posting_date', 'posting_time', 'returned_against', 'is_cancelled', 'is_rejected', 'amended_from']
      key = ********
      value = 6.0
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 1024, in set_auto_serial_batch_entries_for_inward
    self.make_serial_no_if_not_exists()
      self = <erpnext.stock.serial_batch_bundle.SerialBatchCreation object at 0x7f07d3db4b50>
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 1044, in make_serial_no_if_not_exists
    self.make_serial_nos(non_exists_serial_nos)
      self = <erpnext.stock.serial_batch_bundle.SerialBatchCreation object at 0x7f07d3db4b50>
      non_exists_serial_nos = ['2ZR00241C', '2ZR00241C', '31R00294B', '31R00295A', '31R00316', '31R00317']
      row = '31R00317'
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 1088, in make_serial_nos
    frappe.db.bulk_insert(""Serial No"", fields=fields, values=set(serial_nos_details))
      self = <erpnext.stock.serial_batch_bundle.SerialBatchCreation object at 0x7f07d3db4b50>
      serial_nos = ['2ZR00241C', '2ZR00241C', '31R00294B', '31R00295A', '31R00316', '31R00317']
      serial_nos_details = [('2ZR00241C', '2ZR00241C', '2025-02-01 08:27:42.810337', '2025-02-01 08:27:42.810377', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('2ZR00241C', '2ZR00241C', '2025-02-01 08:27:42.810406', '2025-02-01 08:27:42.810424', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00294B', '31R00294B', '2025-02-01 08:27:42.810444', '2025-02-01 08:27:42.810460', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00295A', '31R00295A', '2025-02-01 08:27:42.810479', '2025-02-01 08:27:42.810493', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Man...
      batch_no = None
      serial_no = '31R00317'
      fields = ['name', 'serial_no', 'creation', 'modified', 'owner', 'modified_by', 'warehouse', 'company', 'item_code', 'item_name', 'description', 'status', 'batch_no']
  File ""apps/frappe/frappe/database/database.py"", line 1356, in bulk_insert
    query.insert(*value_chunk).run()
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7f07d3dcca00>
      doctype = 'Serial No'
      fields = ['name', 'serial_no', 'creation', 'modified', 'owner', 'modified_by', 'warehouse', 'company', 'item_code', 'item_name', 'description', 'status', 'batch_no']
      values = {('31R00295A', '31R00295A', '2025-02-01 08:27:42.810479', '2025-02-01 08:27:42.810493', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('2ZR00241C', '2ZR00241C', '2025-02-01 08:27:42.810406', '2025-02-01 08:27:42.810424', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00316', '31R00316', '2025-02-01 08:27:42.810511', '2025-02-01 08:27:42.810525', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00317', '31R00317', '2025-02-01 08:27:42.810542', '2025-02-01 08:27:42.810556', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Manteni...
      ignore_duplicates = False
      chunk_size = 10000
      table = Table('tabSerial No')
      query = 
      value_iterator = <set_iterator object at 0x7f07d42cee00>
      value_chunk = (('31R00295A', '31R00295A', '2025-02-01 08:27:42.810479', '2025-02-01 08:27:42.810493', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('2ZR00241C', '2ZR00241C', '2025-02-01 08:27:42.810406', '2025-02-01 08:27:42.810424', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00316', '31R00316', '2025-02-01 08:27:42.810511', '2025-02-01 08:27:42.810525', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Mantenimiento Integral', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'PEFY-P80VMA-E5', 'Active', None), ('31R00317', '31R00317', '2025-02-01 08:27:42.810542', '2025-02-01 08:27:42.810556', 'm.osorio@cmimitsubishi.com', 'm.osorio@cmimitsubishi.com', 'Bodega Zacatal - CMI', 'Cabo Manteni...
  File ""apps/frappe/frappe/query_builder/utils.py"", line 84, in execute_query
    result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep
      query = 'INSERT INTO `tabSerial No` (`name`,`serial_no`,`creation`,`modified`,`owner`,`modified_by`,`warehouse`,`company`,`item_code`,`item_name`,`description`,`status`,`batch_no`) VALUES (%(param1)s,%(param2)s,%(param3)s,%(param4)s,%(param5)s,%(param6)s,%(param7)s,%(param8)s,%(param9)s,%(param10)s,%(param11)s,%(param12)s,NULL),(%(param13)s,%(param14)s,%(param15)s,%(param16)s,%(param17)s,%(param18)s,%(param19)s,%(param20)s,%(param21)s,%(param22)s,%(param23)s,%(param24)s,NULL),(%(param25)s,%(param26)s,%(param27)s,%(param28)s,%(param29)s,%(param30)s,%(param31)s,%(param32)s,%(param33)s,%(param34)s,%(param35)s,%(param36)s,NULL),(%(param37)s,%(param38)s,%(param39)s,%(param40)s,%(param41)s,%(param42)s,%(param43)s,%(param44)s,%(param45)s,%(param46)s,%(param47)s,%(param48)s,NULL),(%(param49)s,%(param50)s,%(param51)s,%(param52)s,%(param53)s,%(param54)s,%(param55)s,%(param56)s,%(param57)s,%(param58)s,%(param59)s,%(param60)s,NULL),(%(param61)s,%(param62)s,%(param63)s,%(param64)s,%(param65)s,%(param66)s,%...
      args = ()
      kwargs = {}
      child_queries = []
      params = {'param1': '31R00295A', 'param2': '31R00295A', 'param3': '2025-02-01 08:27:42.810479', 'param4': '2025-02-01 08:27:42.810493', 'param5': 'm.osorio@cmimitsubishi.com', 'param6': 'm.osorio@cmimitsubishi.com', 'param7': 'Bodega Zacatal - CMI', 'param8': 'Cabo Mantenimiento Integral', 'param9': 'PEFY-P80VMA-E5', 'param10': 'PEFY-P80VMA-E5', 'param11': 'PEFY-P80VMA-E5', 'param12': 'Active', 'param13': '2ZR00241C', 'param14': '2ZR00241C', 'param15': '2025-02-01 08:27:42.810406', 'param16': '2025-02-01 08:27:42.810424', 'param17': 'm.osorio@cmimitsubishi.com', 'param18': 'm.osorio@cmimitsubishi.com', 'param19': 'Bodega Zacatal - CMI', 'param20': 'Cabo Mantenimiento Integral', 'param21': 'PEFY-P80VMA-E5', 'param22': 'PEFY-P80VMA-E5', 'param23': 'PEFY-P80VMA-E5', 'param24': 'Active', 'param25': '31R00316', 'param26': '31R00316', 'param27': '2025-02-01 08:27:42.810511', 'param28': '2025-02-01 08:27:42.810525', 'param29': 'm.osorio@cmimitsubishi.com', 'param30': 'm.osorio@cmimitsubishi.com', 'par...
      execute_child_queries = <function patch_query_execute.<locals>.execute_child_queries at 0x7f07d3e97ac0>
      prepare_query = <function patch_query_execute.<locals>.prepare_query at 0x7f07d3e97910>
  File ""apps/frappe/frappe/database/database.py"", line 235, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7f07d3dcca00>
      query = 'INSERT INTO `tabSerial No` (`name`,`serial_no`,`creation`,`modified`,`owner`,`modified_by`,`warehouse`,`company`,`item_code`,`item_name`,`description`,`status`,`batch_no`) VALUES (%(param1)s,%(param2)s,%(param3)s,%(param4)s,%(param5)s,%(param6)s,%(param7)s,%(param8)s,%(param9)s,%(param10)s,%(param11)s,%(param12)s,NULL),(%(param13)s,%(param14)s,%(param15)s,%(param16)s,%(param17)s,%(param18)s,%(param19)s,%(param20)s,%(param21)s,%(param22)s,%(param23)s,%(param24)s,NULL),(%(param25)s,%(param26)s,%(param27)s,%(param28)s,%(param29)s,%(param30)s,%(param31)s,%(param32)s,%(param33)s,%(param34)s,%(param35)s,%(param36)s,NULL),(%(param37)s,%(param38)s,%(param39)s,%(param40)s,%(param41)s,%(param42)s,%(param43)s,%(param44)s,%(param45)s,%(param46)s,%(param47)s,%(param48)s,NULL),(%(param49)s,%(param50)s,%(param51)s,%(param52)s,%(param53)s,%(param54)s,%(param55)s,%(param56)s,%(param57)s,%(param58)s,%(param59)s,%(param60)s,NULL),(%(param61)s,%(param62)s,%(param63)s,%(param64)s,%(param65)s,%(param66)s,%...
      values = {'param1': '31R00295A', 'param2': '31R00295A', 'param3': '2025-02-01 08:27:42.810479', 'param4': '2025-02-01 08:27:42.810493', 'param5': 'm.osorio@cmimitsubishi.com', 'param6': 'm.osorio@cmimitsubishi.com', 'param7': 'Bodega Zacatal - CMI', 'param8': 'Cabo Mantenimiento Integral', 'param9': 'PEFY-P80VMA-E5', 'param10': 'PEFY-P80VMA-E5', 'param11': 'PEFY-P80VMA-E5', 'param12': 'Active', 'param13': '2ZR00241C', 'param14': '2ZR00241C', 'param15': '2025-02-01 08:27:42.810406', 'param16': '2025-02-01 08:27:42.810424', 'param17': 'm.osorio@cmimitsubishi.com', 'param18': 'm.osorio@cmimitsubishi.com', 'param19': 'Bodega Zacatal - CMI', 'param20': 'Cabo Mantenimiento Integral', 'param21': 'PEFY-P80VMA-E5', 'param22': 'PEFY-P80VMA-E5', 'param23': 'PEFY-P80VMA-E5', 'param24': 'Active', 'param25': '31R00316', 'param26': '31R00316', 'param27': '2025-02-01 08:27:42.810511', 'param28': '2025-02-01 08:27:42.810525', 'param29': 'm.osorio@cmimitsubishi.com', 'param30': 'm.osorio@cmimitsubishi.com', 'par...
      as_dict = 0
      as_list = 0
      debug = False
      ignore_ddl = 0
      auto_commit = 0
      update = None
      explain = False
      run = True
      pluck = False
      as_iterator = False
      trace_id = None
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
      self = <pymysql.cursors.Cursor object at 0x7f07d4cca830>
      query = ""INSERT INTO `tabSerial No` (`name`,`serial_no`,`creation`,`modified`,`owner`,`modified_by`,`warehouse`,`company`,`item_code`,`item_name`,`description`,`status`,`batch_no`) VALUES ('31R00295A','31R00295A','2025-02-01 08:27:42.810479','2025-02-01 08:27:42.810493','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('2ZR00241C','2ZR00241C','2025-02-01 08:27:42.810406','2025-02-01 08:27:42.810424','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00316','31R00316','2025-02-01 08:27:42.810511','2025-02-01 08:27:42.810525','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00317','31R00317','2025-02-01 08:27:4...
      args = {'param1': '31R00295A', 'param2': '31R00295A', 'param3': '2025-02-01 08:27:42.810479', 'param4': '2025-02-01 08:27:42.810493', 'param5': 'm.osorio@cmimitsubishi.com', 'param6': 'm.osorio@cmimitsubishi.com', 'param7': 'Bodega Zacatal - CMI', 'param8': 'Cabo Mantenimiento Integral', 'param9': 'PEFY-P80VMA-E5', 'param10': 'PEFY-P80VMA-E5', 'param11': 'PEFY-P80VMA-E5', 'param12': 'Active', 'param13': '2ZR00241C', 'param14': '2ZR00241C', 'param15': '2025-02-01 08:27:42.810406', 'param16': '2025-02-01 08:27:42.810424', 'param17': 'm.osorio@cmimitsubishi.com', 'param18': 'm.osorio@cmimitsubishi.com', 'param19': 'Bodega Zacatal - CMI', 'param20': 'Cabo Mantenimiento Integral', 'param21': 'PEFY-P80VMA-E5', 'param22': 'PEFY-P80VMA-E5', 'param23': 'PEFY-P80VMA-E5', 'param24': 'Active', 'param25': '31R00316', 'param26': '31R00316', 'param27': '2025-02-01 08:27:42.810511', 'param28': '2025-02-01 08:27:42.810525', 'param29': 'm.osorio@cmimitsubishi.com', 'param30': 'm.osorio@cmimitsubishi.com', 'par...
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
      self = <pymysql.cursors.Cursor object at 0x7f07d4cca830>
      q = ""INSERT INTO `tabSerial No` (`name`,`serial_no`,`creation`,`modified`,`owner`,`modified_by`,`warehouse`,`company`,`item_code`,`item_name`,`description`,`status`,`batch_no`) VALUES ('31R00295A','31R00295A','2025-02-01 08:27:42.810479','2025-02-01 08:27:42.810493','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('2ZR00241C','2ZR00241C','2025-02-01 08:27:42.810406','2025-02-01 08:27:42.810424','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00316','31R00316','2025-02-01 08:27:42.810511','2025-02-01 08:27:42.810525','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00317','31R00317','2025-02-01 08:27:4...
      conn = <pymysql.connections.Connection object at 0x7f07d4cc9ed0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
      self = <pymysql.connections.Connection object at 0x7f07d4cc9ed0>
      sql = b""INSERT INTO `tabSerial No` (`name`,`serial_no`,`creation`,`modified`,`owner`,`modified_by`,`warehouse`,`company`,`item_code`,`item_name`,`description`,`status`,`batch_no`) VALUES ('31R00295A','31R00295A','2025-02-01 08:27:42.810479','2025-02-01 08:27:42.810493','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('2ZR00241C','2ZR00241C','2025-02-01 08:27:42.810406','2025-02-01 08:27:42.810424','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00316','31R00316','2025-02-01 08:27:42.810511','2025-02-01 08:27:42.810525','m.osorio@cmimitsubishi.com','m.osorio@cmimitsubishi.com','Bodega Zacatal - CMI','Cabo Mantenimiento Integral','PEFY-P80VMA-E5','PEFY-P80VMA-E5','PEFY-P80VMA-E5','Active',NULL),('31R00317','31R00317','2025-02-01 08:27:...
      unbuffered = False
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 825, in _read_query_result
    result.read()
      self = <pymysql.connections.Connection object at 0x7f07d4cc9ed0>
      unbuffered = False
      result = <pymysql.connections.MySQLResult object at 0x7f07d395bac0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 1199, in read
    first_packet = self.connection._read_packet()
      self = <pymysql.connections.MySQLResult object at 0x7f07d395bac0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 775, in _read_packet
    packet.raise_for_error()
      self = <pymysql.connections.Connection object at 0x7f07d4cc9ed0>
      packet_type = <class 'pymysql.protocol.MysqlPacket'>
      buff = bytearray(b""\xff&\x04#23000Duplicate entry \'2ZR00241C\' for key \'PRIMARY\'"")
      packet_header = b'6\x00\x00\x01'
      btrl = 54
      btrh = 0
      packet_number = 1
      bytes_to_read = 54
      recv_data = b""\xff&\x04#23000Duplicate entry '2ZR00241C' for key 'PRIMARY'""
      packet = <pymysql.protocol.MysqlPacket object at 0x7f07d4256620>
  File ""env/lib/python3.10/site-packages/pymysql/protocol.py"", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
      self = <pymysql.protocol.MysqlPacket object at 0x7f07d4256620>
      errno = 1062
  File ""env/lib/python3.10/site-packages/pymysql/err.py"", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
      data = b""\xff&\x04#23000Duplicate entry '2ZR00241C' for key 'PRIMARY'""
      errno = 1062
      errval = ""Duplicate entry '2ZR00241C' for key 'PRIMARY'""
      errorclass = <class 'pymysql.err.IntegrityError'>
pymysql.err.IntegrityError: (1062, ""Duplicate entry '2ZR00241C' for key 'PRIMARY'"")
```",JoSoG89,2025-02-02 21:58:51+00:00,[],2025-02-02 21:58:51+00:00,,https://github.com/frappe/erpnext/issues/45663,"[('bug', None)]",[],
2826035244,issue,closed,completed,Does not allow validating inventory entry,"### Information about bug

 Detailed description of the problem: I am making an inventory entry, receipt of materials: Receipt of Materials
/app/stock-entry/MAT-STE-2025-00006

![Image](https://github.com/user-attachments/assets/219a0d39-ad24-4655-975c-e694b2297e92)

Equipment models with serial number are entered and I get this error when I want to validate image I don't know if I have to see that a previous entry had already been made in Receipt of Materials but apparently it is different. 

Impact of the problem: The physical and virtual inventory do not match due to this situation. 

Steps to reproduce the problem: This product must be listed with its serial number correctly in order to proceed with the future sale and delivery of the equipment. 

Screenshots or logs: 

![Image](https://github.com/user-attachments/assets/77b8a375-cf4b-4155-af20-75ed4fa1204a)

### Module

stock

### Version

ERPNext: v15.x.x-develop () (develop)

Framework: v15.x.x-develop () (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",JoSoG89,2025-02-02 21:51:21+00:00,[],2025-02-06 17:44:32+00:00,2025-02-06 17:44:30+00:00,https://github.com/frappe/erpnext/issues/45662,"[('bug', None)]","[{'comment_id': 2640572574, 'issue_id': 2826035244, 'author': 'JoSoG89', 'body': 'The serial number still after document deleting.', 'created_at': datetime.datetime(2025, 2, 6, 17, 44, 30, tzinfo=datetime.timezone.utc)}]","JoSoG89 (Issue Creator) on (2025-02-06 17:44:30 UTC): The serial number still after document deleting.

"
2825625707,issue,open,,TypeError: get_account_balance() missing 1 required positional argument: 'company',"### Information about bug

Get error TypeError: get_account_balance() missing 1 required positional argument: 'company' when submit bank reconcile


### Module

accounts

### Version

ERPNext: v15.50.0 (version-15)
Frappe Framework: v15.54.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""barcode_generator"": ""0.0.1"",
	""erpnext"": ""15.50.0"",
	""expense_request"": ""0.0.4"",
	""frappe"": ""15.54.1"",
	""jm_customize"": ""0.0.1"",
	""qr_reader"": ""0.0.1"",
	""sopwer_erp2"": ""0.1.0"",
	""sopwer_theme"": ""0.3.13"",
	""textile2"": ""0.0.3""
}

### Route

Form/Bank Reconciliation Tool/Bank Reconciliation Tool

### Traceback

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
TypeError: get_account_balance() missing 1 required positional argument: 'company'


### Request Data

{
	""type"": ""POST"",
	""args"": {
		""bank_account"": ""JMT 8383834242 - BCA"",
		""till_date"": ""2025-02-02""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/erpnext.accounts.doctype.bank_reconciliation_tool.bank_reconciliation_tool.get_account_balance"",
	""request_id"": null
}

### Response Data

{
	""exception"": ""TypeError: get_account_balance() missing 1 required positional argument: 'company'"",
	""exc_type"": ""TypeError""
}
```",xhijack,2025-02-02 05:48:46+00:00,['mihir-kandoi'],2025-02-03 10:02:20+00:00,,https://github.com/frappe/erpnext/issues/45658,"[('bug', None)]","[{'comment_id': 2630482625, 'issue_id': 2825625707, 'author': 'mihir-kandoi', 'body': 'Please provide replication steps.', 'created_at': datetime.datetime(2025, 2, 3, 10, 2, 16, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-02-03 10:02:16 UTC): Please provide replication steps.

"
2825359279,issue,open,,"Packed Item of Delivery Note and Sales Invoice should be available in Quality Inspection's ""Item Code"" field filter","### Information about bug

Unable to create Quality Inspection for Delivery Note/Sales Invoice Packed Item.

### Module

stock

### Version

frappe 15.54.1
erpnext 15.50.0
india_compliance 15.15.0
payments 0.0.1

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",HUMENTH,2025-02-01 18:30:29+00:00,['mihir-kandoi'],2025-02-03 10:01:05+00:00,,https://github.com/frappe/erpnext/issues/45655,"[('bug', None)]","[{'comment_id': 2630478679, 'issue_id': 2825359279, 'author': 'mihir-kandoi', 'body': ""Not enough information. Since you're a Frappe Cloud customer, I recommend opening a support ticket on FC Helpdesk."", 'created_at': datetime.datetime(2025, 2, 3, 10, 0, 44, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-02-03 10:00:44 UTC): Not enough information. Since you're a Frappe Cloud customer, I recommend opening a support ticket on FC Helpdesk.

"
2825234001,issue,open,,DE Translation in Material Request not showing up,"### Information about bug

Deployed ERP Next with docker from https://github.com/frappe/frappe_docker with the docker compose -f pwd.yml up -d command as described there.

When creating a new Material Request the field ""Required By"" is translated into ""Benötigt von"" what is not correct.
I checked the translationfile on crowdin there the correct translation is provided and approved ""Benötigt bis"".

Why is it not sowing up in a fresh install?

I am running Windows 11 running Docker Desktop.
Docker ERP Next: https://github.com/frappe/frappe_docker with the docker compose -f pwd.yml up -d command as described there

![Image](https://github.com/user-attachments/assets/a78aa891-07ff-407e-828c-3158280a7b56)

### Module

other

### Version

erpnext 15.50.0
frappe 15.54.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell

```",mhh008,2025-02-01 14:13:28+00:00,[],2025-02-03 17:45:11+00:00,,https://github.com/frappe/erpnext/issues/45654,"[('bug', None)]","[{'comment_id': 2629574720, 'issue_id': 2825234001, 'author': '0xD0M1M0', 'body': 'CrowdIn translations for Frappe, HRMS and ERPNext, as far as I know, are currently only applied to the development branch. This was a decision to avoid breaking changes for companies applying v15 and below. Other apps like ERPNext Germany use already the translation via the new translation mode.\n\nThe translation shall be updated in the csv files:\n\nhttps://github.com/frappe/erpnext/blob/version-15-hotfix/erpnext/translations/de.csv', 'created_at': datetime.datetime(2025, 2, 2, 21, 58, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631623836, 'issue_id': 2825234001, 'author': 'mhh008', 'body': 'Thanks for the clarification. How can such a change be proposed?\nI found the entry in the file:\nRequired By,Benätigt von\n\nIt should be:\nRequired By,Benätigt bis', 'created_at': datetime.datetime(2025, 2, 3, 17, 26, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631664876, 'issue_id': 2825234001, 'author': '0xD0M1M0', 'body': 'Please fork the repository, change your values and create a pull request to the develop branch.\n\nSome starting point is the GitHub manual: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork', 'created_at': datetime.datetime(2025, 2, 3, 17, 45, 10, tzinfo=datetime.timezone.utc)}]","0xD0M1M0 on (2025-02-02 21:58:12 UTC): CrowdIn translations for Frappe, HRMS and ERPNext, as far as I know, are currently only applied to the development branch. This was a decision to avoid breaking changes for companies applying v15 and below. Other apps like ERPNext Germany use already the translation via the new translation mode.

The translation shall be updated in the csv files:

https://github.com/frappe/erpnext/blob/version-15-hotfix/erpnext/translations/de.csv

mhh008 (Issue Creator) on (2025-02-03 17:26:07 UTC): Thanks for the clarification. How can such a change be proposed?
I found the entry in the file:
Required By,Benätigt von

It should be:
Required By,Benätigt bis

0xD0M1M0 on (2025-02-03 17:45:10 UTC): Please fork the repository, change your values and create a pull request to the develop branch.

Some starting point is the GitHub manual: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork

"
2825229273,issue,open,,Docker ERP Next Print pdf Sales Invoice - wkhtmltopdf Error,"### Information about bug

Deployed ERP Next with docker from https://github.com/frappe/frappe_docker with the docker compose -f pwd.yml up -d command as described there.
Then I tried first steps in ERP Next.
When try to print a Sales Invoice and then click the ""pdf"" button I get an Server Error.

I get an wkhtmltopdf Error.

I saw and checked other issues with that topic but nothing worked, further the described solutions seem not to be completed as there is no instruction on how to change the docker compose files so that it workes from scratch.

I have no custom formats or something else.

I am running Windows 11 running Docker Desktop.
Docker ERP Next: https://github.com/frappe/frappe_docker with the docker compose -f pwd.yml up -d command as described there

### Module

other

### Version

erpnext 15.50.0
frappe 15.54.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
File ""apps/frappe/frappe/app.py"", line 114, in application
response = frappe.api.handle(request)
^^^^^^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/api/init.py"", line 49, in handle
data = endpoint(**arguments)
^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
return frappe.handler.handle()
^^^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/handler.py"", line 50, in handle
data = execute_cmd(cmd)
^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
return frappe.call(method, **frappe.form_dict)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/init.py"", line 1726, in call
return fn(*args, **newargs)
^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
return func(*args, **kwargs)
^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/utils/print_format.py"", line 236, in download_pdf
pdf_file = frappe.get_print(
^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/init.py"", line 2142, in get_print
return get_pdf(html, options=pdf_options, output=output) if as_pdf else html
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File ""apps/frappe/frappe/utils/pdf.py"", line 90, in get_pdf
filedata = pdfkit.from_string(html, options=options or {}, verbose=True)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
File ""env/lib/python3.11/site-packages/pdfkit/api.py"", line 75, in from_string
return r.to_pdf(output_path)
^^^^^^^^^^^^^^^^^^^^^
File ""env/lib/python3.11/site-packages/pdfkit/pdfkit.py"", line 201, in to_pdf
self.handle_error(exit_code, stderr)
File ""env/lib/python3.11/site-packages/pdfkit/pdfkit.py"", line 155, in handle_error
raise IOError('wkhtmltopdf reported an error:\n' + stderr)
OSError: wkhtmltopdf reported an error:
Exit with code 1 due to network error: ConnectionRefusedError
```",mhh008,2025-02-01 14:03:35+00:00,[],2025-02-03 17:38:42+00:00,,https://github.com/frappe/erpnext/issues/45653,"[('bug', None)]","[{'comment_id': 2629572451, 'issue_id': 2825229273, 'author': '0xD0M1M0', 'body': 'Have you seen these issues and possible solutions:\nhttps://github.com/frappe/frappe/issues/23958\nhttps://github.com/frappe/frappe_docker/issues/589\nhttps://github.com/frappe/frappe_docker/issues/1049\n\nPossibly an IP or port is not open in the firewall or accessible.', 'created_at': datetime.datetime(2025, 2, 2, 21, 51, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631651276, 'issue_id': 2825229273, 'author': 'mhh008', 'body': 'Yes I tried the tipps there, but could not figure out a solution.', 'created_at': datetime.datetime(2025, 2, 3, 17, 38, 40, tzinfo=datetime.timezone.utc)}]","0xD0M1M0 on (2025-02-02 21:51:55 UTC): Have you seen these issues and possible solutions:
https://github.com/frappe/frappe/issues/23958
https://github.com/frappe/frappe_docker/issues/589
https://github.com/frappe/frappe_docker/issues/1049

Possibly an IP or port is not open in the firewall or accessible.

mhh008 (Issue Creator) on (2025-02-03 17:38:40 UTC): Yes I tried the tipps there, but could not figure out a solution.

"
2825189868,issue,closed,completed,Rate updation issue in Delivery Note while the batch is being selected.,"### Information about bug

Hi Team,

While the delivery note is being created from the sales order and saved, the batch gets automatically selected. But the batch rate is not getting updated unless the user changes anything in the batch_no field. The screen recording has attached to this.  Each and every,  users are suppose to trigger the Batch No field to change the rate.

Hoping to get this fix asap. Thank you



https://github.com/user-attachments/assets/2af83099-b947-4d23-8937-8fd42b198d9e



### Module

stock, selling, accounts

### Version

ERPNext - v15.50.0
Frappe - v15.54.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",nirmal2010,2025-02-01 12:38:41+00:00,['mihir-kandoi'],2025-02-05 19:00:58+00:00,2025-02-05 19:00:56+00:00,https://github.com/frappe/erpnext/issues/45652,"[('bug', None)]","[{'comment_id': 2636126202, 'issue_id': 2825189868, 'author': 'nirmal2010', 'body': 'Hi @mihir-kandoi, Is there any update on this issue?', 'created_at': datetime.datetime(2025, 2, 5, 9, 2, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637778345, 'issue_id': 2825189868, 'author': 'mihir-kandoi', 'body': 'Fixed through PR [45692](https://github.com/frappe/erpnext/pull/45692)\n\nClosing.', 'created_at': datetime.datetime(2025, 2, 5, 19, 0, 56, tzinfo=datetime.timezone.utc)}]","nirmal2010 (Issue Creator) on (2025-02-05 09:02:35 UTC): Hi @mihir-kandoi, Is there any update on this issue?

mihir-kandoi (Assginee) on (2025-02-05 19:00:56 UTC): Fixed through PR [45692](https://github.com/frappe/erpnext/pull/45692)

Closing.

"
2824389855,issue,open,,"""No Copy” not respected for custom fields on item variants","### Information about bug

ERPNext 15.41.1
Frappe 15.47.1

Possibly related to #17664

On the default Item DocType, we added two custom fields: “Barcode” & “Tags”. On the Customize Form page for the Item DocType, we checked the “No Copy” attribute for our new custom fields.

![Image](https://github.com/user-attachments/assets/20d7a64a-7459-4825-999f-8298b017271d)

However, both of our custom fields revert back to the template’s data any time the template is saved. For example:

1. Create a template item
2. Enter a default barcode and tag value
3. Save the template
4. Create variants of the template
5. Set a custom barcode and tag on the variant
6. Save the variant
7. Return to the template
8. Update any value in any field (such as adding a space to the description)
9. Save the template
10. Return to the item variant and observe that the barcode and tag have been overriden by the template’s values.

We would expect that returning to the item variant after changing the template would not update the custom fields that we’ve marked as “No Copy”, but that isn’t the case.

Can anyone provide insight into this and advise on a solution?


### Module

stock

### Version

ERPNext 15.41.1
Frappe 15.47.1

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",upcc-jesse,2025-01-31 21:04:02+00:00,[],2025-02-03 14:31:16+00:00,,https://github.com/frappe/erpnext/issues/45649,"[('bug', None)]","[{'comment_id': 2630049728, 'issue_id': 2824389855, 'author': 'mihir-kandoi', 'body': 'The ""No Copy"" attribute on a field prevents the value of that field being copied to the new document when duplicating that document. It does not work the way you have described.', 'created_at': datetime.datetime(2025, 2, 3, 6, 3, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630081957, 'issue_id': 2824389855, 'author': 'upcc-jesse', 'body': '![Image](https://github.com/user-attachments/assets/fcacae18-7bda-4b80-821b-549677182d2f)\n\nThis banner is incorrect or misleading, then.\n\nI can\'t think of a reason why I would ever:\n\n1. set ""No Copy"" on a field because I don\'t want variants to inherit the field from the template when I make the variant *BUT*\n2. also want that field in the variant to be overridden if I ever update the template\n\nIf I want the field of the variant to match the field from the template, I wouldn\'t mark ""No Copy"". But if I mark ""No Copy"" then the variant *should never* inherit the field from the template.\n\nEither:\n\n1. It should clarify that fields will be copied to variants *upon creation*; or\n2. The behavior should be changed.\n3. Otherwise, is there a feature I\'m not aware of that let\'s me have unique field values on a variant that never get updated from the template?\n\nAs an example use case:\n\n1. I sell T-Shirts\n2. I have one base model T-Shirt\n3. I want variants for different designs (stripes, hatch, etc)\n4. I want the description of the variants to reflect what they are - ""This is a striped shirt"", ""This is a hatched shirt"", etc\n\nCurrently, as I understand it, I can\'t have those descriptions unique for each variant unless I set them *and then never edit the template again*. As soon as the template is saved after making any changes, the variant descriptions get changed.', 'created_at': datetime.datetime(2025, 2, 3, 6, 30, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630170362, 'issue_id': 2824389855, 'author': 'TurkerTunali', 'body': '@upcc-jesse, did you see the ""Item Variant Settings"" where you can set which fields must be copied to the created variant?', 'created_at': datetime.datetime(2025, 2, 3, 7, 30, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631167614, 'issue_id': 2824389855, 'author': 'upcc-jesse', 'body': 'Yes. Our new custom fields are not in that list and so they should not be syncing to the variants.', 'created_at': datetime.datetime(2025, 2, 3, 14, 31, 15, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-02-03 06:03:47 UTC): The ""No Copy"" attribute on a field prevents the value of that field being copied to the new document when duplicating that document. It does not work the way you have described.

upcc-jesse (Issue Creator) on (2025-02-03 06:30:10 UTC): ![Image](https://github.com/user-attachments/assets/fcacae18-7bda-4b80-821b-549677182d2f)

This banner is incorrect or misleading, then.

I can't think of a reason why I would ever:

1. set ""No Copy"" on a field because I don't want variants to inherit the field from the template when I make the variant *BUT*
2. also want that field in the variant to be overridden if I ever update the template

If I want the field of the variant to match the field from the template, I wouldn't mark ""No Copy"". But if I mark ""No Copy"" then the variant *should never* inherit the field from the template.

Either:

1. It should clarify that fields will be copied to variants *upon creation*; or
2. The behavior should be changed.
3. Otherwise, is there a feature I'm not aware of that let's me have unique field values on a variant that never get updated from the template?

As an example use case:

1. I sell T-Shirts
2. I have one base model T-Shirt
3. I want variants for different designs (stripes, hatch, etc)
4. I want the description of the variants to reflect what they are - ""This is a striped shirt"", ""This is a hatched shirt"", etc

Currently, as I understand it, I can't have those descriptions unique for each variant unless I set them *and then never edit the template again*. As soon as the template is saved after making any changes, the variant descriptions get changed.

TurkerTunali on (2025-02-03 07:30:57 UTC): @upcc-jesse, did you see the ""Item Variant Settings"" where you can set which fields must be copied to the created variant?

upcc-jesse (Issue Creator) on (2025-02-03 14:31:15 UTC): Yes. Our new custom fields are not in that list and so they should not be syncing to the variants.

"
2823183808,issue,open,,Auto-extend holiday list,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
Holiday List has a fixed period, while holidays are usually continuous. Someone needs to remember to regularly update the holiday list. This is something we can automate.

**Describe the solution you'd like**

- Move weekly off into child table. We need this as a prerequisite to store all weekly off days for auto-renewal.
- Support auto renewal

Additional fields:

- Auto-extend n Days Before End
- Extend By x Days

Add scheduled job

",barredterra,2025-01-31 11:44:24+00:00,[],2025-01-31 11:44:57+00:00,,https://github.com/frappe/erpnext/issues/45641,"[('feature-request', None)]",[],
2822238318,issue,open,,accounting dimension company validation should not be applicable for inetercompany transaction,"### Information about bug

In accounts_controller.py, validate_company_in_accounting_dimension()  company level validation of accounting dimension is added for https://github.com/frappe/erpnext/pull/45302 .  This validation should not be applicable when inter company sales or purchase invoices are created with accounting dimension. 

Scenario : multiple companies work to deliver same project and then they bill the resource hours among them selves. project could be owned by one company but if other company's employee worked on those project they need to create invoice using same project as accounting dimension. So this validation is fine for customer sales invoice but  should not be valid for intercompany invoices where invoice contains an internal customer.

### Module

accounts

### Version

Frappe 15
ERPNext 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",pritambiswal,2025-01-31 01:37:54+00:00,['ruthra-kumar'],2025-01-31 12:59:53+00:00,,https://github.com/frappe/erpnext/issues/45625,"[('bug', None)]","[{'comment_id': 2626648863, 'issue_id': 2822238318, 'author': 'ruthra-kumar', 'body': ""@pritambiswal \n\nCost Centers are associated with company. So, using them across companies doesn't sound right, even for Intercompany transaction."", 'created_at': datetime.datetime(2025, 1, 31, 8, 35, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626874614, 'issue_id': 2822238318, 'author': 'pritambiswal', 'body': 'I agree, cost center should be validated.  if you use other objects like project or any other field as accounting dimension, it does not make sense to validate that for internal customers. May be good to have a setting at accounting dimension if it needs to be validated.', 'created_at': datetime.datetime(2025, 1, 31, 10, 31, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626969210, 'issue_id': 2822238318, 'author': 'ruthra-kumar', 'body': 'Project also has company. The current validation enforces based on the availability of Company field in dimension doctype.\n\n\nSo a better approach for your case would be to create a custom doctype without any company field and use that as a dimension.', 'created_at': datetime.datetime(2025, 1, 31, 11, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627267998, 'issue_id': 2822238318, 'author': 'pritambiswal', 'body': 'I already explained the real business scenario where it does not make sense to have this validation for projects. I let you decide how you want to handle it. Project has lot of other features for which it does not make sense to create a custom doctype for it.', 'created_at': datetime.datetime(2025, 1, 31, 12, 59, 52, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2025-01-31 08:35:55 UTC): @pritambiswal 

Cost Centers are associated with company. So, using them across companies doesn't sound right, even for Intercompany transaction.

pritambiswal (Issue Creator) on (2025-01-31 10:31:35 UTC): I agree, cost center should be validated.  if you use other objects like project or any other field as accounting dimension, it does not make sense to validate that for internal customers. May be good to have a setting at accounting dimension if it needs to be validated.

ruthra-kumar (Assginee) on (2025-01-31 11:20:00 UTC): Project also has company. The current validation enforces based on the availability of Company field in dimension doctype.


So a better approach for your case would be to create a custom doctype without any company field and use that as a dimension.

pritambiswal (Issue Creator) on (2025-01-31 12:59:52 UTC): I already explained the real business scenario where it does not make sense to have this validation for projects. I let you decide how you want to handle it. Project has lot of other features for which it does not make sense to create a custom doctype for it.

"
2820869256,issue,open,,Function to rename Project Template and also disable checkbox,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com

-->

**Is your feature request related to a problem? Please describe.**
It is hard to limit users/ employees not to select a specific project template especially if it is no longer being used.

**Describe the solution you'd like**
I hope there is a disable checkbox

",Ponyooooo,2025-01-30 13:40:01+00:00,['mihir-kandoi'],2025-01-30 17:47:03+00:00,,https://github.com/frappe/erpnext/issues/45616,"[('feature-request', None)]",[],
2820278967,issue,closed,completed,POS Invoice Direct Print,"### Information about bug

![Image](https://github.com/user-attachments/assets/57db2beb-84dc-4f90-9b1e-1c4ec88e8092)
POS Profile ""Print Receipt on Order Complete"" checked
go to ""Recent Orders"" choose ""POS Slip"" 
system go to print dialog
system should only go to print dialog after submit order
https://support.frappe.io/files/2025-01-30_12-17-56.mp4

### Module

selling

### Version

ERPNext: v15.50.0 (HEAD)

Frappe Framework: v15.54.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",thida-bcn,2025-01-30 09:10:31+00:00,['diptanilsaha'],2025-01-31 05:47:49+00:00,2025-01-31 05:47:49+00:00,https://github.com/frappe/erpnext/issues/45611,"[('bug', None)]",[],
2819063124,issue,open,reopened,"""write off amount"" is not working for Sales Invoice and POS Invoice","### Information about bug

Currently the ""write off amount"" field is not working for doctype Sales Invoice and POS Invoice.

Origem of this bug was made on https://github.com/frappe/erpnext/pull/30395

Because this PR impact on POS Sales where **change amount** and **write off** amount need work together.


How we expect this to work:

**Example 1:**
I create a POS Invoice with Grand Total: $195,00, customer need to pay me $195.
Customer Pay me with CASH, $200.
Automatically the change amount will be: $5,00

IF the customer SAY, KEEP the change, this amount will stay on my cashier, so i will set ZERO to change, and the write off will be setted as $-5,00.

If that was the only sale of the day, at the end of the day I would have R$200 in my cash register.

**Example 2:** Writeoff amount and Change amount on the same POS Invoice

I create a POS Invoice with Grand Total: $194,99, customer need to pay me $194,99.
Customer Pay me with CASH, $200.
Automatically the change amount will be: $5,01

IF with dont have $0,01 to give the change, we just give to customer $ 5,00, so juste set $5,00 on change amount and the write off amount will be setted as $ -0,01


So for these cases we have the ""write off"" field that will move an expense type account in accounting.


Currently it is not possible to apply ""Write off amount"" and ""Change amount"" at the same time, and this is BROKE for Sales Invoice with is_pos checked, or POS Invoice...

I want to know where ERPNext is going, because this change doesn't make sense, waiting for more people to comment here..




We have two PR oppend to try to change back this funcionality
https://github.com/frappe/erpnext/pull/40417
https://github.com/frappe/erpnext/pull/43303


### Module

accounts

### Version

frappe v15.x.x-develop
erpnext v15.x.x-develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",HarryPaulo,2025-01-29 19:23:12+00:00,['diptanilsaha'],2025-02-06 06:01:07+00:00,,https://github.com/frappe/erpnext/issues/45607,"[('bug', None)]","[{'comment_id': 2622661067, 'issue_id': 2819063124, 'author': 'HarryPaulo', 'body': '""Write off"" thinking of another application such as Payment Entry:\n\n**Example1:**\n\nIf the customer pays more, the accounting movement would be a negative expense.\nExample, using a payment Entry:\nhttps://github.com/user-attachments/assets/556da951-2133-419b-b4fc-9b6d2c2e04b0\n\n**Example 2**\nIf the customer pays less, the accounting movement would be a POSITIVE expense.\nExample, using a payment Entry:\nhttps://github.com/user-attachments/assets/7a2b3dd6-ad6a-421a-b2f5-150a1a1cf189\n\nIn the Profit and Loss Statement report, we want to see a sum of all movements on ""Write off"" expense account.\n\n\nfor POS Sales Every sales we receive the received amount equals or more the invoice grand total, so we follow the **Example1**', 'created_at': datetime.datetime(2025, 1, 29, 19, 33, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623981084, 'issue_id': 2819063124, 'author': 'nabinhait', 'body': ""@HarryPaulo Sorry, we did not communicate clearly before closing your pull requests. We are working on the entire POS payment workflow considering all the use cases, there were some other issues as well along with your intended changes. That's why we thought to give it a thought thoroughly and send a single pull request.\nOn the refactoring, we will cover both the above-mentioned use cases and take inputs from your proposed PRs. We will send the final pull request within a week or so. Thanks for your contributions."", 'created_at': datetime.datetime(2025, 1, 30, 9, 38, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632888867, 'issue_id': 2819063124, 'author': 'diptanilsaha', 'body': '@HarryPaulo Currently, I am working on this feature and I am thinking of restricting this feature only to cash mode of payment. I would appreciate your feedback.', 'created_at': datetime.datetime(2025, 2, 4, 5, 5, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637614722, 'issue_id': 2819063124, 'author': 'HarryPaulo', 'body': '@diptanilsaha \n\nSo, I believe the ""write off"" on other forms of payment should be managed as discounts.\n\nWhen you sell something with a broken value of $9.9, for example, by card, you receive the exact amount...\n\nThere may be cases where there are two forms of payment in the same sale, Sales Amount: $149.90:\n- Cash: $50\n- Credit Card: $100\n\nIf the cashier receives the $100 first on card and then sees that he should give the change, in this case it will probably be possible to apply the ""write off amount""\n\n\nHowever, I don\'t know if it should be restricted to just cash, as it is a feature that can work without restrictions on the payment method.', 'created_at': datetime.datetime(2025, 2, 5, 17, 46, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2638914150, 'issue_id': 2819063124, 'author': 'diptanilsaha', 'body': 'I don\'t see the point in adding a ""write-off"" when a payment method other than cash is selected but I completely agree with you on having ""write-off"" while choosing multiple modes of payment and ""Cash"" mode is one of them.\n\nThank you for your feedback.', 'created_at': datetime.datetime(2025, 2, 6, 6, 1, 6, tzinfo=datetime.timezone.utc)}]","HarryPaulo (Issue Creator) on (2025-01-29 19:33:25 UTC): ""Write off"" thinking of another application such as Payment Entry:

**Example1:**

If the customer pays more, the accounting movement would be a negative expense.
Example, using a payment Entry:
https://github.com/user-attachments/assets/556da951-2133-419b-b4fc-9b6d2c2e04b0

**Example 2**
If the customer pays less, the accounting movement would be a POSITIVE expense.
Example, using a payment Entry:
https://github.com/user-attachments/assets/7a2b3dd6-ad6a-421a-b2f5-150a1a1cf189

In the Profit and Loss Statement report, we want to see a sum of all movements on ""Write off"" expense account.


for POS Sales Every sales we receive the received amount equals or more the invoice grand total, so we follow the **Example1**

nabinhait on (2025-01-30 09:38:38 UTC): @HarryPaulo Sorry, we did not communicate clearly before closing your pull requests. We are working on the entire POS payment workflow considering all the use cases, there were some other issues as well along with your intended changes. That's why we thought to give it a thought thoroughly and send a single pull request.
On the refactoring, we will cover both the above-mentioned use cases and take inputs from your proposed PRs. We will send the final pull request within a week or so. Thanks for your contributions.

diptanilsaha (Assginee) on (2025-02-04 05:05:54 UTC): @HarryPaulo Currently, I am working on this feature and I am thinking of restricting this feature only to cash mode of payment. I would appreciate your feedback.

HarryPaulo (Issue Creator) on (2025-02-05 17:46:48 UTC): @diptanilsaha 

So, I believe the ""write off"" on other forms of payment should be managed as discounts.

When you sell something with a broken value of $9.9, for example, by card, you receive the exact amount...

There may be cases where there are two forms of payment in the same sale, Sales Amount: $149.90:
- Cash: $50
- Credit Card: $100

If the cashier receives the $100 first on card and then sees that he should give the change, in this case it will probably be possible to apply the ""write off amount""


However, I don't know if it should be restricted to just cash, as it is a feature that can work without restrictions on the payment method.

diptanilsaha (Assginee) on (2025-02-06 06:01:06 UTC): I don't see the point in adding a ""write-off"" when a payment method other than cash is selected but I completely agree with you on having ""write-off"" while choosing multiple modes of payment and ""Cash"" mode is one of them.

Thank you for your feedback.

"
2818785119,issue,open,,CSS Assets Not Loading - 404 Errors in Production (Frappe/ERPNext Docker),"### Information about bug

I am experiencing issues with CSS assets not loading correctly in a Frappe/ERPNext production setup using Docker. Some assets are missing (404 errors), and the UI is broken.
The issue persists even after clearing cache, rebuilding assets, and verifying volumes.
Was working fine until now. Not sure how it started cropping up.

![Image](https://github.com/user-attachments/assets/4f35c1c4-b70e-4013-8e3c-ef75a26aaa26)

![Image](https://github.com/user-attachments/assets/1c62f42c-8b0b-4c7b-aa33-8f42d72365dd)

### Module

other

### Version

Frappe Version- 15.53.0
ERPNext Version- 15.50.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell

```",vaibhavsolanke12,2025-01-29 17:10:48+00:00,[],2025-02-05 08:21:51+00:00,,https://github.com/frappe/erpnext/issues/45605,"[('bug', None)]","[{'comment_id': 2623612801, 'issue_id': 2818785119, 'author': 'Abdeali099', 'body': 'Hello,\n\nCheck this out:\n\n1. https://discuss.frappe.io/t/files-from-assets-directory-not-loading-in-production-mode/3547/7\n2. https://discuss.frappe.io/t/css-and-assests-not-loading-properly/104502/11', 'created_at': datetime.datetime(2025, 1, 30, 6, 20, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636043319, 'issue_id': 2818785119, 'author': 'siyad-tridz', 'body': 'Try this build command on Bench. It worked for me\n\nbench build --app frappe --hard-link --production\nbench build --app erpnext --hard-link --production', 'created_at': datetime.datetime(2025, 2, 5, 8, 21, 50, tzinfo=datetime.timezone.utc)}]","Abdeali099 on (2025-01-30 06:20:06 UTC): Hello,

Check this out:

1. https://discuss.frappe.io/t/files-from-assets-directory-not-loading-in-production-mode/3547/7
2. https://discuss.frappe.io/t/css-and-assests-not-loading-properly/104502/11

siyad-tridz on (2025-02-05 08:21:50 UTC): Try this build command on Bench. It worked for me

bench build --app frappe --hard-link --production
bench build --app erpnext --hard-link --production

"
2818703988,issue,open,,Create Sales Invoice from Pick List,"### Information about bug

We are using Sales Invoice (Update Stock feature) to create a Delivery Challan cum Sales Invoice and we do not pass Delivery Notes.

But we want to use the Pick List to check the availability and Stock Reservation. But in the current system we can not create Sales invoice Directly from the Pick List.

So we need additional option in the Pick List to create Sales invoice. So that it will directly create Sales Invoice with Update Stock option selected.

### Module

selling

### Version

ERPNext: v15.47.4 (HEAD)

Frappe Framework: v15.51.1 (HEAD)

Frappe HR: v15.37.1 (HEAD)

India Compliance: v15.14.6 (HEAD)

Raven: v2.0.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",nitin-anantpranali,2025-01-29 16:34:46+00:00,['mihir-kandoi'],2025-01-30 17:44:42+00:00,,https://github.com/frappe/erpnext/issues/45603,"[('bug', None)]",[],
2818193479,issue,open,,Audience error when logging in with Office 365,"### Information about bug

The default Oauth implementation doesn't let the user login when using the social provider button, needing to send an email login link. It needs a change to the ```apps/frappe/frappe/utils/oauth.py``` file in ```get_info_via_oauth()```:

```info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False})```

changed to:

```info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False, “verify_aud”: False})```

### Module

integrations

### Version

Issue has existed for a long time, still present in:

Frappe version - 15.53.0
ERPNext version - 15.49.3

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
File “apps/frappe/frappe/app.py”, line 110, in application
response = frappe.api.handle(request)
File “apps/frappe/frappe/api/init.py”, line 49, in handle
data = endpoint(**arguments)
File “apps/frappe/frappe/api/v1.py”, line 36, in handle_rpc_call
return frappe.handler.handle()
File “apps/frappe/frappe/handler.py”, line 49, in handle
data = execute_cmd(cmd)
File “apps/frappe/frappe/handler.py”, line 85, in execute_cmd
return frappe.call(method, **frappe.form_dict)
File “apps/frappe/frappe/init.py”, line 1716, in call
return fn(*args, **newargs)
File “apps/frappe/frappe/utils/typing_validations.py”, line 31, in wrapper
return func(*args, **kwargs)
File “apps/frappe/frappe/integrations/oauth2_logins.py”, line 33, in login_via_office365
login_via_oauth2_id_token(“office_365”, code, state, decoder=decoder_compat)
File “apps/frappe/frappe/utils/oauth.py”, line 119, in login_via_oauth2_id_token
info = get_info_via_oauth(provider, code, decoder, id_token=True)
File “apps/frappe/frappe/utils/oauth.py”, line 145, in get_info_via_oauth
info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False})
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 104, in decode
self._validate_claims(payload, merged_options, **kwargs)
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 140, in _validate_claims
self._validate_aud(payload, audience)
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 189, in _validate_aud
raise InvalidAudienceError(‘Invalid audience’)
jwt.exceptions.InvalidAudienceError: Invalid audience
```",redolencetech,2025-01-29 13:15:43+00:00,[],2025-01-29 13:15:43+00:00,,https://github.com/frappe/erpnext/issues/45599,"[('bug', None)]",[],
2818193479,issue,open,,Audience error when logging in with Office 365,"### Information about bug

The default Oauth implementation doesn't let the user login when using the social provider button, needing to send an email login link. It needs a change to the ```apps/frappe/frappe/utils/oauth.py``` file in ```get_info_via_oauth()```:

```info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False})```

changed to:

```info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False, “verify_aud”: False})```

### Module

integrations

### Version

Issue has existed for a long time, still present in:

Frappe version - 15.53.0
ERPNext version - 15.49.3

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
File “apps/frappe/frappe/app.py”, line 110, in application
response = frappe.api.handle(request)
File “apps/frappe/frappe/api/init.py”, line 49, in handle
data = endpoint(**arguments)
File “apps/frappe/frappe/api/v1.py”, line 36, in handle_rpc_call
return frappe.handler.handle()
File “apps/frappe/frappe/handler.py”, line 49, in handle
data = execute_cmd(cmd)
File “apps/frappe/frappe/handler.py”, line 85, in execute_cmd
return frappe.call(method, **frappe.form_dict)
File “apps/frappe/frappe/init.py”, line 1716, in call
return fn(*args, **newargs)
File “apps/frappe/frappe/utils/typing_validations.py”, line 31, in wrapper
return func(*args, **kwargs)
File “apps/frappe/frappe/integrations/oauth2_logins.py”, line 33, in login_via_office365
login_via_oauth2_id_token(“office_365”, code, state, decoder=decoder_compat)
File “apps/frappe/frappe/utils/oauth.py”, line 119, in login_via_oauth2_id_token
info = get_info_via_oauth(provider, code, decoder, id_token=True)
File “apps/frappe/frappe/utils/oauth.py”, line 145, in get_info_via_oauth
info = jwt.decode(token, flow.client_secret, options={“verify_signature”: False})
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 104, in decode
self._validate_claims(payload, merged_options, **kwargs)
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 140, in _validate_claims
self._validate_aud(payload, audience)
File “env/lib/python3.10/site-packages/jwt/api_jwt.py”, line 189, in _validate_aud
raise InvalidAudienceError(‘Invalid audience’)
jwt.exceptions.InvalidAudienceError: Invalid audience
```",redolencetech,2025-01-29 13:15:43+00:00,[],2025-01-29 13:15:43+00:00,,https://github.com/frappe/erpnext/issues/45599,"[('bug', None)]",[],
2817727427,issue,open,,Issues with role permission manager for item,"### Information about bug

<!--
Welcome to the Frappe Framework issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to Frappe
    - For questions and general support, use https://stackoverflow.com/questions/tagged/frappe
    - For documentation issues, refer to https://frappeframework.com/docs/user/en or the developer cheetsheet https://github.com/frappe/frappe/wiki/Developer-Cheatsheet
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a bug report, make sure you provide all required information. The easier it is for
   maintainers to reproduce, the faster it'll be fixed.
4. If you think you know what the reason for the bug is, share it with us. Maybe put in a PR 😉
-->

## Description of the issue
By default item doctype is set to be read, its permission showing select, print, email, report, export and share for desk view.

<img width=""1640"" alt=""Image"" src=""https://github.com/user-attachments/assets/c447ef40-c663-4495-a490-11fbb6a8a9b9"" />

<img width=""1402"" alt=""Image"" src=""https://github.com/user-attachments/assets/39e9d9cb-b184-4a5e-80b5-d8774d84f1bc"" />

<img width=""1649"" alt=""Image"" src=""https://github.com/user-attachments/assets/b2f834a3-2494-4f23-ae3b-bb49c14f689e"" />

## Context information (for bug reports)

**Output of `bench version`**
```
doppio 0.0.1
erpnext 15.48.3
frappe 15.51.2
hrms 16.0.0-dev
```

## Steps to reproduce the issue

1.Install frappe + erpnext via docker.
Select read only role in role permission manager for a specific role.
2. Create a new role (test in this case)
3. Select read only role in role permission manager for a specific role.
4. Assign that role to a user
5. Go to specific item via logging in assigned user 

### Observed result
After logging in via test user (assigned role of read item) I observed I was able to select and export item  even though I have not assigned the role permissions.



### Expected result
Desk User should not possibly have able to export these documents.


### Stacktrace / full error message

```

```

## Additional information

Installation via frappe dev docker and same can be replicated in production (docker) environments as well.


### Module

Stock

### Version

```
doppio 0.0.1
erpnext 15.48.3
frappe 15.51.2
hrms 16.0.0-dev
```


### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
NA
```

### Possible work around
https://github.com/frappe/erpnext/blob/968e235a3fb18fa60b9d940a693b5cb90e8a3b43/erpnext/stock/doctype/item/item.json#L950
should be changed to
```shell
""export"":0
```",agrawalshubham01,2025-01-29 09:56:14+00:00,[],2025-01-29 16:34:17+00:00,,https://github.com/frappe/erpnext/issues/45587,"[('bug', None)]",[],
2817175720,issue,open,,Opportunity Summary by Sales Stage Report Error,"### Information about bug

![Image](https://github.com/user-attachments/assets/887f694d-58f2-4378-b0e9-f0cbd77f137c)

### Module

CRM

### Version

version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",Paulsudhan-craft,2025-01-29 03:48:04+00:00,[],2025-01-30 06:04:27+00:00,,https://github.com/frappe/erpnext/issues/45576,"[('bug', None)]","[{'comment_id': 2620727223, 'issue_id': 2817175720, 'author': 'Paulsudhan-craft', 'body': 'remainder', 'created_at': datetime.datetime(2025, 1, 29, 5, 2, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620814423, 'issue_id': 2817175720, 'author': 'ljain112', 'body': 'Can you share the full traceback ?\nUse Copy error to clipboard.', 'created_at': datetime.datetime(2025, 1, 29, 6, 25, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623587143, 'issue_id': 2817175720, 'author': 'Paulsudhan-craft', 'body': '### App Versions\n```\n{\n\t""ain_alshams"": ""0.0.1"",\n\t""erpnext"": ""15.47.1"",\n\t""frappe"": ""15.51.0"",\n\t""hrms"": ""15.36.1"",\n\t""sc_project"": ""0.0.1"",\n\t""xitefitness"": ""0.0.1""\n}\n```\n### Route\n```\nquery-report/Opportunity Summary by Sales Stage\n```\n### Traceback\n```\nTraceback (most recent call last):\n  File ""apps/frappe/frappe/app.py"", line 114, in application\n    response = frappe.api.handle(request)\n  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle\n    data = endpoint(**arguments)\n  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call\n    return frappe.handler.handle()\n  File ""apps/frappe/frappe/handler.py"", line 50, in handle\n    data = execute_cmd(cmd)\n  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd\n    return frappe.call(method, **frappe.form_dict)\n  File ""apps/frappe/frappe/__init__.py"", line 1726, in call\n    return fn(*args, **newargs)\n  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper\n    return func(*args, **kwargs)\n  File ""apps/frappe/frappe/__init__.py"", line 879, in wrapper_fn\n    retval = fn(*args, **get_newargs(fn, kwargs))\n  File ""apps/frappe/frappe/desk/query_report.py"", line 224, in run\n    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)\n  File ""apps/frappe/frappe/__init__.py"", line 879, in wrapper_fn\n    retval = fn(*args, **get_newargs(fn, kwargs))\n  File ""apps/frappe/frappe/desk/query_report.py"", line 84, in generate_report_result\n    res = get_report_result(report, filters) or []\n  File ""apps/frappe/frappe/desk/query_report.py"", line 65, in get_report_result\n    res = report.execute_script_report(filters)\n  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 163, in execute_script_report\n    res = self.execute_module(filters)\n  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 180, in execute_module\n    return frappe.get_attr(method_name)(frappe._dict(filters))\n  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 14, in execute\n    return OpportunitySummaryBySalesStage(filters).run()\n  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 23, in run\n    self.get_data()\n  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 83, in get_data\n    self.get_rows()\n  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 126, in get_rows\n    self.get_formatted_data()\n  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 159, in get_formatted_data\n    assignments = json.loads(d.get(based_on))\n  File ""/usr/lib/python3.10/json/__init__.py"", line 346, in loads\n    return _default_decoder.decode(s)\n  File ""/usr/lib/python3.10/json/decoder.py"", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File ""/usr/lib/python3.10/json/decoder.py"", line 355, in raw_decode\n    raise JSONDecodeError(""Expecting value"", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n\n```\n### Request Data\n```\n{\n\t""type"": ""GET"",\n\t""args"": {\n\t\t""report_name"": ""Opportunity Summary by Sales Stage"",\n\t\t""filters"": ""{\\""based_on\\"":\\""Opportunity Owner\\"",\\""data_based_on\\"":\\""Number\\"",\\""status\\"":[],\\""company\\"":\\""XITE FITNESS TRADING LLC\\""}"",\n\t\t""ignore_prepared_report"": false,\n\t\t""are_default_filters"": true\n\t},\n\t""headers"": {},\n\t""error_handlers"": {},\n\t""url"": ""/api/method/frappe.desk.query_report.run"",\n\t""request_id"": null\n}\n```\n### Response Data\n```\n{\n\t""exception"": ""json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"",\n\t""exc_type"": ""JSONDecodeError"",\n\t""_exc_source"": ""erpnext (app)""\n}\n```', 'created_at': datetime.datetime(2025, 1, 30, 6, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623591628, 'issue_id': 2817175720, 'author': 'Paulsudhan-craft', 'body': 'def get_formatted_data(self):\n\t\tself.formatted_data = frappe._dict()\n\n\t\tfor d in self.query_result:\n\t\t\tdata_based_on = {""Number"": ""count"", ""Amount"": ""amount""}[self.filters.get(""data_based_on"")]\n\n\t\t\tbased_on = {\n\t\t\t\t""Opportunity Owner"": ""_assign"",\n\t\t\t\t""Source"": ""source"",\n\t\t\t\t""Opportunity Type"": ""opportunity_type"",\n\t\t\t}[self.filters.get(""based_on"")]\n\n\t\t\tif self.filters.get(""based_on"") == ""Opportunity Owner"":\n\t\t\t\tvalue = d.get(based_on)\n\t\t\t\tif not value or value in [""[]"", ""null"", ""Not Assigned""]:\n\t\t\t\t\tassignments = [""Not Assigned""]\n\t\t\t\telse:\n\t\t\t\t\ttry:\n\t\t\t\t\t\tassignments = json.loads(value)\n\t\t\t\t\texcept json.JSONDecodeError:\n\t\t\t\t\t\tassignments = [""Not Assigned""]\n\n\t\t\t\tsales_stage = d.get(""sales_stage"")\n\t\t\t\tcount = d.get(data_based_on)\n\n\t\t\t\tif assignments:\n\t\t\t\t\tfor assigned_to in assignments:\n\t\t\t\t\t\tself.set_formatted_data_based_on_sales_stage(assigned_to, sales_stage, count)\n\t\t\telse:\n\t\t\t\tvalue = d.get(based_on)\n\t\t\t\tsales_stage = d.get(""sales_stage"")\n\t\t\t\tcount = d.get(data_based_on)\n\t\t\t\tself.set_formatted_data_based_on_sales_stage(value, sales_stage, count)\n\nmy updated function solved the issue', 'created_at': datetime.datetime(2025, 1, 30, 6, 4, 27, tzinfo=datetime.timezone.utc)}]","Paulsudhan-craft (Issue Creator) on (2025-01-29 05:02:34 UTC): remainder

ljain112 on (2025-01-29 06:25:44 UTC): Can you share the full traceback ?
Use Copy error to clipboard.

Paulsudhan-craft (Issue Creator) on (2025-01-30 06:01:11 UTC): ### App Versions
```
{
	""ain_alshams"": ""0.0.1"",
	""erpnext"": ""15.47.1"",
	""frappe"": ""15.51.0"",
	""hrms"": ""15.36.1"",
	""sc_project"": ""0.0.1"",
	""xitefitness"": ""0.0.1""
}
```
### Route
```
query-report/Opportunity Summary by Sales Stage
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/__init__.py"", line 879, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
  File ""apps/frappe/frappe/desk/query_report.py"", line 224, in run
    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)
  File ""apps/frappe/frappe/__init__.py"", line 879, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
  File ""apps/frappe/frappe/desk/query_report.py"", line 84, in generate_report_result
    res = get_report_result(report, filters) or []
  File ""apps/frappe/frappe/desk/query_report.py"", line 65, in get_report_result
    res = report.execute_script_report(filters)
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 163, in execute_script_report
    res = self.execute_module(filters)
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 180, in execute_module
    return frappe.get_attr(method_name)(frappe._dict(filters))
  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 14, in execute
    return OpportunitySummaryBySalesStage(filters).run()
  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 23, in run
    self.get_data()
  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 83, in get_data
    self.get_rows()
  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 126, in get_rows
    self.get_formatted_data()
  File ""apps/erpnext/erpnext/crm/report/opportunity_summary_by_sales_stage/opportunity_summary_by_sales_stage.py"", line 159, in get_formatted_data
    assignments = json.loads(d.get(based_on))
  File ""/usr/lib/python3.10/json/__init__.py"", line 346, in loads
    return _default_decoder.decode(s)
  File ""/usr/lib/python3.10/json/decoder.py"", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File ""/usr/lib/python3.10/json/decoder.py"", line 355, in raw_decode
    raise JSONDecodeError(""Expecting value"", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

```
### Request Data
```
{
	""type"": ""GET"",
	""args"": {
		""report_name"": ""Opportunity Summary by Sales Stage"",
		""filters"": ""{\""based_on\"":\""Opportunity Owner\"",\""data_based_on\"":\""Number\"",\""status\"":[],\""company\"":\""XITE FITNESS TRADING LLC\""}"",
		""ignore_prepared_report"": false,
		""are_default_filters"": true
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.query_report.run"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"",
	""exc_type"": ""JSONDecodeError"",
	""_exc_source"": ""erpnext (app)""
}
```

Paulsudhan-craft (Issue Creator) on (2025-01-30 06:04:27 UTC): def get_formatted_data(self):
		self.formatted_data = frappe._dict()

		for d in self.query_result:
			data_based_on = {""Number"": ""count"", ""Amount"": ""amount""}[self.filters.get(""data_based_on"")]

			based_on = {
				""Opportunity Owner"": ""_assign"",
				""Source"": ""source"",
				""Opportunity Type"": ""opportunity_type"",
			}[self.filters.get(""based_on"")]

			if self.filters.get(""based_on"") == ""Opportunity Owner"":
				value = d.get(based_on)
				if not value or value in [""[]"", ""null"", ""Not Assigned""]:
					assignments = [""Not Assigned""]
				else:
					try:
						assignments = json.loads(value)
					except json.JSONDecodeError:
						assignments = [""Not Assigned""]

				sales_stage = d.get(""sales_stage"")
				count = d.get(data_based_on)

				if assignments:
					for assigned_to in assignments:
						self.set_formatted_data_based_on_sales_stage(assigned_to, sales_stage, count)
			else:
				value = d.get(based_on)
				sales_stage = d.get(""sales_stage"")
				count = d.get(data_based_on)
				self.set_formatted_data_based_on_sales_stage(value, sales_stage, count)

my updated function solved the issue

"
2816653021,issue,open,,Add Chart of account from Peru (chart_of_account.json attached),"
please add Peru chart_of_accounts on setup_wizard

I attach the json of the chart_account, also please if you could change the VAT of Peru to IGV = 18% since it is the correct way it would help a lot with the regionalization app that I am making for Peru

[pe_standard_complete_fixed.json](https://github.com/user-attachments/files/18580571/pe_standard_complete_fixed.json)
",aaguirrek,2025-01-28 20:28:03+00:00,[],2025-01-28 23:41:55+00:00,,https://github.com/frappe/erpnext/issues/45574,"[('feature-request', None)]",[],
2816380557,issue,open,,Packing Slip from Delivery Note creates with wrong UOM,"### Information about bug

**Issue:**
When the delivery note is created with a different uom for an item, the packing slip is always made with the stock uom. So there is a difference in qty

**Item:**
![Image](https://github.com/user-attachments/assets/b94ea292-f1aa-415d-8657-dfdb033b96f5)

![Image](https://github.com/user-attachments/assets/8ecbe572-c804-42ce-8936-a12fcd022754)

**Delivery Note:**
![Image](https://github.com/user-attachments/assets/e8899c6d-12d9-4116-90e5-2ec96f615190)

**Packing Slip:**
![Image](https://github.com/user-attachments/assets/7e2f0fe1-5ab0-4ad2-bf70-814dee2079d3)

### Module

stock

### Version

Frappe: Version-15
Erpnext: Version-15
",venkat102,2025-01-28 17:58:14+00:00,['mihir-kandoi'],2025-01-30 11:57:12+00:00,,https://github.com/frappe/erpnext/issues/45572,"[('bug', None)]",[],
2815937391,issue,closed,completed,"Employee doctype should have ""track changes""",,ankush,2025-01-28 14:59:51+00:00,[],2025-02-05 11:46:23+00:00,2025-02-03 08:51:52+00:00,https://github.com/frappe/erpnext/issues/45571,"[('bug', None), ('released', None)]","[{'comment_id': 2636505929, 'issue_id': 2815937391, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 22, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-02-05 11:46:22 UTC): :tada: This issue has been resolved in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2815396077,issue,open,,Discount Price changes after altering quantities,"**Is your feature request related to a problem? Please describe**
We are having a challenge with discount price changing after altering quantities in transaction. Assume you create a sales invoice ,enter quantity as 1 piece, let the default retail price load. Change the price to a lower price (assuming you gave a discount), save the document as draft.
 If you load the draft document, change the quantity to  say 3,the discounted price should remain in place, but  it changes back to default retail price.
**Describe the solution you'd  like**
We would like that once you edit the price of an item  and save it in draft, if you alter the quantity , the discounted price should remain instead of changing back to the default retail price.
**Describe alternatives you've considered**
 By enabling ignoring pricing rule by default helps with the issue.



<img width=""881"" alt=""Image"" src=""https://github.com/user-attachments/assets/f2a02ff7-5512-4ce5-9c12-c937513292d2"" />
<img width=""775"" alt=""Image"" src=""https://github.com/user-attachments/assets/e305c40d-edef-4fd2-9c1e-ef8060799200"" />
<img width=""860"" alt=""Image"" src=""https://github.com/user-attachments/assets/57fda653-fa9a-4572-853e-2639130bc95b"" />",AnnNjenga1,2025-01-28 11:41:43+00:00,[],2025-01-30 12:18:55+00:00,,https://github.com/frappe/erpnext/issues/45568,"[('feature-request', None)]","[{'comment_id': 2624262056, 'issue_id': 2815396077, 'author': 'RAhmed-Dev', 'body': ""- It seems you have pricing rule applied. Try this with Pricing Rule Disabled. \n- If you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this."", 'created_at': datetime.datetime(2025, 1, 30, 11, 42, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624331533, 'issue_id': 2815396077, 'author': 'AnnNjenga1', 'body': ""Hello,\r\nThank you for the response.\r\nThere was no pricing rule in place, because it happens in various sites. Disabling pricing rule was a work around we tried and it worked .However we were looking for a solution across  the board.\r\n\r\nKind regards\r\nAnn Njenga\r\n\r\n\r\n________________________________\r\nFrom: Rizwan Ahmed ***@***.***>\r\nSent: Thursday, January 30, 2025 2:43 PM\r\nTo: frappe/erpnext ***@***.***>\r\nCc: AnnNjenga1 ***@***.***>; Author ***@***.***>\r\nSubject: Re: [frappe/erpnext] Discount Price changes after altering quantities (Issue #45568)\r\n\r\n\r\n  *   It seems you have pricing rule applied. Try this with Pricing Rule Disabled.\r\n  *   If you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this.\r\n\r\n—\r\nReply to this email directly, view it on GitHub<https://github.com/frappe/erpnext/issues/45568#issuecomment-2624262056>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/BO5KOGBB467DSSQXP74MHKD2NIF4LAVCNFSM6AAAAABWAIG2FGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDMMRUGI3DEMBVGY>.\r\nYou are receiving this because you authored the thread.Message ID: ***@***.***>"", 'created_at': datetime.datetime(2025, 1, 30, 12, 8, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624354694, 'issue_id': 2815396077, 'author': 'AnnNjenga1', 'body': ""Hello\xa0I hope you are well.Pricing we do not have pricing rule in place.This was a work around that we attempted and it worked.This the change in discount price happens in various sites.Regards,Ann Njenga\xa0From: Rizwan Ahmed ***@***.***>Sent: Thursday, January 30, 2025 2:43:48 pmTo: frappe/erpnext ***@***.***>Cc: AnnNjenga1 ***@***.***>; Author ***@***.***>Subject: Re: [frappe/erpnext] Discount Price changes after altering quantities (Issue #45568)\n\nIt seems you have pricing rule applied. Try this with Pricing Rule Disabled.\nIf you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this.\n\n\n—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>"", 'created_at': datetime.datetime(2025, 1, 30, 12, 18, 54, tzinfo=datetime.timezone.utc)}]","RAhmed-Dev on (2025-01-30 11:42:38 UTC): - It seems you have pricing rule applied. Try this with Pricing Rule Disabled. 
- If you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this.

AnnNjenga1 (Issue Creator) on (2025-01-30 12:08:42 UTC): Hello,
Thank you for the response.
There was no pricing rule in place, because it happens in various sites. Disabling pricing rule was a work around we tried and it worked .However we were looking for a solution across  the board.

Kind regards
Ann Njenga


________________________________
From: Rizwan Ahmed ***@***.***>
Sent: Thursday, January 30, 2025 2:43 PM
To: frappe/erpnext ***@***.***>
Cc: AnnNjenga1 ***@***.***>; Author ***@***.***>
Subject: Re: [frappe/erpnext] Discount Price changes after altering quantities (Issue #45568)


  *   It seems you have pricing rule applied. Try this with Pricing Rule Disabled.
  *   If you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this.

—
Reply to this email directly, view it on GitHub<https://github.com/frappe/erpnext/issues/45568#issuecomment-2624262056>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/BO5KOGBB467DSSQXP74MHKD2NIF4LAVCNFSM6AAAAABWAIG2FGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDMMRUGI3DEMBVGY>.
You are receiving this because you authored the thread.Message ID: ***@***.***>

AnnNjenga1 (Issue Creator) on (2025-01-30 12:18:54 UTC): Hello I hope you are well.Pricing we do not have pricing rule in place.This was a work around that we attempted and it worked.This the change in discount price happens in various sites.Regards,Ann Njenga From: Rizwan Ahmed ***@***.***>Sent: Thursday, January 30, 2025 2:43:48 pmTo: frappe/erpnext ***@***.***>Cc: AnnNjenga1 ***@***.***>; Author ***@***.***>Subject: Re: [frappe/erpnext] Discount Price changes after altering quantities (Issue #45568)

It seems you have pricing rule applied. Try this with Pricing Rule Disabled.
If you don't know how to configure pricing rule contact your Frappe Support Partner for further Details on this.


—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>

"
2815079600,issue,open,,Bug in Item Variant Settings Child Table,"### Information about bug



In the Item Variant Settings, there is an option to add fields from the Item DocType (""Select Field"") to copy values to variants upon saving, based on the provided configuration. However, there are two issues with the functionality:

 

- Selected options remain available in the dropdown until the settings are saved.
![Image](https://github.com/user-attachments/assets/33c89bdc-9fb9-40d3-a053-918971559536)


- Deleted Rows Not Updating Dropdown Options:
When rows are deleted from the ""Copy Fields to Variant"" child table, the corresponding field names do not reappear in the dropdown options for selection unless page is refreshed or saved.
![Image](https://github.com/user-attachments/assets/96f6dde3-ba6a-4cbf-a046-4e521304cf3b)


- Dropdown Options Become Blank After Configuration Change:
If the configuration of the child table is modified, the dropdown options for selecting fields become blank.

![Image](https://github.com/user-attachments/assets/fbf16da7-ea93-4170-a559-62fa59a66cb3)





### Module

stock

### Version

Frappe Version- V15
ERPNext version- V15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",Akshaths12,2025-01-28 09:27:35+00:00,[],2025-01-28 09:27:35+00:00,,https://github.com/frappe/erpnext/issues/45565,"[('bug', None)]",[],
2814820670,issue,open,,Update Delivered Qty in SO for Dropship Items,"### Information about bug

`def update_delivery_status(self):
		""""""Update delivery status from Purchase Order for drop shipping""""""
		tot_qty, delivered_qty = 0.0, 0.0

		for item in self.items:
			if item.delivered_by_supplier:
				item_delivered_qty = frappe.db.sql(
					""""""select sum(qty)
					from `tabPurchase Order Item` poi, `tabPurchase Order` po
					where poi.sales_order_item = %s
						and poi.item_code = %s
						and poi.parent = po.name
						and po.docstatus = 1
						and po.status = 'Delivered'"""""",
					(item.name, item.item_code),
				)

				item_delivered_qty = item_delivered_qty[0][0] if item_delivered_qty else 0
				item.db_set(""delivered_qty"", flt(item_delivered_qty), update_modified=False)

			delivered_qty += min(item.delivered_qty, item.qty)
			tot_qty += item.qty

		if tot_qty != 0:
			self.db_set(""per_delivered"", flt(delivered_qty / tot_qty) * 100, update_modified=False)
`

apps/erpnext/erpnext/selling/doctype/sales_order/sales_order.py

When a Drop Ship Purchase Order is marked as Delivered from Status Button, It sets the delivered qty in the linked Sales Order Item to the sum of qty field. So even in case of Partial Receipts from supplier, The delivered qty in Drop Ship Sales Order Item is set to full qty in the Purchase Order. 
Purchase Order Item has a field called 'received_qty' that gets updated based on Purchase Invoice(Update Stock Flag) / Purchase Receipt against that Purchase Order. On Marking the status of PO as delivered, the code should set delivered_qty as SUM(received_qty) instead of SUM (qty) in the code above.

### Module

selling

### Version

Frappe Version - 15.52.0
ERPNext Version - 15.48.4

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",dhawal-mahajan,2025-01-28 07:17:41+00:00,['mihir-kandoi'],2025-01-31 19:34:55+00:00,,https://github.com/frappe/erpnext/issues/45562,"[('bug', None), ('Medium Priority', '')]","[{'comment_id': 2618102984, 'issue_id': 2814820670, 'author': 'dhawal-mahajan', 'body': 'Additionally, There should be a status for Partial Delivered as this is a business scenario where Supplier short delivers a Purchase Order against a Customer Drop Ship SO. It would be great if it could update the SO Item delivered_qty every time a received_qty in Purchase Order Item is updated', 'created_at': datetime.datetime(2025, 1, 28, 7, 22, 49, tzinfo=datetime.timezone.utc)}]","dhawal-mahajan (Issue Creator) on (2025-01-28 07:22:49 UTC): Additionally, There should be a status for Partial Delivered as this is a business scenario where Supplier short delivers a Purchase Order against a Customer Drop Ship SO. It would be great if it could update the SO Item delivered_qty every time a received_qty in Purchase Order Item is updated

"
2814770541,issue,open,,Apply tax withholding (TDS) to a customer on return against the commission or brokerage,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
In India, TDS is applicable on any income by way of commission or brokerage if the total payment exceeds ₹15,000 in a financial year(Section 194H). While I make a credit note to the customer, I return the commission too and the TDS is applicable on the same.

Right now, if it is a credit note, it is considered as a purchase related voucher in the TDS/TCS applicability and the calculations are made appropriately. With this edge case, it is not working as expected.

**Describe the solution you'd like**
TDS should be applicable to a customer on a credit note whenever relevant.

**Describe alternatives you've considered**
Making a Journal Entry without apply_taxwitholding ticked.

<img width=""1303"" alt=""Image"" src=""https://github.com/user-attachments/assets/3d2bbbc8-0c9f-4d7e-9276-82d296e264cf"" />",Vigneshsekar,2025-01-28 06:42:07+00:00,[],2025-01-28 06:45:34+00:00,,https://github.com/frappe/erpnext/issues/45561,"[('feature-request', None)]",[],
2814718111,issue,open,,Serial No status change issue in Serial No List,"### Information about bug

Whenever you make mid mile transaction, and then you cancel DN then status of Serial No's is not set to active. And there is functional mistake why it creates new serial no's in mid mile, serial no's should be same, it should change only warehouse.

Steps : 
1. Create Stock Entry for any SKU with Serial and Batch Nos.

<img width=""1371"" alt=""Image"" src=""https://github.com/user-attachments/assets/354639b2-674a-40f7-ae49-ea45dbad5559"" />

<img width=""1196"" alt=""Image"" src=""https://github.com/user-attachments/assets/6dbeee79-9b1f-473c-af68-3d8848214708"" />

<img width=""1186"" alt=""Image"" src=""https://github.com/user-attachments/assets/e2d55733-4bfa-4e0a-bc39-24669751b4f6"" />

<img width=""1212"" alt=""Image"" src=""https://github.com/user-attachments/assets/36b96c84-418d-4871-8b65-eeacedf85269"" />


3. Create DN

<img width=""1184"" alt=""Image"" src=""https://github.com/user-attachments/assets/8152a287-c54d-4061-a4ab-c821ed2f676a"" />

<img width=""1162"" alt=""Image"" src=""https://github.com/user-attachments/assets/35429aac-f4c8-470e-8c49-30d3c2fcaff6"" />

5. Cancel DN

<img width=""1152"" alt=""Image"" src=""https://github.com/user-attachments/assets/d349bf07-9e5c-47b2-9986-aa960f1adb57"" />

<img width=""960"" alt=""Image"" src=""https://github.com/user-attachments/assets/fb10c6ff-e270-44bd-890b-71b06fe60b60"" />

<img width=""970"" alt=""Image"" src=""https://github.com/user-attachments/assets/f499b635-81b5-4c5b-b728-4337ecaf3f76"" />

### Module

stock

### Version

ERPNext version - 15

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell

```",krupalvora,2025-01-28 06:06:58+00:00,['mihir-kandoi'],2025-01-30 17:57:38+00:00,,https://github.com/frappe/erpnext/issues/45559,"[('bug', None)]","[{'comment_id': 2623769271, 'issue_id': 2814718111, 'author': 'mihir-kandoi', 'body': 'Have you tried to reproduce this on the develop branch?', 'created_at': datetime.datetime(2025, 1, 30, 7, 49, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624384371, 'issue_id': 2814718111, 'author': 'krupalvora', 'body': 'No, But I guess this issue was not highlighted by anyone I guess. So might not be fixed. If its fixed then can you share that commit ID', 'created_at': datetime.datetime(2025, 1, 30, 12, 32, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2625198341, 'issue_id': 2814718111, 'author': 'mihir-kandoi', 'body': 'Please try and reproduce this on the develop branch and let me know. I am unable to reproduce on develop.', 'created_at': datetime.datetime(2025, 1, 30, 17, 57, 37, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-30 07:49:12 UTC): Have you tried to reproduce this on the develop branch?

krupalvora (Issue Creator) on (2025-01-30 12:32:52 UTC): No, But I guess this issue was not highlighted by anyone I guess. So might not be fixed. If its fixed then can you share that commit ID

mihir-kandoi (Assginee) on (2025-01-30 17:57:37 UTC): Please try and reproduce this on the develop branch and let me know. I am unable to reproduce on develop.

"
2812866422,issue,open,,Bug Report: Paid Amount Not Updating Automatically in Payment Entry (Internal Transfer with Different Currencies),"### Information about bug

Steps to Reproduce:

Create a Payment Entry of type Internal Transfer, where the accounts involved use two different currencies.
Change the Received Amount.
Expected Behavior:

The Paid Amount should update automatically based on the exchange rate whenever the Received Amount is modified.
Actual Behavior:

The Paid Amount does not update automatically when the Received Amount is changed.
The Paid Amount only updates when the Target Exchange Rate is changed to a different value.
For example, if the current Target Exchange Rate is 1.05, and you delete and re-enter 1.05, nothing happens.
However, if you change the rate to another value (e.g., 1.04), the Paid Amount updates.
After this, if you revert the Target Exchange Rate back to 1.05, the Paid Amount updates again.
The exchange rate must first be changed to a different value before reverting to the original rate to trigger the recalculation.

### Module

accounts

### Version

ERPNext: v15.48.4 (version-15)
Frappe Framework: v15.52.0 (version-15)

And also in

Frappe 16

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",Awey01,2025-01-27 12:16:31+00:00,[],2025-02-05 18:56:59+00:00,,https://github.com/frappe/erpnext/issues/45543,"[('bug', None)]","[{'comment_id': 2626733054, 'issue_id': 2812866422, 'author': 'Awey01', 'body': 'Same bug with Received Amount - Received Amount does not update automatically when the Paid Amount is changed.', 'created_at': datetime.datetime(2025, 1, 31, 9, 22, 1, tzinfo=datetime.timezone.utc)}]","Awey01 (Issue Creator) on (2025-01-31 09:22:01 UTC): Same bug with Received Amount - Received Amount does not update automatically when the Paid Amount is changed.

"
2812623760,issue,closed,not_planned,Unable to create work order from sales order,"### Information about bug

When I tried to create workorder from sales order, system is showing work order created. But when I check in work order list view, it's not created. Please help

![Image](https://github.com/user-attachments/assets/7401f947-9e7b-4db4-80e0-87bd122d5d21)

### Module

manufacturing

### Version

ERPNext: v15.48.3 (HEAD)
Frappe Framework: v15.52.0 (HEAD)


### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",erpman2024,2025-01-27 10:26:05+00:00,[],2025-01-27 16:55:15+00:00,2025-01-27 16:55:14+00:00,https://github.com/frappe/erpnext/issues/45537,"[('bug', None)]","[{'comment_id': 2616359492, 'issue_id': 2812623760, 'author': 'mihir-kandoi', 'body': 'Please open a support ticket on FC for better assistance.', 'created_at': datetime.datetime(2025, 1, 27, 16, 55, 14, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-01-27 16:55:14 UTC): Please open a support ticket on FC for better assistance.

"
2812541592,issue,open,,"Child Table shows hidden and read-only fields in list view. But if you click on them to edit, lets say row 1, then it hides them but in the table form it shows all fields with a value.","### Information about bug

Each field in child table (lets say items) if it has a value it will be shown on the child table list view (despite these fields being hidden by eval condition of ""depends_on"" or read_only_depends_on). However, if you click on any row to edit it, then it doesnt show those fields which is correct. But on the outside (list view of the child table) it shows all integer, float or any numeric field-type with a default value set. Since it automatically takes 0 as default, we cant hide these fields. I tried overriding the ""erpnext/templates/form_grid/includes/visible_cols.html"" file by creating a custom app and having the same structure but to no avail. It wont allow me to override html file, i think. If you know how to, kindly let me know. 

Thank you.

https://github.com/user-attachments/assets/58552878-26d0-4529-8a65-b94368c42a72

### Module

buying, selling

### Version

ERPNext: v15.30.0 (version-15)
Frappe Framework: v15.36.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",chavan0,2025-01-27 09:50:17+00:00,[],2025-01-27 09:53:25+00:00,,https://github.com/frappe/erpnext/issues/45535,"[('bug', None)]",[],
2812319593,issue,open,,Allow rename is disabled in timesheet doctype,"### Information about bug

Allow rename is disabled in timesheet doctype as a result, its blocking rename of timesheets. 

<img width=""1310"" alt=""Image"" src=""https://github.com/user-attachments/assets/efefbd86-5ed3-4e72-a3e9-d03b9b19d293"" />

### Module

projects

### Version

Frappe version - v15.53.0
ERPNExt version - v15.49.3

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",pritambiswal,2025-01-27 07:59:32+00:00,['mihir-kandoi'],2025-01-30 07:11:11+00:00,,https://github.com/frappe/erpnext/issues/45529,"[('bug', None)]","[{'comment_id': 2623680966, 'issue_id': 2812319593, 'author': 'mihir-kandoi', 'body': 'Do you have a use case where you need to rename Timesheet?', 'created_at': datetime.datetime(2025, 1, 30, 7, 11, 3, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-30 07:11:03 UTC): Do you have a use case where you need to rename Timesheet?

"
2812264331,issue,open,,Drop 'Update Items' in Sales / Purchase Order,"Both https://github.com/frappe/erpnext/pull/45125 and https://github.com/frappe/erpnext/pull/45125 are trying to enhance UX on 'Update Items' popup, by improving reactivity and adding more supplementary details (item name).

But popups are inhertienly limited in capability. 'Items' table already has these UX elements, but it is limited to a _draft_ document. A better solution would be to reuse the 'Item' table functionality to achieve this for _Submitted_ documents
",ruthra-kumar,2025-01-27 07:24:18+00:00,[],2025-01-31 17:37:01+00:00,,https://github.com/frappe/erpnext/issues/45525,"[('refactor', '')]","[{'comment_id': 2627879656, 'issue_id': 2812264331, 'author': 'federicocalvo', 'body': 'Hi @ruthra-kumar ! This is part of Refactor Pricing Rule task or the idea is refactor the entire tool?', 'created_at': datetime.datetime(2025, 1, 31, 17, 37, tzinfo=datetime.timezone.utc)}]","federicocalvo on (2025-01-31 17:37:00 UTC): Hi @ruthra-kumar ! This is part of Refactor Pricing Rule task or the idea is refactor the entire tool?

"
2811116918,issue,open,,Minimum Total Spent wont take effect in the Loyalty Program Collection Tier,"### Information about bug

system ignores the ""Minimum Total Spent"" and applies the loyalty points to customer. eg, the minimum total spent 5000, but points are still assigned at the 1000. 

### Module

selling

### Version

ERPNext: v15.47.4 (version-15)
Frappe Framework: v15.51.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",SaQDS,2025-01-25 18:28:37+00:00,['mihir-kandoi'],2025-01-27 07:09:57+00:00,,https://github.com/frappe/erpnext/issues/45450,"[('bug', None)]","[{'comment_id': 2614057969, 'issue_id': 2811116918, 'author': 'SaQDS', 'body': 'same report in 2018.  https://github.com/frappe/erpnext/issues/14930', 'created_at': datetime.datetime(2025, 1, 25, 18, 29, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614989134, 'issue_id': 2811116918, 'author': 'mihir-kandoi', 'body': 'Please provide replication steps.', 'created_at': datetime.datetime(2025, 1, 27, 7, 9, 56, tzinfo=datetime.timezone.utc)}]","SaQDS (Issue Creator) on (2025-01-25 18:29:47 UTC): same report in 2018.  https://github.com/frappe/erpnext/issues/14930

mihir-kandoi (Assginee) on (2025-01-27 07:09:56 UTC): Please provide replication steps.

"
2811034360,issue,closed,not_planned,CUSTOMIZE FORM is throwing Errors after updating to v15.49.3,"### Information about bug

After updating ERPNext to 15.49.3, I am not able to customise any form anymore. the error details appearing on the screen is:
FileNotFoundError: [Errno 2] No such file or directory: 'apps/erpnext/erpnext/support/doctype/customize_form'
Possible source of error: erpnext (app)

![Image](https://github.com/user-attachments/assets/c8f6a719-5df8-46f8-ac60-9e119115ce4a)

### Module

support

### Version

ERPNext: v15.49.3 (version-15)
Frappe Framework: v15.53.0 (version-15)
Frappe HR: v15.38.2 (version-15)
India Compliance: v15.15.0 (version-15)
Payments: v0.0.1 (version-15)
Print Designer: v1.4.3 (main)
Webshop: v0.0.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""15.49.3"",
	""frappe"": ""15.53.0"",
	""hrms"": ""15.38.2"",
	""india_compliance"": ""15.15.0"",
	""payments"": ""0.0.1"",
	""print_designer"": ""1.4.3"",
	""webshop"": ""0.0.1""
}

### Route

Workspaces/Home

### Traceback

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1726, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/load.py"", line 73, in getdoctype
    docs = get_meta_bundle(doctype)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/load.py"", line 84, in get_meta_bundle
    bundle = [frappe.desk.form.meta.get_meta(doctype)]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/meta.py"", line 42, in get_meta
    meta = FormMeta(doctype, cached=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/meta.py"", line 53, in __init__
    self.load_assets()
  File ""apps/frappe/frappe/desk/form/meta.py"", line 63, in load_assets
    self.add_code()
  File ""apps/frappe/frappe/desk/form/meta.py"", line 118, in add_code
    self.add_html_templates(path)
  File ""apps/frappe/frappe/desk/form/meta.py"", line 133, in add_html_templates
    for fname in os.listdir(path):
                 ^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'apps/erpnext/erpnext/support/doctype/customize_form'


### Request Data

{
	""type"": ""GET"",
	""args"": {
		""doctype"": ""Customize Form"",
		""with_parent"": 1,
		""cached_timestamp"": null
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.load.getdoctype"",
	""request_id"": null
}

### Response Data

{
	""exception"": ""FileNotFoundError: [Errno 2] No such file or directory: 'apps/erpnext/erpnext/support/doctype/customize_form'"",
	""exc_type"": ""FileNotFoundError"",
	""_exc_source"": ""erpnext (app)""
}
```",trackomatic,2025-01-25 15:18:48+00:00,[],2025-01-27 07:03:52+00:00,2025-01-27 07:03:51+00:00,https://github.com/frappe/erpnext/issues/45449,"[('bug', None)]","[{'comment_id': 2614981358, 'issue_id': 2811034360, 'author': 'mihir-kandoi', 'body': 'This is not reproducible and is a local error. Closing.', 'created_at': datetime.datetime(2025, 1, 27, 7, 3, 51, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-01-27 07:03:51 UTC): This is not reproducible and is a local error. Closing.

"
2810555729,issue,open,,Issues and Suggested Solutions in ERPNext,"
1. Optional Journal Entries for Linked Supplier and Customer

Issue:
When a Supplier and Customer are linked as the same entity in ERPNext, journal entries between them are generated automatically, which may not always be required.

Suggested Solution:
Provide an option to make such journal entries optional, allowing users to decide whether they should be created automatically or handled manually.


---

2. Item-wise VAT Rounding Issue

Issue:
In KSA ZATCA Phase 2, VAT rates are restricted to 2 decimal places. This causes discrepancies where the sum of item-wise VAT amounts (rounded to 2 decimals) differs from the total invoice VAT, leading to invoice rejection by the ZATCA portal.

Suggested Solution:
Adjust the VAT calculation logic to ensure consistency between item-wise VAT amounts and the total invoice VAT, adhering to ZATCA's 2-decimal rounding requirement.


---

3. Sales Invoice Cancellation and Stock Unlink Option

Issue:
Under ZATCA Phase 2 regulations, sales invoices cannot be canceled. However, items sold from stock cannot always be canceled or amended due to linked purchase receipts.

Suggested Solution:
Add an option in the Sales Invoice to ""unlink item stock,"" allowing adjustments to be made without affecting the associated stock entries.


---

4. Customer Type and VAT Information in Customer Module

Issue:
To meet ZATCA regulations, there is no clear distinction between B2B and B2C customers, and VAT-related information is not enforced for B2B customers.

Suggested Solution:

Add a checkbox in the Customer module to classify customers as either B2B or B2C.

If the customer is marked as B2B, make VAT-related fields (e.g., VAT number) mandatory.



---

5. Shared Warehouse for Multiple Companies

Issue:
When multiple companies are set up in ERPNext, it can be challenging to manage warehouses that are shared across these companies.

Suggested Solution:
Provide an option to configure warehouses as ""shared"" across multiple companies, enabling seamless stock management and transactions for both entities.


---

6. Company Abbreviation in Document IDs

Issue:
When multiple companies are used in ERPNext, it is difficult to identify documents associated with a specific company.

Suggested Solution:
Include the company abbreviation (abbr) in the IDs of all documents (e.g., Sales Invoices, Purchase Receipts) to ensure better identification and management of records across multiple companies.


---

Let me know if additional formatting is needed!

",rizwan100mu,2025-01-24 23:20:16+00:00,['mihir-kandoi'],2025-01-25 15:08:23+00:00,,https://github.com/frappe/erpnext/issues/45445,"[('feature-request', None)]","[{'comment_id': 2613996281, 'issue_id': 2810555729, 'author': 'mihir-kandoi', 'body': 'Would it be possible for you create 6 different issues for the same? Makes it easier to track.', 'created_at': datetime.datetime(2025, 1, 25, 15, 8, 21, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-25 15:08:21 UTC): Would it be possible for you create 6 different issues for the same? Makes it easier to track.

"
2809634262,issue,open,,Invalid and incomplete auto-fill on payment creation,"### Information about bug

When creating a Payment from a Purchase Invoice, the bank accounts of `Payment From / To` details are not autocompleted as it worked in the past. On contrary, the Party Bank Account is filled in place of the Company Bank Account. Maybe connected to https://github.com/frappe/erpnext/issues/45155?

![Image](https://github.com/user-attachments/assets/32cac38d-665b-41d8-a62d-0d6e05a81a5b)

![Image](https://github.com/user-attachments/assets/c04304b1-ddfb-4055-a479-c55eb0b998a3)

### Module

accounts, buying

### Version

Frappe Framework: v15.51.2
ERPNext: v15.48.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",tbolender,2025-01-24 14:46:53+00:00,['mihir-kandoi'],2025-02-04 05:30:00+00:00,,https://github.com/frappe/erpnext/issues/45442,"[('bug', None), ('awaiting confirmation', 'Awaiting confirmation from user to close the issue')]","[{'comment_id': 2623678613, 'issue_id': 2809634262, 'author': 'mihir-kandoi', 'body': 'I can reproduce company bank account not being fetched but I cannot see company bank account being incorrectly set to party account. Can you provide replication steps?', 'created_at': datetime.datetime(2025, 1, 30, 7, 9, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624436699, 'issue_id': 2809634262, 'author': 'tbolender', 'body': 'We have a bank account set up for this supplier (see below). I can confirm that the `default account` option makes the difference here. When disabled, no autocompletion takes place.\n\n![Image](https://github.com/user-attachments/assets/f3dd8ee1-41bb-409e-b96f-768f737cda67)', 'created_at': datetime.datetime(2025, 1, 30, 12, 53, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632915654, 'issue_id': 2809634262, 'author': 'mihir-kandoi', 'body': 'Please confirm if merged PR has fixed this issue.', 'created_at': datetime.datetime(2025, 2, 4, 5, 29, 54, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-30 07:09:20 UTC): I can reproduce company bank account not being fetched but I cannot see company bank account being incorrectly set to party account. Can you provide replication steps?

tbolender (Issue Creator) on (2025-01-30 12:53:02 UTC): We have a bank account set up for this supplier (see below). I can confirm that the `default account` option makes the difference here. When disabled, no autocompletion takes place.

![Image](https://github.com/user-attachments/assets/f3dd8ee1-41bb-409e-b96f-768f737cda67)

mihir-kandoi (Assginee) on (2025-02-04 05:29:54 UTC): Please confirm if merged PR has fixed this issue.

"
2809452226,issue,open,,Partial Job Card Completion,"### Information about bug


Bug Overview:
When partially completing a Job Card during a manufacturing session and resuming it later, the system currently displays the full production quantity instead of only reflecting the remaining units to be completed.

Steps to Reproduce:
1.	Complete a partial quantity on a Job Card. For example, mark 8 out of 10 units as completed in the first session.

![Image](https://github.com/user-attachments/assets/ff2930ca-df22-4c6c-9676-107275c2f9bb)

2.	Resume the same Job Card to complete the remaining quantity. Instead of displaying the remaining 2 units, the system shows the full work order quantity as if no progress was made.
3. When the user completes the job, they are allowed to enter the full quantity again, leading to incorrect totals.

![Image](https://github.com/user-attachments/assets/add8abb0-7945-49b3-87c0-c65c88246e04)

Current Behavior:
- After completing 8 units in the first session and then finishing the job by marking 10 units in the resumed session, the total completed quantity becomes 18 instead of 10.

Expected Behavior:
- Upon resuming the Job Card, the system should show the remaining quantity (2 units) for completion.
- The user should only be able to complete the remaining units (e.g., “2”), ensuring the total matches the work order quantity.

Impact:
This bug can cause over-reporting of production, leading to inaccuracies in inventory, work order tracking, and downstream processes.

manufacturing

### Version

Frappe Version - v15.53.0 (HEAD)
ERPNext Version - v15.46.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",Altrix-One,2025-01-24 13:23:27+00:00,['mihir-kandoi'],2025-01-30 06:41:06+00:00,,https://github.com/frappe/erpnext/issues/45440,"[('bug', None), ('Medium Priority', '')]","[{'comment_id': 2613948473, 'issue_id': 2809452226, 'author': 'TurkerTunali', 'body': 'Nice catch.', 'created_at': datetime.datetime(2025, 1, 25, 12, 21, 6, tzinfo=datetime.timezone.utc)}]","TurkerTunali on (2025-01-25 12:21:06 UTC): Nice catch.

"
2809281427,issue,open,,Need a Batch Selector Option when we use Batch No or Serial No field,"When we enable the ""Use Serial / Batch Fields"" option in stock setting, the system is not allowing enable Batch Selector (Disable Serial No And Batch Selector). It will be a difficult for the users to select multiple batches by clicking the ""Duplicate"" button on each row in item table. Also, it will be difficult to enter the new batch Qty as the user is unaware about the remaining reqd Qty. He has to maintain the excel to calculate selected and remaining qty. This will take large amount of time and 100% error prone process. Need a provision to enable the ""Disable Serial No And Batch Selector"" button in stock setting when we enable the ""Use Serial / Batch Fields"" option.

<img width=""1226"" alt=""Image"" src=""https://github.com/user-attachments/assets/dcb66ef6-5e23-4812-91d3-cd2515811418"" />

Also, The batch selector should show the selected Qty and Remaining Qty.

<img width=""1217"" alt=""Image"" src=""https://github.com/user-attachments/assets/8cb4c12b-b762-41ac-85dc-825b9f2e2bd3"" />",smbcatalyst,2025-01-24 12:03:50+00:00,['mihir-kandoi'],2025-01-30 06:41:35+00:00,,https://github.com/frappe/erpnext/issues/45439,"[('feature-request', None)]","[{'comment_id': 2613995341, 'issue_id': 2809281427, 'author': 'mihir-kandoi', 'body': 'It is not advised to use both Serial and Batch Fields as well as the selector.\n\nWhy not just use the selector and disable/ignore the Serial and Batch fields?', 'created_at': datetime.datetime(2025, 1, 25, 15, 4, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615172874, 'issue_id': 2809281427, 'author': 'smbcatalyst', 'body': 'The use of batch bundle is creating more problems than solution. We have few customers which can not use batch bundle as production is based on multplie variables used on batch and that batch needs to select before Production plan or work order or stock entry. You can have word with Rohit waghcoure on the same.', 'created_at': datetime.datetime(2025, 1, 27, 8, 57, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623613271, 'issue_id': 2809281427, 'author': 'mihir-kandoi', 'body': 'Are you on Frappe Cloud? If you are, I recommend you open a ticket on FC Support as it will allow me to help you in a much more better way.', 'created_at': datetime.datetime(2025, 1, 30, 6, 20, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623641174, 'issue_id': 2809281427, 'author': 'smbcatalyst', 'body': 'Hi\n\nRaised the issue on FC Support.\n\nhttps://support.frappe.io/helpdesk/my-tickets/30492\n\n[](https://support.frappe.io/helpdesk/my-tickets/30492)', 'created_at': datetime.datetime(2025, 1, 30, 6, 41, 8, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-25 15:04:57 UTC): It is not advised to use both Serial and Batch Fields as well as the selector.

Why not just use the selector and disable/ignore the Serial and Batch fields?

smbcatalyst (Issue Creator) on (2025-01-27 08:57:41 UTC): The use of batch bundle is creating more problems than solution. We have few customers which can not use batch bundle as production is based on multplie variables used on batch and that batch needs to select before Production plan or work order or stock entry. You can have word with Rohit waghcoure on the same.

mihir-kandoi (Assginee) on (2025-01-30 06:20:32 UTC): Are you on Frappe Cloud? If you are, I recommend you open a ticket on FC Support as it will allow me to help you in a much more better way.

smbcatalyst (Issue Creator) on (2025-01-30 06:41:08 UTC): Hi

Raised the issue on FC Support.

https://support.frappe.io/helpdesk/my-tickets/30492

[](https://support.frappe.io/helpdesk/my-tickets/30492)

"
2809260903,issue,open,,Need to change Branch doctype as a Tree structure,"As Branch is a important concept in any business, we need changes in Branch Doctype. In Accounting Branch plays major role e.g. Trial Balance, General Ledger, P&L, GST compliance, User permission, etc.

We need consider this as a accounting dimension in standard ERPNext like Cost Center, Project.

Need to make branch a Tree Structure- A company can have multiple branches in same state or same region then tree structure helps to extract or view or control the access in easiest way.

Kindly consider this on priority.",smbcatalyst,2025-01-24 11:53:42+00:00,[],2025-01-24 11:53:42+00:00,,https://github.com/frappe/erpnext/issues/45437,"[('feature-request', None)]",[],
2808982696,issue,open,,"""error: value missing for customer: territory"" when importing Students using Data Import","### Information about bug

**Description:** When adding a Student manually, it'll automatically create a User and a Customer related to that student. For the Customer to be created automatically, a Default Territory needs to be set in the Selling Settings. But during the Bulk Import process of Students, when creating a customer, it doesn't retrieve the Default territory from the Selling Settings. 

**Pre-requisites:** Set a **Default Territory** in Selling Settings.

**Steps to recreate the Bug:** Data Import > **Document Type:** Student & **Import Type:** Insert New Records > Click Save > Upload a Student file with necessary details > Click Import



### Module

education, selling

### Version

Frappe Version - v14.82.1
ERPNext Version - v14.74.4

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
error: value missing for customer: territory
```",ransikerandeni,2025-01-24 09:38:32+00:00,[],2025-01-24 09:38:32+00:00,,https://github.com/frappe/erpnext/issues/45430,"[('bug', None)]",[],
2808955000,issue,closed,completed,Department cannot be changed in submitted Assets during Asset Transfer Process,"### Information about bug

Description: The user cannot change an Assets **Department** during the **Asset Transfer** Process. Only the Location can be changed. (Example Scenario: When User needs to transfer a Desktop Computer from IT Department to the HR Department). 

**Module:** Asset

**Steps to recreate the bug:** Asset > Asset Movement > New Asset Movement

User is able to change from Source Location to Target Location but user cannot change from source Department to target Department

### Module

assets

### Version

Frappe Version - v14.82.1
ERPNext Version - v14.74.4

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",ransikerandeni,2025-01-24 09:24:44+00:00,[],2025-02-08 00:10:00+00:00,2025-01-24 09:27:11+00:00,https://github.com/frappe/erpnext/issues/45428,"[('bug', None)]",[],
2808948989,issue,open,,Department can't be changed in Submitted Asset from Asset Transfer,"### Information about bug

Description: The user cannot change an Assets **Department** during the **Asset Transfer** Process. Only the Location can be changed. (Example Scenario: When User needs to transfer a Desktop Computer from IT Department to the HR Department). 

**Module:** Asset

**Steps to recreate the bug:** Asset > Asset Movement > New Asset Movement

User is able to change from Source Location to Target Location but user cannot change from source Department to target Department

### Module

assets

### Version

Frappe Version - v14.82.1
ERPNext Version - v14.74.4

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",ransikerandeni,2025-01-24 09:22:03+00:00,['khushi8112'],2025-01-31 03:19:00+00:00,,https://github.com/frappe/erpnext/issues/45427,"[('bug', None)]","[{'comment_id': 2625428957, 'issue_id': 2808948989, 'author': 'khushi8112', 'body': 'Hello @ransikerandeni \n\nCould you please provide screenshot or screen recording explaining the issue and expected behaviour.', 'created_at': datetime.datetime(2025, 1, 30, 19, 48, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626214181, 'issue_id': 2808948989, 'author': 'ransikerandeni', 'body': 'The user can add a Department and Location and Submit the Asset when adding an Asset. But after the Asset has been submitted, there is not option to change the Department, only the Location can be changed during an Asset Transfer.\n\n[Screen Recording Link](https://youtu.be/6XSFKFP8-q0)', 'created_at': datetime.datetime(2025, 1, 31, 3, 18, 59, tzinfo=datetime.timezone.utc)}]","khushi8112 (Assginee) on (2025-01-30 19:48:01 UTC): Hello @ransikerandeni 

Could you please provide screenshot or screen recording explaining the issue and expected behaviour.

ransikerandeni (Issue Creator) on (2025-01-31 03:18:59 UTC): The user can add a Department and Location and Submit the Asset when adding an Asset. But after the Asset has been submitted, there is not option to change the Department, only the Location can be changed during an Asset Transfer.

[Screen Recording Link](https://youtu.be/6XSFKFP8-q0)

"
2808509651,issue,closed,completed,"Negative Inventory Sales Invoice Submitting Despite ""Allow Negative Stock"" Being Disabled","### Information about bug

Even with the ""Allow Negative Stock"" setting turned off in ERPNext, sales invoices with negative inventory are being submitted.

### Module

selling

### Version

Frappe Framework: v15.53.0
ERPNext: v15.49.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",shijoysrdhr,2025-01-24 05:05:47+00:00,['mihir-kandoi'],2025-01-25 15:05:40+00:00,2025-01-25 15:05:39+00:00,https://github.com/frappe/erpnext/issues/45414,"[('bug', None), (""can't-reproduce"", 'We are unable to reproduce this bug, provide more information.')]","[{'comment_id': 2611664986, 'issue_id': 2808509651, 'author': 'mihir-kandoi', 'body': 'Please provide screenshots, replication steps or screen recordings.', 'created_at': datetime.datetime(2025, 1, 24, 5, 57, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611683514, 'issue_id': 2808509651, 'author': 'shijoysrdhr', 'body': '> Please provide screenshots, replication steps or screen recordings.\n\nhttps://github.com/user-attachments/assets/9b2eb73d-f24b-4aa1-80c6-297a8ab5cc02', 'created_at': datetime.datetime(2025, 1, 24, 6, 13, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611704179, 'issue_id': 2808509651, 'author': 'mihir-kandoi', 'body': ""It's difficult to pinpoint the root cause without direct access to the site or replication steps. Are you a Frappe Cloud user by any chance? If so, please open a support ticket for the same."", 'created_at': datetime.datetime(2025, 1, 24, 6, 31, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611711806, 'issue_id': 2808509651, 'author': 'shijoysrdhr', 'body': ""> It's difficult to pinpoint the root cause without direct access to the site or replication steps. Are you a Frappe Cloud user by any chance? If so, please open a support ticket for the same.\n\nThank you for your response. A support ticket has already been raised with Frappe Cloud regarding this issue. They have informed us that they will look into it and provide an update."", 'created_at': datetime.datetime(2025, 1, 24, 6, 38, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613995535, 'issue_id': 2808509651, 'author': 'mihir-kandoi', 'body': 'Monitoring on FC Support. Closing.', 'created_at': datetime.datetime(2025, 1, 25, 15, 5, 39, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-24 05:57:26 UTC): Please provide screenshots, replication steps or screen recordings.

shijoysrdhr (Issue Creator) on (2025-01-24 06:13:57 UTC): https://github.com/user-attachments/assets/9b2eb73d-f24b-4aa1-80c6-297a8ab5cc02

mihir-kandoi (Assginee) on (2025-01-24 06:31:39 UTC): It's difficult to pinpoint the root cause without direct access to the site or replication steps. Are you a Frappe Cloud user by any chance? If so, please open a support ticket for the same.

shijoysrdhr (Issue Creator) on (2025-01-24 06:38:37 UTC): Thank you for your response. A support ticket has already been raised with Frappe Cloud regarding this issue. They have informed us that they will look into it and provide an update.

mihir-kandoi (Assginee) on (2025-01-25 15:05:39 UTC): Monitoring on FC Support. Closing.

"
2804187407,issue,open,,Feature Request: Consolidated Trial Balance in ERPNext,"Currently, ERPNext does not provide an option to view a Consolidated Trial Balance across multiple companies or branches. This feature is essential for organizations managing multiple entities to analyze financial data at a consolidated level without exporting data and manually combining it in external tools.

The requested feature should:

1.Allow users to view a consolidated trial balance for selected companies.
2.Provide filters for period, cost center, and other dimensions.
3.Display totals and balances across companies in a single report.

This feature will enhance ERPNext’s multi-company capabilities, improve efficiency, and eliminate the need for external tools for consolidation.

![Image](https://github.com/user-attachments/assets/19366755-5ed1-4bfd-8aae-e13dfdbe90bb)",Sunil-Codes,2025-01-22 09:02:47+00:00,[],2025-01-22 11:53:53+00:00,,https://github.com/frappe/erpnext/issues/45375,"[('feature-request', None)]",[],
2803509122,issue,closed,completed,Enable Translate title of any input,"### Information about bug

![Image](https://github.com/user-attachments/assets/99cc4347-981c-4c14-a1da-64ec7becfd24)

### Module

stock

### Version

ERPNext: v15.38.4 (version-15)
Frappe Framework: v15.44.2 (version-15)
Frappe HR: v15.32.0 (version-15)



### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",manalErpnext,2025-01-22 06:29:19+00:00,['iamejaaz'],2025-02-08 00:10:03+00:00,2025-01-24 06:16:31+00:00,https://github.com/frappe/erpnext/issues/45366,"[('bug', None)]",[],
2803410305,issue,closed,completed,Purchase Orders Created for Non-Drop Ship Items When Using 'Create PO for Default Supplier',"### Information about bug

The `make_purchase_order_for_default_supplier` method creates purchase orders for all items in a sales order, regardless of whether they are marked for drop shipping (`delivered_by_supplier = 1`) or not. This causes incorrect purchase orders to include items that should be fulfilled from warehouse stock.
 
**Expected Behavior:**  
- Purchase orders should only include items marked with `delivered_by_supplier = 1`.
 
**Current Behavior:**  
- Purchase orders include all items in the sales order, even those meant for warehouse delivery.
 
**Steps to Reproduce:**  
1. Create a sales order with two items:  
   - **Item A**: marked as drop ship (`delivered_by_supplier = 1`).  
   - **Item B**: normal warehouse delivery.  
2. Set supplier for **Item A**.  
3. Use ""Create > Purchase Order (Default Supplier)"".  
4. Observe that both items are included in the purchase order.

### Module

selling

### Version

ERPNext Version - 14.58.1

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```",NethminaHiker360,2025-01-22 05:18:46+00:00,[],2025-01-29 11:31:28+00:00,2025-01-23 12:49:00+00:00,https://github.com/frappe/erpnext/issues/45364,"[('bug', None), ('released', None)]","[{'comment_id': 2621391366, 'issue_id': 2803410305, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 31, 26, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-29 11:31:26 UTC): :tada: This issue has been resolved in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2802633061,issue,closed,completed,Error when adding user_id to Employee: has_permission() got an unexpected keyword argument 'raise_exception,"### Information about bug

When you add a user_id on Employee it gives error `has_permission() got an unexpected keyword argument 'raise_exception'`

### Module

other

### Version

Frappe Version - 16.0.0-dev
ErpNext version - 15.48.2

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""15.48.2"",
	""frappe"": ""16.0.0-dev""
}

### Route

Form/Employee/HR-EMP-00010

### Traceback

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 117, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1727, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 43, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 448, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 502, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1284, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 1095, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1483, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1461, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 1092, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 83, in on_update
    self.update_user()
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 144, in update_user
    user.save()
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 448, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 502, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1284, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 1095, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1483, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1465, in runner
    add_to_return_value(self, f(self, method, *args, **kwargs))
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 257, in update_user_permissions
    if not has_permission(""User Permission"", ptype=""write"", raise_exception=False):
  File ""apps/frappe/frappe/permissions.py"", line 49, in inner
    result = func(*args, **kwargs)
TypeError: has_permission() got an unexpected keyword argument 'raise_exception'


### Request Data

{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""HR-EMP-00010\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-02-08 10:59:17.635788\"",\""modified\"":\""2024-03-03 08:05:39.211986\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":96,\""employee\"":\""HR-EMP-00010\"",\""naming_series\"":\""HR-EMP-\"",\""first_name\"":\""Tiny Chilisa\"",\""last_name\"":\""Chilisa\"",\""employee_name\"":\""Tiny Chilisa\"",\""gender\"":\""Female\"",\""date_of_birth\"":\""1992-09-27\"",\""date_of_joining\"":\""2024-02-07\"",\""status\"":\""Active\"",\""create_user_permission\"":1,\""company\"":\""Genesis Orthodontics\"",\""department\"":\""Administration - GO\"",\""medical_department\"":\""Orthodontology\"",\""designation\"":\""Credit Controller\"",\""reports_to\"":\""HR-EMP-00002\"",\""branch\"":\""Gaborone\"",\""notice_number_of_days\"":0,\""company_email\"":\""tinyc@genesisorthodontics.co.bw\"",\""prefered_contact_email\"":\""Company Email\"",\""prefered_email\"":\""tinyc@genesisorthodontics.co.bw\"",\""unsubscribed\"":0,\""current_accommodation_type\"":\""\"",\""permanent_accommodation_type\"":\""\"",\""ctc\"":0,\""salary_currency\"":\""BWP\"",\""salary_mode\"":\""\"",\""marital_status\"":\""\"",\""blood_group\"":\""\"",\""leave_encashed\"":\""\"",\""lft\"":9,\""rgt\"":10,\""old_parent\"":\""HR-EMP-00002\"",\""doctype\"":\""Employee\"",\""education\"":[],\""external_work_history\"":[],\""internal_work_history\"":[],\""__last_sync_on\"":\""2025-01-21T13:46:30.765Z\"",\""image\"":null,\""__unsaved\"":1,\""user_id\"":\""tinyc@genesisorthodontics.co.bw\"",\""employment_type\"":\""Full-time\""}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery370091356263033598121"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 3354,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}

### Response Data

{
	""exception"": ""TypeError: has_permission() got an unexpected keyword argument 'raise_exception'"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```",kalungia,2025-01-21 19:22:57+00:00,[],2025-02-06 00:10:10+00:00,2025-01-22 11:55:52+00:00,https://github.com/frappe/erpnext/issues/45362,"[('bug', None)]","[{'comment_id': 2607048452, 'issue_id': 2802633061, 'author': 'akhilnarang', 'body': ""You seem to have mixed up develop and stable branches in framework and erpnext.\nDo use the matching branch for both (ideally version-15) and this shouldn't be an issue."", 'created_at': datetime.datetime(2025, 1, 22, 11, 55, 52, tzinfo=datetime.timezone.utc)}]","akhilnarang on (2025-01-22 11:55:52 UTC): You seem to have mixed up develop and stable branches in framework and erpnext.
Do use the matching branch for both (ideally version-15) and this shouldn't be an issue.

"
2801016793,issue,open,,Drop 'Is Opening' and find a suitable replacement,"https://github.com/frappe/erpnext/pull/45327

GL Entry should be decoupled from special case flags that cause hindrance on large sites. 'Is Opening' is one such field.",ruthra-kumar,2025-01-21 08:18:20+00:00,['ruthra-kumar'],2025-01-21 08:18:20+00:00,,https://github.com/frappe/erpnext/issues/45354,"[('refactor', '')]",[],
2800949828,issue,open,,[V16] Payment reco. Column width - too small,"To replicate, Frappe team can check - https://spindl16.frappe.cloud/

In the Payment Reco, since we have two columns side by side, the values in each table isn't clear enough. If I try adjusting width by changing width of some column to 1, it shrinks too much. Should a column shirk this much with width of ""1"". 

For the table on right, the width allocated on each column is 2, still the visible width isn't same. Value column has much lesser width. Seems to be an issue due to limitation of the space.

<img width=""1224"" alt=""Image"" src=""https://github.com/user-attachments/assets/203134e3-4553-483f-82b3-2abe9a4f792d"" />",umairsy,2025-01-21 07:47:21+00:00,[],2025-01-21 07:48:43+00:00,,https://github.com/frappe/erpnext/issues/45353,"[('UX', ''), ('UX Review Required', '')]",[],
2800924999,issue,open,,refactor `get_exchange_rate`,"
https://github.com/frappe/erpnext/blob/7b0c21e9894092795bb44ac7e62cd50084264b56/erpnext/setup/utils.py#L47-L117",ruthra-kumar,2025-01-21 07:33:14+00:00,['ruthra-kumar'],2025-01-21 07:33:25+00:00,,https://github.com/frappe/erpnext/issues/45352,"[('refactor', '')]",[],
2800807953,issue,closed,completed,"[V16] Tree view doesn't load bydefault for CoA, Item Group, Warehouse, Cost Center etc.","Earlier, we used to have some of the masters directly opening in the tree view, like Chart of Accounts, Item Group, Customer Group, Chart of Cost Centers, Warehouse etc.

Now, when you open these masters from Dashboard, it first shows the list view, instead of tree view. Checkout GIF below.

Is it something which got broken in the process, or it's a design decision? The listed masters are easier to view in the tree view. Also, addition of new records is simpler, as you have to select a parent record. In a form view, it's hard to visualise which parent record to select and how it would look.

![Image](https://github.com/user-attachments/assets/1e752296-d3e3-4a82-b96f-58f9dd8d9822)

Can we default some masters to open in the tree view, always? There should be option in the tree view to view same master in the list view.

",umairsy,2025-01-21 06:19:50+00:00,"['nabinhait', 'iamejaaz']",2025-02-06 00:10:11+00:00,2025-01-22 10:48:33+00:00,https://github.com/frappe/erpnext/issues/45350,"[('UX', '')]",[],
2800786853,issue,open,,ERPNext || Upload Role Permissions via Data Import,"Currently, the only way to manage the Role Permissions is via Role Permissions tool.

However, in cases where there a bunch of custom roles and have different permissions that are to be configured across different sites (Testing -> UAT-> Production), configuring, managing and maintaining it becomes very tedious.

Hence, with a provision to Upload Role Permissions, just like User Permissions, via Data Import would help a lot.

Already tried uploading Custom DocPerm doctype but that resets the existing permissions, so doesn't work.",hpotabatti,2025-01-21 06:04:49+00:00,[],2025-01-21 06:04:49+00:00,,https://github.com/frappe/erpnext/issues/45349,"[('feature-request', None)]",[],
2800783234,issue,open,,"[V16] Left bar, issue in identifying module","In the earlier V16 version, the left bar would expand on the mouse hoover. In the latest v16, we don't expand the left bar, but just icons. If I want to know Icon Name, I have to hoover on the icon. It takes about a second for the module-name to show-up. And I have to keep hovering till I find my module or memorize the icons for that module.

To reduce these steps, can we have a single click (something like "">"" and ""<"") to compress and expand the left bar? Once expanded, it should show icon and module names, side-by-side, like it used to show earlier. Or the earlier function of expanding left bar, with icon and module names wasn't that bad, and could be restored.

<img width=""415"" alt=""Image"" src=""https://github.com/user-attachments/assets/64c673ed-dc4f-4f2f-bdda-bd83d8f05451"" />",umairsy,2025-01-21 06:02:03+00:00,['sokumon'],2025-01-21 06:06:47+00:00,,https://github.com/frappe/erpnext/issues/45348,"[('UX', ''), ('feature-request', None), ('v16', '')]",[],
2800318084,issue,open,,bug: split_batch does not handle externally supplied new_batch case,"@frappe.whitelist()
def split_batch(batch_no: str, item_code: str, warehouse: str, qty: float, new_batch_id: str | None = None):
	""""""Split the batch into a new batch""""""
	batch = frappe.get_doc(dict(doctype=""Batch"", item=item_code, batch_id=new_batch_id)).insert()

looks like the method may receive new_batch_id but it does not handle the case where it is fed beforehand. Please include necessary branching if the new batch to split into is provided by calling code",toofun666,2025-01-20 21:49:39+00:00,[],2025-01-21 06:13:39+00:00,,https://github.com/frappe/erpnext/issues/45347,[],"[{'comment_id': 2603738765, 'issue_id': 2800318084, 'author': 'mihir-kandoi', 'body': 'Please describe the issue in detail with current behaviour and expected behaviour with screenshots or screen recordings if possible.', 'created_at': datetime.datetime(2025, 1, 21, 6, 5, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603748410, 'issue_id': 2800318084, 'author': 'toofun666', 'body': 'I needed to override a class method for processing of the Purchase Receipt on_submit and split the batches created by the Purchase Receipt submission further as per the quantities entered in Purchase Receipt Items for each item that has batch control.\nDuring this, I needed to print labels, so I needed the new batch numbers created at this split process.\nSince it was a deferred commit operation, checking immediately the batches created at the database is not possible. (maybe that is why the split_batch method is returning batch.name batch being the new batch created for Outward stock entry.\nI noticed the split_batch accepts a predetermined target batch, so I was planning to supply it but obviously it returned a batch already exists message breaking the process.\nI guess the .insert() at the end of the line breaks this. Or you should control if the new_batch_id is existing or not.', 'created_at': datetime.datetime(2025, 1, 21, 6, 13, 38, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-01-21 06:05:44 UTC): Please describe the issue in detail with current behaviour and expected behaviour with screenshots or screen recordings if possible.

toofun666 (Issue Creator) on (2025-01-21 06:13:38 UTC): I needed to override a class method for processing of the Purchase Receipt on_submit and split the batches created by the Purchase Receipt submission further as per the quantities entered in Purchase Receipt Items for each item that has batch control.
During this, I needed to print labels, so I needed the new batch numbers created at this split process.
Since it was a deferred commit operation, checking immediately the batches created at the database is not possible. (maybe that is why the split_batch method is returning batch.name batch being the new batch created for Outward stock entry.
I noticed the split_batch accepts a predetermined target batch, so I was planning to supply it but obviously it returned a batch already exists message breaking the process.
I guess the .insert() at the end of the line breaks this. Or you should control if the new_batch_id is existing or not.

"
2797516875,issue,closed,not_planned,"Website Portal Setting: When users click on a purchase order from the listing page, they are unable to view its complete details page.","### Information about bug

After logging into the ERP system through the website portal and navigating to the purchase orders listing, clicking on a specific purchase order is expected to display its full details. However, instead of showing the information, the system returns a ""Not Permitted"" error. This issue is not limited to purchase orders; it occurs across all core doctypes. In previous versions (v11, v12), users were able to view the forms without any issues.

i logged in with administrator Account so i have full permisions

![Image](https://github.com/user-attachments/assets/5a8368fb-2322-46e8-ae64-618f4a3b37ef)

![Image](https://github.com/user-attachments/assets/83edb57f-fc28-40c7-8614-1b40bb03d222)

### Module

buying

### Version

ERPNext - v15.48.2 (version-15)
Frappe Version - v15.51.2 (version-15)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",M0hmedAli,2025-01-19 09:09:43+00:00,['mihir-kandoi'],2025-02-04 05:28:58+00:00,2025-02-04 05:28:58+00:00,https://github.com/frappe/erpnext/issues/45330,"[('bug', None)]","[{'comment_id': 2600775725, 'issue_id': 2797516875, 'author': 'mihir-kandoi', 'body': 'Try the following commands and see if they work.\n\n1. `bench clear-cache`\n2. `bench clear-website-cache`\n\nThen try starting your website through `bench start`', 'created_at': datetime.datetime(2025, 1, 19, 9, 24, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600778318, 'issue_id': 2797516875, 'author': 'M0hmedAli', 'body': '@mihir-kandoi \n\n![Image](https://github.com/user-attachments/assets/808a981b-e579-4667-a336-93b96e62b97d)\nstill when click on item of them give me this page ""Not Permitted""', 'created_at': datetime.datetime(2025, 1, 19, 9, 31, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600796465, 'issue_id': 2797516875, 'author': 'mihir-kandoi', 'body': 'Try `bench migrate` as well', 'created_at': datetime.datetime(2025, 1, 19, 10, 18, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632914540, 'issue_id': 2797516875, 'author': 'mihir-kandoi', 'body': 'Closing as no response received.', 'created_at': datetime.datetime(2025, 2, 4, 5, 28, 58, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-19 09:24:12 UTC): Try the following commands and see if they work.

1. `bench clear-cache`
2. `bench clear-website-cache`

Then try starting your website through `bench start`

M0hmedAli (Issue Creator) on (2025-01-19 09:31:14 UTC): @mihir-kandoi 

![Image](https://github.com/user-attachments/assets/808a981b-e579-4667-a336-93b96e62b97d)
still when click on item of them give me this page ""Not Permitted""

mihir-kandoi (Assginee) on (2025-01-19 10:18:22 UTC): Try `bench migrate` as well

mihir-kandoi (Assginee) on (2025-02-04 05:28:58 UTC): Closing as no response received.

"
2797333433,issue,closed,not_planned,Stock Balance Report: Dimension Fields Populated When Not Showing Dimension Wise Stock,"### Information about bug

In Stock Balance Report, when using Inventory Dimensions, when 'Show Dimension Wise Stock' is **not** checked, the inventory dimension fields are still populated. This can be very misleading to a user. 

**Example**: In example below, it means Balance Qty is 1000 for shown dimensions which is **incorrect**.

![Image](https://github.com/user-attachments/assets/4e7d7016-c0ac-4280-a4fa-0626311035c3)

**Example**: In example below, it means Balance Qty is 500 for each dimension which is **correct**.

![Image](https://github.com/user-attachments/assets/18941bad-262a-418e-9b7c-a97fed36c433)

Instead, when 'Show Dimension Wise Stock' is **not** checked, dimension fields **should be cleared** to imply that Balance Qty is for all dimensions.

### Module

stock

### Version

ERPNext: v15.48.4 (version-15)
Frappe Framework: v15.52.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",dmbabu,2025-01-19 01:30:46+00:00,['mihir-kandoi'],2025-01-27 17:11:07+00:00,2025-01-27 17:11:05+00:00,https://github.com/frappe/erpnext/issues/45329,"[('bug', None)]","[{'comment_id': 2600770157, 'issue_id': 2797333433, 'author': 'mihir-kandoi', 'body': ""Have you done some customisation? I don't have the filters or columns for Inventory User and Warehouse Bin. Please provide replication steps."", 'created_at': datetime.datetime(2025, 1, 19, 9, 8, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616399281, 'issue_id': 2797333433, 'author': 'mihir-kandoi', 'body': 'Replication steps not provided. Closing.', 'created_at': datetime.datetime(2025, 1, 27, 17, 11, 5, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-19 09:08:40 UTC): Have you done some customisation? I don't have the filters or columns for Inventory User and Warehouse Bin. Please provide replication steps.

mihir-kandoi (Assginee) on (2025-01-27 17:11:05 UTC): Replication steps not provided. Closing.

"
2797115073,issue,closed,completed,Missing chart of accounts in latest release,"
**Is your feature request related to a problem? Please describe.**

Hi guys,
Since this PR #44453 have been merged a couple months ago I am now starting to work on a client's project and came to realize that the charts are not in the latest release.
As you understand, it is not possible to deploy something by working on the develop branch since it's less stable. 
Do you know when this will be added ?

Thanks a lot for your help",n-traore,2025-01-18 18:23:22+00:00,['ruthra-kumar'],2025-02-05 00:10:18+00:00,2025-01-21 07:48:46+00:00,https://github.com/frappe/erpnext/issues/45328,"[('feature-request', None)]","[{'comment_id': 2600762999, 'issue_id': 2797115073, 'author': 'mihir-kandoi', 'body': '@ruthra-kumar can we backport this to v15?', 'created_at': datetime.datetime(2025, 1, 19, 8, 49, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603880724, 'issue_id': 2797115073, 'author': 'ruthra-kumar', 'body': '[Backported to v15](https://github.com/frappe/erpnext/pull/45338). It will be available on next v15 release.', 'created_at': datetime.datetime(2025, 1, 21, 7, 48, 47, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-01-19 08:49:46 UTC): @ruthra-kumar can we backport this to v15?

ruthra-kumar (Assginee) on (2025-01-21 07:48:47 UTC): [Backported to v15](https://github.com/frappe/erpnext/pull/45338). It will be available on next v15 release.

"
2794620862,issue,closed,not_planned,Issue with Email Sending and Sent Box Visibility in ERPNext,"### Information about bug

Dear Frappe Support Team,

I am reaching out to report an issue we are experiencing with the email functionality in ERPNext.

We have successfully configured the email account in ERPNext, and emails are being sent correctly when the recipient's email is placed in the ""To"" field. However, we have noticed the following issues:

When the same email ID is added to the ""CC"" field, the email fails to send.
Emails sent from ERPNext are not appearing in the ""Sent"" box of the configured email account. This forces us to manually search each email by subject to track our communication, which is not efficient.
Could you please guide us on resolving these issues? Any insights or recommendations would be greatly appreciated.

Thank you for your support, and I look forward to your response.

Best regards,
Parikshit

### Module

other

### Version

ERPNext version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",Parikshit27,2025-01-17 05:38:13+00:00,['mihir-kandoi'],2025-01-27 17:10:23+00:00,2025-01-27 17:10:21+00:00,https://github.com/frappe/erpnext/issues/45301,"[('bug', None)]","[{'comment_id': 2600773849, 'issue_id': 2794620862, 'author': 'mihir-kandoi', 'body': 'I tried to replicate this issue but everything was working as expected.\nThe mails sent through ERPNext were visible in the Sent section from which the mail was sent AND the CC field was working as well.\n\nPlease provide replication steps.', 'created_at': datetime.datetime(2025, 1, 19, 9, 18, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616397410, 'issue_id': 2794620862, 'author': 'mihir-kandoi', 'body': 'Replication steps not provided. Closing.', 'created_at': datetime.datetime(2025, 1, 27, 17, 10, 21, tzinfo=datetime.timezone.utc)}]","mihir-kandoi (Assginee) on (2025-01-19 09:18:56 UTC): I tried to replicate this issue but everything was working as expected.
The mails sent through ERPNext were visible in the Sent section from which the mail was sent AND the CC field was working as well.

Please provide replication steps.

mihir-kandoi (Assginee) on (2025-01-27 17:10:21 UTC): Replication steps not provided. Closing.

"
2792507925,issue,closed,not_planned,Weekday/Weekly off is not respected,"### Information about bug

System settings has Sunday as first day of week.

![Image](https://github.com/user-attachments/assets/3ec34fa4-4a6e-4985-800c-43b8d28e4a07)

But calendars show Sundays as OFF.

![Image](https://github.com/user-attachments/assets/a2bdd69e-f168-4548-bc3b-4c21065c9848)

Hide Weekends hides both Saturday and Sunday

![Image](https://github.com/user-attachments/assets/b3b66a7c-00b1-4d38-bf43-05dcb2324750)

### Module

other

### Version

![Image](https://github.com/user-attachments/assets/ecd5c361-ed18-45f4-bf24-e208a341b0fb)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell

```",anup-dh,2025-01-16 11:52:07+00:00,[],2025-02-01 00:11:23+00:00,2025-01-17 07:34:10+00:00,https://github.com/frappe/erpnext/issues/45296,"[('bug', None)]","[{'comment_id': 2597607707, 'issue_id': 2792507925, 'author': 'mihir-kandoi', 'body': 'This is not a bug, it is intended behaviour.\n\n1. In Calendar view, the first day of the week is shown first (from the left side). If you change it to Monday you will see that the left most day on the view is Monday.\n2. Hide Weekends hides Saturday and Sunday because they ARE weekends (universal truth).\n\nIf you still feel something else with Calendar View is wrong, please open a new issue.', 'created_at': datetime.datetime(2025, 1, 17, 7, 34, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597631753, 'issue_id': 2792507925, 'author': 'anup-dh', 'body': ""> 2\\. Hide Weekends hides Saturday and Sunday because they ARE weekends (universal truth).\n\nNot everywhere sir!\n\nThis dark/highlight on Sunday means the ERP thinks Sunday is a holiday, or week end.\n\n![Image](https://github.com/user-attachments/assets/06b6824e-f62a-441f-8ace-0357412ed287)\n\nIf I set first day of week to be Monday, it means Sunday is off. If I select first day of week is Sunday, shouldn't it mean Sunday is not off ?\n\nOr is this setting \n\n![Image](https://github.com/user-attachments/assets/8800645d-a2b3-4b33-93bf-152064d09b7f)\n\nonly placed there for calendar view ?\n\n\n======================================================================\n\nLets discuss the real problem here.\n======================================================================\n\n\n\n\n> 2\\. universal truth\n\nIt is not true in some countries.\n\nI think the behavior must be modified based on selected country during ERPNext installation.\n\nIn Nepal, we have only Saturdays off (government holidays). Only some corporates (especially MNCs, INGOs, etc) exercise Saturdays and Sundays off (weekends). Not everyone.\n\nSo, may be we can make some changes to address this issue ?"", 'created_at': datetime.datetime(2025, 1, 17, 7, 52, 3, tzinfo=datetime.timezone.utc)}]","mihir-kandoi on (2025-01-17 07:34:10 UTC): This is not a bug, it is intended behaviour.

1. In Calendar view, the first day of the week is shown first (from the left side). If you change it to Monday you will see that the left most day on the view is Monday.
2. Hide Weekends hides Saturday and Sunday because they ARE weekends (universal truth).

If you still feel something else with Calendar View is wrong, please open a new issue.

anup-dh (Issue Creator) on (2025-01-17 07:52:03 UTC): Not everywhere sir!

This dark/highlight on Sunday means the ERP thinks Sunday is a holiday, or week end.

![Image](https://github.com/user-attachments/assets/06b6824e-f62a-441f-8ace-0357412ed287)

If I set first day of week to be Monday, it means Sunday is off. If I select first day of week is Sunday, shouldn't it mean Sunday is not off ?

Or is this setting 

![Image](https://github.com/user-attachments/assets/8800645d-a2b3-4b33-93bf-152064d09b7f)

only placed there for calendar view ?


======================================================================

Lets discuss the real problem here.
======================================================================





It is not true in some countries.

I think the behavior must be modified based on selected country during ERPNext installation.

In Nepal, we have only Saturdays off (government holidays). Only some corporates (especially MNCs, INGOs, etc) exercise Saturdays and Sundays off (weekends). Not everyone.

So, may be we can make some changes to address this issue ?

"
2792492381,issue,open,,Not handling Company Tax ID field on submission of Sales Invoice for Italian E-Invoicing,"### Information about bug

_Adding an Issue and not a PR since I am unsure about the legal side._


### Issue

![Image](https://github.com/user-attachments/assets/37738ad7-0c69-4049-975d-cc2ad7a94f9e)

In the current implementation of e-invoicing for Italy, the company_tax_id is not being handled properly.
[https://github.com/frappe/erpnext/blob/43ce185429ad125d76379e5a98179181627e2d8e/erpnext/regional/italy/utils.py#L264](url)


In the **sales_invoice_validate()** method, an error is thrown only if both _company_tax_id_ and _company_fiscal_code_ are missing. This allows invoices to proceed if at least one of these fields is set. and in the _get_progressive_name_and_number()_ method, the _company_tax_id_ is accessed without a fallback mechanism, leading to runtime errors if it is not set.


```
if not doc.company_tax_id and not doc.company_fiscal_code:
	frappe.throw(
		_(""Please set either the Tax ID or Fiscal Code on Company '%s'"" % doc.company),
		title=_(""E-Invoicing Information Missing""),
	)
```

[https://github.com/frappe/erpnext/blob/43ce185429ad125d76379e5a98179181627e2d8e/erpnext/regional/italy/utils.py#L469](url)

`company_tax_id = doc.company_tax_id if doc.company_tax_id.startswith(""IT"") else ""IT"" + doc.company_tax_id`


## Steps to Reproduce:

1. Create a company in the Italian regional setup without setting a _tax_id_ but with a _fiscal_code_.
2. Create a sales invoice for this company.
3. Validation does not raise any error in _sales_invoice_validate()_ since the fiscal_code is set.
4. During submission of the sales invoice it triggers get_progressive_name_and_number() method.
5. A runtime error occurs because _company_tax_id_ is accessed directly without checking its existence.

## Suggested Solution

1. Throw an error if company_tax_id is not present during validation.
2. Handle get_progressive_name_and_number() method by including either company_fiscal_code or tax_id

```
company_tax_id = doc.company_tax_id if doc.company_tax_id and doc.company_tax_id.startswith(""IT"") else ""IT"" + (doc.company_tax_id or doc.tax_id)
if not company_tax_id:
    frappe.throw(
        _(""Company Tax ID is required to generate the progressive name.""),
        title=_(""Missing Information"")
    )
```



### Module

regional

### Version

Frappe Version - Version-15
ERPNext Version - Version-15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell

```",rahib-hassan,2025-01-16 11:44:39+00:00,[],2025-01-16 11:48:54+00:00,,https://github.com/frappe/erpnext/issues/45295,"[('bug', None)]",[],
2788985383,issue,closed,completed,AttributeError: 'str' object has no attribute 'nodes_',"### Information about bug

I don't have permission to reopen the request  #39413. The problem is not solved.

### Module

other

### Version

![Image](https://github.com/user-attachments/assets/78566481-bfbe-4249-83c6-02a9549156ef)
![Image](https://github.com/user-attachments/assets/def9f044-e5d6-4296-ab1e-71dba18e09f6)
Сама ошибка

### App Versions
```
{
  ""alerts"": ""1.0.8"",
  ""dinord_erpnext_customization"": ""3.5.0"",
  ""dinord_timesheet"": ""0.0.1"",
  ""doctype_permission"": ""0.0.1"",
  ""erpnext"": ""15.44.0"",
  ""frappe"": ""15.48.0"",
  ""frappe_better_attach_control"": ""2.0.0"",
  ""frappe_better_list_view"": ""1.4.0"",
  ""frappe_better_select_control"": ""1.2.1"",
  ""frappe_telegram"": ""0.0.1"",
  ""hrms"": ""16.0.0-dev"",
  ""insights"": ""2.2.2"",
  ""lms"": ""2.4.0"",
  ""persona"": ""0.0.1"",
  ""print_designer"": ""1.0.0-dev"",
  ""quick_kanban"": ""0.0.1"",
  ""wiki"": ""2.0.0""
}
```
### Route
```
Workspaces/Home
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1725, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/alerts/alerts/utils/alert.py"", line 144, in sync_alerts
    data[""alerts""] = get_user_alerts(user)
  File ""apps/alerts/alerts/utils/alert.py"", line 260, in get_user_alerts
    data = filter_seen_alerts(data, user, parents, today)
  File ""apps/alerts/alerts/utils/alert.py"", line 341, in filter_seen_alerts
    seen_by = get_alerts_seen_by(user, alerts)
  File ""apps/alerts/alerts/utils/alert.py"", line 327, in get_alerts_seen_by
    .where(doc.parent.isin(alerts))
  File ""env/lib/python3.10/site-packages/pypika/utils.py"", line 50, in _copy
    result = func(self_copy, *args, **kwargs)
  File ""env/lib/python3.10/site-packages/pypika/queries.py"", line 930, in where
    if not self._validate_table(criterion):
  File ""env/lib/python3.10/site-packages/pypika/queries.py"", line 1155, in _validate_table
    for field in term.fields_():
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 57, in fields_
    return set(self.find_(Field))
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 37, in find_
    return [node for node in self.nodes_() if isinstance(node, type)]
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 37, in <listcomp>
    return [node for node in self.nodes_() if isinstance(node, type)]
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 795, in nodes_
    yield from self.container.nodes_()
AttributeError: 'str' object has no attribute 'nodes_'

```
### Request Data
```
{
  ""type"": ""POST"",
  ""args"": {
    ""init"": 1
  },
  ""headers"": {},
  ""error_handlers"": {},
  ""url"": ""/api/method/alerts.utils.sync_alerts"",
  ""request_id"": null
}
```
### Response Data
```
{
  ""exception"": ""AttributeError: 'str' object has no attribute 'nodes_'"",
  ""exc_type"": ""AttributeError"",
  ""_exc_source"": ""alerts (app)""
}
```

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
  ""alerts"": ""1.0.8"",
  ""dinord_erpnext_customization"": ""3.5.0"",
  ""dinord_timesheet"": ""0.0.1"",
  ""doctype_permission"": ""0.0.1"",
  ""erpnext"": ""15.44.0"",
  ""frappe"": ""15.48.0"",
  ""frappe_better_attach_control"": ""2.0.0"",
  ""frappe_better_list_view"": ""1.4.0"",
  ""frappe_better_select_control"": ""1.2.1"",
  ""frappe_telegram"": ""0.0.1"",
  ""hrms"": ""16.0.0-dev"",
  ""insights"": ""2.2.2"",
  ""lms"": ""2.4.0"",
  ""persona"": ""0.0.1"",
  ""print_designer"": ""1.0.0-dev"",
  ""quick_kanban"": ""0.0.1"",
  ""wiki"": ""2.0.0""
}

### Route

Workspaces/Home

### Traceback

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1725, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/alerts/alerts/utils/alert.py"", line 144, in sync_alerts
    data[""alerts""] = get_user_alerts(user)
  File ""apps/alerts/alerts/utils/alert.py"", line 260, in get_user_alerts
    data = filter_seen_alerts(data, user, parents, today)
  File ""apps/alerts/alerts/utils/alert.py"", line 341, in filter_seen_alerts
    seen_by = get_alerts_seen_by(user, alerts)
  File ""apps/alerts/alerts/utils/alert.py"", line 327, in get_alerts_seen_by
    .where(doc.parent.isin(alerts))
  File ""env/lib/python3.10/site-packages/pypika/utils.py"", line 50, in _copy
    result = func(self_copy, *args, **kwargs)
  File ""env/lib/python3.10/site-packages/pypika/queries.py"", line 930, in where
    if not self._validate_table(criterion):
  File ""env/lib/python3.10/site-packages/pypika/queries.py"", line 1155, in _validate_table
    for field in term.fields_():
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 57, in fields_
    return set(self.find_(Field))
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 37, in find_
    return [node for node in self.nodes_() if isinstance(node, type)]
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 37, in <listcomp>
    return [node for node in self.nodes_() if isinstance(node, type)]
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 795, in nodes_
    yield from self.container.nodes_()
AttributeError: 'str' object has no attribute 'nodes_'


### Request Data

{
  ""type"": ""POST"",
  ""args"": {
    ""init"": 1
  },
  ""headers"": {},
  ""error_handlers"": {},
  ""url"": ""/api/method/alerts.utils.sync_alerts"",
  ""request_id"": null
}

### Response Data

{
  ""exception"": ""AttributeError: 'str' object has no attribute 'nodes_'"",
  ""exc_type"": ""AttributeError"",
  ""_exc_source"": ""alerts (app)""
}
```",aleks473,2025-01-15 06:55:05+00:00,[],2025-01-30 00:10:03+00:00,2025-01-15 07:07:17+00:00,https://github.com/frappe/erpnext/issues/45269,"[('bug', None)]","[{'comment_id': 2591796769, 'issue_id': 2788985383, 'author': 'nabinhait', 'body': ""This error is coming from an application called 'alerts' developed by 3rd party community developer. You should raise an issue on that repository ([kid1194/frappe_alerts](https://github.com/kid1194/frappe_alerts))."", 'created_at': datetime.datetime(2025, 1, 15, 7, 7, 17, tzinfo=datetime.timezone.utc)}]","nabinhait on (2025-01-15 07:07:17 UTC): This error is coming from an application called 'alerts' developed by 3rd party community developer. You should raise an issue on that repository ([kid1194/frappe_alerts](https://github.com/kid1194/frappe_alerts)).

"
2786854278,issue,open,,Add Day-Wise Scheduling Option in Maintenance Schedule,"Hello,

Trying to schedule a daily visit in the Maintenance Schedule in addition to the one mentioned like Monthly, Quarterly. 

Expectation: System should be able to create daily schedule & daily visit based on start date and end date. 



",dotd3v,2025-01-14 11:04:55+00:00,[],2025-01-14 11:05:17+00:00,,https://github.com/frappe/erpnext/issues/45266,"[('feature-request', None)]",[],
2784970050,issue,closed,not_planned,Client multicurrency error,"### Information about bug

i have a client who sometings need qotations in usd or mxn, but after try the system forces to keep the same currency for all the quotations.

Accounting Entry for Customer: (Customer) can only be made in currency: MXN

### Module

selling

### Version

ERPNext: v15.x.x-develop () (develop)

Framework: v15.x.x-develop () (develop)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Accounting Entry for Customer: (Customer) can only be made in currency: MXN
```
",JoSoG89,2025-01-13 18:42:26+00:00,['mihir-kandoi'],2025-01-27 17:09:50+00:00,2025-01-27 17:09:49+00:00,https://github.com/frappe/erpnext/issues/45250,"[('bug', None)]","[{'comment_id': 2588025585, 'issue_id': 2784970050, 'author': 'JeansReal', 'body': 'Same Issue here, from last update!', 'created_at': datetime.datetime(2025, 1, 13, 19, 34, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593824957, 'issue_id': 2784970050, 'author': 'JoSoG89', 'body': 'Update.\nif the company is in MXN and i make an invoice in USD i cant receive payments in USD, they force to receive in MXN.\n\nSo, if i have a bank account in USD what i can do?', 'created_at': datetime.datetime(2025, 1, 15, 20, 1, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597616533, 'issue_id': 2784970050, 'author': 'mihir-kandoi', 'body': 'Please provide replication steps.', 'created_at': datetime.datetime(2025, 1, 17, 7, 41, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616396102, 'issue_id': 2784970050, 'author': 'mihir-kandoi', 'body': 'Replication steps not provided. Closing.', 'created_at': datetime.datetime(2025, 1, 27, 17, 9, 49, tzinfo=datetime.timezone.utc)}]","JeansReal on (2025-01-13 19:34:48 UTC): Same Issue here, from last update!

JoSoG89 (Issue Creator) on (2025-01-15 20:01:59 UTC): Update.
if the company is in MXN and i make an invoice in USD i cant receive payments in USD, they force to receive in MXN.

So, if i have a bank account in USD what i can do?

mihir-kandoi (Assginee) on (2025-01-17 07:41:04 UTC): Please provide replication steps.

mihir-kandoi (Assginee) on (2025-01-27 17:09:49 UTC): Replication steps not provided. Closing.

"
2783902315,issue,closed,completed,"Serial No. is marked ""Delivered"" after the ""Manufacture"" stock entry","### Information about bug

After ""Manufacture"" stock entry, raw material's S/Ns:

![CleanShot 2025-01-13 at 18 25 11@2x](https://github.com/user-attachments/assets/f6759fff-9416-4048-a9c7-80776ad6bc1b)

Maybe we should mark it consumed or something?

### Module

manufacturing

### Version

Version 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",NagariaHussain,2025-01-13 13:01:18+00:00,['rohitwaghchaure'],2025-01-30 00:09:57+00:00,2025-01-15 12:43:36+00:00,https://github.com/frappe/erpnext/issues/45246,"[('bug', None)]",[],
2783888022,issue,closed,completed,"UX: show item name with item code in Dialog, BOM tree, etc.","Here (Update items dialog in PO), I have to hover the item code in order to check which item it was:

![CleanShot 2025-01-13 at 18 21 34@2x](https://github.com/user-attachments/assets/732ce7cb-52cc-4c7f-b963-11fa5c9377f9)

Other e.g.

![image](https://github.com/user-attachments/assets/b0ad902d-43ae-4f8b-b420-2970be207495)


Child table item is much better since it shows both:

![CleanShot 2025-01-13 at 18 23 30@2x](https://github.com/user-attachments/assets/e5cda763-9bda-49cd-95fe-8cb2d61dbf56)
",NagariaHussain,2025-01-13 12:54:49+00:00,[],2025-02-03 11:23:22+00:00,2025-02-03 11:23:22+00:00,https://github.com/frappe/erpnext/issues/45245,"[('feature-request', None)]",[],
2783709664,issue,closed,completed,[V16] Stock Entry form won't open,"### Information about bug

Steps:

- Just open Stock Entry form, directly or via other forms like Work Order etc. It ends-up with this error message.

![image](https://github.com/user-attachments/assets/5a0277e2-355b-4dee-bcdc-a945e5e4e896)

Frappe team can check the site as it's already hosted on FC

### Module

stock

### Version

V16

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",umairsy,2025-01-13 11:33:08+00:00,['nabinhait'],2025-01-29 00:10:05+00:00,2025-01-14 09:52:54+00:00,https://github.com/frappe/erpnext/issues/45243,"[('bug', None), ('v16', '')]","[{'comment_id': 2589472224, 'issue_id': 2783709664, 'author': 'nabinhait', 'body': 'It was a deploy issue, fixed by upgrading the site.', 'created_at': datetime.datetime(2025, 1, 14, 9, 52, 54, tzinfo=datetime.timezone.utc)}]","nabinhait (Assginee) on (2025-01-14 09:52:54 UTC): It was a deploy issue, fixed by upgrading the site.

"
2783043831,issue,closed,completed,Validate Components and Quantities Per BOM  -Should not validate on Material Transfer for Manufacture,"### Information about bug


Checked ( Validate Components and Quantities Per BOM )

1.Create an Work Order
2. Transfer the Material from Stores to WIP against that work order.  ( We can transfer the partial qty as well or selected  item as well )
3. Validate Components and Quantities Per BOM ( On Manufacture side okay ).

https://github.com/user-attachments/assets/67cdfd93-3df2-49d0-bdfd-2abe9b3ec882




### Module

manufacturing

### Version

ERPNext: v15.48.2 (version-15)

Frappe Framework: v15.51.2 (version-15)

Frappe Whatsapp: v1.0.7 (master)

Hr Reports: v0.0.1 (main)

Frappe HR: v15.37.2 (version-15)

InOutTrack: v0.0.1 (develop)

India Compliance: v15.14.7 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",dineshpanchal93,2025-01-13 05:23:18+00:00,['rohitwaghchaure'],2025-02-07 00:10:17+00:00,2025-01-15 12:30:16+00:00,https://github.com/frappe/erpnext/issues/45232,"[('bug', None)]","[{'comment_id': 2592687171, 'issue_id': 2783043831, 'author': 'rohitwaghchaure', 'body': '@dineshpanchal93 set backflushed based on BOM and enable ""Validate Components and Quantities Per BOM""\n\n<img width=""1165"" alt=""Image"" src=""https://github.com/user-attachments/assets/43c91a12-aa6f-404b-86be-f75c2fde3a81"" />', 'created_at': datetime.datetime(2025, 1, 15, 12, 30, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592868068, 'issue_id': 2783043831, 'author': 'dineshpanchal93', 'body': 'Ok let me try it\n\nOkay need to verify this test case\nWill update you once done', 'created_at': datetime.datetime(2025, 1, 15, 13, 32, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599682568, 'issue_id': 2783043831, 'author': 'toofun666', 'body': '> Ok let me try it\n> \n> Okay need to verify this test case Will update you once done\n\nUpdate?', 'created_at': datetime.datetime(2025, 1, 18, 11, 41, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608997919, 'issue_id': 2783043831, 'author': 'dineshpanchal93', 'body': '@toofun666 - Its not working \n\n@rohitwaghchaure  Setting are same as you mentioned', 'created_at': datetime.datetime(2025, 1, 23, 6, 53, 7, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2025-01-15 12:30:12 UTC): @dineshpanchal93 set backflushed based on BOM and enable ""Validate Components and Quantities Per BOM""

<img width=""1165"" alt=""Image"" src=""https://github.com/user-attachments/assets/43c91a12-aa6f-404b-86be-f75c2fde3a81"" />

dineshpanchal93 (Issue Creator) on (2025-01-15 13:32:07 UTC): Ok let me try it

Okay need to verify this test case
Will update you once done

toofun666 on (2025-01-18 11:41:52 UTC): Update?

dineshpanchal93 (Issue Creator) on (2025-01-23 06:53:07 UTC): @toofun666 - Its not working 

@rohitwaghchaure  Setting are same as you mentioned

"
2782329833,issue,closed,completed,bug(material request): Item Delivery Date on Sales Order is not transferred to Material Request Item Required By date,"### Information about bug

When you create a Material Request directly on the Sales Order via Create → Material Request, Delivery Date on Sales Order Item is not transferred to Material Request Item on field Required By

### Module

stock, selling

### Version

erpnext 15.46.2
frappe 15.50.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",toofun666,2025-01-12 07:27:53+00:00,[],2025-01-27 00:10:36+00:00,2025-01-12 07:29:40+00:00,https://github.com/frappe/erpnext/issues/45230,"[('bug', None)]","[{'comment_id': 2585621851, 'issue_id': 2782329833, 'author': 'toofun666', 'body': 'Closed via https://github.com/frappe/erpnext/pull/45227 Pull Request but could not link from my account somehow.', 'created_at': datetime.datetime(2025, 1, 12, 7, 29, 40, tzinfo=datetime.timezone.utc)}]","toofun666 (Issue Creator) on (2025-01-12 07:29:40 UTC): Closed via https://github.com/frappe/erpnext/pull/45227 Pull Request but could not link from my account somehow.

"
2782324590,issue,open,,NestedSet DocTypes Fail to allow updates on root records,"### Information about bug

When attempting to update a root record for any of the DocTypes that inherit from NestedSet, I noticed the `validate` method enforces that the `parent` field be populated with the reference/name of the root record of that entity if it exists. This prevents one from trying to update one of those records since during validation, the root record will be forced to link to itself, causing an error on a different `validation_loop` method later on.

This is what causes other issues the community have raised in the past such as https://github.com/frappe/erpnext/issues/35290, https://discuss.frappe.io/t/bench-update-11-item-cannot-be-added-to-its-own-descendents/36998/9 and https://github.com/frappe/erpnext/issues/15294

### Module

other

### Version

both 14 and 15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Document Insert Error
Traceback (most recent call last):
  File ""apps/frappe/frappe/desk/page/setup_wizard/setup_wizard.py"", line 429, in make_records
    doc.insert(ignore_permissions=True, ignore_if_duplicate=True)
  File ""apps/frappe/frappe/model/document.py"", line 292, in insert
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1098, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 931, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1283, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1265, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 928, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/setup/doctype/sales_person/sales_person.py"", line 55, in on_update
    super().on_update()
  File ""apps/frappe/frappe/utils/nestedset.py"", line 263, in on_update
    update_nsm(self)
  File ""apps/frappe/frappe/utils/nestedset.py"", line 55, in update_nsm
    update_add_node(doc, parent or """", parent_field)
  File ""apps/frappe/frappe/utils/nestedset.py"", line 77, in update_add_node
    validate_loop(doc.doctype, doc.name, left, right)
  File ""apps/frappe/frappe/utils/nestedset.py"", line 232, in validate_loop
    frappe.throw(_(""Item cannot be added to its own descendents""), NestedSetRecursionError)
  File ""apps/frappe/frappe/__init__.py"", line 548, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 509, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 455, in _raise_exception
    raise raise_exception(msg)
frappe.utils.nestedset.NestedSetRecursionError: Item cannot be added to its own descendents
```
",robertoandrade,2025-01-12 07:10:18+00:00,[],2025-01-12 07:10:18+00:00,,https://github.com/frappe/erpnext/issues/45229,"[('bug', None)]",[],
2782144336,issue,closed,completed,Delivery Date on Sales Order Item is not transferred to Material Request Item as Required By,"### Information about bug

When you create a Material Request directly on the Sales Order via → Create → Material Request, Delivery Date on Sales Order Item is not transferred to Material Request Item Required By.

### Module

stock, selling

### Version

erpnext 15.46.2
frappe 15.50.1

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",toofun666,2025-01-11 20:59:30+00:00,[],2025-01-27 00:10:37+00:00,2025-01-12 07:24:59+00:00,https://github.com/frappe/erpnext/issues/45225,"[('bug', None)]","[{'comment_id': 2585407160, 'issue_id': 2782144336, 'author': 'toofun666', 'body': 'line #875 on sales_order.py needs to be changed:\r\n`""field_map"": {""name"": ""sales_order_item"", ""parent"": ""sales_order""},`\r\nneeds to be changed to\r\n`""field_map"": {""name"": ""sales_order_item"", ""parent"": ""sales_order"", ""delivery_date"": ""required_by""},`', 'created_at': datetime.datetime(2025, 1, 11, 21, 2, 20, tzinfo=datetime.timezone.utc)}]","toofun666 (Issue Creator) on (2025-01-11 21:02:20 UTC): line #875 on sales_order.py needs to be changed:
`""field_map"": {""name"": ""sales_order_item"", ""parent"": ""sales_order""},`
needs to be changed to
`""field_map"": {""name"": ""sales_order_item"", ""parent"": ""sales_order"", ""delivery_date"": ""required_by""},`

"
2781768255,issue,open,,"Display Foreign Currency Accounts in Both Local and Foreign Currency (DR, CR, and Balance)","**Current Issue**
ERPNext currently displays account balances for foreign currency accounts either in the local currency or the foreign currency, depending on the configuration. However, many businesses require both local and foreign currency amounts (Debit, Credit, and Balance) to be visible side by side for accurate reconciliation and reporting, especially in multi-currency environments.

**Proposed Solution**
Enhance ERPNext's reporting and ledger views to display foreign currency accounts with dual currency columns, showing both:

Local Currency (converted using the exchange rate).
Foreign Currency (as entered).
This would apply to:

General Ledger
Account Ledger
Trial Balance
Financial Reports

**Key Features**
Dual Currency Display:

Add columns in reports to display DR, CR, and Balance in both Local and Foreign currencies.
Exchange Rate Integration:

Display the exchange rate used for the conversion to ensure transparency.
User Configuration:

Allow users to toggle the dual currency display in report settings.
Export Compatibility:

Ensure the additional columns are included in exported reports (PDF, Excel, etc.). 

**Use Case Examples**

Multinational Business:

A company dealing with USD and EUR accounts in an EGP-based ledger can track transactions and balances in both the foreign and local currencies simultaneously.

Auditors and Compliance:

Auditors need clear visibility of how foreign currency transactions impact local currency balances, along with the applied exchange rate.

Bank Reconciliation:

Comparing foreign currency bank statements with ERPNext records becomes easier when both currencies are displayed.
",Mina-Geez,2025-01-11 11:15:05+00:00,[],2025-01-11 11:15:05+00:00,,https://github.com/frappe/erpnext/issues/45223,"[('feature-request', None)]",[],
2781765837,issue,open,,Allow users to Add More Party Types Across ERPNext ,"**Current Issue**
ERPNext currently supports a limited set of party types, such as customers, suppliers, and employees. However, organizations like NGOs, charities, or complex businesses often deal with other types of parties, such as donors, beneficiaries, partners, or volunteers. These party types are not natively supported, leading to workarounds that complicate workflows.

**Proposed Solution**
Allow users to define and manage custom party types within ERPNext. These user-defined party types would be seamlessly integrated into relevant modules (e.g., Sales, Purchases, Accounting, HR) and usable in transactions, reports, and workflows.

**Key Features**
Party Type Configuration:

Add a configuration option in the Setup module for managing party types.
Users can create, edit, and delete custom party types (e.g., Donors, Volunteers).
Integration Across Modules:

Custom party types should work like standard party types in transactions, such as invoices, payments, and journal entries.
They should also be linkable in reports and filters.
Role-Based Permissions:

Enable users to configure role-based permissions for new party types.
Dynamic Party Master:

Extend the Party Master to dynamically support both predefined and user-defined party types.

**Use Case Examples**

NGO:

Add Donors to track contributions in donations.
Add Beneficiaries to manage aid distribution.

Partnerships:

Add Partners to allocate revenues and expenses.

Event Management:

Add Attendees or Vendors for better organization of events.
",Mina-Geez,2025-01-11 11:08:17+00:00,[],2025-01-12 07:52:38+00:00,,https://github.com/frappe/erpnext/issues/45222,"[('feature-request', None)]","[{'comment_id': 2585627948, 'issue_id': 2781765837, 'author': 'toofun666', 'body': 'Did you check the non-profit package yet?', 'created_at': datetime.datetime(2025, 1, 12, 7, 52, 36, tzinfo=datetime.timezone.utc)}]","toofun666 on (2025-01-12 07:52:36 UTC): Did you check the non-profit package yet?

"
2781763405,issue,open,,"Make me choose between a specific Customer or Supplier, or make it on Customer and Supplier Groups in Party-Specific Item Rules","**Current Issue**
The Party-Specific Item feature in ERPNext only applies to individual customers or suppliers. There’s no option to set rules at the group level (e.g., for ""Retail Customers"" or ""Local Suppliers"") or choose between individual and group application.

**Proposed Solution**
Enhance Party-Specific Item rules to allow users to choose between:

A specific customer or supplier.
A customer or supplier group.
This flexibility would make the feature more versatile for businesses managing groups of customers or suppliers with similar rules.

**Expected Benefits**
Flexibility: Users can set rules for either individual customers/suppliers or entire groups.
Efficiency: Saves time by avoiding repetitive setups for multiple members of a group.
Accuracy: Reduces manual errors by centralizing group rule management.

**How It Could Work**
Add a ""Party Type"" dropdown in the Party-Specific Item setup with these options:

Customer
Customer Group
Supplier
Supplier Group
If a group is selected, the rule automatically applies to",Mina-Geez,2025-01-11 11:01:34+00:00,[],2025-01-18 12:18:26+00:00,,https://github.com/frappe/erpnext/issues/45221,"[('feature-request', None)]","[{'comment_id': 2585628104, 'issue_id': 2781763405, 'author': 'toofun666', 'body': 'Did you try Dynamic Links yet?', 'created_at': datetime.datetime(2025, 1, 12, 7, 53, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2585671753, 'issue_id': 2781763405, 'author': 'Mina-Geez', 'body': '@toofun666  can you elaborate??', 'created_at': datetime.datetime(2025, 1, 12, 10, 12, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599694647, 'issue_id': 2781763405, 'author': 'SvbZ3r0', 'body': ""Duplicate of #38757\n\nI don't think this is much of a priority for the team since its been open for a while now. If you've got the time, a PR will be helpful."", 'created_at': datetime.datetime(2025, 1, 18, 12, 18, 25, tzinfo=datetime.timezone.utc)}]","toofun666 on (2025-01-12 07:53:14 UTC): Did you try Dynamic Links yet?

Mina-Geez (Issue Creator) on (2025-01-12 10:12:21 UTC): @toofun666  can you elaborate??

SvbZ3r0 on (2025-01-18 12:18:25 UTC): Duplicate of #38757

I don't think this is much of a priority for the team since its been open for a while now. If you've got the time, a PR will be helpful.

"
2781723856,issue,open,,Deleted doc type (Payment Gateway) is still referenced,"### Information about bug

![image](https://github.com/user-attachments/assets/2f438737-6858-414d-bccc-0f9af1906df4)
I observed that DocType : Payment Gateway is deleted [here](https://github.com/frappe/frappe/blob/develop/frappe/patches/v14_0/delete_payment_gateways.py)


but it is still referenced in [Payment Gateway Account](https://github.com/frappe/erpnext/tree/develop/erpnext/accounts/doctype/payment_gateway_account)
https://github.com/frappe/erpnext/blob/c6c7d7832ac39cef08add42ab6ba151c66449d2d/erpnext/accounts/doctype/payment_gateway_account/payment_gateway_account.json#L19-L26

### Module

accounts

### Version

ERPNext: v15.48.2

Frappe Framework: v15.51.2

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",saivineeth100,2025-01-11 09:24:03+00:00,['diptanilsaha'],2025-01-15 10:26:23+00:00,,https://github.com/frappe/erpnext/issues/45220,"[('bug', None)]","[{'comment_id': 2585330392, 'issue_id': 2781723856, 'author': 'maniamartial', 'body': 'Did you install the payments app and uninstall by any chance?', 'created_at': datetime.datetime(2025, 1, 11, 16, 45, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2585583246, 'issue_id': 2781723856, 'author': 'saivineeth100', 'body': ""its fresh install,\r\njust try running tests in ERP Next, this error is coming\r\n\r\nIt's not specific to any installation as it is there in main branch also\r\n\r\nhttps://github.com/frappe/erpnext/blob/c6c7d7832ac39cef08add42ab6ba151c66449d2d/erpnext/accounts/doctype/payment_gateway_account/payment_gateway_account.json#L19-L26"", 'created_at': datetime.datetime(2025, 1, 12, 4, 35, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2585610504, 'issue_id': 2781723856, 'author': 'maniamartial', 'body': 'Just install payment app and it will solve the issue. I think maybe we need to push the payment gateway account to payments app to avoid this or vice vice versa.', 'created_at': datetime.datetime(2025, 1, 12, 6, 41, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2585611992, 'issue_id': 2781723856, 'author': 'saivineeth100', 'body': ""I know that, by default ERP next is not dependent on payments app,\r\nso, I believe it's not ideal to keep that reference"", 'created_at': datetime.datetime(2025, 1, 12, 6, 47, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587028847, 'issue_id': 2781723856, 'author': 'maniamartial', 'body': '@nabinhait Can we push this to Payment Gateway Account to payments, or vice-versa we bring the Payment Gateway in ERPNext. \r\nOr we Payment Gateway reference as a data field.', 'created_at': datetime.datetime(2025, 1, 13, 12, 53, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592251199, 'issue_id': 2781723856, 'author': 'nabinhait', 'body': 'Thanks for reporting the issue. We will move payment_gateway field to the Payments app and create those field as custom field on installation of payments app.', 'created_at': datetime.datetime(2025, 1, 15, 10, 26, 4, tzinfo=datetime.timezone.utc)}]","maniamartial on (2025-01-11 16:45:19 UTC): Did you install the payments app and uninstall by any chance?

saivineeth100 (Issue Creator) on (2025-01-12 04:35:35 UTC): its fresh install,
just try running tests in ERP Next, this error is coming

It's not specific to any installation as it is there in main branch also

https://github.com/frappe/erpnext/blob/c6c7d7832ac39cef08add42ab6ba151c66449d2d/erpnext/accounts/doctype/payment_gateway_account/payment_gateway_account.json#L19-L26

maniamartial on (2025-01-12 06:41:48 UTC): Just install payment app and it will solve the issue. I think maybe we need to push the payment gateway account to payments app to avoid this or vice vice versa.

saivineeth100 (Issue Creator) on (2025-01-12 06:47:36 UTC): I know that, by default ERP next is not dependent on payments app,
so, I believe it's not ideal to keep that reference

maniamartial on (2025-01-13 12:53:35 UTC): @nabinhait Can we push this to Payment Gateway Account to payments, or vice-versa we bring the Payment Gateway in ERPNext. 
Or we Payment Gateway reference as a data field.

nabinhait on (2025-01-15 10:26:04 UTC): Thanks for reporting the issue. We will move payment_gateway field to the Payments app and create those field as custom field on installation of payments app.

"
2781631394,issue,closed,completed,BOM Creaator - Does not allow to create Sub-Asseblies of Sub Assemblies,"### Information about bug

![Screenshot 2025-01-11 at 10 59 27 AM](https://github.com/user-attachments/assets/ccf9a48c-e1a1-480f-94bb-ce3c2486518f)

https://github.com/user-attachments/assets/33e11216-65a2-40fc-896e-d24915dda43b




### Module

manufacturing

### Version

ERPNext: v15.48.2 (version-15)

Frappe Framework: v15.51.2 (version-15)

Frappe Whatsapp: v1.0.7 (master)

Hr Reports: v0.0.1 (main)

Frappe HR: v15.37.2 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
request.js:473 Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1725, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 463, in add_sub_assembly
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 342, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 378, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1103, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 974, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1334, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1316, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 971, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 76, in validate
    self.validate_items()
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 84, in validate_items
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 602, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 567, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 518, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: At row 17: set Parent Row No for item WIP-MCP-ARD106501OR
```
",dineshpanchal93,2025-01-11 05:34:14+00:00,['rohitwaghchaure'],2025-01-31 00:10:13+00:00,2025-01-16 09:27:57+00:00,https://github.com/frappe/erpnext/issues/45219,"[('bug', None)]",[],
2780014837,issue,open,,change Timesheet order in get Items From,"One small improvement. In the ""Get Items From"", can we put Timesheet below Delivery Note? This is simply because Timesheet's usage will be much less Sales Order and Delivery Note.

![image](https://github.com/user-attachments/assets/b00a9615-e310-414a-aaa4-bbead2997431)

_Originally posted by @umairsy in https://github.com/frappe/erpnext/issues/45130#issuecomment-2582524311_
            ",iamejaaz,2025-01-10 11:57:20+00:00,['iamejaaz'],2025-01-16 05:41:46+00:00,,https://github.com/frappe/erpnext/issues/45213,"[('Enhancement', '')]",[],
