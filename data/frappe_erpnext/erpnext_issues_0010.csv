id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2280405717,issue,closed,completed,"order by ""tabItem Barcode"".""modified"" DESC","### Information about bug

### App Versions
```
{
	""erpnext"": ""15.21.2"",
	""frappe"": ""15.24.1""
}
```
### Route
```
Form/BOM/new-bom-qdxwgdfqwd
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1761, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/search.py"", line 47, in search_link
    results = search_widget(
              ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/search.py"", line 94, in search_widget
    return frappe.call(
           ^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1761, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 2516, in wrapper
    return fn(**kwargs)
           ^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom/bom.py"", line 1410, in item_query
    barcodes = frappe.get_all(
               ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 2050, in get_all
    return get_list(doctype, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 2025, in get_list
    return frappe.model.db_query.DatabaseQuery(doctype).execute(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/db_query.py"", line 191, in execute
    result = self.build_and_run()
             ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/db_query.py"", line 232, in build_and_run
    return frappe.db.sql(
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/database/postgres/database.py"", line 213, in sql
    return super().sql(modify_query(query), modify_values(values), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
psycopg2.errors.InvalidColumnReference: for SELECT DISTINCT, ORDER BY expressions must appear in select list
LINE 5:     order by ""tabItem Barcode"".""modified"" DESC
                     ^


```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""txt"": ""test"",
		""doctype"": ""Item"",
		""ignore_user_permissions"": 0,
		""reference_doctype"": ""BOM"",
		""page_length"": 10,
		""query"": ""erpnext.manufacturing.doctype.bom.bom.item_query"",
		""filters"": ""{\""is_stock_item\"":1}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.search.search_link"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": """",
	""exc_type"": ""InvalidColumnReference"",
	""_exc_source"": ""erpnext (app)"",
	""_debug_messages"": ""[\""Error in query:\\nfor SELECT DISTINCT, ORDER BY expressions must appear in select list\\nLINE 5:     order by \\\""tabItem Barcode\\\"".\\\""modified\\\"" DESC\\n                     ^\\n\""]""
}
```

### Module

CRM

### Version

{
	""erpnext"": ""15.21.2"",
	""frappe"": ""15.24.1""
}

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
11
```
",zhengdechang,2024-05-06 09:10:42+00:00,[],2024-06-18 00:09:01+00:00,2024-06-03 13:25:06+00:00,https://github.com/frappe/erpnext/issues/41341,"[('bug', None)]","[{'comment_id': 2145200168, 'issue_id': 2280405717, 'author': 'nabinhait', 'body': ""Can't replicate"", 'created_at': datetime.datetime(2024, 6, 3, 13, 25, 6, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-03 13:25:06 UTC): Can't replicate

"
2279922738,issue,closed,completed,Debit and Credit not equal for Sales Invoice,"### Information about bug

I am having issue to submit sales invoice #SINV-2405-02-1, when I have additional discount added it gives me an error.

Debit and Credit not equal for Sales Invoice #SINV-2405-02-1. Difference is XXXXX

### Module

selling

### Version

ERPNext: v13.55.2 (HEAD)
Frappe Framework: v13.58.21 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Debit and Credit not equal for Sales Invoice #SINV-2405-02-1. Difference is XXXXX
```
",chanyork,2024-05-06 02:58:09+00:00,[],2024-05-21 00:08:26+00:00,2024-05-06 07:26:46+00:00,https://github.com/frappe/erpnext/issues/41330,"[('bug', None)]","[{'comment_id': 2095351362, 'issue_id': 2279922738, 'author': 'Nihantra-Patel', 'body': '**We no longer provide support for version 13 or older.**\r\n\r\nKindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nEverything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 5, 6, 7, 26, 46, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-06 07:26:46 UTC): **We no longer provide support for version 13 or older.**

Kindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.

Everything is working fine. No problems were encountered in the latest versions 14 and 15.

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

"
2279586225,issue,open,,POS CLOSING ENTRY: Can refer row only if the charge type is 'On Previous Row Amount' or 'Previous Row Total',"### Information about bug

This error appears when you try submitting the POS Closing. Even tho the charge type is on 'Previous Row Total' with reference set to 1, it does still give this error. The error only stops when there is no charge type field which is 'On Previous Row Amount' or 'Previous Row Total' is selected within the rows in the Sales and Taxes Template doctype. but once you try and added such a charge type and input a reference number then when submitting in the POS Closing Entry, you end up with that error.

This error is visible in version 14 and 15 and it prevents me from submitting pos closing entry in order to create sales invoices.

![Screenshot 2024-05-05 152730](https://github.com/frappe/erpnext/assets/54511160/cf0e539c-7d69-45b4-81a7-b3a712804473)
![Screenshot 2024-05-05 152752](https://github.com/frappe/erpnext/assets/54511160/48dc8572-c4bc-4c9e-9854-bf1845b2aa0f)


### Module

selling

### Version

ERPNext: v14.35.1 (version-14)

Frappe Framework: v14.45.0 (version-14)

ERPNext: v15.21.2 (HEAD)

Frappe Framework: v15.25.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Can refer row only if the charge type is 'On Previous Row Amount' or 'Previous Row Total'
```
",itzmeeugene,2024-05-05 15:28:35+00:00,[],2024-05-05 15:28:35+00:00,,https://github.com/frappe/erpnext/issues/41329,"[('bug', None)]",[],
2279520808,issue,closed,completed,Missing the file of employee_dashboard.py,"### Information about bug

erpnext/setup/doctype/employee
this path is missing the employee_dashbaord.py file to custom the links (connections)

### Module

other

### Version

frappe   15.25.0 version-15
erpnext  15.22.1 version-15
hrms     15.20.2 version-15
my_app   0.0.1   develop
payments 0.0.1   develop

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
https://discuss.frappe.io/t/i-could-not-find-employee-dashboard-py-file/122460?u=manal_erpnext
```
",manalErpnext,2024-05-05 12:57:40+00:00,[],2024-05-21 00:08:24+00:00,2024-05-06 07:30:27+00:00,https://github.com/frappe/erpnext/issues/41328,"[('bug', None)]","[{'comment_id': 2095356696, 'issue_id': 2279520808, 'author': 'Nihantra-Patel', 'body': 'Please check the post.\r\n\r\nhttps://discuss.frappe.io/t/i-could-not-find-employee-dashboard-py-file/122460/2?u=ncp', 'created_at': datetime.datetime(2024, 5, 6, 7, 30, 27, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-06 07:30:27 UTC): Please check the post.

https://discuss.frappe.io/t/i-could-not-find-employee-dashboard-py-file/122460/2?u=ncp

"
2279499267,issue,closed,completed,Email not sent to xxx@xxxx.com (unsubscribed / disabled),"### Information about bug

I have selected to send me a copy of the email send out in Sales Invoice.  However, when clicking send it give me an error above.

### Module

selling

### Version

ERPNEXT Version 13.55.2
FRAPPE 13.58..21

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Email not sent to xxx@xxxx.com (unsubscribed / disabled)
```
",chanyork,2024-05-05 12:09:04+00:00,[],2024-05-21 00:08:25+00:00,2024-05-06 07:29:28+00:00,https://github.com/frappe/erpnext/issues/41327,"[('bug', None)]","[{'comment_id': 2095355345, 'issue_id': 2279499267, 'author': 'Nihantra-Patel', 'body': 'We tested in v14 and v15, Everything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\n**We no longer provide support for version 13 or older.**\r\n\r\nKindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 5, 6, 7, 29, 28, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-06 07:29:28 UTC): We tested in v14 and v15, Everything is working fine. No problems were encountered in the latest versions 14 and 15.

**We no longer provide support for version 13 or older.**

Kindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

"
2280130846,issue,closed,completed,Creating purchase order from Material Request adds an additional row in the items table,"**Steps to produce**

1. Create Material Request with one item.
2. Submit Material Request
3. Create a Purchase Order using Create button at the top
4. Now in the purchase order items table, it adds item two times, one with the original quantity as in the Material Request and another with quantity 1.
5. Even if you delete the second one, it still adds it as soon as you save or select a supplier

[screen-capture-purchase-order.webm](https://github.com/frappe/frappe/assets/64835183/1d1e9f74-0314-4d07-8f0a-1d148e9291c7)

**ERPNext version**
erpnext 15.15.0
frappe 15.16.1
grsforging 0.0.1
hrms 15.12.0
india_compliance 15.5.5
payments 0.0.1
",kiranshegde,2024-05-04 09:02:42+00:00,[],2024-05-21 00:08:27+00:00,2024-05-06 06:34:19+00:00,https://github.com/frappe/erpnext/issues/41333,"[('bug', None)]","[{'comment_id': 2095284318, 'issue_id': 2280130846, 'author': 'Nihantra-Patel', 'body': 'Hi @kiranshegde,\r\n\r\nEverything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/5adc6ba5-40c6-41b6-8012-b2673f2e7f80\r\n\r\nIf any custom code applied then comment out it and reload and check it.', 'created_at': datetime.datetime(2024, 5, 6, 6, 34, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-06 06:34:19 UTC): Hi @kiranshegde,

Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/5adc6ba5-40c6-41b6-8012-b2673f2e7f80

If any custom code applied then comment out it and reload and check it.

"
2278698204,issue,closed,completed,Lead Qualification Status does not display as in Form,"### Information about bug

Upon selecting any Lead Qualification Status in the Form, the information display in Lead List unchanged
![image](https://github.com/frappe/erpnext/assets/168114061/f1172a60-bc97-4794-8be4-c4c8881ea246)


### Module

CRM

### Version

ERPNext: v15.21.1 (version-15)

Frappe Framework: v15.24.1 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",nguyenth18,2024-05-04 03:21:48+00:00,[],2024-05-21 00:08:23+00:00,2024-05-06 09:38:27+00:00,https://github.com/frappe/erpnext/issues/41322,"[('bug', None)]","[{'comment_id': 2095569903, 'issue_id': 2278698204, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/eff1f179-456a-44af-87ea-3ba5f0448a23', 'created_at': datetime.datetime(2024, 5, 6, 9, 38, 27, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-06 09:38:27 UTC): Everything is working fine. No problems were encountered in the latest versions 14 and 15.



https://github.com/frappe/erpnext/assets/141945075/eff1f179-456a-44af-87ea-3ba5f0448a23

"
2277651368,issue,closed,completed,fix: SO ordered qty on PO item removal,"### Information about bug

Hello,
this is the same like this: https://github.com/frappe/erpnext/pull/38378.
It is working in v14 but it is not implemented in v15.

Order Qty in Sales Order Item is not updated if item is deleted in linked PO.

Is here any reason for no implementation, please?

Thank you.
Jiri Sir

### Module

buying

### Version

ERPNext: v15.20.3 (HEAD)

Frappe Framework: v15.23.0 (HEAD)

Frappe HR: v15.17.0 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",tonspar,2024-05-03 13:09:03+00:00,[],2024-05-24 00:08:51+00:00,2024-05-07 03:38:25+00:00,https://github.com/frappe/erpnext/issues/41319,"[('bug', None), ('released', None)]","[{'comment_id': 2095347289, 'issue_id': 2277651368, 'author': 'tonspar', 'body': 'Hello,\r\nexample:\r\n\r\n1. Make the Sales Order (SO) with two items, each of 1qty and submitted it.\r\n2. Create Purchase Order (PO) with these items via button ""Create"" -> ""Purchase Order"" in SO button section.\r\n3. Submit this new PO.\r\n4. Now we can check items in SO, the field ""ordered_qty"" = 1 for both items => OK.\r\n5. Let\'s update the PO: remove first item and update it.\r\n6. Now we should find in SO in first item ""ordered_qty"" = 0, but here is still 1 and it is an issue. It blocked you for new PO with first item via ""Create"" -> ""Purchase Order"". Here is this warning: _Purchase Order already created for all Sales Order items_ but it is not true.\r\n\r\nSome pictures:\r\n1. SO items:\r\n![image](https://github.com/frappe/erpnext/assets/121026420/40c125a3-37bf-4720-8b8d-d4389bfb35e7)\r\n2. PO items after update:\r\n![image](https://github.com/frappe/erpnext/assets/121026420/1f4c6e54-a6ff-46c8-bdb1-2e96a2563faf)\r\n\r\nIn mentioned PR (https://github.com/frappe/erpnext/pull/38378) it is resolved for v14, but it is not backported to v15.\r\n\r\nThank you.\r\n\r\nJiri Sir', 'created_at': datetime.datetime(2024, 5, 6, 7, 23, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2097385829, 'issue_id': 2277651368, 'author': 'Nihantra-Patel', 'body': 'Hi @tonspar,\r\n\r\nIssue has been fixed, the next updates will solve your issue.', 'created_at': datetime.datetime(2024, 5, 7, 3, 38, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2097553519, 'issue_id': 2277651368, 'author': 'tonspar', 'body': 'Hi @Nihantra-Patel,\r\nperfect, thank you very much.\r\nJiri Sir', 'created_at': datetime.datetime(2024, 5, 7, 6, 36, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2101970426, 'issue_id': 2277651368, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.23.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.23.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 9, 5, 33, 15, tzinfo=datetime.timezone.utc)}]","tonspar (Issue Creator) on (2024-05-06 07:23:54 UTC): Hello,
example:

1. Make the Sales Order (SO) with two items, each of 1qty and submitted it.
2. Create Purchase Order (PO) with these items via button ""Create"" -> ""Purchase Order"" in SO button section.
3. Submit this new PO.
4. Now we can check items in SO, the field ""ordered_qty"" = 1 for both items => OK.
5. Let's update the PO: remove first item and update it.
6. Now we should find in SO in first item ""ordered_qty"" = 0, but here is still 1 and it is an issue. It blocked you for new PO with first item via ""Create"" -> ""Purchase Order"". Here is this warning: _Purchase Order already created for all Sales Order items_ but it is not true.

Some pictures:
1. SO items:
![image](https://github.com/frappe/erpnext/assets/121026420/40c125a3-37bf-4720-8b8d-d4389bfb35e7)
2. PO items after update:
![image](https://github.com/frappe/erpnext/assets/121026420/1f4c6e54-a6ff-46c8-bdb1-2e96a2563faf)

In mentioned PR (https://github.com/frappe/erpnext/pull/38378) it is resolved for v14, but it is not backported to v15.

Thank you.

Jiri Sir

Nihantra-Patel on (2024-05-07 03:38:25 UTC): Hi @tonspar,

Issue has been fixed, the next updates will solve your issue.

tonspar (Issue Creator) on (2024-05-07 06:36:53 UTC): Hi @Nihantra-Patel,
perfect, thank you very much.
Jiri Sir

frappe-pr-bot on (2024-05-09 05:33:15 UTC): :tada: This issue has been resolved in version 15.23.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.23.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2277178549,issue,closed,completed,Previous Financial Year is not closed,"### Information about bug

Previous Financial Year is not closed.

Same issue in another client site.

Both site are in FC.

![Screenshot 2024-05-03 at 1 50 39â€¯PM](https://github.com/frappe/erpnext/assets/973676/e5537ab5-e719-473c-8a47-9895263d133b)


### Module

accounts

### Version

Both are latest version.

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",mohsinalimat,2024-05-03 08:23:02+00:00,[],2024-06-18 00:09:00+00:00,2024-06-03 11:37:27+00:00,https://github.com/frappe/erpnext/issues/41316,"[('bug', None)]","[{'comment_id': 2144972237, 'issue_id': 2277178549, 'author': 'deepeshgarg007', 'body': '@mohsinalimat This is not a bug, this is shown to the user to indicate and nudge that the previous financial year is not closed and you have to post a period closing entry for the same.', 'created_at': datetime.datetime(2024, 6, 3, 11, 37, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2145518245, 'issue_id': 2277178549, 'author': 'mohsinalimat', 'body': '@deepeshgarg007 I have to close all my COA accounts in period closing voucher?', 'created_at': datetime.datetime(2024, 6, 3, 15, 30, 43, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 on (2024-06-03 11:37:27 UTC): @mohsinalimat This is not a bug, this is shown to the user to indicate and nudge that the previous financial year is not closed and you have to post a period closing entry for the same.

mohsinalimat (Issue Creator) on (2024-06-03 15:30:43 UTC): @deepeshgarg007 I have to close all my COA accounts in period closing voucher?

"
2276266918,issue,closed,completed,Purchase Order Item filter on Supplier not working,"### Information about bug

In Purchase Order, after selecting a Supplier, when clicking in the Purchase Order Item table's Item Code cell, the list of items appear in a drop down, but the items listed are the same as if no supplier was selected earlier.

Another user has reported this in https://discuss.frappe.io/t/purchase-order-supplier-not-filtering-on-item-code/102758 and I have reproduced the issue.

### Module

stock, buying

### Version

ERPNext: v15.22.0
Frappe Framework: v15.25.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
When clicking in the Item Code cell (no errors):
frappe_docker-frontend-1      | 172.19.0.1 - - [02/May/2024:18:56:08 +0000] ""POST /api/method/frappe.desk.search.search_link HTTP/1.1"" 200 468 ""http://localhost:8080/app/purchase-order/new-purchase-order-pfulrarcnz"" ""Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36""
```
",geraldleungontario,2024-05-02 18:59:15+00:00,[],2024-05-21 00:08:22+00:00,2024-05-06 09:53:01+00:00,https://github.com/frappe/erpnext/issues/41306,"[('bug', None)]","[{'comment_id': 2092595580, 'issue_id': 2276266918, 'author': 'kunhimohamed', 'body': 'Did you try this https://docs.erpnext.com/docs/v13/user/manual/en/party_specific_item', 'created_at': datetime.datetime(2024, 5, 3, 9, 0, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2093278348, 'issue_id': 2276266918, 'author': 'geraldleungontario', 'body': ""> Did you try this https://docs.erpnext.com/docs/v13/user/manual/en/party_specific_item\r\n\r\nThis works in certain scenarios, but fails in others..\r\n\r\nThe closest matching behaviour appears to be this:\r\nParty Type: Supplier\r\nParty Name: <supplier name>\r\nRestrict Items Based On: Item Group\r\nBased On Value: <item group of the item under that supplier>\r\n\r\nThe scenario that causes this to fail is this:\r\nSupplier, Item Group, Item\r\nSanitizing Company, Sanitizing Stuff, Hand Sanitizer\r\nCleaning Company, Sanitizing Stuff, 99% Alcohol\r\n\r\nIn this scenario, I would set up 2 Party Specific Item. When creating the Purchase Order, I would put Sanitizing Company as the Supplier, then the Purchase Order Item's Item Code cell would list both of these items from the 2 suppliers as possible choices because the filter is based on Item Group."", 'created_at': datetime.datetime(2024, 5, 3, 15, 49, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2094060688, 'issue_id': 2276266918, 'author': 'kunhimohamed', 'body': 'you can manage using an item group.', 'created_at': datetime.datetime(2024, 5, 4, 7, 17, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2095596943, 'issue_id': 2276266918, 'author': 'Nihantra-Patel', 'body': 'You can apply only one threshold at a time if you set up an item for one supplier, then you cannot set up an item group with the same supplier, and If you add, then the item will appear, which is common from both conditions.\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/a2681518-25f8-4677-818b-1bb53cfe0771', 'created_at': datetime.datetime(2024, 5, 6, 9, 53, 1, tzinfo=datetime.timezone.utc)}]","kunhimohamed on (2024-05-03 09:00:01 UTC): Did you try this https://docs.erpnext.com/docs/v13/user/manual/en/party_specific_item

geraldleungontario (Issue Creator) on (2024-05-03 15:49:10 UTC): This works in certain scenarios, but fails in others..

The closest matching behaviour appears to be this:
Party Type: Supplier
Party Name: <supplier name>
Restrict Items Based On: Item Group
Based On Value: <item group of the item under that supplier>

The scenario that causes this to fail is this:
Supplier, Item Group, Item
Sanitizing Company, Sanitizing Stuff, Hand Sanitizer
Cleaning Company, Sanitizing Stuff, 99% Alcohol

In this scenario, I would set up 2 Party Specific Item. When creating the Purchase Order, I would put Sanitizing Company as the Supplier, then the Purchase Order Item's Item Code cell would list both of these items from the 2 suppliers as possible choices because the filter is based on Item Group.

kunhimohamed on (2024-05-04 07:17:38 UTC): you can manage using an item group.

Nihantra-Patel on (2024-05-06 09:53:01 UTC): You can apply only one threshold at a time if you set up an item for one supplier, then you cannot set up an item group with the same supplier, and If you add, then the item will appear, which is common from both conditions.

https://github.com/frappe/erpnext/assets/141945075/a2681518-25f8-4677-818b-1bb53cfe0771

"
2275753104,issue,closed,completed,Gross Profit Report: Item bundle valuation calculation,"### Information about bug

![CleanShot 2024-05-02 at 20 20 58@2x](https://github.com/frappe/erpnext/assets/34810212/436b7da7-11d6-4816-a774-1ea76548d7fd)

The product bundle valuation is calculated without considering the `qty` of the child item in the bundle.

In the above, the valuation of dining table should be: `4*3,000` + `1*500` = `12,500` and not `3,500`

### Module

accounts, stock

### Version

15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",NagariaHussain,2024-05-02 14:54:53+00:00,[],2025-01-28 00:10:07+00:00,2025-01-13 11:15:09+00:00,https://github.com/frappe/erpnext/issues/41302,"[('bug', None)]",[],
2275715651,issue,closed,completed,Template item should not be allowed in product bundle child table,"### Information about bug

![CleanShot 2024-05-02 at 20 08 46@2x](https://github.com/frappe/erpnext/assets/34810212/31e0da95-c562-47e6-a00a-486153f711bb)


### Module

stock

### Version

15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",NagariaHussain,2024-05-02 14:40:03+00:00,[],2024-06-13 00:09:03+00:00,2024-05-29 05:00:22+00:00,https://github.com/frappe/erpnext/issues/41301,"[('bug', None), ('released', None)]","[{'comment_id': 2092487184, 'issue_id': 2275715651, 'author': 'Nihantra-Patel', 'body': ""In develop version it will be solved easily by using filter but in version 15 we have to add code like frm.set_query for it. Let's do PR for it if you say yes."", 'created_at': datetime.datetime(2024, 5, 3, 7, 49, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2136777064, 'issue_id': 2275715651, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.26.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.26.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 29, 7, 55, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-03 07:49:36 UTC): In develop version it will be solved easily by using filter but in version 15 we have to add code like frm.set_query for it. Let's do PR for it if you say yes.

frappe-pr-bot on (2024-05-29 07:55:19 UTC): :tada: This issue has been resolved in version 15.26.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.26.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2275211571,issue,open,,Option to create Material Request for Subcontracting,"Currently, on the submission of a Production Plan with raw materials with Manufacturing Type: Subcontracting, a Purchase Order gets created.
The system should be configured to create a Material Request (MR) for subcontracting, enabling the relevant team to issue Subcontracting Purchase Orders (POs) as and when required.

Reasons:

1. Subcontracting items will be sent to various vendors, not just one. Even if items are sent to the same vendor, they will not be sent on the same day.
2. Currently, only one PO is created at a time.
3. The automatic creation of POs does not allow the selection of the series for the transaction number; it defaults to the standard PO series.
4. Customers need to distinguish subcontracting transactions as Work Orders.

The current process is confusing because, in various companies, there are multiple teams involved.",arushij26,2024-05-02 10:47:30+00:00,[],2024-05-02 10:47:30+00:00,,https://github.com/frappe/erpnext/issues/41297,"[('feature-request', None)]",[],
2275195400,issue,open,,Unable to submit : Tax issue for Tax included in basic rate on Sales invoices with discount,"### Information about bug

Steps :

Create a sales invoice with item
![image](https://github.com/frappe/erpnext/assets/112148467/733d250f-6d37-49cc-b9cb-3911eb98d5ef)

Add taxes 

![image](https://github.com/frappe/erpnext/assets/112148467/5fd8c07f-237f-4edb-8dc1-dedd90547991)

and check include tax in basic rate

![image](https://github.com/frappe/erpnext/assets/112148467/80212097-c7e6-418b-bd93-b5d76aee633a)

add additional discount on grand total

![image](https://github.com/frappe/erpnext/assets/112148467/caab8c63-933b-402e-a628-fc99405cb225)

save and submit

it throws following error

![image](https://github.com/frappe/erpnext/assets/112148467/69af635e-adf3-4472-bb45-fa3829b85270)



### Module

accounts, stock, selling

### Version

ERPNext: v15.19.1 (HEAD)

Frappe Framework: v15.20.0 (HEAD)

Frappe HR: v15.16.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1718, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 458, in on_submit
    self.make_gl_entries()
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 1167, in make_gl_entries
    make_gl_entries(
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 47, in make_gl_entries
    save_entries(gl_map, adv_adj, update_outstanding, from_repost)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 360, in save_entries
    process_debit_credit_difference(gl_map)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 433, in process_debit_credit_difference
    raise_debit_credit_not_equal_error(debit_credit_diff, voucher_type, voucher_no)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 470, in raise_debit_credit_not_equal_error
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 602, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 567, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 518, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Debit and Credit not equal for Sales Invoice #SI0524-015. Difference is -97.99.
request.js:473:14
```
",maveezmh,2024-05-02 10:42:07+00:00,[],2024-06-05 10:50:03+00:00,,https://github.com/frappe/erpnext/issues/41296,"[('bug', None)]","[{'comment_id': 2092350842, 'issue_id': 2275195400, 'author': 'ijaznazir', 'body': 'We are facing the same issue', 'created_at': datetime.datetime(2024, 5, 3, 5, 51, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2094036926, 'issue_id': 2275195400, 'author': 'maveezmh', 'body': '@deepeshgarg007  can you please look into the issue?', 'created_at': datetime.datetime(2024, 5, 4, 5, 47, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2097757173, 'issue_id': 2275195400, 'author': 'Craftint', 'body': 'We are also facing the same issue.', 'created_at': datetime.datetime(2024, 5, 7, 8, 38, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2116866161, 'issue_id': 2275195400, 'author': 'maveezmh', 'body': '@ruthra-kumar', 'created_at': datetime.datetime(2024, 5, 17, 6, 46, 26, tzinfo=datetime.timezone.utc)}]","ijaznazir on (2024-05-03 05:51:47 UTC): We are facing the same issue

maveezmh (Issue Creator) on (2024-05-04 05:47:21 UTC): @deepeshgarg007  can you please look into the issue?

Craftint on (2024-05-07 08:38:09 UTC): We are also facing the same issue.

maveezmh (Issue Creator) on (2024-05-17 06:46:26 UTC): @ruthra-kumar

"
2274757066,issue,closed,completed,"Error on creating new employee for a user, no permissions changed recently","### Information about bug

Hello, one of the users on our account is getting the following error while creating a new Employee.

Not allowed for Employee: None
User nitin@innomalous.com does not have access to this document
Insufficient Permission for Employee (create)

![WhatsApp Image 2024-05-02 at 12 17 34 PM](https://github.com/frappe/erpnext/assets/42608563/cf0fc512-234c-421c-a93b-8653446ee81e)

No recent changes have been made to the user settings. The user was able to create new Employees before today.

The user has all permissions enabled. See screenshot below:
![image](https://github.com/frappe/erpnext/assets/42608563/ff3814ca-5acb-42a5-9009-b2fdd19d610f)



### Module

HR

### Version

""erpnext"": ""14.67.2"",
""frappe"": ""14.72.0"",
""hrms"": ""14.26.0"",
""india_compliance"": ""14.26.3"",
""payments"": ""0.0.1""

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
NA
```
",innomalous,2024-05-02 06:52:27+00:00,[],2024-07-25 00:09:07+00:00,2024-07-08 05:03:40+00:00,https://github.com/frappe/erpnext/issues/41290,"[('bug', None)]","[{'comment_id': 2120549760, 'issue_id': 2274757066, 'author': 'toofun666', 'body': 'This issue is quite hot and urgent!', 'created_at': datetime.datetime(2024, 5, 20, 14, 13, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2154939791, 'issue_id': 2274757066, 'author': 'rgug24', 'body': 'I have also encountered this error.  However, I have different specs.  Any updates on this?\r\n\r\nERPNext: v15.23.0 (version-15)\r\n\r\nFrappe Framework: v15.26.0 (version-15)\r\n\r\nFrappe Health: v16.0.0-dev (develop)\r\n\r\nFrappe HR: v16.0.0-dev (develop)', 'created_at': datetime.datetime(2024, 6, 7, 14, 16, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2213032760, 'issue_id': 2274757066, 'author': 'Nihantra-Patel', 'body': 'https://github.com/frappe/erpnext/issues/42210#issuecomment-2213021604', 'created_at': datetime.datetime(2024, 7, 8, 5, 3, 40, tzinfo=datetime.timezone.utc)}]","toofun666 on (2024-05-20 14:13:54 UTC): This issue is quite hot and urgent!

rgug24 on (2024-06-07 14:16:03 UTC): I have also encountered this error.  However, I have different specs.  Any updates on this?

ERPNext: v15.23.0 (version-15)

Frappe Framework: v15.26.0 (version-15)

Frappe Health: v16.0.0-dev (develop)

Frappe HR: v16.0.0-dev (develop)

Nihantra-Patel on (2024-07-08 05:03:40 UTC): https://github.com/frappe/erpnext/issues/42210#issuecomment-2213021604

"
2274747882,issue,closed,completed,Error on Bank Statement Import,"### Information about bug

Getting error while creating new Bank Statement Import
""FileNotFoundError: [Errno 2] No such file or directory: './assets/frappe/dist/js/data_import_tools.bundle.3E3NNDZO.js'""

### Module

accounts

### Version

""erpnext"": ""14.67.2"",
	""frappe"": ""14.72.0"",
	""hrms"": ""14.26.0"",
	""india_compliance"": ""14.26.3"",
	""payments"": ""0.0.1""

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""14.67.2"",
	""frappe"": ""14.72.0"",
	""hrms"": ""14.26.0"",
	""india_compliance"": ""14.26.3"",
	""payments"": ""0.0.1""
}
```
### Route
```
Form/Bank Statement Import/Bank Statement Import on 2024-05-02 12:12:12.872566
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 95, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 48, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1619, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/client.py"", line 351, in get_js
    with open(contentpath) as srcfile:
FileNotFoundError: [Errno 2] No such file or directory: './assets/frappe/dist/js/data_import_tools.bundle.3E3NNDZO.js'

```
### Request Data
```
{
	""type"": ""GET"",
	""args"": {
		""items"": ""[\""/assets/frappe/dist/js/data_import_tools.bundle.3E3NNDZO.js\""]""
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.client.get_js""
}
```
### Response Data
```
{
	""exception"": ""FileNotFoundError: [Errno 2] No such file or directory: './assets/frappe/dist/js/data_import_tools.bundle.3E3NNDZO.js'""
}
```
```
",innomalous,2024-05-02 06:45:59+00:00,[],2024-06-19 00:08:51+00:00,2024-06-04 07:49:22+00:00,https://github.com/frappe/erpnext/issues/41289,"[('bug', None)]","[{'comment_id': 2146843537, 'issue_id': 2274747882, 'author': 'nabinhait', 'body': ""Can't replicate"", 'created_at': datetime.datetime(2024, 6, 4, 7, 49, 22, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 07:49:22 UTC): Can't replicate

"
2272364496,issue,open,,Supplier Quotation: Ordered status,"Supplier Quotation doesn't have an `Ordered` status, so it is not obvious when a Purchase Order has been submitted against the Quotation.",casesolved-co-uk,2024-04-30 20:05:43+00:00,[],2024-04-30 20:05:43+00:00,,https://github.com/frappe/erpnext/issues/41278,"[('feature-request', None)]",[],
2272011769,issue,closed,completed,New Version Error Choose Supplier on Purchase Order,"
![Screenshot 2024-04-30 at 23 46 09](https://github.com/frappe/erpnext/assets/1784964/8d62f64f-0019-48e2-89ae-9300a6baadf7)

### Information about bug

I updated the new version and I got this. Also, I reinstall the site. It's still getting this issued

### Module

buying

### Version

### App Versions
```
{
	""erpnext"": ""15.21.2"",
	""frappe"": ""15.25.0""
}
```
### Route
```
Form/Purchase Order/new-purchase-order-xqzrzkslxh
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1761, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/search.py"", line 47, in search_link
    results = search_widget(
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/search.py"", line 93, in search_widget
    is_whitelisted(frappe.get_attr(query))
  File ""apps/frappe/frappe/__init__.py"", line 1751, in get_attr
    return getattr(get_module(modulename), methodname)
AttributeError: module 'erpnext.controllers.queries' has no attribute 'supplier_query'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""txt"": """",
		""doctype"": ""Supplier"",
		""ignore_user_permissions"": 0,
		""reference_doctype"": ""Purchase Order"",
		""page_length"": 10,
		""query"": ""erpnext.controllers.queries.supplier_query""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.search.search_link"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""AttributeError: module 'erpnext.controllers.queries' has no attribute 'supplier_query'"",
	""exc_type"": ""AttributeError""
}
```

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",xhijack,2024-04-30 16:41:07+00:00,[],2024-05-17 00:08:20+00:00,2024-05-02 06:14:33+00:00,https://github.com/frappe/erpnext/issues/41276,"[('bug', None)]","[{'comment_id': 2089668393, 'issue_id': 2272011769, 'author': 'Nihantra-Patel', 'body': 'Hi @xhijack,\r\n\r\nPlease migrate the site and build the app. (`bench build --force`).\r\n\r\nKindly upgrade to version 15, Everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/4acb36bd-b8dc-4d36-84db-3581adca1d1b', 'created_at': datetime.datetime(2024, 5, 2, 6, 14, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-02 06:14:33 UTC): Hi @xhijack,

Please migrate the site and build the app. (`bench build --force`).

Kindly upgrade to version 15, Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/4acb36bd-b8dc-4d36-84db-3581adca1d1b

"
2271486505,issue,closed,completed,POS SALE CANNT ADD ALLOW NEGATIVE ITEM,"### Information about bug

IN POS SALES WE CANNOT ADD ALLOW NEGATIVE ITEM 
BUT IN FORM VIEW WE CAN ADD ITEM

### Module

selling

### Version

FRAPPE - v15.25
ERPNEXT - v15.21

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",mmplerp,2024-04-30 13:29:58+00:00,[],2024-06-25 00:08:27+00:00,2024-06-04 07:33:12+00:00,https://github.com/frappe/erpnext/issues/41274,"[('bug', None)]","[{'comment_id': 2085775826, 'issue_id': 2271486505, 'author': 'frewper', 'body': 'Please can you also add a realistic use case as to when you would need to add a negative item ?', 'created_at': datetime.datetime(2024, 4, 30, 16, 0, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2159170861, 'issue_id': 2271486505, 'author': 'Shirkit', 'body': '> Please can you also add a realistic use case as to when you would need to add a negative item ?\r\n\r\nSmaller companies JIT fast producing items.', 'created_at': datetime.datetime(2024, 6, 10, 19, 52, 24, tzinfo=datetime.timezone.utc)}]","frewper on (2024-04-30 16:00:52 UTC): Please can you also add a realistic use case as to when you would need to add a negative item ?

Shirkit on (2024-06-10 19:52:24 UTC): Smaller companies JIT fast producing items.

"
2271413709,issue,closed,completed,item price based on FG item on subcontracting purchase order,"We send two types of finished goods for subcontracting, Even though these items are different, the services involved are identical. Currently, our ERP system assigns them the same price. 

For example, if we send both Mobile and Laptop items to the subcontractor for fitting panels and receive them back as finished goods, they are priced equally. However, we need different prices for each type of finished good. 


So, we require a feature in our system that allows us to specify different rates for each FG item.",sowndharya998,2024-04-30 13:01:12+00:00,[],2024-12-26 00:10:18+00:00,2024-12-11 10:00:46+00:00,https://github.com/frappe/erpnext/issues/41273,"[('feature-request', None)]","[{'comment_id': 2146876348, 'issue_id': 2271413709, 'author': 'TurkerTunali', 'body': 'We\'ve created different service items for that. For instance: ""Laptop Service"", ""Mobile Service"" items.', 'created_at': datetime.datetime(2024, 6, 4, 8, 6, 42, tzinfo=datetime.timezone.utc)}]","TurkerTunali on (2024-06-04 08:06:42 UTC): We've created different service items for that. For instance: ""Laptop Service"", ""Mobile Service"" items.

"
2271314133,issue,open,,Legal Name required for TDS returns,"I please do needful so that the legal name of business is also fetched and updated when new supplier / customer is created. at present trade name is updated. for proprietor firms these two are not same.
Legal is required in TDS returns.",bhavyajicomputers,2024-04-30 12:18:11+00:00,[],2024-04-30 12:18:11+00:00,,https://github.com/frappe/erpnext/issues/41271,"[('feature-request', None)]",[],
2271156850,issue,closed,completed,Session default Not Working (List View),"### Information about bug

the company displayed in the ""Company"" search field does not change based on their selections in the current session.
![Screenshot_3](https://github.com/frappe/erpnext/assets/50329342/9b981a98-3b89-4202-800f-61562d12c007)
![Screenshot_4](https://github.com/frappe/erpnext/assets/50329342/68850770-172a-49f8-9930-833d59a7e404)


### Module

other

### Version

ERPNext: v15.20.6

Frappe Framework: v15.23.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
the company displayed in the ""Company"" search field does not change based on their selections in the current session.
```
",Kamereldawa,2024-04-30 11:02:46+00:00,[],2024-05-24 00:08:52+00:00,2024-05-09 05:30:45+00:00,https://github.com/frappe/erpnext/issues/41265,"[('bug', None)]","[{'comment_id': 2088266734, 'issue_id': 2271156850, 'author': 'gsbaig', 'body': 'I have suggestion for this session defaultcompany. can we move this  to the top bar near user icon . it will be very helpful', 'created_at': datetime.datetime(2024, 5, 1, 10, 31, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2101967863, 'issue_id': 2271156850, 'author': 'Nihantra-Patel', 'body': 'Hi @Kamereldawa,\r\n\r\nSession defaults cannot be set at the list view level; they are set at the form level. Please refer to the video for more details.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/b67e397a-ac83-4cc6-9f20-d27357189b8e', 'created_at': datetime.datetime(2024, 5, 9, 5, 30, 45, tzinfo=datetime.timezone.utc)}]","gsbaig on (2024-05-01 10:31:24 UTC): I have suggestion for this session defaultcompany. can we move this  to the top bar near user icon . it will be very helpful

Nihantra-Patel on (2024-05-09 05:30:45 UTC): Hi @Kamereldawa,

Session defaults cannot be set at the list view level; they are set at the form level. Please refer to the video for more details.


https://github.com/frappe/erpnext/assets/141945075/b67e397a-ac83-4cc6-9f20-d27357189b8e

"
2270619892,issue,open,,Auto Repeat for ToDo,"**Is your feature request related to a problem? Please describe.**
Often there are tasks that are repeated every month or week or even daily. The ToDo doctype does not have an option to auto repeat such tasks as an open task.  
Currently if ""Auto Repeat"" is activated in the customization and ""Auto Repeat"" feature is used the issue is that it repeats a ""Closed"" task as a closed task thereby defeating the purpose of auto repeat in ToDo.

**Describe the solution you'd like**
The ToDo should be able to auto create repeat tasks on given frequency (like in event) and have the new task as ""Open"" even if previous one is closed.

",usman-alikhan,2024-04-30 06:35:17+00:00,[],2024-04-30 06:49:27+00:00,,https://github.com/frappe/erpnext/issues/41256,"[('feature-request', None)]",[],
2269703212,issue,closed,completed,Automatic rounding,"### Information about bug


I have an error that when I want to print a quote or sales invoice the system rounds up a cent, if someone could help me with this problem, I am new to the system

### Module

CRM

### Version

v0.5.9 (maestro) - ERPNext: v14.15.1 (versiÃ³n-14)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",httpadriancubas,2024-04-29 18:36:00+00:00,[],2024-06-19 00:08:52+00:00,2024-06-04 07:35:04+00:00,https://github.com/frappe/erpnext/issues/41245,"[('bug', None)]","[{'comment_id': 2146818650, 'issue_id': 2269703212, 'author': 'nabinhait', 'body': ""It's not a bug, seems like related to custom print format."", 'created_at': datetime.datetime(2024, 6, 4, 7, 35, 4, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 07:35:04 UTC): It's not a bug, seems like related to custom print format.

"
2269476771,issue,closed,completed,Custom_Withholding_tax Non-Existent DocType,"### Information about bug

Error when trying to open the Item doctype.
I've tried deleting the custom field without success.

### Module

stock

### Version

Frappe Framework: v15.24.1 (HEAD)
ERPNext: v15.21.2 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Field custom_withholding_tax is referring to non-existing doctype Item Withholding. Please delete the field from Item-custom_withholding_tax or add the required doctype.
```
",JRoyDC,2024-04-29 16:34:25+00:00,[],2024-06-18 00:09:12+00:00,2024-06-03 11:38:05+00:00,https://github.com/frappe/erpnext/issues/41244,"[('bug', None)]","[{'comment_id': 2144973409, 'issue_id': 2269476771, 'author': 'deepeshgarg007', 'body': '@JRoyDC This is a customization issue and not a bug, closing this issue.', 'created_at': datetime.datetime(2024, 6, 3, 11, 38, 5, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 on (2024-06-03 11:38:05 UTC): @JRoyDC This is a customization issue and not a bug, closing this issue.

"
2269393260,issue,open,,"Support for transaction currency, without the need to create multiple accounts for each currency, on Journal Entries.","**Allow multi-currency invoices against single party account
Enabling this will allow creation of multi-currency invoices against single party account in company currency**

Basically above, but implemented for journal entries, or every scenario.

",muchai,2024-04-29 15:52:05+00:00,[],2024-04-29 15:52:05+00:00,,https://github.com/frappe/erpnext/issues/41243,"[('feature-request', None)]",[],
2269345555,issue,open,,Issue in check user permission for link field with child table,"<!--
Welcome to the Frappe Framework issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to Frappe
    - For questions and general support, use https://stackoverflow.com/questions/tagged/frappe
    - For documentation issues, refer to https://frappeframework.com/docs/user/en or the developer cheetsheet https://github.com/frappe/frappe/wiki/Developer-Cheatsheet
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a bug report, make sure you provide all required information. The easier it is for
   maintainers to reproduce, the faster it'll be fixed.
4. If you think you know what the reason for the bug is, share it with us. Maybe put in a PR ðŸ˜‰
-->

## Description of the issue
Creating new issue along with the video proof as I don't have permission to comment or reopen the issue frappe/frappe#23228 in which I have already explained everything.

Video Link: 
https://drive.google.com/file/d/1wdRBGqqDLeW-9A_pdF0ezmIDIRIpfmpK/view?usp=sharing

**Output of `bench version`**
```
erpnext 14.67.1
frappe 14.71.0
hrms 14.25.0
non_profit 0.0.1
payments 0.0.1
```
",iamejaaz,2024-04-29 12:39:21+00:00,[],2024-04-30 05:13:25+00:00,,https://github.com/frappe/erpnext/issues/41242,"[('bug', None)]","[{'comment_id': 2083044099, 'issue_id': 2269345555, 'author': 'ankush', 'body': ""Add `ignore user permission` on the fields where it shouldn't be applied. This isn't a bug. Check will be applied on all link fields :shrug:"", 'created_at': datetime.datetime(2024, 4, 29, 15, 29, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2084395337, 'issue_id': 2269345555, 'author': 'iamejaaz', 'body': ""> Add `ignore user permission` on the fields where it shouldn't be applied.\r\n\r\nI have also tried using the same, but it is not working, please check attached video\r\n\r\nhttps://github.com/frappe/erpnext/assets/67804911/68ca6644-4ad4-4888-bad2-8e1826a1bc87\r\n\r\n\r\n\r\n> This isn't a bug. Check will be applied on all link fields ðŸ¤·\r\n\r\nThe issue here is that it is checking all company's permissions in 'Mode of payment Cash.' Is this not a bug?\r\n\r\nI have assigned a different company permission, but it is checking for other companies (e.g., `Maharashtra State` in the video)."", 'created_at': datetime.datetime(2024, 4, 30, 5, 13, 24, tzinfo=datetime.timezone.utc)}]","ankush on (2024-04-29 15:29:53 UTC): Add `ignore user permission` on the fields where it shouldn't be applied. This isn't a bug. Check will be applied on all link fields :shrug:

iamejaaz (Issue Creator) on (2024-04-30 05:13:24 UTC): I have also tried using the same, but it is not working, please check attached video

https://github.com/frappe/erpnext/assets/67804911/68ca6644-4ad4-4888-bad2-8e1826a1bc87




The issue here is that it is checking all company's permissions in 'Mode of payment Cash.' Is this not a bug?

I have assigned a different company permission, but it is checking for other companies (e.g., `Maharashtra State` in the video).

"
2268931011,issue,open,,Add Deferred Revenue / Deferred Expense to Journal Entries,"Currently, ERPNext allows users to record deferred expenses/deferred income through specific invoice-based entries, either from purchase or sales invoices. This functionality is incredibly useful for accurate financial reporting and matching expenses with revenue generation. However, this feature is not available in the Journal Entry module, which restricts flexibility in accounting practices.

I propose the extension of deferred expense/income expense recording capabilities to Journal Entries. This would allow users to record directly in the Journal Entry module, enhancing ERPNext's usability and accommodating a broader range of accounting scenarios.",ernestoruiz89,2024-04-29 12:35:36+00:00,[],2024-04-30 03:32:30+00:00,,https://github.com/frappe/erpnext/issues/41238,"[('feature-request', None)]","[{'comment_id': 2083184958, 'issue_id': 2268931011, 'author': 'agritheory', 'body': '@ernestoruiz89 What is use case for this? One that would not be a appropriately accommodated by a Purchase Invoice or Sales Invoice?\r\n\r\nIt goes against best practices to use the Journal Entry for recording ordinary expenses; the recommended approach is to use non-inventoriable item(s). I\'m not saying that this feature shouldn\'t be developed, but I don\'t agree with the premise that it would be good to have this feature to ""allow users to record deferred expenses directly in the Journal Entry"".', 'created_at': datetime.datetime(2024, 4, 29, 16, 36, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2083573651, 'issue_id': 2268931011, 'author': 'ernestoruiz89', 'body': '> @ernestoruiz89 What is use case for this? One that would not be a appropriately accommodated by a Purchase Invoice or Sales Invoice?\r\n> \r\n> It goes against best practices to use the Journal Entry for recording ordinary expenses; the recommended approach is to use non-inventoriable item(s). I\'m not saying that this feature shouldn\'t be developed, but I don\'t agree with the premise that it would be good to have this feature to ""allow users to record deferred expenses directly in the Journal Entry"".\r\n\r\nHello,  \r\n\r\nMany accountants are accustomed to traditional accounting practices where journal entries are the primary method for recording all financial transactions, rather than using the entire ERP system\r\n\r\nCompanies sometimes need to make accrual adjustments that are not directly linked to any purchase or sales invoice, like adjustments, a company may need to defer the recognition of revenue received in advance for a service that will be delivered over several months. This type of adjustment may not always align neatly with the transactions recorded via invoices.\r\n\r\nAlso, handling the opening of accounts via journal entries that include balances of deferred expenses or revenues.\r\n\r\nThis feature could be enabled in the accounting settings and not be set as default.', 'created_at': datetime.datetime(2024, 4, 29, 20, 9, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2083687303, 'issue_id': 2268931011, 'author': 'agritheory', 'body': '> Many accountants are accustomed to traditional accounting practices where journal entries are the primary method for recording all financial transactions, rather than using the entire ERP system\r\n\r\nI hear this one all the time. ""This is how QuickBooks does it"" doesn\'t mean that it\'s good accounting practices and I would especially caution those coming from a cash basis,  casual accounting or bookkeeping background that ERPNext is a stockkeeping system first, which drives its accounting features. ERPNext is very poor choice if your accounting requirements are closer to ""balance the checkbook"" than ""monitor change in inventory valuation"". Workflows that disregard inventory accuracy for the convivence of the accounting team are at best, sloppy, and at worst, negligence or fraud. Because ERPNext or any other accounting system allows you to enter ordinary expenses as a Journal Entry does not mean that its a good idea.\r\n\r\n> Companies sometimes need to make accrual adjustments that are not directly linked to any purchase or sales invoice, like adjustments, a company may need to defer the recognition of revenue received in advance for a service that will be delivered over several months. This type of adjustment may not always align neatly with the transactions recorded via invoices.\r\n\r\nWhile this is certainly true and I have advised many such adjustments myself, I do not see how it is appropriate for a transaction that has an ongoing deferral mechanic. Deferred transactions are applied iteratively, as they accrue at the time/ in the period that they represent. If those values change each period/ iteration, I would argue that using the deferred feature was not the correct choice in the first place. If you make a mistake on a deferred entry, you can make a single adjusting JE, end the deferral and start the new sequence from there. It does not require that all future iterations in the deferral sequence are fixed - they haven\'t happened yet. Tracking N diverging sources of truth is never better than tracking one. This feature would introduce such an issue even if it were only used (via policy) as a correctional technique.\r\n\r\n> handling the opening of accounts via journal entries that include balances of deferred expenses or revenues.\r\n\r\nI never advise using a Journal Entry for opening balances on accounts that use a subledger -it creates a matching problem that can only be solved in the margins and that reconciliation document never seems to make its way into the accounting system and always seems to escape the auditors attention. I advocate for using correctly dated invoices with their full detail for opening. In a scenario where one company is acquiring another and it would be incorrect to have transactions dated before the acquisition date, I _still_ advocate for creating those opening invoices with full detail and then offsetting those with Journal Entries against the whatever the appropriate balance sheet account is, if that\'s required (it\'s more correct, but may not be material).\r\n\r\n> This feature could be enabled in the accounting settings and not be set as default.\r\n\r\nIt is my opinion that this feature should not exist at all. I know that you disagree and I respect that. I don\'t consider what you\'re asking for ""wrong"", I just think it\'s a very problematic approach. I wanted to say it firmly here, for the record. \r\n\r\nPlease consider all of this explanation as an effort on my part to convince you to stop entering ordinary expenses as Journal Entries in the first place. I think it has too many disadvantages to be the correct procedure. In the accounting laws and conventions of the jurisdictions I consult in, Journal Entries are not and should not be used ordinary expense and will invite negative attention during an audit. Notably exceptions are imports from a payroll processing service, but that\'s commoditized, outsourced accounting functions, not what we\'re talking about here.', 'created_at': datetime.datetime(2024, 4, 29, 21, 18, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2084313840, 'issue_id': 2268931011, 'author': 'ernestoruiz89', 'body': 'Thank you for sharing your perspective.\r\n\r\n I understand your concerns about using journal entries for recording ordinary expenses in ERPNext, given its focus on inventory management. Itâ€™s clear that for accurate financial reporting and inventory tracking, adhering to best practices is crucial. \r\n\r\nHowever, for non-inventory related transactions or complex financial environments, some flexibility in recording methods might still be necessary. Your emphasis on using detailed invoices for opening balances and caution against altering default settings for ordinary expenses is well-noted and reflects a prudent approach to financial management\r\n\r\nI understand your strong stance against implementing the feature, it might be beneficial to have a configurable option, as suggested, where such features are not default but available for activation based on specific accounting needs or contexts. This could provide the necessary flexibility for businesses with unique requirements without altering the standard practices recommended for most users.\r\n\r\nYour insights are invaluable, and discussing these different perspectives helps in understanding the complexities of accounting practices. Your approach to caution and accuracy is crucial for maintaining integrity and compliance. Thank you for emphasizing these points.', 'created_at': datetime.datetime(2024, 4, 30, 3, 32, 29, tzinfo=datetime.timezone.utc)}]","agritheory on (2024-04-29 16:36:12 UTC): @ernestoruiz89 What is use case for this? One that would not be a appropriately accommodated by a Purchase Invoice or Sales Invoice?

It goes against best practices to use the Journal Entry for recording ordinary expenses; the recommended approach is to use non-inventoriable item(s). I'm not saying that this feature shouldn't be developed, but I don't agree with the premise that it would be good to have this feature to ""allow users to record deferred expenses directly in the Journal Entry"".

ernestoruiz89 (Issue Creator) on (2024-04-29 20:09:55 UTC): Hello,  

Many accountants are accustomed to traditional accounting practices where journal entries are the primary method for recording all financial transactions, rather than using the entire ERP system

Companies sometimes need to make accrual adjustments that are not directly linked to any purchase or sales invoice, like adjustments, a company may need to defer the recognition of revenue received in advance for a service that will be delivered over several months. This type of adjustment may not always align neatly with the transactions recorded via invoices.

Also, handling the opening of accounts via journal entries that include balances of deferred expenses or revenues.

This feature could be enabled in the accounting settings and not be set as default.

agritheory on (2024-04-29 21:18:18 UTC): I hear this one all the time. ""This is how QuickBooks does it"" doesn't mean that it's good accounting practices and I would especially caution those coming from a cash basis,  casual accounting or bookkeeping background that ERPNext is a stockkeeping system first, which drives its accounting features. ERPNext is very poor choice if your accounting requirements are closer to ""balance the checkbook"" than ""monitor change in inventory valuation"". Workflows that disregard inventory accuracy for the convivence of the accounting team are at best, sloppy, and at worst, negligence or fraud. Because ERPNext or any other accounting system allows you to enter ordinary expenses as a Journal Entry does not mean that its a good idea.


While this is certainly true and I have advised many such adjustments myself, I do not see how it is appropriate for a transaction that has an ongoing deferral mechanic. Deferred transactions are applied iteratively, as they accrue at the time/ in the period that they represent. If those values change each period/ iteration, I would argue that using the deferred feature was not the correct choice in the first place. If you make a mistake on a deferred entry, you can make a single adjusting JE, end the deferral and start the new sequence from there. It does not require that all future iterations in the deferral sequence are fixed - they haven't happened yet. Tracking N diverging sources of truth is never better than tracking one. This feature would introduce such an issue even if it were only used (via policy) as a correctional technique.


I never advise using a Journal Entry for opening balances on accounts that use a subledger -it creates a matching problem that can only be solved in the margins and that reconciliation document never seems to make its way into the accounting system and always seems to escape the auditors attention. I advocate for using correctly dated invoices with their full detail for opening. In a scenario where one company is acquiring another and it would be incorrect to have transactions dated before the acquisition date, I _still_ advocate for creating those opening invoices with full detail and then offsetting those with Journal Entries against the whatever the appropriate balance sheet account is, if that's required (it's more correct, but may not be material).


It is my opinion that this feature should not exist at all. I know that you disagree and I respect that. I don't consider what you're asking for ""wrong"", I just think it's a very problematic approach. I wanted to say it firmly here, for the record. 

Please consider all of this explanation as an effort on my part to convince you to stop entering ordinary expenses as Journal Entries in the first place. I think it has too many disadvantages to be the correct procedure. In the accounting laws and conventions of the jurisdictions I consult in, Journal Entries are not and should not be used ordinary expense and will invite negative attention during an audit. Notably exceptions are imports from a payroll processing service, but that's commoditized, outsourced accounting functions, not what we're talking about here.

ernestoruiz89 (Issue Creator) on (2024-04-30 03:32:29 UTC): Thank you for sharing your perspective.

 I understand your concerns about using journal entries for recording ordinary expenses in ERPNext, given its focus on inventory management. Itâ€™s clear that for accurate financial reporting and inventory tracking, adhering to best practices is crucial. 

However, for non-inventory related transactions or complex financial environments, some flexibility in recording methods might still be necessary. Your emphasis on using detailed invoices for opening balances and caution against altering default settings for ordinary expenses is well-noted and reflects a prudent approach to financial management

I understand your strong stance against implementing the feature, it might be beneficial to have a configurable option, as suggested, where such features are not default but available for activation based on specific accounting needs or contexts. This could provide the necessary flexibility for businesses with unique requirements without altering the standard practices recommended for most users.

Your insights are invaluable, and discussing these different perspectives helps in understanding the complexities of accounting practices. Your approach to caution and accuracy is crucial for maintaining integrity and compliance. Thank you for emphasizing these points.

"
2268179430,issue,open,,Need a provision of GST amount to update on Journal Entry,"### Information about bug

Hi Team,

Currently there is not provision to update GST amount and GST % on Journal entry. This provision is required. or suggest us the solution if already taken care in India Compliance.


### Module

accounts

### Version

ERPNext: v15.17.1 (version-15)

Frappe Framework: v15.17.3 (version-15)

Frappe HR: v15.14.1 (version-15)

India Compliance: v15.5.7 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",satisharalkar,2024-04-29 05:50:57+00:00,[],2024-05-15 08:42:29+00:00,,https://github.com/frappe/erpnext/issues/41229,"[('feature-request', None)]","[{'comment_id': 2111917280, 'issue_id': 2268179430, 'author': 'vorasmit', 'body': ""It's recommended to process all GST Transactions through sales or purchase invoice.\r\n\r\nIn my opinion you are looking for a simpler interface to book expenses.\r\n\r\nJournal Entry is not designed to support taxes. Moreover, just adding taxes may not be sufficient as all reports will also need to support them."", 'created_at': datetime.datetime(2024, 5, 15, 8, 42, 28, tzinfo=datetime.timezone.utc)}]","vorasmit on (2024-05-15 08:42:28 UTC): It's recommended to process all GST Transactions through sales or purchase invoice.

In my opinion you are looking for a simpler interface to book expenses.

Journal Entry is not designed to support taxes. Moreover, just adding taxes may not be sufficient as all reports will also need to support them.

"
2268100331,issue,closed,completed,Multiple Purchase receipt are getting created in Draft,"### Information about bug

Hi Team,

Currently, we observed that multiple purchase receipts are getting created in Draft status against the same PO.

currently system stops while submit the ""Purchase Receipt""  but draft receipts should not be created.

### Module

buying

### Version

ERPNext: v15.17.1 (version-15)

Frappe Framework: v15.17.3 (version-15)

Frappe HR: v15.14.1 (version-15)

India Compliance: v15.5.7 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",satisharalkar,2024-04-29 04:32:35+00:00,[],2024-06-19 00:08:49+00:00,2024-06-04 08:30:05+00:00,https://github.com/frappe/erpnext/issues/41225,"[('bug', None)]","[{'comment_id': 2146923844, 'issue_id': 2268100331, 'author': 'nabinhait', 'body': ""This is not a bug, it is by design. If you don't want the behaviour, you can add a validation via server script."", 'created_at': datetime.datetime(2024, 6, 4, 8, 30, 5, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 08:30:05 UTC): This is not a bug, it is by design. If you don't want the behaviour, you can add a validation via server script.

"
2268096335,issue,open,,Production Capacity Calculation,"### Information about bug

Hi Team,
We are using V15 of ERPNext and observed that Production Capacity Calculation is not working.

When we are creating new sales order, system should show ""Customer Promise Date"" in Sales order considering capacity available in terms of Work station, manpower, production lead time and previous sales orders in process for manufacturing.

The flow should be Sales Order>>Production Plan>>Work Orders>>Job Cards

Please let us know if any more information is required.


### Module

manufacturing

### Version

ERPNext: v15.17.1 (version-15)

Frappe Framework: v15.17.3 (version-15)

Frappe HR: v15.14.1 (version-15)

India Compliance: v15.5.7 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",satisharalkar,2024-04-29 04:28:25+00:00,[],2024-06-04 08:30:40+00:00,,https://github.com/frappe/erpnext/issues/41224,[],[],
2268064760,issue,closed,completed,"The text field ""Married"" showing in the Different language","### Information about bug

The Created a Web form based on Employee Document but in the Web form for the Matial Status field the Married option is showing in the a Different Language.
![image](https://github.com/frappe/erpnext/assets/108865344/0c8db27f-410c-42b9-ba7e-ebb9087528a7)

We checked the Bench site country and Company country both are set to India but don't know from where it is fetching in different language.

**Workaround:** We added a Translation for Martial Staus for Married and then it work properly in the Webform.
![Screenshot 2024-04-29 at 9 11 25 AM](https://github.com/frappe/erpnext/assets/108865344/78f9c3b3-e67d-47ff-b4de-b14ca4e1b7fa)

 

### Module

other

### Version

Frappe Chat: v0.0.1 (HEAD)

ERPNext: v15.21.2 (HEAD)

Frappe Framework: v15.24.1 (HEAD)

Frappe HR: v15.20.1 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",sanjay141986,2024-04-29 03:50:47+00:00,[],2024-06-18 00:09:11+00:00,2024-06-03 11:40:40+00:00,https://github.com/frappe/erpnext/issues/41223,"[('bug', None)]","[{'comment_id': 2101945014, 'issue_id': 2268064760, 'author': 'raaannzzz', 'body': 'same problem with employee', 'created_at': datetime.datetime(2024, 5, 9, 5, 8, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144978012, 'issue_id': 2268064760, 'author': 'deepeshgarg007', 'body': '@sanjay141986 This should be fixed now.', 'created_at': datetime.datetime(2024, 6, 3, 11, 40, 40, tzinfo=datetime.timezone.utc)}]","raaannzzz on (2024-05-09 05:08:03 UTC): same problem with employee

deepeshgarg007 on (2024-06-03 11:40:40 UTC): @sanjay141986 This should be fixed now.

"
2268032617,issue,open,,"Need Multi selections on General ledger for all filter i.e. Party, Account, Voucher, etc.","Currently, we have multi selection on general ledger where we need to tick the each accounts or party or voucher for which we want to details. It is a very difficult process to enter and select the expected parties or accounts or etc. We need a function where we can copy and paste the details for which we need report and the system will show details for those.",smbcatalyst,2024-04-29 03:08:51+00:00,[],2024-04-29 03:08:51+00:00,,https://github.com/frappe/erpnext/issues/41222,"[('feature-request', None)]",[],
2266973529,issue,closed,completed,Payment Entry assumes that there is always a purchase order linked to the Payment entry when withholding a Tax,"### Information about bug

This change assumes that there will always be a purchase order linked to Payment Entry when applying TDS. This breaks when there is none.

### Module

accounts

### Version

Frappe-version-13, ERPNext Version - 13.55

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Since there is no PO linked to the payment, getting this exception in 
File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 675, in get_order_net_total
    tax_withholding_net_total = frappe.db.get_value(


:8000/api/method/frappe.desk.form.save.savedocs:1 
       Failed to load resource: the server responded with a status of 500 (INTERNAL SERVER ERROR)
desk.min.js?ver=1713465470.0:sourcemap:4140 Syntax error in query:
desk.min.js?ver=1713465470.0:sourcemap:4140 select sum(base_net_total) from `tabPurchase Order` where `name` in () order by modified desc limit 1
desk.min.js?ver=1713465470.0:sourcemap:4140 Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 66, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 38, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 76, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1474, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 25, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 312, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 334, in _save
    return self.insert()
  File ""apps/frappe/frappe/model/document.py"", line 263, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1059, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 943, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1267, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1249, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 940, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 82, in validate
    self.set_tax_withholding()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 620, in set_tax_withholding
    order_amount = self.get_order_net_total()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 675, in get_order_net_total
    tax_withholding_net_total = frappe.db.get_value(
  File ""apps/frappe/frappe/database/database.py"", line 472, in get_value
    ret = self.get_values(
  File ""apps/frappe/frappe/database/database.py"", line 544, in get_values
    out = self._get_values_from_table(
  File ""apps/frappe/frappe/database/database.py"", line 739, in _get_values_from_table
    r = self.sql(
  File ""apps/frappe/frappe/database/database.py"", line 187, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.8/site-packages/pymysql/cursors.py"", line 148, in execute
    result = self._query(query)
  File ""env/lib/python3.8/site-packages/pymysql/cursors.py"", line 310, in _query
    conn.query(q)
  File ""env/lib/python3.8/site-packages/pymysql/connections.py"", line 548, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File ""env/lib/python3.8/site-packages/pymysql/connections.py"", line 775, in _read_query_result
    result.read()
  File ""env/lib/python3.8/site-packages/pymysql/connections.py"", line 1156, in read
    first_packet = self.connection._read_packet()
  File ""env/lib/python3.8/site-packages/pymysql/connections.py"", line 725, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.8/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.8/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1064, ""You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') order by modified desc limit 1' at line 1"")

:8000/api/method/frappe.desk.form.save.savedocs:1 
        
        
       Failed to load resource: net::ERR_NETWORK_IO_SUSPENDED
```
",basant-in,2024-04-27 11:27:38+00:00,[],2024-05-15 00:08:55+00:00,2024-04-29 09:04:04+00:00,https://github.com/frappe/erpnext/issues/41217,"[('bug', None)]","[{'comment_id': 2082212722, 'issue_id': 2266973529, 'author': 'Nihantra-Patel', 'body': '**We no longer provide support for version 13 or older.**\r\n\r\nKindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nIf the issue occurs then please create a new issue according to the latest version (14 or 15) with a video document if possible.\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 4, 29, 9, 4, 4, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-29 09:04:04 UTC): **We no longer provide support for version 13 or older.**

Kindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.

If the issue occurs then please create a new issue according to the latest version (14 or 15) with a video document if possible.

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

"
2265780988,issue,closed,completed,Employee Advance Status is not updating after payment Entry,"### Information about bug

Employee Advance
![image](https://github.com/frappe/erpnext/assets/142441014/cbac9ef4-eef3-449c-9229-993854630aab)

Payment Entry
![image](https://github.com/frappe/erpnext/assets/142441014/a992056b-668d-4837-bd62-371dbd7f0f45)


### Module

accounts, HR

### Version

Frappe CRM: v0.0.1 (develop)

ERPNext: v15.17.0 (version-15)

Frappe Framework: v15.17.3 (version-15)

Frappe HR: v16.0.0-dev (develop)

KSA Accounts: v0.0.1 (main)

Frappe Lending: v0.0.1 (develop)

Payments: v0.0.1 (develop)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",RAhmed-Dev,2024-04-26 13:21:41+00:00,[],2024-05-15 00:08:56+00:00,2024-04-29 09:01:38+00:00,https://github.com/frappe/erpnext/issues/41214,"[('bug', None)]","[{'comment_id': 2082207594, 'issue_id': 2265780988, 'author': 'Nihantra-Patel', 'body': ""Issue has been already fixed: https://github.com/frappe/hrms/issues/1694\r\nPR: https://github.com/frappe/erpnext/pull/41183\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/e2ccc691-02e2-42aa-86b2-9db1150b937b\r\n\r\nI've shared a suggestion:\r\nIf you've installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.\r\n\r\nIf the hrms is in the development branch, switch to it:\r\n\r\n```bash\r\nbench switch-to-branch version-15 hrms\r\n```\r\n\r\nIf you've uninstalled or installed the app, do this:\r\n\r\n```bash\r\nbench get-app --branch version-15 hrms\r\n```\r\n\r\nThis is because the hrms app has a version 15 branch.\r\n\r\nI hope this is clear and helpful."", 'created_at': datetime.datetime(2024, 4, 29, 9, 1, 38, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-29 09:01:38 UTC): Issue has been already fixed: https://github.com/frappe/hrms/issues/1694
PR: https://github.com/frappe/erpnext/pull/41183


https://github.com/frappe/erpnext/assets/141945075/e2ccc691-02e2-42aa-86b2-9db1150b937b

I've shared a suggestion:
If you've installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.

If the hrms is in the development branch, switch to it:

```bash
bench switch-to-branch version-15 hrms
```

If you've uninstalled or installed the app, do this:

```bash
bench get-app --branch version-15 hrms
```

This is because the hrms app has a version 15 branch.

I hope this is clear and helpful.

"
2265648231,issue,closed,completed,Include descendant accounts during accounting dimension validation,"**Is your feature request related to a problem? Please describe.**
During GL Entry creation, the system validates the applied account against the allowed accounting dimensions. This works well for non-group accounts, but if a group account is provided, the system should validate against all descendant accounts as well.

**Describe the solution you'd like**

The following code runs the validation of the GL Entry account against applicable individual accounts:
https://github.com/frappe/erpnext/blob/41695e601d41d5a0b0b6e7f7c2e6a36c3064b277/erpnext/accounts/general_ledger.py#L704-L707

Which could be changed to:

```python
dimension = key[0]
account = key[1]

if frappe.get_cached_value('Account', account, 'is_group'):
	accounts = get_descendants_of('Account', account)
else:
	accounts = [account]

if gl_entry.account in accounts:
```

to include descendant accounts as well.",Alchez,2024-04-26 12:07:49+00:00,[],2024-07-27 00:08:39+00:00,2024-07-12 08:44:17+00:00,https://github.com/frappe/erpnext/issues/41212,"[('feature-request', None)]","[{'comment_id': 2082619080, 'issue_id': 2265648231, 'author': 'agritheory', 'body': ""I don't think this is a feature request, I think it's a bug. Accounting Dimension Filter allows you to select either node or group accounts. Selecting a node account works as expected but selecting a group account has no effect. Certainly from the users perspective this is a bug even if it doesn't raise an error."", 'created_at': datetime.datetime(2024, 4, 29, 12, 36, 21, tzinfo=datetime.timezone.utc)}]","agritheory on (2024-04-29 12:36:21 UTC): I don't think this is a feature request, I think it's a bug. Accounting Dimension Filter allows you to select either node or group accounts. Selecting a node account works as expected but selecting a group account has no effect. Certainly from the users perspective this is a bug even if it doesn't raise an error.

"
2264345512,issue,closed,completed,Plaid integration failing,"### Information about bug

![PHOTO-2024-04-23-10-28-30](https://github.com/frappe/erpnext/assets/168130806/0d01015c-f9e3-4416-9ec1-ffa01ff9a894)


### Module

accounts

### Version

ERPNext: v15.21.0 (HEAD)

Frappe Framework: v15.24.1 (HEAD)




### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
NA
```
",Pvir24,2024-04-25 19:30:20+00:00,[],2024-06-19 00:08:39+00:00,2024-06-04 09:18:41+00:00,https://github.com/frappe/erpnext/issues/41190,"[('bug', None)]","[{'comment_id': 2147029060, 'issue_id': 2264345512, 'author': 'nabinhait', 'body': 'As the message shows, currently system does not support multi-factor authentication. Please disable it to use the plaid integration.', 'created_at': datetime.datetime(2024, 6, 4, 9, 18, 41, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 09:18:41 UTC): As the message shows, currently system does not support multi-factor authentication. Please disable it to use the plaid integration.

"
2263018847,issue,closed,completed,Delivery Trip Gets Stops From Button,"### Information about bug

When using the Gets Stops From Button, a server script appears.

Server Error
TypeError: make_delivery_trip() takes from 1 to 2 positional arguments but 3 were given


### Module

stock

### Version

ERPNext: v14.67.2 (HEAD)
Frappe Framework: v14.72.0 (HEAD)
Frappe HR: v14.26.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
`### App Versions

{
	""erpnext"": ""14.67.2"",
	""frappe"": ""14.72.0"",
	""hrms"": ""14.26.0""
}
```
### Route
```
Form/Delivery Trip/new-delivery-trip-kzpcsatiat
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 95, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 48, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1611, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/model/mapper.py"", line 53, in map_docs
    target_doc = method(*_args)
TypeError: make_delivery_trip() takes from 1 to 2 positional arguments but 3 were given

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""method"": ""erpnext.stock.doctype.delivery_note.delivery_note.make_delivery_trip"",
		""source_names"": ""[\""MAT-DN-2024-00001\"",\""MAT-DN-2024-00002\"",\""MAT-DN-2024-00003\"",\""MAT-DN-2024-00004\"",\""MAT-DN-2024-00006\""]"",
		""target_doc"": ""{\""docstatus\"":0,\""doctype\"":\""Delivery Trip\"",\""name\"":\""new-delivery-trip-kzpcsatiat\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""naming_series\"":\""MAT-DT-.YYYY.-\"",\""company\"":\""Malaya Corporation\"",\""email_notification_sent\"":0,\""status\"":\""Draft\"",\""delivery_stops\"":[{\""docstatus\"":0,\""doctype\"":\""Delivery Stop\"",\""name\"":\""new-delivery-stop-hqvwippxkt\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""locked\"":0,\""visited\"":0,\""parent\"":\""new-delivery-trip-kzpcsatiat\"",\""parentfield\"":\""delivery_stops\"",\""parenttype\"":\""Delivery Trip\"",\""idx\"":1}]}"",
		""args"": ""{\""company\"":\""Malaya Corporation\"",\""merge_taxes\"":0,\""filtered_children\"":[]}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.model.mapper.map_docs""
}
```
### Response Data
```
{
	""exception"": ""TypeError: make_delivery_trip() takes from 1 to 2 positional arguments but 3 were given""
}
````
```
",Ponyooooo,2024-04-25 08:38:11+00:00,[],2024-05-17 00:08:21+00:00,2024-04-26 07:39:12+00:00,https://github.com/frappe/erpnext/issues/41184,"[('bug', None), ('released', None)]","[{'comment_id': 2089535012, 'issue_id': 2263018847, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.22.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.22.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 2, 4, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2089555088, 'issue_id': 2263018847, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.69.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.69.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 2, 4, 32, 43, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-05-02 04:25:08 UTC): :tada: This issue has been resolved in version 15.22.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.22.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

frappe-pr-bot on (2024-05-02 04:32:43 UTC): :tada: This issue has been resolved in version 14.69.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.69.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2262472865,issue,closed,completed,Question: why doesn't the taxes_and_totals python controller use get_item_details?,"There appears to be duplicate code between the `taxes_and_totals` controller and `get_item_details`, for example applying pricing rules.

Does this need a refactor?

https://github.com/frappe/erpnext/blob/5f6bf4c369436c90d68a05255a1f78b4f3825c48/erpnext/controllers/taxes_and_totals.py#L150",casesolved-co-uk,2024-04-25 01:42:38+00:00,[],2024-05-10 00:08:31+00:00,2024-04-25 04:00:46+00:00,https://github.com/frappe/erpnext/issues/41176,"[('feature-request', None)]","[{'comment_id': 2076303135, 'issue_id': 2262472865, 'author': 'casesolved-co-uk', 'body': 'Nevermind, I refactored using the client controller code', 'created_at': datetime.datetime(2024, 4, 25, 4, 0, 46, tzinfo=datetime.timezone.utc)}]","casesolved-co-uk (Issue Creator) on (2024-04-25 04:00:46 UTC): Nevermind, I refactored using the client controller code

"
2262101456,issue,closed,completed,Fetch custom field guide instructions not matching,"### Information about bug

I'm trying to follow this guide:
https://frappeframework.com/docs/user/en/guides/app-development/fetch-custom-field-value-from-master-to-all-related-transactions

However, step #2 is not possible. In my ""Fetch From"" field, I get a dropdown selector (screenshot below) and can only choose from the list of Doc Type. In that documentation example, would that mean you would have to create a Doc Type for GSTIN, and define GSTIN in Supplier as a Link to the GSTIN Doc Type, then you can choose GSTIN from the ""Fetch From"" field in step 3?

![Fetch From](https://github.com/frappe/erpnext/assets/114938861/2aec3726-444b-486d-87de-c4b8ebc42cdf)

### Module

stock, buying

### Version

frappe/erpnext:v15.20.3

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",geraldleungontario,2024-04-24 20:10:41+00:00,[],2024-05-11 00:08:30+00:00,2024-04-25 05:09:01+00:00,https://github.com/frappe/erpnext/issues/41175,"[('bug', None)]","[{'comment_id': 2076366300, 'issue_id': 2262101456, 'author': 'Nihantra-Patel', 'body': ""Since you are searching at the purchase order item level and the supplier field is at the purchase order level, there's a limitation. If you want to access the GSTIN at the purchase order level, it is possible. However, if you wish to include the GSTIN at the purchase order Item level, you must add the supplier field. This is necessary because the GSTIN is stored in the supplier master. Without the supplier field, retrieving the GSTIN is not feasible. I hope this clarifies your query.\r\n\r\n\r\nIf you have a doubt, then raise the question in the Forum: https://discuss.frappe.io"", 'created_at': datetime.datetime(2024, 4, 25, 5, 9, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2077154282, 'issue_id': 2262101456, 'author': 'geraldleungontario', 'body': 'I did not follow the guide instructions exactly in my previous example. I made the mistake of using a Purchase Order Item instead of Purchase Order. The issue still happens when trying to customize a Purchase Order. I am\r\n unable to enter ""supplier.gstin"" like in the guide instructions and only get to choose from the drop down list and ""supplier.gstin"" is not available. Should the guide instructions be updated?\r\n\r\n![Fetch From 1](https://github.com/frappe/erpnext/assets/114938861/9789b8e5-bb41-45e6-97a0-fa58ea198f62)\r\n![Fetch From](https://github.com/frappe/erpnext/assets/114938861/f808508d-3beb-42da-9ee1-0587ab27ed7b)\r\n\r\nI found a working video guide from\r\n[https://discuss.frappe.io/t/fetch-from-doc-type/119898/4](url)', 'created_at': datetime.datetime(2024, 4, 25, 13, 14, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2078621362, 'issue_id': 2262101456, 'author': 'Nihantra-Patel', 'body': 'but supplier GSTIN is already available in the purchase order. Please check it out.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/b6af2a74-0def-4e41-a90f-bff819b42c79)', 'created_at': datetime.datetime(2024, 4, 26, 4, 45, 50, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-25 05:09:01 UTC): Since you are searching at the purchase order item level and the supplier field is at the purchase order level, there's a limitation. If you want to access the GSTIN at the purchase order level, it is possible. However, if you wish to include the GSTIN at the purchase order Item level, you must add the supplier field. This is necessary because the GSTIN is stored in the supplier master. Without the supplier field, retrieving the GSTIN is not feasible. I hope this clarifies your query.


If you have a doubt, then raise the question in the Forum: https://discuss.frappe.io

geraldleungontario (Issue Creator) on (2024-04-25 13:14:32 UTC): I did not follow the guide instructions exactly in my previous example. I made the mistake of using a Purchase Order Item instead of Purchase Order. The issue still happens when trying to customize a Purchase Order. I am
 unable to enter ""supplier.gstin"" like in the guide instructions and only get to choose from the drop down list and ""supplier.gstin"" is not available. Should the guide instructions be updated?

![Fetch From 1](https://github.com/frappe/erpnext/assets/114938861/9789b8e5-bb41-45e6-97a0-fa58ea198f62)
![Fetch From](https://github.com/frappe/erpnext/assets/114938861/f808508d-3beb-42da-9ee1-0587ab27ed7b)

I found a working video guide from
[https://discuss.frappe.io/t/fetch-from-doc-type/119898/4](url)

Nihantra-Patel on (2024-04-26 04:45:50 UTC): but supplier GSTIN is already available in the purchase order. Please check it out.

![image](https://github.com/frappe/erpnext/assets/141945075/b6af2a74-0def-4e41-a90f-bff819b42c79)

"
2261032774,issue,open,,Feature in BOM Creator and BOM,"1. I have BOM of my machinery product, in which i have many raw materials and sub assembly.
Now there is some sub assembly which i donâ€™t want to create as item and then create that sub assemblyâ€™s BOM, instead of doing that i want to add one group of raw material with Name or note
which help me to understand the better with BOM and donâ€™t need to create small sub assembly

Basically i want to say option to add name or note for group of raw material and view separate like sub assembly 


2. one more problem i am facing is in BOM creator added raw material or sub assembly show their item code which difficult to identify the raw material when we need to edit or remove",nilpatel42,2024-04-24 11:08:41+00:00,[],2024-05-04 13:33:44+00:00,,https://github.com/frappe/erpnext/issues/41169,"[('feature-request', None)]",[],
2260999963,issue,closed,completed,Email campaigns have an empty body when using a html email template,"### Information about bug

https://github.com/frappe/erpnext/blob/5f6bf4c369436c90d68a05255a1f78b4f3825c48/erpnext/crm/doctype/email_campaign/email_campaign.py#L120-L131

I think it should be:
```py
content=frappe.render_template(email_template.response_, context),
```

Ref : https://github.com/frappe/hrms/pull/1435


### Module

CRM

### Version

erpnext 15.20.6
frappe 15.23.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",SvbZ3r0,2024-04-24 10:51:01+00:00,[],2024-05-17 00:08:22+00:00,2024-04-26 07:39:54+00:00,https://github.com/frappe/erpnext/issues/41168,"[('bug', None), ('released', None)]","[{'comment_id': 2089535141, 'issue_id': 2260999963, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.22.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.22.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 2, 4, 25, 11, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-05-02 04:25:11 UTC): :tada: This issue has been resolved in version 15.22.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.22.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2260723194,issue,open,,Only Payment Entries that book advance in Advance account are supported in Payment Reconciliation Tool - Manual Journal Entries should be supported too.,"Currently for ""Advance"" Paid by Payment Entry are only shown in Payment Reconciliation tool for matching with Outstanding Invoices. However Journal Entry for Advances paid manually are not supported. They should be included in the tool so that they can be settled with outstanding Invoices.",pujanthakkar,2024-04-24 08:32:40+00:00,[],2024-05-15 11:35:16+00:00,,https://github.com/frappe/erpnext/issues/41166,"[('feature-request', None)]","[{'comment_id': 2112291575, 'issue_id': 2260723194, 'author': 'Botanium', 'body': ""I am facing this issue as well. I have migrated from V14 to V15 and as per the customers requirements, they wanted open balance instead of migration. Now I have transferred all the Advance Payments as JV, but the system gives me a message box showing that I wont be able to fetch these advance payments in the invoices or the reconciliation tool. Without this feature the system can't cover full transfer for opening balance."", 'created_at': datetime.datetime(2024, 5, 15, 11, 35, 15, tzinfo=datetime.timezone.utc)}]","Botanium on (2024-05-15 11:35:15 UTC): I am facing this issue as well. I have migrated from V14 to V15 and as per the customers requirements, they wanted open balance instead of migration. Now I have transferred all the Advance Payments as JV, but the system gives me a message box showing that I wont be able to fetch these advance payments in the invoices or the reconciliation tool. Without this feature the system can't cover full transfer for opening balance.

"
2260446337,issue,closed,completed,Issue on fetching exchange rate when making sales order from purchase order,"## Step to reproduce the issue:
1. Create a Purchase Order from an existing Sales Order. The Sales Order currency is in IDR, but the Purchase Order currency is in USD.

## Observed result:
1. The exchange rate in PO is not fetched automatically. It shows 1 instead of the correct rate (around 16000)
2. The currency for PO items remains unchanged, not switching to USD.
3. The last PO Item has 0 item price even though there is an item price for that Item

## Expected result:
1. The exchange rate should be fetched automatically when creating a purchase order from a sales order.
2. The currency for items should switch to USD in line with the currency conversion.
3. All items should display their correct prices as per the defined item prices.

## Apps:
ERPNext: v14.56.0 (HEAD)
Frappe Framework: v14.66.0 (HEAD)

**Sales Invoice Doctype**
![image (21)](https://github.com/frappe/frappe/assets/102419837/ca2f0fde-686a-4987-ab3b-5171bb78190b)

**Purchase Order Doctype** 
![image (22)](https://github.com/frappe/frappe/assets/102419837/f8cdff91-b294-429a-b7a8-e7abe954fc93)

**Item Price List Doctype**
![image (23)](https://github.com/frappe/frappe/assets/102419837/e3782d99-4831-4015-ad30-408591850565)",AureliusIvan,2024-04-24 04:40:43+00:00,[],2024-05-09 00:08:27+00:00,2024-04-24 08:36:50+00:00,https://github.com/frappe/erpnext/issues/41163,"[('bug', None)]","[{'comment_id': 2074401924, 'issue_id': 2260446337, 'author': 'Poorvi-R-Bhat', 'body': '1. Exchange rate is being fetched automatically on creating the Purchase Order from Sales Order DocType. \r\n2. Currency is also being set in the Purchase Order DocType from the Sales Order  Doctype.\r\n3. The items are displaying the Item Price based on the Rates and Price List defined on the Item Price DocType.\r\n\r\nSales Order \r\n![image](https://github.com/frappe/erpnext/assets/27720465/d53b4d21-c137-4da0-b097-8089a569f65d)\r\n\r\nPurchase Order\r\n![image](https://github.com/frappe/erpnext/assets/27720465/2c8fe173-8a98-41c5-8600-80e9a7ea6846)', 'created_at': datetime.datetime(2024, 4, 24, 8, 36, 50, tzinfo=datetime.timezone.utc)}]","Poorvi-R-Bhat on (2024-04-24 08:36:50 UTC): 1. Exchange rate is being fetched automatically on creating the Purchase Order from Sales Order DocType. 
2. Currency is also being set in the Purchase Order DocType from the Sales Order  Doctype.
3. The items are displaying the Item Price based on the Rates and Price List defined on the Item Price DocType.

Sales Order 
![image](https://github.com/frappe/erpnext/assets/27720465/d53b4d21-c137-4da0-b097-8089a569f65d)

Purchase Order
![image](https://github.com/frappe/erpnext/assets/27720465/2c8fe173-8a98-41c5-8600-80e9a7ea6846)

"
2259988504,issue,closed,completed,Backport of bank transaction bug fixes,"### Information about bug

https://github.com/frappe/erpnext/pull/39926 is inspired by: https://github.com/frappe/erpnext/pull/36268 and https://github.com/frappe/erpnext/pull/35447

Presumably fixes: https://github.com/frappe/erpnext/issues/35440 originally reported on v14.19

Please could you backport?

version-14-hotfix
version-15-hotfix


### Module

accounts

### Version

v14.19

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-04-24 00:20:41+00:00,[],2024-05-09 00:08:30+00:00,2024-04-24 00:30:56+00:00,https://github.com/frappe/erpnext/issues/41159,"[('bug', None)]","[{'comment_id': 2073709414, 'issue_id': 2259988504, 'author': 'casesolved-co-uk', 'body': 'Oh sorry my bad, already done by @barredterra Raffael Meyer', 'created_at': datetime.datetime(2024, 4, 24, 0, 30, 56, tzinfo=datetime.timezone.utc)}]","casesolved-co-uk (Issue Creator) on (2024-04-24 00:30:56 UTC): Oh sorry my bad, already done by @barredterra Raffael Meyer

"
2259914640,issue,open,,Bug in Consolidated financial statement,"### Information about bug

It seems that this commit beside fixes, introduced some bug as well: 

https://github.com/frappe/erpnext/commit/ae613008be59334e5ff72882ef9d70355f56805e

I will explain. 

E.g. 
setup parent and child company. 
delete 1 account from the parent, but leave the same in the child. 

This method ```validate_entries``` will  correct this problem  successfully. However, it can't since the method ```get_accounts``` now returns accounts from all the companies wherever it finds, but it returns not correctly. So 'it lies' that account is there to the ```validate_entries``` method, but unfortunately it is useless account, an then the balance sheet from that side where deleted account comes from is not generated at all. 

One solution will be adding a ```break``` statement in the for loop in ```get_accounts``` after the first company (main parent) is passed by. I haven't validate whether this will work on more complex structure of companies, but seems it might. 



### Module

accounts

### Version

newest
newest

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",tinodj,2024-04-23 23:01:08+00:00,[],2024-04-23 23:01:08+00:00,,https://github.com/frappe/erpnext/issues/41158,"[('bug', None)]",[],
2259587381,issue,open,,Invoice Creation Tools:,"### Information about bug

Below errors have been noticed. Please check and fix
1. When the user finally clicks on Create Invoice button after providing necessary information, which is invalid, system shows error message and a wrong information message that **Opening Sales Invoices created.** Screenshot attached.
![image](https://github.com/frappe/erpnext/assets/167913308/9e41505b-d11b-40e1-85c2-1d972726f334)
2. While creating Opening invoices, Copy and Paste function does not work in Invoice Number field.
3. In Invoice Creation grid, we have option for providing 2 dates one is for Posting Date and another one for Due Date. In the case of opening invoices, they might already have fallen due before start date of migration to ERPNext. For example, our client decided to migrate to ERPNext on 01-01-2024. They have some customer invoices which have fallen due before 01-01-2024, but ERPNext does not allow to enter any date which is before 01-01-2024. Due to this, we are facing following issues: 1. Aging cannot be calculated properly, report shows wrong information. 2. Due date shown by the report is not correct.

Please check the issues asap and rectify.

### Module

accounts

### Version

Frappe Framework: v15.19.1 (HEAD)
ERPNext: v15.18.3 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",appstomss,2024-04-23 19:08:51+00:00,[],2024-04-23 19:08:51+00:00,,https://github.com/frappe/erpnext/issues/41157,"[('bug', None)]",[],
2258917555,issue,open,,v16 - Add support for discarding documents,"on_discard hooks need to be added to update status fields of transactions. 

Ref: https://github.com/frappe/frappe/pull/25971",ankush,2024-04-23 13:40:26+00:00,[],2024-05-13 12:29:23+00:00,,https://github.com/frappe/erpnext/issues/41155,"[('feature-request', None)]",[],
2258536605,issue,closed,completed,dynamic variable unusable,"### Information about bug

Inbuilt variable for fiscal year is illogical compared to the warning given by the system regarding limitation of numbers for GST. I feel .FY. should be in 2 digit year form.

The system itself previews generating invoice numbers as 19 digits if one simply puts SINV-.FY. as the format whereas the warning on the top says maximum 16 allowed in GST. If we try to combine with fields or more customised naming, the variable .FY. leaves no room for any other variables or fields.


![image](https://github.com/frappe/erpnext/assets/64956588/2c2557e4-ad5a-4fd9-8dae-636183a7cc50)

### Module

accounts

### Version

ERPNext: v15.20.5 (HEAD)
Frappe Framework: v15.23.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",nakul80,2024-04-23 10:40:36+00:00,[],2024-05-11 00:08:31+00:00,2024-04-25 11:53:37+00:00,https://github.com/frappe/erpnext/issues/41152,"[('bug', None)]","[{'comment_id': 2077004512, 'issue_id': 2258536605, 'author': 'Nihantra-Patel', 'body': 'Hi @nakul80,\r\n\r\nThe validation is set within the India Compliance, not within the ERPNext. We are unable to condense the invoice series as users from various regions are working on this series, and only the India region has a validation requirement stating, ""Naming Series should not exceed 16 characters for GST.""\r\n\r\nhttps://github.com/resilient-tech/india-compliance/blob/3bba90d64d35e1b1e42dd9a04d518c1c588aa2d4/india_compliance/public/js/utils.js#L247-L261\r\n\r\nhttps://github.com/resilient-tech/india-compliance/blob/3bba90d64d35e1b1e42dd9a04d518c1c588aa2d4/india_compliance/public/js/transaction.js#L285\r\n\r\n\r\nWhen you create a fiscal year, then define in a small word like (2425).', 'created_at': datetime.datetime(2024, 4, 25, 11, 53, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2077041306, 'issue_id': 2258536605, 'author': 'nakul80', 'body': 'Is it not possible to just give one more variable with condensed fiscal\r\nyears?\r\n\r\nRegards\r\n\r\nNakul\r\n\r\nOn Thu, 25 Apr, 2024, 17:23 Nihantra C. Patel, ***@***.***>\r\nwrote:\r\n\r\n> Closed #41152 <https://github.com/frappe/erpnext/issues/41152> as\r\n> completed.\r\n>\r\n> â€”\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/41152#event-12607121658>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/APPSRLFX2JTMOGY3TATC75DY7DVFPAVCNFSM6AAAAABGUT3AW6VHI2DSMVQWIX3LMV45UABCJFZXG5LFIV3GK3TUJZXXI2LGNFRWC5DJN5XDWMJSGYYDOMJSGE3DKOA>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 4, 25, 12, 15, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2078618840, 'issue_id': 2258536605, 'author': 'Nihantra-Patel', 'body': 'might be possible, but customization is needed.', 'created_at': datetime.datetime(2024, 4, 26, 4, 42, 31, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-25 11:53:37 UTC): Hi @nakul80,

The validation is set within the India Compliance, not within the ERPNext. We are unable to condense the invoice series as users from various regions are working on this series, and only the India region has a validation requirement stating, ""Naming Series should not exceed 16 characters for GST.""

https://github.com/resilient-tech/india-compliance/blob/3bba90d64d35e1b1e42dd9a04d518c1c588aa2d4/india_compliance/public/js/utils.js#L247-L261

https://github.com/resilient-tech/india-compliance/blob/3bba90d64d35e1b1e42dd9a04d518c1c588aa2d4/india_compliance/public/js/transaction.js#L285


When you create a fiscal year, then define in a small word like (2425).

nakul80 (Issue Creator) on (2024-04-25 12:15:07 UTC): Is it not possible to just give one more variable with condensed fiscal
years?

Regards

Nakul

On Thu, 25 Apr, 2024, 17:23 Nihantra C. Patel, ***@***.***>
wrote:

Nihantra-Patel on (2024-04-26 04:42:31 UTC): might be possible, but customization is needed.

"
2258302824,issue,closed,completed,Scan Item in delivery not are very slow fetch in delevery item table,"### Information about bug

When we make delevery note and scan item with barcode than all item price and discount are auto refresh and scan item fetch in around  20 to 40 second

### Module

stock

### Version

Frappe 15.23
ErpNext 15.20.5

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Not error
```
",mmplerp,2024-04-23 08:45:34+00:00,[],2024-06-19 00:08:37+00:00,2024-06-04 09:21:18+00:00,https://github.com/frappe/erpnext/issues/41148,"[('bug', None)]","[{'comment_id': 2147034572, 'issue_id': 2258302824, 'author': 'nabinhait', 'body': ""Can't replicate"", 'created_at': datetime.datetime(2024, 6, 4, 9, 21, 18, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 09:21:18 UTC): Can't replicate

"
2257451960,issue,closed,completed,Bank account import (auto_match_party) has a bug,"### Information about bug

Bug was introduced here: 

https://github.com/frappe/erpnext/commit/dbf7a479b66bc31890b4a957564c7dfdfad49517

on line 114. 

Later (in the next loop iteration) an exception is thrown on line 58, as bank_ac_no is not known field in the table `tabBank Account`. There it is called `bank_account_no`. So, either in employee table/doctype this should be changed to `bank_account_no`, instead of `bank_ac_no`, and in that case this code / this line will not be needed, or, `or_filters` here should be copied or reverted back after checking on Employee. This is in a loop, where it happens Employee not to be the last always to be checked.

part of the exception thrown is as follows: 

``` ""pymysql.err.OperationalError: (1054, ""Unknown column 'tabBank Account.bank_ac_no' in 'where clause'"")"" ``` 

### Module

accounts

### Version

newest
newest

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",tinodj,2024-04-22 20:57:33+00:00,[],2024-06-22 00:09:00+00:00,2024-06-04 10:06:26+00:00,https://github.com/frappe/erpnext/issues/41137,"[('bug', None), ('released', None)]","[{'comment_id': 2148688070, 'issue_id': 2257451960, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 21, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-05 01:22:21 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2255660609,issue,closed,completed,Item Table getting disturbed after changing the Editable Grid unchecked,"### Information about bug

<img width=""1096"" alt=""Screenshot 2024-04-22 at 11 36 37â€¯AM"" src=""https://github.com/frappe/erpnext/assets/21578167/415e876e-a855-4eef-b030-10b7a6673274"">


### Module

other

### Version

ERPNext: v15.20.5 (version-15)

Frappe Framework: v15.23.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",dineshpanchal93,2024-04-22 06:07:13+00:00,[],2024-05-15 00:08:53+00:00,2024-04-30 05:56:33+00:00,https://github.com/frappe/erpnext/issues/41132,"[('bug', None)]","[{'comment_id': 2069137696, 'issue_id': 2255660609, 'author': 'Nihantra-Patel', 'body': 'Did you apply any scripts?', 'created_at': datetime.datetime(2024, 4, 22, 11, 20, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2075497994, 'issue_id': 2255660609, 'author': 'dineshpanchal93', 'body': '@Nihantra-Patel No\r\n\r\nThere is no changes in the frappe and ERPNext not even the client script too', 'created_at': datetime.datetime(2024, 4, 24, 17, 41, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2076348345, 'issue_id': 2255660609, 'author': 'Nihantra-Patel', 'body': ""I don't know, what's going on, but every problem is facing you only! ðŸ˜…\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/8cca8be7-4937-460d-af1b-3668dc800eba"", 'created_at': datetime.datetime(2024, 4, 25, 4, 45, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2084437016, 'issue_id': 2255660609, 'author': 'Nihantra-Patel', 'body': ""Please check with latest version, we haven't found any type of issue."", 'created_at': datetime.datetime(2024, 4, 30, 5, 56, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-22 11:20:02 UTC): Did you apply any scripts?

dineshpanchal93 (Issue Creator) on (2024-04-24 17:41:55 UTC): @Nihantra-Patel No

There is no changes in the frappe and ERPNext not even the client script too

Nihantra-Patel on (2024-04-25 04:45:54 UTC): I don't know, what's going on, but every problem is facing you only! ðŸ˜…


https://github.com/frappe/erpnext/assets/141945075/8cca8be7-4937-460d-af1b-3668dc800eba

Nihantra-Patel on (2024-04-30 05:56:33 UTC): Please check with latest version, we haven't found any type of issue.

"
2255583086,issue,closed,completed,[BUG] Serial and Batch Bundle deadlock during deleting Stock Reconciliation,"### Information about bug

Serial and Batch Bundle causes deadlock during deleting Stock Reconciliation when a reconciliation ivolves batch numbers and have been accidentally Submiited with the bundle. Both of the Doctypes can be Cancelled but after that, they cannot be deleted because two Doctypes in Cancelled state are still bound blocking the Deletion of both Doctypes.

### Module

accounts, stock

### Version

ERPNext: v15.20.6 (version-15)
Frappe Framework: v15.23.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Received while trying to delete Cancelled Stock Reconciliation:
Cannot delete or cancel because Serial and Batch Bundle SABB-00000141 is linked with Stock Reconciliation MAT-RECO-2024-00031
Received while trying to delete Cancelled Serial and Batch Bundle:
Cannot delete or cancel because Serial and Batch Bundle SABB-00000141 is linked with Stock Reconciliation MAT-RECO-2024-00031
```
",toofun666,2024-04-22 05:01:38+00:00,['rohitwaghchaure'],2024-07-02 00:08:58+00:00,2024-06-14 08:31:54+00:00,https://github.com/frappe/erpnext/issues/41129,"[('bug', None)]","[{'comment_id': 2167530166, 'issue_id': 2255583086, 'author': 'rohitwaghchaure', 'body': '@toofun666 We have fixed the issue, kindly pull the latest update and check', 'created_at': datetime.datetime(2024, 6, 14, 8, 31, 55, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-14 08:31:55 UTC): @toofun666 We have fixed the issue, kindly pull the latest update and check

"
2255468491,issue,open,,[FEATURE] External Storage integrations,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
Not all small companies have the budget for paying either local storage or Amazon S3, so we begin working with cheaper CDNs like Cloudflare or Cloudinary.

Right now, Frappe only works with local storage and has an [S3 integration](https://github.com/frappe/storage_integration) plugin, but no other possible ways to integrate storage.

**Describe the solution you'd like**
It would be nice to have an official API or application for universal storage, or, at least, for Cloudinary storage.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
We are a small company and we are testing ERP Next with docker in a local machine before hosting a VPS online.
",SalahAdDin,2024-04-22 02:50:50+00:00,[],2024-08-08 10:57:37+00:00,,https://github.com/frappe/erpnext/issues/41128,"[('feature-request', None)]","[{'comment_id': 2275534447, 'issue_id': 2255468491, 'author': 'oleynikd', 'body': ""@cwerner1 @SalahAdDin I don't think this [S3 integration](https://github.com/frappe/storage_integration) plugin is still relevant. The repo was archived and app removed from Marketplace.\r\nIs there any way to use S3 storage as a main storage for ERPNext? Not just backups, but as a main storage driver?\r\nThanks."", 'created_at': datetime.datetime(2024, 8, 8, 10, 57, 35, tzinfo=datetime.timezone.utc)}]","oleynikd on (2024-08-08 10:57:35 UTC): @cwerner1 @SalahAdDin I don't think this [S3 integration](https://github.com/frappe/storage_integration) plugin is still relevant. The repo was archived and app removed from Marketplace.
Is there any way to use S3 storage as a main storage for ERPNext? Not just backups, but as a main storage driver?
Thanks.

"
2255035527,issue,closed,completed,Error Matching Accounts Cache Data with Account DB,"### Information about bug

When make change in grand father parent Account (location in tree) the lft and rgt of children accounts not matching between database and cache.
this mismatch make a problem in general ledger when you set account filter for one of mismatched accounts
 this example will explain the case:
<img width=""808"" alt=""before"" src=""https://github.com/frappe/erpnext/assets/48605449/b2782fdf-44f8-4d2b-9e83-adb300e30f9d"">

<img width=""808"" alt=""after"" src=""https://github.com/frappe/erpnext/assets/48605449/5c582010-905f-4855-b3e3-8fc0c8936c4c"">





### Module

accounts

### Version

Frappe Version v15.23.0
Erpnext Version v15.20.6

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",osamaerksosi,2024-04-21 11:48:44+00:00,[],2024-07-27 00:08:35+00:00,2024-07-12 13:02:32+00:00,https://github.com/frappe/erpnext/issues/41125,"[('bug', None)]","[{'comment_id': 2076428906, 'issue_id': 2255035527, 'author': 'rmehta', 'body': '`get_cached_doc` is supposed to be used within a transaction. Where are you facing this problem?', 'created_at': datetime.datetime(2024, 4, 25, 5, 59, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2077024913, 'issue_id': 2255035527, 'author': 'osamaerksosi', 'body': 'it used in general ledger report which causes interference and problems in fetching data when we filter by account\r\nhttps://github.com/frappe/erpnext/blob/cacb5bfe03da45b6f7c360a35a48c95c48d8f4e3/erpnext/accounts/report/general_ledger/general_ledger.py#L323', 'created_at': datetime.datetime(2024, 4, 25, 12, 5, 42, tzinfo=datetime.timezone.utc)}]","rmehta on (2024-04-25 05:59:37 UTC): `get_cached_doc` is supposed to be used within a transaction. Where are you facing this problem?

osamaerksosi (Issue Creator) on (2024-04-25 12:05:42 UTC): it used in general ledger report which causes interference and problems in fetching data when we filter by account
https://github.com/frappe/erpnext/blob/cacb5bfe03da45b6f7c360a35a48c95c48d8f4e3/erpnext/accounts/report/general_ledger/general_ledger.py#L323

"
2254699309,issue,closed,completed,[BUG] [DOCUMENTATION] Unable to disable/hide unused apps,"### Information about bug

We are trying to hide/disable all the applications we don't need for our small company.

We followed the current [documentation](https://docs.erpnext.com/docs/user/manual/en/show-hide-modules) but the current home does not have such a feature.

[This documentation](https://github.com/frappe/manual_erpnext_com/blob/master/manual_erpnext_com/www/contents/customize-erpnext/hiding-modules-and-features.md) is also outdated.

Also, we don't find any valid documentation about disabling unused applications since `bench` does not work for production.

What should we do?

### Module
ERPNext

### Version

Frappe: 15.20.6
ERPNext: 15.20.6

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",SalahAdDin,2024-04-20 20:06:32+00:00,[],2024-05-15 00:08:52+00:00,2024-04-30 05:58:29+00:00,https://github.com/frappe/erpnext/issues/41119,"[('bug', None)]","[{'comment_id': 2069153060, 'issue_id': 2254699309, 'author': 'Nihantra-Patel', 'body': 'Please check it.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/d51ea620-c9dc-44dd-9d2f-8b0db9d55e82\r\n\r\nFor the user, then you can disable it from the user doctype. \r\n\r\nAnd if you want to set the role wise workspace, then check the below image.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/52bc90cc-8a90-4216-9592-30aa3d2b70c9)', 'created_at': datetime.datetime(2024, 4, 22, 11, 27, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2070987759, 'issue_id': 2254699309, 'author': 'SalahAdDin', 'body': ""> Please check it.\r\n> scrnli_22_04_2024_16-55-06.mp4\r\n> \r\n> For the user, then you can disable it from the user doctype.\r\n> \r\n> And if you want to set the role wise workspace, then check the below image.\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/141945075/324442365-52bc90cc-8a90-4216-9592-30aa3d2b70c9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjE2MzAsIm5iZiI6MTcxMzgyMTMzMCwicGF0aCI6Ii8xNDE5NDUwNzUvMzI0NDQyMzY1LTUyYmM5MGNjLThhOTAtNDIxNi05NTkyLTMwYWEzZDJiNzBjOS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNDIyJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDQyMlQyMTI4NTBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lYzkzNTY0NTA2YTQyY2NjMWJkOGYyNWRkN2RhYTRlZWViYzM3ZjI5NmNjY2FiZGU2MWVkMzQ4ZDYwZjgzNTQzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.U6ij-cs_r50sO0O9F0iBxJ3VPMjPM4ZLmr6E0STXl8M)\r\n\r\nHiding them one by one is annoying! \r\n\r\nDespite of... why is the documentation outdated? I could not find anything about this clear in the documentation.\r\n\r\nAlso, the Odoo-like iconed dashboard... what happened with it? It is still visible on the documentation.\r\n\r\nDoes Frappe have plans to update the documentation soon?\r\n\r\nFinally, wouldn't it be better to make the module installation available on the ERP setup? Like in Odoo?"", 'created_at': datetime.datetime(2024, 4, 22, 21, 32, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2071388009, 'issue_id': 2254699309, 'author': 'Nihantra-Patel', 'body': ""Hi,\r\n\r\nDifferent ERP systems have varying functionalities, so setting them identically and comparing them isn't feasible. In versions 14 and 15, many functionalities have been updated. We acknowledge that some of the documentation may be outdated. However, you can check the current documentation for [workspace](https://frappeframework.com/docs/user/en/desk/workspace). We will remove the outdated links as soon as possible.\r\n\r\nYou can configure module visibility rights for users directly. However, if you need to set workspace visibility, please refer to the steps provided in the previous post. Currently, there are no other options available.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/6fa27c91-b58b-4d33-a2bb-d149e96e411d)"", 'created_at': datetime.datetime(2024, 4, 23, 4, 31, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2073587758, 'issue_id': 2254699309, 'author': 'SalahAdDin', 'body': ""> Hi,\r\n> \r\n> Different ERP systems have varying functionalities, so setting them identically and comparing them isn't feasible. In versions 14 and 15, many functionalities have been updated. We acknowledge that some of the documentation may be outdated. However, you can check the current documentation for [workspace](https://frappeframework.com/docs/user/en/desk/workspace). We will remove the outdated links as soon as possible.\r\n> \r\n> You can configure module visibility rights for users directly. However, if you need to set workspace visibility, please refer to the steps provided in the previous post. Currently, there are no other options available.\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/141945075/324687239-6fa27c91-b58b-4d33-a2bb-d149e96e411d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM5MTE5NzYsIm5iZiI6MTcxMzkxMTY3NiwicGF0aCI6Ii8xNDE5NDUwNzUvMzI0Njg3MjM5LTZmYTI3YzkxLWI1OGItNGQzMy1hMmJiLWQxNDllOTZlNDExZC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNDIzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDQyM1QyMjM0MzZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0wMmFkY2Y2MTUyNzkyYzllN2NhYmI3MzAwNjA1NWI5YTQwMDA5NDRiNzZiZjBjOWQ4NDE1YjdlNGUxMTk2NWI5JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.fdRkWSC_NPmIeCXqwX0LFiDvaX04wWS9ucfTMe323OI)\r\n\r\nEven Odoo have documentation for each ERP version, is it hard for Frappe to update the documentation?"", 'created_at': datetime.datetime(2024, 4, 23, 22, 35, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2084438764, 'issue_id': 2254699309, 'author': 'Nihantra-Patel', 'body': 'Already updated workspace documentation link provided.\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 4, 30, 5, 58, 29, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-22 11:27:49 UTC): Please check it.


https://github.com/frappe/erpnext/assets/141945075/d51ea620-c9dc-44dd-9d2f-8b0db9d55e82

For the user, then you can disable it from the user doctype. 

And if you want to set the role wise workspace, then check the below image.

![image](https://github.com/frappe/erpnext/assets/141945075/52bc90cc-8a90-4216-9592-30aa3d2b70c9)

SalahAdDin (Issue Creator) on (2024-04-22 21:32:02 UTC): Hiding them one by one is annoying! 

Despite of... why is the documentation outdated? I could not find anything about this clear in the documentation.

Also, the Odoo-like iconed dashboard... what happened with it? It is still visible on the documentation.

Does Frappe have plans to update the documentation soon?

Finally, wouldn't it be better to make the module installation available on the ERP setup? Like in Odoo?

Nihantra-Patel on (2024-04-23 04:31:50 UTC): Hi,

Different ERP systems have varying functionalities, so setting them identically and comparing them isn't feasible. In versions 14 and 15, many functionalities have been updated. We acknowledge that some of the documentation may be outdated. However, you can check the current documentation for [workspace](https://frappeframework.com/docs/user/en/desk/workspace). We will remove the outdated links as soon as possible.

You can configure module visibility rights for users directly. However, if you need to set workspace visibility, please refer to the steps provided in the previous post. Currently, there are no other options available.

![image](https://github.com/frappe/erpnext/assets/141945075/6fa27c91-b58b-4d33-a2bb-d149e96e411d)

SalahAdDin (Issue Creator) on (2024-04-23 22:35:25 UTC): Even Odoo have documentation for each ERP version, is it hard for Frappe to update the documentation?

Nihantra-Patel on (2024-04-30 05:58:29 UTC): Already updated workspace documentation link provided.

Thank You!

"
2254508791,issue,open,, 'Pick Serial / Batch No' in POS Invoice Item,"It would be incredibly helpful if we could have the option to 'Pick Serial / Batch No' in POS invoice items, similar to what is available in sales invoice items. I understand that there an another UI for POS that includes this feature, having it available in the form view as well would be extremely user-friendly.

I've attached some sample screenshots to illustrate the proposed feature. I believe this addition would streamline the invoicing process and enhance the overall usability of ERPNext.

![image](https://github.com/frappe/erpnext/assets/52352092/dc183540-61e8-4920-9fb2-a463f2266a2d)


Thank you for considering my suggestion.",gopikrishnan13,2024-04-20 11:22:05+00:00,[],2024-04-20 11:22:05+00:00,,https://github.com/frappe/erpnext/issues/41117,"[('feature-request', None)]",[],
2254481416,issue,open,,Accounting error in Sales Invoice - Debit and Credit entries dont match when Discount Accounting for Selling is enabled,"### Information about bug

We have enabled the setting : **Enable Discount Accounting for Selling**

Create a Sales Order where items have GST Applicable. Add Discounts also at order level.
Save and Submit SO -- This works as expected.

Create Sales Invoice for this SO. 
Submit -- Error message that Debit and Credit Entries don't match !
The same can be seen when you view Accounting Ledger as well.
<img width=""633"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/935657/a1b08c19-6d3f-4b4b-bfb7-f093a290ca1e"">



### Module

accounts, selling

### Version

ERPNext Version 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",vv-varun,2024-04-20 10:00:15+00:00,[],2024-04-20 10:00:15+00:00,,https://github.com/frappe/erpnext/issues/41116,"[('bug', None)]",[],
2254264382,issue,open,,Transaction Document item UOM set_query should filter & validate from the item UOM table,"### Information about bug

The Item has a list of UOMs plus conversion factors that are valid.
However when adding Items to a transaction, any UOM is allowed and conversion factor is assumed to be 1.

Selection using set_query and validation should be done against the Item UOM table, but only if an item_code exists, otherwise revert back to old behaviour.

### Module

stock

### Version

v16 develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-04-20 00:04:15+00:00,[],2024-06-04 10:19:33+00:00,,https://github.com/frappe/erpnext/issues/41113,[],[],
2254133500,issue,open,,Item Units of Measure requires Maintain Stock to be set,"### Information about bug

The whole Inventory tab of Item requires `is_stock_item` to be set for an item.

However it is conceivable that non-stock items can be sold in multiple different units, for example water in litres or gallons, or consulting in hours or days

### Module

stock

### Version

erpnext v14/v15/v16 develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-04-19 22:32:57+00:00,['nabinhait'],2024-06-04 10:18:54+00:00,,https://github.com/frappe/erpnext/issues/41111,"[('bug', None)]",[],
2254010280,issue,open,,Payment Entry - reference oustanding amount doesn't respect reality,"### Information about bug

Hello, 
we have found this issue:

When we set a Payment Entry with different exchange rate than Sale Invoice has than the outstanding amount is not calculated after submit.

1. Different exchange rates:
![Screenshot from 2024-04-19 22-55-07](https://github.com/frappe/erpnext/assets/121026420/b061b868-e379-4177-9889-fc22986b7e02)

2. The exchange rates are equal:
![Screenshot from 2024-04-19 23-02-41](https://github.com/frappe/erpnext/assets/121026420/7395e93c-f594-46a9-b381-a3c74f706a60)

This outstanding amount provides the dunning resolving but due to this wrong calculation of it the linked dunning is not resolved but it should be.

Thanks

Jiri Sir

### Module

accounts

### Version

ERPNext: v15.20.3 (HEAD)

Frappe Framework: v15.23.0 (HEAD)

Frappe HR: v15.17.0 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",tonspar,2024-04-19 21:10:22+00:00,[],2024-04-19 21:10:22+00:00,,https://github.com/frappe/erpnext/issues/41110,"[('bug', None)]",[],
2253422119,issue,closed,completed,"[Bug] - POS - Point of Sale breaks when using ""Non-default Mode of Payment""","### Information about bug

POS breaks when using non default mode of payment. I think it is related to **""Update Account Number / Name""** feature under ""Accounts"". 

**After troubleshooting I figured that: Bug is caused by using Special characters like **\ ; -- # % & ()** as ""Mode of Payment"" name filled** It gets fixed after utilizing regular letters






### **Visuals**
Non Default ""Mode of Payment"":
(Does not work): Does not let me enter the ammount
![image](https://github.com/frappe/erpnext/assets/71740113/400000f9-8b36-4bd2-a80b-7b9a1a4e0449)
![image](https://github.com/frappe/erpnext/assets/71740113/5f5e86fd-6325-482f-a747-fc913d52ab90)
![image](https://github.com/frappe/erpnext/assets/71740113/c8c22efc-49fb-4e1e-ab97-fc5dd91ebe6c)


Default ""Mode of Payment"": Cash
(Works Fine)
![image](https://github.com/frappe/erpnext/assets/71740113/13822e05-c53c-4bdb-ba53-0b04edc0eab2)
![image](https://github.com/frappe/erpnext/assets/71740113/e223fdef-8760-456f-be67-d7100e9ae64f)


### Module

stock, selling

### Version

ERPNext: v15.20.2

Frappe Framework: v15.21.0

Frappe HR: v15.17.0

Payments: v0.0.1

Webshop: v0.0.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",GeoCommander,2024-04-19 16:32:12+00:00,['diptanilsaha'],2025-01-16 00:10:18+00:00,2024-12-30 07:57:51+00:00,https://github.com/frappe/erpnext/issues/41108,"[('bug', None), ('POS', None), ('released', None)]","[{'comment_id': 2566916132, 'issue_id': 2253422119, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.78.6 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.6)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 1, 8, 57, 44, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-01 08:57:44 UTC): :tada: This issue has been resolved in version 14.78.6 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.6)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2252880530,issue,open,,Batch qty is not updated when it is deactivated,"### Information about bug

Currently, you can create a Purchase Receipt and add stock to a deactivated batch. However, the qty of the batch will not be updated.

Either
- it should not be allowed to add stock to a deactivated batch, or
- batch qty should be updated, even when it is deactivated

### Module

stock

### Version

ERPNext: v15.20.5 (HEAD)
Frappe Framework: v15.23.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",carstenblt,2024-04-19 12:38:50+00:00,[],2024-04-19 12:38:50+00:00,,https://github.com/frappe/erpnext/issues/41105,"[('bug', None)]",[],
2252815583,issue,open,,POS Total Amount not changing on removal of an item from cart.,"### Information about bug

In POS, whenever we remove an item from cart, the total amount of cart doesn't get refreshed and ends with the error in console.
![image](https://github.com/frappe/erpnext/assets/40687270/97450f74-1d62-4853-88cc-6bec4b476ab7)



### Module

selling

### Version

Frappe Version :  v15.23.0
ERPNext Version : v15.20.5

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'price_list_rate')
    at Object.round_floats_in (model.js:793:25)
    at FormController._set_values_for_item_list (transaction.js:1700:17)
    at frappe.run_serially.me.in_apply_price_list (transaction.js:1800:12)

TypeError: Cannot read properties of undefined (reading 'price_list_rate')
    at Object.round_floats_in (model.js:793:25)
    at FormController._set_values_for_item_list (transaction.js:1700:17)
    at Object.callback [as original_callback] (transaction.js:1590:9)
    at opts.callback (form.js:1725:36)
    at Object.callback [as success_callback] (request.js:85:16)
    at 200 (request.js:133:34)
    at Object.<anonymous> (request.js:305:6)
    at fire (jquery.js:3213:31)
    at Object.fireWith [as resolveWith] (jquery.js:3343:7)
    at done (jquery.js:9617:14)
```
",nrhdasa,2024-04-19 12:08:32+00:00,[],2024-04-19 12:11:33+00:00,,https://github.com/frappe/erpnext/issues/41103,"[('bug', None)]",[],
2252219985,issue,closed,not_planned,Pick List issue -> X units of Item Y is picked in another Pick List.,"### Information about bug

We have the following issue, after creating a second pick list (e.g. we already delivered a few items, and now we have the missing items available)

X units of Item Y is picked in another Pick List.


### Module

stock, manufacturing

### Version

erpnext 15.20.5
frappe 15.23.0
hrms 15.19.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
---
```
",schmutzfuss42,2024-04-19 06:54:49+00:00,[],2024-05-05 00:08:42+00:00,2024-04-20 01:57:10+00:00,https://github.com/frappe/erpnext/issues/41092,"[('bug', None)]","[{'comment_id': 2067510780, 'issue_id': 2252219985, 'author': 'schmutzfuss42', 'body': 'away', 'created_at': datetime.datetime(2024, 4, 20, 1, 57, 11, tzinfo=datetime.timezone.utc)}]","schmutzfuss42 (Issue Creator) on (2024-04-20 01:57:11 UTC): away

"
2252197528,issue,open,,Validation checks on Supplier Quotation against original RFQ,"### Information about bug

**Scenario:**
I am able to add a supplier quotation without checking if the quotation actually fulfils my order. Let's say I have ordered 20 cameras and 40 batteries. There are 15 suppliers who can fill in their prices.

**There are 2 important validations/notifications we should have:**
- Some suppliers don't have all the items in the request list, and fill in partial items, say only cameras.
- Supplier only fills in 15 cameras instead of 20, say due to stock shortage.

### Module

buying

### Version

Frappe  - 15.21.0 
Erpnext - 15.19.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",thenbdev,2024-04-19 06:38:14+00:00,[],2024-05-06 13:39:02+00:00,,https://github.com/frappe/erpnext/issues/41091,"[('bug', None)]","[{'comment_id': 2085948745, 'issue_id': 2252197528, 'author': 'casesolved-co-uk', 'body': 'The process should work:\r\n\r\n- RFQ (Request for Quotation)\r\n- Supplier Quotation\r\n- Purchase Order\r\n\r\nSo when you say ""checking if the quotation actually fulfils my order"" do you actually mean RFQ? Because the order happens afterward.', 'created_at': datetime.datetime(2024, 4, 30, 16, 45, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2088909457, 'issue_id': 2252197528, 'author': 'thenbdev', 'body': 'I am looking at Supplier Quotation and Purchase Order. When a supplier gives a quotation, the supplier, in the current construct can drop out some item(s), from RFQ. When analysing supplier quotations for generating a PO, a user currently needs to validate all the supplier quotation to identify if item(s) is/are missing.', 'created_at': datetime.datetime(2024, 5, 1, 18, 44, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2088932077, 'issue_id': 2252197528, 'author': 'casesolved-co-uk', 'body': 'Then I think you need to revise your issue description to make it clear the validation needs to happen against the original RFQ (not order)', 'created_at': datetime.datetime(2024, 5, 1, 19, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2096044702, 'issue_id': 2252197528, 'author': 'thenbdev', 'body': 'the description is to validate supplier quotation. I have updated the description to add that we are comparing against original RFQ.', 'created_at': datetime.datetime(2024, 5, 6, 13, 39, 1, tzinfo=datetime.timezone.utc)}]","casesolved-co-uk on (2024-04-30 16:45:12 UTC): The process should work:

- RFQ (Request for Quotation)
- Supplier Quotation
- Purchase Order

So when you say ""checking if the quotation actually fulfils my order"" do you actually mean RFQ? Because the order happens afterward.

thenbdev (Issue Creator) on (2024-05-01 18:44:55 UTC): I am looking at Supplier Quotation and Purchase Order. When a supplier gives a quotation, the supplier, in the current construct can drop out some item(s), from RFQ. When analysing supplier quotations for generating a PO, a user currently needs to validate all the supplier quotation to identify if item(s) is/are missing.

casesolved-co-uk on (2024-05-01 19:01:28 UTC): Then I think you need to revise your issue description to make it clear the validation needs to happen against the original RFQ (not order)

thenbdev (Issue Creator) on (2024-05-06 13:39:01 UTC): the description is to validate supplier quotation. I have updated the description to add that we are comparing against original RFQ.

"
2252046716,issue,closed,completed,Autoselection of Batch Bundle on Point of Sale,"The POS of Sale process could be much faster provided that users don't have to select the batch number each time they have a batched item on the item cart.

![Screenshot 2024-04-17 095829](https://github.com/frappe/erpnext/assets/164153267/a5a0b661-3386-45ed-adcb-7607789313af)

From the screenshot above, the item is set up as having their batch automatically created.

![Screenshot 2024-04-17 095946](https://github.com/frappe/erpnext/assets/164153267/61c9a1dd-0ca5-4c96-9632-fdf6f4ed50c6)

Stock Settings have also been set up to auto create the serial and batch bundle for all outward stock movement.

![Screenshot 2024-04-17 100107](https://github.com/frappe/erpnext/assets/164153267/bb1235dc-a8a8-4935-9abb-d834f4827151)

However at the point of checkout on the Point Of Sale, the batched item is removed from the cart due to the batch number not being selected.

Just as Batch bundles are being automatically picked when it comes to the other normal sales process, having the same applicable for the Point of Sale will be really useful.
<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",Skoros16,2024-04-19 04:15:07+00:00,[],2024-05-04 00:09:19+00:00,2024-04-19 05:17:40+00:00,https://github.com/frappe/erpnext/issues/41088,"[('feature-request', None)]","[{'comment_id': 2065779600, 'issue_id': 2252046716, 'author': 'Nihantra-Patel', 'body': 'Duplicate Issue: #41070', 'created_at': datetime.datetime(2024, 4, 19, 5, 17, 40, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-19 05:17:40 UTC): Duplicate Issue: #41070

"
2249905326,issue,closed,completed,Automatic Comment showing in today's date,"### Information about bug

In the lead doc when I am opening any lead it is showing a comment on my name and on today's date but that was not submitted by me.

we checked it with different user in their account that same lead is showing on their name and same on today's date how it is happening 

![image](https://github.com/frappe/erpnext/assets/70105075/11e6f9e7-79c2-4d98-a314-73173d7f627b)
Screenshot of user1

![image](https://github.com/frappe/erpnext/assets/70105075/c9d2b882-50bf-4db4-b82c-929b28fd56f6)
Screenshot of user2

What is this issue?


### Module

CRM

### Version

ERPNext: v14.43.0 (HEAD)
Frappe Framework: v14.51.0 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Sunil-Codes,2024-04-18 06:54:48+00:00,[],2024-05-04 00:09:24+00:00,2024-04-18 12:37:07+00:00,https://github.com/frappe/erpnext/issues/41082,"[('bug', None)]","[{'comment_id': 2063766838, 'issue_id': 2249905326, 'author': 'Nihantra-Patel', 'body': ""If you don't know, open then unhide table and check it.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/474c8627-6350-4bc4-8056-d83a9592fedc"", 'created_at': datetime.datetime(2024, 4, 18, 12, 37, 7, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-18 12:37:07 UTC): If you don't know, open then unhide table and check it.


https://github.com/frappe/erpnext/assets/141945075/474c8627-6350-4bc4-8056-d83a9592fedc

"
2249862745,issue,closed,completed,Issues with Item Tax Rate,"## Introduction

Item tax rate is a field that's updated in items table (eg: Sales Invoice Item) and used to update total taxes.

**Workflow**: Item Tax Template => Updates Item Tax Rate => Updates Final Taxes.

Hence it's crucial to ensure Item tax template and Item tax rate are consistent.

eg: Item Tax Rate:
{""Output Tax SGST - RT"": 6.0, ""Output Tax CGST - RT"": 6.0, ""Output Tax IGST - RT"": 12.0, ""Input Tax SGST - RT"": 6.0, ""Input Tax CGST - RT"": 6.0, ""Input Tax IGST - RT"": 12.0, ""Input Tax SGST RCM - RT"": 6.0, ""Input Tax CGST RCM - RT"": 6.0, ""Input Tax IGST RCM - RT"": 12.0}

## Issues

We found following two cases where it's inconsistent.

### Item tax rate is only updated in UI and not backend.

Reference: Function: [get_item_tax_info](https://github.com/frappe/erpnext/blob/develop/erpnext/stock/get_item_details.py#L520)

This causes issues when trying to use data import tool to import transactions.

### Item tax rate is set even after Item Tax Template is removed

Steps on how to replicate this issue
- Create one item with only one item tax template
- Create a transaction for this item. This should auto-fetch item tax template.
- Unset item tax template from the item. Save

With unset, it doesn't unset item tax rate, causing incorrect final taxes.

### Module

accounts

### Version

Frappe & ERPNext Develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",vorasmit,2024-04-18 06:31:40+00:00,[],2025-01-16 00:10:20+00:00,2024-12-31 10:20:40+00:00,https://github.com/frappe/erpnext/issues/41081,"[('bug', None), ('released', None)]","[{'comment_id': 2566916102, 'issue_id': 2249862745, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.78.6 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.6)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 1, 8, 57, 38, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-01 08:57:38 UTC): :tada: This issue has been resolved in version 14.78.6 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.6)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2249720453,issue,closed,completed,Can't Purchase Return when One of Batch is Not Available or Not Completed,"### Information about bug

I have a Purchase Receipt with batch items. For example, I have one item with 10 batches. When one of the batches is empty or sold out, I couldn't create a purchase return. I believe a purchase return should be possible as long as the purchase return has not been submitted.

<img width=""699"" alt=""Screenshot 2024-04-18 at 11 32 42"" src=""https://github.com/frappe/erpnext/assets/1784964/68ef6659-33d0-4651-971d-560d6e4c9774"">
create purchase return in purchase receipt
FYI:  I have enable ""Allow Negative""

### Module

stock

### Version

ERPNext: v15.20.3 (version-15)

Frappe Framework: v15.22.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Batch No BMJ2404170344 of an Item JM00000002 has negative stock of quantity -20.0 in the warehouse Stores - JMT
```
",xhijack,2024-04-18 04:33:26+00:00,[],2024-05-09 00:08:26+00:00,2024-04-20 14:18:13+00:00,https://github.com/frappe/erpnext/issues/41080,"[('bug', None)]","[{'comment_id': 2063550144, 'issue_id': 2249720453, 'author': 'rohitwaghchaure', 'body': ""Allow negative stock doesn't make Sense for Batch or serial no, if the batch has already consumed then how could you return it?"", 'created_at': datetime.datetime(2024, 4, 18, 10, 34, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2067725151, 'issue_id': 2249720453, 'author': 'xhijack', 'body': ""I understand that if all batches have been sold, then it's not possible to return them. However, the main issue lies elsewhere. For example, I create a purchase receipt for 10 different batches. Then, I make a sale for 1 batch, leaving me with 9 batches. However, when I try to make a return, the system rejects it because 1 batch is no longer available. Returns should still be possible as long as I have the remaining 9 batches."", 'created_at': datetime.datetime(2024, 4, 20, 16, 40, 20, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-04-18 10:34:03 UTC): Allow negative stock doesn't make Sense for Batch or serial no, if the batch has already consumed then how could you return it?

xhijack (Issue Creator) on (2024-04-20 16:40:20 UTC): I understand that if all batches have been sold, then it's not possible to return them. However, the main issue lies elsewhere. For example, I create a purchase receipt for 10 different batches. Then, I make a sale for 1 batch, leaving me with 9 batches. However, when I try to make a return, the system rejects it because 1 batch is no longer available. Returns should still be possible as long as I have the remaining 9 batches.

"
2249541629,issue,open,,Expected Delivery Date on Purchase Order (Parent) DocType ,"In the Purchase Order parent DocType, we already have a Required By field from where the Purchase Order Item child table fetches the value for Required By value for each item, eliminating the repetitive task of having to enter this required date for each item.

Since we also have an Expected Delivery Date field in the child table, we should also have this same field with the same functionality in the parent document. 

Currently we have to add these manually one by one and when there are many items in the Purchase Order, it is quite frustrating for our purchase users.

The same reasons why we have a Required By in the parent document also apply to having an Expected Delivery Date field in the parent document.

",jayfiro,2024-04-18 01:18:52+00:00,[],2024-04-18 01:18:52+00:00,,https://github.com/frappe/erpnext/issues/41079,"[('feature-request', None)]",[],
2248456080,issue,open,,Update causing issues with CSV export,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

Hi,

We have a stock report which we export manually 3 times a day. Recently it seems that the CSV export settings have changed so that â€˜CSV quotingâ€™ is set to â€˜Non-Numericâ€™ (Screenshot attached). Is there a way to change this so that the default is set to â€˜minimalâ€™ as it is messing up with imports we use on another system.

Thanks,
Liam
![Screenshot 2024-04-16 at 11 48 03](https://github.com/frappe/erpnext/assets/167328715/8591eb2f-b310-4963-9e18-5f4b191d4f9d)


",LiamCav99,2024-04-17 14:34:24+00:00,[],2024-04-17 14:34:24+00:00,,https://github.com/frappe/erpnext/issues/41071,"[('feature-request', None)]",[],
2248417862,issue,open,,Autoselection of Batch Bundle on the Point of Sale,"The POS of Sale process could be much faster provided that users don't have to select the batch number each time they have a batched item on the item cart. 

![Screenshot 2024-04-17 163544](https://github.com/frappe/erpnext/assets/164153267/5c1540ce-0b1a-4c8d-9c52-5d33276e544c)

From the screenshot above, the item is set up as having their batch automatically created. 

![Screenshot 2024-04-17 163638](https://github.com/frappe/erpnext/assets/164153267/ba4dd9db-1ddf-475d-8d45-b5c4bb874828)

Stock Settings have also been set up to auto create the serial and batch bundle for all outward stock movement.

![Screenshot 2024-04-17 163855](https://github.com/frappe/erpnext/assets/164153267/d3788940-02b1-42b1-a16a-7dead3e2811a)

However at the point of checkout on the Point Of Sale, the batched item is removed from the cart due to the batch number not being selected. 



Just as Batch bundles are being automatically picked when it comes to the other normal sales process, having the same applicable for the Point of Sale will be really useful. 








<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",Skoros16,2024-04-17 14:17:35+00:00,[],2024-04-17 14:17:35+00:00,,https://github.com/frappe/erpnext/issues/41070,"[('feature-request', None)]",[],
2248237534,issue,open,,bank reconcilation tool not recognising matching journal and payment entry,"### Information about bug

Bank reconcilation tool is not matching available journal or payment entry inpite the records are already existing with same amount and date. 
I am not referring auto reconcile. 
I am only referring the manual reconciliation when pressing action>Match against voucher

### Module

accounts

### Version

ERPNext: v15.20.3 (HEAD)

Frappe Framework: v15.22.0 (HEAD)

Frappe HR: v15.17.0 (HEAD)

India Compliance: v15.7.2 (HEAD)

Payments: v0.0.1 (HEAD)



### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",sapl-santhosh,2024-04-17 12:58:12+00:00,[],2024-08-04 01:29:45+00:00,,https://github.com/frappe/erpnext/issues/41069,"[('bug', None)]","[{'comment_id': 2266145702, 'issue_id': 2248237534, 'author': 'git529', 'body': 'we are seeing the same problem.. any workaround?', 'created_at': datetime.datetime(2024, 8, 2, 21, 6, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2267232197, 'issue_id': 2248237534, 'author': 'git529', 'body': 'After 2 hours tinkering, I found a workaround.\r\n1. Unreconcile bank transaction\r\n2. Eliminate (cancel + delete) the payment entry or journal entry\r\n3. Go back to Ban Reconciliation Tool, find the bank transaction\r\n4. Click Actions and select Action + Create Voucher + Journal Entry\r\n5. Open Bank Clearance tool\r\n6. Select Bank Account and Dates, then Get Payment Entries\r\n7. Then enter clearance date on the populated journal entry', 'created_at': datetime.datetime(2024, 8, 4, 1, 29, 44, tzinfo=datetime.timezone.utc)}]","git529 on (2024-08-02 21:06:41 UTC): we are seeing the same problem.. any workaround?

git529 on (2024-08-04 01:29:44 UTC): After 2 hours tinkering, I found a workaround.
1. Unreconcile bank transaction
2. Eliminate (cancel + delete) the payment entry or journal entry
3. Go back to Ban Reconciliation Tool, find the bank transaction
4. Click Actions and select Action + Create Voucher + Journal Entry
5. Open Bank Clearance tool
6. Select Bank Account and Dates, then Get Payment Entries
7. Then enter clearance date on the populated journal entry

"
2248119183,issue,closed,completed,Enable Prepared Report - Change Auto,"### Information about bug


https://github.com/frappe/erpnext/assets/21578167/a3b0c852-052d-44ae-9155-3e2bb0eb77f2



### Module

other

### Version

ERPNext: v15.19.0 (version-15)

Frappe Framework: v15.20.0 (version-15)

Frappe HR: v15.16.0 (version-15)

India Compliance: v15.7.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
https://discuss.frappe.io/t/we-have-migrate-from-v14-to-v15-with-no-customisation/121294/3
```
",dineshpanchal93,2024-04-17 12:00:46+00:00,[],2024-05-02 00:08:19+00:00,2024-04-17 12:34:30+00:00,https://github.com/frappe/erpnext/issues/41068,"[('bug', None)]","[{'comment_id': 2061157878, 'issue_id': 2248119183, 'author': 'Nihantra-Patel', 'body': 'After untick the ""Enable Prepared Report"", please refresh the page (ctrl + shift + R)\r\n\r\nPlease check it out.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/898f50ef-678d-43e4-bb67-e55d2564b188', 'created_at': datetime.datetime(2024, 4, 17, 12, 34, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061284326, 'issue_id': 2248119183, 'author': 'dineshpanchal93', 'body': '@Nihantra-Patel I know its working fine my end as well\r\n\r\nIf I set the new site with no data and having less data it worked fine\r\n\r\nBut if the report is too lengthy and anyone is migrated from v14 to v15 these problems arrives\r\n\r\nI hope you can have a look into it.', 'created_at': datetime.datetime(2024, 4, 17, 13, 37, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061305898, 'issue_id': 2248119183, 'author': 'Nihantra-Patel', 'body': ""Also, I tried with a general ledger and a stock ledger because, as you know, ledgers have a lot of data, but we haven't found the issue. and after your first message, i migrated the v14 data to v15, so no issue was found. but i will try multiple ways; if I find anything, then will update you."", 'created_at': datetime.datetime(2024, 4, 17, 13, 47, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061347143, 'issue_id': 2248119183, 'author': 'dineshpanchal93', 'body': 'Sure thanks !!!', 'created_at': datetime.datetime(2024, 4, 17, 14, 5, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061355579, 'issue_id': 2248119183, 'author': 'dineshpanchal93', 'body': 'I tried with updating the latest version\r\n\r\nERPNext: v15.20.5 (version-15)\r\nFrappe Framework: v15.23.0 (version-15)\r\n\r\nif you can find anything in below attached video even I am confusing\r\n\r\nhttps://github.com/frappe/erpnext/assets/21578167/002366b6-91b7-4b0a-a748-34000178df13\r\n\r\nI tried all settings somewhere i am wrong.', 'created_at': datetime.datetime(2024, 4, 17, 14, 9, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061376751, 'issue_id': 2248119183, 'author': 'Nihantra-Patel', 'body': ""ðŸ˜… This also occurs in version 14 and 15 if there is a lot of data, making it necessary to prepare data without generating a report. It's a common occurrence, which is why the Prepared Report feature is provided. When users generate a report, they can easily check it without wasting time.\r\n\r\nFor instance, if you have 5 years of data stored in the system and you disable the prepare report option, the report will take approximately 3-4 minutes to generate. However, if you enable the prepare report option, you first set the filters and generate the report, saving around 80% of your time.\r\n\r\nhope this helps! ðŸ˜‰"", 'created_at': datetime.datetime(2024, 4, 17, 14, 19, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061617846, 'issue_id': 2248119183, 'author': 'dineshpanchal93', 'body': ""@Nihantra-Patel  I See.\r\n\r\nThis same data I have in v14 as well I won't get any auto option for the generate report. but anyway, we need to find some different solutions. if I have anything, I will let you know.\r\n\r\nThank you so much for getting back to me so quickly."", 'created_at': datetime.datetime(2024, 4, 17, 15, 48, 41, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-17 12:34:30 UTC): After untick the ""Enable Prepared Report"", please refresh the page (ctrl + shift + R)

Please check it out.


https://github.com/frappe/erpnext/assets/141945075/898f50ef-678d-43e4-bb67-e55d2564b188

dineshpanchal93 (Issue Creator) on (2024-04-17 13:37:58 UTC): @Nihantra-Patel I know its working fine my end as well

If I set the new site with no data and having less data it worked fine

But if the report is too lengthy and anyone is migrated from v14 to v15 these problems arrives

I hope you can have a look into it.

Nihantra-Patel on (2024-04-17 13:47:31 UTC): Also, I tried with a general ledger and a stock ledger because, as you know, ledgers have a lot of data, but we haven't found the issue. and after your first message, i migrated the v14 data to v15, so no issue was found. but i will try multiple ways; if I find anything, then will update you.

dineshpanchal93 (Issue Creator) on (2024-04-17 14:05:41 UTC): Sure thanks !!!

dineshpanchal93 (Issue Creator) on (2024-04-17 14:09:34 UTC): I tried with updating the latest version

ERPNext: v15.20.5 (version-15)
Frappe Framework: v15.23.0 (version-15)

if you can find anything in below attached video even I am confusing

https://github.com/frappe/erpnext/assets/21578167/002366b6-91b7-4b0a-a748-34000178df13

I tried all settings somewhere i am wrong.

Nihantra-Patel on (2024-04-17 14:19:12 UTC): ðŸ˜… This also occurs in version 14 and 15 if there is a lot of data, making it necessary to prepare data without generating a report. It's a common occurrence, which is why the Prepared Report feature is provided. When users generate a report, they can easily check it without wasting time.

For instance, if you have 5 years of data stored in the system and you disable the prepare report option, the report will take approximately 3-4 minutes to generate. However, if you enable the prepare report option, you first set the filters and generate the report, saving around 80% of your time.

hope this helps! ðŸ˜‰

dineshpanchal93 (Issue Creator) on (2024-04-17 15:48:41 UTC): @Nihantra-Patel  I See.

This same data I have in v14 as well I won't get any auto option for the generate report. but anyway, we need to find some different solutions. if I have anything, I will let you know.

Thank you so much for getting back to me so quickly.

"
2247997827,issue,closed,completed,Serial number Warranty expiry issue,"### Information about bug

![Screenshot 2024-04-17 160912](https://github.com/frappe/erpnext/assets/109452795/f9ad7831-f7b6-44f0-9867-61458ce568a8)
The item inventory shows the warranty period is set to 365 days

![Screenshot 2024-04-17 160951](https://github.com/frappe/erpnext/assets/109452795/4e9f1152-e6fe-4957-bbd4-d2f3eb1c8487)
Inspite of that serial number does not shows the warranty expiry date and warranty period. 


![Screenshot 2024-04-17 161333](https://github.com/frappe/erpnext/assets/109452795/d9774ddc-0cbb-43ca-8ea6-59befddbc0e9)
This is the serial number document showing warrant expiry and warranty period details. this was created before your serial number and batch bundle option. V14.

This system was pretty good. 
It has serial number creating document link. 
 as well as despatch document details. whether it may be delivery note or sales invoice. 
 
 is there any option to go back to that previous system, 
 
 Because at a glance we can see from the serial number doc 
 1) warranty expiry details
 2) who is the customer 
 


### Module

stock

### Version

ERPNext: v15.20.3 (HEAD)

Frappe Framework: v15.22.0 (HEAD)

Frappe HR: v15.17.0 (HEAD)

India Compliance: v15.7.2 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",sapl-santhosh,2024-04-17 10:55:11+00:00,['rohitwaghchaure'],2025-02-01 00:11:09+00:00,2025-01-17 14:03:18+00:00,https://github.com/frappe/erpnext/issues/41064,"[('bug', None)]","[{'comment_id': 2061052572, 'issue_id': 2247997827, 'author': 'sapl-santhosh', 'body': 'Also updated the stock settings to use serial number and batch\r\n![Screenshot 2024-04-17 165633](https://github.com/frappe/erpnext/assets/109452795/bfde9010-5b6e-48c4-80cd-59b168eb8b1c)\r\n![Screenshot 2024-04-17 165746](https://github.com/frappe/erpnext/assets/109452795/9ae6c41a-7c10-4b40-9cfd-08b9292c6cc5)\r\n\r\nInspite of that the serial number doc does not shows the warranty expiry date. \r\n\r\nIs there any solutions to solve this or totally go back this things in version 14', 'created_at': datetime.datetime(2024, 4, 17, 11, 34, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2061188448, 'issue_id': 2247997827, 'author': 'sapl-santhosh', 'body': 'Is there any place where the Warranty expiry is being updated based on \r\n1) inventory item warranty days\r\n2) based on the delivery documents like Delivery note or sales invoice.', 'created_at': datetime.datetime(2024, 4, 17, 12, 51, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2063597303, 'issue_id': 2247997827, 'author': 'sapl-santhosh', 'body': 'for your additional information in V14. \r\nwe used to create a warranty certificate print template from this serial number doc which has\r\n\r\nSerial No. \r\nItem name and description\r\nCustomer name (fetched from the despatch document details)\r\nwarranty expiry date.\r\n\r\nand below we  have some bla bla bla terms and conditions of warranty.  and use this to send customer as warranty certificate. \r\n\r\nwe are missing this in V15', 'created_at': datetime.datetime(2024, 4, 18, 11, 0, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066173765, 'issue_id': 2247997827, 'author': 'sapl-santhosh', 'body': 'here is a short video from V14\r\n[Recording 2024-04-19 144402.zip](https://github.com/frappe/erpnext/files/15038200/Recording.2024-04-19.144402.zip)', 'created_at': datetime.datetime(2024, 4, 19, 9, 19, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066203609, 'issue_id': 2247997827, 'author': 'sapl-santhosh', 'body': ""[4545.pdf](https://github.com/frappe/erpnext/files/15038340/4545.pdf)\r\nthis is a serial no doctype pdf copy having all details of that serial number \r\n1) item details\r\n2) customer details\r\n3) warranty details\r\n\r\nIn support angle these information on a single document is very useful. \r\n\r\nI don't want to report these as issues, may be you can consider as a feature request."", 'created_at': datetime.datetime(2024, 4, 19, 9, 37, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598435985, 'issue_id': 2247997827, 'author': 'rohitwaghchaure', 'body': 'Since the issue has fixed, closing the ticket', 'created_at': datetime.datetime(2025, 1, 17, 14, 3, 18, tzinfo=datetime.timezone.utc)}]","sapl-santhosh (Issue Creator) on (2024-04-17 11:34:31 UTC): Also updated the stock settings to use serial number and batch
![Screenshot 2024-04-17 165633](https://github.com/frappe/erpnext/assets/109452795/bfde9010-5b6e-48c4-80cd-59b168eb8b1c)
![Screenshot 2024-04-17 165746](https://github.com/frappe/erpnext/assets/109452795/9ae6c41a-7c10-4b40-9cfd-08b9292c6cc5)

Inspite of that the serial number doc does not shows the warranty expiry date. 

Is there any solutions to solve this or totally go back this things in version 14

sapl-santhosh (Issue Creator) on (2024-04-17 12:51:28 UTC): Is there any place where the Warranty expiry is being updated based on 
1) inventory item warranty days
2) based on the delivery documents like Delivery note or sales invoice.

sapl-santhosh (Issue Creator) on (2024-04-18 11:00:42 UTC): for your additional information in V14. 
we used to create a warranty certificate print template from this serial number doc which has

Serial No. 
Item name and description
Customer name (fetched from the despatch document details)
warranty expiry date.

and below we  have some bla bla bla terms and conditions of warranty.  and use this to send customer as warranty certificate. 

we are missing this in V15

sapl-santhosh (Issue Creator) on (2024-04-19 09:19:22 UTC): here is a short video from V14
[Recording 2024-04-19 144402.zip](https://github.com/frappe/erpnext/files/15038200/Recording.2024-04-19.144402.zip)

sapl-santhosh (Issue Creator) on (2024-04-19 09:37:45 UTC): [4545.pdf](https://github.com/frappe/erpnext/files/15038340/4545.pdf)
this is a serial no doctype pdf copy having all details of that serial number 
1) item details
2) customer details
3) warranty details

In support angle these information on a single document is very useful. 

I don't want to report these as issues, may be you can consider as a feature request.

rohitwaghchaure (Assginee) on (2025-01-17 14:03:18 UTC): Since the issue has fixed, closing the ticket

"
2247954489,issue,closed,completed,Balance Qty Stock balance different from Balance Qty Stock ledger,"### Information about bug

Hello, The issue that i am having is about the balance qty in my stock balance differing from the qty displayed in the stock ledger for some items. This is affecting me to the point that it is allowing negative stock in the system wvwn though I have disabled that feature. So, If there is any assistance you can provide on this issue i would be grateful.
Thank you.

### Module

stock

### Version

ERPNext: v13.42.4 (version-13)

Frappe Framework: v13.46.0 (version-13)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",KamHerve,2024-04-17 10:31:26+00:00,[],2024-05-04 00:09:25+00:00,2024-04-18 10:36:07+00:00,https://github.com/frappe/erpnext/issues/41063,"[('bug', None)]","[{'comment_id': 2063553957, 'issue_id': 2247954489, 'author': 'rohitwaghchaure', 'body': ""Since this issue is related to data, it's difficult to identify the issue without looking into data. If your site has hosted on frappe cloud and you have support plan then please create a support ticket."", 'created_at': datetime.datetime(2024, 4, 18, 10, 36, 7, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-04-18 10:36:07 UTC): Since this issue is related to data, it's difficult to identify the issue without looking into data. If your site has hosted on frappe cloud and you have support plan then please create a support ticket.

"
2247949530,issue,closed,completed,Warranty claim document not fetching serial number by customer name,"### Information about bug

In the warranty claim document, If the customer name is selected. 
It is not filtering out the serial number that belongs to that customer. 
Rather it is showing all the list of serial numbers available. 

### Module

support

### Version

ERPNext: v15.20.3 (HEAD)

Frappe Framework: v15.22.0 (HEAD)

Frappe HR: v15.17.0 (HEAD)

India Compliance: v15.7.2 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",sapl-santhosh,2024-04-17 10:28:46+00:00,[],2024-05-09 00:08:33+00:00,2024-04-19 06:41:54+00:00,https://github.com/frappe/erpnext/issues/41062,"[('bug', None)]","[{'comment_id': 2060941176, 'issue_id': 2247949530, 'author': 'sapl-santhosh', 'body': '![image](https://github.com/frappe/erpnext/assets/109452795/1ad56bf8-c238-40f3-8645-62ab0d51e41f)', 'created_at': datetime.datetime(2024, 4, 17, 10, 29, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2065861929, 'issue_id': 2247949530, 'author': 'Nihantra-Patel', 'body': ""Hi @sapl-santhosh,\r\n\r\nFirst thing, serial no doctype has no customer field, so how do we set filters without customers? It's a logical thing."", 'created_at': datetime.datetime(2024, 4, 19, 6, 41, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066169474, 'issue_id': 2247949530, 'author': 'sapl-santhosh', 'body': '![Screenshot 2024-04-19 144107](https://github.com/frappe/erpnext/assets/109452795/0afce678-6c3e-4211-a8e7-83fcd0637a8a)\r\n\r\nthis is screenshot from v14 serial no doctype. \r\nAfter that particular serial number has been used in a delivery note. \r\n\r\nit auto populates the customer name, also fills the warranty details.  \r\nSo I hope in the warranty claim document, after a customer name is selected the serial numbers can be filtered to match what all serial numbers that customer has purchased.', 'created_at': datetime.datetime(2024, 4, 19, 9, 16, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066172350, 'issue_id': 2247949530, 'author': 'Nihantra-Patel', 'body': 'V14 and v15 have different functionality now, please check the serial doctype in v15. Lots of features have been changed.', 'created_at': datetime.datetime(2024, 4, 19, 9, 18, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066188999, 'issue_id': 2247949530, 'author': 'sapl-santhosh', 'body': 'if you come across similiar type of requirement from someone. kindly try to add this feature. \r\n\r\nworkflow will be \r\n1) first we open a issue of a customer from their email manually. (Issue doc type)\r\n2) then if there is a product issue. we raise a warranty claim\r\n3) so from issues doc, we create a warranty claim. In that when we select customer name, based on that if the serial nos are populated it will be easy for a support agent to choose it. \r\n\r\nas I now create a V14 site and checked. The serial doctype is fetching the customer name after a delivery note. But in the warranty claim doctype the serial number is not filtering out based on customer name. \r\n\r\neither its v14 or v15. if this feature was there. it will be useful.', 'created_at': datetime.datetime(2024, 4, 19, 9, 28, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066198058, 'issue_id': 2247949530, 'author': 'Nihantra-Patel', 'body': ""> as I now create a V14 site and checked. The serial doctype is fetching the customer name after a delivery note. But in the warranty claim doctype the serial number is not filtering out based on customer name.\r\n\r\n\r\nCertain functionalities can be carried forward to the upper version because maintaining the document store or other details might be cumbersome, so they cannot be backported to v14. I understand the challenges you're facing, but it was removed in v15 due to the new feature of [Serial and Batch Bundle] (https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle).\r\n\r\nhope you understand."", 'created_at': datetime.datetime(2024, 4, 19, 9, 34, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2071570355, 'issue_id': 2247949530, 'author': 'sapl-santhosh', 'body': 'Even when serial number of the product sold to that customer is selected in the serial number field it is not populating the Item code and other details. Also put up a error related to delivery date field.\r\n![Screenshot 2024-04-23 122626](https://github.com/frappe/erpnext/assets/109452795/b7d608f1-6390-4389-9107-206d9c2304ee)\r\n\r\n![Screenshot 2024-04-23 122729](https://github.com/frappe/erpnext/assets/109452795/1611fd25-dc7f-4e32-afbf-3747acbca45e)', 'created_at': datetime.datetime(2024, 4, 23, 6, 58, 42, tzinfo=datetime.timezone.utc)}]","sapl-santhosh (Issue Creator) on (2024-04-17 10:29:43 UTC): ![image](https://github.com/frappe/erpnext/assets/109452795/1ad56bf8-c238-40f3-8645-62ab0d51e41f)

Nihantra-Patel on (2024-04-19 06:41:54 UTC): Hi @sapl-santhosh,

First thing, serial no doctype has no customer field, so how do we set filters without customers? It's a logical thing.

sapl-santhosh (Issue Creator) on (2024-04-19 09:16:45 UTC): ![Screenshot 2024-04-19 144107](https://github.com/frappe/erpnext/assets/109452795/0afce678-6c3e-4211-a8e7-83fcd0637a8a)

this is screenshot from v14 serial no doctype. 
After that particular serial number has been used in a delivery note. 

it auto populates the customer name, also fills the warranty details.  
So I hope in the warranty claim document, after a customer name is selected the serial numbers can be filtered to match what all serial numbers that customer has purchased.

Nihantra-Patel on (2024-04-19 09:18:26 UTC): V14 and v15 have different functionality now, please check the serial doctype in v15. Lots of features have been changed.

sapl-santhosh (Issue Creator) on (2024-04-19 09:28:39 UTC): if you come across similiar type of requirement from someone. kindly try to add this feature. 

workflow will be 
1) first we open a issue of a customer from their email manually. (Issue doc type)
2) then if there is a product issue. we raise a warranty claim
3) so from issues doc, we create a warranty claim. In that when we select customer name, based on that if the serial nos are populated it will be easy for a support agent to choose it. 

as I now create a V14 site and checked. The serial doctype is fetching the customer name after a delivery note. But in the warranty claim doctype the serial number is not filtering out based on customer name. 

either its v14 or v15. if this feature was there. it will be useful.

Nihantra-Patel on (2024-04-19 09:34:17 UTC): Certain functionalities can be carried forward to the upper version because maintaining the document store or other details might be cumbersome, so they cannot be backported to v14. I understand the challenges you're facing, but it was removed in v15 due to the new feature of [Serial and Batch Bundle] (https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle).

hope you understand.

sapl-santhosh (Issue Creator) on (2024-04-23 06:58:42 UTC): Even when serial number of the product sold to that customer is selected in the serial number field it is not populating the Item code and other details. Also put up a error related to delivery date field.
![Screenshot 2024-04-23 122626](https://github.com/frappe/erpnext/assets/109452795/b7d608f1-6390-4389-9107-206d9c2304ee)

![Screenshot 2024-04-23 122729](https://github.com/frappe/erpnext/assets/109452795/1611fd25-dc7f-4e32-afbf-3747acbca45e)

"
2247852824,issue,open,,Purchase Receipt reflecting the Cost of good sold ,"### Information about bug

After submitting Sales/Tax Invoices, some or most of the Purchase Receipts reflect the Cost of good sold account
![image](https://github.com/frappe/erpnext/assets/161737370/780c7a74-b950-45a1-bae3-85ec62cfbfac)


this one of the Purchase Receipts,
![image (1)](https://github.com/frappe/erpnext/assets/161737370/106eeb4c-ad8f-46fd-95b3-e9450b615469)

This effect take place only after entering the Sales/Tax invoices

I did a different iterations each with new items, purchase rescripts and Tax/Sales invoices, trying the following conditions:  

1. allow/denied negative stock value
2. decreasing the presession format
3. tried it on version 14 and version 15

Available options:
Periodical Inventory

Things could help:
What are the values that affects the Cost of good sold?

### Module

accounts

### Version

 v14.27.1,
 v15.15.0

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",A7medAbdin,2024-04-17 09:42:07+00:00,[],2024-04-17 09:42:07+00:00,,https://github.com/frappe/erpnext/issues/41059,"[('bug', None)]",[],
2247588991,issue,closed,completed,Quotation dropdown not opening,"### Information about bug

In quotations the button ""set as lost"" and ""create"" are exchanged and the dropdown is not opening. It looks like the option is simply missing. With one user it is working, with another not.

User A:
![macos](https://github.com/frappe/erpnext/assets/3322872/93103353-be65-4891-93a3-51023885e8b3)

User B:
![windows](https://github.com/frappe/erpnext/assets/3322872/41c955ce-254d-43ec-aab5-96a97dc73d42)

Both users have the same permission. Is this a bug?

### Module

selling

### Version

ERPNext: v15.20.3 (version-15)
Frappe Framework: v15.22.0 (version-15)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",perotom,2024-04-17 07:32:25+00:00,[],2024-05-02 00:08:23+00:00,2024-04-17 08:39:12+00:00,https://github.com/frappe/erpnext/issues/41054,"[('bug', None)]","[{'comment_id': 2060716515, 'issue_id': 2247588991, 'author': 'Nihantra-Patel', 'body': 'We tested it with multiple uses, and everything is working fine. No problems were encountered in the latest version 15.\r\n\r\nPlease migrate the site and check it.\r\n\r\n<img width=""1440"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/141945075/274e44ee-a149-4332-ac89-b9e4d4a9f5e1"">', 'created_at': datetime.datetime(2024, 4, 17, 8, 39, 12, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-17 08:39:12 UTC): We tested it with multiple uses, and everything is working fine. No problems were encountered in the latest version 15.

Please migrate the site and check it.

<img width=""1440"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/141945075/274e44ee-a149-4332-ac89-b9e4d4a9f5e1"">

"
2247537909,issue,closed,completed,Exchange Rate Not created for UAE (United Arab Emirates dirham) currency,"### Information about bug

While create sales invoice Exchange rate not create automatically, customer currency is UAD, My company currency is USD  
Every time i create exchange is manually , other currency exchange rate is working fine, UAD currency exchange rate only not working
![Screenshot_25](https://github.com/frappe/erpnext/assets/166038816/ac4362bf-4eee-40c2-b787-781cdbea66db)



### Module

selling

### Version

ERP Next: v14.61.1

Frappe Framework: v14.63.0

Frappe HR: v14.21.3

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",Marimuthumariappan,2024-04-17 07:02:25+00:00,[],2024-06-19 00:08:41+00:00,2024-06-04 09:14:57+00:00,https://github.com/frappe/erpnext/issues/41052,"[('bug', None)]","[{'comment_id': 2078594470, 'issue_id': 2247537909, 'author': 'Poorvi-R-Bhat', 'body': 'Please refer the documentation for Exchange Rate: \r\nhttps://docs.erpnext.com/docs/user/manual/en/exchange-rate-revaluation\r\nIf the issue still persists then please let us know the steps to replicate', 'created_at': datetime.datetime(2024, 4, 26, 4, 9, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2147021342, 'issue_id': 2247537909, 'author': 'nabinhait', 'body': 'Please check which service provider you are using from the Currency Exchange Settings doctype. Maybe the selected service provider does not support UAD currency, in that case try changing the service provider.', 'created_at': datetime.datetime(2024, 6, 4, 9, 14, 57, tzinfo=datetime.timezone.utc)}]","Poorvi-R-Bhat on (2024-04-26 04:09:23 UTC): Please refer the documentation for Exchange Rate: 
https://docs.erpnext.com/docs/user/manual/en/exchange-rate-revaluation
If the issue still persists then please let us know the steps to replicate

nabinhait on (2024-06-04 09:14:57 UTC): Please check which service provider you are using from the Currency Exchange Settings doctype. Maybe the selected service provider does not support UAD currency, in that case try changing the service provider.

"
2247473630,issue,open,,How to Return raw material from work in process -Hard n Soft,"How do I return raw materials from the work-in-process warehouse to the store warehouse, which were issued against a work order 
Hard n soft consultancy
Alpesh Jani
9824147818
",alpesh-jani,2024-04-17 06:19:32+00:00,[],2024-04-17 06:19:32+00:00,,https://github.com/frappe/erpnext/issues/41051,"[('feature-request', None)]",[],
2247470658,issue,open,,Tcs On Sales tax amount rounding Issue-erpnext 15 from Hard n soft consultancy Alpesh Jani 9824147818,"### Information about bug

The 'Round Off Tax Amount' option is checked, and initially, it works correctly for the first entry. However, upon creating a second entry, it fails to function properly. Is this bug?

### Module

selling

### Version

Erpnext-15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",alpesh-jani,2024-04-17 06:17:11+00:00,[],2024-04-17 06:20:28+00:00,,https://github.com/frappe/erpnext/issues/41050,"[('bug', None)]",[],
2247454157,issue,closed,completed,Lower Deduction Certificate is not opening ?,"### Information about bug

![image](https://github.com/frappe/erpnext/assets/165145630/47d14210-5d25-4990-a121-c6249f516cb1)


### Module

regional

### Version

erpnext v15.20.3

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",rehandev26,2024-04-17 06:04:15+00:00,[],2024-06-18 00:09:10+00:00,2024-06-03 11:42:28+00:00,https://github.com/frappe/erpnext/issues/41049,"[('bug', None)]","[{'comment_id': 2144981235, 'issue_id': 2247454157, 'author': 'deepeshgarg007', 'body': '@rehandev26 This is fixed now', 'created_at': datetime.datetime(2024, 6, 3, 11, 42, 28, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 on (2024-06-03 11:42:28 UTC): @rehandev26 This is fixed now

"
2247148866,issue,open,,In accounts there is one requirement on bank account mapping with general ledger.,"Hi Team,

We are facing below issue

In accounts there is one requirement on bank account mapping with general ledger.

on the linkage of multiple Bank Account masters with a single GL ledger following are the observations

Problem Statement: Need  to have multiple Bank Accounts Linked to a single Ledger for Bank account.

ERPNext Standard Functionality:
ERPNext allows only a single ledger to be linked at a time with a Bank Account Master.
Reference of error is as follows:
![Screenshot from 2024-04-17 07-11-01](https://github.com/frappe/erpnext/assets/4947418/8e55b184-621c-47bb-b88e-ba991c06c038)
Reason & Logic behind the above:
For a system it needs a dedicated ledger account to track all the transactions for a particular bank account. So that while reconciliation we get dedicated closing and opening balances of a Bank Account. Which is as per the standard practices.

 Reference of reason is as follows:
![image](https://github.com/frappe/erpnext/assets/4947418/1c640cad-5b92-4b9e-8356-c879ef85c011)
Possible workarounds/Customisations:

1) Workaround:

We need to create a Parent Ledger as a Savings Bank Account and inside that all Bank Account Master will have a dedicated Ledger account linked to that Bank Account.

2) Customisations:
Condition: We have to compromise the Bank Reconciliation Feature in ERP Next so that we cannot use that.

Can you please check with all the above issue and do the needful .

Do let me know if you have any questions or need any type of information.

Thank You,

Pallavi Surwase



",gupteshwar,2024-04-17 01:42:19+00:00,[],2024-04-17 01:42:19+00:00,,https://github.com/frappe/erpnext/issues/41046,"[('feature-request', None)]",[],
2246267986,issue,closed,completed,Unknown column 'default_bank_account' in 'field list' bug in Payment Entry related to selecting an employee as a party type,"### Information about bug

**Installed Apps**

ERPNext: v15.20.3 (version-15)
Frappe Framework: v15.22.0 (version-15)
Frappe HR: v15.17.0 (version-15)

**To replicate:** 

- Create a Payment Entry
- Select Employee as Party Type
- Select any employee

The below error shows: 
![image](https://github.com/frappe/erpnext/assets/17312481/1ac4aae8-1fa1-4461-a7fa-c14ae8c0e023)


### Module

accounts, HR

### Version

ERPNext: v15.20.3 (version-15)
Frappe Framework: v15.22.0 (version-15)
Frappe HR: v15.17.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback: 

### App Versions

{
	""erpnext"": ""15.20.3"",
	""frappe"": ""15.22.0"",
	""hrms"": ""15.17.0"",
}
### Route
```
Form/Payment Entry/new-payment-entry-mvcvsdufaf
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1718, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 2043, in get_party_details
    bank_account = get_default_company_bank_account(company, party_type, party)
  File ""apps/erpnext/erpnext/accounts/doctype/bank_account/bank_account.py"", line 138, in get_default_company_bank_account
    default_company_bank_account = frappe.db.get_value(party_type, party, ""default_bank_account"")
  File ""apps/frappe/frappe/database/database.py"", line 519, in get_value
    result = self.get_values(
  File ""apps/frappe/frappe/database/database.py"", line 623, in get_values
    out = self._get_values_from_table(
  File ""apps/frappe/frappe/database/database.py"", line 896, in _get_values_from_table
    return query.run(as_dict=as_dict, debug=debug, update=update, run=run, pluck=pluck)
  File ""apps/frappe/frappe/query_builder/utils.py"", line 87, in execute_query
    result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 772, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.10/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.10/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, ""Unknown column 'default_bank_account' in 'field list'"")

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""company"": ""Asklan"",
		""party_type"": ""Employee"",
		""party"": ""HR-EMP-00008"",
		""date"": ""2024-04-16""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/erpnext.accounts.doctype.payment_entry.payment_entry.get_party_details"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""pymysql.err.OperationalError: (1054, \""Unknown column 'default_bank_account' in 'field list'\"")"",
	""exc_type"": ""OperationalError"",
	""_exc_source"": ""erpnext (app)""
}
```
",alaahariri,2024-04-16 14:55:02+00:00,[],2024-05-15 00:08:51+00:00,2024-04-30 06:09:00+00:00,https://github.com/frappe/erpnext/issues/41044,"[('bug', None)]","[{'comment_id': 2060743952, 'issue_id': 2246267986, 'author': 'Nihantra-Patel', 'body': 'Already raised the PR: #41007', 'created_at': datetime.datetime(2024, 4, 17, 8, 53, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2071675493, 'issue_id': 2246267986, 'author': '0xhaval', 'body': 'Kindly, any update with this bug.\r\nI have the same issue \r\n![image](https://github.com/frappe/erpnext/assets/35600969/8cf69d1f-7abb-4f76-880f-236eac50c2d5)\r\n\r\n![image](https://github.com/frappe/erpnext/assets/35600969/1ee0fb3f-1ab8-4813-809f-3f9a8587f116)', 'created_at': datetime.datetime(2024, 4, 23, 8, 4, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2084451350, 'issue_id': 2246267986, 'author': 'Nihantra-Patel', 'body': 'Issue has been fixed: https://github.com/frappe/erpnext/pull/41104\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/7f7e8c4b-4b73-4fff-a758-40bcb2900b70', 'created_at': datetime.datetime(2024, 4, 30, 6, 9, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-17 08:53:37 UTC): Already raised the PR: #41007

0xhaval on (2024-04-23 08:04:07 UTC): Kindly, any update with this bug.
I have the same issue 
![image](https://github.com/frappe/erpnext/assets/35600969/8cf69d1f-7abb-4f76-880f-236eac50c2d5)

![image](https://github.com/frappe/erpnext/assets/35600969/1ee0fb3f-1ab8-4813-809f-3f9a8587f116)

Nihantra-Patel on (2024-04-30 06:09:00 UTC): Issue has been fixed: https://github.com/frappe/erpnext/pull/41104


https://github.com/frappe/erpnext/assets/141945075/7f7e8c4b-4b73-4fff-a758-40bcb2900b70

"
2246168212,issue,closed,completed,Task.total_billing_amount and Project.total_billable_amount not taking Timesheet Detail.billing_amout into account,"### Information about bug

Even if I set the billing_amount to 0 in Timesheet Detail (e.g. via Client Script - for internal projects) the total_billing_amount in the referenced task and project is not 0.

It seems that the the field Task.total_billing_amount is ignored and always calculated based on the Timesheet Detail.billing_hours * Actitity Type.billing_rate.

When I select an acitivity type that has a billing_rate of 0 it works as expected.


Steps to reproduce:

1. Create Projekt
2. Create Task for Project
3. Create Actitiy Type with billing_rate > 0
4. Create Timesheet
5. Create Timesheet Detail entry with created Activity Type, Task and Project - e.g. 1h
6. Select is_billable
7. Set the billing_rate to 0
8. Save & Submit
9. Check Created Task -> total_billing_amount: Expected 0, But is > 0
10. Check Created Project -> total_billable_amount: Expected 9, But is > 0



### Module

projects

### Version

ERPNext: v15.19.1 (version-15)

Frappe Framework: v15.20.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",RANSoftRA,2024-04-16 14:10:37+00:00,[],2024-06-19 00:08:38+00:00,2024-06-04 09:20:26+00:00,https://github.com/frappe/erpnext/issues/41043,"[('bug', None)]","[{'comment_id': 2147032802, 'issue_id': 2246168212, 'author': 'nabinhait', 'body': 'This is not a bug, closing the issue.', 'created_at': datetime.datetime(2024, 6, 4, 9, 20, 26, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-04 09:20:26 UTC): This is not a bug, closing the issue.

"
2246082025,issue,open,,has negative stock error,"### Information about bug

self.set_incoming_rate(save=True, row=row)
u are calling this function without passing allow_negative_stock and u are setting its default value for false
so it will never be true 

### Module

stock

### Version

both version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",HossamMohamed-9,2024-04-16 13:32:58+00:00,[],2024-04-16 13:32:58+00:00,,https://github.com/frappe/erpnext/issues/41042,"[('bug', None)]",[],
2245760020,issue,closed,completed,Sales Invoice creation is skipped by POS when performing POS Close Entry,"### Information about bug

We are using the **POS** and everything seems to be working fine but we have observed that when we create **POS Close Entry**  at the end of the day sometimes the POS does not generate necessary `Sales Invoice` for each `POS Invoice`.  Some get skipped.

Because of this the **Quantity** of an Item reported by POS and that we get in various stock related reports do not match.

How to solve this problem?

### Module

selling

### Version

Frappe Version: 14.64.0
ERPNext Version: 14.61.4

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
No errors are generated.
```
",yogeshvachhani,2024-04-16 11:03:36+00:00,[],2024-05-04 00:09:14+00:00,2024-04-19 14:55:58+00:00,https://github.com/frappe/erpnext/issues/41036,"[('bug', None)]","[{'comment_id': 2063084603, 'issue_id': 2245760020, 'author': 'karanwilson', 'body': 'Hi @yogeshvachhani,\r\nAs per the documentation of ERPNext (URL mentioned below):-\r\n""The stock and accounting entries are now created at the end of day while closing a POS session by a **single sales invoice which merges all the intermediate invoices created throughout the day**"";\r\neach of these \'intermediate invoices\' (logged in the POS Invoice ""sub-ledger""), updates the ""Reserved for POS Transactions"" column in the ""Stock Projected Quantity Report"" - which are then consolidated as a single \'Sales Invoice\', after you create the \'POS closing entry\'.\r\n\r\nHence the ERPNext POS will not generate a separate \'Sales Incoice\' for each \'POS Invoice\'; instead it will consolidate the \'POS Invoices\' logged between a ""POS Opening Entry"" and a ""POS Closing Entry""\r\n\r\nReference:\r\nhttps://docs.erpnext.com/docs/user/manual/en/pos_invoice_consolidation\r\n\r\n\r\n@nabinhait', 'created_at': datetime.datetime(2024, 4, 18, 6, 19, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2063131879, 'issue_id': 2245760020, 'author': 'yogeshvachhani', 'body': 'Thanks for the clarification.\r\n\r\nBut the Qty reported by POS is different then that of `Stock Balance` and `Stock Ledger`. It is generally less the what is reported by Stock reports.\r\n\r\nTo test further...\r\n\r\nWe manually created Sales Invoices for all those POS Invoices which were not related to Sales Invoice to check and found that after we created necessary Sales Invoices the Qty reported by POS was the same as that reported by `Stock Balance` and `Stock Ledger`.\r\n\r\nWhy is this happening?', 'created_at': datetime.datetime(2024, 4, 18, 6, 45, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2063218170, 'issue_id': 2245760020, 'author': 'karanwilson', 'body': 'Yes, as per the documentation: when you create a ""POS Opening Entry"", the POS will reserve some QTY out of the ""Actual QTY"", in a column called ""Reserved for POS Transactions"", within the ""Stock Projected Quantity Report"".\r\n\r\nHence the POS QTY (""Reserved for POS Transactions"") will be less than the ""Actualy QTY"" - either until you create a ""POS Closing Entry"" (which creates a consolidated Sales Invoice), or if you manually create a separate \'Sales Invoice\' before closing the POS (note that after closing the POS, the consolidated Sales Invoice will again reduce the QTY as per the logged POS Invoice).\r\n\r\nYou can read this document in detail, to understand this process well:-\r\nhttps://docs.erpnext.com/docs/user/manual/en/pos_invoice_consolidation\r\n\r\nHowever, as long as your accounts and stock ledgers are in order, after the POS is closed, you do not need to worry about the internals of this process - it was designed to make the POS transactions faster.\r\n\r\n@nabinhait', 'created_at': datetime.datetime(2024, 4, 18, 7, 34, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2063243845, 'issue_id': 2245760020, 'author': 'yogeshvachhani', 'body': 'Thanks for the clarification.\r\n\r\nThis means one will have to set the POS Profile to not Validate Stock.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/109499572/b19991c3-107a-47b8-8bd9-204abee97c91)\r\nBecause if this is setting is active POS does not allow to add an item which is zero (0).', 'created_at': datetime.datetime(2024, 4, 18, 7, 50, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2063375420, 'issue_id': 2245760020, 'author': 'karanwilson', 'body': 'Hi Yogesh, I just verified from the code that if you check ""Validade Stock on Save"" in the POS profile, ERPNext will check stock against the QTY that is reserved for POS; So this setting works as per the POS consolidation design discussed above.\r\n\r\nFurther, in case you wish to add an item in the POS cart, which has zero QTY - you will need to enable the option ""Allow Negative Stock"" in the ""Stock Validations"" tab of the ""Stock Settings"" page - attaching a screenshot for this.\r\n![allow_negative_stock](https://github.com/frappe/erpnext/assets/48678570/f0e59699-5c57-4b18-b2a0-44d55b984f6a)\r\n\r\n@nabinhait', 'created_at': datetime.datetime(2024, 4, 18, 8, 59, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2066754511, 'issue_id': 2245760020, 'author': 'yogeshvachhani', 'body': 'Ok understood.\r\n\r\nWill try to setup the whole thing as per the documentation suggested.\r\n\r\nThanks a lot.', 'created_at': datetime.datetime(2024, 4, 19, 14, 55, 59, tzinfo=datetime.timezone.utc)}]","karanwilson on (2024-04-18 06:19:52 UTC): Hi @yogeshvachhani,
As per the documentation of ERPNext (URL mentioned below):-
""The stock and accounting entries are now created at the end of day while closing a POS session by a **single sales invoice which merges all the intermediate invoices created throughout the day**"";
each of these 'intermediate invoices' (logged in the POS Invoice ""sub-ledger""), updates the ""Reserved for POS Transactions"" column in the ""Stock Projected Quantity Report"" - which are then consolidated as a single 'Sales Invoice', after you create the 'POS closing entry'.

Hence the ERPNext POS will not generate a separate 'Sales Incoice' for each 'POS Invoice'; instead it will consolidate the 'POS Invoices' logged between a ""POS Opening Entry"" and a ""POS Closing Entry""

Reference:
https://docs.erpnext.com/docs/user/manual/en/pos_invoice_consolidation


@nabinhait

yogeshvachhani (Issue Creator) on (2024-04-18 06:45:32 UTC): Thanks for the clarification.

But the Qty reported by POS is different then that of `Stock Balance` and `Stock Ledger`. It is generally less the what is reported by Stock reports.

To test further...

We manually created Sales Invoices for all those POS Invoices which were not related to Sales Invoice to check and found that after we created necessary Sales Invoices the Qty reported by POS was the same as that reported by `Stock Balance` and `Stock Ledger`.

Why is this happening?

karanwilson on (2024-04-18 07:34:47 UTC): Yes, as per the documentation: when you create a ""POS Opening Entry"", the POS will reserve some QTY out of the ""Actual QTY"", in a column called ""Reserved for POS Transactions"", within the ""Stock Projected Quantity Report"".

Hence the POS QTY (""Reserved for POS Transactions"") will be less than the ""Actualy QTY"" - either until you create a ""POS Closing Entry"" (which creates a consolidated Sales Invoice), or if you manually create a separate 'Sales Invoice' before closing the POS (note that after closing the POS, the consolidated Sales Invoice will again reduce the QTY as per the logged POS Invoice).

You can read this document in detail, to understand this process well:-
https://docs.erpnext.com/docs/user/manual/en/pos_invoice_consolidation

However, as long as your accounts and stock ledgers are in order, after the POS is closed, you do not need to worry about the internals of this process - it was designed to make the POS transactions faster.

@nabinhait

yogeshvachhani (Issue Creator) on (2024-04-18 07:50:30 UTC): Thanks for the clarification.

This means one will have to set the POS Profile to not Validate Stock.

![image](https://github.com/frappe/erpnext/assets/109499572/b19991c3-107a-47b8-8bd9-204abee97c91)
Because if this is setting is active POS does not allow to add an item which is zero (0).

karanwilson on (2024-04-18 08:59:10 UTC): Hi Yogesh, I just verified from the code that if you check ""Validade Stock on Save"" in the POS profile, ERPNext will check stock against the QTY that is reserved for POS; So this setting works as per the POS consolidation design discussed above.

Further, in case you wish to add an item in the POS cart, which has zero QTY - you will need to enable the option ""Allow Negative Stock"" in the ""Stock Validations"" tab of the ""Stock Settings"" page - attaching a screenshot for this.
![allow_negative_stock](https://github.com/frappe/erpnext/assets/48678570/f0e59699-5c57-4b18-b2a0-44d55b984f6a)

@nabinhait

yogeshvachhani (Issue Creator) on (2024-04-19 14:55:59 UTC): Ok understood.

Will try to setup the whole thing as per the documentation suggested.

Thanks a lot.

"
2245673295,issue,closed,completed,Stock Entry Submitted Document is still in Draft stage,"### Information about bug

Hello,

![dH0vcSA](https://github.com/frappe/erpnext/assets/167191848/87b6086c-2d40-4867-9941-4f9bbde81f65)

As you can see in the image above, this warning comes when we submit the stock entry The status is changed to submitted, and workflow that were in pending approval will go to an approved state. But as the warning mentions, the task is running in the background, and if the stock entry runs at some error, it will revert the stock entry status back to draft, which it does, but the workflow state will remain in the approved state. So i think it should also go back to approval pending state as well.

Thanks & Regards
Saqlain Shaikh

### Module

stock

### Version

ERPNext: v14.65.7 (HEAD)

Frappe Framework: v14.68.2 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",SaqlainsPSPL,2024-04-16 10:17:20+00:00,[],2024-05-02 00:08:21+00:00,2024-04-17 09:42:35+00:00,https://github.com/frappe/erpnext/issues/41033,"[('bug', None)]","[{'comment_id': 2060846255, 'issue_id': 2245673295, 'author': 'Nihantra-Patel', 'body': ""Any workflow applied or not, if applied, then check the workflow is proper or not.\r\n\r\nWe checked in the latest version 14 but we haven't found the issue. and also check if the RQ job status is active or not; if not, then enable the scheduler.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/7cf51e62-ac0d-4afb-a84e-d38e498a0a51"", 'created_at': datetime.datetime(2024, 4, 17, 9, 42, 35, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-17 09:42:35 UTC): Any workflow applied or not, if applied, then check the workflow is proper or not.

We checked in the latest version 14 but we haven't found the issue. and also check if the RQ job status is active or not; if not, then enable the scheduler.


https://github.com/frappe/erpnext/assets/141945075/7cf51e62-ac0d-4afb-a84e-d38e498a0a51

"
2245472371,issue,open,,Subcontracting Order use Default currency instead of Company Currency,"### Information about bug

When create Subcontracting Order from Purchase Order, Rate on PO is using Company Currency (CNY, or IDR) but when create new Subcontracting Order from PO, it use Company Currency rate to Rate without converting or Missing rate for company currency.

I attach example when create new SO
![image](https://github.com/frappe/erpnext/assets/25083343/1a954ce7-5951-40e2-90b3-a34588d187d1)

This is from PO
<img width=""1301"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/25083343/b1241331-4f17-4683-8226-61ac48007aa8"">


This should be CNY instead of Default Currency SGD $

### Module

buying

### Version

ERPNext: v15.17.1
Frappe Framework: v15.17.3

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",NexiaMoe,2024-04-16 08:39:06+00:00,[],2024-06-06 11:48:44+00:00,,https://github.com/frappe/erpnext/issues/41030,"[('bug', None)]","[{'comment_id': 2146869925, 'issue_id': 2245472371, 'author': 'TurkerTunali', 'body': 'I also encounter this on v14 and v15 systems. Solved the issue by this dirty code on my custom app.\r\n\r\n```\r\n@frappe.whitelist()\r\n\r\ndef make_subcontracting_order(source_name, target_doc=None):\r\n\r\n\treturn get_mapped_subcontracting_order(source_name, target_doc)\r\n\r\ndef get_mapped_subcontracting_order(source_name, target_doc=None):\r\n\r\n\tfrom frappe.model.mapper import get_mapped_doc\r\n\r\n\tif target_doc and isinstance(target_doc, str):\r\n\r\n\t\ttarget_doc = json.loads(target_doc)\r\n\r\n\t\tfor key in [""service_items"", ""items"", ""supplied_items""]:\r\n\r\n\t\t\tif key in target_doc:\r\n\r\n\t\t\t\tdel target_doc[key]\r\n\r\n\t\ttarget_doc = json.dumps(target_doc)\r\n\r\n\ttarget_doc = get_mapped_doc(\r\n\r\n\t\t""Purchase Order"",\r\n\r\n\t\tsource_name,\r\n\r\n\t\t{\r\n\r\n\t\t\t""Purchase Order"": {\r\n\r\n\t\t\t\t""doctype"": ""Subcontracting Order"",\r\n\r\n\t\t\t\t""field_map"": {},\r\n\r\n\t\t\t\t""field_no_map"": [""total_qty"", ""total"", ""net_total""],\r\n\r\n\t\t\t\t""validation"": {\r\n\r\n\t\t\t\t\t""docstatus"": [""="", 1],\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t},\r\n\r\n\t\t\t""Purchase Order Item"": {\r\n\r\n\t\t\t\t""doctype"": ""Subcontracting Order Service Item"",\r\n\r\n\t\t\t\t""field_map"": {\r\n\r\n\t\t\t\t\t""material_request"": ""material_request"",\r\n\r\n\t\t\t\t\t""material_request_item"": ""material_request_item"",\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t""field_no_map"": [],\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ttarget_doc,\r\n\r\n\t)\r\n\r\n\t# Currency is wrong so we need to reevaluate it. https://github.com/frappe/erpnext/issues/41030\r\n\r\n\t# We need to check the currency of the company and compare it with the po currency.\r\n\r\n\t# If they are different we need to convert it to the company currency.\r\n\r\n\tdocPO = frappe.get_doc(""Purchase Order"", source_name)\r\n\r\n\tif docPO.currency != frappe.get_cached_value(""Company"", docPO.company, ""default_currency""):\r\n\r\n\t\tflConversionFactor = docPO.conversion_rate\r\n\r\n\t\tfor service_item in target_doc.service_items:\r\n\r\n\t\t\tservice_item.rate = service_item.rate * flConversionFactor\r\n\r\n\t\t\tservice_item.amount = service_item.rate * service_item.fg_item_qty\r\n\r\n\ttarget_doc.populate_items_table()\r\n\r\n\tif target_doc.set_warehouse:\r\n\r\n\t\tfor item in target_doc.items:\r\n\r\n\t\t\titem.warehouse = target_doc.set_warehouse\r\n\r\n\telse:\r\n\r\n\t\tsource_doc = frappe.get_doc(""Purchase Order"", source_name)\r\n\r\n\t\tif source_doc.set_warehouse:\r\n\r\n\t\t\tfor item in target_doc.items:\r\n\r\n\t\t\t\titem.warehouse = source_doc.set_warehouse\r\n\r\n\t\telse:\r\n\r\n\t\t\tfor idx, item in enumerate(target_doc.items):\r\n\r\n\t\t\t\titem.warehouse = source_doc.items[idx].warehouse\r\n\r\n\treturn target_doc\r\n```', 'created_at': datetime.datetime(2024, 6, 4, 8, 3, 29, tzinfo=datetime.timezone.utc)}]","TurkerTunali on (2024-06-04 08:03:29 UTC): I also encounter this on v14 and v15 systems. Solved the issue by this dirty code on my custom app.

```
@frappe.whitelist()

def make_subcontracting_order(source_name, target_doc=None):

	return get_mapped_subcontracting_order(source_name, target_doc)

def get_mapped_subcontracting_order(source_name, target_doc=None):

	from frappe.model.mapper import get_mapped_doc

	if target_doc and isinstance(target_doc, str):

		target_doc = json.loads(target_doc)

		for key in [""service_items"", ""items"", ""supplied_items""]:

			if key in target_doc:

				del target_doc[key]

		target_doc = json.dumps(target_doc)

	target_doc = get_mapped_doc(

		""Purchase Order"",

		source_name,

		{

			""Purchase Order"": {

				""doctype"": ""Subcontracting Order"",

				""field_map"": {},

				""field_no_map"": [""total_qty"", ""total"", ""net_total""],

				""validation"": {

					""docstatus"": [""="", 1],

				},

			},

			""Purchase Order Item"": {

				""doctype"": ""Subcontracting Order Service Item"",

				""field_map"": {

					""material_request"": ""material_request"",

					""material_request_item"": ""material_request_item"",

				},

				""field_no_map"": [],

			},

		},

		target_doc,

	)

	# Currency is wrong so we need to reevaluate it. https://github.com/frappe/erpnext/issues/41030

	# We need to check the currency of the company and compare it with the po currency.

	# If they are different we need to convert it to the company currency.

	docPO = frappe.get_doc(""Purchase Order"", source_name)

	if docPO.currency != frappe.get_cached_value(""Company"", docPO.company, ""default_currency""):

		flConversionFactor = docPO.conversion_rate

		for service_item in target_doc.service_items:

			service_item.rate = service_item.rate * flConversionFactor

			service_item.amount = service_item.rate * service_item.fg_item_qty

	target_doc.populate_items_table()

	if target_doc.set_warehouse:

		for item in target_doc.items:

			item.warehouse = target_doc.set_warehouse

	else:

		source_doc = frappe.get_doc(""Purchase Order"", source_name)

		if source_doc.set_warehouse:

			for item in target_doc.items:

				item.warehouse = source_doc.set_warehouse

		else:

			for idx, item in enumerate(target_doc.items):

				item.warehouse = source_doc.items[idx].warehouse

	return target_doc
```

"
2244000274,issue,closed,completed,No accounting entries for the following warehouses,"### Information about bug

I'm getting this error ""No accounting entries for the following warehouses: Stores - I"" when I submit a Purchase Receipt. What's causing this error? I copied the warehouse and account information related to ""Stores - I"" warehouse.

""Stores - I"" warehouse:
Parent Warehouse: All Warehouses - I
Account: Stock of finished products - I

""All Warehouses"" warehouse:
Account: Stock of finished products - I

""Stock of finished products - I"" account:
Parent Account: Stocks - I
Account Type: Stock

""Stocks - I"" account:
Parent Account: Current assets - I
Account Type: Stock

""Current assets - I"" account:
Parent Account: Active - I
Account Type: <blank>

""Active - I"" account:
Parent Account: <blank>
Account Type: <blank>

### Module

accounts, buying

### Version

Docker frappe/erpnext:v15.20.2
Still happening with frappe/erpnext:v15.20.3

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",geraldleungontario,2024-04-15 15:36:36+00:00,[],2024-06-18 00:09:08+00:00,2024-06-03 11:53:36+00:00,https://github.com/frappe/erpnext/issues/41016,"[('bug', None)]","[{'comment_id': 2059580131, 'issue_id': 2244000274, 'author': 'geraldleungontario', 'body': 'I did a similar test in the erpnext.com cloud which has using the warehouse ""Stores - GTD"", but it didn\'t cause this error. This environment doesn\'t have any accounts set up in the warehouses. Why would there be an error in my environment where I have accounts set up for the receiving warehouse and the parent warehouse?\r\n\r\nThis is the settings from erpnext.com below which doesn\'t cause the error.\r\n\r\n""Stores - GTD"" warehouse:\r\nParent Warehouse: All Warehouses - GTD\r\nAccount:\r\n\r\n""All Warehouses - GTD"" warehouse:\r\nAccount:', 'created_at': datetime.datetime(2024, 4, 16, 17, 23, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2145001757, 'issue_id': 2244000274, 'author': 'deepeshgarg007', 'body': '@geraldleungontario Your local instance might not have a default inventory account setup in the company master while the erpnext.com might have a default inventory/stock account setup in the company master\r\n\r\nHence you get a validation while on the other site the one erpnext.com you did not.', 'created_at': datetime.datetime(2024, 6, 3, 11, 53, 36, tzinfo=datetime.timezone.utc)}]","geraldleungontario (Issue Creator) on (2024-04-16 17:23:15 UTC): I did a similar test in the erpnext.com cloud which has using the warehouse ""Stores - GTD"", but it didn't cause this error. This environment doesn't have any accounts set up in the warehouses. Why would there be an error in my environment where I have accounts set up for the receiving warehouse and the parent warehouse?

This is the settings from erpnext.com below which doesn't cause the error.

""Stores - GTD"" warehouse:
Parent Warehouse: All Warehouses - GTD
Account:

""All Warehouses - GTD"" warehouse:
Account:

deepeshgarg007 on (2024-06-03 11:53:36 UTC): @geraldleungontario Your local instance might not have a default inventory account setup in the company master while the erpnext.com might have a default inventory/stock account setup in the company master

Hence you get a validation while on the other site the one erpnext.com you did not.

"
2243713821,issue,closed,completed,Quotation address does not cater for Prospect,"### Information about bug

When a quote is made against a Prospect, the customer addresses offered are empty due to a bug in this line:

https://github.com/frappe/erpnext/blob/760e341cd07b1cebe6c4c8d05d8e77f5a9da89c7/erpnext/selling/doctype/quotation/quotation.js#L100

### Module

selling

### Version

v16 develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-04-15 13:37:36+00:00,[],2024-05-31 00:08:24+00:00,2024-05-09 06:44:42+00:00,https://github.com/frappe/erpnext/issues/41015,"[('bug', None), ('released', None)]","[{'comment_id': 2111600394, 'issue_id': 2243713821, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 15, 5, 12, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2111601268, 'issue_id': 2243713821, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.23.2 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.23.2)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 15, 5, 13, 53, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-05-15 05:12:51 UTC): :tada: This issue has been resolved in version 14.70.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

frappe-pr-bot on (2024-05-15 05:13:53 UTC): :tada: This issue has been resolved in version 15.23.2 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.23.2)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2243557500,issue,closed,completed,Dashboard Duplicate,"### Information about bug

1. go to dashboard list
2. choose one dashboard
3. from the menu click duplicate 
4. new screen will be opened but not able to change the name or even save the new dashboard

![image](https://github.com/frappe/erpnext/assets/29341232/6fc649b5-d3d2-4d6d-b910-fafe74cf4d7d)


### Module

other

### Version

Email Delivery Service: v0.0.1 (HEAD)
ERPNext: v15.18.3 (HEAD)
Frappe Framework: v15.20.0 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",moaazmf90,2024-04-15 12:29:31+00:00,[],2024-05-02 00:08:20+00:00,2024-04-17 10:03:55+00:00,https://github.com/frappe/erpnext/issues/41014,"[('bug', None)]","[{'comment_id': 2060893082, 'issue_id': 2243557500, 'author': 'Nihantra-Patel', 'body': ""If developer mode is on, then it's working.\r\n\r\nDeveloper Mode: 1\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/0941a86c-789b-4195-a082-6daccce3faf7\r\n\r\n\r\n\r\nDeveloper Mode: 0\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/04a5da8c-7546-4ea7-b5e8-6d7be3f18c7f\r\n\r\n\r\n___\r\n\r\nPlease check the documentation for [How to Enable Developer Mode in Frappe](https://frappeframework.com/docs/user/en/guides/app-development/how-enable-developer-mode-in-frappe)"", 'created_at': datetime.datetime(2024, 4, 17, 10, 3, 55, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-17 10:03:55 UTC): If developer mode is on, then it's working.

Developer Mode: 1


https://github.com/frappe/erpnext/assets/141945075/0941a86c-789b-4195-a082-6daccce3faf7



Developer Mode: 0


https://github.com/frappe/erpnext/assets/141945075/04a5da8c-7546-4ea7-b5e8-6d7be3f18c7f


___

Please check the documentation for [How to Enable Developer Mode in Frappe](https://frappeframework.com/docs/user/en/guides/app-development/how-enable-developer-mode-in-frappe)

"
2243534836,issue,open,,Item wise profitability,"Hello Team,

We are unable see the item wise / Item group wise profitability report in gross profit report. Its not included the expiry item details.

How can we get the report including with those details also.
You can refer the frappe support ticket - 12478

Regards,

Anto",antojohn77,2024-04-15 12:18:29+00:00,[],2024-04-15 12:18:29+00:00,,https://github.com/frappe/erpnext/issues/41012,"[('feature-request', None)]",[],
2243240477,issue,closed,completed,Purchase Order,"### Information about bug

In purchase If item was created at the time of new purchase order they do not fetch the item tax and INR number formatting not working 

### Module

stock, buying, selling

### Version


don't know-15
 

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",sakshitjain02ji,2024-04-15 10:00:43+00:00,[],2024-05-09 00:08:25+00:00,2024-04-24 11:12:47+00:00,https://github.com/frappe/erpnext/issues/41011,"[('bug', None)]","[{'comment_id': 2074698587, 'issue_id': 2243240477, 'author': 'Poorvi-R-Bhat', 'body': 'While creating the new Item in the Purchase Order, if the HSN/SAC is filled properly in the Item then the Item Tax gets fetched automatically in the Purchase Order\r\n![image](https://github.com/frappe/erpnext/assets/27720465/b01dbec2-782c-40e0-893c-94afd1868148)\r\n\r\n**HSN/SAC in the item**\r\n![image](https://github.com/frappe/erpnext/assets/27720465/a9fc804e-ab8b-491e-8a20-22a9b9b82ca6)', 'created_at': datetime.datetime(2024, 4, 24, 11, 12, 47, tzinfo=datetime.timezone.utc)}]","Poorvi-R-Bhat on (2024-04-24 11:12:47 UTC): While creating the new Item in the Purchase Order, if the HSN/SAC is filled properly in the Item then the Item Tax gets fetched automatically in the Purchase Order
![image](https://github.com/frappe/erpnext/assets/27720465/b01dbec2-782c-40e0-893c-94afd1868148)

**HSN/SAC in the item**
![image](https://github.com/frappe/erpnext/assets/27720465/a9fc804e-ab8b-491e-8a20-22a9b9b82ca6)

"
2243050852,issue,open,,Consolidated trial balace Report required for multiple companies.,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",DFMIT,2024-04-15 08:35:08+00:00,[],2024-04-15 08:35:08+00:00,,https://github.com/frappe/erpnext/issues/41010,"[('feature-request', None)]",[],
2242457449,issue,closed,completed,Sales Invoice Item - rate not change when UOM is changed,"### Information about bug

Running:
ERPNext: v14.67.1 (version-14)
Frappe Framework: v14.71.0 (version-14)
Bench Version 5.22.3
Python 3.11.2
Node v18.19.0

It's a fresh install on Debian 12. I created an item, (4) unique UOM, for prices in Default Selling.
When adding the item to a sales invoice, changing the UOM does not change the rate based
on Item Price for the UOM.

This symptom does not exist in:
ERPNext: v14.56.0
Frappe Framework: v14.60.0

### Module

stock, selling

### Version

Frappe Framework: v14.71.0 (version-14)
ERPNext: v14.67.1 (version-14)


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",volkswagner,2024-04-15 00:32:19+00:00,[],2024-05-04 00:09:18+00:00,2024-04-19 06:01:47+00:00,https://github.com/frappe/erpnext/issues/41004,"[('bug', None)]","[{'comment_id': 2056652066, 'issue_id': 2242457449, 'author': 'volkswagner', 'body': 'There are dependencies and various results for UOM/Price. \r\nResults depend on if Item has ""Maintain Stock"" (need UOM conversions).\r\nIf disable Maintain stock, changing UOM in invoice, will fetch associated price!\r\nClosing due to working as expected.', 'created_at': datetime.datetime(2024, 4, 15, 11, 55, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2065819607, 'issue_id': 2242457449, 'author': 'Nihantra-Patel', 'body': 'fixed in the upper version: https://github.com/frappe/erpnext/pull/40216\r\n\r\nIf you want, then we will raise the PR for version 14.', 'created_at': datetime.datetime(2024, 4, 19, 6, 1, 47, tzinfo=datetime.timezone.utc)}]","volkswagner (Issue Creator) on (2024-04-15 11:55:39 UTC): There are dependencies and various results for UOM/Price. 
Results depend on if Item has ""Maintain Stock"" (need UOM conversions).
If disable Maintain stock, changing UOM in invoice, will fetch associated price!
Closing due to working as expected.

Nihantra-Patel on (2024-04-19 06:01:47 UTC): fixed in the upper version: https://github.com/frappe/erpnext/pull/40216

If you want, then we will raise the PR for version 14.

"
2242271592,issue,closed,completed,Unable to fetch Serial/Batch number from Delivery Note to Sales Invoice,"### Information about bug

Unable to fetch Serial/Batch Number from Delivery Note to Sales Invoice. So not able to print serial/batch number in sales invoice.
There should be an option to link same Serial And Batch Bundle to Delivery Note and Sales Invoice both document.


### Module

stock, selling

### Version

Frappe version - 15.21.0
ERPNext Version - 15.20.3

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",HUMENTH,2024-04-14 17:22:24+00:00,['rohitwaghchaure'],2024-07-02 00:08:57+00:00,2024-06-14 08:33:19+00:00,https://github.com/frappe/erpnext/issues/41003,"[('bug', None)]","[{'comment_id': 2167532665, 'issue_id': 2242271592, 'author': 'rohitwaghchaure', 'body': ""@HUMENTH You can't link the same serial and batch bundle in multiple documents."", 'created_at': datetime.datetime(2024, 6, 14, 8, 33, 19, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-14 08:33:19 UTC): @HUMENTH You can't link the same serial and batch bundle in multiple documents.

"
2242163342,issue,closed,completed,The customer name field disappear,"### Information about bug

i hope when i change the naming the doctype still work very well

### Module

selling

### Version

ERPNext: v15.20.3 (version-15)
Frappe Framework: v15.22.0 (version-15)
Frappe HR: v15.17.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
The field ""customer name"" disappears from the screen. When I change another field and save, I get an error message.
`
Message
Customer with the same name already exists. Please choose a different name`

request.js:473 Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1718, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1085, in run_before_save_methods
    self.run_method(""before_validate"")
  File ""apps/frappe/frappe/model/document.py"", line 966, in run_method
    run_server_script_for_doc_event(self, method)
  File ""apps/frappe/frappe/core/doctype/server_script/server_script_utils.py"", line 42, in run_server_script_for_doc_event
    frappe.get_doc(""Server Script"", script_name).execute_doc(doc)
  File ""apps/frappe/frappe/core/doctype/server_script/server_script.py"", line 169, in execute_doc
    safe_exec(
  File ""apps/frappe/frappe/utils/safe_exec.py"", line 100, in safe_exec
    exec(
  File ""<serverscript>: customer_name_validation"", line 3, in <module>
  File ""apps/frappe/frappe/__init__.py"", line 602, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 567, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 518, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Customer with the same name already exists. Please choose a different name.
```
```
",manalErpnext,2024-04-14 13:07:48+00:00,[],2024-05-04 00:09:17+00:00,2024-04-19 09:19:12+00:00,https://github.com/frappe/erpnext/issues/41002,"[('bug', None)]","[{'comment_id': 2066173505, 'issue_id': 2242163342, 'author': 'Nihantra-Patel', 'body': 'If you choose Customer Naming By Customer Name in the selling system and then create a customer, it checks if the customer is already in the list. If the customer is already listed, it will display ""Customer with the same name already exists."" Therefore, you must first decide whether to prioritize naming by customer name or naming series. Sometimes, users or clients may change settings, leading to such issues, but this is a default validation.\r\n\r\nhttps://github.com/frappe/erpnext/blob/e706b4534c7d7d9e91e57b33346edc9a252fcef7/erpnext/selling/doctype/customer/customer.py#L99-L106', 'created_at': datetime.datetime(2024, 4, 19, 9, 19, 12, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-04-19 09:19:12 UTC): If you choose Customer Naming By Customer Name in the selling system and then create a customer, it checks if the customer is already in the list. If the customer is already listed, it will display ""Customer with the same name already exists."" Therefore, you must first decide whether to prioritize naming by customer name or naming series. Sometimes, users or clients may change settings, leading to such issues, but this is a default validation.

https://github.com/frappe/erpnext/blob/e706b4534c7d7d9e91e57b33346edc9a252fcef7/erpnext/selling/doctype/customer/customer.py#L99-L106

"
