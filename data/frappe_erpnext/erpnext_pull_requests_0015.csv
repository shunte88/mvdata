id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2638129568,pull_request,closed,,fix: Update `dimension_filter_map` query,"**Issue:**  https://support.frappe.io/helpdesk/tickets/24751

**Conflict Commit:**  https://github.com/frappe/erpnext/pull/41946/commits/720b33d986138e134467c2bd59172cf3dcf8326c",Abdeali099,2024-11-06 13:39:58+00:00,[],2024-12-02 05:57:14+00:00,2024-11-06 14:06:47+00:00,https://github.com/frappe/erpnext/pull/43997,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2637393091,pull_request,closed,,fix: ensure list has items (backport #43993),<hr>This is an automatic backport of pull request #43993 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-06 08:38:12+00:00,['sagarvora'],2024-11-24 00:13:22+00:00,2024-11-06 08:38:34+00:00,https://github.com/frappe/erpnext/pull/43995,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2637391589,pull_request,closed,,fix: ensure list has items (backport #43993),<hr>This is an automatic backport of pull request #43993 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-06 08:37:25+00:00,['sagarvora'],2024-11-24 00:13:10+00:00,2024-11-06 08:38:21+00:00,https://github.com/frappe/erpnext/pull/43994,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2462148550, 'issue_id': 2637391589, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.75.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 7, 12, 45, 1, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-07 12:45:01 UTC): :tada: This PR is included in version 14.75.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2637386798,pull_request,closed,,fix: ensure list has items,,sagarvora,2024-11-06 08:34:50+00:00,[],2024-11-24 00:13:23+00:00,2024-11-06 08:36:28+00:00,https://github.com/frappe/erpnext/pull/43993,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2637309462,pull_request,closed,,fix: error when saving POS merge log (backport #43989),"### issue
```
builtins.AttributeError: 'list' object has no attribute 'pos_invoice'
```
### fix
check the first invoice in the list, instead of the list itself.<hr>This is an automatic backport of pull request #43989 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 07:52:17+00:00,['sagarvora'],2024-11-24 00:13:25+00:00,2024-11-06 07:56:03+00:00,https://github.com/frappe/erpnext/pull/43991,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2637309372,pull_request,closed,,fix: error when saving POS merge log (backport #43989),"### issue
```
builtins.AttributeError: 'list' object has no attribute 'pos_invoice'
```
### fix
check the first invoice in the list, instead of the list itself.<hr>This is an automatic backport of pull request #43989 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 07:52:13+00:00,['sagarvora'],2024-11-24 00:13:09+00:00,2024-11-06 07:56:09+00:00,https://github.com/frappe/erpnext/pull/43990,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2462148648, 'issue_id': 2637309372, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.75.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 7, 12, 45, 4, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-07 12:45:04 UTC): :tada: This PR is included in version 14.75.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2637256976,pull_request,closed,,fix: error when saving POS merge log,"### issue
```
builtins.AttributeError: 'list' object has no attribute 'pos_invoice'
```
### fix
check the first invoice in the list, instead of the list itself.",sagarvora,2024-11-06 07:26:31+00:00,[],2024-11-24 00:13:24+00:00,2024-11-06 07:51:20+00:00,https://github.com/frappe/erpnext/pull/43989,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2637174424,pull_request,closed,,fix: removed single quotes from deferred revenue (backport #43985),"fixes: #43963


![image](https://github.com/user-attachments/assets/741cecbb-3216-4f1a-80eb-7eecd9702106)


- removed single quotes from deferred revenue<hr>This is an automatic backport of pull request #43985 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 06:37:08+00:00,['Nihantra-Patel'],2024-11-24 00:13:08+00:00,2024-11-06 06:38:14+00:00,https://github.com/frappe/erpnext/pull/43988,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2462148741, 'issue_id': 2637174424, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.75.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 7, 12, 45, 7, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-07 12:45:07 UTC): :tada: This PR is included in version 14.75.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.75.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2637169937,pull_request,closed,,fix: removed single quotes from deferred revenue (backport #43985),"fixes: #43963


![image](https://github.com/user-attachments/assets/741cecbb-3216-4f1a-80eb-7eecd9702106)


- removed single quotes from deferred revenue<hr>This is an automatic backport of pull request #43985 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 06:33:44+00:00,['Nihantra-Patel'],2024-11-26 00:12:16+00:00,2024-11-06 06:35:17+00:00,https://github.com/frappe/erpnext/pull/43987,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2637066588,pull_request,closed,,fix: removed single quotes from deferred revenue,"fixes: #43963


![image](https://github.com/user-attachments/assets/741cecbb-3216-4f1a-80eb-7eecd9702106)


- removed single quotes from deferred revenue",Nihantra-Patel,2024-11-06 05:20:28+00:00,[],2024-11-24 00:13:26+00:00,2024-11-06 06:32:30+00:00,https://github.com/frappe/erpnext/pull/43985,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2637012617,pull_request,closed,,chore: update serial_batch_bundle.py (backport #43981),"Avaliable -> Available

<hr>This is an automatic backport of pull request #43981 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 04:37:20+00:00,[],2024-11-26 00:12:19+00:00,2024-11-06 05:00:06+00:00,https://github.com/frappe/erpnext/pull/43984,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2636979122,pull_request,closed,,perf: too many writes error during reposting (backport #43978),"**Issue**

System was throwing ""too many writes error"" during reposting

**Investigation**

Found the stock entry which has 5400 line items with the same item and same source and target warehouse with different serial nos , so there was 5400 stock ledger entries. Each SLE was calling db_update 5400 times, so total number of update queries were 5400 * 5400  = 2,91,60,000 


**Solution**
Update specific row in the stock entry based on voucher_detail_no if the source warehouse set<hr>This is an automatic backport of pull request #43978 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 04:02:04+00:00,['rohitwaghchaure'],2024-11-26 00:12:21+00:00,2024-11-06 04:35:44+00:00,https://github.com/frappe/erpnext/pull/43983,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2636978869,pull_request,closed,,perf: too many writes error during reposting (backport #43978),"**Issue**

System was throwing ""too many writes error"" during reposting

**Investigation**

Found the stock entry which has 5400 line items with the same item and same source and target warehouse with different serial nos , so there was 5400 stock ledger entries. Each SLE was calling db_update 5400 times, so total number of update queries were 5400 * 5400  = 2,91,60,000 


**Solution**
Update specific row in the stock entry based on voucher_detail_no if the source warehouse set<hr>This is an automatic backport of pull request #43978 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-06 04:01:45+00:00,['rohitwaghchaure'],2024-11-26 00:12:22+00:00,2024-11-06 04:35:36+00:00,https://github.com/frappe/erpnext/pull/43982,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2636758548,pull_request,closed,,chore: update serial_batch_bundle.py,"Avaliable -> Available

",eltociear,2024-11-06 00:13:53+00:00,[],2024-11-26 00:12:20+00:00,2024-11-06 04:36:00+00:00,https://github.com/frappe/erpnext/pull/43981,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2636245117,pull_request,closed,,fix: added precision validation (backport #43979),"Problem:
This fix addresses an issue where row.expected_value_after_useful_life was triggering a condition due to minor decimal differences, even when the values should logically be considered equal. Since row.expected_value_after_useful_life is not adjusted for precision.

Solution:
To resolve this, we will apply consistent precision to row.expected_value_after_useful_life and asset_value_after_full_schedule before performing the comparison.<hr>This is an automatic backport of pull request #43979 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-05 19:03:30+00:00,['khushi8112'],2024-11-20 00:11:25+00:00,2024-11-05 20:15:53+00:00,https://github.com/frappe/erpnext/pull/43980,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2636158157,pull_request,closed,,fix: added precision validation,"Problem:
This fix addresses an issue where row.expected_value_after_useful_life was triggering a condition due to minor decimal differences, even when the values should logically be considered equal. Since row.expected_value_after_useful_life is not adjusted for precision.

Solution:
To resolve this, we will apply consistent precision to row.expected_value_after_useful_life and asset_value_after_full_schedule before performing the comparison.",khushi8112,2024-11-05 18:16:24+00:00,[],2024-11-20 00:11:26+00:00,2024-11-05 19:01:44+00:00,https://github.com/frappe/erpnext/pull/43979,"[('backport version-15-hotfix', '')]",[],
2635546423,pull_request,closed,,perf: too many writes error during reposting,"**Issue**

System was throwing ""too many writes error"" during reposting

**Investigation**

Found the stock entry which has 5400 line items with the same item and same source and target warehouse with different serial nos , so there was 5400 stock ledger entries. Each SLE was calling db_update 5400 times, so total number of update queries were 5400 * 5400  = 2,91,60,000 


**Solution**
Update specific row in the stock entry based on voucher_detail_no if the source warehouse set",rohitwaghchaure,2024-11-05 13:58:32+00:00,[],2024-11-26 00:12:23+00:00,2024-11-06 04:00:34+00:00,https://github.com/frappe/erpnext/pull/43978,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2635018724,pull_request,closed,,fix: update per_billed value in Purchase Receipt while creating Debit Note,"Issue:
per_billed value is always 100 for partial Debit Notes

ref: [22656](https://support.frappe.io/helpdesk/tickets/22656)

Before:
[partial_return_debit_note_before.webm](https://github.com/user-attachments/assets/6b0d50ad-c9dd-4dd8-9f44-82a1b0e0d6e7)

After:
[partial_return_debit_note_after.webm](https://github.com/user-attachments/assets/5898d604-c1a2-472d-8fff-500b31f62e26)

backport needed for v14 and v15
",Navin-S-R,2024-11-05 10:14:46+00:00,['ruthra-kumar'],2024-11-30 00:12:20+00:00,2024-11-13 06:53:17+00:00,https://github.com/frappe/erpnext/pull/43977,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2634924102,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-11-05 09:34:52+00:00,[],2024-11-26 00:12:17+00:00,2024-11-06 05:20:24+00:00,https://github.com/frappe/erpnext/pull/43975,"[('accounts', ''), ('stock', None)]",[],
2634924096,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-11-05 09:34:52+00:00,[],2024-11-26 00:12:18+00:00,2024-11-06 05:10:10+00:00,https://github.com/frappe/erpnext/pull/43974,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2634456810,pull_request,closed,,refactor: update permission requirement for advance ledger (backport #43971),part of: https://github.com/frappe/erpnext/pull/43709<hr>This is an automatic backport of pull request #43971 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-05 05:30:16+00:00,['ruthra-kumar'],2024-11-20 00:11:29+00:00,2024-11-05 05:50:11+00:00,https://github.com/frappe/erpnext/pull/43973,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2634446109,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-05 05:20:02+00:00,[],2024-11-24 00:13:21+00:00,2024-11-06 09:01:32+00:00,https://github.com/frappe/erpnext/pull/43972,"[('translation', None)]",[],
2634427867,pull_request,closed,,refactor: update permission requirement for advance ledger,part of: https://github.com/frappe/erpnext/pull/43709,ruthra-kumar,2024-11-05 05:04:11+00:00,[],2024-11-20 00:11:30+00:00,2024-11-05 05:28:30+00:00,https://github.com/frappe/erpnext/pull/43971,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2634153069,pull_request,closed,,"fix: show ""Send SMS"" only when enabled (backport #43941)","Depends on https://github.com/frappe/frappe/pull/28370
<hr>This is an automatic backport of pull request #43941 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-05 00:28:46+00:00,['barredterra'],2024-12-12 00:12:15+00:00,2024-11-27 22:52:16+00:00,https://github.com/frappe/erpnext/pull/43970,[],"[{'comment_id': 2504808695, 'issue_id': 2634153069, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 27, 21, 39, 14, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-11-27 21:39:14 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2634153031,pull_request,closed,,"fix: show ""Send SMS"" only when enabled (backport #43941)","Depends on https://github.com/frappe/frappe/pull/28369
<hr>This is an automatic backport of pull request #43941 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-05 00:28:43+00:00,['barredterra'],2024-12-26 00:11:21+00:00,2024-11-27 22:52:12+00:00,https://github.com/frappe/erpnext/pull/43969,"[('released', None)]","[{'comment_id': 2504928581, 'issue_id': 2634153031, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 27, 22, 39, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2516171795, 'issue_id': 2634153031, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.78.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 12, 4, 4, 36, 54, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-11-27 22:39:29 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

frappe-pr-bot on (2024-12-04 04:36:54 UTC): :tada: This PR is included in version 14.78.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2632392767,pull_request,closed,, fix: submit POS Invoice only if the invoice amount is fully paid ,"Issue:
POS Invoice can be submitted with partial payments.

Ref:[20857](https://support.frappe.io/helpdesk/tickets/20857)

Before:
https://github.com/user-attachments/assets/36a56dd2-be75-4c9b-b93c-cd78aa59136d

After:
https://github.com/user-attachments/assets/64c0d0da-6d4a-4b49-9293-1b27c2882a3b

backport needed for v15",Navin-S-R,2024-11-04 10:16:05+00:00,['ruthra-kumar'],2025-01-24 00:10:22+00:00,2025-01-09 06:50:32+00:00,https://github.com/frappe/erpnext/pull/43966,"[('inactive', '')]","[{'comment_id': 2456909599, 'issue_id': 2632392767, 'author': 'ruthra-kumar', 'body': '@Navin-S-R \r\n\r\nThere are some test failures https://github.com/frappe/erpnext/actions/runs/11662202624/job/32468088817?pr=43966', 'created_at': datetime.datetime(2024, 11, 5, 11, 21, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2458774545, 'issue_id': 2632392767, 'author': 'Navin-S-R', 'body': ""@ruthra-kumar \r\nYes the failed patch is related to loyalty point redemption, I'm fixing it."", 'created_at': datetime.datetime(2024, 11, 6, 5, 48, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2537949549, 'issue_id': 2632392767, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 12, 6, 46, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2568772516, 'issue_id': 2632392767, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 3, 7, 2, 17, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-05 11:21:21 UTC): @Navin-S-R 

There are some test failures https://github.com/frappe/erpnext/actions/runs/11662202624/job/32468088817?pr=43966

Navin-S-R (Issue Creator) on (2024-11-06 05:48:49 UTC): @ruthra-kumar 
Yes the failed patch is related to loyalty point redemption, I'm fixing it.

stale[bot] on (2024-12-12 06:46:36 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2025-01-03 07:02:17 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2632168005,pull_request,closed,,fix: SO link on PO and add in missing dashboard references on both (backport #43388),"The main fix is to the Purchase Order dashboard link back to the Sales Order which was incorrectly specified in the _dashboard.py file

Also adds in some missing links, mainly for Manufacturing for both documents.

no-docs
version-14-hotfix
version-15-hotfix
<hr>This is an automatic backport of pull request #43388 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-04 08:32:28+00:00,[],2024-11-19 00:11:48+00:00,2024-11-04 08:57:34+00:00,https://github.com/frappe/erpnext/pull/43965,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2632167937,pull_request,closed,,fix: SO link on PO and add in missing dashboard references on both (backport #43388),"The main fix is to the Purchase Order dashboard link back to the Sales Order which was incorrectly specified in the _dashboard.py file

Also adds in some missing links, mainly for Manufacturing for both documents.

no-docs
version-14-hotfix
version-15-hotfix
<hr>This is an automatic backport of pull request #43388 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-04 08:32:25+00:00,[],2024-11-19 00:11:47+00:00,2024-11-04 10:04:04+00:00,https://github.com/frappe/erpnext/pull/43964,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2454091430, 'issue_id': 2632167937, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 2017fd80d1bf930fd5185ddb3ddb427eb73841f8 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43388\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 2017fd80d1.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/purchase_order/purchase_order_dashboard.py\n\tboth modified:   erpnext/selling/doctype/sales_order/sales_order_dashboard.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 4, 8, 32, 27, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-04 08:32:27 UTC): Cherry-pick of 2017fd80d1bf930fd5185ddb3ddb427eb73841f8 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43388
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 2017fd80d1.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/purchase_order/purchase_order_dashboard.py
	both modified:   erpnext/selling/doctype/sales_order/sales_order_dashboard.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2632129009,pull_request,closed,,fix: consider service item cost in the RM cost of the BOM,"**Issue**

If the raw material is non stock item (service item), then system doesn't consider the rate in the raw materials cost calculation.",rohitwaghchaure,2024-11-04 08:12:37+00:00,[],2024-11-27 00:11:48+00:00,2024-11-12 16:29:08+00:00,https://github.com/frappe/erpnext/pull/43962,"[('backport version-15-hotfix', '')]",[],
2632062013,pull_request,closed,,perf: avoid reposting of entries created after stock reco (backport #43950),No need to do reposting of entries which has been created after the stock reconciliation for the non serialized or non batched items <hr>This is an automatic backport of pull request #43950 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-04 07:36:10+00:00,['rohitwaghchaure'],2024-11-19 00:11:51+00:00,2024-11-04 07:53:44+00:00,https://github.com/frappe/erpnext/pull/43961,"[('stock', None)]",[],
2632000342,pull_request,closed,,fix: Map reference number while reversing Journal Entry (backport #43929),<hr>This is an automatic backport of pull request #43929 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-04 06:58:59+00:00,[],2024-11-19 00:11:54+00:00,2024-11-04 07:45:31+00:00,https://github.com/frappe/erpnext/pull/43959,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2631978524,pull_request,closed,,fix: set correct unallocated amount in Payment Entry,"Closes #43844

_Squash and Merge_",sagarvora,2024-11-04 06:46:10+00:00,['ruthra-kumar'],2024-12-25 00:11:58+00:00,2024-12-02 09:24:29+00:00,https://github.com/frappe/erpnext/pull/43958,"[('squash', 'Meant to tell reviewers that this PR should be squashed into a single commit while merging.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2482038445, 'issue_id': 2631978524, 'author': 'ruthra-kumar', 'body': '@sagarvora \r\nCan you resolve the conflicts', 'created_at': datetime.datetime(2024, 11, 18, 6, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2482157539, 'issue_id': 2631978524, 'author': 'vishakhdesai', 'body': '> @sagarvora Can you resolve the conflicts\r\n\r\nConflicts are resolved.', 'created_at': datetime.datetime(2024, 11, 18, 7, 33, 55, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-18 06:10:00 UTC): @sagarvora 
Can you resolve the conflicts

vishakhdesai on (2024-11-18 07:33:55 UTC): Conflicts are resolved.

"
2631903728,pull_request,closed,,Update fiscal_year.js (backport #43835),"

> Please provide enough information so that others can review your pull request:



> Explain the **details** for making this change. What existing problem does the pull request solve?



> Screenshots/GIFs


<hr>This is an automatic backport of pull request #43835 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-04 05:48:52+00:00,[],2024-11-19 00:11:57+00:00,2024-11-04 05:56:03+00:00,https://github.com/frappe/erpnext/pull/43956,[],[],
2631855196,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-04 05:09:12+00:00,[],2024-11-19 00:11:53+00:00,2024-11-04 07:46:23+00:00,https://github.com/frappe/erpnext/pull/43955,"[('translation', None)]",[],
2631091041,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-11-03 09:35:32+00:00,[],2024-11-19 00:12:01+00:00,2024-11-03 09:59:19+00:00,https://github.com/frappe/erpnext/pull/43953,[],[],
2630986977,pull_request,closed,,perf: avoid reposting of entries created after stock reco,No need to do reposting of entries which has been created after the stock reconciliation for the non serialized or non batched items ,rohitwaghchaure,2024-11-03 05:37:18+00:00,[],2024-11-19 00:11:55+00:00,2024-11-04 07:34:36+00:00,https://github.com/frappe/erpnext/pull/43950,"[('stock', None), ('backport version-15-hotfix', '')]",[],
2628602965,pull_request,closed,,feat: Ledger for advance payment (backport #43709),"# Issue
System allows advance payment to exceed Sales / Purchase Order grand total.

Consider below scenario,
1. Sales Order of 10000 /-
2. Make an Advance Payment of 2000 /-
3. Make a Partial Invoice (2000 /-) for Sales Order and Reconcile the advance against the invoice
4. Now, try making an Advance payment of 10000 /-. System allows this. It should've only allowed up to 8000 /-



# Current Limitation
This happens because technically there is no distinction between a Normal Payment and an Advance Payment. So there is no persistent data structure to track the Advance Amount received for a Sales / Purchase Order. This distinction is inferred solely based on the allocation. If the Payment is allocated to a Sales / Purchase Order, then it is considered as an Advance Payment.

The problem with this approach is once reconciliation happens, the allocation to Sales / Purchase Order are replaced with an Invoice. So, we loose the critical information: **A certain amount was received as an Advance, but it is now allocated to an Invoice.**

# Solution
A separate ledger to track Advance Payments against Sales Order or Purchase Order that only captures Submit and Cancel events. This way Reconciliation / Un-Reconciliation doesn't affect the advance amount calculation.

|Event| Ledger Effect|
|-|-|
|Submit| Update|
|Reconcile|-|
|Unreconcile|-|
|Cancel|Update|


todo:
 - [x] Refactor code; move logic to controller class
 - [x] Patch to migrate existing records
 - [x] Test for Foreign currency Transaction
 - ~~[ ] Refactor HR code as well~~

For `Employee Advance` and `Gratuity`, reference is maintained even after the advance has been allocated. So, HRMS will continue to use GL Entry for calculating `advance_paid`,

`no-docs`<hr>This is an automatic backport of pull request #43709 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-01 08:35:10+00:00,['ruthra-kumar'],2024-11-19 00:11:59+00:00,2024-11-04 05:23:21+00:00,https://github.com/frappe/erpnext/pull/43946,"[('accounts', '')]","[{'comment_id': 2451512781, 'issue_id': 2628602965, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 2b2360bf7bedb771ca90d0a0a99f90eae693e179 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43709\nYour branch is ahead of \'origin/version-15-hotfix\' by 3 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 2b2360bf7b.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/controllers/accounts_controller.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 1, 8, 35, 12, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-01 08:35:12 UTC): Cherry-pick of 2b2360bf7bedb771ca90d0a0a99f90eae693e179 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43709
Your branch is ahead of 'origin/version-15-hotfix' by 3 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 2b2360bf7b.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/controllers/accounts_controller.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2628232470,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-01 03:31:02+00:00,[],2024-11-19 00:12:00+00:00,2024-11-04 04:43:26+00:00,https://github.com/frappe/erpnext/pull/43945,"[('translation', None)]",[],
2627427428,pull_request,closed,,fix: validation trigger (backport #43926),Moved validation from save to submit<hr>This is an automatic backport of pull request #43926 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-31 17:26:26+00:00,['rohitwaghchaure'],2024-11-17 00:12:37+00:00,2024-11-02 22:50:02+00:00,https://github.com/frappe/erpnext/pull/43943,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2627427226,pull_request,closed,,fix: valuation rate for sales / purchase return for serial / batch nos (backport #43925),Fixed https://github.com/frappe/erpnext/issues/43850<hr>This is an automatic backport of pull request #43925 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-31 17:26:18+00:00,['rohitwaghchaure'],2024-11-17 00:12:36+00:00,2024-11-02 22:50:20+00:00,https://github.com/frappe/erpnext/pull/43942,"[('stock', None)]",[],
2626804685,pull_request,closed,,"fix: show ""Send SMS"" only when enabled","Depends on https://github.com/frappe/frappe/pull/28338
",barredterra,2024-10-31 13:02:50+00:00,[],2024-11-20 00:11:31+00:00,2024-11-05 00:27:36+00:00,https://github.com/frappe/erpnext/pull/43941,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2626608826,pull_request,closed,,added filter to set_warehouse,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",shubham-DT,2024-10-31 11:22:04+00:00,[],2024-11-19 00:11:52+00:00,2024-11-04 07:52:02+00:00,https://github.com/frappe/erpnext/pull/43940,"[('accounts', ''), ('stock', None), ('CRM', None), ('selling', None), ('buying', None), ('assets', ''), ('projects', 'projects module related issue / PR')]",[],
2625882205,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-31 03:17:32+00:00,['ruthra-kumar'],2024-11-15 00:11:57+00:00,2024-10-31 04:25:03+00:00,https://github.com/frappe/erpnext/pull/43937,"[('translation', None)]",[],
2624255476,pull_request,closed,,feat: remove Payroll Entry from Bank Account dashboard (backport #43931),"Corresponding PR on HRMS: https://github.com/frappe/hrms/pull/2369

Resolves https://github.com/frappe/erpnext/pull/43365#discussion_r1822368673

> no-docs<hr>This is an automatic backport of pull request #43931 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 14:17:10+00:00,['barredterra'],2024-11-14 00:11:02+00:00,2024-10-30 14:49:26+00:00,https://github.com/frappe/erpnext/pull/43933,[],[],
2624255292,pull_request,closed,,feat: remove Payroll Entry from Bank Account dashboard (backport #43931),"Corresponding PR on HRMS: https://github.com/frappe/hrms/pull/2369

Resolves https://github.com/frappe/erpnext/pull/43365#discussion_r1822368673

> no-docs<hr>This is an automatic backport of pull request #43931 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 14:17:06+00:00,['barredterra'],2024-11-14 00:11:03+00:00,2024-10-30 14:49:22+00:00,https://github.com/frappe/erpnext/pull/43932,[],[],
2624177855,pull_request,closed,,feat: remove Payroll Entry from Bank Account dashboard,"Corresponding PR on HRMS: https://github.com/frappe/hrms/pull/2369

Resolves https://github.com/frappe/erpnext/pull/43365#discussion_r1822368673

> no-docs",barredterra,2024-10-30 13:50:15+00:00,[],2024-11-14 00:11:01+00:00,2024-10-30 14:15:54+00:00,https://github.com/frappe/erpnext/pull/43931,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2623942390,pull_request,closed,,fix: use get_datetime_as_string with correct time format,"Timesheet and Timer use a mixture of d.format(frappe.defaultDatetimeFormat) and frappe.datetime.get_datetime_as_string().
Both until now do not respect the time format set in sysdefaults.
This can cause rounding errors when client side scripts calculate based upon unsubmitted values.
When sysdefaults TimeFormat is selected to be ""HH:mm"" and in a Timesheet a to_time or from_time with seconds is submitted, the hours field is calculated with seconds included. After submission the seconds are stripped from to_time or from_time, creating a missmatch of hours calculated and to_time - from_time.

This patch depends on [fix: get_datetime_as_string should respect time_format](https://github.com/frappe/frappe/pull/28333) in frappe and solves the rounding/missmatch problem, as well as cleans up the scripts to only use get_datetime_as_string.",lbrandh,2024-10-30 12:27:17+00:00,['ruthra-kumar'],2024-12-28 00:11:22+00:00,2024-12-13 06:37:57+00:00,https://github.com/frappe/erpnext/pull/43930,"[('defer backport', '')]","[{'comment_id': 2480368816, 'issue_id': 2623942390, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 16, 3, 26, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2522522850, 'issue_id': 2623942390, 'author': 'lbrandh', 'body': 'https://github.com/frappe/frappe/pull/28333 has been merged in frappe/frappe so this PR should be ready to merge as well', 'created_at': datetime.datetime(2024, 12, 6, 8, 40, 53, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-11-16 03:26:19 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

lbrandh (Issue Creator) on (2024-12-06 08:40:53 UTC): https://github.com/frappe/frappe/pull/28333 has been merged in frappe/frappe so this PR should be ready to merge as well

"
2623908719,pull_request,closed,,fix: Map reference number while reversing Journal Entry,,ramyasusee,2024-10-30 12:12:21+00:00,['ruthra-kumar'],2024-11-19 00:11:56+00:00,2024-11-04 06:57:55+00:00,https://github.com/frappe/erpnext/pull/43929,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2623573273,pull_request,closed,,Issue 494,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",hrishikesh8848,2024-10-30 10:20:55+00:00,[],2024-11-14 00:11:04+00:00,2024-10-30 10:21:24+00:00,https://github.com/frappe/erpnext/pull/43928,"[('accounts', ''), ('stock', None), ('CRM', None), ('selling', None), ('buying', None), ('assets', ''), ('projects', 'projects module related issue / PR')]",[],
2623244880,pull_request,closed,,fix: cannot create opp from lead without prospect (backport #43921),"
https://github.com/user-attachments/assets/f307860c-d17c-4495-a44b-9a5498bd47d9

<hr>This is an automatic backport of pull request #43921 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 08:19:20+00:00,['shariquerik'],2024-11-19 00:11:46+00:00,2024-10-30 09:10:00+00:00,https://github.com/frappe/erpnext/pull/43927,[],[],
2623228896,pull_request,closed,,fix: validation trigger,Moved validation from save to submit,rohitwaghchaure,2024-10-30 08:12:31+00:00,[],2024-11-15 00:11:54+00:00,2024-10-31 17:25:02+00:00,https://github.com/frappe/erpnext/pull/43926,"[('backport version-15-hotfix', '')]",[],
2623155580,pull_request,closed,,fix: valuation rate for sales / purchase return for serial / batch nos,Fixed https://github.com/frappe/erpnext/issues/43850,rohitwaghchaure,2024-10-30 07:32:31+00:00,[],2024-11-15 00:11:55+00:00,2024-10-31 17:24:30+00:00,https://github.com/frappe/erpnext/pull/43925,"[('stock', None), ('backport version-15-hotfix', '')]",[],
2623055239,pull_request,closed,,fix: cannot create opp from lead without prospect,"
https://github.com/user-attachments/assets/f307860c-d17c-4495-a44b-9a5498bd47d9

",shariquerik,2024-10-30 06:36:24+00:00,[],2024-11-14 00:11:23+00:00,2024-10-30 08:17:42+00:00,https://github.com/frappe/erpnext/pull/43921,"[('frappe-support', ''), ('backport version-15-hotfix', '')]",[],
2622932255,pull_request,closed,,fix: calculate tds with net amount when invoice exceeds single threshold amount (backport #43869),"**Issue:**
When a purchase invoice exceeds the single threshold value but doesn't exceed the cumulative threshold, the TDS amount is calculated on the grand total instead of the net total when consider_party_ledger_amount is ticked on Tax Withholding Category
**ref:** [23540](https://support.frappe.io/helpdesk/tickets/23540)

**Before:**
[TDS Calculation Issue](https://github.com/user-attachments/assets/bca2f5f3-d6a1-4ee8-bd03-c3afeeaf3c7d)

**After:**
[TDS Calculation Fix](https://github.com/user-attachments/assets/5679224e-09f3-4af8-82e7-36f1a7ea53c8)

**Backport needed: v14 & v15**<hr>This is an automatic backport of pull request #43869 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 05:14:52+00:00,[],2024-11-14 00:11:25+00:00,2024-10-30 05:55:56+00:00,https://github.com/frappe/erpnext/pull/43920,[],[],
2622931645,pull_request,closed,,fix: calculate tds with net amount when invoice exceeds single threshold amount (backport #43869),"**Issue:**
When a purchase invoice exceeds the single threshold value but doesn't exceed the cumulative threshold, the TDS amount is calculated on the grand total instead of the net total when consider_party_ledger_amount is ticked on Tax Withholding Category
**ref:** [23540](https://support.frappe.io/helpdesk/tickets/23540)

**Before:**
[TDS Calculation Issue](https://github.com/user-attachments/assets/bca2f5f3-d6a1-4ee8-bd03-c3afeeaf3c7d)

**After:**
[TDS Calculation Fix](https://github.com/user-attachments/assets/5679224e-09f3-4af8-82e7-36f1a7ea53c8)

**Backport needed: v14 & v15**<hr>This is an automatic backport of pull request #43869 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 05:14:46+00:00,[],2024-11-14 00:11:21+00:00,2024-10-30 05:56:08+00:00,https://github.com/frappe/erpnext/pull/43919,"[('released', None)]","[{'comment_id': 2446382273, 'issue_id': 2622931645, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 6, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:06 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2622904615,pull_request,closed,,fix: find first PCV to consider opening entries (backport #43913),"### Issue:
The previous logic does not work while calling from the `update_closing_balance` patch because there could be multiple existing PCVs in the system.<hr>This is an automatic backport of pull request #43913 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 04:55:33+00:00,['nabinhait'],2024-11-14 00:11:28+00:00,2024-10-30 05:13:47+00:00,https://github.com/frappe/erpnext/pull/43918,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2622896373,pull_request,closed,,fix: remarks field in payment reconciliation (backport #43886),"The remarks in payments of Payment Reconciliation is not appearing because of the fieldname is `remark` and the code has `remarks`. 

![Screenshot 2024-10-29 at 11 14 13](https://github.com/user-attachments/assets/6404002d-5abc-433b-8ba9-9f16fb9cc525)
<hr>This is an automatic backport of pull request #43886 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 04:50:33+00:00,[],2024-11-14 00:11:27+00:00,2024-10-30 05:13:58+00:00,https://github.com/frappe/erpnext/pull/43917,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2445841742, 'issue_id': 2622896373, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 2d5b079949ce13a162686780c2b4cde5c7fb1071 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43886\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 2d5b079949.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.py\n\tmodified:   erpnext/accounts/utils.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 30, 4, 50, 35, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-30 04:50:35 UTC): Cherry-pick of 2d5b079949ce13a162686780c2b4cde5c7fb1071 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43886
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 2d5b079949.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py
	modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.py
	modified:   erpnext/accounts/utils.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2622896279,pull_request,closed,,fix: remarks field in payment reconciliation (backport #43886),"The remarks in payments of Payment Reconciliation is not appearing because of the fieldname is `remark` and the code has `remarks`. 

![Screenshot 2024-10-29 at 11 14 13](https://github.com/user-attachments/assets/6404002d-5abc-433b-8ba9-9f16fb9cc525)
<hr>This is an automatic backport of pull request #43886 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 04:50:30+00:00,[],2024-11-14 00:11:20+00:00,2024-10-30 05:21:40+00:00,https://github.com/frappe/erpnext/pull/43916,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2445841688, 'issue_id': 2622896279, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 2d5b079949ce13a162686780c2b4cde5c7fb1071 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43886\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 2d5b079949.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py\n\tmodified:   erpnext/accounts/utils.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.json\n\tboth modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 30, 4, 50, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446382408, 'issue_id': 2622896279, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 9, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-30 04:50:32 UTC): Cherry-pick of 2d5b079949ce13a162686780c2b4cde5c7fb1071 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43886
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 2d5b079949.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py
	modified:   erpnext/accounts/utils.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.json
	both modified:   erpnext/accounts/doctype/payment_reconciliation_payment/payment_reconciliation_payment.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:09 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2622876053,pull_request,closed,,fix: recalculate outstanding after save on checkout for POS Invoice (backport #43884),"Issue: Default payment amount after checkout is incorrect due to changes in grand_total on save.

Step to Replicate:
-  Create an item with a selling rate of 5000.
-   Create a Pricing Rule with a discount of 1000 on a minimum order value of 10000.
- Open POS and add 3 items to the cart. The Grand total is showing 14160 but the Cash/Paid Amount is showing 17700. However, it should show 14160

![image](https://github.com/user-attachments/assets/cbe901cb-d902-421f-8538-11862f71fee9)



Solution:
Resetting payments table after saving on checkout.


backport version-15-hotfix

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24344


<hr>This is an automatic backport of pull request #43884 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-30 04:37:21+00:00,[],2024-11-14 00:11:31+00:00,2024-10-30 04:49:51+00:00,https://github.com/frappe/erpnext/pull/43915,[],[],
2622765624,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-30 03:18:49+00:00,[],2024-11-14 00:11:34+00:00,2024-10-30 04:01:36+00:00,https://github.com/frappe/erpnext/pull/43914,"[('translation', None)]",[],
2622088542,pull_request,closed,,fix: find first PCV to consider opening entries,"### Issue:
The previous logic does not work while calling from the `update_closing_balance` patch because there could be multiple existing PCVs in the system.",nabinhait,2024-10-29 18:57:42+00:00,[],2024-11-14 00:11:30+00:00,2024-10-30 04:54:02+00:00,https://github.com/frappe/erpnext/pull/43913,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2622047337,pull_request,closed,,fix: consider opening asset values while calculating depreciation rate (backport #43899),"The depreciation rate calculation will be updated to fully use Opening Accumulated Depreciation and Opening Number of Booked Depreciations as starting points.
This ensures the system accurately distributes all remaining depreciations over the asset’s useful life and meets the Expected Value After Useful Life.

<hr>This is an automatic backport of pull request #43899 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 18:36:48+00:00,['khushi8112'],2024-11-13 00:11:16+00:00,2024-10-29 18:54:48+00:00,https://github.com/frappe/erpnext/pull/43912,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621919887,pull_request,closed,,fix: Patch for reposting account closing balance (backport #43905),Patch for reposting account closing balance<hr>This is an automatic backport of pull request #43905 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-29 17:32:18+00:00,['nabinhait'],2024-11-13 00:11:19+00:00,2024-10-29 17:52:29+00:00,https://github.com/frappe/erpnext/pull/43910,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621919570,pull_request,closed,,fix: Patch for reposting account closing balance (backport #43905),Patch for reposting account closing balance<hr>This is an automatic backport of pull request #43905 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-29 17:32:08+00:00,[],2024-11-13 00:11:20+00:00,2024-10-29 17:37:59+00:00,https://github.com/frappe/erpnext/pull/43909,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621911853,pull_request,closed,,fix: rounding issue of required qty in subcontracting order,fix: rounding issue of required qty in subcontracting order,nabinhait,2024-10-29 17:27:59+00:00,[],2024-11-14 00:11:26+00:00,2024-10-30 05:55:08+00:00,https://github.com/frappe/erpnext/pull/43908,[],[],
2621896918,pull_request,closed,,fix: restored report tests for manufacturing,fix: restored report tests for manufacturing,nabinhait,2024-10-29 17:20:12+00:00,[],2024-11-13 00:11:18+00:00,2024-10-29 17:52:38+00:00,https://github.com/frappe/erpnext/pull/43907,[],[],
2621869273,pull_request,closed,,fix: rounding issue of required qty in subcontracting order (backport #43810),"Rounding issue of required qty in subcontracting order

Internal frappe support issue: https://support.frappe.io/helpdesk/tickets/23810<hr>This is an automatic backport of pull request #43810 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 17:08:31+00:00,['nabinhait'],2024-11-13 00:11:22+00:00,2024-10-29 17:22:01+00:00,https://github.com/frappe/erpnext/pull/43906,"[('conflicts', None)]","[{'comment_id': 2444875155, 'issue_id': 2621869273, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 966e8fa85e0b90c7bb94c9f3633bb25b02c6724f has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43810\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 966e8fa85e.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/subcontracting_controller.py\n\tmodified:   erpnext/controllers/tests/test_subcontracting_controller.py\n\tmodified:   erpnext/subcontracting/doctype/subcontracting_order/test_subcontracting_order.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/manufacturing/report/test_reports.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 29, 17, 8, 33, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-29 17:08:33 UTC): Cherry-pick of 966e8fa85e0b90c7bb94c9f3633bb25b02c6724f has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43810
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 966e8fa85e.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/subcontracting_controller.py
	modified:   erpnext/controllers/tests/test_subcontracting_controller.py
	modified:   erpnext/subcontracting/doctype/subcontracting_order/test_subcontracting_order.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/manufacturing/report/test_reports.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2621859446,pull_request,closed,,fix: Patch for reposting account closing balance,Patch for reposting account closing balance,nabinhait,2024-10-29 17:05:11+00:00,[],2024-11-13 00:11:21+00:00,2024-10-29 17:30:41+00:00,https://github.com/frappe/erpnext/pull/43905,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2444889839, 'issue_id': 2621859446, 'author': 'nabinhait', 'body': '@mergify backport version-15', 'created_at': datetime.datetime(2024, 10, 29, 17, 14, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2444890090, 'issue_id': 2621859446, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#43909 fix: Patch for reposting account closing balance (backport #43905)](https://github.com/frappe/erpnext/pull/43909) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 10, 29, 17, 14, 53, tzinfo=datetime.timezone.utc)}]","nabinhait (Issue Creator) on (2024-10-29 17:14:45 UTC): @mergify backport version-15

mergify[bot] on (2024-10-29 17:14:53 UTC): #### ✅ Backports have been created

<details>

* [#43909 fix: Patch for reposting account closing balance (backport #43905)](https://github.com/frappe/erpnext/pull/43909) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2621781284,pull_request,closed,,fix: work order finish button not showing (backport #43875) (backport #43877),"**Issue**

- Make Work Order with Single operation and qty to manufacture as 4
- Set ""Transfer Material Against"" as ""Job Card""
- In the job card, change the qty from 4 to 2 and complete the job card
- In the work order, Finish button not showing.

<hr>This is an automatic backport of pull request #43875 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #43877 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 16:32:32+00:00,[],2024-11-13 00:11:24+00:00,2024-10-29 17:07:26+00:00,https://github.com/frappe/erpnext/pull/43904,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621637738,pull_request,closed,,fix: post account closing balance against pcv closing account (backport #43887),"- Post account closing balance against pcv closing account with ""is_period_closing_voucher_entry"" checked.
- Create closing balances even if there are no gle records within a period, to copy closing balances for the previous period.<hr>This is an automatic backport of pull request #43887 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 15:37:07+00:00,[],2024-11-13 00:11:27+00:00,2024-10-29 15:38:20+00:00,https://github.com/frappe/erpnext/pull/43902,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621564745,pull_request,closed,,fix: use period closing voucher object to call get_account_closing_ba… (backport #43880),"Issue:
Patch update_closing_balances failing while migrating the site
ref: [24399](https://support.frappe.io/helpdesk/tickets/24399)

![image](https://github.com/user-attachments/assets/992c7d94-ef45-4588-82fb-3d94d1402b66)

Backport needed: v15
<hr>This is an automatic backport of pull request #43880 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 15:15:31+00:00,[],2024-11-13 00:11:29+00:00,2024-10-29 15:33:20+00:00,https://github.com/frappe/erpnext/pull/43901,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2621156121,pull_request,closed,,fix: Calculate gross margin on update of project costing from invoices (backport #43876),"- Calculate gross margin after updating costing from sales and purchase invoice
- Calculate total billed amount considering project selected on sales invoice item level
- Added index on project column in sales/purchase invoice item table
- Fixed project costing calculation on background
- <hr>This is an automatic backport of pull request #43876 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 12:52:19+00:00,['nabinhait'],2024-11-13 00:11:26+00:00,2024-10-29 17:06:39+00:00,https://github.com/frappe/erpnext/pull/43900,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2444128809, 'issue_id': 2621156121, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 0bba6442c0f64bbf36f79d0df27bb922275d96af has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43876\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 0bba6442c0.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\tmodified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json\n\tmodified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py\n\tmodified:   erpnext/projects/doctype/project/project.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 29, 12, 52, 21, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-29 12:52:21 UTC): Cherry-pick of 0bba6442c0f64bbf36f79d0df27bb922275d96af has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43876
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 0bba6442c0.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py
	modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json
	modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py
	modified:   erpnext/projects/doctype/project/project.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2621084995,pull_request,closed,,fix: consider opening asset values while calculating depreciation rate,"The depreciation rate calculation will be updated to fully use Opening Accumulated Depreciation and Opening Number of Booked Depreciations as starting points.
This ensures the system accurately distributes all remaining depreciations over the asset’s useful life and meets the Expected Value After Useful Life.

",khushi8112,2024-10-29 12:21:22+00:00,[],2024-11-13 00:11:17+00:00,2024-10-29 18:35:22+00:00,https://github.com/frappe/erpnext/pull/43899,"[('backport version-15-hotfix', '')]",[],
2620947228,pull_request,closed,,fix: post account closing balance against pcv closing account (backport #43887),"- Post account closing balance against pcv closing account with ""is_period_closing_voucher_entry"" checked.
- Create closing balances even if there are no gle records within a period, to copy closing balances for the previous period.<hr>This is an automatic backport of pull request #43887 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 11:24:11+00:00,['nabinhait'],2024-11-13 00:11:33+00:00,2024-10-29 11:55:40+00:00,https://github.com/frappe/erpnext/pull/43898,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620775352,pull_request,closed,,fix: add parenttype clause to invoice tax query in sales_register report (backport #43856),"

The `Sales Register` report's tax calculation query was only grouping by `parent` on `tabSales Taxes and Charges`. This can cause the `Sales Taxes and Charges` of another document (ex: Quotation) having the same name (where doc names are manually set or proforma invoice) to be calculated into the sales tax. Adding the `parenttype = 'Sales Invoice'` condition avoids such issues in this PR.

closes #43811

backport version-15
backport version-14<hr>This is an automatic backport of pull request #43856 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 10:10:43+00:00,[],2024-11-13 00:11:35+00:00,2024-10-29 10:43:03+00:00,https://github.com/frappe/erpnext/pull/43897,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620775281,pull_request,closed,,fix: add parenttype clause to invoice tax query in sales_register report (backport #43856),"

The `Sales Register` report's tax calculation query was only grouping by `parent` on `tabSales Taxes and Charges`. This can cause the `Sales Taxes and Charges` of another document (ex: Quotation) having the same name (where doc names are manually set or proforma invoice) to be calculated into the sales tax. Adding the `parenttype = 'Sales Invoice'` condition avoids such issues in this PR.

closes #43811

backport version-15
backport version-14<hr>This is an automatic backport of pull request #43856 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 10:10:41+00:00,[],2024-11-14 00:11:18+00:00,2024-10-29 10:42:47+00:00,https://github.com/frappe/erpnext/pull/43896,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2446382689, 'issue_id': 2620775281, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 15, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:15 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2620733519,pull_request,closed,,fix: Project name instead of ID in chart (backport #43698),"The ""Open Projects"" chart in the main projects workspace currently shows the document name as a x-axis label. This is not helpful for the user as this is just the project number ""PROJ-0001"", ""PROJ-0002"" etc. 
Instead this label should be the correct, human readable label from the Project DocType ""project_name"".

This fix solves the issue and shows the correct label in the graph. The old field ""name"" is kept in the report for backwards compatibility. 
<hr>This is an automatic backport of pull request #43698 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 09:54:31+00:00,[],2024-11-13 00:11:36+00:00,2024-10-29 10:42:24+00:00,https://github.com/frappe/erpnext/pull/43895,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620733448,pull_request,closed,,fix: Project name instead of ID in chart (backport #43698),"The ""Open Projects"" chart in the main projects workspace currently shows the document name as a x-axis label. This is not helpful for the user as this is just the project number ""PROJ-0001"", ""PROJ-0002"" etc. 
Instead this label should be the correct, human readable label from the Project DocType ""project_name"".

This fix solves the issue and shows the correct label in the graph. The old field ""name"" is kept in the report for backwards compatibility. 
<hr>This is an automatic backport of pull request #43698 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 09:54:29+00:00,[],2024-11-14 00:11:17+00:00,2024-10-29 10:42:32+00:00,https://github.com/frappe/erpnext/pull/43894,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2446382811, 'issue_id': 2620733448, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 18, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:18 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2620687313,pull_request,closed,,fix: do not copy serial numbers from DN to SI (backport #43885),<hr>This is an automatic backport of pull request #43885 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-29 09:38:13+00:00,['rohitwaghchaure'],2024-11-13 00:11:37+00:00,2024-10-29 10:18:40+00:00,https://github.com/frappe/erpnext/pull/43893,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620685017,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-10-29 09:37:22+00:00,[],2024-11-14 00:11:22+00:00,2024-10-30 09:51:36+00:00,https://github.com/frappe/erpnext/pull/43892,"[('accounts', ''), ('released', None)]","[{'comment_id': 2446382161, 'issue_id': 2620685017, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 3, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-10-30 09:53:03 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2620684595,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-10-29 09:37:12+00:00,[],2024-11-14 00:11:05+00:00,2024-10-30 09:53:58+00:00,https://github.com/frappe/erpnext/pull/43891,"[('accounts', '')]",[],
2620683051,pull_request,closed,,fix: not able to submit stock entry,"Getting below error while submitting the stock entry

<img width=""552"" alt=""image"" src=""https://github.com/user-attachments/assets/ab6acd78-b8ea-4dd6-9bb1-8c275e83ec04"">

",rohitwaghchaure,2024-10-29 09:36:42+00:00,[],2024-11-14 00:11:16+00:00,2024-10-29 10:05:19+00:00,https://github.com/frappe/erpnext/pull/43890,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2446382944, 'issue_id': 2620683051, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 21, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:21 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2620617605,pull_request,closed,,fix: Handle None value for item description in customer portal invoice view (backport #43823),"If the description was not set in an item it throws an error in the customer portal invoice view.

Steps to replicate:
- Create an invoice without a description.
- View that invoice in customer portal.

Before:
![image](https://github.com/user-attachments/assets/39610bb6-8907-4347-a7e2-86cd9ea0a8bc)


After:
![image](https://github.com/user-attachments/assets/90a2d27f-1c94-4831-b5a6-ea7b2f1f83a2)

backport-version-15

<details>
  <summary>Traceback</summary>
    ```log
    Traceback (most recent call last):
      File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
        response = renderer_instance.render()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
        html = self.get_html()
               ^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/utils.py"", line 523, in cache_html_decorator
        html = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 101, in get_html
        html = self.render_template()
               ^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 236, in render_template
        html = frappe.render_template(self.source, self.context, safe_render=safe_render)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/utils/jinja.py"", line 97, in render_template
        return get_jenv().from_string(template).render(context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/environment.py"", line 1301, in render
        self.environment.handle_exception()
      File ""env/lib/python3.11/site-packages/jinja2/environment.py"", line 936, in handle_exception
        raise rewrite_traceback_stack(source=source)
      File ""<template>"", line 179, in top-level template code
      File ""apps/frappe/frappe/templates/web.html"", line 1, in top-level template code
        {% extends base_template_path %}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/base.html"", line 77, in top-level template code
        {% block content %}
      File ""apps/frappe/frappe/templates/web.html"", line 63, in block 'content'
        {{ main_content() }}
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/runtime.py"", line 777, in _invoke
        rv = self._func(*arguments)
             ^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/web.html"", line 15, in template
        {% block page_container %}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/web.html"", line 30, in block 'page_container'
        {%- block page_content -%}{%- endblock -%}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""<template>"", line 110, in block 'page_content'
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/runtime.py"", line 777, in _invoke
        rv = self._func(*arguments)
             ^^^^^^^^^^^^^^^^^^^^^^
      File ""<template>"", line 176, in template
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/core/utils.py"", line 91, in html2text
        return md(html, heading_style=""ATX"", strip=strip, wrap=wrap)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/markdownify/__init__.py"", line 395, in markdownify
        return MarkdownConverter(**options).convert(html)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/markdownify/__init__.py"", line 96, in convert
        soup = BeautifulSoup(html, 'html.parser')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/bs4/__init__.py"", line 315, in __init__
        elif len(markup) <= 256 and (
             ^^^^^^^^^^^
    TypeError: object of type 'NoneType' has no len()
    
    ```
</details><hr>This is an automatic backport of pull request #43823 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 09:15:45+00:00,[],2024-11-13 00:11:23+00:00,2024-10-29 17:08:42+00:00,https://github.com/frappe/erpnext/pull/43889,[],[],
2620485967,pull_request,closed,,fix: accounting dimension fieldname (backport #43824),"Problem:
If the Doctype name contains ""-"" in its name incorrect field name was set in the Account Dimension doc due to which field was not created.

Issue:
There is inconsistency in scrub in JS and Python.
In Python, it scrubs whitespace and ""-"" dash but in js it only scrubs whitespace.

Fixing it in frappe will be a breaking change so fixing it here.

Also added validation for fieldname.

Steps to replicate:
- Create an Accounting Dimension with doctype having ""-"" in its field.


backport version-15 hotfix

Before:
![image](https://github.com/user-attachments/assets/57f723e6-eaee-4bcc-b2d7-2b52336dd4c0)

<details>
    <summary> Traceback</summary>
```log
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/utils/background_jobs.py"", line 220, in execute_job
    retval = method(**kwargs)
      site = 'precihole.localhost'
      method = <function make_dimension_in_accounting_doctypes at 0x7fdf637de700>
      event = None
      job_name = 'erpnext.accounts.doctype.accounting_dimension.accounting_dimension.make_dimension_in_accounting_doctypes'
      kwargs = {'doc': <AccountingDimension: GSTR-1 Beta>}
      user = 'Administrator'
      is_async = True
      retry = 0
      retval = None
      method_name = 'erpnext.accounts.doctype.accounting_dimension.accounting_dimension.make_dimension_in_accounting_doctypes'
      before_job_task = 'frappe.monitor.start'
  File ""apps/erpnext/erpnext/accounts/doctype/accounting_dimension/accounting_dimension.py"", line 136, in make_dimension_in_accounting_doctypes
    create_custom_field(doctype, df, ignore_validate=True)
      doc = <AccountingDimension: GSTR-1 Beta>
      doclist = ['GL Entry', 'Payment Ledger Entry', 'Sales Invoice', 'Purchase Invoice', 'Payment Entry', 'Asset', 'Stock Entry', 'Budget', 'Delivery Note', 'Sales Invoice Item', 'Purchase Invoice Item', 'Purchase Order Item', 'Sales Order Item', 'Journal Entry Account', 'Material Request Item', 'Delivery Note Item', 'Purchase Receipt Item', 'Stock Entry Detail', 'Payment Entry Deduction', 'Sales Taxes and Charges', 'Purchase Taxes and Charges', 'Shipping Rule', 'Landed Cost Item', 'Asset Value Adjustment', 'Asset Repair', 'Asset Capitalization', 'Loyalty Program', 'Stock Reconciliation', 'POS Profile', 'Opening Invoice Creation Tool', 'Opening Invoice Creation Tool Item', 'Subscription', 'Subscription Plan', 'POS Invoice', 'POS Invoice Item', 'Purchase Order', 'Purchase Receipt', 'Sales Order', 'Subcontracting Order', 'Subcontracting Order Item', 'Subcontracting Receipt', 'Subcontracting Receipt Item', 'Account Closing Balance', 'Supplier Quotation', 'Supplier Quotation Item', 'Payment Reconciliatio...
      doc_count = 2
      count = 0
      repostable_doctypes = ['Expense Claim', 'Journal Entry', 'Payment Entry', 'Purchase Invoice', 'Sales Invoice']
      doctype = 'GL Entry'
      insert_after_field = 'accounting_dimensions_section'
      df = {'fieldname': 'gstr-1_beta', 'label': 'GSTR-1 Beta', 'fieldtype': 'Link', 'options': 'GSTR-1 Beta', 'insert_after': 'accounting_dimensions_section', 'owner': 'Administrator', 'allow_on_submit': 0}
      meta = <Meta: GL Entry>
      fieldnames = ['posting_date', 'transaction_date', 'account', 'party_type', 'party', 'cost_center', 'debit', 'credit', 'account_currency', 'debit_in_account_currency', 'credit_in_account_currency', 'against', 'against_voucher_type', 'against_voucher', 'voucher_type', 'voucher_subtype', 'voucher_no', 'voucher_detail_no', 'project', 'remarks', 'is_opening', 'is_advance', 'fiscal_year', 'company', 'company_gstin', 'finance_book', 'to_rename', 'due_date', 'is_cancelled', 'transaction_currency', 'debit_in_transaction_currency', 'credit_in_transaction_currency', 'transaction_exchange_rate']
  File ""apps/frappe/frappe/custom/doctype/custom_field/custom_field.py"", line 293, in create_custom_field
    custom_field.insert()
      doctype = 'GL Entry'
      df = {'fieldname': 'gstr-1_beta', 'label': 'GSTR-1 Beta', 'fieldtype': 'Link', 'options': 'GSTR-1 Beta', 'insert_after': 'accounting_dimensions_section', 'owner': 'Administrator', 'allow_on_submit': 0}
      ignore_validate = True
      is_system_generated = True
      custom_field = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
      self = <CustomField: GL Entry-gstr-1_beta>
      ignore_permissions = None
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
      self = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      method = 'on_update'
      args = ()
      kwargs = {}
      fn = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      args = ()
      kwargs = {}
      hooks = [<function clear_doctype_notifications at 0x7fdf61df5580>, <function process_workflow_actions at 0x7fdf61df7600>, <function attach_files_to_document at 0x7fdf654cd1c0>, <function apply at 0x7fdf61c222a0>, <function update_due_date at 0x7fdf61c22340>, <function apply_permissions_for_non_standard_user_type at 0x7fdf61c23a60>]
      method = 'on_update'
      doc_events = {'*': {'on_update': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.core.doctype.file.utils.attach_files_to_document', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply', 'frappe.automation.doctype.assignment_rule.assignment_rule.update_due_date', 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type'], 'after_rename': ['frappe.desk.notifications.clear_doctype_notifications'], 'on_cancel': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply'], 'on_trash': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions'], 'on_update_after_submit': ['frappe.workflow.doctype.workflow_action.workflow_action.process_w...
      handler = 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type'
      composed = <function Document.hook.<locals>.compose.<locals>.runner at 0x7fdf61df4b80>
      compose = <function Document.hook.<locals>.compose at 0x7fdf62a1ff60>
      f = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
      self = <CustomField: GL Entry-gstr-1_beta>
      method = 'on_update'
      args = ()
      kwargs = {}
      add_to_return_value = <function Document.hook.<locals>.add_to_return_value at 0x7fdf62a1f740>
      fn = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
      hooks = (<function clear_doctype_notifications at 0x7fdf61df5580>, <function process_workflow_actions at 0x7fdf61df7600>, <function attach_files_to_document at 0x7fdf654cd1c0>, <function apply at 0x7fdf61c222a0>, <function update_due_date at 0x7fdf61c22340>, <function apply_permissions_for_non_standard_user_type at 0x7fdf61c23a60>)
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      args = ()
      kwargs = {}
      method_object = <bound method CustomField.on_update of <CustomField: GL Entry-gstr-1_beta>>
      method = 'on_update'
  File ""apps/frappe/frappe/custom/doctype/custom_field/custom_field.py"", line 212, in on_update
    frappe.db.updatedb(self.dt)
      self = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/database/mariadb/database.py"", line 443, in updatedb
    db_table.sync()
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fdf62dfd6d0>
      doctype = 'GL Entry'
      meta = None
      res = ((0,),)
      db_table = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
  File ""apps/frappe/frappe/database/schema.py"", line 44, in sync
    self.alter()
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
  File ""apps/frappe/frappe/database/mariadb/schema.py"", line 67, in alter
    col.build_for_alter_table(self.current_columns.get(col.fieldname.lower()))
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
      col = <frappe.database.schema.DbColumn object at 0x7fdf6169fd10>
  File ""apps/frappe/frappe/database/schema.py"", line 220, in build_for_alter_table
    self.fieldname = validate_column_name(self.fieldname)
      self = <frappe.database.schema.DbColumn object at 0x7fdf6169fd10>
      current_def = None
      column_type = 'varchar(140)'
  File ""apps/frappe/frappe/database/schema.py"", line 305, in validate_column_name
    frappe.throw(
      n = 'gstr-1_beta'
      special_characters = '""-""'
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
      msg = 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""'
      exc = <class 'frappe.database.database.Database.InvalidColumnName'>
      title = None
      is_minimizable = False
      wide = False
      as_list = False
      primary_action = None
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
      msg = 'Fieldname gstr-1_beta cannot have special characters like ""-""'
      title = None
      raise_exception = <class 'frappe.database.database.Database.InvalidColumnName'>
      as_table = False
      as_list = False
      indicator = 'red'
      alert = False
      primary_action = None
      is_minimizable = False
      wide = False
      realtime = False
      sys = <module 'sys' (built-in)>
      _raise_exception = <function msgprint.<locals>._raise_exception at 0x7fdf6167e980>
      inspect = <module 'inspect' from '/usr/lib/python3.11/inspect.py'>
      out = {'message': 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': 'bbddab1fbe3f344a6a7ce4460f207a1f253e5c1f9547672167b40ec0'}
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
      exc = InvalidColumnName('Fieldname gstr-1_beta cannot have special characters like ""-""')
      inspect = <module 'inspect' from '/usr/lib/python3.11/inspect.py'>
      msg = 'Fieldname gstr-1_beta cannot have special characters like ""-""'
      out = {'message': 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': 'bbddab1fbe3f344a6a7ce4460f207a1f253e5c1f9547672167b40ec0'}
      raise_exception = <class 'frappe.database.database.Database.InvalidColumnName'>
frappe.database.database.InvalidColumnName: Fieldname gstr-1_beta cannot have special characters like ""-""
```

 </details>


After:
![image](https://github.com/user-attachments/assets/f125b1b3-3c73-460a-aeac-05a87e2cbccd)

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24135




 <hr>This is an automatic backport of pull request #43824 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 08:16:39+00:00,[],2024-11-13 00:11:44+00:00,2024-10-29 09:05:30+00:00,https://github.com/frappe/erpnext/pull/43888,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620449523,pull_request,closed,,fix: post account closing balance against pcv closing account,"- Post account closing balance against pcv closing account with ""is_period_closing_voucher_entry"" checked.
- Create closing balances even if there are no gle records within a period, to copy closing balances for the previous period.",nabinhait,2024-10-29 07:57:04+00:00,[],2024-11-13 00:11:28+00:00,2024-10-29 11:23:12+00:00,https://github.com/frappe/erpnext/pull/43887,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2444637406, 'issue_id': 2620449523, 'author': 'ruthra-kumar', 'body': '@mergify backport version-15', 'created_at': datetime.datetime(2024, 10, 29, 15, 35, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2444639396, 'issue_id': 2620449523, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#43902 fix: post account closing balance against pcv closing account (backport #43887)](https://github.com/frappe/erpnext/pull/43902) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 10, 29, 15, 36, 14, tzinfo=datetime.timezone.utc)}]","ruthra-kumar on (2024-10-29 15:35:41 UTC): @mergify backport version-15

mergify[bot] on (2024-10-29 15:36:14 UTC): #### ✅ Backports have been created

<details>

* [#43902 fix: post account closing balance against pcv closing account (backport #43887)](https://github.com/frappe/erpnext/pull/43902) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2620360762,pull_request,closed,,fix: remarks field in payment reconciliation,"The remarks in payments of Payment Reconciliation is not appearing because of the fieldname is `remark` and the code has `remarks`. 

![Screenshot 2024-10-29 at 11 14 13](https://github.com/user-attachments/assets/6404002d-5abc-433b-8ba9-9f16fb9cc525)
",penieldev,2024-10-29 07:15:15+00:00,['ruthra-kumar'],2024-11-14 00:11:32+00:00,2024-10-30 04:49:25+00:00,https://github.com/frappe/erpnext/pull/43886,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2444057571, 'issue_id': 2620360762, 'author': 'penieldev', 'body': 'Changing the fieldname to `remarks` makes more sense because most doctypes have `remarks` instead of `remark`. This could simplify mapping the fields.', 'created_at': datetime.datetime(2024, 10, 29, 12, 20, 16, tzinfo=datetime.timezone.utc)}]","penieldev (Issue Creator) on (2024-10-29 12:20:16 UTC): Changing the fieldname to `remarks` makes more sense because most doctypes have `remarks` instead of `remark`. This could simplify mapping the fields.

"
2620354078,pull_request,closed,,fix: do not copy serial numbers from DN to SI,,rohitwaghchaure,2024-10-29 07:12:33+00:00,[],2024-11-13 00:11:41+00:00,2024-10-29 09:37:10+00:00,https://github.com/frappe/erpnext/pull/43885,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2620323259,pull_request,closed,,fix: recalculate outstanding after save on checkout for POS Invoice,"Issue: Default payment amount after checkout is incorrect due to changes in grand_total on save.

Step to Replicate:
-  Create an item with a selling rate of 5000.
-   Create a Pricing Rule with a discount of 1000 on a minimum order value of 10000.
- Open POS and add 3 items to the cart. The Grand total is showing 14160 but the Cash/Paid Amount is showing 17700. However, it should show 14160

![image](https://github.com/user-attachments/assets/cbe901cb-d902-421f-8538-11862f71fee9)



Solution:
Resetting payments table after saving on checkout.


backport version-15-hotfix

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24344


",ljain112,2024-10-29 07:01:10+00:00,['ruthra-kumar'],2024-11-14 00:11:33+00:00,2024-10-30 04:36:30+00:00,https://github.com/frappe/erpnext/pull/43884,"[('backport version-15-hotfix', '')]","[{'comment_id': 2443935435, 'issue_id': 2620323259, 'author': 'ruthra-kumar', 'body': ""@ljain112 \r\n\r\nI couldn't replicate this. With the 5000 selling rate, 1000 discount and 3 qty, I do get 12000 on the checkout page.\r\n![Screenshot from 2024-10-29 16-47-45](https://github.com/user-attachments/assets/a4573bf2-cd34-4e2a-ad81-dc7abe0037d6)"", 'created_at': datetime.datetime(2024, 10, 29, 11, 18, 53, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-10-29 11:18:53 UTC): @ljain112 

I couldn't replicate this. With the 5000 selling rate, 1000 discount and 3 qty, I do get 12000 on the checkout page.
![Screenshot from 2024-10-29 16-47-45](https://github.com/user-attachments/assets/a4573bf2-cd34-4e2a-ad81-dc7abe0037d6)

"
2620253002,pull_request,closed,,fix: use period closing voucher object to call get_account_closing_ba… (backport #43880),"Issue:
Patch update_closing_balances failing while migrating the site
ref: [24399](https://support.frappe.io/helpdesk/tickets/24399)

![image](https://github.com/user-attachments/assets/992c7d94-ef45-4588-82fb-3d94d1402b66)

Backport needed: v15
<hr>This is an automatic backport of pull request #43880 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 06:19:08+00:00,[],2024-11-13 00:11:47+00:00,2024-10-29 06:38:24+00:00,https://github.com/frappe/erpnext/pull/43883,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2620206120,pull_request,closed,,feat: add party name in payment request (backport #43803),"Added party name field in Payment Request
ref:[24021](https://support.frappe.io/helpdesk/tickets/24021)

![payment_request](https://github.com/user-attachments/assets/cb8ce37a-69cf-44eb-bf1b-6fb8ef82a883)

Backport needed: v15<hr>This is an automatic backport of pull request #43803 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-29 05:48:23+00:00,[],2024-11-13 00:11:46+00:00,2024-10-29 06:45:48+00:00,https://github.com/frappe/erpnext/pull/43882,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2443272909, 'issue_id': 2620206120, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 0acb609d97286128f5521506e08e6e899f7feff3 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43803\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 0acb609d97.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_request/payment_request.json\n\tmodified:   erpnext/public/js/controllers/transaction.js\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_request/payment_request.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 29, 5, 48, 25, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-29 05:48:25 UTC): Cherry-pick of 0acb609d97286128f5521506e08e6e899f7feff3 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43803
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 0acb609d97.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_request/payment_request.json
	modified:   erpnext/public/js/controllers/transaction.js

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_request/payment_request.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2619858975,pull_request,open,,refactor(Timesheet),"- move a validation to `TimesheetDetail`
- extract new method `get_task_status`
",barredterra,2024-10-29 00:46:41+00:00,"['nabinhait', 'barredterra']",2025-01-27 09:25:20+00:00,,https://github.com/frappe/erpnext/pull/43881,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2480392868, 'issue_id': 2619858975, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 16, 4, 26, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2537949737, 'issue_id': 2619858975, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 12, 6, 46, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2564611279, 'issue_id': 2619858975, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 29, 4, 42, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591761159, 'issue_id': 2619858975, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 15, 6, 38, 51, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-11-16 04:26:19 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2024-12-12 06:46:45 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2024-12-29 04:42:41 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2025-01-15 06:38:51 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2618530746,pull_request,closed,,fix: use period closing voucher object to call get_account_closing_ba…,"Issue:
Patch update_closing_balances failing while migrating the site
ref: [24399](https://support.frappe.io/helpdesk/tickets/24399)

![image](https://github.com/user-attachments/assets/992c7d94-ef45-4588-82fb-3d94d1402b66)

Backport needed: v15
",venkat102,2024-10-28 14:05:32+00:00,[],2024-11-13 00:11:30+00:00,2024-10-29 06:17:40+00:00,https://github.com/frappe/erpnext/pull/43880,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2444561228, 'issue_id': 2618530746, 'author': 'ruthra-kumar', 'body': '@mergify backport version-15', 'created_at': datetime.datetime(2024, 10, 29, 15, 13, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2444562741, 'issue_id': 2618530746, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#43901 fix: use period closing voucher object to call get_account_closing_ba… (backport #43880)](https://github.com/frappe/erpnext/pull/43901) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 10, 29, 15, 13, 50, tzinfo=datetime.timezone.utc)}]","ruthra-kumar on (2024-10-29 15:13:15 UTC): @mergify backport version-15

mergify[bot] on (2024-10-29 15:13:50 UTC): #### ✅ Backports have been created

<details>

* [#43901 fix: use period closing voucher object to call get_account_closing_ba… (backport #43880)](https://github.com/frappe/erpnext/pull/43901) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2618200807,pull_request,closed,,fix: purchase return validation issue (backport #43871) (backport #43874),"- Create the purchase receipt and add same items multiple times with different conversion factor
- Create purchase return entry and you will get the below error message

<img width=""710"" alt=""image"" src=""https://github.com/user-attachments/assets/8786a490-0b07-4a46-b552-0e00512088a5"">
<hr>This is an automatic backport of pull request #43871 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #43874 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 11:53:27+00:00,[],2024-11-14 00:11:24+00:00,2024-10-30 06:47:46+00:00,https://github.com/frappe/erpnext/pull/43879,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2618198714,pull_request,closed,,fix: work order finish button not showing (backport #43875),"**Issue**

- Make Work Order with Single operation and qty to manufacture as 4
- Set ""Transfer Material Against"" as ""Job Card""
- In the job card, change the qty from 4 to 2 and complete the job card
- In the work order, Finish button not showing.

<hr>This is an automatic backport of pull request #43875 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 11:52:27+00:00,['rohitwaghchaure'],2024-11-13 00:11:34+00:00,2024-10-29 11:29:57+00:00,https://github.com/frappe/erpnext/pull/43878,[],"[{'comment_id': 2441371023, 'issue_id': 2618198714, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 0a70be5b993895dcc888c7418bbd675224554d2b has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43875\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 0a70be5b99.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/manufacturing/doctype/job_card/job_card.js\n\tboth modified:   erpnext/manufacturing/doctype/job_card/job_card.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 11, 52, 29, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 11:52:29 UTC): Cherry-pick of 0a70be5b993895dcc888c7418bbd675224554d2b has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43875
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 0a70be5b99.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/manufacturing/doctype/job_card/job_card.js
	both modified:   erpnext/manufacturing/doctype/job_card/job_card.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2618197879,pull_request,closed,,fix: work order finish button not showing (backport #43875),"**Issue**

- Make Work Order with Single operation and qty to manufacture as 4
- Set ""Transfer Material Against"" as ""Job Card""
- In the job card, change the qty from 4 to 2 and complete the job card
- In the work order, Finish button not showing.

<hr>This is an automatic backport of pull request #43875 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 11:52:05+00:00,['rohitwaghchaure'],2024-11-14 00:11:19+00:00,2024-10-29 16:30:37+00:00,https://github.com/frappe/erpnext/pull/43877,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None), ('backport version-15-hotfix', '')]","[{'comment_id': 2441370318, 'issue_id': 2618197879, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 0a70be5b993895dcc888c7418bbd675224554d2b has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43875\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 0a70be5b99.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/manufacturing/doctype/job_card/job_card.js\n\tboth modified:   erpnext/manufacturing/doctype/job_card/job_card.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 11, 52, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446382545, 'issue_id': 2618197879, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 12, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 11:52:07 UTC): Cherry-pick of 0a70be5b993895dcc888c7418bbd675224554d2b has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43875
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 0a70be5b99.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/manufacturing/doctype/job_card/job_card.js
	both modified:   erpnext/manufacturing/doctype/job_card/job_card.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:12 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2618111824,pull_request,closed,,fix: Calculate gross margin on update of project costing from invoices,"- Calculate gross margin after updating costing from sales and purchase invoice
- Calculate total billed amount considering project selected on sales invoice item level
- Added index on project column in sales/purchase invoice item table
- Fixed project costing calculation on background
- ",nabinhait,2024-10-28 11:15:14+00:00,[],2024-11-13 00:11:31+00:00,2024-10-29 12:51:20+00:00,https://github.com/frappe/erpnext/pull/43876,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2618016351,pull_request,closed,,fix: work order finish button not showing,"**Issue**

- Make Work Order with Single operation and qty to manufacture as 4
- Set ""Transfer Material Against"" as ""Job Card""
- In the job card, change the qty from 4 to 2 and complete the job card
- In the work order, Finish button not showing.

",rohitwaghchaure,2024-10-28 10:36:05+00:00,[],2024-11-12 00:10:56+00:00,2024-10-28 11:51:06+00:00,https://github.com/frappe/erpnext/pull/43875,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2617873694,pull_request,closed,,fix: purchase return validation issue (backport #43871),"- Create the purchase receipt and add same items multiple times with different conversion factor
- Create purchase return entry and you will get the below error message

<img width=""710"" alt=""image"" src=""https://github.com/user-attachments/assets/8786a490-0b07-4a46-b552-0e00512088a5"">
<hr>This is an automatic backport of pull request #43871 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 09:42:36+00:00,['rohitwaghchaure'],2024-11-12 00:10:55+00:00,2024-10-28 11:51:36+00:00,https://github.com/frappe/erpnext/pull/43874,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2617665367,pull_request,closed,,fix: add missing fields to field_no_map array,"In the `make_purchase_order_for_default_supplier` method in the `Sales Order.py` file, the `field_no_map` array lists fields that should not be copied to the Purchase Order. Currently, these two fields are missing from the array ( `margin_type` and `margin_rate_or_amount` ), leading to unintended field copies. Adding them to the `field_no_map` array resolves this issue.



closes #43865 

backport version-15
backport version-14",NethminaHiker360,2024-10-28 08:23:17+00:00,['ruthra-kumar'],2024-11-24 00:13:01+00:00,2024-11-08 05:59:05+00:00,https://github.com/frappe/erpnext/pull/43873,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2617583268,pull_request,closed,,fix: purchase return validation issue,"- Create the purchase receipt and add same items multiple times with different conversion factor
- Create purchase return entry and you will get the below error message

<img width=""710"" alt=""image"" src=""https://github.com/user-attachments/assets/8786a490-0b07-4a46-b552-0e00512088a5"">
",rohitwaghchaure,2024-10-28 07:43:01+00:00,[],2024-11-14 00:11:13+00:00,2024-10-28 09:41:08+00:00,https://github.com/frappe/erpnext/pull/43871,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport develop', 'instructs mergify to frontport PR to develop branch'), ('released', None)]","[{'comment_id': 2446383610, 'issue_id': 2617583268, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 30, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:30 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
