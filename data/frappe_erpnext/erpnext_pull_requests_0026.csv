id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2439652341,pull_request,closed,,fix: 'undefined' in PL and BS report summary on Consolidated report (backport #42558),"![Screenshot from 2024-07-31 14-42-08](https://github.com/user-attachments/assets/fe70070e-e6ee-43ef-806f-3cb7eea39bcc)
Regression: https://github.com/frappe/erpnext/pull/38496
Ref: https://support.frappe.io/helpdesk/tickets/19575
<hr>This is an automatic backport of pull request #42558 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 10:04:37+00:00,['ruthra-kumar'],2024-08-24 00:11:09+00:00,2024-07-31 10:49:18+00:00,https://github.com/frappe/erpnext/pull/42559,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2273031224, 'issue_id': 2439652341, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.71.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.71.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 28, 43, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-07 09:28:43 UTC): :tada: This issue has been resolved in version 14.71.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.71.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439540886,pull_request,closed,,fix: 'undefined' in PL and BS report summary on Consolidated report,"![Screenshot from 2024-07-31 14-42-08](https://github.com/user-attachments/assets/fe70070e-e6ee-43ef-806f-3cb7eea39bcc)
Regression: https://github.com/frappe/erpnext/pull/38496
Ref: https://support.frappe.io/helpdesk/tickets/19575
",ruthra-kumar,2024-07-31 09:12:30+00:00,[],2024-08-18 00:11:06+00:00,2024-07-31 10:02:36+00:00,https://github.com/frappe/erpnext/pull/42558,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2260044350, 'issue_id': 2439540886, 'author': 'mohsinalimat', 'body': 'This issue face also in version 14 as well.', 'created_at': datetime.datetime(2024, 7, 31, 9, 14, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2260048186, 'issue_id': 2439540886, 'author': 'ruthra-kumar', 'body': '> This issue face also in version 14 as well.\r\n\r\nThis will be backported to v14.', 'created_at': datetime.datetime(2024, 7, 31, 9, 16, 33, tzinfo=datetime.timezone.utc)}]","mohsinalimat on (2024-07-31 09:14:54 UTC): This issue face also in version 14 as well.

ruthra-kumar (Issue Creator) on (2024-07-31 09:16:33 UTC): This will be backported to v14.

"
2439511779,pull_request,closed,,fix: resolved conflict,,nabinhait,2024-07-31 08:59:28+00:00,[],2024-08-24 00:10:50+00:00,2024-07-31 09:24:53+00:00,https://github.com/frappe/erpnext/pull/42557,"[('released', None)]","[{'comment_id': 2273037211, 'issue_id': 2439511779, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.32.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 31, 50, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-07 09:31:50 UTC): :tada: This issue has been resolved in version 15.32.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439488858,pull_request,closed,,fix: inter transfer delivery note issue with batch (backport #42552),"While making inter transfer entry getting below error

<img width=""854"" alt=""Screenshot 2024-07-31 at 12 58 18 PM"" src=""https://github.com/user-attachments/assets/db504389-ad8c-4845-aa9f-a96acd792629"">
<hr>This is an automatic backport of pull request #42552 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 08:48:41+00:00,['rohitwaghchaure'],2024-08-24 00:10:54+00:00,2024-08-01 07:52:33+00:00,https://github.com/frappe/erpnext/pull/42556,"[('selling', None), ('released', None)]","[{'comment_id': 2262287791, 'issue_id': 2439488858, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 8, 1, 7, 52, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262287905, 'issue_id': 2439488858, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42571 fix: inter transfer delivery note issue with batch (backport #42552) (backport #42556)](https://github.com/frappe/erpnext/pull/42571) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 8, 1, 7, 52, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273036756, 'issue_id': 2439488858, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.32.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 31, 38, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-08-01 07:52:55 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-08-01 07:52:59 UTC): #### ✅ Backports have been created

<details>

* [#42571 fix: inter transfer delivery note issue with batch (backport #42552) (backport #42556)](https://github.com/frappe/erpnext/pull/42571) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-08-07 09:31:38 UTC): :tada: This issue has been resolved in version 15.32.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439474188,pull_request,closed,,refactor: date filters should be mandatory in Sales Pipeline Analytics report,"`From Date` and `To Date` filters should take effect regardless of one another.

Report will only output columns for the months in-between `From Date` and `To Date`.

Ref: https://support.frappe.io/helpdesk/tickets/19523",ruthra-kumar,2024-07-31 08:42:11+00:00,[],2024-08-25 00:11:20+00:00,2024-08-05 09:37:59+00:00,https://github.com/frappe/erpnext/pull/42555,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2439408133,pull_request,closed,,fix: conflicts,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",ljain112,2024-07-31 08:06:40+00:00,[],2024-08-30 00:10:30+00:00,2024-07-31 08:08:38+00:00,https://github.com/frappe/erpnext/pull/42553,"[('released', None)]","[{'comment_id': 2288102030, 'issue_id': 2439408133, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 14, 8, 4, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-14 08:04:00 UTC): :tada: This issue has been resolved in version 15.33.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439394815,pull_request,closed,,fix: inter transfer delivery note issue with batch,"While making inter transfer entry getting below error

<img width=""854"" alt=""Screenshot 2024-07-31 at 12 58 18 PM"" src=""https://github.com/user-attachments/assets/db504389-ad8c-4845-aa9f-a96acd792629"">
",rohitwaghchaure,2024-07-31 07:59:26+00:00,[],2024-08-18 00:11:08+00:00,2024-07-31 08:47:22+00:00,https://github.com/frappe/erpnext/pull/42552,"[('backport version-15-hotfix', '')]",[],
2439386534,pull_request,closed,,fix: allow sale of asset for internal transfer (backport #42392),"Sales Invoice is required for interstate Asset Transfer.

Allowing the Sale of Assets for Internal Customers.
- No Entry for Gain/Loss
- No Entry for depreciation

So it acts as an Asset Transfer

Internal Reference: https://support.frappe.io/app/hd-ticket/18857

Before: 
When we create a sale of Asset to Internal Customer Error was raised because of depreciation and profit/loss entry.
![image](https://github.com/user-attachments/assets/72db0140-9c62-4397-a79b-60354013f1ea)

After:
Now no entry will be posted for depreciation and profit/loss.Only entry for taxes will bo posted to unrealized_profit_loss_account account.





<hr>This is an automatic backport of pull request #42392 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 07:55:01+00:00,[],2024-08-30 00:10:34+00:00,2024-08-08 05:52:00+00:00,https://github.com/frappe/erpnext/pull/42551,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2288101647, 'issue_id': 2439386534, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 14, 8, 3, 48, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-14 08:03:48 UTC): :tada: This issue has been resolved in version 15.33.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439381960,pull_request,closed,,fix: promotional scheme doctype fields in consitency with pricing rule (backport #42432),"For consistency with the Pricing Rule, added the `round_free_qty` field in the Promotional Scheme Product Discount  (Child Table) and `for_price_list` field in the Promotiona Scheme Price Discount (Child Table)


Internal Issue: https://support.frappe.io/app/hd-ticket/19075<hr>This is an automatic backport of pull request #42432 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 07:52:28+00:00,[],2024-08-30 00:10:33+00:00,2024-08-08 05:51:09+00:00,https://github.com/frappe/erpnext/pull/42550,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259892638, 'issue_id': 2439381960, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 8624aeca54eacf4b32e86b8d1d82245fcef65355 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42432\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 8624aeca54.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.js\n\tmodified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.py\n\tmodified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.py\n\tmodified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.json\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 31, 7, 52, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275066981, 'issue_id': 2439381960, 'author': 'ruthra-kumar', 'body': '@mergifyio backport version-15', 'created_at': datetime.datetime(2024, 8, 8, 6, 42, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275067138, 'issue_id': 2439381960, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42674 fix: promotional scheme doctype fields in consitency with pricing rule (backport #42432) (backport #42550)](https://github.com/frappe/erpnext/pull/42674) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 8, 8, 6, 42, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288101734, 'issue_id': 2439381960, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 14, 8, 3, 51, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-31 07:52:29 UTC): Cherry-pick of 8624aeca54eacf4b32e86b8d1d82245fcef65355 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42432
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 8624aeca54.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.js
	modified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.py
	modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.py
	modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.json
	both modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

ruthra-kumar on (2024-08-08 06:42:50 UTC): @mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-08-08 06:42:58 UTC): #### ✅ Backports have been created

<details>

* [#42674 fix: promotional scheme doctype fields in consitency with pricing rule (backport #42432) (backport #42550)](https://github.com/frappe/erpnext/pull/42674) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-08-14 08:03:51 UTC): :tada: This issue has been resolved in version 15.33.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439381875,pull_request,closed,,fix: promotional scheme doctype fields in consitency with pricing rule (backport #42432),"For consistency with the Pricing Rule, added the `round_free_qty` field in the Promotional Scheme Product Discount  (Child Table) and `for_price_list` field in the Promotiona Scheme Price Discount (Child Table)


Internal Issue: https://support.frappe.io/app/hd-ticket/19075<hr>This is an automatic backport of pull request #42432 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 07:52:25+00:00,[],2024-08-18 00:11:09+00:00,2024-07-31 07:54:48+00:00,https://github.com/frappe/erpnext/pull/42549,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2259892565, 'issue_id': 2439381875, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 8624aeca54eacf4b32e86b8d1d82245fcef65355 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42432\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 8624aeca54.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.js\n\tmodified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.json\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.py\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.json\n\tboth modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 31, 7, 52, 27, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-31 07:52:27 UTC): Cherry-pick of 8624aeca54eacf4b32e86b8d1d82245fcef65355 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42432
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 8624aeca54.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.js
	modified:   erpnext/accounts/doctype/promotional_scheme/promotional_scheme.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.json
	both modified:   erpnext/accounts/doctype/promotional_scheme_price_discount/promotional_scheme_price_discount.py
	both modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.json
	both modified:   erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_discount.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2439320054,pull_request,closed,,fix: reverse debit credit for party gl entry in payment entry based on negative amount (backport #42367),"Frappe Support Issue: https://support.frappe.io/app/hd-ticket/18369

When allocated amount is negative and we are paying the receivable party type or receiving from payable party type we need to reverse debit/credit because due to negative amount it will get reversed again.


Before:
If there is negative outstanding for a Puchase Invoice then user was not able to submit the document.

![image](https://github.com/user-attachments/assets/c384a368-84f5-4f95-9094-410ec3faa97a)


After:
Document is submitted successfully.


---
Review Tip: Hide whitespaces to view actual changes<hr>This is an automatic backport of pull request #42367 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 07:17:03+00:00,[],2024-08-24 00:10:49+00:00,2024-07-31 07:47:08+00:00,https://github.com/frappe/erpnext/pull/42548,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2273037315, 'issue_id': 2439320054, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.32.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 31, 53, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-07 09:31:53 UTC): :tada: This issue has been resolved in version 15.32.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2439219362,pull_request,closed,,fix: set currency on change of company considering customer default currency (backport #42405),"On change of company, set currency based on the following priority
- If a customer is selected and the customer has default currency, use that
- use company default currency
- use global default currency

Also, took the opportunity to refactor the related codes.

Internal Issue: https://support.frappe.io/helpdesk/tickets/18670<hr>This is an automatic backport of pull request #42405 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-31 06:15:25+00:00,['nabinhait'],2024-08-24 00:10:48+00:00,2024-07-31 07:32:13+00:00,https://github.com/frappe/erpnext/pull/42547,"[('conflicts', None), ('released', None)]","[{'comment_id': 2259751575, 'issue_id': 2439219362, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 4986f28a894295eaf3fce3af706640f09248af64 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42405\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 4986f28a89.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/public/js/controllers/transaction.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 31, 6, 15, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273037406, 'issue_id': 2439219362, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.32.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 31, 56, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-31 06:15:27 UTC): Cherry-pick of 4986f28a894295eaf3fce3af706640f09248af64 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42405
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 4986f28a89.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/public/js/controllers/transaction.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-08-07 09:31:56 UTC): :tada: This issue has been resolved in version 15.32.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.32.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437861646,pull_request,closed,,fix: Adjust initial month's depreciation to end of depreciation period (backport #42525),"When an asset has available for use in the middle of the month, and it already has opening accumulated depreciation then the system adjusts the depreciation amount for the first month over the entire depreciation period. This method of adjustment is not ideal. 
To improve this, we will update the system so that the depreciation amount for the first month is instead adjusted at the end of the depreciation period.
<hr>This is an automatic backport of pull request #42525 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 13:35:24+00:00,['khushi8112'],2024-08-18 00:11:38+00:00,2024-07-30 13:54:32+00:00,https://github.com/frappe/erpnext/pull/42546,"[('released', None)]","[{'comment_id': 2259737535, 'issue_id': 2437861646, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 3, 59, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:03:59 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437710508,pull_request,closed,,fix: min height for rows in sales funnel,"Rows were getting combined if values were zero.

Before:
![image](https://github.com/user-attachments/assets/e16d38a8-550e-488d-8f28-d3bff3eb3472)

After:
![image](https://github.com/user-attachments/assets/2b89f79c-4005-4a7d-abff-4011b291c025)


Internal Issue No: https://support.frappe.io/app/hd-ticket/19154",ljain112,2024-07-30 12:23:20+00:00,['ruthra-kumar'],2024-08-25 00:11:14+00:00,2024-08-06 07:31:41+00:00,https://github.com/frappe/erpnext/pull/42545,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2437557093,pull_request,closed,,perf: huge number of serial no creation (backport #42522),"**Issue**
System were throwing the timeout error for 10,000 serial no creation from the purchase receipt

**After Fix**

Able to submit the purchase receipt in 60 seconds
<img width=""828"" alt=""Screenshot 2024-07-29 at 5 34 05 PM"" src=""https://github.com/user-attachments/assets/6947b35f-1113-473e-9ac9-80baa1b78832"">

<hr>This is an automatic backport of pull request #42522 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 11:05:01+00:00,['rohitwaghchaure'],2024-08-18 00:11:37+00:00,2024-07-30 11:31:43+00:00,https://github.com/frappe/erpnext/pull/42544,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259737581, 'issue_id': 2437557093, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 2, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:02 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437543023,pull_request,closed,,fix: dynamic condition in the pricing rule not working (backport #42467),Create a pricing rule with dynamic condition as net_total > 1000 and create SO for 100 then still pricing rule applied <hr>This is an automatic backport of pull request #42467 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-30 10:57:52+00:00,['rohitwaghchaure'],2024-08-25 00:11:34+00:00,2024-07-30 11:31:24+00:00,https://github.com/frappe/erpnext/pull/42543,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259733467, 'issue_id': 2437543023, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 46, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:00:46 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437373683,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-07-30 09:34:47+00:00,[],2024-08-25 00:11:35+00:00,2024-07-31 05:59:23+00:00,https://github.com/frappe/erpnext/pull/42542,"[('accounts', ''), ('stock', None), ('released', None)]","[{'comment_id': 2259733395, 'issue_id': 2437373683, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 43, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-07-31 06:00:43 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437373476,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-07-30 09:34:41+00:00,[],2024-08-18 00:11:39+00:00,2024-07-31 06:02:35+00:00,https://github.com/frappe/erpnext/pull/42541,"[('accounts', ''), ('stock', None), ('released', None)]","[{'comment_id': 2259737480, 'issue_id': 2437373476, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 3, 56, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-07-31 06:03:56 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437343008,pull_request,closed,,fix: not able to save BOM Creator,"While adding raw material getting the below error

<img width=""778"" alt=""Screenshot 2024-07-30 at 2 41 27 PM"" src=""https://github.com/user-attachments/assets/7d306796-63ad-41b1-8b54-664a2aa4a509"">
",rohitwaghchaure,2024-07-30 09:20:08+00:00,[],2024-08-18 00:11:36+00:00,2024-07-30 09:43:20+00:00,https://github.com/frappe/erpnext/pull/42540,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259737643, 'issue_id': 2437343008, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 5, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:05 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437296824,pull_request,closed,,fix: price_list_currency not found error (backport #42534),"On changing of the UOM in the material request on a line item, system throws the below error

<img width=""811"" alt=""Screenshot 2024-07-30 at 1 45 09 PM"" src=""https://github.com/user-attachments/assets/4858602e-629b-4aae-96b8-cddb838eb14f"">
<hr>This is an automatic backport of pull request #42534 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:59:26+00:00,['rohitwaghchaure'],2024-08-18 00:11:33+00:00,2024-07-30 09:22:23+00:00,https://github.com/frappe/erpnext/pull/42539,"[('released', None)]","[{'comment_id': 2259737811, 'issue_id': 2437296824, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 14, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:14 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437296512,pull_request,closed,,fix: price_list_currency not found error (backport #42534),"On changing of the UOM in the material request on a line item, system throws the below error

<img width=""811"" alt=""Screenshot 2024-07-30 at 1 45 09 PM"" src=""https://github.com/user-attachments/assets/4858602e-629b-4aae-96b8-cddb838eb14f"">
<hr>This is an automatic backport of pull request #42534 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:59:19+00:00,['rohitwaghchaure'],2024-08-25 00:11:32+00:00,2024-07-30 09:22:45+00:00,https://github.com/frappe/erpnext/pull/42538,"[('released', None)]","[{'comment_id': 2259733592, 'issue_id': 2437296512, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 52, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:00:52 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437293776,pull_request,closed,,fix: warehouse filter in Product Bundle Balance (backport #42532),"**Issue**

<img width=""1332"" alt=""Screenshot 2024-07-30 at 1 23 28 PM"" src=""https://github.com/user-attachments/assets/62a49f57-7ca5-4c84-b847-e54a2a026153"">


**After Fix**
<img width=""1312"" alt=""Screenshot 2024-07-30 at 1 23 08 PM"" src=""https://github.com/user-attachments/assets/f1041f52-95b5-4104-a060-e5659303e217"">
<hr>This is an automatic backport of pull request #42532 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:58:15+00:00,['rohitwaghchaure'],2024-08-18 00:11:34+00:00,2024-07-30 09:23:04+00:00,https://github.com/frappe/erpnext/pull/42537,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259737753, 'issue_id': 2437293776, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 11, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:11 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437293696,pull_request,closed,,fix: warehouse filter in Product Bundle Balance (backport #42532),"**Issue**

<img width=""1332"" alt=""Screenshot 2024-07-30 at 1 23 28 PM"" src=""https://github.com/user-attachments/assets/62a49f57-7ca5-4c84-b847-e54a2a026153"">


**After Fix**
<img width=""1312"" alt=""Screenshot 2024-07-30 at 1 23 08 PM"" src=""https://github.com/user-attachments/assets/f1041f52-95b5-4104-a060-e5659303e217"">
<hr>This is an automatic backport of pull request #42532 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:58:13+00:00,['rohitwaghchaure'],2024-08-25 00:11:33+00:00,2024-07-30 09:23:31+00:00,https://github.com/frappe/erpnext/pull/42536,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259733528, 'issue_id': 2437293696, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 49, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:00:49 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437293443,pull_request,closed,,fix: purchase return from rejected warehouse (backport #42531),"**Steps to Replicate Issue**

- Create a purchase receipt with 3 line items Item A, Item B, Item C
- Set Accepted Qty as 10 and Rejected qty as 2 for Item A
- Set Accepted Qty as 5 and Rejected qty as 0 for Item B
- Set Accepted Qty as 5 and Rejected qty as 0 for Item C
- Now submit the purchase receipt entry and create the purchase return entry
- While return, enable ""Return Qty from Rejected Warehouse"" 
- You will see 3 line items on the purchase return entry which ideally should be one (because only one has rejected qty)
![purchase-return-issue](https://github.com/user-attachments/assets/575aa2df-ab9d-4215-85db-f699b1f4bc91)


**After Fix**
![purchase-return-after-fix](https://github.com/user-attachments/assets/a4d1e40d-c683-43a0-931e-2054543da83b)


<hr>This is an automatic backport of pull request #42531 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:58:06+00:00,['rohitwaghchaure'],2024-08-18 00:11:35+00:00,2024-07-30 09:23:42+00:00,https://github.com/frappe/erpnext/pull/42535,"[('released', None)]","[{'comment_id': 2259737703, 'issue_id': 2437293443, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 8, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:08 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437220264,pull_request,closed,,fix: price_list_currency not found error,"On changing of the UOM in the material request on a line item, system throws the below error

<img width=""811"" alt=""Screenshot 2024-07-30 at 1 45 09 PM"" src=""https://github.com/user-attachments/assets/4858602e-629b-4aae-96b8-cddb838eb14f"">
",rohitwaghchaure,2024-07-30 08:22:26+00:00,[],2024-08-25 00:11:40+00:00,2024-07-30 08:56:30+00:00,https://github.com/frappe/erpnext/pull/42534,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2437187755,pull_request,closed,,refactor: checkbox to control Payment Request creation (backport #42476),"Payment Request created from Sales Order / Purchase Order is by default in Draft status. This makes it impossible to select a different naming series.

A New checkbox in `Accounts Settings` is added to control this behavior.
<img width=""1436"" alt=""Screenshot 2024-07-26 at 6 56 07 AM"" src=""https://github.com/user-attachments/assets/1d32b047-df35-43e3-9670-d784843cf966"">


https://github.com/user-attachments/assets/aa124467-6bce-4cae-93ce-fcbd3bd4d3ab

<hr>This is an automatic backport of pull request #42476 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 08:07:14+00:00,['ruthra-kumar'],2024-08-18 00:11:32+00:00,2024-07-30 08:34:49+00:00,https://github.com/frappe/erpnext/pull/42533,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2257732381, 'issue_id': 2437187755, 'author': 'mergify[bot]', 'body': 'Cherry-pick of ce81fd9ba683da638644503e1bfe9794036a9f54 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42476\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit ce81fd9ba6.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json\n\tmodified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_request/payment_request.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 30, 8, 7, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259737869, 'issue_id': 2437187755, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 17, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-30 08:07:16 UTC): Cherry-pick of ce81fd9ba683da638644503e1bfe9794036a9f54 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42476
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit ce81fd9ba6.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json
	modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_request/payment_request.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:04:17 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437170438,pull_request,closed,,fix: warehouse filter in Product Bundle Balance,"**Issue**

<img width=""1332"" alt=""Screenshot 2024-07-30 at 1 23 28 PM"" src=""https://github.com/user-attachments/assets/62a49f57-7ca5-4c84-b847-e54a2a026153"">


**After Fix**
<img width=""1312"" alt=""Screenshot 2024-07-30 at 1 23 08 PM"" src=""https://github.com/user-attachments/assets/f1041f52-95b5-4104-a060-e5659303e217"">
",rohitwaghchaure,2024-07-30 07:59:11+00:00,[],2024-08-25 00:11:41+00:00,2024-07-30 08:56:06+00:00,https://github.com/frappe/erpnext/pull/42532,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2437137438,pull_request,closed,,fix: purchase return from rejected warehouse,"**Steps to Replicate Issue**

- Create a purchase receipt with 3 line items Item A, Item B, Item C
- Set Accepted Qty as 10 and Rejected qty as 2 for Item A
- Set Accepted Qty as 5 and Rejected qty as 0 for Item B
- Set Accepted Qty as 5 and Rejected qty as 0 for Item C
- Now submit the purchase receipt entry and create the purchase return entry
- While return, enable ""Return Qty from Rejected Warehouse"" 
- You will see 3 line items on the purchase return entry which ideally should be one (because only one has rejected qty)
![purchase-return-issue](https://github.com/user-attachments/assets/575aa2df-ab9d-4215-85db-f699b1f4bc91)


**After Fix**
![purchase-return-after-fix](https://github.com/user-attachments/assets/a4d1e40d-c683-43a0-931e-2054543da83b)


",rohitwaghchaure,2024-07-30 07:41:32+00:00,[],2024-08-25 00:11:42+00:00,2024-07-30 08:54:35+00:00,https://github.com/frappe/erpnext/pull/42531,"[('backport version-15-hotfix', '')]",[],
2437012505,pull_request,closed,,chore: button name should reflect what it creates (backport #42528),"![Screenshot from 2024-07-30 11-55-39](https://github.com/user-attachments/assets/1e983861-ed27-4676-98e4-26ec104cb2f1)
<hr>This is an automatic backport of pull request #42528 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 06:31:23+00:00,['ruthra-kumar'],2024-08-18 00:11:31+00:00,2024-07-30 06:42:28+00:00,https://github.com/frappe/erpnext/pull/42530,"[('released', None)]","[{'comment_id': 2259737934, 'issue_id': 2437012505, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 20, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:20 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437012459,pull_request,closed,,chore: button name should reflect what it creates (backport #42528),"![Screenshot from 2024-07-30 11-55-39](https://github.com/user-attachments/assets/1e983861-ed27-4676-98e4-26ec104cb2f1)
<hr>This is an automatic backport of pull request #42528 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-30 06:31:21+00:00,['ruthra-kumar'],2024-08-25 00:11:28+00:00,2024-07-30 06:42:32+00:00,https://github.com/frappe/erpnext/pull/42529,"[('released', None)]","[{'comment_id': 2259733841, 'issue_id': 2437012459, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 4, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:04 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2437004329,pull_request,closed,,chore: button name should reflect what it creates,"![Screenshot from 2024-07-30 11-55-39](https://github.com/user-attachments/assets/1e983861-ed27-4676-98e4-26ec104cb2f1)
",ruthra-kumar,2024-07-30 06:26:01+00:00,[],2024-08-25 00:11:43+00:00,2024-07-30 06:29:46+00:00,https://github.com/frappe/erpnext/pull/42528,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2436905027,pull_request,closed,,fix(pick-list): missing items with qty less than one and greater than zero,"While creating a pick list, batches that have already been picked and have an available quantity of less than 1 will not be included in the current pick list.",pkreturns,2024-07-30 05:06:24+00:00,[],2025-01-18 00:10:10+00:00,2025-01-03 08:02:07+00:00,https://github.com/frappe/erpnext/pull/42527,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2295250187, 'issue_id': 2436905027, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 18, 12, 47, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295674094, 'issue_id': 2436905027, 'author': 'pkreturns', 'body': '.', 'created_at': datetime.datetime(2024, 8, 19, 5, 1, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2325781170, 'issue_id': 2436905027, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 3, 7, 21, 31, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-18 12:47:09 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

pkreturns (Issue Creator) on (2024-08-19 05:01:58 UTC): .

stale[bot] on (2024-09-03 07:21:31 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2436064464,pull_request,closed,,fix: Adjust initial month's depreciation to end of depreciation period,"When an asset has available for use in the middle of the month, and it already has opening accumulated depreciation then the system adjusts the depreciation amount for the first month over the entire depreciation period. This method of adjustment is not ideal. 
To improve this, we will update the system so that the depreciation amount for the first month is instead adjusted at the end of the depreciation period.
",khushi8112,2024-07-29 18:24:16+00:00,[],2024-08-25 00:11:36+00:00,2024-07-30 13:34:27+00:00,https://github.com/frappe/erpnext/pull/42525,"[('backport version-15-hotfix', '')]",[],
2436031723,pull_request,closed,,fix: link cash flow rows and fix summary linking,"# Context

- Cashflow rows link into nowhere useful
- Summary lines ditto

# Solutions

- Avoid linking summary lines (through consequent quoting)
- Link cashflow lines to GL report with the filter set to each row's (multiple) its constituent accounts
",blaggacao,2024-07-29 18:04:44+00:00,[],2024-11-29 07:23:51+00:00,2024-08-26 10:24:32+00:00,https://github.com/frappe/erpnext/pull/42524,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2309873492, 'issue_id': 2436031723, 'author': 'rmehta', 'body': '@ruthra-kumar merging', 'created_at': datetime.datetime(2024, 8, 26, 10, 24, 29, tzinfo=datetime.timezone.utc)}]","rmehta on (2024-08-26 10:24:29 UTC): @ruthra-kumar merging

"
2435240525,pull_request,closed,,fix: honor 'disable rounded total' flag in invoice,"Possible fix for https://github.com/frappe/erpnext/issues/42376 and https://github.com/frappe/erpnext/issues/38137.

Consider below scenario,
1. Sales Invoice with 2 items, 1x90 and 1x55. `Disable Rounded Total` is enabled.
2. Add a tax of 5% on net total and tax should be ` Is this Tax included in Basic Rate?` enabled.

Grand total should've been 144.99 /-, but is rounded to 144.50, even though rounding is disabled. This difference of 0.01 is posted to the rounding adjustment account by general ledger.

This PR is trying to change this behavior. When `Disable Rounded Total` is enabled, no rounding will be posted to ledger.

### Before

https://github.com/user-attachments/assets/3f3ba0b0-dc62-4b47-ae00-bf749ffbb28a

### After

https://github.com/user-attachments/assets/b92dadff-6e0c-4c5d-ac30-29faef8dd45e

Reference: https://support.frappe.io/helpdesk/tickets/18968",ruthra-kumar,2024-07-29 12:07:14+00:00,[],2024-08-24 00:10:45+00:00,2024-08-07 11:30:09+00:00,https://github.com/frappe/erpnext/pull/42523,"[('dont-merge', None), ('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2259765691, 'issue_id': 2435240525, 'author': 'ruthra-kumar', 'body': '@vorasmit Would like your thoughts on this', 'created_at': datetime.datetime(2024, 7, 31, 6, 26, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259876244, 'issue_id': 2435240525, 'author': 'vorasmit', 'body': ""Invoice doesn't look good if item total is 145 with taxes but invoice total is 144.99.\r\nIdeally item + tax total should somehow match to 145 exactly. Any rounding adjustment can be adjusted within items or taxes (not necessarily last item as it could be with zero taxes).\r\n\r\nUse of rounding (enabled or disabled) should be on top of 145 (say where item total is 145.2)."", 'created_at': datetime.datetime(2024, 7, 31, 7, 42, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273252391, 'issue_id': 2435240525, 'author': 'ruthra-kumar', 'body': 'Closing this in favor of https://github.com/frappe/erpnext/pull/42588', 'created_at': datetime.datetime(2024, 8, 7, 11, 30, 9, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Issue Creator) on (2024-07-31 06:26:42 UTC): @vorasmit Would like your thoughts on this

vorasmit on (2024-07-31 07:42:19 UTC): Invoice doesn't look good if item total is 145 with taxes but invoice total is 144.99.
Ideally item + tax total should somehow match to 145 exactly. Any rounding adjustment can be adjusted within items or taxes (not necessarily last item as it could be with zero taxes).

Use of rounding (enabled or disabled) should be on top of 145 (say where item total is 145.2).

ruthra-kumar (Issue Creator) on (2024-08-07 11:30:09 UTC): Closing this in favor of https://github.com/frappe/erpnext/pull/42588

"
2435239415,pull_request,closed,,perf: huge number of serial no creation,"**Issue**
System were throwing the timeout error for 10,000 serial no creation from the purchase receipt

**After Fix**

Able to submit the purchase receipt in 60 seconds
<img width=""828"" alt=""Screenshot 2024-07-29 at 5 34 05 PM"" src=""https://github.com/user-attachments/assets/6947b35f-1113-473e-9ac9-80baa1b78832"">

",rohitwaghchaure,2024-07-29 12:06:39+00:00,[],2024-08-25 00:11:38+00:00,2024-07-30 11:03:53+00:00,https://github.com/frappe/erpnext/pull/42522,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2435143726,pull_request,closed,,fix(statements): add current assets and liabilities,"Please someone with known financial credentials approve this fix.

(I know it's correct, but I don't claim such credentials)
",blaggacao,2024-07-29 11:16:45+00:00,[],2025-01-24 00:10:27+00:00,2025-01-09 06:50:27+00:00,https://github.com/frappe/erpnext/pull/42520,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', ''), ('no-stale', 'Excempt from stalebot')]","[{'comment_id': 2309875100, 'issue_id': 2435143726, 'author': 'rmehta', 'body': '@nabinhait @vorasmit', 'created_at': datetime.datetime(2024, 8, 26, 10, 25, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2557410974, 'issue_id': 2435143726, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 20, 17, 14, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2558225763, 'issue_id': 2435143726, 'author': 'blaggacao', 'body': 'Comtinue', 'created_at': datetime.datetime(2024, 12, 21, 20, 7, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2571740239, 'issue_id': 2435143726, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 5, 20, 20, 24, tzinfo=datetime.timezone.utc)}]","rmehta on (2024-08-26 10:25:27 UTC): @nabinhait @vorasmit

stale[bot] on (2024-12-20 17:14:42 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

blaggacao (Issue Creator) on (2024-12-21 20:07:32 UTC): Comtinue

stale[bot] on (2025-01-05 20:20:24 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2434892493,pull_request,closed,,fix: Warranty Expiry Date not set in the serial number (backport #42513),"**Issue**

<img width=""1323"" alt=""Screenshot 2024-07-29 at 1 21 34 PM"" src=""https://github.com/user-attachments/assets/09f11bc8-575a-4d10-99af-b6a6a6a80e8e"">



**After Fix**

<img width=""1323"" alt=""Screenshot 2024-07-29 at 1 20 19 PM"" src=""https://github.com/user-attachments/assets/1de805f2-5467-42f5-b8dd-7fd5f60d6cc6"">
<hr>This is an automatic backport of pull request #42513 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-29 09:18:53+00:00,['rohitwaghchaure'],2024-08-18 00:11:30+00:00,2024-07-29 10:14:02+00:00,https://github.com/frappe/erpnext/pull/42515,"[('stock', None), ('released', None)]","[{'comment_id': 2259738000, 'issue_id': 2434892493, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 23, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:23 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434737303,pull_request,closed,,fix: Warranty Expiry Date not set in the serial number,"**Issue**

<img width=""1323"" alt=""Screenshot 2024-07-29 at 1 21 34 PM"" src=""https://github.com/user-attachments/assets/09f11bc8-575a-4d10-99af-b6a6a6a80e8e"">



**After Fix**

<img width=""1323"" alt=""Screenshot 2024-07-29 at 1 20 19 PM"" src=""https://github.com/user-attachments/assets/1de805f2-5467-42f5-b8dd-7fd5f60d6cc6"">
",rohitwaghchaure,2024-07-29 08:04:17+00:00,[],2024-08-13 00:12:26+00:00,2024-07-29 09:17:42+00:00,https://github.com/frappe/erpnext/pull/42513,"[('stock', None), ('backport version-15-hotfix', '')]",[],
2434416013,pull_request,closed,,"fix: builtins.KeyError: ('ABC', 'Store - CP') (backport #42505)","```
doc = <RepostItemValuation: 943a85e573 docstatus=1>
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 212, in repost_future_sle
    distinct_item_warehouses[(args[i].get(""item_code""), args[i].get(""warehouse""))].reposting_status = True

builtins.KeyError: ('ABC', 'Store - CP')
```<hr>This is an automatic backport of pull request #42505 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-29 04:20:47+00:00,['rohitwaghchaure'],2024-08-18 00:11:29+00:00,2024-07-29 04:51:11+00:00,https://github.com/frappe/erpnext/pull/42509,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738055, 'issue_id': 2434416013, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 26, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:26 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434415992,pull_request,closed,,"fix: builtins.KeyError: ('ABC', 'Store - CP') (backport #42505)","```
doc = <RepostItemValuation: 943a85e573 docstatus=1>
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 212, in repost_future_sle
    distinct_item_warehouses[(args[i].get(""item_code""), args[i].get(""warehouse""))].reposting_status = True

builtins.KeyError: ('ABC', 'Store - CP')
```<hr>This is an automatic backport of pull request #42505 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-29 04:20:46+00:00,['rohitwaghchaure'],2024-08-25 00:11:29+00:00,2024-07-30 08:55:01+00:00,https://github.com/frappe/erpnext/pull/42508,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259733778, 'issue_id': 2434415992, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 1, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:01 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434051668,pull_request,closed,,fix: performance issue for the report Purchase Order Analysis report (backport #42503),<hr>This is an automatic backport of pull request #42503 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-28 18:12:16+00:00,['rohitwaghchaure'],2024-08-18 00:11:28+00:00,2024-07-29 04:20:02+00:00,https://github.com/frappe/erpnext/pull/42507,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738121, 'issue_id': 2434051668, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 29, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:29 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434051651,pull_request,closed,,fix: performance issue for the report Purchase Order Analysis report (backport #42503),<hr>This is an automatic backport of pull request #42503 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-28 18:12:13+00:00,['rohitwaghchaure'],2024-08-25 00:11:30+00:00,2024-07-30 08:55:23+00:00,https://github.com/frappe/erpnext/pull/42506,"[('released', None)]","[{'comment_id': 2254600214, 'issue_id': 2434051651, 'author': 'mergify[bot]', 'body': 'Cherry-pick of cb522f8f22df6688438994d0d2c47f32984aebd6 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42503\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit cb522f8f22.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/report/purchase_order_analysis/purchase_order_analysis.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 28, 18, 12, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259733714, 'issue_id': 2434051651, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 58, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-28 18:12:15 UTC): Cherry-pick of cb522f8f22df6688438994d0d2c47f32984aebd6 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42503
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit cb522f8f22.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/report/purchase_order_analysis/purchase_order_analysis.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:00:58 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434050985,pull_request,closed,,"fix: builtins.KeyError: ('ABC', 'Store - CP')","```
doc = <RepostItemValuation: 943a85e573 docstatus=1>
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 212, in repost_future_sle
    distinct_item_warehouses[(args[i].get(""item_code""), args[i].get(""warehouse""))].reposting_status = True

builtins.KeyError: ('ABC', 'Store - CP')
```",rohitwaghchaure,2024-07-28 18:10:17+00:00,[],2024-08-13 00:12:27+00:00,2024-07-29 04:19:53+00:00,https://github.com/frappe/erpnext/pull/42505,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2434046137,pull_request,closed,,fix: keep status as In Progress for RIV for Timeout Error (backport #42274),"System change the status to Failed for the Repost Item Valuation record, if the Reposting failed because of the timeout error

<hr>This is an automatic backport of pull request #42274 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-28 17:56:28+00:00,['rohitwaghchaure'],2024-08-25 00:11:31+00:00,2024-07-30 08:55:51+00:00,https://github.com/frappe/erpnext/pull/42504,"[('released', None)]","[{'comment_id': 2254595304, 'issue_id': 2434046137, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 10280d6140837ffe2fcebb70a57311780c160e25 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42274\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 10280d6140.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 28, 17, 56, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259733652, 'issue_id': 2434046137, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 0, 55, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-28 17:56:29 UTC): Cherry-pick of 10280d6140837ffe2fcebb70a57311780c160e25 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42274
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 10280d6140.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:00:55 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2434043826,pull_request,closed,,fix: performance issue for the report Purchase Order Analysis report,,rohitwaghchaure,2024-07-28 17:49:27+00:00,[],2024-08-12 00:11:18+00:00,2024-07-28 18:11:00+00:00,https://github.com/frappe/erpnext/pull/42503,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2434039884,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-07-28 17:36:43+00:00,[],2024-08-24 00:10:33+00:00,2024-08-09 13:12:26+00:00,https://github.com/frappe/erpnext/pull/42502,"[('translation', None)]",[],
2433843567,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-07-28 09:35:13+00:00,[],2024-08-12 00:11:20+00:00,2024-07-28 12:48:22+00:00,https://github.com/frappe/erpnext/pull/42501,[],[],
2433563789,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-07-27 17:23:19+00:00,[],2024-08-12 00:11:19+00:00,2024-07-28 12:49:20+00:00,https://github.com/frappe/erpnext/pull/42499,"[('translation', None)]",[],
2433556836,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-07-27 17:02:16+00:00,[],2024-08-11 00:11:29+00:00,2024-07-27 17:18:39+00:00,https://github.com/frappe/erpnext/pull/42498,[],[],
2433260781,pull_request,closed,,fix: dynamic condition in the pricing rule not working (backport #42467) (backport #42495),Create a pricing rule with dynamic condition as net_total > 1000 and create SO for 100 then still pricing rule applied <hr>This is an automatic backport of pull request #42467 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #42495 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-27 05:12:03+00:00,[],2024-08-11 00:11:33+00:00,2024-07-27 05:37:20+00:00,https://github.com/frappe/erpnext/pull/42496,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2253784371, 'issue_id': 2433260781, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.2 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.2)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 27, 5, 38, 36, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-27 05:38:36 UTC): :tada: This issue has been resolved in version 15.31.2 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.2)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2433243983,pull_request,closed,,fix: dynamic condition in the pricing rule not working (backport #42467),Create a pricing rule with dynamic condition as net_total > 1000 and create SO for 100 then still pricing rule applied <hr>This is an automatic backport of pull request #42467 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-27 04:49:11+00:00,[],2024-08-18 00:11:27+00:00,2024-07-27 05:11:08+00:00,https://github.com/frappe/erpnext/pull/42495,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2253771127, 'issue_id': 2433243983, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 7, 27, 5, 11, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2253771311, 'issue_id': 2433243983, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42496 fix: dynamic condition in the pricing rule not working (backport #42467) (backport #42495)](https://github.com/frappe/erpnext/pull/42496) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 7, 27, 5, 11, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259738201, 'issue_id': 2433243983, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 32, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-07-27 05:11:20 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-07-27 05:11:49 UTC): #### ✅ Backports have been created

<details>

* [#42496 fix: dynamic condition in the pricing rule not working (backport #42467) (backport #42495)](https://github.com/frappe/erpnext/pull/42496) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-07-31 06:04:32 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2432640069,pull_request,closed,,fix: Prevent set_payment_schedule when creating SI that is return,"The set_payment_schedule() function should not be used in Sales Invoices that are returns (see the reference below).

[Reference](https://github.com/frappe/erpnext/blob/develop/erpnext/controllers/accounts_controller.py#L461)

This commit adds a validation to prevent set_payment_schedule() from being called when creating a Sales Invoice from a Delivery Note, if the Sales Invoice is a return.",devdiogenes,2024-07-26 17:15:53+00:00,[],2024-08-10 00:09:47+00:00,2024-07-26 17:16:08+00:00,https://github.com/frappe/erpnext/pull/42493,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2432338893,pull_request,closed,,fix: incorrect cost_center on AR/AP report (backport #42477),Accounts Receivable / Payable report incorrectly reports the Payment Entry's or Journal Entry' cost center for the Invoice.<hr>This is an automatic backport of pull request #42477 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-26 14:14:36+00:00,['ruthra-kumar'],2024-08-18 00:11:26+00:00,2024-07-26 14:40:31+00:00,https://github.com/frappe/erpnext/pull/42492,"[('released', None)]","[{'comment_id': 2259738258, 'issue_id': 2432338893, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 35, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:35 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2432338814,pull_request,closed,,fix: incorrect cost_center on AR/AP report (backport #42477),Accounts Receivable / Payable report incorrectly reports the Payment Entry's or Journal Entry' cost center for the Invoice.<hr>This is an automatic backport of pull request #42477 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-26 14:14:34+00:00,['ruthra-kumar'],2024-08-25 00:11:26+00:00,2024-07-26 14:40:43+00:00,https://github.com/frappe/erpnext/pull/42491,"[('released', None)]","[{'comment_id': 2259733976, 'issue_id': 2432338814, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 10, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:10 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2432223613,pull_request,closed,,fix(task): Fix invalid comparison of date/datetime in reschedule_dependent_tasks,"```py
end_date: datetime | date = self.exp_end_date or self.act_end_date
task.exp_start_date: datetime

... task.exp_start_date < end_date  # is invalid
... task.exp_start_date < getdate(end_date)  # is the previous code
... getdate(task.exp_start_date) < end_date  # is my suggestion
```",cogk,2024-07-26 13:16:47+00:00,[],2024-08-25 00:11:22+00:00,2024-08-05 07:50:31+00:00,https://github.com/frappe/erpnext/pull/42490,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2252751375, 'issue_id': 2432223613, 'author': 'cogk', 'body': 'Hey @Poorvi-R-Bhat 👋, any opinions on this? Thanks', 'created_at': datetime.datetime(2024, 7, 26, 13, 19, 31, tzinfo=datetime.timezone.utc)}]","cogk (Issue Creator) on (2024-07-26 13:19:31 UTC): Hey @Poorvi-R-Bhat 👋, any opinions on this? Thanks

"
2432189334,pull_request,closed,,fix: Update Rate as per Valuation Rate for Internal Transfers only if Setting is Enabled (backport #42050),"- If a `Sales Invoice` is created for internal transfers rate of item is updated to valuation rate.

![image](https://github.com/frappe/erpnext/assets/109862100/f49edb41-9888-4f74-8c5e-7fca366307c4)

- Instead it should be a **Setting**.

![image](https://github.com/user-attachments/assets/4445a5d3-8eb7-4a06-81b8-1b8f81fee2a8)

- For taxation purposes, (eg: Multi-GSTIN Setup) transfer from one branch to another should be at arm's length price, and GST on the same should be payable to Govt.
- However, a company cannot book profits by making sale to oneself.

Hence allowing Item Rate to be different from Valuation Rate.

## Accounting

- Always books stock entry and accounting at Valuation rate
- If setting is enabled, Sales/Purchase document can be with different item rate (than valuation rate) for correct taxation and compliance.

Helpdesk Ref: https://support.frappe.io/helpdesk/tickets/14425
<hr>This is an automatic backport of pull request #42050 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 12:58:18+00:00,[],2024-08-30 00:10:46+00:00,2024-08-13 05:55:09+00:00,https://github.com/frappe/erpnext/pull/42489,"[('selling', None), ('buying', None), ('inactive', ''), ('released', None)]","[{'comment_id': 2282749298, 'issue_id': 2432189334, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 11, 12, 45, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288100536, 'issue_id': 2432189334, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 14, 8, 3, 12, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-11 12:45:08 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

frappe-pr-bot on (2024-08-14 08:03:12 UTC): :tada: This issue has been resolved in version 15.33.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2432189247,pull_request,closed,,fix: Update Rate as per Valuation Rate for Internal Transfers only if Setting is Enabled (backport #42050),"- If a `Sales Invoice` is created for internal transfers rate of item is updated to valuation rate.

![image](https://github.com/frappe/erpnext/assets/109862100/f49edb41-9888-4f74-8c5e-7fca366307c4)

- Instead it should be a **Setting**.

![image](https://github.com/user-attachments/assets/4445a5d3-8eb7-4a06-81b8-1b8f81fee2a8)

- For taxation purposes, (eg: Multi-GSTIN Setup) transfer from one branch to another should be at arm's length price, and GST on the same should be payable to Govt.
- However, a company cannot book profits by making sale to oneself.

Hence allowing Item Rate to be different from Valuation Rate.

## Accounting

- Always books stock entry and accounting at Valuation rate
- If setting is enabled, Sales/Purchase document can be with different item rate (than valuation rate) for correct taxation and compliance.

Helpdesk Ref: https://support.frappe.io/helpdesk/tickets/14425
<hr>This is an automatic backport of pull request #42050 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 12:58:15+00:00,[],2024-08-10 00:09:48+00:00,2024-07-26 12:59:53+00:00,https://github.com/frappe/erpnext/pull/42488,"[('selling', None), ('buying', None), ('conflicts', None)]","[{'comment_id': 2252712339, 'issue_id': 2432189247, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 723ac0ffc4d25dc901c8c1b33a7b1b220682e642 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42050\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 723ac0ffc4.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/selling_controller.py\n\tmodified:   erpnext/controllers/tests/test_accounts_controller.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.py\n\tboth modified:   erpnext/controllers/buying_controller.py\n\tboth modified:   erpnext/stock/doctype/purchase_receipt_item/purchase_receipt_item.json\n\tboth modified:   erpnext/stock/doctype/purchase_receipt_item/purchase_receipt_item.py\n\tboth modified:   erpnext/stock/doctype/stock_settings/stock_settings.json\n\tboth modified:   erpnext/stock/doctype/stock_settings/stock_settings.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 26, 12, 58, 17, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-26 12:58:17 UTC): Cherry-pick of 723ac0ffc4d25dc901c8c1b33a7b1b220682e642 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42050
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 723ac0ffc4.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/selling_controller.py
	modified:   erpnext/controllers/tests/test_accounts_controller.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json
	both modified:   erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.py
	both modified:   erpnext/controllers/buying_controller.py
	both modified:   erpnext/stock/doctype/purchase_receipt_item/purchase_receipt_item.json
	both modified:   erpnext/stock/doctype/purchase_receipt_item/purchase_receipt_item.py
	both modified:   erpnext/stock/doctype/stock_settings/stock_settings.json
	both modified:   erpnext/stock/doctype/stock_settings/stock_settings.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2431981794,pull_request,closed,,fix: Fields Alteration Related to Subcontracting (backport #42470),"- In Subcontracting Receipt use `Job Worker Delivery Note` instead of `Supplier Delivery Note` which is more relevant for Subcontracting workflow.

![image](https://github.com/user-attachments/assets/fbf6abc9-1372-4564-90ec-c6286c1b92e8)

For related field changes refer: https://github.com/frappe/erpnext/pull/42383<hr>This is an automatic backport of pull request #42470 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 10:56:17+00:00,[],2024-08-18 00:11:25+00:00,2024-07-26 12:53:11+00:00,https://github.com/frappe/erpnext/pull/42487,"[('released', None)]","[{'comment_id': 2259738332, 'issue_id': 2431981794, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 38, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:38 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2431789880,pull_request,closed,,fix: consider payment entries for checking if tds is deducted (backport #42305),"Issue:
If TDS is adjusted from advance payment it was not considered in the TDS amount calculation.

Adv Payment = 500
TDS= 50

1 st Invoice = 500
TDS = 0 (Adjust from advance Payment)

2nd Invoice = 1000
Tax withheld amount = 1000+500
TDS = 150


Frappe Support Issue: https://support.frappe.io/app/hd-ticket/18632

<hr>This is an automatic backport of pull request #42305 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 09:11:56+00:00,[],2024-08-18 00:11:23+00:00,2024-07-26 09:47:19+00:00,https://github.com/frappe/erpnext/pull/42484,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738452, 'issue_id': 2431789880, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 44, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:44 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2431789814,pull_request,closed,,fix: consider payment entries for checking if tds is deducted (backport #42305),"Issue:
If TDS is adjusted from advance payment it was not considered in the TDS amount calculation.

Adv Payment = 500
TDS= 50

1 st Invoice = 500
TDS = 0 (Adjust from advance Payment)

2nd Invoice = 1000
Tax withheld amount = 1000+500
TDS = 150


Frappe Support Issue: https://support.frappe.io/app/hd-ticket/18632

<hr>This is an automatic backport of pull request #42305 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 09:11:55+00:00,[],2024-08-25 00:11:25+00:00,2024-07-26 09:47:06+00:00,https://github.com/frappe/erpnext/pull/42483,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259734054, 'issue_id': 2431789814, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 13, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:13 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2431760504,pull_request,closed,,fix: parenttype in purchase and sales item query (backport #42444),"Item Table can be used in any other custom doctypes also.

Internal Issue: https://support.frappe.io/app/hd-ticket/19053

<hr>This is an automatic backport of pull request #42444 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 08:56:46+00:00,[],2024-08-18 00:11:22+00:00,2024-07-26 09:46:54+00:00,https://github.com/frappe/erpnext/pull/42482,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738514, 'issue_id': 2431760504, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 47, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:47 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2431760449,pull_request,closed,,fix: parenttype in purchase and sales item query (backport #42444),"Item Table can be used in any other custom doctypes also.

Internal Issue: https://support.frappe.io/app/hd-ticket/19053

<hr>This is an automatic backport of pull request #42444 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-26 08:56:44+00:00,[],2024-08-18 00:11:44+00:00,2024-07-26 09:46:44+00:00,https://github.com/frappe/erpnext/pull/42481,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259734126, 'issue_id': 2431760449, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 16, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:16 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2431294323,pull_request,closed,,fix: incorrect cost_center on AR/AP report,Accounts Receivable / Payable incorrectly reports the Payment Entry's or Journal Entry' cost center for the Invoice.,ruthra-kumar,2024-07-26 02:32:54+00:00,[],2024-08-24 00:10:47+00:00,2024-07-26 14:12:57+00:00,https://github.com/frappe/erpnext/pull/42477,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2431232313,pull_request,closed,,refactor: checkbox to control Payment Request creation,"Payment Request created from Sales Order / Purchase Order is by default in Draft status. This makes it impossible to select a different naming series.

A New checkbox in `Accounts Settings` is added to control this behavior.
<img width=""1436"" alt=""Screenshot 2024-07-26 at 6 56 07 AM"" src=""https://github.com/user-attachments/assets/1d32b047-df35-43e3-9670-d784843cf966"">


https://github.com/user-attachments/assets/aa124467-6bce-4cae-93ce-fcbd3bd4d3ab

",ruthra-kumar,2024-07-26 01:28:57+00:00,[],2024-08-18 00:11:07+00:00,2024-07-30 08:06:00+00:00,https://github.com/frappe/erpnext/pull/42476,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2257596971, 'issue_id': 2431232313, 'author': 'ruthra-kumar', 'body': '@barredterra Would like your thoughts on this', 'created_at': datetime.datetime(2024, 7, 30, 6, 50, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257661843, 'issue_id': 2431232313, 'author': 'barredterra', 'body': ""I don't see any problems with this. If anything, I'd remove this non-standard behaviour entirely instead of making it configurable (at least for `develop`)."", 'created_at': datetime.datetime(2024, 7, 30, 7, 28, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2260132235, 'issue_id': 2431232313, 'author': 'cogk', 'body': ""> I'd remove this non-standard behaviour entirely\r\n\r\nIn my fork, we don't insert the doc unless `submit_doc=True` and it didn't cause any issue in ~2 years. So I think the behavior of `create_pr_in_draft_status=0` is safe, therefore I think the checkbox can be safely removed in next major version."", 'created_at': datetime.datetime(2024, 7, 31, 9, 58, 11, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Issue Creator) on (2024-07-30 06:50:20 UTC): @barredterra Would like your thoughts on this

barredterra on (2024-07-30 07:28:22 UTC): I don't see any problems with this. If anything, I'd remove this non-standard behaviour entirely instead of making it configurable (at least for `develop`).

cogk on (2024-07-31 09:58:11 UTC): In my fork, we don't insert the doc unless `submit_doc=True` and it didn't cause any issue in ~2 years. So I think the behavior of `create_pr_in_draft_status=0` is safe, therefore I think the checkbox can be safely removed in next major version.

"
2430404101,pull_request,closed,,refactor: index on Purchase Invoice 'release_date' (backport #42472),"Payment Entry submission slows down when there are large number of Purchase Invoices. This is due to the validation that checks for 'Held Invoices'. Adding index on 'release_date' to speed up this validation.

https://github.com/frappe/erpnext/blob/302339998f89cd1e6482a9c51f70dda98714a8c7/erpnext/accounts/utils.py#L993-L1006<hr>This is an automatic backport of pull request #42472 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-25 15:58:36+00:00,['ruthra-kumar'],2024-08-18 00:11:20+00:00,2024-07-25 16:21:23+00:00,https://github.com/frappe/erpnext/pull/42474,"[('released', None)]","[{'comment_id': 2259738675, 'issue_id': 2430404101, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 53, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:53 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2430403950,pull_request,closed,,refactor: index on Purchase Invoice 'release_date' (backport #42472),"Payment Entry submission slows down when there are large number of Purchase Invoices. This is due to the validation that checks for 'Held Invoices'. Adding index on 'release_date' to speed up this validation.

https://github.com/frappe/erpnext/blob/302339998f89cd1e6482a9c51f70dda98714a8c7/erpnext/accounts/utils.py#L993-L1006<hr>This is an automatic backport of pull request #42472 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-25 15:58:34+00:00,['ruthra-kumar'],2024-08-18 00:11:43+00:00,2024-07-25 16:21:16+00:00,https://github.com/frappe/erpnext/pull/42473,"[('released', None)]","[{'comment_id': 2259734194, 'issue_id': 2430403950, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 19, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:19 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2430109023,pull_request,closed,,refactor: index on Purchase Invoice 'release_date',"Payment Entry submission slows down when there are large number of Purchase Invoices. This is due to the validation that checks for 'Held Invoices'. Adding index on 'release_date' to speed up this validation.

https://github.com/frappe/erpnext/blob/302339998f89cd1e6482a9c51f70dda98714a8c7/erpnext/accounts/utils.py#L993-L1006",ruthra-kumar,2024-07-25 14:24:38+00:00,[],2024-08-09 00:10:59+00:00,2024-07-25 15:56:22+00:00,https://github.com/frappe/erpnext/pull/42472,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2429937391,pull_request,closed,,fix: Field type is small text for v15,Conflicts resolved for: https://github.com/frappe/erpnext/pull/42468,Ninad1306,2024-07-25 13:14:20+00:00,[],2024-08-18 00:11:21+00:00,2024-07-26 08:34:39+00:00,https://github.com/frappe/erpnext/pull/42471,"[('released', None)]","[{'comment_id': 2259738572, 'issue_id': 2429937391, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 50, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:50 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2429875314,pull_request,closed,,fix: Fields Alteration Related to Subcontracting,"- In Subcontracting Receipt use `Job Worker Delivery Note` instead of `Supplier Delivery Note` which is more relevant for Subcontracting workflow.

![image](https://github.com/user-attachments/assets/fbf6abc9-1372-4564-90ec-c6286c1b92e8)

For related field changes refer: https://github.com/frappe/erpnext/pull/42383",Ninad1306,2024-07-25 12:45:41+00:00,[],2024-08-10 00:09:50+00:00,2024-07-26 10:54:48+00:00,https://github.com/frappe/erpnext/pull/42470,"[('backport version-15-hotfix', '')]",[],
2428992898,pull_request,closed,,fix: Fields Modification for Subcontracting DocTypes (backport #42383),"**Current Issues:**

- All fields in both `Subcontracting Order` and `Subcontracting Receipt` are currently organized under a single tab which is less user-friendly and harder to navigate.

- And field labels related to `Supplier` in subcontracting doctypes should be `Job Worker`, to accurately reflect the role in the subcontracting process.


**After Changes:**

- Subcontracting Receipt

![image](https://github.com/user-attachments/assets/08af9de4-c3d5-4c29-9626-3a15355d1e4c)

- Subcontracting Order

![image](https://github.com/user-attachments/assets/b52bda2c-60e8-4d70-b8f3-e9c569e9f725)<hr>This is an automatic backport of pull request #42383 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-25 04:49:19+00:00,[],2024-08-18 00:11:24+00:00,2024-07-26 10:54:10+00:00,https://github.com/frappe/erpnext/pull/42468,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2249389119, 'issue_id': 2428992898, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 302339998f89cd1e6482a9c51f70dda98714a8c7 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42383\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 302339998f.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/stock/doctype/stock_entry/stock_entry.json\n\tnew file:   erpnext/stock/doctype/stock_entry/stock_entry_dashboard.py\n\tmodified:   erpnext/subcontracting/doctype/subcontracting_receipt/subcontracting_receipt.json\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/subcontracting/doctype/subcontracting_order/subcontracting_order.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 25, 4, 49, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259738395, 'issue_id': 2428992898, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 41, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-25 04:49:21 UTC): Cherry-pick of 302339998f89cd1e6482a9c51f70dda98714a8c7 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42383
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 302339998f.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/stock/doctype/stock_entry/stock_entry.json
	new file:   erpnext/stock/doctype/stock_entry/stock_entry_dashboard.py
	modified:   erpnext/subcontracting/doctype/subcontracting_receipt/subcontracting_receipt.json

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/subcontracting/doctype/subcontracting_order/subcontracting_order.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:04:41 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2428777909,pull_request,closed,,fix: dynamic condition in the pricing rule not working,Create a pricing rule with dynamic condition as net_total > 1000 and create SO for 100 then still pricing rule applied ,rohitwaghchaure,2024-07-25 01:43:10+00:00,[],2024-08-25 00:11:39+00:00,2024-07-25 04:45:06+00:00,https://github.com/frappe/erpnext/pull/42467,"[('stock', None), ('backport version-14-hotfix', 'backport to version 14')]","[{'comment_id': 2253759597, 'issue_id': 2428777909, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15-hotfix', 'created_at': datetime.datetime(2024, 7, 27, 4, 48, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2253759783, 'issue_id': 2428777909, 'author': 'mergify[bot]', 'body': '> backport version-15-hotfix\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42495 fix: dynamic condition in the pricing rule not working (backport #42467)](https://github.com/frappe/erpnext/pull/42495) has been created for branch `version-15-hotfix`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15-hotfix"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 7, 27, 4, 48, 25, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Issue Creator) on (2024-07-27 04:48:09 UTC): @Mergifyio backport version-15-hotfix

mergify[bot] on (2024-07-27 04:48:25 UTC): #### ✅ Backports have been created

<details>

* [#42495 fix: dynamic condition in the pricing rule not working (backport #42467)](https://github.com/frappe/erpnext/pull/42495) has been created for branch `version-15-hotfix`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15-hotfix"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2427794147,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-07-24 14:48:56+00:00,[],2024-08-11 00:11:30+00:00,2024-07-27 17:00:37+00:00,https://github.com/frappe/erpnext/pull/42466,"[('translation', None)]",[],
2427565822,pull_request,closed,,refactor: provision for re-evaluating Exchange Rates in monthly frequency (backport #42462),"<img width=""1436"" alt=""Screenshot 2024-07-24 at 6 21 48 PM"" src=""https://github.com/user-attachments/assets/c0a425da-61f8-4394-8ff8-bcbcc20f8a1c"">
<hr>This is an automatic backport of pull request #42462 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 13:15:24+00:00,['ruthra-kumar'],2024-08-18 00:11:17+00:00,2024-07-24 16:41:29+00:00,https://github.com/frappe/erpnext/pull/42465,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738969, 'issue_id': 2427565822, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 5, 2, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:05:02 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2427565681,pull_request,closed,,refactor: provision for re-evaluating Exchange Rates in monthly frequency (backport #42462),"<img width=""1436"" alt=""Screenshot 2024-07-24 at 6 21 48 PM"" src=""https://github.com/user-attachments/assets/c0a425da-61f8-4394-8ff8-bcbcc20f8a1c"">
<hr>This is an automatic backport of pull request #42462 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 13:15:21+00:00,['ruthra-kumar'],2024-08-18 00:11:42+00:00,2024-07-24 16:41:23+00:00,https://github.com/frappe/erpnext/pull/42464,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2247903963, 'issue_id': 2427565681, 'author': 'mergify[bot]', 'body': 'Cherry-pick of ce2b9e0f1a69a652ed797453ba04d30e4857c0eb has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42462\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit ce2b9e0f1a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/setup/doctype/company/company.json\n\tboth modified:   erpnext/setup/doctype/company/company.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of fc4e5f165c9628171189a1c080793507e21e0500 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42462\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit fc4e5f165c.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/utils.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/hooks.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 24, 13, 15, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259734272, 'issue_id': 2427565681, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 22, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-24 13:15:23 UTC): Cherry-pick of ce2b9e0f1a69a652ed797453ba04d30e4857c0eb has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42462
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit ce2b9e0f1a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/setup/doctype/company/company.json
	both modified:   erpnext/setup/doctype/company/company.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of fc4e5f165c9628171189a1c080793507e21e0500 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42462
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit fc4e5f165c.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/utils.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/hooks.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:01:22 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2427545845,pull_request,closed,,fix: incorrect current qty for the batch in stock reco (backport #42434) (backport #42459),"Steps 

- Stock ledger entries exists without Serial and Batch Bundle against the Batch - Test Batch 123 as follows
   - 1st Jan 10 qty inward with valuation rate 100
   - 3rd Jan 20 qty inward with valuation rate 100
- Now I want to make stock reco with Serial and Batch Bundle in between 1st and 3rd Jan to change valuation rate to 200
- Created stock reco, but current qty is showing as 30 instead of 10<hr>This is an automatic backport of pull request #42434 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #42459 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 13:08:06+00:00,[],2024-08-09 00:11:02+00:00,2024-07-24 13:59:40+00:00,https://github.com/frappe/erpnext/pull/42463,"[('released', None)]","[{'comment_id': 2248049168, 'issue_id': 2427545845, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 14, 1, 5, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-24 14:01:05 UTC): :tada: This issue has been resolved in version 15.31.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2427508844,pull_request,closed,,refactor: provision for re-evaluating Exchange Rates in monthly frequency,"<img width=""1436"" alt=""Screenshot 2024-07-24 at 6 21 48 PM"" src=""https://github.com/user-attachments/assets/c0a425da-61f8-4394-8ff8-bcbcc20f8a1c"">
",ruthra-kumar,2024-07-24 12:52:25+00:00,[],2024-08-09 00:11:00+00:00,2024-07-24 13:14:04+00:00,https://github.com/frappe/erpnext/pull/42462,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2250291739, 'issue_id': 2427508844, 'author': 'thida-bcn', 'body': 'thank you', 'created_at': datetime.datetime(2024, 7, 25, 13, 12, tzinfo=datetime.timezone.utc)}]","thida-bcn on (2024-07-25 13:12:00 UTC): thank you

"
2427410808,pull_request,closed,,fix: Freeze Screen on load invoices on POS Closing Entry,"When creating a `POS Closing Entry`, when I enter the ""Opening Entry"" all invoices are loaded, however, when there are many invoices (250 - 500), the system does not display any message and leaves the screen available for clicking.

If the user clicks on save, the javascript will restart this process by executing the `before_save` method and reloading the invoices. [Line ](https://github.com/frappe/erpnext/blob/06e2d7265c2f7dceedf3fc75462f1bb3190b6d4a/erpnext/accounts/doctype/pos_closing_entry/pos_closing_entry.js#L135)

This creates problems with the totals received by payment method. To avoid this, please notify the user who is uploading the invoices and prevent to start another action before finish to load all invoices

",HarryPaulo,2024-07-24 12:03:54+00:00,[],2024-11-05 00:11:15+00:00,2024-10-21 06:56:14+00:00,https://github.com/frappe/erpnext/pull/42461,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2282749290, 'issue_id': 2427410808, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 11, 12, 45, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286023115, 'issue_id': 2427410808, 'author': 'HarryPaulo', 'body': 'awaiting reviewers', 'created_at': datetime.datetime(2024, 8, 13, 11, 33, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2323524259, 'issue_id': 2427410808, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 1, 22, 44, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2324514434, 'issue_id': 2427410808, 'author': 'HarryPaulo', 'body': 'awaiting reviewers', 'created_at': datetime.datetime(2024, 9, 2, 11, 30, 57, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-11 12:45:07 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

HarryPaulo (Issue Creator) on (2024-08-13 11:33:18 UTC): awaiting reviewers

stale[bot] on (2024-09-01 22:44:33 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

HarryPaulo (Issue Creator) on (2024-09-02 11:30:57 UTC): awaiting reviewers

"
2427302863,pull_request,closed,,fix: keyerror posting_time (backport #42452),<hr>This is an automatic backport of pull request #42452 done by [Mergify](https://mergify.com).,mergify[bot],2024-07-24 11:10:18+00:00,['rohitwaghchaure'],2024-08-18 00:11:18+00:00,2024-07-25 01:18:10+00:00,https://github.com/frappe/erpnext/pull/42460,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259738895, 'issue_id': 2427302863, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 4, 59, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:04:59 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2427302801,pull_request,closed,,fix: incorrect current qty for the batch in stock reco (backport #42434),"Steps 

- Stock ledger entries exists without Serial and Batch Bundle against the Batch - Test Batch 123 as follows
   - 1st Jan 10 qty inward with valuation rate 100
   - 3rd Jan 20 qty inward with valuation rate 100
- Now I want to make stock reco with Serial and Batch Bundle in between 1st and 3rd Jan to change valuation rate to 200
- Created stock reco, but current qty is showing as 30 instead of 10<hr>This is an automatic backport of pull request #42434 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 11:10:16+00:00,['rohitwaghchaure'],2024-08-18 00:11:16+00:00,2024-07-24 13:07:13+00:00,https://github.com/frappe/erpnext/pull/42459,"[('released', None)]","[{'comment_id': 2247879687, 'issue_id': 2427302801, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 7, 24, 13, 7, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2247880124, 'issue_id': 2427302801, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#42463 fix: incorrect current qty for the batch in stock reco (backport #42434) (backport #42459)](https://github.com/frappe/erpnext/pull/42463) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 7, 24, 13, 7, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259739045, 'issue_id': 2427302801, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 5, 5, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-07-24 13:07:35 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-07-24 13:07:48 UTC): #### ✅ Backports have been created

<details>

* [#42463 fix: incorrect current qty for the batch in stock reco (backport #42434) (backport #42459)](https://github.com/frappe/erpnext/pull/42463) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-07-31 06:05:05 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2426904346,pull_request,closed,,fix: use company default currency in report,"**Problem Statement:**
Using `Company:company:default_currency` as an option in the `Amount` field does not provide the correct currency format when the company information is not loaded.

**Before: When using the `Company:company:default_currency` option in the Amount field without the company information being loaded, the currency format displayed is incorrect.**
![image](https://github.com/user-attachments/assets/f3bc2d2d-9c8e-4ea6-bc37-e82f093b870c)

**After: Retrieve the default currency from the company to ensure the Amount field displays the correct currency format.**
![image](https://github.com/user-attachments/assets/b5c09147-fd61-4a5d-8eb0-a6503e74710a)
",Sanket322,2024-07-24 08:21:13+00:00,[],2024-08-30 00:10:29+00:00,2024-08-14 08:08:21+00:00,https://github.com/frappe/erpnext/pull/42458,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2277147998, 'issue_id': 2426904346, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 9, 4, 50, 59, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-09 04:50:59 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2426862814,pull_request,closed,,chore: set PR reviewer for translations,"Currently, the translations PRs frequently go unnoticed for weeks. This automatically assigns them to me.",barredterra,2024-07-24 08:00:01+00:00,[],2024-08-11 00:11:31+00:00,2024-07-27 16:59:26+00:00,https://github.com/frappe/erpnext/pull/42457,[],[],
2426806741,pull_request,closed,,refactor: cleaning up stale code related to reposting (backport #42390),"Reposting has been made [implicit](https://github.com/frappe/erpnext/pull/42294). Hence, no need for a separate checkbox.

Cleaning up code.<hr>This is an automatic backport of pull request #42390 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 07:29:15+00:00,['ruthra-kumar'],2024-08-18 00:11:15+00:00,2024-07-24 12:04:53+00:00,https://github.com/frappe/erpnext/pull/42456,"[('accounts', ''), ('released', None)]","[{'comment_id': 2247102448, 'issue_id': 2426806741, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 06c5334f2a6db3114b675dbf393abe94afe9bdb7 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42390\nYour branch is ahead of \'origin/version-15-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 06c5334f2a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.json\n\n```\n\n\nCherry-pick of e81373bb6ae1bde6c5b3261f776ba647cd9b65e3 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-42390\nYour branch is ahead of \'origin/version-15-hotfix\' by 3 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit e81373bb6a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/journal_entry/journal_entry.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/journal_entry/journal_entry.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 24, 7, 29, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259739128, 'issue_id': 2426806741, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 5, 8, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-24 07:29:17 UTC): Cherry-pick of 06c5334f2a6db3114b675dbf393abe94afe9bdb7 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42390
Your branch is ahead of 'origin/version-15-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 06c5334f2a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.json

```


Cherry-pick of e81373bb6ae1bde6c5b3261f776ba647cd9b65e3 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-42390
Your branch is ahead of 'origin/version-15-hotfix' by 3 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit e81373bb6a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/journal_entry/journal_entry.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/journal_entry/journal_entry.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:05:08 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2426806652,pull_request,closed,,refactor: cleaning up stale code related to reposting (backport #42390),"Reposting has been made [implicit](https://github.com/frappe/erpnext/pull/42294). Hence, no need for a separate checkbox.

Cleaning up code.<hr>This is an automatic backport of pull request #42390 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-24 07:29:12+00:00,['ruthra-kumar'],2024-08-18 00:11:41+00:00,2024-07-24 12:05:24+00:00,https://github.com/frappe/erpnext/pull/42455,"[('accounts', ''), ('released', None)]","[{'comment_id': 2247102369, 'issue_id': 2426806652, 'author': 'mergify[bot]', 'body': 'Cherry-pick of f3fda9ce989f98aa971537799afa9ecf5b848547 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit f3fda9ce98.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 06c5334f2a6db3114b675dbf393abe94afe9bdb7 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 06c5334f2a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.json\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of a467888a67088e1a7997bf5d2b800817e64b08cb has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is ahead of \'origin/version-14-hotfix\' by 2 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit a467888a67.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of e81373bb6ae1bde6c5b3261f776ba647cd9b65e3 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is ahead of \'origin/version-14-hotfix\' by 3 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit e81373bb6a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/journal_entry/journal_entry.json\n\tboth modified:   erpnext/accounts/doctype/journal_entry/journal_entry.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of fe46e1d0899724efdbbdd32881be62112b97c11c has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is ahead of \'origin/version-14-hotfix\' by 4 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit fe46e1d089.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 07fc952a4383de79ee7c327719047b7c7e02dcd7 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42390\nYour branch is ahead of \'origin/version-14-hotfix\' by 6 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 07fc952a43.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/journal_entry/journal_entry.py\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 24, 7, 29, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259734339, 'issue_id': 2426806652, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 25, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-24 07:29:14 UTC): Cherry-pick of f3fda9ce989f98aa971537799afa9ecf5b848547 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit f3fda9ce98.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 06c5334f2a6db3114b675dbf393abe94afe9bdb7 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 06c5334f2a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.json
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of a467888a67088e1a7997bf5d2b800817e64b08cb has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is ahead of 'origin/version-14-hotfix' by 2 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit a467888a67.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of e81373bb6ae1bde6c5b3261f776ba647cd9b65e3 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is ahead of 'origin/version-14-hotfix' by 3 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit e81373bb6a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/journal_entry/journal_entry.json
	both modified:   erpnext/accounts/doctype/journal_entry/journal_entry.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of fe46e1d0899724efdbbdd32881be62112b97c11c has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is ahead of 'origin/version-14-hotfix' by 4 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit fe46e1d089.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 07fc952a4383de79ee7c327719047b7c7e02dcd7 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42390
Your branch is ahead of 'origin/version-14-hotfix' by 6 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 07fc952a43.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/journal_entry/journal_entry.py
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.py
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-07-31 06:01:25 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2426708707,pull_request,closed,,fix: Update get_amount to return currency precision grand total,"In case of multi-currency purchase invoice, we are getting the error ""Total Payment Request amount cannot be greater than Purchase Invoice amount"" because of rounding difference.

<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",mujeerhashmi,2024-07-24 06:30:07+00:00,['ruthra-kumar'],2024-09-16 00:15:00+00:00,2024-08-27 10:59:08+00:00,https://github.com/frappe/erpnext/pull/42453,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None), ('backport version-14-hotfix', 'backport to version 14')]","[{'comment_id': 2277148008, 'issue_id': 2426708707, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 9, 4, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2279620472, 'issue_id': 2426708707, 'author': 'mujeerhashmi', 'body': 'Keep alive', 'created_at': datetime.datetime(2024, 8, 10, 6, 14, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295103529, 'issue_id': 2426708707, 'author': 'mujeerhashmi', 'body': '@ruthra-kumar kindly review', 'created_at': datetime.datetime(2024, 8, 18, 4, 12, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295688539, 'issue_id': 2426708707, 'author': 'ruthra-kumar', 'body': '@mujeerhashmi Could you provide some replication steps?', 'created_at': datetime.datetime(2024, 8, 19, 5, 17, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312324196, 'issue_id': 2426708707, 'author': 'ruthra-kumar', 'body': '@mergify copy develop', 'created_at': datetime.datetime(2024, 8, 27, 11, 38, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312324560, 'issue_id': 2426708707, 'author': 'mergify[bot]', 'body': '> copy develop\n\n#### ✅ Pull request copies have been created\n\n<details>\n\n* [#42951 fix: Update get_amount to return currency precision grand total (copy #42453)](https://github.com/frappe/erpnext/pull/42951) has been created for branch `develop` but encountered conflicts\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""copy develop"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 8, 27, 11, 38, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314323501, 'issue_id': 2426708707, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.34.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.34.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 28, 5, 4, 59, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-09 04:51:00 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

mujeerhashmi (Issue Creator) on (2024-08-10 06:14:41 UTC): Keep alive

mujeerhashmi (Issue Creator) on (2024-08-18 04:12:31 UTC): @ruthra-kumar kindly review

ruthra-kumar (Assginee) on (2024-08-19 05:17:25 UTC): @mujeerhashmi Could you provide some replication steps?

ruthra-kumar (Assginee) on (2024-08-27 11:38:31 UTC): @mergify copy develop

mergify[bot] on (2024-08-27 11:38:42 UTC): #### ✅ Pull request copies have been created

<details>

* [#42951 fix: Update get_amount to return currency precision grand total (copy #42453)](https://github.com/frappe/erpnext/pull/42951) has been created for branch `develop` but encountered conflicts

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""copy develop"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-08-28 05:04:59 UTC): :tada: This issue has been resolved in version 15.34.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.34.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2425342697,pull_request,closed,,fix: keyerror posting_time,,rohitwaghchaure,2024-07-23 14:19:02+00:00,[],2024-08-09 00:11:03+00:00,2024-07-24 11:09:11+00:00,https://github.com/frappe/erpnext/pull/42452,"[('stock', None), ('backport version-15-hotfix', '')]",[],
2424770614,pull_request,closed,,fix: correct validation for depreciation posting date (backport #42372),"Previously, the system validated that the Depreciation Posting date could not be equal to the available for use date.
This fix updates the validation to allow the depreciation posting date to be equal to the available use date but not before it.
<hr>This is an automatic backport of pull request #42372 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-23 09:54:50+00:00,['khushi8112'],2024-08-09 00:11:22+00:00,2024-07-24 06:40:00+00:00,https://github.com/frappe/erpnext/pull/42450,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2247101130, 'issue_id': 2424770614, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 7, 28, 34, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-24 07:28:34 UTC): :tada: This issue has been resolved in version 15.31.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2424726639,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-07-23 09:34:03+00:00,[],2024-08-09 00:11:23+00:00,2024-07-24 07:27:10+00:00,https://github.com/frappe/erpnext/pull/42449,"[('stock', None), ('released', None)]","[{'comment_id': 2247101037, 'issue_id': 2424726639, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 7, 28, 31, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-07-24 07:28:31 UTC): :tada: This issue has been resolved in version 15.31.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2424726615,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-07-23 09:34:02+00:00,[],2024-08-09 00:11:30+00:00,2024-07-24 07:25:36+00:00,https://github.com/frappe/erpnext/pull/42448,"[('released', None)]","[{'comment_id': 2247098226, 'issue_id': 2424726615, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.12 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.12)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 7, 26, 57, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-07-24 07:26:57 UTC): :tada: This issue has been resolved in version 14.70.12 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.12)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2424537517,pull_request,closed,,fix: parenttype in purchase and sales item query,"Item Table can be used in any other custom doctypes also.

Internal Issue: https://support.frappe.io/app/hd-ticket/19053

",ljain112,2024-07-23 08:02:14+00:00,[],2024-08-10 00:09:52+00:00,2024-07-26 08:53:22+00:00,https://github.com/frappe/erpnext/pull/42444,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2424299001,pull_request,closed,,fix: Subcontracting controller,"![Screenshot from 2024-07-23 11-00-20](https://github.com/user-attachments/assets/41a3cefe-33ba-4dcf-9a79-4ef27dcbb248)
### App Versions
```

```
### Route
```
Form/Quality Inspection/MAT-QA-2024-00327
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/model/workflow.py"", line 131, in apply_workflow
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1306, in runner
    add_to_return_value(self, f(self, method, *args, **kwargs))
  File ""apps/om_logistics/om_logistics/om_logistics/customizations/quality_inspection/quality_inspection.py"", line 23, in on_update
    update_qty_details(doc)
  File ""apps/om_logistics/om_logistics/om_logistics/customizations/quality_inspection/doc_events/utility_function.py"", line 26, in update_qty_details
    purchase_doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/stock/doctype/purchase_receipt/purchase_receipt.py"", line 233, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/buying_controller.py"", line 58, in validate
    self.create_raw_materials_supplied()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 835, in create_raw_materials_supplied
    self.set_materials_for_subcontracted_items(raw_material_table)
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 831, in set_materials_for_subcontracted_items
    self.__prepare_supplied_items()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 785, in __prepare_supplied_items
    self.__remove_changed_rows()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 433, in __remove_changed_rows
    self.__remove_serial_and_batch_bundle(item)
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 445, in __remove_serial_and_batch_bundle
    if item.serial_and_batch_bundle:
AttributeError: 'PurchaseReceiptItemSupplied' object has no attribute 'serial_and_batch_bundle'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""MAT-QA-2024-00327\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.166522\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":0,\""workflow_state\"":\""Draft\"",\""naming_series\"":\""MAT-QA-.YYYY.-\"",\""report_date\"":\""2024-07-23\"",\""status\"":\""Accepted\"",\""manual_inspection\"":1,\""inspection_type\"":\""Incoming\"",\""reference_type\"":\""Purchase Receipt\"",\""reference_name\"":\""PR-24-00358\"",\""item_code\"":\""STO-ITEM-2024-00008\"",\""sample_size\"":0,\""accepted_quantity\"":80,\""item_name\"":\""New Cut-Steel\"",\""description\"":\""Cut-Steel\"",\""custom_approved_quantity\"":70,\""custom_rejected_qty\"":10,\""quality_inspection_template\"":\""Steel QC Template\"",\""inspected_by\"":\""nandhini@8848digital.com\"",\""doctype\"":\""Quality Inspection\"",\""readings\"":[{\""name\"":\""gr77gctri4\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.194341\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":1,\""specification\"":\""Weight\"",\""status\"":\""Rejected\"",\""value\"":\""As per design\"",\""numeric\"":0,\""manual_inspection\"":1,\""min_value\"":0,\""max_value\"":0,\""formula_based_criteria\"":0,\""parent\"":\""MAT-QA-2024-00327\"",\""parentfield\"":\""readings\"",\""parenttype\"":\""Quality Inspection\"",\""doctype\"":\""Quality Inspection Reading\""},{\""name\"":\""gr773ph42d\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.195929\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":2,\""specification\"":\""Length\"",\""status\"":\""Accepted\"",\""value\"":\""5\\\"" -7'' Feet\"",\""numeric\"":1,\""manual_inspection\"":0,\""min_value\"":5,\""max_value\"":7,\""formula_based_criteria\"":0,\""parent\"":\""MAT-QA-2024-00327\"",\""parentfield\"":\""readings\"",\""parenttype\"":\""Quality Inspection\"",\""doctype\"":\""Quality Inspection Reading\""}]}"",
		""action"": ""Quality Checked""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.model.workflow.apply_workflow"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""AttributeError: 'PurchaseReceiptItemSupplied' object has no attribute 'serial_and_batch_bundle'"",
	""exc_type"": ""AttributeError"",
	""_exc_source"": ""erpnext (app)""
}
```
![Screenshot from 2024-07-23 11-11-37](https://github.com/user-attachments/assets/e1415013-56a4-41bf-b0fe-ddbb94f4385b)
### App Versions
```
{
	""cleartax"": ""0.0.1"",
	""cleartax_integration"": ""0.0.1"",
	""erpnext"": ""15.29.3"",
	""frappe"": ""15.34.0"",
	""hrms"": ""15.0.0"",
	""india_compliance"": ""15.7.5"",
	""om_logistics"": ""0.0.1""
}
```
### Route
```
Form/Purchase Receipt/PR-24-00353
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/model/workflow.py"", line 131, in apply_workflow
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1306, in runner
    add_to_return_value(self, f(self, method, *args, **kwargs))
  File ""apps/om_logistics/om_logistics/om_logistics/customizations/quality_inspection/quality_inspection.py"", line 23, in on_update
    update_qty_details(doc)
  File ""apps/om_logistics/om_logistics/om_logistics/customizations/quality_inspection/doc_events/utility_function.py"", line 26, in update_qty_details
    purchase_doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/stock/doctype/purchase_receipt/purchase_receipt.py"", line 233, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/buying_controller.py"", line 58, in validate
    self.create_raw_materials_supplied()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 835, in create_raw_materials_supplied
    self.set_materials_for_subcontracted_items(raw_material_table)
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 831, in set_materials_for_subcontracted_items
    self.__prepare_supplied_items()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 785, in __prepare_supplied_items
    self.__remove_changed_rows()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 433, in __remove_changed_rows
    self.__remove_serial_and_batch_bundle(item)
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 445, in __remove_serial_and_batch_bundle
    if item.serial_and_batch_bundle:
AttributeError: 'PurchaseReceiptItemSupplied' object has no attribute 'serial_and_batch_bundle'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""MAT-QA-2024-00327\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.166522\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":0,\""workflow_state\"":\""Draft\"",\""naming_series\"":\""MAT-QA-.YYYY.-\"",\""report_date\"":\""2024-07-23\"",\""status\"":\""Accepted\"",\""manual_inspection\"":1,\""inspection_type\"":\""Incoming\"",\""reference_type\"":\""Purchase Receipt\"",\""reference_name\"":\""PR-24-00358\"",\""item_code\"":\""STO-ITEM-2024-00008\"",\""sample_size\"":0,\""accepted_quantity\"":80,\""item_name\"":\""New Cut-Steel\"",\""description\"":\""Cut-Steel\"",\""custom_approved_quantity\"":70,\""custom_rejected_qty\"":10,\""quality_inspection_template\"":\""Steel QC Template\"",\""inspected_by\"":\""nandhini@8848digital.com\"",\""doctype\"":\""Quality Inspection\"",\""readings\"":[{\""name\"":\""gr77gctri4\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.194341\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":1,\""specification\"":\""Weight\"",\""status\"":\""Rejected\"",\""value\"":\""As per design\"",\""numeric\"":0,\""manual_inspection\"":1,\""min_value\"":0,\""max_value\"":0,\""formula_based_criteria\"":0,\""parent\"":\""MAT-QA-2024-00327\"",\""parentfield\"":\""readings\"",\""parenttype\"":\""Quality Inspection\"",\""doctype\"":\""Quality Inspection Reading\""},{\""name\"":\""gr773ph42d\"",\""owner\"":\""nandhini@8848digital.com\"",\""creation\"":\""2024-07-23 10:52:31.195929\"",\""modified\"":\""2024-07-23 10:53:44.187837\"",\""modified_by\"":\""nandhini@8848digital.com\"",\""docstatus\"":0,\""idx\"":2,\""specification\"":\""Length\"",\""status\"":\""Accepted\"",\""value\"":\""5\\\"" -7'' Feet\"",\""numeric\"":1,\""manual_inspection\"":0,\""min_value\"":5,\""max_value\"":7,\""formula_based_criteria\"":0,\""parent\"":\""MAT-QA-2024-00327\"",\""parentfield\"":\""readings\"",\""parenttype\"":\""Quality Inspection\"",\""doctype\"":\""Quality Inspection Reading\""}]}"",
		""action"": ""Quality Checked""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.model.workflow.apply_workflow"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""AttributeError: 'PurchaseReceiptItemSupplied' object has no attribute 'serial_and_batch_bundle'"",
	""exc_type"": ""AttributeError"",
	""_exc_source"": ""erpnext (app)""
}
```",Nandhinidevi123,2024-07-23 05:37:27+00:00,[],2024-08-26 00:10:17+00:00,2024-08-11 12:45:17+00:00,https://github.com/frappe/erpnext/pull/42441,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2275049046, 'issue_id': 2424299001, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 8, 6, 28, 53, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-08 06:28:53 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2424256839,pull_request,closed,,fix: ignore duplicates while creating default templates (backport #42377),"### Background

APIs from setup wizard to create templates may be used at other places to re-create missing templates (like patch or custom app).

### Issue

Initial check for weather account or template exists is fuzzy and may not be accurate.

eg: Checking if template is created with similar title. User may have updated the title of template, however template with same name may already exist.

This raises duplicate entry error.

```
App erpnext already installed

Installing india_compliance...
Updating DocTypes for india_compliance: [========================================] 100%
Setting up Income Tax...
Setting up GST...
Patching Existing Data...
Installation for India Compliance failed due to an error. Please try re-installing the app or report the issue on https://github.com/resilient-tech/india-compliance/issues/new if not resolved.
An error occurred while installing india_compliance: ('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/commands/site.py"", line 445, in install_app
    _install_app(app, verbose=context.verbose, force=force)
      context = {'sites': ['demokbp.frappe.cloud'], 'force': False, 'verbose': False, 'profile': False}
      apps = ('india_compliance',)
      force = True
      _install_app = <function install_app at 0x7f2013a8d9e0>
      filelock = <function filelock at 0x7f2013c86c00>
      exit_code = 0
      site = 'demokbp.frappe.cloud'
      app = 'india_compliance'
      err = DuplicateEntryError('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
  File ""apps/frappe/frappe/installer.py"", line 311, in install_app
    frappe.get_attr(after_install)()
      name = 'india_compliance'
      verbose = False
      set_as_patched = True
      force = True
      sync_jobs = <function sync_jobs at 0x7f20120f2c00>
      sync_for = <function sync_for at 0x7f20120f3b00>
      sync_customizations = <function sync_customizations at 0x7f2013c1b420>
      sync_fixtures = <function sync_fixtures at 0x7f20120f3e20>
      app_hooks = {'accounting_dimension_doctypes': ['Bill of Entry', 'Bill of Entry Item'], 'after_app_install': ['india_compliance.install.after_app_install'], 'after_install': ['india_compliance.install.after_install'], 'after_migrate': ['india_compliance.audit_trail.setup.after_migrate'], 'app_color': ['grey'], 'app_description': ['ERPNext app to simplify compliance with Indian Rules and Regulations'], 'app_email': ['hello@indiacompliance.app'], 'app_icon': ['octicon octicon-file-directory'], 'app_include_js': ['india_compliance.bundle.js'], 'app_license': ['GNU General Public License (v3)'], 'app_name': ['india_compliance'], 'app_publisher': ['Resilient Tech'], 'app_title': ['India Compliance'], 'audit_trail_doctypes': ['Accounts Settings', 'Dunning', 'Invoice Discounting', 'Journal Entry', 'Payment Entry', 'Period Closing Voucher', 'Process Deferred Accounting', 'Purchase Invoice', 'Sales Invoice', 'Asset', 'Asset Capitalization', 'Asset Repair', 'Delivery Note', 'Landed Cost Voucher', 'Purchase R...
      installed_apps = ['frappe', 'erpnext', 'kbp_civil', 'payments', 'hrms', 'lending']
      app = 'frappe/erpnext'
      required_app = 'erpnext'
      before_install = 'india_compliance.patches.check_version_compatibility.execute'
      out = None
      after_install = 'india_compliance.install.after_install'
  File ""apps/india_compliance/india_compliance/install.py"", line 74, in after_install
    raise e
  File ""apps/india_compliance/india_compliance/install.py"", line 63, in after_install
    run_post_install_patches()
  File ""apps/india_compliance/india_compliance/install.py"", line 87, in run_post_install_patches
    frappe.get_attr(f""india_compliance.patches.post_install.{patch}.execute"")()
      patch = 'update_company_fixtures'
  File ""apps/india_compliance/india_compliance/patches/post_install/update_company_fixtures.py"", line 30, in execute
    make_default_tax_templates(company)
      company_list = ['KBP Civil Engineering Services (Partnership)', 'KBP Civil Engineering Services (Proprietor)', 'KBP Non GST (BSP)', 'Sneha Sunil Phulpagar', 'Kusum Bapurao Phulpagar', 'Saipushpa Developers', 'KBP Enterprises (Electrical) RBP']
      company = 'KBP Civil Engineering Services (Partnership)'
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
      args = ('KBP Civil Engineering Services (Partnership)',)
      kwargs = {}
      apply_condition = <function whitelist.<locals>.innerfn.<locals>.<lambda> at 0x7f200be53560>
      func = <function make_default_tax_templates at 0x7f200be531a0>
  File ""apps/india_compliance/india_compliance/gst_india/overrides/company.py"", line 68, in make_default_tax_templates
    from_detailed_data(company, default_taxes)
      company = 'KBP Civil Engineering Services (Partnership)'
      gst_rate = None
      default_taxes = {'tax_categories': [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}], 'chart_of_accounts': {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax...
  File ""apps/erpnext/erpnext/setup/setup_wizard/operations/taxes_setup.py"", line 107, in from_detailed_data
    make_taxes_and_charges_template(company_name, ""Purchase Taxes and Charges Template"", template)
      company_name = 'KBP Civil Engineering Services (Partnership)'
      data = {'tax_categories': [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}], 'chart_of_accounts': {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax...
      coa_name = 'India - Chart of Accounts'
      coa_data = {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rat...
      tax_templates = {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rate': 18...
      tax_categories = [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}]
      sales_tax_templates = [{'title': 'Output GST In-state', 'taxes': [{'account_head': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0, 'account_type': 'Tax'}, 'description': 'SGST'}, {'account_head': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0, 'account_type': 'Tax'}, 'description': 'CGST'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Sales Taxes and Charges Template'}, {'title': 'Output GST Out-state', 'taxes': [{'account_head': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0, 'account_type': 'Tax'}, 'description': 'IGST'}], 'tax_category': 'Out-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Sales Taxes and Charges Template'}, {'title': 'Output GST RCM In-state', 'taxes': [{'account_head': 'Output Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'rate': 9.0, 'doctype': 'Sales Taxes and Charges'}, {'account_head': 'Output Tax CGST - K...
      purchase_tax_templates = [{'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}, {'title': 'Input GST Out-state', 'taxes': [{'account_head': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset', 'account_type': 'Tax'}, 'description': 'IGST'}], 'tax_category': 'Out-State'}, {'title': 'Input GST RCM In-state', 'taxes': [{'account_head': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset', 'account_type...
      item_tax_templates = [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rate': 18.0}}]}, {'title': 'GST ...
      tax_category = {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}
      template = {'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}
  File ""apps/erpnext/erpnext/setup/setup_wizard/operations/taxes_setup.py"", line 166, in make_taxes_and_charges_template
    doc.insert(ignore_permissions=True)
      company_name = 'KBP Civil Engineering Services (Partnership)'
      doctype = 'Purchase Taxes and Charges Template'
      template = {'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}
      tax_row = {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}
      account_data = {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset', 'account_type': 'Tax'}
      tax_row_defaults = {'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'description': 'Input Tax SGST @ 9.0', 'rate': 9.0}
      account = <Account: Input Tax SGST - KCES>
      fieldname = 'rate'
      default_value = 9.0
      doc = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
  File ""apps/frappe/frappe/model/document.py"", line 302, in insert
    self.db_insert(ignore_if_duplicate=ignore_if_duplicate)
      self = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
      ignore_permissions = True
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
  File ""apps/frappe/frappe/model/base_document.py"", line 577, in db_insert
    raise frappe.DuplicateEntryError(self.doctype, self.name, e)
      self = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
      ignore_if_duplicate = False
      conflict_handler = ''
      d = {'name': 'Input GST In-state - KCES', 'owner': 'Administrator', 'creation': '2024-07-17 18:10:41.234393', 'modified': '2024-07-17 18:10:41.234393', 'modified_by': 'Administrator', 'docstatus': 0, 'idx': 0, 'title': 'Input GST In-state', 'is_default': 0, 'disabled': 0, 'company': 'KBP Civil Engineering Services (Partnership)', 'tax_category': 'In-State'}
      columns = ['name', 'owner', 'creation', 'modified', 'modified_by', 'docstatus', 'idx', 'title', 'is_default', 'disabled', 'company', 'tax_category']
frappe.exceptions.DuplicateEntryError: ('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
```

### References
https://support.frappe.io/helpdesk/tickets/18929
https://support.frappe.io/helpdesk/tickets/15283

closes: https://github.com/resilient-tech/india-compliance/issues/2138<hr>This is an automatic backport of pull request #42377 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-23 04:56:38+00:00,['vorasmit'],2024-08-18 00:11:14+00:00,2024-07-24 08:55:15+00:00,https://github.com/frappe/erpnext/pull/42440,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259739207, 'issue_id': 2424256839, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 5, 11, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:05:11 UTC): :tada: This issue has been resolved in version 15.31.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2424256817,pull_request,closed,,fix: ignore duplicates while creating default templates (backport #42377),"### Background

APIs from setup wizard to create templates may be used at other places to re-create missing templates (like patch or custom app).

### Issue

Initial check for weather account or template exists is fuzzy and may not be accurate.

eg: Checking if template is created with similar title. User may have updated the title of template, however template with same name may already exist.

This raises duplicate entry error.

```
App erpnext already installed

Installing india_compliance...
Updating DocTypes for india_compliance: [========================================] 100%
Setting up Income Tax...
Setting up GST...
Patching Existing Data...
Installation for India Compliance failed due to an error. Please try re-installing the app or report the issue on https://github.com/resilient-tech/india-compliance/issues/new if not resolved.
An error occurred while installing india_compliance: ('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/commands/site.py"", line 445, in install_app
    _install_app(app, verbose=context.verbose, force=force)
      context = {'sites': ['demokbp.frappe.cloud'], 'force': False, 'verbose': False, 'profile': False}
      apps = ('india_compliance',)
      force = True
      _install_app = <function install_app at 0x7f2013a8d9e0>
      filelock = <function filelock at 0x7f2013c86c00>
      exit_code = 0
      site = 'demokbp.frappe.cloud'
      app = 'india_compliance'
      err = DuplicateEntryError('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
  File ""apps/frappe/frappe/installer.py"", line 311, in install_app
    frappe.get_attr(after_install)()
      name = 'india_compliance'
      verbose = False
      set_as_patched = True
      force = True
      sync_jobs = <function sync_jobs at 0x7f20120f2c00>
      sync_for = <function sync_for at 0x7f20120f3b00>
      sync_customizations = <function sync_customizations at 0x7f2013c1b420>
      sync_fixtures = <function sync_fixtures at 0x7f20120f3e20>
      app_hooks = {'accounting_dimension_doctypes': ['Bill of Entry', 'Bill of Entry Item'], 'after_app_install': ['india_compliance.install.after_app_install'], 'after_install': ['india_compliance.install.after_install'], 'after_migrate': ['india_compliance.audit_trail.setup.after_migrate'], 'app_color': ['grey'], 'app_description': ['ERPNext app to simplify compliance with Indian Rules and Regulations'], 'app_email': ['hello@indiacompliance.app'], 'app_icon': ['octicon octicon-file-directory'], 'app_include_js': ['india_compliance.bundle.js'], 'app_license': ['GNU General Public License (v3)'], 'app_name': ['india_compliance'], 'app_publisher': ['Resilient Tech'], 'app_title': ['India Compliance'], 'audit_trail_doctypes': ['Accounts Settings', 'Dunning', 'Invoice Discounting', 'Journal Entry', 'Payment Entry', 'Period Closing Voucher', 'Process Deferred Accounting', 'Purchase Invoice', 'Sales Invoice', 'Asset', 'Asset Capitalization', 'Asset Repair', 'Delivery Note', 'Landed Cost Voucher', 'Purchase R...
      installed_apps = ['frappe', 'erpnext', 'kbp_civil', 'payments', 'hrms', 'lending']
      app = 'frappe/erpnext'
      required_app = 'erpnext'
      before_install = 'india_compliance.patches.check_version_compatibility.execute'
      out = None
      after_install = 'india_compliance.install.after_install'
  File ""apps/india_compliance/india_compliance/install.py"", line 74, in after_install
    raise e
  File ""apps/india_compliance/india_compliance/install.py"", line 63, in after_install
    run_post_install_patches()
  File ""apps/india_compliance/india_compliance/install.py"", line 87, in run_post_install_patches
    frappe.get_attr(f""india_compliance.patches.post_install.{patch}.execute"")()
      patch = 'update_company_fixtures'
  File ""apps/india_compliance/india_compliance/patches/post_install/update_company_fixtures.py"", line 30, in execute
    make_default_tax_templates(company)
      company_list = ['KBP Civil Engineering Services (Partnership)', 'KBP Civil Engineering Services (Proprietor)', 'KBP Non GST (BSP)', 'Sneha Sunil Phulpagar', 'Kusum Bapurao Phulpagar', 'Saipushpa Developers', 'KBP Enterprises (Electrical) RBP']
      company = 'KBP Civil Engineering Services (Partnership)'
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
      args = ('KBP Civil Engineering Services (Partnership)',)
      kwargs = {}
      apply_condition = <function whitelist.<locals>.innerfn.<locals>.<lambda> at 0x7f200be53560>
      func = <function make_default_tax_templates at 0x7f200be531a0>
  File ""apps/india_compliance/india_compliance/gst_india/overrides/company.py"", line 68, in make_default_tax_templates
    from_detailed_data(company, default_taxes)
      company = 'KBP Civil Engineering Services (Partnership)'
      gst_rate = None
      default_taxes = {'tax_categories': [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}], 'chart_of_accounts': {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax...
  File ""apps/erpnext/erpnext/setup/setup_wizard/operations/taxes_setup.py"", line 107, in from_detailed_data
    make_taxes_and_charges_template(company_name, ""Purchase Taxes and Charges Template"", template)
      company_name = 'KBP Civil Engineering Services (Partnership)'
      data = {'tax_categories': [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}], 'chart_of_accounts': {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax...
      coa_name = 'India - Chart of Accounts'
      coa_data = {'*': {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rat...
      tax_templates = {'item_tax_templates': [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rate': 18...
      tax_categories = [{'title': 'In-State', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Out-State', 'is_inter_state': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge In-State', 'is_inter_state': 0, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Reverse Charge Out-State', 'is_inter_state': 1, 'is_reverse_charge': 1, 'gst_state': '', 'doctype': 'Tax Category'}, {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}]
      sales_tax_templates = [{'title': 'Output GST In-state', 'taxes': [{'account_head': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0, 'account_type': 'Tax'}, 'description': 'SGST'}, {'account_head': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0, 'account_type': 'Tax'}, 'description': 'CGST'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Sales Taxes and Charges Template'}, {'title': 'Output GST Out-state', 'taxes': [{'account_head': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0, 'account_type': 'Tax'}, 'description': 'IGST'}], 'tax_category': 'Out-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Sales Taxes and Charges Template'}, {'title': 'Output GST RCM In-state', 'taxes': [{'account_head': 'Output Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'rate': 9.0, 'doctype': 'Sales Taxes and Charges'}, {'account_head': 'Output Tax CGST - K...
      purchase_tax_templates = [{'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}, {'title': 'Input GST Out-state', 'taxes': [{'account_head': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset', 'account_type': 'Tax'}, 'description': 'IGST'}], 'tax_category': 'Out-State'}, {'title': 'Input GST RCM In-state', 'taxes': [{'account_head': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset', 'account_type...
      item_tax_templates = [{'title': 'GST 18%', 'gst_rate': 18, 'gst_treatment': 'Taxable', 'taxes': [{'tax_type': {'account_name': 'Output Tax SGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax CGST', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Output Tax IGST', 'tax_rate': 18.0}}, {'tax_type': {'account_name': 'Output Tax SGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax CGST RCM', 'tax_rate': -9.0}}, {'tax_type': {'account_name': 'Output Tax IGST RCM', 'tax_rate': -18.0}}, {'tax_type': {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax CGST', 'tax_rate': 9.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax IGST', 'tax_rate': 18.0, 'root_type': 'Asset'}}, {'tax_type': {'account_name': 'Input Tax SGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax CGST RCM', 'tax_rate': 9.0}}, {'tax_type': {'account_name': 'Input Tax IGST RCM', 'tax_rate': 18.0}}]}, {'title': 'GST ...
      tax_category = {'title': 'Registered Composition', 'is_inter_state': 0, 'gst_state': '', 'doctype': 'Tax Category'}
      template = {'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}
  File ""apps/erpnext/erpnext/setup/setup_wizard/operations/taxes_setup.py"", line 166, in make_taxes_and_charges_template
    doc.insert(ignore_permissions=True)
      company_name = 'KBP Civil Engineering Services (Partnership)'
      doctype = 'Purchase Taxes and Charges Template'
      template = {'title': 'Input GST In-state', 'taxes': [{'account_head': 'Input Tax CGST - KCES', 'description': 'CGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}, {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}], 'tax_category': 'In-State', 'company': 'KBP Civil Engineering Services (Partnership)', 'doctype': 'Purchase Taxes and Charges Template'}
      tax_row = {'account_head': 'Input Tax SGST - KCES', 'description': 'SGST', 'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'rate': 9.0, 'doctype': 'Purchase Taxes and Charges'}
      account_data = {'account_name': 'Input Tax SGST', 'tax_rate': 9.0, 'root_type': 'Asset', 'account_type': 'Tax'}
      tax_row_defaults = {'category': 'Total', 'charge_type': 'On Net Total', 'cost_center': 'Main - KCES', 'add_deduct_tax': 'Add', 'description': 'Input Tax SGST @ 9.0', 'rate': 9.0}
      account = <Account: Input Tax SGST - KCES>
      fieldname = 'rate'
      default_value = 9.0
      doc = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
  File ""apps/frappe/frappe/model/document.py"", line 302, in insert
    self.db_insert(ignore_if_duplicate=ignore_if_duplicate)
      self = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
      ignore_permissions = True
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
  File ""apps/frappe/frappe/model/base_document.py"", line 577, in db_insert
    raise frappe.DuplicateEntryError(self.doctype, self.name, e)
      self = <PurchaseTaxesandChargesTemplate: Input GST In-state - KCES>
      ignore_if_duplicate = False
      conflict_handler = ''
      d = {'name': 'Input GST In-state - KCES', 'owner': 'Administrator', 'creation': '2024-07-17 18:10:41.234393', 'modified': '2024-07-17 18:10:41.234393', 'modified_by': 'Administrator', 'docstatus': 0, 'idx': 0, 'title': 'Input GST In-state', 'is_default': 0, 'disabled': 0, 'company': 'KBP Civil Engineering Services (Partnership)', 'tax_category': 'In-State'}
      columns = ['name', 'owner', 'creation', 'modified', 'modified_by', 'docstatus', 'idx', 'title', 'is_default', 'disabled', 'company', 'tax_category']
frappe.exceptions.DuplicateEntryError: ('Purchase Taxes and Charges Template', 'Input GST In-state - KCES', IntegrityError(1062, ""Duplicate entry 'Input GST In-state - KCES' for key 'PRIMARY'""))
```

### References
https://support.frappe.io/helpdesk/tickets/18929
https://support.frappe.io/helpdesk/tickets/15283

closes: https://github.com/resilient-tech/india-compliance/issues/2138<hr>This is an automatic backport of pull request #42377 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-23 04:56:37+00:00,['vorasmit'],2024-08-18 00:11:40+00:00,2024-07-24 08:55:47+00:00,https://github.com/frappe/erpnext/pull/42439,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2259734426, 'issue_id': 2424256817, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.13 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 31, 6, 1, 28, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-31 06:01:28 UTC): :tada: This issue has been resolved in version 14.70.13 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.13)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2423653264,pull_request,closed,,fix: header_img field schema (backport payments #83),"This is a manual backport of https://github.com/frappe/payments/pull/83. The gocardless_settings.json is still in the ERPNext app in version 14, not yet moved over to payments. This schema update is necessary for GoCardless to function. Closes [#34731](https://github.com/frappe/erpnext/issues/34731).",trustedcomputer,2024-07-22 19:50:59+00:00,['ruthra-kumar'],2025-01-23 00:10:18+00:00,2025-01-03 23:50:58+00:00,https://github.com/frappe/erpnext/pull/42438,"[('released', None)]","[{'comment_id': 2275049070, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 8, 6, 28, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275449572, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': '@NagariaHussain You merged this change into frappe/payments to fix GoCardless in develop and version-15 branches. Can you please help get it merged into frappe/erpnext version-14? The json file is still part of the erpnext app in version-14 and not moved over to the payments app yet. Without this backport, gocardless is broken in version-14. Thank you!', 'created_at': datetime.datetime(2024, 8, 8, 10, 9, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311359465, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 27, 0, 48, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311361566, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': 'Can anyone please help this get merged for GoCardless? @NagariaHussain ?', 'created_at': datetime.datetime(2024, 8, 27, 0, 50, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343603142, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 11, 12, 58, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2344905848, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': 'Can anyone on the frappe team take a look so GoCardless can work on version-14 again? @s-aga-r you did the last merge on this repository for GoCardless. Can you please review and/or merge? Or assign to whoever would be responsible? Thanks in advance!', 'created_at': datetime.datetime(2024, 9, 11, 23, 15, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2381397310, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 9, 29, 15, 23, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2381401580, 'issue_id': 2423653264, 'author': 'NagariaHussain', 'body': 'Lot of JSON getting deleted, reason?', 'created_at': datetime.datetime(2024, 9, 29, 15, 37, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2381405323, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': 'All that extra JSON is very old, going back to version-11 at least. Lots of field attributes with ""0"" as the data. I\'m guessing that when I add the field, frappe is deciding they are defaults that don\'t need to be specified. But I\'m not sure, TBH. All I did was add the field, and this is how the JSON came out. No manual tweaking.', 'created_at': datetime.datetime(2024, 9, 29, 15, 48, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2381651956, 'issue_id': 2423653264, 'author': 'NagariaHussain', 'body': 'Cool. The linter check is failing, can you check? \n\nOnce that is fixed, I will merge.', 'created_at': datetime.datetime(2024, 9, 29, 23, 33, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2428890912, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': ""@NagariaHussain I have attempted to run pre-commit checks as per the erpnext Pull-Request-Checklist, but it is my first time doing so, so I'm sorry if I'm not doing it correctly, but it looks ok to me. I chnaged the timestamp on the json file to trigger checking the file and the json check passed:\r\n\r\n![image](https://github.com/user-attachments/assets/6a2dac55-9ee7-454f-bea4-eff3d012ec91)"", 'created_at': datetime.datetime(2024, 10, 22, 10, 21, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2465994282, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 9, 2, 18, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2466036980, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': ""Ah, ah, ah, ah\r\nStayin' alive, stayin' alive\r\nAh, ah, ah, ah\r\nStayin' alive"", 'created_at': datetime.datetime(2024, 11, 9, 4, 15, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504808607, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 27, 21, 39, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2514782022, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': ""@NagariaHussain I checked what I'm able to check with pre-commit- no failures there. I can't figure out why linters would fail with exit code 7 in Annotations. And I don't know if it is relevant to this simple json file change. Please advise."", 'created_at': datetime.datetime(2024, 12, 3, 14, 48, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2557410740, 'issue_id': 2423653264, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 20, 17, 14, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2558139867, 'issue_id': 2423653264, 'author': 'trustedcomputer', 'body': '@NagariaHussain Is there any way you can still merge this? Anybody?', 'created_at': datetime.datetime(2024, 12, 21, 14, 38, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2577327428, 'issue_id': 2423653264, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.78.9 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.9)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 8, 10, 28, 10, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-08 06:28:55 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-08-08 10:09:34 UTC): @NagariaHussain You merged this change into frappe/payments to fix GoCardless in develop and version-15 branches. Can you please help get it merged into frappe/erpnext version-14? The json file is still part of the erpnext app in version-14 and not moved over to the payments app yet. Without this backport, gocardless is broken in version-14. Thank you!

stale[bot] on (2024-08-27 00:48:47 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-08-27 00:50:47 UTC): Can anyone please help this get merged for GoCardless? @NagariaHussain ?

stale[bot] on (2024-09-11 12:58:31 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-09-11 23:15:30 UTC): Can anyone on the frappe team take a look so GoCardless can work on version-14 again? @s-aga-r you did the last merge on this repository for GoCardless. Can you please review and/or merge? Or assign to whoever would be responsible? Thanks in advance!

stale[bot] on (2024-09-29 15:23:10 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

NagariaHussain on (2024-09-29 15:37:02 UTC): Lot of JSON getting deleted, reason?

trustedcomputer (Issue Creator) on (2024-09-29 15:48:17 UTC): All that extra JSON is very old, going back to version-11 at least. Lots of field attributes with ""0"" as the data. I'm guessing that when I add the field, frappe is deciding they are defaults that don't need to be specified. But I'm not sure, TBH. All I did was add the field, and this is how the JSON came out. No manual tweaking.

NagariaHussain on (2024-09-29 23:33:17 UTC): Cool. The linter check is failing, can you check? 

Once that is fixed, I will merge.

trustedcomputer (Issue Creator) on (2024-10-22 10:21:58 UTC): @NagariaHussain I have attempted to run pre-commit checks as per the erpnext Pull-Request-Checklist, but it is my first time doing so, so I'm sorry if I'm not doing it correctly, but it looks ok to me. I chnaged the timestamp on the json file to trigger checking the file and the json check passed:

![image](https://github.com/user-attachments/assets/6a2dac55-9ee7-454f-bea4-eff3d012ec91)

stale[bot] on (2024-11-09 02:18:08 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-11-09 04:15:11 UTC): Ah, ah, ah, ah
Stayin' alive, stayin' alive
Ah, ah, ah, ah
Stayin' alive

stale[bot] on (2024-11-27 21:39:09 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-12-03 14:48:32 UTC): @NagariaHussain I checked what I'm able to check with pre-commit- no failures there. I can't figure out why linters would fail with exit code 7 in Annotations. And I don't know if it is relevant to this simple json file change. Please advise.

stale[bot] on (2024-12-20 17:14:32 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

trustedcomputer (Issue Creator) on (2024-12-21 14:38:29 UTC): @NagariaHussain Is there any way you can still merge this? Anybody?

frappe-pr-bot on (2025-01-08 10:28:10 UTC): :tada: This PR is included in version 14.78.9 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.9)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2423541380,pull_request,closed,,fix: provide initial value for `.reduce()` call (backport #42419),"Fixes the error ""TypeError: Reduce of empty array with no initial value"" (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Reduce_of_empty_array_with_no_initial_value#invalid_cases) that would show up in the browser console when creating or opening a **Sales Invoice**.

If the array was empty (i.e. no overdue payments), `.reduce()` would raise the above error because an initial value was not provided. By providing `false` as initial value, the UX stays identical but we get rid of the error.

This had no noticeable impact because it is the last part of the function.<hr>This is an automatic backport of pull request #42419 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-22 18:42:21+00:00,[],2024-08-09 00:11:21+00:00,2024-07-23 11:06:37+00:00,https://github.com/frappe/erpnext/pull/42437,"[('released', None)]","[{'comment_id': 2247101220, 'issue_id': 2423541380, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 7, 28, 37, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-24 07:28:37 UTC): :tada: This issue has been resolved in version 15.31.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2423541311,pull_request,closed,,fix: provide initial value for `.reduce()` call (backport #42419),"Fixes the error ""TypeError: Reduce of empty array with no initial value"" (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Reduce_of_empty_array_with_no_initial_value#invalid_cases) that would show up in the browser console when creating or opening a **Sales Invoice**.

If the array was empty (i.e. no overdue payments), `.reduce()` would raise the above error because an initial value was not provided. By providing `false` as initial value, the UX stays identical but we get rid of the error.

This had no noticeable impact because it is the last part of the function.<hr>This is an automatic backport of pull request #42419 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-22 18:42:18+00:00,['barredterra'],2024-08-24 00:10:40+00:00,2024-08-08 07:51:34+00:00,https://github.com/frappe/erpnext/pull/42436,"[('inactive', ''), ('conflicts', None)]","[{'comment_id': 2243589845, 'issue_id': 2423541311, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 65f80abf2fef35f355e66c89cbfb10be2aafb59f has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-42419\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 65f80abf2f.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 7, 22, 18, 42, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275049087, 'issue_id': 2423541311, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 8, 6, 28, 56, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-07-22 18:42:20 UTC): Cherry-pick of 65f80abf2fef35f355e66c89cbfb10be2aafb59f has failed:
```
On branch mergify/bp/version-14-hotfix/pr-42419
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 65f80abf2f.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

stale[bot] on (2024-08-08 06:28:56 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2422878928,pull_request,closed,,fix: source warehouse in the stock entry  when the backflush is disabled in the Work Order,"In the Work Order, When the Skip Material Transfer to WIP Warehouse check is enabled and the Backflush Raw Materials From Work-in-Progress Warehouse is disabled then the Stock Entry of type Manufacture was setting the Source warehouse as WIP Warehouse instead of Source warehouse.
Work order:
![image](https://github.com/user-attachments/assets/3c372555-f110-4900-999f-483069d68aa5)

Stock Entry of type Manufacture:
![image](https://github.com/user-attachments/assets/6e027b1a-eac6-44c3-b6fa-423c9f3d6253)
",Poorvi-R-Bhat,2024-07-22 13:25:24+00:00,[],2024-08-26 00:10:18+00:00,2024-08-11 12:45:16+00:00,https://github.com/frappe/erpnext/pull/42435,"[('inactive', '')]","[{'comment_id': 2275049111, 'issue_id': 2422878928, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 8, 8, 6, 28, 57, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-08-08 06:28:57 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2422770729,pull_request,closed,,fix: incorrect current qty for the batch in stock reco,"Steps 

- Stock ledger entries exists without Serial and Batch Bundle against the Batch - Test Batch 123 as follows
   - 1st Jan 10 qty inward with valuation rate 100
   - 3rd Jan 20 qty inward with valuation rate 100
- Now I want to make stock reco with Serial and Batch Bundle in between 1st and 3rd Jan to change valuation rate to 200
- Created stock reco, but current qty is showing as 30 instead of 10",rohitwaghchaure,2024-07-22 12:36:28+00:00,[],2024-08-09 00:11:04+00:00,2024-07-24 11:08:20+00:00,https://github.com/frappe/erpnext/pull/42434,"[('backport version-15-hotfix', '')]",[],
2422730116,pull_request,closed,,fix: qty in the 'Serial No Ledger' report (backport #42429),"Before

<img width=""1330"" alt=""Screenshot 2024-07-22 at 3 02 28 PM"" src=""https://github.com/user-attachments/assets/ce39c691-b947-4544-a639-be9218da73e9"">



**After Fix**

<img width=""1323"" alt=""Screenshot 2024-07-22 at 3 12 14 PM"" src=""https://github.com/user-attachments/assets/b31e1a77-f9c2-446b-bf46-64cc28cbbd2d"">
<hr>This is an automatic backport of pull request #42429 done by [Mergify](https://mergify.com).",mergify[bot],2024-07-22 12:16:46+00:00,['rohitwaghchaure'],2024-08-09 00:11:20+00:00,2024-07-22 12:36:56+00:00,https://github.com/frappe/erpnext/pull/42433,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2247101329, 'issue_id': 2422730116, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.31.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 24, 7, 28, 40, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-24 07:28:40 UTC): :tada: This issue has been resolved in version 15.31.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.31.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2422714294,pull_request,closed,,fix: promotional scheme doctype fields in consitency with pricing rule,"For consistency with the Pricing Rule, added the `round_free_qty` field in the Promotional Scheme Product Discount  (Child Table) and `for_price_list` field in the Promotiona Scheme Price Discount (Child Table)


Internal Issue: https://support.frappe.io/app/hd-ticket/19075",ljain112,2024-07-22 12:08:57+00:00,[],2024-08-18 00:11:11+00:00,2024-07-31 07:49:55+00:00,https://github.com/frappe/erpnext/pull/42432,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
