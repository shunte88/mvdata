id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2697803052,pull_request,closed,,fix:  correct placeholder index in message (backport #44377),"Traceback
### App Versions
```
{
	""deltapumps"": ""0.0.1"",
	""erpnext"": ""15.42.0"",
	""frappe"": ""15.47.2"",
	""hrms"": ""15.35.1"",
	""india_compliance"": ""15.13.5"",
	""insights"": ""2.2.6"",
	""lending"": ""0.0.1"",
	""payments"": ""0.0.1"",
	""print_designer"": ""1.4.3""
}
```
### Route
```
Form/Payment Entry/new-payment-entry-dlbbsvmqtd
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1781, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 336, in run_doc_method
    response = doc.run_method(method, **args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 1734, in allocate_amount_to_references
    _(""Cannot {0} from {2} without any negative outstanding invoice"").format(
IndexError: Replacement index 2 out of range for positional args tuple

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""paid_amount"": 92500,
		""paid_amount_change"": false,
		""allocate_payment_amount"": 1,
		""docs"": ""{\""docstatus\"":0,\""doctype\"":\""Payment Entry\"",\""name\"":\""new-payment-entry-dlbbsvmqtd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""naming_series\"":\""\"",\""payment_type\"":\""Receive\"",\""payment_order_status\"":\""Initiated\"",\""posting_date\"":\""2024-11-27\"",\""company\"":\""DELTA PD PUMPS PRIVATE LIMITED\"",\""book_advance_payments_in_separate_party_account\"":1,\""reconcile_on_advance_payment_date\"":0,\""paid_from_account_currency\"":\""INR\"",\""paid_to_account_currency\"":\""INR\"",\""references\"":[{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-qwwpxaujtb\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":1,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001446\"",\""due_date\"":\""2024-10-31\"",\""total_amount\"":5128,\""outstanding_amount\"":5128,\""bill_no\"":\""1553\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-lankwtvdxd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":2,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001447\"",\""due_date\"":\""2024-10-31\"",\""total_amount\"":32687,\""outstanding_amount\"":32687,\""bill_no\"":\""1554\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ocqgavnqkk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":3,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001623\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":5736,\""outstanding_amount\"":5736,\""bill_no\"":\""1583\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-uotarffykd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":4,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001624\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":24825,\""outstanding_amount\"":24825,\""bill_no\"":\""1584\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-usesuheilh\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":5,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001625\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":11761,\""outstanding_amount\"":11761,\""bill_no\"":\""1585\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-crmqowdfgt\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":6,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001626-1\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":5947,\""outstanding_amount\"":5947,\""bill_no\"":\""1586\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-mcmecjkimy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":7,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001627\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":8075,\""outstanding_amount\"":8075,\""bill_no\"":\""1587\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-dxbxuyajwu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":8,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001628\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":27227,\""outstanding_amount\"":27227,\""bill_no\"":\""1588\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ovbydoruvf\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":9,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001629\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":8787,\""outstanding_amount\"":8787,\""bill_no\"":\""1589\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-zhnegtysxg\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":10,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001630\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":13106,\""outstanding_amount\"":13106,\""bill_no\"":\""1590\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ntnbrdjhlk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":11,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001631\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":53709,\""outstanding_amount\"":53709,\""bill_no\"":\""1591\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ttnrxawnth\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":12,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001505\"",\""due_date\"":\""2024-11-07\"",\""total_amount\"":33730,\""outstanding_amount\"":33730,\""bill_no\"":\""1617\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-gdnbycbeec\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":13,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001559\"",\""due_date\"":\""2024-11-14\"",\""total_amount\"":25748,\""outstanding_amount\"":25748,\""bill_no\"":\""1656\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tumjepkpcb\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":14,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001684\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":784,\""outstanding_amount\"":784,\""bill_no\"":\""1776\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-zstvoeepfk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":15,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001685\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":84387,\""outstanding_amount\"":84387,\""bill_no\"":\""1777\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-xkkfgkfgba\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":16,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001705\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":8007,\""outstanding_amount\"":8007,\""bill_no\"":\""1774\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-pkxxnuxhkh\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":17,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001706\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":11602,\""outstanding_amount\"":11602,\""bill_no\"":\""1775\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-adhjcuubjt\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":18,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001740\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":26222,\""outstanding_amount\"":26222,\""bill_no\"":\""1863\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-dloaotsaox\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":19,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001741\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":26202,\""outstanding_amount\"":26202,\""bill_no\"":\""1865\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-gicgbxqwuu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":20,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001742\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":1853,\""outstanding_amount\"":1853,\""bill_no\"":\""1866\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-sxxnudjpzf\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":21,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001743\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":2104,\""outstanding_amount\"":2104,\""bill_no\"":\""1867\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tilbiwycnk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":22,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001795\"",\""due_date\"":\""2024-12-12\"",\""total_amount\"":9662,\""outstanding_amount\"":9662,\""bill_no\"":\""1925\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tcpuluharv\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":23,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001796\"",\""due_date\"":\""2024-12-12\"",\""total_amount\"":1275,\""outstanding_amount\"":1275,\""bill_no\"":\""1926\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-fkawketflo\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":24,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001849\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":888,\""outstanding_amount\"":888,\""bill_no\"":\""1979\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-mkambptjei\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":25,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001850\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":59166,\""outstanding_amount\"":59166,\""bill_no\"":\""1980\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-xhqjaanlhy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":26,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001851\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":2074,\""outstanding_amount\"":2074,\""bill_no\"":\""1981\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1}],\""apply_tax_withholding_amount\"":0,\""taxes\"":[],\""deductions\"":[],\""status\"":\""Draft\"",\""custom_remarks\"":0,\""is_opening\"":\""No\"",\""letter_head\"":\""Delta PD Pumps Private Limited\"",\""source_exchange_rate\"":1,\""target_exchange_rate\"":1,\""company_address\"":\""DELTA PD PUMPS PRIVATE LTD - UNIT I\"",\""company_gstin\"":\""24AACCD9919N1Z6\"",\""party_type\"":\""Supplier\"",\""party\"":\""REGAL STEEL\"",\""paid_from\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""paid_from_account_balance\"":-490692,\""party_balance\"":-490692,\""party_name\"":\""REGAL STEEL\"",\""bank_account\"":\""HO - HDFC Bank 50200002533335 - HDFC Bank\"",\""paid_from_account_type\"":\""Payable\"",\""paid_to\"":\""New Bank Account - CC - HDFC Bank 50200002533335 - DPDPL\"",\""bank\"":\""HDFC Bank\"",\""bank_account_no\"":\""50200002533335\"",\""paid_to_account_type\"":\""Bank\"",\""paid_to_account_balance\"":14251970.97,\""paid_amount\"":92500,\""base_paid_amount\"":92500,\""received_amount\"":92500,\""base_received_amount\"":92500,\""unallocated_amount\"":92500,\""difference_amount\"":0,\""idx\"":0,\""paid_amount_after_tax\"":0,\""base_paid_amount_after_tax\"":0,\""received_amount_after_tax\"":0,\""base_received_amount_after_tax\"":0,\""total_allocated_amount\"":0,\""base_total_allocated_amount\"":0,\""base_total_taxes_and_charges\"":0,\""total_taxes_and_charges\"":0}"",
		""method"": ""allocate_amount_to_references"",
		""args"": ""{\""paid_amount\"":92500,\""paid_amount_change\"":false,\""allocate_payment_amount\"":1}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/run_doc_method"",
	""request_id"": ""b2c0a2f3-6992-4043-96a1-9581d60f671b""
}
```
### Response Data
```
{
	""exception"": ""IndexError: Replacement index 2 out of range for positional args tuple"",
	""exc_type"": ""IndexError"",
	""_exc_source"": ""erpnext (app)""
}
```


backport version-15
backport version-14
<hr>This is an automatic backport of pull request #44377 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-27 09:26:12+00:00,[],2024-12-12 00:12:51+00:00,2024-11-27 10:08:48+00:00,https://github.com/frappe/erpnext/pull/44379,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2697648385,pull_request,closed,,fix: filter item with search fields,"**Issue:**
While creating a product bundle unable to search items with Item Name
**ref:** [26143](https://support.frappe.io/helpdesk/tickets/26143)

**Before:**

https://github.com/user-attachments/assets/10dd7cb3-c4c9-459f-89da-7f1cc1389b92

**After:**

https://github.com/user-attachments/assets/63bd8d94-5171-4d2e-ad25-f357094fb7c4


**Backport needed for v15**",venkat102,2024-11-27 08:42:13+00:00,['ruthra-kumar'],2024-12-12 00:12:46+00:00,2024-11-27 11:49:40+00:00,https://github.com/frappe/erpnext/pull/44378,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2697597350,pull_request,closed,,fix:  correct placeholder index in message,"Traceback
### App Versions
```
{
	""deltapumps"": ""0.0.1"",
	""erpnext"": ""15.42.0"",
	""frappe"": ""15.47.2"",
	""hrms"": ""15.35.1"",
	""india_compliance"": ""15.13.5"",
	""insights"": ""2.2.6"",
	""lending"": ""0.0.1"",
	""payments"": ""0.0.1"",
	""print_designer"": ""1.4.3""
}
```
### Route
```
Form/Payment Entry/new-payment-entry-dlbbsvmqtd
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1781, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 336, in run_doc_method
    response = doc.run_method(method, **args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 1734, in allocate_amount_to_references
    _(""Cannot {0} from {2} without any negative outstanding invoice"").format(
IndexError: Replacement index 2 out of range for positional args tuple

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""paid_amount"": 92500,
		""paid_amount_change"": false,
		""allocate_payment_amount"": 1,
		""docs"": ""{\""docstatus\"":0,\""doctype\"":\""Payment Entry\"",\""name\"":\""new-payment-entry-dlbbsvmqtd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""naming_series\"":\""\"",\""payment_type\"":\""Receive\"",\""payment_order_status\"":\""Initiated\"",\""posting_date\"":\""2024-11-27\"",\""company\"":\""DELTA PD PUMPS PRIVATE LIMITED\"",\""book_advance_payments_in_separate_party_account\"":1,\""reconcile_on_advance_payment_date\"":0,\""paid_from_account_currency\"":\""INR\"",\""paid_to_account_currency\"":\""INR\"",\""references\"":[{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-qwwpxaujtb\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":1,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001446\"",\""due_date\"":\""2024-10-31\"",\""total_amount\"":5128,\""outstanding_amount\"":5128,\""bill_no\"":\""1553\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-lankwtvdxd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":2,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001447\"",\""due_date\"":\""2024-10-31\"",\""total_amount\"":32687,\""outstanding_amount\"":32687,\""bill_no\"":\""1554\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ocqgavnqkk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":3,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001623\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":5736,\""outstanding_amount\"":5736,\""bill_no\"":\""1583\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-uotarffykd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":4,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001624\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":24825,\""outstanding_amount\"":24825,\""bill_no\"":\""1584\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-usesuheilh\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":5,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001625\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":11761,\""outstanding_amount\"":11761,\""bill_no\"":\""1585\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-crmqowdfgt\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":6,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001626-1\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":5947,\""outstanding_amount\"":5947,\""bill_no\"":\""1586\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-mcmecjkimy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":7,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001627\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":8075,\""outstanding_amount\"":8075,\""bill_no\"":\""1587\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-dxbxuyajwu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":8,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001628\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":27227,\""outstanding_amount\"":27227,\""bill_no\"":\""1588\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ovbydoruvf\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":9,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001629\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":8787,\""outstanding_amount\"":8787,\""bill_no\"":\""1589\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-zhnegtysxg\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":10,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001630\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":13106,\""outstanding_amount\"":13106,\""bill_no\"":\""1590\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ntnbrdjhlk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":11,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001631\"",\""due_date\"":\""2024-11-04\"",\""total_amount\"":53709,\""outstanding_amount\"":53709,\""bill_no\"":\""1591\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-ttnrxawnth\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":12,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001505\"",\""due_date\"":\""2024-11-07\"",\""total_amount\"":33730,\""outstanding_amount\"":33730,\""bill_no\"":\""1617\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-gdnbycbeec\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":13,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001559\"",\""due_date\"":\""2024-11-14\"",\""total_amount\"":25748,\""outstanding_amount\"":25748,\""bill_no\"":\""1656\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tumjepkpcb\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":14,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001684\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":784,\""outstanding_amount\"":784,\""bill_no\"":\""1776\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-zstvoeepfk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":15,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001685\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":84387,\""outstanding_amount\"":84387,\""bill_no\"":\""1777\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-xkkfgkfgba\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":16,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001705\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":8007,\""outstanding_amount\"":8007,\""bill_no\"":\""1774\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-pkxxnuxhkh\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":17,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001706\"",\""due_date\"":\""2024-11-27\"",\""total_amount\"":11602,\""outstanding_amount\"":11602,\""bill_no\"":\""1775\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-adhjcuubjt\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":18,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001740\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":26222,\""outstanding_amount\"":26222,\""bill_no\"":\""1863\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-dloaotsaox\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":19,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001741\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":26202,\""outstanding_amount\"":26202,\""bill_no\"":\""1865\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-gicgbxqwuu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":20,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001742\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":1853,\""outstanding_amount\"":1853,\""bill_no\"":\""1866\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-sxxnudjpzf\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":21,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001743\"",\""due_date\"":\""2024-12-06\"",\""total_amount\"":2104,\""outstanding_amount\"":2104,\""bill_no\"":\""1867\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tilbiwycnk\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":22,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001795\"",\""due_date\"":\""2024-12-12\"",\""total_amount\"":9662,\""outstanding_amount\"":9662,\""bill_no\"":\""1925\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-tcpuluharv\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":23,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001796\"",\""due_date\"":\""2024-12-12\"",\""total_amount\"":1275,\""outstanding_amount\"":1275,\""bill_no\"":\""1926\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-fkawketflo\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":24,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001849\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":888,\""outstanding_amount\"":888,\""bill_no\"":\""1979\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-mkambptjei\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":25,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001850\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":59166,\""outstanding_amount\"":59166,\""bill_no\"":\""1980\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1},{\""docstatus\"":0,\""doctype\"":\""Payment Entry Reference\"",\""name\"":\""new-payment-entry-reference-xhqjaanlhy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""parent\"":\""new-payment-entry-dlbbsvmqtd\"",\""parentfield\"":\""references\"",\""parenttype\"":\""Payment Entry\"",\""idx\"":26,\""reference_doctype\"":\""Purchase Invoice\"",\""reference_name\"":\""ADPI2425001851\"",\""due_date\"":\""2024-12-22\"",\""total_amount\"":2074,\""outstanding_amount\"":2074,\""bill_no\"":\""1981\"",\""account\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""exchange_rate\"":1}],\""apply_tax_withholding_amount\"":0,\""taxes\"":[],\""deductions\"":[],\""status\"":\""Draft\"",\""custom_remarks\"":0,\""is_opening\"":\""No\"",\""letter_head\"":\""Delta PD Pumps Private Limited\"",\""source_exchange_rate\"":1,\""target_exchange_rate\"":1,\""company_address\"":\""DELTA PD PUMPS PRIVATE LTD - UNIT I\"",\""company_gstin\"":\""24AACCD9919N1Z6\"",\""party_type\"":\""Supplier\"",\""party\"":\""REGAL STEEL\"",\""paid_from\"":\""Other than Micro and Small Enterprise - DPDPL\"",\""paid_from_account_balance\"":-490692,\""party_balance\"":-490692,\""party_name\"":\""REGAL STEEL\"",\""bank_account\"":\""HO - HDFC Bank 50200002533335 - HDFC Bank\"",\""paid_from_account_type\"":\""Payable\"",\""paid_to\"":\""New Bank Account - CC - HDFC Bank 50200002533335 - DPDPL\"",\""bank\"":\""HDFC Bank\"",\""bank_account_no\"":\""50200002533335\"",\""paid_to_account_type\"":\""Bank\"",\""paid_to_account_balance\"":14251970.97,\""paid_amount\"":92500,\""base_paid_amount\"":92500,\""received_amount\"":92500,\""base_received_amount\"":92500,\""unallocated_amount\"":92500,\""difference_amount\"":0,\""idx\"":0,\""paid_amount_after_tax\"":0,\""base_paid_amount_after_tax\"":0,\""received_amount_after_tax\"":0,\""base_received_amount_after_tax\"":0,\""total_allocated_amount\"":0,\""base_total_allocated_amount\"":0,\""base_total_taxes_and_charges\"":0,\""total_taxes_and_charges\"":0}"",
		""method"": ""allocate_amount_to_references"",
		""args"": ""{\""paid_amount\"":92500,\""paid_amount_change\"":false,\""allocate_payment_amount\"":1}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/run_doc_method"",
	""request_id"": ""b2c0a2f3-6992-4043-96a1-9581d60f671b""
}
```
### Response Data
```
{
	""exception"": ""IndexError: Replacement index 2 out of range for positional args tuple"",
	""exc_type"": ""IndexError"",
	""_exc_source"": ""erpnext (app)""
}
```


backport version-15
backport version-14
",ljain112,2024-11-27 08:19:37+00:00,['ruthra-kumar'],2024-12-12 00:12:52+00:00,2024-11-27 09:25:00+00:00,https://github.com/frappe/erpnext/pull/44377,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2697428097,pull_request,closed,,fix: remove field precision in Sales and Purchase Order for percentage fields,"Remove field precision for Sales Order and Purchase Order fields:
- % Delivered
- % Amount Billed
- % Picked
- % Received

This is to maintain consistency as precision is not used while setting **Status** on backend.

Undoing the changes made in: https://github.com/frappe/erpnext/pull/44319
Replicating the changes made in: https://github.com/frappe/erpnext/pull/43690 for `sales_order_list.js`
",vishakhdesai,2024-11-27 07:24:13+00:00,['ruthra-kumar'],2024-12-12 00:12:50+00:00,2024-11-27 11:18:31+00:00,https://github.com/frappe/erpnext/pull/44376,"[('backport version-15-hotfix', '')]","[{'comment_id': 2503113831, 'issue_id': 2697428097, 'author': 'ljain112', 'body': 'Frappe Support Issue: https://support.frappe.io/app/hd-ticket/21161', 'created_at': datetime.datetime(2024, 11, 27, 7, 32, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-11-27 07:32:00 UTC): Frappe Support Issue: https://support.frappe.io/app/hd-ticket/21161

"
2697289155,pull_request,closed,,fix: Always Calculate `sales_incoming_rate` for Internal Transfers,"### Fix (should have been done) in [this]( https://github.com/frappe/erpnext/pull/42050):

- For internal transfer in Buying workflow, if `allow_internal_transfer_at_arms_length_price` is set, then rate will not update to the valuation rate but accounting will be done at valuation rate.

### Problem in above PR:

- The Valuation rate is calculated based on the `sales_incoming_rate`, but the `sales_incoming_rate` is only set if `allow_internal_transfer_at_arms_length_price` is unset, due to which for internal transfers at `arms length price`, the valuation is set again to `arms length price` as `sales_incoming_rate` is not set.

",Ninad1306,2024-11-27 06:34:49+00:00,['ruthra-kumar'],2024-12-26 00:11:37+00:00,2024-12-03 08:47:05+00:00,https://github.com/frappe/erpnext/pull/44373,"[('buying', None), ('backport version-15-hotfix', '')]",[],
2697092135,pull_request,closed,,fix: show cc on the process statement of accounts email (backport #44343),"**Issue:**
cc email ID is not showing in the received email
**ref:** [25154](https://support.frappe.io/helpdesk/tickets/25154)

![image](https://github.com/user-attachments/assets/abb6f241-80de-4659-ace6-75623cc0cc40)
**Before:**
![image](https://github.com/user-attachments/assets/9742bc93-2edf-4e8f-a7a2-1dd4de856442)

**After:**
![image](https://github.com/user-attachments/assets/094edf70-e597-4731-8dd1-c350be502dc5)

**Backport needed for v15**<hr>This is an automatic backport of pull request #44343 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-27 04:53:18+00:00,[],2024-12-12 00:12:53+00:00,2024-11-27 05:17:15+00:00,https://github.com/frappe/erpnext/pull/44372,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2696957657,pull_request,closed,,feat: provision to disable item attribute (backport #44358),"Added Disabled field in the item attribute to disable the item attribute in the item master

<img width=""1126"" alt=""Screenshot 2024-11-26 at 9 08 46 PM"" src=""https://github.com/user-attachments/assets/62b9092a-5038-432e-96d5-fe3cb3fb79f7"">



Use Case

Suppose there are attributes for t-shirt like

1. Size (S, M, L, XL)
2. Color (Red, Black, White)
3. Pocket (Yes, No)

The user created a few items with these attributes. Later, they decided that all new t-shirts should have a pocket. In this case, they don’t want to select the 'Pocket (Yes/No)' attribute while creating new items. Also they can't remove the 'Pocket (Yes/No)' attribute from the item template because the items exists against the Pocket attribute. So to fix this issue, we have given option to disabled the item attribute.


#No-docs<hr>This is an automatic backport of pull request #44358 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-27 04:18:06+00:00,['rohitwaghchaure'],2024-12-12 00:12:54+00:00,2024-11-27 05:01:30+00:00,https://github.com/frappe/erpnext/pull/44370,[],"[{'comment_id': 2502694142, 'issue_id': 2696957657, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 123e3ef263cdf36101064fa999180425204b9963 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44358\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 123e3ef263.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/stock/doctype/item/item.js\n\tmodified:   erpnext/stock/doctype/item_attribute/item_attribute.py\n\tmodified:   erpnext/stock/doctype/item_variant_attribute/item_variant_attribute.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/item_attribute/item_attribute.json\n\tboth modified:   erpnext/stock/doctype/item_variant_attribute/item_variant_attribute.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 27, 4, 18, 8, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-27 04:18:08 UTC): Cherry-pick of 123e3ef263cdf36101064fa999180425204b9963 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44358
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 123e3ef263.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/stock/doctype/item/item.js
	modified:   erpnext/stock/doctype/item_attribute/item_attribute.py
	modified:   erpnext/stock/doctype/item_variant_attribute/item_variant_attribute.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/item_attribute/item_attribute.json
	both modified:   erpnext/stock/doctype/item_variant_attribute/item_variant_attribute.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2695951906,pull_request,closed,,"feat(Dunning): separate tab ""Address & Contact"" (backport #44363)","Before, there were no tabs. ""Address and Contact"" was a collapsible section.

![Bildschirmfoto 2024-11-26 um 19 48 43](https://github.com/user-attachments/assets/fe4df310-6007-4f43-9772-f07c06884f11)

> no-docs<hr>This is an automatic backport of pull request #44363 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 20:11:40+00:00,['barredterra'],2024-12-26 00:11:54+00:00,2024-12-03 04:51:22+00:00,https://github.com/frappe/erpnext/pull/44368,[],"[{'comment_id': 2501828699, 'issue_id': 2695951906, 'author': 'mergify[bot]', 'body': 'Cherry-pick of e094473c65b63942dae8a422107452fa7e72d1ed has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44363\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit e094473c65.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/dunning/dunning.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 26, 20, 11, 43, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-26 20:11:43 UTC): Cherry-pick of e094473c65b63942dae8a422107452fa7e72d1ed has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44363
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit e094473c65.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/dunning/dunning.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2695925064,pull_request,closed,,feat(UX): scroll to required field,"### Before

When the required field for a query is missing, we throw an error message.

https://github.com/user-attachments/assets/d5a8aeda-6581-43a8-b4c7-f0043e4f3ae9

### After

When the required field for a query is missing, we jump to the required field and show an alert.

https://github.com/user-attachments/assets/6a6a3b1e-c8b9-4902-bc11-8ccb1e9709df

I prefer this because it removes the burden of searching for the required field and reduces the number of errors that get thrown in the user's face.

Not sure how we could best avoid the use of `cur_frm` here.

> no-docs",barredterra,2024-11-26 19:56:01+00:00,[],2025-02-08 00:10:09+00:00,2025-01-24 11:06:47+00:00,https://github.com/frappe/erpnext/pull/44367,"[('backport version-15-hotfix', '')]","[{'comment_id': 2505299110, 'issue_id': 2695925064, 'author': 'ljain112', 'body': 'Can this be introduced in frappe?', 'created_at': datetime.datetime(2024, 11, 28, 5, 37, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2506317359, 'issue_id': 2695925064, 'author': 'barredterra', 'body': 'Yes, but likely only in addition to this PR, not as a replacement.', 'created_at': datetime.datetime(2024, 11, 28, 15, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2557410760, 'issue_id': 2695925064, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 20, 17, 14, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2571516956, 'issue_id': 2695925064, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 5, 6, 16, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604286202, 'issue_id': 2695925064, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 21, 10, 17, 59, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-11-28 05:37:40 UTC): Can this be introduced in frappe?

barredterra (Issue Creator) on (2024-11-28 15:01:37 UTC): Yes, but likely only in addition to this PR, not as a replacement.

stale[bot] on (2024-12-20 17:14:33 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2025-01-05 06:16:30 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2025-01-21 10:17:59 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2695876179,pull_request,closed,,fix: unify company address query in sales transactions (backport #44361),"**Quotation**, **Sales Order** and **Sales Invoice** each implemented their own query on _Company Address_. The standard `erpnext.queries.company_address_query` was not used. **Delivery Note** and **POS Invoice** were entirely lacking the query.

Now all use the same query, which has been adjusted to be closer to the previous individual implementations.

---

Manual backport (https://github.com/frappe/erpnext/pull/44364 had too many merge conflicts)",barredterra,2024-11-26 19:30:03+00:00,[],2024-12-12 00:12:29+00:00,2024-11-26 20:11:28+00:00,https://github.com/frappe/erpnext/pull/44366,"[('selling', None), ('released', None)]","[{'comment_id': 2504156453, 'issue_id': 2695876179, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 27, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:27 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2695788601,pull_request,closed,,fix: unify company address query in sales transactions (backport #44361),"**Quotation**, **Sales Order** and **Sales Invoice** each implemented their own query on _Company Address_. The standard `erpnext.queries.company_address_query` was not used. **Delivery Note** and **POS Invoice** were entirely lacking the query.

Now all use the same query, which has been adjusted to be closer to the previous individual implementations.<hr>This is an automatic backport of pull request #44361 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 19:04:17+00:00,[],2024-12-11 00:12:16+00:00,2024-11-26 19:16:24+00:00,https://github.com/frappe/erpnext/pull/44365,[],"[{'comment_id': 2501737371, 'issue_id': 2695788601, 'author': 'barredterra', 'body': 'Tested, seems fine', 'created_at': datetime.datetime(2024, 11, 26, 19, 16, 17, tzinfo=datetime.timezone.utc)}]","barredterra on (2024-11-26 19:16:17 UTC): Tested, seems fine

"
2695788508,pull_request,closed,,fix: unify company address query in sales transactions (backport #44361),"**Quotation**, **Sales Order** and **Sales Invoice** each implemented their own query on _Company Address_. The standard `erpnext.queries.company_address_query` was not used. **Delivery Note** and **POS Invoice** were entirely lacking the query.

Now all use the same query, which has been adjusted to be closer to the previous individual implementations.<hr>This is an automatic backport of pull request #44361 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 19:04:13+00:00,['barredterra'],2024-12-11 00:12:17+00:00,2024-11-26 19:07:14+00:00,https://github.com/frappe/erpnext/pull/44364,"[('conflicts', None)]","[{'comment_id': 2501715775, 'issue_id': 2695788508, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 3f92a57d63edf5c5b478736e25d77b5eb43eac94 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44361\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 3f92a57d63.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/public/js/queries.js\n\nUnmerged paths:\n  (use ""git add/rm <file>..."" as appropriate to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js\n\tdeleted by us:   erpnext/public/js/utils/sales_common.js\n\tboth modified:   erpnext/selling/doctype/quotation/quotation.js\n\tboth modified:   erpnext/selling/doctype/sales_order/sales_order.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 26, 19, 4, 16, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-26 19:04:16 UTC): Cherry-pick of 3f92a57d63edf5c5b478736e25d77b5eb43eac94 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44361
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 3f92a57d63.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/public/js/queries.js

Unmerged paths:
  (use ""git add/rm <file>..."" as appropriate to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js
	deleted by us:   erpnext/public/js/utils/sales_common.js
	both modified:   erpnext/selling/doctype/quotation/quotation.js
	both modified:   erpnext/selling/doctype/sales_order/sales_order.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2695742709,pull_request,closed,,"feat(Dunning): separate tab ""Address & Contact""","Before, there were no tabs. ""Address and Contact"" was a collapsible section.

![Bildschirmfoto 2024-11-26 um 19 48 43](https://github.com/user-attachments/assets/fe4df310-6007-4f43-9772-f07c06884f11)

> no-docs",barredterra,2024-11-26 18:47:35+00:00,[],2024-12-11 00:12:15+00:00,2024-11-26 20:10:34+00:00,https://github.com/frappe/erpnext/pull/44363,"[('backport version-15-hotfix', '')]",[],
2695667473,pull_request,closed,,feat: add Company Contact Person in selling transactions,"German e-invoicing requires a company contact on Sales Invoices. I'm think this is also a valid requirement for other sales transactions and other countries.

This PR adds a link field _Company Contact Person_ to **Quotation**, **Sales Order**, **Sales Invoice**, **POS Invoice** and **Delivery Note**. A related query is added and applied via `sales_common.js`.

![company_contact_person](https://github.com/user-attachments/assets/69df2e15-1b18-476a-85e6-9d4023a2b974)


Note: there are some changes (e.g. ""UTM Medium"" fields, `payment_url`, formatting of import statements) which were not intended but auto-generated. Kindly ignore, since they seem to be harmless.

> no-docs",barredterra,2024-11-26 18:25:05+00:00,['ruthra-kumar'],2024-12-12 00:12:34+00:00,2024-11-27 14:51:59+00:00,https://github.com/frappe/erpnext/pull/44362,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2695615387,pull_request,closed,,fix: unify company address query in sales transactions,"**Quotation**, **Sales Order** and **Sales Invoice** each implemented their own query on _Company Address_. The standard `erpnext.queries.company_address_query` was not used. **Delivery Note** and **POS Invoice** were entirely lacking the query.

Now all use the same query, which has been adjusted to be closer to the previous individual implementations.",barredterra,2024-11-26 17:56:45+00:00,[],2024-12-11 00:12:18+00:00,2024-11-26 19:03:06+00:00,https://github.com/frappe/erpnext/pull/44361,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2695441954,pull_request,closed,,ci: adopt shared actions,"This PR serves to ex-post validate https://github.com/frappe/frappe/pull/28572 and thereby certify shared actions for downstream use.
",blaggacao,2024-11-26 17:01:03+00:00,[],2025-01-24 00:10:25+00:00,2025-01-09 06:50:29+00:00,https://github.com/frappe/erpnext/pull/44360,"[('inactive', ''), ('trigger-downstream-ci', 'Trigger enlisted downstream CIs')]","[{'comment_id': 2557410788, 'issue_id': 2695441954, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 20, 17, 14, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2558225884, 'issue_id': 2695441954, 'author': 'blaggacao', 'body': 'Comtinue', 'created_at': datetime.datetime(2024, 12, 21, 20, 7, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2571740228, 'issue_id': 2695441954, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 5, 20, 20, 20, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-12-20 17:14:34 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

blaggacao (Issue Creator) on (2024-12-21 20:07:55 UTC): Comtinue

stale[bot] on (2025-01-05 20:20:20 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2695431562,pull_request,closed,,fix: check difference with company currency,"**Issue:**
Getting difference amount while posting period closing voucher

![image](https://github.com/user-attachments/assets/0e2b5043-0902-43fe-81e8-270e1f53061a)

**Backport needed for v15**",venkat102,2024-11-26 16:58:17+00:00,['ruthra-kumar'],2024-12-12 00:12:47+00:00,2024-11-27 11:23:24+00:00,https://github.com/frappe/erpnext/pull/44359,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2695169743,pull_request,closed,,feat: provision to disable item attribute,"Added Disabled field in the item attribute to disable the item attribute in the item master

<img width=""1126"" alt=""Screenshot 2024-11-26 at 9 08 46 PM"" src=""https://github.com/user-attachments/assets/62b9092a-5038-432e-96d5-fe3cb3fb79f7"">



Use Case

Suppose there are attributes for t-shirt like

1. Size (S, M, L, XL)
2. Color (Red, Black, White)
3. Pocket (Yes, No)

The user created a few items with these attributes. Later, they decided that all new t-shirts should have a pocket. In this case, they don’t want to select the 'Pocket (Yes/No)' attribute while creating new items. Also they can't remove the 'Pocket (Yes/No)' attribute from the item template because the items exists against the Pocket attribute. So to fix this issue, we have given option to disabled the item attribute.


#No-docs",rohitwaghchaure,2024-11-26 15:44:38+00:00,[],2024-12-12 00:12:56+00:00,2024-11-27 04:16:36+00:00,https://github.com/frappe/erpnext/pull/44358,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2694833258,pull_request,closed,,fix: added validation for quality inspection (backport #44351),"- If ""Inspection Required before Purchase"" has not enabled then don't allow to make Quality Inspection against the Purchase Receipt / Purchase Invoice
- Inspection Required before Delivery has not enabled then don't allow to make Quality Inspection against the Ddelivery Note / Sales Invoice

<hr>This is an automatic backport of pull request #44351 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 14:19:48+00:00,['rohitwaghchaure'],2024-12-14 00:12:13+00:00,2024-11-26 15:48:27+00:00,https://github.com/frappe/erpnext/pull/44357,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2505700615, 'issue_id': 2694833258, 'author': 'MPH95', 'body': 'This fix is causing some issues in our setup:\r\nWe manage numerous serial numbers and perform quality inspections for each on automated test benches. These benches use creation documents (""Creation Document No"" field) from the serial number details, which are sometimes linked to the purchase receipt. However, we are now encountering errors because the checkboxes on the items are not set.\r\n\r\nWe don\'t fully understand why creating quality inspections is prohibited. While they may not be required, why shouldn’t it be allowed anyway, there is no harm in to many Quality Inspections?\r\n\r\nAdditionally, we are unable to create purchase receipts for serialized items if the checkbox is set. (as we don’t have the serial numbers at that stage). While it is possible to create a quality inspection for the item type instead, this introduces unnecessary overhead in our workflow.', 'created_at': datetime.datetime(2024, 11, 28, 9, 55, 10, tzinfo=datetime.timezone.utc)}]","MPH95 on (2024-11-28 09:55:10 UTC): This fix is causing some issues in our setup:
We manage numerous serial numbers and perform quality inspections for each on automated test benches. These benches use creation documents (""Creation Document No"" field) from the serial number details, which are sometimes linked to the purchase receipt. However, we are now encountering errors because the checkboxes on the items are not set.

We don't fully understand why creating quality inspections is prohibited. While they may not be required, why shouldn’t it be allowed anyway, there is no harm in to many Quality Inspections?

Additionally, we are unable to create purchase receipts for serialized items if the checkbox is set. (as we don’t have the serial numbers at that stage). While it is possible to create a quality inspection for the item type instead, this introduces unnecessary overhead in our workflow.

"
2694525763,pull_request,closed,,fix: billed qty and received amount in PO analysis report (backport #44349),"**Issue**

Incorrect billed qty and received amount in the PO Analysis report 

<img width=""986"" alt=""Screenshot 2024-11-26 at 5 04 16 PM"" src=""https://github.com/user-attachments/assets/6a156379-2e04-4bc6-875c-402291b6367f"">




**After Fix**
<img width=""953"" alt=""Screenshot 2024-11-26 at 5 08 35 PM"" src=""https://github.com/user-attachments/assets/5c801a78-2142-4669-a66a-df0b47e36b9b"">



<hr>This is an automatic backport of pull request #44349 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 12:39:33+00:00,['rohitwaghchaure'],2024-12-11 00:12:19+00:00,2024-11-26 14:13:52+00:00,https://github.com/frappe/erpnext/pull/44354,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2694525609,pull_request,closed,,fix: billed qty and received amount in PO analysis report (backport #44349),"**Issue**

Incorrect billed qty and received amount in the PO Analysis report 

<img width=""986"" alt=""Screenshot 2024-11-26 at 5 04 16 PM"" src=""https://github.com/user-attachments/assets/6a156379-2e04-4bc6-875c-402291b6367f"">




**After Fix**
<img width=""953"" alt=""Screenshot 2024-11-26 at 5 08 35 PM"" src=""https://github.com/user-attachments/assets/5c801a78-2142-4669-a66a-df0b47e36b9b"">



<hr>This is an automatic backport of pull request #44349 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 12:39:30+00:00,['rohitwaghchaure'],2024-12-12 00:12:27+00:00,2024-11-26 15:48:38+00:00,https://github.com/frappe/erpnext/pull/44353,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2500692161, 'issue_id': 2694525609, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 2ab7ec5437834a63e0a0ebe5e081236370d56e8b has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44349\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 2ab7ec5437.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/report/purchase_order_analysis/purchase_order_analysis.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 26, 12, 39, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504156715, 'issue_id': 2694525609, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 33, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-26 12:39:32 UTC): Cherry-pick of 2ab7ec5437834a63e0a0ebe5e081236370d56e8b has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44349
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 2ab7ec5437.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/report/purchase_order_analysis/purchase_order_analysis.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-11-27 15:25:33 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2694496491,pull_request,closed,,fix: added validation for quality inspection,"- If ""Inspection Required before Purchase"" has not enabled then don't allow to make Quality Inspection against the Purchase Receipt / Purchase Invoice
- Inspection Required before Delivery has not enabled then don't allow to make Quality Inspection against the Ddelivery Note / Sales Invoice

",rohitwaghchaure,2024-11-26 12:26:57+00:00,[],2024-12-14 00:12:12+00:00,2024-11-26 14:18:43+00:00,https://github.com/frappe/erpnext/pull/44351,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2505702584, 'issue_id': 2694496491, 'author': 'MPH95', 'body': 'This fix is causing some issues in our setup:\r\nWe manage numerous serial numbers and perform quality inspections for each on automated test benches. These benches use creation documents (""Creation Document No"" field) from the serial number details, which are sometimes linked to the purchase receipt. However, we are now encountering errors because the checkboxes on the items are not set.\r\n\r\nWe don\'t fully understand why creating quality inspections is prohibited. While they may not be required, why shouldn’t it be allowed anyway, there is no harm in to many Quality Inspections?\r\n\r\nAdditionally, we are unable to create purchase receipts for serialized items if the checkbox is set. (as we don’t have the serial numbers at that stage). While it is possible to create a quality inspection for the item type instead, this introduces unnecessary overhead in our workflow.', 'created_at': datetime.datetime(2024, 11, 28, 9, 56, 7, tzinfo=datetime.timezone.utc)}]","MPH95 on (2024-11-28 09:56:07 UTC): This fix is causing some issues in our setup:
We manage numerous serial numbers and perform quality inspections for each on automated test benches. These benches use creation documents (""Creation Document No"" field) from the serial number details, which are sometimes linked to the purchase receipt. However, we are now encountering errors because the checkboxes on the items are not set.

We don't fully understand why creating quality inspections is prohibited. While they may not be required, why shouldn’t it be allowed anyway, there is no harm in to many Quality Inspections?

Additionally, we are unable to create purchase receipts for serialized items if the checkbox is set. (as we don’t have the serial numbers at that stage). While it is possible to create a quality inspection for the item type instead, this introduces unnecessary overhead in our workflow.

"
2694485660,pull_request,closed,,fix: remove print statement,,ljain112,2024-11-26 12:22:11+00:00,[],2024-12-11 00:12:21+00:00,2024-11-26 12:28:53+00:00,https://github.com/frappe/erpnext/pull/44350,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2500669148, 'issue_id': 2694485660, 'author': 'ruthra-kumar', 'body': '@ljain112 \r\n\r\nRemoved in https://github.com/frappe/erpnext/pull/44345', 'created_at': datetime.datetime(2024, 11, 26, 12, 28, 53, tzinfo=datetime.timezone.utc)}]","ruthra-kumar on (2024-11-26 12:28:53 UTC): @ljain112 

Removed in https://github.com/frappe/erpnext/pull/44345

"
2694455811,pull_request,closed,,fix: billed qty and received amount in PO analysis report,"**Issue**

Incorrect billed qty and received amount in the PO Analysis report 

<img width=""986"" alt=""Screenshot 2024-11-26 at 5 04 16 PM"" src=""https://github.com/user-attachments/assets/6a156379-2e04-4bc6-875c-402291b6367f"">




**After Fix**
<img width=""953"" alt=""Screenshot 2024-11-26 at 5 08 35 PM"" src=""https://github.com/user-attachments/assets/5c801a78-2142-4669-a66a-df0b47e36b9b"">



",rohitwaghchaure,2024-11-26 12:11:26+00:00,[],2024-12-11 00:12:20+00:00,2024-11-26 12:37:43+00:00,https://github.com/frappe/erpnext/pull/44349,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2694220354,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-26 10:57:42+00:00,[],2024-12-11 00:12:22+00:00,2024-11-26 12:22:26+00:00,https://github.com/frappe/erpnext/pull/44347,"[('translation', None)]",[],
2694112379,pull_request,closed,,fix: reduce paid amount from grand total,"Issue:
For partly paid invoices, if we create new payment request, system takes full amount as payment amount.

ref: [26055](https://support.frappe.io/helpdesk/tickets/26055)

Before:

[payment_request-2024-11-26_15.55.30.webm](https://github.com/user-attachments/assets/b6835c18-56cd-4df7-a936-469d614e15a8)

After:

[payment_request-2024-11-26_15.47.26.webm](https://github.com/user-attachments/assets/50da85a3-cf45-43a2-a310-6b835d69235e)

Back port needed for v15.


",Sugesh393,2024-11-26 10:38:32+00:00,['ruthra-kumar'],2024-12-12 00:12:36+00:00,2024-11-27 14:38:22+00:00,https://github.com/frappe/erpnext/pull/44346,"[('backport version-15-hotfix', '')]",[],
2694010849,pull_request,closed,,fix: broken export on financial statements,"regression: https://github.com/frappe/erpnext/pull/42524
",ruthra-kumar,2024-11-26 10:05:26+00:00,[],2024-12-11 00:12:23+00:00,2024-11-26 12:18:29+00:00,https://github.com/frappe/erpnext/pull/44345,[],[],
2693955997,pull_request,closed,,fix: show cc on the process statement of accounts email,"**Issue:**
cc email ID is not showing in the received email
**ref:** [25154](https://support.frappe.io/helpdesk/tickets/25154)

![image](https://github.com/user-attachments/assets/abb6f241-80de-4659-ace6-75623cc0cc40)
**Before:**
![image](https://github.com/user-attachments/assets/9742bc93-2edf-4e8f-a7a2-1dd4de856442)

**After:**
![image](https://github.com/user-attachments/assets/094edf70-e597-4731-8dd1-c350be502dc5)

**Backport needed for v15**",venkat102,2024-11-26 09:44:44+00:00,['ruthra-kumar'],2024-12-12 00:12:55+00:00,2024-11-27 04:52:18+00:00,https://github.com/frappe/erpnext/pull/44343,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2693916426,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-11-26 09:37:26+00:00,[],2024-12-12 00:12:32+00:00,2024-11-27 15:23:38+00:00,https://github.com/frappe/erpnext/pull/44342,"[('released', None)]","[{'comment_id': 2504156092, 'issue_id': 2693916426, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 18, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-11-27 15:25:18 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2693915543,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-11-26 09:37:21+00:00,[],2024-12-12 00:12:19+00:00,2024-11-27 16:00:11+00:00,https://github.com/frappe/erpnext/pull/44341,"[('accounts', ''), ('stock', None), ('selling', None)]",[],
2693812962,pull_request,closed,,fix: move `validate_total_debit_and_credit` from`validate` to`on_submit` in Journal Entry,"Issue: https://support.frappe.io/helpdesk/tickets/20084
![image](https://github.com/user-attachments/assets/cb5c34ae-05d9-4929-9b3b-b47bde2bbda9)

![image](https://github.com/user-attachments/assets/336b93c2-61a3-4c44-abba-e2a6cb14fdd0)
Total Debit and Credit are shown same even when there is a difference amount.

Solution:
Remove the validation `validate_total_debit_and_credit` and let the user save Journal Entry. This will recalculate and correct the amounts shown.

Instead, validate `validate_total_debit_and_credit` in `on_submit`",vishakhdesai,2024-11-26 09:05:20+00:00,['ruthra-kumar'],2024-12-26 00:11:43+00:00,2024-12-03 12:39:04+00:00,https://github.com/frappe/erpnext/pull/44339,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2514399280, 'issue_id': 2693812962, 'author': 'ruthra-kumar', 'body': ""> Instead, validate validate_total_debit_and_credit in on_submit\r\n\r\nI've moved the validation to`before_submit`, as it a looks like a better spot for this."", 'created_at': datetime.datetime(2024, 12, 3, 12, 14, 17, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-12-03 12:14:17 UTC): I've moved the validation to`before_submit`, as it a looks like a better spot for this.

"
2693320115,pull_request,closed,,fix: use field precision in Sales and Purchase Order (backport #44319),"![image](https://github.com/user-attachments/assets/0244f65c-d5c5-4ce5-a583-423969868e5f)
Issue: https://support.frappe.io/helpdesk/tickets/21161
Option to Close the Sales Order is not visble even when **% Delivered** or **% Amount Billed** are less than 100.

Fix: 
Use field precision for fields: 
- % Delivered
- % Amount Billed
- % Picked<hr>This is an automatic backport of pull request #44319 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 06:18:36+00:00,[],2024-12-11 00:12:25+00:00,2024-11-26 08:32:33+00:00,https://github.com/frappe/erpnext/pull/44338,[],"[{'comment_id': 2499758056, 'issue_id': 2693320115, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 1a1e2c7e01f76ed9f9cc727fb802ade8faa99440 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44319\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 1a1e2c7e01.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/selling/doctype/sales_order/sales_order.js\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/purchase_order/purchase_order.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 26, 6, 18, 38, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-26 06:18:38 UTC): Cherry-pick of 1a1e2c7e01f76ed9f9cc727fb802ade8faa99440 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44319
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 1a1e2c7e01.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/selling/doctype/sales_order/sales_order.js

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/purchase_order/purchase_order.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2693320037,pull_request,closed,,fix: use field precision in Sales and Purchase Order (backport #44319),"![image](https://github.com/user-attachments/assets/0244f65c-d5c5-4ce5-a583-423969868e5f)
Issue: https://support.frappe.io/helpdesk/tickets/21161
Option to Close the Sales Order is not visble even when **% Delivered** or **% Amount Billed** are less than 100.

Fix: 
Use field precision for fields: 
- % Delivered
- % Amount Billed
- % Picked<hr>This is an automatic backport of pull request #44319 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 06:18:33+00:00,[],2024-12-11 00:12:26+00:00,2024-11-26 08:18:35+00:00,https://github.com/frappe/erpnext/pull/44337,"[('conflicts', None)]","[{'comment_id': 2499758011, 'issue_id': 2693320037, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 1a1e2c7e01f76ed9f9cc727fb802ade8faa99440 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44319\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 1a1e2c7e01.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/purchase_order/purchase_order.js\n\tboth modified:   erpnext/selling/doctype/sales_order/sales_order.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 26, 6, 18, 35, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-26 06:18:35 UTC): Cherry-pick of 1a1e2c7e01f76ed9f9cc727fb802ade8faa99440 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44319
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 1a1e2c7e01.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/purchase_order/purchase_order.js
	both modified:   erpnext/selling/doctype/sales_order/sales_order.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2693299350,pull_request,closed,,chore: Add translations to QI validations in Update stock_controller.py (backport #44304),"chore: Add translations to QI validations in Update stock_controller.py



> Please provide enough information so that others can review your pull request:



> Explain the **details** for making this change. What existing problem does the pull request solve?



> Screenshots/GIFs


<hr>This is an automatic backport of pull request #44304 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 06:07:17+00:00,[],2024-12-11 00:12:28+00:00,2024-11-26 06:39:56+00:00,https://github.com/frappe/erpnext/pull/44335,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2693276858,pull_request,closed,,Update grand total based on disable rounded total checkbox,"**Issue:**
Status becomes overdue due to outstanding is not evaluated properly 
**ref:** [25725](https://support.frappe.io/helpdesk/tickets/25725)
**Before:**

[Screencast from 22-11-24 02:13:55 PM IST.webm](https://github.com/user-attachments/assets/95326868-09ab-4ace-a288-9e370366434f)

**After:**

[Screencast from 22-11-24 02:15:16 PM IST.webm](https://github.com/user-attachments/assets/c00c1232-cc42-4f3d-b244-98d805be66ee)

Backport Needed: v15",DHINESH00,2024-11-26 05:57:58+00:00,['ruthra-kumar'],2024-12-14 00:12:18+00:00,2024-11-28 04:38:30+00:00,https://github.com/frappe/erpnext/pull/44334,"[('accounts', '')]","[{'comment_id': 2504069040, 'issue_id': 2693276858, 'author': 'ruthra-kumar', 'body': ""@DHINESH00 \r\n\r\nI don't think updating the status as 'Paid' is a correct fix. The Invoice will still show up in Accounts Receivable report cause at the ledger level it still has outstanding."", 'created_at': datetime.datetime(2024, 11, 27, 14, 48, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504082155, 'issue_id': 2693276858, 'author': 'ruthra-kumar', 'body': 'Putting this on hold', 'created_at': datetime.datetime(2024, 11, 27, 14, 54, 32, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-27 14:48:54 UTC): @DHINESH00 

I don't think updating the status as 'Paid' is a correct fix. The Invoice will still show up in Accounts Receivable report cause at the ledger level it still has outstanding.

ruthra-kumar (Assginee) on (2024-11-27 14:54:32 UTC): Putting this on hold

"
2693159311,pull_request,closed,,fix: add company dynamic filters in number cards (backport #44257),"Issue:
Workspace number card not showing the value based on session default company
ref: [25533](https://support.frappe.io/helpdesk/tickets/25533)

[Screencast from 21-11-24 11:25:50 AM IST.webm](https://github.com/user-attachments/assets/6ecd3a6f-2756-4cb7-a94d-28629ceb9aa0)

Backport needed for v15<hr>This is an automatic backport of pull request #44257 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 05:24:59+00:00,[],2024-12-11 00:12:31+00:00,2024-11-26 05:49:43+00:00,https://github.com/frappe/erpnext/pull/44332,[],[],
2693127655,pull_request,closed,,fix: Increase quantity by `1 UOM` when adding an item from the selector in `POS` (backport #44320),"## Issue: [Support Ticket - 25448](https://support.frappe.io/helpdesk/tickets/25448)

<details>

<summary> 
When Item's <strong>Selling UOM</strong> is different from <strong>Stock UOM</strong>, then Item is not incrementing properly. 
</summary> <br>

**Before:**
![Not-Proper-Increament-POS](https://github.com/user-attachments/assets/ff6c5056-943d-43ae-922e-03df1d6c3484)

**After:**
![Proper-Increment-POS](https://github.com/user-attachments/assets/b4959be6-4433-4d3a-a89b-78b708e79c50)

</details>

<details>

<summary> 
Available stock's error message showing available stock in <strong>UOM</strong> instead of  <strong>Stock UOM</strong>.
</summary><br>

**Before:**
![Not-Proper-Error-Msg-POS](https://github.com/user-attachments/assets/9844c98e-1016-49c3-8e4d-cdf10ecda56f)

**After:**
![Proper-Error-msg-POS](https://github.com/user-attachments/assets/a87c554a-124d-45db-b4b9-44fb80817ee2)

</details>

> [!IMPORTANT]
> Backport require for `V-15`
> Manual backport for `V-14` require 
<hr>This is an automatic backport of pull request #44320 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-26 05:00:58+00:00,[],2024-12-11 00:12:35+00:00,2024-11-26 05:10:45+00:00,https://github.com/frappe/erpnext/pull/44331,[],[],
2692108598,pull_request,closed,,fix: incorrect GL entry on sale of fully depreciated asset,"### Problem:
When selling a fully depreciated asset, the system continued depreciating it, leading to incorrect GL entries and unwanted changes in the asset.

### Solution:
- Added a condition to check if the asset is fully depreciated.

no-docs",khushi8112,2024-11-25 20:25:04+00:00,[],2024-12-12 00:12:28+00:00,2024-11-26 19:39:34+00:00,https://github.com/frappe/erpnext/pull/44329,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2504156571, 'issue_id': 2692108598, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 30, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:30 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2691809132,pull_request,closed,,fix: set debit transaction currency in gl entry,"**Issue:**
Payment Entry gl entry doesn't have debit transaction currency when there is payment is made against an invoice
**ref:** [25193](https://support.frappe.io/helpdesk/tickets/25193)

**Before:**
![Screenshot 2024-11-26_00-00-04](https://github.com/user-attachments/assets/9c09a241-e560-46e8-a4d5-fbb7d2c30a01)

**After:**
![Screenshot 2024-11-26_00-01-38](https://github.com/user-attachments/assets/1cee342d-f3e6-4650-b45a-4cbf2199da17)

**Backport needed: v15**",venkat102,2024-11-25 18:42:27+00:00,['ruthra-kumar'],2024-12-12 00:12:42+00:00,2024-11-27 11:58:00+00:00,https://github.com/frappe/erpnext/pull/44327,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2691047139,pull_request,closed,,fix: Required By date issue,"**Issue**
On changing of Required By date in material request, the date is not changing in the line items

Fixed https://github.com/frappe/erpnext/issues/44313",rohitwaghchaure,2024-11-25 14:52:32+00:00,[],2024-12-10 00:12:22+00:00,2024-11-25 14:58:56+00:00,https://github.com/frappe/erpnext/pull/44326,[],[],
2690935917,pull_request,closed,,feat: available qty at company in sales transactions (backport #44260),"![2024-11-21 15 46 13](https://github.com/user-attachments/assets/cc0f3fd0-2640-431c-84a2-d3fe5a43a752)

Fixed https://github.com/frappe/erpnext/issues/40144

#No-docs
<hr>This is an automatic backport of pull request #44260 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-25 14:30:39+00:00,['rohitwaghchaure'],2024-12-10 00:12:21+00:00,2024-11-25 14:59:13+00:00,https://github.com/frappe/erpnext/pull/44325,[],"[{'comment_id': 2498176445, 'issue_id': 2690935917, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d8b9aef14f0a615555067258889bdb09cd6d117e has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44260\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit d8b9aef14f.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.py\n\tmodified:   erpnext/controllers/selling_controller.py\n\tmodified:   erpnext/selling/doctype/quotation_item/quotation_item.py\n\tmodified:   erpnext/selling/doctype/sales_order_item/sales_order_item.py\n\tmodified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.json\n\tboth modified:   erpnext/selling/doctype/quotation_item/quotation_item.json\n\tboth modified:   erpnext/selling/doctype/sales_order_item/sales_order_item.json\n\tboth modified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 25, 14, 30, 41, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-25 14:30:41 UTC): Cherry-pick of d8b9aef14f0a615555067258889bdb09cd6d117e has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44260
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit d8b9aef14f.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.py
	modified:   erpnext/controllers/selling_controller.py
	modified:   erpnext/selling/doctype/quotation_item/quotation_item.py
	modified:   erpnext/selling/doctype/sales_order_item/sales_order_item.py
	modified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice_item/sales_invoice_item.json
	both modified:   erpnext/selling/doctype/quotation_item/quotation_item.json
	both modified:   erpnext/selling/doctype/sales_order_item/sales_order_item.json
	both modified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2690882116,pull_request,closed,,fix: item none not found,"Fixed https://github.com/frappe/erpnext/issues/43911
Fixed https://github.com/frappe/erpnext/issues/44041",rohitwaghchaure,2024-11-25 14:11:46+00:00,[],2024-12-10 00:12:23+00:00,2024-11-25 14:42:13+00:00,https://github.com/frappe/erpnext/pull/44324,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2690556119,pull_request,closed,,fix: update gross profit for returned invoices,"Issue:

- If Group by is set as  ""Invoice"", the returned invoice quantity is updated but gross profit is not recalculated.

Before:
![image](https://github.com/user-attachments/assets/a8942933-399e-4224-a6aa-f79bb790a25a)


After:
![image](https://github.com/user-attachments/assets/89d2af6d-4ea2-4bb1-9e81-01fd68b94de2)


- If Group by is set as ""Item"", returned invoices are not deducted from the item.

Before:
![image](https://github.com/user-attachments/assets/d142c82d-3be0-4db7-a251-51af5f7509f1)


After:
![image](https://github.com/user-attachments/assets/becc9176-de28-4519-9b8d-747ef412ffef)


Steps To Replicate:
- Create a invoice
- Create a Sales Return against it.

Frappe Support Issue:
- https://support.frappe.io/app/hd-ticket/21142
- https://support.frappe.io/app/hd-ticket/23827

backport version-15
backport version-14
",ljain112,2024-11-25 12:22:17+00:00,['ruthra-kumar'],2024-12-12 00:12:49+00:00,2024-11-27 11:19:18+00:00,https://github.com/frappe/erpnext/pull/44323,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2690282365,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-25 10:53:42+00:00,[],2024-12-10 00:12:25+00:00,2024-11-25 11:19:34+00:00,https://github.com/frappe/erpnext/pull/44322,"[('translation', None)]",[],
2690158409,pull_request,closed,,refactor: clear unallocated payments from POS Invoice,"Changes from https://github.com/frappe/erpnext/pull/43218

Original contribution by: @devdiogenes",ruthra-kumar,2024-11-25 10:28:11+00:00,['ruthra-kumar'],2024-12-10 00:12:26+00:00,2024-11-25 11:10:35+00:00,https://github.com/frappe/erpnext/pull/44321,[],"[{'comment_id': 2497704242, 'issue_id': 2690158409, 'author': 'devdiogenes', 'body': 'Thanks for mentioning', 'created_at': datetime.datetime(2024, 11, 25, 11, 7, 34, tzinfo=datetime.timezone.utc)}]","devdiogenes on (2024-11-25 11:07:34 UTC): Thanks for mentioning

"
2690063063,pull_request,closed,,fix: Increase quantity by `1 UOM` when adding an item from the selector in `POS`,"## Issue: [Support Ticket - 25448](https://support.frappe.io/helpdesk/tickets/25448)

<details>

<summary> 
When Item's <strong>Selling UOM</strong> is different from <strong>Stock UOM</strong>, then Item is not incrementing properly. 
</summary> <br>

**Before:**
![Not-Proper-Increament-POS](https://github.com/user-attachments/assets/ff6c5056-943d-43ae-922e-03df1d6c3484)

**After:**
![Proper-Increment-POS](https://github.com/user-attachments/assets/b4959be6-4433-4d3a-a89b-78b708e79c50)

</details>

<details>

<summary> 
Available stock's error message showing available stock in <strong>UOM</strong> instead of  <strong>Stock UOM</strong>.
</summary><br>

**Before:**
![Not-Proper-Error-Msg-POS](https://github.com/user-attachments/assets/9844c98e-1016-49c3-8e4d-cdf10ecda56f)

**After:**
![Proper-Error-msg-POS](https://github.com/user-attachments/assets/a87c554a-124d-45db-b4b9-44fb80817ee2)

</details>

> [!IMPORTANT]
> Backport require for `V-15`
",Abdeali099,2024-11-25 09:55:44+00:00,['ruthra-kumar'],2024-12-17 00:12:13+00:00,2024-11-26 04:59:41+00:00,https://github.com/frappe/erpnext/pull/44320,"[('backport version-15-hotfix', '')]",[],
2689530509,pull_request,closed,,fix: use field precision in Sales and Purchase Order,"![image](https://github.com/user-attachments/assets/0244f65c-d5c5-4ce5-a583-423969868e5f)
Issue: https://support.frappe.io/helpdesk/tickets/21161
Option to Close the Sales Order is not visble even when **% Delivered** or **% Amount Billed** are less than 100.

Fix: 
Use field precision for fields: 
- % Delivered
- % Amount Billed
- % Picked",vishakhdesai,2024-11-25 07:28:45+00:00,['ruthra-kumar'],2024-12-11 00:12:27+00:00,2024-11-26 06:16:51+00:00,https://github.com/frappe/erpnext/pull/44319,"[('backport version-15-hotfix', '')]",[],
2689484605,pull_request,closed,,fix: set price_list_currency only if it exists (backport #44274),"Issue:
After a Request For Quotation record is saved, if we try to change quantity field value it shows field price_list_currency not found.

ref: [25739](https://support.frappe.io/helpdesk/tickets/25739)

Before:

[Screencast from 21-11-24 07:15:10 PM IST.webm](https://github.com/user-attachments/assets/1e39606a-0359-4015-a44c-215c64cdc1ef)

After:

[Screencast from 21-11-24 07:20:25 PM IST.webm](https://github.com/user-attachments/assets/a1258d42-9ede-46f7-a24f-4359c6c6ed87)

Back port needed for v15.
<hr>This is an automatic backport of pull request #44274 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-25 07:10:06+00:00,[],2024-12-10 00:12:30+00:00,2024-11-25 07:27:02+00:00,https://github.com/frappe/erpnext/pull/44318,[],[],
2689376823,pull_request,closed,,feat: Show Aggregate Value from Subsidiary Companies (backport #44163),"Issue: Unable to see child company data in sales analytics.

Solution: Added a checkbox to show aggregate value from subsidiary companies.

Ref: [24250](https://support.frappe.io/helpdesk/tickets/24250)


![Screenshot from 2024-11-15 13-07-58](https://github.com/user-attachments/assets/cd0706a9-23da-4ba6-8d77-3e26dbef991d)

![Screenshot from 2024-11-15 13-15-22](https://github.com/user-attachments/assets/1f412904-5236-4d94-b42c-8d38b17917df)


Backport needed: Version-15
<hr>This is an automatic backport of pull request #44163 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-25 06:40:02+00:00,[],2024-12-10 00:12:31+00:00,2024-11-25 07:26:37+00:00,https://github.com/frappe/erpnext/pull/44317,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2496987777, 'issue_id': 2689376823, 'author': 'mergify[bot]', 'body': 'Cherry-pick of c23af6af41471b1d1e7b200d293ea4da95bbbb8e has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44163\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit c23af6af41.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/selling/report/sales_analytics/sales_analytics.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/selling/report/sales_analytics/sales_analytics.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 25, 6, 40, 4, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-25 06:40:04 UTC): Cherry-pick of c23af6af41471b1d1e7b200d293ea4da95bbbb8e has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44163
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit c23af6af41.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/selling/report/sales_analytics/sales_analytics.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/selling/report/sales_analytics/sales_analytics.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2689180897,pull_request,closed,,fix: Initially Closing Amount Should be Equal to Expected Amount,"### Initial ERPNext Implementation:
- The `closing amount` is set to expected amount initially. But when user changes its value, then also in `before save` it is set again to `expected value`.

### After [this](https://github.com/frappe/erpnext/pull/43358) PR:
- The closing amount is only updated when closing amount is zero. So initially closing amount is set same as first invoice value.

### Current Fix:
- Initially the closing amount should be set same as expected amount , and should not be overridden when user changes the value.
",Ninad1306,2024-11-25 05:19:10+00:00,['ruthra-kumar'],2024-12-14 00:12:17+00:00,2024-11-27 14:26:05+00:00,https://github.com/frappe/erpnext/pull/44316,"[('backport version-15-hotfix', '')]","[{'comment_id': 2503695893, 'issue_id': 2689180897, 'author': 'ruthra-kumar', 'body': '@Ninad1306 \r\n\r\nDoes this require backporting? and for which versions?', 'created_at': datetime.datetime(2024, 11, 27, 12, 0, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2503819632, 'issue_id': 2689180897, 'author': 'Ninad1306', 'body': '@ruthra-kumar\r\n\r\nThis fix has to be backported to `version-15`', 'created_at': datetime.datetime(2024, 11, 27, 13, 0, 10, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-27 12:00:58 UTC): @Ninad1306 

Does this require backporting? and for which versions?

Ninad1306 (Issue Creator) on (2024-11-27 13:00:10 UTC): @ruthra-kumar

This fix has to be backported to `version-15`

"
2689068336,pull_request,closed,,refactor: added translate function for some columns of report (backport #44297),"## Issue: [Support Ticket - 25936](https://support.frappe.io/helpdesk/tickets/25936)

> [!IMPORTANT]
> Backport require for both `V-15` and `V-14`

<hr>This is an automatic backport of pull request #44297 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-25 04:39:38+00:00,[],2024-12-12 00:12:18+00:00,2024-11-25 04:58:03+00:00,https://github.com/frappe/erpnext/pull/44315,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2689068106,pull_request,closed,,refactor: added translate function for some columns of report (backport #44297),"## Issue: [Support Ticket - 25936](https://support.frappe.io/helpdesk/tickets/25936)

> [!IMPORTANT]
> Backport require for both `V-15` and `V-14`<hr>This is an automatic backport of pull request #44297 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-25 04:39:28+00:00,[],2024-12-12 00:12:26+00:00,2024-11-25 05:09:49+00:00,https://github.com/frappe/erpnext/pull/44314,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2504156949, 'issue_id': 2689068106, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 39, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:39 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2688033033,pull_request,closed,,fix: not able to fetch batch item price,"<img width=""666"" alt=""Screenshot 2024-11-24 at 9 54 43 PM"" src=""https://github.com/user-attachments/assets/6d26d741-f3b4-4b12-a46f-bbf5ed053cca"">


Already fixed in develop branch https://github.com/frappe/erpnext/pull/40589",rohitwaghchaure,2024-11-24 16:55:00+00:00,[],2024-12-10 00:12:34+00:00,2024-11-25 05:52:43+00:00,https://github.com/frappe/erpnext/pull/44312,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2687467246,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-11-24 09:36:38+00:00,[],2024-12-10 00:12:36+00:00,2024-11-24 15:49:43+00:00,https://github.com/frappe/erpnext/pull/44309,[],[],
2686689857,pull_request,closed,,feat: add more fine-grained deprecation warning control,"see: https://github.com/frappe/frappe/wiki/Deprecations

cc @ruthra-kumar
",blaggacao,2024-11-23 22:32:49+00:00,[],2024-12-08 00:13:07+00:00,2024-11-23 23:37:43+00:00,https://github.com/frappe/erpnext/pull/44307,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2686676773,pull_request,closed,,chore: use local deprecation,"cc @ruthra-kumar
",blaggacao,2024-11-23 21:59:56+00:00,[],2024-12-08 00:13:08+00:00,2024-11-23 22:25:12+00:00,https://github.com/frappe/erpnext/pull/44306,"[('accounts', ''), ('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2686277254,pull_request,closed,,fix: remove unnecessary auth from plaid connector,"The plaid connector is using the plaid [Auth](https://plaid.com/docs/api/products/auth) endpoint with the intent to authenticate the connection. However, this API endpoint is actually intended for setting up electronic fund transfers using ACH, etc. Accessing it requires additional user consent, which the plaid connector is not requesting, so the API returns a [ADDITIONAL_CONSENT_REQUIRED](https://plaid.com/docs/errors/invalid-input/#additional_consent_required) error. 

This PR removes the unnecessary Auth call. After removing this, I was able to link and retrieve transactions from a bank in the US. Before, I was getting the same error as in #43699.

",mluessi,2024-11-23 17:01:25+00:00,[],2025-02-08 00:10:26+00:00,2025-01-24 07:41:33+00:00,https://github.com/frappe/erpnext/pull/44305,"[('backport version-15-hotfix', '')]","[{'comment_id': 2537949570, 'issue_id': 2686277254, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 12, 6, 46, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2539770977, 'issue_id': 2686277254, 'author': 'mluessi', 'body': 'Can someone review this? I think this fixes an actual bug, so it would be good if it could be included.', 'created_at': datetime.datetime(2024, 12, 12, 18, 49, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2546120607, 'issue_id': 2686277254, 'author': 'htanveer', 'body': 'I am facing the same problem and would like to try your solutions. Can you please provide the instructions on how to install this fix? Is it for docker or bash setup?', 'created_at': datetime.datetime(2024, 12, 16, 16, 42, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2568772472, 'issue_id': 2686277254, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 3, 7, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2573182022, 'issue_id': 2686277254, 'author': 'batonac', 'body': ""I'm experiencing this across multiple ERPNext instances. Please merge!"", 'created_at': datetime.datetime(2025, 1, 6, 14, 5, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2574783513, 'issue_id': 2686277254, 'author': 'mrPauwHaan', 'body': 'We also need this solution since our Plaid integration has been broken for half a year now without any fixes.', 'created_at': datetime.datetime(2025, 1, 7, 9, 22, 15, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-12-12 06:46:37 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

mluessi (Issue Creator) on (2024-12-12 18:49:12 UTC): Can someone review this? I think this fixes an actual bug, so it would be good if it could be included.

htanveer on (2024-12-16 16:42:14 UTC): I am facing the same problem and would like to try your solutions. Can you please provide the instructions on how to install this fix? Is it for docker or bash setup?

stale[bot] on (2025-01-03 07:02:14 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

batonac on (2025-01-06 14:05:48 UTC): I'm experiencing this across multiple ERPNext instances. Please merge!

mrPauwHaan on (2025-01-07 09:22:15 UTC): We also need this solution since our Plaid integration has been broken for half a year now without any fixes.

"
2686117183,pull_request,closed,,chore: Add translations to QI validations in Update stock_controller.py,"chore: Add translations to QI validations in Update stock_controller.py

<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",ernestoruiz89,2024-11-23 15:07:36+00:00,['ruthra-kumar'],2024-12-11 00:12:29+00:00,2024-11-26 06:06:06+00:00,https://github.com/frappe/erpnext/pull/44304,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2686047879,pull_request,closed,,chore: Add translation function _( ) on remarks in depreciation entry,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",ernestoruiz89,2024-11-23 14:31:25+00:00,[],2024-12-11 00:12:32+00:00,2024-11-26 05:24:27+00:00,https://github.com/frappe/erpnext/pull/44303,[],"[{'comment_id': 2497209440, 'issue_id': 2686047879, 'author': 'khushi8112', 'body': 'Hey @ernestoruiz89, Can you please fix the conflicts.', 'created_at': datetime.datetime(2024, 11, 25, 8, 21, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2498495815, 'issue_id': 2686047879, 'author': 'ernestoruiz89', 'body': '> Hey @ernestoruiz89, Can you please fix the conflicts.\r\n\r\nPlease check if it is ox', 'created_at': datetime.datetime(2024, 11, 25, 16, 32, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2499668498, 'issue_id': 2686047879, 'author': 'khushi8112', 'body': 'Hey @ernestoruiz89, the commit message is not semantic and breaks the check. Please follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) for consistency.', 'created_at': datetime.datetime(2024, 11, 26, 5, 5, 11, tzinfo=datetime.timezone.utc)}]","khushi8112 on (2024-11-25 08:21:46 UTC): Hey @ernestoruiz89, Can you please fix the conflicts.

ernestoruiz89 (Issue Creator) on (2024-11-25 16:32:14 UTC): Please check if it is ox

khushi8112 on (2024-11-26 05:05:11 UTC): Hey @ernestoruiz89, the commit message is not semantic and breaks the check. Please follow [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) for consistency.

"
2685760203,pull_request,closed,,fix: Minor Updates in `Payment Request` and `Payment Entry` ,"## Issue: [Support Ticket - 26199](https://support.frappe.io/helpdesk/tickets/26199)

## Changes

- [X] Fix: Dashboard to view connections
- [X] Refactor: Used `object` to get indicator color instead of `if - else`
- [X] Refactor: Move **PR** link filters to the client side so users can easily know on what basis **PRs** are filtered.
- [X] Fix: When fetching outstanding transactions in **Payment Entry**, do not fetch those **Payment Requests** which have an **Outstanding Amount** of `zero` for **PR** allocation in references.

<details>
<summary>Dashboard In Light Theme</summary>

<br>

![image](https://github.com/user-attachments/assets/e9d47d98-fff2-44a5-92dc-0a10f7bb09b9)

</details>

<details>
<summary>Dashboard In Dark Theme</summary>

<br>

![image](https://github.com/user-attachments/assets/1b21b0d0-6d2e-4229-864c-752655b1a51d)

</details>

</details>

<details>
<summary>View Filters Changes</summary>

<br>

**Before:**
![image_2024-11-27_15-51-15](https://github.com/user-attachments/assets/718f044f-2abd-4f69-89db-fd4067f00c70)


**After:**
![image_2024-11-27_15-50-32](https://github.com/user-attachments/assets/76818ce9-2965-468b-aa6b-ac5d8b122196)


</details>

<details>
<summary>View Outstanding Amount filter effect</summary>

<br>

**Filter:**
https://github.com/Abdeali099/erpnext/blob/214dfab2697ec13e70262cb4af92ca812a2dcb80/erpnext/accounts/doctype/payment_entry/payment_entry.py#L2974

**Without Filter:**

![Without_OA_Zero](https://github.com/user-attachments/assets/0b4339a5-8b8e-49c0-b73f-e72de5f10542)


**With Filter:**

![With_OA_Zero](https://github.com/user-attachments/assets/f9341a29-3518-4407-9eaf-2e37614ef199)



</details>


> [!Note]
> Backport  to `V-15` and `V-14`
",Abdeali099,2024-11-23 09:43:02+00:00,['ruthra-kumar'],2024-12-17 00:12:15+00:00,2024-11-29 09:09:49+00:00,https://github.com/frappe/erpnext/pull/44302,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2685025853,pull_request,closed,,fix: update calling signature,"fixup to https://github.com/frappe/erpnext/pull/44226
",blaggacao,2024-11-23 00:25:35+00:00,[],2024-12-08 00:13:10+00:00,2024-11-23 00:29:01+00:00,https://github.com/frappe/erpnext/pull/44299,[],[],
2683365208,pull_request,closed,,refactor: added translate function for some columns of report,"## Issue: [Support Ticket - 25936](https://support.frappe.io/helpdesk/tickets/25936)

> [!IMPORTANT]
> Backport require for both `V-15` and `V-14`",Abdeali099,2024-11-22 14:30:00+00:00,['ruthra-kumar'],2024-12-17 00:12:12+00:00,2024-11-25 04:38:34+00:00,https://github.com/frappe/erpnext/pull/44297,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2683276822,pull_request,closed,,feat: Add reconciliation feature for selecting invoices or payments calculate total amount and outstanding balance for respective party,"Add reconciliation feature for selecting invoices or payments calculate total amount and outstanding balance for respective party

Image after changes:
![image](https://github.com/user-attachments/assets/3ce65563-59af-42d0-97c3-0271db7b42b0)

Before:

https://github.com/user-attachments/assets/6dc4759c-21ef-4312-870b-f154ac4f5c8b

After:


https://github.com/user-attachments/assets/3c8eb0b6-fb1c-48b0-ac49-5a871235d7fb


",pra17shant,2024-11-22 13:49:27+00:00,['ruthra-kumar'],2024-12-17 00:12:16+00:00,2024-12-02 04:38:48+00:00,https://github.com/frappe/erpnext/pull/44296,[],"[{'comment_id': 2507607775, 'issue_id': 2683276822, 'author': 'ruthra-kumar', 'body': ""@pra17shant \r\n\r\nThere are several issues with this approach.\r\n\r\n1. Too much superfluous information - Selected Invoices, Selected Amounts, etc.\r\n2. Manually updating HTML elements is error prone. So, we generally don't prefer or recommend it.\r\n3. The term 'Total Outstanding' is always associated with outstanding for the whole party regardless of filter. There is very high chance it will be misunderstood in that regard."", 'created_at': datetime.datetime(2024, 11, 29, 11, 18, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2510563604, 'issue_id': 2683276822, 'author': 'ruthra-kumar', 'body': 'Closing this for now.', 'created_at': datetime.datetime(2024, 12, 2, 4, 38, 48, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-29 11:18:45 UTC): @pra17shant 

There are several issues with this approach.

1. Too much superfluous information - Selected Invoices, Selected Amounts, etc.
2. Manually updating HTML elements is error prone. So, we generally don't prefer or recommend it.
3. The term 'Total Outstanding' is always associated with outstanding for the whole party regardless of filter. There is very high chance it will be misunderstood in that regard.

ruthra-kumar (Assginee) on (2024-12-02 04:38:48 UTC): Closing this for now.

"
2683103528,pull_request,closed,,feat(Sales Invoice): allow linking to project without adding timesheets,"We used to always add unbilled Timesheets to a **Sales Invoice** if _Project_ is set.  This PR changes that.

From a UI perspective, this feature doesn't make sense. If the user explicitly empties the timesheets table, we shouldn't automatically add them back. This makes it impossible to create a **Sales Invoice** that is linked to the project (e.g. travel expenses) but shouldn't include any timesheets.

When creating a **Sales Invoice** via API, this can be useful. We only have to specify the project and billable timesheets are fetched automatically. This use case is covered by providing a whitelisted method: `PUT /api/v2/document/Sales%20Invoice/SINV-0001/method/add_timesheet_data`

https://github.com/frappe/erpnext/wiki/Migration-Guide-To-ERPNext-Version-16#timesheet-billing-via-api",barredterra,2024-11-22 12:52:33+00:00,[],2025-01-27 09:53:19+00:00,2025-01-27 07:50:58+00:00,https://github.com/frappe/erpnext/pull/44295,[],"[{'comment_id': 2564611289, 'issue_id': 2683103528, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 29, 4, 42, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591761209, 'issue_id': 2683103528, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2025, 1, 15, 6, 38, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615292915, 'issue_id': 2683103528, 'author': 'barredterra', 'body': 'Maybe a better approach, since it would prevent the additional API call: checkbox _Add Timesheets On Save_ in **Sales Invoice**.', 'created_at': datetime.datetime(2025, 1, 27, 9, 53, 18, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-12-29 04:42:44 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

stale[bot] on (2025-01-15 06:38:53 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

barredterra (Issue Creator) on (2025-01-27 09:53:18 UTC): Maybe a better approach, since it would prevent the additional API call: checkbox _Add Timesheets On Save_ in **Sales Invoice**.

"
2683100121,pull_request,closed,,fix: Used `Fiscal Dates` instead of year's `Start` and `End` dates,"## Issue: [Support Ticket - 25933 ](https://support.frappe.io/helpdesk/tickets/25933)

## Related PRs

- Main changes to `Version-15` (At moment it was `develop`)
   - https://github.com/frappe/erpnext/pull/36360

- Manually backport to `Version-14` for reports only
   - https://github.com/frappe/erpnext/pull/41170
   
 - Missed Report
   - https://github.com/frappe/erpnext/pull/42960",Abdeali099,2024-11-22 12:50:56+00:00,[],2024-12-17 00:12:11+00:00,2024-11-25 10:45:04+00:00,https://github.com/frappe/erpnext/pull/44294,"[('released', None)]","[{'comment_id': 2504156821, 'issue_id': 2683100121, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 36, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:36 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2683053933,pull_request,closed,,refactor: move `item_code` reactivity to server-side,"# Context
Selecting an `Item` is the most common action in Sales / Purchase cycle. Whenever an Item is selected, system fetches the basic details like rate, discounts, stock qty, warehouse and sales account as such and auto-fills these details in it's respective fields. This behavior can simply be called as _Reactivity_.

It is achieved by a JS trigger on `item_code` located in transaction.js https://github.com/frappe/erpnext/blob/5266f236b70290bfcf32e51d86fb0a9a673f9576/erpnext/public/js/controllers/transaction.js#L499-L499

But, due to a lack of UI test cases, this _Reactivity_ is prone to regression, especially the ones related to discounts and free items. Check https://github.com/frappe/erpnext/issues/42195 were the broken scenarios are individually identified.


# Long-Term Stability and Maintenance
To prevent frequent regression, we've decided to move most of the _Reactivity_ to the server-side, as it allows for server-side tests and a single source to maintain.


This PR is the first in that direction. It moves all of the UI _Reactivity_ associated with `Item` selection server-side.



# Impacts
```
Purchase Invoice      
POS Invoice           
Sales Invoice         
Purchase Order        
Request for Quotation 
Supplier Quotation    
Quotation             
Sales Order           
Purchase Receipt
```",ruthra-kumar,2024-11-22 12:28:15+00:00,['ruthra-kumar'],2024-12-25 00:11:09+00:00,2024-12-10 15:42:43+00:00,https://github.com/frappe/erpnext/pull/44293,"[('defer backport', '')]",[],
2682987736,pull_request,closed,,fix: Default year start and end dates in reports (backport #36360),<hr>This is an automatic backport of pull request #36360 done by [Mergify](https://mergify.com).,mergify[bot],2024-11-22 12:00:30+00:00,['deepeshgarg007'],2024-12-07 00:11:56+00:00,2024-11-22 12:01:12+00:00,https://github.com/frappe/erpnext/pull/44292,"[('conflicts', None)]","[{'comment_id': 2493595103, 'issue_id': 2682987736, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 4496a6760e04864f7147cf0a333744bc5eef03c2 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-36360\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 4496a6760e.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/account/account.js\n\tboth modified:   erpnext/accounts/doctype/account/account_tree.js\n\tboth modified:   erpnext/accounts/report/asset_depreciations_and_balances/asset_depreciations_and_balances.js\n\tboth modified:   erpnext/accounts/report/bank_clearance_summary/bank_clearance_summary.js\n\tboth modified:   erpnext/accounts/report/budget_variance_report/budget_variance_report.js\n\tboth modified:   erpnext/accounts/report/dimension_wise_accounts_balance_report/dimension_wise_accounts_balance_report.js\n\tboth modified:   erpnext/accounts/report/gross_profit/gross_profit.js\n\tboth modified:   erpnext/accounts/report/payment_period_based_on_invoice_date/payment_period_based_on_invoice_date.js\n\tboth modified:   erpnext/accounts/report/profitability_analysis/profitability_analysis.js\n\tboth modified:   erpnext/accounts/report/trial_balance/trial_balance.js\n\tboth modified:   erpnext/accounts/report/trial_balance_for_party/trial_balance_for_party.js\n\tboth modified:   erpnext/buying/report/procurement_tracker/procurement_tracker.js\n\tboth modified:   erpnext/buying/report/purchase_analytics/purchase_analytics.js\n\tboth modified:   erpnext/crm/report/campaign_efficiency/campaign_efficiency.js\n\tboth modified:   erpnext/crm/report/lead_owner_efficiency/lead_owner_efficiency.js\n\tboth modified:   erpnext/manufacturing/report/job_card_summary/job_card_summary.js\n\tboth modified:   erpnext/manufacturing/report/production_analytics/production_analytics.js\n\tboth modified:   erpnext/public/js/purchase_trends_filters.js\n\tboth modified:   erpnext/public/js/sales_trends_filters.js\n\tboth modified:   erpnext/public/js/utils.js\n\tboth modified:   erpnext/selling/report/customer_acquisition_and_loyalty/customer_acquisition_and_loyalty.js\n\tboth modified:   erpnext/selling/report/sales_analytics/sales_analytics.js\n\tboth modified:   erpnext/selling/report/sales_partner_target_variance_based_on_item_group/sales_partner_target_variance_based_on_item_group.js\n\tboth modified:   erpnext/selling/report/sales_person_commission_summary/sales_person_commission_summary.js\n\tboth modified:   erpnext/selling/report/sales_person_wise_transaction_summary/sales_person_wise_transaction_summary.js\n\tboth modified:   erpnext/selling/report/territory_target_variance_based_on_item_group/territory_target_variance_based_on_item_group.js\n\tboth modified:   erpnext/stock/report/batch_item_expiry_status/batch_item_expiry_status.js\n\tboth modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.js\n\tboth modified:   erpnext/stock/report/incorrect_serial_no_valuation/incorrect_serial_no_valuation.js\n\tboth modified:   erpnext/stock/report/itemwise_recommended_reorder_level/itemwise_recommended_reorder_level.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of 2341061852253c847a711631ad3c3fc5e418984a has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-36360\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 2341061852.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/account/account.js\n\tmodified:   erpnext/accounts/doctype/account/account_tree.js\n\tmodified:   erpnext/accounts/report/asset_depreciations_and_balances/asset_depreciations_and_balances.js\n\tmodified:   erpnext/accounts/report/bank_clearance_summary/bank_clearance_summary.js\n\tmodified:   erpnext/accounts/report/dimension_wise_accounts_balance_report/dimension_wise_accounts_balance_report.js\n\tmodified:   erpnext/accounts/report/gross_profit/gross_profit.js\n\tmodified:   erpnext/crm/report/campaign_efficiency/campaign_efficiency.js\n\tmodified:   erpnext/crm/report/lead_owner_efficiency/lead_owner_efficiency.js\n\tmodified:   erpnext/public/js/utils.js\n\tmodified:   erpnext/selling/report/customer_acquisition_and_loyalty/customer_acquisition_and_loyalty.js\n\tmodified:   erpnext/stock/report/batch_item_expiry_status/batch_item_expiry_status.js\n\tmodified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.js\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/report/payment_period_based_on_invoice_date/payment_period_based_on_invoice_date.js\n\tboth modified:   erpnext/accounts/report/profitability_analysis/profitability_analysis.js\n\tboth modified:   erpnext/accounts/report/trial_balance/trial_balance.js\n\tboth modified:   erpnext/accounts/report/trial_balance_for_party/trial_balance_for_party.js\n\tboth modified:   erpnext/buying/report/procurement_tracker/procurement_tracker.js\n\tboth modified:   erpnext/buying/report/purchase_analytics/purchase_analytics.js\n\tboth modified:   erpnext/manufacturing/report/job_card_summary/job_card_summary.js\n\tboth modified:   erpnext/manufacturing/report/production_analytics/production_analytics.js\n\tboth modified:   erpnext/selling/report/sales_analytics/sales_analytics.js\n\tboth modified:   erpnext/selling/report/sales_person_commission_summary/sales_person_commission_summary.js\n\tboth modified:   erpnext/selling/report/sales_person_wise_transaction_summary/sales_person_wise_transaction_summary.js\n\tboth modified:   erpnext/stock/report/incorrect_serial_no_valuation/incorrect_serial_no_valuation.js\n\tboth modified:   erpnext/stock/report/itemwise_recommended_reorder_level/itemwise_recommended_reorder_level.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 22, 12, 0, 32, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-22 12:00:32 UTC): Cherry-pick of 4496a6760e04864f7147cf0a333744bc5eef03c2 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-36360
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 4496a6760e.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/account/account.js
	both modified:   erpnext/accounts/doctype/account/account_tree.js
	both modified:   erpnext/accounts/report/asset_depreciations_and_balances/asset_depreciations_and_balances.js
	both modified:   erpnext/accounts/report/bank_clearance_summary/bank_clearance_summary.js
	both modified:   erpnext/accounts/report/budget_variance_report/budget_variance_report.js
	both modified:   erpnext/accounts/report/dimension_wise_accounts_balance_report/dimension_wise_accounts_balance_report.js
	both modified:   erpnext/accounts/report/gross_profit/gross_profit.js
	both modified:   erpnext/accounts/report/payment_period_based_on_invoice_date/payment_period_based_on_invoice_date.js
	both modified:   erpnext/accounts/report/profitability_analysis/profitability_analysis.js
	both modified:   erpnext/accounts/report/trial_balance/trial_balance.js
	both modified:   erpnext/accounts/report/trial_balance_for_party/trial_balance_for_party.js
	both modified:   erpnext/buying/report/procurement_tracker/procurement_tracker.js
	both modified:   erpnext/buying/report/purchase_analytics/purchase_analytics.js
	both modified:   erpnext/crm/report/campaign_efficiency/campaign_efficiency.js
	both modified:   erpnext/crm/report/lead_owner_efficiency/lead_owner_efficiency.js
	both modified:   erpnext/manufacturing/report/job_card_summary/job_card_summary.js
	both modified:   erpnext/manufacturing/report/production_analytics/production_analytics.js
	both modified:   erpnext/public/js/purchase_trends_filters.js
	both modified:   erpnext/public/js/sales_trends_filters.js
	both modified:   erpnext/public/js/utils.js
	both modified:   erpnext/selling/report/customer_acquisition_and_loyalty/customer_acquisition_and_loyalty.js
	both modified:   erpnext/selling/report/sales_analytics/sales_analytics.js
	both modified:   erpnext/selling/report/sales_partner_target_variance_based_on_item_group/sales_partner_target_variance_based_on_item_group.js
	both modified:   erpnext/selling/report/sales_person_commission_summary/sales_person_commission_summary.js
	both modified:   erpnext/selling/report/sales_person_wise_transaction_summary/sales_person_wise_transaction_summary.js
	both modified:   erpnext/selling/report/territory_target_variance_based_on_item_group/territory_target_variance_based_on_item_group.js
	both modified:   erpnext/stock/report/batch_item_expiry_status/batch_item_expiry_status.js
	both modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.js
	both modified:   erpnext/stock/report/incorrect_serial_no_valuation/incorrect_serial_no_valuation.js
	both modified:   erpnext/stock/report/itemwise_recommended_reorder_level/itemwise_recommended_reorder_level.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of 2341061852253c847a711631ad3c3fc5e418984a has failed:
```
On branch mergify/bp/version-14-hotfix/pr-36360
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 2341061852.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/account/account.js
	modified:   erpnext/accounts/doctype/account/account_tree.js
	modified:   erpnext/accounts/report/asset_depreciations_and_balances/asset_depreciations_and_balances.js
	modified:   erpnext/accounts/report/bank_clearance_summary/bank_clearance_summary.js
	modified:   erpnext/accounts/report/dimension_wise_accounts_balance_report/dimension_wise_accounts_balance_report.js
	modified:   erpnext/accounts/report/gross_profit/gross_profit.js
	modified:   erpnext/crm/report/campaign_efficiency/campaign_efficiency.js
	modified:   erpnext/crm/report/lead_owner_efficiency/lead_owner_efficiency.js
	modified:   erpnext/public/js/utils.js
	modified:   erpnext/selling/report/customer_acquisition_and_loyalty/customer_acquisition_and_loyalty.js
	modified:   erpnext/stock/report/batch_item_expiry_status/batch_item_expiry_status.js
	modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.js

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/report/payment_period_based_on_invoice_date/payment_period_based_on_invoice_date.js
	both modified:   erpnext/accounts/report/profitability_analysis/profitability_analysis.js
	both modified:   erpnext/accounts/report/trial_balance/trial_balance.js
	both modified:   erpnext/accounts/report/trial_balance_for_party/trial_balance_for_party.js
	both modified:   erpnext/buying/report/procurement_tracker/procurement_tracker.js
	both modified:   erpnext/buying/report/purchase_analytics/purchase_analytics.js
	both modified:   erpnext/manufacturing/report/job_card_summary/job_card_summary.js
	both modified:   erpnext/manufacturing/report/production_analytics/production_analytics.js
	both modified:   erpnext/selling/report/sales_analytics/sales_analytics.js
	both modified:   erpnext/selling/report/sales_person_commission_summary/sales_person_commission_summary.js
	both modified:   erpnext/selling/report/sales_person_wise_transaction_summary/sales_person_wise_transaction_summary.js
	both modified:   erpnext/stock/report/incorrect_serial_no_valuation/incorrect_serial_no_valuation.js
	both modified:   erpnext/stock/report/itemwise_recommended_reorder_level/itemwise_recommended_reorder_level.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2682817943,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-22 11:00:32+00:00,['ruthra-kumar'],2024-12-10 00:12:35+00:00,2024-11-25 04:53:20+00:00,https://github.com/frappe/erpnext/pull/44290,"[('translation', None)]",[],
2682809150,pull_request,closed,,fix: patch (backport #44191) (backport #44288),"Patch failing while migrating from v13 to v14

```
 File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/patches/v13_0/item_reposting_for_incorrect_sl_and_gl.py"", line 61, in execute
    update_entries_after(
      doctypes_to_reload = [('setup', 'company'), ('stock', 'repost_item_valuation'), ('stock', 'stock_entry_detail'), ('stock', 'purchase_receipt_item'), ('stock', 'delivery_note_item'), ('stock', 'packed_item'), ('accounts', 'sales_invoice_item'), ('accounts', 'purchase_invoice_item'), ('buying', 'purchase_receipt_item_supplied'), ('subcontracting', 'subcontracting_receipt_item'), ('subcontracting', 'subcontracting_receipt_supplied_item')]
      module = 'subcontracting'
      doctype = 'subcontracting_receipt_supplied_item'
      reposting_project_deployed_on = datetime.datetime(2024, 11, 12, 9, 24, 36)
      posting_date = datetime.date(2024, 11, 12)
      posting_time = datetime.time(9, 24, 36)
      company_list = ['Arjuna']
      data = [{'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53223', 'item_code': 'BUMBU MARINASI GEPREKIN', 'warehouse': 'Bahan Penolong - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02525', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19625), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53221', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00618', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19797), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53228', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02527', 'pos...
      total_sle = 60
      i = 0
      d = {'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 359, in __init__
    self.build()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      args = {'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'sle_id': 'MAT-SLE-2024-53213'}
      allow_zero_rate = False
      allow_negative_stock = True
      via_landed_cost_voucher = False
      verbose = 1
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 407, in build
    self.process_sle_against_current_timestamp()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      future_sle_exists = <function future_sle_exists at 0x7fc6e00bbbe0>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 428, in process_sle_against_current_timestamp
    sl_entries = self.get_sle_against_current_voucher()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 435, in get_sle_against_current_voucher
    return frappe.db.sql(
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 244, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fc6e1538070>
      query = 'select\n\t\t\t\t*, posting_datetime as ""timestamp""\n\t\t\tfrom\n\t\t\t\t`tabStock Ledger Entry`\n\t\t\twhere\n\t\t\t\titem_code = %(item_code)s\n\t\t\t\tand warehouse = %(warehouse)s\n\t\t\t\tand is_cancelled = 0\n\t\t\t\tand (\n\t\t\t\t\tposting_datetime = %(posting_datetime)s\n\t\t\t\t)\n\t\t\t\tand creation = %(creation)s\n\t\t\torder by\n\t\t\t\tcreation ASC\n\t\t\tfor update'
 
      conn = <pymysql.connections.Connection object at 0x7fc6e08df040>
builtins.KeyError: 'creation'
```<hr>This is an automatic backport of pull request #44191 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #44288 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:56:39+00:00,[],2024-12-07 00:11:57+00:00,2024-11-22 11:26:24+00:00,https://github.com/frappe/erpnext/pull/44289,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2493536337, 'issue_id': 2682809150, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.2 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.2)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 22, 11, 28, 15, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-22 11:28:15 UTC): :tada: This PR is included in version 14.77.2 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.2)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2682798053,pull_request,closed,,fix: patch (backport #44191),"Patch failing while migrating from v13 to v14

```
 File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/patches/v13_0/item_reposting_for_incorrect_sl_and_gl.py"", line 61, in execute
    update_entries_after(
      doctypes_to_reload = [('setup', 'company'), ('stock', 'repost_item_valuation'), ('stock', 'stock_entry_detail'), ('stock', 'purchase_receipt_item'), ('stock', 'delivery_note_item'), ('stock', 'packed_item'), ('accounts', 'sales_invoice_item'), ('accounts', 'purchase_invoice_item'), ('buying', 'purchase_receipt_item_supplied'), ('subcontracting', 'subcontracting_receipt_item'), ('subcontracting', 'subcontracting_receipt_supplied_item')]
      module = 'subcontracting'
      doctype = 'subcontracting_receipt_supplied_item'
      reposting_project_deployed_on = datetime.datetime(2024, 11, 12, 9, 24, 36)
      posting_date = datetime.date(2024, 11, 12)
      posting_time = datetime.time(9, 24, 36)
      company_list = ['Arjuna']
      data = [{'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53223', 'item_code': 'BUMBU MARINASI GEPREKIN', 'warehouse': 'Bahan Penolong - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02525', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19625), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53221', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00618', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19797), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53228', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02527', 'pos...
      total_sle = 60
      i = 0
      d = {'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 359, in __init__
    self.build()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      args = {'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'sle_id': 'MAT-SLE-2024-53213'}
      allow_zero_rate = False
      allow_negative_stock = True
      via_landed_cost_voucher = False
      verbose = 1
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 407, in build
    self.process_sle_against_current_timestamp()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      future_sle_exists = <function future_sle_exists at 0x7fc6e00bbbe0>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 428, in process_sle_against_current_timestamp
    sl_entries = self.get_sle_against_current_voucher()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 435, in get_sle_against_current_voucher
    return frappe.db.sql(
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 244, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fc6e1538070>
      query = 'select\n\t\t\t\t*, posting_datetime as ""timestamp""\n\t\t\tfrom\n\t\t\t\t`tabStock Ledger Entry`\n\t\t\twhere\n\t\t\t\titem_code = %(item_code)s\n\t\t\t\tand warehouse = %(warehouse)s\n\t\t\t\tand is_cancelled = 0\n\t\t\t\tand (\n\t\t\t\t\tposting_datetime = %(posting_datetime)s\n\t\t\t\t)\n\t\t\t\tand creation = %(creation)s\n\t\t\torder by\n\t\t\t\tcreation ASC\n\t\t\tfor update'
 
      conn = <pymysql.connections.Connection object at 0x7fc6e08df040>
builtins.KeyError: 'creation'
```<hr>This is an automatic backport of pull request #44191 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:51:46+00:00,['rohitwaghchaure'],2024-12-12 00:12:24+00:00,2024-11-22 10:55:04+00:00,https://github.com/frappe/erpnext/pull/44288,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2493475635, 'issue_id': 2682798053, 'author': 'rohitwaghchaure', 'body': '@mergifyio backport version-14', 'created_at': datetime.datetime(2024, 11, 22, 10, 55, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2493475954, 'issue_id': 2682798053, 'author': 'mergify[bot]', 'body': '> backport version-14\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#44289 fix: patch (backport #44191) (backport #44288)](https://github.com/frappe/erpnext/pull/44289) has been created for branch `version-14`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-14"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 11, 22, 10, 55, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504157218, 'issue_id': 2682798053, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 45, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-11-22 10:55:18 UTC): @mergifyio backport version-14

mergify[bot] (Issue Creator) on (2024-11-22 10:55:28 UTC): #### ✅ Backports have been created

<details>

* [#44289 fix: patch (backport #44191) (backport #44288)](https://github.com/frappe/erpnext/pull/44289) has been created for branch `version-14`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-14"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

frappe-pr-bot on (2024-11-27 15:25:45 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2682725106,pull_request,closed,,fix: Get submitted documents in validate_for_closed_fiscal_year (backport #44246),"Issue:

While updating a submitted ""Purchase invoice"" that is between the fiscal year of a cancelled ""Period Closing Voucher"" it was throwing the following popup:

![image](https://github.com/user-attachments/assets/008c894c-b9af-4a4e-ade3-aa1f70eb756b)

![image](https://github.com/user-attachments/assets/0673bcdc-7297-4a46-a88c-6795be31f60e)


Backport needed: Version 15<hr>This is an automatic backport of pull request #44246 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:23:13+00:00,[],2024-12-07 00:12:01+00:00,2024-11-22 10:45:48+00:00,https://github.com/frappe/erpnext/pull/44287,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2682725016,pull_request,closed,,fix: Get submitted documents in validate_for_closed_fiscal_year (backport #44246),"Issue:

While updating a submitted ""Purchase invoice"" that is between the fiscal year of a cancelled ""Period Closing Voucher"" it was throwing the following popup:

![image](https://github.com/user-attachments/assets/008c894c-b9af-4a4e-ade3-aa1f70eb756b)

![image](https://github.com/user-attachments/assets/0673bcdc-7297-4a46-a88c-6795be31f60e)


Backport needed: Version 15<hr>This is an automatic backport of pull request #44246 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:23:11+00:00,[],2024-12-12 00:12:25+00:00,2024-11-22 10:55:39+00:00,https://github.com/frappe/erpnext/pull/44286,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2493418338, 'issue_id': 2682725016, 'author': 'mergify[bot]', 'body': 'Cherry-pick of c607e5f940d7032cc7c11d870d3bf99b30bcef4c has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44246\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit c607e5f940.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/repost_accounting_ledger/repost_accounting_ledger.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 22, 10, 23, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504157093, 'issue_id': 2682725016, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 42, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-22 10:23:12 UTC): Cherry-pick of c607e5f940d7032cc7c11d870d3bf99b30bcef4c has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44246
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit c607e5f940.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/repost_accounting_ledger/repost_accounting_ledger.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-11-27 15:25:42 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2682720768,pull_request,closed,,fix: make free qty round on large transaction qty (backport #44266),"**Issue:**
Promotional Scheme free qty roundoff not working properly on larger transaction qty
**ref:** [25810](https://support.frappe.io/helpdesk/tickets/25810)

**Promotional Scheme:**
![Screenshot from 2024-11-21 18-46-03](https://github.com/user-attachments/assets/4e82a28b-90fc-4ba6-8e1d-ead89a94aef6)

**Before:**
![image](https://github.com/user-attachments/assets/39134c2a-4a8c-4d0c-96f9-3d6be008ab92)

**After:**
![image](https://github.com/user-attachments/assets/55e66cbc-a924-4ed5-a73b-4ca3fc6f1e3f)

**Backport needed: v14 & v15**<hr>This is an automatic backport of pull request #44266 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:20:59+00:00,[],2024-12-07 00:12:02+00:00,2024-11-22 10:45:35+00:00,https://github.com/frappe/erpnext/pull/44285,[],[],
2682720658,pull_request,closed,,fix: make free qty round on large transaction qty (backport #44266),"**Issue:**
Promotional Scheme free qty roundoff not working properly on larger transaction qty
**ref:** [25810](https://support.frappe.io/helpdesk/tickets/25810)

**Promotional Scheme:**
![Screenshot from 2024-11-21 18-46-03](https://github.com/user-attachments/assets/4e82a28b-90fc-4ba6-8e1d-ead89a94aef6)

**Before:**
![image](https://github.com/user-attachments/assets/39134c2a-4a8c-4d0c-96f9-3d6be008ab92)

**After:**
![image](https://github.com/user-attachments/assets/55e66cbc-a924-4ed5-a73b-4ca3fc6f1e3f)

**Backport needed: v14 & v15**<hr>This is an automatic backport of pull request #44266 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:20:55+00:00,[],2024-12-12 00:12:23+00:00,2024-11-22 10:45:19+00:00,https://github.com/frappe/erpnext/pull/44284,"[('released', None)]","[{'comment_id': 2504157317, 'issue_id': 2682720658, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 48, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:48 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2682710630,pull_request,closed,,fix: filter with item group only if it is mentioned in pos profile (backport #44277),"**Issue:**
The barcode filter is not working when the item group is not mentioned in the POS Profile
**ref:** [25847](https://support.frappe.io/helpdesk/tickets/25847)

**Before:**
![image](https://github.com/user-attachments/assets/05c03f8d-298d-4d6a-a020-e6686981cbf8)


**After:**
![image](https://github.com/user-attachments/assets/42481e42-d74e-4976-b535-e37ef21da745)


Backport Needed: v15<hr>This is an automatic backport of pull request #44277 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 10:15:52+00:00,[],2024-12-07 00:12:03+00:00,2024-11-22 10:45:08+00:00,https://github.com/frappe/erpnext/pull/44283,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2682445735,pull_request,closed,,Update grand total based on disable rounded total checkbox,"**Issue:**
Status becomes overdue due to outstanding is not evaluated properly 
**ref:** [25725](https://support.frappe.io/helpdesk/tickets/25725)
**Before:**

[Screencast from 22-11-24 02:13:55 PM IST.webm](https://github.com/user-attachments/assets/95326868-09ab-4ace-a288-9e370366434f)

**After:**

[Screencast from 22-11-24 02:15:16 PM IST.webm](https://github.com/user-attachments/assets/c00c1232-cc42-4f3d-b244-98d805be66ee)

Backport Needed: v15",DHINESH00,2024-11-22 08:50:23+00:00,['ruthra-kumar'],2024-12-11 00:12:30+00:00,2024-11-26 05:59:59+00:00,https://github.com/frappe/erpnext/pull/44282,"[('accounts', '')]","[{'comment_id': 2499686481, 'issue_id': 2682445735, 'author': 'DHINESH00', 'body': '**Making a revised PR**\r\nhttps://github.com/frappe/erpnext/pull/44334', 'created_at': datetime.datetime(2024, 11, 26, 5, 22, 19, tzinfo=datetime.timezone.utc)}]","DHINESH00 (Issue Creator) on (2024-11-26 05:22:19 UTC): **Making a revised PR**
https://github.com/frappe/erpnext/pull/44334

"
2682017025,pull_request,closed,,fix: patch (backport #44191) (backport #44275),"Patch failing while migrating from v13 to v14

```
 File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/patches/v13_0/item_reposting_for_incorrect_sl_and_gl.py"", line 61, in execute
    update_entries_after(
      doctypes_to_reload = [('setup', 'company'), ('stock', 'repost_item_valuation'), ('stock', 'stock_entry_detail'), ('stock', 'purchase_receipt_item'), ('stock', 'delivery_note_item'), ('stock', 'packed_item'), ('accounts', 'sales_invoice_item'), ('accounts', 'purchase_invoice_item'), ('buying', 'purchase_receipt_item_supplied'), ('subcontracting', 'subcontracting_receipt_item'), ('subcontracting', 'subcontracting_receipt_supplied_item')]
      module = 'subcontracting'
      doctype = 'subcontracting_receipt_supplied_item'
      reposting_project_deployed_on = datetime.datetime(2024, 11, 12, 9, 24, 36)
      posting_date = datetime.date(2024, 11, 12)
      posting_time = datetime.time(9, 24, 36)
      company_list = ['Arjuna']
      data = [{'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53223', 'item_code': 'BUMBU MARINASI GEPREKIN', 'warehouse': 'Bahan Penolong - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02525', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19625), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53221', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00618', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19797), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53228', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02527', 'pos...
      total_sle = 60
      i = 0
      d = {'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 359, in __init__
    self.build()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      args = {'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'sle_id': 'MAT-SLE-2024-53213'}
      allow_zero_rate = False
      allow_negative_stock = True
      via_landed_cost_voucher = False
      verbose = 1
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 407, in build
    self.process_sle_against_current_timestamp()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      future_sle_exists = <function future_sle_exists at 0x7fc6e00bbbe0>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 428, in process_sle_against_current_timestamp
    sl_entries = self.get_sle_against_current_voucher()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 435, in get_sle_against_current_voucher
    return frappe.db.sql(
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 244, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fc6e1538070>
      query = 'select\n\t\t\t\t*, posting_datetime as ""timestamp""\n\t\t\tfrom\n\t\t\t\t`tabStock Ledger Entry`\n\t\t\twhere\n\t\t\t\titem_code = %(item_code)s\n\t\t\t\tand warehouse = %(warehouse)s\n\t\t\t\tand is_cancelled = 0\n\t\t\t\tand (\n\t\t\t\t\tposting_datetime = %(posting_datetime)s\n\t\t\t\t)\n\t\t\t\tand creation = %(creation)s\n\t\t\torder by\n\t\t\t\tcreation ASC\n\t\t\tfor update'
 
      conn = <pymysql.connections.Connection object at 0x7fc6e08df040>
builtins.KeyError: 'creation'
```<hr>This is an automatic backport of pull request #44191 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #44275 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 06:48:02+00:00,[],2024-12-07 00:12:12+00:00,2024-11-22 09:18:13+00:00,https://github.com/frappe/erpnext/pull/44280,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2681982411,pull_request,closed,,fix: toggle debit credit amounts for transaction currency too; minor refactor (backport #44263),"Fixes: https://github.com/frappe/erpnext/pull/44197#issuecomment-2490734217

### Issue

Amount in transaction currency is -ve and on credit side.

![image](https://github.com/user-attachments/assets/e178d6a0-0a95-487c-9009-ebdce21e098d)

- Ensures amount is transaction currency is updated consistently like amount in account currency
- Refactor, cleaner code with reduced duplication<hr>This is an automatic backport of pull request #44263 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 06:39:58+00:00,['vorasmit'],2024-12-07 00:11:55+00:00,2024-11-22 13:08:26+00:00,https://github.com/frappe/erpnext/pull/44279,"[('accounts', '')]",[],
2681982212,pull_request,closed,,fix: toggle debit credit amounts for transaction currency too; minor refactor (backport #44263),"Fixes: https://github.com/frappe/erpnext/pull/44197#issuecomment-2490734217

### Issue

Amount in transaction currency is -ve and on credit side.

![image](https://github.com/user-attachments/assets/e178d6a0-0a95-487c-9009-ebdce21e098d)

- Ensures amount is transaction currency is updated consistently like amount in account currency
- Refactor, cleaner code with reduced duplication<hr>This is an automatic backport of pull request #44263 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 06:39:50+00:00,['vorasmit'],2024-12-10 00:12:27+00:00,2024-11-25 11:04:40+00:00,https://github.com/frappe/erpnext/pull/44278,"[('accounts', '')]","[{'comment_id': 2492976314, 'issue_id': 2681982212, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 8e759c32c431834f8e77c1665cf8c36ba881582b has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44263\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 8e759c32c4.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/general_ledger.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of a10e175bc926219a6d534eb5a1e006e66bf7b8fd has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44263\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit a10e175bc9.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/journal_entry/test_journal_entry.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 11, 22, 6, 39, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2497697978, 'issue_id': 2681982212, 'author': 'vorasmit', 'body': ""Transaction currency doesn't exist in v14 and hence this PR may not be needed."", 'created_at': datetime.datetime(2024, 11, 25, 11, 4, 40, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-11-22 06:39:52 UTC): Cherry-pick of 8e759c32c431834f8e77c1665cf8c36ba881582b has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44263
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 8e759c32c4.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/general_ledger.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of a10e175bc926219a6d534eb5a1e006e66bf7b8fd has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44263
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit a10e175bc9.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/journal_entry/test_journal_entry.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

vorasmit (Assginee) on (2024-11-25 11:04:40 UTC): Transaction currency doesn't exist in v14 and hence this PR may not be needed.

"
2681975015,pull_request,closed,,fix: filter with item group only if it is mentioned in pos profile,"**Issue:**
The barcode filter is not working when the item group is not mentioned in the POS Profile
**ref:** [25847](https://support.frappe.io/helpdesk/tickets/25847)

**Before:**
![image](https://github.com/user-attachments/assets/05c03f8d-298d-4d6a-a020-e6686981cbf8)


**After:**
![image](https://github.com/user-attachments/assets/42481e42-d74e-4976-b535-e37ef21da745)


Backport Needed: v15",venkat102,2024-11-22 06:34:29+00:00,['ruthra-kumar'],2024-12-07 00:12:06+00:00,2024-11-22 10:14:44+00:00,https://github.com/frappe/erpnext/pull/44277,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2681959820,pull_request,closed,,fix: patch (backport #44191),"Patch failing while migrating from v13 to v14

```
 File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/patches/v13_0/item_reposting_for_incorrect_sl_and_gl.py"", line 61, in execute
    update_entries_after(
      doctypes_to_reload = [('setup', 'company'), ('stock', 'repost_item_valuation'), ('stock', 'stock_entry_detail'), ('stock', 'purchase_receipt_item'), ('stock', 'delivery_note_item'), ('stock', 'packed_item'), ('accounts', 'sales_invoice_item'), ('accounts', 'purchase_invoice_item'), ('buying', 'purchase_receipt_item_supplied'), ('subcontracting', 'subcontracting_receipt_item'), ('subcontracting', 'subcontracting_receipt_supplied_item')]
      module = 'subcontracting'
      doctype = 'subcontracting_receipt_supplied_item'
      reposting_project_deployed_on = datetime.datetime(2024, 11, 12, 9, 24, 36)
      posting_date = datetime.date(2024, 11, 12)
      posting_time = datetime.time(9, 24, 36)
      company_list = ['Arjuna']
      data = [{'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53223', 'item_code': 'BUMBU MARINASI GEPREKIN', 'warehouse': 'Bahan Penolong - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02525', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19625), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53221', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00618', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19797), 'company': 'Arjuna'}, {'name': 'MAT-SLE-2024-53228', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Stock Entry', 'voucher_no': 'MAT-STE-2024-02527', 'pos...
      total_sle = 60
      i = 0
      d = {'name': 'MAT-SLE-2024-53213', 'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'company': 'Arjuna'}
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 359, in __init__
    self.build()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      args = {'item_code': 'Bird', 'warehouse': 'Bahan Baku - ARJ', 'posting_date': datetime.date(2024, 11, 11), 'posting_time': datetime.timedelta(seconds=19246), 'voucher_type': 'Purchase Receipt', 'voucher_no': 'MAT-PRE-2024-00613', 'sle_id': 'MAT-SLE-2024-53213'}
      allow_zero_rate = False
      allow_negative_stock = True
      via_landed_cost_voucher = False
      verbose = 1
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 407, in build
    self.process_sle_against_current_timestamp()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
      future_sle_exists = <function future_sle_exists at 0x7fc6e00bbbe0>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 428, in process_sle_against_current_timestamp
    sl_entries = self.get_sle_against_current_voucher()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 435, in get_sle_against_current_voucher
    return frappe.db.sql(
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc6e0422890>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 244, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fc6e1538070>
      query = 'select\n\t\t\t\t*, posting_datetime as ""timestamp""\n\t\t\tfrom\n\t\t\t\t`tabStock Ledger Entry`\n\t\t\twhere\n\t\t\t\titem_code = %(item_code)s\n\t\t\t\tand warehouse = %(warehouse)s\n\t\t\t\tand is_cancelled = 0\n\t\t\t\tand (\n\t\t\t\t\tposting_datetime = %(posting_datetime)s\n\t\t\t\t)\n\t\t\t\tand creation = %(creation)s\n\t\t\torder by\n\t\t\t\tcreation ASC\n\t\t\tfor update'
 
      conn = <pymysql.connections.Connection object at 0x7fc6e08df040>
builtins.KeyError: 'creation'
```<hr>This is an automatic backport of pull request #44191 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 06:23:25+00:00,['rohitwaghchaure'],2024-12-07 00:12:14+00:00,2024-11-22 06:47:11+00:00,https://github.com/frappe/erpnext/pull/44275,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2492959215, 'issue_id': 2681959820, 'author': 'rohitwaghchaure', 'body': '@mergifyio backport version-15', 'created_at': datetime.datetime(2024, 11, 22, 6, 24, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2492959448, 'issue_id': 2681959820, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#44280 fix: patch (backport #44191) (backport #44275)](https://github.com/frappe/erpnext/pull/44280) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 11, 22, 6, 24, 42, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-11-22 06:24:29 UTC): @mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-11-22 06:24:42 UTC): #### ✅ Backports have been created

<details>

* [#44280 fix: patch (backport #44191) (backport #44275)](https://github.com/frappe/erpnext/pull/44280) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2681955324,pull_request,closed,,fix: set price_list_currency only if it exists,"Issue:
After a Request For Quotation record is saved, if we try to change quantity field value it shows field price_list_currency not found.

ref: [25739](https://support.frappe.io/helpdesk/tickets/25739)

Before:

[Screencast from 21-11-24 07:15:10 PM IST.webm](https://github.com/user-attachments/assets/1e39606a-0359-4015-a44c-215c64cdc1ef)

After:

[Screencast from 21-11-24 07:20:25 PM IST.webm](https://github.com/user-attachments/assets/a1258d42-9ede-46f7-a24f-4359c6c6ed87)

Back port needed for v15.
",Sugesh393,2024-11-22 06:19:48+00:00,['ruthra-kumar'],2024-12-10 00:12:32+00:00,2024-11-25 07:08:31+00:00,https://github.com/frappe/erpnext/pull/44274,"[('backport version-15-hotfix', '')]",[],
2681874184,pull_request,closed,,fix: include current invoice amount when tax_on_excess_amount is checked (backport #44194),"**Issue:**
TDS is not calculated when tax_on_excess_amount is ticked in the Tax Withholding Category

**ref:** [25643](https://support.frappe.io/helpdesk/tickets/25643)

**Before:**
https://github.com/user-attachments/assets/0c090c2f-9daf-48c4-b796-91216e8737ad

**After:**
https://github.com/user-attachments/assets/d8d30bda-4bc9-44e7-9554-51a279210552

**Backport needed:** v14 & v15
<hr>This is an automatic backport of pull request #44194 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 05:38:27+00:00,[],2024-12-07 00:12:17+00:00,2024-11-22 05:59:29+00:00,https://github.com/frappe/erpnext/pull/44273,[],[],
2681865504,pull_request,closed,,fix: include current invoice amount when tax_on_excess_amount is checked (backport #44194),"**Issue:**
TDS is not calculated when tax_on_excess_amount is ticked in the Tax Withholding Category

**ref:** [25643](https://support.frappe.io/helpdesk/tickets/25643)

**Before:**
https://github.com/user-attachments/assets/0c090c2f-9daf-48c4-b796-91216e8737ad

**After:**
https://github.com/user-attachments/assets/d8d30bda-4bc9-44e7-9554-51a279210552

**Backport needed:** v14 & v15
<hr>This is an automatic backport of pull request #44194 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 05:37:52+00:00,[],2024-12-07 00:12:18+00:00,2024-11-22 05:55:35+00:00,https://github.com/frappe/erpnext/pull/44272,[],[],
2681860467,pull_request,closed,,fix: include current invoice amount when tax_on_excess_amount is checked (backport #44194),"**Issue:**
TDS is not calculated when tax_on_excess_amount is ticked in the Tax Withholding Category

**ref:** [25643](https://support.frappe.io/helpdesk/tickets/25643)

**Before:**
https://github.com/user-attachments/assets/0c090c2f-9daf-48c4-b796-91216e8737ad

**After:**
https://github.com/user-attachments/assets/d8d30bda-4bc9-44e7-9554-51a279210552

**Backport needed:** v14 & v15
<hr>This is an automatic backport of pull request #44194 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 05:37:28+00:00,[],2024-12-12 00:12:22+00:00,2024-11-22 05:59:21+00:00,https://github.com/frappe/erpnext/pull/44271,"[('released', None)]","[{'comment_id': 2504157447, 'issue_id': 2681860467, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 27, 15, 25, 51, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-27 15:25:51 UTC): :tada: This PR is included in version 14.77.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2681858243,pull_request,closed,,fix: include current invoice amount when tax_on_excess_amount is checked (backport #44194),"**Issue:**
TDS is not calculated when tax_on_excess_amount is ticked in the Tax Withholding Category

**ref:** [25643](https://support.frappe.io/helpdesk/tickets/25643)

**Before:**
https://github.com/user-attachments/assets/0c090c2f-9daf-48c4-b796-91216e8737ad

**After:**
https://github.com/user-attachments/assets/d8d30bda-4bc9-44e7-9554-51a279210552

**Backport needed:** v14 & v15
<hr>This is an automatic backport of pull request #44194 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-22 05:37:13+00:00,[],2024-12-07 00:12:16+00:00,2024-11-22 05:59:51+00:00,https://github.com/frappe/erpnext/pull/44270,"[('released', None)]","[{'comment_id': 2492934312, 'issue_id': 2681858243, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.77.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 11, 22, 6, 1, 13, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-11-22 06:01:13 UTC): :tada: This PR is included in version 14.77.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.77.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2679846894,pull_request,closed,,fix: create repost payment ledger entries from the report for differerences,"### Issue

- Repost entries created for all vouchers could be less performant and unnecessary
- End user may be less confident / unaware of how to use the repost feature

### Fix

Create repost entries from Report General and Payment Ledger Comparison only for the entries with differences

### Video


https://github.com/user-attachments/assets/a7aacff6-132d-472d-91f1-2016cfa3fb12


",vorasmit,2024-11-21 15:08:16+00:00,['ruthra-kumar'],2024-12-11 00:12:34+00:00,2024-11-26 05:13:26+00:00,https://github.com/frappe/erpnext/pull/44268,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2492868575, 'issue_id': 2679846894, 'author': 'ruthra-kumar', 'body': 'Nice work @vorasmit \r\n\r\nI see you are trying to liven up contributions with soundtracks 😄', 'created_at': datetime.datetime(2024, 11, 22, 4, 48, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2493453636, 'issue_id': 2679846894, 'author': 'ruthra-kumar', 'body': '@vorasmit \r\n\r\n> End user may be less confident / unaware of how to use the repost feature\r\n\r\nOn this point, I do have some context to share. I developed this report primarily as a debugging tool. This in-combination with the Reposting functionality serves as a very effective way to handle ledger discrepancies.\r\n\r\nHaving said that, I think we should discourage end users from using this regularly. They might end up developing a habit of patching data for the moment, rather than identifying the root cause.', 'created_at': datetime.datetime(2024, 11, 22, 10, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2493603195, 'issue_id': 2679846894, 'author': 'vorasmit', 'body': 'I agree. Fixing core issues is more important that giving a better UX. Your call. We can close this for now, and re-open this when we fell more of such issues are because of customisations and not core bugs.', 'created_at': datetime.datetime(2024, 11, 22, 12, 4, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2499677145, 'issue_id': 2679846894, 'author': 'ruthra-kumar', 'body': 'Closing this for now.', 'created_at': datetime.datetime(2024, 11, 26, 5, 13, 27, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-22 04:48:37 UTC): Nice work @vorasmit 

I see you are trying to liven up contributions with soundtracks 😄

ruthra-kumar (Assginee) on (2024-11-22 10:43:00 UTC): @vorasmit 


On this point, I do have some context to share. I developed this report primarily as a debugging tool. This in-combination with the Reposting functionality serves as a very effective way to handle ledger discrepancies.

Having said that, I think we should discourage end users from using this regularly. They might end up developing a habit of patching data for the moment, rather than identifying the root cause.

vorasmit (Issue Creator) on (2024-11-22 12:04:40 UTC): I agree. Fixing core issues is more important that giving a better UX. Your call. We can close this for now, and re-open this when we fell more of such issues are because of customisations and not core bugs.

ruthra-kumar (Assginee) on (2024-11-26 05:13:27 UTC): Closing this for now.

"
2679681802,pull_request,closed,,Pra17shant,"feat: Add reconciliation feature for selecting invoices or payments, …
Fix: Currency Precision Issue in Journal Entry giving

https://discuss.frappe.io/t/multicurrency-journal-entry-debit-must-equal-credit/49301",pra17shant,2024-11-21 14:32:18+00:00,[],2024-12-07 00:11:59+00:00,2024-11-22 10:57:32+00:00,https://github.com/frappe/erpnext/pull/44267,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2679475459,pull_request,closed,,fix: make free qty round on large transaction qty,"**Issue:**
Promotional Scheme free qty roundoff not working properly on larger transaction qty
**ref:** [25810](https://support.frappe.io/helpdesk/tickets/25810)

**Promotional Scheme:**
![Screenshot from 2024-11-21 18-46-03](https://github.com/user-attachments/assets/4e82a28b-90fc-4ba6-8e1d-ead89a94aef6)

**Before:**
![image](https://github.com/user-attachments/assets/39134c2a-4a8c-4d0c-96f9-3d6be008ab92)

**After:**
![image](https://github.com/user-attachments/assets/55e66cbc-a924-4ed5-a73b-4ca3fc6f1e3f)

**Backport needed: v14 & v15**",venkat102,2024-11-21 13:25:33+00:00,['ruthra-kumar'],2024-12-07 00:12:05+00:00,2024-11-22 10:20:10+00:00,https://github.com/frappe/erpnext/pull/44266,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2679054155,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-11-21 11:04:14+00:00,['ruthra-kumar'],2024-12-07 00:12:07+00:00,2024-11-22 10:13:54+00:00,https://github.com/frappe/erpnext/pull/44264,"[('translation', None)]",[],
2679042958,pull_request,closed,,fix: toggle debit credit amounts for transaction currency too; minor refactor,"Fixes: https://github.com/frappe/erpnext/pull/44197#issuecomment-2490734217

### Issue

Amount in transaction currency is -ve and on credit side.

![image](https://github.com/user-attachments/assets/e178d6a0-0a95-487c-9009-ebdce21e098d)

- Ensures amount is transaction currency is updated consistently like amount in account currency
- Refactor, cleaner code with reduced duplication",vorasmit,2024-11-21 10:59:08+00:00,[],2024-12-07 00:12:15+00:00,2024-11-22 06:38:59+00:00,https://github.com/frappe/erpnext/pull/44263,"[('accounts', ''), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2678883826,pull_request,closed,,feat: available qty at company in sales transactions,"Available qty as per selected warehouse is there but Available qty across the company was not there. Added a field Qty (Company) which shows the available quantity across all warehouses of the selected company.
![2024-11-21 15 46 13](https://github.com/user-attachments/assets/cc0f3fd0-2640-431c-84a2-d3fe5a43a752)

Fixed https://github.com/frappe/erpnext/issues/40144

#No-docs
",rohitwaghchaure,2024-11-21 10:16:49+00:00,[],2024-12-11 00:12:24+00:00,2024-11-25 14:28:55+00:00,https://github.com/frappe/erpnext/pull/44260,"[('selling', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2678680770,pull_request,closed,,fix: no permission to read Doctype (backport #44256) (backport #44258),"**Issue**

While accessing the report Serial and Batch Summary

<img width=""931"" alt=""Screenshot 2024-11-21 at 12 10 41 PM"" src=""https://github.com/user-attachments/assets/cb376895-c539-41c5-a35e-e06b417196fb"">
<hr>This is an automatic backport of pull request #44256 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #44258 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-21 09:22:52+00:00,[],2024-12-06 00:12:20+00:00,2024-11-21 09:43:16+00:00,https://github.com/frappe/erpnext/pull/44259,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2678421482,pull_request,closed,,fix: no permission to read Doctype (backport #44256),"**Issue**

While accessing the report Serial and Batch Summary

<img width=""931"" alt=""Screenshot 2024-11-21 at 12 10 41 PM"" src=""https://github.com/user-attachments/assets/cb376895-c539-41c5-a35e-e06b417196fb"">
<hr>This is an automatic backport of pull request #44256 done by [Mergify](https://mergify.com).",mergify[bot],2024-11-21 07:44:22+00:00,['rohitwaghchaure'],2024-12-06 00:12:21+00:00,2024-11-21 09:21:35+00:00,https://github.com/frappe/erpnext/pull/44258,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2490483736, 'issue_id': 2678421482, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 11, 21, 9, 21, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2490484067, 'issue_id': 2678421482, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#44259 fix: no permission to read Doctype (backport #44256) (backport #44258)](https://github.com/frappe/erpnext/pull/44259) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 11, 21, 9, 21, 59, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-11-21 09:21:50 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-11-21 09:21:59 UTC): #### ✅ Backports have been created

<details>

* [#44259 fix: no permission to read Doctype (backport #44256) (backport #44258)](https://github.com/frappe/erpnext/pull/44259) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2678215967,pull_request,closed,,fix: add company dynamic filters in number cards,"Issue:
Workspace number card not showing the value based on session default company
ref: [25533](https://support.frappe.io/helpdesk/tickets/25533)

[Screencast from 21-11-24 11:25:50 AM IST.webm](https://github.com/user-attachments/assets/6ecd3a6f-2756-4cb7-a94d-28629ceb9aa0)

Backport needed for v15",Sugesh393,2024-11-21 06:44:37+00:00,['ruthra-kumar'],2024-12-11 00:12:33+00:00,2024-11-26 05:23:48+00:00,https://github.com/frappe/erpnext/pull/44257,"[('backport version-15-hotfix', '')]",[],
2678215802,pull_request,closed,,fix: no permission to read Doctype,"**Issue**

While accessing the report Serial and Batch Summary

<img width=""931"" alt=""Screenshot 2024-11-21 at 12 10 41 PM"" src=""https://github.com/user-attachments/assets/cb376895-c539-41c5-a35e-e06b417196fb"">
",rohitwaghchaure,2024-11-21 06:44:32+00:00,[],2024-12-06 00:12:23+00:00,2024-11-21 07:43:21+00:00,https://github.com/frappe/erpnext/pull/44256,"[('backport version-15-hotfix', '')]",[],
2676964795,pull_request,closed,,refactor: use `frappe._dict()` instead of `{}`,"A downstream function (`_get_item_tax_template`) expects this to be a frappe._dict and fails otherwise:

https://github.com/frappe/erpnext/blob/8d8070e8eb83aabc8db6d64a5554e89b480dcf46/erpnext/stock/get_item_details.py#L663

```
  File ""apps/erpnext/erpnext/stock/get_item_details.py"", line 664, in _get_item_tax_template
    out.item_tax_template = ctx.get(""item_tax_template"")
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'item_tax_template'
```",barredterra,2024-11-20 19:27:24+00:00,[],2024-12-05 00:12:13+00:00,2024-11-20 23:36:21+00:00,https://github.com/frappe/erpnext/pull/44255,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('squash', 'Meant to tell reviewers that this PR should be squashed into a single commit while merging.')]","[{'comment_id': 2489471425, 'issue_id': 2676964795, 'author': 'blaggacao', 'body': 'Would you agree to use `ItemDetails()` (an alias used for all the partial or not `out`s to `frappe._dict`)?\n\nThis designates, in the absence of proper data class, at least ""something something"" `ItemDetails`.', 'created_at': datetime.datetime(2024, 11, 20, 20, 20, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2489665997, 'issue_id': 2676964795, 'author': 'barredterra', 'body': 'Ah, of course, that makes sense.', 'created_at': datetime.datetime(2024, 11, 20, 22, 29, 22, tzinfo=datetime.timezone.utc)}]","blaggacao on (2024-11-20 20:20:25 UTC): Would you agree to use `ItemDetails()` (an alias used for all the partial or not `out`s to `frappe._dict`)?

This designates, in the absence of proper data class, at least ""something something"" `ItemDetails`.

barredterra (Issue Creator) on (2024-11-20 22:29:22 UTC): Ah, of course, that makes sense.

"
2676438404,pull_request,closed,,fix: use of ctx,"- **fix: rename args to ctx in caller**
- **fix: use `.get(""items"")` to avoid conflict with `.items()` method**
",barredterra,2024-11-20 16:26:22+00:00,[],2024-12-05 00:12:14+00:00,2024-11-20 18:03:27+00:00,https://github.com/frappe/erpnext/pull/44253,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2489240678, 'issue_id': 2676438404, 'author': 'blaggacao', 'body': ""Thanks for the helping hand, I've been ooo all day."", 'created_at': datetime.datetime(2024, 11, 20, 18, 3, 56, tzinfo=datetime.timezone.utc)}]","blaggacao on (2024-11-20 18:03:56 UTC): Thanks for the helping hand, I've been ooo all day.

"
2675675893,pull_request,closed,,Add reconciliation feature for selecting invoices or payments calculate total amount and outstanding balance for respective party,"
Add reconciliation feature for selecting invoices or payments calculate total amount and outstanding balance for respective party

Before:
https://github.com/user-attachments/assets/00c0235c-9e94-4e0d-b19d-57ab3a56007c

After:
https://github.com/user-attachments/assets/2f3212a0-473e-4222-8198-e2cd1a7076c9
",pra17shant,2024-11-20 12:10:58+00:00,['ruthra-kumar'],2024-12-07 00:11:58+00:00,2024-11-22 10:58:38+00:00,https://github.com/frappe/erpnext/pull/44251,[],[],
2675623724,pull_request,closed,,"feat: Add reconciliation feature for selecting invoices or payments, …","**Add reconciliation feature for selecting invoices or payments calculate total amount and outstanding balance for respective party**

Before:
https://github.com/user-attachments/assets/00c0235c-9e94-4e0d-b19d-57ab3a56007c

After:
https://github.com/user-attachments/assets/2f3212a0-473e-4222-8198-e2cd1a7076c9

",pra17shant,2024-11-20 11:48:20+00:00,[],2024-12-05 00:12:17+00:00,2024-11-20 12:14:03+00:00,https://github.com/frappe/erpnext/pull/44250,[],[],
