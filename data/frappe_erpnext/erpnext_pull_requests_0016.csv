id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2617561493,pull_request,closed,,fix: calculate percentage received and delivered considering over-receipt and over-delivery,"Calculate the percentage received and delivered considering over-receipt and over-delivery, while updating qty using the ""Update Qty"" button in PO and SO.",nabinhait,2024-10-28 07:32:30+00:00,[],2024-11-24 00:12:59+00:00,2024-10-29 11:24:08+00:00,https://github.com/frappe/erpnext/pull/43870,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2617530110,pull_request,closed,,fix: calculate tds with net amount when invoice exceeds single threshold amount,"**Issue:**
When a purchase invoice exceeds the single threshold value but doesn't exceed the cumulative threshold, the TDS amount is calculated on the grand total instead of the net total when consider_party_ledger_amount is ticked on Tax Withholding Category
**ref:** [23540](https://support.frappe.io/helpdesk/tickets/23540)

**Before:**
[TDS Calculation Issue](https://github.com/user-attachments/assets/bca2f5f3-d6a1-4ee8-bd03-c3afeeaf3c7d)

**After:**
[TDS Calculation Fix](https://github.com/user-attachments/assets/5679224e-09f3-4af8-82e7-36f1a7ea53c8)

**Backport needed: v14 & v15**",venkat102,2024-10-28 07:16:08+00:00,[],2024-11-14 00:11:29+00:00,2024-10-30 05:13:17+00:00,https://github.com/frappe/erpnext/pull/43869,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2617493015,pull_request,closed,,"refactor: fix garbage title, desc and name in razorpay (backport #43862)",Manual frontport of https://github.com/frappe/erpnext/pull/42607<hr>This is an automatic backport of pull request #43862 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-28 06:55:10+00:00,['ruthra-kumar'],2024-11-14 00:11:11+00:00,2024-10-28 07:17:43+00:00,https://github.com/frappe/erpnext/pull/43868,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2446383855, 'issue_id': 2617493015, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 36, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:36 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2617436934,pull_request,closed,,chore: fix whitespace,regression: https://github.com/frappe/erpnext/pull/42607,ruthra-kumar,2024-10-28 06:21:58+00:00,[],2024-11-12 00:10:54+00:00,2024-10-28 06:40:53+00:00,https://github.com/frappe/erpnext/pull/43866,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2442369823, 'issue_id': 2617436934, 'author': 'Abhishek-Chougule', 'body': 'Thanks for addressing the issue.', 'created_at': datetime.datetime(2024, 10, 28, 18, 49, 14, tzinfo=datetime.timezone.utc)}]","Abhishek-Chougule on (2024-10-28 18:49:14 UTC): Thanks for addressing the issue.

"
2617380415,pull_request,closed,,fix: do not check for payment terms details for return invoices. (backport #43685),"Issue: In Account Receivable / Payable Report if   `Based On Payment Terms` is checked amount for return invoices with payment term details is incorrect/

Steps to replicate:

- Create a Sales Return invoice.
- Add Payment Term (More than 1 line)
- Check the Account Receivable report with `Based On Payment Terms` checked.

Problem: Amount based on Payment Terms shouldn't be calculated for Return Invoices.

Invoice: 
![image](https://github.com/user-attachments/assets/17f34f73-8169-4ca9-82d5-cce0b9b557c0)

Before:
![image](https://github.com/user-attachments/assets/b7ed74df-952a-42a6-aaa9-97122b5691e5)


After:
![image](https://github.com/user-attachments/assets/709c9571-26a3-43b4-bc7d-5953db520971)


backport version-15-hotfix
backport version-14-hotfix
<hr>This is an automatic backport of pull request #43685 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 05:55:09+00:00,[],2024-11-12 00:10:57+00:00,2024-10-28 10:22:45+00:00,https://github.com/frappe/erpnext/pull/43864,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2440613784, 'issue_id': 2617380415, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 912e1e3f3d3a3e3d8b15fee9dfa1dda7c1922e37 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43685\nYour branch is ahead of \'origin/version-15-hotfix\' by 2 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 912e1e3f3d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 5, 55, 10, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 05:55:10 UTC): Cherry-pick of 912e1e3f3d3a3e3d8b15fee9dfa1dda7c1922e37 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43685
Your branch is ahead of 'origin/version-15-hotfix' by 2 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 912e1e3f3d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2617378404,pull_request,closed,,fix: do not check for payment terms details for return invoices. (backport #43685),"Issue: In Account Receivable / Payable Report if   `Based On Payment Terms` is checked amount for return invoices with payment term details is incorrect/

Steps to replicate:

- Create a Sales Return invoice.
- Add Payment Term (More than 1 line)
- Check the Account Receivable report with `Based On Payment Terms` checked.

Problem: Amount based on Payment Terms shouldn't be calculated for Return Invoices.

Invoice: 
![image](https://github.com/user-attachments/assets/17f34f73-8169-4ca9-82d5-cce0b9b557c0)

Before:
![image](https://github.com/user-attachments/assets/b7ed74df-952a-42a6-aaa9-97122b5691e5)


After:
![image](https://github.com/user-attachments/assets/709c9571-26a3-43b4-bc7d-5953db520971)


backport version-15-hotfix
backport version-14-hotfix
<hr>This is an automatic backport of pull request #43685 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 05:53:57+00:00,[],2024-11-14 00:11:15+00:00,2024-10-28 10:23:06+00:00,https://github.com/frappe/erpnext/pull/43863,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2440612487, 'issue_id': 2617378404, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 8b700eadc746698c02573f5af209a962d32be5d6 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43685\nYour branch is ahead of \'origin/version-14-hotfix\' by 1 commit.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 8b700eadc7.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/accounts_controller.py\n\tmodified:   erpnext/public/js/controllers/transaction.js\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js\n\n```\n\n\nCherry-pick of 912e1e3f3d3a3e3d8b15fee9dfa1dda7c1922e37 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43685\nYour branch is ahead of \'origin/version-14-hotfix\' by 2 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 912e1e3f3d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 5, 53, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446383221, 'issue_id': 2617378404, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 24, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 05:53:58 UTC): Cherry-pick of 8b700eadc746698c02573f5af209a962d32be5d6 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43685
Your branch is ahead of 'origin/version-14-hotfix' by 1 commit.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 8b700eadc7.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/accounts_controller.py
	modified:   erpnext/public/js/controllers/transaction.js

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js

```


Cherry-pick of 912e1e3f3d3a3e3d8b15fee9dfa1dda7c1922e37 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43685
Your branch is ahead of 'origin/version-14-hotfix' by 2 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 912e1e3f3d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:24 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2617329401,pull_request,closed,,"refactor: fix garbage title, desc and name in razorpay",Manual frontport of https://github.com/frappe/erpnext/pull/42607,ruthra-kumar,2024-10-28 05:18:32+00:00,[],2024-11-12 00:11:00+00:00,2024-10-28 06:52:55+00:00,https://github.com/frappe/erpnext/pull/43862,"[('backport version-14-hotfix', 'backport to version 14')]",[],
2617323948,pull_request,closed,,fix: incorrect value of available_qty_for_consumption in subcontracti… (backport #43836),"Incorrect calculation of ""Available Qty For Consumption"" in the Subcontracting Receipt <hr>This is an automatic backport of pull request #43836 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 05:13:41+00:00,['rohitwaghchaure'],2024-11-13 00:11:32+00:00,2024-10-29 12:28:40+00:00,https://github.com/frappe/erpnext/pull/43861,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2617323256,pull_request,closed,,fix: incorrect value of available_qty_for_consumption in subcontracti… (backport #43836),"Incorrect calculation of ""Available Qty For Consumption"" in the Subcontracting Receipt <hr>This is an automatic backport of pull request #43836 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 05:13:06+00:00,['rohitwaghchaure'],2024-11-13 00:11:39+00:00,2024-10-29 10:04:29+00:00,https://github.com/frappe/erpnext/pull/43860,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2440569994, 'issue_id': 2617323256, 'author': 'mergify[bot]', 'body': 'Cherry-pick of ad6ce09b865786d99daca38194bdeeea53aa11e6 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43836\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit ad6ce09b86.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/subcontracting/doctype/subcontracting_receipt/subcontracting_receipt.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 5, 13, 8, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 05:13:08 UTC): Cherry-pick of ad6ce09b865786d99daca38194bdeeea53aa11e6 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43836
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit ad6ce09b86.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/subcontracting/doctype/subcontracting_receipt/subcontracting_receipt.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2617320389,pull_request,closed,,"fix: garbage value in title, desc and payer name on razorpay",Manual backport of https://github.com/frappe/erpnext/pull/42607,ruthra-kumar,2024-10-28 05:10:37+00:00,[],2024-11-12 00:11:02+00:00,2024-10-28 05:18:06+00:00,https://github.com/frappe/erpnext/pull/43859,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2617248093,pull_request,closed,,refactor: query for expense_account moved to setup hook in purchase invoice (backport #43833),"Probem: 
Previously accounts other than Profit and Loss Account based on account type were allowed in expense accounts.But after this PR https://github.com/frappe/erpnext/pull/35944, the user cannot select other accounts in the Purchase Invoice.

Issue:
The query was not setting in purchase invoice.js

backport version-15-hotfix
backport version-14-hotfix

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24018
<hr>This is an automatic backport of pull request #43833 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 04:14:17+00:00,[],2024-11-14 00:11:10+00:00,2024-10-28 04:29:55+00:00,https://github.com/frappe/erpnext/pull/43858,"[('conflicts', None), ('released', None)]","[{'comment_id': 2440513909, 'issue_id': 2617248093, 'author': 'mergify[bot]', 'body': 'Cherry-pick of a9ac0cc2238d420c518fdcbf69e8ed1defac7f2e has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43833\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit a9ac0cc223.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 28, 4, 14, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446383964, 'issue_id': 2617248093, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 39, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-28 04:14:19 UTC): Cherry-pick of a9ac0cc2238d420c518fdcbf69e8ed1defac7f2e has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43833
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit a9ac0cc223.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/purchase_invoice/purchase_invoice.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:39 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2617248060,pull_request,closed,,refactor: query for expense_account moved to setup hook in purchase invoice (backport #43833),"Probem: 
Previously accounts other than Profit and Loss Account based on account type were allowed in expense accounts.But after this PR https://github.com/frappe/erpnext/pull/35944, the user cannot select other accounts in the Purchase Invoice.

Issue:
The query was not setting in purchase invoice.js

backport version-15-hotfix
backport version-14-hotfix

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24018
<hr>This is an automatic backport of pull request #43833 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-28 04:14:15+00:00,[],2024-11-12 00:11:04+00:00,2024-10-28 04:23:03+00:00,https://github.com/frappe/erpnext/pull/43857,[],[],
2617205887,pull_request,closed,,fix: add parenttype clause to invoice tax query in sales_register report,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

The `Sales Register` report's tax calculation query was only grouping by `parent` on `tabSales Taxes and Charges`. This can cause the `Sales Taxes and Charges` of another document (ex: Quotation) having the same name (where doc names are manually set or proforma invoice) to be calculated into the sales tax. Adding the `parenttype = 'Sales Invoice'` condition avoids such issues in this PR.

closes #43811

backport version-15
backport version-14",IMS94,2024-10-28 03:37:32+00:00,['ruthra-kumar'],2024-11-13 00:11:38+00:00,2024-10-29 10:09:21+00:00,https://github.com/frappe/erpnext/pull/43856,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2616674908,pull_request,closed,,Enh kittiu thai coa,"- [ ] country_wise_tax.json
- [ ] more COA for Thailand into verfied folder",kittiu,2024-10-27 15:29:38+00:00,[],2024-11-11 00:12:21+00:00,2024-10-27 15:30:05+00:00,https://github.com/frappe/erpnext/pull/43854,"[('accounts', ''), ('stock', None), ('CRM', None), ('selling', None), ('buying', None), ('assets', ''), ('projects', 'projects module related issue / PR')]",[],
2616452171,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2024-10-27 09:35:14+00:00,[],2024-11-11 00:12:22+00:00,2024-10-27 10:10:31+00:00,https://github.com/frappe/erpnext/pull/43853,[],[],
2616268696,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-27 02:54:21+00:00,[],2024-11-12 00:11:06+00:00,2024-10-28 04:07:42+00:00,https://github.com/frappe/erpnext/pull/43851,"[('translation', None)]",[],
2616041955,pull_request,closed,,fix: backport translations from develop,"Copy missing translations from the develop branch while leaving the rest untouched.
",barredterra,2024-10-26 18:05:23+00:00,[],2024-11-10 00:11:50+00:00,2024-10-26 18:25:31+00:00,https://github.com/frappe/erpnext/pull/43849,[],[],
2616014853,pull_request,closed,,fix(RFQ): make strings translatable (backport #43843),<hr>This is an automatic backport of pull request #43843 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-26 17:24:34+00:00,['barredterra'],2024-11-10 00:11:52+00:00,2024-10-26 17:43:24+00:00,https://github.com/frappe/erpnext/pull/43848,[],[],
2616014829,pull_request,closed,,fix(RFQ): make strings translatable (backport #43843),<hr>This is an automatic backport of pull request #43843 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-26 17:24:31+00:00,['barredterra'],2024-11-14 00:11:09+00:00,2024-10-26 17:51:32+00:00,https://github.com/frappe/erpnext/pull/43847,"[('conflicts', None), ('released', None)]","[{'comment_id': 2439663330, 'issue_id': 2616014829, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 1d40e3dbe35cad0d1fdc6fe5c57a446329c7df3c has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43843\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 1d40e3dbe3.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/request_for_quotation/request_for_quotation.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 26, 17, 24, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446384070, 'issue_id': 2616014829, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 42, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-26 17:24:33 UTC): Cherry-pick of 1d40e3dbe35cad0d1fdc6fe5c57a446329c7df3c has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43843
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 1d40e3dbe3.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/request_for_quotation/request_for_quotation.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:42 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2615629250,pull_request,closed,,fix: Negative stock validation against inventory dimension (backport #43834),"Earlier it used to get available balances based on previous SLE against the selected dimension, but the problem is `qty_after_transaction` is not maintained for the specific dimension.
Now, we dynamically calculate the available qty aginst dimension.<hr>This is an automatic backport of pull request #43834 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-26 07:34:55+00:00,['nabinhait'],2024-11-26 00:11:53+00:00,2024-11-11 10:42:01+00:00,https://github.com/frappe/erpnext/pull/43846,[],[],
2615036180,pull_request,closed,,fix(RFQ): make strings translatable,,barredterra,2024-10-25 20:22:10+00:00,[],2024-11-10 00:11:53+00:00,2024-10-26 17:22:29+00:00,https://github.com/frappe/erpnext/pull/43843,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2614079541,pull_request,closed,,fix: basic rate not editable in Stock Entry Detail (backport #43837),"**Issue**

Even if the ""Set Basic Rate Manually"" checkbox has enabled in the stock entry child table, the system is not allowing to edit the Basic Rate 

**After Fix**


https://github.com/user-attachments/assets/8ea14c96-7472-4aa2-86b2-044b91a4f997



<hr>This is an automatic backport of pull request #43837 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-25 13:13:53+00:00,['rohitwaghchaure'],2024-11-14 00:11:12+00:00,2024-10-28 08:32:24+00:00,https://github.com/frappe/erpnext/pull/43839,"[('released', None)]","[{'comment_id': 2437748702, 'issue_id': 2614079541, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 5a967bc868566eae06ce44df894cbb33bc98f869 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43837\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 5a967bc868.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/doctype/stock_entry/stock_entry.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 25, 13, 13, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446383721, 'issue_id': 2614079541, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 33, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-25 13:13:55 UTC): Cherry-pick of 5a967bc868566eae06ce44df894cbb33bc98f869 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43837
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 5a967bc868.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/doctype/stock_entry/stock_entry.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:33 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2614078366,pull_request,closed,,fix: basic rate not editable in Stock Entry Detail (backport #43837),"**Issue**

Even if the ""Set Basic Rate Manually"" checkbox has enabled in the stock entry child table, the system is not allowing to edit the Basic Rate 

**After Fix**


https://github.com/user-attachments/assets/8ea14c96-7472-4aa2-86b2-044b91a4f997



<hr>This is an automatic backport of pull request #43837 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-25 13:13:18+00:00,['rohitwaghchaure'],2024-11-09 00:10:48+00:00,2024-10-25 14:51:01+00:00,https://github.com/frappe/erpnext/pull/43838,[],[],
2614066202,pull_request,closed,,fix: basic rate not editable in Stock Entry Detail,"**Issue**

Even if the ""Set Basic Rate Manually"" checkbox has enabled in the stock entry child table, the system is not allowing to edit the Basic Rate 

**After Fix**


https://github.com/user-attachments/assets/8ea14c96-7472-4aa2-86b2-044b91a4f997



",rohitwaghchaure,2024-10-25 13:07:51+00:00,[],2024-11-09 00:10:49+00:00,2024-10-25 13:11:49+00:00,https://github.com/frappe/erpnext/pull/43837,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2614033273,pull_request,closed,,fix: incorrect value of available_qty_for_consumption in subcontracti…,"Incorrect calculation of ""Available Qty For Consumption"" in the Subcontracting Receipt ",rohitwaghchaure,2024-10-25 12:54:23+00:00,[],2024-11-12 00:11:03+00:00,2024-10-28 05:12:07+00:00,https://github.com/frappe/erpnext/pull/43836,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2613959321,pull_request,closed,,Update fiscal_year.js,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",hyaray,2024-10-25 12:22:18+00:00,['ruthra-kumar'],2024-11-19 00:11:58+00:00,2024-11-04 05:47:27+00:00,https://github.com/frappe/erpnext/pull/43835,"[('backport version-15-hotfix', '')]",[],
2613931943,pull_request,closed,,fix: Negative stock validation against inventory dimension,"Earlier it used to get available balances based on previous SLE against the selected dimension, but the problem is `qty_after_transaction` is not maintained for the specific dimension.
Now, we dynamically calculate the available qty aginst dimension.",nabinhait,2024-10-25 12:09:56+00:00,[],2024-11-10 00:11:54+00:00,2024-10-26 07:33:38+00:00,https://github.com/frappe/erpnext/pull/43834,"[('backport version-15-hotfix', '')]",[],
2613888067,pull_request,closed,,refactor: query for expense_account moved to setup hook in purchase invoice,"Probem: 
Previously accounts other than Profit and Loss Account based on account type were allowed in expense accounts.But after this PR https://github.com/frappe/erpnext/pull/35944, the user cannot select other accounts in the Purchase Invoice.

Issue:
The query was not setting in purchase invoice.js

backport version-15-hotfix
backport version-14-hotfix

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24018
",ljain112,2024-10-25 11:50:25+00:00,['ruthra-kumar'],2024-11-12 00:11:05+00:00,2024-10-28 04:13:21+00:00,https://github.com/frappe/erpnext/pull/43833,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2613451086,pull_request,closed,,fix: set bill_no before `against_voucher` gets concatenated (backport #43830),"Consider a Purchase Invoice with 'Is Paid' enabled and Supplier Invoice No set. General Ledger will be unable to set 'Supplier Invoice No' as the `against_voucher` field gets concatenated.

Internal Ref: https://support.frappe.io/helpdesk/tickets/23919<hr>This is an automatic backport of pull request #43830 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-25 08:31:50+00:00,['ruthra-kumar'],2024-11-14 00:11:08+00:00,2024-10-25 08:58:45+00:00,https://github.com/frappe/erpnext/pull/43832,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2437206708, 'issue_id': 2613451086, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 7bade7f1fe08370d655e12929b2376814dac018a has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43830\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 7bade7f1fe.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/report/general_ledger/general_ledger.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 25, 8, 31, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446384199, 'issue_id': 2613451086, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 45, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-25 08:31:52 UTC): Cherry-pick of 7bade7f1fe08370d655e12929b2376814dac018a has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43830
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 7bade7f1fe.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/report/general_ledger/general_ledger.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:45 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2613450977,pull_request,closed,,fix: set bill_no before `against_voucher` gets concatenated (backport #43830),"Consider a Purchase Invoice with 'Is Paid' enabled and Supplier Invoice No set. General Ledger will be unable to set 'Supplier Invoice No' as the `against_voucher` field gets concatenated.

Internal Ref: https://support.frappe.io/helpdesk/tickets/23919<hr>This is an automatic backport of pull request #43830 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-25 08:31:46+00:00,['ruthra-kumar'],2024-11-09 00:10:50+00:00,2024-10-25 08:58:36+00:00,https://github.com/frappe/erpnext/pull/43831,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2613391418,pull_request,closed,,fix: set bill_no before `against_voucher` gets concatenated,"Consider a Purchase Invoice with 'Is Paid' enabled and Supplier Invoice No set. General Ledger will be unable to set 'Supplier Invoice No' as the `against_voucher` field gets concatenated.

Internal Ref: https://support.frappe.io/helpdesk/tickets/23919",ruthra-kumar,2024-10-25 08:03:38+00:00,[],2024-11-09 00:10:51+00:00,2024-10-25 08:30:11+00:00,https://github.com/frappe/erpnext/pull/43830,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2613072932,pull_request,closed,,Issue 335,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",hrishikesh8848,2024-10-25 04:54:02+00:00,[],2024-11-12 00:10:58+00:00,2024-10-25 04:54:31+00:00,https://github.com/frappe/erpnext/pull/43829,"[('accounts', ''), ('stock', None), ('CRM', None), ('selling', None), ('buying', None), ('assets', ''), ('projects', 'projects module related issue / PR')]",[],
2612942075,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-25 02:54:41+00:00,[],2024-11-10 00:11:51+00:00,2024-10-26 17:52:05+00:00,https://github.com/frappe/erpnext/pull/43827,"[('translation', None)]",[],
2612092395,pull_request,closed,,fix: map item_ID instead of item_code while creating subcontracting order from PO (backport #43822),"## Error:

```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1778, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 484, in on_submit
    self.auto_create_subcontracting_order()
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 638, in auto_create_subcontracting_order
    make_subcontracting_order(self.name, save=True, notify=True)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 871, in make_subcontracting_order
    target_doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/subcontracting/doctype/subcontracting_order/subcontracting_order.py"", line 112, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 53, in validate
    self.validate_items()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 93, in validate_items
    is_stock_item, is_sub_contracted_item = frappe.get_value(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: cannot unpack non-iterable NoneType object
```<hr>This is an automatic backport of pull request #43822 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-24 16:42:41+00:00,['nabinhait'],2024-12-03 00:13:35+00:00,2024-11-17 08:13:57+00:00,https://github.com/frappe/erpnext/pull/43825,"[('needs-tests', 'This PR needs automated unit-tests.'), ('inactive', '')]","[{'comment_id': 2465994233, 'issue_id': 2612092395, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 9, 2, 18, 6, tzinfo=datetime.timezone.utc)}]","stale[bot] on (2024-11-09 02:18:06 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2611525976,pull_request,closed,,fix: accounting dimension fieldname,"Problem:
If the Doctype name contains ""-"" in its name incorrect field name was set in the Account Dimension doc due to which field was not created.

Issue:
There is inconsistency in scrub in JS and Python.
In Python, it scrubs whitespace and ""-"" dash but in js it only scrubs whitespace.

Fixing it in frappe will be a breaking change so fixing it here.

Also added validation for fieldname.

Steps to replicate:
- Create an Accounting Dimension with doctype having ""-"" in its field.


backport version-15 hotfix

Before:
![image](https://github.com/user-attachments/assets/57f723e6-eaee-4bcc-b2d7-2b52336dd4c0)

<details>
    <summary> Traceback</summary>
```log
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/utils/background_jobs.py"", line 220, in execute_job
    retval = method(**kwargs)
      site = 'precihole.localhost'
      method = <function make_dimension_in_accounting_doctypes at 0x7fdf637de700>
      event = None
      job_name = 'erpnext.accounts.doctype.accounting_dimension.accounting_dimension.make_dimension_in_accounting_doctypes'
      kwargs = {'doc': <AccountingDimension: GSTR-1 Beta>}
      user = 'Administrator'
      is_async = True
      retry = 0
      retval = None
      method_name = 'erpnext.accounts.doctype.accounting_dimension.accounting_dimension.make_dimension_in_accounting_doctypes'
      before_job_task = 'frappe.monitor.start'
  File ""apps/erpnext/erpnext/accounts/doctype/accounting_dimension/accounting_dimension.py"", line 136, in make_dimension_in_accounting_doctypes
    create_custom_field(doctype, df, ignore_validate=True)
      doc = <AccountingDimension: GSTR-1 Beta>
      doclist = ['GL Entry', 'Payment Ledger Entry', 'Sales Invoice', 'Purchase Invoice', 'Payment Entry', 'Asset', 'Stock Entry', 'Budget', 'Delivery Note', 'Sales Invoice Item', 'Purchase Invoice Item', 'Purchase Order Item', 'Sales Order Item', 'Journal Entry Account', 'Material Request Item', 'Delivery Note Item', 'Purchase Receipt Item', 'Stock Entry Detail', 'Payment Entry Deduction', 'Sales Taxes and Charges', 'Purchase Taxes and Charges', 'Shipping Rule', 'Landed Cost Item', 'Asset Value Adjustment', 'Asset Repair', 'Asset Capitalization', 'Loyalty Program', 'Stock Reconciliation', 'POS Profile', 'Opening Invoice Creation Tool', 'Opening Invoice Creation Tool Item', 'Subscription', 'Subscription Plan', 'POS Invoice', 'POS Invoice Item', 'Purchase Order', 'Purchase Receipt', 'Sales Order', 'Subcontracting Order', 'Subcontracting Order Item', 'Subcontracting Receipt', 'Subcontracting Receipt Item', 'Account Closing Balance', 'Supplier Quotation', 'Supplier Quotation Item', 'Payment Reconciliatio...
      doc_count = 2
      count = 0
      repostable_doctypes = ['Expense Claim', 'Journal Entry', 'Payment Entry', 'Purchase Invoice', 'Sales Invoice']
      doctype = 'GL Entry'
      insert_after_field = 'accounting_dimensions_section'
      df = {'fieldname': 'gstr-1_beta', 'label': 'GSTR-1 Beta', 'fieldtype': 'Link', 'options': 'GSTR-1 Beta', 'insert_after': 'accounting_dimensions_section', 'owner': 'Administrator', 'allow_on_submit': 0}
      meta = <Meta: GL Entry>
      fieldnames = ['posting_date', 'transaction_date', 'account', 'party_type', 'party', 'cost_center', 'debit', 'credit', 'account_currency', 'debit_in_account_currency', 'credit_in_account_currency', 'against', 'against_voucher_type', 'against_voucher', 'voucher_type', 'voucher_subtype', 'voucher_no', 'voucher_detail_no', 'project', 'remarks', 'is_opening', 'is_advance', 'fiscal_year', 'company', 'company_gstin', 'finance_book', 'to_rename', 'due_date', 'is_cancelled', 'transaction_currency', 'debit_in_transaction_currency', 'credit_in_transaction_currency', 'transaction_exchange_rate']
  File ""apps/frappe/frappe/custom/doctype/custom_field/custom_field.py"", line 293, in create_custom_field
    custom_field.insert()
      doctype = 'GL Entry'
      df = {'fieldname': 'gstr-1_beta', 'label': 'GSTR-1 Beta', 'fieldtype': 'Link', 'options': 'GSTR-1 Beta', 'insert_after': 'accounting_dimensions_section', 'owner': 'Administrator', 'allow_on_submit': 0}
      ignore_validate = True
      is_system_generated = True
      custom_field = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
      self = <CustomField: GL Entry-gstr-1_beta>
      ignore_permissions = None
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
      self = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      method = 'on_update'
      args = ()
      kwargs = {}
      fn = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      args = ()
      kwargs = {}
      hooks = [<function clear_doctype_notifications at 0x7fdf61df5580>, <function process_workflow_actions at 0x7fdf61df7600>, <function attach_files_to_document at 0x7fdf654cd1c0>, <function apply at 0x7fdf61c222a0>, <function update_due_date at 0x7fdf61c22340>, <function apply_permissions_for_non_standard_user_type at 0x7fdf61c23a60>]
      method = 'on_update'
      doc_events = {'*': {'on_update': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.core.doctype.file.utils.attach_files_to_document', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply', 'frappe.automation.doctype.assignment_rule.assignment_rule.update_due_date', 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type'], 'after_rename': ['frappe.desk.notifications.clear_doctype_notifications'], 'on_cancel': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply'], 'on_trash': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions'], 'on_update_after_submit': ['frappe.workflow.doctype.workflow_action.workflow_action.process_w...
      handler = 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type'
      composed = <function Document.hook.<locals>.compose.<locals>.runner at 0x7fdf61df4b80>
      compose = <function Document.hook.<locals>.compose at 0x7fdf62a1ff60>
      f = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
      self = <CustomField: GL Entry-gstr-1_beta>
      method = 'on_update'
      args = ()
      kwargs = {}
      add_to_return_value = <function Document.hook.<locals>.add_to_return_value at 0x7fdf62a1f740>
      fn = <function Document.run_method.<locals>.fn at 0x7fdf62a1f7e0>
      hooks = (<function clear_doctype_notifications at 0x7fdf61df5580>, <function process_workflow_actions at 0x7fdf61df7600>, <function attach_files_to_document at 0x7fdf654cd1c0>, <function apply at 0x7fdf61c222a0>, <function update_due_date at 0x7fdf61c22340>, <function apply_permissions_for_non_standard_user_type at 0x7fdf61c23a60>)
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
      self = <CustomField: GL Entry-gstr-1_beta>
      args = ()
      kwargs = {}
      method_object = <bound method CustomField.on_update of <CustomField: GL Entry-gstr-1_beta>>
      method = 'on_update'
  File ""apps/frappe/frappe/custom/doctype/custom_field/custom_field.py"", line 212, in on_update
    frappe.db.updatedb(self.dt)
      self = <CustomField: GL Entry-gstr-1_beta>
  File ""apps/frappe/frappe/database/mariadb/database.py"", line 443, in updatedb
    db_table.sync()
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fdf62dfd6d0>
      doctype = 'GL Entry'
      meta = None
      res = ((0,),)
      db_table = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
  File ""apps/frappe/frappe/database/schema.py"", line 44, in sync
    self.alter()
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
  File ""apps/frappe/frappe/database/mariadb/schema.py"", line 67, in alter
    col.build_for_alter_table(self.current_columns.get(col.fieldname.lower()))
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7fdf61c39b50>
      col = <frappe.database.schema.DbColumn object at 0x7fdf6169fd10>
  File ""apps/frappe/frappe/database/schema.py"", line 220, in build_for_alter_table
    self.fieldname = validate_column_name(self.fieldname)
      self = <frappe.database.schema.DbColumn object at 0x7fdf6169fd10>
      current_def = None
      column_type = 'varchar(140)'
  File ""apps/frappe/frappe/database/schema.py"", line 305, in validate_column_name
    frappe.throw(
      n = 'gstr-1_beta'
      special_characters = '""-""'
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
      msg = 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""'
      exc = <class 'frappe.database.database.Database.InvalidColumnName'>
      title = None
      is_minimizable = False
      wide = False
      as_list = False
      primary_action = None
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
      msg = 'Fieldname gstr-1_beta cannot have special characters like ""-""'
      title = None
      raise_exception = <class 'frappe.database.database.Database.InvalidColumnName'>
      as_table = False
      as_list = False
      indicator = 'red'
      alert = False
      primary_action = None
      is_minimizable = False
      wide = False
      realtime = False
      sys = <module 'sys' (built-in)>
      _raise_exception = <function msgprint.<locals>._raise_exception at 0x7fdf6167e980>
      inspect = <module 'inspect' from '/usr/lib/python3.11/inspect.py'>
      out = {'message': 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': 'bbddab1fbe3f344a6a7ce4460f207a1f253e5c1f9547672167b40ec0'}
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
      exc = InvalidColumnName('Fieldname gstr-1_beta cannot have special characters like ""-""')
      inspect = <module 'inspect' from '/usr/lib/python3.11/inspect.py'>
      msg = 'Fieldname gstr-1_beta cannot have special characters like ""-""'
      out = {'message': 'Fieldname <strong>gstr-1_beta</strong> cannot have special characters like ""-""', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': 'bbddab1fbe3f344a6a7ce4460f207a1f253e5c1f9547672167b40ec0'}
      raise_exception = <class 'frappe.database.database.Database.InvalidColumnName'>
frappe.database.database.InvalidColumnName: Fieldname gstr-1_beta cannot have special characters like ""-""
```

 </details>


After:
![image](https://github.com/user-attachments/assets/f125b1b3-3c73-460a-aeac-05a87e2cbccd)

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/24135




 ",ljain112,2024-10-24 13:00:41+00:00,['ruthra-kumar'],2024-11-13 00:11:45+00:00,2024-10-29 08:15:28+00:00,https://github.com/frappe/erpnext/pull/43824,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2611461708,pull_request,closed,,fix: Handle None value for item description in customer portal invoice view,"If the description was not set in an item it throws an error in the customer portal invoice view.

Steps to replicate:
- Create an invoice without a description.
- View that invoice in customer portal.

Before:
![image](https://github.com/user-attachments/assets/39610bb6-8907-4347-a7e2-86cd9ea0a8bc)


After:
![image](https://github.com/user-attachments/assets/90a2d27f-1c94-4831-b5a6-ea7b2f1f83a2)

backport-version-15

<details>
  <summary>Traceback</summary>
    ```log
    Traceback (most recent call last):
      File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
        response = renderer_instance.render()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
        html = self.get_html()
               ^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/utils.py"", line 523, in cache_html_decorator
        html = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 101, in get_html
        html = self.render_template()
               ^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 236, in render_template
        html = frappe.render_template(self.source, self.context, safe_render=safe_render)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/utils/jinja.py"", line 97, in render_template
        return get_jenv().from_string(template).render(context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/environment.py"", line 1301, in render
        self.environment.handle_exception()
      File ""env/lib/python3.11/site-packages/jinja2/environment.py"", line 936, in handle_exception
        raise rewrite_traceback_stack(source=source)
      File ""<template>"", line 179, in top-level template code
      File ""apps/frappe/frappe/templates/web.html"", line 1, in top-level template code
        {% extends base_template_path %}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/base.html"", line 77, in top-level template code
        {% block content %}
      File ""apps/frappe/frappe/templates/web.html"", line 63, in block 'content'
        {{ main_content() }}
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/runtime.py"", line 777, in _invoke
        rv = self._func(*arguments)
             ^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/web.html"", line 15, in template
        {% block page_container %}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/templates/web.html"", line 30, in block 'page_container'
        {%- block page_content -%}{%- endblock -%}
        ^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""<template>"", line 110, in block 'page_content'
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/jinja2/runtime.py"", line 777, in _invoke
        rv = self._func(*arguments)
             ^^^^^^^^^^^^^^^^^^^^^^
      File ""<template>"", line 176, in template
      File ""env/lib/python3.11/site-packages/jinja2/sandbox.py"", line 393, in call
        return __context.call(__obj, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""apps/frappe/frappe/core/utils.py"", line 91, in html2text
        return md(html, heading_style=""ATX"", strip=strip, wrap=wrap)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/markdownify/__init__.py"", line 395, in markdownify
        return MarkdownConverter(**options).convert(html)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/markdownify/__init__.py"", line 96, in convert
        soup = BeautifulSoup(html, 'html.parser')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      File ""env/lib/python3.11/site-packages/bs4/__init__.py"", line 315, in __init__
        elif len(markup) <= 256 and (
             ^^^^^^^^^^^
    TypeError: object of type 'NoneType' has no len()
    
    ```
</details>",ljain112,2024-10-24 12:40:32+00:00,['ruthra-kumar'],2024-11-13 00:11:43+00:00,2024-10-29 09:14:18+00:00,https://github.com/frappe/erpnext/pull/43823,"[('backport version-15-hotfix', '')]",[],
2611390947,pull_request,closed,,fix: map item_ID instead of item_code while creating subcontracting order from PO,"## Error:

```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1778, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 484, in on_submit
    self.auto_create_subcontracting_order()
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 638, in auto_create_subcontracting_order
    make_subcontracting_order(self.name, save=True, notify=True)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 871, in make_subcontracting_order
    target_doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/subcontracting/doctype/subcontracting_order/subcontracting_order.py"", line 112, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 53, in validate
    self.validate_items()
  File ""apps/erpnext/erpnext/controllers/subcontracting_controller.py"", line 93, in validate_items
    is_stock_item, is_sub_contracted_item = frappe.get_value(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: cannot unpack non-iterable NoneType object
```",nabinhait,2024-10-24 12:12:18+00:00,[],2024-11-08 00:11:46+00:00,2024-10-24 16:40:44+00:00,https://github.com/frappe/erpnext/pull/43822,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2611343291,pull_request,closed,,ci: trigger ci runs from upstream fix,"Testing ...
https://github.com/frappe/erpnext/actions/runs/11498575786/job/32004660657
",blaggacao,2024-10-24 11:55:33+00:00,[],2024-11-08 00:11:47+00:00,2024-10-24 12:52:13+00:00,https://github.com/frappe/erpnext/pull/43821,[],[],
2611107806,pull_request,closed,,ci: trigger ci runs from upstream,"This is intended to be triggered by https://github.com/frappe/frappe/pull/28272

cc @ruthra-kumar @ruchamahabal 

Also needed: https://github.com/frappe/erpnext/pull/43821",blaggacao,2024-10-24 10:11:50+00:00,[],2024-11-09 00:10:50+00:00,2024-10-24 11:12:30+00:00,https://github.com/frappe/erpnext/pull/43819,[],"[{'comment_id': 2435006784, 'issue_id': 2611107806, 'author': 'blaggacao', 'body': ""I'm still testing this, but needed to merge for a test (by GH repo trigger events only working off of default branch)"", 'created_at': datetime.datetime(2024, 10, 24, 11, 23, 9, tzinfo=datetime.timezone.utc)}]","blaggacao (Issue Creator) on (2024-10-24 11:23:09 UTC): I'm still testing this, but needed to merge for a test (by GH repo trigger events only working off of default branch)

"
2610824412,pull_request,closed,,fix: Unnecessary validation for non deferred sales invoices (backport #43816) (backport #43817),<hr>This is an automatic backport of pull request #43816 done by [Mergify](https://mergify.com).<hr>This is an automatic backport of pull request #43817 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-24 08:16:25+00:00,[],2024-11-08 00:11:48+00:00,2024-10-24 08:21:15+00:00,https://github.com/frappe/erpnext/pull/43818,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2610725228,pull_request,closed,,fix: Unnecessary validation for non deferred sales invoices (backport #43816),<hr>This is an automatic backport of pull request #43816 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-24 07:29:49+00:00,['deepeshgarg007'],2024-11-08 00:11:49+00:00,2024-10-24 08:07:58+00:00,https://github.com/frappe/erpnext/pull/43817,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2434584901, 'issue_id': 2610725228, 'author': 'deepeshgarg007', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2024, 10, 24, 8, 8, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2434594453, 'issue_id': 2610725228, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#43818 fix: Unnecessary validation for non deferred sales invoices (backport #43816) (backport #43817)](https://github.com/frappe/erpnext/pull/43818) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 10, 24, 8, 12, 56, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 (Assginee) on (2024-10-24 08:08:08 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2024-10-24 08:12:56 UTC): #### ✅ Backports have been created

<details>

* [#43818 fix: Unnecessary validation for non deferred sales invoices (backport #43816) (backport #43817)](https://github.com/frappe/erpnext/pull/43818) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2610670191,pull_request,closed,,fix: Unnecessary validation for non deferred sales invoices,,deepeshgarg007,2024-10-24 07:00:21+00:00,[],2024-11-08 00:11:50+00:00,2024-10-24 07:28:47+00:00,https://github.com/frappe/erpnext/pull/43816,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2610537755,pull_request,closed,,Tds exceeding single threshold,"**Issue:**
When a purchase invoice exceeds the single threshold value but doesn't exceed the cumulative threshold, the TDS amount is calculated on the grand total instead of the net total when consider_party_ledger_amount is ticked on Tax Withholding Category
**ref:** [23540](https://support.frappe.io/helpdesk/tickets/23540)

**Before:**
[TDS Calculation Issue](https://github.com/user-attachments/assets/bca2f5f3-d6a1-4ee8-bd03-c3afeeaf3c7d)

**After:**
[TDS Calculation Fix](https://github.com/user-attachments/assets/5679224e-09f3-4af8-82e7-36f1a7ea53c8)

**Backport needed: v14 & v15**",venkat102,2024-10-24 05:47:02+00:00,[],2024-11-12 00:10:59+00:00,2024-10-28 07:18:16+00:00,https://github.com/frappe/erpnext/pull/43814,[],"[{'comment_id': 2440731213, 'issue_id': 2610537755, 'author': 'venkat102', 'body': ""I'll squash these commits into one and open another PR #43869"", 'created_at': datetime.datetime(2024, 10, 28, 7, 18, 16, tzinfo=datetime.timezone.utc)}]","venkat102 (Issue Creator) on (2024-10-28 07:18:16 UTC): I'll squash these commits into one and open another PR #43869

"
2610268535,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-24 02:56:18+00:00,[],2024-11-08 00:11:51+00:00,2024-10-24 04:56:20+00:00,https://github.com/frappe/erpnext/pull/43813,"[('translation', None)]",[],
2609993155,pull_request,closed,,chore(Timesheet): add type hints (backport #43793),<hr>This is an automatic backport of pull request #43793 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-23 22:54:05+00:00,['barredterra'],2024-11-13 00:11:42+00:00,2024-10-29 09:16:45+00:00,https://github.com/frappe/erpnext/pull/43812,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2608411937,pull_request,closed,,fix: rounding issue of required qty in subcontracting order,"Rounding issue of required qty in subcontracting order

Internal frappe support issue: https://support.frappe.io/helpdesk/tickets/23810",nabinhait,2024-10-23 12:24:27+00:00,[],2024-11-13 00:11:25+00:00,2024-10-29 17:06:57+00:00,https://github.com/frappe/erpnext/pull/43810,"[('backport version-15-hotfix', '')]",[],
2608362534,pull_request,closed,,fix: consider gle based on balances in company currency (copy #43805),<hr>This is an automatic copy of pull request #43805 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-23 12:08:11+00:00,[],2024-11-07 00:11:01+00:00,2024-10-23 12:11:41+00:00,https://github.com/frappe/erpnext/pull/43809,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2608311858,pull_request,closed,,chore: release v15.39.2,fix: consider gle based on balances in company currency,nabinhait,2024-10-23 11:49:42+00:00,[],2024-11-07 00:11:02+00:00,2024-10-23 12:09:24+00:00,https://github.com/frappe/erpnext/pull/43808,"[('accounts', '')]",[],
2608223610,pull_request,closed,,fix: Add Company Filter (backport #43755),"- In Project dt ""Sales Order"" field
- In Sales Order dt Project field

* In the Project doctype, I can see and select sales orders from different companies, which should not be the case. Similarly, in the Sales Order doctype, when I select a specific company, I should only see projects associated with that company. However, the dropdown displays all projects, including those associated with other companies. This issue is also present on the demo site.

![image](https://github.com/user-attachments/assets/81e69f48-aecc-4690-91f5-43da10a5710b)
<hr>This is an automatic backport of pull request #43755 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-23 11:21:35+00:00,[],2024-11-07 00:11:05+00:00,2024-10-23 12:00:31+00:00,https://github.com/frappe/erpnext/pull/43807,[],[],
2608223516,pull_request,closed,,fix: Add Company Filter (backport #43755),"- In Project dt ""Sales Order"" field
- In Sales Order dt Project field

* In the Project doctype, I can see and select sales orders from different companies, which should not be the case. Similarly, in the Sales Order doctype, when I select a specific company, I should only see projects associated with that company. However, the dropdown displays all projects, including those associated with other companies. This issue is also present on the demo site.

![image](https://github.com/user-attachments/assets/81e69f48-aecc-4690-91f5-43da10a5710b)
<hr>This is an automatic backport of pull request #43755 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-23 11:21:32+00:00,[],2024-11-14 00:11:07+00:00,2024-10-23 12:27:42+00:00,https://github.com/frappe/erpnext/pull/43806,"[('released', None)]","[{'comment_id': 2431786571, 'issue_id': 2608223516, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 9909d760a529192e0fe26eeae03ed6c7e1b5375b has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43755\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 9909d760a5.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/projects/doctype/project/project.js\n\nUnmerged paths:\n  (use ""git add/rm <file>..."" as appropriate to mark resolution)\n\tdeleted by us:   erpnext/public/js/utils/sales_common.js\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 23, 11, 21, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2446384323, 'issue_id': 2608223516, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 48, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-23 11:21:34 UTC): Cherry-pick of 9909d760a529192e0fe26eeae03ed6c7e1b5375b has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43755
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 9909d760a5.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/projects/doctype/project/project.js

Unmerged paths:
  (use ""git add/rm <file>..."" as appropriate to mark resolution)
	deleted by us:   erpnext/public/js/utils/sales_common.js

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-30 09:53:48 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2608197026,pull_request,closed,,fix: consider gle based on balances in company currency,,nabinhait,2024-10-23 11:10:13+00:00,[],2024-11-07 00:11:03+00:00,2024-10-23 11:38:53+00:00,https://github.com/frappe/erpnext/pull/43805,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2431910144, 'issue_id': 2608197026, 'author': 'nabinhait', 'body': '@Mergify copy version-15', 'created_at': datetime.datetime(2024, 10, 23, 12, 7, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2431910360, 'issue_id': 2608197026, 'author': 'mergify[bot]', 'body': '> copy version-15\n\n#### ✅ Pull request copies have been created\n\n<details>\n\n* [#43809 fix: consider gle based on balances in company currency (copy #43805)](https://github.com/frappe/erpnext/pull/43809) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""copy version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2024, 10, 23, 12, 7, 17, tzinfo=datetime.timezone.utc)}]","nabinhait (Issue Creator) on (2024-10-23 12:07:10 UTC): @Mergify copy version-15

mergify[bot] on (2024-10-23 12:07:17 UTC): #### ✅ Pull request copies have been created

<details>

* [#43809 fix: consider gle based on balances in company currency (copy #43805)](https://github.com/frappe/erpnext/pull/43809) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""copy version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2608196195,pull_request,closed,,fix: consider gle based on balances in company currency,,nabinhait,2024-10-23 11:09:50+00:00,[],2024-11-07 00:11:06+00:00,2024-10-23 11:38:48+00:00,https://github.com/frappe/erpnext/pull/43804,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2608070191,pull_request,closed,,feat: add party name in payment request,"Added party name field in Payment Request
ref:[24021](https://support.frappe.io/helpdesk/tickets/24021)

![payment_request](https://github.com/user-attachments/assets/cb8ce37a-69cf-44eb-bf1b-6fb8ef82a883)

Backport needed: v15",ravibharathi656,2024-10-23 10:20:27+00:00,['ruthra-kumar'],2024-11-13 00:11:48+00:00,2024-10-29 05:46:32+00:00,https://github.com/frappe/erpnext/pull/43803,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2607757663,pull_request,closed,,chore: release version 15.39.1,"- perf: performance optimizations for accounting reports by refactoring account closing balance and period closing voucher
- fix: mapping purchase receipt from subcontracting receipt is not required",nabinhait,2024-10-23 08:39:50+00:00,[],2024-11-07 00:11:10+00:00,2024-10-23 08:57:10+00:00,https://github.com/frappe/erpnext/pull/43800,"[('accounts', '')]",[],
2607507736,pull_request,closed,,fix: wrong fieldname,Incorrect fieldname in patch,nabinhait,2024-10-23 07:00:40+00:00,[],2024-11-07 00:11:09+00:00,2024-10-23 09:05:09+00:00,https://github.com/frappe/erpnext/pull/43799,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2607455187,pull_request,closed,,perf!: performance optimizations for accounting reports by refactoring account closing balance and period closing voucher,Backport of https://github.com/frappe/erpnext/pull/43435,nabinhait,2024-10-23 06:40:16+00:00,[],2024-11-15 00:11:56+00:00,2024-10-23 07:37:16+00:00,https://github.com/frappe/erpnext/pull/43798,"[('accounts', '')]",[],
2607423802,pull_request,closed,,perf: performance optimizations for accounting reports by refactoring account closing balance and period closing voucher (backport #43435),"### Problem:
- The Trial balance report was getting timed out after 30 mins
- AR/AP reports were taking 15-20 mins
- Account closing balance patch was taking too much time
- The processing period for closing the voucher was taking too much time.
- GL Entry form fields are not organized

### Solutions:
- Refactored account closing balance and period closing voucher code by processing GLE in chunk
- Rewritten the closing balance patch
- Optimized trial balance and AR/AP
- Added indexes in GLE based on (party_type, party) and (company, posting_date)
- Introduced ""period start date"" and ""period end date"" in PCV to handle monthly closing vouchers and written patches.
- Organized fields in GLE

### Result:
- Trial Balance is running in 2 mins
- AR/AP reports are running within a min
- Account closing balance patch is running much faster than before

#no-docs<hr>This is an automatic backport of pull request #43435 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-23 06:25:01+00:00,['nabinhait'],2024-11-07 00:11:11+00:00,2024-10-23 06:40:30+00:00,https://github.com/frappe/erpnext/pull/43797,"[('accounts', ''), ('conflicts', None)]","[{'comment_id': 2431022337, 'issue_id': 2607423802, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 8b7e1536160d885d487f174fa51797226bb166ad has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43435\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 8b7e153616.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/account_closing_balance/account_closing_balance.py\n\tmodified:   erpnext/accounts/doctype/accounting_period/accounting_period.py\n\tmodified:   erpnext/accounts/doctype/gl_entry/gl_entry.py\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/test_payment_reconciliation.py\n\tmodified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.js\n\tmodified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.py\n\tmodified:   erpnext/accounts/doctype/period_closing_voucher/test_period_closing_voucher.py\n\tmodified:   erpnext/accounts/doctype/repost_accounting_ledger/repost_accounting_ledger.py\n\tmodified:   erpnext/accounts/doctype/repost_accounting_ledger/test_repost_accounting_ledger.py\n\tmodified:   erpnext/accounts/general_ledger.py\n\tmodified:   erpnext/accounts/report/accounts_receivable/accounts_receivable.py\n\tmodified:   erpnext/accounts/report/financial_statements.py\n\tmodified:   erpnext/accounts/report/trial_balance/trial_balance.py\n\tmodified:   erpnext/patches.txt\n\tmodified:   erpnext/patches/v13_0/fix_additional_cost_in_mfg_stock_entry.py\n\tnew file:   erpnext/patches/v14_0/set_period_start_end_date_in_pcv.py\n\tmodified:   erpnext/patches/v14_0/single_to_multi_dunning.py\n\tmodified:   erpnext/patches/v14_0/update_closing_balances.py\n\tmodified:   erpnext/stock/doctype/delivery_note/delivery_note.py\n\tmodified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py\n\tmodified:   erpnext/stock/doctype/stock_entry/stock_entry.py\n\tmodified:   erpnext/tests/test_perf.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/gl_entry/gl_entry.json\n\tboth modified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.json\n\tboth modified:   erpnext/stock/report/test_reports.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 23, 6, 25, 3, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-23 06:25:03 UTC): Cherry-pick of 8b7e1536160d885d487f174fa51797226bb166ad has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43435
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 8b7e153616.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/account_closing_balance/account_closing_balance.py
	modified:   erpnext/accounts/doctype/accounting_period/accounting_period.py
	modified:   erpnext/accounts/doctype/gl_entry/gl_entry.py
	modified:   erpnext/accounts/doctype/payment_reconciliation/test_payment_reconciliation.py
	modified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.js
	modified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.py
	modified:   erpnext/accounts/doctype/period_closing_voucher/test_period_closing_voucher.py
	modified:   erpnext/accounts/doctype/repost_accounting_ledger/repost_accounting_ledger.py
	modified:   erpnext/accounts/doctype/repost_accounting_ledger/test_repost_accounting_ledger.py
	modified:   erpnext/accounts/general_ledger.py
	modified:   erpnext/accounts/report/accounts_receivable/accounts_receivable.py
	modified:   erpnext/accounts/report/financial_statements.py
	modified:   erpnext/accounts/report/trial_balance/trial_balance.py
	modified:   erpnext/patches.txt
	modified:   erpnext/patches/v13_0/fix_additional_cost_in_mfg_stock_entry.py
	new file:   erpnext/patches/v14_0/set_period_start_end_date_in_pcv.py
	modified:   erpnext/patches/v14_0/single_to_multi_dunning.py
	modified:   erpnext/patches/v14_0/update_closing_balances.py
	modified:   erpnext/stock/doctype/delivery_note/delivery_note.py
	modified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py
	modified:   erpnext/stock/doctype/stock_entry/stock_entry.py
	modified:   erpnext/tests/test_perf.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/gl_entry/gl_entry.json
	both modified:   erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.json
	both modified:   erpnext/stock/report/test_reports.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2607011011,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2024-10-23 02:48:55+00:00,['ruthra-kumar'],2024-11-07 00:11:08+00:00,2024-10-23 10:47:19+00:00,https://github.com/frappe/erpnext/pull/43796,"[('translation', None)]",[],
2606837236,pull_request,closed,,refactor(Timesheet): move methods to Timesheet Detail,"The `Timesheet` class had many methods that don't operate on itself but on a `TimesheetDetail`. For better separation of responsibilities, this PR moves these to `TimesheetDetail`.

### Before (example)

`Timesheet` passes around the child row data and takes care of validating the child row.

```python
class Timesheet:
    def validate_time_logs(self):
        for data in self.get(""time_logs""):
            self.validate_project(data)

    def validate_project(self, data):
        if self.parent_project and self.parent_project != data.project:
            frappe.throw(
                _(""Row {0}: Project must be same as the one set in the Timesheet: {1}."").format(
                    data.idx, self.parent_project
                )
            )
```

`TimesheetDetail`  does nothing.

```python
class TimesheetDetail:
    pass
```

### After (example)

Less unrelated logic in `Timesheet`.

```python
class Timesheet:
    def validate_time_logs(self):
        for time_log in self.time_logs:
            time_log.validate_parent_project(self.parent_project)
```

`TimesheetDetail` takes care of validating itself.

```python
class TimesheetDetail:
    def validate_parent_project(self, parent_project: str):
        """"""Validate that project is same as Timesheet's parent project.""""""
        if parent_project and parent_project != self.project:
            frappe.throw(
                _(""Row {0}: Project must be same as the one set in the Timesheet: {1}."").format(
                    self.idx, parent_project
                )
            )
```",barredterra,2024-10-23 00:48:29+00:00,[],2024-11-12 00:10:53+00:00,2024-10-29 00:05:32+00:00,https://github.com/frappe/erpnext/pull/43794,[],[],
2606774213,pull_request,closed,,chore(Timesheet): add type hints,,barredterra,2024-10-22 23:53:41+00:00,[],2024-11-07 00:11:00+00:00,2024-10-23 22:52:42+00:00,https://github.com/frappe/erpnext/pull/43793,"[('backport version-15-hotfix', '')]",[],
2605791922,pull_request,closed,,fix: use correct variable in error message (backport #43790),"- Use correct variable in error message (resolves typo introduced in https://github.com/frappe/erpnext/pull/43778)
- Removed excessive variables that were only used one time<hr>This is an automatic backport of pull request #43790 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 15:28:26+00:00,['barredterra'],2024-11-07 00:11:28+00:00,2024-10-22 17:43:16+00:00,https://github.com/frappe/erpnext/pull/43792,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605791839,pull_request,closed,,fix: use correct variable in error message (backport #43790),"- Use correct variable in error message (resolves typo introduced in https://github.com/frappe/erpnext/pull/43778)
- Removed excessive variables that were only used one time<hr>This is an automatic backport of pull request #43790 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 15:28:24+00:00,['barredterra'],2024-11-07 00:11:26+00:00,2024-10-22 17:43:13+00:00,https://github.com/frappe/erpnext/pull/43791,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2430882705, 'issue_id': 2605791839, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 7, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-23 04:46:07 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2605682957,pull_request,closed,,fix: use correct variable in error message,"- Use correct variable in error message (resolves typo introduced in https://github.com/frappe/erpnext/pull/43778)
- Removed excessive variables that were only used one time",barredterra,2024-10-22 14:47:19+00:00,[],2024-11-07 00:11:29+00:00,2024-10-22 15:24:40+00:00,https://github.com/frappe/erpnext/pull/43790,"[('accounts', ''), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2605678903,pull_request,closed,,fix: only show pay button for specific doctype in portal (backport #43786),"Manual backport of https://github.com/frappe/erpnext/pull/43752, https://github.com/frappe/erpnext/pull/39235


backport version-14<hr>This is an automatic backport of pull request #43786 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 14:46:02+00:00,[],2024-11-07 00:11:30+00:00,2024-10-22 14:48:26+00:00,https://github.com/frappe/erpnext/pull/43789,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2429492523, 'issue_id': 2605678903, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d2e5b2aa1d22cdcaccc62b412732b8d12f9b1aa3 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43786\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit d2e5b2aa1d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_request/payment_request.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/templates/pages/order.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 22, 14, 46, 4, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-22 14:46:04 UTC): Cherry-pick of d2e5b2aa1d22cdcaccc62b412732b8d12f9b1aa3 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43786
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit d2e5b2aa1d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_request/payment_request.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/templates/pages/order.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2605669719,pull_request,closed,,fix: mapping purchase receipt from subcontracting receipt is not required (backport #43769),"![image](https://github.com/user-attachments/assets/fd569931-df6d-4266-97f5-f6234ca007da)

- When enabling the `Auto Create Purchase Receipt,` the purchase receipt is being mapped from subcontracting receipt.
- Because of that the taxes are not being mapped, and had to be entered manually.

Fixes Made:
- `Purchase Receipt` can be mapped from `Purchase order` and then required fields can be updated from subcontracting receipt.
- Refactor and make the process performant.


<hr>This is an automatic backport of pull request #43769 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 14:43:00+00:00,[],2024-11-07 00:11:13+00:00,2024-10-23 05:06:48+00:00,https://github.com/frappe/erpnext/pull/43788,[],[],
2605612023,pull_request,closed,,refactor: condition check before get_doc,no backport required,ljain112,2024-10-22 14:22:06+00:00,['vorasmit'],2024-11-07 00:11:31+00:00,2024-10-22 14:47:39+00:00,https://github.com/frappe/erpnext/pull/43787,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605606534,pull_request,closed,,fix: only show pay button for specific doctype in portal,"Manual backport of https://github.com/frappe/erpnext/pull/43752, https://github.com/frappe/erpnext/pull/39235


backport version-14",ljain112,2024-10-22 14:19:57+00:00,['vorasmit'],2024-11-07 00:11:32+00:00,2024-10-22 14:42:53+00:00,https://github.com/frappe/erpnext/pull/43786,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14')]",[],
2605575053,pull_request,closed,,fix: get stock accounts from the doc in `validate_stock_accounts` in Journal Entry (backport #43462),"Issue: 
`get_stock_accounts` is getting the stock accounts from the database instead of the current updated doc for Journal Entry.<hr>This is an automatic backport of pull request #43462 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 14:07:57+00:00,['vorasmit'],2024-11-07 00:11:34+00:00,2024-10-22 14:29:31+00:00,https://github.com/frappe/erpnext/pull/43785,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605574953,pull_request,closed,,fix: get stock accounts from the doc in `validate_stock_accounts` in Journal Entry (backport #43462),"Issue: 
`get_stock_accounts` is getting the stock accounts from the database instead of the current updated doc for Journal Entry.<hr>This is an automatic backport of pull request #43462 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 14:07:54+00:00,['vorasmit'],2024-11-14 00:11:06+00:00,2024-10-23 05:06:30+00:00,https://github.com/frappe/erpnext/pull/43784,"[('accounts', ''), ('released', None)]","[{'comment_id': 2446384430, 'issue_id': 2605574953, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.8 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 30, 9, 53, 51, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-30 09:53:51 UTC): :tada: This PR is included in version 14.74.8 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.8)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2605553930,pull_request,closed,,fix: Required Changes to Support e-Waybill Generation for Material Transfer Return (backport #43061),"**Requirement:**

- India Compliance will now also be supporting E-way bill for [`Material Transfer`](https://github.com/resilient-tech/india-compliance/pull/2594) and other Stock Entry purposes.

- So for `Stock Entry Return` supplier details will be required for E-way bill generation.

**Expected Working:**

- Supplier will also be shown when purpose is `Material Transfer` and and its `Inward` Stock Entry.

![image](https://github.com/user-attachments/assets/47e81dec-335f-4e96-b9ed-f191010ee740)
<hr>This is an automatic backport of pull request #43061 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 13:59:36+00:00,['vorasmit'],2024-11-07 00:11:35+00:00,2024-10-22 14:29:19+00:00,https://github.com/frappe/erpnext/pull/43783,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605503724,pull_request,closed,,fix: only show pay button for specific doctype in portal (backport #43752),"Issue: The pay button is shown for all the doctypes but payment request supports specific doctypes only.

Before:
not able to open Quotation Doctype
![image](https://github.com/user-attachments/assets/7e0687db-72de-4faf-a5cb-8f5ed3a99d71)
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
    response = renderer_instance.render()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
    html = self.get_html()
           ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/utils.py"", line 530, in cache_html_decorator
    html = func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 95, in get_html
    self.update_context()
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 163, in update_context
    data = self.run_pymodule_method(""get_context"")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 223, in run_pymodule_method
    return method(self.context)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 51, in get_context
    context.show_pay_button, context.pay_amount = get_payment_details(context.doc)
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 76, in get_payment_details
    amount = get_amount(doc)
             ^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 678, in get_amount
    if grand_total > 0:
       ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'grand_total' where it is not associated with a value
```

After:
![image](https://github.com/user-attachments/assets/1d9c338a-958e-4698-ad56-45815e0e3fb0)


related PR: https://github.com/frappe/erpnext/pull/39235
closes: https://github.com/frappe/erpnext/issues/43286
Frappe Support Issue: https://support.frappe.io/app/hd-ticket/23807

backport version-15-hotfix
backport version-14-hotfix<hr>This is an automatic backport of pull request #43752 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 13:43:04+00:00,[],2024-11-07 00:11:37+00:00,2024-10-22 13:46:30+00:00,https://github.com/frappe/erpnext/pull/43782,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2429328787, 'issue_id': 2605503724, 'author': 'mergify[bot]', 'body': 'Cherry-pick of fc2cac62c1ceb6522d5ff147694e516805f1ec93 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43752\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit fc2cac62c1.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_request/payment_request.py\n\tboth modified:   erpnext/templates/pages/order.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 22, 13, 43, 6, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-22 13:43:06 UTC): Cherry-pick of fc2cac62c1ceb6522d5ff147694e516805f1ec93 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43752
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit fc2cac62c1.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_request/payment_request.py
	both modified:   erpnext/templates/pages/order.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2605503482,pull_request,closed,,fix: only show pay button for specific doctype in portal (backport #43752),"Issue: The pay button is shown for all the doctypes but payment request supports specific doctypes only.

Before:
not able to open Quotation Doctype
![image](https://github.com/user-attachments/assets/7e0687db-72de-4faf-a5cb-8f5ed3a99d71)
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
    response = renderer_instance.render()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
    html = self.get_html()
           ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/utils.py"", line 530, in cache_html_decorator
    html = func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 95, in get_html
    self.update_context()
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 163, in update_context
    data = self.run_pymodule_method(""get_context"")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 223, in run_pymodule_method
    return method(self.context)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 51, in get_context
    context.show_pay_button, context.pay_amount = get_payment_details(context.doc)
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 76, in get_payment_details
    amount = get_amount(doc)
             ^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 678, in get_amount
    if grand_total > 0:
       ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'grand_total' where it is not associated with a value
```

After:
![image](https://github.com/user-attachments/assets/1d9c338a-958e-4698-ad56-45815e0e3fb0)


related PR: https://github.com/frappe/erpnext/pull/39235
closes: https://github.com/frappe/erpnext/issues/43286
Frappe Support Issue: https://support.frappe.io/app/hd-ticket/23807

backport version-15-hotfix
backport version-14-hotfix<hr>This is an automatic backport of pull request #43752 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 13:43:00+00:00,[],2024-11-07 00:11:38+00:00,2024-10-22 13:46:14+00:00,https://github.com/frappe/erpnext/pull/43781,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2429328631, 'issue_id': 2605503482, 'author': 'mergify[bot]', 'body': 'Cherry-pick of fc2cac62c1ceb6522d5ff147694e516805f1ec93 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43752\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit fc2cac62c1.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/payment_request/payment_request.py\n\tboth modified:   erpnext/templates/pages/order.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 22, 13, 43, 2, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-22 13:43:02 UTC): Cherry-pick of fc2cac62c1ceb6522d5ff147694e516805f1ec93 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43752
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit fc2cac62c1.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/payment_request/payment_request.py
	both modified:   erpnext/templates/pages/order.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2605226896,pull_request,closed,,refactor: validate_return_against_account (backport #43778),"Show a better error message:

- Tell the user what to do
- Fetch the field label from `self.meta` and translate it
- Remove excessive quoting (bold is enough highlighting)

Before:

![Bildschirmfoto 2024-10-22 um 13 14 17](https://github.com/user-attachments/assets/8ec0132e-a113-4a31-b2ad-3086b25f2559)

After:

![Bildschirmfoto 2024-10-22 um 13 13 55](https://github.com/user-attachments/assets/c48b44b9-8e2a-4913-906c-ffa236bd4ff5)

(don't worry about the incorrectly configured naming series in my original invoice)<hr>This is an automatic backport of pull request #43778 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 11:51:39+00:00,['barredterra'],2024-11-07 00:11:40+00:00,2024-10-22 12:10:40+00:00,https://github.com/frappe/erpnext/pull/43780,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605210965,pull_request,closed,,refactor: validate_return_against_account (backport #43778),"Show a better error message:

- Tell the user what to do
- Fetch the field label from `self.meta` and translate it
- Remove excessive quoting (bold is enough highlighting)

Before:

![Bildschirmfoto 2024-10-22 um 13 14 17](https://github.com/user-attachments/assets/8ec0132e-a113-4a31-b2ad-3086b25f2559)

After:

![Bildschirmfoto 2024-10-22 um 13 13 55](https://github.com/user-attachments/assets/c48b44b9-8e2a-4913-906c-ffa236bd4ff5)

(don't worry about the incorrectly configured naming series in my original invoice)<hr>This is an automatic backport of pull request #43778 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 11:45:51+00:00,['barredterra'],2024-11-07 00:11:25+00:00,2024-10-22 12:06:37+00:00,https://github.com/frappe/erpnext/pull/43779,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2430882757, 'issue_id': 2605210965, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 10, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-23 04:46:10 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2605140701,pull_request,closed,,refactor: validate_return_against_account,"Show a better error message:

- Tell the user what to do
- Fetch the field label from `self.meta` and translate it
- Remove excessive quoting (bold is enough highlighting)

Before:

![Bildschirmfoto 2024-10-22 um 13 14 17](https://github.com/user-attachments/assets/8ec0132e-a113-4a31-b2ad-3086b25f2559)

After:

![Bildschirmfoto 2024-10-22 um 13 13 55](https://github.com/user-attachments/assets/c48b44b9-8e2a-4913-906c-ffa236bd4ff5)

(don't worry about the incorrectly configured naming series in my original invoice)",barredterra,2024-10-22 11:17:42+00:00,[],2024-11-07 00:11:41+00:00,2024-10-22 11:44:28+00:00,https://github.com/frappe/erpnext/pull/43778,"[('accounts', ''), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2605054896,pull_request,closed,,fix(deferred_revenue): Escape account in query (backport #43775),<hr>This is an automatic backport of pull request #43775 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-22 10:42:48+00:00,[],2024-11-07 00:11:42+00:00,2024-10-22 11:10:11+00:00,https://github.com/frappe/erpnext/pull/43777,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2605053638,pull_request,closed,,fix(deferred_revenue): Escape account in query (backport #43775),<hr>This is an automatic backport of pull request #43775 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-22 10:42:12+00:00,[],2024-11-07 00:11:24+00:00,2024-10-22 11:10:02+00:00,https://github.com/frappe/erpnext/pull/43776,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2430882797, 'issue_id': 2605053638, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 13, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-23 04:46:13 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2604983995,pull_request,closed,,fix(deferred_revenue): Escape account in query,,cogk,2024-10-22 10:14:40+00:00,['ruthra-kumar'],2024-11-07 00:11:43+00:00,2024-10-22 10:41:08+00:00,https://github.com/frappe/erpnext/pull/43775,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2604862797,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2024-10-22 09:36:17+00:00,[],2024-11-07 00:11:16+00:00,2024-10-23 04:47:07+00:00,https://github.com/frappe/erpnext/pull/43774,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2604862727,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2024-10-22 09:36:16+00:00,[],2024-11-07 00:11:27+00:00,2024-10-23 04:44:40+00:00,https://github.com/frappe/erpnext/pull/43773,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2430882660, 'issue_id': 2604862727, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 4, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2024-10-23 04:46:04 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2604515983,pull_request,closed,,chore: revert use selectbox instead of checkbox ,Reverts frappe/erpnext#43703,khushi8112,2024-10-22 07:22:21+00:00,[],2024-11-07 00:11:44+00:00,2024-10-22 07:46:58+00:00,https://github.com/frappe/erpnext/pull/43770,[],[],
2604474547,pull_request,closed,,fix: mapping purchase receipt from subcontracting receipt is not required,"![image](https://github.com/user-attachments/assets/fd569931-df6d-4266-97f5-f6234ca007da)

- When enabling the `Auto Create Purchase Receipt,` the purchase receipt is being mapped from subcontracting receipt.
- Because of that the taxes are not being mapped, and had to be entered manually.

Fixes Made:
- `Purchase Receipt` can be mapped from `Purchase order` and then required fields can be updated from subcontracting receipt.
- Refactor and make the process performant.


",Ninad1306,2024-10-22 07:03:36+00:00,[],2024-11-07 00:11:15+00:00,2024-10-22 14:42:08+00:00,https://github.com/frappe/erpnext/pull/43769,"[('backport version-15-hotfix', '')]",[],
2604413510,pull_request,closed,,refactor: allow unreconcile on bank and cash entry type journals (backport #43766),Extend `UnReconcile` action on Journals of type `Bank Entry` and `Cash Entry`.<hr>This is an automatic backport of pull request #43766 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-22 06:36:13+00:00,['ruthra-kumar'],2024-11-07 00:11:33+00:00,2024-10-22 06:43:04+00:00,https://github.com/frappe/erpnext/pull/43768,[],"[{'comment_id': 2429452378, 'issue_id': 2604413510, 'author': 'ljain112', 'body': 'https://github.com/frappe/erpnext/issues/43732', 'created_at': datetime.datetime(2024, 10, 22, 14, 30, 31, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-10-22 14:30:31 UTC): https://github.com/frappe/erpnext/issues/43732

"
2604412705,pull_request,closed,,refactor: allow unreconcile on bank and cash entry type journals (backport #43766),Extend `UnReconcile` action on Journals of type `Bank Entry` and `Cash Entry`.<hr>This is an automatic backport of pull request #43766 done by [Mergify](https://mergify.com).,mergify[bot],2024-10-22 06:35:40+00:00,['ruthra-kumar'],2024-11-07 00:11:23+00:00,2024-10-22 06:42:53+00:00,https://github.com/frappe/erpnext/pull/43767,"[('released', None)]","[{'comment_id': 2430882848, 'issue_id': 2604412705, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 16, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-23 04:46:16 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2604405517,pull_request,closed,,refactor: allow unreconcile on bank and cash entry type journals,Extend `UnReconcile` action on Journals of type `Bank Entry` and `Cash Entry`.,ruthra-kumar,2024-10-22 06:31:24+00:00,[],2024-11-07 00:11:47+00:00,2024-10-22 06:34:41+00:00,https://github.com/frappe/erpnext/pull/43766,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2604222329,pull_request,closed,, fix: coupon code validation logic (backport #43761),"Ensure errors are thrown if the coupon validity hasn't started, has expired, or if the maximum usage has been exceeded.

Previously, the condition was always satisfied with if coupon.valid_from:, which prevented the elif condition from being reached.<hr>This is an automatic backport of pull request #43761 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 04:37:53+00:00,[],2024-11-07 00:11:48+00:00,2024-10-22 05:03:41+00:00,https://github.com/frappe/erpnext/pull/43765,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2428229778, 'issue_id': 2604222329, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d04257a32dd705868cc662399dcc893003a5b59c has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43761\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit d04257a32d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/pricing_rule/utils.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 22, 4, 37, 54, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-22 04:37:54 UTC): Cherry-pick of d04257a32dd705868cc662399dcc893003a5b59c has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43761
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit d04257a32d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/pricing_rule/utils.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2604222275,pull_request,closed,, fix: coupon code validation logic (backport #43761),"Ensure errors are thrown if the coupon validity hasn't started, has expired, or if the maximum usage has been exceeded.

Previously, the condition was always satisfied with if coupon.valid_from:, which prevented the elif condition from being reached.<hr>This is an automatic backport of pull request #43761 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-22 04:37:50+00:00,[],2024-11-07 00:11:22+00:00,2024-10-22 05:09:10+00:00,https://github.com/frappe/erpnext/pull/43764,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2428229677, 'issue_id': 2604222275, 'author': 'mergify[bot]', 'body': 'Cherry-pick of d04257a32dd705868cc662399dcc893003a5b59c has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-43761\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit d04257a32d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/pricing_rule/utils.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 22, 4, 37, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2430882891, 'issue_id': 2604222275, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 19, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-22 04:37:52 UTC): Cherry-pick of d04257a32dd705868cc662399dcc893003a5b59c has failed:
```
On branch mergify/bp/version-14-hotfix/pr-43761
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit d04257a32d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/pricing_rule/utils.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2024-10-23 04:46:19 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2603505857,pull_request,closed,,feat: added task assignee email field in asset maintenance log (backport #43378),"closes https://github.com/frappe/erpnext/issues/43298
`no-docs`<hr>This is an automatic backport of pull request #43378 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 19:44:37+00:00,['khushi8112'],2024-11-07 00:11:46+00:00,2024-10-22 06:52:39+00:00,https://github.com/frappe/erpnext/pull/43763,"[('needs-tests', 'This PR needs automated unit-tests.'), ('conflicts', None)]","[{'comment_id': 2427576391, 'issue_id': 2603505857, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 5911934dc75eb77f11fce49cd6621f9f554217f5 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-43378\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 5911934dc7.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/assets/doctype/asset_maintenance/asset_maintenance.py\n\tmodified:   erpnext/assets/doctype/asset_maintenance_log/asset_maintenance_log.py\n\tnew file:   erpnext/patches/v15_0/update_task_assignee_email_field_in_asset_maintenance_log.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/assets/doctype/asset_maintenance_log/asset_maintenance_log.json\n\tboth modified:   erpnext/patches.txt\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2024, 10, 21, 19, 44, 39, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2024-10-21 19:44:39 UTC): Cherry-pick of 5911934dc75eb77f11fce49cd6621f9f554217f5 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-43378
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 5911934dc7.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/assets/doctype/asset_maintenance/asset_maintenance.py
	modified:   erpnext/assets/doctype/asset_maintenance_log/asset_maintenance_log.py
	new file:   erpnext/patches/v15_0/update_task_assignee_email_field_in_asset_maintenance_log.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/assets/doctype/asset_maintenance_log/asset_maintenance_log.json
	both modified:   erpnext/patches.txt

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2603393972,pull_request,closed,,fix: handle NoneType error when updating ordered_qty in SO for remove…,Added fallback to prevent `NoneType` error by setting `prev_ordered_qty` to 0 if it is None.,bhavesh95863,2024-10-21 18:51:10+00:00,['ruthra-kumar'],2024-11-24 00:13:04+00:00,2024-11-08 05:09:36+00:00,https://github.com/frappe/erpnext/pull/43762,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]","[{'comment_id': 2456265870, 'issue_id': 2603393972, 'author': 'ruthra-kumar', 'body': '@bhavesh95863 \r\n\r\nCould you provide replication steps?', 'created_at': datetime.datetime(2024, 11, 5, 5, 27, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2457776198, 'issue_id': 2603393972, 'author': 'bhavesh95863', 'body': '@ruthra-kumar  you can able to regenerate issue as per the steps mentioned in this issue.\r\n\r\n https://github.com/frappe/erpnext/issues/43758', 'created_at': datetime.datetime(2024, 11, 5, 17, 29, 25, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-11-05 05:27:45 UTC): @bhavesh95863 

Could you provide replication steps?

bhavesh95863 (Issue Creator) on (2024-11-05 17:29:25 UTC): @ruthra-kumar  you can able to regenerate issue as per the steps mentioned in this issue.

 https://github.com/frappe/erpnext/issues/43758

"
2603334010,pull_request,closed,, fix: coupon code validation logic,"Ensure errors are thrown if the coupon validity hasn't started, has expired, or if the maximum usage has been exceeded.

Previously, the condition was always satisfied with if coupon.valid_from:, which prevented the elif condition from being reached.",bhavesh95863,2024-10-21 18:24:14+00:00,[],2024-11-08 00:11:53+00:00,2024-10-22 04:36:26+00:00,https://github.com/frappe/erpnext/pull/43761,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2602825316,pull_request,closed,,fix: lead create opp from connection not working (backport #43759),"Creating opportunity, quotation or prospect from connection tab doesn't work
<img width=""480"" alt=""image"" src=""https://github.com/user-attachments/assets/81f260d5-d818-4bf4-afb4-2c39c64f1968"">
<hr>This is an automatic backport of pull request #43759 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 14:58:17+00:00,['shariquerik'],2024-11-05 00:11:07+00:00,2024-10-21 15:11:29+00:00,https://github.com/frappe/erpnext/pull/43760,[],[],
2602795950,pull_request,closed,,fix: lead create opp from connection not working,"Creating opportunity, quotation or prospect from connection tab doesn't work
<img width=""480"" alt=""image"" src=""https://github.com/user-attachments/assets/81f260d5-d818-4bf4-afb4-2c39c64f1968"">
",shariquerik,2024-10-21 14:48:39+00:00,[],2024-11-05 00:11:08+00:00,2024-10-21 14:54:58+00:00,https://github.com/frappe/erpnext/pull/43759,"[('frappe-support', ''), ('backport version-15-hotfix', '')]",[],
2602282098,pull_request,closed,,fix: correct calculation of base_grand_total,"On the JavaScript side, the base_grand_total value is incorrect when taxes are applied because total_taxes_and_charges is calculated after the base_grand_total, leading to inaccuracies. The same function in Python is correct, which is why the value is updated correctly after saving. Please check the corresponding Python function at the following link: [GitHub - erpnext-taxes_and_totals.py](https://github.com/frappe/erpnext/blob/develop/erpnext/controllers/taxes_and_totals.py#L566).",milanpethani,2024-10-21 11:41:02+00:00,[],2025-01-14 00:10:00+00:00,2024-12-30 16:12:44+00:00,https://github.com/frappe/erpnext/pull/43756,"[('inactive', '')]","[{'comment_id': 2464105509, 'issue_id': 2602282098, 'author': 'rohitwaghchaure', 'body': '@milanpethani can you add the GIF which describe the issue?', 'created_at': datetime.datetime(2024, 11, 8, 8, 24, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2464151639, 'issue_id': 2602282098, 'author': 'milanpethani', 'body': '@rohitwaghchaure Please have a look at the GIF below.\r\n\r\nhttps://github.com/user-attachments/assets/c9ad4d5d-8500-4aee-82d0-720b59f466aa', 'created_at': datetime.datetime(2024, 11, 8, 8, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2504808631, 'issue_id': 2602282098, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 11, 27, 21, 39, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2505307882, 'issue_id': 2602282098, 'author': 'milanpethani', 'body': '@rohitwaghchaure can you please check the video which describes the issue and update it asap, Thanks.', 'created_at': datetime.datetime(2024, 11, 28, 5, 46, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2557410813, 'issue_id': 2602282098, 'author': 'stale[bot]', 'body': ""This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing."", 'created_at': datetime.datetime(2024, 12, 20, 17, 14, 35, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-11-08 08:24:09 UTC): @milanpethani can you add the GIF which describe the issue?

milanpethani (Issue Creator) on (2024-11-08 08:50:00 UTC): @rohitwaghchaure Please have a look at the GIF below.

https://github.com/user-attachments/assets/c9ad4d5d-8500-4aee-82d0-720b59f466aa

stale[bot] on (2024-11-27 21:39:10 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

milanpethani (Issue Creator) on (2024-11-28 05:46:44 UTC): @rohitwaghchaure can you please check the video which describes the issue and update it asap, Thanks.

stale[bot] on (2024-12-20 17:14:35 UTC): This pull request has been automatically marked as inactive because it has not had recent activity. It will be closed within 3 days if no further activity occurs, but it only takes a comment to keep a contribution alive :) Also, even if it is closed, you can always reopen the PR when you're ready. Thank you for contributing.

"
2602070000,pull_request,closed,,fix: Add Company Filter,"- In Project dt ""Sales Order"" field
- In Sales Order dt Project field

* In the Project doctype, I can see and select sales orders from different companies, which should not be the case. Similarly, in the Sales Order doctype, when I select a specific company, I should only see projects associated with that company. However, the dropdown displays all projects, including those associated with other companies. This issue is also present on the demo site.

![image](https://github.com/user-attachments/assets/81e69f48-aecc-4690-91f5-43da10a5710b)
",IamSaiyyamChhetri,2024-10-21 10:21:23+00:00,['ruthra-kumar'],2024-11-07 00:11:07+00:00,2024-10-23 11:19:29+00:00,https://github.com/frappe/erpnext/pull/43755,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2602031947,pull_request,closed,,fix: Workspace link for Work Order Consumed Materials report (backport #43753),"Issue: The link was not working, opening the report document instead of the report view.<hr>This is an automatic backport of pull request #43753 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 10:05:28+00:00,['nabinhait'],2024-11-05 00:11:09+00:00,2024-10-21 11:45:35+00:00,https://github.com/frappe/erpnext/pull/43754,[],[],
2601814389,pull_request,closed,,fix: Workspace link for Work Order Consumed Materials report,"Issue: The link was not working, opening the report document instead of the report view.",nabinhait,2024-10-21 08:46:16+00:00,[],2024-11-05 00:11:10+00:00,2024-10-21 10:03:30+00:00,https://github.com/frappe/erpnext/pull/43753,"[('backport version-15-hotfix', '')]",[],
2601783852,pull_request,closed,,fix: only show pay button for specific doctype in portal,"Issue: The pay button is shown for all the doctypes but payment request supports specific doctypes only.

Before:
not able to open Quotation Doctype
![image](https://github.com/user-attachments/assets/7e0687db-72de-4faf-a5cb-8f5ed3a99d71)
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
    response = renderer_instance.render()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
    html = self.get_html()
           ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/utils.py"", line 530, in cache_html_decorator
    html = func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 95, in get_html
    self.update_context()
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 163, in update_context
    data = self.run_pymodule_method(""get_context"")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 223, in run_pymodule_method
    return method(self.context)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 51, in get_context
    context.show_pay_button, context.pay_amount = get_payment_details(context.doc)
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/templates/pages/order.py"", line 76, in get_payment_details
    amount = get_amount(doc)
             ^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 678, in get_amount
    if grand_total > 0:
       ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'grand_total' where it is not associated with a value
```

After:
![image](https://github.com/user-attachments/assets/1d9c338a-958e-4698-ad56-45815e0e3fb0)


related PR: https://github.com/frappe/erpnext/pull/39235
closes: https://github.com/frappe/erpnext/issues/43286
Frappe Support Issue: https://support.frappe.io/app/hd-ticket/23807

backport version-15-hotfix
backport version-14-hotfix",ljain112,2024-10-21 08:35:38+00:00,[],2024-11-07 00:11:39+00:00,2024-10-22 13:39:06+00:00,https://github.com/frappe/erpnext/pull/43752,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2601555143,pull_request,closed,,fix: Freeze Screen on load invoices on POS Closing Entry (backport #42461),"When creating a `POS Closing Entry`, when I enter the ""Opening Entry"" all invoices are loaded, however, when there are many invoices (250 - 500), the system does not display any message and leaves the screen available for clicking.

If the user clicks on save, the javascript will restart this process by executing the `before_save` method and reloading the invoices. [Line ](https://github.com/frappe/erpnext/blob/06e2d7265c2f7dceedf3fc75462f1bb3190b6d4a/erpnext/accounts/doctype/pos_closing_entry/pos_closing_entry.js#L135)

This creates problems with the totals received by payment method. To avoid this, please notify the user who is uploading the invoices and prevent to start another action before finish to load all invoices

<hr>This is an automatic backport of pull request #42461 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 06:58:29+00:00,[],2024-11-05 00:11:14+00:00,2024-10-21 07:37:54+00:00,https://github.com/frappe/erpnext/pull/43748,[],[],
2601553518,pull_request,closed,,fix: Freeze Screen on load invoices on POS Closing Entry (backport #42461),"When creating a `POS Closing Entry`, when I enter the ""Opening Entry"" all invoices are loaded, however, when there are many invoices (250 - 500), the system does not display any message and leaves the screen available for clicking.

If the user clicks on save, the javascript will restart this process by executing the `before_save` method and reloading the invoices. [Line ](https://github.com/frappe/erpnext/blob/06e2d7265c2f7dceedf3fc75462f1bb3190b6d4a/erpnext/accounts/doctype/pos_closing_entry/pos_closing_entry.js#L135)

This creates problems with the totals received by payment method. To avoid this, please notify the user who is uploading the invoices and prevent to start another action before finish to load all invoices

<hr>This is an automatic backport of pull request #42461 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 06:57:54+00:00,[],2024-11-07 00:11:18+00:00,2024-10-21 07:38:02+00:00,https://github.com/frappe/erpnext/pull/43747,"[('released', None)]","[{'comment_id': 2430883099, 'issue_id': 2601553518, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.74.7 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 10, 23, 4, 46, 31, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-10-23 04:46:31 UTC): :tada: This PR is included in version 14.74.7 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.74.7)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2601540801,pull_request,closed,,fix: party_balance based on company in payment entry (backport #43720),"In Payment Entry, Party Balance is not as per company.

Steps to replicate:
- Create two companies
- Create a supplier and make invoices for both companies.
- Now create a Payment Entry and check the party balance field.

![image](https://github.com/user-attachments/assets/1cbf0d1e-e03b-4c8b-b6ea-e0497905ee41)
 
backport version-15
backport version-14


Frappe Support Issue: https://support.frappe.io/app/hd-ticket/23720
<hr>This is an automatic backport of pull request #43720 done by [Mergify](https://mergify.com).",mergify[bot],2024-10-21 06:53:51+00:00,[],2024-11-05 00:11:13+00:00,2024-10-21 07:38:12+00:00,https://github.com/frappe/erpnext/pull/43746,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
