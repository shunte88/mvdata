id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2444742528,issue,closed,completed,Bug OR Feature Request - Has Serial No ( No Auto ) Has Batch No - ( Is Auto ),"### Information about bug

![Screenshot 2024-08-02 at 4 43 22 PM](https://github.com/user-attachments/assets/8f292346-cf5d-4e2e-b043-3f6618a4b26f)

When we make stock Reco 

I can make the serial no manually while saving it asking for the batch no. it should create the auto based on the Series selected on Item Master.

![Screenshot 2024-08-02 at 4 47 03 PM](https://github.com/user-attachments/assets/338df42b-6095-4e2f-bfbb-75d31646f9fd)


### Module

stock

### Version

ERPNext: v15.31.3 (version-15)

Frappe Framework: v15.36.1 (version-15)



### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",dineshpanchal93,2024-08-02 11:18:02+00:00,[],2024-10-10 00:09:59+00:00,2024-09-25 16:45:12+00:00,https://github.com/frappe/erpnext/issues/42600,"[('bug', None)]","[{'comment_id': 2310814518, 'issue_id': 2444742528, 'author': 'toofun666', 'body': 'SABB introduced lots of bugs for professional users.', 'created_at': datetime.datetime(2024, 8, 26, 18, 28, 40, tzinfo=datetime.timezone.utc)}]","toofun666 on (2024-08-26 18:28:40 UTC): SABB introduced lots of bugs for professional users.

"
2444729882,issue,open,,Proper svg path is not configured in percentage chart  when all tasks are on track in Delayed Tasks Summary ,"### Information about bug

<img width=""1266"" alt=""Screenshot 2024-08-02 at 4 37 01 PM"" src=""https://github.com/user-attachments/assets/eae9b06f-059c-4a56-8a57-a043bdbe7247"">
Need to configure a little red svg path at the right end of the percentage chart

### Module

projects

### Version

ERPNext: v14.x.x-develop () (develop)

Frappe Framework: v15.36.1 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Siddhantsingh1230,2024-08-02 11:09:54+00:00,[],2024-08-28 10:39:09+00:00,,https://github.com/frappe/erpnext/issues/42599,"[('bug', None)]","[{'comment_id': 2314956503, 'issue_id': 2444729882, 'author': 'nbfleet', 'body': ""**1. Summary**\r\nIssue: When all tasks are on track, the percentage chart does not display correctly, leaving an unintended thin sliver of the 'Delayed' color (red) instead of showing 100% in the 'On Track' color (green).\r\n\r\n**2. Description**\r\nIssue: The Delayed Tasks Summary chart in ERPNext does not correctly render the SVG when all tasks are on track. Despite there being no delayed tasks, the chart incorrectly shows a small section in the 'Delayed' color. The issue seems to stem from an improper configuration of the SVG path or percentage calculation.\r\n\r\nImpact: The inaccurate visual representation could mislead users into thinking there are delayed tasks when there are none, causing confusion and potentially affecting decision-\r\nmaking.\r\n\r\n**3. Software Version**\r\nERPNext Version: 15.18.1\r\nFrappe Version: 15.34.1\r\n\r\n**4. Steps to Reproduce**\r\n1. Go to the Delayed Tasks Summary report in ERPNext.\r\n2. Ensure that all tasks are completed on time or are on track, resulting in zero delays.\r\n3. Observe the percentage chart displayed at the bottom of the report.\r\n4. Notice that the chart still shows a thin sliver of the 'Delayed' color despite no delayed tasks being present.\r\n\r\n**5. Observed Result**\r\nVisual Issue: The chart incorrectly shows a small section in red (#CB4B5F), even when all tasks are on track, instead of displaying 100% green (#84D5BA).\r\n\r\n**6. Expected Result**\r\nCorrect Visual: The chart should display 100% in green (#84D5BA) when all tasks are on track, with no indication of delays.\r\n\r\n**7. Diagnosis**\r\n\r\nInitial Investigation\r\nThe issue likely stems from the logic that generates the SVG for the percentage chart, where the 'Delayed' section is not properly excluded when its value is zero.\r\n\r\nRoot Cause Analysis\r\nThe root cause appears to be an issue in the code where the Delayed segment is not properly handled in the chart configuration when its value is zero. The chart should entirely omit the 'Delayed' section when there are no delayed tasks, but it currently does not.\r\n\r\n**8. Solution Changes Made**\r\nFile Path: apps/frappe/frappe/core/doctype/user/user.py\r\n\r\nLine No.: 1058\r\n\r\nModification: Adjusted the chart rendering logic in the get_chart_data function to ensure that when the Delayed value is 0, the chart is displayed as 100% in the On Track color (#84D5BA) without showing any part of the Delayed color.\r\n\r\n**Before:-**\r\n![image (8)](https://github.com/user-attachments/assets/759de4b4-18be-46dd-a0c5-3f07b042d419)\r\n\r\n![image (9)](https://github.com/user-attachments/assets/cbac6727-79a4-49e0-8486-d560fa8a833c)\r\n\r\n**After:-**\r\n![image (7)](https://github.com/user-attachments/assets/4df1bdb6-4127-4994-807e-f3d6f12cbec1)\r\n\r\n![image (10)](https://github.com/user-attachments/assets/e7953bfc-0190-4010-bbc7-44d32c61deae)"", 'created_at': datetime.datetime(2024, 8, 28, 10, 39, 8, tzinfo=datetime.timezone.utc)}]","nbfleet on (2024-08-28 10:39:08 UTC): **1. Summary**
Issue: When all tasks are on track, the percentage chart does not display correctly, leaving an unintended thin sliver of the 'Delayed' color (red) instead of showing 100% in the 'On Track' color (green).

**2. Description**
Issue: The Delayed Tasks Summary chart in ERPNext does not correctly render the SVG when all tasks are on track. Despite there being no delayed tasks, the chart incorrectly shows a small section in the 'Delayed' color. The issue seems to stem from an improper configuration of the SVG path or percentage calculation.

Impact: The inaccurate visual representation could mislead users into thinking there are delayed tasks when there are none, causing confusion and potentially affecting decision-
making.

**3. Software Version**
ERPNext Version: 15.18.1
Frappe Version: 15.34.1

**4. Steps to Reproduce**
1. Go to the Delayed Tasks Summary report in ERPNext.
2. Ensure that all tasks are completed on time or are on track, resulting in zero delays.
3. Observe the percentage chart displayed at the bottom of the report.
4. Notice that the chart still shows a thin sliver of the 'Delayed' color despite no delayed tasks being present.

**5. Observed Result**
Visual Issue: The chart incorrectly shows a small section in red (#CB4B5F), even when all tasks are on track, instead of displaying 100% green (#84D5BA).

**6. Expected Result**
Correct Visual: The chart should display 100% in green (#84D5BA) when all tasks are on track, with no indication of delays.

**7. Diagnosis**

Initial Investigation
The issue likely stems from the logic that generates the SVG for the percentage chart, where the 'Delayed' section is not properly excluded when its value is zero.

Root Cause Analysis
The root cause appears to be an issue in the code where the Delayed segment is not properly handled in the chart configuration when its value is zero. The chart should entirely omit the 'Delayed' section when there are no delayed tasks, but it currently does not.

**8. Solution Changes Made**
File Path: apps/frappe/frappe/core/doctype/user/user.py

Line No.: 1058

Modification: Adjusted the chart rendering logic in the get_chart_data function to ensure that when the Delayed value is 0, the chart is displayed as 100% in the On Track color (#84D5BA) without showing any part of the Delayed color.

**Before:-**
![image (8)](https://github.com/user-attachments/assets/759de4b4-18be-46dd-a0c5-3f07b042d419)

![image (9)](https://github.com/user-attachments/assets/cbac6727-79a4-49e0-8486-d560fa8a833c)

**After:-**
![image (7)](https://github.com/user-attachments/assets/4df1bdb6-4127-4994-807e-f3d6f12cbec1)

![image (10)](https://github.com/user-attachments/assets/e7953bfc-0190-4010-bbc7-44d32c61deae)

"
2444542685,issue,closed,completed,"If you create a contact or address from a opportunity, it is linked with the opportunity but you can not see it in the opportunity","### Information about bug

Hello everyone :),

we have discovered a little Bug in ERPNext.
If you create a contact or an address from a opportunity, the address or contact gets linked with the opportunity, but you can not see the contact or address inside your opportunity.

If you want to see it in your opportunity you have to link it with corresponding reference document. This can be a lead or a customer for example. We think is not the correct/intented workflow.

To give a better example, we have made a video, which will describe the problem and shows how to reproduce the bug.

Thank you for considering the issue!


https://github.com/user-attachments/assets/a0235b5a-c363-4d7f-ae11-a848760ead4e



### Module

CRM

### Version

Frappe Version 15
ERPNext Version 15

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",Didiman1998,2024-08-02 09:38:28+00:00,[],2024-08-24 00:09:46+00:00,2024-08-07 14:28:37+00:00,https://github.com/frappe/erpnext/issues/42595,"[('bug', None)]","[{'comment_id': 2265057746, 'issue_id': 2444542685, 'author': 'Didiman1998', 'body': 'https://github.com/frappe/erpnext/pull/42596', 'created_at': datetime.datetime(2024, 8, 2, 10, 21, 15, tzinfo=datetime.timezone.utc)}]","Didiman1998 (Issue Creator) on (2024-08-02 10:21:15 UTC): https://github.com/frappe/erpnext/pull/42596

"
2444511401,issue,open,,Allow Multiple UOM for Operation Cost Calculation in Workstation,"**Feature Request: Allow Multiple UOM for Operation Cost Calculation in Workstation**

**Description:**
We need the ability to use multiple units of measure (UOM) for calculating operation costs in the workstation module. Currently, only the ""per hour"" UOM is supported, but we have several workstations that require different UOMs for accurate operation cost calculations.

**Current Behavior:**
The workstation module supports only a single UOM (""per hour"") for operation cost calculation. This limitation causes inaccuracies in cost assessments for workstations that operate with different UOMs.
![Workstation operation cost](https://github.com/user-attachments/assets/b30f6e1a-435e-4386-bddb-927942049e61)

**Proposed Solution:**
Introduce a feature to configure multiple UOMs for different operations within the workstation module. This feature should allow users to define the UOM for each operation, ensuring accurate cost calculations based on the specified UOM.
Some Workstations require UOM as Meter, Kg for actual cost calculations. We can not convert it into Per Hour or Per Minute cost.

**Benefits:**
- Increased accuracy in operation cost calculations.
- Greater flexibility in managing operations with different UOMs.
- Enhanced usability of the workstation module for various industries and processes.

**Use Cases:**
- Manufacturing processes involving operations with UOMs such as length, weight, volume, etc., in addition to time-based UOMs.
- Workstations requiring different cost calculation metrics for precise financial planning and analysis.

**Additional Information:**
This feature would greatly enhance operational efficiency and cost management capabilities in ERPNext.
@rohitwaghchaure ",parasonit,2024-08-02 09:23:20+00:00,[],2024-08-02 09:29:47+00:00,,https://github.com/frappe/erpnext/issues/42594,"[('feature-request', None)]",[],
2444287976,issue,open,,"To Show ""Stock on hand"" for each item on sales quotes,sales orders and sales invoice's on creation of these doctypes.","<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
When creating any of the sales doctypes we have no view of our ""stock on hand"" at the specific moment , we have to open a new page to see the items stock on hand or pull the stock balances , this makes for tediuos work.

**Describe the solution you'd like**
On creation of new sales docs , the system should show stock availibilty to the user , but should not print on the clients/customers print out once processed , this is for internal use.
**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.
None-Nada-Zero-Zelch
**Additional context**
Add any other context or screenshots about the feature request here.
",msalim79,2024-08-02 07:34:04+00:00,[],2024-08-13 20:55:30+00:00,,https://github.com/frappe/erpnext/issues/42591,"[('feature-request', None)]","[{'comment_id': 2270834936, 'issue_id': 2444287976, 'author': 'thida-bcn', 'body': '![image](https://github.com/user-attachments/assets/2c16f3af-90cf-49eb-8f4f-1828c9ac869e)\r\nyou can check actual qty', 'created_at': datetime.datetime(2024, 8, 6, 9, 35, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287122342, 'issue_id': 2444287976, 'author': 'MhmedRjb', 'body': ""The feature you're referring to already exists in the Sales Invoice as 'Available Qty at Warehouse' column in the items table. and in Sales Order, you can find this information in the 'Planning' section of the items table."", 'created_at': datetime.datetime(2024, 8, 13, 20, 55, 29, tzinfo=datetime.timezone.utc)}]","thida-bcn on (2024-08-06 09:35:22 UTC): ![image](https://github.com/user-attachments/assets/2c16f3af-90cf-49eb-8f4f-1828c9ac869e)
you can check actual qty

MhmedRjb on (2024-08-13 20:55:29 UTC): The feature you're referring to already exists in the Sales Invoice as 'Available Qty at Warehouse' column in the items table. and in Sales Order, you can find this information in the 'Planning' section of the items table.

"
2442776420,issue,closed,completed,Purchase Transactions do not allow purchase to an Asset Account,"### Information about bug

The query for the `expense_account` field mandates the account must be from Profit and Loss, however it is acceptable to purchase something as an asset (or even liability) on the balance sheet and miss P&L entirely.

https://github.com/frappe/erpnext/blob/281198456dde21d521b653d660e10ec045279070/erpnext/public/js/controllers/transaction.js#L197-L207

![Screen Shot 2024-08-01 at 16 13 54](https://github.com/user-attachments/assets/cbfff5a8-c3b8-44d3-89ac-08ac4e144641)



### Module

accounts

### Version

v16 develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-08-01 15:34:29+00:00,[],2024-08-30 00:09:36+00:00,2024-08-14 11:51:40+00:00,https://github.com/frappe/erpnext/issues/42583,"[('bug', None)]","[{'comment_id': 2288538816, 'issue_id': 2442776420, 'author': 'Nihantra-Patel', 'body': 'If you want, then you can easily set it from the client script!', 'created_at': datetime.datetime(2024, 8, 14, 11, 51, 40, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-14 11:51:40 UTC): If you want, then you can easily set it from the client script!

"
2442261345,issue,closed,completed,IRN not generating for the sales invoice ,"### Information about bug

![WhatsApp Image 2024-08-01 at 10 30 43 AM](https://github.com/user-attachments/assets/4aec9f30-c9e1-4615-9a1f-83594808ab2f)

Hello, We are not able to make any sales invoice as its showing below error 

### Module

accounts

### Version

ERPNext: v14.62.3 (HEAD)

Frappe Framework: v14.65.0 (HEAD)

India Compliance: v14.24.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",prash4,2024-08-01 11:55:27+00:00,[],2024-08-30 00:09:35+00:00,2024-08-14 11:53:35+00:00,https://github.com/frappe/erpnext/issues/42580,"[('bug', None)]","[{'comment_id': 2264707684, 'issue_id': 2442261345, 'author': 'ljain112', 'body': 'This field is not mandatory.\r\nThere can be customisations in this field.\r\n\r\nFor generating e-invoice you can refer to documentation.\r\nhttps://docs.indiacompliance.app/docs/ewaybill-and-einvoice/generating_e_invoice', 'created_at': datetime.datetime(2024, 8, 2, 7, 3, 24, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-08-02 07:03:24 UTC): This field is not mandatory.
There can be customisations in this field.

For generating e-invoice you can refer to documentation.
https://docs.indiacompliance.app/docs/ewaybill-and-einvoice/generating_e_invoice

"
2442001648,issue,open,,Jobwork Inward - Subcontracting,"**JOB WORK INWARD**

**What?**
In the manufacturing industry, ""Job Work Inward"" refers to a process where a manufacturing unit undertakes the production or processing of semi-finished or finished goods on behalf of a customer. The customer provides the raw materials, and the manufacturing unit performs the required operations, such as machining, assembly, or finishing, to produce the desired goods. The finished or semi-finished products are then returned to the customer.
This process is commonly used when customers do not have the necessary facilities or expertise to complete certain manufacturing processes and outsource these tasks to specialized units. The arrangement can help optimize costs, enhance efficiency, and focus on core business activities
We have the process for Job Work Inward in our ERPNext system, but it is not structured properly.


**Why?**
Currently, We do not have the direct process to make the Jobwork inward process in ERPNext. We do have the process for Subcontracting outward currently. But, we need to enable this feature in the system which helps the manufacturing Industry to make the Job work inward process within ERPNext and they can track the Customer items from the Customer warehouse.

There's a need to enable a Job Work Inward feature in ERPNext to cater to the manufacturing industry's requirements. The system should be able to track items received from customers, process them, and maintain inventory accurately, including customer-specific warehouses

**How?**

This is a flowchart that shows how we can achieve this in ERPNext

![Jobwork_Inward drawio](https://github.com/user-attachments/assets/b09c8562-1c76-4ea5-84cb-831aae5216cc)




**Pre-requisite**

**Item**: The user needs to create the Raw material/semi-finished/Finished goods item list in the Item document. So that they can easily use these items in the transactions.

**Operations**: To accommodate customer-specific processes in the Job Work Inward workflow, you can create operations in ERPNext. Operations represent specific tasks or activities that need to be carried out during the manufacturing or processing of items

**BOM**: The User needs to create a Bill of Materials (BOM) for processing jobs against Work Orders or Job Cards in the ERPNext, The BOM should include all necessary materials (raw materials, semi-finished goods, finished goods, and consumables) and mapped operations to ensure smooth production planning and execution.

**Warehouse**: The user needs to set up a dedicated customer warehouse, where they can effectively manage and segregate inventory, ensuring that customer-specific materials are tracked and handled separately from our stock. This setup enhances transparency and helps in maintaining accurate inventory records while receiving and issuing the materials.


**Transaction Process**

**Sales Order:**
To manage Job Work Inward processes from the beginning, starting with a Sales Order in ERPNext, the below option needs to be enabled in the Sales Order

1. Option needed for “Is Job work” 
2. In the Sales Order Item table. The user needs to select the service item for which they are going to charge to the customer
3. In the Sales Order Item Table again need a new field for Finished Item where the user will select the actual item based on which the Job Work Inward Order will be made and this item will have BOM mapped for Job work.
4. The quantity needs to be mentioned for how much output quantity is needed.
5. The Rate to be entered for the Service Charge.
6. The user can also enter the Taxes as applicable.


**Job Work Order Inward:**
The user will make the Job Work Order from the Sales Order and here the Actual Item will be fetched to make the further processing.

This doctype will be as similar to a **Subcontracting Order** where based on the Finished good item the system will show the Raw material item required.

**Jobwork Material Inward:**
Here the user will be able to make the Jobwork inward based on the Jobwork Order. The details of the Raw material will be fetched here as per the BOM. The user can receive this item at the 0.00 value in the customer warehouse so that they can maintain the customer material inventory.


**Work Order**
The user needs to create the Work Order based on the “**Jobwork Order**” So that we can proceed with the Manufacturing as per our standard process. If there is any operation involved then the Job Card will be created on submission of the Work Order and We can Proceed further for the Consumption of the material and Manufacture of the Finished Goods. This work order will have the reference of “Jobwork Order no” This will help us to track the work order made against which Jobwork order or Sales Order.



**Stock Entry:**
In the Stock Entry, the transaction will be recorded for Material Consumption and Manufacture. Once the Material is Manufactured then it will be sent to the Customer's warehouse so that they can easily send the finished good material to the Customer.

**Jobwork Material Delivery:**
Let’s say with the above process the Finished good is manufactured by us and is ready to be delivered to the customer. We need to make the Jobwork Material Delivery Note so that we can send the material and the Inventory will be out from the customer warehouse and we can also issue the E-waybill from this document.

After the Delivery is done to the customer then we can book the Service Invoice for the Jobwork From the Actual Sales Order

Sales Order ⇒ Delivery Note ⇒ Sales Invoice.

Here we can take the Accounting effect as

**Jobwork revenue Account → Credit**
**Customer Account → Debit**

This will help us to know about the Revenue generated from the Jobwork process.













",sanjay141986,2024-08-01 09:46:18+00:00,['mihir-kandoi'],2025-01-16 13:17:58+00:00,,https://github.com/frappe/erpnext/issues/42577,"[('feature-request', None)]","[{'comment_id': 2272671753, 'issue_id': 2442001648, 'author': 'mrkeshwani', 'body': 'Thank you Sanjay for bringing this up. It is an essential feature for the manufacturing industry. \r\n\r\nSecondly, there is GST compliance (ITC-04) for subcontracting, with this feature this compliance also can be automated.', 'created_at': datetime.datetime(2024, 8, 7, 5, 52, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2272799193, 'issue_id': 2442001648, 'author': 'mrkeshwani', 'body': '@rohitwaghchaure \r\nThis is an essential feature. Please give it the necessary priority.', 'created_at': datetime.datetime(2024, 8, 7, 7, 24, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2352351124, 'issue_id': 2442001648, 'author': 'mrkeshwani', 'body': '@rohitwaghchaure \r\nPlease consider this feature. Having subcontracting on the purchase side makes the manufacturing side of ERPNext incomplete.\r\nThanks,\r\nMahesh Keshwani', 'created_at': datetime.datetime(2024, 9, 16, 8, 56, 40, tzinfo=datetime.timezone.utc)}]","mrkeshwani on (2024-08-07 05:52:51 UTC): Thank you Sanjay for bringing this up. It is an essential feature for the manufacturing industry. 

Secondly, there is GST compliance (ITC-04) for subcontracting, with this feature this compliance also can be automated.

mrkeshwani on (2024-08-07 07:24:27 UTC): @rohitwaghchaure 
This is an essential feature. Please give it the necessary priority.

mrkeshwani on (2024-09-16 08:56:40 UTC): @rohitwaghchaure 
Please consider this feature. Having subcontracting on the purchase side makes the manufacturing side of ERPNext incomplete.
Thanks,
Mahesh Keshwani

"
2440422632,issue,open,,Company >> Delete Transactions,"### Information about bug

go to company
click delete transactions
when delete transactions for company , batch data didn't reset (batch must be deleted)

### Module

stock

### Version

ERPNext: v14.65.8 (version-14)

Frappe Framework: v14.68.2 (version-14)

POS Awesome: v6.1.3 (version-14)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-07-31 16:13:00+00:00,[],2024-08-01 07:44:16+00:00,,https://github.com/frappe/erpnext/issues/42568,"[('bug', None)]","[{'comment_id': 2262143997, 'issue_id': 2440422632, 'author': 'Nihantra-Patel', 'body': 'A batch is counted in a master record, not in a transaction. Additionally, a batch is not limited to one company; it can be associated with multiple companies. For example, you might create a stock entry in one company using Batch-One, and then use the same batch in another company. \r\n\r\nIf you create a stock entry and then need to delete the transaction for one company, you cannot delete the batch because it is linked to transactions in two different companies. This issue occurs because the batch is not counted in the transaction itself.', 'created_at': datetime.datetime(2024, 8, 1, 6, 22, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262272439, 'issue_id': 2440422632, 'author': 'thida-bcn', 'body': '> A batch is counted in a master record, not in a transaction. Additionally, a batch is not limited to one company; it can be associated with multiple companies. For example, you might create a stock entry in one company using Batch-One, and then use the same batch in another company.\r\n> \r\n> If you create a stock entry and then need to delete the transaction for one company, you cannot delete the batch because it is linked to transactions in two different companies. This issue occurs because the batch is not counted in the transaction itself.\r\n\r\nthanks\r\nbut what i found is there was also batch qty\r\ni will prepare video and upload here, thanks', 'created_at': datetime.datetime(2024, 8, 1, 7, 44, 15, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-01 06:22:06 UTC): A batch is counted in a master record, not in a transaction. Additionally, a batch is not limited to one company; it can be associated with multiple companies. For example, you might create a stock entry in one company using Batch-One, and then use the same batch in another company. 

If you create a stock entry and then need to delete the transaction for one company, you cannot delete the batch because it is linked to transactions in two different companies. This issue occurs because the batch is not counted in the transaction itself.

thida-bcn (Issue Creator) on (2024-08-01 07:44:15 UTC): thanks
but what i found is there was also batch qty
i will prepare video and upload here, thanks

"
2439750052,issue,closed,completed,"Garbage Value for title, description and payer_name on Razorpay Payments Page [0010, 00101110, 00011, 00100100010]","### Information about bug

Garbage Value for title, description and payer_name on Razorpay Payments Page

How to reproduce :
Make Payment Request with method/type Razorpay
After Save, Submit open payment url in browser you will see garbage values like [0010 0010 00011 001001]
instead of description and title. 

### Module

accounts

### Version

Frappe 15.30.0
ERPNext 15.30.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Getting Garbage Value on Razorpay Payments UI Page
```
",Abhishek-Chougule,2024-07-31 10:53:46+00:00,[],2024-11-12 00:10:04+00:00,2024-10-28 04:41:03+00:00,https://github.com/frappe/erpnext/issues/42562,"[('bug', None)]","[{'comment_id': 2260250178, 'issue_id': 2439750052, 'author': 'Abhishek-Chougule', 'body': '### Solution :\r\n\r\n**Override Class PaymentRequest / Edit payment_request.py (def get_payment_url(self))\r\n/frappe-bench/apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py**\r\n\r\n            class PaymentRequest(Document):\r\n                    def get_payment_url(self):\r\n\t\t                    if self.reference_doctype != ""Fees"":\r\n\t\t\t                    data = frappe.db.get_value(\r\n\t\t\t\t                    self.reference_doctype, self.reference_name, [""company"", ""customer_name""], as_dict=1\r\n\t\t\t                    )\r\n\t\t                    else:\r\n\t\t\t                    data = frappe.db.get_value(\r\n\t\t\t\t                    self.reference_doctype, self.reference_name, [""student_name""], as_dict=1\r\n\t\t\t                    )\r\n\t\t\t                    data.update({""company"": frappe.defaults.get_defaults().company})\r\n                    \r\n\t\t                    controller = _get_payment_gateway_controller(self.payment_gateway)\r\n\t\t                    controller.validate_transaction_currency(self.currency)\r\n                    \r\n\t\t                    if hasattr(controller, ""validate_minimum_transaction_amount""):\r\n\t\t\t                    controller.validate_minimum_transaction_amount(self.currency, self.grand_total)\r\n                    \r\n\t\t                    return controller.get_payment_url(\r\n\t\t\t                    **{\r\n\t\t\t\t                    ""amount"": flt(self.grand_total, self.precision(""grand_total"")),\r\n\t\t\t\t                    ""title"": data.company,\r\n\t\t\t\t                    ""description"": self.subject,\r\n\t\t\t\t                    ""reference_doctype"": ""Payment Request"",\r\n\t\t\t\t                    ""reference_docname"": self.name,\r\n\t\t\t\t                    ""payer_email"": self.email_to or frappe.session.user,\r\n\t\t\t\t                    ""payer_name"": data.customer_name,\r\n\t\t\t\t                    ""order_id"": self.name,\r\n\t\t\t\t                    ""currency"": self.currency,\r\n\t\t\t                    }\r\n\t\t                    )\r\n\r\n\r\n\r\n\r\nChanges:\r\n\r\nOld :\r\nreturn controller.get_payment_url(\r\n            **{\r\n                ""amount"": flt(self.grand_total, self.precision(""grand_total"")),\r\n                ""title"": data.company.encode(""utf-8""),\r\n                ""description"": self.subject.encode(""utf-8""),\r\n                ""reference_doctype"": ""Payment Request"",\r\n                ""reference_docname"": self.name,\r\n                ""payer_email"": self.email_to or frappe.session.user,\r\n                ""payer_name"": frappe.safe_encode(data.customer_name),\r\n                ""order_id"": self.name,\r\n                ""currency"": self.currency,\r\n            }\r\n        )\r\n\r\nNew / Replace With :\r\nreturn controller.get_payment_url(\r\n\t\t\t        **{\r\n\t\t\t\t        ""amount"": flt(self.grand_total, self.precision(""grand_total"")),\r\n\t\t\t\t        ""title"": data.company,\r\n\t\t\t\t        ""description"": self.subject,\r\n\t\t\t\t        ""reference_doctype"": ""Payment Request"",\r\n\t\t\t\t        ""reference_docname"": self.name,\r\n\t\t\t\t        ""payer_email"": self.email_to or frappe.session.user,\r\n\t\t\t\t        ""payer_name"": data.customer_name,\r\n\t\t\t\t        ""order_id"": self.name,\r\n\t\t\t\t        ""currency"": self.currency,\r\n\t\t\t        }\r\n\t\t        )', 'created_at': datetime.datetime(2024, 7, 31, 11, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262079914, 'issue_id': 2439750052, 'author': 'Nihantra-Patel', 'body': 'If you know the solution then you should raise a Pull Request as per [contributing guidelines](https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md).', 'created_at': datetime.datetime(2024, 8, 1, 5, 37, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262145316, 'issue_id': 2439750052, 'author': 'Abhishek-Chougule', 'body': '> If you know the solution then you should raise a Pull Request as per [contributing guidelines](https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md).\r\n\r\nAs I am not contributor I am not able to create pull request.', 'created_at': datetime.datetime(2024, 8, 1, 6, 22, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262149634, 'issue_id': 2439750052, 'author': 'Nihantra-Patel', 'body': 'Anybody can raise the Pull Request, It is not necessary that only contributors can create Pull Requests.', 'created_at': datetime.datetime(2024, 8, 1, 6, 25, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262369405, 'issue_id': 2439750052, 'author': 'Abhishek-Chougule', 'body': '> Anybody can raise the Pull Request, It is not necessary that only contributors can create Pull Requests.\r\n\r\nYes. But when I am creating I am Getting Error you are not Contributor. \r\nCan you please suggest me correct way to do it?', 'created_at': datetime.datetime(2024, 8, 1, 8, 35, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262377801, 'issue_id': 2439750052, 'author': 'Nihantra-Patel', 'body': 'Please check [this](https://www.youtube.com/watch?v=jRLGobWwA3Y) video.', 'created_at': datetime.datetime(2024, 8, 1, 8, 39, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262611026, 'issue_id': 2439750052, 'author': 'Abhishek-Chougule', 'body': '> Please check [this](https://www.youtube.com/watch?v=jRLGobWwA3Y) video.\r\n\r\nThank You. Created Pull Request Successfully.', 'created_at': datetime.datetime(2024, 8, 1, 9, 43, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2266439318, 'issue_id': 2439750052, 'author': 'Abhishek-Chougule', 'body': 'fix: correct garbage value on Razorpay Payments Page #42607', 'created_at': datetime.datetime(2024, 8, 3, 6, 0, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2440538037, 'issue_id': 2439750052, 'author': 'ruthra-kumar', 'body': 'Fixed by https://github.com/frappe/erpnext/pull/42607', 'created_at': datetime.datetime(2024, 10, 28, 4, 40, 47, tzinfo=datetime.timezone.utc)}]","Abhishek-Chougule (Issue Creator) on (2024-07-31 11:01:26 UTC): ### Solution :

**Override Class PaymentRequest / Edit payment_request.py (def get_payment_url(self))
/frappe-bench/apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py**

            class PaymentRequest(Document):
                    def get_payment_url(self):
		                    if self.reference_doctype != ""Fees"":
			                    data = frappe.db.get_value(
				                    self.reference_doctype, self.reference_name, [""company"", ""customer_name""], as_dict=1
			                    )
		                    else:
			                    data = frappe.db.get_value(
				                    self.reference_doctype, self.reference_name, [""student_name""], as_dict=1
			                    )
			                    data.update({""company"": frappe.defaults.get_defaults().company})
                    
		                    controller = _get_payment_gateway_controller(self.payment_gateway)
		                    controller.validate_transaction_currency(self.currency)
                    
		                    if hasattr(controller, ""validate_minimum_transaction_amount""):
			                    controller.validate_minimum_transaction_amount(self.currency, self.grand_total)
                    
		                    return controller.get_payment_url(
			                    **{
				                    ""amount"": flt(self.grand_total, self.precision(""grand_total"")),
				                    ""title"": data.company,
				                    ""description"": self.subject,
				                    ""reference_doctype"": ""Payment Request"",
				                    ""reference_docname"": self.name,
				                    ""payer_email"": self.email_to or frappe.session.user,
				                    ""payer_name"": data.customer_name,
				                    ""order_id"": self.name,
				                    ""currency"": self.currency,
			                    }
		                    )




Changes:

Old :
return controller.get_payment_url(
            **{
                ""amount"": flt(self.grand_total, self.precision(""grand_total"")),
                ""title"": data.company.encode(""utf-8""),
                ""description"": self.subject.encode(""utf-8""),
                ""reference_doctype"": ""Payment Request"",
                ""reference_docname"": self.name,
                ""payer_email"": self.email_to or frappe.session.user,
                ""payer_name"": frappe.safe_encode(data.customer_name),
                ""order_id"": self.name,
                ""currency"": self.currency,
            }
        )

New / Replace With :
return controller.get_payment_url(
			        **{
				        ""amount"": flt(self.grand_total, self.precision(""grand_total"")),
				        ""title"": data.company,
				        ""description"": self.subject,
				        ""reference_doctype"": ""Payment Request"",
				        ""reference_docname"": self.name,
				        ""payer_email"": self.email_to or frappe.session.user,
				        ""payer_name"": data.customer_name,
				        ""order_id"": self.name,
				        ""currency"": self.currency,
			        }
		        )

Nihantra-Patel on (2024-08-01 05:37:09 UTC): If you know the solution then you should raise a Pull Request as per [contributing guidelines](https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md).

Abhishek-Chougule (Issue Creator) on (2024-08-01 06:22:59 UTC): As I am not contributor I am not able to create pull request.

Nihantra-Patel on (2024-08-01 06:25:35 UTC): Anybody can raise the Pull Request, It is not necessary that only contributors can create Pull Requests.

Abhishek-Chougule (Issue Creator) on (2024-08-01 08:35:54 UTC): Yes. But when I am creating I am Getting Error you are not Contributor. 
Can you please suggest me correct way to do it?

Nihantra-Patel on (2024-08-01 08:39:02 UTC): Please check [this](https://www.youtube.com/watch?v=jRLGobWwA3Y) video.

Abhishek-Chougule (Issue Creator) on (2024-08-01 09:43:33 UTC): Thank You. Created Pull Request Successfully.

Abhishek-Chougule (Issue Creator) on (2024-08-03 06:00:43 UTC): fix: correct garbage value on Razorpay Payments Page #42607

ruthra-kumar on (2024-10-28 04:40:47 UTC): Fixed by https://github.com/frappe/erpnext/pull/42607

"
2439426177,issue,open,,Stock || Item Attribute List || Option to Disable the Item Attributes that are no longer needed.,"Need a provision to disable the item attributes that are no longer needed.
Currently, the list of item attributes are populated even if they are no longer relevant.

Eg: 
A vehicle manufacturing company may have earlier used 2 variants of Tyres like Tubed Tyre and Tubeless Tyre.
However, with the advance in technology, the Tubed Tyre versions have become obsolete. So, the manufacturer only provides Tubeless tyre option.
But in ERPNext, the system does not have the provision to disable the Item Attribute at the moment that would greatly help in such usecases.
",hpotabatti,2024-07-31 08:16:29+00:00,[],2024-07-31 08:16:29+00:00,,https://github.com/frappe/erpnext/issues/42554,"[('feature-request', None)]",[],
2436766989,issue,closed,completed,Cannot Create Sales Order with Different Quotation Item UOM,"### Information about bug

We have auto create Sales Order from Quotation feature using scheduled job, and in our solution, it is possible to have different UOM between Sales Order Item and Quotation Item. Our sistem running with ERPNext version v14.46,7, but starting from version v14.47.0, UOM on Quotation Item and Sales Order Item must be the same. This become an issue for our sistem as we cannot update ERPNext, we afraid we missed a lot of important update and patch.

![image](https://github.com/user-attachments/assets/280e76af-464f-4888-9a84-564056800d2b)

### Module

selling

### Version

Frappe v14.62.4
ERPNext v14.47.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
File ""apps/frappe/frappe/app.py"", line 95, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 47, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1620, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 31, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 309, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 344, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1051, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 915, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1277, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1259, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 912, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/selling/doctype/sales_order/sales_order.py"", line 72, in validate
    self.validate_with_previous_doc()
  File ""apps/erpnext/erpnext/selling/doctype/sales_order/sales_order.py"", line 206, in validate_with_previous_doc
    super(SalesOrder, self).validate_with_previous_doc(
  File ""apps/erpnext/erpnext/utilities/transaction_base.py"", line 47, in validate_with_previous_doc
    self.compare_values({key: [ref_dn]}, val[""compare_fields""], d)
  File ""apps/erpnext/erpnext/utilities/transaction_base.py"", line 71, in compare_values
    self.validate_value(field, condition, prevdoc_values[field], doc)
  File ""apps/frappe/frappe/model/document.py"", line 1316, in validate_value
    msgprint(msg, raise_exception=raise_exception or True)
  File ""apps/frappe/frappe/__init__.py"", line 508, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 456, in _raise_exception
    raise ValidationError(msg)
frappe.exceptions.ValidationError: Incorrect value in row 1: UOM must be = Pcs
```
",landersaga,2024-07-30 02:50:33+00:00,[],2025-01-13 08:56:05+00:00,2025-01-13 08:56:04+00:00,https://github.com/frappe/erpnext/issues/42526,"[('bug', None)]","[{'comment_id': 2257441944, 'issue_id': 2436766989, 'author': 'Nihantra-Patel', 'body': ""I know this isn't a bug. Because if you have a UOM number in the quotation and then you create a sales order from the quotation, the item's UOM must be the same. If it is not same then it shows this error. So you cannot change the UOM, this is not a bug. This is a default rule of the system, and it has a condition defined that this validation will throw if there is a UOM change in the previous transaction and in the current transaction."", 'created_at': datetime.datetime(2024, 7, 30, 4, 33, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257630303, 'issue_id': 2436766989, 'author': 'landersaga', 'body': 'Will this validation get update in the future v14? Because this validation preventing us from upgrading the ERPNext version', 'created_at': datetime.datetime(2024, 7, 30, 7, 9, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257632935, 'issue_id': 2436766989, 'author': 'Nihantra-Patel', 'body': 'This thing will not be updated in the future. Because many things can break!', 'created_at': datetime.datetime(2024, 7, 30, 7, 10, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257736970, 'issue_id': 2436766989, 'author': 'landersaga', 'body': 'Do you have any suggestion to accomodate our flow?', 'created_at': datetime.datetime(2024, 7, 30, 8, 9, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2586528667, 'issue_id': 2436766989, 'author': 'nabinhait', 'body': 'If you really want to change the UOM from Quotation to Sales Order, then maintain the UOM in a different custom field in Quotation and keep the standard in the UOM field empty. It might work.', 'created_at': datetime.datetime(2025, 1, 13, 8, 56, 4, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-30 04:33:13 UTC): I know this isn't a bug. Because if you have a UOM number in the quotation and then you create a sales order from the quotation, the item's UOM must be the same. If it is not same then it shows this error. So you cannot change the UOM, this is not a bug. This is a default rule of the system, and it has a condition defined that this validation will throw if there is a UOM change in the previous transaction and in the current transaction.

landersaga (Issue Creator) on (2024-07-30 07:09:11 UTC): Will this validation get update in the future v14? Because this validation preventing us from upgrading the ERPNext version

Nihantra-Patel on (2024-07-30 07:10:42 UTC): This thing will not be updated in the future. Because many things can break!

landersaga (Issue Creator) on (2024-07-30 08:09:23 UTC): Do you have any suggestion to accomodate our flow?

nabinhait on (2025-01-13 08:56:04 UTC): If you really want to change the UOM from Quotation to Sales Order, then maintain the UOM in a different custom field in Quotation and keep the standard in the UOM field empty. It might work.

"
2435207475,issue,closed,completed,Error while creating Payment entry,"### Information about bug

Error While creating Payment entry
![image](https://github.com/user-attachments/assets/13d0e6ca-7a7a-45f3-81fa-c36d0f171b6b)


### Module

accounts

### Version

ERPNext: v15.31.2 (HEAD)

Frappe Framework: v15.36.0 (HEAD)

Frappe HR: v15.25.0 (HEAD)

India Compliance: v15.12.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 78, in validate
    self.set_liability_account()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 149, in set_liability_account
    liability_account = get_party_account(
                        ^^^^^^^^^^^^^^^^^^
IndexError: list index out of range


### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""docstatus\"":0,\""doctype\"":\""Payment Entry\"",\""name\"":\""new-payment-entry-fffwgfufds\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""naming_series\"":\""ACC-PAY-.YYYY.-\"",\""payment_type\"":\""Pay\"",\""payment_order_status\"":\""Initiated\"",\""custom_entry_type\"":\""\"",\""posting_date\"":\""2024-06-07\"",\""company\"":\""eFRA Industries LLP\"",\""book_advance_payments_in_separate_party_account\"":0,\""reconcile_on_advance_payment_date\"":0,\""paid_from_account_currency\"":\""INR\"",\""paid_to_account_currency\"":\""INR\"",\""references\"":[],\""apply_tax_withholding_amount\"":0,\""taxes\"":[],\""deductions\"":[],\""status\"":\""Draft\"",\""custom_remarks\"":0,\""is_opening\"":\""No\"",\""letter_head\"":\""Efra Industries-Purchase\"",\""__run_link_triggers\"":false,\""mode_of_payment\"":\""Wire Transfer\"",\""party_type\"":\""Supplier\"",\""party\"":\""S0043\"",\""party_name\"":\""Axis Bank Limited\"",\""party_balance\"":-840,\""paid_from\"":\""Axis Bank Ltd CC A/c-923030069679572 - EIL\"",\""paid_from_account_type\"":\""Bank\"",\""paid_from_account_balance\"":-921264.5,\""paid_to\"":\""Axis Bank Ltd - EIL\"",\""paid_to_account_type\"":\""Payable\"",\""paid_to_account_balance\"":-840,\""paid_amount\"":11.8,\""paid_amount_after_tax\"":11.8,\""source_exchange_rate\"":1,\""base_paid_amount\"":11.8,\""base_paid_amount_after_tax\"":11.8,\""received_amount\"":11.8,\""received_amount_after_tax\"":11.8,\""target_exchange_rate\"":1,\""base_received_amount\"":11.8,\""base_received_amount_after_tax\"":11.8,\""total_allocated_amount\"":0,\""base_total_allocated_amount\"":0,\""unallocated_amount\"":11.8,\""difference_amount\"":0,\""base_total_taxes_and_charges\"":0,\""total_taxes_and_charges\"":0,\""company_address\"":\""eFRA Industries LLP-Billing-1\"",\""company_gstin\"":\""24AAIFL0473C1ZQ\"",\""reference_no\"":\""penal charges\"",\""reference_date\"":\""2024-06-07\"",\""base_in_words\"":\""INR Eleven and Eighty Paisa only.\"",\""in_words\"":\""INR Eleven and Eighty Paisa only.\"",\""title\"":\""S0043\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""idx\"":null}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery3700023377281782816841"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 1613,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": ""758e15d1-9aa6-468d-8425-ab95bf937ae0""
}
```
### Response Data
```
{
	""exception"": ""IndexError: list index out of range"",
	""exc_type"": ""IndexError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",poojavadher,2024-07-29 11:50:14+00:00,[],2024-08-17 00:08:41+00:00,2024-07-29 12:02:51+00:00,https://github.com/frappe/erpnext/issues/42521,"[('bug', None)]","[{'comment_id': 2255747772, 'issue_id': 2435207475, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the version 15.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/d0d82390-60c0-4fa8-b045-032b447f2f79', 'created_at': datetime.datetime(2024, 7, 29, 12, 2, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259826582, 'issue_id': 2435207475, 'author': 'poojavadher', 'body': '@Nihantra-Patel \r\nIt is showing error while recording the payment in advance', 'created_at': datetime.datetime(2024, 7, 31, 7, 9, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2259843918, 'issue_id': 2435207475, 'author': 'Nihantra-Patel', 'body': ""Whenever you raise an issue, please make sure to include all the necessary steps and provide detailed information.\r\n\r\nWe tested it, and It's working properly. if possible then please provide the video and step."", 'created_at': datetime.datetime(2024, 7, 31, 7, 20, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2260103010, 'issue_id': 2435207475, 'author': 'poojavadher', 'body': 'I have already added full error message', 'created_at': datetime.datetime(2024, 7, 31, 9, 42, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2260110447, 'issue_id': 2435207475, 'author': 'Nihantra-Patel', 'body': ""We don't necessarily know from the error log. Sometimes we need steps too. Because how do we know from which step that error came? It didn't show the error log, even though we looked through the advanced entry, we didn't see anything. So again you too, can you give us the steps how you do advance entry?"", 'created_at': datetime.datetime(2024, 7, 31, 9, 46, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262048630, 'issue_id': 2435207475, 'author': 'poojavadher', 'body': 'https://github.com/user-attachments/assets/edc93a00-6175-4b25-9e01-20fc00505df9', 'created_at': datetime.datetime(2024, 8, 1, 5, 12, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262395770, 'issue_id': 2435207475, 'author': 'Nihantra-Patel', 'body': 'Again, please check it.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/f0cb6415-f11a-4c9d-b667-44cf5f2b9adb', 'created_at': datetime.datetime(2024, 8, 1, 8, 43, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2264671349, 'issue_id': 2435207475, 'author': 'poojavadher', 'body': 'It was showing error because of the advance payment settings  "" Book Advance Payments in Separate Party Account"" but account does not set for this. in such case it should not show error and should give the message to set the default accounts to company/party/party group.\r\n\r\n![image](https://github.com/user-attachments/assets/40180d50-2f00-43c7-a42f-1e2fb54b36f8)', 'created_at': datetime.datetime(2024, 8, 2, 6, 39, 21, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-29 12:02:51 UTC): Everything is working fine. No problems were encountered in the version 15.


https://github.com/user-attachments/assets/d0d82390-60c0-4fa8-b045-032b447f2f79

poojavadher (Issue Creator) on (2024-07-31 07:09:10 UTC): @Nihantra-Patel 
It is showing error while recording the payment in advance

Nihantra-Patel on (2024-07-31 07:20:59 UTC): Whenever you raise an issue, please make sure to include all the necessary steps and provide detailed information.

We tested it, and It's working properly. if possible then please provide the video and step.

poojavadher (Issue Creator) on (2024-07-31 09:42:41 UTC): I have already added full error message

Nihantra-Patel on (2024-07-31 09:46:42 UTC): We don't necessarily know from the error log. Sometimes we need steps too. Because how do we know from which step that error came? It didn't show the error log, even though we looked through the advanced entry, we didn't see anything. So again you too, can you give us the steps how you do advance entry?

poojavadher (Issue Creator) on (2024-08-01 05:12:16 UTC): https://github.com/user-attachments/assets/edc93a00-6175-4b25-9e01-20fc00505df9

Nihantra-Patel on (2024-08-01 08:43:06 UTC): Again, please check it.


https://github.com/user-attachments/assets/f0cb6415-f11a-4c9d-b667-44cf5f2b9adb

poojavadher (Issue Creator) on (2024-08-02 06:39:21 UTC): It was showing error because of the advance payment settings  "" Book Advance Payments in Separate Party Account"" but account does not set for this. in such case it should not show error and should give the message to set the default accounts to company/party/party group.

![image](https://github.com/user-attachments/assets/40180d50-2f00-43c7-a42f-1e2fb54b36f8)

"
2435065991,issue,closed,completed,Cancelling Asset Value Adjustment didn't cancel journal entry,"### Information about bug

![image](https://github.com/user-attachments/assets/2a9f58b5-c5c2-410b-a781-15d650705bb7)
we cancel, Asset Value Adjustment but system didn't cancel Journal Entry which was auto creation of during submtting

### Module

accounts, assets

### Version

15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-07-29 10:39:54+00:00,['khushi8112'],2024-08-30 00:09:42+00:00,2024-08-13 10:22:35+00:00,https://github.com/frappe/erpnext/issues/42519,"[('bug', None)]",[],
2435055918,issue,open,,Finished Goods based Operating Cost at Stock Entry,"is this possible to calculate additional cost at Stock Entry ""Finished Goods based Operating Cost""
some case, customer will not use stock entry but they want to calculate cost for finished goods based on qty produced",thida-bcn,2024-07-29 10:34:36+00:00,[],2024-07-29 10:34:36+00:00,,https://github.com/frappe/erpnext/issues/42517,"[('feature-request', None)]",[],
2434991960,issue,open,,"How can I add an Item name field in ""update items"" button in erpnext","![11](https://github.com/user-attachments/assets/6a636f14-cbfc-488c-8570-a91482bd81ab)
![22](https://github.com/user-attachments/assets/7f99fa35-ccf0-4081-975f-528ffc34a87c)
",rajubaghel,2024-07-29 10:03:07+00:00,[],2024-07-29 10:03:46+00:00,,https://github.com/frappe/erpnext/issues/42516,"[('feature-request', None)]",[],
2434876111,issue,open,,Scrap Assets ,"is this possible to allow user to choose scrap date
example,
asset damage on 15th July
in ERPNext, we just record asset scrap as Today, currently system didn't allow user to choose scrap date, for that case user can set date to 15th July 
",thida-bcn,2024-07-29 09:11:21+00:00,['khushi8112'],2024-07-30 09:23:54+00:00,,https://github.com/frappe/erpnext/issues/42514,"[('feature-request', None)]",[],
2434730674,issue,open,,Journal Entry cannot be saved or updated when an account that was previously an inventory account was change to another account.,"### Information about bug

One of our users accidentally set an inventory account in the Journal Entry and saved it. after failing to submit it due to the validations. but when changing the account and trying to save the system still thinks that the inventory account is still there despite it no there anymore.

Steps to reproduce the Bug.
1. Create a new Journal Entry
2. Select at least one Inventory Account in one of the Account Entries.
![Screenshot 2024-07-29 154343](https://github.com/user-attachments/assets/ea6f074b-4a1c-43b2-9a7e-98dc2a35ab16)
3. Save and try to Submit.
![Screenshot 2024-07-29 154351](https://github.com/user-attachments/assets/d5454193-7fe2-4e66-a8b6-ddf44921a015)
4. Change Wrong Inventory Account with the correct Account or a non-inventory account.
![Screenshot 2024-07-29 154413](https://github.com/user-attachments/assets/1ce85d70-00a5-4c43-bc0b-546f78f74346)
5. Try to Save the Document with the correct entries. and this error is still thrown.
![Screenshot 2024-07-29 154423](https://github.com/user-attachments/assets/c10e4556-a2ee-4d04-82be-7c9b853e777b)



### Module

accounts

### Version

Frappe Version - v15.36.0
ERPNext Version - v15.31.2

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",quebn,2024-07-29 08:00:54+00:00,[],2024-07-29 08:00:54+00:00,,https://github.com/frappe/erpnext/issues/42512,"[('bug', None)]",[],
2433764749,issue,open,,Portal User (website user) with no role assigned can access pages that should not have been accessible.,"### Information about bug

I had previously assigned a role ""Customer"" to a test user and accessed the projects page in portal.

For testing, I removed Customer role and then refreshed the portal page. I can still see the same project details. But the side bar doesnot show Project menu. The Project Page was accessible only through the url.

First: with customer role:
![image](https://github.com/user-attachments/assets/8a43204e-2782-4bf4-be7a-110c844bf242)

After removing Customer role:

![image](https://github.com/user-attachments/assets/da152d3e-d4fc-48cd-8c77-052958bb1462)






### Module

portal

### Version

![image](https://github.com/user-attachments/assets/f3a8f9de-d23e-454e-a00c-b85d0324875c)


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",ajiragroup,2024-07-28 05:49:02+00:00,[],2024-07-28 05:49:02+00:00,,https://github.com/frappe/erpnext/issues/42500,"[('bug', None)]",[],
2433374585,issue,closed,completed,Print Format Error,"### Information about bug

'NoneType' object is not iterable


### Module

selling

### Version

Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.31.0 (HEAD)

Frappe Framework: v15.36.0 (HEAD)

Print Designer: v1.4.0 (HEAD)


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
'NoneType' object is not iterable
```
",Egerges-Support,2024-07-27 08:45:17+00:00,[],2024-09-19 00:10:00+00:00,2024-09-04 05:18:49+00:00,https://github.com/frappe/erpnext/issues/42497,"[('bug', None)]","[{'comment_id': 2255756150, 'issue_id': 2433374585, 'author': 'Nihantra-Patel', 'body': 'Such an error can occur in many places, please let us know in detail where the problem occurs. Because no one will know anything in such a description, so please explain in detail. And if there is an issue with Print Designer, then go to the [Print Designer repo](https://github.com/frappe/print_designer/issues) and create an issue.', 'created_at': datetime.datetime(2024, 7, 29, 12, 7, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-29 12:07:19 UTC): Such an error can occur in many places, please let us know in detail where the problem occurs. Because no one will know anything in such a description, so please explain in detail. And if there is an issue with Print Designer, then go to the [Print Designer repo](https://github.com/frappe/print_designer/issues) and create an issue.

"
2432746373,issue,open,,update qty in workorder,I will also need to update the materials used as we can’t stick to BOM always. Looks like it is a problem in other verticals as well,sureshandimenu,2024-07-26 18:09:32+00:00,[],2024-07-26 18:10:59+00:00,,https://github.com/frappe/erpnext/issues/42494,"[('feature-request', None)]",[],
2431938770,issue,closed,completed,Payment Order Creates Journal Instead of Payment Entry,"### Information about bug

We are encountering an issue with the Payment Order functionality in ERPNext. When multiple payment requests for a supplier are created and then consolidated into a Payment Order to facilitate bulk payment, the system creates a journal entry instead of a payment entry upon clicking the ""Create Payment Entries"" button. If we were to use Payment Entry shortcut provided in the Connection section, the Reference Documents are not fetched whilst the Payment Type remains as “Receive”.

Step1: Create multiple payment requests for a supplier. The Mode of Payment and Bank Accounts details remain the same across all Payment Requests.

Step 2: Consolidate All Payment Requests to one Payment Order.
![Payment Request1](https://github.com/user-attachments/assets/255f30dc-77b8-4386-839e-afd8e79e3192)
![Payment Request2](https://github.com/user-attachments/assets/d514b613-a6ce-492a-a347-277071cd5c9b)
![Payment Request3](https://github.com/user-attachments/assets/959a2ea1-dfbc-4fbf-a181-b82c01bd21fd)


Step 3: Click the ""Create Payment Entries"" button in the Payment Order
![Payment Order1](https://github.com/user-attachments/assets/68b6730d-af80-41cd-8a51-f9b4eff5c390)


Expected Behavior: The system should create a Payment Entry upon clicking the ""Create Payment Entries"" button in the Payment Order.

Actual Behavior: The system creates a Journal Entry instead of a Payment Entry.
![Journal Entry](https://github.com/user-attachments/assets/bcd0a0ad-ff50-43f6-be03-c620fc2b34c7)


We rely on the Payment Entry functionality due to its integrated approval processes. This issue disrupts our workflow and poses challenges in maintaining the approval integrity for payments.


### Module

accounts

### Version

ERPNext: v15.31.1 (HEAD)

Frappe Framework: v15.36.0 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Bknjogu,2024-07-26 10:31:29+00:00,['ruthra-kumar'],2024-08-17 00:08:40+00:00,2024-08-02 10:24:42+00:00,https://github.com/frappe/erpnext/issues/42486,"[('bug', None)]","[{'comment_id': 2265063071, 'issue_id': 2431938770, 'author': 'ruthra-kumar', 'body': ""Payment Order has always created Journal entries. Button naming has caused a misunderstanding here. I've renamed the button to avoid further confusion.\r\nhttps://github.com/frappe/erpnext/pull/42528"", 'created_at': datetime.datetime(2024, 8, 2, 10, 24, 42, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-08-02 10:24:42 UTC): Payment Order has always created Journal entries. Button naming has caused a misunderstanding here. I've renamed the button to avoid further confusion.
https://github.com/frappe/erpnext/pull/42528

"
2431822454,issue,closed,completed,language doesnt change,"### Information about bug

i changed the language from the settings but seems that has no impact in menu and all other items

### Module

other

### Version

version 15

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",tasos3100,2024-07-26 09:28:42+00:00,[],2024-08-13 00:11:36+00:00,2024-07-29 12:12:35+00:00,https://github.com/frappe/erpnext/issues/42485,"[('bug', None)]","[{'comment_id': 2255766888, 'issue_id': 2431822454, 'author': 'Nihantra-Patel', 'body': ""It's worked properly.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/dbfd300c-cc60-442e-9b44-1baea69e778e"", 'created_at': datetime.datetime(2024, 7, 29, 12, 12, 35, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-29 12:12:35 UTC): It's worked properly.


https://github.com/user-attachments/assets/dbfd300c-cc60-442e-9b44-1baea69e778e

"
2431726097,issue,open,,Field price_list_currency not found,"### Information about bug

While changing UOM in material request item table, we are getting below error:

![image](https://github.com/user-attachments/assets/4edfa969-6bd7-437e-958b-3d0703b8c236)

in material request, there is no price list and still price list rate and currency is being checked and in the args it is not having price_list_currency still /api/method/erpnext.stock.get_item_details.apply_price_list is trying to return it.

we are able to save the document, still this need to be rectified.

### Module

stock

### Version

ERPNext: v15.27.6 (HEAD)
Frappe Framework: v15.29.2 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
No error message is being thrown in console or in error log.
```
",Craftint,2024-07-26 08:38:33+00:00,[],2024-09-17 05:49:09+00:00,,https://github.com/frappe/erpnext/issues/42480,"[('bug', None)]","[{'comment_id': 2354583299, 'issue_id': 2431726097, 'author': 'lansgt', 'body': 'Similar issue here, but when in RFQ instead of Material Request. \r\nError is thrown anytime data is updated in row of child table.\r\nAppears to be in method precision()\r\n![image](https://github.com/user-attachments/assets/4da67c14-802e-49ce-bb36-513c2a0a0f3a)', 'created_at': datetime.datetime(2024, 9, 17, 5, 49, 8, tzinfo=datetime.timezone.utc)}]","lansgt on (2024-09-17 05:49:08 UTC): Similar issue here, but when in RFQ instead of Material Request. 
Error is thrown anytime data is updated in row of child table.
Appears to be in method precision()
![image](https://github.com/user-attachments/assets/4da67c14-802e-49ce-bb36-513c2a0a0f3a)

"
2431661351,issue,open,,Error While creating Purchase Receipt from Purchase Order,"### Information about bug

Facing Error While Creating Purchase Receipt from Purchase Order
![Screenshot from 2024-07-26 13-25-52](https://github.com/user-attachments/assets/2aab17fc-2b52-4a2d-9e46-1c254d331903)


### Module

stock, buying

### Version

ERPNext: v15.31.1 (HEAD)
Frappe Framework: v15.36.0 (HEAD)
India Compliance: v15.12.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""enrichclothing"": ""0.0.1"",
	""erpnext"": ""15.31.1"",
	""frappe"": ""15.36.0"",
	""india_compliance"": ""15.12.0"",
	""oderaxe_integration"": ""0.0.1"",
	""whatsapp"": ""0.0.1""
}
```
### Route
```
Form/Purchase Order/ECI-BNG/24-25/245-1
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/mapper.py"", line 36, in make_mapped_doc
    return method(source_name)
           ^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 707, in make_purchase_receipt
    doc = get_mapped_doc(
          ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/mapper.py"", line 150, in get_mapped_doc
    postprocess(source_doc, target_doc)
  File ""apps/erpnext/erpnext/buying/doctype/purchase_order/purchase_order.py"", line 694, in set_missing_values
    target.run_method(""calculate_taxes_and_totals"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 523, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File ""apps/erpnext/erpnext/controllers/taxes_and_totals.py"", line 35, in __init__
    self.calculate()
  File ""apps/erpnext/erpnext/controllers/taxes_and_totals.py"", line 47, in calculate
    self._calculate()
  File ""apps/erpnext/erpnext/controllers/taxes_and_totals.py"", line 71, in _calculate
    self.validate_item_tax_template()
  File ""apps/erpnext/erpnext/controllers/taxes_and_totals.py"", line 122, in validate_item_tax_template
    taxes = _get_item_tax_template(args, item_taxes + item_group_taxes, for_validate=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/get_item_details.py"", line 603, in _get_item_tax_template
    taxes = sorted(taxes_with_validity, key=lambda i: i.valid_from or tax.maximum_net_rate, reverse=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<' not supported between instances of 'datetime.date' and 'float'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""method"": ""erpnext.buying.doctype.purchase_order.purchase_order.make_purchase_receipt"",
		""source_name"": ""ECI-BNG/24-25/245-1"",
		""args"": null,
		""selected_children"": ""{}""
	},
	""freeze"": true,
	""freeze_message"": ""Creating Purchase Receipt ..."",
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.model.mapper.make_mapped_doc"",
	""request_id"": ""e68e8cb7-aba7-4fef-8a01-fcfecd760838""
}
```
### Response Data
```
{
	""exception"": ""TypeError: '<' not supported between instances of 'datetime.date' and 'float'"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",poojavadher,2024-07-26 08:00:49+00:00,[],2024-07-26 08:00:49+00:00,,https://github.com/frappe/erpnext/issues/42479,"[('bug', None)]",[],
2431594321,issue,open,,Chart of Accounts - Account Type and Balance in account doctype can be prefilled from parent account,"
**Is your feature request related to a problem?**

""Account Type"" and ""Balance must be"" fields in Account doc type should be automatically fetched from parent account
as we already set those values in parent and all child accounts under that group accounts can inherit that


**Describe the solution you'd like**

- ""Account Type"" and ""Balance must be"" should be read-only field like root type and report Type, means when we select parent account, we need to fetch Account Type from parent account fill Account Type 
- I observed some group accounts has incorrect account type need to fix them
ex:
    - Indirect Income accountype is income instead of Indirect Income https://github.com/frappe/erpnext/blob/07281d30bb466b09be3653813fecbc506581b449/erpnext/accounts/doctype/account/chart_of_accounts/verified/in_standard_chart_of_accounts.json#L126C12-L127C50

**Describe alternatives you've considered**

- Restricting account type that comes under to selected parent
Ex: 
     - If parent.accountype is Income, then account type will be restricted Direct and Indirect Income
     - If parent.accountype is bank, then account type will be restricted to bank


**Additional context**
Let's take user is trying to create bank account - ""Test Bank Account"", selected correct parent account bank but select wrong account type current assets (correct in some way as bank is also current asset) 
When trying to create payment/Receipt with ""Test Bank Account"" it will not show up as we have filters based on accounttype=bank/cash

this is example case this mistake can happen with any account type and will affect any form/report with account type filters



",saivineeth100,2024-07-26 07:19:05+00:00,[],2024-07-26 07:19:05+00:00,,https://github.com/frappe/erpnext/issues/42478,"[('feature-request', None)]",[],
2429469962,issue,open,,Error in operation cost calculation in BOM- Manufacturing module,"### Information about bug

I have created a BOM module with operation cost and in the pricing tab of the BOM, it shows the correct operation cost until BOM is not saved. Once it is saved, the cost includes only the cost of the last item in the operation cost.

This is the sample BOM that I am trying to create
<img width=""1250"" alt=""Screenshot 2024-07-25 at 2 44 12 PM"" src=""https://github.com/user-attachments/assets/8cc9cc14-ec0b-44ce-a9e1-18cf2efb2b90"">

This is the operations cost page with operations included via Routing template
<img width=""1250"" alt=""Screenshot 2024-07-25 at 2 45 29 PM"" src=""https://github.com/user-attachments/assets/4d727d2a-0389-4545-96bd-a758a3b19910"">

The correct operation cost page when the BOM is not saved

<img width=""1250"" alt=""Screenshot 2024-07-25 at 2 45 34 PM"" src=""https://github.com/user-attachments/assets/2dffc1d9-cf1d-43cd-98df-3ca6e12cb871"">

The updated wrong operation cost after saving the BOM. ( which show the cost of only the last operation out of the 3 operations that I have added)
<img width=""1041"" alt=""Screenshot 2024-07-25 at 2 46 02 PM"" src=""https://github.com/user-attachments/assets/84bc7f20-6d70-4b00-b88d-da47fcc56dd1"">






### Module

manufacturing

### Version

Frappe Version - 15, erp next version - 15, hosted via frappe cloud

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Bowrna,2024-07-25 09:21:35+00:00,[],2024-08-02 09:48:22+00:00,,https://github.com/frappe/erpnext/issues/42469,"[('bug', None)]","[{'comment_id': 2264996632, 'issue_id': 2429469962, 'author': 'parasonit', 'body': 'Hi,\r\n\r\nCan you pls check the Sequence id in Routing,\r\n\r\n![image](https://github.com/user-attachments/assets/5b59f640-dd30-4a51-aab3-1db7106490ac)', 'created_at': datetime.datetime(2024, 8, 2, 9, 48, 21, tzinfo=datetime.timezone.utc)}]","parasonit on (2024-08-02 09:48:21 UTC): Hi,

Can you pls check the Sequence id in Routing,

![image](https://github.com/user-attachments/assets/5b59f640-dd30-4a51-aab3-1db7106490ac)

"
2426730420,issue,open,,Delete Transaction of Company Does not work well,"### Information about bug

The `delete_company_transactions` function
did not work well
this did not delete docs in the `Journal Entry Account` doctype
![image](https://github.com/user-attachments/assets/f69014c1-4664-4228-bb11-09a9e63e278c)
![image](https://github.com/user-attachments/assets/49f837e7-443a-4132-945d-0804652cc055)
so when i create new journal entry they come to my entry at random and the name of doctype did not start form 1 
![image](https://github.com/user-attachments/assets/cc8af998-5aeb-429b-aa03-bc28f76f3557)



### Module

accounts

### Version

ERPNext: v15.30.0 (version-15)
Frappe Framework: v15.36.0 (version-15)
Frappe HR: v15.24.0 (version-15)
Payments: v0.0.1 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",manalErpnext,2024-07-24 06:44:06+00:00,[],2024-07-24 06:44:06+00:00,,https://github.com/frappe/erpnext/issues/42454,"[('bug', None)]",[],
2425072033,issue,open,,Error while installing erpnext on a new site,"### Information about bug

I created a new site and it successfully installed Frappe.

Then I tried to install erpnext. It failed with this error:

```
Installing erpnext...
Updating DocTypes for erpnext       : [                    ] 3%bad json: /home/anupd/frappe-bench/apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.json
An error occurred while installing erpnext: Expecting property name enclosed in double quotes: line 804 column 1 (char 19471)
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/commands/site.py"", line 445, in install_app
    _install_app(app, verbose=context.verbose, force=force)
      context = {'sites': ['new.ajiragroup.com'], 'force': False, 'verbose': False, 'profile': False}
      apps = ('erpnext',)
      force = False
      _install_app = <function install_app at 0x7f07d4355480>
      filelock = <function filelock at 0x7f07d4355120>
      exit_code = 0
      site = 'new.ajiragroup.com'
      app = 'erpnext'
      err = JSONDecodeError('Expecting property name enclosed in double quotes: line 804 column 1 (char 19471)')
  File ""apps/frappe/frappe/installer.py"", line 301, in install_app
    sync_for(name, force=force, reset_permissions=True)
      name = 'erpnext'
      verbose = False
      set_as_patched = True
      force = False
      sync_jobs = <function sync_jobs at 0x7f07d29472e0>
      sync_for = <function sync_for at 0x7f07d2947d90>
      sync_customizations = <function sync_customizations at 0x7f07d44bbe20>
      sync_fixtures = <function sync_fixtures at 0x7f07d2954040>
      app_hooks = {'accounting_dimension_doctypes': ['GL Entry', 'Payment Ledger Entry', 'Sales Invoice', 'Purchase Invoice', 'Payment Entry', 'Asset', 'Stock Entry', 'Budget', 'Delivery Note', 'Sales Invoice Item', 'Purchase Invoice Item', 'Purchase Order Item', 'Sales Order Item', 'Journal Entry Account', 'Material Request Item', 'Delivery Note Item', 'Purchase Receipt Item', 'Stock Entry Detail', 'Payment Entry Deduction', 'Sales Taxes and Charges', 'Purchase Taxes and Charges', 'Shipping Rule', 'Landed Cost Item', 'Asset Value Adjustment', 'Asset Repair', 'Asset Capitalization', 'Loyalty Program', 'Stock Reconciliation', 'POS Profile', 'Opening Invoice Creation Tool', 'Opening Invoice Creation Tool Item', 'Subscription', 'Subscription Plan', 'POS Invoice', 'POS Invoice Item', 'Purchase Order', 'Purchase Receipt', 'Sales Order', 'Subcontracting Order', 'Subcontracting Order Item', 'Subcontracting Receipt', 'Subcontracting Receipt Item', 'Account Closing Balance', 'Supplier Quotation', 'Supplier Quota...
      installed_apps = ['frappe']
      before_install = 'erpnext.setup.install.check_frappe_version'
      out = None
  File ""apps/frappe/frappe/model/sync.py"", line 111, in sync_for
    import_file_by_path(
      app_name = 'erpnext'
      force = False
      reset_permissions = True
      files = ['apps/erpnext/erpnext/accounts/doctype/pos_opening_entry/pos_opening_entry.json', 'apps/erpnext/erpnext/accounts/doctype/gl_entry/gl_entry.json', 'apps/erpnext/erpnext/accounts/doctype/repost_accounting_ledger_settings/repost_accounting_ledger_settings.json', 'apps/erpnext/erpnext/accounts/doctype/advance_taxes_and_charges/advance_taxes_and_charges.json', 'apps/erpnext/erpnext/accounts/doctype/accounting_dimension/accounting_dimension.json', 'apps/erpnext/erpnext/accounts/doctype/ledger_merge/ledger_merge.json', 'apps/erpnext/erpnext/accounts/doctype/dunning_type/dunning_type.json', 'apps/erpnext/erpnext/accounts/doctype/mode_of_payment/mode_of_payment.json', 'apps/erpnext/erpnext/accounts/doctype/promotional_scheme_product_discount/promotional_scheme_product_disc...
      module_name = 'designs'
      folder = 'apps/erpnext/erpnext/designs'
      l = 827
      i = 27
      doc_path = 'apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.json'
  File ""apps/frappe/frappe/modules/import_file.py"", line 112, in import_file_by_path
    docs = read_doc_from_file(path)
      path = 'apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.json'
      force = False
      data_import = False
      pre_process = None
      ignore_version = True
      reset_permissions = True
  File ""apps/frappe/frappe/modules/import_file.py"", line 178, in read_doc_from_file
    doc = json.loads(f.read())
      path = 'apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.json'
      doc = None
      f = <_io.TextIOWrapper name='apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.json' mode='r' encoding='UTF-8'>
  File ""/usr/lib/python3.10/json/__init__.py"", line 346, in loads
    return _default_decoder.decode(s)
      s = '{\n ""actions"": [],\n ""allow_auto_repeat"": 1,\n ""allow_import"": 1,\n ""autoname"": ""naming_series:"",\n ""creation"": ""2016-06-01 14:38:51.012597"",\n ""doctype"": ""DocType"",\n ""engine"": ""InnoDB"",\n ""field_order"": [\n  ""type_of_payment"",\n  ""naming_series"",\n  ""payment_type"",\n  ""payment_order_status"",\n  ""column_break_5"",\n  ""posting_date"",\n  ""company"",\n  ""mode_of_payment"",\n  ""party_section"",\n  ""party_type"",\n  ""party"",\n  ""party_name"",\n  ""book_advance_payments_in_separate_party_account"",\n  ""reconcile_on_advance_payment_date"",\n  ""column_break_11"",\n  ""bank_account"",\n  ""party_bank_account"",\n  ""contact_person"",\n  ""contact_email"",\n  ""payment_accounts_section"",\n  ""party_balance"",\n  ""paid_from"",\n  ""paid_from_account_type"",\n  ""paid_from_account_currency"",\n  ""paid_from_account_balance"",\n  ""column_break_18"",\n  ""paid_to"",\n  ""paid_to_account_type"",\n  ""paid_to_account_currency"",\n  ""paid_to_account_balance"",\n  ""payment_amounts_section"",\n  ""paid_amount"",\n  ""paid_amount_after_tax"",\...
      cls = None
      object_hook = None
      parse_float = None
      parse_int = None
      parse_constant = None
      object_pairs_hook = None
      kw = {}
  File ""/usr/lib/python3.10/json/decoder.py"", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
      self = <json.decoder.JSONDecoder object at 0x7f07d59824d0>
      s = '{\n ""actions"": [],\n ""allow_auto_repeat"": 1,\n ""allow_import"": 1,\n ""autoname"": ""naming_series:"",\n ""creation"": ""2016-06-01 14:38:51.012597"",\n ""doctype"": ""DocType"",\n ""engine"": ""InnoDB"",\n ""field_order"": [\n  ""type_of_payment"",\n  ""naming_series"",\n  ""payment_type"",\n  ""payment_order_status"",\n  ""column_break_5"",\n  ""posting_date"",\n  ""company"",\n  ""mode_of_payment"",\n  ""party_section"",\n  ""party_type"",\n  ""party"",\n  ""party_name"",\n  ""book_advance_payments_in_separate_party_account"",\n  ""reconcile_on_advance_payment_date"",\n  ""column_break_11"",\n  ""bank_account"",\n  ""party_bank_account"",\n  ""contact_person"",\n  ""contact_email"",\n  ""payment_accounts_section"",\n  ""party_balance"",\n  ""paid_from"",\n  ""paid_from_account_type"",\n  ""paid_from_account_currency"",\n  ""paid_from_account_balance"",\n  ""column_break_18"",\n  ""paid_to"",\n  ""paid_to_account_type"",\n  ""paid_to_account_currency"",\n  ""paid_to_account_balance"",\n  ""payment_amounts_section"",\n  ""paid_amount"",\n  ""paid_amount_after_tax"",\...
      _w = <built-in method match of re.Pattern object at 0x7f07d5a10930>
  File ""/usr/lib/python3.10/json/decoder.py"", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
      self = <json.decoder.JSONDecoder object at 0x7f07d59824d0>
      s = '{\n ""actions"": [],\n ""allow_auto_repeat"": 1,\n ""allow_import"": 1,\n ""autoname"": ""naming_series:"",\n ""creation"": ""2016-06-01 14:38:51.012597"",\n ""doctype"": ""DocType"",\n ""engine"": ""InnoDB"",\n ""field_order"": [\n  ""type_of_payment"",\n  ""naming_series"",\n  ""payment_type"",\n  ""payment_order_status"",\n  ""column_break_5"",\n  ""posting_date"",\n  ""company"",\n  ""mode_of_payment"",\n  ""party_section"",\n  ""party_type"",\n  ""party"",\n  ""party_name"",\n  ""book_advance_payments_in_separate_party_account"",\n  ""reconcile_on_advance_payment_date"",\n  ""column_break_11"",\n  ""bank_account"",\n  ""party_bank_account"",\n  ""contact_person"",\n  ""contact_email"",\n  ""payment_accounts_section"",\n  ""party_balance"",\n  ""paid_from"",\n  ""paid_from_account_type"",\n  ""paid_from_account_currency"",\n  ""paid_from_account_balance"",\n  ""column_break_18"",\n  ""paid_to"",\n  ""paid_to_account_type"",\n  ""paid_to_account_currency"",\n  ""paid_to_account_balance"",\n  ""payment_amounts_section"",\n  ""paid_amount"",\n  ""paid_amount_after_tax"",\...
      idx = 0
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 804 column 1 (char 19471)
```


### Module

other

### Version

erpnext 15.29.3
frappe 15.34.1


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",ajiragroup,2024-07-23 12:18:21+00:00,[],2024-07-23 12:18:21+00:00,,https://github.com/frappe/erpnext/issues/42451,"[('bug', None)]",[],
2424724969,issue,closed,completed,Purchase Order Analysis (Nothing to show),"### Information about bug

Purchase Order Analysis Report does not appear transaction ((Nothing to show)  Although there is data
[Purchase Order Analysis Not Working.webm](https://github.com/user-attachments/assets/cb2ea485-ba1b-4de4-b8e8-7ea34b76a0d3)
![Screenshot_3](https://github.com/user-attachments/assets/dc8f9c96-247a-4cff-804d-eb6b092e033c)


### Module

buying

### Version

ERPNext: v15.30.0 (version-15)

Frappe Framework: v15.35.0 (version-15)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",Kamereldawa,2024-07-23 09:33:15+00:00,[],2024-08-09 00:10:09+00:00,2024-07-25 11:22:01+00:00,https://github.com/frappe/erpnext/issues/42447,"[('bug', None)]","[{'comment_id': 2250091300, 'issue_id': 2424724969, 'author': 'Kamereldawa', 'body': 'Resolved ERPNext: v15.31.0 (version-15)', 'created_at': datetime.datetime(2024, 7, 25, 11, 22, 28, tzinfo=datetime.timezone.utc)}]","Kamereldawa (Issue Creator) on (2024-07-25 11:22:28 UTC): Resolved ERPNext: v15.31.0 (version-15)

"
2424622925,issue,open,,The company selection filter does not affect the default session based on company selection,"### Information about bug


[Session Default.webm](https://github.com/user-attachments/assets/4da9e77c-5560-4ffe-95ce-8838a5f2bb15)

the company displayed in the ""Company"" search field does not change based on their selections in the current session.

### Module

other

### Version

ERPNext: v15.21.2 (version-15)

Frappe Framework: v15.29.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",Kamereldawa,2024-07-23 08:45:33+00:00,[],2024-07-23 08:45:33+00:00,,https://github.com/frappe/erpnext/issues/42446,"[('bug', None)]",[],
2424610182,issue,open,,"Can't finish work order while ""Make Serial No / Batch from Work Order"" checked","### Information about bug

Hello dears,
I have an issue from a while and tried a lot of different solutions but without success
If I checked on ""Make Serial No / Batch from Work Order"" checkbox in manufacturing settings,
![image](https://github.com/user-attachments/assets/5eef3fc2-fa83-4c87-b74a-801c4daa676d)

 when I click on 'Finish' button, I found this error:
![image](https://github.com/user-attachments/assets/4433d29a-d5a5-4be8-9f4c-ca0309e3cc9f)


the Error in console mentioned in ""Relevant log output""
### Module

stock, manufacturing

### Version

Frappe version - 15.34.1
ERPNext version - 15.29.3

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/manufacturing/doctype/work_order/work_order.py"", line 1393, in make_stock_entry
    stock_entry.get_items()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/doctype/stock_entry/stock_entry.py"", line 1810, in get_items
    self.load_items_from_bom()
  File ""apps/erpnext/erpnext/stock/doctype/stock_entry/stock_entry.py"", line 1912, in load_items_from_bom
    self.set_batchwise_finished_goods(args, item)
  File ""apps/erpnext/erpnext/stock/doctype/stock_entry/stock_entry.py"", line 1917, in set_batchwise_finished_goods
    batches = get_empty_batches_based_work_order(self.work_order, self.pro_doc.production_item)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 738, in get_empty_batches_based_work_order
    set_batch_details_from_package(ids, batches)
  File ""apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 787, in set_batch_details_from_package
    batches[d.batch_no] -= d.qty
    ~~~~~~~^^^^^^^^^^^^
KeyError: 'UC000688'
",Islamation,2024-07-23 08:39:18+00:00,[],2024-07-23 08:41:13+00:00,,https://github.com/frappe/erpnext/issues/42445,"[('bug', None)]",[],
2424417144,issue,open,,Annual CTC structure for Employees,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",delta2023,2024-07-23 06:58:35+00:00,[],2024-10-06 12:25:40+00:00,,https://github.com/frappe/erpnext/issues/42443,"[('feature-request', None)]","[{'comment_id': 2383437191, 'issue_id': 2424417144, 'author': 'riyapatel14', 'body': 'so , I had develop your feature like what you required but how can i contribute to it plss give access so i can upload the content and files', 'created_at': datetime.datetime(2024, 9, 30, 14, 52, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385159733, 'issue_id': 2424417144, 'author': 'delta2023', 'body': 'Hi,\r\n\r\nPlease do tell what details you require &  for what purpose ??\r\n\r\nKind Regards\r\n\r\n\r\n\r\n*Binal Shah*\r\n\r\n*+91-9820569592*\r\n\r\n\r\n\r\n\r\n*DELTA PD PUMPS PVT. LTD. *201, Wadala Udyog Bhavan,\r\nNaigaum Cross Road, Wadala,\r\nMumbai - 400 031, India.\r\nTel. No: 022-40593113,\r\n\r\nFax: 022-24143299\r\nWeb: www.deltapdpumps.com\r\n\r\n\r\n\r\n\r\nOn Mon, Sep 30, 2024 at 8:22\u202fPM riyapatel14 ***@***.***>\r\nwrote:\r\n\r\n> so , I had develop your feature like what you required but how can i\r\n> contribute to it plss give access so i can upload the content and files\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42443#issuecomment-2383437191>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/A5ZQ2FFLTFFTCHWVJETYNXDZZFQUFAVCNFSM6AAAAABLJYTE6GVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDGOBTGQZTOMJZGE>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 10, 1, 8, 44, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395421252, 'issue_id': 2424417144, 'author': 'riyapatel14', 'body': 'we made CTC calculator this all you want ??', 'created_at': datetime.datetime(2024, 10, 6, 12, 25, 40, tzinfo=datetime.timezone.utc)}]","riyapatel14 on (2024-09-30 14:52:28 UTC): so , I had develop your feature like what you required but how can i contribute to it plss give access so i can upload the content and files

delta2023 (Issue Creator) on (2024-10-01 08:44:54 UTC): Hi,

Please do tell what details you require &  for what purpose ??

Kind Regards



*Binal Shah*

*+91-9820569592*




*DELTA PD PUMPS PVT. LTD. *201, Wadala Udyog Bhavan,
Naigaum Cross Road, Wadala,
Mumbai - 400 031, India.
Tel. No: 022-40593113,

Fax: 022-24143299
Web: www.deltapdpumps.com




On Mon, Sep 30, 2024 at 8:22 PM riyapatel14 ***@***.***>
wrote:

riyapatel14 on (2024-10-06 12:25:40 UTC): we made CTC calculator this all you want ??

"
2424313690,issue,open,,Allow selection of group warehouse and reserve from it's children in Stock entry,"I am trying to create a material transfer through the stock entry, but I cannot select the parent warehouse in the Source warehouse.

I want the parent warehouse selection since at the time of stock transfer we don't know the eventual placement so how can we select that during stock entry itself, it should take the parent warehouse to search for the stocks available in the child nodes and select them automatically. 

I have also attached the Screenshot for the above feature explained.
![Screenshot (166)](https://github.com/user-attachments/assets/9abf7ccf-51c2-4315-a378-eb50d358859d)
",yash121630,2024-07-23 05:50:13+00:00,[],2024-07-23 05:50:13+00:00,,https://github.com/frappe/erpnext/issues/42442,"[('feature-request', None)]",[],
2422579458,issue,open,,last update keeps failing at printing pdf,"### Information about bug

Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/weasyprint.py"", line 15, in download_pdf
    pdf = generator.render_pdf()
          ^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/weasyprint.py"", line 120, in render_pdf
    return main_doc.write_pdf()
           ^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/weasyprint/document.py"", line 399, in write_pdf
    pdf = generate_pdf(self, target, zoom, **options)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/weasyprint/pdf/__init__.py"", line 120, in generate_pdf
    pdf = pydyf.PDF((version or '1.7'), identifier)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: PDF.__init__() takes 1 positional argument but 3 were given


### Module

other

### Version

ERPNext: v15.30.0 (HEAD)

Frappe Framework: v15.35.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/website/serve.py"", line 20, in get_response
    response = renderer_instance.render()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 84, in render
    html = self.get_html()
           ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/utils.py"", line 523, in cache_html_decorator
    html = func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 95, in get_html
    self.update_context()
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 163, in update_context
    data = self.run_pymodule_method(""get_context"")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/website/page_renderers/template_page.py"", line 223, in run_pymodule_method
    return method(self.context)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/www/printview.py"", line 57, in get_context
    body = get_rendered_template(
           ^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/www/printview.py"", line 163, in get_rendered_template
    format_data_map[df.get(""fieldname"")] = df
                    ^^^^^^
AttributeError: 'str' object has no attribute 'get'
```
",patelgopal1213,2024-07-22 10:59:17+00:00,[],2024-07-22 10:59:17+00:00,,https://github.com/frappe/erpnext/issues/42431,"[('bug', None)]",[],
2421002038,issue,open,,Use unique ID instead of email as primary key,"**Is your feature request related to a problem? Please describe.**
If I want to change the email address of a user in the database, I run into complex issues because the primary key is the email address instead of an independent value.

**Describe the solution you'd like**
Generate a unique id for every user and use it as the primary key. This could be an incrementing number, a random string or any other value that is independent from user data such as email addresses.

**Describe alternatives you've considered**
Create a new user and update the email address in every. single. table.

**Additional context**
I use Social Key Login for auth and am currently migrating email domains.",Wombosvideo,2024-07-20 18:12:28+00:00,[],2024-07-20 18:12:28+00:00,,https://github.com/frappe/erpnext/issues/42425,"[('feature-request', None)]",[],
2420934723,issue,closed,completed,Inter company sales unable to save,"### Information about bug

Customer
![image](https://github.com/user-attachments/assets/9d09d766-2369-4ebf-a83c-3621388ecbd0)
Price List
![image](https://github.com/user-attachments/assets/f423b9de-64b0-4d51-a650-fbcb5990e61e)
Sales Invoice
![image](https://github.com/user-attachments/assets/4c59281a-8525-4f25-a9b7-8c1572f785f7)




### Module

selling

### Version

Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.30.0 (HEAD)

Frappe Framework: v15.35.0 (HEAD)

Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
https://thida.erpnext.com/
```
",thida-bcn,2024-07-20 14:59:58+00:00,[],2024-08-05 00:09:31+00:00,2024-07-21 02:35:06+00:00,https://github.com/frappe/erpnext/issues/42424,"[('bug', None)]","[{'comment_id': 2241392892, 'issue_id': 2420934723, 'author': 'thida-bcn', 'body': 'now able to save', 'created_at': datetime.datetime(2024, 7, 21, 2, 35, 6, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-07-21 02:35:06 UTC): now able to save

"
2420793045,issue,open,,Request for Serbian (Latin) Language Localization (just create language),"Hi Frappe team,

I hope this message finds you well. I am writing to request the addition of the Serbian (Latin) language for localization in Frappe. The standard code for Serbian (Latin) used in Serbia is sr_Latin_RS. Serbian language is also present in Bosnia and Herzegovina, and in Montenegro, and those are the variations (not exactly the same language).

Having Serbian (Latin) available would greatly benefit the Serbian-speaking community and improve the accessibility and usability of Frappe in our region. We will do the translation after you create new language.

Thank you for considering my request. I look forward to your positive response.

Best regards,
Saša Tabaković, CEO Uridium d.o.o.",sasatabakovic,2024-07-20 10:01:30+00:00,[],2024-07-20 10:01:30+00:00,,https://github.com/frappe/erpnext/issues/42423,"[('feature-request', None)]",[],
2419492905,issue,open,,Sales Invoice : KeyError: 'posting_time' Possible source of error: erpnext (app),"### Information about bug

at sales invoice, choose customer in foreign currency (internal customer)
after choosing stock item ""system give KeyError: 'posting_time' Possible source of error: erpnext (app)""
![image](https://github.com/user-attachments/assets/93764a6c-be4e-468d-bca1-0d8f7e855b6b)


### Module

selling

### Version

Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.30.0 (HEAD)

Frappe Framework: v15.35.0 (HEAD)

Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""email_delivery_service"": ""0.0.1"",
	""erpnext"": ""15.30.0"",
	""frappe"": ""15.35.0"",
	""print_designer"": ""1.4.0""
}
```
### Route
```
Form/Sales Invoice/new-sales-invoice-lkfrlqvyzz
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/utils.py"", line 297, in get_incoming_rate
    previous_sle = get_previous_sle(args)
                   ^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 1546, in get_previous_sle
    sle = get_stock_ledger_entries(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 1592, in get_stock_ledger_entries
    previous_sle[""posting_date""], previous_sle[""posting_time""]
                                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
KeyError: 'posting_time'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""args"": ""{\""item_code\"":\""Steel 4x8 .3mm\"",\""warehouse\"":\""Stores - S1\"",\""posting_date\"":\""2024-07-02\"",\""qty\"":1,\""batch_no\"":null,\""voucher_type\"":\""Sales Invoice\"",\""company\"":\""Shop1\"",\""allow_zero_valuation_rate\"":0}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/erpnext.stock.utils.get_incoming_rate"",
	""request_id"": ""c8951a47-f625-4ac5-a061-bab08e1fd411""
}
```
### Response Data
```
{
	""exception"": ""KeyError: 'posting_time'"",
	""exc_type"": ""KeyError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",thida-bcn,2024-07-19 17:43:52+00:00,[],2024-07-19 17:43:52+00:00,,https://github.com/frappe/erpnext/issues/42415,"[('bug', None)]",[],
2419279121,issue,open,,Lot quantity always rounding to the nearest hundredth,"### Information about bug

Using the ERPNext v15 batch lot actualization inside the Stock Entry Module,  when you add the Lot Number and its Quantity, the system rounds this value to the nearest hundredth, this means that even if you have the presition set on to 3 or more decimal places, when yhou input it, it shortens the decimals and round it as it is shown in video (It rounds 0.615 to 0.62). This is critical since formulas that use this value are required to be very precise for production/manufacturing module.

https://github.com/user-attachments/assets/b62da5d0-6fba-435b-8908-9f96cfb3b4dd



### Module

stock, manufacturing

### Version

ERPNext: v15.29.3 (version-15)
Frappe Framework: v15.34.1 (version-15)

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",fdav1la,2024-07-19 16:10:41+00:00,[],2024-11-08 15:05:51+00:00,,https://github.com/frappe/erpnext/issues/42414,"[('bug', None)]","[{'comment_id': 2464988178, 'issue_id': 2419279121, 'author': 'fdav1la', 'body': 'Any help? Plz', 'created_at': datetime.datetime(2024, 11, 8, 15, 5, 49, tzinfo=datetime.timezone.utc)}]","fdav1la (Issue Creator) on (2024-11-08 15:05:49 UTC): Any help? Plz

"
2418838905,issue,open,,UOM Conversions breaks pricing rule,"### Information about bug

When adding an item to sales invoice that has UOM conversion, pricing rule is automatically applied while ignoring other parameters in the pricing rule such as 'condition' logic/calculation.

This is true in V14, v15 and frappe.cloud

This is simple to reproduce:
1. Create pricing rule based on product group (leaving UOM empty) and in conditions add: net_total >= 100
2. For a product included in said product group, create UOM conversion
3. Add item price for all UOMs for said item
4. create an invoice, add item with UOM that is not the default UOM and pricing rule is applied regardless of net_total amount


Pricing rule settings:
```

name	Total_100
docstatus	0
disable	0
apply_on	Item Group
price_or_product_discount	Price
warehouse	
mixed_conditions	0
is_cumulative	0
coupon_code_based	0
apply_rule_on_other	
other_item_code	
other_item_group	
other_brand	
selling	1
buying	0
applicable_for	
customer	
customer_group	
territory	
sales_partner	
campaign	
supplier	
supplier_group	
min_qty	0
max_qty	0
min_amt	0
max_amt	0
same_item	0
free_item	
free_qty	0
free_item_rate	0
free_item_uom	
round_free_qty	0
is_recursive	0
recurse_for	0
apply_recursion_over	0
valid_from	10/7/23
valid_upto	
company	The Pinball Resource
currency	USD
margin_type	Percentage
margin_rate_or_amount	0
rate_or_discount	Discount Percentage
apply_discount_on	Grand Total
rate	0
discount_amount	0
discount_percentage	10
for_price_list	Standard Selling
threshold_percentage	0
priority	
condition	net_total >= 100
apply_multiple_pricing_rules	1
apply_discount_on_rate	0
validate_applied_rule	0
rule_description	net total over $100
```




























































### Module

selling

### Version

ERPNext: v14.56.0 (version-14)
Frappe Framework: v14.60.0 (version-14)

and

ERPNext: v15.30.0 (version-15)
Frappe Framework: v15.35.0 (version-15)

and Cloud:
ERPNext: v15.30.0 (HEAD)
Frappe Framework: v15.35.0 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
No errors occur.
```
",volkswagner,2024-07-19 13:03:10+00:00,[],2024-07-19 13:03:10+00:00,,https://github.com/frappe/erpnext/issues/42411,"[('bug', None)]",[],
2416871588,issue,open,,Balance Confirmation statement - supplier,"

using Process account statement  we can email account statements to  customer only. account statements can not be emailed to suppliers . kindly do needfull so that suppliers can also be emailed the confirmation statements

",bhavyajicomputers,2024-07-18 16:19:28+00:00,[],2024-07-18 16:20:37+00:00,,https://github.com/frappe/erpnext/issues/42398,"[('feature-request', None)]",[],
2416720655,issue,closed,completed,Error thrown while posting a payment entry,"### Information about bug

<img width=""1361"" alt=""Screenshot 2024-07-18 at 8 50 32 PM"" src=""https://github.com/user-attachments/assets/c9057feb-6e54-4bbf-98f9-a2a110cb0867"">

### Module

accounts

### Version

Version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Ramesh-Udhyam,2024-07-18 15:22:04+00:00,[],2024-08-14 00:09:20+00:00,2024-07-22 09:29:26+00:00,https://github.com/frappe/erpnext/issues/42397,"[('bug', None)]","[{'comment_id': 2242506642, 'issue_id': 2416720655, 'author': 'Nihantra-Patel', 'body': ""Your image looks like an older version and it's a develop branch image.\r\n\r\nKindly upgrade to version 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nEverything is working fine. No problems were encountered in the latest version 15."", 'created_at': datetime.datetime(2024, 7, 22, 9, 29, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2242566040, 'issue_id': 2416720655, 'author': 'Ramesh-Udhyam', 'body': 'Hi Nihantra, AFAIK, this is not on a older version. We are on version 15 already. This is not on a private bench and hence not on a develop branch. If you want any more details, let me know where I can get it from. Apparently, there are other users facing this issue as well. Ex: Issue #42062\r\n\r\nHence, please reopen this issue', 'created_at': datetime.datetime(2024, 7, 22, 9, 59, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2242729805, 'issue_id': 2416720655, 'author': 'Nihantra-Patel', 'body': ""By the way, you provided the image, and this theme is from version 14 because version 14 has a blue theme. 😄\r\n\r\nOkay! 👍 \r\nThe issue is already open! If you are aware of it, please don't create another one! 😄 \r\nI think it's a precision issue."", 'created_at': datetime.datetime(2024, 7, 22, 11, 28, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2242776861, 'issue_id': 2416720655, 'author': 'Ramesh-Udhyam', 'body': ""Tell me where to find the exact version number of the modules. I can find\r\nout and report here. Thanks for reopening. Did you check the other issue as\r\nwell? Are they also using the same version?\r\n\r\nOn Mon, 22 Jul 2024 at 16:58, Nihantra C. Patel ***@***.***>\r\nwrote:\r\n\r\n> By the way, you provided the image, and this theme is from version 14\r\n> because version 14 has a blue theme. 😄\r\n>\r\n> Okay! 👍\r\n> The issue is already open! If you are aware of it, please don't create\r\n> another one! 😄\r\n> I think it's a precision issue.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42397#issuecomment-2242729805>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BJ6PF3A7YAQL7JWCYDMVKLLZNTUHNAVCNFSM6AAAAABLC5BU52VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENBSG4ZDSOBQGU>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2024, 7, 22, 11, 56, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2242866513, 'issue_id': 2416720655, 'author': 'Ramesh-Udhyam', 'body': ""Hi Nihantra\r\n\r\nI just found out our version is 14 ! Sorry, I didn't realise that earlier.\r\nSo I am trying to follow your suggestion to upgrade to 15 but getting the\r\nfollowing error:\r\n\r\n[image: Screenshot 2024-07-22 at 6.11.47\u202fPM.png]\r\n\r\nOn Mon, 22 Jul 2024 at 16:58, Nihantra C. Patel ***@***.***>\r\nwrote:\r\n\r\n> By the way, you provided the image, and this theme is from version 14\r\n> because version 14 has a blue theme. 😄\r\n>\r\n> Okay! 👍\r\n> The issue is already open! If you are aware of it, please don't create\r\n> another one! 😄\r\n> I think it's a precision issue.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42397#issuecomment-2242729805>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BJ6PF3A7YAQL7JWCYDMVKLLZNTUHNAVCNFSM6AAAAABLC5BU52VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENBSG4ZDSOBQGU>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2024, 7, 22, 12, 43, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257312356, 'issue_id': 2416720655, 'author': 'Ponyooooo', 'body': '@Nihantra-Patel just checking if you have updates on the precision issue? Thank you.', 'created_at': datetime.datetime(2024, 7, 30, 1, 55, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2257439040, 'issue_id': 2416720655, 'author': 'Ramesh-Udhyam', 'body': 'Hi @Ponyooooo , just an update from my side. I created one more site with Version 15 and migrated/restored all the data from my old site. In the new site, I am not facing the same issue. You may want to give this approach a try ...\r\n\r\nYou can also try to upgrade your current site to version 15. The issue I was facing with the upgrade has been fixed by Frappe support.\r\nhttps://support.frappe.io/helpdesk/my-tickets/19195', 'created_at': datetime.datetime(2024, 7, 30, 4, 30, 16, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-22 09:29:26 UTC): Your image looks like an older version and it's a develop branch image.

Kindly upgrade to version 15, then refresh and check again because lots of bugs fixed in the new version.

Everything is working fine. No problems were encountered in the latest version 15.

Ramesh-Udhyam (Issue Creator) on (2024-07-22 09:59:13 UTC): Hi Nihantra, AFAIK, this is not on a older version. We are on version 15 already. This is not on a private bench and hence not on a develop branch. If you want any more details, let me know where I can get it from. Apparently, there are other users facing this issue as well. Ex: Issue #42062

Hence, please reopen this issue

Nihantra-Patel on (2024-07-22 11:28:32 UTC): By the way, you provided the image, and this theme is from version 14 because version 14 has a blue theme. 😄

Okay! 👍 
The issue is already open! If you are aware of it, please don't create another one! 😄 
I think it's a precision issue.

Ramesh-Udhyam (Issue Creator) on (2024-07-22 11:56:20 UTC): Tell me where to find the exact version number of the modules. I can find
out and report here. Thanks for reopening. Did you check the other issue as
well? Are they also using the same version?

On Mon, 22 Jul 2024 at 16:58, Nihantra C. Patel ***@***.***>
wrote:

Ramesh-Udhyam (Issue Creator) on (2024-07-22 12:43:15 UTC): Hi Nihantra

I just found out our version is 14 ! Sorry, I didn't realise that earlier.
So I am trying to follow your suggestion to upgrade to 15 but getting the
following error:

[image: Screenshot 2024-07-22 at 6.11.47 PM.png]

On Mon, 22 Jul 2024 at 16:58, Nihantra C. Patel ***@***.***>
wrote:

Ponyooooo on (2024-07-30 01:55:54 UTC): @Nihantra-Patel just checking if you have updates on the precision issue? Thank you.

Ramesh-Udhyam (Issue Creator) on (2024-07-30 04:30:16 UTC): Hi @Ponyooooo , just an update from my side. I created one more site with Version 15 and migrated/restored all the data from my old site. In the new site, I am not facing the same issue. You may want to give this approach a try ...

You can also try to upgrade your current site to version 15. The issue I was facing with the upgrade has been fixed by Frappe support.
https://support.frappe.io/helpdesk/my-tickets/19195

"
2414918307,issue,closed,completed,Cannot Submit Sales  Invoice as Opening Invoice due to Round off bug.,"### Information about bug

Cannot submit Sales  Invoice as Opening Invoice due to Round off bug. account still being booked despite it being disabled.
This bug was already raised before: #38137 
steps to reproduce are also the same as the previous mentioned issue above but the opening entry is set as Yes.
![image](https://github.com/user-attachments/assets/b3f48f5a-1a70-4134-909e-37e4b62ba003)
and the items' income account should be the Temporary Account.
![image](https://github.com/user-attachments/assets/48e57022-2b68-4825-94bf-ebda4f41f399)
despite the rounding off being disabled, 
![Screenshot 2024-07-17 170707](https://github.com/user-attachments/assets/6355b867-d7d6-4527-b087-c7a0452c7ca6)
the round off account is still being booked and is preventing the Opening Invoice to be submitted.
![Screenshot 2024-07-17 170634](https://github.com/user-attachments/assets/5ed954eb-a8b4-43c4-aff4-1194653eaddd)



### Module

accounts, selling

### Version

Frappe Version - v15.34.1 
ERPNext Version - v15.29.3

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",quebn,2024-07-18 00:56:57+00:00,[],2024-09-21 00:09:41+00:00,2024-09-06 04:40:25+00:00,https://github.com/frappe/erpnext/issues/42376,"[('bug', None)]",[],
2412501708,issue,closed,completed,Project Status Automatic Update Issue,"### Information about bug

This update (https://github.com/frappe/erpnext/pull/42204) has caused the following issues: 

1- All of the old completed projects that had incomplete tasks in them have been re-opened. (mess for us but possibly desired outcome of this recent change) 

2- Any project that has all tasks in it completed is closed off automatically (this is problematic as projects may need other non-task items to finalise before they can be closed) 

3- Any project that doesn't have any tasks in it can not be closed off (definitely a problem, as not every project in our use case has tasks in it)


Issues started as a result of: https://github.com/frappe/erpnext/pull/42204

### Module

projects

### Version

ERPNext: v15.29.3
Frappe Framework: v15.34.1

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",sjoulaei,2024-07-17 02:48:16+00:00,[],2024-08-01 00:10:11+00:00,2024-07-17 12:25:28+00:00,https://github.com/frappe/erpnext/issues/42363,"[('bug', None)]","[{'comment_id': 2232862394, 'issue_id': 2412501708, 'author': 'vorasmit', 'body': ""> All of the old completed projects that had incomplete tasks in them have been re-opened.\r\n\r\nThis PR just updates the project status when a task is created or updated. Should not have automatically opened closed projects.\r\n\r\n> project that has all tasks in it completed is closed off automatically\r\n> Any project that doesn't have any tasks in it can not be closed off\r\n\r\nThis has been original design. Current implementation is just completing it. Did you know you could choose % completion method as manual and update the completion status manually like you want?\r\n\r\nDefault method is where % complete changes based on Task Completion. Hence the project status should ideally be automatic. If at any moment you want to mark it as complete irrespective of tasks in it, you can choose to update the method and mark it as complete.\r\n\r\n![image](https://github.com/user-attachments/assets/cdea8ebb-e02b-4de7-87de-29b8afa5d8d7)\r\n\r\nIf you still think this is an issue, please let me know and we can discuss this."", 'created_at': datetime.datetime(2024, 7, 17, 9, 31, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2233198584, 'issue_id': 2412501708, 'author': 'sjoulaei', 'body': ""thanks for your reply. I hadn't noticed the % completion method field. Many of the unused fields are hidden on our forms. Changing all project % completion to manual will fix our issues. Thanks again."", 'created_at': datetime.datetime(2024, 7, 17, 12, 25, 28, tzinfo=datetime.timezone.utc)}]","vorasmit on (2024-07-17 09:31:08 UTC): This PR just updates the project status when a task is created or updated. Should not have automatically opened closed projects.


This has been original design. Current implementation is just completing it. Did you know you could choose % completion method as manual and update the completion status manually like you want?

Default method is where % complete changes based on Task Completion. Hence the project status should ideally be automatic. If at any moment you want to mark it as complete irrespective of tasks in it, you can choose to update the method and mark it as complete.

![image](https://github.com/user-attachments/assets/cdea8ebb-e02b-4de7-87de-29b8afa5d8d7)

If you still think this is an issue, please let me know and we can discuss this.

sjoulaei (Issue Creator) on (2024-07-17 12:25:28 UTC): thanks for your reply. I hadn't noticed the % completion method field. Many of the unused fields are hidden on our forms. Changing all project % completion to manual will fix our issues. Thanks again.

"
2410958964,issue,closed,completed,Cloud version of website is different from Selfhosted one,"### Information about bug

Hello!

I tried cloud version of your application, and it differs from one I hosted with your docker repository https://github.com/frappe/frappe_docker

Cloud version:
![image](https://github.com/user-attachments/assets/4bb7a940-09d1-408e-b120-2ec7250142f4)

Selfhosted version:
![image](https://github.com/user-attachments/assets/878242e7-1761-4cbb-b369-8afc0cb80181)

About tab Cloud version:
![image](https://github.com/user-attachments/assets/99c6435d-5dec-42da-a7fa-272600b5ab4e)

About tab Selfhosted version:
![image](https://github.com/user-attachments/assets/0a474ea6-8fef-42c6-95ae-6252e1a21848)

The question is, why are there more options in the left menu on the cloud version than in the selfhosted version?

### Module

other

### Version

Frappe Framework: v15.34.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",sane5ek,2024-07-16 11:59:25+00:00,[],2024-08-01 00:10:15+00:00,2024-07-17 05:56:56+00:00,https://github.com/frappe/erpnext/issues/42359,"[('bug', None)]","[{'comment_id': 2232482098, 'issue_id': 2410958964, 'author': 'Nihantra-Patel', 'body': ""I know this isn't a bug.\r\n\r\nBecause the cloud version provides default apps like ERP, print designer, and possibly email delivery service, on a self-hosted server, you have to install these apps manually. It only provides the base app(frappe) by default."", 'created_at': datetime.datetime(2024, 7, 17, 5, 56, 56, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-17 05:56:56 UTC): I know this isn't a bug.

Because the cloud version provides default apps like ERP, print designer, and possibly email delivery service, on a self-hosted server, you have to install these apps manually. It only provides the base app(frappe) by default.

"
2410280347,issue,closed,completed,Earlier HSN was coming automatically by FIFO in Delivery Note.,"### Information about bug

In version 14 when I was creating the delivery note from a sales order or directly the batch nos were coming automatically now I have to do this manually for my 100 items in the delivery note what is the solution for the same?

![image](https://github.com/user-attachments/assets/11d06369-f877-4d8a-b435-1d61866003d3)


### Module

selling

### Version

ERPNext: v15.27.1 (HEAD)

Frappe Framework: v15.29.1 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Sunil-Codes,2024-07-16 05:59:03+00:00,[],2024-08-01 00:10:20+00:00,2024-07-16 08:17:04+00:00,https://github.com/frappe/erpnext/issues/42350,"[('bug', None)]","[{'comment_id': 2230297884, 'issue_id': 2410280347, 'author': 'Nihantra-Patel', 'body': ""The functionality has been completely upgraded from version 14 to 15, so many features have been changed.\r\n\r\nIf you want to automatically pick serial/batch bundles, please enable 'Auto Create Serial and Batch Bundle' in Stock Settings.\r\n\r\n![image](https://github.com/user-attachments/assets/83045541-6bc8-462c-a721-d8a9f6f7b0f5)\r\n\r\n\r\nWhen you submit the Delivery Note then it will take automatically.\r\n\r\n![image](https://github.com/user-attachments/assets/b7f7434a-0813-410c-9a4a-3460dfb43466)\r\n\r\n\r\n![image](https://github.com/user-attachments/assets/540ec387-3f7c-4881-9299-6ff044dc2184)\r\n\r\n\r\nPlease check the [documentation](https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle)\r\n\r\nPlease check the [video](https://www.youtube.com/watch?v=-VjZvRtdjDQ)."", 'created_at': datetime.datetime(2024, 7, 16, 8, 17, 4, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-16 08:17:04 UTC): The functionality has been completely upgraded from version 14 to 15, so many features have been changed.

If you want to automatically pick serial/batch bundles, please enable 'Auto Create Serial and Batch Bundle' in Stock Settings.

![image](https://github.com/user-attachments/assets/83045541-6bc8-462c-a721-d8a9f6f7b0f5)


When you submit the Delivery Note then it will take automatically.

![image](https://github.com/user-attachments/assets/b7f7434a-0813-410c-9a4a-3460dfb43466)


![image](https://github.com/user-attachments/assets/540ec387-3f7c-4881-9299-6ff044dc2184)


Please check the [documentation](https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle)

Please check the [video](https://www.youtube.com/watch?v=-VjZvRtdjDQ).

"
2408982597,issue,closed,completed,"Paid Amount field in ""New Payment Entry"" not working properly","### Information about bug

The Paid amount field does is not working properly, when writing a number like: 20800 the field only register the first two numbers.
the maximum digits recorded is three digits.
![Captura de pantalla 2024-07-15 090545](https://github.com/user-attachments/assets/43289008-13b1-4103-8119-7b84d645c2f8)


![image](https://github.com/user-attachments/assets/3309a90d-d880-4c01-8e30-ddfb07e3750c)


### Module

accounts

### Version

Frappe V14.
Erpnext V14
![image](https://github.com/user-attachments/assets/f97291d6-6484-4661-bfae-f0d36311014e)


### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",primalstudio,2024-07-15 15:10:19+00:00,[],2024-08-01 00:10:18+00:00,2024-07-16 08:27:28+00:00,https://github.com/frappe/erpnext/issues/42347,"[('bug', None)]","[{'comment_id': 2230317050, 'issue_id': 2408982597, 'author': 'Nihantra-Patel', 'body': 'We tested in the lastest version:\r\n\r\n```\r\nERPNext: v14.70.8 (version-14)\r\nFrappe Framework: v14.77.7 (version-14)\r\n```\r\n\r\nEverything is working fine. No problems were encountered in the latest version 14.\r\n\r\nPlease check it.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/7fc0838e-d8de-49ba-b45e-50159423906e\r\n\r\nKindly upgrade to version 14 and test it.\r\n\r\nif the issue occurs then raise the support ticket on [Frappe Cloud](https://support.frappe.io/).', 'created_at': datetime.datetime(2024, 7, 16, 8, 27, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2231098127, 'issue_id': 2408982597, 'author': 'primalstudio', 'body': 'Hi,\r\n\r\nthanks for your reply,\r\nill record a video so you can see where the problem is,\r\nmaybe the problem has to do with the MXN currency only.\r\n\r\nhttps://github.com/user-attachments/assets/b1cc57f2-261b-49a1-b6a8-24f04cf8eb29\r\n\r\nthanks in advance., looking forward', 'created_at': datetime.datetime(2024, 7, 16, 14, 42, 1, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-16 08:27:28 UTC): We tested in the lastest version:

```
ERPNext: v14.70.8 (version-14)
Frappe Framework: v14.77.7 (version-14)
```

Everything is working fine. No problems were encountered in the latest version 14.

Please check it.


https://github.com/user-attachments/assets/7fc0838e-d8de-49ba-b45e-50159423906e

Kindly upgrade to version 14 and test it.

if the issue occurs then raise the support ticket on [Frappe Cloud](https://support.frappe.io/).

primalstudio (Issue Creator) on (2024-07-16 14:42:01 UTC): Hi,

thanks for your reply,
ill record a video so you can see where the problem is,
maybe the problem has to do with the MXN currency only.

https://github.com/user-attachments/assets/b1cc57f2-261b-49a1-b6a8-24f04cf8eb29

thanks in advance., looking forward

"
2408872669,issue,closed,completed,Item Price Import  Scheduler is inactive. Cannot import data.,"### Information about bug

![image](https://github.com/user-attachments/assets/3dce7038-7603-4ab6-891a-7f2a9f7a14dc)


### Module

other

### Version

ERPNext: v15.29.3

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",dtxman,2024-07-15 14:21:57+00:00,[],2024-08-01 00:10:19+00:00,2024-07-16 08:29:50+00:00,https://github.com/frappe/erpnext/issues/42346,"[('bug', None)]","[{'comment_id': 2230321491, 'issue_id': 2408872669, 'author': 'Nihantra-Patel', 'body': ""I know this isn't a bug, because your scheduler is inactive. so please enable the scheduler using the below command:\r\n\r\n```\r\nbench --site your-sitename.com enable-scheduler\r\nbench --site your-sitename.com migrate\r\n```"", 'created_at': datetime.datetime(2024, 7, 16, 8, 29, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230848547, 'issue_id': 2408872669, 'author': 'dtxman', 'body': '![image](https://github.com/user-attachments/assets/b03eb009-140d-43a6-a7e6-0c788c3e3e1a)\r\n![image](https://github.com/user-attachments/assets/c1275037-2cb7-4dab-a986-bce5af9c69fd)', 'created_at': datetime.datetime(2024, 7, 16, 13, 8, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230851158, 'issue_id': 2408872669, 'author': 'Nihantra-Patel', 'body': 'stop the bench and again start it. (restart bench)', 'created_at': datetime.datetime(2024, 7, 16, 13, 9, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230853383, 'issue_id': 2408872669, 'author': 'dtxman', 'body': 'Please see the update screenshot, I did this command before reporting, I still get the same result.', 'created_at': datetime.datetime(2024, 7, 16, 13, 10, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230854142, 'issue_id': 2408872669, 'author': 'Nihantra-Patel', 'body': 'Please check the thread: https://discuss.frappe.io/t/data-import-the-scheduler-is-inactive/104708/2', 'created_at': datetime.datetime(2024, 7, 16, 13, 10, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230862781, 'issue_id': 2408872669, 'author': 'dtxman', 'body': 'thanks for support, was able to import, I used the command below\r\n\r\nbench --site site_name set-config pause_scheduler 0', 'created_at': datetime.datetime(2024, 7, 16, 13, 14, 42, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-16 08:29:50 UTC): I know this isn't a bug, because your scheduler is inactive. so please enable the scheduler using the below command:

```
bench --site your-sitename.com enable-scheduler
bench --site your-sitename.com migrate
```

dtxman (Issue Creator) on (2024-07-16 13:08:12 UTC): ![image](https://github.com/user-attachments/assets/b03eb009-140d-43a6-a7e6-0c788c3e3e1a)
![image](https://github.com/user-attachments/assets/c1275037-2cb7-4dab-a986-bce5af9c69fd)

Nihantra-Patel on (2024-07-16 13:09:21 UTC): stop the bench and again start it. (restart bench)

dtxman (Issue Creator) on (2024-07-16 13:10:17 UTC): Please see the update screenshot, I did this command before reporting, I still get the same result.

Nihantra-Patel on (2024-07-16 13:10:37 UTC): Please check the thread: https://discuss.frappe.io/t/data-import-the-scheduler-is-inactive/104708/2

dtxman (Issue Creator) on (2024-07-16 13:14:42 UTC): thanks for support, was able to import, I used the command below

bench --site site_name set-config pause_scheduler 0

"
2408451716,issue,open,reopened,Alternative item Option In BOM,"Since we are a Electronic PCB manufactures we use some items as a alternative part in some products where has same alternative item may not be used in some other products. If we add an alternative item in item master that alternative item is reflected as alternate item for all the BOMs. But we need an option to add alternative item in BOM and it should be reflected in Particular BOM only and not for other BOMs. If this option is available in BOM it will be helpful for us.. 
Kindly Do the needful and revert back


Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",gayathri-bangera,2024-07-15 11:01:03+00:00,[],2024-07-23 12:43:45+00:00,,https://github.com/frappe/erpnext/issues/42341,"[('feature-request', None)]","[{'comment_id': 2228360613, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': ""Hi,\r\n\r\nWe have sent this request as per the suggestion given by frappe support\r\nteam.\r\n\r\n[image: image.png]\r\n\r\nThanks and Regards,\r\nGayathri Bangera\r\nMob: +91 9986566003\r\n\r\n*Brevera Technologies Pvt Ltd*\r\nhttp://www.brevera.in/\r\n\r\n\r\nOn Mon, 15 Jul 2024 at 16:49, Nihantra C. Patel ***@***.***>\r\nwrote:\r\n\r\n> It's not a right platform for the promotion or something else.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42341#issuecomment-2228262512>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BJ3ZLE7LJYSCZOQ4I3PLTALZMOV37AVCNFSM6AAAAABK4J2GKCVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDEMRYGI3DENJRGI>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2024, 7, 15, 12, 14, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2228362891, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': 'We have sent this request as per suggestion given by the frappe support team.\r\n![image](https://github.com/user-attachments/assets/87a85cbf-ed6a-4e3e-94fe-4f700326ae15)', 'created_at': datetime.datetime(2024, 7, 15, 12, 15, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2228371768, 'issue_id': 2408451716, 'author': 'Nihantra-Patel', 'body': ""Hey, I mistook this for a promotion, since you didn't delete the unnecessary stuff, so I'm reopening it."", 'created_at': datetime.datetime(2024, 7, 15, 12, 20, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2228388448, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': ""Noted.\r\n\r\nI believe that my request will be considered in feature developments..\r\n\r\nOn Mon, 15 Jul, 2024, 5:50\u202fpm Nihantra C. Patel, ***@***.***>\r\nwrote:\r\n\r\n> Hey, I mistook this for a promotion, since you didn't delete the\r\n> unnecessary stuff, so I'm reopening it.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42341#issuecomment-2228371768>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BJ3ZLE54BJYVGDQKG74ULR3ZMO5ARAVCNFSM6AAAAABK4J2GKCVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDEMRYGM3TCNZWHA>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2024, 7, 15, 12, 28, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2240987306, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': 'Hi, \r\nAny update? kindly let me know is my request is considered in future development or not.', 'created_at': datetime.datetime(2024, 7, 20, 7, 26, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2242178563, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': 'Hi, \r\nPlease update the status.', 'created_at': datetime.datetime(2024, 7, 22, 6, 23, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2245149580, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': 'Hi,\r\n\r\nPlease update the status.', 'created_at': datetime.datetime(2024, 7, 23, 12, 42, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2245152005, 'issue_id': 2408451716, 'author': 'gayathri-bangera', 'body': ""> Hey, I mistook this for a promotion, since you didn't delete the unnecessary stuff, so I'm reopening it.\r\nPlease update the status. whether my request is considered in future request or not?"", 'created_at': datetime.datetime(2024, 7, 23, 12, 43, 44, tzinfo=datetime.timezone.utc)}]","gayathri-bangera (Issue Creator) on (2024-07-15 12:14:06 UTC): Hi,

We have sent this request as per the suggestion given by frappe support
team.

[image: image.png]

Thanks and Regards,
Gayathri Bangera
Mob: +91 9986566003

*Brevera Technologies Pvt Ltd*
http://www.brevera.in/


On Mon, 15 Jul 2024 at 16:49, Nihantra C. Patel ***@***.***>
wrote:

gayathri-bangera (Issue Creator) on (2024-07-15 12:15:23 UTC): We have sent this request as per suggestion given by the frappe support team.
![image](https://github.com/user-attachments/assets/87a85cbf-ed6a-4e3e-94fe-4f700326ae15)

Nihantra-Patel on (2024-07-15 12:20:03 UTC): Hey, I mistook this for a promotion, since you didn't delete the unnecessary stuff, so I'm reopening it.

gayathri-bangera (Issue Creator) on (2024-07-15 12:28:13 UTC): Noted.

I believe that my request will be considered in feature developments..

On Mon, 15 Jul, 2024, 5:50 pm Nihantra C. Patel, ***@***.***>
wrote:

gayathri-bangera (Issue Creator) on (2024-07-20 07:26:22 UTC): Hi, 
Any update? kindly let me know is my request is considered in future development or not.

gayathri-bangera (Issue Creator) on (2024-07-22 06:23:01 UTC): Hi, 
Please update the status.

gayathri-bangera (Issue Creator) on (2024-07-23 12:42:28 UTC): Hi,

Please update the status.

gayathri-bangera (Issue Creator) on (2024-07-23 12:43:44 UTC): Please update the status. whether my request is considered in future request or not?

"
2408193924,issue,closed,completed,no option to manually select the source warehouse in Picklist,"### Information about bug

there is no option to select warehouse manually in the picklist or to split the quantity between two warehouses.

### Module

stock, selling

### Version

V15 

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",maveezmh,2024-07-15 08:47:29+00:00,[],2024-08-27 00:09:37+00:00,2024-08-12 06:13:53+00:00,https://github.com/frappe/erpnext/issues/42334,"[('bug', None)]",[],
2407960424,issue,closed,completed,Gross Profit report for bundled item is not getting calculated properly.,"### Information about bug

i created 3 scenarios whre i invoice the customer. 
and have highlighted in below image. 

the gross profit is getting calculated properly for a product bundle only when we follow the process Sales order > delivery Note > Sales Invoice. in all other scenarios the system is showing 100% profit. 

![Screenshot 2024-07-15 at 10-20-15 Gross Profit](https://github.com/user-attachments/assets/2c96db85-4b24-4c4d-9f46-f2df4b16572e)


### Module

accounts, stock, selling

### Version

Frappe Builder: v1.10.1 (HEAD)
ERPNext: v15.29.3 (HEAD)
Frappe Framework: v15.34.1 (HEAD)
Frappe HR: v15.23.1 (HEAD)
Frappe Insights: v2.2.2 (HEAD)
Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",maveezmh,2024-07-15 06:30:05+00:00,[],2025-01-28 00:10:09+00:00,2025-01-13 11:14:33+00:00,https://github.com/frappe/erpnext/issues/42329,"[('bug', None), ('released', None)]","[{'comment_id': 2287186672, 'issue_id': 2407960424, 'author': 'MhmedRjb', 'body': '""Please check the Repost Item Valuation list, as it is likely that some transactions have not been reposted yet. This is probably why the valuation rate is zero in the first two scenarios.', 'created_at': datetime.datetime(2024, 8, 13, 21, 40, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2292788678, 'issue_id': 2407960424, 'author': 'maveezmh', 'body': '@MhmedRjb its process issue. not related to reposting', 'created_at': datetime.datetime(2024, 8, 16, 4, 34, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2516171877, 'issue_id': 2407960424, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.78.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 12, 4, 4, 37, tzinfo=datetime.timezone.utc)}]","MhmedRjb on (2024-08-13 21:40:52 UTC): ""Please check the Repost Item Valuation list, as it is likely that some transactions have not been reposted yet. This is probably why the valuation rate is zero in the first two scenarios.

maveezmh (Issue Creator) on (2024-08-16 04:34:15 UTC): @MhmedRjb its process issue. not related to reposting

frappe-pr-bot on (2024-12-04 04:37:00 UTC): :tada: This issue has been resolved in version 14.78.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.78.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2407947890,issue,closed,completed,Total Wth not calculating,"
![Screenshot_15-7-2024_92255_dev14-csf-tz aakvaerp com](https://github.com/user-attachments/assets/49cb1219-0436-4384-bc31-b57580ccc6b4)
### Information about bug

Hello everyone,

I have an issue here.

Below is my code for calculating Total WTH:

{% set total_wth_amount = 0 %}

{% for item in doc.items %}
{% if item.item_name == “Rent” or item.item_name == “Science TextBook” or item.item_name == “WTH item” %}
{% set wth_rate = 5 %}
{% else %}
{% set wth_rate = 0 %}
{% endif %}

{% if wth_rate > 0 %}
{{ item.item_name }} item amount is
 {{ item.get_formatted(“base_net_amount”, doc) }}  

Tax withheld at  {{ wth_rate }}  %
{% set wth_amount = item.base_net_amount * (wth_rate / 100) %}
  {{ frappe.format_value(wth_amount, {‘fieldtype’: ‘Currency’, ‘options’: ‘TZS’}) }}  

{% set total_wth_amount = total_wth_amount + wth_amount %}
{% endif %}
{% endfor %}

Total withheld tax amount is:
  {{ frappe.format_value(total_wth_amount, {‘fieldtype’: ‘Currency’, ‘options’: ‘TZS’}) }}  

It does calculate Total Wth
Anyone to help debug?

Regards.

### Module

accounts

### Version

Frappe Version: 14.7.0

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Noreen222,2024-07-15 06:20:56+00:00,[],2024-07-30 00:08:57+00:00,2024-07-15 07:30:25+00:00,https://github.com/frappe/erpnext/issues/42328,"[('bug', None)]","[{'comment_id': 2227860637, 'issue_id': 2407947890, 'author': 'Nihantra-Patel', 'body': 'Resolved: https://discuss.frappe.io/t/total-wth-not-reflecting/128737/4?u=ncp\r\n\r\n\r\nIf have a bug then report it otherwise If have a doubt then please raise it in the [frappe forum](https://discuss.frappe.io)', 'created_at': datetime.datetime(2024, 7, 15, 7, 30, 25, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-15 07:30:25 UTC): Resolved: https://discuss.frappe.io/t/total-wth-not-reflecting/128737/4?u=ncp


If have a bug then report it otherwise If have a doubt then please raise it in the [frappe forum](https://discuss.frappe.io)

"
2407848851,issue,closed,completed,Serial No Ledger,"### Information about bug

unable user for Stock User
![image](https://github.com/user-attachments/assets/49a42fb8-c3d3-4a7c-afa2-399dc4f358ae)

![image](https://github.com/user-attachments/assets/99df231e-c18b-442d-be5a-7a856374f73c)


### Module

stock

### Version

Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.29.2 (HEAD)

Frappe Framework: v15.34.0 (HEAD)

Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-07-15 04:45:31+00:00,[],2024-08-01 00:10:16+00:00,2024-07-15 17:29:44+00:00,https://github.com/frappe/erpnext/issues/42326,"[('bug', None), ('released', None)]","[{'comment_id': 2232440101, 'issue_id': 2407848851, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.30.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.30.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 17, 5, 21, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-17 05:21:00 UTC): :tada: This issue has been resolved in version 15.30.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.30.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2407580034,issue,closed,completed,v15.29.4 - shows version as v15.29.3,"### Information about bug

I ran frappe/erpnext:v15.29.4 container and find that the version shown in the About page is v15.29.3 instead of .4


### Module

other

### Version

v15.34.1 - v15.29.4

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",smtwkla,2024-07-14 20:09:09+00:00,[],2024-08-01 00:10:12+00:00,2024-07-17 10:29:53+00:00,https://github.com/frappe/erpnext/issues/42324,"[('bug', None)]","[{'comment_id': 2227579392, 'issue_id': 2407580034, 'author': 'bobotdls', 'body': 'same with me still on ERPNext: v15.29.3\r\nbut my frappe update into new version', 'created_at': datetime.datetime(2024, 7, 15, 1, 42, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2229829397, 'issue_id': 2407580034, 'author': 'bobotdls', 'body': 'Hi Nihantra-Patel,\r\n\r\nSorry I a beginner on this frappe, how and where do I fix that Update __init__.py to 15.29.4', 'created_at': datetime.datetime(2024, 7, 16, 1, 47, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2232975535, 'issue_id': 2407580034, 'author': 'Nihantra-Patel', 'body': 'A new version has been released so update it.\r\n\r\n![image](https://github.com/user-attachments/assets/e91a82a9-bb88-4909-8569-b51e854721fc)', 'created_at': datetime.datetime(2024, 7, 17, 10, 29, 53, tzinfo=datetime.timezone.utc)}]","bobotdls on (2024-07-15 01:42:34 UTC): same with me still on ERPNext: v15.29.3
but my frappe update into new version

bobotdls on (2024-07-16 01:47:24 UTC): Hi Nihantra-Patel,

Sorry I a beginner on this frappe, how and where do I fix that Update __init__.py to 15.29.4

Nihantra-Patel on (2024-07-17 10:29:53 UTC): A new version has been released so update it.

![image](https://github.com/user-attachments/assets/e91a82a9-bb88-4909-8569-b51e854721fc)

"
2407408334,issue,open,,Creating User via API Creates Two Users Simultaneously and Edits Affect Both Despite Different IDs,"### Information about bug

Issue Description:
When creating a user via the API in Frappe ERP, two users are created simultaneously instead of one. Subsequently, editing the entries of one user affects both users, even though they have different IDs.

Steps to Reproduce:

Use the API endpoint to create a new user in Frappe ERP.
Verify the database or user list to confirm two users have been created with distinct IDs.
Attempt to edit the entries or details of one user.
Observe that changes are reflected in both user entries.
Expected Behavior:
Creating a user via the API should result in the creation of a single user with a unique ID. Editing the entries of one user should not affect other users' entries, even if they were created simultaneously.

Actual Behavior:
Two users are created simultaneously when using the API to create a user. Editing the entries of one user affects both users, suggesting a shared state or database issue.

### Module

CRM, other

### Version

Frappe Version - 15 

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",gursewak8642,2024-07-14 12:15:14+00:00,[],2024-07-14 12:15:14+00:00,,https://github.com/frappe/erpnext/issues/42321,"[('bug', None)]",[],
2407479887,issue,open,,Wrong message.,"When trying to delete a stale (not in use) company with no transactions,
I got this error:


![image](https://github.com/user-attachments/assets/e41839e5-5b40-45e3-8ebb-1c259ccfd61b)


Problem is we don't have that fiscal year. We must have renamed it or deleted it long time ago.

Current versions:

![image](https://github.com/user-attachments/assets/9059ce4c-3e67-475b-9909-f5b8053787b2)


",ajiragroup,2024-07-14 11:43:25+00:00,[],2024-07-21 05:53:34+00:00,,https://github.com/frappe/erpnext/issues/42322,"[('bug', None)]","[{'comment_id': 2241169750, 'issue_id': 2407479887, 'author': 'yasser1248', 'body': 'try to delete it from database @ajiragroup', 'created_at': datetime.datetime(2024, 7, 20, 14, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2241487726, 'issue_id': 2407479887, 'author': 'ajiragroup', 'body': 'We handled the issue by creating a new FY with same name, deleted company and then deleted the FY. But we think this error could be resolved by the team.', 'created_at': datetime.datetime(2024, 7, 21, 5, 53, 33, tzinfo=datetime.timezone.utc)}]","yasser1248 on (2024-07-20 14:32:00 UTC): try to delete it from database @ajiragroup

ajiragroup (Issue Creator) on (2024-07-21 05:53:33 UTC): We handled the issue by creating a new FY with same name, deleted company and then deleted the FY. But we think this error could be resolved by the team.

"
2407364555,issue,closed,completed,export-fixture issue for Role Permission for Page and Report,"### Information about bug

I have created some roles such as **OWNER** and i wanted to give some permissions for reports such as **Gross Profit** in the **Role Permission for Page and Report** it was working perfectly but this time i wanted to move these changes to my custom app so i can move it to the production server. inside the app folder as usual i did ""**bench export-fixtures**"" everything went smoothly even after i pushed it to  github it was ok in the production server i did ""git pull"" and it was perfectly working but once i did ""**bench --site mysite.com migrate**"" it gave me  a long error. later on i went to the exported fixtures and i checked the set_role_for is empty please check the attachments

[err.txt](https://github.com/user-attachments/files/16216455/err.txt)
![image](https://github.com/user-attachments/assets/70d3c58c-7256-4216-9773-4ffd18e6f2c5)
![image](https://github.com/user-attachments/assets/cf2f71ae-39be-49af-99cc-ddb69d39da9b)





### Module

other

### Version

erpnext 15.29.3
frappe 15.34.1



### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",Rebaz-balisani,2024-07-14 10:16:50+00:00,[],2024-08-05 00:09:30+00:00,2024-07-16 08:33:27+00:00,https://github.com/frappe/erpnext/issues/42320,"[('bug', None)]","[{'comment_id': 2230328443, 'issue_id': 2407364555, 'author': 'Nihantra-Patel', 'body': ""First thing, you can't export the role permission for page and report. because it's a page, not a doctype. if you want to export the custom permission that you applied for page and report then you have to export the Custom DocPerm.\r\n\r\n![image](https://github.com/user-attachments/assets/e4357698-db8f-4af5-880e-da42d58b4119)"", 'created_at': datetime.datetime(2024, 7, 16, 8, 33, 27, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-16 08:33:27 UTC): First thing, you can't export the role permission for page and report. because it's a page, not a doctype. if you want to export the custom permission that you applied for page and report then you have to export the Custom DocPerm.

![image](https://github.com/user-attachments/assets/e4357698-db8f-4af5-880e-da42d58b4119)

"
2407277714,issue,open,,Warranty Claim - Serial Number ,"Hello, 

usually in a warranty claim there is a good chance to replace the faulty item with a new one, I believe when creating a warranty claim ERPNext should capture both the faulty S/N and the replacement S/N 
I think should be done through material request and material issuance to be linked with this claim


Thanks
",habali08,2024-07-14 05:44:41+00:00,[],2024-07-14 15:10:05+00:00,,https://github.com/frappe/erpnext/issues/42318,"[('feature-request', None)]","[{'comment_id': 2227381763, 'issue_id': 2407277714, 'author': 'thida-bcn', 'body': 'nice to have', 'created_at': datetime.datetime(2024, 7, 14, 15, 10, 4, tzinfo=datetime.timezone.utc)}]","thida-bcn on (2024-07-14 15:10:04 UTC): nice to have

"
2406831290,issue,closed,completed,"Customer , Supplier Auto Name >> ID Generated in Even Number","### Information about bug

Selling Setting >>
Customer Naming By >> Auto Name
Customer ID generated in Even Number
Missing Odd Number


### Module

buying, selling

### Version

Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.29.2 (HEAD)

Frappe Framework: v15.34.0 (HEAD)

Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell

```
",thida-bcn,2024-07-13 10:08:45+00:00,[],2025-02-01 00:11:24+00:00,2025-01-17 06:24:11+00:00,https://github.com/frappe/erpnext/issues/42313,"[('bug', None)]","[{'comment_id': 2226845529, 'issue_id': 2406831290, 'author': 'thida-bcn', 'body': '[Auto Name](https://1drv.ms/v/s!ApZZW_p_lZ54gYwK7Jych56zllp9HQ?e=p49qID)', 'created_at': datetime.datetime(2024, 7, 13, 10, 10, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2402261970, 'issue_id': 2406831290, 'author': 'venkat102', 'body': 'The issue is fixed and merged with PR:[42921](https://github.com/frappe/erpnext/pull/42921)', 'created_at': datetime.datetime(2024, 10, 9, 13, 0, 25, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-07-13 10:10:34 UTC): [Auto Name](https://1drv.ms/v/s!ApZZW_p_lZ54gYwK7Jych56zllp9HQ?e=p49qID)

venkat102 on (2024-10-09 13:00:25 UTC): The issue is fixed and merged with PR:[42921](https://github.com/frappe/erpnext/pull/42921)

"
2405839772,issue,closed,completed,could not find warehouse type: transit,"### Information about bug

I installed ERPnext yesterday and plan to put my company information, Once I fill in every detail and save it, it shows the error message "" could not find warehouse type: transit "". When I try to create a warehouse it requires the company. Somehow, both of these features are interlinked with each other. This is causing so much trouble that I cannot even put simple company information into the software.

### Module

stock

### Version

ERPNext: v15.29.3

Frappe Framework: v15.34.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",thesamug,2024-07-12 15:15:19+00:00,[],2024-08-01 00:10:17+00:00,2024-07-16 10:02:25+00:00,https://github.com/frappe/erpnext/issues/42309,"[('bug', None)]","[{'comment_id': 2227315174, 'issue_id': 2405839772, 'author': 'gursewak8642', 'body': 'Could you please explain the issue briefly and in which doctype you are facing this issue?', 'created_at': datetime.datetime(2024, 7, 14, 11, 42, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227818253, 'issue_id': 2405839772, 'author': 'thesamug', 'body': ""I don't have more knowledge about all that stuff.\r\n\r\n![image](https://github.com/user-attachments/assets/7f92cb19-5c23-4049-b92a-eb572affb619)\r\nHere is the screenshot for reference."", 'created_at': datetime.datetime(2024, 7, 15, 7, 0, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230506493, 'issue_id': 2405839772, 'author': 'Nihantra-Patel', 'body': 'First, check if the ""Goods In Transit"" warehouse is available with the ""Transit"" warehouse type.\r\n\r\nIf not, create it. The Default In-Transit Warehouse is available in the company doctype, but it will appear only after saving the company. If any session default or user-specific(logged user) warehouse default is set, you need to remove it. This is because, at the time of creation, it sets the default warehouse in the Default In-Transit Warehouse.\r\n\r\nWe tested in v15 latest but we haven\'t found the this type issue.', 'created_at': datetime.datetime(2024, 7, 16, 10, 2, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230819559, 'issue_id': 2405839772, 'author': 'thesamug', 'body': 'When I try to create a warehouse, it requires a company. Now please tell me how to remove the default warehouse.', 'created_at': datetime.datetime(2024, 7, 16, 12, 54, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230831266, 'issue_id': 2405839772, 'author': 'Nihantra-Patel', 'body': ""I think the issue is, you haven't completed the setup wizard, So all such problems are coming. first complete the setup wizard"", 'created_at': datetime.datetime(2024, 7, 16, 12, 59, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2231128764, 'issue_id': 2405839772, 'author': 'thesamug', 'body': 'How do I restart the setup wizard?', 'created_at': datetime.datetime(2024, 7, 16, 14, 55, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2231428981, 'issue_id': 2405839772, 'author': 'Nihantra-Patel', 'body': 'search like setup wizard', 'created_at': datetime.datetime(2024, 7, 16, 17, 14, tzinfo=datetime.timezone.utc)}]","gursewak8642 on (2024-07-14 11:42:49 UTC): Could you please explain the issue briefly and in which doctype you are facing this issue?

thesamug (Issue Creator) on (2024-07-15 07:00:08 UTC): I don't have more knowledge about all that stuff.

![image](https://github.com/user-attachments/assets/7f92cb19-5c23-4049-b92a-eb572affb619)
Here is the screenshot for reference.

Nihantra-Patel on (2024-07-16 10:02:25 UTC): First, check if the ""Goods In Transit"" warehouse is available with the ""Transit"" warehouse type.

If not, create it. The Default In-Transit Warehouse is available in the company doctype, but it will appear only after saving the company. If any session default or user-specific(logged user) warehouse default is set, you need to remove it. This is because, at the time of creation, it sets the default warehouse in the Default In-Transit Warehouse.

We tested in v15 latest but we haven't found the this type issue.

thesamug (Issue Creator) on (2024-07-16 12:54:21 UTC): When I try to create a warehouse, it requires a company. Now please tell me how to remove the default warehouse.

Nihantra-Patel on (2024-07-16 12:59:39 UTC): I think the issue is, you haven't completed the setup wizard, So all such problems are coming. first complete the setup wizard

thesamug (Issue Creator) on (2024-07-16 14:55:45 UTC): How do I restart the setup wizard?

Nihantra-Patel on (2024-07-16 17:14:00 UTC): search like setup wizard

"
2405143143,issue,open,,Unnecessary Journal Entry created with Payment Reconciliation,"### Information about bug

Additional Journal Entry is created when reconciling Invoice (Credit Note) with another Journal Entry. Steps to replicate the issue:

- Create Sales Return (Credit Note)
- Make refund through Journal Entry
- Reconcile using Payment Reconciliation

Additional journal entry is created in this case

**Sales Invoice (Return)**
![image](https://github.com/user-attachments/assets/0f79f3d6-5d34-4e10-86fb-c5dbc81a7e5e)

**Refund Journal Entry**
![image](https://github.com/user-attachments/assets/a36c44fd-6316-4453-bd58-4dd900994fec)

**Additional Reconciliation Journal Entry**
![image](https://github.com/user-attachments/assets/995040e7-2f32-412e-be55-92484e37b952)

Ideally it should have reconciled with the original Journal Entry against which the credit note was adjusted.

### Module

accounts

### Version

Develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",vorasmit,2024-07-12 09:26:30+00:00,['ruthra-kumar'],2024-08-02 10:34:24+00:00,,https://github.com/frappe/erpnext/issues/42302,"[('bug', None)]","[{'comment_id': 2225241358, 'issue_id': 2405143143, 'author': 'ruthra-kumar', 'body': ""System auto-generates Journals only on 2 cases:\r\n1. When reconciling forex transactions, Sales/Purchase Invoice against Journal or Payment Entry. The generated journal is solely to capture the Exchange Gain/Loss.\r\n2. When reconciling a Sales/Purchase Return.\r\n\r\nFor the second case, which is reported here, there is one system level limitations and a flexibility requirement that forces this behavior:\r\n1. On Receivable/Payable accounts,  system expects references (against_voucher_no) on the decreasing side. Ex: On Debtors, references should be available on the Credit values, and for Creditors, references should be on Debit values. So, updating the sales return reference on the Journal will not work.\r\n2. Making journal allows for reconciling with multiple invoices or even partially reconciling a return. Also, this approach doesn't require touching either of the parent documents."", 'created_at': datetime.datetime(2024, 7, 12, 10, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2225471269, 'issue_id': 2405143143, 'author': 'vorasmit', 'body': ""> reconciling with multiple invoices or even partially reconciling a return\r\n\r\nI remember it added multiple lines in journal entry. That should be acceptable here also.\r\n\r\nIntroduction of new journal entry means credit note is adjusted against new journal instead of original journal. With this,\r\n- It's an extra entry in customers ledger\r\n- Shows incorrect information to customer for adjustments (i.e credit note adjusted against new journal instead of refund journal)\r\n- Journal entry stays even after payment is unreconciled. This means there is additional complexity to handle cancellation and amendment of documents."", 'created_at': datetime.datetime(2024, 7, 12, 12, 25, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230121736, 'issue_id': 2405143143, 'author': 'ruthra-kumar', 'body': '> * Journal entry stays even after payment is unreconciled. This means there is additional complexity to handle cancellation and amendment of documents.\r\n\r\nThis looks like a bug. Will create a fix for this.', 'created_at': datetime.datetime(2024, 7, 16, 6, 29, 36, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-07-12 10:01:32 UTC): System auto-generates Journals only on 2 cases:
1. When reconciling forex transactions, Sales/Purchase Invoice against Journal or Payment Entry. The generated journal is solely to capture the Exchange Gain/Loss.
2. When reconciling a Sales/Purchase Return.

For the second case, which is reported here, there is one system level limitations and a flexibility requirement that forces this behavior:
1. On Receivable/Payable accounts,  system expects references (against_voucher_no) on the decreasing side. Ex: On Debtors, references should be available on the Credit values, and for Creditors, references should be on Debit values. So, updating the sales return reference on the Journal will not work.
2. Making journal allows for reconciling with multiple invoices or even partially reconciling a return. Also, this approach doesn't require touching either of the parent documents.

vorasmit (Issue Creator) on (2024-07-12 12:25:09 UTC): I remember it added multiple lines in journal entry. That should be acceptable here also.

Introduction of new journal entry means credit note is adjusted against new journal instead of original journal. With this,
- It's an extra entry in customers ledger
- Shows incorrect information to customer for adjustments (i.e credit note adjusted against new journal instead of refund journal)
- Journal entry stays even after payment is unreconciled. This means there is additional complexity to handle cancellation and amendment of documents.

ruthra-kumar (Assginee) on (2024-07-16 06:29:36 UTC): This looks like a bug. Will create a fix for this.

"
2404814144,issue,closed,completed,"Message showing ""Please set the document name "" in erpnext","I am getting a message  ""Please set the document name ""

while I creating stock reconciliation.
![Screenshot 2024-07-12 111653](https://github.com/user-attachments/assets/70a1a408-a213-4fd8-955a-03e42bb712ab)

",rajubaghel,2024-07-12 05:55:24+00:00,[],2024-07-27 00:08:38+00:00,2024-07-12 09:01:14+00:00,https://github.com/frappe/erpnext/issues/42295,"[('feature-request', None)]","[{'comment_id': 2225140221, 'issue_id': 2404814144, 'author': 'Nihantra-Patel', 'body': 'When this message appears, it means that the ID has not been generated.\r\n\r\nhttps://github.com/frappe/frappe/blob/9194eaf80601319078b3b779042abc7d87e12b50/frappe/model/naming.py#L542-L549\r\n\r\nKindly upgrade your version 15 because everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/25347847-9b04-457e-b820-b5dd1381e2c0', 'created_at': datetime.datetime(2024, 7, 12, 9, 1, 14, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-12 09:01:14 UTC): When this message appears, it means that the ID has not been generated.

https://github.com/frappe/frappe/blob/9194eaf80601319078b3b779042abc7d87e12b50/frappe/model/naming.py#L542-L549

Kindly upgrade your version 15 because everything is working fine. No problems were encountered in the latest version 15.


https://github.com/user-attachments/assets/25347847-9b04-457e-b820-b5dd1381e2c0

"
2403321415,issue,closed,completed,Documentation Page,"### Information about bug

Doc page simply broken: https://docs.erpnext.com

Can someone have a look asap? I'm trying to sell the idea to my client's, this broken page is a deal killer )

### Module

other

### Version

latest

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",m23am,2024-07-11 14:23:21+00:00,[],2024-07-27 00:08:42+00:00,2024-07-12 04:55:22+00:00,https://github.com/frappe/erpnext/issues/42293,"[('bug', None)]","[{'comment_id': 2224621473, 'issue_id': 2403321415, 'author': 'Nihantra-Patel', 'body': 'Thank you for letting us know about this problem. We resolved the issue.\r\n\r\nSo please reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and check it.\r\n\r\n![image](https://github.com/user-attachments/assets/249b147c-c6fa-4d94-9cdc-cbdec6695c35)', 'created_at': datetime.datetime(2024, 7, 12, 4, 55, 22, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-12 04:55:22 UTC): Thank you for letting us know about this problem. We resolved the issue.

So please reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and check it.

![image](https://github.com/user-attachments/assets/249b147c-c6fa-4d94-9cdc-cbdec6695c35)

"
2402847899,issue,open,,Encoding in payment request breaks Integration request of Payments app,"### Information about bug

Why these values are being encoded?

https://github.com/frappe/erpnext/blob/22549186ab25f925c341dfb4f79d6689e48e4e53/erpnext/accounts/doctype/payment_request/payment_request.py#L256-L264

The problem arises when this is used by the payments app's controller and also dumbed to integration request log by the payments app:

![CleanShot 2024-07-11 at 15 50 58@2x](https://github.com/frappe/erpnext/assets/34810212/483684a4-44b4-4f6b-b87d-364664a90d37)

Related issue: https://github.com/frappe/webshop/issues/183

### Module

accounts

### Version

![CleanShot 2024-07-11 at 16 05 44@2x](https://github.com/frappe/erpnext/assets/34810212/166a76e9-3424-4429-afc2-c6812a5efec8)


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",NagariaHussain,2024-07-11 10:35:58+00:00,[],2024-07-11 10:36:37+00:00,,https://github.com/frappe/erpnext/issues/42286,"[('bug', None)]",[],
2402586130,issue,open,,Purchase Rate Adjustment,"Use Case:

User is purchasing the material via Purchase Order -> Purchase Receipt -> Purchase Invoice
Purchase order for Item#1 is created at $10/Unit, the Receipt and Invoice is also created ar $10/Unit.
However, upon negotiation, the seller agreed to reduce the item rate by $2/Unit. 

As the Receipt and Invoice is already generated and submitted, the rate adjustment has to be done via Debit Note.

Now, in the current system, the Debit Note has to be created to adjust the Supplier's Outstanding and a separate Landed Cost Voucher is to be generated to adjust the Item's Rate in Stocks.

Instead of this, we would need to create a single transaction that adjusts the party's outstanding and also adjusts the item's rate.",hpotabatti,2024-07-11 08:30:10+00:00,[],2024-07-11 08:30:10+00:00,,https://github.com/frappe/erpnext/issues/42285,"[('feature-request', None)]",[],
2402203507,issue,closed,completed,Fixing multiple design issues in Payment Request,"### Issues

When a **Payment Request** is partially paid, it does not allow further payments towards the remaining amount.

* It does not keep a record of how much is unpaid (`outstanding_amount`).
* The reference number can be changed by the user of **Payment Entry**, which can result in the loss of link to **Payment Request**.
* When creating **Payment Entry** from **Payment Request**, the `party_amount` is incorrectly set to the total amount of the reference transaction if the following condition gets triggered:
https://github.com/frappe/erpnext/blob/3ef7e6ce5c851d634576c3063c6663af14df83e5/erpnext/accounts/doctype/payment_request/payment_request.py#L295
* Payment Request status is always set to **Partially Paid** if Payment Request amount is less than the reference transaction total, because this status is always set [based on reference transaction amounts](https://github.com/frappe/erpnext/blob/3ef7e6ce5c851d634576c3063c6663af14df83e5/erpnext/accounts/doctype/payment_request/payment_request.py#L641).
* Negative Amount is allowed.
* Advance Payment Statuses in PO/SO are incorrect.


**Internal Ticket:** https://support.frappe.io/helpdesk/tickets/18503

### Proposal

* Add a `Payment Request` link field in the reference table of **Payment Entry**.
  * This will maintain the reference of the **Payment Request** for which this **Payment Entry** was created.
  * It will be used to retrieve the amount paid in the past.
* Add an `Outstanding Amount` field in **Payment Request**. This will track the amount remaining to be paid.
* Modify the flow of `create_payment_entry()`:
  * Fetch the amount from the **outstanding_amount** field instead of **grand_total**.
  * Ensure that `party_amount` is set correctly in all cases.
* (?) Add a validation on the save of linked **Payment Entry** that the amount should not be higher than the total amount of Payment Request.
* Update status of Payment Request based on amounts in Payment Request, instead of amounts in reference transaction.
* Don't allow negative amount.
* Set correct advance payment statuses.

### Caveat

This change will not update old Payment Requests as `Paid` where they were earlier `Partially Paid`, because there is no way to determine the outstanding amount reliably for existing Payment Requests.
",sagarvora,2024-07-11 04:09:33+00:00,['sagarvora'],2024-10-07 00:10:41+00:00,2024-09-21 01:34:47+00:00,https://github.com/frappe/erpnext/issues/42280,"[('proposal', '')]",[],
2401117369,issue,closed,completed,FIFO Queue vs Qty After Transaction Comparison,"### Information about bug

Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/desk/query_report.py"", line 223, in run
    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)
      report_name = 'FIFO Queue vs Qty After Transaction Comparison'
      filters = '{}'
      user = 'Administrator'
      ignore_prepared_report = 'false'
      custom_columns = None
      is_tree = False
      parent_field = None
      are_default_filters = 'true'
      report = <Report: FIFO Queue vs Qty After Transaction Comparison>
      result = None
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
      args = (<Report: FIFO Queue vs Qty After Transaction Comparison>, '{}', 'Administrator', None, False, None)
      kwargs = {}
      switched_connection = False
      fn = <function generate_report_result at 0x7f65a42a08b0>
  File ""apps/frappe/frappe/desk/query_report.py"", line 84, in generate_report_result
    res = get_report_result(report, filters) or []
      report = <Report: FIFO Queue vs Qty After Transaction Comparison>
      filters = {}
      user = 'Administrator'
      custom_columns = None
      is_tree = False
      parent_field = None
  File ""apps/frappe/frappe/desk/query_report.py"", line 65, in get_report_result
    res = report.execute_script_report(filters)
      report = <Report: FIFO Queue vs Qty After Transaction Comparison>
      filters = {}
      res = None
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 162, in execute_script_report
    res = self.execute_module(filters)
      self = <Report: FIFO Queue vs Qty After Transaction Comparison>
      filters = {}
      threshold = 15
      res = []
      start_time = datetime.datetime(2024, 7, 10, 22, 16, 19, 348472)
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 179, in execute_module
    return frappe.get_attr(method_name)(frappe._dict(filters))
      self = <Report: FIFO Queue vs Qty After Transaction Comparison>
      filters = {}
      module = 'Stock'
      method_name = 'erpnext.stock.report.fifo_queue_vs_qty_after_transaction_comparison.fifo_queue_vs_qty_after_transaction_comparison.execute'
  File ""apps/erpnext/erpnext/stock/report/fifo_queue_vs_qty_after_transaction_comparison/fifo_queue_vs_qty_after_transaction_comparison.py"", line 31, in execute
    data = get_data(filters)
      filters = {}
      columns = [{'fieldname': 'name', 'fieldtype': 'Link', 'label': 'Stock Ledger Entry', 'options': 'Stock Ledger Entry'}, {'fieldname': 'item_code', 'fieldtype': 'Link', 'label': 'Item Code', 'options': 'Item'}, {'fieldname': 'warehouse', 'fieldtype': 'Link', 'label': 'Warehouse', 'options': 'Warehouse'}, {'fieldname': 'posting_date', 'fieldtype': 'Data', 'label': 'Posting Date'}, {'fieldname': 'posting_time', 'fieldtype': 'Data', 'label': 'Posting Time'}, {'fieldname': 'creation', 'fieldtype': 'Data', 'label': 'Creation'}, {'fieldname': 'voucher_type', 'fieldtype': 'Link', 'label': 'Voucher Type', 'options': 'DocType'}, {'fieldname': 'voucher_no', 'fieldtype': 'Dynamic Link', 'label': 'Voucher No', 'options': 'voucher_type'}, {'fieldname': 'batch_no', 'fieldtype': 'Link', 'label': 'Batch', 'options': 'Batch'}, {'fieldname': 'use_batchwise_valuation', 'fieldtype': 'Check', 'label': 'Batchwise Valuation'}, {'fieldname': 'actual_qty', 'fieldtype': 'Float', 'label': 'Qty Change'}, {'fieldname': 'qty_a...
  File ""apps/erpnext/erpnext/stock/report/fifo_queue_vs_qty_after_transaction_comparison/fifo_queue_vs_qty_after_transaction_comparison.py"", line 37, in get_data
    frappe.throw(_(""Any one of following filters required: warehouse, Item Code, Item Group""))
      filters = {}
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
      msg = 'Any one of following filters required: warehouse, Item Code, Item Group'
      exc = <class 'frappe.exceptions.ValidationError'>
      title = None
      is_minimizable = False
      wide = False
      as_list = False
      primary_action = None
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
      title = None
      as_table = False
      as_list = False
      indicator = 'red'
      alert = False
      primary_action = None
      is_minimizable = False
      wide = False
      realtime = False
      sys = <module 'sys' (built-in)>
      _raise_exception = <function msgprint.<locals>._raise_exception at 0x7f6585e257e0>
      inspect = <module 'inspect' from '/usr/lib/python3.10/inspect.py'>
      msg = 'Any one of following filters required: warehouse, Item Code, Item Group'
      out = {'message': 'Any one of following filters required: warehouse, Item Code, Item Group', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': '38c7596464c06427bd0e554f679be80b8f3827da14f29c9ca9c6f12a'}
      raise_exception = <class 'frappe.exceptions.ValidationError'>
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
      exc = ValidationError('Any one of following filters required: warehouse, Item Code, Item Group')
      inspect = <module 'inspect' from '/usr/lib/python3.10/inspect.py'>
      msg = 'Any one of following filters required: warehouse, Item Code, Item Group'
      out = {'message': 'Any one of following filters required: warehouse, Item Code, Item Group', 'title': 'Message', 'indicator': 'red', 'raise_exception': 1, '__frappe_exc_id': '38c7596464c06427bd0e554f679be80b8f3827da14f29c9ca9c6f12a'}
      raise_exception = <class 'frappe.exceptions.ValidationError'>
frappe.exceptions.ValidationError: Any one of following filters required: warehouse, Item Code, Item Group

### Module

stock

### Version

ERPNext: v15.29.3 (version-15)

Frappe Framework: v15.34.0 (version-15)

Frappe HR: v15.23.1 (version-15)

Frappe Lending: v0.0.1 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-07-10 15:49:35+00:00,[],2024-07-25 00:08:54+00:00,2024-07-10 16:32:26+00:00,https://github.com/frappe/erpnext/issues/42277,"[('bug', None)]","[{'comment_id': 2220978639, 'issue_id': 2401117369, 'author': 'thida-bcn', 'body': ""after bench migrate and restart again\r\nit's working\r\nthanks"", 'created_at': datetime.datetime(2024, 7, 10, 16, 32, 52, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-07-10 16:32:52 UTC): after bench migrate and restart again
it's working
thanks

"
2400251505,issue,open,,Warranty Information didn't update at Serial after upgrade version 15,"### Information about bug

Item with Warranty Period
![image](https://github.com/frappe/erpnext/assets/62122640/bf72b82d-fc57-4910-9026-ad69387e4c58)
Create Sales Invoice
![image](https://github.com/frappe/erpnext/assets/62122640/d12ddf59-8143-48eb-877f-35123742bb7e)
Go to Serial 
![image](https://github.com/frappe/erpnext/assets/62122640/464595f0-0c6f-42bb-89ca-3fb474bbacdc)
Missing Warranty Information
![image](https://github.com/frappe/erpnext/assets/62122640/8b68f09c-6910-4afa-924f-79157a0b46cd)

At version 14
![image](https://github.com/frappe/erpnext/assets/62122640/a98d1291-0133-4afd-bf10-4789d92a335c)
![image](https://github.com/frappe/erpnext/assets/62122640/fda17b96-0d6b-44c5-b19b-f349f9643ff8)

warranty claim list
![image](https://github.com/frappe/erpnext/assets/62122640/3f938667-0474-4d91-9b7b-e0ae61897dcd)


### Module

stock, selling

### Version

ERPNext: v15.29.2 (version-15)

Frappe Framework: v15.34.0 (version-15)

Frappe HR: v15.23.1 (version-15)

Frappe Lending: v0.0.1 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-07-10 09:38:51+00:00,[],2024-08-23 14:50:03+00:00,,https://github.com/frappe/erpnext/issues/42270,"[('bug', None)]","[{'comment_id': 2224599310, 'issue_id': 2400251505, 'author': 'dineshpanchal93', 'body': 'Same issue we are also facing', 'created_at': datetime.datetime(2024, 7, 12, 4, 46, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2224602752, 'issue_id': 2400251505, 'author': 'dineshpanchal93', 'body': 'https://github.com/frappe/erpnext/issues/41646', 'created_at': datetime.datetime(2024, 7, 12, 4, 48, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2225014093, 'issue_id': 2400251505, 'author': 'thida-bcn', 'body': '> #41646\r\n\r\nyes, not yet fixed', 'created_at': datetime.datetime(2024, 7, 12, 7, 44, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2227373520, 'issue_id': 2400251505, 'author': 'frewper', 'body': 'Duplicate of #41646', 'created_at': datetime.datetime(2024, 7, 14, 14, 43, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2282790437, 'issue_id': 2400251505, 'author': 'trackomatic', 'body': 'We are also facing the same problem on serial number warranty. No details are fetched from Purchase/Sales of the serial number. we have to manually out the Warranty Expiry Date for each serial number.\r\nAs warranty starts from the date of sale... Hence the Details of Sales Invoice / Delivery Note should also be fetched while checking the warranty status of the serial number and creating the warranty complaints.\r\nAdditionally, there should be a filter on the Serial Number based on the customer. It will help the customer to create warranty complaints from customer portal itself...\r\n\r\nhttps://discuss.frappe.io/t/serial-number-warranty-details/122934?u=trackomatic_india', 'created_at': datetime.datetime(2024, 8, 11, 15, 5, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306761169, 'issue_id': 2400251505, 'author': 'dixit-sigzen', 'body': 'any update on this?', 'created_at': datetime.datetime(2024, 8, 23, 10, 9, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307252136, 'issue_id': 2400251505, 'author': 'trackomatic', 'body': '> any update on this?\r\n\r\nNot Yet...\r\nI am also looking to find a solution to this situation..\r\nBut no success till now..', 'created_at': datetime.datetime(2024, 8, 23, 14, 50, 2, tzinfo=datetime.timezone.utc)}]","dineshpanchal93 on (2024-07-12 04:46:59 UTC): Same issue we are also facing

dineshpanchal93 on (2024-07-12 04:48:13 UTC): https://github.com/frappe/erpnext/issues/41646

thida-bcn (Issue Creator) on (2024-07-12 07:44:11 UTC): yes, not yet fixed

frewper on (2024-07-14 14:43:46 UTC): Duplicate of #41646

trackomatic on (2024-08-11 15:05:01 UTC): We are also facing the same problem on serial number warranty. No details are fetched from Purchase/Sales of the serial number. we have to manually out the Warranty Expiry Date for each serial number.
As warranty starts from the date of sale... Hence the Details of Sales Invoice / Delivery Note should also be fetched while checking the warranty status of the serial number and creating the warranty complaints.
Additionally, there should be a filter on the Serial Number based on the customer. It will help the customer to create warranty complaints from customer portal itself...

https://discuss.frappe.io/t/serial-number-warranty-details/122934?u=trackomatic_india

dixit-sigzen on (2024-08-23 10:09:30 UTC): any update on this?

trackomatic on (2024-08-23 14:50:02 UTC): Not Yet...
I am also looking to find a solution to this situation..
But no success till now..

"
2400021548,issue,closed,completed,Quality Inspection Reference type for Subcontracting Reciept,"**I do file Quality inspections for reference types**

1. Purchase Invoice
2. Purchase Receipt
3. Sales Invoice 
4. Delivery Note
5. Stock Entry
6. Job Card

The problem is when we have a Subcontracting receipt against subcontracting Orders, It is difficult to link the Quality inspection connected to this receipt.

**Describe the solution you'd like**
Reference Type option to be added as Subcontracting Receipt.

**Describe alternatives you've considered**
I am filing this incoming quality inspection against send to subcontractor stock entry.

**Additional context**
I tried to customize this doc type Quality Inspection but the Reference type options are not allowed to change,
",rohitgonsalves,2024-07-10 07:51:34+00:00,[],2024-07-27 00:08:37+00:00,2024-07-12 09:07:44+00:00,https://github.com/frappe/erpnext/issues/42267,"[('feature-request', None)]","[{'comment_id': 2225151503, 'issue_id': 2400021548, 'author': 'Nihantra-Patel', 'body': 'Feature already developed\r\n\r\nPlease check the PR: https://github.com/frappe/erpnext/pull/36786\r\n\r\nSubcontracting Receipt is available in the Quality Inspection.\r\n\r\nPlease check it.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/df2b394a-9ce6-4867-97cd-fc31eda3fe6d', 'created_at': datetime.datetime(2024, 7, 12, 9, 7, 44, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-12 09:07:44 UTC): Feature already developed

Please check the PR: https://github.com/frappe/erpnext/pull/36786

Subcontracting Receipt is available in the Quality Inspection.

Please check it.


https://github.com/user-attachments/assets/df2b394a-9ce6-4867-97cd-fc31eda3fe6d

"
2402291006,issue,open,,Can't Cancel Stock Reconciliation error TypeError: unsupported operand type(s) for +=: 'NoneType' and 'NoneType',"### App Versions
```
{
	""erpnext"": ""14.70.2"",
	""erpnext_pk"": ""0.0.1"",
	""frappe"": ""14.75.0"",
	""hrms"": ""16.0.0-dev"",
	""ne_theme"": ""0.0.1"",
	""payments"": ""0.0.1""
}
```
### Route
```
Form/Stock Reconciliation/MAT-RECO-2024-00007
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 97, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 48, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1619, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 50, in cancel
    doc.cancel()
  File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", line 629, in cancel
    self._cancel()
  File ""apps/frappe/frappe/model/document.py"", line 1005, in _cancel
    return self.save()
  File ""apps/frappe/frappe/model/document.py"", line 310, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 362, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1103, in run_post_save_methods
    self.run_method(""on_cancel"")
  File ""apps/frappe/frappe/model/document.py"", line 931, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1283, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1265, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 928, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", line 75, in on_cancel
    self.make_sle_on_cancel()
  File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", line 523, in make_sle_on_cancel
    sl_entries = self.merge_similar_item_serial_nos(sl_entries)
  File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py"", line 545, in merge_similar_item_serial_nos
    data.qty_after_transaction += d.qty_after_transaction
TypeError: unsupported operand type(s) for +=: 'NoneType' and 'NoneType'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doctype"": ""Stock Reconciliation"",
		""name"": ""MAT-RECO-2024-00007""
	},
	""btn"": {
		""jQuery360076095390770265771"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 3501,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.cancel""
}
```
### Response Data
```
{
	""exception"": ""TypeError: unsupported operand type(s) for +=: 'NoneType' and 'NoneType'""
}
```",Ubaid-AI,2024-07-10 07:51:22+00:00,[],2024-07-11 05:37:01+00:00,,https://github.com/frappe/erpnext/issues/42281,"[('bug', None)]","[{'comment_id': 2222075074, 'issue_id': 2402291006, 'author': 'Ubaid-AI', 'body': 'i modified the function in File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py""\r\nand its working fine for now\r\n\r\ndef merge_similar_item_serial_nos(self, sl_entries):\r\n\t\t# If user has put the same item in multiple row with different serial no\r\n\t\tnew_sl_entries = []\r\n\t\tmerge_similar_entries = {}\r\n\r\n\t\tfor d in sl_entries:\r\n\t\t\tif not d.serial_no or flt(d.get(""actual_qty"")) < 0:\r\n\t\t\t\tnew_sl_entries.append(d)\r\n\t\t\t\tcontinue\r\n\r\n\t\t\tkey = (d.item_code, d.warehouse)\r\n\t\t\tif key not in merge_similar_entries:\r\n\t\t\t\td.total_amount = flt(d.actual_qty) * d.valuation_rate\r\n\t\t\t\tmerge_similar_entries[key] = d\r\n\t\t\telif d.serial_no:\r\n\t\t\t\tdata = merge_similar_entries[key]\r\n\t\t\t\tdata.actual_qty += d.actual_qty\r\n\t\t\t\td.qty_after_transaction = d.qty_after_transaction or 0\r\n\t\t\t\tdata.qty_after_transaction = data.qty_after_transaction or 0\r\n\t\t\t\tdata.qty_after_transaction += d.qty_after_transaction\r\n\t\t\t\tdata.total_amount += d.actual_qty * d.valuation_rate\r\n\t\t\t\tif data.actual_qty != 0:\r\n\t\t\t\t\tdata.valuation_rate = data.total_amount / data.actual_qty\r\n\t\t\t\t\tdata.incoming_rate = data.total_amount / data.actual_qty\r\n\t\t\t\telse:\r\n\t\t\t\t\tdata.valuation_rate = 0\r\n\t\t\t\t\tdata.incoming_rate = 0\r\n\t\t\t\tdata.serial_no += ""\\n"" + d.serial_no\r\n\r\n\t\tnew_sl_entries.extend(merge_similar_entries.values())\r\n\t\treturn new_sl_entries', 'created_at': datetime.datetime(2024, 7, 10, 9, 29, 2, tzinfo=datetime.timezone.utc)}]","Ubaid-AI (Issue Creator) on (2024-07-10 09:29:02 UTC): i modified the function in File ""apps/erpnext/erpnext/stock/doctype/stock_reconciliation/stock_reconciliation.py""
and its working fine for now

def merge_similar_item_serial_nos(self, sl_entries):
		# If user has put the same item in multiple row with different serial no
		new_sl_entries = []
		merge_similar_entries = {}

		for d in sl_entries:
			if not d.serial_no or flt(d.get(""actual_qty"")) < 0:
				new_sl_entries.append(d)
				continue

			key = (d.item_code, d.warehouse)
			if key not in merge_similar_entries:
				d.total_amount = flt(d.actual_qty) * d.valuation_rate
				merge_similar_entries[key] = d
			elif d.serial_no:
				data = merge_similar_entries[key]
				data.actual_qty += d.actual_qty
				d.qty_after_transaction = d.qty_after_transaction or 0
				data.qty_after_transaction = data.qty_after_transaction or 0
				data.qty_after_transaction += d.qty_after_transaction
				data.total_amount += d.actual_qty * d.valuation_rate
				if data.actual_qty != 0:
					data.valuation_rate = data.total_amount / data.actual_qty
					data.incoming_rate = data.total_amount / data.actual_qty
				else:
					data.valuation_rate = 0
					data.incoming_rate = 0
				data.serial_no += ""\n"" + d.serial_no

		new_sl_entries.extend(merge_similar_entries.values())
		return new_sl_entries

"
2399787739,issue,open,,Payment entry and reconciliation against Employee advance,"Currently, when employee advance form is submitted, you have an option to create payment. If done so, the newly created payment entry will have a payment reference created as below:
![image](https://github.com/frappe/erpnext/assets/108009061/34dcafc6-862e-48e6-b4d5-c3bd70ddb12f)
****
The paid account will be set to **'Employee advances' account**.

But when entering a payment entry manually (for various reasons like late entry), there is no option to select **'Employee advances' account** under Account Paid To.

Lets select Creditors account and then save the form.
Then under payment reference, we can select:
Type: Employee advance

But the 'Account Paid to' field is still Creditors.

![image](https://github.com/frappe/erpnext/assets/108009061/09dbbd73-a111-45d6-a40b-dfba80055f64)



Also, there is no way we can reconcile payment entry with employee advance. 






",ajiragroup,2024-07-10 05:30:36+00:00,[],2024-10-14 04:27:43+00:00,,https://github.com/frappe/erpnext/issues/42260,"[('feature-request', None)]","[{'comment_id': 2267226011, 'issue_id': 2399787739, 'author': 'git529', 'body': 'I think you have to create the Employee Advance (which does not generate an accounting entry, and as such does not affect the accounting), then you create a Payment Entry against the employee advance, then you reconcile the bank transaction against the payment entry.', 'created_at': datetime.datetime(2024, 8, 4, 1, 9, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2409919691, 'issue_id': 2399787739, 'author': 'ajiragroup', 'body': ""> I think you have to create the Employee Advance (which does not generate an accounting entry, and as such does not affect the accounting), then you create a Payment Entry against the employee advance, then you reconcile the bank transaction against the payment entry.\r\n\r\nIt is not possible to create payment entry against employee advance. That's the feature we are requesting."", 'created_at': datetime.datetime(2024, 10, 14, 4, 27, 41, tzinfo=datetime.timezone.utc)}]","git529 on (2024-08-04 01:09:19 UTC): I think you have to create the Employee Advance (which does not generate an accounting entry, and as such does not affect the accounting), then you create a Payment Entry against the employee advance, then you reconcile the bank transaction against the payment entry.

ajiragroup (Issue Creator) on (2024-10-14 04:27:41 UTC): It is not possible to create payment entry against employee advance. That's the feature we are requesting.

"
2397133889,issue,closed,completed,item Tax template should Auto Update after updating tax in hsn document.,"### Information about bug

When I update the tax in HSN document it should auto update the item tax template every time I update the HSN doc.
I have to manually update the item tax template also or just delete the existing and save then it update all the taxes there.

there should be a proper solution for the same.

I have also attached a video of the issue I am facing. 

in video shown that earlier in item doc taxes rows were 20 when I deleted all the rows and save it gave me 24 rows automatically which should have happened automatically so I do not have to do it manually every time.

[Video Link](https://drive.google.com/file/d/1VbpKylyDm0vIOd66wLMhpRlDtkt9J5dg/view?usp=sharing)

### Module

stock

### Version

ERPNext: v15.27.1 (HEAD)
Frappe Framework: v15.29.1 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Sunil-Codes,2024-07-09 05:01:58+00:00,[],2024-08-01 00:10:21+00:00,2024-07-11 11:07:01+00:00,https://github.com/frappe/erpnext/issues/42241,"[('bug', None)]","[{'comment_id': 2230081640, 'issue_id': 2397133889, 'author': 'Sunil-Codes', 'body': 'In case I am doing the bulk action by using data import for the same and I have multiple hsn code to update the item tax in that case how will I do it for every hsn one by one going and clicking on update tax for item?', 'created_at': datetime.datetime(2024, 7, 16, 5, 54, 48, tzinfo=datetime.timezone.utc)}]","Sunil-Codes (Issue Creator) on (2024-07-16 05:54:48 UTC): In case I am doing the bulk action by using data import for the same and I have multiple hsn code to update the item tax in that case how will I do it for every hsn one by one going and clicking on update tax for item?

"
2396591822,issue,closed,completed,Reports not working at all in 15.29.2,"### Information about bug

When trying on any doctype I cannot see any report view. Not the system ones, not the custom ones and also not when just switching to the report view. 

Browser Console Error Provided:

### Module

accounts, projects, support

### Version

- ERPNext: v15.29.2
- Frappe Framework: v15.33.3
- Frappe HR: v15.23.1
- Payments: v0.0.1
- Print Designer: v1.4.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
Crome:

report_view.js:225 Uncaught (in promise) TypeError: Cannot read properties of undefined (reading 'find')
    at frappe.views.ReportView.get_count_element (report_view.js:225:34)
    at frappe.views.ReportView.freeze (list_view.js:505:9)
    at frappe.views.ReportView.refresh (base_list.js:491:8)
    at frappe.views.ReportView.refresh (list_view.js:312:16)
    at frappe.views.ReportView.refresh (utils.js:890:19)
    at onload (task__custom_list_js:21:18)
    at frappe.listview_settings.Task.onload (task__custom_list_js:195:9)
    at frappe.views.ReportView.setup_result_area (report_view.js:79:41)
```

Firefox:
```
Uncaught (in promise) TypeError: this.$paging_area is undefined
    get_count_element report_view.js:225
    freeze list_view.js:505
    refresh base_list.js:491
    refresh list_view.js:312
    throttle utils.js:890
    onload task__custom_list_js:21
    onload task__custom_list_js:195
    setup_result_area report_view.js:79
report_view.js:225:15
Uncaught TypeError: this.$paging_area is undefined
    get_count_element report_view.js:225
    freeze list_view.js:505
    refresh base_list.js:491
    refresh list_view.js:312
    throttle utils.js:890
    refresh_list_view base_list.js:659
    s utils.js:905
```
```
",prononext,2024-07-08 21:18:18+00:00,[],2024-07-25 00:09:01+00:00,2024-07-10 05:08:06+00:00,https://github.com/frappe/erpnext/issues/42239,"[('bug', None)]","[{'comment_id': 2219570148, 'issue_id': 2396591822, 'author': 'Nihantra-Patel', 'body': '> at onload (task__custom_list_js:21:18)\r\n\r\nIf any applied the listview client script then remove or comment out it. because everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/73f6cb62-aea1-4bdb-83d7-e56ee9c7a750', 'created_at': datetime.datetime(2024, 7, 10, 5, 8, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2219946149, 'issue_id': 2396591822, 'author': 'prononext', 'body': ""If you still are looking for a working Reports view Feature and also are using Clients scripts on the List view. You might have to do a exeption and check to not apply the Client view when reports are active like this:\r\n\r\n`  if (!frappe.route_options || frappe.route_options.view != 'Report') `"", 'created_at': datetime.datetime(2024, 7, 10, 8, 57, 52, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-10 05:08:06 UTC): If any applied the listview client script then remove or comment out it. because everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/73f6cb62-aea1-4bdb-83d7-e56ee9c7a750

prononext (Issue Creator) on (2024-07-10 08:57:52 UTC): If you still are looking for a working Reports view Feature and also are using Clients scripts on the List view. You might have to do a exeption and check to not apply the Client view when reports are active like this:

`  if (!frappe.route_options || frappe.route_options.view != 'Report') `

"
2396158219,issue,open,,Aggregation expression should appear in group by clause,"### Information about bug

Invalid grouping operation, field used in aggregation operation should appear in group by clause.

Database postgresql v14

Steps to reproduce

Open Projects
Create project with any name like Project1
Save it
Reload page
after adding debug output, got such query:
```
SELECT EXTRACT(epoch FROM ""from_time""),COUNT(*)
FROM ""tabTimesheet Detail""
WHERE
    ""project""='Project1'
  AND ""from_time"">CURRENT_DATE-INTERVAL '1 YEAR'
  AND ""docstatus""< '2'
GROUP BY DATE(""from_time"");
```
I also found it source:
https://github.com/frappe/erpnext/blob/4cea34c1c66047ede854390b72f10ebcba9549b3/erpnext/projects/doctype/project/project.py#L367

Should be:

`.groupby(UnixTimestamp(timesheet_detail.from_time))`


OS version / distribution, Frappe install method, etc.
Os Ubuntu 22.02, Frappe manual installation, Applied patch to PyPika terms file which fixes CURRENT_DATE, CURRENT_TIME error (https://github.com/kayak/pypika/issues/809)



### Module

projects

### Version

Installed frappe is v15.33.3
Installed erpnext is v15.29.2

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
19:54:33 web.1      | PG:QUERY=SELECT EXTRACT(epoch FROM ""from_time""),COUNT(*) FROM ""tabTimesheet Detail"" WHERE ""project
""=%(param1)s AND ""from_time"">CURRENT_DATE-INTERVAL '1 YEAR' AND ""docstatus""<2 GROUP BY DATE(""from_time"")                
19:54:33 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 973, in _bootstrap                                
19:54:33 web.1      |     self._bootstrap_inner()                                                                       
19:54:33 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 1016, in _bootstrap_inner                         
19:54:33 web.1      |     self.run()                                                                                    
19:54:33 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 953, in run                                       
19:54:33 web.1      |     self._target(*self._args, **self._kwargs)                                                     
19:54:33 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 683, in process_request_thread                 
19:54:33 web.1      |     self.finish_request(request, client_address)                                                  
19:54:33 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 360, in finish_request                         
19:54:33 web.1      |     self.RequestHandlerClass(request, client_address, self)                                       
19:54:33 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 747, in __init__                               
19:54:33 web.1      |     self.handle()                                                                                 
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 391, in h
andle                                                                                                                   
19:54:33 web.1      |     super().handle()                                                                              
19:54:33 web.1      |   File ""/usr/lib/python3.10/http/server.py"", line 433, in handle                                  
19:54:33 web.1      |     self.handle_one_request()                                                                     
19:54:33 web.1      |   File ""/usr/lib/python3.10/http/server.py"", line 421, in handle_one_request                      
19:54:33 web.1      |     method()                                                                                      
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 363, in r
un_wsgi                                                                                                                 
19:54:33 web.1      |     execute(self.server.app)                                                                      
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 326, in e
xecute                                                                                                                  
19:54:33 web.1      |     for data in application_iter:                                                                 
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/debug/__init__.py"", line 34
1, in debug_application                                                                                                 
19:54:33 web.1      |     app_iter = self.app(environ, start_response)                                                  
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/middlewares.py"", line 16, in __call__             
19:54:33 web.1      |     return super().__call__(environ, start_response)                                              
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/middleware/shared_data.py"",
 line 249, in __call__                                                                                                  
19:54:33 web.1      |     return self.app(environ, start_response)                                                      
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/middleware/shared_data.py"",
 line 249, in __call__ 
19:54:33 web.1      |     return self.app(environ, start_response)                                                      
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/app.py"", line 79, in application                  
19:54:33 web.1      |     app(environ, start_response),                                                                 
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/wrappers/request.py"", line 
190, in application                                                                                                     
19:54:33 web.1      |     resp = f(*args[:-2] + (request,))                                                             
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/app.py"", line 114, in application                 
19:54:33 web.1      |     response = frappe.api.handle(request)                                                         
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/api/__init__.py"", line 49, in handle              
19:54:33 web.1      |     data = endpoint(**arguments)                                                                  
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call           
19:54:33 web.1      |     return frappe.handler.handle()                                                                
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 49, in handle                   
19:54:33 web.1      |     data = execute_cmd(cmd)                                                                       
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 85, in execute_cmd              
19:54:33 web.1      |     return frappe.call(method, **frappe.form_dict)                                                
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 1808, in call                  
19:54:33 web.1      |     return fn(*args, **newargs)                                                                   
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper 
19:54:33 web.1      |     return func(*args, **kwargs)                                                                  
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 957, in wrapper_fn             
19:54:33 web.1      |     retval = fn(*args, **get_newargs(fn, kwargs))                                                 19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/desk/notifications.py"", line 298, in get_open_coun
t                                                           
19:54:33 web.1      |     out[""timeline_data""] = module.get_timeline_data(doctype, name)                                19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/erpnext/erpnext/projects/doctype/project/project.py"", line 368, 
in get_timeline_data                                                                                                    
19:54:33 web.1      |     .run()                                                                                        
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/query_builder/utils.py"", line 84, in execute_query
19:54:33 web.1      |     result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep                           
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/postgres/database.py"", line 221, in sql  
19:54:33 web.1      |     return super().sql(modify_query(query), modify_values(values), *args, **kwargs)               
19:54:33 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/database.py"", line 258, in sql           
19:54:33 web.1      |     traceback.print_stack()                                                                       
19:54:33 web.1      | Error in query:                                                                                   
19:54:33 web.1      | column ""tabTimesheet Detail.from_time"" must appear in the GROUP BY clause or be used in an aggrega
te function      
19:54:33 web.1      | 127.0.0.1 - - [08/Jul/2024 19:54:33] ""GET /api/method/frappe.desk.notifications.get_open_count?doc
type=Project&name=Project1&items=[""Task"",""Timesheet"",""Issue"",""Project%20Update"",""Material%20Request"",""BOM"",""Stock%20Entry"",""
Sales%20Order"",""Delivery%20Note"",""Sales%20Invoice"",""Purchase%20Order"",""Purchase%20Receipt"",""Purchase%20Invoice""]&_=17203
48938283 HTTP/1.0"" 500 -
```
",roman4e,2024-07-08 17:17:04+00:00,[],2024-07-08 17:17:26+00:00,,https://github.com/frappe/erpnext/issues/42234,"[('bug', None)]",[],
2395655374,issue,closed,completed,The Show Opening Entries in General Ledger does not work,"### Information about bug

when I use the filters of date with the Show Opening Entries filter
example:
when you enter the from date 25-03-2024, to date 25-03-2024 and checked the third filter
They display all the operations with opening entries
and
when you did not check the third filter
They display all the operations without opening entries
![image](https://github.com/frappe/erpnext/assets/164166793/a322238c-9a94-464e-94a1-52d2a14aa780)


### Module

accounts

### Version

ERPNext: v15.29.2 (version-15)
Frappe Framework: v15.33.3 (version-15)
Frappe HR: v15.23.1 (version-15)
Custom app: v0.0.1 (develop)
Payments: v0.0.1 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",manalErpnext,2024-07-08 13:30:11+00:00,[],2024-07-26 00:08:46+00:00,2024-07-11 10:40:36+00:00,https://github.com/frappe/erpnext/issues/42230,"[('bug', None)]","[{'comment_id': 2222525129, 'issue_id': 2395655374, 'author': 'Nihantra-Patel', 'body': '""Show Opening Entries"" filter works like this:\r\n\r\n- When checked, it shows all entries, including opening entries, for the selected date range.\r\n- When unchecked, it shows only regular entries, excluding opening entries, for the selected date range.\r\n\r\nThis behavior is normal and not a bug.\r\n\r\nAny GL Entry that has its \'Is Opening\' field set is considered an opening entry, regardless of the date it falls on. This means that the \'Is Opening\' status determines whether an entry is an opening entry, not the date.', 'created_at': datetime.datetime(2024, 7, 11, 10, 0, 41, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-11 10:00:41 UTC): ""Show Opening Entries"" filter works like this:

- When checked, it shows all entries, including opening entries, for the selected date range.
- When unchecked, it shows only regular entries, excluding opening entries, for the selected date range.

This behavior is normal and not a bug.

Any GL Entry that has its 'Is Opening' field set is considered an opening entry, regardless of the date it falls on. This means that the 'Is Opening' status determines whether an entry is an opening entry, not the date.

"
2395635744,issue,closed,completed,Issue with Error While Creating Sales Invoice from Sales Order,"### Information about bug

Hello,
I am encountering an issue when creating a sales invoice from a sales order in our ERP system. Specifically, an error occurs during the submission process.

For your reference, kindly verify the error details provided in the attached clipboard.
![Screenshot 2024-07-08 114609](https://github.com/frappe/erpnext/assets/75109236/33d724c7-d95a-4b82-aae0-3aa525e52a0e)


### Module

selling

### Version

Frappe version :   15.33.2
ERPNext version : 15.29.1

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""backup_genie"": ""0.0.1"",
	""erpnext"": ""15.29.1"",
	""frappe"": ""15.33.2"",
	""hrms"": ""15.23.1"",
	""india_compliance"": ""15.9.2"",
	""lending"": ""0.0.1"",
	""non_profit"": ""0.0.1"",
	""nx_theme"": ""0.0.1"",
	""payments"": ""0.0.1""
}
```
### Route
```
Form/Sales Invoice/UM/24-25/8163
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 469, in on_submit
    self.update_against_document_in_jv()
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 1551, in update_against_document_in_jv
    reconcile_against_document(lst, active_dimensions=active_dimensions)
  File ""apps/erpnext/erpnext/accounts/utils.py"", line 501, in reconcile_against_document
    referenced_row, update_advance_paid = update_reference_in_payment_entry(
  File ""apps/erpnext/erpnext/accounts/utils.py"", line 727, in update_reference_in_payment_entry
    payment_entry.set_missing_ref_details(
TypeError: NonProfitPaymentEntry.set_missing_ref_details() got an unexpected keyword argument 'update_ref_details_only_for'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""UM/24-25/8163\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":11,\""title\"":\""Revathi C - 9884760730 , 9940426784\"",\""naming_series\"":\""UM/24-25/.####\"",\""customer\"":\""Revathi C - 9884760730 , 9940426784\"",\""customer_name\"":\""Revathi C - 9884760730 , 9940426784\"",\""e_waybill_status\"":\""\"",\""company\"":\""Test Industries\"",\""posting_date\"":\""2024-07-06\"",\""posting_time\"":\""13:09:31.746514\"",\""set_posting_time\"":0,\""due_date\"":\""2024-07-06\"",\""is_pos\"":0,\""is_consolidated\"":0,\""is_return\"":0,\""reason_for_issuing_document\"":\""\"",\""update_outstanding_for_self\"":1,\""update_billed_amount_in_sales_order\"":0,\""update_billed_amount_in_delivery_note\"":1,\""is_debit_note\"":0,\""is_reverse_charge\"":0,\""is_export_with_gst\"":0,\""branch\"":\""Choolaimedu\"",\""currency\"":\""INR\"",\""conversion_rate\"":1,\""selling_price_list\"":\""Standard Selling\"",\""price_list_currency\"":\""INR\"",\""plc_conversion_rate\"":1,\""ignore_pricing_rule\"":0,\""update_stock\"":0,\""set_warehouse\"":\""ORDER Godown - UM\"",\""total_qty\"":4,\""total_net_weight\"":0,\""base_total\"":12349,\""base_net_total\"":10575.32,\""total\"":12349,\""net_total\"":10575.32,\""tax_category\"":\""In-State\"",\""taxes_and_charges\"":\""Output GST In-state - UM\"",\""base_total_taxes_and_charges\"":1773.68,\""total_taxes_and_charges\"":1773.68,\""base_grand_total\"":12349,\""base_rounding_adjustment\"":0,\""base_rounded_total\"":12349,\""base_in_words\"":\""\"",\""grand_total\"":12349,\""rounding_adjustment\"":0,\""use_company_roundoff_cost_center\"":0,\""rounded_total\"":12349,\""in_words\"":\""\"",\""total_advance\"":2900,\""outstanding_amount\"":9449,\""disable_rounded_total\"":0,\""apply_discount_on\"":\""Grand Total\"",\""base_discount_amount\"":0,\""is_cash_or_non_trade_discount\"":0,\""additional_discount_percentage\"":0,\""discount_amount\"":0,\""other_charges_calculation\"":\""<div class=\\\""tax-break-up\\\"" style=\\\""overflow-x: auto;\\\"">\\n\\t<table class=\\\""table table-bordered table-hover\\\"">\\n\\t\\t<thead>\\n\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-left\\\"">HSN/SAC</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-right\\\"">Taxable Amount</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-right\\\"">Output Tax SGST </th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-right\\\"">Output Tax CGST</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t</tr>\\n\\t\\t</thead>\\n\\t\\t<tbody>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>9404</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t₹ 9,576.27\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(9.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t₹ 861.86\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(9.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t₹ 861.86\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>6304</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t₹ 999.05\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(2.5%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t₹ 24.98\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(2.5%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t₹ 24.98\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t</tbody>\\n\\t</table>\\n</div>\"",\""gst_breakup_table\"":null,\""total_billing_hours\"":0,\""total_billing_amount\"":0,\""base_paid_amount\"":0,\""paid_amount\"":0,\""base_change_amount\"":0,\""change_amount\"":0,\""allocate_advances_automatically\"":1,\""only_include_allocated_payments\"":0,\""write_off_amount\"":0,\""base_write_off_amount\"":0,\""write_off_outstanding_amount_automatically\"":0,\""redeem_loyalty_points\"":0,\""loyalty_points\"":0,\""loyalty_amount\"":0,\""customer_address\"":\""Home-Billing-3870\"",\""address_display\"":\""No : 31 <br>Bajanai Koil , 2nd Street <br>Choolaimedu<br>Chennai<br>\\nTamil Nadu, State Code: 33<br>Postal Code: 600094<br>India<br>\\n\"",\""gst_category\"":\""Unregistered\"",\""place_of_supply\"":\""33-Tamil Nadu\"",\""contact_person\"":\""Revathi C - 9884760730 , 9940426784-Revathi C - 9884760730 , 9940426784\"",\""contact_display\"":\""Revathi C - 9884760730 , 9940426784\"",\""territory\"":\""India\"",\""shipping_address_name\"":\""Home-Billing-3870\"",\""shipping_address\"":\""No : 31 <br>Bajanai Koil , 2nd Street <br>Choolaimedu<br>Chennai<br>\\nTamil Nadu, State Code: 33<br>Postal Code: 600094<br>India<br>\\n\"",\""company_address\"":\""HOME-Billing-3469\"",\""company_address_display\"":\""FLAT NO - D F 4 , NAVEEN\\\""S SHUBAHMANGALAA APPARTMENTS<br>KALASATHAAMMAN KOIL STREET , <br>NEAR - ROYALA NAGAR , RAMAPURAM<br>Chennai<br>\\nTamil Nadu, State Code: 33<br>Postal Code: 600089<br>India<br>\\n\"",\""ignore_default_payment_terms_template\"":0,\""payment_terms_template\"":\""Retail Customer\"",\""tc_name\"":\""Sales Invoice 2\"",\""terms\"":\""<p align=\\\""left\\\""><u>Terms &amp; Conditions:</u></p>\\n<p align=\\\""left\\\"">E &amp; OE ( Errors and Omissions Excepted )</p>\\n<p align=\\\""left\\\"">100% Payment to be made before delivery</p>\\n<p align=\\\""left\\\"">Subject to Chennai Jurisdiction</p>\\n<p align=\\\""left\\\""></p>\\n\\n\\n<p align=\\\""right\\\"">For Test Industries</p><br>\\n<br>\\n<br>\\n<p align=\\\""right\\\"">Authorized Signatory</p>\"",\""po_no\"":\""\"",\""debit_to\"":\""Debtors - UM\"",\""party_account_currency\"":\""INR\"",\""is_opening\"":\""No\"",\""against_income_account\"":\""Sales - UM\"",\""amount_eligible_for_commission\"":10575.32,\""commission_rate\"":0,\""total_commission\"":0,\""letter_head\"":\""LH - Choolaimedu\"",\""group_same_items\"":0,\""invoice_copy\"":\""Original for Recipient\"",\""language\"":\""en\"",\""distance\"":0,\""mode_of_transport\"":\""Road\"",\""lr_date\"":\""2024-07-06\"",\""gst_vehicle_type\"":\""Regular\"",\""ecommerce_supply_type\"":null,\""status\"":\""Draft\"",\""einvoice_status\"":\""\"",\""customer_group\"":\""Retail\"",\""is_internal_customer\"":0,\""is_discounted\"":0,\""remarks\"":\""No Remarks\"",\""repost_required\"":0,\""doctype\"":\""Sales Invoice\"",\""timesheets\"":[],\""advances\"":[{\""name\"":\""j3o5kfsrjp\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:31.788451\"",\""modified\"":\""2024-07-06 13:09:31.788451\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""reference_type\"":\""Payment Entry\"",\""reference_name\"":\""ACC-PAY-2024-00823\"",\""remarks\"":\""Amount INR 2900 received from Revathi C - 9884760730 , 9940426784\\nTransaction reference no G Pay dated 2024-07-04\\nAmount INR 2900 against Sales Order SO/23-24/0937\"",\""reference_row\"":\""v2a56vdisk\"",\""advance_amount\"":2900,\""allocated_amount\"":2900,\""exchange_gain_loss\"":0,\""ref_exchange_rate\"":1,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""advances\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Advance\""}],\""taxes\"":[{\""name\"":\""j3motn9r3v\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""charge_type\"":\""On Net Total\"",\""account_head\"":\""Output Tax SGST - UM\"",\""description\"":\""Output Tax SGST \"",\""included_in_print_rate\"":1,\""included_in_paid_amount\"":0,\""cost_center\"":\""Main - UM\"",\""rate\"":0,\""gst_tax_type\"":\""sgst\"",\""tax_amount\"":886.84,\""total\"":11462.16,\""tax_amount_after_discount_amount\"":886.84,\""base_tax_amount\"":886.84,\""base_total\"":11462.16,\""base_tax_amount_after_discount_amount\"":886.84,\""item_wise_tax_detail\"":\""{\\\""SE4CB1SCS\\\"":[9,861.71],\\\""SEPSL\\\"":[9,0.15],\\\""TBSOQ\\\"":[2.5,24.98]}\"",\""dont_recompute_tax\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""taxes\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Taxes and Charges\""},{\""name\"":\""j3mo849a4p\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":2,\""charge_type\"":\""On Net Total\"",\""account_head\"":\""Output Tax CGST - UM\"",\""description\"":\""Output Tax CGST\"",\""included_in_print_rate\"":1,\""included_in_paid_amount\"":0,\""cost_center\"":\""Main - UM\"",\""rate\"":0,\""gst_tax_type\"":\""cgst\"",\""tax_amount\"":886.84,\""total\"":12349,\""tax_amount_after_discount_amount\"":886.84,\""base_tax_amount\"":886.84,\""base_total\"":12349,\""base_tax_amount_after_discount_amount\"":886.84,\""item_wise_tax_detail\"":\""{\\\""SE4CB1SCS\\\"":[9,861.71],\\\""SEPSL\\\"":[9,0.15],\\\""TBSOQ\\\"":[2.5,24.98]}\"",\""dont_recompute_tax\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""taxes\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Taxes and Charges\""}],\""items\"":[{\""name\"":\""j3modqeek2\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""has_item_scanned\"":0,\""item_code\"":\""SE4CB1SCS\"",\""item_name\"":\""Sleep Essentials - 4CB1SCS\"",\""description\"":\""<div class=\\\""ql-editor read-mode\\\""><p>Sleep Essentials - Ortho Collection - 74.5 in x 45 in x 5 in</p><p>4in (Coir + Bonded) + 1in HR</p></div>\"",\""gst_hsn_code\"":\""9404\"",\""item_group\"":\""Mattress\"",\""brand\"":\""Sleep Essentials\"",\""image\"":\""\"",\""qty\"":1,\""stock_uom\"":\""Nos\"",\""uom\"":\""Nos\"",\""conversion_factor\"":1,\""stock_qty\"":1,\""price_list_rate\"":12948,\""base_price_list_rate\"":12948,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":12.743,\""discount_amount\"":1650,\""base_rate_with_margin\"":0,\""rate\"":11298,\""amount\"":11298,\""item_tax_template\"":\""GST 18% - UM\"",\""gst_treatment\"":\""Taxable\"",\""base_rate\"":11298,\""base_amount\"":11298,\""stock_uom_rate\"":11298,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":9574.58,\""net_amount\"":9574.57627118644,\""base_net_rate\"":9574.58,\""base_net_amount\"":9574.58,\""taxable_value\"":0,\""igst_rate\"":0,\""cgst_rate\"":9,\""sgst_rate\"":9,\""cess_rate\"":0,\""cess_non_advol_rate\"":0,\""igst_amount\"":0,\""cgst_amount\"":861.71,\""sgst_amount\"":861.71,\""cess_amount\"":0,\""cess_non_advol_amount\"":0,\""delivered_by_supplier\"":0,\""income_account\"":\""Sales - UM\"",\""is_fixed_asset\"":0,\""expense_account\"":\""Cost of Goods Sold - UM\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""ORDER Godown - UM\"",\""use_serial_batch_fields\"":0,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":6779.66,\""item_tax_rate\"":\""{\\\""Output Tax SGST - UM\\\"": 9.0, \\\""Output Tax CGST - UM\\\"": 9.0, \\\""Output Tax IGST - UM\\\"": 18.0, \\\""Input Tax SGST - UM\\\"": 9.0, \\\""Input Tax CGST - UM\\\"": 9.0, \\\""Input Tax IGST - UM\\\"": 18.0, \\\""Input Tax SGST RCM - UM\\\"": 9.0, \\\""Input Tax CGST RCM - UM\\\"": 9.0, \\\""Input Tax IGST RCM - UM\\\"": 18.0}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SO/23-24/0937\"",\""so_detail\"":\""v1b5o7537d\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - UM\"",\""page_break\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""},{\""name\"":\""j3mogsb4cg\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":2,\""has_item_scanned\"":0,\""item_code\"":\""SEPSL\"",\""item_name\"":\""Sleep Essentials Shredded Latex Pillow\"",\""description\"":\""<div><p>Sleep Essentials Shredded Latex Pillow</p></div>\"",\""gst_hsn_code\"":\""9404\"",\""item_group\"":\""Pillow\"",\""brand\"":\""Sleep Essentials\"",\""image\"":\""\"",\""qty\"":2,\""stock_uom\"":\""Nos\"",\""uom\"":\""Nos\"",\""conversion_factor\"":1,\""stock_qty\"":2,\""price_list_rate\"":1,\""base_price_list_rate\"":1,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":0,\""discount_amount\"":0,\""base_rate_with_margin\"":0,\""rate\"":1,\""amount\"":2,\""item_tax_template\"":\""GST 18% - UM\"",\""gst_treatment\"":\""Taxable\"",\""base_rate\"":1,\""base_amount\"":2,\""stock_uom_rate\"":1,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":0.85,\""net_amount\"":1.6949152542372883,\""base_net_rate\"":0.85,\""base_net_amount\"":1.69,\""taxable_value\"":0,\""igst_rate\"":0,\""cgst_rate\"":9,\""sgst_rate\"":9,\""cess_rate\"":0,\""cess_non_advol_rate\"":0,\""igst_amount\"":0,\""cgst_amount\"":0.15,\""sgst_amount\"":0.15,\""cess_amount\"":0,\""cess_non_advol_amount\"":0,\""delivered_by_supplier\"":0,\""income_account\"":\""Sales - UM\"",\""is_fixed_asset\"":0,\""expense_account\"":\""Cost of Goods Sold - UM\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""ORDER Godown - UM\"",\""use_serial_batch_fields\"":0,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":0.85,\""item_tax_rate\"":\""{\\\""Output Tax SGST - UM\\\"": 9.0, \\\""Output Tax CGST - UM\\\"": 9.0, \\\""Output Tax IGST - UM\\\"": 18.0, \\\""Input Tax SGST - UM\\\"": 9.0, \\\""Input Tax CGST - UM\\\"": 9.0, \\\""Input Tax IGST - UM\\\"": 18.0, \\\""Input Tax SGST RCM - UM\\\"": 9.0, \\\""Input Tax CGST RCM - UM\\\"": 9.0, \\\""Input Tax IGST RCM - UM\\\"": 18.0}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SO/23-24/0937\"",\""so_detail\"":\""v1b5otqg9n\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - UM\"",\""page_break\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""},{\""name\"":\""j3mosam314\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":3,\""has_item_scanned\"":0,\""item_code\"":\""TBSOQ\"",\""item_name\"":\""Trident Occassion Bedsheet - Queen\"",\""description\"":\""Trident Occassion Bedsheet - Queen\"",\""gst_hsn_code\"":\""6304\"",\""item_group\"":\""Bed Linen - Medium\"",\""brand\"":\""Trident\"",\""image\"":\""\"",\""qty\"":1,\""stock_uom\"":\""Nos\"",\""uom\"":\""Nos\"",\""conversion_factor\"":1,\""stock_qty\"":1,\""price_list_rate\"":1899,\""base_price_list_rate\"":1899,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":44.76,\""discount_amount\"":850,\""base_rate_with_margin\"":0,\""rate\"":1049,\""amount\"":1049,\""item_tax_template\"":\""GST 5% - UM\"",\""gst_treatment\"":\""Taxable\"",\""base_rate\"":1049,\""base_amount\"":1049,\""stock_uom_rate\"":1049,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":999.05,\""net_amount\"":999.047619047619,\""base_net_rate\"":999.05,\""base_net_amount\"":999.05,\""taxable_value\"":0,\""igst_rate\"":0,\""cgst_rate\"":2.5,\""sgst_rate\"":2.5,\""cess_rate\"":0,\""cess_non_advol_rate\"":0,\""igst_amount\"":0,\""cgst_amount\"":24.98,\""sgst_amount\"":24.98,\""cess_amount\"":0,\""cess_non_advol_amount\"":0,\""delivered_by_supplier\"":0,\""income_account\"":\""Sales - UM\"",\""is_fixed_asset\"":0,\""expense_account\"":\""Cost of Goods Sold - UM\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""ORDER Godown - UM\"",\""use_serial_batch_fields\"":0,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":584.74,\""item_tax_rate\"":\""{\\\""Output Tax SGST - UM\\\"": 2.5, \\\""Output Tax CGST - UM\\\"": 2.5, \\\""Output Tax IGST - UM\\\"": 5.0, \\\""Input Tax SGST - UM\\\"": 2.5, \\\""Input Tax CGST - UM\\\"": 2.5, \\\""Input Tax IGST - UM\\\"": 5.0, \\\""Input Tax SGST RCM - UM\\\"": 2.5, \\\""Input Tax CGST RCM - UM\\\"": 2.5, \\\""Input Tax IGST RCM - UM\\\"": 5.0}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SO/23-24/0937\"",\""so_detail\"":\""v1b5je14ht\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - UM\"",\""page_break\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""}],\""packed_items\"":[],\""pricing_rules\"":[],\""payments\"":[],\""payment_schedule\"":[{\""name\"":\""j3mqmt5mb8\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.444280\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""payment_term\"":\""On Delivery\"",\""due_date\"":\""2024-07-06\"",\""invoice_portion\"":100,\""discount_type\"":\""Percentage\"",\""discount_date\"":\""2024-07-06\"",\""discount\"":0,\""payment_amount\"":9449,\""outstanding\"":9449,\""paid_amount\"":0,\""discounted_amount\"":0,\""base_payment_amount\"":9449,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""payment_schedule\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Payment Schedule\""}],\""sales_team\"":[{\""name\"":\""j3moar5uop\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-06 13:09:27.194611\"",\""modified\"":\""2024-07-06 13:09:31.542775\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""sales_person\"":\""Satish\"",\""allocated_percentage\"":100,\""allocated_amount\"":10575.32,\""incentives\"":0,\""parent\"":\""UM/24-25/8163\"",\""parentfield\"":\""sales_team\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Team\""}],\""__onload\"":{\""make_payment_via_journal_entry\"":0},\""__last_sync_on\"":\""2024-07-08T12:56:43.237Z\"",\""_submitted_from_ui\"":1}"",
		""action"": ""Submit""
	},
	""btn"": {
		""jQuery3700162719422162446171"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 1149,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""TypeError: NonProfitPaymentEntry.set_missing_ref_details() got an unexpected keyword argument 'update_ref_details_only_for'"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",sowndharya998,2024-07-08 13:23:02+00:00,[],2024-07-25 00:09:02+00:00,2024-07-10 05:19:54+00:00,https://github.com/frappe/erpnext/issues/42228,"[('bug', None)]","[{'comment_id': 2219583360, 'issue_id': 2395635744, 'author': 'Nihantra-Patel', 'body': 'We tested with advance payment and without advance payment, but everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/16b31a73-495e-4575-a90e-6c70f8df48a3\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/f6a15556-5c0c-4fa6-b3ce-cd4e24c3a6c3', 'created_at': datetime.datetime(2024, 7, 10, 5, 19, 54, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-10 05:19:54 UTC): We tested with advance payment and without advance payment, but everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/16b31a73-495e-4575-a90e-6c70f8df48a3


https://github.com/frappe/erpnext/assets/141945075/f6a15556-5c0c-4fa6-b3ce-cd4e24c3a6c3

"
2395069934,issue,open,,FIFO/LIFO Queue is [] in Stock Ledger Invariant Check for all transactions,"### Information about bug

FIFO/LIFO Queue is [] in Stock Ledger Invariant Check for all transactions. The code exists for FIFO/LIFO Queue posting but it does not work. Let us remove this if it is not used or it is irrelevant or let us address this. We are now in an uncertain state for Item Valuations thus we do not know if we are posting the right COGS or not.

### Module

accounts, stock, buying, selling

### Version

ERPNext: v15.29.2 (version-15)
Frappe Framework: v15.33.3 (version-15)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell
Stock Ledger Entry	Posting Date	Posting Time	Creation	Voucher Type	Voucher No	Batch	Serial and Batch Bundle	Batchwise Valuation	Qty Change	Incoming Rate	Consumption Rate	(A) Qty After Transaction	(B) Expected Qty After Transaction	A - B	FIFO/LIFO Queue	(C) Total Qty in Queue	A - C	(D) Balance Stock Value	(E) Balance Stock Value in Queue	D - E	(F) Change in Stock Value	(G) Sum of Change in Stock Value	G - D	(H) Change in Stock Value (FIFO Queue)	H - F	(I) Valuation Rate	(J) Valuation Rate as per FIFO	I - J	(K) Valuation = Value (D) ÷ Qty (A)	I - K
b0ea0fd9db	2020-12-14	11:44:11	2024-07-08 11:44:43	Purchase Receipt	PREC-RET-00372		SABB-00000367		500	23,8272		500	500	0	[]	0	500	11913,6	0	11913,6	11913,6	11913,6	0			23,8272			23,8272	0
111c3d16ab	2020-12-31	11:45:01	2024-07-08 11:46:18	Stock Entry	STE-01086		SABB-00000368		-1	0	23,83	499	499	0	[]	0	499	11889,77	0	11889,77	-23,83	11889,77	0	0	23,83	23,8272			23,82719439	5,61122E-06
```
",toofun666,2024-07-08 09:04:04+00:00,[],2024-09-14 07:31:46+00:00,,https://github.com/frappe/erpnext/issues/42223,"[('bug', None)]","[{'comment_id': 2350893283, 'issue_id': 2395069934, 'author': 'maveezmh', 'body': '@toofun666  FIfo and LIFO Queue works only if default valuation method in the stock settings is set to FIFO and LIFO.\r\n\r\n![image](https://github.com/user-attachments/assets/b407f5f4-b2d4-4236-83b7-83ecffa62b56)\r\n\r\nit wont work if the setting is set to moving Average', 'created_at': datetime.datetime(2024, 9, 14, 7, 31, 46, tzinfo=datetime.timezone.utc)}]","maveezmh on (2024-09-14 07:31:46 UTC): @toofun666  FIfo and LIFO Queue works only if default valuation method in the stock settings is set to FIFO and LIFO.

![image](https://github.com/user-attachments/assets/b407f5f4-b2d4-4236-83b7-83ecffa62b56)

it wont work if the setting is set to moving Average

"
2394148003,issue,closed,completed,Aggregation expression should appear in group by clause ,"### Information about bug

Invalid grouping operation, field used in aggregation operation should appear in group by clause. 

Database postgresql v14

Steps to reproduce
1. Open Projects
2. Create project with any name like Project1
3. Save it
4. Reload page

after adding debug output, got such query:
```
SELECT EXTRACT(epoch FROM ""from_time""),COUNT(*)
FROM ""tabTimesheet Detail""
WHERE
    ""project""='Project1'
  AND ""from_time"">CURRENT_DATE-INTERVAL '1 YEAR'
  AND ""docstatus""< '2'
GROUP BY DATE(""from_time"");
```

I also found it source:
https://github.com/frappe/erpnext/blob/4cea34c1c66047ede854390b72f10ebcba9549b3/erpnext/projects/doctype/project/project.py#L367

Should be:
```
.groupby(UnixTimestamp(timesheet_detail.from_time))
```

OS version / distribution, Frappe install method, etc.
Os Ubuntu 22.02, Frappe manual installation, Applied patch to PyPika terms file which fixes CURRENT_DATE, CURRENT_TIME error (https://github.com/kayak/pypika/issues/809)

### Module

projects

### Version

Installed frappe is v15.33.3
Installed erpnext is v14.70.9

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
20:26:48 web.1      | PG:QUERY=SELECT EXTRACT(epoch FROM ""from_time""),COUNT(*) FROM ""tabTimesheet Detail"" WHERE ""project
""=%(param1)s AND ""from_time"">CURRENT_DATE-INTERVAL '1 YEAR' AND ""docstatus""<2 GROUP BY DATE(""from_time"")                
20:26:48 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 973, in _bootstrap                                
20:26:48 web.1      |     self._bootstrap_inner()                                                                       
20:26:48 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 1016, in _bootstrap_inner                         
20:26:48 web.1      |     self.run()                                                                                    
20:26:48 web.1      |   File ""/usr/lib/python3.10/threading.py"", line 953, in run                                       
20:26:48 web.1      |     self._target(*self._args, **self._kwargs)                                                     
20:26:48 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 683, in process_request_thread                 
20:26:48 web.1      |     self.finish_request(request, client_address)                                                  
20:26:48 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 360, in finish_request                         
20:26:48 web.1      |     self.RequestHandlerClass(request, client_address, self)                                       
20:26:48 web.1      |   File ""/usr/lib/python3.10/socketserver.py"", line 747, in __init__                               
20:26:48 web.1      |     self.handle()                                                                                 
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 391, in h
andle                                                                                                                   
20:26:48 web.1      |     super().handle()                                                                              
20:26:48 web.1      |   File ""/usr/lib/python3.10/http/server.py"", line 433, in handle                                  
20:26:48 web.1      |     self.handle_one_request()                                                                     
20:26:48 web.1      |   File ""/usr/lib/python3.10/http/server.py"", line 421, in handle_one_request                      
20:26:48 web.1      |     method()                                                                                      
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 363, in r
un_wsgi                                                                                                                 
20:26:48 web.1      |     execute(self.server.app)                                                                      
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/serving.py"", line 326, in e
xecute                                                                                                                  
20:26:48 web.1      |     for data in application_iter:                                                                 
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/debug/__init__.py"", line 34
1, in debug_application                                                                                                 
20:26:48 web.1      |     app_iter = self.app(environ, start_response)                                                  
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/middlewares.py"", line 16, in __call__             
20:26:48 web.1      |     return super().__call__(environ, start_response)                                              
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/middleware/shared_data.py"",
 line 249, in __call__                                                                                                  
20:26:48 web.1      |     return self.app(environ, start_response)                                                      
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/middleware/shared_data.py"",
 line 249, in __call__ 
20:26:48 web.1      |     return self.app(environ, start_response)                                                      
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/app.py"", line 79, in application                  
20:26:48 web.1      |     app(environ, start_response),                                                                 
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/env/lib/python3.10/site-packages/werkzeug/wrappers/request.py"", line 
190, in application                                                                                                     
20:26:48 web.1      |     resp = f(*args[:-2] + (request,))                                                             
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/app.py"", line 114, in application                 
20:26:48 web.1      |     response = frappe.api.handle(request)                                                         
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/api/__init__.py"", line 49, in handle              
20:26:48 web.1      |     data = endpoint(**arguments)                                                                  
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call           
20:26:48 web.1      |     return frappe.handler.handle()                                                                
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 49, in handle                   
20:26:48 web.1      |     data = execute_cmd(cmd)                                                                       
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 85, in execute_cmd              
20:26:48 web.1      |     return frappe.call(method, **frappe.form_dict)                                                
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 1808, in call                  
20:26:48 web.1      |     return fn(*args, **newargs)                                                                   
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper 
20:26:48 web.1      |     return func(*args, **kwargs)                                                                  
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 957, in wrapper_fn             
20:26:48 web.1      |     retval = fn(*args, **get_newargs(fn, kwargs))                                                 20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/desk/notifications.py"", line 298, in get_open_coun
t                                                           
20:26:48 web.1      |     out[""timeline_data""] = module.get_timeline_data(doctype, name)                                20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/erpnext/erpnext/projects/doctype/project/project.py"", line 368, 
in get_timeline_data                                                                                                    
20:26:48 web.1      |     .run()                                                                                        
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/query_builder/utils.py"", line 84, in execute_query
20:26:48 web.1      |     result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep                           
20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/postgres/database.py"", line 221, in sql  
20:26:48 web.1      |     return super().sql(modify_query(query), modify_values(values), *args, **kwargs)               20:26:48 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/database.py"", line 258, in sql           
20:26:48 web.1      |     traceback.print_stack()                                                                       
20:26:48 web.1      | Error in query:                                                                                   
20:26:48 web.1      | column ""tabTimesheet Detail.from_time"" must appear in the GROUP BY clause or be used in an aggrega
te function      
20:26:48 web.1      | 127.0.0.1 - - [07/Jul/2024 20:26:48] ""GET /api/method/frappe.desk.notifications.get_open_count?doc
type=Project&name=Project1&items=[""Task"",""Timesheet"",""Issue"",""Project%20Update"",""Material%20Request"",""BOM"",""Stock%20Entry"",""
Sales%20Order"",""Delivery%20Note"",""Sales%20Invoice"",""Purchase%20Order"",""Purchase%20Receipt"",""Purchase%20Invoice""]&_=17203
54778797 HTTP/1.0"" 500 -
```
",roman4e,2024-07-07 17:37:29+00:00,[],2024-07-25 00:09:04+00:00,2024-07-08 04:44:07+00:00,https://github.com/frappe/erpnext/issues/42214,"[('bug', None)]","[{'comment_id': 2213016183, 'issue_id': 2394148003, 'author': 'Nihantra-Patel', 'body': 'First, your versions are mismatched. If you install Frappe in version 15, then ERPNext must also be installed in version 15. Please ensure both versions match and then test the scenario.', 'created_at': datetime.datetime(2024, 7, 8, 4, 44, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2214741150, 'issue_id': 2394148003, 'author': 'roman4e', 'body': 'Versions are automatically installed using `bench app erpnext`. So if it installed another version, there maybe a bench bug.\r\n\r\nAnyway Have installed latest erpnext version 15.29.2 and i, wondering, has the same bug\r\n```\r\n<               .groupby(UnixTimestamp(timesheet_detail.from_time))\r\n---\r\n>               .groupby(Date(timesheet_detail.from_time))\r\n```', 'created_at': datetime.datetime(2024, 7, 8, 17, 11, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 04:44:07 UTC): First, your versions are mismatched. If you install Frappe in version 15, then ERPNext must also be installed in version 15. Please ensure both versions match and then test the scenario.

roman4e (Issue Creator) on (2024-07-08 17:11:19 UTC): Versions are automatically installed using `bench app erpnext`. So if it installed another version, there maybe a bench bug.

Anyway Have installed latest erpnext version 15.29.2 and i, wondering, has the same bug
```
<               .groupby(UnixTimestamp(timesheet_detail.from_time))
---
```

"
2394103547,issue,open,,Quality Inspection not mapping item propely,"### Information about bug

When I add same item in purchase recipt item table and create quality inspection for both it add same quality inspection when in submit in both child reference.

![Screenshot (1)](https://github.com/frappe/erpnext/assets/18363620/8dd167ac-b460-4e74-909e-10723d71c941)
![Screenshot (2)](https://github.com/frappe/erpnext/assets/18363620/552107d5-6bda-4726-9389-0d30ddcd0602)
![Screenshot (3)](https://github.com/frappe/erpnext/assets/18363620/912ed941-5048-4170-9e5c-b690d34a8844)
![Screenshot (4)](https://github.com/frappe/erpnext/assets/18363620/2ef84892-5bed-4c22-a4f2-6962d0c73588)
![Screenshot (5)](https://github.com/frappe/erpnext/assets/18363620/873b74e2-f252-4ca9-a623-c6a16be36d66)
![Screenshot (6)](https://github.com/frappe/erpnext/assets/18363620/e1436a7e-be8f-4e96-b9cc-69610e2f96b5)

Possible solution add child table reference in Quality Inspection and update that with same id.


### Module

stock

### Version

Frappe Version - 15.30.0
ERPNext Version - 15.27.7

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",finbyz,2024-07-07 15:35:19+00:00,[],2024-07-07 15:35:19+00:00,,https://github.com/frappe/erpnext/issues/42213,"[('bug', None)]",[],
2394097545,issue,closed,completed,Error while getting users for project using postgres,"### Information about bug

The query is correct itself, but if you use postgresql some doublequoted values are treated as fields in postgres, so it should be used in single quotes.

Here
https://github.com/frappe/erpnext/blob/4cea34c1c66047ede854390b72f10ebcba9549b3/erpnext/projects/doctype/project/project.py#L445

Should be replaced with `'Guest', 'Administrator'`


### Module

projects

### Version

Frappe version - v15.33.3
ERPNext version - v14.70.9

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
17:25:50 web.1      |     data = endpoint(**arguments)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
17:25:50 web.1      |     return frappe.handler.handle()
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 49, in handle
17:25:50 web.1      |     data = execute_cmd(cmd)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/handler.py"", line 85, in execute_cmd
17:25:50 web.1      |     return frappe.call(method, **frappe.form_dict)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 1808, in call
17:25:50 web.1      |     return fn(*args, **newargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
17:25:50 web.1      |     return func(*args, **kwargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/desk/search.py"", line 47, in search_link
17:25:50 web.1      |     results = search_widget(
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
17:25:50 web.1      |     return func(*args, **kwargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/desk/search.py"", line 94, in search_widget
17:25:50 web.1      |     return frappe.call(
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 1808, in call
17:25:50 web.1      |     return fn(*args, **newargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
17:25:50 web.1      |     return func(*args, **kwargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/__init__.py"", line 2566, in wrapper
17:25:50 web.1      |     return fn(**kwargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/erpnext/erpnext/projects/doctype/project/project.py"", line 441, 
in get_users_for_project
17:25:50 web.1      |     return frappe.db.sql(
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/postgres/database.py"", line 220, in sql
17:25:50 web.1      |     return super().sql(modify_query(query), modify_values(values), *args, **kwargs)
17:25:50 web.1      |   File ""/srv/erpnext/www/erp/apps/frappe/frappe/database/database.py"", line 258, in sql
17:25:50 web.1      |     traceback.print_stack()
17:25:50 web.1      | Error in query:
17:25:50 web.1      | column ""Guest"" does not exist
17:25:50 web.1      | LINE 4:    and name not in (""Guest"", ""Administrator"")
17:25:50 web.1      |                             ^
```
",roman4e,2024-07-07 15:18:14+00:00,[],2024-07-25 00:09:10+00:00,2024-07-08 04:45:16+00:00,https://github.com/frappe/erpnext/issues/42212,"[('bug', None)]","[{'comment_id': 2213017162, 'issue_id': 2394097545, 'author': 'Nihantra-Patel', 'body': 'First, your versions are mismatched. If you install Frappe in version 15, then ERPNext must also be installed in version 15. Please ensure both versions match and then test the scenario.\r\n\r\nAnd if you know about the solution then you can raise the Pull Request for that.', 'created_at': datetime.datetime(2024, 7, 8, 4, 45, 16, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 04:45:16 UTC): First, your versions are mismatched. If you install Frappe in version 15, then ERPNext must also be installed in version 15. Please ensure both versions match and then test the scenario.

And if you know about the solution then you can raise the Pull Request for that.

"
2393958151,issue,closed,completed,Error while creating new employee ,"### Information about bug

Error while creating new employee.
![image](https://github.com/frappe/erpnext/assets/55729741/4e802fbd-cfb0-4dcc-8f24-261d48a0b554)

The user from which I am creating the employee has all the permission
![image](https://github.com/frappe/erpnext/assets/55729741/fb7fecf4-777f-48b6-8ccb-73d64a0c3629)
![image](https://github.com/frappe/erpnext/assets/55729741/0ad83829-6545-4844-bd80-4676dd331b58)


### Module

HR

### Version

Frappe Builder: v1.10.1 
ERPNext: v15.29.2 
Frappe Framework: v15.33.3 
Frappe Whatsapp: vv1.0.7 
Frappe HR: v15.23.1 
India Compliance: v15.10.0
Frappe Insights: v2.2.2 
Print Designer: v1.4.0 

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",tejasmarvania,2024-07-07 08:51:10+00:00,[],2024-07-25 00:09:09+00:00,2024-07-08 04:50:45+00:00,https://github.com/frappe/erpnext/issues/42210,"[('bug', None)]","[{'comment_id': 2213021604, 'issue_id': 2393958151, 'author': 'Nihantra-Patel', 'body': ""I know this isn't a bug because it's a user permission issue.\r\n\r\nPlease go to the User Permission doctype and check the employee-related permission for the logged user. if any permission is applied then remove it. then reload and check it."", 'created_at': datetime.datetime(2024, 7, 8, 4, 50, 45, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 04:50:45 UTC): I know this isn't a bug because it's a user permission issue.

Please go to the User Permission doctype and check the employee-related permission for the logged user. if any permission is applied then remove it. then reload and check it.

"
2393920338,issue,closed,completed,SALES INVOICE TEMPLATESSSSS,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",psquare6271,2024-07-07 06:51:24+00:00,[],2024-07-25 00:09:08+00:00,2024-07-08 04:53:58+00:00,https://github.com/frappe/erpnext/issues/42209,"[('feature-request', None)]","[{'comment_id': 2213024265, 'issue_id': 2393920338, 'author': 'Nihantra-Patel', 'body': 'This issue lacks sufficient information about the feature request. Whenever you create a new issue for a feature request or bug, please provide complete details of the feature you want and your requirements. If you are reporting a bug, share a screenshot or a video of the error.', 'created_at': datetime.datetime(2024, 7, 8, 4, 53, 58, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 04:53:58 UTC): This issue lacks sufficient information about the feature request. Whenever you create a new issue for a feature request or bug, please provide complete details of the feature you want and your requirements. If you are reporting a bug, share a screenshot or a video of the error.

"
2393906207,issue,open,,Incorrect currency when when getting advances in Sales Invoice,"### Information about bug

I have a Sales Invoice in Australian Dollars (AUD). When I try to ""Get Advances Received"" in the sales invoice, the payment entry is fetched and the amount is shown in INR (base currency). But when I try to save the invoice, it considers the payment entry currency amount as AUD even though the amount is in INR. 

### Module

accounts

### Version

ERPNext: v15.29.2 (version-15)
Frappe Framework: v15.33.3 (version-15)
India Compliance: v15.10.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Allocated amount with taxes (GST) in advances table cannot be greater than outstanding amount of the document. Allocated amount with taxes is greater by A$ xxxxx
```
",ishanloya,2024-07-07 05:54:21+00:00,[],2024-07-15 13:58:38+00:00,,https://github.com/frappe/erpnext/issues/42208,"[('bug', None)]","[{'comment_id': 2228574388, 'issue_id': 2393906207, 'author': 'Ponyooooo', 'body': 'this is a same bug as https://github.com/frappe/erpnext/issues/42062', 'created_at': datetime.datetime(2024, 7, 15, 13, 58, 37, tzinfo=datetime.timezone.utc)}]","Ponyooooo on (2024-07-15 13:58:37 UTC): this is a same bug as https://github.com/frappe/erpnext/issues/42062

"
2393512103,issue,closed,completed,Bank Reconciliation Module,"### Information about bug

Hello , could anyone let me know if they are also facing the same issue.
I somehow guess is this a bug or there is something wrong I am doing

I am trying to match a sales invoice booked from the ‘Bank reconciliation Tool”
However, when I am trying to do so the sales invoices booked are not reflecting.
What is the way to match these transactions ??

Picture 1![image](https://github.com/frappe/erpnext/assets/170872428/9f88b91f-674f-4e79-b572-d6c837c9d854)


### Module

accounts, other

### Version

Version 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Hello , could anyone let me know if they are also facing the same issue.
I somehow guess is this a bug or there is something wrong I am doing

I am trying to match a sales invoice booked from the ‘Bank reconciliation Tool”
However, when I am trying to do so the sales invoices booked are not reflecting.
What is the way to match these transactions ??

Picture 1
```
",nitesh-nsuregrowth,2024-07-06 10:37:55+00:00,[],2024-09-03 00:09:28+00:00,2024-08-19 14:06:15+00:00,https://github.com/frappe/erpnext/issues/42203,"[('bug', None)]","[{'comment_id': 2267223561, 'issue_id': 2393512103, 'author': 'git529', 'body': '> ### Information about bug\r\n> \r\n> Hello , could anyone let me know if they are also facing the same issue. I somehow guess is this a bug or there is something wrong I am doing\r\n> \r\n> I am trying to match a sales invoice booked from the ‘Bank reconciliation Tool” However, when I am trying to do so the sales invoices booked are not reflecting. What is the way to match these transactions ??\r\n> \r\n> Picture 1![image](https://private-user-images.githubusercontent.com/170872428/346267939-9f88b91f-674f-4e79-b572-d6c837c9d854.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjI3MzMxNTIsIm5iZiI6MTcyMjczMjg1MiwicGF0aCI6Ii8xNzA4NzI0MjgvMzQ2MjY3OTM5LTlmODhiOTFmLTY3NGYtNGU3OS1iNTcyLWQ2YzgzN2M5ZDg1NC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwODA0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDgwNFQwMDU0MTJaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0zOTZlNzg2MDkwZDNkZmRlMzYxYTE2ODNhNDMxMDUxMzBiZGQ3YTIxZmI3YjYxNTJjMzlhY2Q2ZmJmZWQ2ZWQ0JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.F7gctePyULVIFADUe86MusMmQPJkA5PZ3DKAVpTMRUc)\r\n> ### Module\r\n> \r\n> accounts, other\r\n> ### Version\r\n> \r\n> Version 15\r\n> ### Installation method\r\n> \r\n> FrappeCloud\r\n> ### Relevant log output / Stack trace / Full Error Message.\r\n> \r\n> ```shell\r\n> Hello , could anyone let me know if they are also facing the same issue.\r\n> I somehow guess is this a bug or there is something wrong I am doing\r\n> \r\n> I am trying to match a sales invoice booked from the ‘Bank reconciliation Tool”\r\n> However, when I am trying to do so the sales invoices booked are not reflecting.\r\n> What is the way to match these transactions ??\r\n> \r\n> Picture 1\r\n> ```\r\n\r\nGenerally, you generate a payment entry against the sales invoice, and then reconcile the bank transaction against the payment entry.', 'created_at': datetime.datetime(2024, 8, 4, 0, 57, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296667762, 'issue_id': 2393512103, 'author': 'barredterra', 'body': ""Matching unpaid Sales Invoices is not supported in ERPNext. If that's what you're looking for, check out the Bank Reconciliation Tool in https://github.com/alyf-de/banking .\r\n\r\n (The checkbox is meant for Sales Invoices that at the same time constitute a payment.)"", 'created_at': datetime.datetime(2024, 8, 19, 14, 6, 15, tzinfo=datetime.timezone.utc)}]","git529 on (2024-08-04 00:57:31 UTC): Generally, you generate a payment entry against the sales invoice, and then reconcile the bank transaction against the payment entry.

barredterra on (2024-08-19 14:06:15 UTC): Matching unpaid Sales Invoices is not supported in ERPNext. If that's what you're looking for, check out the Bank Reconciliation Tool in https://github.com/alyf-de/banking .

 (The checkbox is meant for Sales Invoices that at the same time constitute a payment.)

"
2393478109,issue,open,,Error on Payment Reconciliation Tool -- TypeError: unsupported operand type(s) for +: 'NoneType' and 'list',"### Information about bug

When we use Payment Reconciliation Tool with Party Type = Supplier, and any party that does not have either an outstanding invoice or unreconciled payment, the following error is thrown on clicking ""Get Unreconciled Entries"": 
TypeError: unsupported operand type(s) for +: 'NoneType' and 'list'

### Module

accounts

### Version

""erpnext"": ""14.70.8"",
	""frappe"": ""14.77.5"",
	""hrms"": ""14.28.8"",
	""india_compliance"": ""14.28.1"",
	""payments"": ""0.0.1""

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""14.70.8"",
	""frappe"": ""14.77.5"",
	""hrms"": ""14.28.8"",
	""india_compliance"": ""14.28.1"",
	""payments"": ""0.0.1""
}
```
### Route
```
Form/Payment Reconciliation/Payment Reconciliation
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 97, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 48, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1619, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/handler.py"", line 312, in run_doc_method
    response = doc.run_method(method)
  File ""apps/frappe/frappe/model/document.py"", line 931, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1283, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1265, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 928, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py"", line 88, in get_unreconciled_entries
    self.get_nonreconciled_payment_entries()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py"", line 102, in get_nonreconciled_payment_entries
    non_reconciled_payments = payment_entries + journal_entries + dr_or_cr_notes
TypeError: unsupported operand type(s) for +: 'NoneType' and 'list'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""docs"": ""{\""name\"":\""Payment Reconciliation\"",\""minimum_invoice_amount\"":0,\""minimum_payment_amount\"":0,\""maximum_invoice_amount\"":0,\""maximum_payment_amount\"":0,\""invoice_limit\"":50,\""payment_limit\"":50,\""doctype\"":\""Payment Reconciliation\"",\""payments\"":[],\""allocation\"":[],\""invoices\"":[],\""company\"":\""Innomalous Technologies Private Limited\"",\""party_type\"":\""Supplier\"",\""party\"":\""Anil Mandi\"",\""receivable_payable_account\"":\""Creditors/Payables - ITPL\"",\""__unsaved\"":1,\""docstatus\"":0,\""idx\"":0}"",
		""method"": ""get_unreconciled_entries""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/run_doc_method""
}
```
### Response Data
```
{
	""exception"": ""TypeError: unsupported operand type(s) for +: 'NoneType' and 'list'""
}
```
```
",innomalous,2024-07-06 08:48:57+00:00,[],2024-07-06 08:48:57+00:00,,https://github.com/frappe/erpnext/issues/42202,"[('bug', None)]",[],
2393445914,issue,open,," Error- India compliance app- Not reflecting CGST, IGST, SGST","### Information about bug

Hi, team, india compliance app is not working property..
Not reflecting CGST, SGST, IGST etc
![mgXGg5R](https://github.com/frappe/erpnext/assets/119104949/73d517ef-d681-4d4d-b2ca-efd4b4bb0c52)

![nKq4Yj3](https://github.com/frappe/erpnext/assets/119104949/3becca14-6d76-4841-b0b6-43cdc9656921)


### Module

accounts

### Version

ERPNext: v15.28.2 (HEAD)
Frappe Framework: v15.32.0 (HEAD)
Frappe HR: v15.23.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",KBP-Civil,2024-07-06 07:03:17+00:00,[],2024-07-08 08:58:50+00:00,,https://github.com/frappe/erpnext/issues/42201,"[('bug', None)]","[{'comment_id': 2213031323, 'issue_id': 2393445914, 'author': 'Nihantra-Patel', 'body': 'CC: @vorasmit', 'created_at': datetime.datetime(2024, 7, 8, 5, 2, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2213436427, 'issue_id': 2393445914, 'author': 'vorasmit', 'body': '@KBP-Civil,\r\n\r\n- Have you set up GST Accounts correctly in GST Settings? \r\n- Are you using the same accounts in transaction? \r\n- Was the transaction created after having correct GST Settings in place?', 'created_at': datetime.datetime(2024, 7, 8, 8, 58, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 05:02:03 UTC): CC: @vorasmit

vorasmit on (2024-07-08 08:58:49 UTC): @KBP-Civil,

- Have you set up GST Accounts correctly in GST Settings? 
- Are you using the same accounts in transaction? 
- Was the transaction created after having correct GST Settings in place?

"
2394637716,issue,open,, stock module issue with the unit of measure in transactions,"HELLO,I hope you could devlope the uoms into more practical (professional)
The unit of measurement for the item for the activities that need to use the inventory unit does not meet the purpose to ensure the progress of the business activity without losses resulting from deficiencies in the units of measurement for the items, despite our choosing a default unit of measurement for the item and a default unit of measurement for buying and selling for the item itself and entering the sub-units of measurement for the item with their conversion factors. However, the program shows all the units listed in the table of units in the item unit field during sales and purchases operations. Rather, it allows choosing a unit that does not belong to the item, and if this is done after testing a sub-unit of measurement at a lower price, then the price of the sub-unit of the item is approved for the unit chosen after that, which does not belong to the item, and the invoice is accepted for posting. . To partially solve this, we created a script that prevents the appearance of units that do not belong to the item, but that is not enough because if the invoice posting is cancelled, the script will not work and the other units will reappear. Also, if the script is running before posting, a defect may occur in the sales operations of the smaller sub-units of the item because the system relies on measurement. Any quantity for the item in operations is against the main default unit of the item only, and the smaller sub-units are not also considered a storage unit for the item, which causes inventory quantities not to be updated accurately if most of the sales for the item are made in the smaller sub-units and in return, purchases for the item are made in the larger main unit. If the shortcomings of the inventory module are corrected in the upcoming releases, it will be an amazing qualitative addition to the program that will enable it to spread to commercial activities that were not able to implement the system in their own work environment.
thank ,
you ....",mohammederp,2024-07-06 03:05:08+00:00,[],2024-07-08 05:03:44+00:00,,https://github.com/frappe/erpnext/issues/42216,"[('feature-request', None)]",[],
2393350559,issue,closed,completed,"""Column 'owner' in where clause is ambiguous"" ","### Information about bug

# An error occurred when the employee used the saved filter criteria for filtering

## About the doctype: Lead   1...n   CRM Note

![01ccc197719e480b153a807253868ba1](https://github.com/frappe/erpnext/assets/86349730/22e06a15-c9ad-4a58-af1e-7d0fd9c5b1cb)

![image](https://github.com/frappe/erpnext/assets/86349730/aa01a3c3-ce30-45af-af3f-4afc874ad730)

![35612b6c974cec6dbde32437515cb83c](https://github.com/frappe/erpnext/assets/86349730/9dffc8c9-1867-4f7f-8430-b84818360892)






### Module

CRM

### Version

erpnext 15.27.7 version-15 (fa6a479)
frappe 15.31.0 version-15 (c68fbdd)


### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
127.0.0.1 - - [06/Jul/2024 09:32:42] ""POST /api/method/frappe.desk.reportview.get HTTP/1.1"" 500 -
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 921, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/reportview.py"", line 32, in get
    data = compress(execute(**args), args=args)
                    ^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/reportview.py"", line 78, in execute
    return DatabaseQuery(doctype).execute(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/db_query.py"", line 191, in execute
    result = self.build_and_run()
             ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/db_query.py"", line 232, in build_and_run
    return frappe.db.sql(
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 825, in _read_query_result
    result.read()
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 775, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.11/site-packages/pymysql/protocol.py"", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.11/site-packages/pymysql/err.py"", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1052, ""Column 'owner' in where clause is ambiguous"")
```
",ilqc,2024-07-06 02:39:25+00:00,[],2024-07-25 00:09:05+00:00,2024-07-08 05:14:17+00:00,https://github.com/frappe/erpnext/issues/42199,"[('bug', None)]","[{'comment_id': 2213045012, 'issue_id': 2393350559, 'author': 'Nihantra-Patel', 'body': ""If the Lead doctype has an owner field, you need to define it as follows:\r\n\r\n```sql\r\nAND (\r\n    `tabLead`.`owner` IN ('XYZ')\r\n)\r\n```\r\n\r\nWe tested it, and it works fine, also you have to set for the lead owner. However, if you do not include `tabLead`, it will not work."", 'created_at': datetime.datetime(2024, 7, 8, 5, 14, 17, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 05:14:17 UTC): If the Lead doctype has an owner field, you need to define it as follows:

```sql
AND (
    `tabLead`.`owner` IN ('XYZ')
)
```

We tested it, and it works fine, also you have to set for the lead owner. However, if you do not include `tabLead`, it will not work.

"
2394638868,issue,closed,completed,When I try to add new company it's show TypeError: rebuild_tree() takes 1 positional argument but 2 were given Possible source of error: erpnext (app),"### App Versions
```
{
	""erpnext"": ""14.0.0-dev"",
	""frappe"": ""16.0.0-dev"",
	""healthcare"": ""16.0.0-dev"",
	""hrms"": ""16.0.0-dev""
}
```
### Route
```
Form/Company/new-company-fwtidyjsax
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1803, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 338, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 360, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 316, in insert
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1132, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 966, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1330, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1308, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 963, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/setup/doctype/company/company.py"", line 139, in on_update
    self.create_default_accounts()
  File ""apps/erpnext/erpnext/setup/doctype/company/company.py"", line 205, in create_default_accounts
    create_charts(self.name, self.chart_of_accounts, self.existing_company)
  File ""apps/erpnext/erpnext/accounts/doctype/account/chart_of_accounts/chart_of_accounts.py"", line 77, in create_charts
    rebuild_tree(""Account"", ""parent_account"")
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
TypeError: rebuild_tree() takes 1 positional argument but 2 were given

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""docstatus\"":0,\""doctype\"":\""Company\"",\""name\"":\""new-company-xyxcugynnl\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""sm@gmail.com\"",\""country\"":\""India\"",\""is_group\"":0,\""create_chart_of_accounts_based_on\"":\""\"",\""allow_account_creation_against_child_company\"":0,\""enable_perpetual_inventory\"":1,\""enable_provisional_accounting_for_non_stock_items\"":0,\""idx\"":0,\""monthly_sales_target\"":0,\""total_monthly_sales\"":0,\""credit_limit\"":0,\""lft\"":0,\""rgt\"":0,\""company_name\"":\""sm\"",\""abbr\"":\""s\"",\""default_currency\"":\""INR\""}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery370091898096214027711"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 2733,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""TypeError: rebuild_tree() takes 1 positional argument but 2 were given"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```",rohit200207,2024-07-05 17:13:00+00:00,[],2024-07-25 00:09:06+00:00,2024-07-08 05:17:49+00:00,https://github.com/frappe/erpnext/issues/42217,"[('bug', None)]","[{'comment_id': 2213048337, 'issue_id': 2394638868, 'author': 'Nihantra-Patel', 'body': 'Hi @rohit200207,\r\n\r\nEverything is working fine. No problems were encountered in the latest version 15 and dev.\r\n\r\nFirst, Rebuild the Company Tree, Then reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and create a new company. \r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/0e669305-4431-4261-aea6-8a8c28f913ac)', 'created_at': datetime.datetime(2024, 7, 8, 5, 17, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-08 05:17:49 UTC): Hi @rohit200207,

Everything is working fine. No problems were encountered in the latest version 15 and dev.

First, Rebuild the Company Tree, Then reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and create a new company. 

![image](https://github.com/frappe/erpnext/assets/141945075/0e669305-4431-4261-aea6-8a8c28f913ac)

"
2392289811,issue,closed,completed,[Bug] Could not find DocType: Sales Order - Domestic,"### Information about bug

Hello,
I am trying to duplicate Sales Order Doctype and given name as Sales Order - Domestic, but when I try to save it throws error as below

![image](https://github.com/frappe/erpnext/assets/12723595/8c04ef29-4edf-4d47-a63c-78d73a309a5c)


![image](https://github.com/frappe/erpnext/assets/12723595/84ca2e01-eae8-4357-bc41-2345b22081cf)


### Module

selling

### Version

Frappe Version - 15
ERPNext Version - 15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.
![image](https://github.com/frappe/erpnext/assets/12723595/4dc67062-4522-4324-9160-8308e3198c75)


_No response_",JEEVAN28,2024-07-05 10:05:58+00:00,[],2024-07-20 00:08:45+00:00,2024-07-05 10:15:49+00:00,https://github.com/frappe/erpnext/issues/42196,"[('bug', None)]","[{'comment_id': 2210608358, 'issue_id': 2392289811, 'author': 'Nihantra-Patel', 'body': ""Already, the issue has been raised in the frappe. if you have to make a new doctype and manually add the field. As per now, you can't duplicate the doctype."", 'created_at': datetime.datetime(2024, 7, 5, 10, 15, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-05 10:15:49 UTC): Already, the issue has been raised in the frappe. if you have to make a new doctype and manually add the field. As per now, you can't duplicate the doctype.

"
2392091916,issue,open,,Design Issues on Pricing Rule,"Pricing Rules where the discount / margin is applied on other `item code / item group / brand` is broken.

## Broken Scenarios:

|-|Apply On|Value|Apply Rule on Other | Value|
|-|-|-|-|-|
|1| Item Code| _Item 1_ | Item Code| _Item 2_|
|2| Item Group| All Item Group | Item Group| All Item Group|
|3 | Item Code/Group| _any_value_ |Brand | _any_value_|

On above cases, the discount is applied on the trigger item itself, either on item addition or upon save.

## UOM Conversion on mixed condition
https://support.frappe.io/helpdesk/tickets/21803

https://github.com/frappe/erpnext/issues/43166

### Version
v14 and v15


References:
https://support.frappe.io/helpdesk/tickets/16804
https://support.frappe.io/helpdesk/tickets/17723
https://support.frappe.io/helpdesk/tickets/15810",ruthra-kumar,2024-07-05 08:10:49+00:00,['ruthra-kumar'],2025-01-27 06:26:43+00:00,,https://github.com/frappe/erpnext/issues/42195,"[('bug', None)]","[{'comment_id': 2210454784, 'issue_id': 2392091916, 'author': 'ruthra-kumar', 'body': '[1] Replication\r\n\r\nRules:\r\n![Screenshot from 2024-07-05 13-53-55](https://github.com/frappe/erpnext/assets/3272205/1a38dda9-fe4e-4e1a-aded-5b31aee2491e)\r\n![Screenshot from 2024-07-05 13-54-11](https://github.com/frappe/erpnext/assets/3272205/55962ac8-4046-4644-9752-8ed2d8b137f0)\r\n\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/3272205/15072293-d80e-4a40-8909-d2b12b44fd9e', 'created_at': datetime.datetime(2024, 7, 5, 8, 41, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2340397146, 'issue_id': 2392091916, 'author': 'ruthra-kumar', 'body': 'Handle uom conversion on mixed condition\r\nhttps://support.frappe.io/helpdesk/tickets/21803\r\n\r\nhttps://github.com/frappe/erpnext/issues/43166', 'created_at': datetime.datetime(2024, 9, 10, 11, 25, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2456581003, 'issue_id': 2392091916, 'author': 'ruthra-kumar', 'body': '## `Apply Discount on Other item` lives only on Client-side\r\n\r\n1. `get_item_details()` fetches and applies discount for the trigger item https://github.com/frappe/erpnext/blob/29a1fe8040c0333506532e9dd16243d82394395e/erpnext/accounts/doctype/pricing_rule/pricing_rule.py#L547\r\n2. This is received on Client-side\r\n3. Client-side removes discount of trigger item and applies it on [target item](https://github.com/frappe/erpnext/blob/29a1fe8040c0333506532e9dd16243d82394395e/erpnext/public/js/controllers/transaction.js#L1821)', 'created_at': datetime.datetime(2024, 11, 5, 8, 52, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614937532, 'issue_id': 2392091916, 'author': 'Vigneshsekar', 'body': '- The pricing rule is not modified when the posting date is changed in the draft invoices. Calling the `apply_pricing_rule` function on the change causes further regression with discounts. \n- Disabling the pricing rule after the invoice is drafted, has no validations.\n\nOlder Fix: https://github.com/frappe/erpnext/pull/44989\nRegression: https://github.com/frappe/erpnext/issues/45046', 'created_at': datetime.datetime(2025, 1, 27, 6, 26, 42, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Issue Creator) on (2024-07-05 08:41:16 UTC): [1] Replication

Rules:
![Screenshot from 2024-07-05 13-53-55](https://github.com/frappe/erpnext/assets/3272205/1a38dda9-fe4e-4e1a-aded-5b31aee2491e)
![Screenshot from 2024-07-05 13-54-11](https://github.com/frappe/erpnext/assets/3272205/55962ac8-4046-4644-9752-8ed2d8b137f0)



https://github.com/frappe/erpnext/assets/3272205/15072293-d80e-4a40-8909-d2b12b44fd9e

ruthra-kumar (Issue Creator) on (2024-09-10 11:25:22 UTC): Handle uom conversion on mixed condition
https://support.frappe.io/helpdesk/tickets/21803

https://github.com/frappe/erpnext/issues/43166

ruthra-kumar (Issue Creator) on (2024-11-05 08:52:13 UTC): ## `Apply Discount on Other item` lives only on Client-side

1. `get_item_details()` fetches and applies discount for the trigger item https://github.com/frappe/erpnext/blob/29a1fe8040c0333506532e9dd16243d82394395e/erpnext/accounts/doctype/pricing_rule/pricing_rule.py#L547
2. This is received on Client-side
3. Client-side removes discount of trigger item and applies it on [target item](https://github.com/frappe/erpnext/blob/29a1fe8040c0333506532e9dd16243d82394395e/erpnext/public/js/controllers/transaction.js#L1821)

Vigneshsekar on (2025-01-27 06:26:42 UTC): - The pricing rule is not modified when the posting date is changed in the draft invoices. Calling the `apply_pricing_rule` function on the change causes further regression with discounts. 
- Disabling the pricing rule after the invoice is drafted, has no validations.

Older Fix: https://github.com/frappe/erpnext/pull/44989
Regression: https://github.com/frappe/erpnext/issues/45046

"
2390759623,issue,closed,completed,Purchase invoice page not loading.,"### Information about bug

Hello, Today i tried to open a purchase invoice however the purchase invoice list is showing but when i try to open an invoice it's only showing the search bar/ rest everything is white blank.
The server is hosted on Frappe Cloud and i dont have the code access.
Also if i try to open the same with an account which have admin access everything is showing.

Note:- The other roles also have access of Purchase invoice, it's just this issue came suddenly, i haven't made any changes in the system too.

![asddas](https://github.com/frappe/erpnext/assets/132902023/70abc369-ec17-4e03-aa3e-fb52bfac197c)

Thank You 

### Module

accounts

### Version

Frappe Framework: v14.77.2 (HEAD)

ERPNext: v14.70.8 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",rs115199789,2024-07-04 12:30:03+00:00,[],2024-07-20 00:08:46+00:00,2024-07-05 06:45:18+00:00,https://github.com/frappe/erpnext/issues/42187,"[('bug', None)]","[{'comment_id': 2210284951, 'issue_id': 2390759623, 'author': 'Nihantra-Patel', 'body': 'Solved: https://discuss.frappe.io/t/purchase-invoice-page-not-loading/128114/9?u=ncp', 'created_at': datetime.datetime(2024, 7, 5, 6, 45, 18, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-05 06:45:18 UTC): Solved: https://discuss.frappe.io/t/purchase-invoice-page-not-loading/128114/9?u=ncp

"
2388292301,issue,closed,completed,Item Code: V025 is not available under warehouse . #36398,"### Information about bug

![d2557531-30db-474b-97af-2042ef287ea7](https://github.com/frappe/erpnext/assets/29087757/960112d0-fc8b-43bd-a691-17fe1205c98a)


### Module

stock

### Version

Erpnext V.15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Alaajamal,2024-07-03 10:40:44+00:00,[],2024-07-19 00:08:51+00:00,2024-07-03 12:16:19+00:00,https://github.com/frappe/erpnext/issues/42167,"[('bug', None)]","[{'comment_id': 2205939318, 'issue_id': 2388292301, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nPlease check the warehouse in the POS profile. If the item is out of stock in the warehouse set in the POS profile, you will encounter this issue.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/8abbac18-167d-49f3-b8b5-7ab72a13cc4f)', 'created_at': datetime.datetime(2024, 7, 3, 12, 16, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-03 12:16:19 UTC): Everything is working fine. No problems were encountered in the latest version 15.


Please check the warehouse in the POS profile. If the item is out of stock in the warehouse set in the POS profile, you will encounter this issue.

![image](https://github.com/frappe/erpnext/assets/141945075/8abbac18-167d-49f3-b8b5-7ab72a13cc4f)

"
2388291244,issue,closed,completed,Item Code: V025 is not available under warehouse . #36398,"### Information about bug

![d2557531-30db-474b-97af-2042ef287ea7](https://github.com/frappe/erpnext/assets/29087757/960112d0-fc8b-43bd-a691-17fe1205c98a)


### Module

stock

### Version

Erpnext V.15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Alaajamal,2024-07-03 10:40:16+00:00,[],2024-07-19 00:08:50+00:00,2024-07-03 12:16:35+00:00,https://github.com/frappe/erpnext/issues/42166,"[('bug', None)]","[{'comment_id': 2205939835, 'issue_id': 2388291244, 'author': 'Nihantra-Patel', 'body': 'same issue: https://github.com/frappe/erpnext/issues/42167', 'created_at': datetime.datetime(2024, 7, 3, 12, 16, 35, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-07-03 12:16:35 UTC): same issue: https://github.com/frappe/erpnext/issues/42167

"
2387884253,issue,closed,completed,No module named 'erpnext.assets.doctype.asset.asset_maintenance_log' message on migration of sites during bench update,"### Information about bug

Hello,

After run _bench update --reset_ command on my local machine (Ubuntu Desktop 22.04.3), during migration of every sites installed ERPNext on version 15 bench, produced the message like screenshot below.

![The Issue](https://github.com/frappe/erpnext/assets/34362222/3de863c3-bd6f-4f65-a762-b337b4bd4007)

And i found out that above method at **hooks.py**, line **445** , _daily_ of _scheduler_events_, with value _erpnext.assets.doctype.asset.asset_maintenance_log.update_asset_maintenance_log_status_.

![The code that cause this issue](https://github.com/frappe/erpnext/assets/34362222/2ef29831-0a8a-4318-931f-4e3902fd3647)

The method name should begin with _erpnext.assets.doctype.asset_maintenance_log._ Instead of _erpnext.assets.doctype.asset._, as there is no module with name _asset_maintenance_log_  under _erpnext.assets.doctype.asset_ package.

Thank you.

### Module

assets

### Version

Frappe version - 15.33.0
ERPNext version - 15.29.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",waiminn,2024-07-03 07:25:31+00:00,[],2024-07-25 00:08:56+00:00,2024-07-03 10:54:49+00:00,https://github.com/frappe/erpnext/issues/42156,"[('bug', None), ('released', None)]","[{'comment_id': 2205921231, 'issue_id': 2387884253, 'author': 'waiminn', 'body': 'Thanks', 'created_at': datetime.datetime(2024, 7, 3, 12, 6, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2206417764, 'issue_id': 2387884253, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.1 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.1)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 14, 56, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2220175751, 'issue_id': 2387884253, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 10, 10, 46, tzinfo=datetime.timezone.utc)}]","waiminn (Issue Creator) on (2024-07-03 12:06:11 UTC): Thanks

frappe-pr-bot on (2024-07-03 14:56:13 UTC): :tada: This issue has been resolved in version 15.29.1 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.1)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

frappe-pr-bot on (2024-07-10 10:46:00 UTC): :tada: This issue has been resolved in version 15.29.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2387800204,issue,closed,not_planned,has_permission() got an unexpected keyword argument 'print_logs',"### Information about bug

I get this error when creating a new employee.

![Screenshot 03 07 2024 um 08 29 19 AM](https://github.com/frappe/erpnext/assets/42201209/4cdf8436-0fd8-4bd8-b833-4a19c4caba32)

Fix: https://github.com/frappe/erpnext/pull/41885


### Module

HR

### Version

Frappe version: v15.32.0
ERPNext version: v15.28.2
Frappe HR version: v15.23.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""15.28.2"",
	""frappe"": ""15.32.0"",
	""gameplan"": ""0.0.1"",
	""helpdesk"": ""0.10.0"",
	""hrms"": ""15.23.0"",
	""payments"": ""0.0.1"",
	""print_designer"": ""1.3.3"",
	""wiki"": ""2.0.0""
}
```
### Route
```
Form/Employee/HR-EMP-00001
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 83, in on_update
    self.update_user()
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 144, in update_user
    user.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1306, in runner
    add_to_return_value(self, f(self, method, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/setup/doctype/employee/employee.py"", line 257, in update_user_permissions
    if not has_permission(""User Permission"", ptype=""write"", print_logs=False):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/permissions.py"", line 49, in inner
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
TypeError: has_permission() got an unexpected keyword argument 'print_logs'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""HR-EMP-00001\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-07-03 08:21:44.194611\"",\""modified\"":\""2024-07-03 08:22:05.903191\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":0,\""employee\"":\""HR-EMP-00001\"",\""naming_series\"":\""HR-EMP-\"",\""first_name\"":\""first\"",\""last_name\"":\""last\"",\""employee_name\"":\""first last\"",\""gender\"":\""Male\"",\""date_of_birth\"":\""1994-12-03\"",\""salutation\"":\""Mr\"",\""date_of_joining\"":\""2023-04-01\"",\""status\"":\""Active\"",\""create_user_permission\"":1,\""company\"":\""myCompany\"",\""designation\"":\""Chief Executive Officer\"",\""notice_number_of_days\"":0,\""date_of_retirement\"":\""2054-12-03\"",\""cell_number\"":\""+41 79 864 03 42\"",\""personal_email\"":\""first.last@mail.com\"",\""company_email\"":\""first.last@mycompany.com\"",\""prefered_contact_email\"":\""Company Email\"",\""prefered_email\"":\""first.last@mycompany.com\"",\""unsubscribed\"":0,\""current_address\"":\""my Address"",\""current_accommodation_type\"":\""Rented\"",\""permanent_accommodation_type\"":\""\"",\""ctc\"":0,\""salary_currency\"":\""CHF\"",\""salary_mode\"":\""\"",\""marital_status\"":\""Single\"",\""blood_group\"":\""\"",\""leave_encashed\"":\""\"",\""lft\"":1,\""rgt\"":2,\""old_parent\"":\""\"",\""doctype\"":\""Employee\"",\""education\"":[],\""internal_work_history\"":[],\""employment_degrees\"":[],\""external_work_history\"":[],\""carryover_and_payouts\"":[],\""image\"":null,\""__unsaved\"":1,\""user_id\"":\""first.last@mycompany.com\""}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery370050763034872889991"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 3370,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""TypeError: has_permission() got an unexpected keyword argument 'print_logs'"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",SamuelHelbling,2024-07-03 06:38:47+00:00,[],2024-07-19 00:08:52+00:00,2024-07-03 09:07:03+00:00,https://github.com/frappe/erpnext/issues/42154,"[('bug', None)]","[{'comment_id': 2205408686, 'issue_id': 2387800204, 'author': 'ljain112', 'body': 'It looks like there might be a branch conflict between ERPNext and Frappe. Your ERPNext is on the develop branch, while Frappe is on the version-15 branch. This change has not been backported yet.\r\n\r\nYou can check the branch versions and if the issue is resolved, you can close this issue.\r\n\r\nPR: https://github.com/frappe/erpnext/pull/39309.', 'created_at': datetime.datetime(2024, 7, 3, 8, 28, 56, tzinfo=datetime.timezone.utc)}]","ljain112 on (2024-07-03 08:28:56 UTC): It looks like there might be a branch conflict between ERPNext and Frappe. Your ERPNext is on the develop branch, while Frappe is on the version-15 branch. This change has not been backported yet.

You can check the branch versions and if the issue is resolved, you can close this issue.

PR: https://github.com/frappe/erpnext/pull/39309.

"
2387735417,issue,closed,completed,Payment Reconciliation Error,"### Information about bug

### App Versions
```
{
""erpnext"": ""15.29.0"",
""frappe"": ""15.33.0"",
""frappeauth_app"": ""0.0.1"",
""goyalapp"": ""0.0.1"",
""hrms"": ""15.23.0"",
""india_compliance"": ""15.9.1"",
""payments"": ""0.0.1""
}
```
### Route
```
Form/Payment Reconciliation/Payment Reconciliation
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/handler.py"", line 330, in run_doc_method
    response = doc.run_method(method)
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py"", line 130, in get_unreconciled_entries
    self.get_nonreconciled_payment_entries()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py"", line 144, in get_nonreconciled_payment_entries
    non_reconciled_payments = payment_entries + journal_entries + dr_or_cr_notes
TypeError: unsupported operand type(s) for +: 'NoneType' and 'list'

```
### Request Data
```
{
""type"": ""POST"",
""args"": {
""docs"": ""{\""name\"":\""Payment Reconciliation\"",\""minimum_invoice_amount\"":0,\""minimum_payment_amount\"":0,\""maximum_invoice_amount\"":0,\""maximum_payment_amount\"":0,\""invoice_limit\"":50,\""payment_limit\"":50,\""doctype\"":\""Payment Reconciliation\"",\""payments\"":[],\""allocation\"":[],\""invoices\"":[],\""company\"":\""GOYAL IRON & STEEL (NAGPUR) PVT LTD\"",\""party_type\"":\""Supplier\"",\""party\"":\""1700111\"",\""receivable_payable_account\"":\""Creditors - GIPL\"",\""__unsaved\"":1,\""docstatus\"":0,\""idx\"":0}"",
""method"": ""get_unreconciled_entries""
},
""headers"": {},
""error_handlers"": {},
""url"": ""/api/method/run_doc_method"",
""request_id"": null
}
```
### Response Data
```
{
""exception"": ""TypeError: unsupported operand type(s) for +: 'NoneType' and 'list'"",
""exc_type"": ""TypeError"",
""_exc_source"": ""erpnext (app)""
}
```

### Module

accounts

### Version

""erpnext"": ""15.29.0"",
""frappe"": ""15.33.0"",
""frappeauth_app"": ""0.0.1"",
""goyalapp"": ""0.0.1"",
""hrms"": ""15.23.0"",
""india_compliance"": ""15.9.1"",
""payments"": ""0.0.1""

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",sumeetagra,2024-07-03 05:54:51+00:00,[],2024-07-20 00:08:47+00:00,2024-07-05 04:13:55+00:00,https://github.com/frappe/erpnext/issues/42153,"[('bug', None)]",[],
2386802443,issue,open,,The invoice does not get the correct price in the company's currency from a subscription with a price list in a foreign currency,"### Information about bug

When you set up the subscription plan with company currency and choose a price list in another currency, for example, USD, the invoice doesn't convert the amount. It takes the price in USD as it was in the company currency. Let me show you an example on V13:

I created this subscription plan by setting up ARS currency for the plan and choosing a Price List in USD.

![image](https://github.com/frappe/erpnext/assets/109669237/0edfe096-0435-4647-8cf9-4052f07c0557)


The price for this product is 300 USD for the list price selected on the plan.

When issuing the invoice, takes the price as 300 ARS, which is wrong, it should be converted at the exchange rate of 1175 ARS.

![image](https://github.com/frappe/erpnext/assets/109669237/85eda2a3-9b1a-49f1-b840-3dc487164507)


The correct amount should be 300 x 1175 = 352.500 ARS

I also tried this in V15 and there is another problem besides the amount not converting on the invoice. In this case, the invoice takes a price from a list that is not the price list I set up in the subscription plan.

Subscription plan:

![image](https://github.com/frappe/erpnext/assets/109669237/d144bcaa-d272-4d0d-ba76-0e4fc83f4e00)

Invoice issued

![image](https://github.com/frappe/erpnext/assets/109669237/889caa4e-8ad0-45f3-9ca4-6b6491ba564a)
Subscription

### Module

accounts

### Version

V13 y V15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",vanesaotaduy,2024-07-02 17:36:26+00:00,[],2024-07-02 18:21:55+00:00,,https://github.com/frappe/erpnext/issues/42149,"[('bug', None)]",[],
2388076840,issue,open,,Scheme items are not being fetched in pick list if the sale order qty is equal to the total available inventory qty,"Hi Team,
I am facing an issue when my Sale order qty is equal to the inventory qty, At that time the system does not adds free items qty in the picklist doctype.  

Here is a case if,
**Sale order qty** = 100
**Total Available Stock/Inventory** = 100
**Promotional Scheme** = 20:1 (on every 20 qty, the system will add 1 free qty)
Then, According to inventory available & promotional scheme calculation, 4 qty is free qty.

So, currently, when we create a picklist from the sale order, the system does not add free item qty and adds only 100 qty for the main item if the inventory qty is equal to the sale order qty. 

**Expectation -**  
The system has to add the main item & free item parallelly, For Example -
**If 100 is the sale order qty, then the system has to add, 96 qty for the main item, and 4 qty for the free item in the picklist doctype.** 

Ref. ticket -  https://support.frappe.io/helpdesk/my-tickets/17385


Kindly do the needful solution to get the expected result. 


Thanks & Regards,
Anoop Verma ",Anoop2312,2024-07-02 06:12:05+00:00,[],2024-07-03 08:58:46+00:00,,https://github.com/frappe/erpnext/issues/42161,"[('feature-request', None)]",[],
