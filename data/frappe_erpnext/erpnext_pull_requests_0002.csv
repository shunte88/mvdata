id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2826674945,pull_request,closed,,fix: renamed Comments Tab to Notes tab in Lead doctype (backport #45637),"Before:
<img width=""1390"" alt=""image"" src=""https://github.com/user-attachments/assets/aed8747f-c9ef-48d7-bb8e-a2423ca7bdd6"" />
After:
<img width=""1392"" alt=""image"" src=""https://github.com/user-attachments/assets/5852ae4e-5fba-4676-846d-29efe9c73900"" />
<hr>This is an automatic backport of pull request #45637 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 07:53:34+00:00,['shariquerik'],2025-02-03 07:57:28+00:00,2025-02-03 07:57:26+00:00,https://github.com/frappe/erpnext/pull/45673,"[('conflicts', None)]","[{'comment_id': 2630206597, 'issue_id': 2826674945, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 018df3135a89b413101aad084413349eeeb735ee has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-45637\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 018df3135a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/crm/doctype/lead/lead.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 3, 7, 53, 36, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-03 07:53:36 UTC): Cherry-pick of 018df3135a89b413101aad084413349eeeb735ee has failed:
```
On branch mergify/bp/version-15-hotfix/pr-45637
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 018df3135a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/crm/doctype/lead/lead.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2826674761,pull_request,closed,,fix: renamed Comments Tab to Notes tab in Lead doctype (backport #45637),"Before:
<img width=""1390"" alt=""image"" src=""https://github.com/user-attachments/assets/aed8747f-c9ef-48d7-bb8e-a2423ca7bdd6"" />
After:
<img width=""1392"" alt=""image"" src=""https://github.com/user-attachments/assets/5852ae4e-5fba-4676-846d-29efe9c73900"" />
<hr>This is an automatic backport of pull request #45637 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 07:53:27+00:00,['shariquerik'],2025-02-05 11:46:08+00:00,2025-02-03 07:57:22+00:00,https://github.com/frappe/erpnext/pull/45672,"[('released', None)]","[{'comment_id': 2630206438, 'issue_id': 2826674761, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 018df3135a89b413101aad084413349eeeb735ee has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45637\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 018df3135a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/crm/doctype/lead/lead.json\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 3, 7, 53, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505425, 'issue_id': 2826674761, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 7, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-03 07:53:29 UTC): Cherry-pick of 018df3135a89b413101aad084413349eeeb735ee has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45637
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 018df3135a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/crm/doctype/lead/lead.json

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:07 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2826660257,pull_request,open,,fix: improve pos return,"* Added validation during return in POS Invoice.
   Before (the item ""Apple"" has been returned):

https://github.com/user-attachments/assets/8150f696-e22c-43ee-8257-ebcca88f4275

   After:


https://github.com/user-attachments/assets/f0f21288-a25f-44ec-ab19-25b208369f47


* Fixed UI in POS Item Cart, while loading Return Invoice / Draft Invoice.
   Before:

https://github.com/user-attachments/assets/0404e087-9c1b-4c3d-aaef-857f8a18a645

  After:

https://github.com/user-attachments/assets/7f8aef36-b94c-405e-b289-6122f3d7ed94

* Added returned quantity for the items returned in the Paid Invoice Item list (need feedback)

![image](https://github.com/user-attachments/assets/ddc7b0ef-291d-4ed4-9f51-740d897aee87)

* Disable loading return invoices on POS for the invoices where all the items have already been returned.

https://github.com/user-attachments/assets/8623433e-6246-4cde-a6dd-d9a12f2314af

",diptanilsaha,2025-02-03 07:45:08+00:00,[],2025-02-04 07:23:27+00:00,,https://github.com/frappe/erpnext/pull/45671,"[('accounts', ''), ('POS', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2826633343,pull_request,closed,,refactor: configurable posting date for Exc Gain / Loss journal (backport #44790),"# Issue
Consider a situation were the payment and invoice are both in locked period. If it is a forex transaction and if they incur any exchange gain / loss, system tries to create a Journal in the payment date to capture that gain / loss. This will fail due to the period being locked.
```
| Oct (Locked) | Nov (Locked) | Dec            |
|--------------+--------------+----------------|
| Payment      | Invoice      | Reconciliation |
```

# Configurable Exchange Gain / Loss posting date (Only applies for Normal Payments)
![Screenshot from 2025-01-23 16-23-00](https://github.com/user-attachments/assets/71da8266-8215-4d5e-90a0-5fd0a56f8782)

todo:
- [x] patch to set default config value
- [x] Test cases
- [x] Support Gain / Loss JE posting date configuration in Semi-Auto Reconciliation tool


ref: https://support.frappe.io/helpdesk/tickets/28039<hr>This is an automatic backport of pull request #44790 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 07:29:26+00:00,['ruthra-kumar'],2025-02-05 11:46:06+00:00,2025-02-03 08:34:57+00:00,https://github.com/frappe/erpnext/pull/45670,"[('accounts', ''), ('released', None)]","[{'comment_id': 2630168105, 'issue_id': 2826633343, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 3fbd2ca0d9d9cef759669050964e2faa63af2429 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44790\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 3fbd2ca0d9.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json\n\tboth modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py\n\n```\n\n\nCherry-pick of 95af63e305c51a19bfea43c7f9580c68fb93433e has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44790\nYour branch is ahead of \'origin/version-14-hotfix\' by 2 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 95af63e305.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json\n\n```\n\n\nCherry-pick of b2c3da135ea85fe245ec9c6066a8e68b42b64f7f has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44790\nYour branch is ahead of \'origin/version-14-hotfix\' by 3 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit b2c3da135e.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/controllers/accounts_controller.py\n\tboth modified:   erpnext/patches.txt\n\n```\n\n\nCherry-pick of 2f3281579a5b4393ff336e7e2ff274d0b60c5d66 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44790\nYour branch is ahead of \'origin/version-14-hotfix\' by 4 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit 2f3281579a.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/controllers/tests/test_accounts_controller.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nCherry-pick of a71718883e933c7eadc15842cae2dd59c6b1d005 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44790\nYour branch is ahead of \'origin/version-14-hotfix\' by 5 commits.\n  (use ""git push"" to publish your local commits)\n\nYou are currently cherry-picking commit a71718883e.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/process_payment_reconciliation_log_allocations/process_payment_reconciliation_log_allocations.json\n\tboth modified:   erpnext/accounts/doctype/process_payment_reconciliation_log_allocations/process_payment_reconciliation_log_allocations.py\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 3, 7, 29, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505347, 'issue_id': 2826633343, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 4, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-03 07:29:29 UTC): Cherry-pick of 3fbd2ca0d9d9cef759669050964e2faa63af2429 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44790
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 3fbd2ca0d9.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json
	both modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py

```


Cherry-pick of 95af63e305c51a19bfea43c7f9580c68fb93433e has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44790
Your branch is ahead of 'origin/version-14-hotfix' by 2 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 95af63e305.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.py
	modified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/accounts_settings/accounts_settings.json

```


Cherry-pick of b2c3da135ea85fe245ec9c6066a8e68b42b64f7f has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44790
Your branch is ahead of 'origin/version-14-hotfix' by 3 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit b2c3da135e.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/controllers/accounts_controller.py
	both modified:   erpnext/patches.txt

```


Cherry-pick of 2f3281579a5b4393ff336e7e2ff274d0b60c5d66 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44790
Your branch is ahead of 'origin/version-14-hotfix' by 4 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit 2f3281579a.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/controllers/tests/test_accounts_controller.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


Cherry-pick of a71718883e933c7eadc15842cae2dd59c6b1d005 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44790
Your branch is ahead of 'origin/version-14-hotfix' by 5 commits.
  (use ""git push"" to publish your local commits)

You are currently cherry-picking commit a71718883e.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/process_payment_reconciliation_log_allocations/process_payment_reconciliation_log_allocations.json
	both modified:   erpnext/accounts/doctype/process_payment_reconciliation_log_allocations/process_payment_reconciliation_log_allocations.py

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:04 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2826538975,pull_request,closed,,feat: set bank account of company to default company bank account fro… (backport #45619),"Reference issue #45442 

The system will now fetch the default company bank account upon creation of Payment Entry

`no-docs`<hr>This is an automatic backport of pull request #45619 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 06:31:59+00:00,['mihir-kandoi'],2025-02-03 08:35:26+00:00,2025-02-03 08:35:23+00:00,https://github.com/frappe/erpnext/pull/45669,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2826538920,pull_request,closed,,feat: set bank account of company to default company bank account fro… (backport #45619),"Reference issue #45442 

The system will now fetch the default company bank account upon creation of Payment Entry

`no-docs`<hr>This is an automatic backport of pull request #45619 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 06:31:57+00:00,['mihir-kandoi'],2025-02-05 11:46:04+00:00,2025-02-03 08:35:39+00:00,https://github.com/frappe/erpnext/pull/45668,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2636505226, 'issue_id': 2826538920, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 1, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-02-05 11:46:01 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2826525938,pull_request,closed,,fix: delivered button of purchase order (backport #45621),"No reference issue

Set status to `Delivered` button of Purchase Order was not working due to reference to `this` was lost when function was called. Fixed by binding `this` to function call explicitly.

`no-docs`<hr>This is an automatic backport of pull request #45621 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 06:22:51+00:00,['mihir-kandoi'],2025-02-03 06:28:38+00:00,2025-02-03 06:28:36+00:00,https://github.com/frappe/erpnext/pull/45667,[],[],
2826525860,pull_request,closed,,fix: delivered button of purchase order (backport #45621),"No reference issue

Set status to `Delivered` button of Purchase Order was not working due to reference to `this` was lost when function was called. Fixed by binding `this` to function call explicitly.

`no-docs`<hr>This is an automatic backport of pull request #45621 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 06:22:48+00:00,['mihir-kandoi'],2025-02-05 11:46:12+00:00,2025-02-03 06:31:11+00:00,https://github.com/frappe/erpnext/pull/45666,"[('released', None)]","[{'comment_id': 2630073127, 'issue_id': 2826525860, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 41649cf52de0fb50b6370d915ea41b7ad8fc9971 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45621\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 41649cf52d.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/buying/doctype/purchase_order/purchase_order.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 3, 6, 22, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505521, 'issue_id': 2826525860, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 10, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-03 06:22:50 UTC): Cherry-pick of 41649cf52de0fb50b6370d915ea41b7ad8fc9971 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45621
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 41649cf52d.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/buying/doctype/purchase_order/purchase_order.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:10 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2826524254,pull_request,closed,,fix: consider process_loss_qty in work order (backport #45648),"Reference support ticket [30593](https://support.frappe.io/helpdesk/tickets/30593)

1. Job card now considers process loss qty when setting status to ""Completed""
2. Work Order now shows process loss qty in progress bar

`no-docs`<hr>This is an automatic backport of pull request #45648 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-03 06:21:42+00:00,['mihir-kandoi'],2025-02-03 15:27:03+00:00,2025-02-03 15:27:01+00:00,https://github.com/frappe/erpnext/pull/45665,[],[],
2826033528,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-02-02 21:47:40+00:00,['ruthra-kumar'],2025-02-03 08:36:23+00:00,2025-02-03 08:36:20+00:00,https://github.com/frappe/erpnext/pull/45661,"[('translation', None)]",[],
2825703723,pull_request,closed,,chore: update POT file,,frappe-pr-bot,2025-02-02 09:35:06+00:00,['ruthra-kumar'],2025-02-03 09:01:43+00:00,2025-02-03 09:01:41+00:00,https://github.com/frappe/erpnext/pull/45660,[],[],
2825669501,pull_request,closed,,fix: ignore expired batch for pick list (backport #45617),Internal Reference: https://support.frappe.io/helpdesk/my-tickets/30559<hr>This is an automatic backport of pull request #45617 done by [Mergify](https://mergify.com).,mergify[bot],2025-02-02 08:04:06+00:00,[],2025-02-03 08:37:48+00:00,2025-02-03 08:37:45+00:00,https://github.com/frappe/erpnext/pull/45659,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2825515503,pull_request,closed,,feat: Taxjar Integration update (backport #27143),"TaxJar is a platform that provides automated sales tax compliance, the api integration helps in auto-calculating sales tax in sales invoices. Primarily this integration is being developed to accommodate and ease taxation for the United States region.
ERPNext had the basic api integration setup, this update is to polish it further and make it fit for certification.
The tax rates are based on the states and products(product tax category).

**Updates:**
1. Tax calculation for line items(every row of the items table)
2. Address validation and retrieving state codes (api requires 2 letter state codes ex New York - NY)
3. **Product Tax Category Doctype** for different tax categories 
4. **Product tax category** field in Item master and Sales Item table, **Tax Collectable, Taxable Amount** fields in Sales Item Table that stores the said values from api response
5. Correct posting of Return invoices
6. API calls having the `x-api-version` and `plugin` parameters
7. Corrected shipping address assignment order

- TaxJar Settings page in ERPNext
  <img src='https://user-images.githubusercontent.com/36098155/130796726-60bacc7d-a4ca-47c1-9909-43662428f6d2.png' width='500'>

- Product Tax Category field in Item Master
  <img width=""500"" alt=""Screenshot 2021-08-25 at 6 35 23 PM"" src=""https://user-images.githubusercontent.com/36098155/130796942-812596f2-9ddf-4980-b36d-b3ade2a499b3.png"">

- Sales Taxes and charges table auto populating with the rates
   <img width=""500"" alt=""Screenshot 2021-08-25 at 6 36 13 PM"" src=""https://user-images.githubusercontent.com/36098155/130797314-2aa9bee8-cf23-4254-8ba2-c6699e54f604.png"">

- Taxable Amount and Tax Collectible retrieved form the response and stored 
   <img width='500' src='https://user-images.githubusercontent.com/36098155/130797508-0c154855-f758-460a-9295-bba38ac2602c.png'>

- Transactions and breakdown on the TaxJar account transactions dashboard
   <img width=""500"" alt=""Screenshot 2021-08-25 at 6 40 40 PM"" src=""https://user-images.githubusercontent.com/36098155/130798050-274f61cc-3c06-4cad-ab3e-eb629fecfee3.png"">


docs: https://docs.erpnext.com/docs/v13/user/manual/en/erpnext_integration/new?wiki_page_patch=4eb79f3bef



<hr>This is an automatic backport of pull request #27143 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-02 00:12:51+00:00,[],2025-02-03 08:38:17+00:00,2025-02-03 08:38:17+00:00,https://github.com/frappe/erpnext/pull/45657,"[('conflicts', None)]","[{'comment_id': 2629172267, 'issue_id': 2825515503, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 7004944cc05b1dc0e1203a8459ffa9161030849b has failed:\n```\nOn branch mergify/bp/version-13-hotfix/pr-27143\nYour branch is up to date with \'origin/version-13-hotfix\'.\n\nYou are currently cherry-picking commit 7004944cc0.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tnew file:   erpnext/regional/united_states/product_tax_category_data.json\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/erpnext_integrations/taxjar_integration.py\n\tboth modified:   erpnext/patches.txt\n\tboth added:      erpnext/patches/v13_0/custom_fields_for_taxjar_integration.py\n\tboth added:      erpnext/regional/doctype/product_tax_category/product_tax_category.py\n\tboth added:      erpnext/regional/doctype/product_tax_category/test_product_tax_category.py\n\tboth modified:   erpnext/regional/united_states/setup.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 2, 0, 12, 53, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-02 00:12:53 UTC): Cherry-pick of 7004944cc05b1dc0e1203a8459ffa9161030849b has failed:
```
On branch mergify/bp/version-13-hotfix/pr-27143
Your branch is up to date with 'origin/version-13-hotfix'.

You are currently cherry-picking commit 7004944cc0.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	new file:   erpnext/regional/united_states/product_tax_category_data.json

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/erpnext_integrations/taxjar_integration.py
	both modified:   erpnext/patches.txt
	both added:      erpnext/patches/v13_0/custom_fields_for_taxjar_integration.py
	both added:      erpnext/regional/doctype/product_tax_category/product_tax_category.py
	both added:      erpnext/regional/doctype/product_tax_category/test_product_tax_category.py
	both modified:   erpnext/regional/united_states/setup.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2825457696,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-02-01 21:52:36+00:00,[],2025-02-01 22:48:27+00:00,2025-02-01 22:48:25+00:00,https://github.com/frappe/erpnext/pull/45656,"[('translation', None)]",[],
2824616606,pull_request,closed,,fix: using DN for transfer w/o internal customer (backport #27798),"DN allows ""material transfer"" by specifying target warehouse.  https://docs.erpnext.com/docs/v13/user/manual/en/stock/articles/material-transfer-from-delivery-note#enable-target-warehouse

This is mostly meant for internal customer/supplier use case, however since it was allowed before many users are using this for making DN to regular customers also. The use-case is sort of valid hence restoring the functionality unless a better alternative is made available. 

Issue introduced in https://github.com/frappe/erpnext/pull/27086<hr>This is an automatic backport of pull request #27798 done by [Mergify](https://mergify.com).",mergify[bot],2025-02-01 00:13:24+00:00,['ankush'],2025-02-03 08:39:40+00:00,2025-02-03 08:39:40+00:00,https://github.com/frappe/erpnext/pull/45651,"[('selling', None), ('conflicts', None)]","[{'comment_id': 2628602761, 'issue_id': 2824616606, 'author': 'mergify[bot]', 'body': 'Cherry-pick of df1f8fddf6e2f4106c1a2778614ba9a1dc5ff67e has failed:\n```\nOn branch mergify/bp/develop/pr-27798\nYour branch is up to date with \'origin/develop\'.\n\nYou are currently cherry-picking commit df1f8fddf6.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/controllers/selling_controller.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/test_sales_invoice.py\n\tboth modified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.json\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 2, 1, 0, 13, 26, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-02-01 00:13:26 UTC): Cherry-pick of df1f8fddf6e2f4106c1a2778614ba9a1dc5ff67e has failed:
```
On branch mergify/bp/develop/pr-27798
Your branch is up to date with 'origin/develop'.

You are currently cherry-picking commit df1f8fddf6.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/controllers/selling_controller.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/test_sales_invoice.py
	both modified:   erpnext/stock/doctype/delivery_note_item/delivery_note_item.json

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2824462933,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-01-31 21:55:57+00:00,[],2025-02-01 19:01:19+00:00,2025-02-01 19:01:18+00:00,https://github.com/frappe/erpnext/pull/45650,"[('translation', None)]",[],
2824201601,pull_request,closed,,fix: consider process_loss_qty in work order,"Reference support ticket [30593](https://support.frappe.io/helpdesk/tickets/30593)

1. Job card now considers process loss qty when setting status to ""Completed""
2. Work Order now shows process loss qty in progress bar

`no-docs`",mihir-kandoi,2025-01-31 19:06:07+00:00,[],2025-02-03 06:20:40+00:00,2025-02-03 06:20:32+00:00,https://github.com/frappe/erpnext/pull/45648,"[('backport version-15-hotfix', '')]",[],
2824129155,pull_request,closed,,fix: not able to make manufacturing entry for alternate items (backport #45646),"Getting below error while creating the manufacturing entry for alternate items

<img width=""889"" alt=""image"" src=""https://github.com/user-attachments/assets/cb22f914-ae21-41bc-a3a9-c4e8d0a4f9f3"" />
<hr>This is an automatic backport of pull request #45646 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 18:18:40+00:00,['rohitwaghchaure'],2025-02-04 09:52:14+00:00,2025-02-03 06:18:04+00:00,https://github.com/frappe/erpnext/pull/45647,[],"[{'comment_id': 2633395434, 'issue_id': 2824129155, 'author': 'rohitwaghchaure', 'body': '@Mergifyio backport version-15', 'created_at': datetime.datetime(2025, 2, 4, 9, 51, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633395627, 'issue_id': 2824129155, 'author': 'mergify[bot]', 'body': '> backport version-15\n\n#### ✅ Backports have been created\n\n<details>\n\n* [#45707 fix: not able to make manufacturing entry for alternate items (backport #45646) (backport #45647)](https://github.com/frappe/erpnext/pull/45707) has been created for branch `version-15`\n\n</details>\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2025, 2, 4, 9, 51, 58, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2025-02-04 09:51:53 UTC): @Mergifyio backport version-15

mergify[bot] (Issue Creator) on (2025-02-04 09:51:58 UTC): #### ✅ Backports have been created

<details>

* [#45707 fix: not able to make manufacturing entry for alternate items (backport #45646) (backport #45647)](https://github.com/frappe/erpnext/pull/45707) has been created for branch `version-15`

</details>


<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""backport version-15"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2824082499,pull_request,closed,,fix: not able to make manufacturing entry for alternate items,"Getting below error while creating the manufacturing entry for alternate items

<img width=""889"" alt=""image"" src=""https://github.com/user-attachments/assets/cb22f914-ae21-41bc-a3a9-c4e8d0a4f9f3"" />
",rohitwaghchaure,2025-01-31 17:50:00+00:00,[],2025-01-31 18:17:50+00:00,2025-01-31 18:17:43+00:00,https://github.com/frappe/erpnext/pull/45646,"[('backport version-15-hotfix', '')]",[],
2824010440,pull_request,closed,,fix: actual qty showing blank for sub-assembly items (backport #45642),"<img width=""1013"" alt=""Screenshot 2025-01-31 at 5 20 30 PM"" src=""https://github.com/user-attachments/assets/e8b92327-1e15-4fef-be36-7ba8340fd811"" />
<hr>This is an automatic backport of pull request #45642 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 17:09:06+00:00,['rohitwaghchaure'],2025-01-31 17:52:11+00:00,2025-01-31 17:52:09+00:00,https://github.com/frappe/erpnext/pull/45645,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2823387476,pull_request,closed,,"fix: add allow_on_submit for party_balance, paid_from_account_balance and paid_to_account_balance","Issue:
While updating accounting dimension after submission of Payment Entry, error was thrown that party balance can't be updated after submission.

Before:

[balance_allow_on_submit_bfr.webm](https://github.com/user-attachments/assets/96bc1088-7d4f-484d-bc50-493f7320a205)

After:

[balance_allow_on_submit_afr.webm](https://github.com/user-attachments/assets/aebf50c7-bb0d-4c80-a992-980ce4f7a355)

Back port needed for v15",Sugesh393,2025-01-31 12:49:46+00:00,['ruthra-kumar'],2025-02-07 10:40:26+00:00,2025-02-07 10:40:17+00:00,https://github.com/frappe/erpnext/pull/45644,"[('backport version-15-hotfix', '')]","[{'comment_id': 2627494170, 'issue_id': 2823387476, 'author': 'ljain112', 'body': 'https://github.com/frappe/erpnext/pull/45630\r\nFields are being removed from Payment Entry', 'created_at': datetime.datetime(2025, 1, 31, 14, 32, 19, tzinfo=datetime.timezone.utc)}]","ljain112 on (2025-01-31 14:32:19 UTC): https://github.com/frappe/erpnext/pull/45630
Fields are being removed from Payment Entry

"
2823233500,pull_request,closed,,fix: consider process loss qty in job card,"Reference support ticket [30593](https://support.frappe.io/helpdesk/tickets/30593)

1. Job card now considers process loss qty when setting status to ""Completed""
2. Work Order now shows process loss qty in progress bar

`no-docs`",mihir-kandoi,2025-01-31 12:03:00+00:00,[],2025-01-31 19:03:25+00:00,2025-01-31 19:02:58+00:00,https://github.com/frappe/erpnext/pull/45643,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2823198375,pull_request,closed,,fix: actual qty showing blank for sub-assembly items,"<img width=""1013"" alt=""Screenshot 2025-01-31 at 5 20 30 PM"" src=""https://github.com/user-attachments/assets/e8b92327-1e15-4fef-be36-7ba8340fd811"" />
",rohitwaghchaure,2025-01-31 11:49:42+00:00,[],2025-01-31 17:08:12+00:00,2025-01-31 17:08:05+00:00,https://github.com/frappe/erpnext/pull/45642,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2823097044,pull_request,closed,,feat: add repost accounting ledger entry for payment entry,"Issue: In Repost Accounting Ledger Settings Payment Entry was added through add_default_for_repost_settings this patch
though the code for reposting the entries is not present in payment entry.

Before:

[Repost Accounting Ledger for Payment Entry Before.webm](https://github.com/user-attachments/assets/8b82862a-bea4-4278-9150-48ce33094046)


After:

[Repost Accounting Ledger for Payment Entry After.webm](https://github.com/user-attachments/assets/2e234864-b5d8-4dcb-80fc-11c5c1838769)


Backport needed: Version15",l0gesh29,2025-01-31 11:12:11+00:00,['ruthra-kumar'],2025-02-07 10:39:42+00:00,2025-02-07 10:39:42+00:00,https://github.com/frappe/erpnext/pull/45640,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2642092008, 'issue_id': 2823097044, 'author': 'ruthra-kumar', 'body': '@l0gesh29 \r\n\r\nThere is a framework level validation that prevents reposting on Payment Entry.\r\n\r\n![Screenshot from 2025-02-07 12-29-21](https://github.com/user-attachments/assets/31c2a41c-4074-426b-a03c-f8559cbad2c4)\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File ""apps/frappe/frappe/app.py"", line 115, in application\r\n    response = frappe.api.handle(request)\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle\r\n    data = endpoint(**arguments)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call\r\n    return frappe.handler.handle()\r\n           ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/handler.py"", line 50, in handle\r\n    data = execute_cmd(cmd)\r\n           ^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd\r\n    return frappe.call(method, **frappe.form_dict)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/__init__.py"", line 1700, in call\r\n    return fn(*args, **newargs)\r\n           ^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/desk/form/save.py"", line 41, in savedocs\r\n    doc.submit()\r\n  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n    return func(self, *args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 1183, in submit\r\n    return self._submit()\r\n           ^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 1165, in _submit\r\n    return self.save()\r\n           ^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n    return func(self, *args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 448, in save\r\n    return self._save(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n    return func(self, *args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File ""apps/frappe/frappe/model/document.py"", line 491, in _save\r\n    self.validate_update_after_submit()\r\n  File ""apps/frappe/frappe/model/document.py"", line 1017, in validate_update_after_submit\r\n    self._validate_update_after_submit()\r\n  File ""apps/frappe/frappe/model/base_document.py"", line 1095, in _validate_update_after_submit\r\n    frappe.throw(\r\n  File ""apps/frappe/frappe/__init__.py"", line 610, in throw\r\n    msgprint(\r\n  File ""apps/frappe/frappe/__init__.py"", line 571, in msgprint\r\n    _raise_exception()\r\n  File ""apps/frappe/frappe/__init__.py"", line 522, in _raise_exception\r\n    raise exc\r\nfrappe.exceptions.UpdateAfterSubmitError:  Not allowed to change Party Balance after submission from 6353934.12 to 6348934.12\r\n```', 'created_at': datetime.datetime(2025, 2, 7, 7, 0, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642103861, 'issue_id': 2823097044, 'author': 'l0gesh29', 'body': '> @l0gesh29\r\n> \r\n> There is a framework level validation that prevents reposting on Payment Entry.\r\n> \r\n> ![Screenshot from 2025-02-07 12-29-21](https://private-user-images.githubusercontent.com/3272205/410797097-31c2a41c-4074-426b-a03c-f8559cbad2c4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mzg5MTIxNTQsIm5iZiI6MTczODkxMTg1NCwicGF0aCI6Ii8zMjcyMjA1LzQxMDc5NzA5Ny0zMWMyYTQxYy00MDc0LTQyNmItYTAzYy1mODU1OWNiYWQyYzQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDIwNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAyMDdUMDcwNDE0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzVjMTY2MTY5NTEzZTI3ZGRjNmVmOWNiMDU2MTA0MzlkNGMxOWMyZDNkOWQ4Yzg3MmM2MzQ1YzQ4ZmM4NTJhNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.m6CqJVdJOEKwG_iexg_kfpzMjpeHNWHgwv4W37f_FkE)\r\n> \r\n> ```\r\n> Traceback (most recent call last):\r\n>   File ""apps/frappe/frappe/app.py"", line 115, in application\r\n>     response = frappe.api.handle(request)\r\n>                ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle\r\n>     data = endpoint(**arguments)\r\n>            ^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call\r\n>     return frappe.handler.handle()\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/handler.py"", line 50, in handle\r\n>     data = execute_cmd(cmd)\r\n>            ^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd\r\n>     return frappe.call(method, **frappe.form_dict)\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/__init__.py"", line 1700, in call\r\n>     return fn(*args, **newargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper\r\n>     return func(*args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/desk/form/save.py"", line 41, in savedocs\r\n>     doc.submit()\r\n>   File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper\r\n>     return func(*args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n>     return func(self, *args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 1183, in submit\r\n>     return self._submit()\r\n>            ^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 1165, in _submit\r\n>     return self.save()\r\n>            ^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n>     return func(self, *args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 448, in save\r\n>     return self._save(*args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper\r\n>     return func(self, *args, **kwargs)\r\n>            ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>   File ""apps/frappe/frappe/model/document.py"", line 491, in _save\r\n>     self.validate_update_after_submit()\r\n>   File ""apps/frappe/frappe/model/document.py"", line 1017, in validate_update_after_submit\r\n>     self._validate_update_after_submit()\r\n>   File ""apps/frappe/frappe/model/base_document.py"", line 1095, in _validate_update_after_submit\r\n>     frappe.throw(\r\n>   File ""apps/frappe/frappe/__init__.py"", line 610, in throw\r\n>     msgprint(\r\n>   File ""apps/frappe/frappe/__init__.py"", line 571, in msgprint\r\n>     _raise_exception()\r\n>   File ""apps/frappe/frappe/__init__.py"", line 522, in _raise_exception\r\n>     raise exc\r\n> frappe.exceptions.UpdateAfterSubmitError:  Not allowed to change Party Balance after submission from 6353934.12 to 6348934.12\r\n> ```\r\n\r\nAs PR #45630 removes the field, I didn\'t enable allow_on_submit for that field', 'created_at': datetime.datetime(2025, 2, 7, 7, 9, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642160158, 'issue_id': 2823097044, 'author': 'ruthra-kumar', 'body': ""This change https://github.com/frappe/erpnext/pull/45630 is targeted for future versions and will most likely be not backported.\r\n\r\nSo, better to enable `allow_on_submit`. Also, even if they are backported, it shouldn't be an issue."", 'created_at': datetime.datetime(2025, 2, 7, 7, 46, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642258527, 'issue_id': 2823097044, 'author': 'l0gesh29', 'body': 'we raised a separate PR for this, and we have reopened it now #45644 which will solve this case', 'created_at': datetime.datetime(2025, 2, 7, 8, 37, 15, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2025-02-07 07:00:20 UTC): @l0gesh29 

There is a framework level validation that prevents reposting on Payment Entry.

![Screenshot from 2025-02-07 12-29-21](https://github.com/user-attachments/assets/31c2a41c-4074-426b-a03c-f8559cbad2c4)


```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 115, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 50, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1700, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 41, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 32, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1183, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1165, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 448, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 123, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 491, in _save
    self.validate_update_after_submit()
  File ""apps/frappe/frappe/model/document.py"", line 1017, in validate_update_after_submit
    self._validate_update_after_submit()
  File ""apps/frappe/frappe/model/base_document.py"", line 1095, in _validate_update_after_submit
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 610, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 571, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 522, in _raise_exception
    raise exc
frappe.exceptions.UpdateAfterSubmitError:  Not allowed to change Party Balance after submission from 6353934.12 to 6348934.12
```

l0gesh29 (Issue Creator) on (2025-02-07 07:09:10 UTC): As PR #45630 removes the field, I didn't enable allow_on_submit for that field

ruthra-kumar (Assginee) on (2025-02-07 07:46:10 UTC): This change https://github.com/frappe/erpnext/pull/45630 is targeted for future versions and will most likely be not backported.

So, better to enable `allow_on_submit`. Also, even if they are backported, it shouldn't be an issue.

l0gesh29 (Issue Creator) on (2025-02-07 08:37:15 UTC): we raised a separate PR for this, and we have reopened it now #45644 which will solve this case

"
2822969758,pull_request,closed,,fix: '0' rate LDC's Invoice net totals should be ignored,"```
| Dec 2024 | Jan 2025 |
|          |          |
| LDC @ 0% |          |
|----------+----------|
| pinv1    | pinv3    |
| pinv2    |          |

```

Consider above scenario, LDC of '0' rate active for December 2024 and thera are purchase invoices booked in that period. Now, when a purchase invoice is created outside LDC, system incorrectly considers net total of pinv1 and pinv2 on TDS calculation as there are no taxes on the previous entries.

todo:
- [x] test case
",ruthra-kumar,2025-01-31 10:13:41+00:00,[],2025-02-07 07:42:53+00:00,2025-02-07 07:42:53+00:00,https://github.com/frappe/erpnext/pull/45639,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2822851083,pull_request,closed,,"fix: validation to prevent submission, if the SABB is not linked to a stock transaction (backport #45626)","<img width=""781"" alt=""Screenshot 2025-01-31 at 10 21 09 AM"" src=""https://github.com/user-attachments/assets/96b78158-4600-4479-afd7-0b522387c397"" />
<hr>This is an automatic backport of pull request #45626 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 09:14:55+00:00,['rohitwaghchaure'],2025-01-31 09:51:45+00:00,2025-01-31 09:51:43+00:00,https://github.com/frappe/erpnext/pull/45638,"[('stock', None), ('selling', None)]",[],
2822745829,pull_request,closed,,fix: renamed Comments Tab to Notes tab in Lead doctype,"Before:
<img width=""1390"" alt=""image"" src=""https://github.com/user-attachments/assets/aed8747f-c9ef-48d7-bb8e-a2423ca7bdd6"" />
After:
<img width=""1392"" alt=""image"" src=""https://github.com/user-attachments/assets/5852ae4e-5fba-4676-846d-29efe9c73900"" />
",shariquerik,2025-01-31 08:15:58+00:00,[],2025-02-03 07:52:36+00:00,2025-02-03 07:52:36+00:00,https://github.com/frappe/erpnext/pull/45637,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2822664086,pull_request,closed,,fix: correct error message in payment entry (backport #45615),"Before:
![image](https://github.com/user-attachments/assets/d346e5f0-eb1f-4388-ac03-832e7673a683)


After:
![image](https://github.com/user-attachments/assets/fe6f66ee-5c2d-4f71-b47f-f84f98805d46)

Closes: https://github.com/frappe/erpnext/issues/40116<hr>This is an automatic backport of pull request #45615 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 07:27:41+00:00,['ljain112'],2025-01-31 08:49:01+00:00,2025-01-31 08:48:59+00:00,https://github.com/frappe/erpnext/pull/45636,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2822664048,pull_request,closed,,fix: correct error message in payment entry (backport #45615),"Before:
![image](https://github.com/user-attachments/assets/d346e5f0-eb1f-4388-ac03-832e7673a683)


After:
![image](https://github.com/user-attachments/assets/fe6f66ee-5c2d-4f71-b47f-f84f98805d46)

Closes: https://github.com/frappe/erpnext/issues/40116<hr>This is an automatic backport of pull request #45615 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 07:27:39+00:00,['ljain112'],2025-02-05 11:46:21+00:00,2025-01-31 08:48:50+00:00,https://github.com/frappe/erpnext/pull/45635,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2636505823, 'issue_id': 2822664048, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 19, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-02-05 11:46:19 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2822572980,pull_request,closed,,fix: attribute 'msgbox' not found in sales invoice.js (backport #45629),"Reference support ticket [30495](https://support.frappe.io/helpdesk/tickets/30495)

Simply added a null check

`no-docs`<hr>This is an automatic backport of pull request #45629 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 06:34:39+00:00,['mihir-kandoi'],2025-01-31 06:41:30+00:00,2025-01-31 06:41:28+00:00,https://github.com/frappe/erpnext/pull/45634,[],"[{'comment_id': 2626413760, 'issue_id': 2822572980, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 5643385c22d77d55f7b374820d29375bb70bb3f5 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-45629\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit 5643385c22.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js\n\nno changes added to commit (use ""git add"" and/or ""git commit -a"")\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 31, 6, 34, 41, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-31 06:34:41 UTC): Cherry-pick of 5643385c22d77d55f7b374820d29375bb70bb3f5 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-45629
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit 5643385c22.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/sales_invoice/sales_invoice.js

no changes added to commit (use ""git add"" and/or ""git commit -a"")
```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2822563627,pull_request,closed,,fix: pos print receipt on submit (backport #45632),"`pos_profile` was not initialized while initializing `order_summary` in `pos_controller.js`, breaking the ""Print Receipt on Order Complete"" feature.<hr>This is an automatic backport of pull request #45632 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-31 06:30:26+00:00,['diptanilsaha'],2025-01-31 06:32:48+00:00,2025-01-31 06:32:47+00:00,https://github.com/frappe/erpnext/pull/45633,[],[],
2822551097,pull_request,closed,,fix: pos print receipt on submit,"`pos_profile` was not initialized while initializing `order_summary` in `pos_controller.js`, breaking the ""Print Receipt on Order Complete"" feature.",diptanilsaha,2025-01-31 06:24:52+00:00,[],2025-01-31 06:30:01+00:00,2025-01-31 06:30:01+00:00,https://github.com/frappe/erpnext/pull/45632,"[('backport version-15-hotfix', '')]",[],
2822538494,pull_request,closed,,fix: Do not check for cancelled invoices,,deepeshgarg007,2025-01-31 06:15:27+00:00,[],2025-02-03 08:41:13+00:00,2025-02-03 08:41:13+00:00,https://github.com/frappe/erpnext/pull/45631,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2822538394,pull_request,open,,refactor: remove redundant balance fields from Payment Entry,"1. Party Balance
2. Account Balance (From)
3. Account Balance (To)

Above fields query General Ledger on each new Payment Entry creation and cause significant DB load [^1] on large sites. As the balance information is purely for user interpretation and technically redundant in nature, removing it makes sense.

## Before
<img width=""1552"" alt=""Screenshot 2025-01-31 at 1 00 14 PM"" src=""https://github.com/user-attachments/assets/327ddf6a-fa24-4159-9475-62d1159f7c55"" />


## After
<img width=""1552"" alt=""Screenshot 2025-01-31 at 11 34 27 AM"" src=""https://github.com/user-attachments/assets/8fe40d09-833f-4d08-aeba-ec47a76a97cb"" />



[^1]: <img width=""1009"" alt=""Screenshot 2025-01-31 at 11 49 26 AM"" src=""https://github.com/user-attachments/assets/112d8453-e5e4-400c-bdc1-d08fa4d08ea6"" />
",ruthra-kumar,2025-01-31 06:15:24+00:00,[],2025-01-31 07:32:29+00:00,,https://github.com/frappe/erpnext/pull/45630,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2822517703,pull_request,closed,,fix: attribute 'msgbox' not found in sales invoice.js,"Reference support ticket [30495](https://support.frappe.io/helpdesk/tickets/30495)

Simply added a null check

`no-docs`",mihir-kandoi,2025-01-31 06:00:13+00:00,[],2025-01-31 06:33:52+00:00,2025-01-31 06:33:52+00:00,https://github.com/frappe/erpnext/pull/45629,"[('backport version-15-hotfix', '')]",[],
2822503919,pull_request,closed,,fix: loading print receipt only at order complete (backport #45627),fixes: #45611 <hr>This is an automatic backport of pull request #45627 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-31 05:48:22+00:00,['diptanilsaha'],2025-01-31 05:49:25+00:00,2025-01-31 05:49:23+00:00,https://github.com/frappe/erpnext/pull/45628,[],[],
2822496889,pull_request,closed,,fix: loading print receipt only at order complete,fixes: #45611 ,diptanilsaha,2025-01-31 05:42:02+00:00,[],2025-01-31 05:47:48+00:00,2025-01-31 05:47:48+00:00,https://github.com/frappe/erpnext/pull/45627,"[('backport version-15-hotfix', '')]",[],
2822451246,pull_request,closed,,"fix: validation to prevent submission, if the SABB is not linked to a stock transaction","<img width=""781"" alt=""Screenshot 2025-01-31 at 10 21 09 AM"" src=""https://github.com/user-attachments/assets/96b78158-4600-4479-afd7-0b522387c397"" />
",rohitwaghchaure,2025-01-31 05:01:53+00:00,[],2025-01-31 09:13:20+00:00,2025-01-31 09:13:12+00:00,https://github.com/frappe/erpnext/pull/45626,"[('backport version-15-hotfix', '')]",[],
2822169541,pull_request,closed,,feature: Allowing multiple emergency contacts for an employee,"Allowing multiple emergency contacts for an employee via a child table, replacing single fields with child table fields of same name

Replacing 3 data fields with a child table to allow multiple emergency contacts
For easier migration for any developers the field names in child table have the same names",toofun666,2025-01-31 00:48:37+00:00,[],2025-01-31 00:54:49+00:00,2025-01-31 00:54:49+00:00,https://github.com/frappe/erpnext/pull/45624,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2821876042,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-01-30 21:41:14+00:00,['ruthra-kumar'],2025-01-31 05:24:45+00:00,2025-01-31 05:24:41+00:00,https://github.com/frappe/erpnext/pull/45623,"[('translation', None)]",[],
2821422087,pull_request,closed,,fix: packing slip now copies stock_qty instead of qty,"Reference issue #45572 

Packing slip's UOM field is read only and is `Nos` by default (stock UOM). If UOM used in Delivery Note is different than `Nos`, packing slip created would have that quantity instead of stock_qty

For example:
Item has an extra UOM `Box` with conversion factor of 0.5. User creates Delivery Note of Item with Quantity 10 and UOM as `Box`. Now stock_qty (Nos) is 5 (10 * 0.5). When user creates a Packing Slip from this DN, they will have quantity as 10 for UOM `Nos` which is wrong. It should be 5.

`no-docs`",mihir-kandoi,2025-01-30 17:33:52+00:00,[],2025-02-03 09:25:38+00:00,2025-02-03 09:25:38+00:00,https://github.com/frappe/erpnext/pull/45622,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2821405473,pull_request,closed,,fix: delivered button of purchase order,"No reference issue

Set status to `Delivered` button of Purchase Order was not working due to reference to `this` was lost when function was called. Fixed by binding `this` to function call explicitly.

`no-docs`",mihir-kandoi,2025-01-30 17:25:28+00:00,[],2025-02-03 06:21:37+00:00,2025-02-03 06:21:37+00:00,https://github.com/frappe/erpnext/pull/45621,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2821397331,pull_request,closed,,fix: correctly change from and to amount during cross currency Payment Entry (Internal Transfer),"Reference issue #45543 

Previous behaviour: From and To amounts for Internal Transfer Payment Entries were not being updated when any of the 3 values (3rd being Exchange Rate) were being modified.

New behaviour: To system will now auto compute from and to amounts based on other 2 fields and exchange rate

`no-docs`",mihir-kandoi,2025-01-30 17:21:12+00:00,['ruthra-kumar'],2025-02-06 08:50:13+00:00,2025-02-04 12:12:51+00:00,https://github.com/frappe/erpnext/pull/45620,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2633725032, 'issue_id': 2821397331, 'author': 'ruthra-kumar', 'body': ""This change doesn't work.\r\n\r\nAlso, let's not add this behavior. There are scenarios where users want to book certain amount under Deductions and the current behavior allows it.\r\n\r\nWith proposed changes, Paid and Received amount will always be in sync and it won't be possible to book deductions"", 'created_at': datetime.datetime(2025, 2, 4, 12, 12, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633739979, 'issue_id': 2821397331, 'author': 'Awey01', 'body': 'Maybe at least change it for the first time, when Received Amount is set? For example if Received Amount was 0, then gets set to 100, and Target Exchange Rate is 1.05, then Paid Amount becomes 105, but if Received or Paid amount is changed again, they will not be in sync\r\n\r\n\r\nhttps://github.com/user-attachments/assets/6df39606-81af-486d-a38b-bb68412ea38e', 'created_at': datetime.datetime(2025, 2, 4, 12, 18, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633810441, 'issue_id': 2821397331, 'author': 'Awey01', 'body': '@ruthra-kumar', 'created_at': datetime.datetime(2025, 2, 4, 12, 48, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639185257, 'issue_id': 2821397331, 'author': 'ruthra-kumar', 'body': '> Maybe at least change it for the first time,\r\n\r\nThis can be done.\r\n\r\nhttps://github.com/frappe/erpnext/pull/45762', 'created_at': datetime.datetime(2025, 2, 6, 8, 49, 54, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2025-02-04 12:12:51 UTC): This change doesn't work.

Also, let's not add this behavior. There are scenarios where users want to book certain amount under Deductions and the current behavior allows it.

With proposed changes, Paid and Received amount will always be in sync and it won't be possible to book deductions

Awey01 on (2025-02-04 12:18:46 UTC): Maybe at least change it for the first time, when Received Amount is set? For example if Received Amount was 0, then gets set to 100, and Target Exchange Rate is 1.05, then Paid Amount becomes 105, but if Received or Paid amount is changed again, they will not be in sync


https://github.com/user-attachments/assets/6df39606-81af-486d-a38b-bb68412ea38e

Awey01 on (2025-02-04 12:48:38 UTC): @ruthra-kumar

ruthra-kumar (Assginee) on (2025-02-06 08:49:54 UTC): This can be done.

https://github.com/frappe/erpnext/pull/45762

"
2821389142,pull_request,closed,,feat: set bank account of company to default company bank account fro…,"Reference issue #45442 

The system will now fetch the default company bank account upon creation of Payment Entry

`no-docs`",mihir-kandoi,2025-01-30 17:17:14+00:00,[],2025-02-03 06:30:42+00:00,2025-02-03 06:30:35+00:00,https://github.com/frappe/erpnext/pull/45619,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2821189277,pull_request,closed,,fix: posting_date to posting_datetime in stock related queries (backport #45612),<hr>This is an automatic backport of pull request #45612 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-30 15:50:40+00:00,['rohitwaghchaure'],2025-02-05 11:46:17+00:00,2025-01-31 09:13:40+00:00,https://github.com/frappe/erpnext/pull/45618,"[('released', None)]","[{'comment_id': 2624874536, 'issue_id': 2821189277, 'author': 'mergify[bot]', 'body': 'Cherry-pick of e61ab481451f5bf6753462d976fb1312685eae4a has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45612\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit e61ab48145.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/stock/report/stock_ageing/stock_ageing.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py\n\tboth modified:   erpnext/stock/report/stock_ledger/stock_ledger.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 30, 15, 50, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505720, 'issue_id': 2821189277, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 16, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-30 15:50:43 UTC): Cherry-pick of e61ab481451f5bf6753462d976fb1312685eae4a has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45612
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit e61ab48145.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/stock/report/stock_ageing/stock_ageing.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py
	both modified:   erpnext/stock/report/stock_ledger/stock_ledger.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:16 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2820934446,pull_request,closed,,fix: ignore expired batch for pick list,Internal Reference: https://support.frappe.io/helpdesk/my-tickets/30559,rtdany10,2025-01-30 14:06:53+00:00,[],2025-02-02 08:03:14+00:00,2025-01-31 17:19:34+00:00,https://github.com/frappe/erpnext/pull/45617,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport develop', 'instructs mergify to frontport PR to develop branch')]","[{'comment_id': 2626363611, 'issue_id': 2820934446, 'author': 'rtdany10', 'body': 'Added the same condition from get_available_batches which is called [just before this function in get_auto_batch_nos](https://github.com/frappe/erpnext/blob/5a1851dfe3b22d0041ff510f11f540d21953da23/erpnext/stock/doctype/serial_and_batch_bundle/serial_and_batch_bundle.py#L2051-L2057)\r\n![image](https://github.com/user-attachments/assets/e8976b38-ccb9-43b9-b4cd-1a3c4013e5ee)', 'created_at': datetime.datetime(2025, 1, 31, 5, 51, 53, tzinfo=datetime.timezone.utc)}]","rtdany10 (Issue Creator) on (2025-01-31 05:51:53 UTC): Added the same condition from get_available_batches which is called [just before this function in get_auto_batch_nos](https://github.com/frappe/erpnext/blob/5a1851dfe3b22d0041ff510f11f540d21953da23/erpnext/stock/doctype/serial_and_batch_bundle/serial_and_batch_bundle.py#L2051-L2057)
![image](https://github.com/user-attachments/assets/e8976b38-ccb9-43b9-b4cd-1a3c4013e5ee)

"
2820651018,pull_request,closed,,fix: correct error message in payment entry,"Before:
![image](https://github.com/user-attachments/assets/d346e5f0-eb1f-4388-ac03-832e7673a683)


After:
![image](https://github.com/user-attachments/assets/fe6f66ee-5c2d-4f71-b47f-f84f98805d46)

Closes: https://github.com/frappe/erpnext/issues/40116",ljain112,2025-01-30 12:04:11+00:00,['ruthra-kumar'],2025-01-31 07:26:19+00:00,2025-01-31 07:26:19+00:00,https://github.com/frappe/erpnext/pull/45615,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2820591589,pull_request,closed,,fix: posting_date to posting_datetime in stock related queries (backport #45612),<hr>This is an automatic backport of pull request #45612 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-30 11:36:13+00:00,['rohitwaghchaure'],2025-01-30 15:49:21+00:00,2025-01-30 15:49:19+00:00,https://github.com/frappe/erpnext/pull/45614,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2820449730,pull_request,closed,,fix: reposting issue with s3 backup (backport #45609),"During reposting getting below error



Cannot access file path /api/method/frappe_s3_attachment.controller.generate_file?<hr>This is an automatic backport of pull request #45609 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-30 10:29:57+00:00,['rohitwaghchaure'],2025-01-30 11:35:18+00:00,2025-01-30 11:35:16+00:00,https://github.com/frappe/erpnext/pull/45613,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2820436389,pull_request,closed,,fix: posting_date to posting_datetime in stock related queries,,rohitwaghchaure,2025-01-30 10:24:02+00:00,[],2025-01-30 15:49:28+00:00,2025-01-30 11:35:26+00:00,https://github.com/frappe/erpnext/pull/45612,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2820083258,pull_request,closed,,fix: respect user set account if not advance account for getting outsanding invoices in payment entry,"Issue: Outstanding Invoices for the incorrect account are being fetched in Payment Entry.

Steps to replicate:
- Enable ""Book Advance in Separate Party Account in company settings"".
- Create a receivable account B.
- Create two invoices for a customer one in default receivable and the other in B Account.
- Create a New Payment Entry for the customer.
- Set ""Account Paid From"" as B.
- Fetch Outstanding Invoices

Even though Account B is set, invoices for the default account will be fetched because the system reset the party account.

Solution: Reset party account only if an advance account is set.

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/30383",ljain112,2025-01-30 07:15:54+00:00,['ruthra-kumar'],2025-02-05 06:39:17+00:00,2025-02-05 06:39:17+00:00,https://github.com/frappe/erpnext/pull/45610,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]","[{'comment_id': 2635803359, 'issue_id': 2820083258, 'author': 'ruthra-kumar', 'body': 'Advance in Separate Party Account feature is only in v15. No need for a v14 backport.', 'created_at': datetime.datetime(2025, 2, 5, 6, 25, 9, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2025-02-05 06:25:09 UTC): Advance in Separate Party Account feature is only in v15. No need for a v14 backport.

"
2820019717,pull_request,closed,,fix: reposting issue with s3 backup,"During reposting getting below error



Cannot access file path /api/method/frappe_s3_attachment.controller.generate_file?",rohitwaghchaure,2025-01-30 06:31:12+00:00,[],2025-01-30 10:28:17+00:00,2025-01-30 10:28:17+00:00,https://github.com/frappe/erpnext/pull/45609,"[('stock', None), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2819395425,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-01-29 21:44:50+00:00,[],2025-01-30 05:50:04+00:00,2025-01-30 05:50:01+00:00,https://github.com/frappe/erpnext/pull/45608,"[('translation', None)]",[],
2818973559,pull_request,open,,fix: set stock adjustment account in difference account,"**Issue:** 
In the stock entry, while selecting the item, it fetches the default expense account from the item defaults as a different account
**ref:** [27927](https://support.frappe.io/helpdesk/tickets/27927)

**Before:**

https://github.com/user-attachments/assets/d2877e01-916d-4fe2-998c-78e4a1cecb7c

**After:**

https://github.com/user-attachments/assets/84dd7c5f-55df-4470-9882-dab80a1eb448

**Backport needed for v14 & v15**",venkat102,2025-01-29 18:46:38+00:00,[],2025-01-29 19:34:49+00:00,,https://github.com/frappe/erpnext/pull/45606,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2818767912,pull_request,closed,,fix: filter the item tax template using the input text,"Issue: The barcode search function is not properly validating the item group.

Ref: [30215](https://support.frappe.io/helpdesk/tickets/30215)

Before:

[issue.webm](https://github.com/user-attachments/assets/93c1dca7-e800-4460-90ae-8742e996e23f)

After:

[fix.webm](https://github.com/user-attachments/assets/e69798dd-1460-4b10-a258-d04c2ee4df3b)


Backport Needed: v15",Bhavan23,2025-01-29 17:03:39+00:00,['ruthra-kumar'],2025-02-05 11:00:08+00:00,2025-02-05 11:00:07+00:00,https://github.com/frappe/erpnext/pull/45604,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2818522494,pull_request,closed,,perf: stock entry with batch (backport #45486),<hr>This is an automatic backport of pull request #45486 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-29 15:20:44+00:00,['rohitwaghchaure'],2025-01-30 05:51:22+00:00,2025-01-30 05:51:20+00:00,https://github.com/frappe/erpnext/pull/45602,"[('stock', None)]",[],
2818501746,pull_request,closed,,fix: validation message (backport #45600),<hr>This is an automatic backport of pull request #45600 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-29 15:12:41+00:00,['rohitwaghchaure'],2025-01-29 15:18:58+00:00,2025-01-29 15:18:56+00:00,https://github.com/frappe/erpnext/pull/45601,[],[],
2818489475,pull_request,closed,,fix: validation message,,rohitwaghchaure,2025-01-29 15:07:44+00:00,[],2025-01-29 15:11:40+00:00,2025-01-29 15:11:39+00:00,https://github.com/frappe/erpnext/pull/45600,"[('backport version-15-hotfix', '')]",[],
2817912036,pull_request,closed,,fix: Gross Profit Report with Correct Totals and Gross Margin (backport #45548),"Support ticket: [Support Ticket  - 30225](https://support.frappe.io/helpdesk/tickets/30225)
- closes : #35942

Before : 
The add_total_row option was checked, causing the subtotals to combine, which resulted in an incorrect **Selling Amount**, **Buying Amount**,  **Gross Profit**, **Gross Profit Percentage**.

<img width=""847"" alt=""Screenshot 2025-01-27 at 6 55 10 PM"" src=""https://github.com/user-attachments/assets/374c917f-727b-4bdf-a93b-2dc548a440a9"" />


After : 
The total Selling Amount and Buying Amount are now calculated correctly.
The total **Gross Profit** and **Gross Profit Percentage** is calculated using a formula.
The add_total_row option was disabled using a patch.

<img width=""847"" alt=""Screenshot 2025-01-27 at 9 58 45 PM"" src=""https://github.com/user-attachments/assets/45151881-71a0-4ab1-a55b-15f42fc99321"" />



<hr>This is an automatic backport of pull request #45548 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 11:14:34+00:00,[],2025-01-30 05:51:54+00:00,2025-01-30 05:51:53+00:00,https://github.com/frappe/erpnext/pull/45598,[],[],
2817911928,pull_request,closed,,fix: Gross Profit Report with Correct Totals and Gross Margin (backport #45548),"Support ticket: [Support Ticket  - 30225](https://support.frappe.io/helpdesk/tickets/30225)
- closes : #35942

Before : 
The add_total_row option was checked, causing the subtotals to combine, which resulted in an incorrect **Selling Amount**, **Buying Amount**,  **Gross Profit**, **Gross Profit Percentage**.

<img width=""847"" alt=""Screenshot 2025-01-27 at 6 55 10 PM"" src=""https://github.com/user-attachments/assets/374c917f-727b-4bdf-a93b-2dc548a440a9"" />


After : 
The total Selling Amount and Buying Amount are now calculated correctly.
The total **Gross Profit** and **Gross Profit Percentage** is calculated using a formula.
The add_total_row option was disabled using a patch.

<img width=""847"" alt=""Screenshot 2025-01-27 at 9 58 45 PM"" src=""https://github.com/user-attachments/assets/45151881-71a0-4ab1-a55b-15f42fc99321"" />



<hr>This is an automatic backport of pull request #45548 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 11:14:32+00:00,[],2025-02-05 11:46:14+00:00,2025-01-31 10:40:25+00:00,https://github.com/frappe/erpnext/pull/45597,"[('released', None)]","[{'comment_id': 2621357743, 'issue_id': 2817911928, 'author': 'mergify[bot]', 'body': 'Cherry-pick of aaf720ab61f8a8b3e3d03513dd4c650b6106413d has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45548\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit aaf720ab61.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/report/gross_profit/gross_profit.json\n\tmodified:   erpnext/accounts/report/gross_profit/gross_profit.py\n\tnew file:   erpnext/patches/v14_0/disable_add_row_in_gross_profit.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/report/gross_profit/test_gross_profit.py\n\tboth modified:   erpnext/patches.txt\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 29, 11, 14, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505627, 'issue_id': 2817911928, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 13, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-29 11:14:33 UTC): Cherry-pick of aaf720ab61f8a8b3e3d03513dd4c650b6106413d has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45548
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit aaf720ab61.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/report/gross_profit/gross_profit.json
	modified:   erpnext/accounts/report/gross_profit/gross_profit.py
	new file:   erpnext/patches/v14_0/disable_add_row_in_gross_profit.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/report/gross_profit/test_gross_profit.py
	both modified:   erpnext/patches.txt

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:13 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2818522494,pull_request,closed,,perf: stock entry with batch (backport #45486),<hr>This is an automatic backport of pull request #45486 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-29 15:20:44+00:00,['rohitwaghchaure'],2025-01-30 05:51:22+00:00,2025-01-30 05:51:20+00:00,https://github.com/frappe/erpnext/pull/45602,"[('stock', None)]",[],
2818501746,pull_request,closed,,fix: validation message (backport #45600),<hr>This is an automatic backport of pull request #45600 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-29 15:12:41+00:00,['rohitwaghchaure'],2025-01-29 15:18:58+00:00,2025-01-29 15:18:56+00:00,https://github.com/frappe/erpnext/pull/45601,[],[],
2818489475,pull_request,closed,,fix: validation message,,rohitwaghchaure,2025-01-29 15:07:44+00:00,[],2025-01-29 15:11:40+00:00,2025-01-29 15:11:39+00:00,https://github.com/frappe/erpnext/pull/45600,"[('backport version-15-hotfix', '')]",[],
2817912036,pull_request,closed,,fix: Gross Profit Report with Correct Totals and Gross Margin (backport #45548),"Support ticket: [Support Ticket  - 30225](https://support.frappe.io/helpdesk/tickets/30225)
- closes : #35942

Before : 
The add_total_row option was checked, causing the subtotals to combine, which resulted in an incorrect **Selling Amount**, **Buying Amount**,  **Gross Profit**, **Gross Profit Percentage**.

<img width=""847"" alt=""Screenshot 2025-01-27 at 6 55 10 PM"" src=""https://github.com/user-attachments/assets/374c917f-727b-4bdf-a93b-2dc548a440a9"" />


After : 
The total Selling Amount and Buying Amount are now calculated correctly.
The total **Gross Profit** and **Gross Profit Percentage** is calculated using a formula.
The add_total_row option was disabled using a patch.

<img width=""847"" alt=""Screenshot 2025-01-27 at 9 58 45 PM"" src=""https://github.com/user-attachments/assets/45151881-71a0-4ab1-a55b-15f42fc99321"" />



<hr>This is an automatic backport of pull request #45548 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 11:14:34+00:00,[],2025-01-30 05:51:54+00:00,2025-01-30 05:51:53+00:00,https://github.com/frappe/erpnext/pull/45598,[],[],
2817911928,pull_request,closed,,fix: Gross Profit Report with Correct Totals and Gross Margin (backport #45548),"Support ticket: [Support Ticket  - 30225](https://support.frappe.io/helpdesk/tickets/30225)
- closes : #35942

Before : 
The add_total_row option was checked, causing the subtotals to combine, which resulted in an incorrect **Selling Amount**, **Buying Amount**,  **Gross Profit**, **Gross Profit Percentage**.

<img width=""847"" alt=""Screenshot 2025-01-27 at 6 55 10 PM"" src=""https://github.com/user-attachments/assets/374c917f-727b-4bdf-a93b-2dc548a440a9"" />


After : 
The total Selling Amount and Buying Amount are now calculated correctly.
The total **Gross Profit** and **Gross Profit Percentage** is calculated using a formula.
The add_total_row option was disabled using a patch.

<img width=""847"" alt=""Screenshot 2025-01-27 at 9 58 45 PM"" src=""https://github.com/user-attachments/assets/45151881-71a0-4ab1-a55b-15f42fc99321"" />



<hr>This is an automatic backport of pull request #45548 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 11:14:32+00:00,[],2025-02-05 11:46:14+00:00,2025-01-31 10:40:25+00:00,https://github.com/frappe/erpnext/pull/45597,"[('released', None)]","[{'comment_id': 2621357743, 'issue_id': 2817911928, 'author': 'mergify[bot]', 'body': 'Cherry-pick of aaf720ab61f8a8b3e3d03513dd4c650b6106413d has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45548\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit aaf720ab61.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/report/gross_profit/gross_profit.json\n\tmodified:   erpnext/accounts/report/gross_profit/gross_profit.py\n\tnew file:   erpnext/patches/v14_0/disable_add_row_in_gross_profit.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/report/gross_profit/test_gross_profit.py\n\tboth modified:   erpnext/patches.txt\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 29, 11, 14, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636505627, 'issue_id': 2817911928, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.82.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 2, 5, 11, 46, 13, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-29 11:14:33 UTC): Cherry-pick of aaf720ab61f8a8b3e3d03513dd4c650b6106413d has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45548
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit aaf720ab61.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/report/gross_profit/gross_profit.json
	modified:   erpnext/accounts/report/gross_profit/gross_profit.py
	new file:   erpnext/patches/v14_0/disable_add_row_in_gross_profit.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/report/gross_profit/test_gross_profit.py
	both modified:   erpnext/patches.txt

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-02-05 11:46:13 UTC): :tada: This PR is included in version 14.82.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.82.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2817899214,pull_request,closed,,fix: do not allow to manually submit the SABB (backport #45595),"<img width=""644"" alt=""Screenshot 2025-01-29 at 4 35 29 PM"" src=""https://github.com/user-attachments/assets/8080d775-609f-4fa1-b529-17cd93bfe772"" />
<hr>This is an automatic backport of pull request #45595 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 11:09:01+00:00,['rohitwaghchaure'],2025-01-29 11:14:14+00:00,2025-01-29 11:14:12+00:00,https://github.com/frappe/erpnext/pull/45596,[],[],
2817893364,pull_request,closed,,fix: do not allow to manually submit the SABB,"<img width=""644"" alt=""Screenshot 2025-01-29 at 4 35 29 PM"" src=""https://github.com/user-attachments/assets/8080d775-609f-4fa1-b529-17cd93bfe772"" />
",rohitwaghchaure,2025-01-29 11:07:00+00:00,[],2025-01-29 11:08:28+00:00,2025-01-29 11:08:19+00:00,https://github.com/frappe/erpnext/pull/45595,"[('backport develop', 'instructs mergify to frontport PR to develop branch')]",[],
2817834213,pull_request,closed,,fix: update voucher outstanding from payment ledger (backport #45569),"Issue: Outstanding getting reset on Repost Accounting Ledger/Item Valuation Repost for invoices with the following cases:
- self.is_pos (Paid Invoice)
- self.write_off_account 
- self.redeem_loyalty_points

Steps to Replicate:
- Create a Sales Invoice with ""is_pos"" as checked and the payment amount as 0.
- Create a separate Payment Entry for the same amount without thte reference document.
- Now manually reconcile using the Payment Reconciliation Tool.
- Now Repost Accounting Ledger for the Sales Invoice.

Outstanding will be reset because it is getting set on the basis of GL Entry Against Voucher which is already deprecated and Payment Ledger Entries are used for outstanding.

Frappe Support Issue: 
- https://support.frappe.io/app/hd-ticket/29063
- https://support.frappe.io/app/hd-ticket/19952

backport version-14
backport version-15

 

<hr>This is an automatic backport of pull request #45569 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 10:42:43+00:00,['ljain112'],2025-01-29 11:00:55+00:00,2025-01-29 11:00:52+00:00,https://github.com/frappe/erpnext/pull/45594,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2817834144,pull_request,closed,,fix: update voucher outstanding from payment ledger (backport #45569),"Issue: Outstanding getting reset on Repost Accounting Ledger/Item Valuation Repost for invoices with the following cases:
- self.is_pos (Paid Invoice)
- self.write_off_account 
- self.redeem_loyalty_points

Steps to Replicate:
- Create a Sales Invoice with ""is_pos"" as checked and the payment amount as 0.
- Create a separate Payment Entry for the same amount without thte reference document.
- Now manually reconcile using the Payment Reconciliation Tool.
- Now Repost Accounting Ledger for the Sales Invoice.

Outstanding will be reset because it is getting set on the basis of GL Entry Against Voucher which is already deprecated and Payment Ledger Entries are used for outstanding.

Frappe Support Issue: 
- https://support.frappe.io/app/hd-ticket/29063
- https://support.frappe.io/app/hd-ticket/19952

backport version-14
backport version-15

 

<hr>This is an automatic backport of pull request #45569 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 10:42:41+00:00,['ljain112'],2025-01-29 11:30:57+00:00,2025-01-29 11:03:01+00:00,https://github.com/frappe/erpnext/pull/45593,"[('needs-tests', 'This PR needs automated unit-tests.'), ('released', None)]","[{'comment_id': 2621389511, 'issue_id': 2817834144, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 42, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-29 11:30:42 UTC): :tada: This PR is included in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2817804822,pull_request,closed,,fix(query): remove duplicate docstatus condition (backport #45586),"The condition `je.docstatus == 1` was being checked twice in the 
WHERE clause of the query. This commit removes the redundant check 
to optimize the query execution.<hr>This is an automatic backport of pull request #45586 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 10:29:14+00:00,[],2025-01-29 10:49:27+00:00,2025-01-29 10:49:25+00:00,https://github.com/frappe/erpnext/pull/45592,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2817804415,pull_request,open,,feat: disable auto setting grand total to default mode of payment,"Added a POS Profile Configuration, where users can disable auto-setting the Grand Total to the default Mode of Payment. 

![image](https://github.com/user-attachments/assets/13327596-833a-4db5-a068-118d3f543e9f)

Before:

https://github.com/user-attachments/assets/4e0496fa-283d-4d54-ae6f-c267cd2a25aa

After the configuration is enabled, users can manually select the mode of payment while checking out from POS.

https://github.com/user-attachments/assets/2daaf84d-bf79-4612-ad31-d868e07ac896


no-docs",diptanilsaha,2025-01-29 10:29:02+00:00,[],2025-02-03 09:31:56+00:00,,https://github.com/frappe/erpnext/pull/45591,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2817769110,pull_request,closed,,fix: remove tds account in taxes table on change of Tax Withholding C…,"Issue: On changing the Tax Withholding Category, the account in the taxes table is not being removed and continues to accumulate.

Solution: Added a JS validation on the change of Tax Withholding Category

Before:

[tax_withholding_category_removal_before.webm](https://github.com/user-attachments/assets/99a980f6-709d-4240-a3c4-a9e06b29b134)


After:

[tax_withholding_category_removal_after.webm](https://github.com/user-attachments/assets/589f31ff-a617-43bd-be6b-936cfcb824f7)

Backport needed: Version15
",l0gesh29,2025-01-29 10:13:46+00:00,['ruthra-kumar'],2025-02-05 08:38:31+00:00,2025-02-05 08:38:31+00:00,https://github.com/frappe/erpnext/pull/45590,"[('backport version-15-hotfix', '')]",[],
2817752911,pull_request,closed,,fix: show payment entries in tax withheld vouchers (backport #45441),"Closes: https://github.com/frappe/erpnext/issues/44576 
Payment Entries were not included in tax-withheld vouchers.


Note: Removed unnecessary queries.
backport version-15

<hr>This is an automatic backport of pull request #45441 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 10:06:39+00:00,['ljain112'],2025-01-29 10:23:49+00:00,2025-01-29 10:23:46+00:00,https://github.com/frappe/erpnext/pull/45589,[],[],
2817735273,pull_request,closed,,refactor: auto add taxes from template (backport #45585),"Reference issue https://github.com/frappe/erpnext/issues/44900

Current behaviour: If user creates a Sales Invoice through REST API, Sales Taxes and Charges Template is not fetched.

New behaviour: If user passes a Sales Taxes and Charges Template, the relevant taxes will be fetched.

Note: If user wants to make changes to the taxes table, they would have to first clear the template field. If not done, the taxes will be refetched on save and overwrite user inputted data.

`no-docs`<hr>This is an automatic backport of pull request #45585 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 09:59:23+00:00,['ruthra-kumar'],2025-01-29 10:20:07+00:00,2025-01-29 10:20:05+00:00,https://github.com/frappe/erpnext/pull/45588,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2817635551,pull_request,closed,,fix(query): remove duplicate docstatus condition,"The condition `je.docstatus == 1` was being checked twice in the 
WHERE clause of the query. This commit removes the redundant check 
to optimize the query execution.",safvanhuzain,2025-01-29 09:14:12+00:00,[],2025-01-29 10:27:02+00:00,2025-01-29 10:27:02+00:00,https://github.com/frappe/erpnext/pull/45586,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2817629208,pull_request,closed,,refactor: auto add taxes from template,"Reference issue https://github.com/frappe/erpnext/issues/44900

Current behaviour: If user creates a Sales Invoice through REST API, Sales Taxes and Charges Template is not fetched.

New behaviour: If user passes a Sales Taxes and Charges Template, the relevant taxes will be fetched.

Note: If user wants to make changes to the taxes table, they would have to first clear the template field. If not done, the taxes will be refetched on save and overwrite user inputted data.

`no-docs`",ruthra-kumar,2025-01-29 09:11:07+00:00,['ruthra-kumar'],2025-01-29 09:58:13+00:00,2025-01-29 09:58:12+00:00,https://github.com/frappe/erpnext/pull/45585,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-15-hotfix', '')]",[],
2817516302,pull_request,closed,,refactor: stock closing balance -> stock closing entry  (backport #44489),"New Doctype ""Stock Closing Entry""

<img width=""1385"" alt=""image"" src=""https://github.com/user-attachments/assets/941edd2e-a4d6-44f7-a123-9cf37167d718"">

The purpose of the stock closing entry is to generate the stock closing balance, which includes the consolidated stock quantity and consolidated stock value for the selected period. This will help to improve the performance of stock reports such as Stock Balance and Batch-Wise Balance History.

**How it works**

On submission of the stock closing entry, the system generates the stock closing balances based on the following combinations

- item, warehouse
- item, warehouse, batch no
- item, warehouse, dimension

If there are two inventory dimensions such as Rack and Bin then 
- item, warehouse, rack 1
- item, warehouse, bin 1
- item, warehouse, rack1, bin 1

<img width=""1222"" alt=""image"" src=""https://github.com/user-attachments/assets/1ce39a07-ce63-4bb9-8fa2-2682661acbf9"">


While generating the stock balance report, system reads the opening stock from the Stock Closing Balance instead of stock ledger entries

docs https://docs.frappe.io/erpnext/stock-closing-entry<hr>This is an automatic backport of pull request #44489 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 08:12:52+00:00,['rohitwaghchaure'],2025-01-29 08:15:14+00:00,2025-01-29 08:15:13+00:00,https://github.com/frappe/erpnext/pull/45584,"[('conflicts', None)]","[{'comment_id': 2620951936, 'issue_id': 2817516302, 'author': 'mergify[bot]', 'body': 'Cherry-pick of c9088f4955d26ae94da66dd24f59e175948d55f3 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-44489\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit c9088f4955.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/stock/doctype/inventory_dimension/inventory_dimension.py\n\tmodified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py\n\tmodified:   erpnext/stock/doctype/repost_item_valuation/test_repost_item_valuation.py\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/__init__.py -> erpnext/stock/doctype/stock_closing_balance/__init__.py\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.js\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.json\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.py\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/test_stock_closing_balance.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/__init__.py\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.js -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.js\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.json -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.json\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_dashboard.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_list.js\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/test_stock_closing_entry.py\n\nUnmerged paths:\n  (use ""git add/rm <file>..."" as appropriate to mark resolution)\n\tboth modified:   erpnext/patches.txt\n\tadded by them:   erpnext/patches/v14_0/refactor_closing_stock_balance.py\n\tdeleted by them: erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.py\n\tdeleted by them: erpnext/stock/doctype/closing_stock_balance/test_closing_stock_balance.py\n\tboth modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py\n\tboth modified:   erpnext/stock/report/stock_balance/stock_balance.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 29, 8, 12, 54, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-29 08:12:54 UTC): Cherry-pick of c9088f4955d26ae94da66dd24f59e175948d55f3 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-44489
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit c9088f4955.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/stock/doctype/inventory_dimension/inventory_dimension.py
	modified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py
	modified:   erpnext/stock/doctype/repost_item_valuation/test_repost_item_valuation.py
	renamed:    erpnext/stock/doctype/closing_stock_balance/__init__.py -> erpnext/stock/doctype/stock_closing_balance/__init__.py
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.js
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.json
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.py
	new file:   erpnext/stock/doctype/stock_closing_balance/test_stock_closing_balance.py
	new file:   erpnext/stock/doctype/stock_closing_entry/__init__.py
	renamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.js -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.js
	renamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.json -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.json
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.py
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_dashboard.py
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_list.js
	new file:   erpnext/stock/doctype/stock_closing_entry/test_stock_closing_entry.py

Unmerged paths:
  (use ""git add/rm <file>..."" as appropriate to mark resolution)
	both modified:   erpnext/patches.txt
	added by them:   erpnext/patches/v14_0/refactor_closing_stock_balance.py
	deleted by them: erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.py
	deleted by them: erpnext/stock/doctype/closing_stock_balance/test_closing_stock_balance.py
	both modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py
	both modified:   erpnext/stock/report/stock_balance/stock_balance.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2817516220,pull_request,closed,,refactor: stock closing balance -> stock closing entry  (backport #44489),"New Doctype ""Stock Closing Entry""

<img width=""1385"" alt=""image"" src=""https://github.com/user-attachments/assets/941edd2e-a4d6-44f7-a123-9cf37167d718"">

The purpose of the stock closing entry is to generate the stock closing balance, which includes the consolidated stock quantity and consolidated stock value for the selected period. This will help to improve the performance of stock reports such as Stock Balance and Batch-Wise Balance History.

**How it works**

On submission of the stock closing entry, the system generates the stock closing balances based on the following combinations

- item, warehouse
- item, warehouse, batch no
- item, warehouse, dimension

If there are two inventory dimensions such as Rack and Bin then 
- item, warehouse, rack 1
- item, warehouse, bin 1
- item, warehouse, rack1, bin 1

<img width=""1222"" alt=""image"" src=""https://github.com/user-attachments/assets/1ce39a07-ce63-4bb9-8fa2-2682661acbf9"">


While generating the stock balance report, system reads the opening stock from the Stock Closing Balance instead of stock ledger entries

docs https://docs.frappe.io/erpnext/stock-closing-entry<hr>This is an automatic backport of pull request #44489 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 08:12:49+00:00,['rohitwaghchaure'],2025-01-29 08:15:24+00:00,2025-01-29 08:15:23+00:00,https://github.com/frappe/erpnext/pull/45583,"[('conflicts', None)]","[{'comment_id': 2620951839, 'issue_id': 2817516220, 'author': 'mergify[bot]', 'body': 'Cherry-pick of c9088f4955d26ae94da66dd24f59e175948d55f3 has failed:\n```\nOn branch mergify/bp/version-15-hotfix/pr-44489\nYour branch is up to date with \'origin/version-15-hotfix\'.\n\nYou are currently cherry-picking commit c9088f4955.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tnew file:   erpnext/patches/v15_0/refactor_closing_stock_balance.py\n\tmodified:   erpnext/stock/doctype/inventory_dimension/inventory_dimension.py\n\tmodified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py\n\tmodified:   erpnext/stock/doctype/repost_item_valuation/test_repost_item_valuation.py\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/__init__.py -> erpnext/stock/doctype/stock_closing_balance/__init__.py\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.js\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.json\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.py\n\tnew file:   erpnext/stock/doctype/stock_closing_balance/test_stock_closing_balance.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/__init__.py\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.js -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.js\n\trenamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.json -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.json\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_dashboard.py\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_list.js\n\tnew file:   erpnext/stock/doctype/stock_closing_entry/test_stock_closing_entry.py\n\tmodified:   erpnext/stock/report/stock_balance/stock_balance.py\n\nUnmerged paths:\n  (use ""git add/rm <file>..."" as appropriate to mark resolution)\n\tboth modified:   erpnext/patches.txt\n\tdeleted by them: erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.py\n\tdeleted by them: erpnext/stock/doctype/closing_stock_balance/test_closing_stock_balance.py\n\tboth modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 29, 8, 12, 51, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-29 08:12:51 UTC): Cherry-pick of c9088f4955d26ae94da66dd24f59e175948d55f3 has failed:
```
On branch mergify/bp/version-15-hotfix/pr-44489
Your branch is up to date with 'origin/version-15-hotfix'.

You are currently cherry-picking commit c9088f4955.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	new file:   erpnext/patches/v15_0/refactor_closing_stock_balance.py
	modified:   erpnext/stock/doctype/inventory_dimension/inventory_dimension.py
	modified:   erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py
	modified:   erpnext/stock/doctype/repost_item_valuation/test_repost_item_valuation.py
	renamed:    erpnext/stock/doctype/closing_stock_balance/__init__.py -> erpnext/stock/doctype/stock_closing_balance/__init__.py
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.js
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.json
	new file:   erpnext/stock/doctype/stock_closing_balance/stock_closing_balance.py
	new file:   erpnext/stock/doctype/stock_closing_balance/test_stock_closing_balance.py
	new file:   erpnext/stock/doctype/stock_closing_entry/__init__.py
	renamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.js -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.js
	renamed:    erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.json -> erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.json
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry.py
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_dashboard.py
	new file:   erpnext/stock/doctype/stock_closing_entry/stock_closing_entry_list.js
	new file:   erpnext/stock/doctype/stock_closing_entry/test_stock_closing_entry.py
	modified:   erpnext/stock/report/stock_balance/stock_balance.py

Unmerged paths:
  (use ""git add/rm <file>..."" as appropriate to mark resolution)
	both modified:   erpnext/patches.txt
	deleted by them: erpnext/stock/doctype/closing_stock_balance/closing_stock_balance.py
	deleted by them: erpnext/stock/doctype/closing_stock_balance/test_closing_stock_balance.py
	both modified:   erpnext/stock/report/batch_wise_balance_history/batch_wise_balance_history.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

"
2817409473,pull_request,closed,,fix: handling company in bank reconciliation tool,"**Issue:**
In **Bank Reconciliation Tool**, `company`  field is not loaded with the default company value. 
So, API call made on selecting the `Bank Account` throws error for missing value of `company`.


![Screenshot from 2025-01-29 13-44-34](https://github.com/user-attachments/assets/8df17355-8624-468c-873e-1633207c2332)
*Default Company is not loaded when opening Bank Reconciliation Tool*

![Screenshot from 2025-01-29 13-46-20](https://github.com/user-attachments/assets/a6302c19-b08f-46df-aed2-6c1db0b7df9c)
*An error is thrown when selecting Bank Account*

**Reference:**
https://github.com/frappe/erpnext/blob/d748b491ee2bbb2967175f58e1b04f5c2eda4722/erpnext/accounts/doctype/payment_reconciliation/payment_reconciliation.js#L9


backport version-14
backport version-15",aayush7908,2025-01-29 07:05:23+00:00,['aayush7908'],2025-02-04 11:44:01+00:00,2025-02-04 11:44:01+00:00,https://github.com/frappe/erpnext/pull/45582,"[('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2817389691,pull_request,closed,,fix: return qty error due to precision (backport #45536),Internal Ticket Ref: https://support.frappe.io/helpdesk/my-tickets/30302<hr>This is an automatic backport of pull request #45536 done by [Mergify](https://mergify.com).,mergify[bot],2025-01-29 06:50:57+00:00,[],2025-01-29 07:16:46+00:00,2025-01-29 07:16:44+00:00,https://github.com/frappe/erpnext/pull/45581,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2817388565,pull_request,closed,,fix: add multiple item issue in stock entry (backport #45544),"Support Ticket: https://support.frappe.io/helpdesk/tickets/28771

When a barcode is set for an item, adding multiple items sets the item quantity to 1 in the Stock Entry.

> Screenshots/GIFs

Before

https://github.com/user-attachments/assets/c8e7703c-2226-42e7-9e47-3427f0edfe0f


After

https://github.com/user-attachments/assets/8c4e19c1-ad0c-4a30-a4f4-4252b8c8d201


<hr>This is an automatic backport of pull request #45544 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 06:50:02+00:00,['iamejaaz'],2025-01-29 07:15:36+00:00,2025-01-29 07:15:34+00:00,https://github.com/frappe/erpnext/pull/45580,[],[],
2817388510,pull_request,closed,,fix: add multiple item issue in stock entry (backport #45544),"Support Ticket: https://support.frappe.io/helpdesk/tickets/28771

When a barcode is set for an item, adding multiple items sets the item quantity to 1 in the Stock Entry.

> Screenshots/GIFs

Before

https://github.com/user-attachments/assets/c8e7703c-2226-42e7-9e47-3427f0edfe0f


After

https://github.com/user-attachments/assets/8c4e19c1-ad0c-4a30-a4f4-4252b8c8d201


<hr>This is an automatic backport of pull request #45544 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 06:50:00+00:00,['iamejaaz'],2025-01-29 11:30:59+00:00,2025-01-29 07:15:49+00:00,https://github.com/frappe/erpnext/pull/45579,"[('released', None)]","[{'comment_id': 2621389772, 'issue_id': 2817388510, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 48, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-29 11:30:48 UTC): :tada: This PR is included in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2817385911,pull_request,closed,,fix: get stock balance filtered by company for validating stock value in jv (backport #45549),"Issue: stock account validation is not working in the Journal Voucher.

Steps to Replicate:
- Create two companies A and B with only a single stock account.
- Create a Stock Transaction in company A to change stock value.
- Create a Journal Entry in Company B with the stock account.

Validation will not be raised even though the stock account is used because the stock balance will be for all the companies.


Fix:
get stock balance filtered by company.

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/29844

backport version-15
backport version-14





<hr>This is an automatic backport of pull request #45549 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 06:48:07+00:00,['ljain112'],2025-01-29 10:09:31+00:00,2025-01-29 10:09:30+00:00,https://github.com/frappe/erpnext/pull/45578,"[('accounts', ''), ('stock', None)]","[{'comment_id': 2620915140, 'issue_id': 2817385911, 'author': 'nabinhait', 'body': '@Mergifyio update', 'created_at': datetime.datetime(2025, 1, 29, 7, 48, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620915836, 'issue_id': 2817385911, 'author': 'mergify[bot]', 'body': '> update\n\n#### ✅ Branch has been successfully updated\n\n\n\n<!---\nDO NOT EDIT\n-*- Mergify Payload -*-\n{""command"": ""update"", ""conclusion"": ""success"", ""action_is_running"": true}\n-*- Mergify Payload End -*-\n-->', 'created_at': datetime.datetime(2025, 1, 29, 7, 49, 19, tzinfo=datetime.timezone.utc)}]","nabinhait on (2025-01-29 07:48:49 UTC): @Mergifyio update

mergify[bot] (Issue Creator) on (2025-01-29 07:49:19 UTC): #### ✅ Branch has been successfully updated



<!---
DO NOT EDIT
-*- Mergify Payload -*-
{""command"": ""update"", ""conclusion"": ""success"", ""action_is_running"": true}
-*- Mergify Payload End -*-
-->

"
2817385845,pull_request,closed,,fix: get stock balance filtered by company for validating stock value in jv (backport #45549),"Issue: stock account validation is not working in the Journal Voucher.

Steps to Replicate:
- Create two companies A and B with only a single stock account.
- Create a Stock Transaction in company A to change stock value.
- Create a Journal Entry in Company B with the stock account.

Validation will not be raised even though the stock account is used because the stock balance will be for all the companies.


Fix:
get stock balance filtered by company.

Frappe Support Issue: https://support.frappe.io/app/hd-ticket/29844

backport version-15
backport version-14





<hr>This is an automatic backport of pull request #45549 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-29 06:48:05+00:00,['ljain112'],2025-01-29 11:30:58+00:00,2025-01-29 07:16:13+00:00,https://github.com/frappe/erpnext/pull/45577,"[('accounts', ''), ('stock', None), ('released', None)]","[{'comment_id': 2620839752, 'issue_id': 2817385845, 'author': 'mergify[bot]', 'body': 'Cherry-pick of 9f20854bd9da74412cb220ce2caa2e246b9cf169 has failed:\n```\nOn branch mergify/bp/version-14-hotfix/pr-45549\nYour branch is up to date with \'origin/version-14-hotfix\'.\n\nYou are currently cherry-picking commit 9f20854bd9.\n  (fix conflicts and run ""git cherry-pick --continue"")\n  (use ""git cherry-pick --skip"" to skip this patch)\n  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)\n\nChanges to be committed:\n\tmodified:   erpnext/accounts/utils.py\n\tmodified:   erpnext/stock/utils.py\n\nUnmerged paths:\n  (use ""git add <file>..."" to mark resolution)\n\tboth modified:   erpnext/accounts/doctype/journal_entry/test_journal_entry.py\n\n```\n\n\nTo fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally', 'created_at': datetime.datetime(2025, 1, 29, 6, 48, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621389657, 'issue_id': 2817385845, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 45, tzinfo=datetime.timezone.utc)}]","mergify[bot] (Issue Creator) on (2025-01-29 06:48:07 UTC): Cherry-pick of 9f20854bd9da74412cb220ce2caa2e246b9cf169 has failed:
```
On branch mergify/bp/version-14-hotfix/pr-45549
Your branch is up to date with 'origin/version-14-hotfix'.

You are currently cherry-picking commit 9f20854bd9.
  (fix conflicts and run ""git cherry-pick --continue"")
  (use ""git cherry-pick --skip"" to skip this patch)
  (use ""git cherry-pick --abort"" to cancel the cherry-pick operation)

Changes to be committed:
	modified:   erpnext/accounts/utils.py
	modified:   erpnext/stock/utils.py

Unmerged paths:
  (use ""git add <file>..."" to mark resolution)
	both modified:   erpnext/accounts/doctype/journal_entry/test_journal_entry.py

```


To fix up this pull request, you can check it out locally. See documentation: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally

frappe-pr-bot on (2025-01-29 11:30:45 UTC): :tada: This PR is included in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2816775815,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-01-28 21:44:48+00:00,['ruthra-kumar'],2025-01-29 05:55:45+00:00,2025-01-29 05:55:44+00:00,https://github.com/frappe/erpnext/pull/45575,"[('translation', None)]",[],
2816435750,pull_request,open,,fix: use stock qty in packing slip,"**Issue:**
When the delivery note is created with a different uom for an item, the packing slip is always made with the stock uom. So there is a difference in qty
ref: [30145](https://support.frappe.io/helpdesk/tickets/30145)

**Item:**
![Image](https://github.com/user-attachments/assets/b94ea292-f1aa-415d-8657-dfdb033b96f5)

![Image](https://github.com/user-attachments/assets/8ecbe572-c804-42ce-8936-a12fcd022754)

**Delivery Note:**
![Image](https://github.com/user-attachments/assets/e8899c6d-12d9-4116-90e5-2ec96f615190)

**Before:**
![Image](https://github.com/user-attachments/assets/7e2f0fe1-5ab0-4ad2-bf70-814dee2079d3)

**After:**
![image](https://github.com/user-attachments/assets/d6a032d6-c8fe-4263-ba0a-bd1c08c25af8)


Backport needed for v15",venkat102,2025-01-28 18:28:09+00:00,[],2025-02-03 07:22:50+00:00,,https://github.com/frappe/erpnext/pull/45573,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2815789414,pull_request,closed,,fix: remove canceled purchase invoice from tax_withheld_vouchers,"**Issue:**
While updating the cost center after the document was submitted, getting an error as one of the invoices from the tax_withheld_vouchers was canceled
**ref:** [30104](https://support.frappe.io/helpdesk/tickets/30104)

**Steps to reproduce:**
- Create a Purchase Invoice with TDS
- Cancel one of the invoices from the Tax Withheld Vouchers table
- Change any accounting dimension and update it

![image](https://github.com/user-attachments/assets/3b0dfab8-ccf6-482c-9957-097dadb1335a)

![image](https://github.com/user-attachments/assets/c5707c6b-6655-4b60-b0b0-32a01e143b25)

![image](https://github.com/user-attachments/assets/293f34ef-37ce-4a8f-b3cc-c53ce1d49ce8)


**Backport needed for v14 & v15**

",venkat102,2025-01-28 14:09:18+00:00,['ruthra-kumar'],2025-02-05 13:31:24+00:00,2025-02-05 13:31:23+00:00,https://github.com/frappe/erpnext/pull/45570,"[('needs-tests', 'This PR needs automated unit-tests.')]","[{'comment_id': 2620687071, 'issue_id': 2815789414, 'author': 'ljain112', 'body': 'If we remove the row it will be impossible to determine from which vouchers tds is calculated.\r\n\r\nIn my opinion cancelled docs should be ignored while saving the doc or we can change fieldtype to Data', 'created_at': datetime.datetime(2025, 1, 29, 4, 16, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623588901, 'issue_id': 2815789414, 'author': 'venkat102', 'body': ""> If we remove the row it will be impossible to determine from which voucher tds is calculated.\r\n> \r\n> In my opinion cancelled docs should be ignored while saving the doc or we can change the field type to Data\r\n\r\nThanks for sharing your thoughts. Initially, I considered ignoring those fields, but because the validation is from [frappe](https://github.com/frappe/frappe/blob/0612c011dc2a5ce75037726c1ba4a28a60cb68ef/frappe/model/document.py#L1051), there is no option to ignore a specific field. I'll revise the PR by changing the fieldtype to Data."", 'created_at': datetime.datetime(2025, 1, 30, 6, 2, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636863531, 'issue_id': 2815789414, 'author': 'venkat102', 'body': 'closing this, and opening a new PR #45751', 'created_at': datetime.datetime(2025, 2, 5, 13, 31, 23, tzinfo=datetime.timezone.utc)}]","ljain112 on (2025-01-29 04:16:30 UTC): If we remove the row it will be impossible to determine from which vouchers tds is calculated.

In my opinion cancelled docs should be ignored while saving the doc or we can change fieldtype to Data

venkat102 (Issue Creator) on (2025-01-30 06:02:27 UTC): Thanks for sharing your thoughts. Initially, I considered ignoring those fields, but because the validation is from [frappe](https://github.com/frappe/frappe/blob/0612c011dc2a5ce75037726c1ba4a28a60cb68ef/frappe/model/document.py#L1051), there is no option to ignore a specific field. I'll revise the PR by changing the fieldtype to Data.

venkat102 (Issue Creator) on (2025-02-05 13:31:23 UTC): closing this, and opening a new PR #45751

"
2815507445,pull_request,closed,,fix: update voucher outstanding from payment ledger,"Issue: Outstanding getting reset on Repost Accounting Ledger/Item Valuation Repost for invoices with the following cases:
- self.is_pos (Paid Invoice)
- self.write_off_account 
- self.redeem_loyalty_points

Steps to Replicate:
- Create a Sales Invoice with ""is_pos"" as checked and the payment amount as 0.
- Create a separate Payment Entry for the same amount without thte reference document.
- Now manually reconcile using the Payment Reconciliation Tool.
- Now Repost Accounting Ledger for the Sales Invoice.

Outstanding will be reset because it is getting set on the basis of GL Entry Against Voucher which is already deprecated and Payment Ledger Entries are used for outstanding.

Frappe Support Issue: 
- https://support.frappe.io/app/hd-ticket/29063
- https://support.frappe.io/app/hd-ticket/19952

backport version-14
backport version-15

 

",ljain112,2025-01-28 12:24:51+00:00,['ruthra-kumar'],2025-01-29 10:41:02+00:00,2025-01-29 10:41:02+00:00,https://github.com/frappe/erpnext/pull/45569,"[('needs-tests', 'This PR needs automated unit-tests.'), ('backport version-14-hotfix', 'backport to version 14'), ('backport version-15-hotfix', '')]",[],
2815100792,pull_request,closed,,chore: release v14,Automated weekly release.,frappe-pr-bot,2025-01-28 09:37:36+00:00,[],2025-01-29 11:30:56+00:00,2025-01-29 11:28:58+00:00,https://github.com/frappe/erpnext/pull/45567,"[('accounts', ''), ('released', None)]","[{'comment_id': 2621389411, 'issue_id': 2815100792, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 39, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot (Issue Creator) on (2025-01-29 11:30:39 UTC): :tada: This PR is included in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2815100484,pull_request,closed,,chore: release v15,Automated weekly release.,frappe-pr-bot,2025-01-28 09:37:27+00:00,[],2025-01-29 11:27:30+00:00,2025-01-29 11:27:30+00:00,https://github.com/frappe/erpnext/pull/45566,"[('accounts', ''), ('stock', None), ('selling', None)]",[],
2815076278,pull_request,closed,,ci: trigger,"<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",ruthra-kumar,2025-01-28 09:25:59+00:00,[],2025-01-28 10:25:00+00:00,2025-01-28 10:25:00+00:00,https://github.com/frappe/erpnext/pull/45564,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2815031164,pull_request,closed,,fix(payment entry): get amount in transaction currency (backport #45452),"**Issue:**
Transaction currency is not showing properly in the General Ledger
**ref:** [29894](https://support.frappe.io/helpdesk/tickets/29894)

**Before:**
![image](https://github.com/user-attachments/assets/ec999fd1-ab5f-45dc-9715-2a4712b54bff)

**After:**
![image](https://github.com/user-attachments/assets/380d4608-c554-4880-b911-c2bb71c2567b)

**Backport needed for v15**<hr>This is an automatic backport of pull request #45452 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-28 09:04:40+00:00,['ruthra-kumar'],2025-01-28 09:26:53+00:00,2025-01-28 09:26:51+00:00,https://github.com/frappe/erpnext/pull/45563,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2814722120,pull_request,closed,,chore: rename file to standard name format,Added in: https://github.com/frappe/erpnext/pull/45551,ruthra-kumar,2025-01-28 06:10:16+00:00,['ruthra-kumar'],2025-01-28 10:33:20+00:00,2025-01-28 10:33:20+00:00,https://github.com/frappe/erpnext/pull/45560,[],[],
2814715225,pull_request,closed,,feat: Add chart of accounts for Switzerland (backport #45551),"This chart of account has been created using the official documentation. Available in German.

https://www.kmu.admin.ch/dam/kmu/de/dokumente/savoir-pratique/Finances/240812%20Schulkontenrahmen%20VEB%20-%20DE.pdf.download.pdf/240812%20Schulkontenrahmen%20VEB%20-%20DE.pdf

This is to ensure there is a default chart of accounts when Switzerland is selected.

`no-docs`<hr>This is an automatic backport of pull request #45551 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-28 06:04:41+00:00,[],2025-01-28 06:29:43+00:00,2025-01-28 06:29:41+00:00,https://github.com/frappe/erpnext/pull/45558,[],[],
2814707222,pull_request,closed,,fix: update fields on change of item code In `Update Items` of `Sales Order` (backport #45125),"Issue: [Support Ticket  - 28625](https://support.frappe.io/helpdesk/tickets/28625)

**Depends on Frappe Fix** : Currently, this.doc is not updating correctly after one update.
As Shown in screenshot on change of 3rd row this.doc contains value for last row that was added.
<img width=""734"" alt=""Screenshot 2025-01-07 at 11 38 15 AM"" src=""https://github.com/user-attachments/assets/64903a84-55bc-48d8-992f-343ba7208812"" />


**What This PR Does**
This PR addresses the support issue of updating the rate and other fields if they are already set for the items, but due to a Frappe bug where doc.idx does not update correctly for multiple rows, the functionality currently works for a single row only. Once the Frappe fix is implemented, it will work perfectly for all rows.

Additionally, due to this same bug, the UOM update functionality, which is already written, is also not functioning correctly for multiple rows.<hr>This is an automatic backport of pull request #45125 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-28 05:58:30+00:00,[],2025-01-28 06:02:20+00:00,2025-01-28 06:02:18+00:00,https://github.com/frappe/erpnext/pull/45557,[],[],
2814707190,pull_request,closed,,fix: update fields on change of item code In `Update Items` of `Sales Order` (backport #45125),"Issue: [Support Ticket  - 28625](https://support.frappe.io/helpdesk/tickets/28625)

**Depends on Frappe Fix** : Currently, this.doc is not updating correctly after one update.
As Shown in screenshot on change of 3rd row this.doc contains value for last row that was added.
<img width=""734"" alt=""Screenshot 2025-01-07 at 11 38 15 AM"" src=""https://github.com/user-attachments/assets/64903a84-55bc-48d8-992f-343ba7208812"" />


**What This PR Does**
This PR addresses the support issue of updating the rate and other fields if they are already set for the items, but due to a Frappe bug where doc.idx does not update correctly for multiple rows, the functionality currently works for a single row only. Once the Frappe fix is implemented, it will work perfectly for all rows.

Additionally, due to this same bug, the UOM update functionality, which is already written, is also not functioning correctly for multiple rows.<hr>This is an automatic backport of pull request #45125 done by [Mergify](https://mergify.com).",mergify[bot],2025-01-28 05:58:29+00:00,[],2025-01-29 11:31:01+00:00,2025-01-28 06:02:09+00:00,https://github.com/frappe/erpnext/pull/45556,"[('released', None)]","[{'comment_id': 2621389995, 'issue_id': 2814707190, 'author': 'frappe-pr-bot', 'body': ':tada: This PR is included in version 14.81.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 54, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2025-01-29 11:30:54 UTC): :tada: This PR is included in version 14.81.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.81.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2814698791,pull_request,open,,fix: validate advance amount in company currency,"Issue:
Unable to create purchase invoice with the advance amount in foreign currency due to minor precision loss

Ref: [26967](https://support.frappe.io/helpdesk/tickets/26967)

Payment:

![purchase_advance_payment](https://github.com/user-attachments/assets/80291704-886c-47ff-8790-59557cb0a51a)

Invoice:

![purchase_invoice_v](https://github.com/user-attachments/assets/d30c5b56-c036-4bf1-92e2-73af65349b37)

Error:

![purchase_error](https://github.com/user-attachments/assets/944ecf13-3695-4b7d-98a2-016e85f80b36)

invoice amount - 80.445
exchange rate - 0.104950000

80.445/0.104950000 = 766.5078608861362
766.5078608861362 * 0.104950000 = 80.445

but since it is being rounded with field precision 766.50 * 0.104950000 = 80.444175
so the condition 80.445 > 80.444175 is passed

Back-port needed for v15",Sugesh393,2025-01-28 05:52:29+00:00,[],2025-01-28 05:52:40+00:00,,https://github.com/frappe/erpnext/pull/45555,"[('accounts', ''), ('needs-tests', 'This PR needs automated unit-tests.')]",[],
2814687945,pull_request,closed,,fix(book_appointment): stop trying to use pytz api with zoneinfo,"Followup to #44604
<hr>

Somehow missed changing these spots - thanks @barredterra for pointing out.
",akhilnarang,2025-01-28 05:43:40+00:00,['ruthra-kumar'],2025-01-28 10:55:28+00:00,2025-01-28 10:55:28+00:00,https://github.com/frappe/erpnext/pull/45554,"[('needs-tests', 'This PR needs automated unit-tests.')]",[],
2814327622,pull_request,open,,fix: alternate item not getting updated in work order,"Incorrect field referred in the update qty in snot present in work order item

<!--

Some key notes before you open a PR:

 1. Select which branch should this PR be merged in?
 2. PR name follows [convention](http://karma-runner.github.io/4.0/dev/git-commit-msg.html)
 3. All tests pass locally, UI and Unit tests
 4. All business logic and validations must be on the server-side
 5. Update necessary Documentation
 6. Put `closes #XXXX` in your comment to auto-close the issue that your PR fixes


Also, if you're new here

- Documentation Guidelines => https://github.com/frappe/erpnext/wiki/Updating-Documentation

- Contribution Guide => https://github.com/frappe/erpnext/blob/develop/.github/CONTRIBUTING.md

- Pull Request Checklist => https://github.com/frappe/erpnext/wiki/Pull-Request-Checklist

-->

> Please provide enough information so that others can review your pull request:

<!-- You can skip this if you're fixing a typo or updating existing documentation -->

> Explain the **details** for making this change. What existing problem does the pull request solve?

<!-- Example: When ""Adding a function to do X"", explain why it is necessary to have a way to do X. -->

> Screenshots/GIFs

<!-- Add images/recordings to better visualize the change: expected/current behviour -->
",govindsmenokee,2025-01-28 00:10:23+00:00,['nabinhait'],2025-01-29 07:39:36+00:00,,https://github.com/frappe/erpnext/pull/45553,[],[],
2814106195,pull_request,closed,,fix: sync translations from crowdin,,frappe-pr-bot,2025-01-27 21:34:08+00:00,['ruthra-kumar'],2025-01-28 05:33:51+00:00,2025-01-28 05:33:49+00:00,https://github.com/frappe/erpnext/pull/45552,"[('translation', None)]",[],
