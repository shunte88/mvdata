id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2330062537,issue,open,,Work Order add UOM on the Required Items Table,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
To have a full picture of item on the Work Order.

**Describe the solution you'd like**
Add the UOM on the item table of the work order. However, I am not sure if the UOM will be from the BOM or item record?
<img width=""1228"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/60758795/c2e1f000-0483-4f90-af58-98cba14e2550"">


",Ponyooooo,2024-06-03 02:59:53+00:00,[],2024-06-03 02:59:53+00:00,,https://github.com/frappe/erpnext/issues/41726,"[('feature-request', None)]",[],
2329952222,issue,open,,Add option to set the number for the of days of the periodicity of Asset Maintenance in Asset Module.,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->
**No options to set a specific days of periodicity**
Currently the ERPNext Asset Maintenance only has the periodicity options of daily, weekly, monthly, and etc.
![image](https://github.com/frappe/erpnext/assets/93438531/faf7179e-7f07-4f55-b8ac-e1a554353323)
 but there are cases where some Companies' assets have a specific number of days like 10 days for example before it is due for another maintenance.

The option to set a specific days of periodicity should be available for these cases.",quebn,2024-06-03 00:44:09+00:00,[],2024-06-03 00:44:31+00:00,,https://github.com/frappe/erpnext/issues/41725,"[('feature-request', None)]",[],
2329830620,issue,closed,completed,Sales invoice import on erpnext cloud returns error - quantity cannot be zero,"### Information about bug

I have ordered a trial ERPNext cloud system. I have entered 3-4 invoices (sales invoices) with already existing data (product, customer,etc).
I tried to test the import of transactions from file.

So I do the following steps:
Navigate to import/export:
https://testYYYY.erpnext.com/app/data-import/

I chosed to download template with data (5 transactions and all required fields).
Then I clear the values in ID column in order during the import to create new sales invoice transactions.
Whatever format I choose (csv or Excel) , when I upload the file back I get the following error:


> ""Invalid Quantity
> Row #1: Item quantity cannot be zero""


`Traceback (most recent call last):
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 149, in import_data
    doc = self.process_doc(doc)
          ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 251, in process_doc
    return self.insert_record(doc)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 270, in insert_record
    new_doc.insert()
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 266, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/selling_controller.py"", line 29, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/stock_controller.py"", line 52, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 171, in validate
    self.validate_qty_is_not_zero()
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 1094, in validate_qty_is_not_zero
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
erpnext.controllers.accounts_controller.InvalidQtyError: Row #1: Item quantity cannot be zero`

Then I decided to download all fields and upload them back (just clear the ID field in order to create new sales invoice the same as downloaded one with the template). I get the same error:

> ""Invalid Quantity
> Row #1: Item quantity cannot be zero""

The quantity fields are filled with values. Seems like the error is somewhere else reflecting at the end of this error.


### Module

selling

### Version

latest ERPNext cloud:
ERPNext: v15.26.0 (HEAD)
Frappe Framework: v15.29.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 149, in import_data
    doc = self.process_doc(doc)
          ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 251, in process_doc
    return self.insert_record(doc)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 270, in insert_record
    new_doc.insert()
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 266, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/selling_controller.py"", line 29, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/stock_controller.py"", line 52, in validate
    super().validate()
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 171, in validate
    self.validate_qty_is_not_zero()
  File ""apps/erpnext/erpnext/controllers/accounts_controller.py"", line 1094, in validate_qty_is_not_zero
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
erpnext.controllers.accounts_controller.InvalidQtyError: Row #1: Item quantity cannot be zero
```
",alex-g-s,2024-06-02 19:36:17+00:00,[],2024-06-18 00:09:24+00:00,2024-06-03 07:31:47+00:00,https://github.com/frappe/erpnext/issues/41724,"[('bug', None)]","[{'comment_id': 2144474891, 'issue_id': 2329830620, 'author': 'Nihantra-Patel', 'body': 'Again, check the qty in file,  everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/8b667182-369a-4ab1-bd54-42c6347850f8', 'created_at': datetime.datetime(2024, 6, 3, 7, 31, 47, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-06-03 07:31:47 UTC): Again, check the qty in file,  everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/8b667182-369a-4ab1-bd54-42c6347850f8

"
2329159636,issue,open,,Subcontracting Receipt Rejected Quantity Stock Ledger Issue,"### Information about bug

In the subcontracting process, there is a discrepancy in the recorded stock quantities when materials are rejected. When 200 qty of material is transferred to a subcontractor, the subcontracting receipt indicates that 100 qty were accepted and 100 qty were rejected. However, the ERP system incorrectly calculates the stock quantities as follows:

100 qty in the accepted warehouse
100 qty in the rejected warehouse
100 qty still in the supplier warehouse
This results in a total of 300 qty being recorded in the system instead of the actual 200 qty transferred, leading to an overstatement of inventory by 100 qty. The system should ideally deduct the rejected quantity from the supplier warehouse to accurately reflect the total transferred quantity.

**Subcontracting Order** 

<img width=""944"" alt=""Subcontracting Order"" src=""https://github.com/frappe/erpnext/assets/75109236/052e77e7-099a-403b-8e49-c262a63d03f8"">

**Material Transfer **

<img width=""941"" alt=""Material Transfer"" src=""https://github.com/frappe/erpnext/assets/75109236/b543ae71-6e2c-485b-9804-8df041d4eb05"">


**Subcontracting Rejected Qty Entry **

<img width=""938"" alt=""Subcontracting Receipt"" src=""https://github.com/frappe/erpnext/assets/75109236/62544f3c-3e6d-42f1-892e-40abcdd476b6"">

**Stock Ledger**

<img width=""944"" alt=""Stock Entry"" src=""https://github.com/frappe/erpnext/assets/75109236/7954ea98-653f-4364-b0d3-e42958a5a98b"">


### Module

stock, buying

### Version

ERPNext: v15.22.1 (version-15)
Frappe Framework: v15.25.0 (version-15)
Frappe HR: v15.20.2 (version-15)
India Compliance: v15.7.4 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",sowndharya998,2024-06-01 13:57:44+00:00,[],2024-06-01 13:57:44+00:00,,https://github.com/frappe/erpnext/issues/41716,"[('bug', None)]",[],
2329129187,issue,closed,completed,"When we try to submit Purchase invoice we get this error ""Please set default Asset Received But Not Billed in Company""","### Information about bug

When we try to submit the purchase invoice after creating the purchase receipt. We get this error "" Please set default Asset Received But Not Billed in Company"" . Where we have the default asset is set for the same account. 

This has started happening after the 29/05/2024 update. 

### Module

buying

### Version


ERPNext: v15.26.0 (HEAD)

Frappe Framework: v15.29.0 (HEAD)



### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",vittitrade,2024-06-01 12:57:11+00:00,[],2024-06-18 00:09:21+00:00,2024-06-03 05:12:28+00:00,https://github.com/frappe/erpnext/issues/41715,"[('bug', None)]","[{'comment_id': 2143553743, 'issue_id': 2329129187, 'author': 'ahmad-91', 'body': 'yes you should select one', 'created_at': datetime.datetime(2024, 6, 1, 19, 12, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2143862114, 'issue_id': 2329129187, 'author': 'fadilsiddique', 'body': '> ### Information about bug\r\n> When we try to submit the purchase invoice after creating the purchase receipt. We get this error "" Please set default Asset Received But Not Billed in Company"" . Where we have the default asset is set for the same account.\r\n> \r\n> This has started happening after the 29/05/2024 update.\r\n> \r\n> ### Module\r\n> buying\r\n> \r\n> ### Version\r\n> ERPNext: v15.26.0 (HEAD)\r\n> \r\n> Frappe Framework: v15.29.0 (HEAD)\r\n> \r\n> ### Installation method\r\n> FrappeCloud\r\n> \r\n> ### Relevant log output / Stack trace / Full Error Message.\r\n> _No response_\r\n\r\n\r\ncheck this \r\nhttps://github.com/frappe/erpnext/issues/41684#issuecomment-2138869707', 'created_at': datetime.datetime(2024, 6, 2, 13, 52, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144295442, 'issue_id': 2329129187, 'author': 'Nihantra-Patel', 'body': 'Please check this PR: https://github.com/frappe/erpnext/pull/41368\r\n\r\nNow you have to set the default accounts in the company.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/51936262-dc14-4187-8ebe-ec868bac971d)', 'created_at': datetime.datetime(2024, 6, 3, 5, 12, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144734446, 'issue_id': 2329129187, 'author': 'Nihantra-Patel', 'body': 'fix the issue: https://github.com/frappe/erpnext/pull/41734', 'created_at': datetime.datetime(2024, 6, 3, 9, 34, 45, tzinfo=datetime.timezone.utc)}]","ahmad-91 on (2024-06-01 19:12:56 UTC): yes you should select one

fadilsiddique on (2024-06-02 13:52:11 UTC): check this 
https://github.com/frappe/erpnext/issues/41684#issuecomment-2138869707

Nihantra-Patel on (2024-06-03 05:12:28 UTC): Please check this PR: https://github.com/frappe/erpnext/pull/41368

Now you have to set the default accounts in the company.

![image](https://github.com/frappe/erpnext/assets/141945075/51936262-dc14-4187-8ebe-ec868bac971d)

Nihantra-Patel on (2024-06-03 09:34:45 UTC): fix the issue: https://github.com/frappe/erpnext/pull/41734

"
2328940670,issue,open,,issue in additional discount for Delivery and Invoice,"### Information about bug

When there are multiple sales orders created with different Additional discount amount or percentage and single delivery note is created from all the given sales orders the delivery note is not distributing the discount added in each sales order. it will only fetch the discount added in last sales order and apply it on consolidated delivery note. which will give totally different value when you create invoice from delivery note. 

refer below the total additional discount value is 12139
![image](https://github.com/frappe/erpnext/assets/112148467/472c5909-dcf1-44ad-b567-82bd17b20947)

Same issue persists when you create single invoices from multiple sales orders with different discount values.

and when the consolidated delivery note is created
it is taking value from last sales order and adds it as additional discount.



### Module

accounts, stock, selling

### Version

V14 and V15


### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",maveezmh,2024-06-01 06:01:37+00:00,['rohitwaghchaure'],2024-06-01 06:21:44+00:00,,https://github.com/frappe/erpnext/issues/41711,"[('bug', None), ('valid', '')]",[],
2328923776,issue,closed,completed,Vendor rating details,"Hi  Sir/Madam

We would like to rate our vendors based on % delay and % defects.

 1.The % delay can be taken from “required by” date in PO vs “Supplier invoice date” in PI. ((Supplier invoice date - Required by)/Required by)*100

![3 (1)](https://github.com/frappe/erpnext/assets/75109236/3a6ea392-2054-459f-92af-b15bbb377c35)
![4 (1)](https://github.com/frappe/erpnext/assets/75109236/5ee9090d-af83-416b-b3e6-b9671161dcef)

2.      % defects can be taken from “received quantity” vs “rejected quantity” in PR. [((Rejected quantity for item1/Received quantity for item1)*100) + ((Rejected quantity for item2/Received quantity for item2)*100) + ((Rejected quantity for item N/Received quantity for item N)*100)]/N

![5(1)](https://github.com/frappe/erpnext/assets/75109236/382b5202-fdf0-4498-8f16-3408d9bbc25c)

 

Vendor rating = (% delay + % defect)/2
Excellent              -              100%
Good                    -              90% to 99%
Average               -              80% to 89%
Poor                     -              <80%

",sowndharya998,2024-06-01 05:22:17+00:00,[],2024-06-16 00:11:23+00:00,2024-06-01 05:28:58+00:00,https://github.com/frappe/erpnext/issues/41710,"[('feature-request', None)]",[],
2327198222,issue,closed,completed,Unable to open Supplier from supplier list,"### Information about bug

Unable to open Supplier from supplier list. 

### Module

buying

### Version

Frappe version - 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Amanthakur11111,2024-05-31 08:00:29+00:00,[],2024-06-15 00:08:30+00:00,2024-05-31 09:31:35+00:00,https://github.com/frappe/erpnext/issues/41705,"[('bug', None)]","[{'comment_id': 2141601554, 'issue_id': 2327198222, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest 15.\r\n\r\nPlease check it.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/aa264a11-38bf-4db4-bee7-c0f0d80ab742\r\n\r\nI think there will be problem in permission issue, check.', 'created_at': datetime.datetime(2024, 5, 31, 9, 31, 35, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-31 09:31:35 UTC): Everything is working fine. No problems were encountered in the latest 15.

Please check it.


https://github.com/frappe/erpnext/assets/141945075/aa264a11-38bf-4db4-bee7-c0f0d80ab742

I think there will be problem in permission issue, check.

"
2326795354,issue,closed,completed,Stock Recon with a Batched Item not allowing change of quantity from original stock value.,"### Information about bug

In erpnext version 15.26.1, When trying to stock reconcile an item, I would select all the basic fields such as item, warehouse, and batch value. ErpNext then goes ahead and calculates the stock balance and value. Great. 

But when I try to change the value, upon save ... it reverts back to the original stock balance. basically not allowing me to update the stock balance in teh stock reconciliation. Which is a problem.

### Module

stock

### Version

ERPNext Version - 15.26.1

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",ablashek,2024-05-31 01:19:39+00:00,[],2024-06-17 00:09:19+00:00,2024-06-02 22:13:08+00:00,https://github.com/frappe/erpnext/issues/41698,"[('bug', None)]","[{'comment_id': 2141282082, 'issue_id': 2326795354, 'author': 'Nihantra-Patel', 'body': 'Tested, worked properly.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/30c9af69-f21f-4ec1-ba82-637faacafc66', 'created_at': datetime.datetime(2024, 5, 31, 5, 55, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144005985, 'issue_id': 2326795354, 'author': 'ablashek', 'body': ""Hi @Nihantra-Patel \r\n\r\nYes, I can see in your video it works as it's supposed to. But Take a look at the video i am uploading. you can see how no matter if i increase or decrease the quanttiy the system reverts back to the original value.\r\n\r\n\r\nUploading Grabación 2024-06-02 160000 (1).mp4…"", 'created_at': datetime.datetime(2024, 6, 2, 20, 8, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144006465, 'issue_id': 2326795354, 'author': 'ablashek', 'body': 'https://github.com/frappe/erpnext/assets/85059961/4ad74f65-5098-41c0-96c1-c5fb0eb2100a', 'created_at': datetime.datetime(2024, 6, 2, 20, 9, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144038018, 'issue_id': 2326795354, 'author': 'ablashek', 'body': 'Ok, found what seems to be the issue. Version 15 has a new feature called Batch Bundle. I had to configure settings as per this documentation and it started working: \r\n\r\nhttps://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle', 'created_at': datetime.datetime(2024, 6, 2, 22, 13, 6, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-31 05:55:28 UTC): Tested, worked properly.


https://github.com/frappe/erpnext/assets/141945075/30c9af69-f21f-4ec1-ba82-637faacafc66

ablashek (Issue Creator) on (2024-06-02 20:08:24 UTC): Hi @Nihantra-Patel 

Yes, I can see in your video it works as it's supposed to. But Take a look at the video i am uploading. you can see how no matter if i increase or decrease the quanttiy the system reverts back to the original value.


Uploading Grabación 2024-06-02 160000 (1).mp4…

ablashek (Issue Creator) on (2024-06-02 20:09:52 UTC): https://github.com/frappe/erpnext/assets/85059961/4ad74f65-5098-41c0-96c1-c5fb0eb2100a

ablashek (Issue Creator) on (2024-06-02 22:13:06 UTC): Ok, found what seems to be the issue. Version 15 has a new feature called Batch Bundle. I had to configure settings as per this documentation and it started working: 

https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle

"
2326314767,issue,open,,"Add ""Promissory Notes"" Feature to ERPNext System","Description:
We propose adding a ""Promissory Notes"" feature to the ERPNext system to enable users to create and manage promissory notes for loans and other financial transactions. This feature should include fields for the principal amount, interest rate, maturity date, and repayment terms. Additionally, it should allow for linking promissory notes to specific customers or suppliers and provide reminders for upcoming payments. This feature would enhance the financial management capabilities of ERPNext, making it more comprehensive for businesses dealing with loans and credit transactions.

Example Use-Case Scenario:
Imagine a scenario where a company lends money to a customer and creates a promissory note using ERPNext. The system tracks the repayment schedule and sends reminders to both parties before each payment is due. This streamlined process ensures transparency and accountability in financial transactions.

![image](https://github.com/frappe/erpnext/assets/21114220/3225f7b3-9c7f-4e3c-9243-13a5ffff1de8)


Conclusion:
The addition of the ""Promissory Notes"" feature would be a valuable enhancement to ERPNext, providing users with a comprehensive tool for managing promissory notes and improving overall financial management efficiency.",edardev,2024-05-30 18:36:48+00:00,[],2024-05-30 18:36:48+00:00,,https://github.com/frappe/erpnext/issues/41697,"[('feature-request', None)]",[],
2326150623,issue,closed,completed,Unresolved #29048 – Cannot select company when adding a new account in Chart Of Accounts,"### Information about bug

See: https://github.com/frappe/erpnext/issues/29048

In a multi-company setup, when adding a new account from the list view, the **Company** field is grayed out (pre-filled with the default company). Adding via Tree view is still possible:

![image](https://github.com/frappe/erpnext/assets/28401247/0ea602be-750f-4feb-aac6-c5608807b0a0)

### Module

accounts

### Version

```
erpnext 15.19.0
erpnextswiss 1.23.2
frappe 15.20.0
hrms 15.16.0
payments 0.0.1
```

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",konradbr,2024-05-30 17:06:07+00:00,[],2024-06-22 00:08:56+00:00,2024-06-03 09:24:13+00:00,https://github.com/frappe/erpnext/issues/41695,"[('bug', None), ('accounts', ''), ('valid', ''), ('released', None)]","[{'comment_id': 2143324973, 'issue_id': 2326150623, 'author': 'hpotabatti', 'body': 'Hey @konradbr ,\r\n\r\nWhat is your expectation of the system?\r\nshould the system not auto-populate the default company or the system should allow the user to manually select a company?', 'created_at': datetime.datetime(2024, 6, 1, 6, 35, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2143350918, 'issue_id': 2326150623, 'author': 'konradbr', 'body': '@hpotabatti The field can auto-populate (based on session defaults?) or stay blank, but the system should always allow the user to change it. Having the account number field available and editable here would be great, too!', 'created_at': datetime.datetime(2024, 6, 1, 8, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2143508056, 'issue_id': 2326150623, 'author': 'dj12djdjs', 'body': 'This has been the case for a while, The problem is in account.json `account_number` is `read_only`. The system assumes everyone will create an account via the Chart of Accounts tree.\r\n\r\nAccount record creation should be the same using ""New Account"" and ""Add Child"".', 'created_at': datetime.datetime(2024, 6, 1, 16, 36, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144351487, 'issue_id': 2326150623, 'author': 'Nihantra-Patel', 'body': 'I raised the PR: https://github.com/frappe/erpnext/pull/41731.\r\n\r\nLet me know if I am forgetting anything. If PR is proper then upvote.', 'created_at': datetime.datetime(2024, 6, 3, 6, 8, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144440426, 'issue_id': 2326150623, 'author': 'konradbr', 'body': '@Nihantra-Patel perfect, thank you!', 'created_at': datetime.datetime(2024, 6, 3, 7, 11, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144448306, 'issue_id': 2326150623, 'author': 'konradbr', 'body': ""@Nihantra-Patel couldn't find option to upvote PR/message — not sure I'm not seeing the proper option / missing permissions, let me know, please, and I will be happy to do it :)"", 'created_at': datetime.datetime(2024, 6, 3, 7, 16, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144454465, 'issue_id': 2326150623, 'author': 'Nihantra-Patel', 'body': ""> not sure I'm not seeing the proper option / missing permissions\r\n\r\n😄 -> 👍 \r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/d7ab9029-9044-40b8-aaae-b43e038260bc)"", 'created_at': datetime.datetime(2024, 6, 3, 7, 19, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2148688221, 'issue_id': 2326150623, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 33, tzinfo=datetime.timezone.utc)}]","hpotabatti on (2024-06-01 06:35:43 UTC): Hey @konradbr ,

What is your expectation of the system?
should the system not auto-populate the default company or the system should allow the user to manually select a company?

konradbr (Issue Creator) on (2024-06-01 08:01:46 UTC): @hpotabatti The field can auto-populate (based on session defaults?) or stay blank, but the system should always allow the user to change it. Having the account number field available and editable here would be great, too!

dj12djdjs on (2024-06-01 16:36:40 UTC): This has been the case for a while, The problem is in account.json `account_number` is `read_only`. The system assumes everyone will create an account via the Chart of Accounts tree.

Account record creation should be the same using ""New Account"" and ""Add Child"".

Nihantra-Patel on (2024-06-03 06:08:47 UTC): I raised the PR: https://github.com/frappe/erpnext/pull/41731.

Let me know if I am forgetting anything. If PR is proper then upvote.

konradbr (Issue Creator) on (2024-06-03 07:11:30 UTC): @Nihantra-Patel perfect, thank you!

konradbr (Issue Creator) on (2024-06-03 07:16:14 UTC): @Nihantra-Patel couldn't find option to upvote PR/message — not sure I'm not seeing the proper option / missing permissions, let me know, please, and I will be happy to do it :)

Nihantra-Patel on (2024-06-03 07:19:56 UTC): 😄 -> 👍 

![image](https://github.com/frappe/erpnext/assets/141945075/d7ab9029-9044-40b8-aaae-b43e038260bc)

frappe-pr-bot on (2024-06-05 01:22:33 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2324787576,issue,closed,completed,"Saving Purchase Invoice Gives ""Please set default Asset Received But Not Billed in Company XXXX"" after latest update","### Information about bug

When trying to save Purchase Invoice, itGives ""Please set default Asset Received But Not Billed in Company xxxx"" after latest update. It wasnt there before and i'm not purchasing a fixed asset as this account head is for fixed assets.

![Screenshot from 2024-05-30 10-05-58](https://github.com/frappe/erpnext/assets/48912196/699e88e6-174d-4679-8cf7-63f3a0af00f2)


### Module

stock, buying

### Version

ERPNext: v15.26.0 (HEAD)

Frappe Framework: v15.29.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",fadilsiddique,2024-05-30 06:09:50+00:00,[],2024-06-14 00:08:40+00:00,2024-05-30 07:35:07+00:00,https://github.com/frappe/erpnext/issues/41684,"[('bug', None)]","[{'comment_id': 2138869707, 'issue_id': 2324787576, 'author': 'Nihantra-Patel', 'body': 'Please check this PR: https://github.com/frappe/erpnext/pull/41368\r\n\r\nNow you have to set the default accounts in the company.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/51936262-dc14-4187-8ebe-ec868bac971d)', 'created_at': datetime.datetime(2024, 5, 30, 7, 35, 7, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-30 07:35:07 UTC): Please check this PR: https://github.com/frappe/erpnext/pull/41368

Now you have to set the default accounts in the company.

![image](https://github.com/frappe/erpnext/assets/141945075/51936262-dc14-4187-8ebe-ec868bac971d)

"
2327036655,issue,closed,completed,Unreadable bug while importing data,"Error message when importing data through XLSX

![Screenshot 2024-05-30 at 11 14 08 AM](https://github.com/frappe/frappe/assets/167299936/f50e3f85-9192-4990-9c67-95dcf9d8cd12)


## Description of the issue

Only for Frappe team, this is the data import record, where you can access the file as well.

https://mohsin.frappe.cloud/app/data-import/Quotation%20Import%20on%202024-05-30%2011%3A13%3A33.270896

### Stacktrace / full error message

```
### App Versions
```
{
	""erpnext"": ""15.23.0"",
	""frappe"": ""15.26.0"",
	""hrms"": ""15.20.3"",
	""india_compliance"": ""15.7.4""
}
```
### Route
```
Form/Data Import/Quotation Import on 2024-05-30 11:13:33.270896
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/data_import.py"", line 56, in validate
    self.set_payload_count()
  File ""apps/frappe/frappe/core/doctype/data_import/data_import.py"", line 75, in set_payload_count
    payloads = i.import_file.get_payloads_for_import()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 519, in get_payloads_for_import
    doc, rows, data = self.parse_next_row_for_import(data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 555, in parse_next_row_for_import
    parent_doc = row.parse_doc(doctype)
                 ^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 652, in parse_doc
    return self._parse_doc(doctype, columns, values, parent_doc, table_df)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 675, in _parse_doc
    value = self.validate_value(value, col)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 730, in validate_value
    value = self.get_date(value, col)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/data_import/importer.py"", line 793, in get_date
    return datetime.strptime(value, date_format)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not int

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""Quotation Import on 2024-05-30 11:13:33.270896\"",\""owner\"":\""mohsin@frappe.io\"",\""creation\"":\""2024-05-30 11:13:33.270896\"",\""modified\"":\""2024-05-30 11:13:33.270896\"",\""modified_by\"":\""mohsin@frappe.io\"",\""docstatus\"":0,\""idx\"":0,\""reference_doctype\"":\""Quotation\"",\""import_type\"":\""Insert New Records\"",\""import_file\"":\""/private/files/Quotation-duo.xlsx\"",\""payload_count\"":0,\""google_sheets_url\"":null,\""status\"":\""Pending\"",\""submit_after_import\"":0,\""mute_emails\"":1,\""template_options\"":\""\"",\""template_warnings\"":\""\"",\""show_failed_logs\"":0,\""doctype\"":\""Data Import\"",\""__last_sync_on\"":\""2024-05-30T05:43:32.641Z\"",\""__unsaved\"":1}"",
		""action"": ""Save""
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": ""69f42fba-8ca8-4cb9-aed4-721a4f177bee""
}
```
### Response Data
```
{
	""exception"": ""TypeError: strptime() argument 1 must be str, not int"",
	""exc_type"": ""TypeError""
}
```
```
",akhtarmohsin,2024-05-30 05:46:38+00:00,[],2024-06-15 00:08:31+00:00,2024-05-31 06:14:06+00:00,https://github.com/frappe/erpnext/issues/41701,"[('bug', None)]","[{'comment_id': 2141297079, 'issue_id': 2327036655, 'author': 'akhtarmohsin', 'body': '[Quotation-duo.xlsx](https://github.com/frappe/frappe/files/15494264/Quotation-duo.xlsx)', 'created_at': datetime.datetime(2024, 5, 30, 5, 50, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2141301130, 'issue_id': 2327036655, 'author': 'Nihantra-Patel', 'body': 'It worked properly. The issue is with the date format. I used the same field to update the data and import the quotation, and the quotation imported successfully. Please check it.\r\n\r\n[Quotation-duo.xlsx](https://github.com/user-attachments/files/15509079/Quotation-duo.xlsx)\r\n\r\n<img width=""1440"" alt=""Screenshot 2024-05-31 at 11 42 19\u202fAM"" src=""https://github.com/frappe/erpnext/assets/141945075/810008b8-8881-43dc-b458-c314fbe7f8e7"">\r\n\r\n**Output:**\r\n\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/795cf96b-2ea2-4a56-83af-7ea78b74ff29)', 'created_at': datetime.datetime(2024, 5, 31, 6, 14, 6, tzinfo=datetime.timezone.utc)}]","akhtarmohsin (Issue Creator) on (2024-05-30 05:50:47 UTC): [Quotation-duo.xlsx](https://github.com/frappe/frappe/files/15494264/Quotation-duo.xlsx)

Nihantra-Patel on (2024-05-31 06:14:06 UTC): It worked properly. The issue is with the date format. I used the same field to update the data and import the quotation, and the quotation imported successfully. Please check it.

[Quotation-duo.xlsx](https://github.com/user-attachments/files/15509079/Quotation-duo.xlsx)

<img width=""1440"" alt=""Screenshot 2024-05-31 at 11 42 19 AM"" src=""https://github.com/frappe/erpnext/assets/141945075/810008b8-8881-43dc-b458-c314fbe7f8e7"">

**Output:**


![image](https://github.com/frappe/erpnext/assets/141945075/795cf96b-2ea2-4a56-83af-7ea78b74ff29)

"
2323479336,issue,closed,completed,Payment Entry Internal Transfer asks for party type (frappe.new_doc),"### Information about bug

Hi, 

to keep it short, this code generates an error `Party Type is mandatory`
it is just a balance transfer between company accounts.

Code:

```
@frappe.whitelist()
def transfer_accounts_balance(data):
    data = json.loads(data)

    for payment in data:
        # skip this iteration if 
        # paid amount == 0
        if payment[""paid_amount""] == 0:
            continue
        
        payment_mode_type = frappe.get_value(""Mode of Payment"",{
                                     ""name"": payment[""mode_of_payment""]
                                    }, [""type""])
        
        payment_doc = frappe.new_doc(""Payment Entry"")
        payment_doc.payment_type = ""Internal Transfer"",
        payment_doc.mode_of_payment = payment[""mode_of_payment""],
        payment_doc.posting_date = payment[""date""],
        payment_doc.reference_date = payment[""date""],
        payment_doc.company = payment[""company""],
        payment_doc.paid_from = payment[""from_account""],
        payment_doc.paid_to = payment[""to_account""],
        payment_doc.paid_amount = payment[""account_balance""],
        payment_doc.received_amount= payment[""paid_amount""],
        
        payment_doc.setup_party_account_field()
        payment_doc.set_missing_values()
        payment_doc.set_missing_ref_details()
        payment_doc.save()
```

### Module

accounts

### Version

ERPNext: v15.23.0 (version-15)
Frappe Framework: v15.26.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Madcheese101,2024-05-29 14:28:14+00:00,[],2024-06-13 00:08:59+00:00,2024-05-29 15:21:51+00:00,https://github.com/frappe/erpnext/issues/41681,"[('bug', None)]",[],
2323238648,issue,closed,completed,"Freeze Stocks Older Than (Days) resets to 356 if more than that, message not clear","### Information about bug

![CleanShot 2024-05-29 at 18 12 19@2x](https://github.com/frappe/erpnext/assets/34810212/47ed5be4-90ac-4bb9-acfb-5bd77bde8fdd)

Why is this `356`? Maybe some explanation of this number and also in the dialog we can mention that the field has been updated to the same.

### Module

stock

### Version

15.23.0

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",NagariaHussain,2024-05-29 12:45:08+00:00,[],2024-06-22 00:08:53+00:00,2024-06-03 09:33:29+00:00,https://github.com/frappe/erpnext/issues/41680,"[('bug', None), ('UX', ''), ('released', None)]","[{'comment_id': 2148688358, 'issue_id': 2323238648, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 42, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-05 01:22:42 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2322523782,issue,closed,completed,error: delivery link return response code: 500,"### Information about bug

solve the problem of error: delivery link return response code: 500 when linking woocommerce to erpnext in 2024

### Module

ecommerce

### Version

15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",momakarem,2024-05-29 06:58:11+00:00,[],2024-06-13 00:09:05+00:00,2024-05-29 07:27:44+00:00,https://github.com/frappe/erpnext/issues/41675,"[('bug', None)]","[{'comment_id': 2136721153, 'issue_id': 2322523782, 'author': 'Nihantra-Patel', 'body': 'Deprecating the woo-commerce integration in v15 due to its broken and unmaintained state.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/97b68d8f-111a-4383-b22a-6a950e185b51)\r\n\r\nPlease check it: https://github.com/frappe/erpnext/pull/37015', 'created_at': datetime.datetime(2024, 5, 29, 7, 27, 44, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-29 07:27:44 UTC): Deprecating the woo-commerce integration in v15 due to its broken and unmaintained state.

![image](https://github.com/frappe/erpnext/assets/141945075/97b68d8f-111a-4383-b22a-6a950e185b51)

Please check it: https://github.com/frappe/erpnext/pull/37015

"
2322427711,issue,open,,Putaway Rule with Inventory Dimension not working,"### Information about bug

I expect if I create a Putaway rule with Warehouse and a Inventory Dimension field, when the Putaway rule is applied, to populate Warehouse and Inventory Dimension, but only Warehouse is populated.

The steps i did for one item:

I have created a new docType: WarehouseLocation
I have created a new Inventory Dimension: Item Location
I set the Item location to 2 entries 001 and 001 (for testing)
I have created a new Putaway rule for an item and set
– Warehouse: MainWarehouse
– Inventory Dimension: 002
I have created an stock entry to test, I have added the item and checked the “Apply putway rules” and it was applied, but wrong: warehouse was applied OK, but NO Inventory Dimension.

I have tried several times and no working. I guess dynamic option of inventory Dimension is not automated completed.

Forum link: https://discuss.frappe.io/t/items-auto-select-last-warehouse-and-or-inventory-dimension/124136/4


### Module

stock

### Version

ERPNext: v15.24.1
Frappe Framework: v15.27.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",sorinpopescu,2024-05-29 06:00:39+00:00,[],2024-06-10 09:06:50+00:00,,https://github.com/frappe/erpnext/issues/41674,"[('feature-request', None)]","[{'comment_id': 2144734956, 'issue_id': 2322427711, 'author': 'nabinhait', 'body': ""This is not a bug, it's a feature request."", 'created_at': datetime.datetime(2024, 6, 3, 9, 35, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146698171, 'issue_id': 2322427711, 'author': 'sorinpopescu', 'body': ""On the Putaway rule, there are fields like:\r\n\r\n- Warehouse\r\n- Inventory Dimensions\r\n\r\nIf the field Inventory Dimensions exists and I fill the Inventory Dimension sand those are not populated/applied then it's a Bug.\r\n\r\nif it's a Feature Request - then remove the Inventory Dimensions fields from Putaway Rule - so it's not confusing users where their expectations would be - If I fill a field - I expect to be populated."", 'created_at': datetime.datetime(2024, 6, 4, 6, 17, 17, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-03 09:35:01 UTC): This is not a bug, it's a feature request.

sorinpopescu (Issue Creator) on (2024-06-04 06:17:17 UTC): On the Putaway rule, there are fields like:

- Warehouse
- Inventory Dimensions

If the field Inventory Dimensions exists and I fill the Inventory Dimension sand those are not populated/applied then it's a Bug.

if it's a Feature Request - then remove the Inventory Dimensions fields from Putaway Rule - so it's not confusing users where their expectations would be - If I fill a field - I expect to be populated.

"
2321382120,issue,closed,completed,Cash Flow Customization,"### Information about bug

is this possible to get back features of cash flow customization at version 15
we are using cash flow customization at version 13,14 after upgrade to version 15 cash flow customization feature is missing

### Module

accounts

### Version

version: 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-05-28 15:33:50+00:00,[],2024-06-13 00:09:06+00:00,2024-05-29 07:20:44+00:00,https://github.com/frappe/erpnext/issues/41670,"[('bug', None)]","[{'comment_id': 2136709624, 'issue_id': 2321382120, 'author': 'Nihantra-Patel', 'body': 'The Cashflow Mapper has been removed in version 15. It was buggy and not maintained, so we decided to deprecate it.\r\n\r\nhttps://github.com/frappe/erpnext/wiki/Migration-Guide-to-ERPNext-version-15#cashflow-mapper', 'created_at': datetime.datetime(2024, 5, 29, 7, 20, 44, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-29 07:20:44 UTC): The Cashflow Mapper has been removed in version 15. It was buggy and not maintained, so we decided to deprecate it.

https://github.com/frappe/erpnext/wiki/Migration-Guide-to-ERPNext-version-15#cashflow-mapper

"
2320298562,issue,open,,Multi Pick List to Single Work order,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.
https://discuss.frappe.io/t/multi-pick-list-to-single-work-order/123928/3
**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",szufisher,2024-05-28 07:08:04+00:00,[],2024-05-28 07:08:04+00:00,,https://github.com/frappe/erpnext/issues/41664,"[('feature-request', None)]",[],
2320111390,issue,closed,completed,Asset Depreciation : Written Down Calculation is not correct,"### Information about bug

![image](https://github.com/frappe/erpnext/assets/62122640/067393b1-7fc3-414e-8419-836d95b41370)
![image](https://github.com/frappe/erpnext/assets/62122640/1010d87e-c945-4c9b-81ce-12b29fef26a2)


### Module

assets

### Version

Frappe : 15.28.0
ERPNext: 15.25.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-05-28 04:45:25+00:00,['nabinhait'],2024-06-18 00:09:23+00:00,2024-06-03 07:42:50+00:00,https://github.com/frappe/erpnext/issues/41663,"[('bug', None)]","[{'comment_id': 2144494543, 'issue_id': 2320111390, 'author': 'nabinhait', 'body': 'I think the current calculation in the system is correct. Please provide some website links to support your expected calculation. For now, I am closing the issue.', 'created_at': datetime.datetime(2024, 6, 3, 7, 42, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144578954, 'issue_id': 2320111390, 'author': 'thida-bcn', 'body': 'https://www.wallstreetmojo.com/written-down-value-method/', 'created_at': datetime.datetime(2024, 6, 3, 8, 21, 24, tzinfo=datetime.timezone.utc)}]","nabinhait (Assginee) on (2024-06-03 07:42:51 UTC): I think the current calculation in the system is correct. Please provide some website links to support your expected calculation. For now, I am closing the issue.

thida-bcn (Issue Creator) on (2024-06-03 08:21:24 UTC): https://www.wallstreetmojo.com/written-down-value-method/

"
2318978644,issue,open,,Period Closing Voucher_ Changes to be incorporated,"We want 2 changes to be incorporated in the Period Closing Voucher:-
1. The period closing voucher posts the ledger entry in backend. We want the choosing of GLs in the front end, post the 1st save, so that the users have the option to omit any GL in the closing entry if they want to.
2. More than 1 Period closing should be permitted to be created for the same period. Also,if one GL is already closed then the same GL should not be available for the closing entry again.",Swati8848,2024-05-27 11:54:29+00:00,[],2024-05-31 06:00:21+00:00,,https://github.com/frappe/erpnext/issues/41657,"[('feature-request', None)]","[{'comment_id': 2141286647, 'issue_id': 2318978644, 'author': 'Swati8848', 'body': 'This change is requested to enable the users to select their appropriate accounts for transferring the closing balances. For Example:- \r\ni. All income and expenses GLs are to be transferred to Profit and loss A/c.  \r\nii. Actuarial Gain/Loss on Gratuity - OCI should go in Actuarial Gains / Losses on Gratuity\r\niii. GAIN / LOSS ON INVESTMENTS - FVTOCI and INCOME TAX - OCI should go in FVTOCI - Investments- Profits', 'created_at': datetime.datetime(2024, 5, 31, 6, 0, 20, tzinfo=datetime.timezone.utc)}]","Swati8848 (Issue Creator) on (2024-05-31 06:00:20 UTC): This change is requested to enable the users to select their appropriate accounts for transferring the closing balances. For Example:- 
i. All income and expenses GLs are to be transferred to Profit and loss A/c.  
ii. Actuarial Gain/Loss on Gratuity - OCI should go in Actuarial Gains / Losses on Gratuity
iii. GAIN / LOSS ON INVESTMENTS - FVTOCI and INCOME TAX - OCI should go in FVTOCI - Investments- Profits

"
2317858517,issue,closed,completed,Serial No. Delivered - Warranty date not getting updated,"### Information about bug

In the Support module Warranty date has not much validation, 

I think we need to improve on that module 

### Module

support

### Version

ERPNext: v15.25.0 (version-15)

Frappe Framework: v15.28.0 (version-15)

Frappe Whatsapp: v0.0.2 (master)

Frappe HR: v15.21.2 (version-15)

India Compliance: v15.7.4 (version-15)

Print Designer: v1.2.0 (main)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",dineshpanchal93,2024-05-26 17:31:46+00:00,[],2024-06-19 00:08:45+00:00,2024-06-04 06:04:04+00:00,https://github.com/frappe/erpnext/issues/41646,[],"[{'comment_id': 2134331681, 'issue_id': 2317858517, 'author': 'Nihantra-Patel', 'body': 'Please elaborate on the scenario in full step (Steps to reproduce the issue).', 'created_at': datetime.datetime(2024, 5, 28, 4, 38, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2139672468, 'issue_id': 2317858517, 'author': 'dineshpanchal93', 'body': 'OK Sure', 'created_at': datetime.datetime(2024, 5, 30, 14, 21, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146680475, 'issue_id': 2317858517, 'author': 'Nihantra-Patel', 'body': 'We have not encountered any such case so far. If it is an actual bug, please provide full details with a video and reopen the issue.', 'created_at': datetime.datetime(2024, 6, 4, 6, 4, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146856221, 'issue_id': 2317858517, 'author': 'dineshpanchal93', 'body': 'https://www.youtube.com/watch?v=eoBU-5tyl2Q\r\n\r\nAs per the video its not working.', 'created_at': datetime.datetime(2024, 6, 4, 7, 56, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146964405, 'issue_id': 2317858517, 'author': 'dineshpanchal93', 'body': '@Nihantra-Patel I have made a video for your understanding\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/21578167/eba82de9-d31c-4596-8403-9122055f1494', 'created_at': datetime.datetime(2024, 6, 4, 8, 49, 24, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-28 04:38:29 UTC): Please elaborate on the scenario in full step (Steps to reproduce the issue).

dineshpanchal93 (Issue Creator) on (2024-05-30 14:21:40 UTC): OK Sure

Nihantra-Patel on (2024-06-04 06:04:04 UTC): We have not encountered any such case so far. If it is an actual bug, please provide full details with a video and reopen the issue.

dineshpanchal93 (Issue Creator) on (2024-06-04 07:56:31 UTC): https://www.youtube.com/watch?v=eoBU-5tyl2Q

As per the video its not working.

dineshpanchal93 (Issue Creator) on (2024-06-04 08:49:24 UTC): @Nihantra-Patel I have made a video for your understanding


https://github.com/frappe/erpnext/assets/21578167/eba82de9-d31c-4596-8403-9122055f1494

"
2317580199,issue,closed,completed,Transfer (warehouse should not allow user to choose same),"### Information about bug

![image](https://github.com/frappe/erpnext/assets/62122640/640acb71-434b-4905-8097-7a932460025a)


### Module

stock

### Version

Frappe : 15.28.0
ERPNext : 15.25.0

Frappe : 14.75.0
ERPNext : 14.70.2



### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-05-26 08:26:07+00:00,[],2024-06-18 00:09:18+00:00,2024-06-03 10:01:28+00:00,https://github.com/frappe/erpnext/issues/41643,"[('bug', None), ('stock', None)]","[{'comment_id': 2143522386, 'issue_id': 2317580199, 'author': 'dj12djdjs', 'body': 'The reason this is allowed is for inventory dimensions: https://github.com/frappe/erpnext/pull/41651#issuecomment-2143521704\r\n\r\nMaybe there is another way to validate by checking if mandatory inventory dimensions (if any) are set?', 'created_at': datetime.datetime(2024, 6, 1, 17, 27, 26, tzinfo=datetime.timezone.utc)}]","dj12djdjs on (2024-06-01 17:27:26 UTC): The reason this is allowed is for inventory dimensions: https://github.com/frappe/erpnext/pull/41651#issuecomment-2143521704

Maybe there is another way to validate by checking if mandatory inventory dimensions (if any) are set?

"
2316962526,issue,closed,completed,Wrong GSTIN picked up in Purchase Order doctype. other doctypes are picking correct GSTIN,"### Information about bug

i created several PURCHASE ORDER. it created PO using correct GSTIN. recently i observed PO are getting created using an incorrect GSTIN. in company setup GSTIN is showing up correctly. this does not happen with other doctypes/txn

### Module

accounts, buying

### Version

latest 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Pankajo76,2024-05-25 12:09:26+00:00,[],2024-07-02 00:08:51+00:00,2024-06-06 10:32:16+00:00,https://github.com/frappe/erpnext/issues/41641,[],"[{'comment_id': 2143350888, 'issue_id': 2316962526, 'author': 'hpotabatti', 'body': '@Pankajo76 could you share a few more details, maybe a few screenshots so we can check and try to replicate this?\r\nAlso, which app do you use for GST compliance?', 'created_at': datetime.datetime(2024, 6, 1, 8, 1, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2151946106, 'issue_id': 2316962526, 'author': 'Nihantra-Patel', 'body': ""Everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/7205cd18-e1c1-4485-92c6-6d27f1584953\r\n\r\n\r\nAgain, check the supplier's GST number to see if the user has changed it or not."", 'created_at': datetime.datetime(2024, 6, 6, 10, 32, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2173012268, 'issue_id': 2316962526, 'author': 'Pankajo76', 'body': 'what we observed: once you setup ERPNEXT with a particular GSTIN and later if you change the GSTIN of the company for some reason, OLD gstin repopulates itself again. so we had to write a custom FETCH which always looks into current value of GSTIN in company address.', 'created_at': datetime.datetime(2024, 6, 17, 10, 36, 40, tzinfo=datetime.timezone.utc)}]","hpotabatti on (2024-06-01 08:01:42 UTC): @Pankajo76 could you share a few more details, maybe a few screenshots so we can check and try to replicate this?
Also, which app do you use for GST compliance?

Nihantra-Patel on (2024-06-06 10:32:16 UTC): Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/7205cd18-e1c1-4485-92c6-6d27f1584953


Again, check the supplier's GST number to see if the user has changed it or not.

Pankajo76 (Issue Creator) on (2024-06-17 10:36:40 UTC): what we observed: once you setup ERPNEXT with a particular GSTIN and later if you change the GSTIN of the company for some reason, OLD gstin repopulates itself again. so we had to write a custom FETCH which always looks into current value of GSTIN in company address.

"
2316850649,issue,open,,Asset Capitalisation,"### Information about bug

Asset Capitalization doctype creates a capital asset either consuming a stock item or asset item. Since this below option is there, why doesnt the system create in a WIP ledger rather than the FA ledger if this is selected? The item being created also has Capital WIP accounting turned on.

<img width=""464"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/64956588/7eb3828b-9256-4a4d-8336-335f4908fdc0"">


### Module

accounts, assets

### Version

ERPNext: v15.25.0 (HEAD)
Frappe Framework: v15.28.0 (HEAD)
India Compliance: v15.7.4 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",nakul80,2024-05-25 08:54:37+00:00,[],2024-06-21 08:37:56+00:00,,https://github.com/frappe/erpnext/issues/41637,"[('bug', None)]","[{'comment_id': 2182284199, 'issue_id': 2316850649, 'author': 'nakul80', 'body': 'Can you anyone help with this? its urgent', 'created_at': datetime.datetime(2024, 6, 21, 8, 37, 55, tzinfo=datetime.timezone.utc)}]","nakul80 (Issue Creator) on (2024-06-21 08:37:55 UTC): Can you anyone help with this? its urgent

"
2316697640,issue,open,,Ability to select one pricing rule when multiple are applicable,"Let's say there are 3 applicable pricing rules in a transaction for a single item.
Currently system will throw an error to set priority.

The issue with setting priority is, only that one rule would be applied in all cases.
If in case of multiple applicable rules, why not let the user opt for a pricing rule instead of stopping the flow?",rtdany10,2024-05-25 04:53:50+00:00,[],2024-05-25 04:53:50+00:00,,https://github.com/frappe/erpnext/issues/41636,"[('feature-request', None)]",[],
2315148122,issue,closed,completed,Inventory balances missing,"### Information about bug

We are not able to see our inventory balances on our site armanarya.erpnext.com

### Module

stock

### Version

ERPNext: v13.55.2 (HEAD)

Frappe Framework: v13.58.21 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
https://armanarya.erpnext.com/app/query-report/Stock%20Balance
```
",miatano,2024-05-24 11:18:58+00:00,[],2024-06-18 00:09:09+00:00,2024-05-27 09:12:27+00:00,https://github.com/frappe/erpnext/issues/41634,"[('bug', None)]","[{'comment_id': 2130946104, 'issue_id': 2315148122, 'author': 'miatano', 'body': 'any update?', 'created_at': datetime.datetime(2024, 5, 25, 6, 45, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2133029584, 'issue_id': 2315148122, 'author': 'Nihantra-Patel', 'body': 'Please check the role permissions for the report. Everything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\nIf site is on the frappe cloud then please raise the issue on the https://support.frappe.io\r\n\r\n\r\n**We no longer provide support for version 13 or older.**\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 5, 27, 9, 12, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144999894, 'issue_id': 2315148122, 'author': 'miatano', 'body': 'we need to upgrade the version 14. We put request on support tab of ERPNext but no response received so far', 'created_at': datetime.datetime(2024, 6, 3, 11, 52, 37, tzinfo=datetime.timezone.utc)}]","miatano (Issue Creator) on (2024-05-25 06:45:59 UTC): any update?

Nihantra-Patel on (2024-05-27 09:12:27 UTC): Please check the role permissions for the report. Everything is working fine. No problems were encountered in the latest versions 14 and 15.

If site is on the frappe cloud then please raise the issue on the https://support.frappe.io


**We no longer provide support for version 13 or older.**

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

miatano (Issue Creator) on (2024-06-03 11:52:37 UTC): we need to upgrade the version 14. We put request on support tab of ERPNext but no response received so far

"
2315014793,issue,closed,completed,Exchange Rate Revaluation Settings,"![image](https://github.com/frappe/erpnext/assets/62122640/c7b1b273-d5d9-41e3-9ff8-62f3664a2c7d)

is this possible to add ""Frequency"" of Monthly?",thida-bcn,2024-05-24 10:11:56+00:00,['ruthra-kumar'],2024-08-08 00:09:04+00:00,2024-07-24 13:14:05+00:00,https://github.com/frappe/erpnext/issues/41631,"[('feature-request', None)]","[{'comment_id': 2229020869, 'issue_id': 2315014793, 'author': 'thida-bcn', 'body': '@ruthra-kumar hello sir, when will you release this?', 'created_at': datetime.datetime(2024, 7, 15, 17, 24, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230061949, 'issue_id': 2315014793, 'author': 'ruthra-kumar', 'body': ""@thida-bcn \r\n\r\nCan't confirm on a date, due to other high priority tasks.\r\n\r\n\r\nThis is simple addition though. Contributions are welcome. If you can add this, I can help with review and merging."", 'created_at': datetime.datetime(2024, 7, 16, 5, 35, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2230070176, 'issue_id': 2315014793, 'author': 'thida-bcn', 'body': ""thanks\r\ncurrently, we don't have enough Technical Person\r\nThanks and Regards,\r\nThida\r\nBusiness Development Director\r\n\r\nBusiness Centric Network Company Limited\r\n+959 977 160 671\r\n+959 254 677 192\r\n***@***.***\r\nhttps://businesscentricnetwork.com/\r\n\r\n\r\n\r\n\r\n\r\nOn Tue, Jul 16, 2024 at 12:05\u202fPM ruthra kumar ***@***.***>\r\nwrote:\r\n\r\n> @thida-bcn <https://github.com/thida-bcn>\r\n>\r\n> Can't confirm on a date, due to other high priority tasks.\r\n>\r\n> This is simple addition though. Contributions are welcome. If you can add\r\n> this, I can help with review and merging.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/41631#issuecomment-2230061949>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AOZ6VEB4RSKAWHHKNMG3M6DZMSWJ3AVCNFSM6AAAAABIHJERIOVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDEMZQGA3DCOJUHE>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2024, 7, 16, 5, 43, 10, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-07-15 17:24:28 UTC): @ruthra-kumar hello sir, when will you release this?

ruthra-kumar (Assginee) on (2024-07-16 05:35:02 UTC): @thida-bcn 

Can't confirm on a date, due to other high priority tasks.


This is simple addition though. Contributions are welcome. If you can add this, I can help with review and merging.

thida-bcn (Issue Creator) on (2024-07-16 05:43:10 UTC): thanks
currently, we don't have enough Technical Person
Thanks and Regards,
Thida
Business Development Director

Business Centric Network Company Limited
+959 977 160 671
+959 254 677 192
***@***.***
https://businesscentricnetwork.com/





On Tue, Jul 16, 2024 at 12:05 PM ruthra kumar ***@***.***>
wrote:

"
2314826676,issue,closed,completed,ledger not showing,"### Information about bug

cant search and find some ledgers in payment vouchers, 
employee name not showing  for some users 

### Module

accounts, HR

### Version

ERP NEXT

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",ashwinpmani,2024-05-24 08:50:52+00:00,[],2024-06-19 00:08:59+00:00,2024-06-04 06:00:49+00:00,https://github.com/frappe/erpnext/issues/41628,[],"[{'comment_id': 2133375758, 'issue_id': 2314826676, 'author': 'Nihantra-Patel', 'body': ""Which version?\r\n\r\nPlease provide a detailed explanation because the information you've given isn't sufficient. Include screenshots showing where the error occurs in the report."", 'created_at': datetime.datetime(2024, 5, 27, 12, 25, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146676722, 'issue_id': 2314826676, 'author': 'Nihantra-Patel', 'body': 'Kindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nEverything is working fine. No problems were encountered in the latest versions 14 and 15.', 'created_at': datetime.datetime(2024, 6, 4, 6, 0, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-27 12:25:44 UTC): Which version?

Please provide a detailed explanation because the information you've given isn't sufficient. Include screenshots showing where the error occurs in the report.

Nihantra-Patel on (2024-06-04 06:00:49 UTC): Kindly upgrade to version 14 or 15, then refresh and check again because lots of bugs fixed in the new version.

Everything is working fine. No problems were encountered in the latest versions 14 and 15.

"
2314084487,issue,closed,not_planned,BOM Creator dupllicate gives ImportError: cannot import name 'complete_contact_details' from 'erpnext.accounts.party' (apps/erpnext/erpnext/accounts/party.py),"### Information about bug

Duplicate an already saved BOM Creator

### Module

manufacturing

### Version

ERPNext: v15.22.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""business_theme_v14"": ""0.0.1"",
	""erpnext"": ""15.22.2"",
	""frappe"": ""15.26.0"",
	""hrms"": ""15.14.1"",
	""payments"": ""0.0.1"",
	""quickfile_sync"": ""15.0.1"",
	""uk"": ""14.3.1""
}
```
",casesolved-co-uk,2024-05-24 00:44:14+00:00,[],2024-06-09 00:10:04+00:00,2024-05-24 00:46:42+00:00,https://github.com/frappe/erpnext/issues/41621,"[('bug', None)]",[],
2313948212,issue,open,,BOM Creator costs not multiplied by parent quantity,"### Information about bug

When creating a multi-level BOM in the BOM Creator, the costs are not calculated up the tree. The below example illustrates:

Expected:
Grand Total: (12 * £150.64) + (10 * 59.756) = £2405.24

Actual:
£210.396

![Screen Shot 2024-05-23 at 23 08 14](https://github.com/frappe/erpnext/assets/110036763/613f1c3a-40ca-4435-8bce-74520284fd6f)


### Module

manufacturing

### Version

ERPNext: v15.22.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-05-23 22:15:38+00:00,[],2024-06-29 21:10:44+00:00,,https://github.com/frappe/erpnext/issues/41617,"[('bug', None)]","[{'comment_id': 2198336678, 'issue_id': 2313948212, 'author': 'casesolved-co-uk', 'body': '@rohitwaghchaure ?', 'created_at': datetime.datetime(2024, 6, 29, 21, 10, 44, tzinfo=datetime.timezone.utc)}]","casesolved-co-uk (Issue Creator) on (2024-06-29 21:10:44 UTC): @rohitwaghchaure ?

"
2313263909,issue,closed,completed,"""FG"" is used in many places and should be ""Finished Goods""","### Information about bug

It is better to be explicit with ""Finished Goods"" and use an unknown abbreviation

### Module

manufacturing

### Version

v16 develop

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",casesolved-co-uk,2024-05-23 15:49:14+00:00,[],2024-06-22 00:08:57+00:00,2024-06-03 10:25:39+00:00,https://github.com/frappe/erpnext/issues/41614,"[('bug', None), ('released', None)]","[{'comment_id': 2148688184, 'issue_id': 2313263909, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 30, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-05 01:22:30 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2313252738,issue,closed,completed,BOM Creator: Save of duplicated BOM results in RecursionError,"### Information about bug

If you duplicate a submitted BOM Creator document, then hit save, you get the below RecursionError

### Module

manufacturing

### Version

ERPNext v15.22.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""erpnext"": ""15.22.2"",
	""frappe"": ""15.26.0"",
	""hrms"": ""15.14.1"",
	""payments"": ""0.0.1"",
	""quickfile_sync"": ""15.0.1"",
	""uk"": ""14.3.1""
}
```
### Route
```
Form/BOM Creator/new-bom-creator-eoevyuplqy
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1092, in run_before_save_methods
    self.run_method(""before_save"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 73, in before_save
    self.set_rate_for_items()
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 144, in set_rate_for_items
    amount = self.get_raw_material_cost()
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 174, in get_raw_material_cost
    row.amount = self.get_raw_material_cost(row.name, row.amount)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 174, in get_raw_material_cost
    row.amount = self.get_raw_material_cost(row.name, row.amount)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 174, in get_raw_material_cost
    row.amount = self.get_raw_material_cost(row.name, row.amount)
  [Previous line repeated 937 more times]
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom_creator/bom_creator.py"", line 156, in get_raw_material_cost
    row.rate = get_bom_item_rate(
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom/bom.py"", line 992, in get_bom_item_rate
    rate = get_valuation_rate(args) * (args.get(""conversion_factor"") or 1)
  File ""apps/erpnext/erpnext/manufacturing/doctype/bom/bom.py"", line 1057, in get_valuation_rate
    item_valuation = item_valuation.run(as_dict=True)[0]
  File ""apps/frappe/frappe/query_builder/utils.py"", line 86, in execute_query
    query, params = prepare_query(query)
  File ""apps/frappe/frappe/query_builder/utils.py"", line 111, in prepare_query
    query = query.get_sql(param_wrapper=param_collector)
  File ""env/lib/python3.10/site-packages/pypika/dialects.py"", line 131, in get_sql
    querystring = super(MySQLQueryBuilder, self).get_sql(**kwargs)
  File ""env/lib/python3.10/site-packages/pypika/queries.py"", line 1296, in get_sql
    querystring += self._select_sql(**kwargs)
  File ""env/lib/python3.10/site-packages/pypika/dialects.py"", line 182, in _select_sql
    select="","".join(term.get_sql(with_alias=True, subquery=True, **kwargs) for term in self._selects),
  File ""env/lib/python3.10/site-packages/pypika/dialects.py"", line 182, in <genexpr>
    select="","".join(term.get_sql(with_alias=True, subquery=True, **kwargs) for term in self._selects),
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1160, in get_sql
    cases = "" "".join(
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1161, in <genexpr>
    ""WHEN {when} THEN {then}"".format(when=criterion.get_sql(**kwargs), then=term.get_sql(**kwargs))
  File ""apps/frappe/frappe/query_builder/terms.py"", line 87, in get_sql
    function_sql = self.get_function_sql(
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1311, in get_function_sql
    args="","".join(
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1312, in <genexpr>
    p.get_sql(with_alias=False, subquery=True, **kwargs)
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1089, in get_sql
    self.left.get_sql(**kwargs)
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1327, in get_sql
    function_sql = self.get_function_sql(with_namespace=with_namespace, quote_char=quote_char, dialect=dialect)
  File ""env/lib/python3.10/site-packages/pypika/functions.py"", line 24, in get_function_sql
    s = super(DistinctOptionFunction, self).get_function_sql(**kwargs)
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1360, in get_function_sql
    sql = super(AggregateFunction, self).get_function_sql(**kwargs)
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1311, in get_function_sql
    args="","".join(
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 1312, in <genexpr>
    p.get_sql(with_alias=False, subquery=True, **kwargs)
  File ""env/lib/python3.10/site-packages/pypika/terms.py"", line 568, in get_sql
    field_sql = format_quotes(self.name, quote_char)
  File ""env/lib/python3.10/site-packages/pypika/utils.py"", line 103, in format_quotes
    return ""{quote}{value}{quote}"".format(value=value, quote=quote_char or """")
RecursionError: maximum recursion depth exceeded while calling a Python object

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""docstatus\"":0,\""doctype\"":\""BOM Creator\"",\""name\"":\""new-bom-creator-eoevyuplqy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""rm_cost_as_per\"":\""Valuation Rate\"",\""set_rate_based_on_warehouse\"":0,\""buying_price_list\"":\""Standard Buying\"",\""price_list_currency\"":\""GBP\"",\""currency\"":\""GBP\"",\""conversion_rate\"":1,\""default_warehouse\"":\""Goods Incoming - DS\"",\""company\"":\""Systems Limited\"",\""items\"":[{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-jsteaaipfg\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":1,\""item_code\"":\""HAA003A\"",\""item_name\"":\""48v BMS PCB\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""BMS PCB for battery, 48v.\"",\""qty\"":1,\""rate\"":9.96,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":9.96,\""base_rate\"":9.96,\""base_amount\"":9.96,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""is_root\"":1,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-jsteaaipfg\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":9.96,\""net_amount\"":9.96,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":9.96,\""base_net_amount\"":9.96,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-mtnetjlvuu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":1,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":2,\""item_code\"":\""HAA076A\"",\""item_name\"":\""Enclosure Assembly\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""Assembly of enclosure body and lid.\"",\""qty\"":1,\""rate\"":319.92,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":319.92,\""base_rate\"":319.92,\""base_amount\"":319.92,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-mtnetjlvuu\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":319.92,\""net_amount\"":319.92,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":319.92,\""base_net_amount\"":319.92,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-sbcgawzcko\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":3,\""item_code\"":\""HAA077A\"",\""item_name\"":\""Wiring Harness Assembly\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""Wiring harness connecting BMS to housing on lid of enclosure. \"",\""qty\"":1,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-sbcgawzcko\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-juubykqbss\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":1,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":4,\""item_code\"":\""HAA005B\"",\""item_name\"":\""HAA005B\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""HAA005B\"",\""qty\"":1,\""rate\"":885.789,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":885.789,\""base_rate\"":885.789,\""base_amount\"":885.789,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-juubykqbss\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":885.789,\""net_amount\"":885.789,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":885.789,\""base_net_amount\"":885.789,\""gross_profit\"":885.789},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-krihnaqtjq\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":5,\""item_code\"":\""900156A\"",\""item_name\"":\""M6x10 Cap Head Bolt\"",\""item_group\"":\""Bolt\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""Cap head M6x10mm bolt\"",\""qty\"":8,\""rate\"":0.184,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":1.472,\""base_rate\"":0.184,\""base_amount\"":1.472,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-krihnaqtjq\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0.184,\""net_amount\"":1.472,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0.184,\""base_net_amount\"":1.472,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-pcecnfhnha\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":6,\""item_code\"":\""HAA032A\"",\""item_name\"":\""Busbar Surlok Link\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""busbar linking the 2 surlok sockets attached to lid of enclosure.\"",\""qty\"":2,\""rate\"":0.84,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":1.68,\""base_rate\"":0.84,\""base_amount\"":1.68,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-pcecnfhnha\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0.84,\""net_amount\"":1.68,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0.84,\""base_net_amount\"":1.68,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-wruljblusv\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":7,\""item_code\"":\""HAA035A\"",\""item_name\"":\""Bracket Stack to Enclosure\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA005B\"",\""description\"":\""Baseplate bracket that both 6 and 8 stacks bolt onto, and is then bolted into the bottom of the enclosure. \"",\""qty\"":1,\""rate\"":8.91,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":8.91,\""base_rate\"":8.91,\""base_amount\"":8.91,\""parent_row_no\"":\""8\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-wruljblusv\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":8.91,\""net_amount\"":8.91,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":8.91,\""base_net_amount\"":8.91,\""gross_profit\"":8.91},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-lmofzscyao\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":8,\""item_code\"":\""101862A\"",\""item_name\"":\""Amphenol Surlok Plus Screw Termination 8mm Red\"",\""item_group\"":\""Catalogue\"",\""fg_item\"":\""HAA076A\"",\""description\"":\""Amphenol Surlok plus series socket with 8mm screw termination, 200A capacity, red.\"",\""qty\"":2,\""rate\"":5.78,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":11.56,\""base_rate\"":5.78,\""base_amount\"":11.56,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-lmofzscyao\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":5.78,\""net_amount\"":11.56,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":5.78,\""base_net_amount\"":11.56,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-jhvbycmepa\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":9,\""item_code\"":\""101863A\"",\""item_name\"":\""Amphenol Surlok Plus Screw Termination 8mm Black\"",\""item_group\"":\""Catalogue\"",\""fg_item\"":\""HAA076A\"",\""description\"":\""Amphenol Surlok plus series socket with 8mm screw termination, 200A capacity, black.\"",\""qty\"":2,\""rate\"":5.78,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":11.56,\""base_rate\"":5.78,\""base_amount\"":11.56,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-jhvbycmepa\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":5.78,\""net_amount\"":11.56,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":5.78,\""base_net_amount\"":11.56,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-ndyijhnybc\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":10,\""item_code\"":\""102037A\"",\""item_name\"":\""VENT_SNAPFIT_3L/MIN_AMPHENOL\"",\""item_group\"":\""Misc\"",\""fg_item\"":\""HAA076A\"",\""description\"":\""VENT_SNAPFIT_3L/MIN_AMPHENOL\"",\""qty\"":1,\""rate\"":5.29,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":5.29,\""base_rate\"":5.29,\""base_amount\"":5.29,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-ndyijhnybc\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":5.29,\""net_amount\"":5.29,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":5.29,\""base_net_amount\"":5.29,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-yaskbgrihi\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":11,\""item_code\"":\""HAA060A\"",\""item_name\"":\""Terminal Flex Busbar\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA001B\"",\""description\"":\""Flex busbar connecting positive and negative studs on BMS to the Surlok threaded sockets attached to the lid.\"",\""qty\"":2,\""rate\"":12.5,\""uom\"":\""Unit\"",\""stock_qty\"":0,\""conversion_factor\"":1,\""amount\"":25,\""base_rate\"":12.5,\""base_amount\"":25,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-yaskbgrihi\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":12.5,\""net_amount\"":25,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":12.5,\""base_net_amount\"":25,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-faqwuxijfp\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":1,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":12,\""item_code\"":\""HAA006B\"",\""item_name\"":\""6 Cell Stack Assembly\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA005B\"",\""description\"":\""6 Cell stack assembly from battery, containing 2 columns of 6 cells stacked back-to-back for a total of 12 stacks, welded into side and end plates.\"",\""qty\"":2,\""rate\"":87.47,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":174.94,\""base_rate\"":87.47,\""base_amount\"":174.94,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-faqwuxijfp\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":87.47,\""net_amount\"":174.94,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":87.47,\""base_net_amount\"":174.94,\""gross_profit\"":87.47},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-komxxucpbd\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":13,\""item_code\"":\""HAA009A\"",\""item_name\"":\""Compression Cork Cell Spacer\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA006B\"",\""description\"":\""2mm thick cork, placed before and after each cell for compression (to 1.5mm).\"",\""qty\"":7,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":7,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""parent_row_no\"":\""16\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-komxxucpbd\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-txxcujsenc\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":14,\""item_code\"":\""101786A\"",\""item_name\"":\""EVE INP58P Li-Ion Battery Cell 3.2v\"",\""item_group\"":\""Catalogue\"",\""fg_item\"":\""HAA006B\"",\""description\"":\""EVE lithium ion battery cell, 3.2v, 58Ah, prismatic NCM, part number INP58P.\"",\""qty\"":6,\""rate\"":25.497,\""uom\"":\""Unit\"",\""stock_qty\"":6,\""conversion_factor\"":1,\""amount\"":152.982,\""base_rate\"":25.497,\""base_amount\"":152.982,\""parent_row_no\"":\""16\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-txxcujsenc\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":25.497,\""net_amount\"":152.982,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":25.497,\""base_net_amount\"":152.982,\""gross_profit\"":152.982},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-xkudbjjihx\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":15,\""item_code\"":\""HAA004D\"",\""item_name\"":\""Stack End Plate\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA006B\"",\""description\"":\""STACK_END_PLATE rev D with corrected holes for assembly jig\"",\""qty\"":2,\""rate\"":6.738,\""uom\"":\""Unit\"",\""stock_qty\"":2,\""conversion_factor\"":1,\""amount\"":13.476,\""base_rate\"":6.738,\""base_amount\"":13.476,\""parent_row_no\"":\""16\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-xkudbjjihx\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":6.738,\""net_amount\"":13.476,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":6.738,\""base_net_amount\"":13.476,\""gross_profit\"":13.476},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-tccaonhtho\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":16,\""item_code\"":\""HAA073A\"",\""item_name\"":\""6 Cell Sideplate\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA006B\"",\""description\"":\""Sideplate for 6 cell stack, with notch for tabs on the stack end plates.\"",\""qty\"":2,\""rate\"":4.24,\""uom\"":\""Unit\"",\""stock_qty\"":2,\""conversion_factor\"":1,\""amount\"":8.48,\""base_rate\"":4.24,\""base_amount\"":8.48,\""parent_row_no\"":\""16\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-tccaonhtho\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":4.24,\""net_amount\"":8.48,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":4.24,\""base_net_amount\"":8.48,\""gross_profit\"":8.48},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-mksdtnihra\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":17,\""item_code\"":\""HAA084A\"",\""item_name\"":\""U Wrap Isolation, 6 Cell Stack\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA006B\"",\""description\"":\""Mylar isolating sheet for bottom face of cells, wrapping around cell corners to maintain isolation into transition to air gap isolation\"",\""qty\"":1,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""parent_row_no\"":\""16\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-mksdtnihra\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-fqhskgftbp\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":1,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":18,\""item_code\"":\""HAA007B\"",\""item_name\"":\""8 Cell Stack Assembly, Right\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA005B\"",\""description\"":\""8 cell single stack, right side variant.\"",\""qty\"":1,\""rate\"":236.555,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":236.555,\""base_rate\"":236.555,\""base_amount\"":236.555,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-fqhskgftbp\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":236.555,\""net_amount\"":236.555,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":236.555,\""base_net_amount\"":236.555,\""gross_profit\"":236.555},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-tudnkuhaog\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":19,\""item_code\"":\""HAA009A\"",\""item_name\"":\""Compression Cork Cell Spacer\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""2mm thick cork, placed before and after each cell for compression (to 1.5mm).\"",\""qty\"":9,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":9,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-tudnkuhaog\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-farsuirotu\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":20,\""item_code\"":\""101786A\"",\""item_name\"":\""EVE INP58P Li-Ion Battery Cell 3.2v\"",\""item_group\"":\""Catalogue\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""EVE lithium ion battery cell, 3.2v, 58Ah, prismatic NCM, part number INP58P.\"",\""qty\"":8,\""rate\"":25.497,\""uom\"":\""Unit\"",\""stock_qty\"":8,\""conversion_factor\"":1,\""amount\"":203.976,\""base_rate\"":25.497,\""base_amount\"":203.976,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-farsuirotu\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":25.497,\""net_amount\"":203.976,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":25.497,\""base_net_amount\"":203.976,\""gross_profit\"":203.976},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-demlcqgalf\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":21,\""item_code\"":\""HAA004D\"",\""item_name\"":\""Stack End Plate\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""STACK_END_PLATE rev D with corrected holes for assembly jig\"",\""qty\"":2,\""rate\"":6.738,\""uom\"":\""Unit\"",\""stock_qty\"":2,\""conversion_factor\"":1,\""amount\"":13.476,\""base_rate\"":6.738,\""base_amount\"":13.476,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-demlcqgalf\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":6.738,\""net_amount\"":13.476,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":6.738,\""base_net_amount\"":13.476,\""gross_profit\"":13.476},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-zxizeeouql\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":22,\""item_code\"":\""HAA080A\"",\""item_name\"":\""STACK_SIDEPLATE_8CELL_COMMON\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""STACK_SIDEPLATE_8CELL_COMMON\"",\""qty\"":1,\""rate\"":6.31,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":6.31,\""base_rate\"":6.31,\""base_amount\"":6.31,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-zxizeeouql\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":6.31,\""net_amount\"":6.31,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":6.31,\""base_net_amount\"":6.31,\""gross_profit\"":6.31},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-hrhwqhmobp\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":23,\""item_code\"":\""HAA078A\"",\""item_name\"":\""STACK_SIDEPLATE_8CELL_NEG\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""STACK_SIDEPLATE_8CELL_NEG\"",\""qty\"":1,\""rate\"":12.79,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":12.79,\""base_rate\"":12.79,\""base_amount\"":12.79,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-hrhwqhmobp\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":12.79,\""net_amount\"":12.79,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":12.79,\""base_net_amount\"":12.79,\""gross_profit\"":12.79},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-nsgwekjiig\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":24,\""item_code\"":\""HAA085A\"",\""item_name\"":\""U Wrap Isolation, 8 Cell Stack\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA007B\"",\""description\"":\""Mylar isolating sheet for bottom face of cells, wrapping around cell corners to maintain isolation into transition to air gap isolation\"",\""qty\"":1,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""parent_row_no\"":\""22\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-nsgwekjiig\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-kgftsnimxj\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":1,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":25,\""item_code\"":\""HAA086A\"",\""item_name\"":\""8 Cell Stack Assembly, Left\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA005B\"",\""description\"":\""8 cell stack, left variant. Mirror version of HAA007.\"",\""qty\"":1,\""rate\"":236.555,\""uom\"":\""Unit\"",\""stock_qty\"":1,\""conversion_factor\"":1,\""amount\"":236.555,\""base_rate\"":236.555,\""base_amount\"":236.555,\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-kgftsnimxj\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":236.555,\""net_amount\"":236.555,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":236.555,\""base_net_amount\"":236.555,\""gross_profit\"":236.555},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-ndqxetgdxy\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":26,\""item_code\"":\""HAA009A\"",\""item_name\"":\""Compression Cork Cell Spacer\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA086A\"",\""description\"":\""2mm thick cork, placed before and after each cell for compression (to 1.5mm).\"",\""qty\"":9,\""rate\"":0,\""uom\"":\""Unit\"",\""stock_qty\"":9,\""conversion_factor\"":1,\""amount\"":0,\""base_rate\"":0,\""base_amount\"":0,\""parent_row_no\"":\""29\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-ndqxetgdxy\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":0,\""net_amount\"":0,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":0,\""base_net_amount\"":0,\""gross_profit\"":0},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-sntkidkoxb\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":27,\""item_code\"":\""101786A\"",\""item_name\"":\""EVE INP58P Li-Ion Battery Cell 3.2v\"",\""item_group\"":\""Catalogue\"",\""fg_item\"":\""HAA086A\"",\""description\"":\""EVE lithium ion battery cell, 3.2v, 58Ah, prismatic NCM, part number INP58P.\"",\""qty\"":8,\""rate\"":25.497,\""uom\"":\""Unit\"",\""stock_qty\"":8,\""conversion_factor\"":1,\""amount\"":203.976,\""base_rate\"":25.497,\""base_amount\"":203.976,\""parent_row_no\"":\""29\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-sntkidkoxb\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":25.497,\""net_amount\"":203.976,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":25.497,\""base_net_amount\"":203.976,\""gross_profit\"":203.976},{\""docstatus\"":0,\""doctype\"":\""BOM Creator Item\"",\""name\"":\""new-bom-creator-item-rckgzbfzxw\"",\""__islocal\"":1,\""__unsaved\"":1,\""owner\"":\""Administrator\"",\""is_expandable\"":0,\""sourced_by_supplier\"":0,\""bom_created\"":0,\""stock_uom\"":\""Unit\"",\""do_not_explode\"":1,\""parent\"":\""new-bom-creator-eoevyuplqy\"",\""parentfield\"":\""items\"",\""parenttype\"":\""BOM Creator\"",\""idx\"":28,\""item_code\"":\""HAA004D\"",\""item_name\"":\""Stack End Plate\"",\""item_group\"":\""Project Designed Item\"",\""fg_item\"":\""HAA086A\"",\""description\"":\""STACK_END_PLATE rev D with corrected holes for assembly jig\"",\""qty\"":2,\""rate\"":6.738,\""uom\"":\""Unit\"",\""stock_qty\"":2,\""conversion_factor\"":1,\""amount\"":13.476,\""base_rate\"":6.738,\""base_amount\"":13.476,\""parent_row_no\"":\""29\"",\""creation\"":\""\"",\""modified_by\"":\""Administrator\"",\""modified\"":\""\"",\""lft\"":null,\""rgt\"":null,\""has_margin\"":false,\""child_docname\"":\""new-bom-creator-item-rckgzbfzxw\"",\""price_list_rate\"":0,\""discount_percentage\"":0,\""net_rate\"":6.738,\""net_amount\"":13.476,\""total_weight\"":null,\""base_price_list_rate\"":0,\""base_net_rate\"":6.738,\""base_net_amount\"":13.476,\""gross_profit\"":13.476},

... truncated ...

		""action"": ""Save""
	},
	""btn"": {
		""jQuery3700322594524886376631"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 5436,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""RecursionError: maximum recursion depth exceeded while calling a Python object"",
	""exc_type"": ""RecursionError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",casesolved-co-uk,2024-05-23 15:45:00+00:00,['rohitwaghchaure'],2024-07-25 00:08:58+00:00,2024-07-04 09:05:57+00:00,https://github.com/frappe/erpnext/issues/41613,"[('bug', None), ('released', None)]","[{'comment_id': 2220175505, 'issue_id': 2313252738, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 10, 10, 45, 54, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-10 10:45:54 UTC): :tada: This issue has been resolved in version 15.29.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2312813694,issue,closed,completed,Payment Entry Server Error,"### Information about bug

![image](https://github.com/frappe/erpnext/assets/74385558/3f10ddb1-c8e4-412c-98c0-e52023634968)


### Module

accounts

### Version

Frappe Version - 14.75.0
Erpnext 14.70.1


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",convergenix,2024-05-23 12:36:32+00:00,[],2024-06-16 00:11:22+00:00,2024-06-01 16:27:20+00:00,https://github.com/frappe/erpnext/issues/41608,"[('bug', None)]","[{'comment_id': 2127141565, 'issue_id': 2312813694, 'author': 'kunhimohamed', 'body': 'Please give more details.', 'created_at': datetime.datetime(2024, 5, 23, 13, 41, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2127267916, 'issue_id': 2312813694, 'author': 'm-aglan', 'body': 'This issue happens when you open any invoice and make payment entry', 'created_at': datetime.datetime(2024, 5, 23, 14, 27, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2127335023, 'issue_id': 2312813694, 'author': 'kunhimohamed', 'body': 'Tested with given versions not able rise any error at payment entry.', 'created_at': datetime.datetime(2024, 5, 23, 14, 51, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2127351118, 'issue_id': 2312813694, 'author': 'Ponyooooo', 'body': 'also experiencing this one, \r\non version ERPNext: v14.70.1 (HEAD)\r\nFrappe Framework: v14.75.0 (HEAD)\r\nFrappe HR: v14.28.1 (HEAD)\r\nfor frappecloud installed', 'created_at': datetime.datetime(2024, 5, 23, 14, 56, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2127356370, 'issue_id': 2312813694, 'author': 'Ponyooooo', 'body': 'here are the other discussion; https://discuss.frappe.io/t/typeerror-get-reference-details-takes-3-positional-arguments-but-5-were-given/123764/12', 'created_at': datetime.datetime(2024, 5, 23, 14, 58, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2143505282, 'issue_id': 2312813694, 'author': 'dj12djdjs', 'body': 'This is fixed in v14.70.2 release', 'created_at': datetime.datetime(2024, 6, 1, 16, 27, 20, tzinfo=datetime.timezone.utc)}]","kunhimohamed on (2024-05-23 13:41:56 UTC): Please give more details.

m-aglan on (2024-05-23 14:27:55 UTC): This issue happens when you open any invoice and make payment entry

kunhimohamed on (2024-05-23 14:51:13 UTC): Tested with given versions not able rise any error at payment entry.

Ponyooooo on (2024-05-23 14:56:07 UTC): also experiencing this one, 
on version ERPNext: v14.70.1 (HEAD)
Frappe Framework: v14.75.0 (HEAD)
Frappe HR: v14.28.1 (HEAD)
for frappecloud installed

Ponyooooo on (2024-05-23 14:58:07 UTC): here are the other discussion; https://discuss.frappe.io/t/typeerror-get-reference-details-takes-3-positional-arguments-but-5-were-given/123764/12

dj12djdjs on (2024-06-01 16:27:20 UTC): This is fixed in v14.70.2 release

"
2312634881,issue,open,,"While Creating the Work Order from the Sales Order, We need the Item Name also to be displayed along with the Item Code","While Creating the Work Order from the Sales Order, We need the Item Name also to be displayed along with the Item Code.
<img width=""953"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/80260184/5f4f728a-8b40-4120-82a6-d8fb864eca6e"">

You can check in the below Screenshot we need the Item Name also to be displayed as manytimes the user needs an information for which Item Name they are creating a work Order.Identifying with the Item Code is sometimes difficult for the User for creating a Work Order.

<img width=""943"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/80260184/e96bab72-fd78-4233-bab5-1fe23899f3f1"">

",JitendraSAW,2024-05-23 11:11:37+00:00,[],2024-07-08 07:18:42+00:00,,https://github.com/frappe/erpnext/issues/41602,"[('feature-request', None)]","[{'comment_id': 2213220965, 'issue_id': 2312634881, 'author': 'JitendraSAW', 'body': 'Any Update on this as this is very generic and genuine requirement by all the Manufacturing User as from the Item code it makes us difficult to know and process for further activity.', 'created_at': datetime.datetime(2024, 7, 8, 7, 18, 42, tzinfo=datetime.timezone.utc)}]","JitendraSAW (Issue Creator) on (2024-07-08 07:18:42 UTC): Any Update on this as this is very generic and genuine requirement by all the Manufacturing User as from the Item code it makes us difficult to know and process for further activity.

"
2310413636,issue,closed,completed,Unsolved: Can't Set the Unrealized Gain/Loss Exchange Account Because It Is Requiring a Profit and Loss Account #34272,"### Information about bug

I experience the same bug descibed in https://github.com/frappe/erpnext/issues/34272 as of 2024-05-22. (Can no longer comment on the aforementioned post.)

The OP has correctly identified this as a bug. See e.g. https://corporatefinanceinstitute.com/resources/accounting/foreign-exchange-gain-loss which states that indeed the """"Unrealized Exchange Gain/Loss Account"" should be of type ""Equity"". Expected behaviour would be to let the user choose any account.

### Module

accounts

### Version

```
erpnext 15.24.1
frappe 15.27.0
nextcloud_integration 0.0.1
payments 0.0.1
```

### Installation method

manual

### Relevant log output / Stack trace / Full Error Message.

_No response_",konradbr,2024-05-22 12:30:25+00:00,[],2024-06-22 00:08:54+00:00,2024-06-03 10:46:13+00:00,https://github.com/frappe/erpnext/issues/41589,"[('bug', None), ('released', None)]","[{'comment_id': 2148688310, 'issue_id': 2310413636, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 39, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-05 01:22:39 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2309769038,issue,open,,Supplier Invoice Date in Opening Invoice Creation Tool,"Hi,

In the opening Invoice Creation tool please provide Supplier Invoice Date field option
 
The reason is that sometimes we need to enter opening entries where the posting date is 01-04-2024, but we need to keep the invoice due date as an earlier date, such as 01-02-2024. In such cases, we need the supplier invoice date because if we enter an earlier supplier invoice date, we can also enter an earlier payment due date.

![image](https://github.com/frappe/erpnext/assets/110815754/0e63bb25-a449-4257-b1c3-87d0d443baf8)

",reeta-greycube,2024-05-22 07:19:04+00:00,[],2024-05-22 07:19:04+00:00,,https://github.com/frappe/erpnext/issues/41585,"[('feature-request', None)]",[],
2309705315,issue,open,,Total Outstanding amount in Payment Entry,"Hi,

Please provide us with the total outstanding amount in the payment entry. That would be very helpful to see.

![image](https://github.com/frappe/erpnext/assets/110815754/1e7dcd82-bb0a-4810-9429-ea7973a0059d)
",reeta-greycube,2024-05-22 06:42:54+00:00,[],2024-05-22 06:42:54+00:00,,https://github.com/frappe/erpnext/issues/41583,"[('feature-request', None)]",[],
2309646954,issue,closed,completed,Supplier Invoice Date in Payment Entry-> Payment Reference ,"Hi,

We would like to suggest an enhancement to the payment entry process. When adjusting purchase invoices, it would be highly beneficial to include a field for the Supplier Invoice Date from the Purchase Invoice.

Having this field visible will allow us to see the corresponding Supplier Invoice Date, making it easier to accurately adjust our entries according to the Purchase Invoice->Supplier Invoice Date

![image](https://github.com/frappe/erpnext/assets/110815754/cd262c74-2dd2-4768-9526-7580114678fa)
![image](https://github.com/frappe/erpnext/assets/110815754/9ef85aae-afd8-4496-b0f8-924f7826ad87)
",reeta-greycube,2024-05-22 06:06:14+00:00,[],2024-06-13 00:09:07+00:00,2024-05-29 05:08:49+00:00,https://github.com/frappe/erpnext/issues/41582,"[('feature-request', None)]","[{'comment_id': 2136522841, 'issue_id': 2309646954, 'author': 'Nihantra-Patel', 'body': 'Please read the comment: https://github.com/frappe/erpnext/pull/41587#issuecomment-2136518577', 'created_at': datetime.datetime(2024, 5, 29, 5, 8, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-29 05:08:49 UTC): Please read the comment: https://github.com/frappe/erpnext/pull/41587#issuecomment-2136518577

"
2309583113,issue,closed,completed,Cancelled Purchase Invoices show up in Payment Reconciliation Tool / Payment Ledger Entries not DeLinked,"### Information about bug

After cancelling several invoices and amending each, then trying to reconcile previously recorded payments, both the amended _and the cancelled_ invoices show up in the Payment Reconciliation tool.

Further investigation led to discovery that Payment Ledger Entries associated with the cancelled entries were not _DeLinked_. _DeLinking_ manually failed due to permission restrictions (e.g. `User ####@#### does not have access to this document: Payment Ledger Entry - f1e001f1fd`).

### Module

accounts

### Version

```
erpnext 15.24.1
frappe 15.27.0
nextcloud_integration 0.0.1
payments 0.0.1
```

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
(none)
```
",konradbr,2024-05-22 05:10:06+00:00,[],2024-07-19 00:08:57+00:00,2024-06-04 09:23:36+00:00,https://github.com/frappe/erpnext/issues/41581,"[('bug', None)]","[{'comment_id': 2126626897, 'issue_id': 2309583113, 'author': 'hpotabatti', 'body': ""Hey @konradbr \r\n\r\nI would like to replicate and investigate this issue.\r\nCould you please share the steps to replicate this locally along with your current system's Stock and Accounts Settings configurations?"", 'created_at': datetime.datetime(2024, 5, 23, 9, 16, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2128837904, 'issue_id': 2309583113, 'author': 'konradbr', 'body': 'Hi @hpotabatti\r\n\r\nThank you for your reply, I will provide you with more details at the earliest opportunity!', 'created_at': datetime.datetime(2024, 5, 24, 7, 54, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2147039508, 'issue_id': 2309583113, 'author': 'ruthra-kumar', 'body': 'This is not replicable. If the issue persits on a clean ERPNext instance, do share screenshots/videos of issue.', 'created_at': datetime.datetime(2024, 6, 4, 9, 23, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2172131751, 'issue_id': 2309583113, 'author': 'konradbr', 'body': '@ruthra-kumar I wasn\'t able to controllably reproduce this, but it did indeed happen again ""on its own"" for the one or other invoice. The workaround I found was to enable deletion of GL entries upon deletion of invoices, and deleting and re-posting from scratch the problematic invoices.', 'created_at': datetime.datetime(2024, 6, 17, 3, 50, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2198750026, 'issue_id': 2309583113, 'author': 'konradbr', 'body': '@ruthra-kumar I am facing this issue again. This happens specifically when I amend several (different) invoices in a row. It might have something to do with amending, then cancelling, then amending again the same invoice.\r\n\r\nUpdate: I have now noticed this happens also on original, unmodified invoices.\r\n\r\n<img width=""906"" alt=""Screenshot 2024-06-30 at 22 37 05"" src=""https://github.com/frappe/erpnext/assets/28401247/d901754e-4519-48fe-b897-b2c5e60273b3"">', 'created_at': datetime.datetime(2024, 6, 30, 20, 37, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2198993047, 'issue_id': 2309583113, 'author': 'ruthra-kumar', 'body': 'can you post screenshot of payment ledger entries of those purchase invoices?', 'created_at': datetime.datetime(2024, 7, 1, 2, 23, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2201929244, 'issue_id': 2309583113, 'author': 'konradbr', 'body': '@ruthra-kumar I had to delete these to be able to progress with work, but will post more detail next time this happens. Note that there is something similar happening with some cancelled *Process Deferred Expense* items, whereby these still show up in spite of being cancelled.', 'created_at': datetime.datetime(2024, 7, 2, 4, 59, 52, tzinfo=datetime.timezone.utc)}]","hpotabatti on (2024-05-23 09:16:52 UTC): Hey @konradbr 

I would like to replicate and investigate this issue.
Could you please share the steps to replicate this locally along with your current system's Stock and Accounts Settings configurations?

konradbr (Issue Creator) on (2024-05-24 07:54:01 UTC): Hi @hpotabatti

Thank you for your reply, I will provide you with more details at the earliest opportunity!

ruthra-kumar on (2024-06-04 09:23:36 UTC): This is not replicable. If the issue persits on a clean ERPNext instance, do share screenshots/videos of issue.

konradbr (Issue Creator) on (2024-06-17 03:50:01 UTC): @ruthra-kumar I wasn't able to controllably reproduce this, but it did indeed happen again ""on its own"" for the one or other invoice. The workaround I found was to enable deletion of GL entries upon deletion of invoices, and deleting and re-posting from scratch the problematic invoices.

konradbr (Issue Creator) on (2024-06-30 20:37:21 UTC): @ruthra-kumar I am facing this issue again. This happens specifically when I amend several (different) invoices in a row. It might have something to do with amending, then cancelling, then amending again the same invoice.

Update: I have now noticed this happens also on original, unmodified invoices.

<img width=""906"" alt=""Screenshot 2024-06-30 at 22 37 05"" src=""https://github.com/frappe/erpnext/assets/28401247/d901754e-4519-48fe-b897-b2c5e60273b3"">

ruthra-kumar on (2024-07-01 02:23:22 UTC): can you post screenshot of payment ledger entries of those purchase invoices?

konradbr (Issue Creator) on (2024-07-02 04:59:52 UTC): @ruthra-kumar I had to delete these to be able to progress with work, but will post more detail next time this happens. Note that there is something similar happening with some cancelled *Process Deferred Expense* items, whereby these still show up in spite of being cancelled.

"
2309322579,issue,closed,completed,Stock Balance is incorrect for Batch,"### Information about bug

I have mentioned this before, but got my message closed and surprised more people are not facing similar issue. Thanks to a post by  @Nihantra-Patel i dug deeper and still found the issue to be a bug in the system and not an erorr of data entry.

I have a product that was purchased last year
Then selling that product this year. But when generating the Batch-Wise Balance History its very clear that there is a bug in the way the Stock Ledger is calculating the stock value. 

If I take a long to and from date, which encompases the original purchase, the system calculates the balance correctly as you can see here:
![image](https://github.com/frappe/erpnext/assets/85059961/9c99df84-ee4b-4292-946c-8f99a852fc9b)
shows a balance of 28,250 units.

If I run same report in Stock Ledger, 
![image](https://github.com/frappe/erpnext/assets/85059961/bcdbb019-582e-4a62-b284-ff2a20f8f25a)
witha  long date range of more than a year, I get the same stock balance of 28,250 units. great...

But if I run the same report in Stock Ledger, chaning the date range to this year ...
![image](https://github.com/frappe/erpnext/assets/85059961/1799f8ac-3f1b-4890-9f41-be2247d07bce)
You can clearly see that the Opening Balance is 172,800 units, and all subsquent movements done has caused the stock level balance to go into negative.

This is a bug.


### Module

stock

### Version

Frappe: 15.21
ERPNext: 15.24

Using FrappeCloud

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",ablashek,2024-05-22 00:17:37+00:00,['rohitwaghchaure'],2024-06-22 00:08:51+00:00,2024-06-04 06:28:51+00:00,https://github.com/frappe/erpnext/issues/41580,"[('bug', None)]","[{'comment_id': 2145181637, 'issue_id': 2309322579, 'author': 'rohitwaghchaure', 'body': '@ablashek what is the stock transaction document types for negative entries? have you hosted your site on FC? if yes please share the site name', 'created_at': datetime.datetime(2024, 6, 3, 13, 17, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146711918, 'issue_id': 2309322579, 'author': 'rohitwaghchaure', 'body': ""@ablashek we have fixed the issue related to opening stock for the stock ledger report and tomorrow we'll release the fix \r\nFixed https://github.com/frappe/erpnext/pull/41758"", 'created_at': datetime.datetime(2024, 6, 4, 6, 28, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2149669476, 'issue_id': 2309322579, 'author': 'ablashek', 'body': 'hi @rohitwaghchaure , yes issue has been resolved. Thanks!', 'created_at': datetime.datetime(2024, 6, 5, 12, 6, 39, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure (Assginee) on (2024-06-03 13:17:09 UTC): @ablashek what is the stock transaction document types for negative entries? have you hosted your site on FC? if yes please share the site name

rohitwaghchaure (Assginee) on (2024-06-04 06:28:16 UTC): @ablashek we have fixed the issue related to opening stock for the stock ledger report and tomorrow we'll release the fix 
Fixed https://github.com/frappe/erpnext/pull/41758

ablashek (Issue Creator) on (2024-06-05 12:06:39 UTC): hi @rohitwaghchaure , yes issue has been resolved. Thanks!

"
2309181573,issue,open,,Production Plan Issues,"This is a combined feature request bug list for Production Plans

The following issues need solving:

- [bug] The `Qty As Per BOM` for raw materials is not correct. I haven't found the exact combination that causes the issue but in a several level deep multi-level BOM with the same item included in multiple subassembly BOMs, qty 3, production plan gives a value of 33, Work Order gives 18 (which is correct) for a raw material
- [regression] I'm sure there used to be an option to create Work Orders either as a single top-level (flattened) Work Order, or multiple to match the subassemblies. Now multiple work orders are enforced even though the Work Order is capable of both.
- [bug] The Get Raw Materials for Transfer button pops up a dialog for source warehouses, but it does not traverse down the tree from warehouse groups, meaning you have to select all warehouses you want to consider. Whereas the subassembly warehouse above does traverse the tree. Please fix this
- [bug] The Get Raw Materials for Transfer button also calculates purchases, even though there is a separate button for purchases. It would make more sense if they were kept separate.
- [feature] in connection with above, the production plan calculates the BOM level, but this is not transferred to the Work Orders. So for a complex assembly, it is impossible to easily figure out which work order to start first. The level needs to be available on the work order to sort by, and ideally there should be a status to say whether dependency Work Orders have been completed
- [feature] another feature that would be useful would be to create work orders in levels from the ground up. Only once the lower level has been completed and is in stock can the next level work orders be created
- [feature] the Production Plan Summary report can be used to track the manufacturing progress of a plan. But another report is needed to say when production can commence with regards the raw materials, i.e. it should show any related purchase orders, the received qty vs required qty vs pending qty vs ordered qty vs reserved qty & the expected date vs required date. The Purchase Order Analysis report comes close, the Production Planning report also comes close, Stock Reports come close, but nothing quite hits the nail on the head. Ideally there should be a status and date updated on the Production Plan to show when/whether the production can commence of each subassembly, based purely on purchasing of raw materials. In other words how do you answer the question: can I start production yet, and if not, when?

ERPNext: v15.22.2

Related: https://github.com/frappe/erpnext/pull/40150
",casesolved-co-uk,2024-05-21 21:53:10+00:00,[],2024-05-21 22:01:31+00:00,,https://github.com/frappe/erpnext/issues/41579,"[('feature-request', None)]",[],
2308105567,issue,closed,completed,Submitting a sales invoice (with stock update checked) for a reserved order is not marking the reserved entry delivered,"### Information about bug
Submitting a sales invoice (with stock update checked) for a reserved order is not marking the reserved entry delivered

### Module

stock

### Version

V15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",ayush22051989,2024-05-21 11:47:34+00:00,['ruthra-kumar'],2024-06-19 00:08:40+00:00,2024-06-04 09:16:58+00:00,https://github.com/frappe/erpnext/issues/41577,"[('bug', None)]","[{'comment_id': 2146655438, 'issue_id': 2308105567, 'author': 'ruthra-kumar', 'body': 'Does it happen for every Sales Order or a select few? Would it be possible to share some steps to replicate?', 'created_at': datetime.datetime(2024, 6, 4, 5, 40, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2147025485, 'issue_id': 2308105567, 'author': 'ruthra-kumar', 'body': 'This is not replicable. With the same scenarios, Sales Order\'s status is being updated to completed.\r\n\r\n<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 44 25\u202fPM"" src=""https://github.com/frappe/erpnext/assets/3272205/ed3bc552-0e4c-4a55-bb8a-9a17c65638f3"">\r\n\r\n<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 44 43\u202fPM"" src=""https://github.com/frappe/erpnext/assets/3272205/18ffe91d-776b-45da-b8cc-5d97138312a7"">', 'created_at': datetime.datetime(2024, 6, 4, 9, 16, 58, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-06-04 05:40:32 UTC): Does it happen for every Sales Order or a select few? Would it be possible to share some steps to replicate?

ruthra-kumar (Assginee) on (2024-06-04 09:16:58 UTC): This is not replicable. With the same scenarios, Sales Order's status is being updated to completed.

<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 44 25 PM"" src=""https://github.com/frappe/erpnext/assets/3272205/ed3bc552-0e4c-4a55-bb8a-9a17c65638f3"">

<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 44 43 PM"" src=""https://github.com/frappe/erpnext/assets/3272205/18ffe91d-776b-45da-b8cc-5d97138312a7"">

"
2307500191,issue,closed,completed,Report Deferred Revenue and Expense does not filter by Company,"### Information about bug

When trying to display Deferred Revenue and Expense reports for two different companies (both belonging to same parent company), applying the Company filter seems to have no effect — the data remains the same independent of which company (either child or parent company) is selected in the filter:

<img width=""898"" alt=""Screenshot 2024-05-21 at 09 04 32"" src=""https://github.com/frappe/erpnext/assets/28401247/25ef8f31-1b85-4a46-b574-3f69f4dc0ab5"">

result for company 1:

<img width=""375"" alt=""Screenshot 2024-05-21 at 09 02 24"" src=""https://github.com/frappe/erpnext/assets/28401247/7c362e58-741b-43df-bd00-75d68979e726"">

result for company 2:

<img width=""386"" alt=""Screenshot 2024-05-21 at 09 03 23"" src=""https://github.com/frappe/erpnext/assets/28401247/2cf4e6bc-4a5a-4f5e-aea1-28a7f64b8274"">

### Module

accounts

### Version

bench: 5.16.2
erpnext 15.24.1
frappe 15.27.0
nextcloud_integration 0.0.1
payments 0.0.1

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",konradbr,2024-05-21 07:07:19+00:00,[],2024-06-19 00:08:50+00:00,2024-06-03 11:33:02+00:00,https://github.com/frappe/erpnext/issues/41566,"[('bug', None)]","[{'comment_id': 2144964009, 'issue_id': 2307500191, 'author': 'deepeshgarg007', 'body': ""@konradbr This is how all the reports work in ERPNext, company filters don't honor parent/child company relationships. This is intentional."", 'created_at': datetime.datetime(2024, 6, 3, 11, 33, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146892734, 'issue_id': 2307500191, 'author': 'konradbr', 'body': ""@deepeshgarg007 I am almost certain this is a bug:\r\n\r\nYou're talking about honoring parent/child company relationships, whereas I mean that the filter does not work *at all*, *for this specific report*. Meaning that in other reports work fine, whereas in this report, the filter has no effect whatsoever.\r\n\r\nCould you please kindly re-open this thread? I can provide you with more information, or even dig into the code to try and help in finding a solution.\r\n\r\nMany thanks for your response,\r\nAll the best,\r\n\r\nK."", 'created_at': datetime.datetime(2024, 6, 4, 8, 14, 49, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 on (2024-06-03 11:33:02 UTC): @konradbr This is how all the reports work in ERPNext, company filters don't honor parent/child company relationships. This is intentional.

konradbr (Issue Creator) on (2024-06-04 08:14:49 UTC): @deepeshgarg007 I am almost certain this is a bug:

You're talking about honoring parent/child company relationships, whereas I mean that the filter does not work *at all*, *for this specific report*. Meaning that in other reports work fine, whereas in this report, the filter has no effect whatsoever.

Could you please kindly re-open this thread? I can provide you with more information, or even dig into the code to try and help in finding a solution.

Many thanks for your response,
All the best,

K.

"
2307488982,issue,closed,completed,Error: Value missing for None: parenttypeError: Value missing for None: parent,"### Information about bug

when i create new custom report its give such types of error

### Module

accounts

### Version

ERPNext: v15.22.0 (version-15)

Frappe Framework: v15.25.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Error: Value missing for None: parenttype
Error: Value missing for None: parent
```
",amansonimtr,2024-05-21 07:01:14+00:00,[],2024-06-13 00:09:00+00:00,2024-05-22 07:24:39+00:00,https://github.com/frappe/erpnext/issues/41565,"[('bug', None)]","[{'comment_id': 2124056209, 'issue_id': 2307488982, 'author': 'Nihantra-Patel', 'body': 'We tested both Report Builder and Custom Report. so everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/756e4385-5099-4649-a670-6393f97fd45d', 'created_at': datetime.datetime(2024, 5, 22, 7, 24, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2137296944, 'issue_id': 2307488982, 'author': 'amansonimtr', 'body': 'Tq Bhaiya all done', 'created_at': datetime.datetime(2024, 5, 29, 12, 30, 8, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-22 07:24:39 UTC): We tested both Report Builder and Custom Report. so everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/756e4385-5099-4649-a670-6393f97fd45d

amansonimtr (Issue Creator) on (2024-05-29 12:30:08 UTC): Tq Bhaiya all done

"
2307314297,issue,open,,Payment Request Bulk : Bulk payment request for oustanding Sales Invoice from Action button.,"In Selling Module, Sales Invoice having the following status like Unpaid/Partially Paid/Over Due we need an action button like Delivery Note/Payment for Payment Request Also...

In case of Thousands of oustanding invoices, we need to followup for pending dues.
Kindly add Payment Request Option in Bulk Action Button same as Delivery Note and Payment.

![Screenshot 2024-05-21 104848](https://github.com/frappe/erpnext/assets/60181335/ac163013-049c-440c-be07-392bcb97b337)
",manyam0258,2024-05-21 05:19:29+00:00,[],2024-05-21 05:19:29+00:00,,https://github.com/frappe/erpnext/issues/41563,"[('feature-request', None)]",[],
2307272900,issue,closed,completed,Unloading Page,"### Information about bug

Cant load page 
![image](https://github.com/frappe/erpnext/assets/170392391/4783cd83-313a-40bc-af05-cd77d1ee9e54)


### Module

selling

### Version

Hase Utama Indonesia

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",ardhirahmatfauzi,2024-05-21 04:40:35+00:00,[],2024-06-06 00:08:51+00:00,2024-05-21 05:19:42+00:00,https://github.com/frappe/erpnext/issues/41560,"[('bug', None)]","[{'comment_id': 2121761455, 'issue_id': 2307272900, 'author': 'Nihantra-Patel', 'body': '**We no longer provide support for version 13 or older.**\r\n\r\nKindly upgrade to version 14 or 15.\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!', 'created_at': datetime.datetime(2024, 5, 21, 5, 19, 42, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-21 05:19:42 UTC): **We no longer provide support for version 13 or older.**

Kindly upgrade to version 14 or 15.

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

"
2306072334,issue,closed,completed,Error not applicable with Crypto :: Conversion rate cannot be 0 or 1,"### Information about bug

We also use crypto as a currency. 

One of the crypto we are dealing with  is USDC which is tied to the US dollar and the value is exactly 1. i.e. 1 USDC = 1 USD.

When ever I create a transaction using this crypto, ex Purchase Invoice, When I try to save the transaction, it gives an error

""Conversion rate cannot be 0 or 1""

This should not be happening as this is a valid transacstion in the real world. 

Hence this error check for 0 or 1 (in this case 1) is invalid and needs to be corrected.

### Module

accounts

### Version

ERPNext: v14.64.0 (version-14)

Frappe Framework: v14.66.3 (version-14)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Conversion rate cannot be 0 or 1
```
",frewper,2024-05-20 14:01:50+00:00,[],2024-06-18 00:09:15+00:00,2024-06-03 11:34:14+00:00,https://github.com/frappe/erpnext/issues/41559,"[('bug', None)]","[{'comment_id': 2121769797, 'issue_id': 2306072334, 'author': 'Nihantra-Patel', 'body': ""Because validation already set:\r\n\r\nhttps://github.com/frappe/erpnext/blob/dfaca932920efb4083ef4071a074095b1e25738d/erpnext/controllers/accounts_controller.py#L2325-L2334\r\n\r\nIt's responsible for checking the validity of a conversion rate between currencies. Here's what it does:\r\n\r\n1. It first gets the default currency of the company where the transaction is occurring.\r\n2. Then it checks if there is a default currency set for the company. If not, it throws an error asking the user to enter the default currency.\r\n3. Next, it evaluates three conditions:\r\n   a. If the currency of the transaction matches the default currency and the conversion rate is not 1, or if there's no conversion rate specified.\r\n   b. If the currency of the transaction doesn't match the default currency and the conversion rate is 1.\r\n   If any of these conditions are met, it throws an error stating that the conversion rate cannot be 0 or 1.\r\n\r\nIn simpler terms, the code ensures that the conversion rate between currencies is valid. It checks if the conversion rate is neither 0 nor 1, and it makes sure that the conversion rate is specified when the currencies involved are different from the default currency of the company."", 'created_at': datetime.datetime(2024, 5, 21, 5, 28, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144966302, 'issue_id': 2306072334, 'author': 'nabinhait', 'body': 'As this is applicable to a very rare use-case, we have decided to keep the validation. You can bypass the validation by overriding the function, closing the issue.', 'created_at': datetime.datetime(2024, 6, 3, 11, 34, 14, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-21 05:28:24 UTC): Because validation already set:

https://github.com/frappe/erpnext/blob/dfaca932920efb4083ef4071a074095b1e25738d/erpnext/controllers/accounts_controller.py#L2325-L2334

It's responsible for checking the validity of a conversion rate between currencies. Here's what it does:

1. It first gets the default currency of the company where the transaction is occurring.
2. Then it checks if there is a default currency set for the company. If not, it throws an error asking the user to enter the default currency.
3. Next, it evaluates three conditions:
   a. If the currency of the transaction matches the default currency and the conversion rate is not 1, or if there's no conversion rate specified.
   b. If the currency of the transaction doesn't match the default currency and the conversion rate is 1.
   If any of these conditions are met, it throws an error stating that the conversion rate cannot be 0 or 1.

In simpler terms, the code ensures that the conversion rate between currencies is valid. It checks if the conversion rate is neither 0 nor 1, and it makes sure that the conversion rate is specified when the currencies involved are different from the default currency of the company.

nabinhait on (2024-06-03 11:34:14 UTC): As this is applicable to a very rare use-case, we have decided to keep the validation. You can bypass the validation by overriding the function, closing the issue.

"
2304540348,issue,closed,completed,Error Using opening invoice creation tool,"### Information about bug

When I try to create a new invoice in the opening invoice creation tool I get the an error saying: ""Could not find Row #1: UOM: Nos"".
<img width=""1437"" alt=""Screenshot 2024-05-19 at 12 32 09 PM"" src=""https://github.com/frappe/erpnext/assets/80753288/3b5edb52-da95-4e62-9967-487750920d08"">


### Module

accounts

### Version

ERPNext: v15.24.0 (HEAD)
Frappe Framework: v15.27.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",norel-misr,2024-05-19 10:26:17+00:00,[],2024-06-04 00:08:36+00:00,2024-05-20 09:02:33+00:00,https://github.com/frappe/erpnext/issues/41541,"[('bug', None)]","[{'comment_id': 2120004507, 'issue_id': 2304540348, 'author': 'Nihantra-Patel', 'body': 'I tested with the same (latest) version, so everything is working fine. No problems were encountered.\r\n\r\nPlease check it.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/0af93533-cd97-427f-8eb9-dc42ce875cf6\r\n\r\nIf you rename, change, or delete ""Nos,"" you will face issues. Otherwise, you won\'t.', 'created_at': datetime.datetime(2024, 5, 20, 9, 2, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-20 09:02:33 UTC): I tested with the same (latest) version, so everything is working fine. No problems were encountered.

Please check it.


https://github.com/frappe/erpnext/assets/141945075/0af93533-cd97-427f-8eb9-dc42ce875cf6

If you rename, change, or delete ""Nos,"" you will face issues. Otherwise, you won't.

"
2304141453,issue,closed,completed,Turkey Create chart Of Account,Adaptation of TURKEY's uniform chart of accounts to ERPNext,fzozyurt,2024-05-18 15:43:13+00:00,[],2024-07-19 00:08:54+00:00,2024-06-25 10:56:10+00:00,https://github.com/frappe/erpnext/issues/41536,"[('feature-request', None), ('released', None)]","[{'comment_id': 2205110646, 'issue_id': 2304141453, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 3, 5, 8, 36, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-03 05:08:36 UTC): :tada: This issue has been resolved in version 15.29.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2303925904,issue,open,,"dialog not refreshed in the ""Serial No And Batch Selector"" dialog when using scan to add new serial","### Information about bug

when using scan in the ""Serial No And Batch Selector"", the scanned serial is added but the screen is not refreshed.
when execute cur_dialog.refresh() in the js console, the scanned serial displayed.

### Module

stock

### Version

ERPNext 15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",ZhangLianK,2024-05-18 08:27:04+00:00,[],2024-06-03 12:59:02+00:00,,https://github.com/frappe/erpnext/issues/41535,"[('bug', None)]","[{'comment_id': 2118713139, 'issue_id': 2303925904, 'author': 'ZhangLianK', 'body': 'update_serial_batch_no() {\r\n\r\nfrappe.call({\r\n\t\t\t\t\tmethod: ""erpnext.stock.doctype.serial_and_batch_bundle.serial_and_batch_bundle.get_batch_no_from_serial_no"",\r\n\t\t\t\t\targs: {\r\n\t\t\t\t\t\tserial_no: scan_serial_no,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: (r) => {\r\n\t\t\t\t\t\tif (r.message) {\r\n\t\t\t\t\t\t\tthis.dialog.fields_dict.entries.df.data.push({\r\n\t\t\t\t\t\t\t\tserial_no: scan_serial_no,\r\n\t\t\t\t\t\t\t\tbatch_no: r.message,\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tthis.dialog.fields_dict.scan_serial_no.set_value("""");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});', 'created_at': datetime.datetime(2024, 5, 18, 8, 52, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2118717652, 'issue_id': 2303925904, 'author': 'ZhangLianK', 'body': '@rohitwaghchaure \r\ncould you please have a look on this issue? I think in the callback function should have a refresh.', 'created_at': datetime.datetime(2024, 5, 18, 9, 0, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2145142631, 'issue_id': 2303925904, 'author': 'nabinhait', 'body': ""Can't replicate in latest version. Can you make a video and attach it here?"", 'created_at': datetime.datetime(2024, 6, 3, 12, 59, 1, tzinfo=datetime.timezone.utc)}]","ZhangLianK (Issue Creator) on (2024-05-18 08:52:48 UTC): update_serial_batch_no() {

frappe.call({
					method: ""erpnext.stock.doctype.serial_and_batch_bundle.serial_and_batch_bundle.get_batch_no_from_serial_no"",
					args: {
						serial_no: scan_serial_no,
					},
					callback: (r) => {
						if (r.message) {
							this.dialog.fields_dict.entries.df.data.push({
								serial_no: scan_serial_no,
								batch_no: r.message,
							});

							this.dialog.fields_dict.scan_serial_no.set_value("""");
						}
					},
				});

ZhangLianK (Issue Creator) on (2024-05-18 09:00:20 UTC): @rohitwaghchaure 
could you please have a look on this issue? I think in the callback function should have a refresh.

nabinhait on (2024-06-03 12:59:01 UTC): Can't replicate in latest version. Can you make a video and attach it here?

"
2303635882,issue,closed,completed,`search_fields` and `title_field` in Address customize form has no effect,"### Information about bug

Setting `search_fields` and `title_field` in `Address` customize form has no effect on linked fields

Docs: https://frappeframework.com/docs/user/en/basics/doctypes/form_&_view_settings#title-field

## Steps to reproduce the issue

1. Set `search_fields` and `title_field` in `Address` customize form
2. Create a new `Quotation`, choose a party
3. Search addresses for customer or company, etc.
4. The title field will always be `city`, only when saved and refreshed will the `title_field` be shown
5. On the popup list, the title and description will also not show the `title_field` or `search_fields` as set on customize form

### Module

selling

### Version

ERPNext: v15.24.0 (HEAD)
Frappe Framework: v15.27.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",kehwar,2024-05-17 22:11:28+00:00,[],2024-06-18 00:09:02+00:00,2024-06-03 11:22:05+00:00,https://github.com/frappe/erpnext/issues/41532,"[('bug', None)]","[{'comment_id': 2144943820, 'issue_id': 2303635882, 'author': 'nabinhait', 'body': ""I have tested in version 15, it's working as expected. The title and search_field value is showing while searching."", 'created_at': datetime.datetime(2024, 6, 3, 11, 22, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2145185603, 'issue_id': 2303635882, 'author': 'kehwar', 'body': 'This issue was specific to linked address fields, because a custom query is used\r\n\r\nThis issue is still present, but should be fixed for the next release\r\n\r\nSee: https://github.com/frappe/frappe/pull/26611 https://github.com/frappe/frappe/pull/26570', 'created_at': datetime.datetime(2024, 6, 3, 13, 19, 4, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-03 11:22:05 UTC): I have tested in version 15, it's working as expected. The title and search_field value is showing while searching.

kehwar (Issue Creator) on (2024-06-03 13:19:04 UTC): This issue was specific to linked address fields, because a custom query is used

This issue is still present, but should be fixed for the next release

See: https://github.com/frappe/frappe/pull/26611 https://github.com/frappe/frappe/pull/26570

"
2302427541,issue,closed,completed,Issue when working with Batch (Stock Ledger not calculating Opening Balance),"              > You have to see all the transactions in that batch because somewhere in the transaction entries in that batch you have made a wrong entry. So comes this issue. If the opening data is entered, check if it is proper or not, otherwise, check the batch-wise balance history report. You have to view all transactions in the stock ledger, for that batch. The problem is not with the amount but with the quantity, which is showing as negative.

You should check the screenshots attached. Many of the comments you pass has already been checked. When I said amount, I mean amount of units ... should have used the word quantity to be more inline with ERPNext lingo.

If you see the 
![image](https://github.com/frappe/erpnext/assets/85059961/70ac4f05-082a-4622-a839-a190976a1f54)
The item has an opening balance of 172,800 units for that time period.
The very next row is a deduction (out quantity) of 28,250 units.
This should obviously lead to the a balance of (172,800 - 28,250 =) 144,550 units ... but the stock ledger is bringing up -28,250. It's like the balance is not taking into account the opening balance for that period.

This is a BUG, plain and simple.

And if you see my third screenshot 
![image](https://github.com/frappe/erpnext/assets/85059961/2ac62a72-5136-41e0-ad7e-1c83d8c991a6)
You will see that I cannot transact the quantity of 144,250 units because i have a negative stock of -28,250. Basically the system understands that for that BATCH, that WAREHOUSE, and that ITEM we should have a stock of 144,250 but when calculating within the year the opening balance which shows up isn't being taken into account.


And finally this forum should avoid closing bugs without first understanding what the problem is. My intention of posting is to help other users now and in the future. I've worked out this problem and it doesn't seem like a configuration issue ... plain and simple looks like to be a bug that wasn't there before.

_Originally posted by @ablashek in https://github.com/frappe/erpnext/issues/41507#issuecomment-2117312002_
            ",ablashek,2024-05-17 10:58:20+00:00,[],2024-06-06 00:08:49+00:00,2024-05-22 04:31:49+00:00,https://github.com/frappe/erpnext/issues/41521,[],"[{'comment_id': 2123846276, 'issue_id': 2302427541, 'author': 'Nihantra-Patel', 'body': 'Same issue: #41580\r\n\r\nClose for now!', 'created_at': datetime.datetime(2024, 5, 22, 4, 31, 49, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-22 04:31:49 UTC): Same issue: #41580

Close for now!

"
2301899573,issue,closed,completed,POS Closing Entry Issue,"### Information about bug

POS Closing procedure collects all the POS made in between the POS Opening and Closing Time and consolidates them in a Sales Invoice.

But the consolidation misses the POS Invoice which was created just at the time of Closing.

Example: 

Closing Entry
<img width=""331"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/40687270/47f7c3b9-7dad-4880-b92a-1e1f92546c51"">

Last POS Invoice.
<img width=""1258"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/40687270/5999ee62-63f4-47f8-acc1-c7cc60cf5624"">

POS Closed at : 11-05-2024 22:48
Last POS Created at: 11-05-2024 22:48

And this POS invoice remains unconsolidated forever.


### Module

selling

### Version

ERPNext: v15.20.5 (version-15)

Frappe Framework: v15.23.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",nrhdasa,2024-05-17 06:08:01+00:00,['ruthra-kumar'],2024-06-19 00:08:48+00:00,2024-06-04 08:38:52+00:00,https://github.com/frappe/erpnext/issues/41514,"[('bug', None)]","[{'comment_id': 2146703491, 'issue_id': 2301899573, 'author': 'ruthra-kumar', 'body': ""If you looks at the query that pulls POS Invoices, posting time is not used for filtering. POS Invoices that don't have `consolidated_invoice` set is pulled.\r\nhttps://github.com/frappe/erpnext/blob/a8fc32dc3256963ef72fbf1681e53b9a357dce23/erpnext/accounts/doctype/pos_closing_entry/pos_closing_entry.py#L155-L166"", 'created_at': datetime.datetime(2024, 6, 4, 6, 21, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146942144, 'issue_id': 2301899573, 'author': 'ruthra-kumar', 'body': 'This is not replicable. Closing this.\r\nYou can reopen if issue recurs.', 'created_at': datetime.datetime(2024, 6, 4, 8, 38, 52, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-06-04 06:21:35 UTC): If you looks at the query that pulls POS Invoices, posting time is not used for filtering. POS Invoices that don't have `consolidated_invoice` set is pulled.
https://github.com/frappe/erpnext/blob/a8fc32dc3256963ef72fbf1681e53b9a357dce23/erpnext/accounts/doctype/pos_closing_entry/pos_closing_entry.py#L155-L166

ruthra-kumar (Assginee) on (2024-06-04 08:38:52 UTC): This is not replicable. Closing this.
You can reopen if issue recurs.

"
2301518748,issue,closed,completed,Issue when working with Batch (Stock Ledger not calculating Opening Balance) ,"### Information about bug

I have an issue when using ERPNext with 

I am trying to make a Delivery Note for an item that when looking at the inventory level is there for the warehouse and batch number in question.
![image](https://github.com/frappe/erpnext/assets/85059961/dcdda59e-a980-4536-805c-1511018b0c6f)

But if I make the same Stock Ledger report taking into account this year, I get:
Negative amounts. It's like report didn't know that there was a stock entry before.

![image](https://github.com/frappe/erpnext/assets/85059961/86010e60-ef02-4aae-b320-75744dbf7a74)


Then when I try to make a delivery note, it shows an error that I have negative -28250 units in stock.
![WhatsApp Image 2024-05-16 at 18 10 09_d79798f1](https://github.com/frappe/erpnext/assets/85059961/3446b11e-5848-499a-a45c-968e86f77af9)


Basically the issue arrises in Stock Ledger that the Opening Balance isn't taken into account for the discount calculations. Secondly and not sure if this is related, but all throughout the system it shows me I ahve stock on hand under this warehouse/batch code/item combination. But when I actually try to submit it says I have negative value same as when the Stock Ledger report when I limit the dates.

This is causing an issue where I have the goods on hand but I cannot submit any documents. Nor can I transfer, or do a recon.


### Module

stock

### Version

Frappe Framework v15.27.0
ERPNext v15.23.2

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",ablashek,2024-05-16 23:02:26+00:00,[],2024-06-01 00:11:11+00:00,2024-05-17 04:57:43+00:00,https://github.com/frappe/erpnext/issues/41507,"[('bug', None)]","[{'comment_id': 2116627043, 'issue_id': 2301518748, 'author': 'Nihantra-Patel', 'body': 'You have to see all the transactions in that batch because somewhere in the transaction entries in that batch you have made a wrong entry. So comes this issue. If the opening data is entered, check if it is proper or not, otherwise, check the batch-wise balance history report. You have to view all transactions in the stock ledger, for that batch. The problem is not with the amount but with the quantity, which is showing as negative.', 'created_at': datetime.datetime(2024, 5, 17, 4, 57, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2117312002, 'issue_id': 2301518748, 'author': 'ablashek', 'body': ""> You have to see all the transactions in that batch because somewhere in the transaction entries in that batch you have made a wrong entry. So comes this issue. If the opening data is entered, check if it is proper or not, otherwise, check the batch-wise balance history report. You have to view all transactions in the stock ledger, for that batch. The problem is not with the amount but with the quantity, which is showing as negative.\r\n\r\nYou should check the screenshots attached. Many of the comments you pass has already been checked. When I said amount, I mean amount of units ... should have used the word quantity to be more inline with ERPNext lingo.\r\n\r\nIf you see the \r\n![image](https://github.com/frappe/erpnext/assets/85059961/70ac4f05-082a-4622-a839-a190976a1f54)\r\nThe item has an opening balance of 172,800 units for that time period.\r\nThe very next row is a deduction (out quantity) of 28,250 units.\r\nThis should obviously lead to the a balance of (172,800 - 28,250 =) 144,550 units ... but the stock ledger is bringing up -28,250. It's like the balance is not taking into account the opening balance for that period.\r\n\r\nThis is a BUG, plain and simple.\r\n\r\nAnd if you see my third screenshot \r\n![image](https://github.com/frappe/erpnext/assets/85059961/2ac62a72-5136-41e0-ad7e-1c83d8c991a6)\r\nYou will see that I cannot transact the quantity of 144,250 units because i have a negative stock of -28,250. Basically the system understands that for that BATCH, that WAREHOUSE, and that ITEM we should have a stock of 144,250 but when calculating within the year the opening balance which shows up isn't being taken into account.\r\n\r\n\r\nAnd finally this forum should avoid closing bugs without first understanding what the problem is. My intention of posting is to help other users now and in the future. I've worked out this problem and it doesn't seem like a configuration issue ... plain and simple looks like to be a bug that wasn't there before."", 'created_at': datetime.datetime(2024, 5, 17, 10, 54, 9, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-17 04:57:43 UTC): You have to see all the transactions in that batch because somewhere in the transaction entries in that batch you have made a wrong entry. So comes this issue. If the opening data is entered, check if it is proper or not, otherwise, check the batch-wise balance history report. You have to view all transactions in the stock ledger, for that batch. The problem is not with the amount but with the quantity, which is showing as negative.

ablashek (Issue Creator) on (2024-05-17 10:54:09 UTC): You should check the screenshots attached. Many of the comments you pass has already been checked. When I said amount, I mean amount of units ... should have used the word quantity to be more inline with ERPNext lingo.

If you see the 
![image](https://github.com/frappe/erpnext/assets/85059961/70ac4f05-082a-4622-a839-a190976a1f54)
The item has an opening balance of 172,800 units for that time period.
The very next row is a deduction (out quantity) of 28,250 units.
This should obviously lead to the a balance of (172,800 - 28,250 =) 144,550 units ... but the stock ledger is bringing up -28,250. It's like the balance is not taking into account the opening balance for that period.

This is a BUG, plain and simple.

And if you see my third screenshot 
![image](https://github.com/frappe/erpnext/assets/85059961/2ac62a72-5136-41e0-ad7e-1c83d8c991a6)
You will see that I cannot transact the quantity of 144,250 units because i have a negative stock of -28,250. Basically the system understands that for that BATCH, that WAREHOUSE, and that ITEM we should have a stock of 144,250 but when calculating within the year the opening balance which shows up isn't being taken into account.


And finally this forum should avoid closing bugs without first understanding what the problem is. My intention of posting is to help other users now and in the future. I've worked out this problem and it doesn't seem like a configuration issue ... plain and simple looks like to be a bug that wasn't there before.

"
2299602252,issue,closed,completed,Stuck in Item valuation reposting in progress,"### Information about bug

I have created a landed cost voucher for an item based on its purchase reciept.  Now whenever I goto stock ledger report a message saying ""Item valuation reposting in progress. Report might show incorrect item valuation."" is displayed.  This message has been showing for sometime so I think the system is stuck in this re-evaluation.
Any solution ?

### Module

stock

### Version

v15.23.2 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",norel-misr,2024-05-16 07:39:44+00:00,[],2024-06-18 00:09:14+00:00,2024-06-03 11:35:47+00:00,https://github.com/frappe/erpnext/issues/41493,"[('bug', None)]","[{'comment_id': 2114314573, 'issue_id': 2299602252, 'author': 'rohitwaghchaure', 'body': '""Item valuation reposting in progress, Report might show incorrect item valuation""\r\nThis message shows when Repost Item Valuation records are is Queued state. Please check how many Repost Item Valuation records are is Queued state.', 'created_at': datetime.datetime(2024, 5, 16, 7, 52, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2114440421, 'issue_id': 2299602252, 'author': 'norel-misr', 'body': 'how do I check this ?', 'created_at': datetime.datetime(2024, 5, 16, 8, 22, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2116753910, 'issue_id': 2299602252, 'author': 'rohitwaghchaure', 'body': 'Search Repost Item Valuation list in the global search, after that you will see the list of Repost Item Valuation records. In the list view of Repost Item Valuation, set the status filter as Queued and check\r\n<img width=""708"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8780500/0e5209d3-8e6c-44b8-b615-b52b2ad1a084"">', 'created_at': datetime.datetime(2024, 5, 17, 5, 53, 12, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-05-16 07:52:18 UTC): ""Item valuation reposting in progress, Report might show incorrect item valuation""
This message shows when Repost Item Valuation records are is Queued state. Please check how many Repost Item Valuation records are is Queued state.

norel-misr (Issue Creator) on (2024-05-16 08:22:25 UTC): how do I check this ?

rohitwaghchaure on (2024-05-17 05:53:12 UTC): Search Repost Item Valuation list in the global search, after that you will see the list of Repost Item Valuation records. In the list view of Repost Item Valuation, set the status filter as Queued and check
<img width=""708"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/8780500/0e5209d3-8e6c-44b8-b615-b52b2ad1a084"">

"
2299320066,issue,closed,completed,"In the Balance Sheet report, the Provisional Profit / Loss (Credit) is showing 0 even when there is a Total Asset value present.","### Information about bug

In the Balance Sheet report, the Provisional Profit / Loss (Credit) is showing 0 even when there is a Total Asset value present.

#### Expected Behavior
The Provisional Profit / Loss (Credit) should be calculated as:
Total Asset−(Total Liability+Total Equity)
40,495.00-(0+0) = 40,495.00

#### Actual Behavior
The Provisional Profit / Loss (Credit) is displayed as 0 regardless of the Total Asset value.

![image](https://github.com/frappe/erpnext/assets/101191473/f998b0ef-fa07-4484-bc78-c4f326b6cdb1)


### Module

accounts

### Version

Frappe version - v15.26.0 (version-15)
ERPNext version - v15.23.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",mansi31199,2024-05-16 04:34:26+00:00,[],2024-07-10 10:45:49+00:00,2024-06-03 10:35:50+00:00,https://github.com/frappe/erpnext/issues/41488,"[('bug', None), ('released', None)]","[{'comment_id': 2220175235, 'issue_id': 2299320066, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 10, 10, 45, 48, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-10 10:45:48 UTC): :tada: This issue has been resolved in version 15.29.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2297543049,issue,open,,WebP photos in items,"### Information about bug

WebP type photos are unable to be displayed in doc type reports such as quotation or invoice, They will display on the website ok.
Frustrating that ERPNext is not keeping up with industry standards.
Please can you include the use of WebP very soon.

### Module

stock

### Version

ERPNext version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Crikeyy,2024-05-15 10:53:39+00:00,[],2024-11-07 10:04:25+00:00,,https://github.com/frappe/erpnext/issues/41483,"[('feature-request', None)]","[{'comment_id': 2461780668, 'issue_id': 2297543049, 'author': 'me2ne', 'body': ""i thing it's bug , because in website items also not showing and generate  Thumbnail (small picture) if we use webP picture , just show main picture"", 'created_at': datetime.datetime(2024, 11, 7, 9, 50, 59, tzinfo=datetime.timezone.utc)}]","me2ne on (2024-11-07 09:50:59 UTC): i thing it's bug , because in website items also not showing and generate  Thumbnail (small picture) if we use webP picture , just show main picture

"
2297018862,issue,closed,completed,Item wise sales register wont show delivery note linked with sales order,"### Information about bug

Created a sales order with delivery note and invoice 
in sales register and 
itemwise sales register the system is not able to show delivery note number

![image](https://github.com/frappe/erpnext/assets/112148467/32aef0f8-a403-42d4-b7b3-fb9d27c6fec4)


### Module

accounts, selling

### Version

ERPNext V14 and V15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",maveezmh,2024-05-15 06:53:22+00:00,[],2024-05-31 00:08:23+00:00,2024-05-15 07:12:54+00:00,https://github.com/frappe/erpnext/issues/41477,"[('bug', None)]","[{'comment_id': 2111752876, 'issue_id': 2297018862, 'author': 'Nihantra-Patel', 'body': 'Kindly upgrade to version 15, then refresh and check again because lots of bugs fixed in the new version.\r\n\r\nEverything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/55ce0a9c-be03-4b82-a669-bbfbba6ba64c', 'created_at': datetime.datetime(2024, 5, 15, 7, 12, 54, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-15 07:12:54 UTC): Kindly upgrade to version 15, then refresh and check again because lots of bugs fixed in the new version.

Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/55ce0a9c-be03-4b82-a669-bbfbba6ba64c

"
2297005539,issue,open,,Rounding Quantity based on UoM for various doctypes ,"### Information about bug

Referencing https://github.com/frappe/erpnext/issues/15995, 

> If the UoM has ""is whole number"" checked, currently, the system just triggers a warning to the user and disallows them from entering fraction values.

> A new setting is to be added in stock setting which would automatically round-off the Quantity to the nearest whole number (next bigger or smaller) according to the setting.

The issue was closed without referencing any PR update. I have raised this as a bug due to the ambiguity regarding its current status—whether it is completed (and therefore a bug for my system setup) or involved in other indirect developments. If needed, please update the tag accordingly.

There is indeed a rounding feature available, but it is limited to accounts and sales, specifically banking and commercial rounding. However, I could not find any such feature for the Manufacturing and Stock modules. I thoroughly checked the ERPNext documentation, forums, GitHub Issues page, and other discussions about ERPNext on the internet.

I also looked within ERPNext itself, exploring the settings of each module, system settings, and almost every doctype in their accompanying child tables.

The Requirement:

The ability to round up or round down (as necessary) the quantities, especially those mentioned in numbers (e.g., packaging items).

Proposed Workflow:

1. A Bill of Materials (BOM) [Formulation/Recipe] is created beforehand.
2. A Sales Order is raised.
3. A Work Order is generated in conjunction with the Sales Order and associated BOM for the items mentioned in the BOM.

While floating numbers for kilograms are required, using floating numbers for items in numbers causes unnecessary confusion. Subsequent processes, like Pick Lists, Material Requests, and Stock Entries, perpetuate this confusion and do not accept the values as expected. This requires manual modifications, introducing the potential for human error.

Meanwhile, as a temporary solution, I have started customizing the form to add another field labeled ""Estimated Required Quantity"" with an integer datatype, as opposed to the system default ""Required Quantity"" which has a float datatype. Should I continue down this path, or should I consider server/client scripting instead?
Also, if possible I would be grateful if you share an idea to achieve the requirement.

### Module

stock, manufacturing

### Version

**ERPNext:** v15.21.2 (version-15)
**Frappe Framework:** v15.24.1 (version-15)
**Frappe HR:** v15.20.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",aceIsHere,2024-05-15 06:45:53+00:00,[],2024-05-15 07:15:54+00:00,,https://github.com/frappe/erpnext/issues/41476,"[('feature-request', None)]",[],
2295883527,issue,open,,Paypal Setting for multiple legal entity ,"The ERPNext system's payment module currently supports PayPal integration with only one set of configuration. However, in scenarios where a customer operates multiple legal entities, each requiring its own distinct PayPal configuration, the system presents a limitation. As it stands, the system allows configuration for only one PayPal account, which poses challenges for customers managing multiple entities.

Therefore, we kindly request considering this as a feature enhancement. By expanding the system's capabilities to support multiple PayPal configurations, customers with multiple legal entities would benefit from enhanced flexibility and seamless integration with their respective PayPal accounts. This enhancement would streamline operations and ensure compatibility with diverse business structures, ultimately improving user experience and satisfaction.


",smanthprbhu,2024-05-14 16:16:44+00:00,[],2024-05-14 16:28:49+00:00,,https://github.com/frappe/erpnext/issues/41470,"[('feature-request', None)]","[{'comment_id': 2110653732, 'issue_id': 2295883527, 'author': 'prasanth1166', 'body': '@smanthprbhu thanks for posting the issue \r\n\r\nEven we require this feature and will be helpful in our project.', 'created_at': datetime.datetime(2024, 5, 14, 16, 28, 47, tzinfo=datetime.timezone.utc)}]","prasanth1166 on (2024-05-14 16:28:47 UTC): @smanthprbhu thanks for posting the issue 

Even we require this feature and will be helpful in our project.

"
2295820480,issue,open,,"""Optimize route"" in delivery trip with locked stops ends in infinite loop","### Information about bug

Optimizing the route in a delivery trip when some stops are locked ends up in blocking the page totally.

I have no stacktrace to provide, the page just freezes.

It looks like the job is done though because when I close the tab and load the delivery trip again the order of the stops is optimized.

### Module

stock

### Version

ERPNext: v15.22.0 (version-15)
Frappe Framework: v15.25.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",vcavel,2024-05-14 15:43:40+00:00,[],2024-05-14 15:43:40+00:00,,https://github.com/frappe/erpnext/issues/41469,"[('bug', None)]",[],
2295811321,issue,closed,completed,"""Get stops from"" in delivery trip does not work as expected","### Information about bug

When getting delivery notes from the ""Get stops from"" button in a delivery trip, all the existing stops are deleted and only the new stops are remaining.

The expected behavior should be that the new stops are added to the other ones.

That's how it worked in v14

Cheers

### Module

stock

### Version

ERPNext: v15.22.0 (version-15)
Frappe Framework: v15.25.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",vcavel,2024-05-14 15:39:18+00:00,[],2024-05-31 00:08:26+00:00,2024-05-15 04:24:33+00:00,https://github.com/frappe/erpnext/issues/41468,"[('bug', None)]","[{'comment_id': 2111555761, 'issue_id': 2295811321, 'author': 'Nihantra-Patel', 'body': 'Hi @vcavel,\r\n\r\nIssue has been fixed, please check it: https://github.com/frappe/erpnext/pull/41431\r\n\r\nUpcoming update will resolved your issue.', 'created_at': datetime.datetime(2024, 5, 15, 4, 24, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-15 04:24:33 UTC): Hi @vcavel,

Issue has been fixed, please check it: https://github.com/frappe/erpnext/pull/41431

Upcoming update will resolved your issue.

"
2295229902,issue,closed,completed,Unintended GST Expense Entry Appearing in Financial Reports.,"### Information about bug

I have encountered an issue where an extra GST expense entry is displayed in our financial reports without any corresponding transaction. This entry appears under the 'GST Expense - PSPL' account, but it was not expected nor used in any documented transactions.

Expected Behavior:
The 'GST Expense - PSPL' should only display entries that are explicitly recorded in transactions. There should be no extra entries unless they are associated with an actual transaction processed through the system.

Actual Behavior:
An extra entry for GST expenses is appearing in the report even though there has been no transaction to justify this entry.


![Screenshot from 2024-05-14 17-16-50](https://github.com/frappe/erpnext/assets/154511820/4df9651c-d11e-41f2-960d-f9312970bba0)

### Module

accounts

### Version

ERPnext Version- 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",shubhampreciholesports,2024-05-14 11:56:57+00:00,[],2024-06-18 00:09:16+00:00,2024-06-03 11:34:01+00:00,https://github.com/frappe/erpnext/issues/41460,"[('bug', None)]","[{'comment_id': 2111559358, 'issue_id': 2295229902, 'author': 'Nihantra-Patel', 'body': 'Open the purchase invoice transaction and review it. If you encounter any issues, please share the image of the complete purchase invoice or a video. This will help identify any errors in your transaction.', 'created_at': datetime.datetime(2024, 5, 15, 4, 29, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2111903119, 'issue_id': 2295229902, 'author': 'vorasmit', 'body': '@shubhampreciholesports,\r\n\r\nFollowing docs could be useful in how this came up.\r\nhttps://docs.indiacompliance.app/docs/configuration/purchase_transaction#itc-ineligibility', 'created_at': datetime.datetime(2024, 5, 15, 8, 35, 47, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-15 04:29:54 UTC): Open the purchase invoice transaction and review it. If you encounter any issues, please share the image of the complete purchase invoice or a video. This will help identify any errors in your transaction.

vorasmit on (2024-05-15 08:35:47 UTC): @shubhampreciholesports,

Following docs could be useful in how this came up.
https://docs.indiacompliance.app/docs/configuration/purchase_transaction#itc-ineligibility

"
2294669308,issue,open,,Stock Reservation For Work Order,"- Stock Reservation against the work order for Finished Goods
   - If a sales order is linked to the work order, reserve the stock upon completion of the work order (on submission of the Manufacture Stock Entry).
   - Users should only be able to use the Reserved finished item against the respective sales order.
- Stock Reservation against the work order for Raw Materials
   - On submission of the work order, reserve the available raw materials against the work order.
   - Add a button to unreserve raw materials against the work order.",rohitwaghchaure,2024-05-14 07:40:56+00:00,['Poorvi-R-Bhat'],2024-10-05 15:57:29+00:00,,https://github.com/frappe/erpnext/issues/41455,"[('feature-request', None)]","[{'comment_id': 2277811602, 'issue_id': 2294669308, 'author': 'satisharalkar', 'body': ""There are two scenarios\r\n- First Scenario: When we get the customer PO>>Sales Order >>If Stock available, reserve qty against SO for FG Items. If Partial Qty available in stock, reserve available qty and when new qty comes from supplier or from WIP to FG  then, reserve qty in FIFO method where SO's qty is not fulfilled.\r\n- Second Scenario : when PO from customer received and stock is not available fully or Partial, system to check BOM for this item and reserve Raw material purchased against this SO>>WO should get reserved as soon as Purchase receipt is submitted."", 'created_at': datetime.datetime(2024, 8, 9, 12, 14, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2366732589, 'issue_id': 2294669308, 'author': 'precihole', 'body': 'This is also required in our case.\r\n\r\n> * Stock Reservation against the work order for Finished Goods\r\n>   \r\n>   * If a sales order is linked to the work order, reserve the stock upon completion of the work order (on submission of the Manufacture Stock Entry).\r\n>   * Users should only be able to use the Reserved finished item against the respective sales order.\r\n> * Stock Reservation against the work order for Raw Materials\r\n>  \r\n>   * On submission of the work order, reserve the available raw materials against the work order.\r\n>   * Add a button to unreserve raw materials against the work order.', 'created_at': datetime.datetime(2024, 9, 22, 11, 19, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2366769391, 'issue_id': 2294669308, 'author': 'rohitwaghchaure', 'body': '@precihole Opened the PR https://github.com/frappe/erpnext/pull/43270', 'created_at': datetime.datetime(2024, 9, 22, 12, 40, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395100484, 'issue_id': 2294669308, 'author': 'RohitGalgali', 'body': 'Scenario: \r\nData for the scenario:\r\nFG -> Chair \r\nBOM-> 1. Wooden block - 4 nos.\r\n2. Fevicol - 500 grams.\r\n3. Wooden plank - 1 nos.\r\n\r\nStock:\r\nWooden block - 20 nos\r\nFevicol - 2500 grams\r\nWooden Plank - 5 nos\r\n\r\nScenario:\r\nSales Order 001-> Chair 5 items. (Received on 5th Oct 3pm) \r\nPPC -> No material required\r\n\r\nSales Order 002 -> Chair 2 items (Received on 5th Oct 3:05pm)\r\nPPC -> No material required ---> The problem starts here. During this PPC, the MRP assumes the stock in the warehouse is available for production.\r\n\r\nCan we reserve the BOM items as well?', 'created_at': datetime.datetime(2024, 10, 5, 15, 56, 14, tzinfo=datetime.timezone.utc)}]","satisharalkar on (2024-08-09 12:14:37 UTC): There are two scenarios
- First Scenario: When we get the customer PO>>Sales Order >>If Stock available, reserve qty against SO for FG Items. If Partial Qty available in stock, reserve available qty and when new qty comes from supplier or from WIP to FG  then, reserve qty in FIFO method where SO's qty is not fulfilled.
- Second Scenario : when PO from customer received and stock is not available fully or Partial, system to check BOM for this item and reserve Raw material purchased against this SO>>WO should get reserved as soon as Purchase receipt is submitted.

precihole on (2024-09-22 11:19:51 UTC): This is also required in our case.

rohitwaghchaure (Issue Creator) on (2024-09-22 12:40:57 UTC): @precihole Opened the PR https://github.com/frappe/erpnext/pull/43270

RohitGalgali on (2024-10-05 15:56:14 UTC): Scenario: 
Data for the scenario:
FG -> Chair 
BOM-> 1. Wooden block - 4 nos.
2. Fevicol - 500 grams.
3. Wooden plank - 1 nos.

Stock:
Wooden block - 20 nos
Fevicol - 2500 grams
Wooden Plank - 5 nos

Scenario:
Sales Order 001-> Chair 5 items. (Received on 5th Oct 3pm) 
PPC -> No material required

Sales Order 002 -> Chair 2 items (Received on 5th Oct 3:05pm)
PPC -> No material required ---> The problem starts here. During this PPC, the MRP assumes the stock in the warehouse is available for production.

Can we reserve the BOM items as well?

"
2294548929,issue,closed,completed,System should not allow to modify (Add or Remove) files from doctypes after they were submitted ,"Hi Team,

Currently ERP system is allowing to modify (Add or Remove) files (attachments) from Expense claim doctype after they were submitted. This is causing issue for finance team to track.  System should restrict the modification of files for audit purpose as well. 
 
The same logic should also be applicable to all other Doctypes. Once the document is in SUBMITTED status, users should not be allowed to modify the attachments.
 
Please prioritize this functionality urgently and implement the same in your upcoming releases.

Thanks
Asmith
![Expense](https://github.com/frappe/erpnext/assets/46068189/32e6ac80-3baa-4638-8916-2877c7a54136)


",asmithkumarreddy,2024-05-14 06:31:17+00:00,[],2024-06-07 00:09:05+00:00,2024-05-14 10:31:45+00:00,https://github.com/frappe/erpnext/issues/41454,"[('feature-request', None)]","[{'comment_id': 2109848414, 'issue_id': 2294548929, 'author': 'Nihantra-Patel', 'body': ""It's designed according to the user and client perspective. Actually, it's not possible because many users/clients need to make attachments after submission, so this feature request is not valid.\r\n\r\nBut I will share a suggestion: you can easily manage it using the client script. So please check it.\r\n\r\n```js\r\nfrappe.ui.form.on('Expense Claim', {\r\n\trefresh: function(frm) {\r\n\t    if (frm.doc.docstatus == 1) {\r\n\t        $('.form-attachments').css({'pointer-events': 'none'});\r\n\t    }\r\n\t}\r\n});\r\n```\r\n\r\nIf you want to do it for all doctype then you can set it in custom app. please check the reference:\r\n\r\nhttps://discuss.frappe.io/t/add-custom-script-to-all-doctypes/41773/2?u=ncp"", 'created_at': datetime.datetime(2024, 5, 14, 10, 31, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2126220289, 'issue_id': 2294548929, 'author': 'Nihantra-Patel', 'body': ""> ```\r\n> frappe.ui.form.on('Expense Claim', {\r\n> \trefresh: function(frm) {\r\n> \t    if (frm.doc.docstatus == 1) {\r\n> \t        $('.form-attachments').css({'pointer-events': 'none'});\r\n> \t    }\r\n> \t}\r\n> });\r\n> ```\r\n\r\nNow I have updated the script as you can't access the attachment in the above script.\r\nIf you want to access the attachment and don't want to delete the user after submit then please apply it.\r\n\r\n**For Version 15:**\r\n\r\n```js\r\nfrappe.ui.form.on('Expense Claim', {\r\n\trefresh: function(frm) {\r\n\t    if (frm.doc.docstatus == 1) {\r\n\t        $('button.add-attachment-btn.btn.btn-link.icon-btn').hide();\r\n\t        $('span.remove-btn.cursor-pointer').hide();\r\n\t    }\r\n\t}\r\n});\r\n```\r\n\r\n**For Version 14:**\r\n\r\n```js\r\nfrappe.ui.form.on('Expense Claim', {\r\n\trefresh: function(frm) {\r\n\t    if (frm.doc.docstatus == 1) {\r\n\t        $('li.attachments-actions').hide();\r\n\t        $('span.remove-btn.cursor-pointer').hide();\r\n\t    }\r\n\t}\r\n});\r\n```\r\n\r\nThen reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and check it."", 'created_at': datetime.datetime(2024, 5, 23, 4, 44, 41, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-14 10:31:45 UTC): It's designed according to the user and client perspective. Actually, it's not possible because many users/clients need to make attachments after submission, so this feature request is not valid.

But I will share a suggestion: you can easily manage it using the client script. So please check it.

```js
frappe.ui.form.on('Expense Claim', {
	refresh: function(frm) {
	    if (frm.doc.docstatus == 1) {
	        $('.form-attachments').css({'pointer-events': 'none'});
	    }
	}
});
```

If you want to do it for all doctype then you can set it in custom app. please check the reference:

https://discuss.frappe.io/t/add-custom-script-to-all-doctypes/41773/2?u=ncp

Nihantra-Patel on (2024-05-23 04:44:41 UTC): Now I have updated the script as you can't access the attachment in the above script.
If you want to access the attachment and don't want to delete the user after submit then please apply it.

**For Version 15:**

```js
frappe.ui.form.on('Expense Claim', {
	refresh: function(frm) {
	    if (frm.doc.docstatus == 1) {
	        $('button.add-attachment-btn.btn.btn-link.icon-btn').hide();
	        $('span.remove-btn.cursor-pointer').hide();
	    }
	}
});
```

**For Version 14:**

```js
frappe.ui.form.on('Expense Claim', {
	refresh: function(frm) {
	    if (frm.doc.docstatus == 1) {
	        $('li.attachments-actions').hide();
	        $('span.remove-btn.cursor-pointer').hide();
	    }
	}
});
```

Then reload <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> and check it.

"
2294542591,issue,open,,Trial Balance report should reflect only 0 as opening balances for all Income and Expense GLs ,"### Information about bug

As per Accounting rules, there is no opening balance for income and expense accounts. All the balances has to be moved to P&L A/c when we close the books. Trial Balance report should reflect only 0 as opening balances for all Income and Expense GLs as all the balances should get transferred to P&L A/c GL in the period closing voucher. Opening balances shouldn't change if we check or uncheck period closing entry check box.

### Module

accounts

### Version

Frappe Version 14
ERPNEXT Version 14

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Swati8848,2024-05-14 06:26:43+00:00,[],2024-07-31 16:20:13+00:00,,https://github.com/frappe/erpnext/issues/41453,"[('bug', None)]","[{'comment_id': 2114321039, 'issue_id': 2294542591, 'author': 'rohitwaghchaure', 'body': 'Did you create Period Closing Voucher for the last FY?\r\nhttps://docs.erpnext.com/docs/user/manual/en/period-closing-voucher', 'created_at': datetime.datetime(2024, 5, 16, 7, 53, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2114716243, 'issue_id': 2294542591, 'author': 'Swati8848', 'body': 'Yes after posting period closing voucher for 2023-2024, we are checking\r\nopening trial balance for 2024-2025.\r\n\r\nOn Thu, May 16, 2024 at 1:24\u202fPM rohitwaghchaure ***@***.***>\r\nwrote:\r\n\r\n> Did you create Period Closing Voucher for the last FY?\r\n> https://docs.erpnext.com/docs/user/manual/en/period-closing-voucher\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/41453#issuecomment-2114321039>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/BETCY62727GT4UD4ANJF73DZCRQ2HAVCNFSM6AAAAABHVQKNYOVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDCMJUGMZDCMBTHE>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 5, 16, 9, 43, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2260898484, 'issue_id': 2294542591, 'author': 'saivineeth100', 'body': '> Did you create Period Closing Voucher for the last FY? https://docs.erpnext.com/docs/user/manual/en/period-closing-voucher\r\n\r\nIrrespective of closing vouchers,\r\nIncome and Expense accounts (where report_type=""Profit and Loss"") should not have any opening or closing balances', 'created_at': datetime.datetime(2024, 7, 31, 16, 20, 12, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-05-16 07:53:51 UTC): Did you create Period Closing Voucher for the last FY?
https://docs.erpnext.com/docs/user/manual/en/period-closing-voucher

Swati8848 (Issue Creator) on (2024-05-16 09:43:49 UTC): Yes after posting period closing voucher for 2023-2024, we are checking
opening trial balance for 2024-2025.

On Thu, May 16, 2024 at 1:24 PM rohitwaghchaure ***@***.***>
wrote:

saivineeth100 on (2024-07-31 16:20:12 UTC): Irrespective of closing vouchers,
Income and Expense accounts (where report_type=""Profit and Loss"") should not have any opening or closing balances

"
2294509077,issue,closed,completed,Timeout Error while submiting delivery note which includes serialized items.,"### Information about bug

**Issue Description:**

Function: get_incoming_value_for_serial_nos  
File Path: /frappe-bench/apps/erpnext/erpnext/stock/deprecated_serial_batch.py, line 49  

**Error Message:**
While executing the `get_incoming_value_for_serial_nos` function, a timeout error occurs. The traceback indicates that the task exceeded the maximum timeout value (600 seconds). However, this function is marked as @deprecated.


**Context:**
The get_incoming_value_for_serial_nos function is marked as deprecated, implying that it is no longer recommended for use. Despite being deprecated, it is still being executed in the codebase, resulting in timeout errors.

**Action Required:**
1. Investigate why the deprecated function get_incoming_value_for_serial_nos is still being called and run in the codebase.
2. Determine whether this function is critical for current functionality or if it can be replaced with a recommended alternative.
3. Address the timeout issue by either optimizing the function's performance or replacing it with a more efficient solution.



### Module

stock

### Version

frappe version  - v15.17.1
erpnext version - v15.16.2

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/core/doctype/submission_queue/submission_queue.py"", line 95, in background_submission
    getattr(to_be_queued_doc, _action)()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1045, in submit
    return self._submit()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1028, in _submit
    return self.save()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 335, in save
    return self._save(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 388, in _save
    self.run_post_save_methods()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1319, in composer
    return composed(self, method, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1301, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 956, in fn
    return method_object(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/delivery_note/delivery_note.py"", line 410, in on_submit
    self.update_stock_ledger()
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py"", line 530, in update_stock_ledger
    self.make_sl_entries(sl_entries)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py"", line 708, in make_sl_entries
    make_sl_entries(sl_entries, allow_negative_stock, via_landed_cost_voucher)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 96, in make_sl_entries
    sle_doc = make_entry(sle, allow_negative_stock, via_landed_cost_voucher)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/stock_ledger.py"", line 224, in make_entry
    sle.submit()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1045, in submit
    return self._submit()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1028, in _submit
    return self.save()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 335, in save
    return self._save(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 357, in _save
    return self.insert()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 313, in insert
    self.run_post_save_methods()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1319, in composer
    return composed(self, method, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1301, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 956, in fn
    return method_object(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/stock_ledger_entry/stock_ledger_entry.py"", line 180, in on_submit
    SerialBatchBundle(
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 28, in _init_
    self.post_process()
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 241, in post_process
    self.submit_serial_and_batch_bundle()
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 267, in submit_serial_and_batch_bundle
    doc.submit()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1045, in submit
    return self._submit()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1028, in _submit
    return self.save()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 335, in save
    return self._save(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 371, in _save
    self.run_before_save_methods()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1319, in composer
    return composed(self, method, *args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1301, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 956, in fn
    return method_object(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/serial_and_batch_bundle/serial_and_batch_bundle.py"", line 101, in validate
    self.set_incoming_rate()
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/serial_and_batch_bundle/serial_and_batch_bundle.py"", line 209, in set_incoming_rate
    self.set_incoming_rate_for_outward_transaction(
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/doctype/serial_and_batch_bundle/serial_and_batch_bundle.py"", line 238, in set_incoming_rate_for_outward_transaction
    sn_obj = SerialNoValuation(
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 416, in _init_
    self.calculate_stock_value_change()
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/serial_batch_bundle.py"", line 438, in calculate_stock_value_change
    self.calculate_stock_value_from_deprecarated_ledgers()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/deprecations.py"", line 19, in wrapper
    return func(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/deprecated_serial_batch.py"", line 25, in calculate_stock_value_from_deprecarated_ledgers
    outgoing_value = self.get_incoming_value_for_serial_nos(serial_nos)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/deprecations.py"", line 19, in wrapper
    return func(*args, **kwargs)
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/stock/deprecated_serial_batch.py"", line 49, in get_incoming_value_for_serial_nos
    stock_ledgers = (
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/query_builder/utils.py"", line 87, in execute_query
    result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 739, in _read_packet
    packet_header = self._read_bytes(4)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 779, in _read_bytes
    data = self._rfile.read(num_bytes)
  File ""/usr/lib/python3.10/socket.py"", line 705, in readinto
    return self._sock.recv_into(b)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/rq/timeouts.py"", line 63, in handle_death_penalty
    raise self._exception('Task exceeded maximum timeout value ({0} seconds)'.format(self._timeout))
rq.timeouts.JobTimeoutException: Task exceeded maximum timeout value (600 seconds)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1652, in execute_action
    getattr(doc, __action)(**kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/core/doctype/submission_queue/submission_queue.py"", line 106, in background_submission
    frappe.db.rollback()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 1061, in rollback
    self.sql(""rollback"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 557, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 840, in _execute_command
    raise err.InterfaceError(0, """")
pymysql.err.InterfaceError: (0, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/background_jobs.py"", line 213, in execute_job
    retval = method(**kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py"", line 1654, in execute_action
    frappe.db.rollback()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 1061, in rollback
    self.sql(""rollback"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 557, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 840, in _execute_command
    raise err.InterfaceError(0, """")
pymysql.err.InterfaceError: (0, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/rq/worker.py"", line 1428, in perform_job
    rv = job.perform()
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/rq/job.py"", line 1278, in perform
    self._result = self._execute()
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/rq/job.py"", line 1315, in _execute
    result = self.func(*self.args, **self.kwargs)
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/background_jobs.py"", line 236, in execute_job
    frappe.db.rollback()
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 1061, in rollback
    self.sql(""rollback"")
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 557, in query
    self._execute_command(COMMAND.COM_QUERY, sql)
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 840, in _execute_command
    raise err.InterfaceError(0, """")
pymysql.err.InterfaceError: (0, '')
```
",sowndharya998,2024-05-14 06:06:59+00:00,[],2024-05-31 00:08:19+00:00,2024-05-16 07:56:57+00:00,https://github.com/frappe/erpnext/issues/41452,"[('bug', None)]","[{'comment_id': 2114333080, 'issue_id': 2294509077, 'author': 'rohitwaghchaure', 'body': 'get_incoming_value_for_serial_nos method will be deprecate in version 16 and not now. This method is needed to calculate the valuation rate for legacy serial numbers.\r\n\r\nSince this is related to data, we need to access your site to check the issue. If your site is hosted on frappe cloud and you have active support plan. Then request you to create a support ticket.', 'created_at': datetime.datetime(2024, 5, 16, 7, 56, 57, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-05-16 07:56:57 UTC): get_incoming_value_for_serial_nos method will be deprecate in version 16 and not now. This method is needed to calculate the valuation rate for legacy serial numbers.

Since this is related to data, we need to access your site to check the issue. If your site is hosted on frappe cloud and you have active support plan. Then request you to create a support ticket.

"
2294403337,issue,open,,Need accounting dimension filter or branch filter on customer ledger and supplier ledger summary,"As most of the orgs working through multi branches need customer and supplier details branch-wise. In standard report it is not possible to sort the details as per branch as there is no provision to sort or filter. Can we apply accounting dimension in filter as it is showing territory in customer ledger summary. Similarly for supplier ledger summary also.


<img width=""1354"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/113963271/1ee18bef-968d-43bb-860a-fb676d106d47"">

<img width=""1367"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/113963271/8a021bea-1250-4aab-b680-f3c7ea8e4327"">

",smbcatalyst,2024-05-14 04:55:53+00:00,[],2024-05-15 05:57:19+00:00,,https://github.com/frappe/erpnext/issues/41450,"[('feature-request', None)]","[{'comment_id': 2109339650, 'issue_id': 2294403337, 'author': 'muchai', 'body': ""It's part of the Shortlisted features: https://github.com/orgs/frappe/projects/53/views/1"", 'created_at': datetime.datetime(2024, 5, 14, 5, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2109339994, 'issue_id': 2294403337, 'author': 'muchai', 'body': 'Had raised a similar feature request a while back.', 'created_at': datetime.datetime(2024, 5, 14, 5, 52, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2111642876, 'issue_id': 2294403337, 'author': 'smbcatalyst', 'body': 'Is there any tentative date for release?\r\n\r\nThanks and Regards,\r\nPrashant Jaybhaye\r\nDelivery Head\r\nMob. No. 70211 76496\r\n\r\n\r\nOn Tue, 14 May 2024 at 11:22, Muchai ***@***.***> wrote:\r\n\r\n> Had raised a similar feature request a while back.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/41450#issuecomment-2109339994>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/A3FPCB3YQ7CZ3VRZJDCQDRLZCGRCRAVCNFSM6AAAAABHVNFA4OVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDCMBZGMZTSOJZGQ>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 5, 15, 5, 57, 18, tzinfo=datetime.timezone.utc)}]","muchai on (2024-05-14 05:52:00 UTC): It's part of the Shortlisted features: https://github.com/orgs/frappe/projects/53/views/1

muchai on (2024-05-14 05:52:19 UTC): Had raised a similar feature request a while back.

smbcatalyst (Issue Creator) on (2024-05-15 05:57:18 UTC): Is there any tentative date for release?

Thanks and Regards,
Prashant Jaybhaye
Delivery Head
Mob. No. 70211 76496


On Tue, 14 May 2024 at 11:22, Muchai ***@***.***> wrote:

"
2292844109,issue,closed,completed,Notifications are not being sent upon Lead Task assignment,"### Information about bug

When a new Activity Task is created within a Lead, it is failing to trigger an assignment email notification to the assigned user. This causes a swivel-chair process to be required to notify users of new task assignments and also doesn't align with Task handling elsewhere in the system.

To Reproduce:
1. In CRM -> Lead -> [Lead] -> Activities, select New Task
2. Select a date, Assign a User, and add a note
3. Select Create
4. Using the email account of the assigned user, wait for an email notification indicating that the task has been assigned. You will be waiting for a very long time.

Expected behavior:
Assigned user receives 'new task' notification.


### Module

CRM

### Version

Frappe: v14.66.2
ERPNext: v14.63.3

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",joshuarestivo,2024-05-13 13:32:01+00:00,[],2024-06-01 00:11:16+00:00,2024-05-17 05:06:13+00:00,https://github.com/frappe/erpnext/issues/41439,"[('bug', None)]","[{'comment_id': 2116634461, 'issue_id': 2292844109, 'author': 'Nihantra-Patel', 'body': ""> Expected behavior:\r\n> Assigned user receives 'new task' notification.\r\n\r\nYou can set up notifications for this. When a task, is assigned, the system creates a todo, and when the todo is created, it triggers an email to be sent to the assigned user."", 'created_at': datetime.datetime(2024, 5, 17, 5, 6, 13, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-17 05:06:13 UTC): You can set up notifications for this. When a task, is assigned, the system creates a todo, and when the todo is created, it triggers an email to be sent to the assigned user.

"
2292106575,issue,closed,completed,Delivery Trip can still schedule a delivery Note Even Delivery Trip is tagged as Completed,"### Information about bug

Using the Old Versions, the delivery trip can filter fetching of delivery notes that are not yet delivered. But on version 14, you can still fetch all delivery notes regardless if it was already visited/delivered or not yet. 

You may encode all delivery notes through the ""get stops from"" button or manually create it at the delivery note ""create"" button.

### Module

stock

### Version

ERPNext: v14.69.0 (HEAD)
Frappe Framework: v14.74.0 (HEAD)
Frappe HR: v14.27.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Ponyooooo,2024-05-13 07:59:38+00:00,['nabinhait'],2024-07-10 10:45:46+00:00,2024-06-03 11:56:16+00:00,https://github.com/frappe/erpnext/issues/41427,"[('bug', None), ('valid', ''), ('released', None)]","[{'comment_id': 2220175093, 'issue_id': 2292106575, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.29.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 7, 10, 10, 45, 45, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-07-10 10:45:45 UTC): :tada: This issue has been resolved in version 15.29.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.29.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2292026407,issue,open,,Credit Limit Check on Journal Entry and Sales Invoice,"### Information about bug

ERPNext: v15.22.1 (version-15)

Frappe Framework: v15.25.0 (version-15)

For Journal Entry  - Credit limit check does not account for bypass sales order amount flag.

`def check_credit_limit(self):
		customers = list(
			set(
				d.party
				for d in self.get(""accounts"")
				if d.party_type == ""Customer"" and d.party and flt(d.debit) > 0
			)
		)
		if customers:
			from erpnext.selling.doctype.customer.customer import check_credit_limit

			for customer in customers:
				check_credit_limit(customer, self.company)`

For Sales Invoice, It has a flag check for bypass sales order level check
`def check_credit_limit(self):
		from erpnext.selling.doctype.customer.customer import check_credit_limit

		validate_against_credit_limit = False
		bypass_credit_limit_check_at_sales_order = frappe.db.get_value(
			""Customer Credit Limit"",
			filters={""parent"": self.customer, ""parenttype"": ""Customer"", ""company"": self.company},
			fieldname=[""bypass_credit_limit_check""],
		)

		if bypass_credit_limit_check_at_sales_order:
			validate_against_credit_limit = True

		for d in self.get(""items""):
			if not (d.sales_order or d.delivery_note):
				validate_against_credit_limit = True
				break
		if validate_against_credit_limit:
			check_credit_limit(self.customer, self.company, bypass_credit_limit_check_at_sales_order)
`
JV check should be similar to Sales Invoice level credit limit check.
Same thing happens while changing the Credit Limit for a customer.

### Module

accounts

### Version

ERPNext: v15.22.1 (version-15)

Frappe Framework: v15.25.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",pro-nature,2024-05-13 07:16:16+00:00,[],2024-05-13 09:11:11+00:00,,https://github.com/frappe/erpnext/issues/41426,"[('feature-request', None)]",[],
2291577033,issue,closed,completed,Exchange Rate Issue when creating PO,"### Information about bug

When creating a PO from SO.  The PO did not seems to get a correct exchange rate.  Base currency is HKD and Purchasing currency is CNY and Purchasing Price List is in CNY.  When loaded PO form it always load exchange rates of 1 CNY = HKD.

![image](https://github.com/frappe/erpnext/assets/28833849/f2204a5f-68e7-415b-b05a-b8d57eaef816)


### Module

buying

### Version

ERPNext: v15.23.0 (HEAD)
Frappe Framework: v15.26.0 (HEAD)



### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",chanyork,2024-05-13 00:31:20+00:00,['ruthra-kumar'],2024-06-19 00:08:47+00:00,2024-06-04 08:39:40+00:00,https://github.com/frappe/erpnext/issues/41423,"[('bug', None)]","[{'comment_id': 2146654376, 'issue_id': 2291577033, 'author': 'ruthra-kumar', 'body': 'Could you share steps to replicate this?', 'created_at': datetime.datetime(2024, 6, 4, 5, 39, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146666296, 'issue_id': 2291577033, 'author': 'chanyork', 'body': 'Seems to be fix in the latest update already.\r\n\r\nOn Tue, 4 Jun 2024 at 15:39, ruthra kumar ***@***.***> wrote:\r\n\r\n> Could you share steps to replicate this?\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/41423#issuecomment-2146654376>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AG37QON3LPXE4Q4G4IEDY6LZFVHKRAVCNFSM6AAAAABHTHL2JSVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDCNBWGY2TIMZXGY>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 6, 4, 5, 51, 20, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-06-04 05:39:31 UTC): Could you share steps to replicate this?

chanyork (Issue Creator) on (2024-06-04 05:51:20 UTC): Seems to be fix in the latest update already.

On Tue, 4 Jun 2024 at 15:39, ruthra kumar ***@***.***> wrote:

"
2291262703,issue,closed,completed,Deadlock on submitting Sales Invoice,"### Information about bug

When submitting Sales invoice
From a scheduled job
Deadlock on the stock ledger entry timeout

### Module

stock

### Version

Frappe Framework: v15.22.0 (version-15)
ERPNext: v15.20.3 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 772, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.11/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.11/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1205, 'Lock wait timeout exceeded; try restarting transaction')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""apps/erpnext_snitch/erpnext_snitch/erpnext_snitch/doctype/snitch_log/snitch_log.py"", line 186, in insert_doc
    set_insert(update, self._producer, self.producer)
  File ""apps/event_streaming/event_streaming/event_streaming/doctype/event_producer/event_producer.py"", line 313, in set_insert
    doc.insert(set_name=update.docname, set_child_names=False)
  File ""apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 455, in on_submit
    self.update_stock_ledger()
  File ""apps/erpnext/erpnext/controllers/selling_controller.py"", line 538, in update_stock_ledger
    self.make_sl_entries(sl_entries)
  File ""apps/erpnext/erpnext/controllers/stock_controller.py"", line 749, in make_sl_entries
    make_sl_entries(sl_entries, allow_negative_stock, via_landed_cost_voucher)
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 95, in make_sl_entries
    sle_doc = make_entry(sle, allow_negative_stock, via_landed_cost_voucher)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 223, in make_entry
    sle.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/doctype/stock_ledger_entry/stock_ledger_entry.py"", line 172, in on_submit
    self.set_posting_datetime()
  File ""apps/erpnext/erpnext/stock/doctype/stock_ledger_entry/stock_ledger_entry.py"", line 100, in set_posting_datetime
    self.db_set(""posting_datetime"", self.posting_datetime)
  File ""apps/frappe/frappe/model/document.py"", line 1226, in db_set
    frappe.db.set_value(
  File ""apps/frappe/frappe/database/database.py"", line 994, in set_value
    query.run(debug=debug)
  File ""apps/frappe/frappe/query_builder/utils.py"", line 87, in execute_query
    result = frappe.db.sql(query, params, *args, **kwargs)  # nosemgrep
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/database/database.py"", line 243, in sql
    raise frappe.QueryTimeoutError(e) from e
frappe.exceptions.QueryTimeoutError: (1205, 'Lock wait timeout exceeded; try restarting transaction')

```
```
",meaziz,2024-05-12 10:03:01+00:00,[],2024-06-06 00:08:48+00:00,2024-05-21 05:03:30+00:00,https://github.com/frappe/erpnext/issues/41416,"[('bug', None), ('released', None)]","[{'comment_id': 2106195124, 'issue_id': 2291262703, 'author': 'meaziz', 'body': 'https://github.com/frappe/erpnext/blob/3fa8706f57509720c490d50af111d6125dda8267/erpnext/stock/doctype/stock_ledger_entry/stock_ledger_entry.py#L100\r\n\r\nWhy is it using db_set to set the posting date time instead of changing the value normally.', 'created_at': datetime.datetime(2024, 5, 12, 10, 12, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2124226027, 'issue_id': 2291262703, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.25.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.25.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 22, 8, 51, 6, tzinfo=datetime.timezone.utc)}]","meaziz (Issue Creator) on (2024-05-12 10:12:40 UTC): https://github.com/frappe/erpnext/blob/3fa8706f57509720c490d50af111d6125dda8267/erpnext/stock/doctype/stock_ledger_entry/stock_ledger_entry.py#L100

Why is it using db_set to set the posting date time instead of changing the value normally.

frappe-pr-bot on (2024-05-22 08:51:06 UTC): :tada: This issue has been resolved in version 15.25.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.25.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2291008786,issue,closed,completed,billing address is not automatically populating in purchase order when changing company,"### Information about bug

When changing the company (multi company site) in a purchase order, the company billing address field is not auto-populating, although the shipping address field is functioning correctly.

Steps to reproduce issue:

1. create purchase order, check billing and shipping address (both fields are blank)
2. change company **(don't select supplier)**, check billing and shipping address (only shipping address field populate)

### Module

buying

### Version

Frappe Framework: v15.26.0
ERPNext: v15.23.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",HUMENTH,2024-05-11 17:50:30+00:00,[],2025-01-31 07:12:43+00:00,2025-01-31 07:12:42+00:00,https://github.com/frappe/erpnext/issues/41414,[],"[{'comment_id': 2106614251, 'issue_id': 2291008786, 'author': 'Nihantra-Patel', 'body': 'If you are talking for sales order then that issue is already fixed. \r\nhttps://github.com/frappe/erpnext/pull/40373\r\n\r\nAnd the second thing you have mentioned is that if the supplier is not selected, the first thing is that the supplier does not appear in the sales order. A sales order has a customer so give bug reports properly.\r\n\r\nAre you talking about purchase order or sales order?', 'created_at': datetime.datetime(2024, 5, 13, 4, 20, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2106638253, 'issue_id': 2291008786, 'author': 'HUMENTH', 'body': '@Nihantra-Patel \r\nApologies🙏, I mentioned a sales order by mistake when I meant to refer to a purchase order.', 'created_at': datetime.datetime(2024, 5, 13, 4, 36, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626459171, 'issue_id': 2291008786, 'author': 'ljain112', 'body': 'Fixed here: \nhttps://github.com/frappe/erpnext/pull/45074\nhttps://github.com/frappe/erpnext/pull/44906', 'created_at': datetime.datetime(2025, 1, 31, 7, 12, 43, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-13 04:20:09 UTC): If you are talking for sales order then that issue is already fixed. 
https://github.com/frappe/erpnext/pull/40373

And the second thing you have mentioned is that if the supplier is not selected, the first thing is that the supplier does not appear in the sales order. A sales order has a customer so give bug reports properly.

Are you talking about purchase order or sales order?

HUMENTH (Issue Creator) on (2024-05-13 04:36:32 UTC): @Nihantra-Patel 
Apologies🙏, I mentioned a sales order by mistake when I meant to refer to a purchase order.

ljain112 on (2025-01-31 07:12:43 UTC): Fixed here: 
https://github.com/frappe/erpnext/pull/45074
https://github.com/frappe/erpnext/pull/44906

"
2290172131,issue,closed,completed,Session Stopped,"### Information about bug

Getting Session stopped Error

![Screenshot (75)](https://github.com/frappe/erpnext/assets/125698331/50afdde9-a72a-4a6b-838c-7bf01f7da23e)


### Module

other

### Version

ERPNext: v15.23.0 (version-15)

Frappe Framework: v15.26.0 (version-15)

Frappe HR: v16.0.0-dev (develop)

Print Designer: v1.0.0 (develop)



### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback with variables (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 95, in application
    init_request(request)
      request = <Request 'http://192.168.100.137/api/method/frappe.realtime.get_user_info?sid=6cca860198f69c3129e6f72c2fe683658d1a79f741c7001187b12002' [GET]>
      response = None
      rollback = True
      e = SessionStopped('Session Stopped')
  File ""apps/frappe/frappe/app.py"", line 179, in init_request
    raise frappe.SessionStopped(""Session Stopped"")
      request = <Request 'http://192.168.100.137/api/method/frappe.realtime.get_user_info?sid=6cca860198f69c3129e6f72c2fe683658d1a79f741c7001187b12002' [GET]>
      site = 'erp.goldwala.pk'
frappe.exceptions.SessionStopped: Session Stopped
```
",codexkenza,2024-05-10 17:58:28+00:00,[],2024-05-28 00:08:52+00:00,2024-05-13 11:22:18+00:00,https://github.com/frappe/erpnext/issues/41410,"[('bug', None)]","[{'comment_id': 2107316331, 'issue_id': 2290172131, 'author': 'Nihantra-Patel', 'body': 'If the Frappe application is in maintenance mode and the configuration does not allow reads during maintenance, then the session is stopped by raising frappe.SessionStopped(""Session Stopped"").\r\n\r\nThis typically happens when the application is undergoing maintenance and reads are not permitted to avoid any potential inconsistencies in the data. During this time, only specific operations may be allowed, such as updates or administrative tasks, while regular users are prevented from accessing the system to ensure data integrity.\r\n\r\n\r\nI\'ve shared a suggestion:\r\nIf you\'ve installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.\r\n\r\nIf the hrms is in the development branch, switch to it:\r\n\r\n```bash\r\nbench switch-to-branch version-15 hrms\r\n```\r\n\r\nIf you\'ve uninstalled or installed the app, do this:\r\n\r\n```bash\r\nbench get-app --branch version-15 hrms\r\n```\r\n\r\nThis is because the hrms app has a version 15 branch.\r\n\r\nI hope this is clear and helpful.', 'created_at': datetime.datetime(2024, 5, 13, 11, 22, 18, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-13 11:22:18 UTC): If the Frappe application is in maintenance mode and the configuration does not allow reads during maintenance, then the session is stopped by raising frappe.SessionStopped(""Session Stopped"").

This typically happens when the application is undergoing maintenance and reads are not permitted to avoid any potential inconsistencies in the data. During this time, only specific operations may be allowed, such as updates or administrative tasks, while regular users are prevented from accessing the system to ensure data integrity.


I've shared a suggestion:
If you've installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.

If the hrms is in the development branch, switch to it:

```bash
bench switch-to-branch version-15 hrms
```

If you've uninstalled or installed the app, do this:

```bash
bench get-app --branch version-15 hrms
```

This is because the hrms app has a version 15 branch.

I hope this is clear and helpful.

"
2289853915,issue,closed,completed,"Filter Batch in Serial and Batch Summary  was error   ""Unknown column 'tabBatch.batch_no' in 'where clause'""","### Information about bug

Report: Serial and Batch Summary when filter using batch was error pymysql.err.OperationalError: (1054, ""Unknown column 'tabBatch.batch_no' in 'where clause'"")

![serial_and_batch_summary](https://github.com/frappe/erpnext/assets/1784964/70294e90-03b0-4606-b8eb-eaab196d25bf)


### Module

stock

### Version

ERPNext: v15.23.0 (version-15)
Frappe Framework: v15.26.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""barcode_generator"": ""0.0.1"",
	""erpnext"": ""15.23.0"",
	""expense_request"": ""0.0.4"",
	""frappe"": ""15.26.0"",
	""jm_customize"": ""0.0.1"",
	""payments"": ""0.0.1"",
	""print_designer"": ""1.2.0"",
	""qr_reader"": ""0.0.1"",
	""textile2"": ""0.0.3""
}
```
### Route
```
query-report/Serial and Batch Summary
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/search.py"", line 47, in search_link
    results = search_widget(
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/desk/search.py"", line 94, in search_widget
    return frappe.call(
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
  File ""apps/frappe/frappe/__init__.py"", line 2523, in wrapper
    return fn(**kwargs)
  File ""apps/erpnext/erpnext/stock/report/serial_and_batch_summary/serial_and_batch_summary.py"", line 243, in get_batch_nos
    return frappe.get_all(""Batch"", filters=query_filters, as_list=True)
  File ""apps/frappe/frappe/__init__.py"", line 2057, in get_all
    return get_list(doctype, *args, **kwargs)
  File ""apps/frappe/frappe/__init__.py"", line 2032, in get_list
    return frappe.model.db_query.DatabaseQuery(doctype).execute(*args, **kwargs)
  File ""apps/frappe/frappe/model/db_query.py"", line 191, in execute
    result = self.build_and_run()
  File ""apps/frappe/frappe/model/db_query.py"", line 232, in build_and_run
    return frappe.db.sql(
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 772, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.10/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.10/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, ""Unknown column 'tabBatch.batch_no' in 'where clause'"")

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""txt"": ""BMJ2405100012"",
		""doctype"": ""Batch"",
		""reference_doctype"": """",
		""page_length"": 10,
		""query"": ""erpnext.stock.report.serial_and_batch_summary.serial_and_batch_summary.get_batch_nos"",
		""filters"": ""{\""item_code\"":\""\"",\""voucher_type\"":\""\"",\""voucher_no\"":[]}""
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.search.search_link"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""pymysql.err.OperationalError: (1054, \""Unknown column 'tabBatch.batch_no' in 'where clause'\"")"",
	""exc_type"": ""OperationalError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",xhijack,2024-05-10 14:31:39+00:00,[],2024-05-28 00:08:49+00:00,2024-05-13 16:07:36+00:00,https://github.com/frappe/erpnext/issues/41408,"[('bug', None)]",[],
2289824097,issue,closed,completed,Wrong Delete Batch In Sales Return,"### Information about bug

 have a Delivery Note with batch items. Then, I create a Sales Return against the delivery note. After creating the Sales Return, I click ""pick serial and batch"" and try to select some batches to delete. However, when I delete them, the results are incorrect

Uploading Screen Recording 2024-05-10 at 21.05.46.mov…









### Module

stock

### Version

ERPNext: v15.23.0 (version-15)
Frappe Framework: v15.26.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",xhijack,2024-05-10 14:16:55+00:00,['rohitwaghchaure'],2024-06-19 00:08:43+00:00,2024-06-04 09:04:49+00:00,https://github.com/frappe/erpnext/issues/41407,"[('bug', None)]","[{'comment_id': 2104706151, 'issue_id': 2289824097, 'author': 'xhijack', 'body': '![sales_return](https://github.com/frappe/erpnext/assets/1784964/cbaaeb0a-230e-4b5d-9f74-322c22ccb238)', 'created_at': datetime.datetime(2024, 5, 10, 14, 25, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146996849, 'issue_id': 2289824097, 'author': 'rohitwaghchaure', 'body': ""@xhijack We have fixed the issue and tomorrow we'll release the fix"", 'created_at': datetime.datetime(2024, 6, 4, 9, 4, 49, tzinfo=datetime.timezone.utc)}]","xhijack (Issue Creator) on (2024-05-10 14:25:39 UTC): ![sales_return](https://github.com/frappe/erpnext/assets/1784964/cbaaeb0a-230e-4b5d-9f74-322c22ccb238)

rohitwaghchaure (Assginee) on (2024-06-04 09:04:49 UTC): @xhijack We have fixed the issue and tomorrow we'll release the fix

"
2289108719,issue,closed,completed,Purchase Invoice Return for Serial No : V15,"### Information about bug

Let's say when we buy items we got 
24-100039 to 24-100050
when we made purchase return
we want to return only 1 item of serial 24-100043 which is not fifo/lifo/expiry
it was very complicated to make return for desired serial no
is this possible to add one more option fifo/lifo/expiry/ manual
when user choose manual, allow user to choose desired serial no which they want to return
please check details at video
thanks


### Module

stock

### Version

Frappe:15.26.0
ERPNext: 15.23.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-05-10 07:13:47+00:00,[],2024-05-25 00:08:03+00:00,2024-05-10 11:16:03+00:00,https://github.com/frappe/erpnext/issues/41403,"[('bug', None)]","[{'comment_id': 2104091593, 'issue_id': 2289108719, 'author': 'thida-bcn', 'body': 'https://github.com/frappe/erpnext/assets/62122640/9b604e8b-66c7-4ff9-8fa9-606756d98d5f', 'created_at': datetime.datetime(2024, 5, 10, 7, 37, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2104137261, 'issue_id': 2289108719, 'author': 'rohitwaghchaure', 'body': '@thida-bcn Enable ""Use Serial / Batch Fields"" in the stock settings and check.\r\n<img width=""1280"" alt=""Screenshot 2024-05-10 at 1 32 54 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/6e78ce57-2c67-43c4-a040-b419e45a9a3d"">', 'created_at': datetime.datetime(2024, 5, 10, 8, 3, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2104199761, 'issue_id': 2289108719, 'author': 'thida-bcn', 'body': '> @thida-bcn Enable ""Use Serial / Batch Fields"" in the stock settings and check. <img alt=""Screenshot 2024-05-10 at 1 32 54 PM"" width=""1280"" src=""https://private-user-images.githubusercontent.com/8780500/329506883-6e78ce57-2c67-43c4-a040-b419e45a9a3d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTUzMzA4MTMsIm5iZiI6MTcxNTMzMDUxMywicGF0aCI6Ii84NzgwNTAwLzMyOTUwNjg4My02ZTc4Y2U1Ny0yYzY3LTQzYzQtYTA0MC1iNDE5ZTQ1YTlhM2QucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUxMCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MTBUMDg0MTUzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTAyOTk1M2NjMGFmYTg2MDJhMzhkNzBkM2Q1ZWUwZjExZmM5NDhiNmFiMTgxY2U4Yjg0MzMxZDgzZWQyZmRlYyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.j1LvqgOf5EN9CXNDeVwBzfjWY3bva81ouFP3L9cc3aw"">\r\n\r\nthank you\r\ngot it now', 'created_at': datetime.datetime(2024, 5, 10, 8, 42, 4, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-05-10 07:37:25 UTC): https://github.com/frappe/erpnext/assets/62122640/9b604e8b-66c7-4ff9-8fa9-606756d98d5f

rohitwaghchaure on (2024-05-10 08:03:30 UTC): @thida-bcn Enable ""Use Serial / Batch Fields"" in the stock settings and check.
<img width=""1280"" alt=""Screenshot 2024-05-10 at 1 32 54 PM"" src=""https://github.com/frappe/erpnext/assets/8780500/6e78ce57-2c67-43c4-a040-b419e45a9a3d"">

thida-bcn (Issue Creator) on (2024-05-10 08:42:04 UTC): thank you
got it now

"
2289097053,issue,open,,Serial number doc type need a connection panel. ,"Hi 

We are a product company looking to track issues and warranty claim of product using the Serial number. 
It is unique throughout our product ranges. 

So it will good feature to add connections like warranty claim and issues linked with that serial number. 

So we can keep track of how many times the particular serial number has undergone service and what are the warranty claims taken. 
Its like a service record. 

",sapl-santhosh,2024-05-10 07:07:26+00:00,[],2024-05-10 07:07:26+00:00,,https://github.com/frappe/erpnext/issues/41402,"[('feature-request', None)]",[],
2288434767,issue,closed,completed,Purchase Order Item doesn't trigger currency exchange,"### Information about bug

In Purchase Order, when entering an item with a foreign currency into the Purchase Order Item table, the Rate is showing 0.

I have the following configured:
Price List: Currency = USD, Buying enabled, named as ""Standard Buying US""
Item Price (for the item tested): Price List = Standard Buying US, Buying enabled, Currency = USD, Rate = 120, Valid From = 05-02-2024
Global Defaults: Default Currency = CAD, Country = Canada

I tried manually setting a Currency Exchange for today (05-09-2024) with these:
From Currency = USD, To Currency = CAD Exchange Rate = 1.37
The Rate is still shows 0 in my test.

I tried configuring Currency Exchange Settings with these settings:
Service Provider = exchangerate.host, Use HTTP Protocol
I was able to save this and it counted as 1 API call in exchangerate.host. I retested my scenario and Rate still shows 0. I tried a few times and exchangerate.host didn't show any API calls.

### Module

buying

### Version

ERPNext: v15.22.0
Frappe Framework: v15.25.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",geraldleungontario,2024-05-09 20:44:11+00:00,['ruthra-kumar'],2024-06-19 00:08:46+00:00,2024-06-04 08:46:27+00:00,https://github.com/frappe/erpnext/issues/41399,"[('bug', None)]","[{'comment_id': 2146728811, 'issue_id': 2288434767, 'author': 'ruthra-kumar', 'body': 'This is not replicable. Does this happen on all cases or only a specific scenarios?', 'created_at': datetime.datetime(2024, 6, 4, 6, 40, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146955119, 'issue_id': 2288434767, 'author': 'ruthra-kumar', 'body': 'System does pull the item price, following the same setup you\'ve mentioned.\r\n<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 13 23\u202fPM"" src=""https://github.com/frappe/erpnext/assets/3272205/018da556-390b-4c09-a11c-22612d9ae30c"">\r\n<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 10 50\u202fPM"" src=""https://github.com/frappe/erpnext/assets/3272205/b973836d-1972-4f28-bc30-96f425c2e95a"">', 'created_at': datetime.datetime(2024, 6, 4, 8, 44, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146958253, 'issue_id': 2288434767, 'author': 'ruthra-kumar', 'body': 'Closing this for now. You can re-open if it is replicable on a clean ERPNext instance.', 'created_at': datetime.datetime(2024, 6, 4, 8, 46, 27, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-06-04 06:40:51 UTC): This is not replicable. Does this happen on all cases or only a specific scenarios?

ruthra-kumar (Assginee) on (2024-06-04 08:44:54 UTC): System does pull the item price, following the same setup you've mentioned.
<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 13 23 PM"" src=""https://github.com/frappe/erpnext/assets/3272205/018da556-390b-4c09-a11c-22612d9ae30c"">
<img width=""1440"" alt=""Screenshot 2024-06-04 at 2 10 50 PM"" src=""https://github.com/frappe/erpnext/assets/3272205/b973836d-1972-4f28-bc30-96f425c2e95a"">

ruthra-kumar (Assginee) on (2024-06-04 08:46:27 UTC): Closing this for now. You can re-open if it is replicable on a clean ERPNext instance.

"
2287634863,issue,closed,completed,After bench update have problem with payment entery on V.14,"### Information about bug

I have updated bench after that when i create payment entry against purchase and apply withhold category on that payment and save the document than withhold calculation doesn't took palace. I removed purchase invoice than save the document after that Withhold calculation is executing but this payment entry is considered as advance payment as no purchase invoice is linked. After making this i have to go payment reconciliation for adjustment of that invoice with the payment. Please let me know where is the problem should i have to look for any configuration or it is a bug. please provide solution in both the cases. Thanks

### Module

accounts

### Version

ERPNext: v14.69.1 (version-14)
Frappe Framework: v14.74.0 (version-14)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Ashuar,2024-05-09 12:51:58+00:00,[],2024-06-18 00:09:06+00:00,2024-06-03 11:35:48+00:00,https://github.com/frappe/erpnext/issues/41398,"[('bug', None)]","[{'comment_id': 2144969181, 'issue_id': 2287634863, 'author': 'deepeshgarg007', 'body': '@Ashuar This looks like some config issue/understanding issue and not a bug. Will recommend you reach out to support on a paid site, closing this issue.', 'created_at': datetime.datetime(2024, 6, 3, 11, 35, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2145018320, 'issue_id': 2287634863, 'author': 'Ashuar', 'body': 'Withholding Tax category is configured even if i create a new withholding category still finding this error. and this issue is raised after i have updated bench', 'created_at': datetime.datetime(2024, 6, 3, 12, 2, 30, tzinfo=datetime.timezone.utc)}]","deepeshgarg007 on (2024-06-03 11:35:48 UTC): @Ashuar This looks like some config issue/understanding issue and not a bug. Will recommend you reach out to support on a paid site, closing this issue.

Ashuar (Issue Creator) on (2024-06-03 12:02:30 UTC): Withholding Tax category is configured even if i create a new withholding category still finding this error. and this issue is raised after i have updated bench

"
2287624146,issue,closed,completed,Can't print any custom print format as PDF in v15,"### Information about bug

Hello guys,
While I'm printing more than one material request, the system opens a blank PDF 
although I was printing with the same print format as pdf in v14
FYI
The print format is customed not standard

Thanks for you all

### Module

buying, other

### Version

ERPNext: v15.22
Frappe: v15.25

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Islamation,2024-05-09 12:45:41+00:00,[],2024-06-19 00:08:55+00:00,2024-06-03 11:35:07+00:00,https://github.com/frappe/erpnext/issues/41397,"[('bug', None)]","[{'comment_id': 2128967983, 'issue_id': 2287624146, 'author': 'Nihantra-Patel', 'body': ""If the standard print format is working, there must be some problem in the custom format's code itself.\r\n\r\nWe tested in v15 latest with custom print format, but there is no issue found. Please share the code."", 'created_at': datetime.datetime(2024, 5, 24, 8, 47, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2139075124, 'issue_id': 2287624146, 'author': 'Islamation', 'body': '`<style>\r\n\r\n/* arabic */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6O59ZMaA.woff2) format(\'woff2\');\r\n  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;\r\n}\r\n/* latin-ext */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6F59ZMaA.woff2) format(\'woff2\');\r\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n/* latin */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6L59Y.woff2) format(\'woff2\');\r\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\r\n}\r\n\t.print-format table, .print-format tr, \r\n\t.print-format td, .print-format div, .print-format p {\r\n\t\t font-family: \'Cairo\';\r\n\t\tline-height: 90%;\r\n\t\tvertical-align: middle;\r\n                \r\n\t}\r\n\t@media print {\r\n    body{\r\n         font-family: \'Cairo\';\r\n        width: 220mm;\r\n        height: 300mm;\r\n        margin: 5mm 5mm 10mm 5mm; \r\n        /* change the margins as you want them to be. */\r\n   } \r\n}\r\n\t@media screen {\r\n\t\t.print-format {\r\n\t\t\twidth: 200mm;\r\n\t\t\tpadding: 5mm;\r\n\t\t\tmin-height: 300mm;\r\n\t\t\tfooter {page-break-after: always;}\r\n\t\t}\r\n\t}\r\ntable.no-border, table.no-border td{\r\n   \r\n    margin-top: -20px !important;\r\n}\r\n\r\n\r\n\r\n.table .table-condensed .table-hover .table-bordered .print-format td, .print-format th{\r\nbackground-color: whitesmoke !important;\r\n}\r\n.print-format td, .print-format th {\r\n  \r\n}\r\n\r\n.print-heading {\r\n    \r\n    float: left !important;\r\n   border-bottom: 1px solid #d1d8dd !important;\r\n   width: 45% !important ;\r\n}\r\n\r\n\r\n.alert-logo {\r\n    padding: 0px !important; \r\n    margin-bottom: .5px !important;\r\n    border: 0px solid transparent !important;\r\n    border-radius: 4px !important;\r\n    text-align: left !important;\r\n    color: red !important;\r\n}\r\n\r\n\r\n\r\n.cr{\r\n     width: 60% !important;\r\n        margin-top: -5px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n\r\n}\r\n.logo-div1{\r\n          \r\n text-align: right !important;\r\n    width: 40% !important;\r\n   \r\n    margin-right: 160px !important;  \r\n    }\r\n.logo-div2 {\r\nfont-family: Arial !important;\r\ncolor: darkblue !important;\r\ntext-align:center !important;\r\nfont-size:18px !important;\r\n}\r\n.logo-div3 {\r\n font-family: \'Cairo\';\r\nfont-weight:700 !important;\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-top:5px;\r\nmargin-bottom: -29px !important;\r\nmargin-left: 5px !important;\r\n}\r\n\r\n.logo-div4{\r\n       font-family: Arial !important;\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-bottom: -32px !important;\r\n    margin-top: -50px !important;\r\n    }\r\n    .logo-div8{\r\n       font-family: Arial !important;\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-bottom: -15px !important;\r\n    margin-top: -38px !important;\r\n    }\r\n\r\n\r\n.logo-div5{\r\n       \r\n        width: 35% !important;\r\n        margin-top: 15px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n    }\r\n\r\n.logo-div6{\r\n        text-align:center !important;\r\n        margin-top: 3px !important;\r\n       font-family: Arial !important;\r\ncolor: darkblue !important;\r\n\r\ntext-align:center !important;\r\nfont-size:14px !important;\r\n    }\r\n.logo-div7{\r\n        \r\n        width: 65% !important;\r\n        max-height: 45px !important;\r\n        margin-top: 19px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n    }\r\n\r\n.table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th {\r\n    border: 0.5px solid #d1d8dd !important;\r\n}\r\n\r\n.td1 {\r\n\r\nborder-bottom: 0.5px solid #d1d8dd !important;\r\n}\r\n\r\n.si {\r\n   \r\n    color: darkblue !important;\r\n    margin-top: -5px !important; \r\n    \r\n}\r\n\r\n.table-no-b {\r\n\r\nborder-top: 0 !important;\r\nmargin-top: -5px !important;\r\n}\r\n\r\n.space {\r\n   \r\n    margin-top: -12px !important;\r\n    \r\n}\r\n\r\n.ql-editor.read-mode {\r\n\r\npadding:6px !important ;\r\n}\r\n\r\n.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {\r\n   \r\n    font-weight: 600 !important;\r\n   \r\n}\r\n\r\n.w1 {\r\n   margin-right: 115px !important;\r\n}\r\n.w2 {\r\n    border-top: 3px solid #d1d8dd !important;\r\n        padding-top: 10px !important;\r\n}\r\n\r\n\r\n</style>\r\n\r\n<div id=""footer-html"" class=""visible-pdf"" style=""\r\n\t\t\tdisplay: block !important;\r\n\t\t\tposition: fixed;\r\n            bottom: 0;\r\n            width:100%;\r\n \r\n\t\t"">\r\n    <table class=""table table-condensed"">\r\n      <tr>\r\n        <td style=""text-align: center; border: none;"">\r\n        <b>{{ _(""المستلم "") }}</b>\r\n        </td>\r\n          <td style=""text-align: center; border: none;"">\r\n        \t<b>{{ _(""المخزن "") }}</b>\r\n        </td>\r\n         <td style=""text-align: center; border: none;"">\r\n        \t<b>{{ _(""يعتمد "") }}</b>\r\n        </td>\r\n      </tr>\r\n      \r\n       <tr>\r\n        <td style=""text-align: center; border: none;"">\r\n        <b> .............................. </b>\r\n        </td>\r\n          <td style=""text-align: center; border: none;"">\r\n         <b> .............................. </b>\r\n        </td>\r\n         <td style=""text-align: center; border: none;"">\r\n         <b> .............................. </b>\r\n        </td>\r\n      </tr>\r\n\t\t </table>\r\n\t\t<div class=""letter-head-footer"">\r\n\t\t\t{{ footer }}\r\n\t\t</div>\r\n\t\t\r\n\t\t<p class=""text-center small page-number visible-pdf"">\r\n\t\t\tPage <span class=""page""></span> of <span class=""topage""></span>\r\n\t\t</p>\r\n\t</div>\r\n\r\n<br>\r\n\r\n<div>\r\n    <div id=""footer-html"" class=""visible-pdf"">\r\n        {% if not no_letterhead and footer %}\r\n        <div class=""letter-head-footer"">\r\n            {{ footer }}\r\n        </div>\r\n        {% endif %}\r\n        <p class=""text-center small page-number visible-pdf"">\r\n            {{ _(""Page {0} of {1}"").format(\'<span class=""page""></span>\', \'<span class=""topage""></span>\') }}\r\n        </p>\r\n    </div>\r\n\r\n\r\n\r\n<table class = ""table table-condensed table-no-b"">\r\n <tr class=""table-no-b"" >\r\n<td class=""table-no-b"" style=""width:50%"" >\r\n<h1 class=""si"">{{ doc.company }}</h1>\r\n<b> {{ ""الشركة المتحدة للبطاريات السائلة"" }} </b><br>\r\n<b>{{ _(""رقم السجل التجاري : 655 "") }}</b><br>\r\n<b>{{ _(""رقم البطاقة الضريبية : 481688080 "") }}</b><br>\r\n</td>\r\n\r\n<td class=""table-no-b si"" style=""width:50%"" >\r\n<div class=""logo-div1"">{{ letter_head }}</div><br>\r\n\r\n</td>\r\n\r\n </tr>\r\n</table>\r\n\r\n<table class = ""table table-condensed no-border"">\r\n  <tr>\r\n    <td style=""width: 50%;"">\r\n<br><br>\r\n        <b>{{ _(""الغرض  "") }}:</b> {{ _(doc.material_request_type ) }}<br><br>\r\n       <b>{{ _(""الحالة  "") }}:</b> {{ _(doc.status ) }}<br><br>\r\n       \r\n    </td>\r\n    <td style=""width: 50%;"">\r\n\r\n<table class=""table table-condensed table-bordered"">\r\n\t<tbody>\r\n\t\t\r\n\r\n<tr>\r\n    <h5 class=""logo-div3"">{{ _("" طلب مواد "") }}</h5><br>\r\n<td class=""text-left"" style=""width: 50%"">\r\n\t\t\t\t\t{{ _("" رقم المستند "") }} :\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-left"">\r\n\t\t\t\t\t{{ doc.name}}\r\n\t\t\t\t</td>\r\n</tr>\r\n <td class=""text-left"" style=""width: 50%"">\r\n\t\t\t\t\t{{ _("" تاريخ المستند "") }} :\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-left"">\r\n\t\t\t\t\t{{ doc.get_formatted(""transaction_date"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t\t\r\n\t\r\n<tr>\r\n   \r\n\t\t\t\t\r\n\t</tbody>\r\n</table>\r\n\r\n    </td>\r\n    \r\n  </tr>\r\n</table>\r\n\r\n<br>\r\n\r\n\r\n<table class = ""table table-condensed table-bordered"">\r\n  <tr>\r\n\r\n<table class=""table table-condensed table-hover table-bordered"">\r\n\t\t<tbody>\r\n            <tr>\r\n<h5 class=""logo-div4"">{{ _(""Service & product information"") }}</h5><br><br>\r\n\r\n     </tr> \r\n\r\n <tr>\r\n                <th style= ""text-align: center;"">م</th>\r\n                <th style= ""text-align: center;"">كود الصنف</th>\r\n                <th style= ""text-align: center;"">اسم الصنف</th>\r\n                <th style= ""text-align: center;"">كمية</th>\r\n                \r\n            </tr>\r\n            {%- for row in doc.items -%}\r\n            <tr>\r\n                \r\n               <td style=""width: 3%;"">{{ row.idx }}</td>\r\n               <td style=""width: 22%;"">{{ row.item_code }}</td>\r\n\t\t<td style=""width: 30%;"">{{ row.custom_item_name_in_arabic }}</td>\r\n\t\t\t<td style=""width: 15%; text-align: center;"">{{ row.qty }} {{ row.uom or row.stock_uom }}</td>\r\n\t\t\t\r\n\t\t</tr>\r\n\t\t{%- endfor -%}\r\n\t\t\r\n\t\t\t<tr>\r\n\t\t<th style=""color:darkblue; text-align: right;border: whitesmoke !important; ""></th>\r\n\t\t<!-- get grand total //-->\r\n\t\t<th style=""text-align: center;border: whitesmoke !important;""></th>\r\n\t\t\t<th style=""color:darkblue; text-align: left; border-right: whitesmoke !important; ""> الاجماليات : </th>\r\n\t\t<th style=""text-align: center;"">{{ doc.items|sum(attribute= \'qty\') }}</th>\r\n\t\r\n\t</tr>\r\n\t</tbody>\r\n</table>\r\n\r\n\r\n\r\n\t\t\r\n\t\r\n<br><br>\r\n\r\n{%- if doc.terms -%}\r\n\r\n<table class=""table table-condensed table-hover table-bordered"">\r\n\t\t<tbody>\r\n            <tr>\r\n                \r\n<h5 class=""logo-div4"">{{ _(""الملاحظات و الشروط و الاحكام"") }}</h5><br><br>\r\n\r\n     </tr> \r\n\r\n<tr>\r\n             <td>\r\n             <p class=""cr"">{{ doc.terms or """" }}</p>   \r\n\r\n            </tr>\r\n           </td>\r\n\t</tbody>\r\n</table>\r\n\r\n{%- endif -%}\r\n\r\n`', 'created_at': datetime.datetime(2024, 5, 30, 8, 52, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2139188083, 'issue_id': 2287624146, 'author': 'Nihantra-Patel', 'body': 'Please provide the code in the below style. and your code shows a mismatch.\r\n\r\n![image](https://github.com/frappe/erpnext/assets/141945075/be326c90-ad24-46f1-8d9f-f6446ab06b0f)\r\n\r\n\r\nAnd code is long, so you have to test it yourself one by one.', 'created_at': datetime.datetime(2024, 5, 30, 9, 50, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144948222, 'issue_id': 2287624146, 'author': 'Islamation', 'body': '```\r\n<style>\r\n\r\n/* arabic */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6O59ZMaA.woff2) format(\'woff2\');\r\n  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;\r\n}\r\n/* latin-ext */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6F59ZMaA.woff2) format(\'woff2\');\r\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\r\n}\r\n/* latin */\r\n@font-face {\r\n  font-family: \'Cairo\';\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6L59Y.woff2) format(\'woff2\');\r\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\r\n}\r\n\t.print-format table, .print-format tr, \r\n\t.print-format td, .print-format div, .print-format p {\r\n\t\t font-family: \'Cairo\';\r\n\t\tline-height: 90%;\r\n\t\tvertical-align: middle;\r\n                \r\n\t}\r\n\t@media print {\r\n    body{\r\n         font-family: \'Cairo\';\r\n        width: 220mm;\r\n        height: 300mm;\r\n        margin: 5mm 5mm 10mm 5mm; \r\n        /* change the margins as you want them to be. */\r\n   } \r\n}\r\n\t@media screen {\r\n\t\t.print-format {\r\n\t\t\twidth: 200mm;\r\n\t\t\tpadding: 5mm;\r\n\t\t\tmin-height: 300mm;\r\n\t\t\tfooter {page-break-after: always;}\r\n\t\t}\r\n\t}\r\ntable.no-border, table.no-border td{\r\n   \r\n    margin-top: -20px !important;\r\n}\r\n\r\n\r\n\r\n.table .table-condensed .table-hover .table-bordered .print-format td, .print-format th{\r\nbackground-color: whitesmoke !important;\r\n}\r\n.print-format td, .print-format th {\r\n  \r\n}\r\n\r\n.print-heading {\r\n    \r\n    float: left !important;\r\n   border-bottom: 1px solid #d1d8dd !important;\r\n   width: 45% !important ;\r\n}\r\n\r\n\r\n.alert-logo {\r\n    padding: 0px !important; \r\n    margin-bottom: .5px !important;\r\n    border: 0px solid transparent !important;\r\n    border-radius: 4px !important;\r\n    text-align: left !important;\r\n    color: red !important;\r\n}\r\n\r\n\r\n\r\n.cr{\r\n     width: 60% !important;\r\n        margin-top: -5px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n\r\n}\r\n.logo-div1{\r\n          \r\n text-align: right !important;\r\n    width: 40% !important;\r\n   \r\n    margin-right: 160px !important;  \r\n    }\r\n.logo-div2 {\r\n font-family: \'Cairo\';\r\ncolor: darkblue !important;\r\ntext-align:center !important;\r\nfont-size:18px !important;\r\n}\r\n.logo-div3 {\r\n font-family: \'Cairo\';\r\nfont-weight:700 !important;\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-top:5px;\r\nmargin-bottom: -29px !important;\r\nmargin-left: 5px !important;\r\n}\r\n\r\n.logo-div4{\r\n        font-family: \'Cairo\';\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-bottom: -32px !important;\r\n    margin-top: -50px !important;\r\n    }\r\n    .logo-div8{\r\n       font-family: \'Cairo\';\r\ncolor: darkblue !important;\r\nfont-size:14px !important;\r\nmargin-bottom: -15px !important;\r\n    margin-top: -38px !important;\r\n    }\r\n\r\n\r\n.logo-div5{\r\n       \r\n        width: 35% !important;\r\n        margin-top: 15px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n    }\r\n\r\n.logo-div6{\r\n        text-align:center !important;\r\n        margin-top: 3px !important;\r\n        font-family: \'Cairo\';\r\ncolor: darkblue !important;\r\n\r\ntext-align:center !important;\r\nfont-size:14px !important;\r\n    }\r\n.logo-div7{\r\n        \r\n        width: 65% !important;\r\n        max-height: 45px !important;\r\n        margin-top: 19px !important;\r\n       display: block;\r\n       margin-left: auto;\r\n       margin-right: auto;\r\n    }\r\n\r\n.table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th {\r\n    border: 0.5px solid #d1d8dd !important;\r\n}\r\n\r\n.td1 {\r\n\r\nborder-bottom: 0.5px solid #d1d8dd !important;\r\n}\r\n\r\n.si {\r\n   \r\n    color: darkblue !important;\r\n    margin-top: -5px !important; \r\n    \r\n}\r\n\r\n.table-no-b {\r\n\r\nborder-top: 0 !important;\r\nmargin-top: -5px !important;\r\n}\r\n\r\n.space {\r\n   \r\n    margin-top: -12px !important;\r\n    \r\n}\r\n\r\n.ql-editor.read-mode {\r\n\r\npadding:6px !important ;\r\n}\r\n\r\n.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {\r\n   \r\n    font-weight: 600 !important;\r\n   \r\n}\r\n\r\n.w1 {\r\n   margin-right: 115px !important;\r\n}\r\n.w2 {\r\n    border-top: 3px solid #d1d8dd !important;\r\n        padding-top: 10px !important;\r\n}\r\n\r\n\r\n</style>\r\n\r\n<div id=""footer-html"" class=""visible-pdf"" style=""\r\n\t\t\tdisplay: block !important;\r\n\t\t\tposition: fixed;\r\n            bottom: 0;\r\n            width:100%;\r\n \r\n\t\t"">\r\n\t\t\r\n\t\t<div class=""letter-head-footer"">\r\n\t\t\t{{ footer }}\r\n\t\t</div>\r\n\t\t\r\n\t\t<p class=""text-center small page-number visible-pdf"">\r\n\t\t\tPage <span class=""page""></span> of <span class=""topage""></span>\r\n\t\t</p>\r\n\t</div>\r\n\r\n<br>\r\n\r\n<div>\r\n    <div id=""footer-html"" class=""visible-pdf"">\r\n        {% if not no_letterhead and footer %}\r\n        <div class=""letter-head-footer"">\r\n            {{ footer }}\r\n        </div>\r\n        {% endif %}\r\n        <p class=""text-center small page-number visible-pdf"">\r\n            {{ _(""Page {0} of {1}"").format(\'<span class=""page""></span>\', \'<span class=""topage""></span>\') }}\r\n        </p>\r\n    </div>\r\n\r\n\r\n\r\n<table class = ""table table-condensed table-no-b"">\r\n <tr class=""table-no-b"" >\r\n<td class=""table-no-b"" style=""width:50%"" >\r\n<h1 class=""si"">{{ doc.company }}</h1>\r\n<b> {{ ""الشركة المتحدة للبطاريات السائلة"" }} </b><br>\r\n<b>{{ _(""رقم السجل التجاري : 655 "") }}</b><br>\r\n<b>{{ _(""رقم البطاقة الضريبية : 481688080 "") }}</b><br>\r\n</td>\r\n\r\n<td class=""table-no-b si"" style=""width:50%"" >\r\n<div class=""logo-div1"">{{ letter_head }}</div><br>\r\n\r\n</td>\r\n\r\n </tr>\r\n</table>\r\n\r\n<table class = ""table table-condensed no-border"">\r\n  <tr>\r\n    <td style=""width: 50%;"">\r\n<br><br>\r\n        <b>{{ _(""Supplier Name "") }}:</b> {{ doc.supplier_name }}<br><br>\r\n       \r\n       \r\n    </td>\r\n    <td style=""width: 50%;"">\r\n\r\n<table class=""table table-condensed table-bordered"">\r\n\t<tbody>\r\n\t\t\r\n\r\n<tr>\r\n    <h5 class=""logo-div3"">{{ _(""امر شراء"") }}</h5><br>\r\n<td class=""text-left"" style=""width: 50%"">\r\n\t\t\t\t\t{{ _("" Invoice number "") }} :\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-left"">\r\n\t\t\t\t\t{{ doc.name}}\r\n\t\t\t\t</td>\r\n</tr>\r\n <td class=""text-left"" style=""width: 50%"">\r\n\t\t\t\t\t{{ _("" تاريخ المستند "") }} :\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-left"">\r\n\t\t\t\t\t{{ doc.get_formatted(""transaction_date"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t\t\r\n\t\r\n<tr>\r\n    <td class=""text-left"" style=""width: 50%"">\r\n\t\t\t\t\t{{ _("" تاريخ الاستلام "") }} :\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-left"">\r\n\t\t\t\t\t{{ doc.get_formatted(""schedule_date"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t\t\r\n\t</tbody>\r\n</table>\r\n\r\n    </td>\r\n    \r\n  </tr>\r\n</table>\r\n\r\n<br>\r\n\r\n\r\n<table class = ""table table-condensed table-bordered"">\r\n  <tr>\r\n\r\n<table class=""table table-condensed table-hover table-bordered"">\r\n\t\t<tbody>\r\n            <tr>\r\n<h5 class=""logo-div4"">{{ _(""Service & product "") }}</h5><br><br>\r\n\r\n     </tr> \r\n\r\n <tr>\r\n                <th style= ""text-align: center;"">م</th>\r\n                <th style= ""text-align: center;"">كود الصنف</th>\r\n                <th style= ""text-align: center;"">اسم الصنف</th>\r\n                <th style= ""text-align: center;"">كمية</th>\r\n                <th style= ""text-align: center;"">الكميةالمستلمة</th>\r\n                <th style= ""text-align: center;"">سعر</th>\r\n                <th style= ""text-align: center;"">اجمالي</th>\r\n            </tr>\r\n            {%- for row in doc.items -%}\r\n            <tr>\r\n                \r\n               <td style=""width: 3%;"">{{ row.idx }}</td>\r\n               <td style=""width: 22%;"">{{ row.item_code }}</td>\r\n\t\t<td style=""width: 30%;"">{{ row.item_name }}</td>\r\n\t\t\t<td style=""width: 10%; text-align: center;"">{{ row.qty }} {{ row.uom or row.stock_uom }}</td>\r\n\t\t\t<td style=""width: 10%; text-align: center;"">{{ row.received_qty }}</td>\r\n\t\t\t<td style=""width: 10%; text-align: center;"">{{\r\n\t\t\t\trow.get_formatted(""rate"", doc) }}</td>\r\n\t\t\t<td style=""width: 15%; text-align: center;"">{{\r\n\t\t\t\trow.get_formatted(""amount"", doc) }}</td>\r\n\t\t</tr>\r\n\t\t{%- endfor -%}\r\n\t</tbody>\r\n</table>\r\n\r\n<table class=""table table-condensed no-border"">\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t{% if doc.flags.show_inclusive_tax_in_print %}\r\n\t\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t\t{{ _(""Total Excl. Tax"") }}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-right"">\r\n\t\t\t\t\t{{ doc.get_formatted(""net_total"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t{% else %}\r\n\t\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t\t{{ _(""Total"") }}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-right"">\r\n\t\t\t\t\t{{ doc.get_formatted(""total"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t{% endif %}\r\n\t\t</tr>\r\n\t\t{%- for row in doc.taxes -%}\r\n\t\t  {%- if (not row.included_in_print_rate or doc.flags.show_inclusive_tax_in_print) and row.tax_amount != 0 -%}\r\n\t\t\t<tr>\r\n\t\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t\t{% if \'%\' in row.description %}\r\n\t\t\t\t\t    {{ row.description }}\r\n\t\t\t\t\t{% else %}\r\n\t\t\t\t\t    {{ row.description }}@{{ row.rate }}%\r\n\t\t\t\t\t{% endif %}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-right"">\r\n\t\t\t\t\t{{ row.get_formatted(""tax_amount"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t<tr>\r\n\t\t  {%- endif -%}\r\n\t\t{%- endfor -%}\r\n\t\t{%- if doc.discount_amount -%}\r\n\t\t<tr>\r\n\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t{{ _(""Discount"") }}\r\n\t\t\t</td>\r\n\t\t\t<td class=""text-right"">\r\n\t\t\t\t{{ doc.get_formatted(""discount_amount"") }}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t{%- endif -%}\r\n\t\t<tr>\r\n\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t<b>{{ _(""Grand Total"") }}</b>\r\n\t\t\t</td>\r\n\t\t\t<td class=""text-right"">\r\n\t\t\t\t{{ doc.get_formatted(""grand_total"") }}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t{%- if doc.rounded_total -%}\r\n\t\t<tr>\r\n\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t<b>{{ _(""Rounded Total"") }}</b>\r\n\t\t\t</td>\r\n\t\t\t<td class=""text-right"">\r\n\t\t\t\t{{ doc.get_formatted(""rounded_total"") }}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t{%- endif -%}\r\n\t\t{%- for row in doc.payments -%}\r\n\t\t\t<tr>\r\n\t\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t    {{ row.mode_of_payment }}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=""text-right"">\r\n\t\t\t\t\t{{ row.get_formatted(""amount"", doc) }}\r\n\t\t\t\t</td>\r\n\t\t\t<tr>\r\n\t\t{%- endfor -%}\r\n\t\r\n\t{%- if doc.change_amount -%}\r\n\t\t<tr>\r\n\t\t\t<td class=""text-right"" style=""width: 65%"">\r\n\t\t\t\t<b>{{ _(""Change Amount"") }}</b>\r\n\t\t\t</td>\r\n\t\t\t<td class=""text-right"">\r\n\t\t\t\t{{ doc.get_formatted(""change_amount"") }}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t{%- endif -%}\r\n\t</tbody>\r\n</table>\r\n\r\n\t\t\r\n\t\t<br><br><br><br>\r\n<table class=""table table-condensed table-hover table-bordered"">\r\n\t\t<tbody>\r\n            <tr>\r\n<h5 class=""logo-div4"">{{ _(""Payment Terms"") }}</h5><br><br>\r\n\r\n     </tr> \r\n\r\n<tr>\r\n                \r\n                <th style= ""text-align: center;"">م</th>\r\n                <th style= ""text-align: center;"">بيان الدفعة</th>\r\n                <th style= ""text-align: center;"">تاريخ الاستحقاق</th>\r\n                <th style= ""text-align: center;"">النسبة</th>\r\n                <th style= ""text-align: center;"">مبلغ الدفعة</th>\r\n                \r\n            </tr>\r\n            {%- for row in doc.payment_schedule -%}\r\n            <tr>\r\n            <td style=""width: 2%; text-align: center"">{{ row.idx }}</td>\r\n            <td style=""width: 38%; text-align: right;"">{{ row.payment_term }}</td> \r\n            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""due_date"", doc) }}</td>\r\n            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""invoice_portion"", doc) }}</td>\r\n            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""payment_amount"", doc) }}</td>\r\n\t    \r\n\t\t\r\n\t\t</tr>\r\n\t\t{%- endfor -%}\r\n\t</tbody>\r\n</table>\r\n\r\n<br><br>\r\n\r\n{%- if doc.terms -%}\r\n\r\n<table class=""table table-condensed table-hover table-bordered"">\r\n\t\t<tbody>\r\n            <tr>\r\n                \r\n<h5 class=""logo-div4"">{{ _(""الملاحظات و الشروط و الاحكام"") }}</h5><br><br>\r\n\r\n     </tr> \r\n\r\n<tr>\r\n             <td>\r\n             <p class=""cr"">{{ doc.terms or """" }}</p>   \r\n\r\n            </tr>\r\n           </td>\r\n\t</tbody>\r\n</table>\r\n\r\n{%- endif -%}\r\n\r\n\r\n```', 'created_at': datetime.datetime(2024, 6, 3, 11, 24, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2144967926, 'issue_id': 2287624146, 'author': 'Nihantra-Patel', 'body': 'Issue is in the style (CSS), because some style do not support in PDF, or something wrong in css.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/4b9ff8e8-cc4f-4cca-afd1-91b9964a9e2f', 'created_at': datetime.datetime(2024, 6, 3, 11, 35, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2146711519, 'issue_id': 2287624146, 'author': 'Islamation', 'body': 'Thanks for your help @Nihantra-Patel ☺', 'created_at': datetime.datetime(2024, 6, 4, 6, 27, 59, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-24 08:47:08 UTC): If the standard print format is working, there must be some problem in the custom format's code itself.

We tested in v15 latest with custom print format, but there is no issue found. Please share the code.

Islamation (Issue Creator) on (2024-05-30 08:52:38 UTC): `<style>

/* arabic */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6O59ZMaA.woff2) format('woff2');
  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;
}
/* latin-ext */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6F59ZMaA.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6L59Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
	.print-format table, .print-format tr, 
	.print-format td, .print-format div, .print-format p {
		 font-family: 'Cairo';
		line-height: 90%;
		vertical-align: middle;
                
	}
	@media print {
    body{
         font-family: 'Cairo';
        width: 220mm;
        height: 300mm;
        margin: 5mm 5mm 10mm 5mm; 
        /* change the margins as you want them to be. */
   } 
}
	@media screen {
		.print-format {
			width: 200mm;
			padding: 5mm;
			min-height: 300mm;
			footer {page-break-after: always;}
		}
	}
table.no-border, table.no-border td{
   
    margin-top: -20px !important;
}



.table .table-condensed .table-hover .table-bordered .print-format td, .print-format th{
background-color: whitesmoke !important;
}
.print-format td, .print-format th {
  
}

.print-heading {
    
    float: left !important;
   border-bottom: 1px solid #d1d8dd !important;
   width: 45% !important ;
}


.alert-logo {
    padding: 0px !important; 
    margin-bottom: .5px !important;
    border: 0px solid transparent !important;
    border-radius: 4px !important;
    text-align: left !important;
    color: red !important;
}



.cr{
     width: 60% !important;
        margin-top: -5px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;

}
.logo-div1{
          
 text-align: right !important;
    width: 40% !important;
   
    margin-right: 160px !important;  
    }
.logo-div2 {
font-family: Arial !important;
color: darkblue !important;
text-align:center !important;
font-size:18px !important;
}
.logo-div3 {
 font-family: 'Cairo';
font-weight:700 !important;
color: darkblue !important;
font-size:14px !important;
margin-top:5px;
margin-bottom: -29px !important;
margin-left: 5px !important;
}

.logo-div4{
       font-family: Arial !important;
color: darkblue !important;
font-size:14px !important;
margin-bottom: -32px !important;
    margin-top: -50px !important;
    }
    .logo-div8{
       font-family: Arial !important;
color: darkblue !important;
font-size:14px !important;
margin-bottom: -15px !important;
    margin-top: -38px !important;
    }


.logo-div5{
       
        width: 35% !important;
        margin-top: 15px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;
    }

.logo-div6{
        text-align:center !important;
        margin-top: 3px !important;
       font-family: Arial !important;
color: darkblue !important;

text-align:center !important;
font-size:14px !important;
    }
.logo-div7{
        
        width: 65% !important;
        max-height: 45px !important;
        margin-top: 19px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;
    }

.table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th {
    border: 0.5px solid #d1d8dd !important;
}

.td1 {

border-bottom: 0.5px solid #d1d8dd !important;
}

.si {
   
    color: darkblue !important;
    margin-top: -5px !important; 
    
}

.table-no-b {

border-top: 0 !important;
margin-top: -5px !important;
}

.space {
   
    margin-top: -12px !important;
    
}

.ql-editor.read-mode {

padding:6px !important ;
}

.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {
   
    font-weight: 600 !important;
   
}

.w1 {
   margin-right: 115px !important;
}
.w2 {
    border-top: 3px solid #d1d8dd !important;
        padding-top: 10px !important;
}


</style>

<div id=""footer-html"" class=""visible-pdf"" style=""
			display: block !important;
			position: fixed;
            bottom: 0;
            width:100%;
 
		"">
    <table class=""table table-condensed"">
      <tr>
        <td style=""text-align: center; border: none;"">
        <b>{{ _(""المستلم "") }}</b>
        </td>
          <td style=""text-align: center; border: none;"">
        	<b>{{ _(""المخزن "") }}</b>
        </td>
         <td style=""text-align: center; border: none;"">
        	<b>{{ _(""يعتمد "") }}</b>
        </td>
      </tr>
      
       <tr>
        <td style=""text-align: center; border: none;"">
        <b> .............................. </b>
        </td>
          <td style=""text-align: center; border: none;"">
         <b> .............................. </b>
        </td>
         <td style=""text-align: center; border: none;"">
         <b> .............................. </b>
        </td>
      </tr>
		 </table>
		<div class=""letter-head-footer"">
			{{ footer }}
		</div>
		
		<p class=""text-center small page-number visible-pdf"">
			Page <span class=""page""></span> of <span class=""topage""></span>
		</p>
	</div>

<br>

<div>
    <div id=""footer-html"" class=""visible-pdf"">
        {% if not no_letterhead and footer %}
        <div class=""letter-head-footer"">
            {{ footer }}
        </div>
        {% endif %}
        <p class=""text-center small page-number visible-pdf"">
            {{ _(""Page {0} of {1}"").format('<span class=""page""></span>', '<span class=""topage""></span>') }}
        </p>
    </div>



<table class = ""table table-condensed table-no-b"">
 <tr class=""table-no-b"" >
<td class=""table-no-b"" style=""width:50%"" >
<h1 class=""si"">{{ doc.company }}</h1>
<b> {{ ""الشركة المتحدة للبطاريات السائلة"" }} </b><br>
<b>{{ _(""رقم السجل التجاري : 655 "") }}</b><br>
<b>{{ _(""رقم البطاقة الضريبية : 481688080 "") }}</b><br>
</td>

<td class=""table-no-b si"" style=""width:50%"" >
<div class=""logo-div1"">{{ letter_head }}</div><br>

</td>

 </tr>
</table>

<table class = ""table table-condensed no-border"">
  <tr>
    <td style=""width: 50%;"">
<br><br>
        <b>{{ _(""الغرض  "") }}:</b> {{ _(doc.material_request_type ) }}<br><br>
       <b>{{ _(""الحالة  "") }}:</b> {{ _(doc.status ) }}<br><br>
       
    </td>
    <td style=""width: 50%;"">

<table class=""table table-condensed table-bordered"">
	<tbody>
		

<tr>
    <h5 class=""logo-div3"">{{ _("" طلب مواد "") }}</h5><br>
<td class=""text-left"" style=""width: 50%"">
					{{ _("" رقم المستند "") }} :
				</td>
				<td class=""text-left"">
					{{ doc.name}}
				</td>
</tr>
 <td class=""text-left"" style=""width: 50%"">
					{{ _("" تاريخ المستند "") }} :
				</td>
				<td class=""text-left"">
					{{ doc.get_formatted(""transaction_date"", doc) }}
				</td>
				
	
<tr>
   
				
	</tbody>
</table>

    </td>
    
  </tr>
</table>

<br>


<table class = ""table table-condensed table-bordered"">
  <tr>

<table class=""table table-condensed table-hover table-bordered"">
		<tbody>
            <tr>
<h5 class=""logo-div4"">{{ _(""Service & product information"") }}</h5><br><br>

     </tr> 

 <tr>
                <th style= ""text-align: center;"">م</th>
                <th style= ""text-align: center;"">كود الصنف</th>
                <th style= ""text-align: center;"">اسم الصنف</th>
                <th style= ""text-align: center;"">كمية</th>
                
            </tr>
            {%- for row in doc.items -%}
            <tr>
                
               <td style=""width: 3%;"">{{ row.idx }}</td>
               <td style=""width: 22%;"">{{ row.item_code }}</td>
		<td style=""width: 30%;"">{{ row.custom_item_name_in_arabic }}</td>
			<td style=""width: 15%; text-align: center;"">{{ row.qty }} {{ row.uom or row.stock_uom }}</td>
			
		</tr>
		{%- endfor -%}
		
			<tr>
		<th style=""color:darkblue; text-align: right;border: whitesmoke !important; ""></th>
		<!-- get grand total //-->
		<th style=""text-align: center;border: whitesmoke !important;""></th>
			<th style=""color:darkblue; text-align: left; border-right: whitesmoke !important; ""> الاجماليات : </th>
		<th style=""text-align: center;"">{{ doc.items|sum(attribute= 'qty') }}</th>
	
	</tr>
	</tbody>
</table>



		
	
<br><br>

{%- if doc.terms -%}

<table class=""table table-condensed table-hover table-bordered"">
		<tbody>
            <tr>
                
<h5 class=""logo-div4"">{{ _(""الملاحظات و الشروط و الاحكام"") }}</h5><br><br>

     </tr> 

<tr>
             <td>
             <p class=""cr"">{{ doc.terms or """" }}</p>   

            </tr>
           </td>
	</tbody>
</table>

{%- endif -%}

`

Nihantra-Patel on (2024-05-30 09:50:37 UTC): Please provide the code in the below style. and your code shows a mismatch.

![image](https://github.com/frappe/erpnext/assets/141945075/be326c90-ad24-46f1-8d9f-f6446ab06b0f)


And code is long, so you have to test it yourself one by one.

Islamation (Issue Creator) on (2024-06-03 11:24:31 UTC): ```
<style>

/* arabic */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6O59ZMaA.woff2) format('woff2');
  unicode-range: U+0600-06FF, U+200C-200E, U+2010-2011, U+204F, U+2E41, U+FB50-FDFF, U+FE80-FEFC;
}
/* latin-ext */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6F59ZMaA.woff2) format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Cairo';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/cairo/v10/SLXLc1nY6Hkvalr-ao6L59Y.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
	.print-format table, .print-format tr, 
	.print-format td, .print-format div, .print-format p {
		 font-family: 'Cairo';
		line-height: 90%;
		vertical-align: middle;
                
	}
	@media print {
    body{
         font-family: 'Cairo';
        width: 220mm;
        height: 300mm;
        margin: 5mm 5mm 10mm 5mm; 
        /* change the margins as you want them to be. */
   } 
}
	@media screen {
		.print-format {
			width: 200mm;
			padding: 5mm;
			min-height: 300mm;
			footer {page-break-after: always;}
		}
	}
table.no-border, table.no-border td{
   
    margin-top: -20px !important;
}



.table .table-condensed .table-hover .table-bordered .print-format td, .print-format th{
background-color: whitesmoke !important;
}
.print-format td, .print-format th {
  
}

.print-heading {
    
    float: left !important;
   border-bottom: 1px solid #d1d8dd !important;
   width: 45% !important ;
}


.alert-logo {
    padding: 0px !important; 
    margin-bottom: .5px !important;
    border: 0px solid transparent !important;
    border-radius: 4px !important;
    text-align: left !important;
    color: red !important;
}



.cr{
     width: 60% !important;
        margin-top: -5px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;

}
.logo-div1{
          
 text-align: right !important;
    width: 40% !important;
   
    margin-right: 160px !important;  
    }
.logo-div2 {
 font-family: 'Cairo';
color: darkblue !important;
text-align:center !important;
font-size:18px !important;
}
.logo-div3 {
 font-family: 'Cairo';
font-weight:700 !important;
color: darkblue !important;
font-size:14px !important;
margin-top:5px;
margin-bottom: -29px !important;
margin-left: 5px !important;
}

.logo-div4{
        font-family: 'Cairo';
color: darkblue !important;
font-size:14px !important;
margin-bottom: -32px !important;
    margin-top: -50px !important;
    }
    .logo-div8{
       font-family: 'Cairo';
color: darkblue !important;
font-size:14px !important;
margin-bottom: -15px !important;
    margin-top: -38px !important;
    }


.logo-div5{
       
        width: 35% !important;
        margin-top: 15px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;
    }

.logo-div6{
        text-align:center !important;
        margin-top: 3px !important;
        font-family: 'Cairo';
color: darkblue !important;

text-align:center !important;
font-size:14px !important;
    }
.logo-div7{
        
        width: 65% !important;
        max-height: 45px !important;
        margin-top: 19px !important;
       display: block;
       margin-left: auto;
       margin-right: auto;
    }

.table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th {
    border: 0.5px solid #d1d8dd !important;
}

.td1 {

border-bottom: 0.5px solid #d1d8dd !important;
}

.si {
   
    color: darkblue !important;
    margin-top: -5px !important; 
    
}

.table-no-b {

border-top: 0 !important;
margin-top: -5px !important;
}

.space {
   
    margin-top: -12px !important;
    
}

.ql-editor.read-mode {

padding:6px !important ;
}

.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {
   
    font-weight: 600 !important;
   
}

.w1 {
   margin-right: 115px !important;
}
.w2 {
    border-top: 3px solid #d1d8dd !important;
        padding-top: 10px !important;
}


</style>

<div id=""footer-html"" class=""visible-pdf"" style=""
			display: block !important;
			position: fixed;
            bottom: 0;
            width:100%;
 
		"">
		
		<div class=""letter-head-footer"">
			{{ footer }}
		</div>
		
		<p class=""text-center small page-number visible-pdf"">
			Page <span class=""page""></span> of <span class=""topage""></span>
		</p>
	</div>

<br>

<div>
    <div id=""footer-html"" class=""visible-pdf"">
        {% if not no_letterhead and footer %}
        <div class=""letter-head-footer"">
            {{ footer }}
        </div>
        {% endif %}
        <p class=""text-center small page-number visible-pdf"">
            {{ _(""Page {0} of {1}"").format('<span class=""page""></span>', '<span class=""topage""></span>') }}
        </p>
    </div>



<table class = ""table table-condensed table-no-b"">
 <tr class=""table-no-b"" >
<td class=""table-no-b"" style=""width:50%"" >
<h1 class=""si"">{{ doc.company }}</h1>
<b> {{ ""الشركة المتحدة للبطاريات السائلة"" }} </b><br>
<b>{{ _(""رقم السجل التجاري : 655 "") }}</b><br>
<b>{{ _(""رقم البطاقة الضريبية : 481688080 "") }}</b><br>
</td>

<td class=""table-no-b si"" style=""width:50%"" >
<div class=""logo-div1"">{{ letter_head }}</div><br>

</td>

 </tr>
</table>

<table class = ""table table-condensed no-border"">
  <tr>
    <td style=""width: 50%;"">
<br><br>
        <b>{{ _(""Supplier Name "") }}:</b> {{ doc.supplier_name }}<br><br>
       
       
    </td>
    <td style=""width: 50%;"">

<table class=""table table-condensed table-bordered"">
	<tbody>
		

<tr>
    <h5 class=""logo-div3"">{{ _(""امر شراء"") }}</h5><br>
<td class=""text-left"" style=""width: 50%"">
					{{ _("" Invoice number "") }} :
				</td>
				<td class=""text-left"">
					{{ doc.name}}
				</td>
</tr>
 <td class=""text-left"" style=""width: 50%"">
					{{ _("" تاريخ المستند "") }} :
				</td>
				<td class=""text-left"">
					{{ doc.get_formatted(""transaction_date"", doc) }}
				</td>
				
	
<tr>
    <td class=""text-left"" style=""width: 50%"">
					{{ _("" تاريخ الاستلام "") }} :
				</td>
				<td class=""text-left"">
					{{ doc.get_formatted(""schedule_date"", doc) }}
				</td>
				
	</tbody>
</table>

    </td>
    
  </tr>
</table>

<br>


<table class = ""table table-condensed table-bordered"">
  <tr>

<table class=""table table-condensed table-hover table-bordered"">
		<tbody>
            <tr>
<h5 class=""logo-div4"">{{ _(""Service & product "") }}</h5><br><br>

     </tr> 

 <tr>
                <th style= ""text-align: center;"">م</th>
                <th style= ""text-align: center;"">كود الصنف</th>
                <th style= ""text-align: center;"">اسم الصنف</th>
                <th style= ""text-align: center;"">كمية</th>
                <th style= ""text-align: center;"">الكميةالمستلمة</th>
                <th style= ""text-align: center;"">سعر</th>
                <th style= ""text-align: center;"">اجمالي</th>
            </tr>
            {%- for row in doc.items -%}
            <tr>
                
               <td style=""width: 3%;"">{{ row.idx }}</td>
               <td style=""width: 22%;"">{{ row.item_code }}</td>
		<td style=""width: 30%;"">{{ row.item_name }}</td>
			<td style=""width: 10%; text-align: center;"">{{ row.qty }} {{ row.uom or row.stock_uom }}</td>
			<td style=""width: 10%; text-align: center;"">{{ row.received_qty }}</td>
			<td style=""width: 10%; text-align: center;"">{{
				row.get_formatted(""rate"", doc) }}</td>
			<td style=""width: 15%; text-align: center;"">{{
				row.get_formatted(""amount"", doc) }}</td>
		</tr>
		{%- endfor -%}
	</tbody>
</table>

<table class=""table table-condensed no-border"">
	<tbody>
		<tr>
			{% if doc.flags.show_inclusive_tax_in_print %}
				<td class=""text-right"" style=""width: 65%"">
					{{ _(""Total Excl. Tax"") }}
				</td>
				<td class=""text-right"">
					{{ doc.get_formatted(""net_total"", doc) }}
				</td>
			{% else %}
				<td class=""text-right"" style=""width: 65%"">
					{{ _(""Total"") }}
				</td>
				<td class=""text-right"">
					{{ doc.get_formatted(""total"", doc) }}
				</td>
			{% endif %}
		</tr>
		{%- for row in doc.taxes -%}
		  {%- if (not row.included_in_print_rate or doc.flags.show_inclusive_tax_in_print) and row.tax_amount != 0 -%}
			<tr>
				<td class=""text-right"" style=""width: 65%"">
					{% if '%' in row.description %}
					    {{ row.description }}
					{% else %}
					    {{ row.description }}@{{ row.rate }}%
					{% endif %}
				</td>
				<td class=""text-right"">
					{{ row.get_formatted(""tax_amount"", doc) }}
				</td>
			<tr>
		  {%- endif -%}
		{%- endfor -%}
		{%- if doc.discount_amount -%}
		<tr>
			<td class=""text-right"" style=""width: 65%"">
				{{ _(""Discount"") }}
			</td>
			<td class=""text-right"">
				{{ doc.get_formatted(""discount_amount"") }}
			</td>
		</tr>
		{%- endif -%}
		<tr>
			<td class=""text-right"" style=""width: 65%"">
				<b>{{ _(""Grand Total"") }}</b>
			</td>
			<td class=""text-right"">
				{{ doc.get_formatted(""grand_total"") }}
			</td>
		</tr>
		{%- if doc.rounded_total -%}
		<tr>
			<td class=""text-right"" style=""width: 65%"">
				<b>{{ _(""Rounded Total"") }}</b>
			</td>
			<td class=""text-right"">
				{{ doc.get_formatted(""rounded_total"") }}
			</td>
		</tr>
		{%- endif -%}
		{%- for row in doc.payments -%}
			<tr>
				<td class=""text-right"" style=""width: 65%"">
				    {{ row.mode_of_payment }}
				</td>
				<td class=""text-right"">
					{{ row.get_formatted(""amount"", doc) }}
				</td>
			<tr>
		{%- endfor -%}
	
	{%- if doc.change_amount -%}
		<tr>
			<td class=""text-right"" style=""width: 65%"">
				<b>{{ _(""Change Amount"") }}</b>
			</td>
			<td class=""text-right"">
				{{ doc.get_formatted(""change_amount"") }}
			</td>
		</tr>
	{%- endif -%}
	</tbody>
</table>

		
		<br><br><br><br>
<table class=""table table-condensed table-hover table-bordered"">
		<tbody>
            <tr>
<h5 class=""logo-div4"">{{ _(""Payment Terms"") }}</h5><br><br>

     </tr> 

<tr>
                
                <th style= ""text-align: center;"">م</th>
                <th style= ""text-align: center;"">بيان الدفعة</th>
                <th style= ""text-align: center;"">تاريخ الاستحقاق</th>
                <th style= ""text-align: center;"">النسبة</th>
                <th style= ""text-align: center;"">مبلغ الدفعة</th>
                
            </tr>
            {%- for row in doc.payment_schedule -%}
            <tr>
            <td style=""width: 2%; text-align: center"">{{ row.idx }}</td>
            <td style=""width: 38%; text-align: right;"">{{ row.payment_term }}</td> 
            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""due_date"", doc) }}</td>
            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""invoice_portion"", doc) }}</td>
            <td style=""width: 20%; text-align: center;"">{{row.get_formatted(""payment_amount"", doc) }}</td>
	    
		
		</tr>
		{%- endfor -%}
	</tbody>
</table>

<br><br>

{%- if doc.terms -%}

<table class=""table table-condensed table-hover table-bordered"">
		<tbody>
            <tr>
                
<h5 class=""logo-div4"">{{ _(""الملاحظات و الشروط و الاحكام"") }}</h5><br><br>

     </tr> 

<tr>
             <td>
             <p class=""cr"">{{ doc.terms or """" }}</p>   

            </tr>
           </td>
	</tbody>
</table>

{%- endif -%}


```

Nihantra-Patel on (2024-06-03 11:35:07 UTC): Issue is in the style (CSS), because some style do not support in PDF, or something wrong in css.


https://github.com/frappe/erpnext/assets/141945075/4b9ff8e8-cc4f-4cca-afd1-91b9964a9e2f

Islamation (Issue Creator) on (2024-06-04 06:27:59 UTC): Thanks for your help @Nihantra-Patel ☺

"
2286768253,issue,open,,Bank statement upload can't handle statements with amounts in a single column (no separate deposit/withdraw columns),"### Information about bug

$subject

We have several use cases where a popular bank's statement only has a single column named `Amount` and this column has both deposits (positive) and withdrawals (negative amounts). So far we have manually been populating the deposit/withdraw columns before uploading the statements. But this is not user friendly and cannot be recommended to the end users.

### Module

accounts

### Version

Frappe version - 14
ERPNext version - 14

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-05-09 02:19:49+00:00,[],2024-09-12 11:34:42+00:00,,https://github.com/frappe/erpnext/issues/41391,[],"[{'comment_id': 2145025700, 'issue_id': 2286768253, 'author': 'nabinhait', 'body': ""This is not a bug, it's a feature request, removing 'bug' label"", 'created_at': datetime.datetime(2024, 6, 3, 12, 6, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2346046735, 'issue_id': 2286768253, 'author': 'mepoland', 'body': ""I second this request. Plenty of bank statements combine Deposit/Withdrawl into a single column, and it's annnoying to have to manually split them out before import. Cheers"", 'created_at': datetime.datetime(2024, 9, 12, 11, 34, 41, tzinfo=datetime.timezone.utc)}]","nabinhait on (2024-06-03 12:06:27 UTC): This is not a bug, it's a feature request, removing 'bug' label

mepoland on (2024-09-12 11:34:41 UTC): I second this request. Plenty of bank statements combine Deposit/Withdrawl into a single column, and it's annnoying to have to manually split them out before import. Cheers

"
2286738060,issue,closed,completed,HTML tag is visible in Total row of Exponential Smoothing Forecasting Report.,"### Information about bug

<strong> Tag is visible in the Total Cell of the Exponential Smoothing Forecasting Report. (shown below)
![image](https://github.com/frappe/erpnext/assets/93438531/a7ba568d-fc14-4156-8a15-4835d494a8ae)


### Module

manufacturing

### Version

ERPNext: v15.22.2 
Frappe Framework: v15.26.0 

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",quebn,2024-05-09 01:41:12+00:00,[],2024-06-06 00:08:46+00:00,2024-05-10 07:42:25+00:00,https://github.com/frappe/erpnext/issues/41390,"[('bug', None), ('released', None)]","[{'comment_id': 2124226215, 'issue_id': 2286738060, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.25.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.25.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 5, 22, 8, 51, 12, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-05-22 08:51:12 UTC): :tada: This issue has been resolved in version 15.25.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.25.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2285924392,issue,closed,completed,Job Card Operation can be started even if there are other not finished jobs before,"### Information about bug

I defined a routing with three BOM Operations.
![image](https://github.com/frappe/erpnext/assets/42201209/8d019e0d-e845-447d-a1cc-0240e1d87d2b)

When I now open the Job Card for the last Operation, I can start the Job. 
![image](https://github.com/frappe/erpnext/assets/42201209/8c7b7e69-d28d-4abc-a61b-d92dc232a37d)

But when I try to Complete the Job, I get the message that there is another operation, that has to be complete before.
![image](https://github.com/frappe/erpnext/assets/42201209/964f5f35-8bd5-41ee-bc9b-33c49d1e9896)

I expect this warning when I try to start the operation in the first place.




There is another error when I try to pause the job. 
![image](https://github.com/frappe/erpnext/assets/42201209/24e44191-2bbe-4beb-ab07-31ffd3920690)
I get this message even when I added in a value for Completed Qty

### Module

manufacturing

### Version

Frappe Framework: v15.25.0
ERPNext: v15.21.2

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
Job Card PO-JOB00006: As per the sequence of the operations in the work order MFG-WO-2024-00002, complete the operation Cutting before the operation Assembling.


Error: Job Card Time Log Row #1: Value missing for: Completed Qty
```
",SamuelHelbling,2024-05-08 15:52:22+00:00,[],2024-06-19 00:08:35+00:00,2024-06-04 16:43:55+00:00,https://github.com/frappe/erpnext/issues/41385,"[('bug', None)]",[],
2284797300,issue,open,,Out of range value for column 'valuation_rate',"### Information about bug

get 'Out of range value for column 'valuation_rate' in Re-post Item Valuation Process 

### Module

stock

### Version

frappe V15.0.1
erpnext V15.0.0

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback with variables (most recent call last):
  File ""apps/erpnext/erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py"", line 254, in repost
    repost_sl_entries(doc)
      doc = <RepostItemValuation: d50547f1ef docstatus=1>
      e = DataError(1264, ""Out of range value for column 'valuation_rate' at row 1"")
      traceback = 'Traceback (most recent call last):\n  File ""apps/erpnext/erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py"", line 254, in repost\n    repost_sl_entries(doc)\n  File ""apps/erpnext/erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py"", line 288, in repost_sl_entries\n    repost_future_sle(\n  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 305, in repost_future_sle\n    obj = update_entries_after(\n  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 581, in __init__\n    self.build()\n  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 640, in build\n    self.process_sle(sle)\n  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 824, in process_sle\n    frappe.get_doc(sle).db_update()\n  File ""apps/frappe/frappe/model/base_document.py"", line 588, in db_update\n    frappe.db.sql(\n  File ""apps/frappe/frappe/database/database.py"", line 217, in sql\n    self._cursor.execute(query, values)\n  File ""env/lib/python3.10/site-packages/...
  File ""apps/erpnext/erpnext/stock/doctype/repost_item_valuation/repost_item_valuation.py"", line 288, in repost_sl_entries
    repost_future_sle(
      doc = <RepostItemValuation: d50547f1ef docstatus=1>
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 305, in repost_future_sle
    obj = update_entries_after(
      args = [{'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031)}]
      voucher_type = 'Delivery Note'
      voucher_no = 'MAT-DN-2024-00302'
      allow_negative_stock = 1
      via_landed_cost_voucher = 0
      doc = <RepostItemValuation: d50547f1ef docstatus=1>
      reposting_data = {}
      items_to_be_repost = [{'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031)}]
      distinct_item_warehouses = {('ASPC HFİ 5110 (kisə)', 'Hövsan Anbarı - Mrc'): {'reposting_status': False, 'sle': {'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031)}, 'args_idx': 0}}
      affected_transactions = set()
      i = 0
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 581, in __init__
    self.build()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc058882e00>
      args = {'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031), 'distinct_item_warehouses': {('ASPC HFİ 5110 (kisə)', 'Hövsan Anbarı - Mrc'): {'reposting_status': False, 'sle': {'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031)}, 'args_idx': 0}}}
      allow_zero_rate = False
      allow_negative_stock = 1
      via_landed_cost_voucher = 0
      verbose = 1
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 640, in build
    self.process_sle(sle)
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc058882e00>
      future_sle_exists = <function future_sle_exists at 0x7fc05c4d31c0>
      entries_to_fix = [{'name': 'MAT-SLE-2024-01860', 'creation': datetime.datetime(2024, 3, 26, 15, 13, 12, 834031), 'modified': datetime.datetime(2024, 5, 7, 9, 20, 17, 382359), 'modified_by': 'Administrator', 'owner': 'maharram.q@mrchemicalaze.com', 'docstatus': 1, 'idx': 0, 'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 2, 2), 'posting_time': datetime.timedelta(seconds=83517), 'voucher_type': 'Delivery Note', 'voucher_no': 'MAT-DN-2024-00302', 'voucher_detail_no': 'f8be6fa061', 'serial_and_batch_bundle': 'SABB-00001152', 'dependant_sle_voucher_detail_no': None, 'recalculate_rate': 0, 'actual_qty': -13.75, 'qty_after_transaction': 9.350000000000001, 'incoming_rate': 1085.92, 'outgoing_rate': 0.0, 'valuation_rate': 1376.2727272727273, 'stock_value': 12868.15, 'stock_value_difference': -14931.4, 'stock_queue': '[]', 'company': 'MR Chemical', 'stock_uom': 'Tonne', 'project': None, 'fiscal_year': '2024', 'has_batch_no': 1, 'has_serial_no': 0, 'is_...
      i = 4
      sle = {'name': 'MAT-SLE-2024-01740', 'creation': datetime.datetime(2024, 3, 14, 11, 55, 39, 235765), 'modified': datetime.datetime(2024, 5, 7, 9, 20, 17, 384605), 'modified_by': 'Administrator', 'owner': 'maharram.q@mrchemicalaze.com', 'docstatus': 1, 'idx': 0, 'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 3, 14), 'posting_time': datetime.timedelta(seconds=86114), 'voucher_type': 'Delivery Note', 'voucher_no': 'MAT-DN-2024-00245', 'voucher_detail_no': '8275c94d0c', 'serial_and_batch_bundle': 'SABB-00001048', 'dependant_sle_voucher_detail_no': None, 'recalculate_rate': 0, 'actual_qty': -5.35, 'qty_after_transaction': 1.7763568394002505e-15, 'incoming_rate': 1085.92, 'outgoing_rate': 0.0, 'valuation_rate': 1.5282954076482708e+18, 'stock_value': 2714.8, 'stock_value_difference': -5809.669999999999, 'stock_queue': '[]', 'company': 'MR Chemical', 'stock_uom': 'Tonne', 'project': None, 'fiscal_year': '2024', 'has_batch_no': 1, 'has_ser...
  File ""apps/erpnext/erpnext/stock/stock_ledger.py"", line 824, in process_sle
    frappe.get_doc(sle).db_update()
      self = <erpnext.stock.stock_ledger.update_entries_after object at 0x7fc058882e00>
      sle = {'name': 'MAT-SLE-2024-01740', 'creation': datetime.datetime(2024, 3, 14, 11, 55, 39, 235765), 'modified': datetime.datetime(2024, 5, 7, 9, 20, 17, 384605), 'modified_by': 'Administrator', 'owner': 'maharram.q@mrchemicalaze.com', 'docstatus': 1, 'idx': 0, 'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': datetime.date(2024, 3, 14), 'posting_time': datetime.timedelta(seconds=86114), 'voucher_type': 'Delivery Note', 'voucher_no': 'MAT-DN-2024-00245', 'voucher_detail_no': '8275c94d0c', 'serial_and_batch_bundle': 'SABB-00001048', 'dependant_sle_voucher_detail_no': None, 'recalculate_rate': 0, 'actual_qty': -5.35, 'qty_after_transaction': 1.7763568394002505e-15, 'incoming_rate': 1085.92, 'outgoing_rate': 0.0, 'valuation_rate': 1.5282954076482708e+18, 'stock_value': 2714.8, 'stock_value_difference': -5809.669999999999, 'stock_queue': '[]', 'company': 'MR Chemical', 'stock_uom': 'Tonne', 'project': None, 'fiscal_year': '2024', 'has_batch_no': 1, 'has_ser...
      dimensions = []
      has_dimensions = False
      stock_value_difference = -5809.669999999999
  File ""apps/frappe/frappe/model/base_document.py"", line 588, in db_update
    frappe.db.sql(
      self = <StockLedgerEntry: MAT-SLE-2024-01740 docstatus=1>
      d = {'owner': 'maharram.q@mrchemicalaze.com', 'creation': '2024-03-14 11:55:39.235765', 'modified': '2024-05-07 09:20:17.384605', 'modified_by': 'Administrator', 'docstatus': 1, 'idx': 0, 'item_code': 'ASPC HFİ 5110 (kisə)', 'warehouse': 'Hövsan Anbarı - Mrc', 'posting_date': '2024-03-14', 'posting_time': '23:55:14', 'voucher_type': 'Delivery Note', 'voucher_no': 'MAT-DN-2024-00245', 'voucher_detail_no': '8275c94d0c', 'serial_and_batch_bundle': 'SABB-00001048', 'dependant_sle_voucher_detail_no': None, 'recalculate_rate': 0, 'actual_qty': -5.35, 'qty_after_transaction': 1.7763568394002505e-15, 'qty_2_change': -214.0, 'qty_2_after_transaction': -2028.0, 'incoming_rate': 1085.92, 'outgoing_rate': 0.0, 'valuation_rate': 1.5282954076482708e+18, 'stock_value': 2714.8, 'stock_value_difference': -5809.669999999999, 'stock_queue': '[]', 'company': 'MR Chemical', 'stock_uom': 'Tonne', 'stock_2_uom': 'Kisə', 'project': None, 'fiscal_year': '2024', 'has_batch_no': 1, 'has_serial_no': 0, 'is_cancelled'...
      name = 'MAT-SLE-2024-01740'
      columns = ['owner', 'creation', 'modified', 'modified_by', 'docstatus', 'idx', 'item_code', 'warehouse', 'posting_date', 'posting_time', 'voucher_type', 'voucher_no', 'voucher_detail_no', 'serial_and_batch_bundle', 'dependant_sle_voucher_detail_no', 'recalculate_rate', 'actual_qty', 'qty_after_transaction', 'qty_2_change', 'qty_2_after_transaction', 'incoming_rate', 'outgoing_rate', 'valuation_rate', 'stock_value', 'stock_value_difference', 'stock_queue', 'company', 'stock_uom', 'stock_2_uom', 'project', 'fiscal_year', 'has_batch_no', 'has_serial_no', 'is_cancelled', 'to_rename', 'serial_no', 'batch_no']
  File ""apps/frappe/frappe/database/database.py"", line 217, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7fc05b899db0>
      query = 'UPDATE `tabStock Ledger Entry`\n\t\t\t\tSET `owner`=%s, `creation`=%s, `modified`=%s, `modified_by`=%s, `docstatus`=%s, `idx`=%s, `item_code`=%s, `warehouse`=%s, `posting_date`=%s, `posting_time`=%s, `voucher_type`=%s, `voucher_no`=%s, `voucher_detail_no`=%s, `serial_and_batch_bundle`=%s, `dependant_sle_voucher_detail_no`=%s, `recalculate_rate`=%s, `actual_qty`=%s, `qty_after_transaction`=%s, `qty_2_change`=%s, `qty_2_after_transaction`=%s, `incoming_rate`=%s, `outgoing_rate`=%s, `valuation_rate`=%s, `stock_value`=%s, `stock_value_difference`=%s, `stock_queue`=%s, `company`=%s, `stock_uom`=%s, `stock_2_uom`=%s, `project`=%s, `fiscal_year`=%s, `has_batch_no`=%s, `has_serial_no`=%s, `is_cancelled`=%s, `to_rename`=%s, `serial_no`=%s, `batch_no`=%s WHERE `name`=%s'
      values = ['maharram.q@mrchemicalaze.com', '2024-03-14 11:55:39.235765', '2024-05-07 09:20:17.384605', 'Administrator', 1, 0, 'ASPC HFİ 5110 (kisə)', 'Hövsan Anbarı - Mrc', '2024-03-14', '23:55:14', 'Delivery Note', 'MAT-DN-2024-00245', '8275c94d0c', 'SABB-00001048', None, 0, -5.35, 1.7763568394002505e-15, -214.0, -2028.0, 1085.92, 0.0, 1.5282954076482708e+18, 2714.8, -5809.669999999999, '[]', 'MR Chemical', 'Tonne', 'Kisə', None, '2024', 1, 0, 0, 0, None, None, 'MAT-SLE-2024-01740']
      as_dict = 0
      as_list = 0
      debug = False
      ignore_ddl = 0
      auto_commit = 0
      update = None
      explain = False
      run = True
      pluck = False
      trace_id = None
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
      self = <pymysql.cursors.Cursor object at 0x7fc05a100310>
      query = ""UPDATE `tabStock Ledger Entry`\n\t\t\t\tSET `owner`='maharram.q@mrchemicalaze.com', `creation`='2024-03-14 11:55:39.235765', `modified`='2024-05-07 09:20:17.384605', `modified_by`='Administrator', `docstatus`=1, `idx`=0, `item_code`='ASPC HFİ 5110 (kisə)', `warehouse`='Hövsan Anbarı - Mrc', `posting_date`='2024-03-14', `posting_time`='23:55:14', `voucher_type`='Delivery Note', `voucher_no`='MAT-DN-2024-00245', `voucher_detail_no`='8275c94d0c', `serial_and_batch_bundle`='SABB-00001048', `dependant_sle_voucher_detail_no`=NULL, `recalculate_rate`=0, `actual_qty`=-5.35e0, `qty_after_transaction`=1.7763568394002505e-15, `qty_2_change`=-214.0e0, `qty_2_after_transaction`=-2028.0e0, `incoming_rate`=1085.92e0, `outgoing_rate`=0.0e0, `valuation_rate`=1.5282954076482708e+18, `stock_value`=2714.8e0, `stock_value_difference`=-5809.669999999999e0, `stock_queue`='[]', `company`='MR Chemical', `stock_uom`='Tonne', `stock_2_uom`='Kisə', `project`=NULL, `fiscal_year`='2024', `has_batch_no`=1, `has_ser...
      args = ['maharram.q@mrchemicalaze.com', '2024-03-14 11:55:39.235765', '2024-05-07 09:20:17.384605', 'Administrator', 1, 0, 'ASPC HFİ 5110 (kisə)', 'Hövsan Anbarı - Mrc', '2024-03-14', '23:55:14', 'Delivery Note', 'MAT-DN-2024-00245', '8275c94d0c', 'SABB-00001048', None, 0, -5.35, 1.7763568394002505e-15, -214.0, -2028.0, 1085.92, 0.0, 1.5282954076482708e+18, 2714.8, -5809.669999999999, '[]', 'MR Chemical', 'Tonne', 'Kisə', None, '2024', 1, 0, 0, 0, None, None, 'MAT-SLE-2024-01740']
  File ""env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
      self = <pymysql.cursors.Cursor object at 0x7fc05a100310>
      q = ""UPDATE `tabStock Ledger Entry`\n\t\t\t\tSET `owner`='maharram.q@mrchemicalaze.com', `creation`='2024-03-14 11:55:39.235765', `modified`='2024-05-07 09:20:17.384605', `modified_by`='Administrator', `docstatus`=1, `idx`=0, `item_code`='ASPC HFİ 5110 (kisə)', `warehouse`='Hövsan Anbarı - Mrc', `posting_date`='2024-03-14', `posting_time`='23:55:14', `voucher_type`='Delivery Note', `voucher_no`='MAT-DN-2024-00245', `voucher_detail_no`='8275c94d0c', `serial_and_batch_bundle`='SABB-00001048', `dependant_sle_voucher_detail_no`=NULL, `recalculate_rate`=0, `actual_qty`=-5.35e0, `qty_after_transaction`=1.7763568394002505e-15, `qty_2_change`=-214.0e0, `qty_2_after_transaction`=-2028.0e0, `incoming_rate`=1085.92e0, `outgoing_rate`=0.0e0, `valuation_rate`=1.5282954076482708e+18, `stock_value`=2714.8e0, `stock_value_difference`=-5809.669999999999e0, `stock_queue`='[]', `company`='MR Chemical', `stock_uom`='Tonne', `stock_2_uom`='Kisə', `project`=NULL, `fiscal_year`='2024', `has_batch_no`=1, `has_ser...
      conn = <pymysql.connections.Connection object at 0x7fc05b89b9d0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
      self = <pymysql.connections.Connection object at 0x7fc05b89b9d0>
      sql = b""UPDATE `tabStock Ledger Entry`\n\t\t\t\tSET `owner`='maharram.q@mrchemicalaze.com', `creation`='2024-03-14 11:55:39.235765', `modified`='2024-05-07 09:20:17.384605', `modified_by`='Administrator', `docstatus`=1, `idx`=0, `item_code`='ASPC HF\xc4\xb0 5110 (kis\xc9\x99)', `warehouse`='H\xc3\xb6vsan Anbar\xc4\xb1 - Mrc', `posting_date`='2024-03-14', `posting_time`='23:55:14', `voucher_type`='Delivery Note', `voucher_no`='MAT-DN-2024-00245', `voucher_detail_no`='8275c94d0c', `serial_and_batch_bundle`='SABB-00001048', `dependant_sle_voucher_detail_no`=NULL, `recalculate_rate`=0, `actual_qty`=-5.35e0, `qty_after_transaction`=1.7763568394002505e-15, `qty_2_change`=-214.0e0, `qty_2_after_transaction`=-2028.0e0, `incoming_rate`=1085.92e0, `outgoing_rate`=0.0e0, `valuation_rate`=1.5282954076482708e+18, `stock_value`=2714.8e0, `stock_value_difference`=-5809.669999999999e0, `stock_queue`='[]', `company`='MR Chemical', `stock_uom`='Tonne', `stock_2_uom`='Kis\xc9\x99', `project`=NULL, `fiscal_year...
      unbuffered = False
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
      self = <pymysql.connections.Connection object at 0x7fc05b89b9d0>
      unbuffered = False
      result = <pymysql.connections.MySQLResult object at 0x7fc0588826e0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
      self = <pymysql.connections.MySQLResult object at 0x7fc0588826e0>
  File ""env/lib/python3.10/site-packages/pymysql/connections.py"", line 772, in _read_packet
    packet.raise_for_error()
      self = <pymysql.connections.Connection object at 0x7fc05b89b9d0>
      packet_type = <class 'pymysql.protocol.MysqlPacket'>
      buff = bytearray(b""\xff\xf0\x04#22003Out of range value for column \'valuation_rate\' at row 1"")
      packet_header = b'@\x00\x00\x01'
      btrl = 64
      btrh = 0
      packet_number = 1
      bytes_to_read = 64
      recv_data = b""\xff\xf0\x04#22003Out of range value for column 'valuation_rate' at row 1""
      packet = <pymysql.protocol.MysqlPacket object at 0x7fc058a66e00>
  File ""env/lib/python3.10/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
      self = <pymysql.protocol.MysqlPacket object at 0x7fc058a66e00>
      errno = 1264
  File ""env/lib/python3.10/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
      data = b""\xff\xf0\x04#22003Out of range value for column 'valuation_rate' at row 1""
      errno = 1264
      errval = ""Out of range value for column 'valuation_rate' at row 1""
      errorclass = <class 'pymysql.err.DataError'>
pymysql.err.DataError: (1264, ""Out of range value for column 'valuation_rate' at row 1"")
```
",bakhtari,2024-05-08 06:36:16+00:00,[],2024-05-08 06:36:16+00:00,,https://github.com/frappe/erpnext/issues/41377,"[('bug', None)]",[],
2284653004,issue,closed,completed,fix: Item-wise Sales and Purchase register with no item codes,"### Information about bug

ERPNext allows creation of Sales/Purchase Invoices without having an item master (item code) for petty income/expense
Such invoices are pulled in Sales and Purchase register not in item-wise sales and purchase register which leads to mis-match in both these reports

A possible solution for this could be to do a left join on the Sales Invoice/Sales Invoice Item table

Other ToDos:
- [ ] Rewrite all the raw SQL queries using query builder",deepeshgarg007,2024-05-08 04:27:51+00:00,['Poorvi-R-Bhat'],2024-06-18 00:09:13+00:00,2024-06-03 11:36:12+00:00,https://github.com/frappe/erpnext/issues/41373,"[('bug', None), ('good first issue', 'Good issue for beginners.')]",[],
2284628726,issue,open,,Sales Order to Sales Invoice pricing rules change if the Sale Invoice is created on a later date,"### Information about bug

This happens when there are new pricing rules created in between the Sales Order creation and Sales Invoice creation. But, the customers expect the Sales Order's prices to be copied to the Sales Invoice regardless of the pricing rules setup after the SO creation.

### Module

selling

### Version

Frappe version - 14
ERPNext version - 14.66.1

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-05-08 04:00:17+00:00,[],2024-08-01 09:54:19+00:00,,https://github.com/frappe/erpnext/issues/41372,"[('bug', None)]","[{'comment_id': 2262592561, 'issue_id': 2284628726, 'author': 'dvdl16', 'body': 'Also experiencing this issue. \r\n\r\nMay be related to PR https://github.com/frappe/erpnext/pull/30206 from @deepeshgarg007 \r\n\r\n```\r\nERPNext: v15.21.1\r\nFrappe Framework: v15.24.1\r\n```', 'created_at': datetime.datetime(2024, 8, 1, 9, 34, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262624023, 'issue_id': 2284628726, 'author': 'dvdl16', 'body': 'Reverting that PR fixes the issue for us, I guess a custom app is needed to make it permanent', 'created_at': datetime.datetime(2024, 8, 1, 9, 50, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2262631842, 'issue_id': 2284628726, 'author': 'dvdl16', 'body': ""Steps to reproduce\r\n\r\n1. Create a pricing rule that is effective for today, and overrides an existing pricing rule\r\n2. Create a Sales Order with a date before today's date\r\n3. Confirm that the existing pricing rule is applied\r\n4. Create a Delivery Note or Sales Invoice from the Sales Order\r\n5. Leave the default date to today's date\r\n6. See that it now applies the newly created pricing rule, in stead of the existing pricing rule as per the Sales Order"", 'created_at': datetime.datetime(2024, 8, 1, 9, 54, 18, tzinfo=datetime.timezone.utc)}]","dvdl16 on (2024-08-01 09:34:02 UTC): Also experiencing this issue. 

May be related to PR https://github.com/frappe/erpnext/pull/30206 from @deepeshgarg007 

```
ERPNext: v15.21.1
Frappe Framework: v15.24.1
```

dvdl16 on (2024-08-01 09:50:16 UTC): Reverting that PR fixes the issue for us, I guess a custom app is needed to make it permanent

dvdl16 on (2024-08-01 09:54:18 UTC): Steps to reproduce

1. Create a pricing rule that is effective for today, and overrides an existing pricing rule
2. Create a Sales Order with a date before today's date
3. Confirm that the existing pricing rule is applied
4. Create a Delivery Note or Sales Invoice from the Sales Order
5. Leave the default date to today's date
6. See that it now applies the newly created pricing rule, in stead of the existing pricing rule as per the Sales Order

"
2284626804,issue,open,,Bank reconciliation calculates the allocated amount incorrectly if the same bank account is in multiple entries in the same Journal Entry,"### Information about bug

We have a scenario where several journal entries had been created with the same bank account being used in multiple entries in the same journal entry. When reconciling a bank transaction against this journal entry, the allocated amount in the bank transaction for this journal entry is calculated incorrectly.

For example, we have the following journal entry:
![Screenshot from 2024-05-08 09-22-40](https://github.com/frappe/erpnext/assets/11285165/b7a77b5e-11d0-4611-891f-81ec93651c85)

We select $3.38 as the allocated amount for the journal entry.
![image (7)](https://github.com/frappe/erpnext/assets/11285165/d26bc93a-ec76-45db-8c0d-40720f73a3bb)

But it has allocated $3.27 ultimately against the journal entry in the bank transaction
![image (6)](https://github.com/frappe/erpnext/assets/11285165/d098ac3a-1ab1-4615-af53-3b4fe0d07665)

I looked at this from the code level, and we haven't considered this scenario in the code: https://github.com/frappe/erpnext/blob/5ae29655f9e9799c2e9f4a57877db1481823630c/erpnext/accounts/doctype/bank_transaction/bank_transaction.py#L180

### Module

accounts

### Version

Frappe version - 14
ERPNext version - 14.66.1

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-05-08 03:58:08+00:00,['ruthra-kumar'],2024-06-04 06:49:00+00:00,,https://github.com/frappe/erpnext/issues/41371,"[('bug', None), ('valid', '')]",[],
2284107665,issue,open,,Customer's address not selected as shipping address when a drop ship PO is created from a Sales Order,"### Information about bug

When we create a Sales Order with items having `Delivered by Supplier` checked (drop shipped items), we can create a Purchase Order for that with `Create` -> `Purchase Order` option inside the Sales Order. When we do that, the created Purchase Order sets the company's address as the shipping address for the drop shipped PO. Instead the customer's address should have been selected.

**Reason:** The backend function that creates the PO form the SO works fine. It sets the customer's address as the shipping address for this scenario. But the form (purchase_order.js) has some logic that invokes some get_shipping_address method which will return company address as the shipping address. As I remember, even the purchase_order.js inherit this function from a different script.

### Module

buying, selling

### Version

Frappe version - 14
ERPNext version - 14

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-05-07 19:50:24+00:00,[],2024-05-07 19:50:24+00:00,,https://github.com/frappe/erpnext/issues/41370,"[('bug', None)]",[],
2283999700,issue,closed,completed,"When creating a Purchase Order from a Sales Order, supplier's default payment terms template isn't being used","### Information about bug

When we create a PO from a Sales Order (`Create` -> `Purchase Order` inside Sales Order doc), the Sales Order's terms template and payment_schedule gets copied to the PO instead of using the Supplier's `Default Payment Template`.

### Module

buying, selling

### Version

Frappe version - 14
ERPNext version - 14

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-05-07 18:44:22+00:00,[],2024-06-22 00:08:55+00:00,2024-06-03 12:15:32+00:00,https://github.com/frappe/erpnext/issues/41369,"[('bug', None), ('released', None)]","[{'comment_id': 2148684553, 'issue_id': 2283999700, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.70.4 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.4)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 18, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2148688259, 'issue_id': 2283999700, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.27.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 6, 5, 1, 22, 36, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-06-05 01:18:16 UTC): :tada: This issue has been resolved in version 14.70.4 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.70.4)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

frappe-pr-bot on (2024-06-05 01:22:36 UTC): :tada: This issue has been resolved in version 15.27.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.27.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2283183044,issue,closed,completed,ERPNEXT V13 to V14 update issues.,"### Information about bug

Update Issues from V13 to V14.  Seems to be some Fiscal Year issue during Migrate Site.


### Module

other

### Version

ERPNext: v13.55.2 (HEAD)
Frappe Framework: v13.58.21 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Migrating petpalace.erpnext.com
Executing execute:frappe.reload_doc('core', 'doctype', 'doctype_state', force=True) #2021-12-15 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.123s
Executing execute:frappe.reload_doc('core', 'doctype', 'doctype') #2022-06-21 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.786s
Executing frappe.patches.v13_0.jinja_hook in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing frappe.patches.v13_0.update_notification_channel_if_empty in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.53s
Executing execute:frappe.reload_doc('custom', 'doctype', 'custom_field') in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.565s
Executing frappe.email.doctype.email_queue.patches.drop_search_index_on_message_id in petpalace.erpnext.com (_6d85c5ba227a665f)
	Drop search index on message_id
Success: Done in 0.047s
Executing frappe.patches.v14_0.save_ratings_in_fraction #23-12-2021 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.244s
Executing frappe.patches.v14_0.transform_todo_schema in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.247s
Executing frappe.patches.v14_0.remove_post_and_post_comment in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.134s
Executing frappe.patches.v14_0.reset_creation_datetime in petpalace.erpnext.com (_6d85c5ba227a665f)
	Resetting creation datetimes for DocTypes
Success: Done in 0.507s
Executing frappe.patches.v14_0.remove_is_first_startup in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing frappe.patches.v14_0.clear_long_pending_stale_logs in petpalace.erpnext.com (_6d85c5ba227a665f)
	Due to large size of log tables on old sites some table cleanups never finished during daily log clean up. This patch discards such data by using ""big delete"" code.

		ref: https://github.com/frappe/frappe/issues/16971

Clearing old Scheduled Job Log records
Success: Done in 2.266s
Executing frappe.patches.v14_0.log_settings_migration in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.497s
Executing frappe.patches.v14_0.setup_likes_from_feedback in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.426s
Executing frappe.patches.v14_0.update_webforms in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.687s
Executing frappe.patches.v14_0.delete_payment_gateways in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.165s
Executing frappe.patches.v14_0.event_streaming_deprecation_warning in petpalace.erpnext.com (_6d85c5ba227a665f)
Event Streaming is moved to a separate app in version 15.
When upgrading to Frappe version-15, Please install the 'Event Streaming' app to continue using them: https://github.com/frappe/event_streaming
Success: Done in 0.005s
Executing execute:frappe.reload_doc(""desk"", ""doctype"", ""Form Tour"") in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.263s
Executing frappe.patches.v14_0.modify_value_column_size_for_singles in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.066s
Executing erpnext.patches.v14_0.change_is_subcontracted_fieldtype in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 5.799s
Executing erpnext.patches.v13_0.add_doctype_to_sla #14-06-2021 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.459s
Executing erpnext.patches.v13_0.update_response_by_variance in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.006s
Executing erpnext.patches.v14_0.update_opportunity_currency_fields in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.924s
Executing erpnext.patches.v13_0.healthcare_deprecation_warning in petpalace.erpnext.com (_6d85c5ba227a665f)
Healthcare Module is moved to a separate app and will be removed from ERPNext in version-14.
Please install the app to continue using the module: https://github.com/frappe/healthcare
Success: Done in 0.005s
Executing erpnext.patches.v13_0.create_ksa_vat_custom_fields # 07-01-2022 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.13s
Executing erpnext.patches.v14_0.migrate_crm_settings in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.133s
Executing erpnext.patches.v13_0.update_asset_quantity_field in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing erpnext.patches.v13_0.non_profit_deprecation_warning in petpalace.erpnext.com (_6d85c5ba227a665f)
Non Profit Domain is moved to a separate app and will be removed from ERPNext in version-14.
When upgrading to ERPNext version-14, please install the app to continue using the Non Profit domain: https://github.com/frappe/non_profit
Success: Done in 0.006s
Executing erpnext.patches.v14_0.update_reference_due_date_in_journal_entry in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.01s
Executing erpnext.patches.v14_0.france_depreciation_warning in petpalace.erpnext.com (_6d85c5ba227a665f)
Feature for region France will be remove in version-15 and moved to a separate app
Please install the app to continue using the regionnal France features: https://github.com/scopen-coop/erpnext_france.git
Success: Done in 0.005s
Executing erpnext.patches.v14_0.clear_reconciliation_values_from_singles in petpalace.erpnext.com (_6d85c5ba227a665f)

	Clear `tabSingles` and Payment Reconciliation tables of values

Success: Done in 0.007s
Updating DocTypes for frappe        : [========================================] 100%
Updating DocTypes for erpnext       : [========================================] 100%
Executing frappe.patches.v14_0.update_workspace2 # 06.06.2023 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 2.87s
Executing frappe.patches.v14_0.drop_data_import_legacy in petpalace.erpnext.com (_6d85c5ba227a665f)
`Data Import Legacy` has been deprecated. The DocType is deleted, but the data still exists on the database. If this data is worth recovering, you may export it using

	bench --site petpalace.erpnext.com backup -i 'Data Import Legacy'

After this, the table will continue to persist in the database, until you choose to remove it yourself. If you want to drop the table, you may run

	bench --site petpalace.erpnext.com execute frappe.db.sql --args ""('DROP TABLE IF EXISTS `tabData Import Legacy`', )""

Success: Done in 0.227s
Executing frappe.patches.v14_0.copy_mail_data #08.03.21 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.152s
Executing frappe.patches.v14_0.update_github_endpoints #08-11-2021 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.006s
Executing frappe.patches.v14_0.remove_db_aggregation in petpalace.erpnext.com (_6d85c5ba227a665f)
	Replace temporarily available Database Aggregate APIs on frappe (develop)

		APIs changed:
		        * frappe.db.max => frappe.qb.max
		        * frappe.db.min => frappe.qb.min
		        * frappe.db.sum => frappe.qb.sum
		        * frappe.db.avg => frappe.qb.avg

Success: Done in 0.006s
Executing frappe.patches.v14_0.update_color_names_in_kanban_board_column in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.025s
Executing frappe.patches.v14_0.update_is_system_generated_flag in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing frappe.patches.v14_0.update_auto_account_deletion_duration in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.089s
Executing frappe.patches.v14_0.update_integration_request in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.008s
Executing frappe.patches.v14_0.set_document_expiry_default in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing frappe.patches.v14_0.delete_data_migration_tool in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.263s
Executing frappe.patches.v14_0.set_suspend_email_queue_default in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.251s
Executing frappe.patches.v14_0.different_encryption_key in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.006s
Executing frappe.patches.v14_0.update_multistep_webforms in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.147s
Executing frappe.patches.v14_0.drop_unused_indexes in petpalace.erpnext.com (_6d85c5ba227a665f)
��� dropped parent index from tabLoan
��� dropped parent index from tabLoan Type
��� dropped parent index from tabLoan Disbursement
��� dropped parent index from tabLoan Repayment
��� dropped parent index from tabGoCardless Settings
��� dropped parent index from tabSerial No
��� dropped parent index from tabRepost Item Valuation
��� dropped parent index from tabPacking Slip
- Skipped parent index for tabTerms and Conditions because it doesn't exist
��� dropped parent index from tabBranch
��� dropped parent index from tabDesignation
��� dropped parent index from tabAuthorization Rule
��� dropped parent index from tabPrint Heading
��� dropped parent index from tabVehicle
��� dropped parent index from tabDriver
��� dropped parent index from tabEmployee Group
��� dropped parent index from tabHoliday List
��� dropped parent index from tabSales Partner Type
��� dropped parent index from tabContract
��� dropped parent index from tabCampaign
��� dropped parent index from tabAppointment
��� dropped parent index from tabSales Stage
��� dropped parent index from tabExchange Rate Revaluation
��� dropped parent index from tabFiscal Year
- Skipped parent index for tabPurchase Taxes and Charges Template because it doesn't exist
- Skipped parent index for tabSales Taxes and Charges Template because it doesn't exist
��� dropped parent index from tabBank Transaction
��� dropped parent index from tabShareholder
��� dropped parent index from tabContact
��� dropped parent index from tabGender
��� dropped parent index from tabSalutation
��� dropped parent index from tabToken Cache
��� dropped parent index from tabCountry
��� dropped parent index from tabDocType Layout
��� dropped parent index from tabEmail Flag Queue
��� dropped parent index from tabNewsletter
��� dropped parent index from tabEmail Group Member
��� dropped parent index from tabEmail Queue
��� dropped parent index from tabWorkflow
��� dropped parent index from tabRole Profile
��� dropped parent index from tabDocument Share Key
��� dropped parent index from tabDeleted Document
��� dropped parent index from tabLanguage
- Skipped parent index for tabCustom DocPerm because it doesn't exist
��� dropped parent index from tabOpportunity
��� dropped parent index from tabService Level Agreement
��� dropped parent index from tabComment
��� dropped parent index from tabOAuth Client
��� dropped parent index from tabProject
��� dropped parent index from tabCost Center
��� dropped parent index from tabLower Deduction Certificate
��� dropped parent index from tabWeb Page
��� dropped parent index from tabLetter Head
- Skipped parent index for tabLedger Health because it doesn't exist
��� dropped parent index from tabServer Script
��� dropped parent index from tabSupplier Quotation
��� dropped parent index from tabCommunication
��� dropped parent index from tabSales Invoice
��� dropped parent index from tabTransaction Deletion Record
��� dropped parent index from tabPurchase Receipt
��� dropped parent index from tabDelivery Note
��� dropped parent index from tabSales Order
��� dropped parent index from tabQuotation
��� dropped parent index from tabPurchase Order
��� dropped parent index from tabPOS Invoice
��� dropped parent index from tabPurchase Invoice
��� dropped parent index from tabGL Entry
��� dropped parent index from tabRole
��� dropped parent index from tabItem Price
��� dropped parent index from tabConsole Log
��� dropped parent index from tabCustom Field
��� dropped parent index from tabProduction Plan
��� dropped parent index from tabItem Group
��� dropped parent index from tabWork Order
��� dropped parent index from tabUser
��� dropped parent index from tabStock Ledger Entry
��� dropped parent index from tabWebhook
��� dropped parent index from tabBank Account
��� dropped parent index from tabData Import
��� dropped parent index from tabPick List
��� dropped parent index from tabWarehouse
��� dropped parent index from tabAsset
��� dropped parent index from tabStock Entry
��� dropped parent index from tabItem
��� dropped parent index from tabEmployee
��� dropped parent index from tabHelp Article
��� dropped parent index from tabCashier Closing
��� dropped parent index from tabCustomer
��� dropped parent index from tabBOM
��� dropped parent index from tabProcess Statement Of Accounts
��� dropped parent index from tabWeb Template
��� dropped parent index from tabEmail Template
��� dropped parent index from tabPrint Format
��� dropped parent index from tabRoute History
��� dropped parent index from tabLead
��� dropped parent index from tabDocType
- Skipped parent index for tabBisect Nodes because it doesn't exist
��� dropped parent index from tabNotification Settings
- Skipped parent index for tabAsset Shift Factor because it doesn't exist
- Skipped parent index for tabAsset Shift Allocation because it doesn't exist
��� dropped parent index from tabWarranty Claim
��� dropped parent index from tabEmail Group
- Skipped parent index for tabCompetitor because it doesn't exist
��� dropped parent index from tabQuotation Lost Reason
��� dropped parent index from tabJournal Entry
��� dropped parent index from tabPayment Entry
��� dropped parent index from tabProduct Bundle
��� dropped parent index from tabAddress
��� dropped parent index from tabLeave Ledger Entry
��� dropped parent index from tabNotification
- Skipped parent index for tabSubcontracting Receipt because it doesn't exist
- Skipped parent index for tabBulk Transaction Log Detail because it doesn't exist
��� dropped parent index from tabNumber Card
��� dropped parent index from tabBatch
- Skipped parent index for tabPayment Ledger Entry because it doesn't exist
- Skipped parent index for tabRequest for Quotation because it doesn't exist
- Skipped parent index for tabProcess Payment Reconciliation Log because it doesn't exist
��� dropped parent index from tabBin
��� dropped parent index from tabCompany
��� dropped parent index from tabSupplier
��� dropped parent index from tabWeb Form
��� dropped parent index from tabIntegration Request
- Skipped parent index for tabInventory Dimension because it doesn't exist
��� dropped parent index from tabToDo
- Skipped parent index for tabAsset Capitalization because it doesn't exist
��� dropped parent index from tabTask
- Skipped parent index for tabRepost Payment Ledger because it doesn't exist
- Skipped parent index for tabRepost Accounting Ledger because it doesn't exist
��� dropped parent index from tabHotel Room Package
��� dropped parent index from tabHotel Room Type
��� dropped parent index from tabHotel Room Reservation
��� dropped parent index from tabHotel Room Pricing
��� dropped parent index from tabHotel Room
��� dropped parent index from tabGrant Application
��� dropped parent index from tabChapter
��� dropped parent index from tabCertified Consultant
��� dropped parent index from tabDonor Type
��� dropped parent index from tabVolunteer Type
��� dropped parent index from tabCertification Application
��� dropped parent index from tabTally Migration
��� dropped parent index from tabGoCardless Mandate
��� dropped parent index from tabShopify Log
��� dropped parent index from tabWeather
��� dropped parent index from tabSoil Texture
��� dropped parent index from tabCrop Cycle
��� dropped parent index from tabDisease
��� dropped parent index from tabSoil Analysis
��� dropped parent index from tabWater Analysis
��� dropped parent index from tabCrop
��� dropped parent index from tabFertilizer
��� dropped parent index from tabAgriculture Analysis Criteria
��� dropped parent index from tabPlant Analysis
��� dropped parent index from tabRestaurant Reservation
��� dropped parent index from tabRestaurant Table
��� dropped parent index from tabRestaurant Menu
��� dropped parent index from tabRestaurant
��� dropped parent index from tabDiagnosis
��� dropped parent index from tabComplaint
��� dropped parent index from tabPrescription Dosage
��� dropped parent index from tabLab Test UOM
��� dropped parent index from tabPrescription Duration
��� dropped parent index from tabDosage Form
��� dropped parent index from tabMedical Department
��� dropped parent index from tabSensitivity
��� dropped parent index from tabMedical Code Standard
- Skipped parent index for tabGSTR 3B Report because it doesn't exist
- Skipped parent index for tabE Invoice Request Log because it doesn't exist
��� dropped parent index from tabAcademic Term
��� dropped parent index from tabGrading Scale
��� dropped parent index from tabCourse Enrollment
��� dropped parent index from tabGuardian
��� dropped parent index from tabStudent Group
��� dropped parent index from tabStudent Language
��� dropped parent index from tabProgram
��� dropped parent index from tabArticle
��� dropped parent index from tabStudent Category
��� dropped parent index from tabAssessment Group
��� dropped parent index from tabAcademic Year
��� dropped parent index from tabCourse
��� dropped parent index from tabQuestion
��� dropped parent index from tabAssessment Criteria
��� dropped parent index from tabCourse Activity
��� dropped parent index from tabFee Category
��� dropped parent index from tabAssessment Criteria Group
��� dropped parent index from tabRoom
��� dropped parent index from tabStudent Batch Name
��� dropped parent index from tabStudent Log
��� dropped parent index from tabSchool House
��� dropped parent index from tabTopic
��� dropped parent index from tabHomepage Section
��� dropped parent index from tabAsset Maintenance
��� dropped parent index from tabSMS Log
��� dropped parent index from tabIssue Priority
��� dropped parent index from tabIssue Type
��� dropped parent index from tabPrice List
��� dropped parent index from tabManufacturer
��� dropped parent index from tabUOM Category
��� dropped parent index from tabItem Manufacturer
��� dropped parent index from tabItem Alternative
��� dropped parent index from tabItem Attribute
��� dropped parent index from tabRouting
��� dropped parent index from tabAttendance
��� dropped parent index from tabTraining Result
��� dropped parent index from tabJob Applicant Source
��� dropped parent index from tabEmployee Promotion
��� dropped parent index from tabEmployee Health Insurance
��� dropped parent index from tabInterest
��� dropped parent index from tabEmployee Onboarding Template
��� dropped parent index from tabTraining Program
��� dropped parent index from tabEmployee Transfer Property
��� dropped parent index from tabDaily Work Summary Group
��� dropped parent index from tabIdentification Document Type
- Skipped parent index for tabPurpose of Travel because it doesn't exist
��� dropped parent index from tabLeave Block List
��� dropped parent index from tabOffer Term
��� dropped parent index from tabEmployee Transfer
��� dropped parent index from tabTraining Feedback
��� dropped parent index from tabEmployee Separation
��� dropped parent index from tabShift Type
��� dropped parent index from tabEmployment Type
��� dropped parent index from tabEmployee Separation Template
��� dropped parent index from tabDaily Work Summary
��� dropped parent index from tabLeave Policy
��� dropped parent index from tabStaffing Plan
��� dropped parent index from tabCurrency Exchange
��� dropped parent index from tabUOM Conversion Factor
��� dropped parent index from tabSales Person
��� dropped parent index from tabParty Type
��� dropped parent index from tabSales Partner
��� dropped parent index from tabInstallation Note
��� dropped parent index from tabProject Update
��� dropped parent index from tabActivity Type
��� dropped parent index from tabActivity Cost
��� dropped parent index from tabProject Type
��� dropped parent index from tabSupplier Scorecard Standing
��� dropped parent index from tabSupplier Scorecard Period
��� dropped parent index from tabSupplier Scorecard Variable
��� dropped parent index from tabSupplier Scorecard
��� dropped parent index from tabOpportunity Type
��� dropped parent index from tabMarket Segment
��� dropped parent index from tabCheque Print Template
��� dropped parent index from tabCash Flow Mapping Template
��� dropped parent index from tabCash Flow Mapping
��� dropped parent index from tabMonthly Distribution
- Skipped parent index for tabC-Form because it doesn't exist
��� dropped parent index from tabAccounting Period
��� dropped parent index from tabBank Guarantee
��� dropped parent index from tabShare Transfer
��� dropped parent index from tabShare Type
��� dropped parent index from tabFinance Book
��� dropped parent index from tabCash Flow Mapper
��� dropped parent index from tabInvoice Discounting
��� dropped parent index from tabCoupon Code
��� dropped parent index from tabLoyalty Program
��� dropped parent index from tabShipping Rule
��� dropped parent index from tabBank Account Subtype
��� dropped parent index from tabPayment Terms Template
��� dropped parent index from tabPayment Order
��� dropped parent index from tabMilestone Tracker
��� dropped parent index from tabMilestone
��� dropped parent index from tabAddress Template
��� dropped parent index from tabPrint Style
��� dropped parent index from tabGoogle Calendar
��� dropped parent index from tabDesktop Icon
��� dropped parent index from tabTag
��� dropped parent index from tabList Filter
��� dropped parent index from tabUnhandled Email
��� dropped parent index from tabEmail Rule
��� dropped parent index from tabEmail Unsubscribe
��� dropped parent index from tabAuto Email Report
��� dropped parent index from tabWebsite Sidebar
��� dropped parent index from tabWebsite Route Meta
��� dropped parent index from tabWebsite Slideshow
��� dropped parent index from tabHelp Category
��� dropped parent index from tabPersonal Data Download Request
��� dropped parent index from tabCustom Role
��� dropped parent index from tabTransaction Log
��� dropped parent index from tabVersion
��� dropped parent index from tabSuccess Action
��� dropped parent index from tabPage
��� dropped parent index from tabTraining Event
��� dropped parent index from tabCompensatory Leave Request
��� dropped parent index from tabLeave Application
��� dropped parent index from tabWarehouse Type
��� dropped parent index from tabSubscription
��� dropped parent index from tabJob Offer
��� dropped parent index from tabWebsite Theme
��� dropped parent index from tabEnergy Point Rule
��� dropped parent index from tabDashboard Chart
��� dropped parent index from tabMaterial Request
��� dropped parent index from tabWebsite Item
��� dropped parent index from tabPeriod Closing Voucher
��� dropped parent index from tabQuality Procedure
��� dropped parent index from tabLocation
- Skipped parent index for tabUnreconcile Payment because it doesn't exist
��� dropped parent index from tabDepartment
- Skipped parent index for tabProcess Payment Reconciliation because it doesn't exist
��� dropped parent index from tabNon Conformance
��� dropped parent index from tabActivity Log
��� dropped parent index from tabFile
��� dropped parent index from tabDATEV Settings
��� dropped parent index from tabAsset Movement
��� dropped parent index from tabDelivery Trip
��� dropped parent index from tabDocShare
��� dropped parent index from tabNotification Log
��� dropped parent index from tabJob Card
��� dropped parent index from tabWorkspace
��� dropped parent index from tabEmail Account
��� dropped parent index from tabEmail Domain
- Skipped parent index for tabCustom HTML Block because it doesn't exist
��� dropped parent index from tabForm Tour
- Skipped parent index for tabClosing Stock Balance because it doesn't exist
��� dropped parent index from tabPatch Log
��� dropped parent index from tabIncome Tax Slab
��� dropped parent index from tabDocument Naming Rule
��� dropped parent index from tabTimesheet
��� dropped parent index from tabWorkflow Action Master
��� dropped parent index from tabAccount
��� dropped parent index from tabReport
��� dropped parent index from tabOAuth Bearer Token
��� dropped parent index from tabWorkflow State
- Skipped parent index for tabAccount Closing Balance because it doesn't exist
��� dropped parent index from tabWebhook Request Log
��� dropped parent index from tabBlog Post
��� dropped parent index from tabPricing Rule
��� dropped parent index from tabIndustry Type
��� dropped parent index from tabLead Source
��� dropped parent index from tabSalary Structure Assignment
��� dropped parent index from tabTerritory
��� dropped parent index from tabSupplier Group
��� dropped parent index from tabCustomer Group
��� dropped parent index from tabPayment Request
- Skipped parent index for tabIncoterm because it doesn't exist
��� dropped parent index from tabShipment
- Skipped parent index for tabWorkstation Type because it doesn't exist
��� dropped parent index from tabWorkstation
- Skipped parent index for tabProspect because it doesn't exist
��� dropped parent index from tabBudget
��� dropped parent index from tabQuality Inspection
��� dropped parent index from tabEnergy Point Log
��� dropped parent index from tabWeb Page View
��� dropped parent index from tabBank Statement Import
��� dropped parent index from tabTask Type
��� dropped parent index from tabSalary Slip
��� dropped parent index from tabAsset Repair
- Skipped parent index for tabSubcontracting Order because it doesn't exist
��� dropped parent index from tabEvent
��� dropped parent index from tabPOS Profile
��� dropped parent index from tabPOS Closing Entry
��� dropped parent index from tabPOS Invoice Merge Log
��� dropped parent index from tabEmployee Checkin
��� dropped parent index from tabShift Assignment
��� dropped parent index from tabLoan Balance Adjustment
��� dropped parent index from tabCurrency
��� dropped parent index from tabTranslation
��� dropped parent index from tabLoan Security Shortfall
��� dropped parent index from tabLoan Interest Accrual
��� dropped parent index from tabProcess Loan Interest Accrual
��� dropped parent index from tabScheduled Job Type
��� dropped parent index from tabLoan Refund
��� dropped parent index from tabBOM Update Log
��� dropped parent index from tabError Log
��� dropped parent index from tabAccess Log
��� dropped parent index from tabScheduled Job Log
��� dropped parent index from tabUser Type
��� dropped parent index from tabGratuity
��� dropped parent index from tabEmployee Advance
��� dropped parent index from tabGST HSN Code
��� dropped parent index from tabStock Reconciliation
��� dropped parent index from tabLeave Type
��� dropped parent index from tabPrepared Report
��� dropped parent index from tabCall Log
��� dropped parent index from tabKanban Board
��� dropped parent index from tabClient Script
��� dropped parent index from tabLeave Allocation
��� dropped parent index from tabHealthcare Service Unit
��� dropped parent index from tabMembership
- Skipped parent index for tabTax Exemption 80G Certificate because it doesn't exist
��� dropped parent index from tabDonation
��� dropped parent index from tabProperty Setter
��� dropped parent index from tabTelephony Call Type
��� dropped parent index from tabWorkflow Action
��� dropped parent index from tabInpatient Record
��� dropped parent index from tabVital Signs
��� dropped parent index from tabOpportunity Lost Reason
��� dropped parent index from tabSalary Structure
- Skipped parent index for tabCost Center Allocation because it doesn't exist
��� dropped parent index from tabSample Collection
��� dropped parent index from tabLab Test
��� dropped parent index from tabTax Category
��� dropped parent index from tabItem Tax Template
��� dropped parent index from tabLeave Policy Assignment
��� dropped parent index from tabLeave Period
��� dropped parent index from tabJob Applicant
��� dropped parent index from tabConnected App
��� dropped parent index from tabModule Def
��� dropped parent index from tabUser Permission
- Skipped parent index for tabData Import Log because it doesn't exist
��� dropped parent index from tabMaintenance Visit
��� dropped parent index from tabPersonal Data Deletion Request
- Skipped parent index for tabLedger Merge because it doesn't exist
��� dropped parent index from tabSubscription Plan
��� dropped parent index from tabModule Profile
��� dropped parent index from tabOnboarding Step
��� dropped parent index from tabOperation
��� dropped parent index from tabIssue
��� dropped parent index from tabCourse Schedule
��� dropped parent index from tabExpense Claim
��� dropped parent index from tabSupplier Scorecard Criteria
��� dropped parent index from tabError Snapshot
��� dropped parent index from tabView Log
- Skipped parent index for tabPrint Format Field Template because it doesn't exist
��� dropped parent index from tabUOM
��� dropped parent index from tabNetwork Printer Settings
��� dropped parent index from tabInterview Feedback
��� dropped parent index from tabInterview
��� dropped parent index from tabInterview Round
��� dropped parent index from tabInterview Type
��� dropped parent index from tabDiscussion Topic
��� dropped parent index from tabDiscussion Reply
��� dropped parent index from tabTag Link
��� dropped parent index from tabNote
��� dropped parent index from tabParty Specific Item
- Skipped parent index for tabPackage Import because it doesn't exist
- Skipped parent index for tabPackage Release because it doesn't exist
- Skipped parent index for tabPackage because it doesn't exist
��� dropped parent index from tabFee Validity
��� dropped parent index from tabKSA VAT Setting
��� dropped parent index from tabParty Link
��� dropped parent index from tabHealthcare Practitioner
��� dropped parent index from tabProduct Tax Category
��� dropped parent index from tabHealthcare Service Unit Type
��� dropped parent index from tabPatient Appointment
��� dropped parent index from tabTreatment Plan Template
��� dropped parent index from tabItem Review
��� dropped parent index from tabTax Withholding Category
��� dropped parent index from tabPatient Encounter
��� dropped parent index from tabAssignment Rule
��� dropped parent index from tabSouth Africa VAT Settings
��� dropped parent index from tabMember
��� dropped parent index from tabWishlist
��� dropped parent index from tabLoan Security Pledge
��� dropped parent index from tabBlanket Order
��� dropped parent index from tabGrievance Type
��� dropped parent index from tabEmployee Grievance
��� dropped parent index from tabTax Rule
��� dropped parent index from tabMaintenance Schedule
��� dropped parent index from tabAdditional Salary
��� dropped parent index from tabStock Entry Type
��� dropped parent index from tabVehicle Log
��� dropped parent index from tabSlack Webhook URL
��� dropped parent index from tabPromotional Scheme
��� dropped parent index from tabEmployee Referral
��� dropped parent index from tabOAuth Authorization Code
��� dropped parent index from tabImport Supplier Invoice
��� dropped parent index from tabLoan Application
��� dropped parent index from tabLoan Security Unpledge
��� dropped parent index from tabLoan Write Off
��� dropped parent index from tabUser Group
��� dropped parent index from tabSocial Media Post
��� dropped parent index from tabRetention Bonus
��� dropped parent index from tabEmployee Tax Exemption Proof Submission
��� dropped parent index from tabEmployee Tax Exemption Declaration
��� dropped parent index from tabEmployee Incentive
��� dropped parent index from tabEmployee Benefit Claim
��� dropped parent index from tabEmployee Benefit Application
��� dropped parent index from tabLeave Encashment
��� dropped parent index from tabStudent Attendance
��� dropped parent index from tabPatient
��� dropped parent index from tabMpesa Settings
��� dropped parent index from tabStudent Applicant
��� dropped parent index from tabBrand
��� dropped parent index from tabQuality Meeting
��� dropped parent index from tabSkill
��� dropped parent index from tabAsset Category
��� dropped parent index from tabQuality Inspection Parameter
��� dropped parent index from tabDonor
��� dropped parent index from tabPayment Term
��� dropped parent index from tabAccounting Dimension
��� dropped parent index from tabQuality Inspection Parameter Group
��� dropped parent index from tabAccounting Dimension Filter
��� dropped parent index from tabLanded Cost Voucher
��� dropped parent index from tabAsset Maintenance Team
��� dropped parent index from tabAsset Value Adjustment
��� dropped parent index from tabAsset Maintenance Log
��� dropped parent index from tabAppointment Type
��� dropped parent index from tabLoan Security Price
��� dropped parent index from tabProcess Loan Security Shortfall
- Skipped parent index for tabTest rename new because it doesn't exist
��� dropped parent index from tabAuto Repeat
��� dropped parent index from tabInpatient Medication Entry
��� dropped parent index from tabUAE VAT Settings
��� dropped parent index from tabQuiz
��� dropped parent index from tabQuiz Activity
��� dropped parent index from tabPayroll Entry
��� dropped parent index from tabVoice Call Settings
��� dropped parent index from tabContract Template
��� dropped parent index from tabGratuity Rule
��� dropped parent index from tabPutaway Rule
��� dropped parent index from tabIncoming Call Settings
��� dropped parent index from tabTherapy Session
��� dropped parent index from tabTherapy Plan
��� dropped parent index from tabCommunication Medium
��� dropped parent index from tabQuality Action
��� dropped parent index from tabQuality Feedback
��� dropped parent index from tabQuality Feedback Template
��� dropped parent index from tabQuality Goal
��� dropped parent index from tabEvent Producer Last Update
��� dropped parent index from tabEvent Producer
��� dropped parent index from tabLoan Security
��� dropped parent index from tabAssessment Plan
��� dropped parent index from tabQuality Review
��� dropped parent index from tabTherapy Plan Template
��� dropped parent index from tabSalary Component
��� dropped parent index from tabAppraisal
��� dropped parent index from tabInpatient Medication Order
��� dropped parent index from tabSocial Login Key
��� dropped parent index from tabBlog Category
��� dropped parent index from tabShipment Parcel Template
��� dropped parent index from tabStudent Leave Application
��� dropped parent index from tabPayment Gateway Account
- Skipped parent index for tabMode of Payment because it doesn't exist
��� dropped parent index from tabDomain
��� dropped parent index from tabCalendar View
��� dropped parent index from tabGoogle Contacts
��� dropped parent index from tabAppraisal Template
��� dropped parent index from tabExpense Claim Type
��� dropped parent index from tabPractitioner Schedule
��� dropped parent index from tabJob Opening
��� dropped parent index from tabStudent Admission
��� dropped parent index from tabDocument Follow
��� dropped parent index from tabVolunteer
��� dropped parent index from tabProgram Enrollment
��� dropped parent index from tabEvent Consumer
��� dropped parent index from tabStudent
��� dropped parent index from tabVideo
��� dropped parent index from tabEvent Update Log
��� dropped parent index from tabProcess Deferred Accounting
��� dropped parent index from tabEmployee Grade
��� dropped parent index from tabEmail Digest
��� dropped parent index from tabShift Request
��� dropped parent index from tabMembership Type
��� dropped parent index from tabFees
��� dropped parent index from tabDunning
��� dropped parent index from tabAssessment Result
��� dropped parent index from tabLab Test Template
��� dropped parent index from tabInstructor
��� dropped parent index from tabDashboard
��� dropped parent index from tabFee Schedule
��� dropped parent index from tabBank
��� dropped parent index from tabDunning Type
��� dropped parent index from tabEmail Campaign
��� dropped parent index from tabPayroll Period
��� dropped parent index from tabClinical Procedure
��� dropped parent index from tabTherapy Type
��� dropped parent index from tabClinical Procedure Template
��� dropped parent index from tabMedical Code
��� dropped parent index from tabDashboard Chart Source
��� dropped parent index from tabCustoms Tariff Number
��� dropped parent index from tabEmployee Onboarding
��� dropped parent index from tabPatient Assessment
��� dropped parent index from tabEmployee Tax Exemption Sub Category
��� dropped parent index from tabEmployee Tax Exemption Category
��� dropped parent index from tabEmployee Other Income
��� dropped parent index from tabFee Structure
��� dropped parent index from tabModule Onboarding
��� dropped parent index from tabPOS Opening Entry
��� dropped parent index from tabBlogger
��� dropped parent index from tabDowntime Entry
��� dropped parent index from tabLoan Security Type
��� dropped parent index from tabList View Settings
��� dropped parent index from tabJournal Entry Template
��� dropped parent index from tabPatient Medical Record
��� dropped parent index from tabQuality Inspection Template
��� dropped parent index from tabProject Template
��� dropped parent index from tabPatient Assessment Template
��� dropped parent index from tabExercise Type
��� dropped parent index from tabPatient Assessment Parameter
��� dropped parent index from tabColor
��� dropped parent index from tabBank Account Type
��� dropped parent index from tabBody Part
��� dropped parent index from tabDashboard Settings
��� dropped parent index from tabExercise Difficulty Level
��� dropped parent index from tabSanctioned Loan Amount
��� dropped parent index from tabLoyalty Point Entry
��� dropped parent index from tabLab Test Sample
��� dropped parent index from tabAppointment Letter
��� dropped parent index from tabAppointment Letter Template
��� dropped parent index from tabAttendance Request
��� dropped parent index from tabEmployee Skill Map
��� dropped parent index from tabTravel Request
��� dropped parent index from tabHub Tracked Item
��� dropped parent index from tabDocument Type Mapping
��� dropped parent index from tabEvent Sync Log
��� dropped parent index from tabOrganism
��� dropped parent index from tabAntibiotic
��� dropped link_doctype_link_name_index index from tabComment
��� dropped link_doctype_link_name_index index from tabActivity Log
Success: Done in 21.419s
Executing frappe.patches.v14_0.disable_email_accounts_with_oauth in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.273s
Executing frappe.patches.v14_0.remove_manage_subscriptions_from_navbar in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.068s
Executing frappe.core.doctype.system_settings.patches.set_default_rounding_method in petpalace.erpnext.com (_6d85c5ba227a665f)
	set default rounding method
Success: Done in 0.009s
Executing frappe.patches.v14_0.remove_background_jobs_from_dropdown in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 3.619s
Executing execute:frappe.delete_doc(""Page"", ""translation-tool"", force=1) in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.07s
Executing frappe.patches.v15_0.remove_prepared_report_settings_from_system_settings in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.053s
Executing frappe.desk.doctype.form_tour.patches.introduce_ui_tours in petpalace.erpnext.com (_6d85c5ba227a665f)
	Handle introduction of UI tours
Success: Done in 0.045s
Executing execute:frappe.delete_doc_if_exists(""Workspace"", ""Customization"") in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.167s
Executing frappe.patches.v15_0.set_file_type in petpalace.erpnext.com (_6d85c5ba227a665f)
	Set 'File Type' for all files based on file extension.
Success: Done in 0.126s
Executing frappe.core.doctype.data_import.patches.remove_stale_docfields_from_legacy_version in petpalace.erpnext.com (_6d85c5ba227a665f)
	Remove stale docfields from legacy version
Success: Done in 0.005s
Executing frappe.patches.v15_0.sanitize_workspace_titles in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing frappe.integrations.doctype.oauth_client.patches.set_default_allowed_role_in_oauth_client in petpalace.erpnext.com (_6d85c5ba227a665f)
	Set default allowed role in OAuth Client
Success: Done in 0.04s
Executing execute:frappe.delete_doc_if_exists('Workspace', 'ERPNext Integrations Settings') in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.03s
Executing erpnext.patches.v14_0.update_posting_datetime_and_dropped_indexes #22-02-2024 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.04s
Executing erpnext.patches.v14_0.rename_ongoing_status_in_sla_documents in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.008s
Executing erpnext.patches.v14_0.delete_shopify_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.247s
Executing erpnext.patches.v14_0.delete_healthcare_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 4.209s
Executing erpnext.patches.v14_0.delete_hub_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.121s
Executing erpnext.patches.v14_0.delete_hospitality_doctypes # 20-01-2022 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.535s
Executing erpnext.patches.v14_0.delete_agriculture_doctypes # 15-06-2022 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.85s
Executing erpnext.patches.v14_0.delete_education_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Education Module is moved to a separate appPlease install the app to continue using the module: https://github.com/frappe/education
Success: Done in 3.098s
Executing erpnext.patches.v14_0.delete_datev_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.067s
Executing erpnext.patches.v14_0.rearrange_company_fields in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 3.081s
Executing erpnext.patches.v14_0.migrate_cost_center_allocations in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.033s
Executing erpnext.patches.v13_0.update_exchange_rate_settings in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 1.324s
Executing erpnext.patches.v14_0.delete_amazon_mws_doctype in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.061s
Executing erpnext.patches.v14_0.update_batch_valuation_flag in petpalace.erpnext.com (_6d85c5ba227a665f)

	- Don't use batchwise valuation for existing batches.
	- Only batches created after this patch shoule use it.

Success: Done in 0.005s
Executing erpnext.patches.v14_0.delete_non_profit_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 1.048s
Executing erpnext.patches.v14_0.discount_accounting_separation in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.008s
Executing execute:frappe.delete_doc(""DocType"", ""Naming Series"") in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.05s
Executing erpnext.patches.v14_0.copy_is_subcontracted_value_to_is_old_subcontracting_flow in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.012s
Executing erpnext.patches.v14_0.crm_ux_cleanup in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.223s
Executing erpnext.patches.v14_0.migrate_existing_lead_notes_as_per_the_new_format in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.033s
Executing erpnext.patches.v14_0.remove_india_localisation # 14-07-2022 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.565s
Executing erpnext.patches.v14_0.remove_hr_and_payroll_modules # 20-07-2022 in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 6.268s
Executing erpnext.patches.v14_0.fix_crm_no_of_employees in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.019s
Executing erpnext.patches.v14_0.create_accounting_dimensions_in_subcontracting_doctypes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.037s
Executing erpnext.patches.v14_0.fix_subcontracting_receipt_gl_entries in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.259s
Executing erpnext.patches.v13_0.drop_unused_sle_index_parts in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.225s
Executing erpnext.patches.v14_0.create_accounting_dimensions_for_asset_capitalization in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing erpnext.patches.v14_0.update_partial_tds_fields in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing erpnext.patches.v14_0.create_incoterms_and_migrate_shipment in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.102s
Executing erpnext.patches.v14_0.setup_clear_repost_logs in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.065s
Executing erpnext.patches.v14_0.create_accounting_dimensions_for_payment_request in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.006s
Executing erpnext.patches.v14_0.update_entry_type_for_journal_entry in petpalace.erpnext.com (_6d85c5ba227a665f)

	Update Propery Setters for Journal Entry with new 'Entry Type'

Success: Done in 0.047s
Executing erpnext.patches.v14_0.change_autoname_for_tax_withheld_vouchers in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing erpnext.patches.v14_0.update_asset_value_for_manual_depr_entries in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.009s
Executing erpnext.patches.v14_0.set_pick_list_status in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.009s
Executing erpnext.patches.v14_0.enable_all_leads in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.006s
Executing execute:frappe.db.set_single_value(""Accounts Settings"", ""merge_similar_account_heads"", 0) in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.008s
Executing erpnext.patches.v14_0.update_reference_type_in_journal_entry_accounts in petpalace.erpnext.com (_6d85c5ba227a665f)

	Update Propery Setters for Journal Entry with new 'Entry Type'

Success: Done in 0.011s
Executing erpnext.patches.v14_0.update_company_in_ldc in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.05s
Executing erpnext.patches.v14_0.set_packed_qty_in_draft_delivery_notes in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.007s
Executing erpnext.patches.v14_0.cleanup_workspaces in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.069s
Executing erpnext.patches.v14_0.enable_allow_existing_serial_no in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.008s
Executing erpnext.patches.v14_0.set_report_in_process_SOA in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing erpnext.patches.v14_0.create_accounting_dimensions_for_closing_balance in petpalace.erpnext.com (_6d85c5ba227a665f)
Success: Done in 0.005s
Executing erpnext.patches.v14_0.update_closing_balances #15-07-2023 in petpalace.erpnext.com (_6d85c5ba227a665f)

Traceback with variables (most recent call last):
  File ""/usr/lib/python3.10/runpy.py"", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
      mod_name = 'frappe.utils.bench_helper'
      alter_argv = True
      mod_spec = ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, origin='/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py')
      code = <code object <module> at 0x7f85b18dfd60, file ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 1>
      main_globals = {'__name__': '__main__', '__doc__': None, '__package__': 'frappe.utils', '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, '__spec__': ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, origin='/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'), '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py', '__cached__': '/home/frappe/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc', 'importlib': <module 'importlib' from '/usr/lib/python3.10/importlib/__init__.py'>, 'json': <module 'json' from '/usr/lib/python3.10/json/__init__.py'>, 'os': <module 'os' from '/usr/lib/python3.10/os.py'>, 'traceback': <module 'traceback' from '/usr/lib/python3.10/traceback.py'>, 'warnings': <module 'warnings' from '/usr/lib/python3.10/warnings.py'>, 'click': <m...
  File ""/usr/lib/python3.10/runpy.py"", line 86, in _run_code
    exec(code, run_globals)
      code = <code object <module> at 0x7f85b18dfd60, file ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 1>
      run_globals = {'__name__': '__main__', '__doc__': None, '__package__': 'frappe.utils', '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, '__spec__': ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, origin='/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'), '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py', '__cached__': '/home/frappe/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc', 'importlib': <module 'importlib' from '/usr/lib/python3.10/importlib/__init__.py'>, 'json': <module 'json' from '/usr/lib/python3.10/json/__init__.py'>, 'os': <module 'os' from '/usr/lib/python3.10/os.py'>, 'traceback': <module 'traceback' from '/usr/lib/python3.10/traceback.py'>, 'warnings': <module 'warnings' from '/usr/lib/python3.10/warnings.py'>, 'click': <m...
      init_globals = None
      mod_name = '__main__'
      mod_spec = ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>, origin='/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py')
      pkg_name = 'frappe.utils'
      script_name = None
      loader = <_frozen_importlib_external.SourceFileLoader object at 0x7f85b2e9f8e0>
      fname = '/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'
      cached = '/home/frappe/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc'
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 109, in <module>
    main()
      ...skipped... 25 vars
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 18, in main
    click.Group(commands=commands)(prog_name=""bench"")
      commands = {'frappe': <Group frappe>, 'get-frappe-commands': <Command get-frappe-commands>, 'get-frappe-help': <Command get-frappe-help>}
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 829, in __call__
    return self.main(*args, **kwargs)
      self = <Group None>
      args = ()
      kwargs = {'prog_name': 'bench'}
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 782, in main
    rv = self.invoke(ctx)
      self = <Group None>
      args = ['frappe', '--site', 'petpalace.erpnext.com', 'migrate', '--skip-search-index']
      prog_name = 'bench'
      complete_var = None
      standalone_mode = True
      extra = {}
      ctx = <click.core.Context object at 0x7f85b16ab280>
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1259, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
      _process_result = <function MultiCommand.invoke.<locals>._process_result at 0x7f85b16c36d0>
      args = ['migrate', '--skip-search-index']
      cmd_name = 'frappe'
      cmd = <Group frappe>
      sub_ctx = <click.core.Context object at 0x7f85b173fbe0>
      ctx = <click.core.Context object at 0x7f85b16ab280>
      self = <Group None>
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1259, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
      _process_result = <function MultiCommand.invoke.<locals>._process_result at 0x7f85b174b010>
      args = []
      cmd_name = 'migrate'
      cmd = <Command migrate>
      sub_ctx = <click.core.Context object at 0x7f85b173fd60>
      ctx = <click.core.Context object at 0x7f85b173fbe0>
      self = <Group frappe>
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1066, in invoke
    return ctx.invoke(self.callback, **ctx.params)
      self = <Command migrate>
      ctx = <click.core.Context object at 0x7f85b173fd60>
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 610, in invoke
    return callback(*args, **kwargs)
      args = ()
      kwargs = {'skip_search_index': True, 'skip_failing': False}
      self = <click.core.Context object at 0x7f85b173fd60>
      callback = <function migrate at 0x7f85b16ef2e0>
      ctx = <click.core.Context object at 0x7f85b173fd60>
  File ""/home/frappe/frappe-bench/env/lib/python3.10/site-packages/click/decorators.py"", line 21, in new_func
    return f(get_current_context(), *args, **kwargs)
      args = ()
      kwargs = {'skip_search_index': True, 'skip_failing': False}
      f = <function migrate at 0x7f85b16ef0a0>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/commands/__init__.py"", line 29, in _func
    ret = f(frappe._dict(ctx.obj), *args, **kwargs)
      ctx = <click.core.Context object at 0x7f85b173fd60>
      args = ()
      kwargs = {'skip_search_index': True, 'skip_failing': False}
      profile = False
      f = <function migrate at 0x7f85b16ef010>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/commands/site.py"", line 671, in migrate
    SiteMigration(
      context = {'sites': ['petpalace.erpnext.com'], 'force': False, 'verbose': False, 'profile': False}
      skip_failing = False
      skip_search_index = True
      activate_by_import = <module 'traceback_with_variables.activate_by_import' from '/home/frappe/frappe-bench/env/lib/python3.10/site-packages/traceback_with_variables/activate_by_import.py'>
      SiteMigration = <class 'frappe.migrate.SiteMigration'>
      site = 'petpalace.erpnext.com'
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/migrate.py"", line 182, in run
    self.run_schema_updates()
      self = <frappe.migrate.SiteMigration object at 0x7f85b173fd00>
      site = 'petpalace.erpnext.com'
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/migrate.py"", line 52, in wrapper
    raise e
      args = (<frappe.migrate.SiteMigration object at 0x7f85b173fd00>,)
      kwargs = {}
      method = <function SiteMigration.run_schema_updates at 0x7f85af6a05e0>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/migrate.py"", line 44, in wrapper
    ret = method(*args, **kwargs)
      args = (<frappe.migrate.SiteMigration object at 0x7f85b173fd00>,)
      kwargs = {}
      method = <function SiteMigration.run_schema_updates at 0x7f85af6a05e0>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/migrate.py"", line 121, in run_schema_updates
    frappe.modules.patch_handler.run_all(
      self = <frappe.migrate.SiteMigration object at 0x7f85b173fd00>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/modules/patch_handler.py"", line 76, in run_all
    run_patch(patch)
      patch_type = <PatchType.post_model_sync: 'post_model_sync'>
      executed = {'erpnext.patches.v11_0.add_index_on_nestedset_doctypes', 'execute:frappe.delete_doc(""Page"",""stock-level"")', 'execute:frappe.delete_doc(""DocType"", ""Tag"")', 'execute:frappe.db.sql(""update `tabDesktop Icon` set type=\'list\' where _doctype=\'Communication\'"")', 'frappe.patches.v11_0.drop_column_apply_user_permissions', ""execute:frappe.reload_doc('email', 'doctype', 'email_alert') #2014-07-15"", 'execute:import frappe.defaults;frappe.defaults.clear_default(""price_list_currency"")', 'erpnext.patches.v11_0.reset_publish_in_hub_for_all_items', 'execute:frappe.delete_doc_if_exists(""Page"", ""purchase-analytics"")', 'erpnext.patches.v12_0.update_production_plan_status', 'erpnext.patches.v12_0.set_payment_entry_status', 'frappe.patches.v8_0.set_currency_field_precision\t# 2017-05-09', 'frappe.patches.v13_0.replace_old_data_import # 2020-06-24', 'frappe.patches.v4_0.rename_sitemap_to_route', 'erpnext.patches.v8_10.change_default_customer_credit_days', 'erpnext.patches.v5_0.update_sms_sender', 'erpnex...
      run_patch = <function run_all.<locals>.run_patch at 0x7f85ae5a8f70>
      patches = [""execute:frappe.get_doc('Role', 'Guest').save() # remove desk access"", 'frappe.core.doctype.role.patches.v13_set_default_desk_properties', 'frappe.patches.v14_0.update_workspace2 # 06.06.2023', 'frappe.patches.v14_0.drop_data_import_legacy', 'frappe.patches.v14_0.copy_mail_data #08.03.21', 'frappe.patches.v14_0.update_github_endpoints #08-11-2021', 'frappe.patches.v14_0.remove_db_aggregation', 'frappe.patches.v14_0.update_color_names_in_kanban_board_column', 'frappe.patches.v14_0.update_is_system_generated_flag', 'frappe.patches.v14_0.update_auto_account_deletion_duration', 'frappe.patches.v14_0.update_integration_request', 'frappe.patches.v14_0.set_document_expiry_default', 'frappe.patches.v14_0.delete_data_migration_tool', 'frappe.patches.v14_0.set_suspend_email_queue_default', 'frappe.patches.v14_0.different_encryption_key', 'frappe.patches.v14_0.update_multistep_webforms', 'frappe.patches.v14_0.drop_unused_indexes', 'frappe.patches.v14_0.disable_email_accounts_with_oauth', 'frappe...
      patch = 'erpnext.patches.v14_0.update_closing_balances #15-07-2023'
      skip_failing = False
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/modules/patch_handler.py"", line 62, in run_patch
    if not run_single(patchmodule=patch):
      patch = 'erpnext.patches.v14_0.update_closing_balances #15-07-2023'
      skip_failing = False
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/modules/patch_handler.py"", line 150, in run_single
    return execute_patch(patchmodule, method, methodargs)
      patchmodule = 'erpnext.patches.v14_0.update_closing_balances #15-07-2023'
      method = None
      methodargs = None
      force = False
      conf = <LocalProxy unbound>
  File ""/home/frappe/frappe-bench/apps/frappe/frappe/modules/patch_handler.py"", line 186, in execute_patch
    _patch()
      patchmodule = 'erpnext.patches.v14_0.update_closing_balances #15-07-2023'
      method = None
      methodargs = None
      has_patch_file = True
      patch = 'erpnext.patches.v14_0.update_closing_balances.execute'
      docstring = ''
      _patch = <function execute at 0x7f85abfbb640>
      start_time = 1715084409.6726923
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/patches/v14_0/update_closing_balances.py"", line 28, in execute
    pcv_doc.year_start_date = get_fiscal_year(
      company = 'Pet Palace Hong Kong'
      i = 0
      company_wise_order = {'Pet Palace Hong Kong': []}
      pcv = {'company': 'Pet Palace Hong Kong', 'posting_date': datetime.date(2019, 3, 31), 'name': 'ACC-PCV-2020-00000'}
      pcv_doc = <PeriodClosingVoucher: ACC-PCV-2020-00000 docstatus=1>
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/accounts/utils.py"", line 58, in get_fiscal_year
    fiscal_years = get_fiscal_years(
      date = datetime.date(2019, 3, 31)
      fiscal_year = None
      label = 'Date'
      verbose = 1
      company = 'Pet Palace Hong Kong'
      as_dict = False
      boolean = False
  File ""/home/frappe/frappe-bench/apps/erpnext/erpnext/accounts/utils.py"", line 140, in get_fiscal_years
    raise FiscalYearError(error_msg)
      transaction_date = datetime.date(2019, 3, 31)
      fiscal_year = None
      label = 'Date'
      verbose = 1
      company = 'Pet Palace Hong Kong'
      as_dict = False
      boolean = False
      fiscal_years = [{'name': '2024-2025', 'year_start_date': datetime.date(2024, 4, 1), 'year_end_date': datetime.date(2025, 3, 31)}, {'name': '2023-2024', 'year_start_date': datetime.date(2023, 4, 1), 'year_end_date': datetime.date(2024, 3, 31)}, {'name': '2022-2023', 'year_start_date': datetime.date(2022, 4, 1), 'year_end_date': datetime.date(2023, 3, 31)}, {'name': '2021-2022', 'year_start_date': datetime.date(2021, 4, 1), 'year_end_date': datetime.date(2022, 3, 31)}, {'name': '2020-2021', 'year_start_date': datetime.date(2020, 4, 1), 'year_end_date': datetime.date(2021, 3, 31)}, {'name': '2019-2020', 'year_start_date': datetime.date(2019, 4, 1), 'year_end_date': datetime.date(2020, 3, 31)}]
      fy = {'name': '2019-2020', 'year_start_date': datetime.date(2019, 4, 1), 'year_end_date': datetime.date(2020, 3, 31)}
      matched = False
      error_msg = 'Date 31-03-2019 is not in any active Fiscal Year for <strong>Pet Palace Hong Kong</strong>'
erpnext.accounts.utils.FiscalYearError: Date 31-03-2019 is not in any active Fiscal Year for <strong>Pet Palace Hong Kong</strong>
```
",chanyork,2024-05-07 12:40:12+00:00,[],2024-05-24 00:09:07+00:00,2024-05-08 06:24:14+00:00,https://github.com/frappe/erpnext/issues/41367,"[('bug', None)]","[{'comment_id': 2099829436, 'issue_id': 2283183044, 'author': 'Nihantra-Patel', 'body': ""This isn't a bug, because Fiscal Year 2019-2020 is disabled, so please enable (active) them and check it."", 'created_at': datetime.datetime(2024, 5, 8, 6, 24, 15, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-08 06:24:15 UTC): This isn't a bug, because Fiscal Year 2019-2020 is disabled, so please enable (active) them and check it.

"
2283085005,issue,closed,completed,General Ledger wrong date filter,"### Information about bug

1. Open general ledger report, within account filter choose an account its currency differs from the company currency
2. Within date filter add long range of date filtration ( a year for example from 1-1-2023 till 31-12-2023) 
3. Within currency filter choose different currency other than account currency 
4. view the report 
The issue within displayed results within amount (debit or credit) as it consider the exchange rate as per the ""**date to**"" filtration (in this case 31-12-2023) regardless the transaction date (it could be within January which has a very different exchange rate than in December) 
A fix should be applied to calculate the exchange rate based on either the transaction exchange rate or the first nearest date within currency exchange list , not based on the ""**date to**"" filter

### Module

accounts

### Version

V15.23.0 - V15.20.5

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",NourSeleem,2024-05-07 12:01:34+00:00,[],2024-05-24 00:09:08+00:00,2024-05-08 06:18:39+00:00,https://github.com/frappe/erpnext/issues/41366,"[('bug', None)]","[{'comment_id': 2099822737, 'issue_id': 2283085005, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/484bbc51-b182-48f4-81f0-d4c1ade9840b', 'created_at': datetime.datetime(2024, 5, 8, 6, 18, 39, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-08 06:18:39 UTC): Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/484bbc51-b182-48f4-81f0-d4c1ade9840b

"
2282963813,issue,closed,completed,Adding User permission do ingore Role permission,"### Information about bug

I added new user with a role of project manager But I assigned only a specific projects to manage, but I wanted that user to stay have th eability to create new projects.
now it's says you don't have permission as long as I only give him/her permission to a specific projects so he/she can't create new project 

### Module

projects

### Version

ERPNext: v15.22.2 (version-15)

Frappe Framework: v15.25.0 (version-15)

Helpdesk: v0.10.0 (main)

Frappe HR: v16.0.0-dev (develop)

Frappe LMS: v1.0.0 (main)

Raven: v1.5.5 (develop)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",yahyaoudra,2024-05-07 11:00:53+00:00,[],2024-05-24 00:09:06+00:00,2024-05-08 06:34:35+00:00,https://github.com/frappe/erpnext/issues/41363,"[('bug', None)]","[{'comment_id': 2099842238, 'issue_id': 2282963813, 'author': 'Nihantra-Patel', 'body': ""I think, this isn't a bug.\r\n\r\nIf you have applied user permissions to the project to the user. So it means that the user will be able to view or edit only that project. But now you say that the user has to create a project. How can it be done, if you think about it practically, it is not possible. If you have given the user permission, he cannot create the project."", 'created_at': datetime.datetime(2024, 5, 8, 6, 34, 35, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-05-08 06:34:35 UTC): I think, this isn't a bug.

If you have applied user permissions to the project to the user. So it means that the user will be able to view or edit only that project. But now you say that the user has to create a project. How can it be done, if you think about it practically, it is not possible. If you have given the user permission, he cannot create the project.

"
2282834344,issue,closed,completed,Discount is applied twice while adding shipping rule,"### Information about bug

Steps to reproduce:
- Create a delivery note with an item and provide a discount. Till here there is no problem, the grand total is 900.

![image](https://github.com/frappe/erpnext/assets/109862100/fbdba90f-3e85-44b8-a8f9-40644503f6e4)![image](https://github.com/frappe/erpnext/assets/109862100/562d777c-2f34-4e33-b373-54e296f160bf)


- Add shipping rule, now instead of applying discount once it is applied twice.Instead of 945 it is showing 840.

![image](https://github.com/frappe/erpnext/assets/109862100/8ed9dc5f-bc1d-4e1d-a5dc-574f598e157d)
![image](https://github.com/frappe/erpnext/assets/109862100/117f6ccc-6f06-4acc-b25f-f02494621fe7)

### Module

accounts

### Version

Frappe develop
ERPNext v15.22.2

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",Ninad1306,2024-05-07 10:10:50+00:00,['diptanilsaha'],2025-01-27 09:03:53+00:00,2025-01-27 09:03:51+00:00,https://github.com/frappe/erpnext/issues/41358,"[('bug', None), (""can't-reproduce"", 'We are unable to reproduce this bug, provide more information.'), ('need-more-info', 'Provide additional context, steps to reproduce this issue.')]","[{'comment_id': 2503848206, 'issue_id': 2282834344, 'author': 'timeo-schmidt', 'body': 'This error is still happening on my end.\r\nERPNext: v15.39.3 (version-15)\r\nFrappe Framework: v15.45.1 (version-15)', 'created_at': datetime.datetime(2024, 11, 27, 13, 13, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602469667, 'issue_id': 2282834344, 'author': 'diptanilsaha', 'body': '@timeo-schmidt please share the steps to reproduce the issue. I was unable to reproduce the issue following the steps provided.', 'created_at': datetime.datetime(2025, 1, 20, 13, 46, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603655931, 'issue_id': 2282834344, 'author': 'Ninad1306', 'body': '@diptanilsaha are you trying to replicate in `develop` or `v15` branch ??\n\nbecause it was not replicable in develop branch.', 'created_at': datetime.datetime(2025, 1, 21, 4, 56, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603721226, 'issue_id': 2282834344, 'author': 'diptanilsaha', 'body': '@Ninad1306 I tried reproducing on the version-15 branch but was not able to.', 'created_at': datetime.datetime(2025, 1, 21, 5, 54, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615186439, 'issue_id': 2282834344, 'author': 'diptanilsaha', 'body': 'The issue is being closed due to a lack of response.', 'created_at': datetime.datetime(2025, 1, 27, 9, 3, 51, tzinfo=datetime.timezone.utc)}]","timeo-schmidt on (2024-11-27 13:13:06 UTC): This error is still happening on my end.
ERPNext: v15.39.3 (version-15)
Frappe Framework: v15.45.1 (version-15)

diptanilsaha (Assginee) on (2025-01-20 13:46:10 UTC): @timeo-schmidt please share the steps to reproduce the issue. I was unable to reproduce the issue following the steps provided.

Ninad1306 (Issue Creator) on (2025-01-21 04:56:32 UTC): @diptanilsaha are you trying to replicate in `develop` or `v15` branch ??

because it was not replicable in develop branch.

diptanilsaha (Assginee) on (2025-01-21 05:54:45 UTC): @Ninad1306 I tried reproducing on the version-15 branch but was not able to.

diptanilsaha (Assginee) on (2025-01-27 09:03:51 UTC): The issue is being closed due to a lack of response.

"
2282500593,issue,open,,Payment Request Validations,"### Information about bug

When we are making a Payment request from a purchase invoice with the same amount, still system throw the error payment amount can not be greater then invoice amount. and also  there is no any other payment request generated against the same invoice
![image](https://github.com/frappe/erpnext/assets/105703644/1d85902c-a3d1-40c6-a598-48de7e625b00)
![image](https://github.com/frappe/erpnext/assets/105703644/3e8f3990-4e94-40ae-a589-429b39d5ecf8)
![image](https://github.com/frappe/erpnext/assets/105703644/b9fc9cd4-26a5-4d01-bf3d-e96e39027706)





### Module

accounts

### Version

ERPNext: v14.66.4 (version-14)

Frappe Framework: v14.71.0 (version-14)



### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 95, in application
    response = frappe.api.handle()
  File ""apps/frappe/frappe/api.py"", line 55, in handle
    return frappe.handler.handle()
  File ""apps/frappe/frappe/handler.py"", line 48, in handle
    data = execute_cmd(cmd)
  File ""apps/frappe/frappe/handler.py"", line 86, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File ""apps/frappe/frappe/__init__.py"", line 1611, in call
    return fn(*args, **newargs)
  File ""apps/frappe/frappe/desk/form/save.py"", line 31, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 307, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 342, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1061, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 928, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1280, in composer
    return composed(self, method, *args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 1262, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File ""apps/frappe/frappe/model/document.py"", line 925, in fn
    return method_object(*args, **kwargs)
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 39, in validate
    self.validate_payment_request_amount()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 57, in validate_payment_request_amount
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 541, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 509, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 455, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ValidationError: Total Payment Request amount cannot be greater than Purchase Invoice amount
```
",riddhisolanki001,2024-05-07 07:25:35+00:00,[],2024-05-07 07:25:35+00:00,,https://github.com/frappe/erpnext/issues/41352,"[('bug', None)]",[],
2282342990,issue,closed,completed,Sales Invoice creation is skipped by POS when performing POS Close Entry,"### Information about bug

Information about bug.

Note: I am recreating this issue because it seems I have found the actual problem & its reason but am not able to build a work around to it. The previous issue which is now closed is here: https://github.com/frappe/erpnext/issues/41036

We are using the POS and everything seems to be working fine but we have observed that when we create POS Close Entry at the end of the day sometimes the POS does not generate necessary Sales Invoice for each POS Invoice. Some get skipped.

Because of this the Quantity of an Item reported by POS and that we get in various stock related reports do not match.

**This typically happens if the user switched or redirects to another page/doctype while the consolidation processing in happening in background or if the user refreshes the browser window after saving the entered data in POS Close Entry.**

### Module

stock, selling

### Version

Frappe Version: 14.64.0
ERPNext Version: 14.61.4

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
No errors are generated.
```
",yogeshvachhani,2024-05-07 05:54:17+00:00,['diptanilsaha'],2025-01-29 00:10:06+00:00,2025-01-14 08:51:50+00:00,https://github.com/frappe/erpnext/issues/41351,"[('bug', None), ('POS', None)]","[{'comment_id': 2589346609, 'issue_id': 2282342990, 'author': 'nabinhait', 'body': 'This information does not help to replicate the issue. Please give steps to replicate the issue, preferably with some screenshots, so that we can fix the issue. Closing the issue now.', 'created_at': datetime.datetime(2025, 1, 14, 8, 51, 50, tzinfo=datetime.timezone.utc)}]","nabinhait on (2025-01-14 08:51:50 UTC): This information does not help to replicate the issue. Please give steps to replicate the issue, preferably with some screenshots, so that we can fix the issue. Closing the issue now.

"
2282331632,issue,open,,Rounding issue in Total Tax Calculation,"### Information about bug

The rounding method is not functioning correctly in the ""Sales Taxes and Charges"" section of the Sales Order.

Steps to reproduce the issue:

1. Ensure the currency precision and rounding method are set as shown in the screenshot provided.
![image](https://github.com/frappe/erpnext/assets/4609678/607365a7-d348-45be-86db-f33d5f6e4b6a)
2. Create a Sales Order and add items, quantity, and rates as illustrated in the screenshot.
![image](https://github.com/frappe/erpnext/assets/4609678/267c7a42-a1b1-4e78-9fff-af213b1846b6)
3. In the ""Sales Taxes and Charges"" table, select 'On Net Total' for type, 'Output Tax IGST' for Account Head, and set the rate to 18%. Save the order.
![image](https://github.com/frappe/erpnext/assets/4609678/1fec15ae-de2b-4589-a403-71436f0f91fb)

5. Review the calculated tax amount. It is expected to be **1,55,284.46**, but it displays **1,55,284.45** instead.

When manually selecting the Item Tax Template for each line item, the correct IGST amount with two decimal places is displayed, but sum of total taxes is not correct with two decimal places.

IGST Amount for Line Item 1:
![image](https://github.com/frappe/erpnext/assets/4609678/68bdcc3d-32d3-4cf2-ae63-da147ced2726)

IGST Amount for Line Item 2:
![image](https://github.com/frappe/erpnext/assets/4609678/76ebdab2-cff3-4044-ae98-e0e4d27deacf)

IGST Amount for Line Item 3:
![image](https://github.com/frappe/erpnext/assets/4609678/c0f50c00-3a1f-40c4-ac35-bee08004a451)

IGST Amount for Line Item 4:
![image](https://github.com/frappe/erpnext/assets/4609678/101e1086-1515-42cf-a3e4-37d18d9d6081)

IGST Amount for Line Item 5:
![image](https://github.com/frappe/erpnext/assets/4609678/9ea65958-d1fc-483d-ac22-f6d58aa916e1)

IGST Amount for Line Item 6:
![image](https://github.com/frappe/erpnext/assets/4609678/6ce6face-871d-47ee-943c-b69d0981d55b)

IGST Amount for Line Item 7:
![image](https://github.com/frappe/erpnext/assets/4609678/3e161b3f-486e-4e06-8d99-6ee71ea0c688)

**Current Result:**
Total tax (IGST Amount) is **1,55,284.45**.

**Expected Result:**
Total tax (IGST Amount) should be **1,55,284.46**.

### Module

selling

### Version

Frappe: v15.25.0
ERPNext: v15.22.2
India Compliance: v15.7.4

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",HUMENTH,2024-05-07 05:44:36+00:00,[],2024-05-09 05:02:16+00:00,,https://github.com/frappe/erpnext/issues/41350,"[('bug', None)]","[{'comment_id': 2101939135, 'issue_id': 2282331632, 'author': 'sahalMoidu', 'body': 'This seems the way the sum is taken. \r\n\r\n1. Sum of rounded amount\r\n2. Round of summed amount\r\n\r\nCurrently the output looks like it is option 2.\r\n\r\n\r\n<img width=""822"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/6101879/6903df37-ecde-4fa9-abd7-a2d4e773a94c"">\r\n\r\nIMO each line\'s Tax amount should be rounded as I face similar issue in Saudi VAT.\r\nThe official documentation also dictates to round seperately\r\n<img width=""509"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/6101879/60bdeb9f-17c4-40aa-8d07-fccf70abb91b"">', 'created_at': datetime.datetime(2024, 5, 9, 5, 2, 15, tzinfo=datetime.timezone.utc)}]","sahalMoidu on (2024-05-09 05:02:15 UTC): This seems the way the sum is taken. 

1. Sum of rounded amount
2. Round of summed amount

Currently the output looks like it is option 2.


<img width=""822"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/6101879/6903df37-ecde-4fa9-abd7-a2d4e773a94c"">

IMO each line's Tax amount should be rounded as I face similar issue in Saudi VAT.
The official documentation also dictates to round seperately
<img width=""509"" alt=""image"" src=""https://github.com/frappe/erpnext/assets/6101879/60bdeb9f-17c4-40aa-8d07-fccf70abb91b"">

"
2280666539,issue,closed,completed,Return invoice wrong total,"### Information about bug

I created a normal invoice:
![Bild (6)](https://github.com/frappe/erpnext/assets/3322872/8adb4b33-b61e-4eaa-a14b-c308975b4cb9)

And then tried to create a return invoice but the total amount is different:
![Bild (7)](https://github.com/frappe/erpnext/assets/3322872/986b0663-fccc-4067-8b85-c7ce572ff407)

Looks like the difference comes from this one green marked item. Maybe rounding error?

### Module

selling

### Version

ERPNext: v15.20.3
Frappe Framework: v15.22.0

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",perotom,2024-05-06 11:32:21+00:00,[],2024-06-22 00:08:48+00:00,2024-06-06 11:01:48+00:00,https://github.com/frappe/erpnext/issues/41343,"[('bug', None)]","[{'comment_id': 2152030166, 'issue_id': 2280666539, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest version 15.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/d7208f41-27a9-4639-a3d9-7a91215b1ad6', 'created_at': datetime.datetime(2024, 6, 6, 11, 1, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2152073848, 'issue_id': 2280666539, 'author': 'perotom', 'body': 'If you use quantity 1, it works but if you use for example quantity 10 with price 82.50€ and 15% discount, you will get a wrong total. This issue is still there.', 'created_at': datetime.datetime(2024, 6, 6, 11, 14, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2152199139, 'issue_id': 2280666539, 'author': 'Nihantra-Patel', 'body': 'Tested, worked properly.\r\n\r\n\r\nhttps://github.com/frappe/erpnext/assets/141945075/3ad2a136-b19e-461d-9cee-0f377c293298', 'created_at': datetime.datetime(2024, 6, 6, 11, 51, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2152260748, 'issue_id': 2280666539, 'author': 'perotom', 'body': 'Please use the price values I used. It is a rounding issue. The following is happening:\r\nItem A: `82,50€ - 15% = 70,125€`\r\nOn the sales invoice, it is rounded up:\r\n`70,125 = 70,13€ * 10 = 701,30€`\r\nand on the return invoice it is rounded down:\r\n`70,125 = 70,12€ * 10 = 701,20€`\r\nresulting in a wrong total value. Seems like the rounding mode is not consistent across sales and return invoices.', 'created_at': datetime.datetime(2024, 6, 6, 12, 15, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2152262829, 'issue_id': 2280666539, 'author': 'Nihantra-Patel', 'body': 'Please check with latest version and provide the video.', 'created_at': datetime.datetime(2024, 6, 6, 12, 16, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2152306586, 'issue_id': 2280666539, 'author': 'perotom', 'body': 'I changed the rounding mode from bankers to commercial and now it works. Thank you.', 'created_at': datetime.datetime(2024, 6, 6, 12, 39, 28, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-06-06 11:01:48 UTC): Everything is working fine. No problems were encountered in the latest version 15.


https://github.com/frappe/erpnext/assets/141945075/d7208f41-27a9-4639-a3d9-7a91215b1ad6

perotom (Issue Creator) on (2024-06-06 11:14:28 UTC): If you use quantity 1, it works but if you use for example quantity 10 with price 82.50€ and 15% discount, you will get a wrong total. This issue is still there.

Nihantra-Patel on (2024-06-06 11:51:45 UTC): Tested, worked properly.


https://github.com/frappe/erpnext/assets/141945075/3ad2a136-b19e-461d-9cee-0f377c293298

perotom (Issue Creator) on (2024-06-06 12:15:16 UTC): Please use the price values I used. It is a rounding issue. The following is happening:
Item A: `82,50€ - 15% = 70,125€`
On the sales invoice, it is rounded up:
`70,125 = 70,13€ * 10 = 701,30€`
and on the return invoice it is rounded down:
`70,125 = 70,12€ * 10 = 701,20€`
resulting in a wrong total value. Seems like the rounding mode is not consistent across sales and return invoices.

Nihantra-Patel on (2024-06-06 12:16:22 UTC): Please check with latest version and provide the video.

perotom (Issue Creator) on (2024-06-06 12:39:28 UTC): I changed the rounding mode from bankers to commercial and now it works. Thank you.

"
