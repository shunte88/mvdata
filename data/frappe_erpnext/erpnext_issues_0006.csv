id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2503460765,issue,closed,completed,Timesheet feature in projects becoming unresponsive,"### Information about bug

When using timesheet in projects, once you complete the header info and start inputing time sheets, the system becomes unresponsive and doesn't save a draft of the timesheet. The feature worked ok until some versions ago. No idea what might be happening. No error message appears or gets registered in the error log. I attach a video. 

[Kooha-2024-09-03-11-48-25.webm](https://github.com/user-attachments/assets/ddc8ceab-c351-4475-845e-989d96a305e4)

Quite strangely, when the error occurs the screen recording app also shows an error (twice). I believe the video already shows the problem, but latter the full timesheet feature becomes unresponsive, it doesn't save the draft and everything needs to be restarted. Sometimes it records the timsheet, sometimes it doesn't 

# System Details Report
---

## Report details
- **Date generated:**                              2024-09-03 11:55:54

## Hardware Information:
- **Hardware Model:**                              Dell Inc. Inspiron 5584
- **Memory:**                                      16.0 GiB
- **Processor:**                                   Intel® Core™ i7-8565U × 8
- **Graphics:**                                    Intel® UHD Graphics 620 (WHL GT2)
- **Graphics 1:**                                  NVIDIA GeForce MX130
- **Disk Capacity:**                               2.0 TB

## Software Information:
- **Firmware Version:**                            1.22.1
- **OS Name:**                                     Ubuntu 24.04.1 LTS
- **OS Build:**                                    (null)
- **OS Type:**                                     64-bit
- **GNOME Version:**                               46
- **Windowing System:**                            X11
- **Kernel Version:**                              Linux 6.8.0-41-generic


### Module

projects

### Version

ERPNext: v15.33.4

Frappe Framework: v15.39.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",MartinFulgueiras,2024-09-03 18:02:55+00:00,[],2024-09-19 00:10:03+00:00,2024-09-04 05:06:55+00:00,https://github.com/frappe/erpnext/issues/43035,"[('bug', None)]","[{'comment_id': 2327137794, 'issue_id': 2503460765, 'author': 'MartinFulgueiras', 'body': ""When I manage to save the timesheet (by not trying to edit a time sheets and just inputting the data in the table), then I can't add more lines / time sheets. Sometimes if I refresh, the lines appear empty, but the behaviour is not regular. I attach video...\r\n[Kooha-2024-09-03-12-06-30.webm](https://github.com/user-attachments/assets/a5cdba99-5109-4a93-bfe8-f3303a57abb9)"", 'created_at': datetime.datetime(2024, 9, 3, 18, 13, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2327930363, 'issue_id': 2503460765, 'author': 'Nihantra-Patel', 'body': 'Duplicate Issue: https://github.com/frappe/erpnext/issues/42889\r\n\r\nYou can track it there.', 'created_at': datetime.datetime(2024, 9, 4, 5, 6, 55, tzinfo=datetime.timezone.utc)}]","MartinFulgueiras (Issue Creator) on (2024-09-03 18:13:28 UTC): When I manage to save the timesheet (by not trying to edit a time sheets and just inputting the data in the table), then I can't add more lines / time sheets. Sometimes if I refresh, the lines appear empty, but the behaviour is not regular. I attach video...
[Kooha-2024-09-03-12-06-30.webm](https://github.com/user-attachments/assets/a5cdba99-5109-4a93-bfe8-f3303a57abb9)

Nihantra-Patel on (2024-09-04 05:06:55 UTC): Duplicate Issue: https://github.com/frappe/erpnext/issues/42889

You can track it there.

"
2502088847,issue,closed,completed,Bug - Company - Company Account Selection does not work without Refresh,"### Information about bug

Hi Team,

I found an issue while working with multi-companies, while working the selecting default accounts , the company filter is not refreshing as needed, and requires reload every time, see the screen capture below


![company_account_issue](https://github.com/user-attachments/assets/71b63df0-b795-455b-a34e-481561f77b96)



### Module

accounts

### Version

ERPNext: v15.34.0
Frappe Framework: v15.39.2

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",bibinqcs,2024-09-03 07:06:37+00:00,[],2024-09-18 00:09:51+00:00,2024-09-03 10:35:10+00:00,https://github.com/frappe/erpnext/issues/43023,"[('bug', None)]",[],
2501984622,issue,closed,completed,Supposed bug in the handling of multi-currency transactions when creating GL entries from a journal entry.,"### Information about bug

Supposed bug in the handling of multi-currency transactions when creating GL entries from a journal entry. The system is incorrectly applying the exchange rate from the first row to all subsequent rows, leading to inaccurate currency conversions.

*GHS is the company currency*

### 01. Journal Entry
Create a multi-currency journal entry with the following data as it's rows.
| Row | Account | AccountCurrency | Party Type | Party No     | Exchange  Rate | Debit in  Account  currency | Credit in  Account  currency | Debit in  Company  currency | Credit in  Company  currency |
|-----|---------|-----------------|------------|--------------|----------------|-----------------------------|------------------------------|-----------------------------|------------------------------|
| 1   | 01      | EUR             | Supplier   | EUR Supplier | 2,000          | 100                         |                              | 200,000                     |                              |
| 2   | 02      | USD             | Supplier   | USD Supplier | 1,250          | 50                          |                              | 62,500                      |                              |
| 3   | 03      | GHS             |            |              | 1              |                             | 262,500                      |                             | 262,500                      |
|     |         |                 |            |              |                |                             |                              |                             |                              |

After the unfolding of the above transaction in the system, adjacent GL entry records are create wherein lies our problem.

### 2. GL Entry

**Current Output:**
| GL Entry No | Account | Account  Currency | Transaction  Currency | Exchange  Rate | Debit in Accounting Currency | Credit in  Accounting Currency | Debit in Company  Currency | Credit in  Company  Currency | Debit  Amount in  Transaction  Currency | Credit  Amount in  Transaction  Currency |
|-------------|---------|-------------------|-----------------------|----------------|------------------------------|--------------------------------|----------------------------|------------------------------|-----------------------------------------|------------------------------------------|
| 1           | 01      | EUR               | EUR                   | 2,000          | 100                          |                                | 200,000                    |                              | 100                                     |                                          |
| 2           | 02      | USD               | EUR                   | 2,000          | 50                           |                                | 62,500                     |                              | 31.25                                   |                                          |
| 3           | 03      | GHS               | EUR                   | 2,000          |                              | 262,500                       |                            | 262,500                     |                                         | 131.25                                   |

For the above respective GL entries of the Journal Entry, entries 2 and 3 continue to use the currency and exchange rate of the first row which is EUR and 2000

**Expected Output:**
| GL Entry No | Account | Account  Currency | Transaction  Currency | Exchange  Rate | Debit in Accounting Currency | Credit in  Accounting Currency | Debit in Company  Currency | Credit in  Company  Currency | Debit  Amount in  Transaction  Currency | Credit  Amount in  Transaction  Currency |
|-------------|---------|-------------------|-----------------------|----------------|------------------------------|--------------------------------|----------------------------|------------------------------|-----------------------------------------|------------------------------------------|
| 1           | 01      | EUR               | EUR                   | 2,000          | 100                          |                                | 200,000                    |                              | 100                                     |                                          |
| 2           | 02      | USD               | USD                   | 1,250          | 50                           |                                | 62,500                     |                              | 50                                      |                                          |
| 3           | 03      | GHS               | GHS                   | 1              |                              | 262,500                       |                            | 262,500                     |                                         | 262,500                                  |

Each GL Entry should use its own correct exchange rate (2,000 for EUR, 1,250 for USD, 1 for GHS).




### Module

accounts

### Version

Frappe Framework: v15.39.2
ERPNext: v15.34.0

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",jnoufaily,2024-09-03 05:58:40+00:00,['ruthra-kumar'],2024-10-17 00:10:05+00:00,2024-10-02 05:41:33+00:00,https://github.com/frappe/erpnext/issues/43021,"[('bug', None)]","[{'comment_id': 2333572231, 'issue_id': 2501984622, 'author': 'ruthra-kumar', 'body': ""Couldn't replicate this.\r\n\r\nEx:\r\nJournal against 2 suppliers - USD and EUR, with 80 and 95 as exchange rate respectively.\r\n![Screenshot from 2024-09-06 14-22-37](https://github.com/user-attachments/assets/5b30d2ae-46b8-4348-94c0-7258833fedcb)\r\n\r\nGL's use the same exchange rate for each account / row\r\n![Screenshot from 2024-09-06 14-22-02](https://github.com/user-attachments/assets/e8f4aea0-9f94-4702-86b5-16404e836762)"", 'created_at': datetime.datetime(2024, 9, 6, 8, 55, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2333628922, 'issue_id': 2501984622, 'author': 'jnoufaily', 'body': 'Hi Ruthra,\r\n\r\nThank you for the reply.\r\n\r\nWould it be possible to do a call and I can run you through the case live?\r\n\r\nRegards,\r\nJoseph', 'created_at': datetime.datetime(2024, 9, 6, 9, 18, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2333759970, 'issue_id': 2501984622, 'author': 'ruthra-kumar', 'body': ""Unfortunately, won't be available for a call.\r\n\r\nIt would be better if you can provide below details.\r\n1. Is this Journal manually created or generated by system?\r\n2. Is there any customization done on Journal Entry - through app or Server script"", 'created_at': datetime.datetime(2024, 9, 6, 10, 29, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2333770264, 'issue_id': 2501984622, 'author': 'jnoufaily', 'body': 'No problem I will elaborate more through a detailed explanation on Monday.\r\n\r\nConcerning the following\r\nIs this Journal manually created or generated by system? Manually created\r\nIs there any customization done on Journal Entry - through app or Server script? a minor customization is only done for creating a custom naming series', 'created_at': datetime.datetime(2024, 9, 6, 10, 35, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2333853661, 'issue_id': 2501984622, 'author': 'ruthra-kumar', 'body': 'What is the exchange rate maintained in account rows for the Journal Entry? If possible can you post a screenshot?\r\n\r\nAlso, a screenshot of the GL Entry doctype filtered on that Journal Entry, with Debit, Credit, Debit in Account Currency and Credit in Account Currency fields visible', 'created_at': datetime.datetime(2024, 9, 6, 11, 29, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2333876089, 'issue_id': 2501984622, 'author': 'jnoufaily', 'body': 'As requested\r\n![image](https://github.com/user-attachments/assets/a90d049e-28e6-4ddd-a711-cdee2ab3807c)\r\n[GL Entry.xlsx](https://github.com/user-attachments/files/16907213/GL.Entry.xlsx)\r\n![image](https://github.com/user-attachments/assets/b5330c8f-a301-4847-aea8-c79427937610)', 'created_at': datetime.datetime(2024, 9, 6, 11, 44, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387672434, 'issue_id': 2501984622, 'author': 'ruthra-kumar', 'body': 'Debit  and Credit values are fine, only the `transaction_exchange_rate` had incorrect value. It has been fixed by https://github.com/frappe/erpnext/pull/43331', 'created_at': datetime.datetime(2024, 10, 2, 5, 41, 33, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-09-06 08:55:01 UTC): Couldn't replicate this.

Ex:
Journal against 2 suppliers - USD and EUR, with 80 and 95 as exchange rate respectively.
![Screenshot from 2024-09-06 14-22-37](https://github.com/user-attachments/assets/5b30d2ae-46b8-4348-94c0-7258833fedcb)

GL's use the same exchange rate for each account / row
![Screenshot from 2024-09-06 14-22-02](https://github.com/user-attachments/assets/e8f4aea0-9f94-4702-86b5-16404e836762)

jnoufaily (Issue Creator) on (2024-09-06 09:18:17 UTC): Hi Ruthra,

Thank you for the reply.

Would it be possible to do a call and I can run you through the case live?

Regards,
Joseph

ruthra-kumar (Assginee) on (2024-09-06 10:29:21 UTC): Unfortunately, won't be available for a call.

It would be better if you can provide below details.
1. Is this Journal manually created or generated by system?
2. Is there any customization done on Journal Entry - through app or Server script

jnoufaily (Issue Creator) on (2024-09-06 10:35:46 UTC): No problem I will elaborate more through a detailed explanation on Monday.

Concerning the following
Is this Journal manually created or generated by system? Manually created
Is there any customization done on Journal Entry - through app or Server script? a minor customization is only done for creating a custom naming series

ruthra-kumar (Assginee) on (2024-09-06 11:29:49 UTC): What is the exchange rate maintained in account rows for the Journal Entry? If possible can you post a screenshot?

Also, a screenshot of the GL Entry doctype filtered on that Journal Entry, with Debit, Credit, Debit in Account Currency and Credit in Account Currency fields visible

jnoufaily (Issue Creator) on (2024-09-06 11:44:36 UTC): As requested
![image](https://github.com/user-attachments/assets/a90d049e-28e6-4ddd-a711-cdee2ab3807c)
[GL Entry.xlsx](https://github.com/user-attachments/files/16907213/GL.Entry.xlsx)
![image](https://github.com/user-attachments/assets/b5330c8f-a301-4847-aea8-c79427937610)

ruthra-kumar (Assginee) on (2024-10-02 05:41:33 UTC): Debit  and Credit values are fine, only the `transaction_exchange_rate` had incorrect value. It has been fixed by https://github.com/frappe/erpnext/pull/43331

"
2501968974,issue,open,,Add BOM - Copy and paste from Excel does not work.,"### Information about bug

While Adding BOM - Copy and paste from Excel does not work.
The Stock unit of all items always takes as Nos.


### Module

manufacturing

### Version

Installed Apps
ERPNext: v15.30.0 (HEAD)
Frappe Framework: v15.36.0 (HEAD)
Frappe HR: v15.24.0 (HEAD)
India Compliance: v15.11.0 (HEAD)
Payments: v0.0.1 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",nitin-anantpranali,2024-09-03 05:46:04+00:00,[],2024-09-03 05:46:04+00:00,,https://github.com/frappe/erpnext/issues/43020,"[('bug', None)]",[],
2500322967,issue,closed,completed,Accounts Payable doesn't match General Ledger,"### Information about bug

Accounts Payable is considering some payments twice and therefore giving the wrong status.
![image](https://github.com/user-attachments/assets/7017a4b0-d338-4fc7-98a6-b4cd08f17a3a)
All entries where paid amount is twice of invoiced amount should actually have paid amount equal to invoiced amount.
For example, here's the ledger related to entry 13 in the above image:
![image](https://github.com/user-attachments/assets/fec69ad6-3a09-49b7-9fbc-3541923e9cbb)
And here, the ledger related to entry 25:
![image](https://github.com/user-attachments/assets/362d5fb4-2042-451e-adbc-12b3543ba862)

As you can see, some entries are accounted for twice in the Payables Report and hence gives us wrong information. I believe this might be related to Payment Reconciliation entries, but I'm not really sure. Payables Report is unusable until this is fixed.

Possibly related to #42991 

### Module

accounts

### Version

crm 1.20.0
erpnext 15.34.0
frappe 15.39.1
hrms 15.28.0
india_compliance 15.13.2

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",SvbZ3r0,2024-09-02 08:21:57+00:00,[],2024-12-01 00:13:10+00:00,2024-11-16 06:50:43+00:00,https://github.com/frappe/erpnext/issues/43012,"[('bug', None)]","[{'comment_id': 2325910362, 'issue_id': 2500322967, 'author': 'ruthra-kumar', 'body': ""Recheck after enabling 'Ignore Account Closing Balance' in Accounts settings"", 'created_at': datetime.datetime(2024, 9, 3, 8, 29, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2325989633, 'issue_id': 2500322967, 'author': 'SvbZ3r0', 'body': ""I've tried with that setting on and off, but it didn't help. At all.\n\nI did notice that sometimes, on setting or changing the Project (or possibly other Accounting Dimensions) in the child table in a submitted Journal Entry, the Payables report got updated and the value from those JEs weren't showing up twice, BUT that method didn't work for all JEs. I believe this has nothing to do with accounting dimensions themselves but rather with the fact that Payment Ledger Entries are recreated.\n\nAnother thing I've noticed is that only some JEs are accounted for twice in the Payables report. I haven't come across a situation where a Payment Entry has this problem."", 'created_at': datetime.datetime(2024, 9, 3, 9, 7, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2480454177, 'issue_id': 2500322967, 'author': 'SvbZ3r0', 'body': 'This has to do with allocating correct amounts to the correct projects. ie. if Purchase JE is Project 1, Payment JE is Project 2, but said Payment is allocated to said Purchase, it leads to this issue. It should not occur during proper Accounting Entries.\r\nI had this issue because I was importing from Tally and mass reconciling all Payments and Purchases. That caused random (maybe on a FIFO basis) payment allocations to purchases. So even when the ledger tallied up, individual project ledgers were open.\r\nI had to go back and manually fix Project allocations on each JE. Which in turn leads to this bug: #43575', 'created_at': datetime.datetime(2024, 11, 16, 6, 50, 43, tzinfo=datetime.timezone.utc)}]","ruthra-kumar on (2024-09-03 08:29:33 UTC): Recheck after enabling 'Ignore Account Closing Balance' in Accounts settings

SvbZ3r0 (Issue Creator) on (2024-09-03 09:07:01 UTC): I've tried with that setting on and off, but it didn't help. At all.

I did notice that sometimes, on setting or changing the Project (or possibly other Accounting Dimensions) in the child table in a submitted Journal Entry, the Payables report got updated and the value from those JEs weren't showing up twice, BUT that method didn't work for all JEs. I believe this has nothing to do with accounting dimensions themselves but rather with the fact that Payment Ledger Entries are recreated.

Another thing I've noticed is that only some JEs are accounted for twice in the Payables report. I haven't come across a situation where a Payment Entry has this problem.

SvbZ3r0 (Issue Creator) on (2024-11-16 06:50:43 UTC): This has to do with allocating correct amounts to the correct projects. ie. if Purchase JE is Project 1, Payment JE is Project 2, but said Payment is allocated to said Purchase, it leads to this issue. It should not occur during proper Accounting Entries.
I had this issue because I was importing from Tally and mass reconciling all Payments and Purchases. That caused random (maybe on a FIFO basis) payment allocations to purchases. So even when the ledger tallied up, individual project ledgers were open.
I had to go back and manually fix Project allocations on each JE. Which in turn leads to this bug: #43575

"
2500139507,issue,open,,Need to add the multiple customer as  a Internal customer,"When we try to add more than 1 customer as a Internal customer, we are getting an error like this. So kindly do the needful.

<img width=""825"" alt=""image"" src=""https://github.com/user-attachments/assets/faf82299-d5c8-40f2-b2ca-0def1c7859ed"">

",aravindsprint,2024-09-02 06:46:16+00:00,[],2024-09-02 06:46:16+00:00,,https://github.com/frappe/erpnext/issues/43010,"[('feature-request', None)]",[],
2499778967,issue,open,,Showing Incorrect Opening Balance in Bank reconcillation tool ,"### Information about bug

Till Aug 24th the bank reconcillation has been done. Now when I look forward to do for the period Aug 25th to Aug 31. It is showing a erroneous value.

### Module

accounts

### Version

Frappe CRM: v1.20.0 (HEAD)

ERPNext: v15.34.0 (HEAD)

Frappe Framework: v15.39.1 (HEAD)

Frappe HR: v15.27.1 (HEAD)

India Compliance: v15.13.2 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",sapl-santhosh,2024-09-02 00:41:37+00:00,[],2024-09-02 00:41:37+00:00,,https://github.com/frappe/erpnext/issues/43007,"[('bug', None)]",[],
2499465768,issue,closed,completed,Due to renaming Doctype 'Unreconcile Payments' not find when you try to get links of Sales Invoice ,"### Information about bug

[Screencast from 01-09-24 15:38:16.webm](https://github.com/user-attachments/assets/de3185ac-5c74-44be-be17-706b718cba8d)
As you can see the Parent Doctype has been renamed to became ''Unreconcile Payment' which has a child doctype 'Unreconcile Payment Entries'
therefore i run system console and find there were two child doctype linked to the old parent doctype, and those parents doctype are not exist so i run console with Commit : 
```
li=frappe.get_all(""Unreconcile Payment Entries"",filters={'parenttype':'Unreconcile Payments','reference_doctype':'Sales Invoice'})
for l in li :
    doc=frappe.get_doc('Unreconcile Payment Entries',l.name)
    doc.docstatus=2
    doc.save()
    frappe.delete_doc('Unreconcile Payment Entries',l.name)
```
and Problem Solved

### Module

accounts

### Version

Frappe V15 Erpnext 15

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",Sendipad,2024-09-01 13:19:07+00:00,[],2024-09-16 00:12:29+00:00,2024-09-01 13:20:08+00:00,https://github.com/frappe/erpnext/issues/43006,"[('bug', None)]","[{'comment_id': 2323338078, 'issue_id': 2499465768, 'author': 'Sendipad', 'body': 'Problem Solved as in above section', 'created_at': datetime.datetime(2024, 9, 1, 13, 20, 8, tzinfo=datetime.timezone.utc)}]","Sendipad (Issue Creator) on (2024-09-01 13:20:08 UTC): Problem Solved as in above section

"
2499206891,issue,open,,Add Party Name Bank Recon PE Matching query ,"in some banks party and party name might be different. so we need the API to return party Name.

erpnext/erpnext/accounts/doctype/bank_reconciliation_tool/bank_reconciliation_tool.py
need to return _**party_name**_ in **get _pe_matching_query**_ function
",finzero,2024-09-01 04:07:48+00:00,[],2024-09-01 04:12:32+00:00,,https://github.com/frappe/erpnext/issues/43004,"[('feature-request', None)]",[],
2498716000,issue,open,,In POS the item tax template will be deleted if the item group has no item tax template. ,"### Information about bug

Since the update to version 15, the tax in the POS closing item is calculated incorrectly.
The tax is no longer based on the item tax template.
The same applies to the sales invoice.

**see my last post**: item tax template is deleted in POS Invoice Item List. 

![Bildschirmfoto_20240831_084753](https://github.com/user-attachments/assets/917f3331-9f1a-419f-9fc0-96dd6eec1d89)

Only the first item is sold with item tax. (9801210-00400)

In Germany there are several VAT rates. For example, 7% for books and 19% for textiles. Therefore it is necessary that the tax is calculated based on the item tax. It is not possible to set the tax for the entire invoice.

The tax is used for some items, but for most not.

I looked at the items table. It seems that the items that do not have a purchase_uom are sold without tax.

![Bildschirmfoto_20240831_092827](https://github.com/user-attachments/assets/60ecf718-7328-41ee-908f-eda916389f4a)

Since when the field has been there? 

I looked at all my items (8894). All of them have a value for `stock_uom` and only 146 for `purchase_uom`. No item has a value for `sales_uom`. If that is related.

PS: I looked at all the items that have been sold since the update. Maybe it has nothing to do with uom.


### Module

selling

### Version

erpnext 15.33.4
frappe 15.39.0


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",zahlenhexe,2024-08-31 07:53:46+00:00,[],2024-09-08 09:57:41+00:00,,https://github.com/frappe/erpnext/issues/43000,"[('bug', None)]","[{'comment_id': 2334074233, 'issue_id': 2498716000, 'author': 'zahlenhexe', 'body': 'There is the same problem in the POS Invoice. The tax is not included on the printed receipts or on the invoices. Although the items has an item tax template. See [Forum](https://discuss.frappe.io/t/has-anything-changed-in-the-item-tax-calculation-in-version-15-pos/132601?u=zahlenhexe)\r\n\r\n**receipt:** \r\n![20240906_093631](https://github.com/user-attachments/assets/66c41e7e-96cb-45cd-aba8-33707de2c2c0)\r\n\r\n**item tax:** \r\n![Bildschirmfoto_20240906_094324](https://github.com/user-attachments/assets/5373dd64-2ac5-481d-bb4f-dd1e10b30109)\r\n\r\n**item tax template:** \r\n![Bildschirmfoto_20240906_094403](https://github.com/user-attachments/assets/3dce5de6-48d7-4f40-b812-f1e68140c38c)', 'created_at': datetime.datetime(2024, 9, 6, 13, 34, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334075952, 'issue_id': 2498716000, 'author': 'zahlenhexe', 'body': 'I\'ve tested it again now.\r\n\r\n I\'ve entered all UOM for an article. But no tax is calculated. I\'ve also activated ""Price not dependent on UOM"" in the price list for sales.\r\nBut no tax is calculated on the POS Invoice.', 'created_at': datetime.datetime(2024, 9, 6, 13, 35, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2335132157, 'issue_id': 2498716000, 'author': 'zahlenhexe', 'body': 'I found the problem.\r\nThe item tax template of the item template is no longer included in the variants even though this is explicitly stated in the template!!\r\n\r\n![Bildschirmfoto_20240907_110600-1](https://github.com/user-attachments/assets/f9276837-1e2a-4661-bf7d-6206822777ab)\r\n\r\nSo, is this a **bug or is it a feature**??\r\n\r\nAnd what to do now?\r\n\r\nIs it necessary to edit all items???\r\n\r\nIn addition, when the item template is changed, the values \u200b\u200bare not adopted into the variants even though the taxes were specified in the item variant settings.\r\n\r\nSo how does it work with the variants now?\r\n\r\nThe same problem already exists with the prices. See [forum entry](https://discuss.frappe.io/t/how-do-i-maintain-prices-for-items-with-variants-in-version-15).', 'created_at': datetime.datetime(2024, 9, 7, 9, 32, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2335150198, 'issue_id': 2498716000, 'author': 'zahlenhexe', 'body': ""no taxes are still charged.\r\nIt doesn't matter if the item has a tax template or not."", 'created_at': datetime.datetime(2024, 9, 7, 10, 51, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2336621591, 'issue_id': 2498716000, 'author': 'zahlenhexe', 'body': 'I think I see the problem now.\r\n\r\nTrying to select the item tax manually in the form view of the POS invoice, it is not possible because of the filters set to the field for item tax template. \r\n\r\n![Screenshot_20240908_104523-1](https://github.com/user-attachments/assets/463710f5-df5d-41b5-ad3e-e2605f81549d)\r\n\r\nThe item tax template is  filtered with item group. This means that if the item group of this item does not have a item tax  template, the article template is deleted. Therefor no tax is calculated although the item has a item tax template. \r\nThis is definitely not correct.\r\n**This is a bug.**', 'created_at': datetime.datetime(2024, 9, 8, 9, 52, 57, tzinfo=datetime.timezone.utc)}]","zahlenhexe (Issue Creator) on (2024-09-06 13:34:47 UTC): There is the same problem in the POS Invoice. The tax is not included on the printed receipts or on the invoices. Although the items has an item tax template. See [Forum](https://discuss.frappe.io/t/has-anything-changed-in-the-item-tax-calculation-in-version-15-pos/132601?u=zahlenhexe)

**receipt:** 
![20240906_093631](https://github.com/user-attachments/assets/66c41e7e-96cb-45cd-aba8-33707de2c2c0)

**item tax:** 
![Bildschirmfoto_20240906_094324](https://github.com/user-attachments/assets/5373dd64-2ac5-481d-bb4f-dd1e10b30109)

**item tax template:** 
![Bildschirmfoto_20240906_094403](https://github.com/user-attachments/assets/3dce5de6-48d7-4f40-b812-f1e68140c38c)

zahlenhexe (Issue Creator) on (2024-09-06 13:35:42 UTC): I've tested it again now.

 I've entered all UOM for an article. But no tax is calculated. I've also activated ""Price not dependent on UOM"" in the price list for sales.
But no tax is calculated on the POS Invoice.

zahlenhexe (Issue Creator) on (2024-09-07 09:32:30 UTC): I found the problem.
The item tax template of the item template is no longer included in the variants even though this is explicitly stated in the template!!

![Bildschirmfoto_20240907_110600-1](https://github.com/user-attachments/assets/f9276837-1e2a-4661-bf7d-6206822777ab)

So, is this a **bug or is it a feature**??

And what to do now?

Is it necessary to edit all items???

In addition, when the item template is changed, the values ​​are not adopted into the variants even though the taxes were specified in the item variant settings.

So how does it work with the variants now?

The same problem already exists with the prices. See [forum entry](https://discuss.frappe.io/t/how-do-i-maintain-prices-for-items-with-variants-in-version-15).

zahlenhexe (Issue Creator) on (2024-09-07 10:51:21 UTC): no taxes are still charged.
It doesn't matter if the item has a tax template or not.

zahlenhexe (Issue Creator) on (2024-09-08 09:52:57 UTC): I think I see the problem now.

Trying to select the item tax manually in the form view of the POS invoice, it is not possible because of the filters set to the field for item tax template. 

![Screenshot_20240908_104523-1](https://github.com/user-attachments/assets/463710f5-df5d-41b5-ad3e-e2605f81549d)

The item tax template is  filtered with item group. This means that if the item group of this item does not have a item tax  template, the article template is deleted. Therefor no tax is calculated although the item has a item tax template. 
This is definitely not correct.
**This is a bug.**

"
2498575742,issue,open,,Notes to link to Events ,"**Is your feature request related to a problem? Please describe.**
Not really. It's a feature request

**Describe the solution you'd like**
A connection between **events** and **notes** in the system. In this way no need for third party apps or other note taking app done outside the system. 
Everything leaves a breadcrumb trail inside the system. 
other features can be added
ERPNext becomes a whole KMS of the organisation.

**Describe alternatives you've considered**
Adding the left column  in Notes so you can add the link to a pad or google doc, photos, pdfs, etc

**Additional context**
No need. Quite self-explanatory
",MartinFulgueiras,2024-08-31 02:58:59+00:00,[],2024-08-31 02:58:59+00:00,,https://github.com/frappe/erpnext/issues/42999,"[('feature-request', None)]",[],
2498473664,issue,open,,"Opening Balance import - Separate Temporary Opening GL code for Stock, Payables & Receivables","Hi,

I understand that the Opening Balance for Stock is managed through `Stock Reconciliation` function with Purpose as `Opening Stock`. Similarly Open Items for Payable & Receivable are managed through the  `Opening Invoice creation` tool.  The other side of posting for all these stock, payable & receivable transactions are `Temporary Opening` GL code.

If we can get these posted into 3 separate GL code as listed below and we bring the Opening Balance JV entry on the corresponding GL codes, then it will be easy to identify which one is off at the end of all the transactions import from the legacy system.

- Temporary Opening - Stock
- Temporary Opening - Payable
- Temporary Opening - Receivable

Not sure if others also feel that this will simplify the reconciliation of the Opening Balance imports.

Thank you.",gnani-sekar,2024-08-31 00:52:41+00:00,[],2024-08-31 00:52:41+00:00,,https://github.com/frappe/erpnext/issues/42998,"[('feature-request', None)]",[],
2498172561,issue,closed,completed,Serial and Batch Bundle - batch_no in Stock Ledger Entry table is empty,"### Information about bug

We are currently migrating to version 15 and are encountering issues with the new feature called 'Serial and Batch Bundle'.

When I create a Purchase Receipt for an item with `has_batch_no=1` and enter the batch number in the `batch_no` field, the Purchase Receipt is submitted correctly. However, when I check the `Stock Ledger Entry` table, the `batch_no` column is empty.

This is problematic as I have several queries that rely on this column for joins.

Here are my Stock Settings
![image](https://github.com/user-attachments/assets/f00486a1-6010-42d8-b8ad-f341dbedd8c2)

I understand that the 'Serial and Batch Bundle' feature was introduced to enhance serial numbers integrity. However, I’m concerned that it may have unintentionally disrupted the previously well-functioning batch management process. 

Could you please provide some insight into the reasoning behind applying the 'Serial and Batch Bundle' changes for batches and not just for serials? 

Is there a way to disable this feature and maintain the reliable batch management behavior from version 14?


### Module

stock

### Version

Version 15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",guilmori,2024-08-30 21:06:16+00:00,[],2024-10-10 00:10:01+00:00,2024-09-25 09:21:06+00:00,https://github.com/frappe/erpnext/issues/42997,"[('bug', None)]","[{'comment_id': 2329168522, 'issue_id': 2498172561, 'author': 'guilmori', 'body': 'Could you please provide clarification on the following matter?\r\n\r\nIs it expected that the batch_no field in the Stock Ledger Entry table will always remain empty? Even if `Use Serial / Batch fields` is checked ?\r\n\r\nFor instance, if I were to run this query, would it be accurate to assume that with version 15, this is not working anymore?\r\n```\r\nSELECT \r\n\ttabItem.item_name, sle.item_code, tabItem.description, sle.stock_uom, sle.batch_no, sle.warehouse, sum(sle.actual_qty) as qty\r\nFROM `tabStock Ledger Entry` sle\r\nLEFT join tabBatch ON tabBatch.name = sle.batch_no\r\nINNER JOIN tabItem ON tabItem.name = sle.item_code\r\nWHERE warehouse = %(warehouse)s\r\nAND sle.is_cancelled = 0 \r\nGROUP BY sle.item_code, sle.batch_no\r\nHAVING sum(actual_qty) > 0;\r\n```', 'created_at': datetime.datetime(2024, 9, 4, 14, 6, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2373534181, 'issue_id': 2498172561, 'author': 'rohitwaghchaure', 'body': '> Is it expected that the batch_no field in the Stock Ledger Entry table will always remain empty? Even if `Use Serial / Batch fields` is checked ?\r\n\r\nYes, for that we have added the Serial and Batch Bundle.', 'created_at': datetime.datetime(2024, 9, 25, 9, 21, 6, tzinfo=datetime.timezone.utc)}]","guilmori (Issue Creator) on (2024-09-04 14:06:56 UTC): Could you please provide clarification on the following matter?

Is it expected that the batch_no field in the Stock Ledger Entry table will always remain empty? Even if `Use Serial / Batch fields` is checked ?

For instance, if I were to run this query, would it be accurate to assume that with version 15, this is not working anymore?
```
SELECT 
	tabItem.item_name, sle.item_code, tabItem.description, sle.stock_uom, sle.batch_no, sle.warehouse, sum(sle.actual_qty) as qty
FROM `tabStock Ledger Entry` sle
LEFT join tabBatch ON tabBatch.name = sle.batch_no
INNER JOIN tabItem ON tabItem.name = sle.item_code
WHERE warehouse = %(warehouse)s
AND sle.is_cancelled = 0 
GROUP BY sle.item_code, sle.batch_no
HAVING sum(actual_qty) > 0;
```

rohitwaghchaure on (2024-09-25 09:21:06 UTC): Yes, for that we have added the Serial and Batch Bundle.

"
2497103924,issue,closed,completed,"develop_version = ""14.x.x-develop"" in v15","### Information about bug

Should not the [hooks.py](https://github.com/frappe/erpnext/blob/version-15/erpnext/hooks.py) file in Erpnext v15 have this line

`develop_version = ""15.x.x-develop""` instead of `develop_version = ""14.x.x-develop""`

in line 23

### Module

other

### Version

v15

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",ajiragroup,2024-08-30 12:31:37+00:00,[],2024-09-17 00:08:38+00:00,2024-09-02 06:12:39+00:00,https://github.com/frappe/erpnext/issues/42995,"[('bug', None)]",[],
2496816991,issue,closed,completed,Wrong Stock value after sale return - ,"### Information about bug
The stock value becomes zero because of negative value of stock item due to credit note issued to customer for returm of sold items.
in the screen shot it can be seen 

1 qty of item with valuation in stock 1510446.4
delivery note  1 tem out @ 1510446.4
Credit note issued  same item received back value -1510446.4
final stock value becomes 0


item sold with vale 1510446.4
item received with value -1510446.4 (Sale return)
Final stock value become 0

After creating a stock return from delivery note the stock value of  received item in warehouse becomes 0 Value.
![image](https://github.com/user-attachments/assets/afcfd089-7fa0-41f0-ba6f-a1ce4453a5ad)
![image](https://github.com/user-attachments/assets/76842a72-ee38-45e3-adc1-0c96c78baf03)




### Module

stock

### Version

ERPNext: v14.72.2 (HEAD)

Frappe Framework: v14.80.0 (HEAD)

Frappe HR: v14.30.0 (HEAD)

India Compliance: v14.30.2 (HEAD)

Payments: v0.0.1 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
stock
```
",bhavyajicomputers,2024-08-30 10:13:54+00:00,[],2024-09-16 00:12:29+00:00,2024-08-31 15:38:58+00:00,https://github.com/frappe/erpnext/issues/42992,"[('bug', None)]","[{'comment_id': 2322937071, 'issue_id': 2496816991, 'author': 'bhavyajicomputers', 'body': 'issue resolved', 'created_at': datetime.datetime(2024, 8, 31, 15, 38, 59, tzinfo=datetime.timezone.utc)}]","bhavyajicomputers (Issue Creator) on (2024-08-31 15:38:59 UTC): issue resolved

"
2496479820,issue,open,,Accounts Payable Summary Report not matching the General Ledger for Party Type Employee,"### Information about bug

The  Accounts Payable Summary Report is completely not matching the General Ledger for Employees. Also the Payroll Payable account and its purpose as a payable account is not clear since the Payroll Entry does not allow the Payable account to have type set.

Please help/guide

### Module

accounts

### Version

ERPNext: v15.33.5 (version-15)

Frappe Framework: v15.39.0 (version-15)

Frappe HR: v15.27.0 (version-15)

India Compliance: v15.13.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",eskhool,2024-08-30 07:39:26+00:00,[],2024-08-30 07:39:26+00:00,,https://github.com/frappe/erpnext/issues/42991,"[('bug', None)]",[],
2494881049,issue,closed,completed,Raven chat banner is hidden under new app sidebar.,"### Information about bug


<img width=""1512"" alt=""image"" src=""https://github.com/user-attachments/assets/946fde30-73fa-4bfe-978a-26ad330dfa97"">


ERPNext v16 - App Sidebar is currently over the Raven chat bar. Raven should dynamically shift with sidebar

### Module

other

### Version

Frappe Framework: v16.0.0-dev (HEAD)
ERPNext: v16.0.0-dev (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Altrix-One,2024-08-29 15:29:29+00:00,[],2024-10-13 00:12:13+00:00,2024-08-30 04:03:56+00:00,https://github.com/frappe/erpnext/issues/42990,"[('bug', None)]","[{'comment_id': 2319970716, 'issue_id': 2494881049, 'author': 'Nihantra-Patel', 'body': ""It's a Raven chat app issue, not a frappe/ERPNext issue. Currently, in the develop branch, we are changing the UI, so there are lots of bugs. It's under development mode. I suggest using the stable version."", 'created_at': datetime.datetime(2024, 8, 30, 4, 3, 56, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-30 04:03:56 UTC): It's a Raven chat app issue, not a frappe/ERPNext issue. Currently, in the develop branch, we are changing the UI, so there are lots of bugs. It's under development mode. I suggest using the stable version.

"
2494138703,issue,open,,Commission Rules like Pricing Rule,Develop a feature for Commission Rules that follows the same structure and logic as the existing Pricing Rules.,saista2,2024-08-29 11:11:31+00:00,[],2024-08-29 11:11:31+00:00,,https://github.com/frappe/erpnext/issues/42987,"[('feature-request', None)]",[],
2492384304,issue,open,,Stock Valuation Method on a Per-Company Basis,"Hello,

I would like to request a feature enhancement for the Stock Valuation Method in the ERPNext system. Currently, the Stock Valuation Method is applied globally across the entire system, which can be restrictive for businesses managing multiple companies with differing inventory valuation requirements.

Proposed Feature:

I propose adding the ability to set the Stock Valuation Method on a per-company basis. This would allow each company within the ERPNext system to choose its own method for stock valuation, such as FIFO, or Moving Average tailored to its specific accounting and operational needs.

Benefits:

Flexibility: Different companies can apply valuation methods that best fit their business models.
Accuracy: Provides more accurate financial reporting and inventory management on a company-by-company basis.
Customization: Allows for better alignment with varying industry practices and regional accounting standards.
Use Case:

For example, Company A might prefer the FIFO method for its inventory management, while Company B operates in an industry where the Moving Average method is more appropriate. Having this flexibility would improve the overall utility and adaptability of ERPNext.

Additional Information:

Current Behavior: Stock Valuation Method is applied globally.
Desired Behavior: Ability to configure Stock Valuation Method individually for each company.
I appreciate your consideration of this feature request and look forward to your feedback.

Thank you!",chrisdent,2024-08-28 15:10:16+00:00,[],2024-08-28 15:10:16+00:00,,https://github.com/frappe/erpnext/issues/42973,"[('feature-request', None)]",[],
2492198667,issue,open,reopened,Add Currency from Report Trial Balance for Party,"
![WhatsApp Image 2024-08-28 at 5 07 48 PM](https://github.com/user-attachments/assets/e37be57c-befe-45fa-a515-3b0c9a7d3896)



The feature of adding currencies in the trial balance report requires displaying balances based on the currency according to the conversion factor.",Kamereldawa,2024-08-28 14:10:23+00:00,[],2024-08-28 14:11:04+00:00,,https://github.com/frappe/erpnext/issues/42972,"[('feature-request', None)]",[],
2490193214,issue,closed,completed,"Error Log re819fr3fq: 'Title' will get truncated, as max characters allowed is 140","### Information about bug

This error keep happening for Doctyps : Purchase Order , Purchase Invoice , Sales Order , Sales Invoice , Delivery Order

### Module

accounts, stock, buying, selling

### Version

ERPNext: v15.33.5 (version-15)
Frappe Framework: v15.39.0 (version-15)
Frappe HR: v15.27.0 (version-15)
Frappe Lending: v0.0.1 (develop)
Maintenance System: v0.0.1 (main)
Payments: v0.0.1 (develop)
Techstation Item Control: v0.0.1 (main)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell
Value too big
Error Log re819fr3fq: 'Title' ({'name': 'PUR-ORD-2024-00079', 'owner': 'logistics@', 'creation': '2024-08-27 22:42:17.371014', 'modified': '2024-08-27 22:42:17.371014', 'modified_by': 'logistics', 'docstatus': 0, 'idx': 0, 'title': '{supplier_name}', 'naming_series': 'PUR-ORD-.YYYY.-', 'supplier': 'ALI EXPRESS', 'supplier_name': 'ALI EXPRESS', 'order_confirmation_no': None, 'order_confirmation_date': None, 'transaction_date': '2024-08-27', 'schedule_date': '2024-08-30', 'company': 'Miralab CAI', 'apply_tds': 0, 'tax_withholding_category': None, 'is_subcontracted': 0, 'supplier_warehouse': None, 'amended_from': None, 'cost_center': 'رئيسي - MC', 'project': None, 'currency': 'USD', 'conversion_rate': 48.4909, 'buying_price_list': None, 'price_list_currency': 'EGP', 'plc_conversion_rate': 1.0, 'ignore_pricing_rule': 0, 'scan_barcode': None, 'set_from_warehouse': None, 'set_warehouse': None, 'total_qty': 1.0, 'total_net_weight': 0.0, 'base_total': 4849.09, 'base_net_total': 4849.09, 'total': 100.0, 'net_total': 100.0, 'tax_withholding_net_total': 100.0, 'base_tax_withholding_net_total': 4849.09, 'set_reserve_warehouse': None, 'tax_category': '', 'taxes_and_charges': None, 'shipping_rule': None, 'incoterm': None, 'named_place': None, 'base_taxes_and_charges_added': 0.0, 'base_taxes_and_charges_deducted': 0.0, 'base_total_taxes_and_charges': 0.0, 'taxes_and_charges_added': 0.0, 'taxes_and_charges_deducted': 0.0, 'total_taxes_and_charges': 0.0, 'base_grand_total': 4849.09, 'base_rounding_adjustment': 0.0, 'base_in_words': 'EGP Four Thousand, Eight Hundred And Forty Nine and Nine Piaster only.', 'base_rounded_total': 0.0, 'grand_total': 100.0, 'rounding_adjustment': 0.0, 'rounded_total': 0.0, 'disable_rounded_total': 1, 'in_words': 'USD One Hundred only.', 'advance_paid': 0.0, 'apply_discount_on': 'Grand Total', 'base_discount_amount': 0.0, 'additional_discount_percentage': 0.0, 'discount_amount': 0.0, 'other_charges_calculation': None, 'supplier_address': None, 'address_display': None, 'contact_person': None, 'contact_display': None, 'contact_mobile': None, 'contact_email': None, 'shipping_address': 'Miralab Cai-الفواتير', 'shipping_address_display': 'Address :
\nCity/Town :
\nStreet :
\nCountry : Egypt
\nPostal Code :
\nHouse Number :
\nApartment Number :
\nFloor :
\nWay to Climb :
\nSpecial Marque :
', 'billing_address': 'Miralab Cai-الفواتير', 'billing_address_display': 'Address :
\nCity/Town :
\nStreet :
\nCountry : Egypt
\nPostal Code :
\nHouse Number :
\nApartment Number :
\nFloor :
\nWay to Climb :
\nSpecial Marque :
', 'customer': None, 'customer_name': None, 'customer_contact_person': None, 'customer_contact_display': None, 'customer_contact_mobile': None, 'customer_contact_email': None, 'payment_terms_template': None, 'tc_name': 'Advanced Payment', 'terms': '

', 'status': 'Draft', 'per_billed': 0.0, 'per_received': 0.0, 'letter_head': 'ميرالاب', 'group_same_items': 0, 'select_print_heading': None, 'language': 'en-US', 'from_date': None, 'to_date': None, 'auto_repeat': None, 'is_internal_supplier': 0, 'represents_company': None, 'ref_sq': None, 'party_account_currency': 'USD', 'inter_company_order_reference': None, 'is_old_subcontracting_flow': 0, 'doctype': 'Purchase Order', 'taxes': [], 'supplied_items': [], 'pricing_rules': [], 'payment_schedule': [{'name': None, 'owner': None, 'creation': None, 'modified': None, 'modified_by': None, 'docstatus': 0, 'idx': 1, 'payment_term': None, 'description': None, 'due_date': '2024-08-27', 'mode_of_payment': None, 'invoice_portion': 100.0, 'discount_type': None, 'discount_date': None, 'discount': 0.0, 'payment_amount': 100.0, 'outstanding': 100.0, 'paid_amount': 0.0, 'discounted_amount': 0.0, 'base_payment_amount': 4849.09, 'parent': 'PUR-ORD-2024-00079', 'parentfield': 'payment_schedule', 'parenttype': 'Purchase Order', 'doctype': 'Payment Schedule', '__islocal': 1}], 'items': [{'name': 're7ulcc7vc', 'owner': 'logistics@mira-lab.com', 'creation': '2024-08-27 22:42:17.371014', 'modified': '2024-08-27 22:42:17.371014', 'modified_by': 'logistics@mira-lab.com', 'docstatus': 0, 'idx': 1, 'fg_item': None, 'fg_item_qty': 0.0, 'item_code': '1', 'supplier_part_no': None, 'item_name': 'BLOOD GAS ANALYZER', 'brand': None, 'product_bundle': None, 'schedule_date': '2024-08-30', 'expected_delivery_date': None, 'item_group': 'BLOOD GAS ANALYZER', 'description': 'BLOOD GAS ANALYZER', 'image': '', 'qty': 1.0, 'stock_uom': 'SET', 'uom': 'SET', 'conversion_factor': 1.0, 'stock_qty': 1.0, 'price_list_rate': 0.0, 'last_purchase_rate': 0.0, 'base_price_list_rate': 0.0, 'margin_type': '', 'margin_rate_or_amount': 0.0, 'rate_with_margin': 0.0, 'discount_percentage': 0.0, 'discount_amount': 0.0, 'base_rate_with_margin': 0.0, 'rate': 100.0, 'amount': 100.0, 'item_tax_template': None, 'base_rate': 4849.09, 'base_amount': 4849.09, 'pricing_rules': '', 'stock_uom_rate': 100.0, 'is_free_item': 0, 'apply_tds': 1, 'net_rate': 100.0, 'net_amount': 100.0, 'base_net_rate': 4849.09, 'base_net_amount': 4849.09, 'from_warehouse': None, 'warehouse': 'القاهرة - MC', 'actual_qty': 0.0, 'company_total_stock': 0.0, 'material_request': None, 'material_request_item': None, 'sales_order': None, 'sales_order_item': None, 'sales_order_packed_item': None, 'supplier_quotation': None, 'supplier_quotation_item': None, 'delivered_by_supplier': 0, 'against_blanket_order': 0, 'blanket_order': None, 'blanket_order_rate': 0.0, 'received_qty': 0.0, 'returned_qty': 0.0, 'billed_amt': 0.0, 'expense_account': '5131 - تكلفة البضاعة المباعة - MC', 'wip_composite_asset': None, 'manufacturer': None, 'manufacturer_part_no': None, 'bom': None, 'include_exploded_items': 0, 'weight_per_unit': 0.0, 'total_weight': 0.0, 'weight_uom': None, 'project': None, 'cost_center': 'رئيسي - MC', 'is_fixed_asset': 0, 'item_tax_rate': '{}', 'production_plan': None, 'production_plan_item': None, 'production_plan_sub_assembly_item': None, 'page_break': 0, 'parent': 'PUR-ORD-2024-00079', 'parentfield': 'items', 'parenttype': 'Purchase Order', 'doctype': 'Purchase Order Item', '__islocal': 1, '__unsaved': 1}], '__islocal': True, '__unsaved': 1}) will get truncated, as max characters allowed is 140
```
",YasserMounir,2024-08-27 19:44:58+00:00,[],2024-09-19 00:10:01+00:00,2024-09-04 05:13:01+00:00,https://github.com/frappe/erpnext/issues/42961,"[('bug', None)]","[{'comment_id': 2314849176, 'issue_id': 2490193214, 'author': 'toofun666', 'body': ""I don't think that is geniunely an error."", 'created_at': datetime.datetime(2024, 8, 28, 9, 47, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2327935976, 'issue_id': 2490193214, 'author': 'Nihantra-Patel', 'body': 'Reference: https://discuss.frappe.io/t/value-too-big-error-log-nbd1tbdenn-title/131861/2?u=ncp', 'created_at': datetime.datetime(2024, 9, 4, 5, 13, 1, tzinfo=datetime.timezone.utc)}]","toofun666 on (2024-08-28 09:47:19 UTC): I don't think that is geniunely an error.

Nihantra-Patel on (2024-09-04 05:13:01 UTC): Reference: https://discuss.frappe.io/t/value-too-big-error-log-nbd1tbdenn-title/131861/2?u=ncp

"
2490058141,issue,closed,completed,Message: Start year and end year are required,"### Information about bug

Please loads fiscal year
from calendar year 
`erpnext.utils.get_fiscal_year(frappe.datetime.get_today()),`
instead of 
`frappe.sys_defaults.fiscal_year`

### Module

selling

### Version

v14

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
File ""apps/erpnext/erpnext/accounts/report/financial_statements.py"", line 38, in get_period_list
    validate_fiscal_year(fiscal_year, from_fiscal_year, to_fiscal_year)
  File ""apps/erpnext/erpnext/accounts/report/financial_statements.py"", line 122, in validate_fiscal_year
    frappe.throw(_(""Start Year and End Year are mandatory""))
  File ""apps/frappe/frappe/__init__.py"", line 534, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 502, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 451, in _raise_exception
    raise raise_exception(msg)
frappe.exceptions.ValidationError:
```
",hqnicolas,2024-08-27 18:24:14+00:00,[],2024-09-14 00:09:44+00:00,2024-08-28 08:49:08+00:00,https://github.com/frappe/erpnext/issues/42958,"[('bug', None)]","[{'comment_id': 2313259958, 'issue_id': 2490058141, 'author': 'hqnicolas', 'body': 'fix: https://github.com/frappe/erpnext/pull/42960', 'created_at': datetime.datetime(2024, 8, 27, 18, 39, 46, tzinfo=datetime.timezone.utc)}]","hqnicolas (Issue Creator) on (2024-08-27 18:39:46 UTC): fix: https://github.com/frappe/erpnext/pull/42960

"
2488701957,issue,closed,completed,Duplicate items and outdated item price in the Point-of-Sale (POS) item list,"### Information about bug

**Short description:**
in the item-selector of the POS, the items are displayed twice if they have a second, newer item price.

![Bildschirmfoto_20240827_090544](https://github.com/user-attachments/assets/a150a896-9c30-47c9-9981-a005b0a72fa4)

**Long description:**
I recently updated erpnext from 13.7.0 to 15.33.4.
I am using Point-of-Sale and in the old version I had made manual changes to the JS files so that for example the item code is shown, and 150 items appear in the list instead of 40.

_These are my changes:_
https://github.com/frappe/erpnext/blob/4e6f49209f9182ad1cea243e8fc057b563b3a31b/erpnext/selling/page/point_of_sale/pos_item_selector.js#L54
```
//	get_items({start = 0, page_length = 40, search_term=''}) {
	get_items({start = 0, page_length = 150, search_term=''}) {
```
https://github.com/frappe/erpnext/blob/4e6f49209f9182ad1cea243e8fc057b563b3a31b/erpnext/selling/page/point_of_sale/pos_item_selector.js#L82
```
//		const indicator_color = actual_qty > 10 ? ""green"" : actual_qty <= 0 ? ""red"" : ""orange"";
		const indicator_color = actual_qty > 5 ? ""green"" : actual_qty <= 0 ? ""red"" : ""orange"";
```

https://github.com/frappe/erpnext/blob/4e6f49209f9182ad1cea243e8fc057b563b3a31b/erpnext/selling/page/point_of_sale/pos_item_selector.js#L123

```
						${frappe.ellipsis(item.item_name, 18)}<br>
						${frappe.ellipsis(item.item_code, 18)}
```
For the new updated version, I made a copy of the existing POS and changed the code of this copy.
I also wanted to ensure that the prices of the article variants are displayed.

In my case, the item-prices are linked to the template. Therefore, the variants do not have their own item_prices and are displayed with 0 in the item selector of POS, which is quite impractical. 

Unfortunately, I don't know anything about Python.
Nevertheless, I was able to display the price of the item-template:
https://github.com/frappe/erpnext/blob/eb7e063d5cad01cddfe0a442e4b4e73727aab152/erpnext/selling/page/point_of_sale/point_of_sale.py#L123-L177

_my changes for showing price of template:_
```
	items_data = frappe.db.sql(
		""""""
		SELECT
			item.name AS item_code,
			item.item_name,
			item.description,
			item.stock_uom,
			item.image AS item_image,
			item.is_stock_item,
+			item.variant_of AS variant_of
		FROM
			`tabItem` item {bin_join_selection}
		WHERE
			item.disabled = 0
			AND item.has_variants = 0
			AND item.is_sales_item = 1
			AND item.is_fixed_asset = 0
			AND item.item_group in (SELECT name FROM `tabItem Group` WHERE lft >= {lft} AND rgt <= {rgt})
			AND {condition}
			{bin_join_condition}
		ORDER BY
			item.name asc
		LIMIT
			{page_length} offset {start}"""""".format(
			start=cint(start),
			page_length=cint(page_length),
			lft=cint(lft),
			rgt=cint(rgt),
			condition=condition,
			bin_join_selection=bin_join_selection,
			bin_join_condition=bin_join_condition,
		),
		{""warehouse"": warehouse},
		as_dict=1,
	)

	# return (empty) list if there are no results
	if not items_data:
		return result

	for item in items_data:
		uoms = frappe.get_doc(""Item"", item.item_code).get(""uoms"", [])
+		variant_of = frappe.get_doc(""Item"", item.item_code).get(""variant_of"", [])

		item.actual_qty, _ = get_stock_availability(item.item_code, warehouse)
		item.uom = item.stock_uom
+		item.variant_of = variant_of

		item_price = frappe.get_all(
			""Item Price"",
			fields=[""price_list_rate"", ""currency"", ""uom"", ""batch_no"",""valid_from""],
			filters={
				""price_list"": price_list,
- 				""item_code"": item.item_code,
+				""item_code"": (""in"", (item.item_code, item.variant_of)),
				""selling"": True,
			},
		)
```
This is now finished, and I noticed that in the version-15 the items appear twice if they have outdated prices. This was not the case in the version-13. 

The items in the picture above do not have a template. They are independent items. This is the original POS and not my copy.

I took a look into the code:
version-15
https://github.com/frappe/erpnext/blob/eb7e063d5cad01cddfe0a442e4b4e73727aab152/erpnext/selling/page/point_of_sale/point_of_sale.py#L159-L196

version-13
https://github.com/frappe/erpnext/blob/4e6f49209f9182ad1cea243e8fc057b563b3a31b/erpnext/selling/page/point_of_sale/point_of_sale.py#L98-L123

As far as I understand, and I know nothing about Python, the problem is that in version-15 all prices are simply added as a new line. In version-13 one line was added for each item.
However, I don't see where the price selection takes place here.

For me, it's not practical if old prices are displayed in the item list. Customers then wonder why they should pay the new, higher price.

If I select the item with the low price, the new, higher, correct price is of course added to the shopping cart.

Sorry for my English, but I'm from Germany.

And sorry for my long post. I only thought it would help others too.

Perhaps someone can give me a hint how to change the code so that items only appears ones with the current price. That's beyond my knowledge of Python.

Maybe I could even write a pull request then.



### Module

selling

### Version

**Version:** 
erpnext 15.33.4
erpnext_datev 15.1.1
erpnext_germany 15.4.0
frappe 15.39.0
hrms 15.27.0
payments 0.0.1
webshop 0.0.1



### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",zahlenhexe,2024-08-27 08:54:45+00:00,[],2024-11-24 00:11:51+00:00,2024-11-08 07:12:21+00:00,https://github.com/frappe/erpnext/issues/42935,"[('bug', None)]",[],
2488685793,issue,closed,completed,make_payment_request does not set ignore_permissions=True by default anymore,"### Information about bug

If `create_pr_in_draft_status` is **_no_** which is the default, the `ignore_permissions` flag is not set on the PR, making it impossible for Guest to submit it.

https://github.com/frappe/erpnext/blob/ca2fde891ec32b162f6b6c33d9ff10b60e4ca57c/erpnext/accounts/doctype/payment_request/payment_request.py#L528-L531

### Module

selling, ecommerce

### Version

erpnext 15.33.5
frappe 15.39.0
hrms 15.27.0
insights 2.2.4
payments

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
      args = ()
      kwargs = {'dt': 'Sales Order', 'dn': 'XXX', 'mute_email': 1, 'payment_gateway_account': 'XXX', 'submit_doc': 1, 'return_doc': 1, 'recipient_id': 'XXX', 'party_type': 'Lead', 'party': 'XXX'}
      func = <function make_payment_request>
  File ""apps/erpnext/erpnext/accounts/doctype/payment_request/payment_request.py"", line 517, in make_payment_request
    pr.submit()
      pr = <PaymentRequest: unsaved docstatus=1>
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
      args = (<PaymentRequest: unsaved docstatus=1>,)
      kwargs = {}
      func = <function Document.submit>
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
      self = <PaymentRequest: unsaved docstatus=1>
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
      self = <PaymentRequest: unsaved docstatus=1>
      ignore_permissions = None
      ignore_version = None
  File ""apps/frappe/frappe/model/document.py"", line 282, in insert
    self.check_if_latest()
      self = <PaymentRequest: unsaved docstatus=1>
      ignore_permissions = None
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
  File ""apps/frappe/frappe/model/document.py"", line 811, in check_if_latest
    self.check_docstatus_transition(0)
      self = <PaymentRequest: unsaved docstatus=1>
      previous = None
  File ""apps/frappe/frappe/model/document.py"", line 843, in check_docstatus_transition
    self.check_permission(""submit"")
      self = <PaymentRequest: unsaved docstatus=1>
      to_docstatus = 0
  File ""apps/frappe/frappe/model/document.py"", line 220, in check_permission
    self.raise_no_permission_to(permtype)
      self = <PaymentRequest: unsaved docstatus=1>
      permtype = 'submit'
      permlevel = None
  File ""apps/frappe/frappe/model/document.py"", line 241, in raise_no_permission_to
    raise frappe.PermissionError
      self = <PaymentRequest: unsaved docstatus=1>
      perm_type = 'submit'
frappe.exceptions.PermissionError:
```
",cogk,2024-08-27 08:47:30+00:00,['ruthra-kumar'],2024-09-25 00:10:10+00:00,2024-09-10 09:17:26+00:00,https://github.com/frappe/erpnext/issues/42934,"[('bug', None)]","[{'comment_id': 2314311223, 'issue_id': 2488685793, 'author': 'phalouvas', 'body': 'I confirm. The same issue occurs when adding payment request from Webshop', 'created_at': datetime.datetime(2024, 8, 28, 4, 52, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314318920, 'issue_id': 2488685793, 'author': 'ruthra-kumar', 'body': '@cogk \r\nCould you provide replication steps?', 'created_at': datetime.datetime(2024, 8, 28, 5, 0, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314325123, 'issue_id': 2488685793, 'author': 'phalouvas', 'body': '> @cogk Could you provide replication steps?\r\n\r\n\r\nLogin as a customer. Using webshop add something in cart. Set up to use PayPal as payment engine. Press button ""Pay Now"" on the created Sales Order. You get below:\r\n\r\n![image](https://github.com/user-attachments/assets/3d0fb4f7-3387-4bbf-867a-38ff25c7b46b)\r\n\r\nAbove image is from test but same occurs on live site.', 'created_at': datetime.datetime(2024, 8, 28, 5, 6, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314504475, 'issue_id': 2488685793, 'author': 'cogk', 'body': 'Full test case: \r\n\r\n```python\r\nimport frappe\r\nfrom erpnext.accounts.doctype.payment_request.payment_request import make_payment_request\r\n\r\nfrappe.set_user(""Guest"")\r\n\r\nso_name = frappe.db.get_value(""Sales Order"", {})\r\nmake_payment_request(dt=""Sales Order"", dn=so_name, submit_doc=True)\r\n```\r\n\r\nraises PermissionError\r\n\r\n@ruthra-kumar', 'created_at': datetime.datetime(2024, 8, 28, 7, 16, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2317410075, 'issue_id': 2488685793, 'author': 'phalouvas', 'body': '@ruthra-kumar \r\nThe problem can be temporary solved by changing in Account Settings the Payment Request save in draft status.\r\n\r\n![image](https://github.com/user-attachments/assets/75b6a010-e1b2-4180-adcd-e94d572aed1b)\r\n\r\nThe root of the problem is on doctype payment_request.py that it tries to submit without first insert.\r\n`if frappe.db.get_single_value(""Accounts Settings"", ""create_pr_in_draft_status"", cache=True):\r\n\t\t\tpr.insert(ignore_permissions=True)\r\n\t\tif args.submit_doc:\r\n\t\t\tpr.submit()`', 'created_at': datetime.datetime(2024, 8, 29, 11, 42, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2317414600, 'issue_id': 2488685793, 'author': 'cogk', 'body': '> it tries to submit without first insert\r\n\r\nThe root problem is that the `doc.flags.ignore_permissions` is not set to True anymore in all paths, but it **must be** because the method is whitelisted and accesible for Guest', 'created_at': datetime.datetime(2024, 8, 29, 11, 45, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2340369449, 'issue_id': 2488685793, 'author': 'ruthra-kumar', 'body': '@cogk @phalouvas \r\nhttps://github.com/frappe/erpnext/pull/43146 should fix this.', 'created_at': datetime.datetime(2024, 9, 10, 11, 11, 41, tzinfo=datetime.timezone.utc)}]","phalouvas on (2024-08-28 04:52:36 UTC): I confirm. The same issue occurs when adding payment request from Webshop

ruthra-kumar (Assginee) on (2024-08-28 05:00:41 UTC): @cogk 
Could you provide replication steps?

phalouvas on (2024-08-28 05:06:34 UTC): Login as a customer. Using webshop add something in cart. Set up to use PayPal as payment engine. Press button ""Pay Now"" on the created Sales Order. You get below:

![image](https://github.com/user-attachments/assets/3d0fb4f7-3387-4bbf-867a-38ff25c7b46b)

Above image is from test but same occurs on live site.

cogk (Issue Creator) on (2024-08-28 07:16:28 UTC): Full test case: 

```python
import frappe
from erpnext.accounts.doctype.payment_request.payment_request import make_payment_request

frappe.set_user(""Guest"")

so_name = frappe.db.get_value(""Sales Order"", {})
make_payment_request(dt=""Sales Order"", dn=so_name, submit_doc=True)
```

raises PermissionError

@ruthra-kumar

phalouvas on (2024-08-29 11:42:55 UTC): @ruthra-kumar 
The problem can be temporary solved by changing in Account Settings the Payment Request save in draft status.

![image](https://github.com/user-attachments/assets/75b6a010-e1b2-4180-adcd-e94d572aed1b)

The root of the problem is on doctype payment_request.py that it tries to submit without first insert.
`if frappe.db.get_single_value(""Accounts Settings"", ""create_pr_in_draft_status"", cache=True):
			pr.insert(ignore_permissions=True)
		if args.submit_doc:
			pr.submit()`

cogk (Issue Creator) on (2024-08-29 11:45:02 UTC): The root problem is that the `doc.flags.ignore_permissions` is not set to True anymore in all paths, but it **must be** because the method is whitelisted and accesible for Guest

ruthra-kumar (Assginee) on (2024-09-10 11:11:41 UTC): @cogk @phalouvas 
https://github.com/frappe/erpnext/pull/43146 should fix this.

"
2488574592,issue,open,,in BOM Creator the BOM of the sub assembly is not fetched automatically. ,"### Information about bug

When we are creating a BOM in ERPNext, and we want to add a sub assembly BOM, we have to enter the sub assembly and then add the parts individually one by one. Instead if the SUB Assembly BOM is already created, the sub assembly BOM should auto populate. 

### Module

manufacturing

### Version

ERPNext Version : 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",ApeironMobility,2024-08-27 07:53:56+00:00,[],2024-08-29 09:29:45+00:00,,https://github.com/frappe/erpnext/issues/42932,"[('feature-request', None)]",[],
2487546037,issue,closed,completed,Custom fields in BOM Operation not mapped to Work Order Operation when creating Work Order from BOM,"### Information about bug

Custom field, ""custom_weight"", added to both BOM Operation and Work Order Operation doctypes. 

![image](https://github.com/user-attachments/assets/e737f6d7-2b59-4a45-9607-f05f32443089)

![image](https://github.com/user-attachments/assets/68894d20-36c3-48a7-809f-a34cf5e05f39)

 

### Module

manufacturing

### Version

ERPNext: v15.33.2
Frappe Framework: v15.38.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",northern-concrete,2024-08-26 18:56:05+00:00,[],2024-09-14 00:09:46+00:00,2024-08-27 08:33:19+00:00,https://github.com/frappe/erpnext/issues/42927,"[('bug', None)]","[{'comment_id': 2311897860, 'issue_id': 2487546037, 'author': 'Nihantra-Patel', 'body': ""Because the table is different, if the table name is the same in both doctypes then it will auto-fetch.\r\n\r\nYou have to map the custom field using the server/client side with custom logic. It's not a BUG!"", 'created_at': datetime.datetime(2024, 8, 27, 8, 33, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312292898, 'issue_id': 2487546037, 'author': 'northern-concrete', 'body': 'The table names in both DocTypes (BOM and Work Order) for the operations are the same (operations), so my confusion.  Documentation states exactly what you said, however, does not work that way.\r\n\r\nI will follow your advise.\r\n\r\nThanks for your help!\r\n\r\n![image](https://github.com/user-attachments/assets/d0ff1f03-4c19-419d-b043-0275303c81a3)\r\n\r\n![image](https://github.com/user-attachments/assets/0bce56ad-e997-461f-9c79-35102ef98740)', 'created_at': datetime.datetime(2024, 8, 27, 11, 23, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-27 08:33:19 UTC): Because the table is different, if the table name is the same in both doctypes then it will auto-fetch.

You have to map the custom field using the server/client side with custom logic. It's not a BUG!

northern-concrete (Issue Creator) on (2024-08-27 11:23:19 UTC): The table names in both DocTypes (BOM and Work Order) for the operations are the same (operations), so my confusion.  Documentation states exactly what you said, however, does not work that way.

I will follow your advise.

Thanks for your help!

![image](https://github.com/user-attachments/assets/d0ff1f03-4c19-419d-b043-0275303c81a3)

![image](https://github.com/user-attachments/assets/0bce56ad-e997-461f-9c79-35102ef98740)

"
2487183822,issue,closed,completed,Error Log snpsdek3th: 'Title',"### Information about bug

i have error prevent me from save from any doctype
Error Log snpsdek3th: 'Title'
will get truncated, as max characters allowed is 140

### Module

accounts, stock, buying, selling

### Version

cheques_management 0.0.1
custom_reports 0.0.1
erpnext 15.33.5
frappe 15.39.0
hrms 15.27.0
lending 0.0.1
maintenance_system 0.0.1
payments 0.0.1
qr_code_app 0.0.1
techstation_item_control 0.0.1
techstation_theme 0.0.1


### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

```shell
Value too big
Error Log snpsdek3th: 'Title' ({'name': 'SAL-ORD-2024-00035', 'owner': 'Administrator', 'creation': '2024-08-26 18:45:35.336009', 'modified': '2024-08-26 18:45:35.336009', 'modified_by': 'Administrator', 'docstatus': 0, 'idx': 0, 'title': '{customer_name}', 'naming_series': 'SAL-ORD-.YYYY.-', 'customer': '00040', 'customer_name': 'معمل ساريدار', 'tax_id': None, 'order_type': 'Sales', 'transaction_date': '2024-08-26', 'delivery_date': '2024-08-28', 'po_no': None, 'po_date': None, 'company': 'Miralab CAI', 'skip_delivery_note': 0, 'amended_from': None, 'cost_center': 'رئيسي - MC', 'project': None, 'currency': 'EGP', 'conversion_rate': 1.0, 'selling_price_list': 'Standard Selling', 'price_list_currency': 'EGP', 'plc_conversion_rate': 1.0, 'ignore_pricing_rule': 0, 'scan_barcode': None, 'set_warehouse': None, 'reserve_stock': 0, 'total_qty': 1.0, 'total_net_weight': 0.0, 'base_total': 200.0, 'base_net_total': 200.0, 'total': 200.0, 'net_total': 200.0, 'tax_category': '', 'taxes_and_charges': None, 'shipping_rule': None, 'incoterm': None, 'named_place': None, 'base_total_taxes_and_charges': 0.0, 'total_taxes_and_charges': 0.0, 'base_grand_total': 200.0, 'base_rounding_adjustment': 0.0, 'base_rounded_total': 0.0, 'base_in_words': 'EGP Two Hundred only.', 'grand_total': 200.0, 'rounding_adjustment': 0.0, 'rounded_total': 0.0, 'in_words': 'EGP Two Hundred only.', 'advance_paid': 0.0, 'disable_rounded_total': 1, 'apply_discount_on': 'Grand Total', 'base_discount_amount': 0.0, 'coupon_code': None, 'additional_discount_percentage': 0.0, 'discount_amount': 0.0, 'other_charges_calculation': None, 'customer_address': None, 'address_display': None, 'customer_group': 'معمل خاص', 'territory': 'القاهرة', 'contact_person': None, 'contact_display': None, 'contact_phone': None, 'contact_mobile': None, 'contact_email': None, 'shipping_address_name': None, 'shipping_address': None, 'dispatch_address_name': None, 'dispatch_address': None, 'company_address': 'Miralab Cai-الفواتير', 'company_address_display': 'Address :
\nCity/Town :
\nStreet :
\nCountry : Egypt
\nPostal Code :
\nHouse Number :
\nApartment Number :
\nFloor :
\nWay to Climb :
\nSpecial Marque :
', 'payment_terms_template': None, 'tc_name': 'مستحق فورى', 'terms': '

', 'status': 'Draft', 'delivery_status': 'Not Delivered', 'per_delivered': 0.0, 'per_billed': 0.0, 'per_picked': 0.0, 'billing_status': 'Not Billed', 'sales_partner': None, 'amount_eligible_for_commission': 200.0, 'commission_rate': 0.0, 'total_commission': 0.0, 'loyalty_points': 0, 'loyalty_amount': 0.0, 'from_date': None, 'to_date': None, 'auto_repeat': None, 'letter_head': 'ميرالاب', 'group_same_items': 0, 'select_print_heading': None, 'language': 'ar', 'is_internal_customer': 0, 'represents_company': None, 'source': None, 'inter_company_order_reference': None, 'campaign': None, 'party_account_currency': 'EGP', 'doctype': 'Sales Order', 'sales_team': [], 'pricing_rules': [], 'taxes': [], 'packed_items': [], 'payment_schedule': [{'name': None, 'owner': None, 'creation': None, 'modified': None, 'modified_by': None, 'docstatus': 0, 'idx': 1, 'payment_term': None, 'description': None, 'due_date': '2024-08-26', 'mode_of_payment': None, 'invoice_portion': 100.0, 'discount_type': None, 'discount_date': None, 'discount': 0.0, 'payment_amount': 200.0, 'outstanding': 200.0, 'paid_amount': 0.0, 'discounted_amount': 0.0, 'base_payment_amount': 200.0, 'parent': 'SAL-ORD-2024-00035', 'parentfield': 'payment_schedule', 'parenttype': 'Sales Order', 'doctype': 'Payment Schedule', '__islocal': 1}], 'items': [{'name': 'snpqqo6cot', 'owner': 'Administrator', 'creation': '2024-08-26 18:45:35.336009', 'modified': '2024-08-26 18:45:35.336009', 'modified_by': 'Administrator', 'docstatus': 0, 'idx': 1, 'item_code': '19', 'customer_item_code': None, 'ensure_delivery_based_on_produced_serial_no': 0, 'is_stock_item': 1, 'reserve_stock': 0, 'delivery_date': '2024-08-28', 'item_name': 'ALL IN ONE PC TOUCH', 'description': 'ALL IN ONE PC TOUCH', 'item_group': 'SPERMOLYZER COMPONENTS', 'brand': None, 'image': '', 'qty': 1.0, 'stock_uom': 'BOX', 'uom': 'BOX', 'conversion_factor': 1.0, 'stock_qty': 1.0, 'stock_reserved_qty': 0.0, 'price_list_rate': 0.0, 'base_price_list_rate': 0.0, 'margin_type': '', 'margin_rate_or_amount': 0.0, 'rate_with_margin': 0.0, 'discount_percentage': 0.0, 'discount_amount': 0.0, 'base_rate_with_margin': 0.0, 'rate': 200.0, 'amount': 200.0, 'item_tax_template': None, 'base_rate': 200.0, 'base_amount': 200.0, 'pricing_rules': '', 'stock_uom_rate': 200.0, 'is_free_item': 0, 'grant_commission': 1, 'net_rate': 200.0, 'net_amount': 200.0, 'base_net_rate': 200.0, 'base_net_amount': 200.0, 'billed_amt': 0.0, 'valuation_rate': 14392.9824, 'gross_profit': -14192.9824, 'delivered_by_supplier': 0, 'supplier': None, 'weight_per_unit': 0.0, 'total_weight': 0.0, 'weight_uom': None, 'warehouse': 'القاهرة - MC', 'target_warehouse': None, 'prevdoc_docname': None, 'quotation_item': None, 'against_blanket_order': 0, 'blanket_order': None, 'blanket_order_rate': 0.0, 'bom_no': None, 'projected_qty': 7.0, 'actual_qty': 7.0, 'ordered_qty': 0.0, 'planned_qty': 0.0, 'production_plan_qty': 0.0, 'work_order_qty': 0.0, 'delivered_qty': 0.0, 'produced_qty': 0.0, 'returned_qty': 0.0, 'picked_qty': 0.0, 'additional_notes': None, 'page_break': 0, 'item_tax_rate': '{}', 'transaction_date': '2024-08-26', 'warranty_status': 'Enabled', 'warranty_template': 'Warranty 12 Months', 'material_request': None, 'purchase_order': None, 'material_request_item': None, 'purchase_order_item': None, 'parent': 'SAL-ORD-2024-00035', 'parentfield': 'items', 'parenttype': 'Sales Order', 'doctype': 'Sales Order Item', '__islocal': 1, '__unsaved': 1}], '__islocal': True, '__unsaved': 1}) will get truncated, as max characters allowed is 140
```
",YasserMounir,2024-08-26 15:50:53+00:00,[],2024-09-14 00:09:45+00:00,2024-08-27 08:39:11+00:00,https://github.com/frappe/erpnext/issues/42924,"[('bug', None)]","[{'comment_id': 2311911584, 'issue_id': 2487183822, 'author': 'Nihantra-Patel', 'body': 'We tested it locally and also on the frappe cloud side, and everything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\nPlease check the reference in the Frappe Forum:\r\n\r\nhttps://discuss.frappe.io/t/value-too-big-error-in-tag-in-todo/54328/2?u=ncp\r\n\r\nhttps://discuss.frappe.io/t/error-value-too-big-maximum-character-allowed-is-140/66766/2?u=ncp', 'created_at': datetime.datetime(2024, 8, 27, 8, 39, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312350491, 'issue_id': 2487183822, 'author': 'YasserMounir', 'body': 'so can you indicate why this error arise when saving \r\ni have checked there are no scrips working on the site', 'created_at': datetime.datetime(2024, 8, 27, 11, 50, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312353887, 'issue_id': 2487183822, 'author': 'Nihantra-Patel', 'body': 'Please check the reference, that i provided. if field level issue.', 'created_at': datetime.datetime(2024, 8, 27, 11, 52, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312574396, 'issue_id': 2487183822, 'author': 'YasserMounir', 'body': 'the field Title is the problem and the length on the From is 0\r\ni tried to change the length to 255 but with same error and i can change the Standard Filed from Data Type to another Type like long text', 'created_at': datetime.datetime(2024, 8, 27, 13, 31, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312581201, 'issue_id': 2487183822, 'author': 'YasserMounir', 'body': 'Sorry i can not change the standard Field from Data type to Long or small text', 'created_at': datetime.datetime(2024, 8, 27, 13, 34, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312585867, 'issue_id': 2487183822, 'author': 'Nihantra-Patel', 'body': '> snpsdek3th\r\n\r\nSuch an error has not happened till today. But the issue of field length may occur. and also remove the unnecessary custom app and migrate the site. which doctype you faced this issue?', 'created_at': datetime.datetime(2024, 8, 27, 13, 35, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312720412, 'issue_id': 2487183822, 'author': 'YasserMounir', 'body': 'i have removed all custom app and made Bench update and bench migrate \r\nbut same error so can you suggest how to solve such error', 'created_at': datetime.datetime(2024, 8, 27, 14, 24, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312766724, 'issue_id': 2487183822, 'author': 'YasserMounir', 'body': 'i am facing of Doctyps ( Sales Order, Sales Invoice , , Delivery Order , Purchase Order & Purchase Invoice )', 'created_at': datetime.datetime(2024, 8, 27, 14, 43, 23, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-27 08:39:11 UTC): We tested it locally and also on the frappe cloud side, and everything is working fine. No problems were encountered in the latest versions 14 and 15.

Please check the reference in the Frappe Forum:

https://discuss.frappe.io/t/value-too-big-error-in-tag-in-todo/54328/2?u=ncp

https://discuss.frappe.io/t/error-value-too-big-maximum-character-allowed-is-140/66766/2?u=ncp

YasserMounir (Issue Creator) on (2024-08-27 11:50:55 UTC): so can you indicate why this error arise when saving 
i have checked there are no scrips working on the site

Nihantra-Patel on (2024-08-27 11:52:33 UTC): Please check the reference, that i provided. if field level issue.

YasserMounir (Issue Creator) on (2024-08-27 13:31:46 UTC): the field Title is the problem and the length on the From is 0
i tried to change the length to 255 but with same error and i can change the Standard Filed from Data Type to another Type like long text

YasserMounir (Issue Creator) on (2024-08-27 13:34:09 UTC): Sorry i can not change the standard Field from Data type to Long or small text

Nihantra-Patel on (2024-08-27 13:35:57 UTC): Such an error has not happened till today. But the issue of field length may occur. and also remove the unnecessary custom app and migrate the site. which doctype you faced this issue?

YasserMounir (Issue Creator) on (2024-08-27 14:24:15 UTC): i have removed all custom app and made Bench update and bench migrate 
but same error so can you suggest how to solve such error

YasserMounir (Issue Creator) on (2024-08-27 14:43:23 UTC): i am facing of Doctyps ( Sales Order, Sales Invoice , , Delivery Order , Purchase Order & Purchase Invoice )

"
2485302775,issue,open,,Incorrect Payment Entry grand total outstanding calculation for Journal Entry references.,"### Information about bug

Payment Entry's grand total calculation for outstanding payment when using Journal entry as reference.

Consider the following where we create a Journal entry where the accounting entries are booked for:
- Advance Payable Asset Account booked under the name of a Employee for him to return later.
- Payable Account different from the previous one booked on the same Employee signifying the money he should receive from the company
- some Expenses that was paid by the same Employee.

Example can be seen below:
![image](https://github.com/user-attachments/assets/15910575-79b9-481c-aa27-b9c70f241950)

When being processed for Payment Entry the grand total for the outstanding should be the whole amount booked to the Payable Account. But the payment entry calculated on the grand total outstanding on the journal entry isn't, and instead only the Payable Account less the amount on the Payable Asset Account that is being calculated as the grand total just because they are booked on the same Party despite being booked on different account. seen below:

![image](https://github.com/user-attachments/assets/06997b40-68a1-45fb-8275-e5f0e1a49fd6)

### Module

accounts

### Version

Frappe Framework: v15.39.0
ERPNext: v15.33.5

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 94, in validate
    self.validate_allocated_amount()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 234, in validate_allocated_amount
    frappe.throw(fail_message.format(d.idx))
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Row #1: Allocated Amount cannot be greater than outstanding amount.
```
",quebn,2024-08-25 14:38:19+00:00,[],2024-08-25 14:39:43+00:00,,https://github.com/frappe/erpnext/issues/42900,"[('bug', None)]",[],
2484321706,issue,closed,completed,Timesheet excced data error ,"### Information about bug

![image](https://github.com/user-attachments/assets/20a44f69-f1e6-40e1-8caa-9400133bd231)


### Module

projects

### Version

V15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",Vivdeveloper,2024-08-24 07:32:08+00:00,[],2024-09-19 00:10:02+00:00,2024-09-04 05:09:19+00:00,https://github.com/frappe/erpnext/issues/42896,"[('bug', None)]","[{'comment_id': 2327932647, 'issue_id': 2484321706, 'author': 'Nihantra-Patel', 'body': 'Same error and same issue: https://github.com/frappe/erpnext/issues/42889\r\n\r\nYou can track it there.', 'created_at': datetime.datetime(2024, 9, 4, 5, 9, 19, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-09-04 05:09:19 UTC): Same error and same issue: https://github.com/frappe/erpnext/issues/42889

You can track it there.

"
2483964198,issue,open,,Naming in BOM is counterintuitive,"Hi.  In the BOM list now the default setting is to have BOM-ItemNumber-Number as I understand it. The list view also shows the item number or code the item has. It would be better if the BOM name displayed the actual name of the item. Clients see a list of BOM-Number/Code-Number and they don't know which to choose for the item that they want to produce. It requires expertise and memory for them to later know which to pick when it would be simpler if the BOM actually stated the name of the product it is making. 

Also, in the list view, when wanting to change the list List Settings and choosing the item name, the name doesn't display. This could be a bug. 

Cheers and thanks for the work. ",MartinFulgueiras,2024-08-23 22:06:45+00:00,[],2024-08-23 22:06:45+00:00,,https://github.com/frappe/erpnext/issues/42895,"[('feature-request', None)]",[],
2483301202,issue,closed,completed,New setup permissions issues,"### Information about bug

Issue: new erpnext instance has permissions issues for all accounts, for example using the administrator account, trying to  change the permissions for the default user, I am given an error that says ""You do not have enough permissions to access this resource. Please contact your manager to get access."" This only happens when a specific number of checkboxes are selected however, for example if I select any combination of roles that has less than 10 roles, I can save and I do not get the permissions error. I have tried creating new instances, adding no apps on the site, I have quadruple checked that I am following the setup guide, and I have setup an instance before with no issue before this, but no matter what I have tried I still get this issue. I have tried running this on an Ubuntu and Debian machine on their latest updates, and have tried older versions of erpnext. 

### Module

accounts

### Version

Bench- 5.22.8
erpnext 15.33.5
frappe 15.39.0
hrms 16.0.0-dev
payments 0.0.1
NOTE:I have tried other versions, this is just on the most recent test I have tried. 

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
I cant find anything helpful in the logs, but theonly error is in the actual site itself, which is: You do not have enough permissions to access this resource. Please contact your manager to get access.
```
",BLenich-threadb,2024-08-23 14:42:00+00:00,[],2024-09-14 00:09:42+00:00,2024-08-27 09:34:50+00:00,https://github.com/frappe/erpnext/issues/42893,"[('bug', None)]","[{'comment_id': 2312031538, 'issue_id': 2483301202, 'author': 'Nihantra-Patel', 'body': 'That for, you have to learn the [Role Permission Manager](https://docs.erpnext.com/docs/user/manual/en/role-based-permissions) and also [User Permission](https://docs.erpnext.com/docs/user/manual/en/users-and-permissions).\r\n\r\nReference:\r\n- https://www.youtube.com/watch?v=l1yok3OWYNw\r\n- https://www.youtube.com/watch?v=g3mk45o1zAg\r\n- https://www.youtube.com/watch?v=aL5kmVFCCOc\r\n- https://www.youtube.com/watch?v=qFJGflj4W6U', 'created_at': datetime.datetime(2024, 8, 27, 9, 34, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312428195, 'issue_id': 2483301202, 'author': 'BLenich-threadb', 'body': '@Nihantra-Patel None of this really answers my problem, I physically can not give role profiles or users access to more than a specific number of roles or modules, and we randomly get permission denied errors when working on pages we specifically have access too, at times that feel essentially random, the role permissions section is just the most easily repeatable part of this.\r\n\r\nFor example I do not think this is an intended interaction, lets say I have a new user profile for someone working in our lab, and us being a small company they need access to multiple parts of the erp system, so they have this role setup.\r\n\r\n![image](https://github.com/user-attachments/assets/7ec3366c-68ee-4348-ad90-787185e7a86f)\r\n\r\nI just threw in some roles that seem applicable for now, but lets say they want to do some writing for our website, and they also are bilingual and can translate their articles into multiple languages, so I give them the blogger and translator role\r\n\r\n![image](https://github.com/user-attachments/assets/50a13934-bb8a-47a5-aac9-9e54a5c97e20)\r\n\r\nThis gives a permission error, despite my account being the admin account I made during setup. An important note is any 2 roles would have broken this, but this is just an easy example. Unless there is a reason for it to block permission under this specific circumstance that I am missing from the links you provided.', 'created_at': datetime.datetime(2024, 8, 27, 12, 27, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312514522, 'issue_id': 2483301202, 'author': 'Nihantra-Patel', 'body': ""you have to check the doctype-related condition, if the user has no access to that doctype then they can't be accessed."", 'created_at': datetime.datetime(2024, 8, 27, 13, 7, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312570333, 'issue_id': 2483301202, 'author': 'BLenich-threadb', 'body': ""> you have to check the doctype-related condition, if the user has no access to that doctype then they can't be accessed.\r\n\r\nBut its not tied to specific doctypes, thats the confusion to me,  for example this role setup works\r\n\r\n![image](https://github.com/user-attachments/assets/282dbd2b-71f6-43d4-ba04-42b01e5ed791)\r\n\r\nThis doesnt:\r\n\r\n![image](https://github.com/user-attachments/assets/61cbc729-d73e-4f69-8f19-27f54a855a03)\r\n\r\nBUT if I remove a previously allowed doctype, than suddenly I can confirm him as an academics user:\r\n\r\n![image](https://github.com/user-attachments/assets/e6893137-7355-4631-8c4c-f051118bb9e9)\r\n\r\n This problem why would removing an unrelated doctype allow me to confirm permissions for academics user? When it wouldnt let me confirm it before. The permissions error is tied to a specific number of roles being allocated, not actual doctype conditions, we have no restrictions on roles yet and no doctype restrictions.\r\n\r\nI would like to note this is a fresh install, we backed up and removed our old one to test this issue, so there should be no specific conditions blocking us from doing this"", 'created_at': datetime.datetime(2024, 8, 27, 13, 30, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312604107, 'issue_id': 2483301202, 'author': 'Nihantra-Patel', 'body': ""Without understanding the concept you will know otherwise just read the documentation or watch the video calmly that i provided.\r\n\r\nCheck each user's role and assign the related doctype permissions. Grant access if needed and disable any client scripts.\r\n\r\nhttps://github.com/user-attachments/assets/4d557219-3a2b-478f-8c48-42e4d5543008"", 'created_at': datetime.datetime(2024, 8, 27, 13, 43, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312700974, 'issue_id': 2483301202, 'author': 'BLenich-threadb', 'body': 'I understand how the role permissions manager sets access to specific doctypes for specific roles, The problem I am dealing with is specifically the inconsistency in the roles and permissions tab, for example why does admin start with all roles, as it should be, but can not be given all roles again, why can I select and combination of roles that are bellow a specific amount? Is this just an issue with the frappe itself? I realize I can just give a role that has access to all doc types needed to admin, but why can I still select only a specific number of roles? Here I just recorded creating a new role profile for manager, gave it access to all manager roles, only to get an error when I try changing any of the roles, which shows up inconsistently with what roles are chosen. I understand I can work around this but the actual function of not being able to select all needed roles bothers me,\r\n\r\nhttps://github.com/user-attachments/assets/24e0dc95-887f-4bc3-b9bc-bed04924518d\r\n\r\nIf I just have to work around this issue I can with the info you provided, but I am just afraid inconsistencies like this can cause larger issues down the line', 'created_at': datetime.datetime(2024, 8, 27, 14, 16, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312868929, 'issue_id': 2483301202, 'author': 'BLenich-threadb', 'body': ""@Nihantra-Patel  Here is another example of why this is not the issue you are claiming it is, why can password be set up until it hits the cap of allowed roles? This is an issue that isnt just permissions, the error message I'm being given feels misleading and the issue is something more than just set permissions.\r\n\r\nhttps://github.com/user-attachments/assets/0e9b34f5-81e9-4829-950f-89a3dc94416f\r\n\r\n\r\nAlso when I checked the actual post on the console its not giving the not permitted error, instead im getting this: \r\n![image](https://github.com/user-attachments/assets/4e2844eb-fb4e-47af-989b-42927b1adb00)\r\nSo I don't think its just the permissions issue"", 'created_at': datetime.datetime(2024, 8, 27, 15, 23, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2315487048, 'issue_id': 2483301202, 'author': 'BLenich-threadb', 'body': '@Nihantra-Patel We fixed it, the request was being blocked by amazons firewall settings, the actual issue here is poor error messages in response to what was actually happening, I would recommend posting a new issue request for adding more possible error outputs because this was very hard to find.', 'created_at': datetime.datetime(2024, 8, 28, 14, 24, 57, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-27 09:34:50 UTC): That for, you have to learn the [Role Permission Manager](https://docs.erpnext.com/docs/user/manual/en/role-based-permissions) and also [User Permission](https://docs.erpnext.com/docs/user/manual/en/users-and-permissions).

Reference:
- https://www.youtube.com/watch?v=l1yok3OWYNw
- https://www.youtube.com/watch?v=g3mk45o1zAg
- https://www.youtube.com/watch?v=aL5kmVFCCOc
- https://www.youtube.com/watch?v=qFJGflj4W6U

BLenich-threadb (Issue Creator) on (2024-08-27 12:27:58 UTC): @Nihantra-Patel None of this really answers my problem, I physically can not give role profiles or users access to more than a specific number of roles or modules, and we randomly get permission denied errors when working on pages we specifically have access too, at times that feel essentially random, the role permissions section is just the most easily repeatable part of this.

For example I do not think this is an intended interaction, lets say I have a new user profile for someone working in our lab, and us being a small company they need access to multiple parts of the erp system, so they have this role setup.

![image](https://github.com/user-attachments/assets/7ec3366c-68ee-4348-ad90-787185e7a86f)

I just threw in some roles that seem applicable for now, but lets say they want to do some writing for our website, and they also are bilingual and can translate their articles into multiple languages, so I give them the blogger and translator role

![image](https://github.com/user-attachments/assets/50a13934-bb8a-47a5-aac9-9e54a5c97e20)

This gives a permission error, despite my account being the admin account I made during setup. An important note is any 2 roles would have broken this, but this is just an easy example. Unless there is a reason for it to block permission under this specific circumstance that I am missing from the links you provided.

Nihantra-Patel on (2024-08-27 13:07:13 UTC): you have to check the doctype-related condition, if the user has no access to that doctype then they can't be accessed.

BLenich-threadb (Issue Creator) on (2024-08-27 13:30:07 UTC): But its not tied to specific doctypes, thats the confusion to me,  for example this role setup works

![image](https://github.com/user-attachments/assets/282dbd2b-71f6-43d4-ba04-42b01e5ed791)

This doesnt:

![image](https://github.com/user-attachments/assets/61cbc729-d73e-4f69-8f19-27f54a855a03)

BUT if I remove a previously allowed doctype, than suddenly I can confirm him as an academics user:

![image](https://github.com/user-attachments/assets/e6893137-7355-4631-8c4c-f051118bb9e9)

 This problem why would removing an unrelated doctype allow me to confirm permissions for academics user? When it wouldnt let me confirm it before. The permissions error is tied to a specific number of roles being allocated, not actual doctype conditions, we have no restrictions on roles yet and no doctype restrictions.

I would like to note this is a fresh install, we backed up and removed our old one to test this issue, so there should be no specific conditions blocking us from doing this

Nihantra-Patel on (2024-08-27 13:43:19 UTC): Without understanding the concept you will know otherwise just read the documentation or watch the video calmly that i provided.

Check each user's role and assign the related doctype permissions. Grant access if needed and disable any client scripts.

https://github.com/user-attachments/assets/4d557219-3a2b-478f-8c48-42e4d5543008

BLenich-threadb (Issue Creator) on (2024-08-27 14:16:17 UTC): I understand how the role permissions manager sets access to specific doctypes for specific roles, The problem I am dealing with is specifically the inconsistency in the roles and permissions tab, for example why does admin start with all roles, as it should be, but can not be given all roles again, why can I select and combination of roles that are bellow a specific amount? Is this just an issue with the frappe itself? I realize I can just give a role that has access to all doc types needed to admin, but why can I still select only a specific number of roles? Here I just recorded creating a new role profile for manager, gave it access to all manager roles, only to get an error when I try changing any of the roles, which shows up inconsistently with what roles are chosen. I understand I can work around this but the actual function of not being able to select all needed roles bothers me,

https://github.com/user-attachments/assets/24e0dc95-887f-4bc3-b9bc-bed04924518d

If I just have to work around this issue I can with the info you provided, but I am just afraid inconsistencies like this can cause larger issues down the line

BLenich-threadb (Issue Creator) on (2024-08-27 15:23:43 UTC): @Nihantra-Patel  Here is another example of why this is not the issue you are claiming it is, why can password be set up until it hits the cap of allowed roles? This is an issue that isnt just permissions, the error message I'm being given feels misleading and the issue is something more than just set permissions.

https://github.com/user-attachments/assets/0e9b34f5-81e9-4829-950f-89a3dc94416f


Also when I checked the actual post on the console its not giving the not permitted error, instead im getting this: 
![image](https://github.com/user-attachments/assets/4e2844eb-fb4e-47af-989b-42927b1adb00)
So I don't think its just the permissions issue

BLenich-threadb (Issue Creator) on (2024-08-28 14:24:57 UTC): @Nihantra-Patel We fixed it, the request was being blocked by amazons firewall settings, the actual issue here is poor error messages in response to what was actually happening, I would recommend posting a new issue request for adding more possible error outputs because this was very hard to find.

"
2482506774,issue,open,,Request to add Multi Bom Stock Report ,"We want to add multi Bom stock report in BOM stock report 
For example:- If i choose Item one in BOM stock report, quantity to produce 100 and second item, quantity to produce 50, i need total quantity of items needed to produce above requirement.
![Screenshot 2024-08-23 at 12 55 57 PM (2)](https://github.com/user-attachments/assets/82531d4a-6b4a-4e44-8b54-4870cefe9ee8)
 ",alwinmartis,2024-08-23 07:30:26+00:00,[],2024-09-12 09:55:08+00:00,,https://github.com/frappe/erpnext/issues/42888,"[('feature-request', None)]","[{'comment_id': 2311519959, 'issue_id': 2482506774, 'author': 'alwinmartis', 'body': ""In real world scenario companies are working on multi project or multi product. In ERP we need to get data for available, reserved and required quantity of materials for multiple production item. So i'm requesting make it available to choose multiple finished goods in stock report."", 'created_at': datetime.datetime(2024, 8, 27, 3, 56, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2345802737, 'issue_id': 2482506774, 'author': 'alwinmartis', 'body': 'is there any update on above feature request', 'created_at': datetime.datetime(2024, 9, 12, 9, 55, 7, tzinfo=datetime.timezone.utc)}]","alwinmartis (Issue Creator) on (2024-08-27 03:56:18 UTC): In real world scenario companies are working on multi project or multi product. In ERP we need to get data for available, reserved and required quantity of materials for multiple production item. So i'm requesting make it available to choose multiple finished goods in stock report.

alwinmartis (Issue Creator) on (2024-09-12 09:55:07 UTC): is there any update on above feature request

"
2482435865,issue,open,,Request for Rounding Off Feature in Payment Reconciliation,"### Information about bug

**Title:**
Rounding Off Feature Missing in Payment Reconciliation

**Description:**
The current version of ERPNext lacks an automated rounding off feature in the Payment Reconciliation process. This feature is essential for ensuring that payments and receipts align correctly with the financial records, particularly when dealing with transactions involving small discrepancies due to rounding.

**Steps to Reproduce:**
Navigate to the Payment Reconciliation module in ERPNext.
Select a transaction for reconciliation.
Notice that there is no option to automatically round off the amounts to the nearest whole number or specified decimal place.
Attempt to reconcile payments where small discrepancies occur due to rounding issues.
**Expected Behavior:**
There should be an option to enable rounding off for payment reconciliations. This feature should:

Allow users to specify rounding rules (e.g., round to nearest whole number, 0.01, etc.).
Automatically apply rounding adjustments to reconcile differences between payment records and actual amounts.
**Actual Behavior:**
Currently, the Payment Reconciliation module does not support rounding off, which can lead to discrepancies and manual adjustments. Users must manually handle rounding issues, leading to potential inaccuracies and additional administrative work.
![Supplier Payment Recon error](https://github.com/user-attachments/assets/b5c8c3f5-eae1-4182-8fcf-81db33085274)
![Customer Payment Recon error](https://github.com/user-attachments/assets/1a632e3c-b8bf-4a72-9db3-04d812f67e7d)

**Impact:**
Increased manual effort required to handle rounding discrepancies.
Potential for inaccuracies in financial records due to unaddressed rounding issues.
Higher risk of errors in financial reporting and reconciliation processes.
**Request:**
Please consider adding a rounding off feature in the Payment Reconciliation module to streamline the process and enhance accuracy. Ideally, the feature should include options to:

- Define rounding rules.

- Automatically apply these rules during reconciliation.

- Provide visibility into rounding adjustments made during the process.

### Module

accounts

### Version

ERPNext: v15.30.0 (version-15)

Frappe Framework: v15.35.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",parasonit,2024-08-23 06:45:59+00:00,[],2024-10-24 10:28:08+00:00,,https://github.com/frappe/erpnext/issues/42886,"[('bug', None)]","[{'comment_id': 2358566969, 'issue_id': 2482435865, 'author': 'vv-varun', 'body': '+1 for this.\nMuch needed feature', 'created_at': datetime.datetime(2024, 9, 18, 14, 5, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2434896614, 'issue_id': 2482435865, 'author': 'parasonit', 'body': '@ruthra-kumar : Please look in to this issue.', 'created_at': datetime.datetime(2024, 10, 24, 10, 28, 6, tzinfo=datetime.timezone.utc)}]","vv-varun on (2024-09-18 14:05:02 UTC): +1 for this.
Much needed feature

parasonit (Issue Creator) on (2024-10-24 10:28:06 UTC): @ruthra-kumar : Please look in to this issue.

"
2482374929,issue,open,,Request to add new field for stock Value in Item Master,"We Want to add current stock value for all items in item master, so we can get current stock value in stock ageing report.
![Screenshot 2024-08-22 at 3 57 41 PM](https://github.com/user-attachments/assets/e15f3488-7e7c-4660-b231-41fd7ced076b)
",alwinmartis,2024-08-23 06:00:08+00:00,[],2024-09-12 09:55:49+00:00,,https://github.com/frappe/erpnext/issues/42885,"[('feature-request', None)]","[{'comment_id': 2345804149, 'issue_id': 2482374929, 'author': 'alwinmartis', 'body': 'Is there any updates on above feature request', 'created_at': datetime.datetime(2024, 9, 12, 9, 55, 47, tzinfo=datetime.timezone.utc)}]","alwinmartis (Issue Creator) on (2024-09-12 09:55:47 UTC): Is there any updates on above feature request

"
2482203770,issue,closed,completed,Cannot Add Row on Timesheet Table,"### Information about bug

When add row on Timesheet table... Nothing happens.
My Co-worker told me before we upgrade into Frappe Framework: v15.39.0  it's all working

### Module

projects

### Version

Installed Apps
ERPNext: v15.33.4 (version-15)

Frappe Framework: v15.39.0 (version-15)

Frappe HR: v16.0.0-dev (develop)

Print Designer: v1.4.1 (main)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

```shell
NA
```
",bobotdls,2024-08-23 04:10:26+00:00,[],2024-09-09 00:10:17+00:00,2024-08-23 09:09:58+00:00,https://github.com/frappe/erpnext/issues/42884,"[('bug', None)]","[{'comment_id': 2306289272, 'issue_id': 2482203770, 'author': 'Nihantra-Patel', 'body': ""We tested in the latest version but we haven't found the issue.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/d16bbf36-ae38-4a7d-a79b-da76ac599946\r\n\r\nAny Error log then share it."", 'created_at': datetime.datetime(2024, 8, 23, 4, 52, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306429804, 'issue_id': 2482203770, 'author': 'bobotdls', 'body': 'https://github.com/user-attachments/assets/b23bf3c4-01e2-4130-9c9a-65f074686284\r\n\r\nI upload a video on my instance on Timesheet doctype. I cannot Add Row on Time sheet table', 'created_at': datetime.datetime(2024, 8, 23, 7, 3, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306433416, 'issue_id': 2482203770, 'author': 'Nihantra-Patel', 'body': ""I've shared a suggestion:\r\nIf you've installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.\r\n\r\nIf the hrms is in the development branch, switch to it:\r\n\r\n```bash\r\nbench switch-to-branch version-15 hrms\r\n```\r\n\r\nIf you've uninstalled or installed the app, do this:\r\n\r\n```bash\r\nbench get-app --branch version-15 hrms\r\n```\r\n\r\nThis is because the hrms app has a version 15 branch.\r\n\r\nI hope this is clear and helpful.\r\n\r\n\r\nAnd also share the console error."", 'created_at': datetime.datetime(2024, 8, 23, 7, 6, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306444632, 'issue_id': 2482203770, 'author': 'lbrandh', 'body': 'Same(?) problem here. Docker version of erpnext and frappe. No HRMS used. The error started to occurr after the update of either frappe or erpnext two days ago.\r\n\r\nOn adding a new row into the timesheet details the JS log shows the following errors:\r\n\r\nError evaluating the following expression: [utils.js:1085:11](https://xxxxxxx/apps/frappe/frappe/public/js/frappe/utils/utils.js)\r\nlet out =  parent.parent_project; return out [utils.js:1086:11](https://xxxxxxx/apps/frappe/frappe/public/js/frappe/utils/utils.js)\r\nUncaught InternalError: too much recursion\r\n    show dialog.js:239\r\n    msgprint messages.js:298\r\n    throw messages.js:25\r\n    evaluate_depends_on_value layout.js:785\r\n    set_dependant_property layout.js:731\r\n    refresh_dependency layout.js:719\r\n    refresh_field grid_row_form.js:127\r\n    refresh_field grid_row.js:1432\r\n    refresh_field grid_row.js:1444\r\n    refresh_field grid_row.js:1436\r\n    refresh_field grid_row.js:1444\r\n    refresh_field grid_row.js:1436\r\n....', 'created_at': datetime.datetime(2024, 8, 23, 7, 12, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306451498, 'issue_id': 2482203770, 'author': 'bobotdls', 'body': 'Thanks Ibrandh for supporting my issue, actually I really dont know where/how post the log.. Thanks again', 'created_at': datetime.datetime(2024, 8, 23, 7, 17, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306469225, 'issue_id': 2482203770, 'author': 'bobotdls', 'body': 'I just update my hrms version into this\r\nFrappe HR: v15.27.0 (version-15)\r\nbut the issue on not adding a row on Time Sheet table is still persist.\r\n\r\nBelow is my existing Version of all apps\r\n\r\nERPNext: v15.33.5 (version-15)\r\nFrappe Framework: v15.39.0 (version-15)\r\nFrappe HR: v15.27.0 (version-15)\r\nPrint Designer: v1.4.1 (main)', 'created_at': datetime.datetime(2024, 8, 23, 7, 29, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306594837, 'issue_id': 2482203770, 'author': 'Nihantra-Patel', 'body': 'I\'ve found the issue. The actual problem lies in the ""read only depends on"" condition. If the project is selected at the parent level, and the project field is also in the list view, you\'ll encounter this issue when adding a row. However, if you remove the project field from the list view, you can add rows without any problems. Otherwise, you\'ll need to remove the ""read only depends on"" condition to resolve the issue.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/1b083b4b-a469-4a37-885a-5560de8c76c5', 'created_at': datetime.datetime(2024, 8, 23, 8, 39, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306649998, 'issue_id': 2482203770, 'author': 'bobotdls', 'body': ""Thanks @Nihantra-Patel , Now it's working"", 'created_at': datetime.datetime(2024, 8, 23, 9, 9, 38, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-23 04:52:36 UTC): We tested in the latest version but we haven't found the issue.


https://github.com/user-attachments/assets/d16bbf36-ae38-4a7d-a79b-da76ac599946

Any Error log then share it.

bobotdls (Issue Creator) on (2024-08-23 07:03:56 UTC): https://github.com/user-attachments/assets/b23bf3c4-01e2-4130-9c9a-65f074686284

I upload a video on my instance on Timesheet doctype. I cannot Add Row on Time sheet table

Nihantra-Patel on (2024-08-23 07:06:23 UTC): I've shared a suggestion:
If you've installed ERPNext in version 15, make sure the hrms is also in version 15 to prevent errors.

If the hrms is in the development branch, switch to it:

```bash
bench switch-to-branch version-15 hrms
```

If you've uninstalled or installed the app, do this:

```bash
bench get-app --branch version-15 hrms
```

This is because the hrms app has a version 15 branch.

I hope this is clear and helpful.


And also share the console error.

lbrandh on (2024-08-23 07:12:53 UTC): Same(?) problem here. Docker version of erpnext and frappe. No HRMS used. The error started to occurr after the update of either frappe or erpnext two days ago.

On adding a new row into the timesheet details the JS log shows the following errors:

Error evaluating the following expression: [utils.js:1085:11](https://xxxxxxx/apps/frappe/frappe/public/js/frappe/utils/utils.js)
let out =  parent.parent_project; return out [utils.js:1086:11](https://xxxxxxx/apps/frappe/frappe/public/js/frappe/utils/utils.js)
Uncaught InternalError: too much recursion
    show dialog.js:239
    msgprint messages.js:298
    throw messages.js:25
    evaluate_depends_on_value layout.js:785
    set_dependant_property layout.js:731
    refresh_dependency layout.js:719
    refresh_field grid_row_form.js:127
    refresh_field grid_row.js:1432
    refresh_field grid_row.js:1444
    refresh_field grid_row.js:1436
    refresh_field grid_row.js:1444
    refresh_field grid_row.js:1436
....

bobotdls (Issue Creator) on (2024-08-23 07:17:48 UTC): Thanks Ibrandh for supporting my issue, actually I really dont know where/how post the log.. Thanks again

bobotdls (Issue Creator) on (2024-08-23 07:29:54 UTC): I just update my hrms version into this
Frappe HR: v15.27.0 (version-15)
but the issue on not adding a row on Time Sheet table is still persist.

Below is my existing Version of all apps

ERPNext: v15.33.5 (version-15)
Frappe Framework: v15.39.0 (version-15)
Frappe HR: v15.27.0 (version-15)
Print Designer: v1.4.1 (main)

Nihantra-Patel on (2024-08-23 08:39:18 UTC): I've found the issue. The actual problem lies in the ""read only depends on"" condition. If the project is selected at the parent level, and the project field is also in the list view, you'll encounter this issue when adding a row. However, if you remove the project field from the list view, you can add rows without any problems. Otherwise, you'll need to remove the ""read only depends on"" condition to resolve the issue.


https://github.com/user-attachments/assets/1b083b4b-a469-4a37-885a-5560de8c76c5

bobotdls (Issue Creator) on (2024-08-23 09:09:38 UTC): Thanks @Nihantra-Patel , Now it's working

"
2482025308,issue,open,,"How can users see only the information that is associated with them, such as their own projects or work content","In using ERPnext, I want to achieve this effect: the user can only see A certain message that belongs to him. For example, if the person in charge of project A is this user, then the user of this project can see this message and the user of other projects cannot see this information.

I can't set such things by setting user rights, because the project leader may be changed at any time, and there are a lot of such project information, so I want to directly set the project leader and then the user can see the project that belongs to him.

Of course, setting ""Only if Creator"" doesn't seem to work either, because the creator of the project is not necessarily this person or the creator can switch at any time.

Thank you for your help",toca-Y,2024-08-23 00:36:39+00:00,[],2024-08-23 00:36:39+00:00,,https://github.com/frappe/erpnext/issues/42883,"[('feature-request', None)]",[],
2481873520,issue,closed,completed,PO received_qty incorrect when multiple batches of the same item are received in a purchase receipt. ,"### Information about bug

When I create a purchase receipt with multiple lines for the same item but using different batches for each line, the purchase order's received quantity for that item appears incorrect. It seems that only the quantity from the first line in the purchase receipt is being updated in the purchase order.

To reproduce the issue:

Create a Purchase Order for 100 units of Item A.
Create a Purchase Receipt and receive 70 units of Item A in Batch 1 and 30 units of Item A in Batch 2.
The received quantity for Item A in the Purchase Order shows only 70 units, instead of the expected 100 units.

### Module

buying

### Version

ERPNext: v14.52.1
Frappe Framework: v14.76.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",lopper,2024-08-22 21:53:03+00:00,[],2024-09-09 00:10:16+00:00,2024-08-23 09:57:42+00:00,https://github.com/frappe/erpnext/issues/42881,"[('bug', None)]","[{'comment_id': 2306738514, 'issue_id': 2481873520, 'author': 'rohitwaghchaure', 'body': 'It seems that you have not set the purchase_order_item reference in the purchase receipt line item. \r\nMake sure the column purchase_order_item has the value (use the duplicate button to split quantity in the PR)\r\n\r\nAlso to solve this issue, we have added Serial and Batch Bundle feature in v15. For more details please check below link\r\nhttps://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle', 'created_at': datetime.datetime(2024, 8, 23, 9, 57, 40, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-08-23 09:57:40 UTC): It seems that you have not set the purchase_order_item reference in the purchase receipt line item. 
Make sure the column purchase_order_item has the value (use the duplicate button to split quantity in the PR)

Also to solve this issue, we have added Serial and Batch Bundle feature in v15. For more details please check below link
https://docs.erpnext.com/docs/user/manual/en/serial-and-batch-bundle

"
2481625333,issue,open,,"unsolved: ""Fetch Timesheet"" completed whole Timesheet despite containing multiple projects #31752 ","### Information about bug

I am still experiencing this bug in 2024, with the behaviour exactly as described [here](https://github.com/frappe/erpnext/issues/31752).

Furthermore: attempting to fetch timesheets for a new invoice which were previously incorrectly fetched by the system into another customer's or another project's invoice results in no timesheets getting fetched if all timesheets within the selected timespan have been ""consumed"" by other invoices, then all open timesheets entries for that customer or project getting fetched upon saving the new invoice, whereby the from and to timestamps do not display in the automatically fetched timesheet entries. Manually deleting all these entries and re-saving results in them getting re-added, until a time range is selected in the filter for fetching timesheets so that within that range there are ""unconsumed"" timesheet entries available, which then get (correctly) added.

#### Proposed solution:

- Correct bug by which timesheet entries get ""consumed"" to invoices to which they do not get added.
- Make it possible to manually filter timesheet entries by project and date range, resulting in the timesheet entries getting added to a new invoice regardless of them having been previously ""consumed"" by another invoice (an altert should notify the user of a duplicate use, or prevent the invoice being confirmed to prevent duplicate invoicing of same timesheet entries, or allow these timesheet entries to be displayed but such that they do not count towards said invoice).
- Correct the behaviour by which timesheets get added without the user's request for it.

### Module

accounts, selling, CRM, other

### Version

bench 5.17.2
erpnext 15.27.6
erpnextswiss 1.23.3
frappe 15.29.2
hrms 15.22.2
payments 0.0.1

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",konradbr,2024-08-22 20:09:35+00:00,[],2024-08-22 20:11:01+00:00,,https://github.com/frappe/erpnext/issues/42880,"[('bug', None)]","[{'comment_id': 2305546477, 'issue_id': 2481625333, 'author': 'konradbr', 'body': 'Furthermore, when solving this bug, it would be important to implement a backwards-acting check to retrieve all previously wrongly ""consumed"" timesheet entries, allowing users to invoice them _post-factum_.', 'created_at': datetime.datetime(2024, 8, 22, 20, 11, tzinfo=datetime.timezone.utc)}]","konradbr (Issue Creator) on (2024-08-22 20:11:00 UTC): Furthermore, when solving this bug, it would be important to implement a backwards-acting check to retrieve all previously wrongly ""consumed"" timesheet entries, allowing users to invoice them _post-factum_.

"
2482545948,issue,closed,completed,Timesheet is not working - Release 15.27.0,"### Information about bug

Before version 15.27.0, the Timesheet worked normally, but it stopped working after this update. Can you please check?

### Module

HR

### Version

ERPNext: v15.33.4 (version-15)

Frappe Framework: v15.39.0 (version-15)

Frappe HR: v15.27.0 (version-15)

India Compliance: v15.12.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_

### Code of Conduct

- [X] I agree to follow this project's Code of Conduct",njbhatt18,2024-08-22 18:09:38+00:00,[],2024-10-03 00:10:15+00:00,2024-09-09 05:52:37+00:00,https://github.com/frappe/erpnext/issues/42889,"[('bug', None), ('to-validate', 'Old issues pending validation'), ('needs-description', '')]","[{'comment_id': 2306507032, 'issue_id': 2482545948, 'author': 'ruchamahabal', 'body': 'Please add more info to your issue. What is not working exactly? \r\nAny error traceback, steps to replicate would be helpful', 'created_at': datetime.datetime(2024, 8, 23, 7, 52, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306767133, 'issue_id': 2482545948, 'author': 'njbhatt18', 'body': 'Please check this video: https://drive.google.com/file/d/1mFvzH95S1mv_2qBRuaHZ4iiW_3et7rT6/view?usp=sharing\r\n\r\nBelow are the points which I have found while filing up the timesheet:\r\n\r\n1.\tEnter the start time and the total hours; it does not calculate the end time automatically.\r\n2.\tAfter filling up all the details and pressing the Insert Below button, the whole section gets appended instead of adding 1 row.\r\n3.\tThe timesheet is not saved When clicking on the Save button.', 'created_at': datetime.datetime(2024, 8, 23, 10, 12, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2337184323, 'issue_id': 2482545948, 'author': 'Nihantra-Patel', 'body': 'Issue was: https://github.com/frappe/erpnext/issues/42884#issuecomment-2306594837\r\n\r\nFixed: https://github.com/frappe/frappe/pull/27690', 'created_at': datetime.datetime(2024, 9, 9, 5, 52, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2350957534, 'issue_id': 2482545948, 'author': 'prononext', 'body': 'Got the same problem on the latest version  frappe/erpnext · v15.35.1\r\n\r\nNeither removing the read only condition or the project from the list view helped. \r\nI tried also to downgrade to ERPNext: v15.29.2 but no success.', 'created_at': datetime.datetime(2024, 9, 14, 11, 21, 51, tzinfo=datetime.timezone.utc)}]","ruchamahabal on (2024-08-23 07:52:36 UTC): Please add more info to your issue. What is not working exactly? 
Any error traceback, steps to replicate would be helpful

njbhatt18 (Issue Creator) on (2024-08-23 10:12:56 UTC): Please check this video: https://drive.google.com/file/d/1mFvzH95S1mv_2qBRuaHZ4iiW_3et7rT6/view?usp=sharing

Below are the points which I have found while filing up the timesheet:

1.	Enter the start time and the total hours; it does not calculate the end time automatically.
2.	After filling up all the details and pressing the Insert Below button, the whole section gets appended instead of adding 1 row.
3.	The timesheet is not saved When clicking on the Save button.

Nihantra-Patel on (2024-09-09 05:52:37 UTC): Issue was: https://github.com/frappe/erpnext/issues/42884#issuecomment-2306594837

Fixed: https://github.com/frappe/frappe/pull/27690

prononext on (2024-09-14 11:21:51 UTC): Got the same problem on the latest version  frappe/erpnext · v15.35.1

Neither removing the read only condition or the project from the list view helped. 
I tried also to downgrade to ERPNext: v15.29.2 but no success.

"
2481181592,issue,open,,ERROR: Unable to change Maximum Number of Fields,"### Information about bug

I am changing the maximum fields in my list view configurations to set more columns no show. 
It always stays at 5 eventhough the endpoints is returning the correct value. I cannot add more than 5 fields because of this in any list view






![Screenshot 2024-08-22 at 10 46 36 AM](https://github.com/user-attachments/assets/bfdfb382-f232-4632-a655-bb6c910b443a)
![Screenshot 2024-08-22 at 10 47 03 AM](https://github.com/user-attachments/assets/89a3c656-b07f-4538-a975-46e69c1f3b7d)
![Screenshot 2024-08-22 at 10 47 32 AM](https://github.com/user-attachments/assets/c7883ef2-9480-4d47-ae92-113a9933a996)


### Module

regional, other

### Version

v15.33.4

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
No error
```
",guzman-sanchez,2024-08-22 15:51:23+00:00,[],2024-08-22 15:51:23+00:00,,https://github.com/frappe/erpnext/issues/42879,"[('bug', None)]",[],
2480637984,issue,open,,Creating Sales Order from Quotation with Payment Terms In Advance - manually update of payment date is needed,"### Information about bug

If I create a Sales Order from quotation it should also update the payment date in terms tab. I get every time an error if the quote has payment terms in advance with the creation date of the quote and I create a sales order from this document. It takes over the payment date but has the actual creation date. 

It would be good if payment date will be also updated.

### Module

selling

### Version

ERPNext: v15.30.0
Frappe Framework: v15.35.0

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",bastelfeak,2024-08-22 12:14:44+00:00,[],2024-08-22 12:14:44+00:00,,https://github.com/frappe/erpnext/issues/42873,"[('bug', None)]",[],
2480613483,issue,closed,not_planned,Promantia,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",rohitg-pbspl,2024-08-22 12:02:45+00:00,[],2024-09-06 00:09:35+00:00,2024-08-22 21:02:34+00:00,https://github.com/frappe/erpnext/issues/42872,"[('feature-request', None)]",[],
2480339854,issue,closed,completed,Created Address/Contact in Opportunity is not visible - Opportunity only see Lead references,"### Information about bug

Within the doctype Opportunity you see only contacts and addresses which are referenced to the lead where the opportunity is based on. 
If you create a new address in the oppornutiy it gets as reference the opportunity but to have it as choice in the address field in the opportunity you have to manually link the address to the lead.

### Module

CRM

### Version

ERPNext: v15.30.0
Frappe Framework: v15.35.0

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",bastelfeak,2024-08-22 09:51:43+00:00,[],2024-09-14 00:09:43+00:00,2024-08-28 09:16:10+00:00,https://github.com/frappe/erpnext/issues/42864,"[('bug', None)]","[{'comment_id': 2314780986, 'issue_id': 2480339854, 'author': 'Nihantra-Patel', 'body': 'Solved: https://github.com/frappe/erpnext/pull/42596', 'created_at': datetime.datetime(2024, 8, 28, 9, 16, 10, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-28 09:16:10 UTC): Solved: https://github.com/frappe/erpnext/pull/42596

"
2478329110,issue,open,,User Permission Issue with Stock Entry and Warehouse Selection,"### Information about bug

I encountered an issue while configuring user permissions for a stockkeeper role in ERPNext. Specifically, the problem involves the following:
User Permissions Configuration:

I created a user with the role of stockkeeper and assigned them specific access to the ""Component Warehouse"" (see attached screenshot).

Problem:
When testing this user by attempting to create a new Stock Entry, an error message appears, stating that the selected item is not permitted.
Additionally, instead of showing the union of the ""Default Source Warehouse"" and ""Default Target Warehouse,"" the system displays the intersection of these warehouses.

Expected Behavior:
The stockkeeper user should be able to:
Create new Stock Entries. Select items without encountering permission issues. See the union of the ""Default Source Warehouse"" and ""Default Target Warehouse"" instead of the intersection.

Attachments:
Screenshots demonstrating the user permission configuration and the error message encountered.

Additional Notes:
This issue restricts the stockkeeper's ability to perform essential tasks, such as creating stock entries, and limits warehouse selection functionality.


### Module

stock

### Version

version 15 
![4](https://github.com/user-attachments/assets/36892235-4c21-44af-bbf2-dc5b88d02b3c)
![3](https://github.com/user-attachments/assets/bf67f669-b6e5-4955-b40a-83b9a4eb9acd)
![2](https://github.com/user-attachments/assets/b302010c-7d2e-4df0-9d99-f97db734ff92)
![1](https://github.com/user-attachments/assets/8e6f8017-6af2-4b6a-a78a-089114f34c57)
![image](https://github.com/user-attachments/assets/e6595000-39f0-4450-a3a0-54a14f44db29)


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",RolaHussen0,2024-08-21 15:18:54+00:00,[],2024-08-21 15:18:54+00:00,,https://github.com/frappe/erpnext/issues/42859,"[('bug', None)]",[],
2478106160,issue,open,,Optimization Payment Entry Creation Process,"We are currently facing a requirement to process multiple payments within a second .  However, we have noticed that a significant portion of the time taken for payment entry creation is due to the updating of balances for the ""party,"" ""paid_from_account_currency,"" and ""paid_from_account_balance"" fields.
Could you please add a feature to by pass this fields updation process as it would be very help full for us",SAnnamalai-techfinite,2024-08-21 13:52:39+00:00,[],2024-08-21 13:52:39+00:00,,https://github.com/frappe/erpnext/issues/42858,"[('feature-request', None)]",[],
2476731370,issue,open,,Incorrect Taxes on Advance Payment,"### Information about bug

Consider this scenario:

    We have a Sales Order for $100 + 20% VAT

    We have agreed on 50% payment in advance

    The VAT is payable by us on receipt of the advance payment

    On receipt of the advance payment, we create a Payment Entry recoding Paid Amount: $60, Allocated to Sales Order: $50, VAT included in payment (Taxes table): $10

This creates the following issues:

    The Advance Paid in Sales Order shows only $50, despite having received $60 from the customer.

    In the final Sales Invoice, Total Advance is $50. The Outstanding Amount is calculated as Grand Total - Advance Received. The $10 VAT that we have received in advance is not getting deducted.

Possible solution:

    The Advance Paid in Sales Order either shows $60 or is clearly named Net Advance Received.

    The Total Advance in Sales Invoice either shows $60 or gets deducted from the Net Total, not from the Grand Total.

### Module

accounts

### Version

ERPNext v14
ERPNext v15


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_

Internal Ref: https://support.frappe.io/helpdesk/tickets/19411",ruthra-kumar,2024-08-21 00:02:07+00:00,['ruthra-kumar'],2024-08-21 13:15:05+00:00,,https://github.com/frappe/erpnext/issues/42843,"[('bug', None), ('accounts', '')]","[{'comment_id': 2299967403, 'issue_id': 2476731370, 'author': 'ruthra-kumar', 'body': 'To fix this, allocation should always have the gross amount - 60, with the below  ledger entries.\r\nAccount | Debit | Credit\r\n-- | -- | --\r\nDebtors | \xa0 | 60\r\nVat | 10 | \xa0\r\nCash | 50\r\n\r\n</span>', 'created_at': datetime.datetime(2024, 8, 21, 0, 7, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2300937068, 'issue_id': 2476731370, 'author': 'nakul80', 'body': ""I have had similar issue along with another linked issue. Payment terms typically say advance of a certain percentage and in most cases this does not include taxes as the job isn't performed or goods not delivered. Advance should generally not include the tax. So if 10% advance is shown in purchase order in the payment terms table, it shows as 12$ when it should be 10$. Giving this print to the supplier is not possible. To clarify, I'm in India where this is most likely scenario as gst is not payable on advance."", 'created_at': datetime.datetime(2024, 8, 21, 4, 38, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301577286, 'issue_id': 2476731370, 'author': 'barredterra', 'body': 'In Germany, advances are usually considered as gross payments. The GST liability is created on receipt of the advance.', 'created_at': datetime.datetime(2024, 8, 21, 9, 21, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302033167, 'issue_id': 2476731370, 'author': 'nakul80', 'body': 'Right now I have managed to bypass the issue by removing the taxes in PO and adding it at the time of invoicing. Not ideal but its a workaround. \r\n\r\nSince different countries have different procedures, this should be tackled. Maybe a dropdown like we have in taxation table.', 'created_at': datetime.datetime(2024, 8, 21, 13, 15, 4, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Issue Creator) on (2024-08-21 00:07:22 UTC): To fix this, allocation should always have the gross amount - 60, with the below  ledger entries.
Account | Debit | Credit
-- | -- | --
Debtors |   | 60
Vat | 10 |  
Cash | 50

</span>

nakul80 on (2024-08-21 04:38:38 UTC): I have had similar issue along with another linked issue. Payment terms typically say advance of a certain percentage and in most cases this does not include taxes as the job isn't performed or goods not delivered. Advance should generally not include the tax. So if 10% advance is shown in purchase order in the payment terms table, it shows as 12$ when it should be 10$. Giving this print to the supplier is not possible. To clarify, I'm in India where this is most likely scenario as gst is not payable on advance.

barredterra on (2024-08-21 09:21:28 UTC): In Germany, advances are usually considered as gross payments. The GST liability is created on receipt of the advance.

nakul80 on (2024-08-21 13:15:04 UTC): Right now I have managed to bypass the issue by removing the taxes in PO and adding it at the time of invoicing. Not ideal but its a workaround. 

Since different countries have different procedures, this should be tackled. Maybe a dropdown like we have in taxation table.

"
2475551429,issue,closed,completed,General Ledger: 'Show Cancelled Entries' is displaying incorrect information.,"### Information about bug

General Ledger: 'Show Cancelled Entries' is displaying incorrect information.

https://github.com/user-attachments/assets/0913e229-71d2-4507-9d57-3b8def42ac81



### Module

accounts

### Version

ERPNext: v15.33.2 (version-15)
Frappe Framework: v15.39.0 (version-15)


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",sammish,2024-08-20 12:41:50+00:00,[],2024-09-06 00:09:41+00:00,2024-08-21 04:12:43+00:00,https://github.com/frappe/erpnext/issues/42838,"[('bug', None)]","[{'comment_id': 2300765918, 'issue_id': 2475551429, 'author': 'Nihantra-Patel', 'body': 'I want to clarify that ""Show cancel entry"" means that when you select it, both the normal and canceled entries will be displayed. This means that all entries, including submitted and canceled entries, will be visible.', 'created_at': datetime.datetime(2024, 8, 21, 4, 12, 43, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-21 04:12:43 UTC): I want to clarify that ""Show cancel entry"" means that when you select it, both the normal and canceled entries will be displayed. This means that all entries, including submitted and canceled entries, will be visible.

"
2475465848,issue,open,,Item Group-Wise Budgeting and Purchase Blocking in ERPNext,"**Feature Request: Item Group-Wise Budgeting and Purchase Blocking in ERPNext**

**Description:**

Currently, ERPNext allows creating budgets against Cost Centers and Projects, with the source being the account. However, our business requires the ability to create budgets against Item Groups. We propose the following enhancements:

**Item Group as a Source for Budget Calculation:**
Enable the creation of budgets specifically for Item Groups, similar to how budgets are created for Cost Centers and Projects.

![Budget](https://github.com/user-attachments/assets/a015c3e7-0513-40c3-830a-dc587ffb5824)


**Purchase Blocking on Budget Exceedance:**
Introduce functionality to block purchases when the allocated budget for an Item Group is exceeded. This will help in maintaining financial discipline and ensuring that purchases remain within the planned budget.

**Use Case:**
For businesses that categorize expenses and purchases by Item Groups, this feature will provide better control over spending and help prevent budget overruns.",parasonit,2024-08-20 12:00:01+00:00,[],2024-08-22 05:18:33+00:00,,https://github.com/frappe/erpnext/issues/42837,"[('feature-request', None)]","[{'comment_id': 2301620529, 'issue_id': 2475465848, 'author': 'muchai', 'body': 'You could create accounting dimensions for item group, and budget against accounting dimension, and pick item group to budget for. A work around perhaps.', 'created_at': datetime.datetime(2024, 8, 21, 9, 43, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2303805787, 'issue_id': 2475465848, 'author': 'parasonit', 'body': '> You could create accounting dimensions for the item group, budget against the accounting dimension, and pick the item group to budget for—a work around perhaps.\r\n\r\nWe have tried this, but this workaround has some limitations.\r\n- We can select only one Item group at a time, we require multiple Item groups to be chosen.\r\n- Budget account is mandatory field, we cannot select a single account here.\r\n![image](https://github.com/user-attachments/assets/d17634d3-d0ba-400a-a38b-85026c433082)', 'created_at': datetime.datetime(2024, 8, 22, 5, 18, 32, tzinfo=datetime.timezone.utc)}]","muchai on (2024-08-21 09:43:27 UTC): You could create accounting dimensions for item group, and budget against accounting dimension, and pick item group to budget for. A work around perhaps.

parasonit (Issue Creator) on (2024-08-22 05:18:32 UTC): We have tried this, but this workaround has some limitations.
- We can select only one Item group at a time, we require multiple Item groups to be chosen.
- Budget account is mandatory field, we cannot select a single account here.
![image](https://github.com/user-attachments/assets/d17634d3-d0ba-400a-a38b-85026c433082)

"
2475434566,issue,closed,completed,Payment Request,"### Information about bug

Payment Request for outward payment to supplier has a payment link in the message. This is not possible.

<img width=""1330"" alt=""image"" src=""https://github.com/user-attachments/assets/ce7518ba-9e2a-4375-ad43-4c4c0219b23e"">


### Module

accounts

### Version

ERPNext: v15.33.0 (HEAD)
Frappe Framework: v15.38.0 (HEAD)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",nakul80,2024-08-20 11:43:40+00:00,[],2024-09-06 00:09:36+00:00,2024-08-22 10:35:57+00:00,https://github.com/frappe/erpnext/issues/42836,"[('bug', None)]","[{'comment_id': 2304106858, 'issue_id': 2475434566, 'author': 'Nihantra-Patel', 'body': 'You mean the line with ""make payment"" should not appear at outward time, and I think the line above it should not appear either (Maybe).', 'created_at': datetime.datetime(2024, 8, 22, 8, 41, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304207596, 'issue_id': 2475434566, 'author': 'nakul80', 'body': 'The line above should not be there if this payment request goes to the supplier. If it goes to accounting user its fine. I guess thats something to consider. Is doctype \'payment request\' a request to the 3rd party or an internal process request? I think if its only meant for 3rd party then I cant understand why payment request would give an option for ""outward"" payment \r\n\r\nThe field message_examples seems to have something to do with this but I did not want to fiddle with that.', 'created_at': datetime.datetime(2024, 8, 22, 9, 31, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304332788, 'issue_id': 2475434566, 'author': 'Nihantra-Patel', 'body': 'Okay, now I\'ll explain it to you in detail:\r\n\r\n\'Payment Request\' doctype serves as a way to request payments, typically related to sales invoices or purchase invoices. It can be used both as an internal process to formalize payment requests and as a means to communicate with third parties (such as customers or suppliers) regarding payment.\r\n\r\nFor a **Purchase Invoice**:\r\n- **Payment Request** is generally used to request payment from your company to a supplier.\r\n- The ""outward"" payment option refers to the payment leaving your company\'s account to pay the supplier.\r\n\r\nThough it might seem like this should be strictly an internal process, the Payment Request doctype can be configured and utilized to facilitate communication with external parties (like sending a payment request to a supplier to formalize or confirm payment details). This flexibility is why both inward (receiving payment) and outward (making payment) options are available.\r\n\r\nSo, even though the Payment Request can be seen as an internal request, it is designed to handle outward payments to suppliers in the context of Purchase Invoices.\r\n\r\nIf you want, then you can easily customize it in your custom app. so we can\'t remove it.', 'created_at': datetime.datetime(2024, 8, 22, 10, 35, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304381089, 'issue_id': 2475434566, 'author': 'nakul80', 'body': 'No I prefer that its for both options.\r\n\r\nBut Outward should not have the payment link. The Depends on only has\r\n\'eval: doc.payment_channel != ""Phone""\' as the condition.\r\n\r\nRegards,\r\nNakul\r\n\r\n\r\nOn Thu, 22 Aug 2024 at 16:06, Nihantra C. Patel ***@***.***>\r\nwrote:\r\n\r\n> Okay, now I\'ll explain it to you in detail:\r\n>\r\n> \'Payment Request\' doctype serves as a way to request payments, typically\r\n> related to sales invoices or purchase invoices. It can be used both as an\r\n> internal process to formalize payment requests and as a means to\r\n> communicate with third parties (such as customers or suppliers) regarding\r\n> payment.\r\n>\r\n> For a *Purchase Invoice*:\r\n>\r\n>    - *Payment Request* is generally used to request payment from your\r\n>    company to a supplier.\r\n>    - The ""outward"" payment option refers to the payment leaving your\r\n>    company\'s account to pay the supplier.\r\n>\r\n> Though it might seem like this should be strictly an internal process, the\r\n> Payment Request doctype can be configured and utilized to facilitate\r\n> communication with external parties (like sending a payment request to a\r\n> supplier to formalize or confirm payment details). This flexibility is why\r\n> both inward (receiving payment) and outward (making payment) options are\r\n> available.\r\n>\r\n> So, even though the Payment Request can be seen as an internal request, it\r\n> is designed to handle outward payments to suppliers in the context of\r\n> Purchase Invoices.\r\n>\r\n> If you want, then you can easily customize it in your custom app. so we\r\n> can\'t remove it.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/frappe/erpnext/issues/42836#issuecomment-2304332788>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/APPSRLEWFL6GXYVQSHNVBRDZSW5KHAVCNFSM6AAAAABMZW67ECVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDGMBUGMZTENZYHA>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2024, 8, 22, 10, 59, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304393273, 'issue_id': 2475434566, 'author': 'Nihantra-Patel', 'body': 'But you can customize the message according to the requirement.\r\n\r\n![image](https://github.com/user-attachments/assets/21f17e7b-b179-4450-b34d-1c8716f9e982)', 'created_at': datetime.datetime(2024, 8, 22, 11, 6, 9, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-22 08:41:49 UTC): You mean the line with ""make payment"" should not appear at outward time, and I think the line above it should not appear either (Maybe).

nakul80 (Issue Creator) on (2024-08-22 09:31:43 UTC): The line above should not be there if this payment request goes to the supplier. If it goes to accounting user its fine. I guess thats something to consider. Is doctype 'payment request' a request to the 3rd party or an internal process request? I think if its only meant for 3rd party then I cant understand why payment request would give an option for ""outward"" payment 

The field message_examples seems to have something to do with this but I did not want to fiddle with that.

Nihantra-Patel on (2024-08-22 10:35:57 UTC): Okay, now I'll explain it to you in detail:

'Payment Request' doctype serves as a way to request payments, typically related to sales invoices or purchase invoices. It can be used both as an internal process to formalize payment requests and as a means to communicate with third parties (such as customers or suppliers) regarding payment.

For a **Purchase Invoice**:
- **Payment Request** is generally used to request payment from your company to a supplier.
- The ""outward"" payment option refers to the payment leaving your company's account to pay the supplier.

Though it might seem like this should be strictly an internal process, the Payment Request doctype can be configured and utilized to facilitate communication with external parties (like sending a payment request to a supplier to formalize or confirm payment details). This flexibility is why both inward (receiving payment) and outward (making payment) options are available.

So, even though the Payment Request can be seen as an internal request, it is designed to handle outward payments to suppliers in the context of Purchase Invoices.

If you want, then you can easily customize it in your custom app. so we can't remove it.

nakul80 (Issue Creator) on (2024-08-22 10:59:55 UTC): No I prefer that its for both options.

But Outward should not have the payment link. The Depends on only has
'eval: doc.payment_channel != ""Phone""' as the condition.

Regards,
Nakul


On Thu, 22 Aug 2024 at 16:06, Nihantra C. Patel ***@***.***>
wrote:

Nihantra-Patel on (2024-08-22 11:06:09 UTC): But you can customize the message according to the requirement.

![image](https://github.com/user-attachments/assets/21f17e7b-b179-4450-b34d-1c8716f9e982)

"
2475198782,issue,closed,completed,Option to Set Default Stock Entry Type in Manufacturing,"When we create a stock entry from workorder, the default stock entry type is **Material Transfer for Manufacture** for transfer to manufacturing and **Manufacture** for finished goods. Now, when we create a new stock entry type 'Recycle' with Purpose **Manufacture** the system automatically fetches Recycle as the default stock entry type for finished goods.
Expectation: Either system should fetch **Manufacture** as default always or a provision is required to set the default stock entry type in the manufacturing setting.
![Screenshot 2024-08-20 at 2 47 26 PM](https://github.com/user-attachments/assets/806dcb6a-2b14-4787-91af-e24b57cc0392)
![Screenshot 2024-08-20 at 2 50 14 PM](https://github.com/user-attachments/assets/3979d9c4-dc44-4d8c-acdc-432e9f73d52e)




",akhtarmohsin,2024-08-20 09:44:13+00:00,[],2024-09-06 00:09:37+00:00,2024-08-21 13:56:16+00:00,https://github.com/frappe/erpnext/issues/42834,"[('feature-request', None)]","[{'comment_id': 2302121647, 'issue_id': 2475198782, 'author': 'rohitwaghchaure', 'body': 'Fixed https://github.com/frappe/erpnext/pull/42835', 'created_at': datetime.datetime(2024, 8, 21, 13, 56, 16, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-08-21 13:56:16 UTC): Fixed https://github.com/frappe/erpnext/pull/42835

"
2471986362,issue,closed,completed,pick list scan barcode issue,"### Information about bug

Maximum quantity scanned for item item_name.

Create new pick list and In scan barcode field paste barcode then you can see the msg.

![image](https://github.com/user-attachments/assets/c4ae4e81-cdc7-44fb-a8ed-feb45eb8671f)


https://support.frappe.io/helpdesk/my-tickets/20366

### Module

stock

### Version

Latest version 15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",mohsinalimat,2024-08-18 13:59:51+00:00,[],2024-09-03 00:09:29+00:00,2024-08-19 07:29:08+00:00,https://github.com/frappe/erpnext/issues/42812,"[('bug', None)]","[{'comment_id': 2295855136, 'issue_id': 2471986362, 'author': 'rohitwaghchaure', 'body': '@mohsinalimat Working fine \r\n![make-pick-lis-against-so](https://github.com/user-attachments/assets/787a3481-4046-4c82-a873-f641efb90577)', 'created_at': datetime.datetime(2024, 8, 19, 7, 29, 8, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-08-19 07:29:08 UTC): @mohsinalimat Working fine 
![make-pick-lis-against-so](https://github.com/user-attachments/assets/787a3481-4046-4c82-a873-f641efb90577)

"
2471931567,issue,open,,Improve the Documentation ,"I hope to be the documentation less boring than this
could make an app with a competitive environment between the members, and the discussion of questions within the application",manalErpnext,2024-08-18 11:54:13+00:00,[],2024-08-23 05:38:50+00:00,,https://github.com/frappe/erpnext/issues/42810,"[('feature-request', None)]","[{'comment_id': 2306329326, 'issue_id': 2471931567, 'author': 'doancan', 'body': 'I completely agree with you, but I think it would make more sense to make this suggestion on the Frappe Wiki repository page.', 'created_at': datetime.datetime(2024, 8, 23, 5, 38, 49, tzinfo=datetime.timezone.utc)}]","doancan on (2024-08-23 05:38:49 UTC): I completely agree with you, but I think it would make more sense to make this suggestion on the Frappe Wiki repository page.

"
2471497150,issue,open,,Add Due Date Calculation for MSME Suppliers Based on Finance Act 43B(H),"**Add Due Date Calculation for MSME Suppliers Based on Finance Act 43B(H)**

I would like to propose a feature enhancement to ERPNext that aligns with the new finance act 43B(H), which mandates that payments to MSME suppliers be made within 45 days from the receipt date or gate entry date.

**Feature Request:**

**Addition of Due Date Calculation Field:**

Purpose: To help users comply with the new legal requirement, we need a field in the Purchase Invoice and Payment Entry forms that automatically calculates the due date based on either the receipt date or gate entry date.
**Functionality**:
Field Name: Due Date
Calculation Logic: Due Date = Receipt Date or Gate Entry Date + 45 days
Fields Involved:
Receipt Date (from Purchase Invoice)
Gate Entry Date (if applicable)
Due Date (auto-calculated field)

**We need a new key for this Due date based on field - Day(s) after Receipt**
![Due date based on](https://github.com/user-attachments/assets/7525cfe1-4b90-4e9d-a4fc-423ea2ab8f7b)



**2. Integration in Reports and Notifications:**

Reports: Include the Due Date in relevant reports such as Purchase Register, Payment Register, and MSME Supplier Reports.
Notifications: Set up reminders or alerts for pending payments as the due date approaches.

**3. Customization for MSME Suppliers:**

Supplier Type: Add a checkbox or dropdown field in the Supplier master to mark a supplier as MSME.
Conditional Calculation: Ensure the due date calculation only applies to MSME suppliers.

**Benefits:**

Compliance: Ensures compliance with the new finance act and avoids potential penalties.
Efficiency: Automates the due date calculation, reducing manual tracking and errors.
Reporting: Enhances visibility into due payments and financial obligations.
Additional Information:

Finance Act Reference: 43B(H) - Payment to MSME suppliers to be made within 45 days.
https://cleartax.in/s/section-43bh-of-income-tax-act

**Use Case:** This feature particularly benefits companies working with MSME suppliers and seeking to streamline payment processes.
Thank you for considering this enhancement. Implementing this feature will greatly assist organizations in adhering to the new regulations and improving their operational efficiency.

",parasonit,2024-08-17 12:04:05+00:00,[],2024-08-17 12:04:05+00:00,,https://github.com/frappe/erpnext/issues/42807,"[('feature-request', None)]",[],
2471358899,issue,closed,completed,Stock entry accept the Finished Goods even though the Production not Properly Completed,"### Information about bug

I create one BOM with required raw materials
<img width=""1326"" alt=""image"" src=""https://github.com/user-attachments/assets/fd9d20bc-04c7-4d0c-b5c2-1a6174ad1709"">
And i Create work order against that bom
<img width=""1345"" alt=""image"" src=""https://github.com/user-attachments/assets/0d9a2957-8645-4c9f-ba81-f2952e6d63c0"">
Now I transfer the Goods for manufacturing:
<img width=""1301"" alt=""image"" src=""https://github.com/user-attachments/assets/05e5868e-0801-45f8-a895-791e21fe8c7f"">
now its shows insufficient stock so i was allocate the available stock only:
<img width=""1337"" alt=""image"" src=""https://github.com/user-attachments/assets/906425a0-a9cd-4e86-b8f4-055646b62210"">
Now I finished the manufacturing process:
<img width=""1343"" alt=""image"" src=""https://github.com/user-attachments/assets/95dfae2e-2f0a-429c-bea7-08ab295db9cf"">
it will accept the completed the manufacturing process eventhough raw material is insufficient:
<img width=""1364"" alt=""image"" src=""https://github.com/user-attachments/assets/bccadb56-4646-497a-a8d2-d7410f2f51ab"">



### Module

stock, manufacturing

### Version

ERPNext: v15.32.1 (version-15)

Frappe Framework: v15.37.0 (version-15)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
The stock entry didn't accept raw material insufficient or otherwise change the Output Quantity
```
",prasathchandrasekar,2024-08-17 05:47:13+00:00,[],2024-09-17 00:08:37+00:00,2024-08-19 07:31:53+00:00,https://github.com/frappe/erpnext/issues/42806,"[('bug', None)]","[{'comment_id': 2295083757, 'issue_id': 2471358899, 'author': 'szufisher', 'body': 'in my opinion, this is not a bug', 'created_at': datetime.datetime(2024, 8, 18, 2, 51, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295789745, 'issue_id': 2471358899, 'author': 'prasathchandrasekar', 'body': '> in my opinion, this is not a bug\r\n\r\nsir which is not allowed the manufacturing completion process in work order because of insufficient raw material.', 'created_at': datetime.datetime(2024, 8, 19, 6, 48, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295859695, 'issue_id': 2471358899, 'author': 'rohitwaghchaure', 'body': '@prasathchandrasekar \r\nSet Backflush Raw Materials Based On as BOM and check\r\n<img width=""1347"" alt=""Screenshot 2024-08-19 at 1 01 01 PM"" src=""https://github.com/user-attachments/assets/e2d9abe0-0a7b-4669-b669-f1077cc235d8"">\r\n\r\n\r\nIf you\'re changing the qty manually in the Manufacture Stock Entry then it\'s not a bug', 'created_at': datetime.datetime(2024, 8, 19, 7, 31, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296003179, 'issue_id': 2471358899, 'author': 'prasathchandrasekar', 'body': '@rohitwaghchaure \r\nIf the manufacturing user purposefully entered wrong quantity, the erp next system why not validate the actual quantity based on raw material, its bug or not?', 'created_at': datetime.datetime(2024, 8, 19, 8, 40, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2324008668, 'issue_id': 2471358899, 'author': 'rohitwaghchaure', 'body': '@prasathchandrasekar fixed https://github.com/frappe/erpnext/pull/43011', 'created_at': datetime.datetime(2024, 9, 2, 7, 27, 50, tzinfo=datetime.timezone.utc)}]","szufisher on (2024-08-18 02:51:11 UTC): in my opinion, this is not a bug

prasathchandrasekar (Issue Creator) on (2024-08-19 06:48:22 UTC): sir which is not allowed the manufacturing completion process in work order because of insufficient raw material.

rohitwaghchaure on (2024-08-19 07:31:53 UTC): @prasathchandrasekar 
Set Backflush Raw Materials Based On as BOM and check
<img width=""1347"" alt=""Screenshot 2024-08-19 at 1 01 01 PM"" src=""https://github.com/user-attachments/assets/e2d9abe0-0a7b-4669-b669-f1077cc235d8"">


If you're changing the qty manually in the Manufacture Stock Entry then it's not a bug

prasathchandrasekar (Issue Creator) on (2024-08-19 08:40:55 UTC): @rohitwaghchaure 
If the manufacturing user purposefully entered wrong quantity, the erp next system why not validate the actual quantity based on raw material, its bug or not?

rohitwaghchaure on (2024-09-02 07:27:50 UTC): @prasathchandrasekar fixed https://github.com/frappe/erpnext/pull/43011

"
2469643808,issue,closed,completed,Error while migrating site after update,"### Information about bug

Error while migrating site after update

### Module

buying

### Version

ERPNext: v15.33.0 (version-15)
Frappe Framework: v15.38.0 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
bench --site site1.local migrate
Migrating site1.local
Updating DocTypes for frappe        : [========================================] 100%
Updating DocTypes for erpnext       : [                                        ] 1%Failed to alter schema using query: ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null default 0, MODIFY `cgst_amount` decimal(21,9) not null default 0, MODIFY `margin_rate_or_amount` decimal(21,9) not null default 0, MODIFY `sgst_amount` decimal(21,9) not null default 0, MODIFY `base_rate_with_margin` decimal(21,9) not null default 0, MODIFY `cess_amount` decimal(21,9) not null default 0, MODIFY `rejected_qty` decimal(21,9) not null default 0, MODIFY `cess_non_advol_amount` decimal(21,9) not null default 0, MODIFY `net_rate` decimal(21,9) not null default 0, MODIFY `valuation_rate` decimal(21,9) not null default 0, MODIFY `rate` decimal(21,9) not null default 0, MODIFY `sales_incoming_rate` decimal(21,9) not null default 0, MODIFY `discount_amount` decimal(21,9) not null default 0, MODIFY `item_tax_amount` decimal(21,9) not null default 0, MODIFY `landed_cost_voucher_amount` decimal(21,9) not null default 0, MODIFY `rm_supp_cost` decimal(21,9) not null default 0, MODIFY `rate_with_margin` decimal(21,9) not null default 0, MODIFY `price_list_rate` decimal(21,9) not null default 0, MODIFY `received_qty` decimal(21,9) not null default 0, MODIFY `stock_qty` decimal(21,9) not null default 0, MODIFY `qty` decimal(21,9) not null default 0, MODIFY `amount` decimal(21,9) not null default 0


There was an issue while migrating the DocType: Purchase Invoice Item

Queued rebuilding of search index for site1.local

Traceback with variables (most recent call last):
  File ""/usr/lib/python3.10/runpy.py"", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
      mod_name = 'frappe.utils.bench_helper'
      alter_argv = True
      mod_spec = ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, origin='/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py')
      code = <code object <module> at 0x7437c75bdc60, file ""/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 1>
      main_globals = {'__name__': '__main__', '__doc__': None, '__package__': 'frappe.utils', '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, '__spec__': ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, origin='/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'), '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py', '__cached__': '/home/cerp/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc', 'importlib': <module 'importlib' from '/usr/lib/python3.10/importlib/__init__.py'>, 'json': <module 'json' from '/usr/lib/python3.10/json/__init__.py'>, 'os': <module 'os' from '/usr/lib/python3.10/os.py'>, 'traceback': <module 'traceback' from '/usr/lib/python3.10/traceback.py'>, 'warnings': <module 'warnings' from '/usr/lib/python3.10/warnings.py'>, 'Path': <class 'p...
  File ""/usr/lib/python3.10/runpy.py"", line 86, in _run_code
    exec(code, run_globals)
      code = <code object <module> at 0x7437c75bdc60, file ""/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 1>
      run_globals = {'__name__': '__main__', '__doc__': None, '__package__': 'frappe.utils', '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, '__spec__': ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, origin='/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'), '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py', '__cached__': '/home/cerp/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc', 'importlib': <module 'importlib' from '/usr/lib/python3.10/importlib/__init__.py'>, 'json': <module 'json' from '/usr/lib/python3.10/json/__init__.py'>, 'os': <module 'os' from '/usr/lib/python3.10/os.py'>, 'traceback': <module 'traceback' from '/usr/lib/python3.10/traceback.py'>, 'warnings': <module 'warnings' from '/usr/lib/python3.10/warnings.py'>, 'Path': <class 'p...
      init_globals = None
      mod_name = '__main__'
      mod_spec = ModuleSpec(name='frappe.utils.bench_helper', loader=<_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>, origin='/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py')
      pkg_name = 'frappe.utils'
      script_name = None
      loader = <_frozen_importlib_external.SourceFileLoader object at 0x7437c86cfc70>
      fname = '/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py'
      cached = '/home/cerp/frappe-bench/apps/frappe/frappe/utils/__pycache__/bench_helper.cpython-310.pyc'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 114, in <module>
    main()
      ...skipped... 27 vars
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py"", line 20, in main
    click.Group(commands=commands)(prog_name=""bench"")
      commands = {'frappe': <Group frappe>, 'get-frappe-commands': <Command get-frappe-commands>, 'get-frappe-help': <Command get-frappe-help>}
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1157, in __call__
    return self.main(*args, **kwargs)
      self = <Group None>
      args = ()
      kwargs = {'prog_name': 'bench'}
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1078, in main
    rv = self.invoke(ctx)
      self = <Group None>
      args = ['frappe', '--site', 'site1.local', 'migrate']
      prog_name = 'bench'
      complete_var = None
      standalone_mode = True
      windows_expand_args = True
      extra = {}
      ctx = <click.core.Context object at 0x7437c75c2ad0>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
      _process_result = <function MultiCommand.invoke.<locals>._process_result at 0x7437c75e7520>
      args = ['migrate']
      cmd_name = 'frappe'
      cmd = <Group frappe>
      sub_ctx = <click.core.Context object at 0x7437c6f174c0>
      ctx = <click.core.Context object at 0x7437c75c2ad0>
      self = <Group None>
      __class__ = <class 'click.core.MultiCommand'>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
      _process_result = <function MultiCommand.invoke.<locals>._process_result at 0x7437c6f1e9e0>
      args = []
      cmd_name = 'migrate'
      cmd = <Command migrate>
      sub_ctx = <click.core.Context object at 0x7437c6f17910>
      ctx = <click.core.Context object at 0x7437c6f174c0>
      self = <Group frappe>
      __class__ = <class 'click.core.MultiCommand'>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
      self = <Command migrate>
      ctx = <click.core.Context object at 0x7437c6f17910>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/core.py"", line 783, in invoke
    return __callback(*args, **kwargs)
      _Context__self = <click.core.Context object at 0x7437c6f17910>
      _Context__callback = <function migrate at 0x7437c7613130>
      args = ()
      kwargs = {'skip_failing': False, 'skip_search_index': False}
      ctx = <click.core.Context object at 0x7437c6f17910>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/click/decorators.py"", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
      args = ()
      kwargs = {'skip_failing': False, 'skip_search_index': False}
      f = <function migrate at 0x7437c7612ef0>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/commands/__init__.py"", line 29, in _func
    ret = f(frappe._dict(ctx.obj), *args, **kwargs)
      ctx = <click.core.Context object at 0x7437c6f17910>
      args = ()
      kwargs = {'skip_failing': False, 'skip_search_index': False}
      profile = False
      f = <function migrate at 0x7437c7612e60>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/commands/site.py"", line 613, in migrate
    SiteMigration(
      context = {'sites': ['site1.local'], 'force': False, 'verbose': False, 'profile': False}
      skip_failing = False
      skip_search_index = False
      activate_by_import = <module 'traceback_with_variables.activate_by_import' from '/home/cerp/frappe-bench/env/lib/python3.10/site-packages/traceback_with_variables/activate_by_import.py'>
      SiteMigration = <class 'frappe.migrate.SiteMigration'>
      site = 'site1.local'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/migrate.py"", line 190, in run
    self.run_schema_updates()
      self = <frappe.migrate.SiteMigration object at 0x7437c6f17a30>
      site = 'site1.local'
      filelock = <function filelock at 0x7437a5ff12d0>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/migrate.py"", line 53, in wrapper
    raise e
      args = (<frappe.migrate.SiteMigration object at 0x7437c6f17a30>,)
      kwargs = {}
      method = <function SiteMigration.run_schema_updates at 0x7437a5ff0ee0>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/migrate.py"", line 45, in wrapper
    ret = method(*args, **kwargs)
      args = (<frappe.migrate.SiteMigration object at 0x7437c6f17a30>,)
      kwargs = {}
      method = <function SiteMigration.run_schema_updates at 0x7437a5ff0ee0>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/migrate.py"", line 121, in run_schema_updates
    frappe.model.sync.sync_all()
      self = <frappe.migrate.SiteMigration object at 0x7437c6f17a30>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/sync.py"", line 43, in sync_all
    sync_for(app, force, reset_permissions=reset_permissions)
      force = 0
      reset_permissions = False
      app = 'erpnext'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/sync.py"", line 111, in sync_for
    import_file_by_path(
      app_name = 'erpnext'
      force = 0
      reset_permissions = False
      files = ['/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/pos_invoice/pos_invoice.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/bank_account/bank_account.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/ledger_merge_accounts/ledger_merge_accounts.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/psoa_cost_center/psoa_cost_center.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/period_closing_voucher/period_closing_voucher.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/customer_group_item/customer_group_item.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/opening_invoice_creation_tool_item/opening_invoice_creation_tool_item.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/tax_withholding_rate/tax_withholding_rate.json', '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/tax_withholding_category/tax_withholding_category....
      module_name = 'subcontracting'
      folder = '/home/cerp/frappe-bench/apps/erpnext/erpnext/subcontracting'
      l = 824
      i = 15
      doc_path = '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/modules/import_file.py"", line 146, in import_file_by_path
    import_doc(
      path = '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json'
      force = 0
      data_import = False
      pre_process = None
      ignore_version = True
      reset_permissions = False
      docs = [{'actions': [], 'autoname': 'hash', 'creation': '2013-05-22 12:43:10', 'doctype': 'DocType', 'document_type': 'Document', 'editable_grid': 1, 'engine': 'InnoDB', 'fields': [{'bold': 1, 'columns': 3, 'fieldname': 'item_code', 'fieldtype': 'Link', 'in_list_view': 1, 'label': 'Item', 'oldfieldname': 'item_code', 'oldfieldtype': 'Link', 'options': 'Item', 'print_hide': 1, 'search_index': 1, 'doctype': 'DocField'}, {'fieldname': 'product_bundle', 'fieldtype': 'Link', 'label': 'Product Bundle', 'options': 'Product Bundle', 'read_only': 1, 'doctype': 'DocField'}, {'fieldname': 'col_break1', 'fieldtype': 'Column Break', 'doctype': 'DocField'}, {'fetch_from': 'item_code.item_name', 'fetch_if_empty': 1, 'fieldname': 'item_name', 'fieldtype': 'Data', 'in_global_search': 1, 'label': 'Item Name', 'oldfieldname': 'item_name', 'oldfieldtype': 'Data', 'reqd': 1, 'doctype': 'DocField'}, {'collapsible': 1, 'fieldname': 'description_section', 'fieldtype': 'Section Break', 'label': 'Description', 'doctyp...
      calculated_hash = '4e73cc83c58be9e58819936879d71ca3'
      doc = {'actions': [], 'autoname': 'hash', 'creation': '2013-05-22 12:43:10', 'doctype': 'DocType', 'document_type': 'Document', 'editable_grid': 1, 'engine': 'InnoDB', 'fields': [{'bold': 1, 'columns': 3, 'fieldname': 'item_code', 'fieldtype': 'Link', 'in_list_view': 1, 'label': 'Item', 'oldfieldname': 'item_code', 'oldfieldtype': 'Link', 'options': 'Item', 'print_hide': 1, 'search_index': 1, 'doctype': 'DocField'}, {'fieldname': 'product_bundle', 'fieldtype': 'Link', 'label': 'Product Bundle', 'options': 'Product Bundle', 'read_only': 1, 'doctype': 'DocField'}, {'fieldname': 'col_break1', 'fieldtype': 'Column Break', 'doctype': 'DocField'}, {'fetch_from': 'item_code.item_name', 'fetch_if_empty': 1, 'fieldname': 'item_name', 'fieldtype': 'Data', 'in_global_search': 1, 'label': 'Item Name', 'oldfieldname': 'item_name', 'oldfieldtype': 'Data', 'reqd': 1, 'doctype': 'DocField'}, {'collapsible': 1, 'fieldname': 'description_section', 'fieldtype': 'Section Break', 'label': 'Description', 'doctype...
      db_modified_timestamp = datetime.datetime(2024, 8, 16, 12, 28, 51, 240236)
      is_db_timestamp_latest = True
      stored_hash = None
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/modules/import_file.py"", line 239, in import_doc
    doc.insert()
      docdict = {'actions': [], 'autoname': 'hash', 'creation': '2013-05-22 12:43:10', 'doctype': 'DocType', 'document_type': 'Document', 'editable_grid': 1, 'engine': 'InnoDB', 'fields': [{'bold': 1, 'columns': 3, 'fieldname': 'item_code', 'fieldtype': 'Link', 'in_list_view': 1, 'label': 'Item', 'oldfieldname': 'item_code', 'oldfieldtype': 'Link', 'options': 'Item', 'print_hide': 1, 'search_index': 1, 'doctype': 'DocField'}, {'fieldname': 'product_bundle', 'fieldtype': 'Link', 'label': 'Product Bundle', 'options': 'Product Bundle', 'read_only': 1, 'doctype': 'DocField'}, {'fieldname': 'col_break1', 'fieldtype': 'Column Break', 'doctype': 'DocField'}, {'fetch_from': 'item_code.item_name', 'fetch_if_empty': 1, 'fieldname': 'item_name', 'fieldtype': 'Data', 'in_global_search': 1, 'label': 'Item Name', 'oldfieldname': 'item_name', 'oldfieldtype': 'Data', 'reqd': 1, 'doctype': 'DocField'}, {'collapsible': 1, 'fieldname': 'description_section', 'fieldtype': 'Section Break', 'label': 'Description', 'doctype...
      data_import = False
      pre_process = None
      ignore_version = True
      reset_permissions = False
      path = '/home/cerp/frappe-bench/apps/erpnext/erpnext/accounts/doctype/purchase_invoice_item/purchase_invoice_item.json'
      controller = <class 'frappe.core.doctype.doctype.doctype.DocType'>
      doc = <DocType: Purchase Invoice Item>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 315, in insert
    self.run_post_save_methods()
      self = <DocType: Purchase Invoice Item>
      ignore_permissions = None
      ignore_links = None
      ignore_if_duplicate = False
      ignore_mandatory = None
      set_name = None
      set_child_names = True
      d = <CheckDocField: page_break parent=Purchase Invoice Item>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 1128, in run_post_save_methods
    self.run_method(""on_update"")
      self = <DocType: Purchase Invoice Item>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
      self = <DocType: Purchase Invoice Item>
      args = ()
      kwargs = {}
      fn = <function Document.run_method.<locals>.fn at 0x7437c640fe20>
      method = 'on_update'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
      self = <DocType: Purchase Invoice Item>
      args = ()
      kwargs = {}
      hooks = [<function build_domain_restriced_doctype_cache at 0x7437c6f7a170>, <function clear_doctype_notifications at 0x7437c5fae320>, <function process_workflow_actions at 0x7437a4c980d0>, <function attach_files_to_document at 0x7437c6dd5360>, <function apply at 0x7437a4c9aa70>, <function update_due_date at 0x7437a4c9ab00>, <function apply_permissions_for_non_standard_user_type at 0x7437a4ca8280>, <function run_server_script_for_doc_event at 0x7437c640fd00>]
      method = 'on_update'
      doc_events = {'*': {'on_update': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.core.doctype.file.utils.attach_files_to_document', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply', 'frappe.automation.doctype.assignment_rule.assignment_rule.update_due_date', 'frappe.core.doctype.user_type.user_type.apply_permissions_for_non_standard_user_type', 'frappe_whatsapp.utils.run_server_script_for_doc_event'], 'after_rename': ['frappe.desk.notifications.clear_doctype_notifications'], 'on_cancel': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process_workflow_actions', 'frappe.automation.doctype.assignment_rule.assignment_rule.apply', 'frappe_whatsapp.utils.run_server_script_for_doc_event'], 'on_trash': ['frappe.desk.notifications.clear_doctype_notifications', 'frappe.workflow.doctype.workflow_action.workflow_action.process...
      handler = 'frappe_whatsapp.utils.run_server_script_for_doc_event'
      composed = <function Document.hook.<locals>.compose.<locals>.runner at 0x7437c640fd90>
      compose = <function Document.hook.<locals>.compose at 0x7437c640f520>
      f = <function Document.run_method.<locals>.fn at 0x7437c640fe20>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
      self = <DocType: Purchase Invoice Item>
      method = 'on_update'
      args = ()
      kwargs = {}
      add_to_return_value = <function Document.hook.<locals>.add_to_return_value at 0x7437c640f490>
      fn = <function Document.run_method.<locals>.fn at 0x7437c640fe20>
      hooks = (<function build_domain_restriced_doctype_cache at 0x7437c6f7a170>, <function clear_doctype_notifications at 0x7437c5fae320>, <function process_workflow_actions at 0x7437a4c980d0>, <function attach_files_to_document at 0x7437c6dd5360>, <function apply at 0x7437a4c9aa70>, <function update_due_date at 0x7437a4c9ab00>, <function apply_permissions_for_non_standard_user_type at 0x7437a4ca8280>, <function run_server_script_for_doc_event at 0x7437c640fd00>)
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
      self = <DocType: Purchase Invoice Item>
      args = ()
      kwargs = {}
      method_object = <bound method DocType.on_update of <DocType: Purchase Invoice Item>>
      method = 'on_update'
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/core/doctype/doctype/doctype.py"", line 511, in on_update
    raise e
      self = <DocType: Purchase Invoice Item>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/core/doctype/doctype/doctype.py"", line 508, in on_update
    frappe.db.updatedb(self.name, Meta(self))
      self = <DocType: Purchase Invoice Item>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/database/mariadb/database.py"", line 443, in updatedb
    db_table.sync()
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7437a5390ac0>
      doctype = 'Purchase Invoice Item'
      meta = <Meta: Purchase Invoice Item>
      res = ((0,),)
      db_table = <frappe.database.mariadb.schema.MariaDBTable object at 0x7437a4e23550>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/database/schema.py"", line 44, in sync
    self.alter()
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7437a4e23550>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/database/mariadb/schema.py"", line 111, in alter
    frappe.db.sql_ddl(query)
      col = <frappe.database.schema.DbColumn object at 0x7437a4cb8190>
      add_column_query = []
      columns_to_modify = {<frappe.database.schema.DbColumn object at 0x7437a4c9f010>, <frappe.database.schema.DbColumn object at 0x7437a4c9f040>, <frappe.database.schema.DbColumn object at 0x7437a4c9f0a0>, <frappe.database.schema.DbColumn object at 0x7437a4cb80a0>, <frappe.database.schema.DbColumn object at 0x7437a4cb80d0>, <frappe.database.schema.DbColumn object at 0x7437a4c9f100>, <frappe.database.schema.DbColumn object at 0x7437a4c9f130>, <frappe.database.schema.DbColumn object at 0x7437a4c9f160>, <frappe.database.schema.DbColumn object at 0x7437a4c9f190>, <frappe.database.schema.DbColumn object at 0x7437a4c9f1c0>, <frappe.database.schema.DbColumn object at 0x7437a4c9f1f0>, <frappe.database.schema.DbColumn object at 0x7437a4c9f220>, <frappe.database.schema.DbColumn object at 0x7437a4c9ea40>, <frappe.database.schema.DbColumn object at 0x7437a4c9f250>, <frappe.database.schema.DbColumn object at 0x7437a4c9ea70>, <frappe.database.schema.DbColumn object at 0x7437a4c9f280>, <frappe.database.schema.DbColumn object...
      modify_column_query = ['MODIFY `base_rate` decimal(21,9) not null default 0', 'MODIFY `base_amount` decimal(21,9) not null default 0', 'MODIFY `stock_uom_rate` decimal(21,9) not null default 0', 'MODIFY `weight_per_unit` decimal(21,9) not null default 0', 'MODIFY `total_weight` decimal(21,9) not null default 0', 'MODIFY `base_net_amount` decimal(21,9) not null default 0', 'MODIFY `igst_rate` decimal(21,9) not null default 0', 'MODIFY `taxable_value` decimal(21,9) not null default 0', 'MODIFY `base_net_rate` decimal(21,9) not null default 0', 'MODIFY `net_amount` decimal(21,9) not null default 0', 'MODIFY `cgst_rate` decimal(21,9) not null default 0', 'MODIFY `sgst_rate` decimal(21,9) not null default 0', 'MODIFY `base_price_list_rate` decimal(21,9) not null default 0', 'MODIFY `cess_rate` decimal(21,9) not null default 0', 'MODIFY `discount_percentage` decimal(21,9) not null default 0', 'MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0', 'MODIFY `igst_amount` decimal(21,9) not null default 0', ...
      add_index_query = []
      drop_index_query = []
      query_parts = ['MODIFY `base_rate` decimal(21,9) not null default 0', 'MODIFY `base_amount` decimal(21,9) not null default 0', 'MODIFY `stock_uom_rate` decimal(21,9) not null default 0', 'MODIFY `weight_per_unit` decimal(21,9) not null default 0', 'MODIFY `total_weight` decimal(21,9) not null default 0', 'MODIFY `base_net_amount` decimal(21,9) not null default 0', 'MODIFY `igst_rate` decimal(21,9) not null default 0', 'MODIFY `taxable_value` decimal(21,9) not null default 0', 'MODIFY `base_net_rate` decimal(21,9) not null default 0', 'MODIFY `net_amount` decimal(21,9) not null default 0', 'MODIFY `cgst_rate` decimal(21,9) not null default 0', 'MODIFY `sgst_rate` decimal(21,9) not null default 0', 'MODIFY `base_price_list_rate` decimal(21,9) not null default 0', 'MODIFY `cess_rate` decimal(21,9) not null default 0', 'MODIFY `discount_percentage` decimal(21,9) not null default 0', 'MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0', 'MODIFY `igst_amount` decimal(21,9) not null default 0', ...
      query_body = 'MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null default 0, MODIFY `cgst_amount` decimal(21,9)...
      query = 'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defaul...
      self = <frappe.database.mariadb.schema.MariaDBTable object at 0x7437a4e23550>
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/database/database.py"", line 417, in sql_ddl
    self.sql(query, debug=debug)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7437a5390ac0>
      query = 'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defaul...
      debug = False
  File ""/home/cerp/frappe-bench/apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
      self = <frappe.database.mariadb.database.MariaDBDatabase object at 0x7437a5390ac0>
      query = 'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defaul...
      values = None
      as_dict = 0
      as_list = 0
      debug = False
      ignore_ddl = 0
      auto_commit = 0
      update = None
      explain = False
      run = True
      pluck = False
      as_iterator = False
      trace_id = None
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
      self = <pymysql.cursors.Cursor object at 0x7437a5392410>
      query = 'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defaul...
      args = None
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
      self = <pymysql.cursors.Cursor object at 0x7437a5392410>
      q = 'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defaul...
      conn = <pymysql.connections.Connection object at 0x7437a5392200>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
      self = <pymysql.connections.Connection object at 0x7437a5392200>
      sql = b'ALTER TABLE `tabPurchase Invoice Item` MODIFY `base_rate` decimal(21,9) not null default 0, MODIFY `base_amount` decimal(21,9) not null default 0, MODIFY `stock_uom_rate` decimal(21,9) not null default 0, MODIFY `weight_per_unit` decimal(21,9) not null default 0, MODIFY `total_weight` decimal(21,9) not null default 0, MODIFY `base_net_amount` decimal(21,9) not null default 0, MODIFY `igst_rate` decimal(21,9) not null default 0, MODIFY `taxable_value` decimal(21,9) not null default 0, MODIFY `base_net_rate` decimal(21,9) not null default 0, MODIFY `net_amount` decimal(21,9) not null default 0, MODIFY `cgst_rate` decimal(21,9) not null default 0, MODIFY `sgst_rate` decimal(21,9) not null default 0, MODIFY `base_price_list_rate` decimal(21,9) not null default 0, MODIFY `cess_rate` decimal(21,9) not null default 0, MODIFY `discount_percentage` decimal(21,9) not null default 0, MODIFY `cess_non_advol_rate` decimal(21,9) not null default 0, MODIFY `igst_amount` decimal(21,9) not null defau...
      unbuffered = False
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 825, in _read_query_result
    result.read()
      self = <pymysql.connections.Connection object at 0x7437a5392200>
      unbuffered = False
      result = <pymysql.connections.MySQLResult object at 0x7437a4dc5f00>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 1199, in read
    first_packet = self.connection._read_packet()
      self = <pymysql.connections.MySQLResult object at 0x7437a4dc5f00>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/connections.py"", line 775, in _read_packet
    packet.raise_for_error()
      self = <pymysql.connections.Connection object at 0x7437a5392200>
      packet_type = <class 'pymysql.protocol.MysqlPacket'>
      buff = bytearray(b""\xff\x1e\x04#42S22Unknown column \'sales_incoming_rate\' in \'tabPurchase Invoice Item\'"")
      packet_header = b'K\x00\x00\x01'
      btrl = 75
      btrh = 0
      packet_number = 1
      bytes_to_read = 75
      recv_data = b""\xff\x1e\x04#42S22Unknown column 'sales_incoming_rate' in 'tabPurchase Invoice Item'""
      packet = <pymysql.protocol.MysqlPacket object at 0x7437a4cb8280>
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/protocol.py"", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
      self = <pymysql.protocol.MysqlPacket object at 0x7437a4cb8280>
      errno = 1054
  File ""/home/cerp/frappe-bench/env/lib/python3.10/site-packages/pymysql/err.py"", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
      data = b""\xff\x1e\x04#42S22Unknown column 'sales_incoming_rate' in 'tabPurchase Invoice Item'""
      errno = 1054
      errval = ""Unknown column 'sales_incoming_rate' in 'tabPurchase Invoice Item'""
      errorclass = <class 'pymysql.err.OperationalError'>
pymysql.err.OperationalError: (1054, ""Unknown column 'sales_incoming_rate' in 'tabPurchase Invoice Item'"")
```
",nilpatel42,2024-08-16 07:05:11+00:00,[],2024-09-04 00:09:47+00:00,2024-08-20 06:24:11+00:00,https://github.com/frappe/erpnext/issues/42789,"[('bug', None)]","[{'comment_id': 2298060025, 'issue_id': 2469643808, 'author': 'Nihantra-Patel', 'body': 'we tested locally and also on the frappe cloud side so no issue was found.\r\n\r\nagain update the version and check it.', 'created_at': datetime.datetime(2024, 8, 20, 6, 24, 11, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-20 06:24:11 UTC): we tested locally and also on the frappe cloud side so no issue was found.

again update the version and check it.

"
2469611122,issue,open,,Preview Transaction for Asset Capitalisation,Preview button in accounting transactions is a good feature to be sure about the effect on books. Asset Capitalisation is also a big transaction to affect the books. Would be nice to have preview feature.,nakul80,2024-08-16 06:43:13+00:00,[],2024-08-16 06:43:13+00:00,,https://github.com/frappe/erpnext/issues/42787,"[('feature-request', None)]",[],
2469210478,issue,closed,completed,Field automatically_set_serial_nos_based_on_fifo does not exist on Stock Settings,"### Information about bug

Adding new items into sales orders lets me add the items themselves, but displays an error message every time: `Field automatically_set_serial_nos_based_on_fifo does not exist on Stock Settings`

### Module

stock, selling

### Version

Frappe CRM: v2.0.0-dev (develop)
Desk Navbar Extended: v0.0.1 (main)
ERPNext: v15.33.0 (version-15)
Frappe Framework: v15.38.0 (version-15)
Frappe Better List View: v1.4.0 (main)
Frappe M365: v0.0.1 (main)
Frappe Pdf: v0.0.1 (main)
Frappe Whatsapp: vv1.0.7 (master)
Frepple: v0.0.1 (main)
general customiztion : v0.0.1 (main)
Go1 CMS: v0.0.1 (master)
Frappe HR: v16.0.0-dev (develop)
Item Price: v0.0.1 (master)
Itemfeatures: v0.0.1 (master)
Microsoft Integration: v0.0.1 (main)
Payments: v0.0.1 (develop)
PDF on Submit: v15.1.0 (version-15)
Print Designer: v1.2.0 (develop)
QR Demo: v0.0.1 (version-14)
Reacteur: v0.0.1 (main)
Resource Manager: v0.0.1 (master)
Split Sales Order: v0.0.1 (main)
Wiki: v2.0.0 (master)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",redolencetech,2024-08-16 00:41:51+00:00,[],2024-10-10 00:10:00+00:00,2024-09-25 09:22:43+00:00,https://github.com/frappe/erpnext/issues/42781,"[('bug', None)]","[{'comment_id': 2373537919, 'issue_id': 2469210478, 'author': 'rohitwaghchaure', 'body': 'New settings added for that\r\n\r\n<img width=""1135"" alt=""Screenshot 2024-09-25 at 2 51 57 PM"" src=""https://github.com/user-attachments/assets/826a173c-0fe6-4c66-8d06-9f878342a24d"">', 'created_at': datetime.datetime(2024, 9, 25, 9, 22, 43, tzinfo=datetime.timezone.utc)}]","rohitwaghchaure on (2024-09-25 09:22:43 UTC): New settings added for that

<img width=""1135"" alt=""Screenshot 2024-09-25 at 2 51 57 PM"" src=""https://github.com/user-attachments/assets/826a173c-0fe6-4c66-8d06-9f878342a24d"">

"
2467812991,issue,closed,completed,[Bug] Add Brand Button not work,"### Information about bug

Add Brand Button work
![Screen Recording 2024-08-15 at 6 18 37 PM](https://github.com/user-attachments/assets/00ee52a7-c7bd-4dbd-a62d-bedcdf01ae63)


### Module

stock

### Version

ERPNext: v15.33.0 (version-15)
Frappe Framework: v15.38.0 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",donnieferdian,2024-08-15 10:33:31+00:00,[],2024-09-06 00:09:40+00:00,2024-08-20 09:12:33+00:00,https://github.com/frappe/erpnext/issues/42780,"[('bug', None), ('released', None)]","[{'comment_id': 2292656236, 'issue_id': 2467812991, 'author': 'bobotdls', 'body': ""Yup I agree, all of out instance since I upgrade the Brand is not working properly,  there's a bugs on the latest version"", 'created_at': datetime.datetime(2024, 8, 16, 3, 17, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296176594, 'issue_id': 2467812991, 'author': 'bobotdls', 'body': ""Hi any target date when this bugs will fix. It's really affect our operation"", 'created_at': datetime.datetime(2024, 8, 19, 10, 3, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296234905, 'issue_id': 2467812991, 'author': 'donnieferdian', 'body': 'hi @bobotdls you can use alternative way by using the import function', 'created_at': datetime.datetime(2024, 8, 19, 10, 26, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301155700, 'issue_id': 2467812991, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 21, 5, 23, 44, tzinfo=datetime.timezone.utc)}]","bobotdls on (2024-08-16 03:17:38 UTC): Yup I agree, all of out instance since I upgrade the Brand is not working properly,  there's a bugs on the latest version

bobotdls on (2024-08-19 10:03:28 UTC): Hi any target date when this bugs will fix. It's really affect our operation

donnieferdian (Issue Creator) on (2024-08-19 10:26:23 UTC): hi @bobotdls you can use alternative way by using the import function

frappe-pr-bot on (2024-08-21 05:23:44 UTC): :tada: This issue has been resolved in version 15.33.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2467749752,issue,open,,Subscriptions: Strange Invoice Price resulting from #42221,"some how the price of the resulting invoices is higher/lower than it should be, depending on the distance of the subscription period to the current date. A strange margin is added.

Start Date: 16th June
Interval: 1 Month
Price of Subscriotion: 80€

Create 2 Invoices with new force action

Invoice#1: 154,67€
Invoice#2: 72,26€
![grafik](https://github.com/user-attachments/assets/deda6fed-66ce-44fc-984a-73d0c525a925)

_Originally posted by @david-loe in https://github.com/frappe/erpnext/issues/42221#issuecomment-2289662224_
            ",david-loe,2024-08-15 09:45:18+00:00,['ruthra-kumar'],2024-08-22 11:40:03+00:00,,https://github.com/frappe/erpnext/issues/42779,[],"[{'comment_id': 2301669976, 'issue_id': 2467749752, 'author': 'ruthra-kumar', 'body': 'What type of subscription price is set? \r\n\r\nCould you share the Subscription plan details.\r\n\r\n@david-loe', 'created_at': datetime.datetime(2024, 8, 21, 10, 8, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301745974, 'issue_id': 2467749752, 'author': 'david-loe', 'body': '![Screenshot_20240821-124354.png](https://github.com/user-attachments/assets/4cb048c8-ec8e-49f7-9254-8e1fb57ad785)', 'created_at': datetime.datetime(2024, 8, 21, 10, 44, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301887400, 'issue_id': 2467749752, 'author': 'ruthra-kumar', 'body': 'Can\'t replicate.\r\n\r\nWith the similar Subscription plan setup and an Item Price of 100 /-, Invoices do get created with the Price list rate.\r\n<img width=""1089"" alt=""Screenshot 2024-08-21 at 5 34 11\u202fPM"" src=""https://github.com/user-attachments/assets/4068e325-c2aa-4caf-85db-e15b05653538"">\r\n\r\n<img width=""1049"" alt=""Screenshot 2024-08-21 at 5 32 28\u202fPM"" src=""https://github.com/user-attachments/assets/9e5cf745-a7d9-45d4-a00c-62e16f45e020"">\r\n<img width=""1150"" alt=""Screenshot 2024-08-21 at 5 32 45\u202fPM"" src=""https://github.com/user-attachments/assets/06652def-d57e-484b-b460-9b70bdd65f27"">', 'created_at': datetime.datetime(2024, 8, 21, 12, 4, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301893391, 'issue_id': 2467749752, 'author': 'ruthra-kumar', 'body': 'Is the customer billed in company currency or a foreign currency?', 'created_at': datetime.datetime(2024, 8, 21, 12, 7, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302424575, 'issue_id': 2467749752, 'author': 'david-loe', 'body': ""Strange.. Currency is always EUR\r\n\r\nI just tried again and the same Error accours:\r\nStart Date: 16th June\r\nInterval: 1 Month\r\n\r\nCreate 2 Invoices with new force action\r\n\r\nInvoice#1: 178,67€\r\nInvoice#2: 95,48€\r\n\r\n\r\nI'm using the following Versions:\r\nERPNext: v15.33.0\r\nFrappe Framework: v15.38.0"", 'created_at': datetime.datetime(2024, 8, 21, 15, 51, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302428059, 'issue_id': 2467749752, 'author': 'david-loe', 'body': '![grafik](https://github.com/user-attachments/assets/54b17341-c01a-4cc6-93fb-f6b4bc8c9086)', 'created_at': datetime.datetime(2024, 8, 21, 15, 53, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302438426, 'issue_id': 2467749752, 'author': 'david-loe', 'body': '@ruthra-kumar \r\nI found the difference:\r\nWhen turning `Generate Invoice At` to `Beginning of the current subscription period` everything is fine.\r\nBut when using `End of current subscription period` the wrong price accours', 'created_at': datetime.datetime(2024, 8, 21, 15, 58, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304352043, 'issue_id': 2467749752, 'author': 'ruthra-kumar', 'body': ""> @ruthra-kumar I found the difference: When turning `Generate Invoice At` to `Beginning of the current subscription period` everything is fine. But when using `End of current subscription period` the wrong price accours\r\n\r\nYup. It's replicable when `End of current subscription period` is set."", 'created_at': datetime.datetime(2024, 8, 22, 10, 45, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304444126, 'issue_id': 2467749752, 'author': 'ruthra-kumar', 'body': ""@david-loe \r\nThis is caused by 'Prorate' option in 'Subscription Settings'. If you want the price list rate, disable it."", 'created_at': datetime.datetime(2024, 8, 22, 11, 33, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304456464, 'issue_id': 2467749752, 'author': 'david-loe', 'body': 'Okay\n\nBut this calculation then ist false. The resulting price when using prorate should never exceed 100% of the default pirce.\nThis may never accoured before as one was not able to generate subscribtion invoices from the past, but with the new force action the calculation has to be revisited I think.', 'created_at': datetime.datetime(2024, 8, 22, 11, 40, 2, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Assginee) on (2024-08-21 10:08:28 UTC): What type of subscription price is set? 

Could you share the Subscription plan details.

@david-loe

david-loe (Issue Creator) on (2024-08-21 10:44:40 UTC): ![Screenshot_20240821-124354.png](https://github.com/user-attachments/assets/4cb048c8-ec8e-49f7-9254-8e1fb57ad785)

ruthra-kumar (Assginee) on (2024-08-21 12:04:42 UTC): Can't replicate.

With the similar Subscription plan setup and an Item Price of 100 /-, Invoices do get created with the Price list rate.
<img width=""1089"" alt=""Screenshot 2024-08-21 at 5 34 11 PM"" src=""https://github.com/user-attachments/assets/4068e325-c2aa-4caf-85db-e15b05653538"">

<img width=""1049"" alt=""Screenshot 2024-08-21 at 5 32 28 PM"" src=""https://github.com/user-attachments/assets/9e5cf745-a7d9-45d4-a00c-62e16f45e020"">
<img width=""1150"" alt=""Screenshot 2024-08-21 at 5 32 45 PM"" src=""https://github.com/user-attachments/assets/06652def-d57e-484b-b460-9b70bdd65f27"">

ruthra-kumar (Assginee) on (2024-08-21 12:07:58 UTC): Is the customer billed in company currency or a foreign currency?

david-loe (Issue Creator) on (2024-08-21 15:51:40 UTC): Strange.. Currency is always EUR

I just tried again and the same Error accours:
Start Date: 16th June
Interval: 1 Month

Create 2 Invoices with new force action

Invoice#1: 178,67€
Invoice#2: 95,48€


I'm using the following Versions:
ERPNext: v15.33.0
Frappe Framework: v15.38.0

david-loe (Issue Creator) on (2024-08-21 15:53:22 UTC): ![grafik](https://github.com/user-attachments/assets/54b17341-c01a-4cc6-93fb-f6b4bc8c9086)

david-loe (Issue Creator) on (2024-08-21 15:58:21 UTC): @ruthra-kumar 
I found the difference:
When turning `Generate Invoice At` to `Beginning of the current subscription period` everything is fine.
But when using `End of current subscription period` the wrong price accours

ruthra-kumar (Assginee) on (2024-08-22 10:45:11 UTC): Yup. It's replicable when `End of current subscription period` is set.

ruthra-kumar (Assginee) on (2024-08-22 11:33:12 UTC): @david-loe 
This is caused by 'Prorate' option in 'Subscription Settings'. If you want the price list rate, disable it.

david-loe (Issue Creator) on (2024-08-22 11:40:02 UTC): Okay

But this calculation then ist false. The resulting price when using prorate should never exceed 100% of the default pirce.
This may never accoured before as one was not able to generate subscribtion invoices from the past, but with the new force action the calculation has to be revisited I think.

"
2466155914,issue,closed,completed,Patch Error on Update to ERPNext version 14.72.0,"### Information about bug

Update fails when the system runs the patch
erpnext.patches.v14_0.update_pos_return_ledger_entries
with error frappe.exceptions.ValidationError: Cannot Resubmit Ledger entries for vouchers in Closed fiscal year.

### Module

accounts

### Version

erpnext version 14.72.0
frappe version 14.78.2

### Installation method

self-hosted

### Relevant log output / Stack trace / Full Error Message.

 frappe.exceptions.ValidationError: Cannot Resubmit Ledger entries for vouchers in Closed fiscal year",danjeremynavarro,2024-08-14 15:16:43+00:00,['ruthra-kumar'],2024-09-02 00:10:00+00:00,2024-08-16 11:56:07+00:00,https://github.com/frappe/erpnext/issues/42776,"[('bug', None)]","[{'comment_id': 2289132790, 'issue_id': 2466155914, 'author': 'danjeremynavarro', 'body': 'https://github.com/frappe/erpnext/pull/42720 Commit', 'created_at': datetime.datetime(2024, 8, 14, 15, 36, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2292968381, 'issue_id': 2466155914, 'author': 'ruthra-kumar', 'body': 'Thanks for reporting.\r\n\r\nWill have to modify the patch to handle vouchers within and outside closed fiscal years differently.', 'created_at': datetime.datetime(2024, 8, 16, 7, 20, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2293372725, 'issue_id': 2466155914, 'author': 'ruthra-kumar', 'body': 'Fixed in https://github.com/frappe/erpnext/pull/42791', 'created_at': datetime.datetime(2024, 8, 16, 11, 56, 7, tzinfo=datetime.timezone.utc)}]","danjeremynavarro (Issue Creator) on (2024-08-14 15:36:09 UTC): https://github.com/frappe/erpnext/pull/42720 Commit

ruthra-kumar (Assginee) on (2024-08-16 07:20:14 UTC): Thanks for reporting.

Will have to modify the patch to handle vouchers within and outside closed fiscal years differently.

ruthra-kumar (Assginee) on (2024-08-16 11:56:07 UTC): Fixed in https://github.com/frappe/erpnext/pull/42791

"
2466101601,issue,closed,completed,Chart of Accounts Importer  Error: TypeError: 'NoneType' object is not subscriptable,"### Information about bug

I have created a new company in erpnext, while trying to import the chart of accounts via Chart of Accounts Importer tool, I am constantly receiving this error: TypeError: 'NoneType' object is not subscriptable

Full error log:
### App Versions
```
{
	""erpnext"": ""15.32.1"",
	""frappe"": ""15.37.0"",
	""hrms"": ""15.25.2"",
	""print_designer"": ""1.4.0"",
	""samtech"": ""0.0.1""
}
```
### Route
```
Form/Chart of Accounts Importer/Chart of Accounts Importer
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/chart_of_accounts_importer/chart_of_accounts_importer.py"", line 175, in get_coa
    forest = build_forest(data)
             ^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/chart_of_accounts_importer/chart_of_accounts_importer.py"", line 270, in build_forest
    path = return_parent(data, account_name)[::-1]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
TypeError: 'NoneType' object is not subscriptable

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""file_name"": ""/private/files/Chart of Accounts Importer.csv"",
		""parent"": ""All Accounts"",
		""doctype"": ""Chart of Accounts Importer"",
		""is_root"": true
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/erpnext.accounts.doctype.chart_of_accounts_importer.chart_of_accounts_importer.get_coa"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""TypeError: 'NoneType' object is not subscriptable"",
	""exc_type"": ""TypeError"",
	""_exc_source"": ""erpnext (app)""
}
```

Please can someone help in fixing or knowing why this issue is happening. This is for a production environment which is suppose to go live after 4 days.

### Module

accounts

### Version

### App Versions
```
{
	""erpnext"": ""15.32.1"",
	""frappe"": ""15.37.0"",
	""hrms"": ""15.25.2"",
	""print_designer"": ""1.4.0"",
	""samtech"": ""0.0.1""
}


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",moizsami,2024-08-14 14:53:47+00:00,[],2024-08-30 00:09:34+00:00,2024-08-14 15:15:45+00:00,https://github.com/frappe/erpnext/issues/42775,"[('bug', None)]","[{'comment_id': 2289088419, 'issue_id': 2466101601, 'author': 'moizsami', 'body': 'I tried deleting the values in the Account Number column and then the import was successful. \r\n\r\nI checked its a Data field, and I am having text and numbers in the field, not sure why receiving NoneType Object.\r\n\r\nAnyways issue is in my data I guess', 'created_at': datetime.datetime(2024, 8, 14, 15, 15, 45, tzinfo=datetime.timezone.utc)}]","moizsami (Issue Creator) on (2024-08-14 15:15:45 UTC): I tried deleting the values in the Account Number column and then the import was successful. 

I checked its a Data field, and I am having text and numbers in the field, not sure why receiving NoneType Object.

Anyways issue is in my data I guess

"
2465536517,issue,open,,Separate account for capturing Sales / Purchase Returns,"Currently, Sales / Purchase Returns use the same account as it's parent. `Sales` account for Incomes and `Stock Received But Not Billed` for Expenses.

There are requests for provisions in Company master to configure a separate account for both Sales / Purchase Returns.",ruthra-kumar,2024-08-14 11:05:43+00:00,[],2024-08-27 11:12:19+00:00,,https://github.com/frappe/erpnext/issues/42772,"[('feature-request', None)]","[{'comment_id': 2312262613, 'issue_id': 2465536517, 'author': 'ruthra-kumar', 'body': '## Current Design bottlenecks:\r\n### Reconciliation\r\nReconciliation tool can process only one Receivable / Payable account at a time. So, it would require major refactor to handle returns from different accounts.', 'created_at': datetime.datetime(2024, 8, 27, 11, 12, 19, tzinfo=datetime.timezone.utc)}]","ruthra-kumar (Issue Creator) on (2024-08-27 11:12:19 UTC): ## Current Design bottlenecks:
### Reconciliation
Reconciliation tool can process only one Receivable / Payable account at a time. So, it would require major refactor to handle returns from different accounts.

"
2465014175,issue,open,,Payment Request link to Terms,"While making a payment in Payment Entry, we can link the payment done against PO to a particular Payment Term in the table in the PO. 

<img width=""543"" alt=""image"" src=""https://github.com/user-attachments/assets/d2d6f550-cd7b-4271-9401-dd48bac7f30f"">

Such linking is missing for Payment Request. Infact payment request comes to accounting department from user department and the dept initiates payment to be done against agreed terms eg. 20% advance to be paid against PO.",nakul80,2024-08-14 06:33:35+00:00,[],2024-08-14 06:35:59+00:00,,https://github.com/frappe/erpnext/issues/42762,"[('feature-request', None)]",[],
2463244614,issue,open,,Subcontracting Alternative Item bug,"### Information about bug

Description:
We have an issue with subcontracting orders where alternative raw materials are not handled correctly.

Steps to Reproduce:

Create a subcontracting order for 200 units.
Transfer 100 units of BOM raw material.
Transfer 100 units of alternative raw material.
Create a subcontracting receipt for the order.

<img width=""771"" alt=""stock"" src=""https://github.com/user-attachments/assets/58382505-cdde-457e-8e20-2b8387495436"">


Expected Behavior:
The ERP system should consider both BOM raw material and alternative raw material for the receipt.

Actual Behavior:
The ERP system only considers the last transferred raw material for the full receipt quantity.


https://github.com/user-attachments/assets/f97af170-360b-4c2d-9fad-7c1fbb702456





### Module

manufacturing

### Version

ERPNext: v15.32.0 (version-15)

Frappe Framework: v15.37.0 (version-15)


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",Akash8682,2024-08-13 12:34:11+00:00,[],2024-08-13 12:43:18+00:00,,https://github.com/frappe/erpnext/issues/42754,"[('bug', None)]",[],
2463171044,issue,closed,completed,Sales invoice submission or saving error,"### Information about bug

While submitting or saving a sales invoice i get an error as detailed below 

### Module

selling

### Version

""crm"": ""2.0.0-dev"",
	""erpnext"": ""15.32.1"",
	""frappe"": ""15.37.0"",
	""healthcare"": ""16.0.0-dev"",
	""posawesome"": ""6.3.0""

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""crm"": ""2.0.0-dev"",
	""education"": ""15.5.0"",
	""erpnext"": ""15.32.1"",
	""frappe"": ""15.37.0"",
	""healthcare"": ""16.0.0-dev"",
	""hrms"": ""16.0.0-dev"",
	""lms"": ""2.0.0"",
	""payments"": ""0.0.1"",
	""posawesome"": ""6.3.0""
}
```
### Route
```
Form/Sales Invoice/ACC-SINV-2024-00001
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1319, in composer
    hooks.append(frappe.get_attr(handler))
                 ^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1758, in get_attr
    return getattr(get_module(modulename), methodname)
                   ^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1476, in get_module
    return importlib.import_module(modulename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/importlib/__init__.py"", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""<frozen importlib._bootstrap>"", line 1387, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 1360, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 1331, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 935, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 995, in exec_module
  File ""<frozen importlib._bootstrap>"", line 488, in _call_with_frames_removed
  File ""apps/posawesome/posawesome/posawesome/api/invoice.py"", line 12, in <module>
    from posawesome.posawesome.api.posapp import get_company_domain
  File ""apps/posawesome/posawesome/posawesome/api/posapp.py"", line 15, in <module>
    from erpnext.stock.doctype.batch.batch import (
ImportError: cannot import name 'set_batch_nos' from 'erpnext.stock.doctype.batch.batch' (apps/erpnext/erpnext/stock/doctype/batch/batch.py)

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""ACC-SINV-2024-00001\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-08-13 14:12:03.008637\"",\""modified\"":\""2024-08-13 14:47:19.318347\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":0,\""title\"":\""Mech Energy Limited\"",\""naming_series\"":\""ACC-SINV-.YYYY.-\"",\""customer\"":\""Mech Energy Limited\"",\""customer_name\"":\""Mech Energy Limited\"",\""company\"":\""Cyberforge Innovations Limited\"",\""company_tax_id\"":\""B20240403VGDDYK\"",\""posting_date\"":\""2024-08-13\"",\""posting_time\"":\""14:12:2.758364\"",\""set_posting_time\"":0,\""due_date\"":\""2024-08-13\"",\""is_pos\"":0,\""posa_is_printed\"":0,\""is_consolidated\"":0,\""is_return\"":0,\""update_outstanding_for_self\"":1,\""update_billed_amount_in_sales_order\"":0,\""update_billed_amount_in_delivery_note\"":1,\""is_debit_note\"":0,\""currency\"":\""USD\"",\""conversion_rate\"":1,\""selling_price_list\"":\""Standard Selling\"",\""price_list_currency\"":\""USD\"",\""plc_conversion_rate\"":1,\""ignore_pricing_rule\"":0,\""update_stock\"":0,\""total_qty\"":26,\""total_net_weight\"":0,\""base_total\"":1398,\""base_net_total\"":1398,\""total\"":1398,\""net_total\"":1398,\""exempt_from_sales_tax\"":0,\""tax_category\"":\""\"",\""taxes_and_charges\"":\""South Sudan Sales Tax 18% - CIL\"",\""posa_delivery_charges_rate\"":0,\""base_total_taxes_and_charges\"":0,\""total_taxes_and_charges\"":0,\""base_grand_total\"":1398,\""base_rounding_adjustment\"":0,\""base_rounded_total\"":1398,\""base_in_words\"":\""\"",\""grand_total\"":1398,\""rounding_adjustment\"":0,\""use_company_roundoff_cost_center\"":0,\""rounded_total\"":1398,\""in_words\"":\""\"",\""total_advance\"":0,\""outstanding_amount\"":1398,\""disable_rounded_total\"":0,\""apply_discount_on\"":\""Grand Total\"",\""base_discount_amount\"":0,\""is_cash_or_non_trade_discount\"":0,\""additional_discount_percentage\"":0,\""discount_amount\"":0,\""other_charges_calculation\"":\""<div class=\\\""tax-break-up\\\"" style=\\\""overflow-x: auto;\\\"">\\n\\t<table class=\\\""table table-bordered table-hover\\\"">\\n\\t\\t<thead>\\n\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-left\\\"">Item</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-right\\\"">Taxable Amount</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th class=\\\""text-right\\\"">Sales Tax  18%</th>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t</tr>\\n\\t\\t</thead>\\n\\t\\t<tbody>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>001</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t$ 240.00\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(18.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$ 43.20\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>005</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t$ 50.00\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(18.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$ 9.00\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>007</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t$ 1,008.00\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(18.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$ 181.44\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>008</td>\\n\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t$ 100.00\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\""text-right\\\"">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t(18.0%)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$ 18.00\\n\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\n\\t\\t</tbody>\\n\\t</table>\\n</div>\"",\""total_billing_hours\"":0,\""total_billing_amount\"":0,\""base_paid_amount\"":0,\""paid_amount\"":0,\""base_change_amount\"":0,\""change_amount\"":0,\""allocate_advances_automatically\"":0,\""only_include_allocated_payments\"":0,\""write_off_amount\"":0,\""base_write_off_amount\"":0,\""write_off_outstanding_amount_automatically\"":0,\""redeem_loyalty_points\"":0,\""loyalty_points\"":0,\""loyalty_amount\"":0,\""customer_address\"":\""Mech Energy Limited-Billing\"",\""address_display\"":\""Opposite Midan Rainbow Hai Kuwait<br>\\nJuba, CES 00211<br>South Sudan\"",\""contact_person\"":\""Mech Energy Limited-Mech Energy Limited\"",\""contact_display\"":\""Mech Energy Limited\"",\""contact_mobile\"":\""+211 920 101 024\"",\""contact_email\"":\""info@mechenergyltd.com\"",\""shipping_address_name\"":\""Mech Energy Limited-Billing\"",\""shipping_address\"":\""Opposite Midan Rainbow Hai Kuwait<br>\\nJuba, CES 00211<br>South Sudan\"",\""ignore_default_payment_terms_template\"":0,\""po_no\"":\""PO001\"",\""po_date\"":\""2024-07-26\"",\""debit_to\"":\""1310 - Debtors - CIL\"",\""party_account_currency\"":\""USD\"",\""is_opening\"":\""No\"",\""amount_eligible_for_commission\"":1398,\""commission_rate\"":0,\""total_commission\"":0,\""letter_head\"":\""CyberFoge Innovations Limited\"",\""group_same_items\"":0,\""language\"":\""en-US\"",\""status\"":\""Draft\"",\""is_internal_customer\"":0,\""is_discounted\"":0,\""doctype\"":\""Sales Invoice\"",\""posa_offers\"":[],\""items\"":[{\""name\"":\""0uouhk9vnk\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-08-13 14:12:03.008637\"",\""modified\"":\""2024-08-13 14:12:03.008637\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":1,\""has_item_scanned\"":0,\""item_code\"":\""001\"",\""item_name\"":\""001 - Website Hosting\"",\""description\"":\""001\"",\""item_group\"":\""Services\"",\""qty\"":12,\""stock_uom\"":\""Service\"",\""uom\"":\""Service\"",\""conversion_factor\"":1,\""stock_qty\"":12,\""price_list_rate\"":20,\""base_price_list_rate\"":20,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":0,\""discount_amount\"":0,\""base_rate_with_margin\"":0,\""rate\"":20,\""amount\"":240,\""base_rate\"":20,\""base_amount\"":240,\""posa_offer_applied\"":0,\""posa_is_offer\"":0,\""stock_uom_rate\"":0,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":20,\""net_amount\"":240,\""base_net_rate\"":20,\""base_net_amount\"":240,\""delivered_by_supplier\"":0,\""income_account\"":\""4110 - Sales - CIL\"",\""is_fixed_asset\"":0,\""expense_account\"":\""5111 - Cost of Goods Sold - CIL\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""Stores - CIL\"",\""quality_inspection\"":\""MAT-QA-2024-00001\"",\""use_serial_batch_fields\"":1,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":0,\""item_tax_rate\"":\""{}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SAL-ORD-2024-00001\"",\""so_detail\"":\""vfbf2gslhu\"",\""delivery_note\"":\""MAT-DN-2024-00001\"",\""dn_detail\"":\""vmb21akafu\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - CIL\"",\""page_break\"":0,\""parent\"":\""ACC-SINV-2024-00001\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""},{\""name\"":\""0uoumntavq\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-08-13 14:12:03.008637\"",\""modified\"":\""2024-08-13 14:12:03.008637\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":2,\""has_item_scanned\"":0,\""item_code\"":\""005\"",\""item_name\"":\""005 - Domain Registration or Subscription\"",\""description\"":\""<div><p> Domain Registration or Subscription</p></div>\"",\""item_group\"":\""Services\"",\""qty\"":1,\""stock_uom\"":\""Service\"",\""uom\"":\""Service\"",\""conversion_factor\"":1,\""stock_qty\"":1,\""price_list_rate\"":50,\""base_price_list_rate\"":50,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":0,\""discount_amount\"":0,\""base_rate_with_margin\"":0,\""rate\"":50,\""amount\"":50,\""base_rate\"":50,\""base_amount\"":50,\""posa_offer_applied\"":0,\""posa_is_offer\"":0,\""stock_uom_rate\"":0,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":50,\""net_amount\"":50,\""base_net_rate\"":50,\""base_net_amount\"":50,\""delivered_by_supplier\"":0,\""income_account\"":\""4110 - Sales - CIL\"",\""is_fixed_asset\"":0,\""expense_account\"":\""5111 - Cost of Goods Sold - CIL\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""Stores - CIL\"",\""quality_inspection\"":\""MAT-QA-2024-00002\"",\""use_serial_batch_fields\"":1,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":0,\""item_tax_rate\"":\""{}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SAL-ORD-2024-00001\"",\""so_detail\"":\""vfbf9q3mp2\"",\""delivery_note\"":\""MAT-DN-2024-00001\"",\""dn_detail\"":\""vmb2m9112u\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - CIL\"",\""page_break\"":0,\""parent\"":\""ACC-SINV-2024-00001\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""},{\""name\"":\""0uourvmie8\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-08-13 14:12:03.008637\"",\""modified\"":\""2024-08-13 14:12:03.008637\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":3,\""has_item_scanned\"":0,\""item_code\"":\""007\"",\""item_name\"":\""007 - Email Hosting \"",\""description\"":\""007\"",\""item_group\"":\""Services\"",\""qty\"":12,\""stock_uom\"":\""Service\"",\""uom\"":\""Service\"",\""conversion_factor\"":1,\""stock_qty\"":12,\""price_list_rate\"":84,\""base_price_list_rate\"":84,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":0,\""discount_amount\"":0,\""base_rate_with_margin\"":0,\""rate\"":84,\""amount\"":1008,\""base_rate\"":84,\""base_amount\"":1008,\""posa_offer_applied\"":0,\""posa_is_offer\"":0,\""stock_uom_rate\"":0,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":84,\""net_amount\"":1008,\""base_net_rate\"":84,\""base_net_amount\"":1008,\""delivered_by_supplier\"":0,\""income_account\"":\""4110 - Sales - CIL\"",\""is_fixed_asset\"":0,\""expense_account\"":\""5111 - Cost of Goods Sold - CIL\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""Stores - CIL\"",\""quality_inspection\"":\""MAT-QA-2024-00003\"",\""use_serial_batch_fields\"":1,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":0,\""item_tax_rate\"":\""{}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SAL-ORD-2024-00001\"",\""so_detail\"":\""vfbf7l06g2\"",\""delivery_note\"":\""MAT-DN-2024-00001\"",\""dn_detail\"":\""vmb2lmia1a\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - CIL\"",\""page_break\"":0,\""parent\"":\""ACC-SINV-2024-00001\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""},{\""name\"":\""0uoultmle4\"",\""owner\"":\""Administrator\"",\""creation\"":\""2024-08-13 14:12:03.008637\"",\""modified\"":\""2024-08-13 14:12:03.008637\"",\""modified_by\"":\""Administrator\"",\""docstatus\"":0,\""idx\"":4,\""has_item_scanned\"":0,\""item_code\"":\""008\"",\""item_name\"":\""008 - Support and Maintenance\"",\""description\"":\""008 - Support and Maintenance\"",\""item_group\"":\""Services\"",\""qty\"":1,\""stock_uom\"":\""Service\"",\""uom\"":\""Service\"",\""conversion_factor\"":1,\""stock_qty\"":1,\""price_list_rate\"":100,\""base_price_list_rate\"":100,\""margin_type\"":\""\"",\""margin_rate_or_amount\"":0,\""rate_with_margin\"":0,\""discount_percentage\"":0,\""discount_amount\"":0,\""base_rate_with_margin\"":0,\""rate\"":100,\""amount\"":100,\""base_rate\"":100,\""base_amount\"":100,\""posa_offer_applied\"":0,\""posa_is_offer\"":0,\""stock_uom_rate\"":0,\""is_free_item\"":0,\""grant_commission\"":1,\""net_rate\"":100,\""net_amount\"":100,\""base_net_rate\"":100,\""base_net_amount\"":100,\""delivered_by_supplier\"":0,\""income_account\"":\""4110 - Sales - CIL\"",\""is_fixed_asset\"":0,\""expense_account\"":\""5111 - Cost of Goods Sold - CIL\"",\""enable_deferred_revenue\"":0,\""weight_per_unit\"":0,\""total_weight\"":0,\""warehouse\"":\""Stores - CIL\"",\""quality_inspection\"":\""MAT-QA-2024-00004\"",\""use_serial_batch_fields\"":1,\""allow_zero_valuation_rate\"":0,\""incoming_rate\"":0,\""item_tax_rate\"":\""{}\"",\""actual_batch_qty\"":0,\""actual_qty\"":0,\""sales_order\"":\""SAL-ORD-2024-00001\"",\""so_detail\"":\""vfbf8ktpf8\"",\""delivery_note\"":\""MAT-DN-2024-00001\"",\""dn_detail\"":\""vmb2cbf7or\"",\""delivered_qty\"":0,\""cost_center\"":\""Main - CIL\"",\""page_break\"":0,\""parent\"":\""ACC-SINV-2024-00001\"",\""parentfield\"":\""items\"",\""parenttype\"":\""Sales Invoice\"",\""doctype\"":\""Sales Invoice Item\""}],\""packed_items\"":[],\""posa_coupons\"":[],\""taxes\"":[],\""sales_team\"":[],\""payment_schedule\"":[],\""pricing_rules\"":[],\""advances\"":[],\""timesheets\"":[],\""payments\"":[],\""__onload\"":{\""make_payment_via_journal_entry\"":0},\""__last_sync_on\"":\""2024-08-13T11:54:34.931Z\"",\""cost_center\"":\""Main - CIL\"",\""__unsaved\"":1}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery370051537781519557961"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 2327,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""ImportError: cannot import name 'set_batch_nos' from 'erpnext.stock.doctype.batch.batch' (apps/erpnext/erpnext/stock/doctype/batch/batch.py)"",
	""exc_type"": ""ImportError"",
	""_exc_source"": ""posawesome (app)""
}
```
```
",mubarack,2024-08-13 11:58:45+00:00,[],2024-08-30 00:09:40+00:00,2024-08-14 04:28:37+00:00,https://github.com/frappe/erpnext/issues/42752,"[('bug', None)]","[{'comment_id': 2287831223, 'issue_id': 2463171044, 'author': 'Nihantra-Patel', 'body': 'Error from the posawesome side, not from the ERPNext side. so please raise the issue on posawesome github.', 'created_at': datetime.datetime(2024, 8, 14, 4, 28, 37, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-14 04:28:37 UTC): Error from the posawesome side, not from the ERPNext side. so please raise the issue on posawesome github.

"
2462678165,issue,open,,Job cards are not auto generating from work order for multi workstations performing similar parallel operation ,In a manufacturing scenario currently Job cards are not auto generating from work order for multi workstations performing similar parallel operation and not distributing the work order planned quantities equally or as per capacity among job cards. Currently it generates only one job card per workstation with full quantity of work order. ,brijendraa,2024-08-13 08:02:56+00:00,[],2024-08-13 08:02:56+00:00,,https://github.com/frappe/erpnext/issues/42738,"[('feature-request', None)]",[],
2460509423,issue,closed,completed,ERPnext Manufacturing module Work order Picklist source warehouse ,"### Information about bug

Hello ,
our company is using batch pre preparation module for production. 
so we are preparing material on site based on FIFO for multiple batches.
 so we prepare 5 to 7 batches , each batch takes 11-18 hours depend on the grade we are producing.
so we have plan consumption based on Bill of material and we have physical consumption based on operation consumption.

in system we are doing it the same way as below.
we create Work order then we create pick list after we create the pick list and confirms material availability on site based on pick list we transfer material on system to Work in progress.

so when we complete this cycle we need to wait for around 13 hours to have visibility of how much we actually consumed so we can close the work order. in the same time we need to start 2nd batch on exactly 7 hours from first batch running, so in system when we try to create pick list , the system will take 2nd batch pick list from work in progress warehouse instead of raw material warehouse which is the default source warehouse in the work order item list. as screen shot

so we are facing this issue note that we are using ERPnext: v12.18.0 (version-12)

what kind of suggestion you guys suggest to solve this issue.

![212](https://github.com/user-attachments/assets/d7c460ad-9acf-4f55-bcde-de8e11a399d7)





### Module

stock, manufacturing

### Version

ERPnext: v12.18.0 (version-12)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",aalkhaldi47,2024-08-12 09:43:02+00:00,[],2024-09-02 00:09:59+00:00,2024-08-12 12:08:06+00:00,https://github.com/frappe/erpnext/issues/42722,"[('bug', None)]","[{'comment_id': 2283797816, 'issue_id': 2460509423, 'author': 'Nihantra-Patel', 'body': ""If it's a bug, it hasn't been fixed in version 13 or older. because they stopped fixing bugs for that version. It might still have problems. It's best to upgrade to version 14 or 15 because lots of bugs fixed in the new version.\r\n\r\nVersion | EOL | Branch\r\n-- | -- | --\r\nVersion 12 | End of 2022 | version-12\r\nVersion 13 | End of 2023 | version-13\r\nVersion 14 | End of 2024 (planned) | version-14\r\nVersion 15 | End of 2026 (planned) | version-15\r\nBleeding edge | N/A | develop\r\n\r\n\r\nFor more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).\r\n\r\nThank You!"", 'created_at': datetime.datetime(2024, 8, 12, 12, 8, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285849035, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'Hello Patel , \r\n\r\nunfortunately i try v 15 but the issue remines the same. pick list ignores the source warehouse and always take materials remaining in the work in progress warehouse.', 'created_at': datetime.datetime(2024, 8, 13, 9, 54, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285868964, 'issue_id': 2460509423, 'author': 'Nihantra-Patel', 'body': 'Please share the video of process in version 15, also share the version of v15.', 'created_at': datetime.datetime(2024, 8, 13, 10, 4, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286037304, 'issue_id': 2460509423, 'author': 'Nihantra-Patel', 'body': 'And source warehouse comes from the item master. If you define the Default Warehouse in Item Defaults and then create a work order, it will come automatically. \r\n\r\n![image](https://github.com/user-attachments/assets/2267ba9b-daa4-4b34-baff-505e8dc581f9)\r\n\r\n\r\nOtherwise, it comes from the work order source warehouse.\r\n\r\n![image](https://github.com/user-attachments/assets/eefb8c89-754e-4d0a-a4f5-a20a26ba3e0b)', 'created_at': datetime.datetime(2024, 8, 13, 11, 41, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287876506, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'Hello Patel, \r\nthese are the steps that I already done before. \r\n![erp1](https://github.com/user-attachments/assets/919de78e-3017-4fdb-88b7-0821f8e9da5f)\r\n![erp2](https://github.com/user-attachments/assets/4d4a5334-4364-420f-9b54-22e4ed03e726)\r\n\r\nWO1 setting \r\n![erp WO1-1](https://github.com/user-attachments/assets/cd37f78f-18f5-4c4c-8996-cbe312c305cf)\r\nPicklist created against the WO. \r\n![erp WO1-2](https://github.com/user-attachments/assets/dcfe7b04-25ac-471e-bb9f-8b0de65d3e7e)\r\nthen I done stock entry to transfer the pick list to work in progress warehouse.\r\n\r\nWO2 setting \r\n![erp WO2-1](https://github.com/user-attachments/assets/a4ca9ff7-2bac-448b-8a92-c9f6fc906c5e)\r\nPick list created against The WO , it shows source is work in progress which i didnt select as source warehouse when i created the work order even the material meta data showing different warehouse.\r\n![erp WO2-2](https://github.com/user-attachments/assets/b95a6591-f6f4-4e39-b567-d176739ba07d)', 'created_at': datetime.datetime(2024, 8, 14, 5, 19, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287877011, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'note that i used import method to all items so setting all the same for all items in ERP', 'created_at': datetime.datetime(2024, 8, 14, 5, 20, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287877812, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'and this is system v \r\n![frapp](https://github.com/user-attachments/assets/92584d02-9e2a-4449-9200-1e94f1f50f86)', 'created_at': datetime.datetime(2024, 8, 14, 5, 20, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287992756, 'issue_id': 2460509423, 'author': 'Nihantra-Patel', 'body': ""The warehouse listed in the work order will appear in the warehouse pick list. If you haven't selected a source warehouse in the work order, it will use the item's default warehouse. When you create a pick list, it will automatically choose the same warehouse as specified in the work order item. We have tested this process two or three times and did not find any issues."", 'created_at': datetime.datetime(2024, 8, 14, 6, 57, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288077221, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'you are correct if there is no item related to the work order in the work-in-progress warehouse. \r\nbut if there is a material already transferred to work on progress related to another work order it will be chosen from there instead of taking it from the Raw material warehouse.\r\nso what i understand is that the pick list will prioritize items in work in progress regardless of the source warehouse set in the work order or item master data.\r\n\r\ntry to make 2 work orders and make pick list for 1st one and make a stock entry against it to work in progress. \r\nthen go to the 2nd work order and create a pick list you will find what I mean.', 'created_at': datetime.datetime(2024, 8, 14, 7, 49, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2295150478, 'issue_id': 2460509423, 'author': 'aalkhaldi47', 'body': 'i fixed it , i changed Raw material warehouse to be under unique group , then i forced pick list to take source from the group i created. this is the only way to force pick list to take from a source warehouse', 'created_at': datetime.datetime(2024, 8, 18, 7, 5, 31, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-12 12:08:06 UTC): If it's a bug, it hasn't been fixed in version 13 or older. because they stopped fixing bugs for that version. It might still have problems. It's best to upgrade to version 14 or 15 because lots of bugs fixed in the new version.

Version | EOL | Branch
-- | -- | --
Version 12 | End of 2022 | version-12
Version 13 | End of 2023 | version-13
Version 14 | End of 2024 (planned) | version-14
Version 15 | End of 2026 (planned) | version-15
Bleeding edge | N/A | develop


For more information, please refer to the [guidelines](https://github.com/frappe/erpnext/wiki/Supported-Versions).

Thank You!

aalkhaldi47 (Issue Creator) on (2024-08-13 09:54:28 UTC): Hello Patel , 

unfortunately i try v 15 but the issue remines the same. pick list ignores the source warehouse and always take materials remaining in the work in progress warehouse.

Nihantra-Patel on (2024-08-13 10:04:52 UTC): Please share the video of process in version 15, also share the version of v15.

Nihantra-Patel on (2024-08-13 11:41:28 UTC): And source warehouse comes from the item master. If you define the Default Warehouse in Item Defaults and then create a work order, it will come automatically. 

![image](https://github.com/user-attachments/assets/2267ba9b-daa4-4b34-baff-505e8dc581f9)


Otherwise, it comes from the work order source warehouse.

![image](https://github.com/user-attachments/assets/eefb8c89-754e-4d0a-a4f5-a20a26ba3e0b)

aalkhaldi47 (Issue Creator) on (2024-08-14 05:19:26 UTC): Hello Patel, 
these are the steps that I already done before. 
![erp1](https://github.com/user-attachments/assets/919de78e-3017-4fdb-88b7-0821f8e9da5f)
![erp2](https://github.com/user-attachments/assets/4d4a5334-4364-420f-9b54-22e4ed03e726)

WO1 setting 
![erp WO1-1](https://github.com/user-attachments/assets/cd37f78f-18f5-4c4c-8996-cbe312c305cf)
Picklist created against the WO. 
![erp WO1-2](https://github.com/user-attachments/assets/dcfe7b04-25ac-471e-bb9f-8b0de65d3e7e)
then I done stock entry to transfer the pick list to work in progress warehouse.

WO2 setting 
![erp WO2-1](https://github.com/user-attachments/assets/a4ca9ff7-2bac-448b-8a92-c9f6fc906c5e)
Pick list created against The WO , it shows source is work in progress which i didnt select as source warehouse when i created the work order even the material meta data showing different warehouse.
![erp WO2-2](https://github.com/user-attachments/assets/b95a6591-f6f4-4e39-b567-d176739ba07d)

aalkhaldi47 (Issue Creator) on (2024-08-14 05:20:01 UTC): note that i used import method to all items so setting all the same for all items in ERP

aalkhaldi47 (Issue Creator) on (2024-08-14 05:20:51 UTC): and this is system v 
![frapp](https://github.com/user-attachments/assets/92584d02-9e2a-4449-9200-1e94f1f50f86)

Nihantra-Patel on (2024-08-14 06:57:59 UTC): The warehouse listed in the work order will appear in the warehouse pick list. If you haven't selected a source warehouse in the work order, it will use the item's default warehouse. When you create a pick list, it will automatically choose the same warehouse as specified in the work order item. We have tested this process two or three times and did not find any issues.

aalkhaldi47 (Issue Creator) on (2024-08-14 07:49:26 UTC): you are correct if there is no item related to the work order in the work-in-progress warehouse. 
but if there is a material already transferred to work on progress related to another work order it will be chosen from there instead of taking it from the Raw material warehouse.
so what i understand is that the pick list will prioritize items in work in progress regardless of the source warehouse set in the work order or item master data.

try to make 2 work orders and make pick list for 1st one and make a stock entry against it to work in progress. 
then go to the 2nd work order and create a pick list you will find what I mean.

aalkhaldi47 (Issue Creator) on (2024-08-18 07:05:31 UTC): i fixed it , i changed Raw material warehouse to be under unique group , then i forced pick list to take source from the group i created. this is the only way to force pick list to take from a source warehouse

"
2460121438,issue,open,,Issue in Gross Profit report with Predated dated invoices/delivery notes,"### Information about bug

When we create a predated invoices or delivery note. on submission incoming rate is calculated. and gross profit report is generated accordingly.

Later because its predated document the system creates ""Repost item Valuation entries"" once the repost is completed the system is unable to update gross profit report based on updated cost of the item. 


### Module

stock, selling

### Version

tested on V13 V14 and V15

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",maveezmh,2024-08-12 06:12:17+00:00,[],2024-08-12 06:13:04+00:00,,https://github.com/frappe/erpnext/issues/42717,"[('bug', None)]",[],
2460046792,issue,closed,completed,"Need by default tick on ""Ignore System Generated Credit / Debit Notes"" in General Ledger","Yesterday we received a much needed and awaited development from frappe related to system generated Credit/Debit Notes journal entry in GL. Need to tick the check box by default for “Ignore System Generated Credit / Debit Notes“ as it is showing for “Ignore Exchange Rate Revaluation Journals“. As in auto mail, Process Statement Of Accounts , reporting, confirmation, bulk operations, etc. the system uses unfiltered data i.e. untick check box for “Ignore System Generated Credit / Debit Notes“ and which is again not solving the issue for which the development had done.

![image](https://github.com/user-attachments/assets/0bf46835-1c0d-490d-949b-8a075e693ad9)
",smbcatalyst,2024-08-12 05:02:59+00:00,['ruthra-kumar'],2024-08-30 00:09:43+00:00,2024-08-13 05:40:17+00:00,https://github.com/frappe/erpnext/issues/42716,"[('feature-request', None)]",[],
2459551662,issue,open,,Analyze Leads and Prospect Growth with Data Analytics,"Leads can be analyzed with Apriori Algorithm according to their past records. As a result of this analysis, an automatic Prospect will be created. LEADs with a high probability of conversion will be contacted quickly and the sales conversion process will be accelerated.",fzozyurt,2024-08-11 11:33:10+00:00,[],2024-08-11 11:45:10+00:00,,https://github.com/frappe/erpnext/issues/42714,"[('feature-request', None)]","[{'comment_id': 2282730709, 'issue_id': 2459551662, 'author': 'fzozyurt', 'body': 'İnput:\r\nX= First Product Purchased\r\nY= Co-purchased Product\r\nN= Number of times two products were purchased together\r\n\r\nCalculation Formul: \r\n1- Support = Freq(X,Y) / N | The probability that product X and Y will be purchased together\r\n\r\n2- Confidence = Conficence(X,Y) /Freq(X) | The probability that X and Y co-occur in the location of product X\r\n\r\n3- Lift = Support(X,Y) / Support(X)*Support(Y) | Probability that Y is purchased if X is purchased', 'created_at': datetime.datetime(2024, 8, 11, 11, 45, 8, tzinfo=datetime.timezone.utc)}]","fzozyurt (Issue Creator) on (2024-08-11 11:45:08 UTC): İnput:
X= First Product Purchased
Y= Co-purchased Product
N= Number of times two products were purchased together

Calculation Formul: 
1- Support = Freq(X,Y) / N | The probability that product X and Y will be purchased together

2- Confidence = Conficence(X,Y) /Freq(X) | The probability that X and Y co-occur in the location of product X

3- Lift = Support(X,Y) / Support(X)*Support(Y) | Probability that Y is purchased if X is purchased

"
2459441282,issue,open,,Balance Sheet Report is a total mess,"### Information about bug

The Balance Sheet in v15 is messed up—the values are doubled for each parent in the hierarchy, and the period column is duplicated. This duplication might help you pinpoint the issue.

![image](https://github.com/user-attachments/assets/c0612065-8fa7-4b65-aeb5-ab48877c2db0)

![image](https://github.com/user-attachments/assets/8b8f824d-73a1-44f7-9960-7a677784e7d3)



### Module

accounts

### Version

Frappe Version: v15.33.3
ERPNext Version: v15.29.2

### Installation method

docker

### Additional Note  on Fiscal Year
Fiscal Year is based on Bikram Samvat which starts and ends at mid of July every year. For instance:
Fiscal Year (2081-2082) Start Date : 2024 July 16, End Date: 2025 July 16

It is not always July 16 - July 16 though. For example:
Fiscal Year(2080-2081) Start Date: 2023 July 17, End Date: 2024 July 15


### Relevant log output / Stack trace / Full Error Message.

_No response_",lekhnath,2024-08-11 06:04:12+00:00,[],2024-08-25 09:10:56+00:00,,https://github.com/frappe/erpnext/issues/42708,"[('bug', None)]",[],
2459345370,issue,closed,completed,Message Account is required when using Include Payment (POS) in  sales invoice,"### Information about bug

i got this message when using pos in sales invoice
![image](https://github.com/user-attachments/assets/cca51ddd-0913-4880-8cb5-6af9ee8e2b13)
in console
`Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 37, in savedocs
    doc.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 390, in _save
    self.run_post_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1131, in run_post_save_methods
    self.run_method(""on_submit"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 458, in on_submit
    self.make_gl_entries()
  File ""apps/erpnext/erpnext/accounts/doctype/sales_invoice/sales_invoice.py"", line 1176, in make_gl_entries
    make_gl_entries(
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 47, in make_gl_entries
    save_entries(gl_map, adv_adj, update_outstanding, from_repost)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 386, in save_entries
    make_entry(entry, adv_adj, update_outstanding, from_repost)
  File ""apps/erpnext/erpnext/accounts/general_ledger.py"", line 397, in make_entry
    gle.submit()
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1048, in submit
    return self._submit()
           ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1031, in _submit
    return self.save()
           ^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1094, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/gl_entry/gl_entry.py"", line 81, in validate
    self.check_mandatory()
  File ""apps/erpnext/erpnext/accounts/doctype/gl_entry/gl_entry.py"", line 126, in check_mandatory
    frappe.throw(_(""{0} is required"").format(_(self.meta.get_label(k))))
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Account is required`  
 the payment tab in sales invoice 
![image](https://github.com/user-attachments/assets/2a672700-19f3-49ea-bd01-06f7fe07358a)
sales invoice
![image](https://github.com/user-attachments/assets/b2b06030-30d9-420e-a25a-b1391f2ecd15)


### Module

accounts

### Version

ERPNext: v15.30.0 (version-15)
Frappe Framework: v15.35.0 (version-15)


### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",MhmedRjb,2024-08-11 00:17:23+00:00,[],2024-08-26 00:09:23+00:00,2024-08-11 01:10:20+00:00,https://github.com/frappe/erpnext/issues/42707,"[('bug', None)]","[{'comment_id': 2282337403, 'issue_id': 2459345370, 'author': 'MhmedRjb', 'body': 'it works now with no change at all :D', 'created_at': datetime.datetime(2024, 8, 11, 1, 10, 20, tzinfo=datetime.timezone.utc)}]","MhmedRjb (Issue Creator) on (2024-08-11 01:10:20 UTC): it works now with no change at all :D

"
2459233527,issue,open,,Provision for Production (Manufacturing) Rejections,"Provision for Production (Manufacturing) rejections covering semi-finished or finished goods is totally missing (not mentioning here about scrap).  Also when rejected quantity is entered that time it is very important to keep in mind that consumption of raw material (if any is there at that level of BOM) would already be done as per produced quantity i.e accepted qty+rejected qty. Rejected quantity can be moved to rejected warehouse for rework / reuse or scrap out. Also important here is that with the accepted quantity only job cards and work orders should be appropriately updated. Without this feature manufacturing module is incomplete.  This request should be given highest priority in the category of features enhancement.

Also very important feature is to capture the REASONS for rejections. Manufacturing companies does analysis based on the various reasons of rejections, whether it is at Purchase Receipt OR during production.
",brijendraa,2024-08-10 17:55:47+00:00,[],2024-08-13 08:11:28+00:00,,https://github.com/frappe/erpnext/issues/42706,"[('feature-request', None)]",[],
2459089401,issue,open,,ERPNEXT Initial Inventory Merge Issue,"### Problem Description

In ERPNEXT, when performing initial stock operations for two items (A and B), an error was found in the inventory display after merging the items. The specific steps are as follows:

1. Create the first initial stock entry: Item A, quantity 10 units.
2. Create the second initial stock entry: Item B, quantity 5 units.
3. Merge item B into item A.
4. After a long period of time, check the stock entries and find that the balance quantity of item A is 5 units, while the initial stock quantity of item A is ignored, and the system only retains the initial stock of item B.

### Expected Result

After merging the items, the balance quantity of item A should be 15 units (10 units of A + 5 units of B).

### Actual Result

After merging the items, the balance quantity of item A is still 5 units, and the record of the first initial stock entry seems to have been ignored.",kanedai,2024-08-10 13:41:29+00:00,[],2024-08-10 13:50:37+00:00,,https://github.com/frappe/erpnext/issues/42704,"[('bug', None)]",[],
2459013866,issue,closed,completed,Stock Reconciliation auto-fetching of existing quantity bug with Serial and Batch Bundle transactions,"### Information about bug

Stock Reconciliation shows incorrect “auto-fetching of existing quantity” when the item has Batch number and has transactions both with Batch number only and Serial and Batch Bundle.
Obviously the auto-fetch in Stock Reconciliation has not been updated with Serial and Batch Bundle.
please check https://discuss.frappe.io/t/stock-reconciliation-bug-with-serial-and-batch-bundle/130635

### Module

accounts, stock

### Version

ERPNext: v15.32.1 (version-15)
Frappe Framework: v15.37.0 (version-15)

### Installation method

easy-install

### Relevant log output / Stack trace / Full Error Message.

_No response_",toofun666,2024-08-10 09:53:56+00:00,[],2024-09-14 00:09:40+00:00,2024-08-30 07:25:46+00:00,https://github.com/frappe/erpnext/issues/42702,"[('bug', None)]","[{'comment_id': 2315878562, 'issue_id': 2459013866, 'author': 'toofun666', 'body': '![image](https://github.com/user-attachments/assets/2902843d-efbd-45ee-98b2-ee727cbb2a9f)\r\nShould be the correctr Stock Ledger of a healthy Stock Reconciliation implementation with SABB', 'created_at': datetime.datetime(2024, 8, 28, 17, 14, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2320327975, 'issue_id': 2459013866, 'author': 'toofun666', 'body': 'The problem is with the expired batches at the time of reconciliation. So, we close this.', 'created_at': datetime.datetime(2024, 8, 30, 7, 25, 46, tzinfo=datetime.timezone.utc)}]","toofun666 (Issue Creator) on (2024-08-28 17:14:43 UTC): ![image](https://github.com/user-attachments/assets/2902843d-efbd-45ee-98b2-ee727cbb2a9f)
Should be the correctr Stock Ledger of a healthy Stock Reconciliation implementation with SABB

toofun666 (Issue Creator) on (2024-08-30 07:25:46 UTC): The problem is with the expired batches at the time of reconciliation. So, we close this.

"
2457812943,issue,closed,completed,Time Zone Issues at POS Close Shift,"### Information about bug

System Settings >> Myanmar
![image](https://github.com/user-attachments/assets/19599873-e60c-47eb-86b0-d8ed52d2177f)
POS Closing Shift
![image](https://github.com/user-attachments/assets/2e5fd54d-8795-448b-bb19-cd8e59d81538)
Start Time > End Time 

POS Invoice >> Posting Time shown 2
![image](https://github.com/user-attachments/assets/a0a2ad6d-27aa-4ce9-901e-46d43537d44c)

when made close shift POS invoice didn't attached at close shift


### Module

selling

### Version

Installed Apps
Email Delivery Service: v0.0.1 (HEAD)

ERPNext: v15.32.0 (HEAD)

Frappe Framework: v15.37.0 (HEAD)

Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",thida-bcn,2024-08-09 12:28:58+00:00,[],2024-08-30 00:09:41+00:00,2024-08-13 10:55:58+00:00,https://github.com/frappe/erpnext/issues/42701,"[('bug', None)]","[{'comment_id': 2278958945, 'issue_id': 2457812943, 'author': 'thida-bcn', 'body': '[Video](https://1drv.ms/u/s!ApZZW_p_lZ54gZMSEKNUf9icMr2BdA?e=x3MQ6N)', 'created_at': datetime.datetime(2024, 8, 10, 3, 20, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285960424, 'issue_id': 2457812943, 'author': 'Nihantra-Patel', 'body': ""Issue is related to the user's time zone, so update it accordingly. We tested it on both the local and Frappe Cloud side.\r\n\r\n**Local Test:**\r\n\r\nhttps://github.com/user-attachments/assets/c3fdf467-2057-487c-9bb4-829b36672f0e\r\n\r\n**Frappe Cloud Test:**\r\n\r\nhttps://github.com/user-attachments/assets/a2fe8d26-8e66-4bbb-a4e5-a973d5853bcb"", 'created_at': datetime.datetime(2024, 8, 13, 10, 55, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286138177, 'issue_id': 2457812943, 'author': 'thida-bcn', 'body': 'Thanks\r\nWe need to update timezone for user manually \r\nActually system time zone must be set as default', 'created_at': datetime.datetime(2024, 8, 13, 12, 29, 24, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-08-10 03:20:06 UTC): [Video](https://1drv.ms/u/s!ApZZW_p_lZ54gZMSEKNUf9icMr2BdA?e=x3MQ6N)

Nihantra-Patel on (2024-08-13 10:55:58 UTC): Issue is related to the user's time zone, so update it accordingly. We tested it on both the local and Frappe Cloud side.

**Local Test:**

https://github.com/user-attachments/assets/c3fdf467-2057-487c-9bb4-829b36672f0e

**Frappe Cloud Test:**

https://github.com/user-attachments/assets/a2fe8d26-8e66-4bbb-a4e5-a973d5853bcb

thida-bcn (Issue Creator) on (2024-08-13 12:29:24 UTC): Thanks
We need to update timezone for user manually 
Actually system time zone must be set as default

"
2457534126,issue,closed,completed,Warehouse - Delete function is not working,"### Information about bug

Cannot delete a warehouse, while trying to delete a message shows up Warehouse [warehouse name] can not be deleted as quantity exists for Item [item name] even though all the transaction in relation to that warehouse have been deleted

### Module

stock

### Version

Frappe Framework: v15.37.0
ERPNext: v15.31.5

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",bibinqcs,2024-08-09 09:43:23+00:00,[],2024-08-30 00:09:38+00:00,2024-08-14 09:59:23+00:00,https://github.com/frappe/erpnext/issues/42699,"[('bug', None)]","[{'comment_id': 2288342394, 'issue_id': 2457534126, 'author': 'Nihantra-Patel', 'body': ""Hey, you understand a little bit of logic. If it is linked in a warehouse transaction/master, how to delete the warehouse. Check the video I have given below, there is one such warehouse, I have done transactions in it, so it cannot be deleted, but yes if it is not linked to anyone, you can delete it. I created a test warehouse and when I delete it it gets deleted easily. Because this has no transaction/master link. So it's not a bug.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/61b7024f-5b09-49f9-9c76-a2e5973414ef"", 'created_at': datetime.datetime(2024, 8, 14, 9, 59, 23, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-14 09:59:23 UTC): Hey, you understand a little bit of logic. If it is linked in a warehouse transaction/master, how to delete the warehouse. Check the video I have given below, there is one such warehouse, I have done transactions in it, so it cannot be deleted, but yes if it is not linked to anyone, you can delete it. I created a test warehouse and when I delete it it gets deleted easily. Because this has no transaction/master link. So it's not a bug.


https://github.com/user-attachments/assets/61b7024f-5b09-49f9-9c76-a2e5973414ef

"
2457520819,issue,closed,completed,Warehouse - Disable Rename Pop up / Modal,"### Information about bug

Rename option for warehouse is non existent in that case why allow the user to click the name to trigger the rename modal or pop up gives the wrong idea that you can rename the warehouse and after clicking rename it does not this gives the impression that rename function is not working.

Kindly disable the rename modal

### Module

stock

### Version

Frappe Framework: v15.37.0
ERPNext: v15.31.5

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",bibinqcs,2024-08-09 09:35:57+00:00,[],2024-09-06 00:09:38+00:00,2024-08-14 11:02:52+00:00,https://github.com/frappe/erpnext/issues/42698,"[('bug', None), ('released', None)]","[{'comment_id': 2301153524, 'issue_id': 2457520819, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.72.2 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.72.2)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 21, 5, 21, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301155802, 'issue_id': 2457520819, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 15.33.3 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.3)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 21, 5, 23, 50, tzinfo=datetime.timezone.utc)}]","frappe-pr-bot on (2024-08-21 05:21:29 UTC): :tada: This issue has been resolved in version 14.72.2 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.72.2)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

frappe-pr-bot on (2024-08-21 05:23:50 UTC): :tada: This issue has been resolved in version 15.33.3 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v15.33.3)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2457151082,issue,closed,completed,Payment Entry against Employee Advanced ( Reference Doctype must be one of . at 0x10ac5d380> ),"### Information about bug

![Screenshot 2024-08-09 at 11 10 15 AM](https://github.com/user-attachments/assets/829ed601-08ce-42c0-9a6c-8cb10ed6da4f)


https://github.com/user-attachments/assets/4f0aa396-a2c1-4e92-976c-6a95cf01e7e0



### Module

accounts, HR

### Version

ERPNext: v15.32.1 (version-15)

Frappe Framework: v15.37.0 (version-15)

Gameplan: v0.0.1 (main)

Helpdesk: v0.10.0 (main)

Frappe HR: v15.25.2 (version-15)

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
request.js:473 Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 359, in _save
    return self.insert()
           ^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 291, in insert
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 83, in validate
    self.validate_reference_documents()
  File ""apps/erpnext/erpnext/accounts/doctype/payment_entry/payment_entry.py"", line 496, in validate_reference_documents
    frappe.throw(
  File ""apps/frappe/frappe/__init__.py"", line 645, in throw
    msgprint(
  File ""apps/frappe/frappe/__init__.py"", line 610, in msgprint
    _raise_exception()
  File ""apps/frappe/frappe/__init__.py"", line 561, in _raise_exception
    raise exc
frappe.exceptions.ValidationError: Reference Doctype must be one of . at 0x10d546ea0>
```
",dineshpanchal93,2024-08-09 05:45:21+00:00,[],2024-12-12 00:11:25+00:00,2024-11-27 06:10:46+00:00,https://github.com/frappe/erpnext/issues/42690,"[('bug', None)]","[{'comment_id': 2277197415, 'issue_id': 2457151082, 'author': 'dineshpanchal93', 'body': '@ruchamahabal', 'created_at': datetime.datetime(2024, 8, 9, 5, 49, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2277297357, 'issue_id': 2457151082, 'author': 'Nihantra-Patel', 'body': ""But I don't face any such issue in the this version 🤔\r\n\r\n\r\nhttps://github.com/user-attachments/assets/b3a691b4-a8fb-4fb6-8be1-5db95948417e"", 'created_at': datetime.datetime(2024, 8, 9, 7, 13, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2277707615, 'issue_id': 2457151082, 'author': 'dineshpanchal93', 'body': 'Oh, I see let me check at my end.  We have not done any customization !!!', 'created_at': datetime.datetime(2024, 8, 9, 11, 8, 25, tzinfo=datetime.timezone.utc)}]","dineshpanchal93 (Issue Creator) on (2024-08-09 05:49:47 UTC): @ruchamahabal

Nihantra-Patel on (2024-08-09 07:13:10 UTC): But I don't face any such issue in the this version 🤔


https://github.com/user-attachments/assets/b3a691b4-a8fb-4fb6-8be1-5db95948417e

dineshpanchal93 (Issue Creator) on (2024-08-09 11:08:25 UTC): Oh, I see let me check at my end.  We have not done any customization !!!

"
2456708187,issue,open,,Datetime for due date in tasks and todos,"**Is your feature request related to a problem? Please describe.**
 Scheduling task's and todo's at a specific time is a basic function. In order to schedule different task's and todo's over the course of a day, it is essential that you can set times for them.

**Describe the solution you'd like**
Change the type of due date of tasks and todo from Date to Datetime. As it apparently was in version 13 for tasks.

This feature has been requested many times:
https://discuss.frappe.io/t/why-has-tasks-no-time-for-expected-start-and-end-dates-anymore/117046

https://github.com/frappe/erpnext/issues/6663


",SamuelHelbling,2024-08-08 22:04:05+00:00,['mihir-kandoi'],2025-01-09 07:05:58+00:00,,https://github.com/frappe/erpnext/issues/42688,"[('feature-request', None)]","[{'comment_id': 2576266694, 'issue_id': 2456708187, 'author': 'GoldenScrew', 'body': 'I think this issue very important', 'created_at': datetime.datetime(2025, 1, 7, 21, 36, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2579311566, 'issue_id': 2456708187, 'author': 'mihir-kandoi', 'body': '@rohitwaghchaure @nabinhait This feature requires changes in both ERPNext as well as the Frappe framework. What shall be done?', 'created_at': datetime.datetime(2025, 1, 9, 7, 5, 52, tzinfo=datetime.timezone.utc)}]","GoldenScrew on (2025-01-07 21:36:19 UTC): I think this issue very important

mihir-kandoi (Assginee) on (2025-01-09 07:05:52 UTC): @rohitwaghchaure @nabinhait This feature requires changes in both ERPNext as well as the Frappe framework. What shall be done?

"
2455034304,issue,closed,completed,Status Filter does not work properly,"### Information about bug

Status filter set as ""to bill""
Filter set as status-not equals-completed but system still shows documents with status as completed. see the picture. 
Check this in Purchase Receipt  and Delivery Notes. Probably this error in all the doc where this ""status filter"" is used.


![2024-08-08_09-51-00](https://github.com/user-attachments/assets/f7cbcd85-abe2-4a88-ad77-c1cd5143fb90)



### Module

buying, selling

### Version

ERPNext: v15.31.5 (version-15)
Frappe Framework: v15.36.1 (version-15)
but this bug is since version 14

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",stepsibg,2024-08-08 07:02:55+00:00,[],2024-08-24 00:09:44+00:00,2024-08-08 07:46:27+00:00,https://github.com/frappe/erpnext/issues/42675,"[('bug', None)]","[{'comment_id': 2275168737, 'issue_id': 2455034304, 'author': 'Nihantra-Patel', 'body': 'Kindly upgrade your version 15 because everything is working fine. No problems were encountered in the latest version 15.\r\n\r\nhttps://github.com/user-attachments/assets/b4889549-35ed-4813-8afc-9ada0b7c0f7b', 'created_at': datetime.datetime(2024, 8, 8, 7, 46, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275208264, 'issue_id': 2455034304, 'author': 'stepsibg', 'body': 'we are on v15.31.5 already', 'created_at': datetime.datetime(2024, 8, 8, 8, 7, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275213222, 'issue_id': 2455034304, 'author': 'stepsibg', 'body': 'that is our video of the case\r\n\r\n\r\nhttps://github.com/user-attachments/assets/f7ac7876-a74c-4ce5-a9a8-270eef3da4cf', 'created_at': datetime.datetime(2024, 8, 8, 8, 10, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275219695, 'issue_id': 2455034304, 'author': 'Nihantra-Patel', 'body': ""Maybe it's a caching issue. You can also check the commit log on GitHub. If the update status and update list have not changed in the last six months. we also checked on the frappe cloud side but everything worked properly.\r\n\r\nIf anything is override in your custom app then check it from your end!"", 'created_at': datetime.datetime(2024, 8, 8, 8, 13, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-08 07:46:27 UTC): Kindly upgrade your version 15 because everything is working fine. No problems were encountered in the latest version 15.

https://github.com/user-attachments/assets/b4889549-35ed-4813-8afc-9ada0b7c0f7b

stepsibg (Issue Creator) on (2024-08-08 08:07:26 UTC): we are on v15.31.5 already

stepsibg (Issue Creator) on (2024-08-08 08:10:08 UTC): that is our video of the case


https://github.com/user-attachments/assets/f7ac7876-a74c-4ce5-a9a8-270eef3da4cf

Nihantra-Patel on (2024-08-08 08:13:33 UTC): Maybe it's a caching issue. You can also check the commit log on GitHub. If the update status and update list have not changed in the last six months. we also checked on the frappe cloud side but everything worked properly.

If anything is override in your custom app then check it from your end!

"
2453266513,issue,open,,Journal Entry to Knock Off Supplier and Customer is Not Showing in Payment Reconciliation,"### Information about bug

**Description:**
When attempting to use a journal entry to knock off both a supplier and a customer, the entry does not appear in the payment reconciliation module. This issue is causing problems in reconciling payments for accounts that serve as both suppliers and customers.

**Steps to Reproduce:**

Create a journal entry to knock off an amount for a party that is both a supplier and a customer.
Navigate to the Payment Reconciliation module.
Attempt to reconcile the payment.

**Expected Behavior:**
The journal entry should appear in the payment reconciliation module, allowing for proper reconciliation.

**Actual Behavior:**
The journal entry does not show up in the payment reconciliation module, making it impossible to reconcile payments for accounts that are both suppliers and customers.

**Additional Information:**
![image](https://github.com/user-attachments/assets/79479189-b3e0-427e-b340-37b8981959ec)
![image](https://github.com/user-attachments/assets/34801c3e-4aa0-46e9-9b35-21b8fdb2efe9)
![image](https://github.com/user-attachments/assets/86384ab6-fb5e-4fca-b484-1096d49c065f)
We have already set the Common party account for this,
![image](https://github.com/user-attachments/assets/6395556c-b7d2-4c7a-8617-b285da15f1fd)


Impact:
This bug is impacting our ability to efficiently manage and reconcile payments for accounts that act as both suppliers and customers. It is essential for accurate financial reporting and management.

### Module

accounts

### Version

ERPNext version: v15.30.0 (version-15)
Frappe version: v15.35.0 (version-15)


### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",parasonit,2024-08-07 11:37:45+00:00,[],2024-08-08 04:11:21+00:00,,https://github.com/frappe/erpnext/issues/42665,"[('bug', None)]",[],
2453214545,issue,closed,completed,Failure to select and view Account Receivable entries in General Ledger,"### Information about bug

Provides this error
### App Versions
```
{
	""erpnext"": ""15.14.4"",
	""frappe"": ""15.15.0"",
	""hrms"": ""15.12.0""
}
```
### Route
```
query-report/General Ledger
```
### Traceback
```
Syntax error in query:
select
			name as gl_entry, posting_date, account, party_type, party,
			voucher_type, voucher_subtype, voucher_no, 
			cost_center, project, 
			against_voucher_type, against_voucher, account_currency,
			against, is_opening, creation , debit, credit, debit_in_account_currency,
		credit_in_account_currency 
		from `tabGL Entry`
		where company=%(company)s and account in %(account)s and (posting_date >=%(from_date)s or is_opening = 'Yes') and (posting_date <=%(to_date)s or is_opening = 'Yes') and (finance_book in (%(company_fb)s, '') OR finance_book IS NULL) and is_cancelled = 0
		order by posting_date, creation {'company': 'STARLINK GULF LIMITED', 'from_date': '2024-07-22', 'to_date': '2024-07-28', 'account': [], 'party': [], 'group_by': 'Group by Voucher (Consolidated)', 'cost_center': [], 'project': [], 'include_dimensions': 1, 'include_default_book_entries': 1, 'company_currency': 'TZS', 'account_currency': 'TZS', 'company_fb': None}
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 110, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1682, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 863, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 219, in run
    result = generate_report_result(report, filters, user, custom_columns, is_tree, parent_field)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 863, in wrapper_fn
    retval = fn(*args, **get_newargs(fn, kwargs))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 81, in generate_report_result
    res = get_report_result(report, filters) or []
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/query_report.py"", line 62, in get_report_result
    res = report.execute_script_report(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 162, in execute_script_report
    res = self.execute_module(filters)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/core/doctype/report/report.py"", line 179, in execute_module
    return frappe.get_attr(method_name)(frappe._dict(filters))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/general_ledger/general_ledger.py"", line 49, in execute
    res = get_result(filters, account_details)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/general_ledger/general_ledger.py"", line 152, in get_result
    gl_entries = get_gl_entries(filters, accounting_dimensions)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/accounts/report/general_ledger/general_ledger.py"", line 199, in get_gl_entries
    gl_entries = frappe.db.sql(
                 ^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/database/database.py"", line 234, in sql
    self._cursor.execute(query, values)
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/cursors.py"", line 322, in _query
    conn.query(q)
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 822, in _read_query_result
    result.read()
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 1200, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""env/lib/python3.11/site-packages/pymysql/connections.py"", line 772, in _read_packet
    packet.raise_for_error()
  File ""env/lib/python3.11/site-packages/pymysql/protocol.py"", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File ""env/lib/python3.11/site-packages/pymysql/err.py"", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1064, ""You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') and (posting_date >='2024-07-22' or is_opening = 'Yes') and (posting_date <...' at line 9"")

```
### Request Data
```
{
	""type"": ""GET"",
	""args"": {
		""report_name"": ""General Ledger"",
		""filters"": ""{\""company\"":\""STARLINK GULF LIMITED\"",\""from_date\"":\""2024-07-22\"",\""to_date\"":\""2024-07-28\"",\""account\"":[\""Account receivable - STGL\""],\""party\"":[],\""group_by\"":\""Group by Voucher (Consolidated)\"",\""cost_center\"":[],\""project\"":[],\""include_dimensions\"":1,\""include_default_book_entries\"":1}"",
		""ignore_prepared_report"": false,
		""are_default_filters"": false
	},
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.query_report.run"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""pymysql.err.ProgrammingError: (1064, \""You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ') and (posting_date >='2024-07-22' or is_opening = 'Yes') and (posting_date <...' at line 9\"")"",
	""exc_type"": ""ProgrammingError""
}
```

### Module

accounts

### Version

Frappe Version - 15.15.0
ERPNext Version - 15.14.0

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",remigius974,2024-08-07 11:09:10+00:00,[],2024-08-24 00:09:43+00:00,2024-08-08 06:47:32+00:00,https://github.com/frappe/erpnext/issues/42663,"[('bug', None)]","[{'comment_id': 2275073262, 'issue_id': 2453214545, 'author': 'Nihantra-Patel', 'body': 'Kindly upgrade your version 15 because everything is working fine because lots of bugs fixed in the new version. \r\nNo problems were encountered in the latest version 15.', 'created_at': datetime.datetime(2024, 8, 8, 6, 47, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275393233, 'issue_id': 2453214545, 'author': 'remigius974', 'body': 'well my erpnext version is up to date with v15.14.4 unless this is not the updated version. And this happened once this week and i cant seem to reproduce it cause it doesnt appear anymore', 'created_at': datetime.datetime(2024, 8, 8, 9, 40, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275398038, 'issue_id': 2453214545, 'author': 'Nihantra-Patel', 'body': 'So please update your version because currently erpnext version running v15.32.1', 'created_at': datetime.datetime(2024, 8, 8, 9, 42, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2276579266, 'issue_id': 2453214545, 'author': 'remigius974', 'body': 'thank you', 'created_at': datetime.datetime(2024, 8, 8, 20, 14, 32, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-08 06:47:32 UTC): Kindly upgrade your version 15 because everything is working fine because lots of bugs fixed in the new version. 
No problems were encountered in the latest version 15.

remigius974 (Issue Creator) on (2024-08-08 09:40:19 UTC): well my erpnext version is up to date with v15.14.4 unless this is not the updated version. And this happened once this week and i cant seem to reproduce it cause it doesnt appear anymore

Nihantra-Patel on (2024-08-08 09:42:45 UTC): So please update your version because currently erpnext version running v15.32.1

remigius974 (Issue Creator) on (2024-08-08 20:14:32 UTC): thank you

"
2453204848,issue,closed,completed,Property setter for Unique property does not function as expected.,"### Information about bug

i changed the unique property(field_type=check) value in payment entry from 0 to 1 but still can generate non unique payment entry transactions(with non-unique reference numbers).

### Module

accounts

### Version

Frapper version - v15.15.0
ERPNext version - v15.14.4

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",remigius974,2024-08-07 11:03:55+00:00,[],2024-08-24 00:09:45+00:00,2024-08-08 06:50:03+00:00,https://github.com/frappe/erpnext/issues/42662,"[('bug', None)]","[{'comment_id': 2275076753, 'issue_id': 2453204848, 'author': 'Nihantra-Patel', 'body': 'Sometimes the property setter does not work unique scenario because a unique related function runs in the validate event.', 'created_at': datetime.datetime(2024, 8, 8, 6, 50, 3, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-08 06:50:03 UTC): Sometimes the property setter does not work unique scenario because a unique related function runs in the validate event.

"
2453097343,issue,closed,completed,Payment requests are not being deleted when deleting company transactions,"### Information about bug

When we want to delete a company's transactions, we go into company and select `Delete Transactions`. It creates a `Transaction Delete Record` and deletes the transactions. But this doesn't delete `Payment Request` docs while the related `Sales Invoice` docs are deleted. The transaction delete record completes successfully in this case too.

### Module

accounts

### Version

ERPNext 15.30.0
Frappe 15.35.0

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",IMS94,2024-08-07 10:07:50+00:00,[],2024-09-14 00:09:41+00:00,2024-08-29 09:46:00+00:00,https://github.com/frappe/erpnext/issues/42659,"[('bug', None)]",[],
2453070227,issue,open,,Account Settings -  make_payment_via_journal_entry is hidden  - docs dont match up,"### Information about bug

In the documentation under 
https://docs.erpnext.com/docs/user/manual/en/payment-entry#4-5-payments-using-journal-entry
is the settings shown.

in the doctype for the account_settings is the entry hidden - see the code at:

https://github.com/frappe/erpnext/blame/develop/erpnext/accounts/doctype/accounts_settings/accounts_settings.json#L122 


### Module

accounts

### Version

Frappe Framework: v15.36.1 (version-15)
ERPNext: v15.31.4 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",cwerner1,2024-08-07 09:54:58+00:00,[],2024-08-07 09:54:58+00:00,,https://github.com/frappe/erpnext/issues/42657,"[('bug', None)]",[],
2451513671,issue,open,,Tax Rate Not Getting Updated from Item Tax Template,"### Information about bug

The Tax Rate field in Sales Tax and Charges table is not getting updated in Sales Order. The Tax Calculation is correct based on the item tax template but the value is shown 12% instead of 18% which should also be fetched from the item tax template

<img width=""1440"" alt=""Screenshot 2024-08-06 at 11 54 43 PM"" src=""https://github.com/user-attachments/assets/247b479d-26c5-496b-aa5b-3ba9239e34ee"">


### Module

selling

### Version

Email Delivery Service: v0.0.1 (HEAD)
ERPNext: v15.31.3 (HEAD)
Frappe Framework: v15.36.1 (HEAD)
India Compliance: v15.12.0 (HEAD)
Print Designer: v1.4.0 (HEAD)

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

_No response_",ibhavik,2024-08-06 19:04:20+00:00,[],2024-08-06 19:04:20+00:00,,https://github.com/frappe/erpnext/issues/42656,"[('bug', None)]",[],
2450821035,issue,open,,Sales Invoice from Subscription is missing default Terms and Conditions,"### Information about bug

When a sales invoice is generated by a subscription the default company terms and conditions are missing.

Temporarily fixed by a server script:
```
if doc.tc_name is None and doc.terms is None:
    default_tc_name = frappe.db.get_value(""Company"", doc.company, ""default_selling_terms"")
    default_terms = frappe.db.get_value(""Terms and Conditions"", default_tc_name, ""terms"")
    doc.tc_name = default_tc_name
    doc.terms = default_terms
``` 

### Module

selling

### Version

ERPNext: v15.31.5
Frappe Framework: v15.36.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",david-loe,2024-08-06 12:55:51+00:00,[],2024-08-06 12:55:51+00:00,,https://github.com/frappe/erpnext/issues/42653,"[('bug', None)]",[],
2450711739,issue,closed,completed,payment request not showing- Login id-vanaja29@daffygroup.com ,"### Information about bug

We are not showing payment request in the list in login id-vanaja29@daffygroup.com 

And also purchase order not showing  in purchase order list


All issue attached 
kindly resolve the same.
![Payment request-06 8 2024](https://github.com/user-attachments/assets/a0097b68-4284-4e46-8de8-50204f83fa56)
 

### Module

accounts, buying, portal

### Version

Our site,-daffygroup.erpnext.com,

33f276af904d8160079b3d2dd705948c056ff9b

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

```shell
Ad also not showing  payment release option and not option for purchase order approval kindly do the needful.
```
",Daffygroup,2024-08-06 12:02:29+00:00,[],2024-08-24 00:09:48+00:00,2024-08-07 04:55:28+00:00,https://github.com/frappe/erpnext/issues/42652,"[('bug', None)]","[{'comment_id': 2272616658, 'issue_id': 2450711739, 'author': 'Nihantra-Patel', 'body': ""Because something restrictions are applied to that user.\r\n\r\n![image](https://github.com/user-attachments/assets/61d6a1ec-5dc6-4e4b-b135-10b6f4b4a59c)\r\n\r\nGo to the [User Permission](https://docs.erpnext.com/docs/user/manual/en/user-permissions) doctype, check the user's permissions, remove unnecessary ones, then reload and verify."", 'created_at': datetime.datetime(2024, 8, 7, 4, 55, 28, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-07 04:55:28 UTC): Because something restrictions are applied to that user.

![image](https://github.com/user-attachments/assets/61d6a1ec-5dc6-4e4b-b135-10b6f4b4a59c)

Go to the [User Permission](https://docs.erpnext.com/docs/user/manual/en/user-permissions) doctype, check the user's permissions, remove unnecessary ones, then reload and verify.

"
2450268993,issue,open,,Deferred Expense Bug in ERPNext v14.61.2,"### Information about bug

We’ve identified a bug in ERPNext version 14. When ""Book Deferred Entries Based On"" is set to ""Months,"" and a Purchase Invoice includes a service item with ""Enable Deferred Expense"" checked, the system fails to generate monthly deferred expense journal entries if the service start date is at the end of the month (e.g., 30th or 31st).

Upon reviewing Frappe version 15, we noticed an adjustment code that seems to address this issue. I have already brought this up during the Frappe Query Office Hour, and Mr. Nabin has acknowledged this pull request.

Would it be possible to backport this adjustment to ERPNext version 14.61.2? We believe this would greatly benefit users still on version 14.

The changes are in erpnext/erpnext/accounts/deferred_revenue.py as follows: 
`if not amount:
         prev_posting_date = end_date 
else:
      gl_posting_date = end_date prev_posting_date = None 
     # check if books nor frozen until endate: 
     if accounts_frozen_upto and getdate(end_date) <= getdate( accounts_frozen_upto): 
          gl_posting_date = get_last_day(add_days(accounts_frozen_upto, 1)) 
          prev_posting_date = end_date 
     if via_journal_entry: book_revenue_via_journal_entry( 
              doc,
              credit_account,
              debit_account,
              amount,
              base_amount,
              gl_posting_date,
              project, account_currency,
              item.cost_center,
              item,
              deferred_process,
              submit_journal_entry,
      ) else: 
              make_gl_entries( doc, credit_account, debit_account, against, amount, base_amount, gl_posting_date, project, account_currency, item.cost_center, item, deferred_process, )`

please kindly check this PR link https://github.com/frappe/erpnext/pull/42587, Thanks 









### Module

accounts

### Version

Frappe Framework: v14.63.0 (version-14)
ERPNext: v14.61.2 (version-14)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.

_No response_",aditya21y,2024-08-06 08:28:04+00:00,[],2024-08-06 08:28:04+00:00,,https://github.com/frappe/erpnext/issues/42647,"[('bug', None)]",[],
2449858483,issue,closed,completed,Item-Wise Sales Register,"at Item-Wise Sales Register, 
is this possible to add 'Item Code' Filter
",thida-bcn,2024-08-06 03:29:12+00:00,[],2024-08-24 00:09:47+00:00,2024-08-06 05:57:18+00:00,https://github.com/frappe/erpnext/issues/42635,"[('feature-request', None), ('released', None)]","[{'comment_id': 2270444620, 'issue_id': 2449858483, 'author': 'Nihantra-Patel', 'body': ""It's already added: https://github.com/frappe/erpnext/pull/41921\r\n\r\n![image](https://github.com/user-attachments/assets/d5ccee3a-990e-48be-afc6-ca52b1d959a1)"", 'created_at': datetime.datetime(2024, 8, 6, 5, 57, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2270753990, 'issue_id': 2449858483, 'author': 'thida-bcn', 'body': ""> It's already added: #41921\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/141945075/355328610-d5ccee3a-990e-48be-afc6-ca52b1d959a1.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjI5MzUwNDIsIm5iZiI6MTcyMjkzNDc0MiwicGF0aCI6Ii8xNDE5NDUwNzUvMzU1MzI4NjEwLWQ1Y2NlZTNhLTk5MGUtNDhiZS1hZmM2LWNhNTJiMWQ5NTlhMS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwODA2JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDgwNlQwODU5MDJaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT00MDM2YjU5ZjljNWZlZTQ4YjI5MGU5ZWU3MmY2ODg2NGI5N2FkZDVlYjhlMWViOWE5OTcxMDMxNWJjNTEzOTlhJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.koyAe6o2_AXWD5ojitjHkkwFd1jxv2nT57hCU2jYbF4)\r\n\r\nhello,\r\nis this possible to add version 14"", 'created_at': datetime.datetime(2024, 8, 6, 8, 59, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2270986994, 'issue_id': 2449858483, 'author': 'Nihantra-Patel', 'body': '> is this possible to add version 14\r\n\r\nAdded.', 'created_at': datetime.datetime(2024, 8, 6, 10, 51, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2272518028, 'issue_id': 2449858483, 'author': 'thida-bcn', 'body': '> > is this possible to add version 14\r\n> \r\n> Added.\r\n\r\nthanks', 'created_at': datetime.datetime(2024, 8, 7, 2, 52, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273031310, 'issue_id': 2449858483, 'author': 'frappe-pr-bot', 'body': ':tada: This issue has been resolved in version 14.71.0 :tada:\n\nThe release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.71.0)\n\nYour **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:', 'created_at': datetime.datetime(2024, 8, 7, 9, 28, 46, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-06 05:57:18 UTC): It's already added: https://github.com/frappe/erpnext/pull/41921

![image](https://github.com/user-attachments/assets/d5ccee3a-990e-48be-afc6-ca52b1d959a1)

thida-bcn (Issue Creator) on (2024-08-06 08:59:30 UTC): hello,
is this possible to add version 14

Nihantra-Patel on (2024-08-06 10:51:56 UTC): Added.

thida-bcn (Issue Creator) on (2024-08-07 02:52:50 UTC): thanks

frappe-pr-bot on (2024-08-07 09:28:46 UTC): :tada: This issue has been resolved in version 14.71.0 :tada:

The release is available on [GitHub release](https://github.com/frappe/erpnext/releases/tag/v14.71.0)

Your **[semantic-release](https://github.com/semantic-release/semantic-release)** bot :package::rocket:

"
2449834873,issue,open,,Set Landed Cost Based on Purchase Invoice Rate is not working for multi currency,"### Information about bug

for foreign currency purchase invoice, Set Landed Cost Based on Purchase Invoice Rate is not working

### Module

accounts, stock

### Version

ERPNext: v15.27.1 (version-15)
Frappe Framework: v15.29.1 (version-15)

### Installation method

manual install

### Relevant log output / Stack trace / Full Error Message.


",thida-bcn,2024-08-06 02:59:23+00:00,[],2024-08-06 03:00:34+00:00,,https://github.com/frappe/erpnext/issues/42634,"[('bug', None)]","[{'comment_id': 2270290743, 'issue_id': 2449834873, 'author': 'thida-bcn', 'body': 'https://1drv.ms/u/s!ApZZW_p_lZ54gZFaSzho7R36Ezzpxw?e=Z4jl5O', 'created_at': datetime.datetime(2024, 8, 6, 2, 59, 56, tzinfo=datetime.timezone.utc)}]","thida-bcn (Issue Creator) on (2024-08-06 02:59:56 UTC): https://1drv.ms/u/s!ApZZW_p_lZ54gZFaSzho7R36Ezzpxw?e=Z4jl5O

"
2448415051,issue,closed,completed,No English language by default in online demo.,"### Information about bug

Please set the default language for online demo to English.

### Module

portal

### Version

demo

### Installation method

None

### Relevant log output / Stack trace / Full Error Message.

_No response_",patefoniq,2024-08-05 12:19:42+00:00,[],2024-08-30 00:09:37+00:00,2024-08-14 11:18:41+00:00,https://github.com/frappe/erpnext/issues/42631,"[('bug', None)]","[{'comment_id': 2270447678, 'issue_id': 2448415051, 'author': 'Nihantra-Patel', 'body': 'Can you provide a screenshot of what location you are talking about and where do you want it?', 'created_at': datetime.datetime(2024, 8, 6, 5, 59, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288481505, 'issue_id': 2448415051, 'author': 'Nihantra-Patel', 'body': 'Solved!', 'created_at': datetime.datetime(2024, 8, 14, 11, 18, 41, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-06 05:59:58 UTC): Can you provide a screenshot of what location you are talking about and where do you want it?

Nihantra-Patel on (2024-08-14 11:18:41 UTC): Solved!

"
2448094141,issue,closed,completed,Features for adding the vendor invoices,"<!--
Welcome to ERPNext issue tracker! Before creating an issue, please heed the following:

1. This tracker should only be used to report bugs and request features / enhancements to ERPNext
    - For questions and general support, checkout the manual https://erpnext.com/docs/user/manual/en or use https://discuss.erpnext.com
2. Use the search function before creating a new issue. Duplicates will be closed and directed to
   the original discussion.
3. When making a feature request, make sure to be as verbose as possible. The better you convey your message, the greater the drive to make it happen.


Please keep in mind that we get many many requests and we can't possibly work on all of them, we prioritize development based on the goals of the product and organization. Feature requests are still welcome as it helps us in research when we do decide to work on the requested feature. 

If you're in urgent need to a feature, please try the following channels to get paid developments done quickly:
1. Certified ERPNext partners: https://erpnext.com/partners 
2. Developer community on ERPNext forums: https://discuss.erpnext.com/c/developers/5 
3. Telegram group for ERPNext/Frappe development work: https://t.me/erpnext_opps 

-->

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.
",RBvijay281,2024-08-05 09:39:19+00:00,[],2024-08-20 00:09:26+00:00,2024-08-05 10:26:08+00:00,https://github.com/frappe/erpnext/issues/42624,"[('feature-request', None)]","[{'comment_id': 2268732852, 'issue_id': 2448094141, 'author': 'Nihantra-Patel', 'body': 'A vendor invoice refers to a supplier invoice, which is also known as a [Purchase Invoice](https://docs.erpnext.com/docs/user/manual/en/purchase-invoice).', 'created_at': datetime.datetime(2024, 8, 5, 10, 26, 8, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-05 10:26:08 UTC): A vendor invoice refers to a supplier invoice, which is also known as a [Purchase Invoice](https://docs.erpnext.com/docs/user/manual/en/purchase-invoice).

"
2447860730,issue,closed,completed,Unable to generate Supplier Ledger,"### Information about bug

We are unable to generate general ledger of supplier. We have booked purchase invoice and the same we are not able to find in the supplier ledger

### Module

accounts

### Version

ERP

### Installation method

FrappeCloud

### Relevant log output / Stack trace / Full Error Message.

```shell
We are unable to generate general ledger of supplier. We have booked purchase invoice and the same we are not able to find in the supplier ledger
```
",RBKasim,2024-08-05 07:49:49+00:00,[],2024-08-20 00:09:28+00:00,2024-08-05 09:17:33+00:00,https://github.com/frappe/erpnext/issues/42620,"[('bug', None)]","[{'comment_id': 2268578333, 'issue_id': 2447860730, 'author': 'Nihantra-Patel', 'body': 'Everything is working fine. No problems were encountered in the latest versions 14 and 15.\r\n\r\n\r\nhttps://github.com/user-attachments/assets/97194b16-cbc7-4074-a5ec-db39e8b056d7\r\n\r\n\r\nIf ""Enable Prepared Report"" is enabled then disable it. then reload and check it.\r\n\r\n![image](https://github.com/user-attachments/assets/7f0b695b-fe22-4788-b341-28e59f4effb8)', 'created_at': datetime.datetime(2024, 8, 5, 9, 17, 33, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-05 09:17:33 UTC): Everything is working fine. No problems were encountered in the latest versions 14 and 15.


https://github.com/user-attachments/assets/97194b16-cbc7-4074-a5ec-db39e8b056d7


If ""Enable Prepared Report"" is enabled then disable it. then reload and check it.

![image](https://github.com/user-attachments/assets/7f0b695b-fe22-4788-b341-28e59f4effb8)

"
2447821669,issue,closed,completed,Cannot set different naming series for Quotation,"### Information about bug

I am trying to follow [this guide](https://docs.erpnext.com/docs/user/manual/en/company-wise-naming-series) to create different naming series for different companies' quotations. However, when I try to add another series to the Options field of the Naming Series, I get the error `You can't set 'Options' for field Series` when trying to save the Form.

The series that I am trying to use is: `SINV-.abbr.-.####`

### Module

selling

### Version

ERPNext: v15.31.5
Frappe Framework: v15.36.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

_No response_",derTuca,2024-08-05 07:29:35+00:00,[],2024-08-20 00:09:27+00:00,2024-08-05 09:20:46+00:00,https://github.com/frappe/erpnext/issues/42619,"[('bug', None)]","[{'comment_id': 2268587365, 'issue_id': 2447821669, 'author': 'Nihantra-Patel', 'body': ""> You can't set 'Options' for field Series when trying to save the Form.\r\n> \r\n> The series that I am trying to use is: SINV-.abbr.-.####\r\n\r\nPlease don't update the series from the customize form, if you want to add the series then please go to the Document Naming Settings.\r\n\r\n![image](https://github.com/user-attachments/assets/94e461a4-04a0-4f6e-8f00-2df9906ffbcc)\r\n\r\nUpdate the series, reload and check it."", 'created_at': datetime.datetime(2024, 8, 5, 9, 20, 46, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-05 09:20:46 UTC): Please don't update the series from the customize form, if you want to add the series then please go to the Document Naming Settings.

![image](https://github.com/user-attachments/assets/94e461a4-04a0-4f6e-8f00-2df9906ffbcc)

Update the series, reload and check it.

"
2446492320,issue,closed,completed,Field do_not_use_batchwise_valuation does not exist on Stock Settings,"### Information about bug

Tried to create a Stock Reconciliation for opening stock for an item.
Completed the fields and upon submission, the following error pops up:

![Screenshot from 2024-08-03 10-09-08](https://github.com/user-attachments/assets/c02c9197-64ba-47a3-b200-4566a03ee969)

Tried to then change the stock settings to disable serial and batch item in stock settings. Then the following message appears:

![Screenshot from 2024-08-03 10-44-07](https://github.com/user-attachments/assets/ba55ce74-c2b6-48a7-8d9b-08db92de3c71)

Attached the complete error log from the message...

### Module

stock

### Version

ERPNext: v15.29.3

Frappe Framework: v15.34.1

### Installation method

docker

### Relevant log output / Stack trace / Full Error Message.

```shell
### App Versions

{
	""crm"": ""1.18.0"",
	""erpnext"": ""15.29.3"",
	""frappe"": ""15.34.1"",
	""hrms"": ""15.23.1"",
	""lms"": ""2.0.0"",
	""payments"": ""0.0.1"",
	""woocommerce_fusion"": ""1.7.1""
}
```
### Route
```
Form/Stock Settings/Stock Settings
```
### Traceback
```
Traceback (most recent call last):
  File ""apps/frappe/frappe/app.py"", line 114, in application
    response = frappe.api.handle(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/__init__.py"", line 49, in handle
    data = endpoint(**arguments)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/api/v1.py"", line 36, in handle_rpc_call
    return frappe.handler.handle()
           ^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 49, in handle
    data = execute_cmd(cmd)
           ^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/handler.py"", line 85, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/__init__.py"", line 1768, in call
    return fn(*args, **newargs)
           ^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/utils/typing_validations.py"", line 31, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/desk/form/save.py"", line 39, in savedocs
    doc.save()
  File ""apps/frappe/frappe/model/document.py"", line 337, in save
    return self._save(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 373, in _save
    self.run_before_save_methods()
  File ""apps/frappe/frappe/model/document.py"", line 1091, in run_before_save_methods
    self.run_method(""validate"")
  File ""apps/frappe/frappe/model/document.py"", line 962, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1322, in composer
    return composed(self, method, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 1304, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/frappe/frappe/model/document.py"", line 959, in fn
    return method_object(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""apps/erpnext/erpnext/stock/doctype/stock_settings/stock_settings.py"", line 102, in validate
    self.validate_use_batch_wise_valuation()
  File ""apps/erpnext/erpnext/stock/doctype/stock_settings/stock_settings.py"", line 105, in validate_use_batch_wise_valuation
    if not self.do_not_use_batchwise_valuation:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'StockSettings' object has no attribute 'do_not_use_batchwise_valuation'

```
### Request Data
```
{
	""type"": ""POST"",
	""args"": {
		""doc"": ""{\""name\"":\""Stock Settings\"",\""owner\"":\""Administrator\"",\""modified\"":\""2024-07-14 15:17:03.919376\"",\""modified_by\"":\""test@puentedigital.net\"",\""docstatus\"":0,\""idx\"":\""0\"",\""item_naming_by\"":\""Item Code\"",\""valuation_method\"":\""FIFO\"",\""default_warehouse\"":\""Showroom - TCD\"",\""stock_uom\"":\""Nos.\"",\""auto_insert_price_list_rate_if_missing\"":1,\""update_existing_price_list_rate\"":0,\""allow_to_edit_stock_uom_qty_for_sales\"":0,\""allow_to_edit_stock_uom_qty_for_purchase\"":0,\""over_delivery_receipt_allowance\"":0,\""mr_qty_allowance\"":0,\""allow_negative_stock\"":0,\""show_barcode_field\"":1,\""clean_description_html\"":1,\""action_if_quality_inspection_is_not_submitted\"":\""Stop\"",\""action_if_quality_inspection_is_rejected\"":\""Stop\"",\""enable_stock_reservation\"":0,\""allow_partial_reservation\"":1,\""auto_reserve_stock_for_sales_order_on_purchase\"":0,\""auto_reserve_serial_and_batch\"":1,\""auto_create_serial_and_batch_bundle_for_outward\"":0,\""pick_serial_and_batch_based_on\"":\""FIFO\"",\""disable_serial_no_and_batch_selector\"":1,\""use_naming_series\"":0,\""naming_series_prefix\"":\""BATCH-\"",\""use_serial_batch_fields\"":0,\""do_not_update_serial_batch_on_creation_of_auto_bundle\"":1,\""auto_indent\"":1,\""reorder_email_notify\"":0,\""allow_from_dn\"":0,\""allow_from_pr\"":0,\""stock_frozen_upto_days\"":0,\""doctype\"":\""Stock Settings\"",\""__last_sync_on\"":\""2024-08-03T16:35:30.237Z\"",\""__unsaved\"":1,\""item_group\"":\""Productos\""}"",
		""action"": ""Save""
	},
	""btn"": {
		""jQuery3700076453362794551731"": {
			""events"": {
				""click"": [
					{
						""type"": ""click"",
						""origType"": ""click"",
						""guid"": 7640,
						""namespace"": """"
					}
				]
			}
		}
	},
	""freeze"": true,
	""headers"": {},
	""error_handlers"": {},
	""url"": ""/api/method/frappe.desk.form.save.savedocs"",
	""request_id"": null
}
```
### Response Data
```
{
	""exception"": ""AttributeError: 'StockSettings' object has no attribute 'do_not_use_batchwise_valuation'"",
	""exc_type"": ""AttributeError"",
	""_exc_source"": ""erpnext (app)""
}
```
```
",MartinFulgueiras,2024-08-03 16:50:59+00:00,[],2024-08-20 00:09:30+00:00,2024-08-04 07:02:32+00:00,https://github.com/frappe/erpnext/issues/42610,"[('bug', None)]","[{'comment_id': 2267376336, 'issue_id': 2446492320, 'author': 'Nihantra-Patel', 'body': ""It's fixed: https://github.com/frappe/erpnext/pull/42186\r\n\r\nKindly upgrade your version 15 and check it."", 'created_at': datetime.datetime(2024, 8, 4, 7, 2, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2267808747, 'issue_id': 2446492320, 'author': 'MartinFulgueiras', 'body': 'Thanks', 'created_at': datetime.datetime(2024, 8, 4, 22, 28, 59, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-04 07:02:32 UTC): It's fixed: https://github.com/frappe/erpnext/pull/42186

Kindly upgrade your version 15 and check it.

MartinFulgueiras (Issue Creator) on (2024-08-04 22:28:59 UTC): Thanks

"
2446294929,issue,closed,completed,I want to add an option of item name or item desciption in update items,"![jkhjkjhk](https://github.com/user-attachments/assets/e1eae2fe-b0d8-4f23-870b-65f63f445f92)
![hfghfghfh](https://github.com/user-attachments/assets/045ffb30-bd35-4dc3-8f6f-c1288e631335)
",rajubaghel,2024-08-03 10:53:56+00:00,[],2024-08-20 00:09:25+00:00,2024-08-05 11:09:05+00:00,https://github.com/frappe/erpnext/issues/42609,"[('feature-request', None)]","[{'comment_id': 2268811927, 'issue_id': 2446294929, 'author': 'Nihantra-Patel', 'body': ""Don't create the same issue because you already created the same issue 1 week ago."", 'created_at': datetime.datetime(2024, 8, 5, 11, 9, 5, tzinfo=datetime.timezone.utc)}]","Nihantra-Patel on (2024-08-05 11:09:05 UTC): Don't create the same issue because you already created the same issue 1 week ago.

"
2446223405,issue,open,,Rounding off quantity when UOM for PO & PR are different,"So when we are ordering Raw Materials this problem comes up.

In the MR we request the RM in Nos

Then when we place a Purchase Order it is in Kgs and we use the conversion factor to convert the Kgs into No’s. This number comes out in decimals and this is where the problem starts. I’ll explain with an example below:

MR—→ RM1 - 5 Nos

PO—→ RM1 - 105 kgs. Then multiply by conversion factor (i.e 5 / 105 = 0.0476). Then in Nos UOM we get 4.9 Nos instead of 5 Nos

PR—→ RM1 - 110 is the actual weight received for 5 Nos. Then we multiply by a new conversion factor (5 / 110 = 0.045). Then the UOM we get while making PR is 5.001. Throws up an error of over ordering due to stock UOM not rounding up properly in both the documents.

We resolve this my allowing accept overlimit then it creates problems in creating serial numbers as you need a whole number. We resolve that as well by going for batch numbers and then we get another problem of having batches that are still not fully consumed because 0.05 kgs is pending in the batch….

All this can be avoided if the system just rounds off the conversion factor throughout the system. If this update comes up it will be a big help for manufacturer like us.
",Sukhras,2024-08-03 07:44:42+00:00,[],2024-08-03 07:44:42+00:00,,https://github.com/frappe/erpnext/issues/42608,"[('feature-request', None)]",[],
2445078834,issue,open,,Dunning - fetch ovedue payments - miss match in outstanding totals,"### Information about bug

Hello,
we have an issue with fetching overdue payments in Dunning Dct.

If we create a new one and fetch just one sale invoice, there is no problem:

![Screenshot from 2024-08-01 15-45-25](https://github.com/user-attachments/assets/e64bfb4c-74e4-4bbc-8c03-e61d33792c41)

Second one (but alone), no problem too:

![Screenshot from 2024-08-01 15-46-09](https://github.com/user-attachments/assets/f8db1e23-aa10-4c06-aae6-4392ca089e43)

But if we fetch them together then there is a miss match in outstandings:

![Screenshot from 2024-08-01 15-47-37](https://github.com/user-attachments/assets/0fd0f520-f7e1-4208-9788-79ebcfe9f002)



### Module

accounts

### Version

ERPNext: v15.29.3 (HEAD)

Frappe Framework: v15.34.1 (HEAD)

### Installation method

FrappeCloud

Thank you

Jiri Sir",tonspar,2024-08-02 14:26:56+00:00,[],2024-08-02 14:27:17+00:00,,https://github.com/frappe/erpnext/issues/42605,"[('bug', None)]",[],
