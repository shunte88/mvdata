id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2796222777,pull_request,closed,,[FW][FIX] point_of_sale: iOS downoad invoice popup,"When downloading an invoice from the POS on iOS the PoS would be
reloaded after closing the download popup.

Steps to reproduce:
-------------------
* Open PoS on iOS
* Make an order and invoice it
> Observation: After closing the invoice you are back on the product
screen

Why the fix:
------------
We open the download invoice popup in a new tab so that the PoS is not
reloaded after closing the popup.

opw-4471713

Forward-Port-Of: odoo/odoo#194000",fw-bot,2025-01-17 20:13:52+00:00,[],2025-02-03 15:14:57+00:00,2025-01-20 15:07:59+00:00,https://github.com/odoo/odoo/pull/194239,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599118821, 'issue_id': 2796222777, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194239.png)](https://mergebot.odoo.com/odoo/odoo/pull/194239)', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599118840, 'issue_id': 2796222777, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602045889, 'issue_id': 2796222777, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 10, 35, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 20:13:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194239.png)](https://mergebot.odoo.com/odoo/odoo/pull/194239)

fw-bot (Issue Creator) on (2025-01-17 20:13:54 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robinengels on (2025-01-20 10:35:41 UTC): @robodoo r+

"
2796222396,pull_request,closed,,[FW][FIX] hr_payroll: fix paperformat in document layout,"In the document layout configurator, the paper format A4 would not be there if the module l10n_be_hr_payroll is installed.

This is because in Belgium, some reports need A4 but in the configurator, we only get paperformat not linked to any report.

The solution is to remove the domain for this field in the configurator.

Since there will be more paper formats, I renamed the newly created formats in the Belgian payroll to differentiate them.

Forward-Port-Of: odoo/odoo#183134",fw-bot,2025-01-17 20:13:34+00:00,[],2025-02-03 17:46:19+00:00,2025-01-20 17:44:53+00:00,https://github.com/odoo/odoo/pull/194238,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599118560, 'issue_id': 2796222396, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194238.png)](https://mergebot.odoo.com/odoo/odoo/pull/194238)', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599118579, 'issue_id': 2796222396, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 20:13:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194238.png)](https://mergebot.odoo.com/odoo/odoo/pull/194238)

fw-bot (Issue Creator) on (2025-01-17 20:13:42 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796221858,pull_request,closed,,[FW][FIX] sale_pdf_quote_builder: use correct datetime format,"Versions
--------
- saas-17.4+

Steps
-----
1. Create a new quotation template;
2. add a header which uses the `date_order` field;
3. configure the mapping from this form field to the record field;
4. print the quotation template.

Issue
-----
The datetime is formatted as ""Jan 16, 2025, 5:59:26 PM"", which is different from how dates are formatted, or how datetimes are usually formatted elsewhere in Odoo.

Additionally, it may also be too long to fit in the form field.

Cause
-----
The `format_datetime` function is used without a `dt_format` specified, falling back on the default `'medium'`: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1399

Solution
--------
In order to get the format defined for the relevant locale in Odoo, `dt_format=False` should be specified in the `format_datetime` call: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1427-L1430

opw-4414688

Forward-Port-Of: odoo/odoo#194113
Forward-Port-Of: odoo/odoo#194016",fw-bot,2025-01-17 20:13:10+00:00,[],2025-02-03 13:39:10+00:00,2025-01-20 13:19:18+00:00,https://github.com/odoo/odoo/pull/194237,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599118524, 'issue_id': 2796221858, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194237.png)](https://mergebot.odoo.com/odoo/odoo/pull/194237)', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599118533, 'issue_id': 2796221858, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 20:13:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194237.png)](https://mergebot.odoo.com/odoo/odoo/pull/194237)

fw-bot (Issue Creator) on (2025-01-17 20:13:40 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796221430,pull_request,closed,,[FW][FIX] hr_attendance : fix `get_base_url` ref,"Issue: when the website has a domain `get_base_url` return the domain if the record calling it has a company set on it

- call the function with an empty object to get the database url instead

Task: 3903743



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193951
Forward-Port-Of: odoo/odoo#193182",fw-bot,2025-01-17 20:12:52+00:00,[],2025-02-03 09:40:08+00:00,2025-01-20 09:37:26+00:00,https://github.com/odoo/odoo/pull/194236,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599118472, 'issue_id': 2796221430, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194236.png)](https://mergebot.odoo.com/odoo/odoo/pull/194236)', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599118503, 'issue_id': 2796221430, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 20, 13, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 20:13:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194236.png)](https://mergebot.odoo.com/odoo/odoo/pull/194236)

fw-bot (Issue Creator) on (2025-01-17 20:13:38 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796209139,pull_request,closed,,[FW][FIX] analytic: force analytic distribution title display nowrap,"**Steps to reproduce:**
- Configure `Analytic Accounting` via `Accounting` module's settings;
- Go to `Analytic Plans` through `Accounting / Configuration / Analytic Accounting`:
    - Select any record and change its name for a really long one;

![Capture d’écran 2025-01-02 à 15 21 40](https://github.com/user-attachments/assets/365a7089-9bb4-4215-8b7d-59ac85abc952)

- Go to `Expenses` app:
    - Select any expense in the list;
    - Open the `Analytic Distribution` widget.

___
**Issue:**
Long `Analytic Plans` names are wrapped and may lead to unreadable texts.

![Capture d’écran 2025-01-02 à 15 22 28](https://github.com/user-attachments/assets/b5ddbd88-1209-4640-a0ce-bf9396871038)

*(from the ticket - Odoo 17)*

![imagem](https://github.com/user-attachments/assets/2f3f0543-b08b-4f16-a4a0-4547369eb478)

___
**Expected:**
A smooth UI should display `Analytic Plans` as when accessed through an invoice line from `Accounting` app.

![Capture d’écran 2025-01-02 à 15 23 16](https://github.com/user-attachments/assets/ef0aa2fd-e8c5-47ba-8c39-ce4538b85380)

___
**Cause:**
The `Analytic Distribution` widget style of the invoice view inherits from the list renderer, forcing a `nowrap` style while the expense view of the same widget does not.

___
**Fix:**
Force a `nowrap` style for that specific widget.

![Capture d’écran 2025-01-02 à 15 22 55](https://github.com/user-attachments/assets/2af26b22-63e2-43fc-b636-f739a0aa094d)

___
opw-4357324

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194162
Forward-Port-Of: odoo/odoo#192203",fw-bot,2025-01-17 20:03:33+00:00,[],2025-02-01 19:34:23+00:00,2025-01-18 19:04:23+00:00,https://github.com/odoo/odoo/pull/194235,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599104764, 'issue_id': 2796209139, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194235.png)](https://mergebot.odoo.com/odoo/odoo/pull/194235)', 'created_at': datetime.datetime(2025, 1, 17, 20, 3, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599104778, 'issue_id': 2796209139, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 20, 3, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 20:03:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194235.png)](https://mergebot.odoo.com/odoo/odoo/pull/194235)

fw-bot (Issue Creator) on (2025-01-17 20:03:35 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796191171,pull_request,closed,,[FW][FIX] web_editor: fix custom block translations,"Steps to reproduce:

- Add a ""Call To Action"" block on the homepage > Save it as a custom
snippet.
- Add a new page > Drop the saved custom block on it > Drop Also
another ""Title"" block.
- Translate the custom block in the new page > At this point, the
translation is fine.
- Go to ""Edit"" mode > Edit the other block (""Title"") > Save.
- The translations for the custom ""Call To Action"" is lost.

Starting from [1], the translation of custom snippets was supported and
when dropping a saved custom snippet in a page/view, the snippet will
copy its translation from the saved view (see:
`_copy_custom_snippet_translations()`). This code will always update the
terms in the translation dictionary, even when the page has its custom
translation for them.

The goal of this commit is to fix this behavior by only allowing the
update of a term translation when the page has no custom translation
for it.

[1]: https://github.com/odoo/odoo/commit/d3426b7714012e833caae10281cfb8433223299a

opw-3930862
opw-4141290

Forward-Port-Of: odoo/odoo#177960",fw-bot,2025-01-17 19:50:38+00:00,[],2025-02-04 17:22:43+00:00,2025-01-21 17:22:47+00:00,https://github.com/odoo/odoo/pull/194234,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2599086387, 'issue_id': 2796191171, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194234.png)](https://mergebot.odoo.com/odoo/odoo/pull/194234)', 'created_at': datetime.datetime(2025, 1, 17, 19, 50, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599086408, 'issue_id': 2796191171, 'author': 'fw-bot', 'body': '@xO-Tx @HydrionBurst cherrypicking of pull request odoo/odoo#177960 failed.\n\nstdout:\n```\nAuto-merging addons/web_editor/models/ir_ui_view.py\nCONFLICT (content): Merge conflict in addons/web_editor/models/ir_ui_view.py\nAuto-merging addons/website/tests/test_custom_snippets.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 50, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477142, 'issue_id': 2796191171, 'author': 'fw-bot', 'body': '@xO-Tx @HydrionBurst this forward port of odoo/odoo#177960 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603936870, 'issue_id': 2796191171, 'author': 'xO-Tx', 'body': '@HydrionBurst A small tweak in `17.0` (https://github.com/odoo/odoo/commit/b9fc4ffe7bd68c51b2adc32a9004c8e1da78360f) :\r\nInstead of copying the translation terms from a single record, the method is using a record set (apparently to handle inherited views...). This should only affect the way the ""copied translation dictionary"" is built :+1:', 'created_at': datetime.datetime(2025, 1, 21, 8, 19, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2605009815, 'issue_id': 2796191171, 'author': 'xO-Tx', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 15, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:50:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194234.png)](https://mergebot.odoo.com/odoo/odoo/pull/194234)

fw-bot (Issue Creator) on (2025-01-17 19:50:40 UTC): @xO-Tx @HydrionBurst cherrypicking of pull request odoo/odoo#177960 failed.

stdout:
```
Auto-merging addons/web_editor/models/ir_ui_view.py
CONFLICT (content): Merge conflict in addons/web_editor/models/ir_ui_view.py
Auto-merging addons/website/tests/test_custom_snippets.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-21 02:02:20 UTC): @xO-Tx @HydrionBurst this forward port of odoo/odoo#177960 is awaiting action (not merged or closed).

xO-Tx on (2025-01-21 08:19:49 UTC): @HydrionBurst A small tweak in `17.0` (https://github.com/odoo/odoo/commit/b9fc4ffe7bd68c51b2adc32a9004c8e1da78360f) :
Instead of copying the translation terms from a single record, the method is using a record set (apparently to handle inherited views...). This should only affect the way the ""copied translation dictionary"" is built :+1:

xO-Tx on (2025-01-21 15:15:00 UTC): @robodoo r+

"
2796186073,pull_request,closed,,[FIX] mail: correctly restart scheduled message cron,"Before this commit, `mail.ir_cron_post_scheduled_message` fails with a traceback when there are a lot of scheduled messages to be sent.

Steps to reproduce
-----
1. Create a scheduled message from the chatter full composer
2. Duplicate it 50+ times
3. Run the scheduled action ""Mail: Post scheduled messages""
4. Traceback occurs
```
File ""/home/odoo/src/odoo/odoo/api.py"", line 553, in __new__
assert isinstance(cr, BaseCursor)
^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
```

Cause
-----
This commit (df18d5257cef737f3e1d245a8b85769e1fe1a032) introduced this cron which posts past-due scheduled messages with a default `limit=50`. If there are more messages than the limit, the cron is triggered again. However, there is a typo when restarting the cron that incorrectly calls `env`.

Solution
-----
Change the line to use `env.ref()` to correctly access the xml_id and restart the cron.

opw-4474171
",juwu-odoo,2025-01-17 19:46:58+00:00,[],2025-02-06 05:11:29+00:00,2025-01-23 04:24:22+00:00,https://github.com/odoo/odoo/pull/194233,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2599080890, 'issue_id': 2796186073, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194233.png)](https://mergebot.odoo.com/odoo/odoo/pull/194233)', 'created_at': datetime.datetime(2025, 1, 17, 19, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607266492, 'issue_id': 2796186073, 'author': 'tde-banana-odoo', 'body': '@robodoo r+\r\n\r\nIndeed, thanks for the fix ^^', 'created_at': datetime.datetime(2025, 1, 22, 13, 34, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:47:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194233.png)](https://mergebot.odoo.com/odoo/odoo/pull/194233)

tde-banana-odoo on (2025-01-22 13:34:47 UTC): @robodoo r+

Indeed, thanks for the fix ^^

"
2796184734,pull_request,closed,,[FW][FIX] mail: no flicker on call video stream inset,"Before this commit, during a discuss call while sharing screen and enabling camera, the inset card (= small video stream preview in bottom right of call view of the participant, either camera or screen-sharing depending on other stream being main active) was flickering.

This happens because each rendering of the call view re-renders the inset, which leads to the perceived flickers from stream being re-rendered.

The main cause of re-render comes from `setInset()` that is invoked whenever the `visibleMainCards` getter is called with inset, which is triggered on renderings like mouse-hovering on call view to display the call actions. Even when the inset card is unchanged, `setInset()` produces another object, which forces OWL to re-render the inset component.

This commit fixes the issue by having `setInset` reusing the inset data object if the inset to render refers to the same inset session.

Task-4484908

Forward-Port-Of: odoo/odoo#194103",fw-bot,2025-01-17 19:46:01+00:00,[],2025-02-02 23:46:49+00:00,2025-01-19 20:33:33+00:00,https://github.com/odoo/odoo/pull/194232,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599079372, 'issue_id': 2796184734, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194232.png)](https://mergebot.odoo.com/odoo/odoo/pull/194232)', 'created_at': datetime.datetime(2025, 1, 17, 19, 46, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599079392, 'issue_id': 2796184734, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 46, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:46:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194232.png)](https://mergebot.odoo.com/odoo/odoo/pull/194232)

fw-bot (Issue Creator) on (2025-01-17 19:46:03 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796180090,pull_request,closed,,[FW][FIX] web: remove error notification when loading an image,"There is already a placeholder image displayed when an image fails to load.

opw-4419565

Forward-Port-Of: odoo/odoo#194011
Forward-Port-Of: odoo/odoo#193825",fw-bot,2025-01-17 19:42:37+00:00,[],2025-01-27 17:06:09+00:00,2025-01-27 17:06:09+00:00,https://github.com/odoo/odoo/pull/194231,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599074255, 'issue_id': 2796180090, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194231.png)](https://mergebot.odoo.com/odoo/odoo/pull/194231)', 'created_at': datetime.datetime(2025, 1, 17, 19, 42, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599074265, 'issue_id': 2796180090, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 42, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:42:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194231.png)](https://mergebot.odoo.com/odoo/odoo/pull/194231)

fw-bot (Issue Creator) on (2025-01-17 19:42:39 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796156952,pull_request,closed,,[FW][FIX] mrp: finished date of unplanned work order,"Problem: When a manufacturing order with a work order that was not planned is completed, a resource.calendar.leave is created for the work order. During this process the work order’s date_finished field is recalculated. This means that this work order reserves a slot in the work center to be finished in the future even though it has already been completed.

Purpose: If the work order already has a date_finished value, then that value should be used instead of it being recalculated based on the availability of the work center. This will help ensure that completed work orders are not reserving time in a work center when it has already been completed.

Steps to Reproduce on Runbot:

1. Create a new storable product.
2. Create a BoM for this product and navigate to the Operations tab and add an operation.
3. Create a manufacturing order, confirm it, and then produce all without planning it.
4. Navigate to the completed work order and observe the finished date is in the future.
5. Navigate to the work centers working hours’ time off and find the record associated with the work order.
6. Observe that the end date is in the future.

opw-4393301

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193705
Forward-Port-Of: odoo/odoo#192393",fw-bot,2025-01-17 19:26:17+00:00,[],2025-02-01 19:34:22+00:00,2025-01-18 19:04:19+00:00,https://github.com/odoo/odoo/pull/194230,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2599048699, 'issue_id': 2796156952, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194230.png)](https://mergebot.odoo.com/odoo/odoo/pull/194230)', 'created_at': datetime.datetime(2025, 1, 17, 19, 26, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599048741, 'issue_id': 2796156952, 'author': 'fw-bot', 'body': '@prri-odoo @Whenrow cherrypicking of pull request odoo/odoo#192393 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_workorder.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 26, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599146957, 'issue_id': 2796156952, 'author': 'prri-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 20, 35, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:26:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194230.png)](https://mergebot.odoo.com/odoo/odoo/pull/194230)

fw-bot (Issue Creator) on (2025-01-17 19:26:20 UTC): @prri-odoo @Whenrow cherrypicking of pull request odoo/odoo#192393 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_workorder.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

prri-odoo on (2025-01-17 20:35:09 UTC): robodoo r+

"
2796154716,pull_request,closed,,[FW][FIX] website: Fix hreflang website test,"The Issue:
Prior to this commit, invoking _get_frontend resulted in the get_current_website function returning a different website than the one specified in the MockRequest.

The Fix:
To resolve this, we ensure the function selects the correct website by explicitly passing it in the context.

runbot-64729

Forward-Port-Of: odoo/odoo#189705",fw-bot,2025-01-17 19:24:42+00:00,[],2025-02-05 15:46:23+00:00,2025-01-22 15:40:55+00:00,https://github.com/odoo/odoo/pull/194229,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2599046301, 'issue_id': 2796154716, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194229.png)](https://mergebot.odoo.com/odoo/odoo/pull/194229)', 'created_at': datetime.datetime(2025, 1, 17, 19, 24, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599046317, 'issue_id': 2796154716, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 24, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:24:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194229.png)](https://mergebot.odoo.com/odoo/odoo/pull/194229)

fw-bot (Issue Creator) on (2025-01-17 19:24:44 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796142646,pull_request,closed,,[FW][FIX] point_of_sale: fix closing session popup,"Fix issue that was always displaying popup ""The session is being closed by another user. The page will be reloaded."" each time you close a session. Now the `login_number` is correctly send in the context and can then be used inside `close_session_from_ui` correctly.

task-id: 4485659

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194082",fw-bot,2025-01-17 19:15:58+00:00,[],2025-02-03 13:39:23+00:00,2025-01-20 13:32:15+00:00,https://github.com/odoo/odoo/pull/194228,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2599033773, 'issue_id': 2796142646, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194228.png)](https://mergebot.odoo.com/odoo/odoo/pull/194228)', 'created_at': datetime.datetime(2025, 1, 17, 19, 15, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599033785, 'issue_id': 2796142646, 'author': 'fw-bot', 'body': '@manv-afk @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194218\n* odoo/odoo#194202\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601803579, 'issue_id': 2796142646, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 58, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:15:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194228.png)](https://mergebot.odoo.com/odoo/odoo/pull/194228)

fw-bot (Issue Creator) on (2025-01-17 19:16:00 UTC): @manv-afk @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194218
* odoo/odoo#194202

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-20 08:58:58 UTC): @robodoo r+

"
2796124468,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194048
Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-17 19:03:30+00:00,[],2025-02-04 12:17:16+00:00,2025-01-21 12:03:48+00:00,https://github.com/odoo/odoo/pull/194227,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2599015237, 'issue_id': 2796124468, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194227.png)](https://mergebot.odoo.com/odoo/odoo/pull/194227)', 'created_at': datetime.datetime(2025, 1, 17, 19, 3, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599015252, 'issue_id': 2796124468, 'author': 'fw-bot', 'body': '@lvsz @chevalierv this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194216\n* odoo/odoo#194199\n* odoo/odoo#194173\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 3, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172708, 'issue_id': 2796124468, 'author': 'fw-bot', 'body': '@lvsz @chevalierv this forward port of odoo/odoo#194005 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475531, 'issue_id': 2796124468, 'author': 'fw-bot', 'body': '@lvsz @chevalierv this forward port of odoo/odoo#194005 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604010626, 'issue_id': 2796124468, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 8, 52, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 19:03:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194227.png)](https://mergebot.odoo.com/odoo/odoo/pull/194227)

fw-bot (Issue Creator) on (2025-01-17 19:03:32 UTC): @lvsz @chevalierv this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194216
* odoo/odoo#194199
* odoo/odoo#194173

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:08 UTC): @lvsz @chevalierv this forward port of odoo/odoo#194005 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:00:48 UTC): @lvsz @chevalierv this forward port of odoo/odoo#194005 is awaiting action (not merged or closed).

lvsz on (2025-01-21 08:52:15 UTC): robodoo r+

"
2796117176,pull_request,closed,,[FW][FIX] mail: users appearing as offline,"When a user disconnects, a message is sent on the bus. If another device is active, he will correct the user status. However, it can happen that this message is lost. For instance, when the bus table is cleared while the user is disconnected. Other parts of the code will update the user status, but the status will never be corrected.

This PR react to the user status changes to solve this issue.

opw-4484966

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194074",fw-bot,2025-01-17 18:58:23+00:00,[],2025-01-20 10:09:55+00:00,2025-01-20 07:03:15+00:00,https://github.com/odoo/odoo/pull/194226,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2599007804, 'issue_id': 2796117176, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194226.png)](https://mergebot.odoo.com/odoo/odoo/pull/194226)', 'created_at': datetime.datetime(2025, 1, 17, 18, 58, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599007869, 'issue_id': 2796117176, 'author': 'fw-bot', 'body': '@tsm-odoo @alexkuhn cherrypicking of pull request odoo/odoo#194074 failed.\n\nstdout:\n```\nAuto-merging addons/bus/static/src/im_status_service.js\nAuto-merging addons/mail/static/src/core/common/persona_model.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/core/common/persona_model.js\nAuto-merging addons/mail/static/src/core/common/store_service.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/core/common/store_service.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 58, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600936567, 'issue_id': 2796117176, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 16, 41, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601023953, 'issue_id': 2796117176, 'author': 'robodoo', 'body': '@tsm-odoo @alexkuhn staging failed: ci/runbot on f29d8325ccff9b354452f0d3d64be6712938e1c8 (view more at https://runbot.odoo.com/runbot/build/73600898)', 'created_at': datetime.datetime(2025, 1, 19, 21, 13, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601031088, 'issue_id': 2796117176, 'author': 'alexkuhn', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 19, 21, 38, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:58:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194226.png)](https://mergebot.odoo.com/odoo/odoo/pull/194226)

fw-bot (Issue Creator) on (2025-01-17 18:58:26 UTC): @tsm-odoo @alexkuhn cherrypicking of pull request odoo/odoo#194074 failed.

stdout:
```
Auto-merging addons/bus/static/src/im_status_service.js
Auto-merging addons/mail/static/src/core/common/persona_model.js
CONFLICT (content): Merge conflict in addons/mail/static/src/core/common/persona_model.js
Auto-merging addons/mail/static/src/core/common/store_service.js
CONFLICT (content): Merge conflict in addons/mail/static/src/core/common/store_service.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-19 16:41:35 UTC): @robodoo r+

robodoo on (2025-01-19 21:13:48 UTC): @tsm-odoo @alexkuhn staging failed: ci/runbot on f29d8325ccff9b354452f0d3d64be6712938e1c8 (view more at https://runbot.odoo.com/runbot/build/73600898)

alexkuhn on (2025-01-19 21:38:14 UTC): @robodoo retry

"
2796104446,pull_request,closed,,[FW][IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193752",fw-bot,2025-01-17 18:49:35+00:00,[],2025-02-03 13:39:17+00:00,2025-01-20 13:19:56+00:00,https://github.com/odoo/odoo/pull/194225,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598995226, 'issue_id': 2796104446, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194225.png)](https://mergebot.odoo.com/odoo/odoo/pull/194225)', 'created_at': datetime.datetime(2025, 1, 17, 18, 49, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598995286, 'issue_id': 2796104446, 'author': 'fw-bot', 'body': '@lade-odoo @amigrave cherrypicking of pull request odoo/odoo#193752 failed.\n\nstdout:\n```\nAuto-merging odoo/cli/obfuscate.py\nCONFLICT (content): Merge conflict in odoo/cli/obfuscate.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 49, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601950301, 'issue_id': 2796104446, 'author': 'lade-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 10, 0, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:49:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194225.png)](https://mergebot.odoo.com/odoo/odoo/pull/194225)

fw-bot (Issue Creator) on (2025-01-17 18:49:38 UTC): @lade-odoo @amigrave cherrypicking of pull request odoo/odoo#193752 failed.

stdout:
```
Auto-merging odoo/cli/obfuscate.py
CONFLICT (content): Merge conflict in odoo/cli/obfuscate.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lade-odoo on (2025-01-20 10:00:26 UTC): @robodoo r+

"
2796101654,pull_request,closed,,[FW][FIX] analytic: force analytic distribution title display nowrap,"**Steps to reproduce:**
- Configure `Analytic Accounting` via `Accounting` module's settings;
- Go to `Analytic Plans` through `Accounting / Configuration / Analytic Accounting`:
    - Select any record and change its name for a really long one;

![Capture d’écran 2025-01-02 à 15 21 40](https://github.com/user-attachments/assets/365a7089-9bb4-4215-8b7d-59ac85abc952)

- Go to `Expenses` app:
    - Select any expense in the list;
    - Open the `Analytic Distribution` widget.

___
**Issue:**
Long `Analytic Plans` names are wrapped and may lead to unreadable texts.

![Capture d’écran 2025-01-02 à 15 22 28](https://github.com/user-attachments/assets/b5ddbd88-1209-4640-a0ce-bf9396871038)

*(from the ticket - Odoo 17)*

![imagem](https://github.com/user-attachments/assets/2f3f0543-b08b-4f16-a4a0-4547369eb478)

___
**Expected:**
A smooth UI should display `Analytic Plans` as when accessed through an invoice line from `Accounting` app.

![Capture d’écran 2025-01-02 à 15 23 16](https://github.com/user-attachments/assets/ef0aa2fd-e8c5-47ba-8c39-ce4538b85380)

___
**Cause:**
The `Analytic Distribution` widget style of the invoice view inherits from the list renderer, forcing a `nowrap` style while the expense view of the same widget does not.

___
**Fix:**
Force a `nowrap` style for that specific widget.

![Capture d’écran 2025-01-02 à 15 22 55](https://github.com/user-attachments/assets/2af26b22-63e2-43fc-b636-f739a0aa094d)

___
opw-4357324

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194162
Forward-Port-Of: odoo/odoo#192203",fw-bot,2025-01-17 18:47:48+00:00,[],2025-02-03 11:38:33+00:00,2025-01-20 11:13:00+00:00,https://github.com/odoo/odoo/pull/194224,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598992499, 'issue_id': 2796101654, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194224.png)](https://mergebot.odoo.com/odoo/odoo/pull/194224)', 'created_at': datetime.datetime(2025, 1, 17, 18, 47, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598992517, 'issue_id': 2796101654, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 47, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599055353, 'issue_id': 2796101654, 'author': 'fw-bot', 'body': '@barracudapps @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 19, 30, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599296292, 'issue_id': 2796101654, 'author': 'robodoo', 'body': '@barracudapps @jbw-odoo staging failed: ci/runbot on 2470a9a2f1e9128da63d9db0dc221c61649075d6 (view more at https://runbot.odoo.com/runbot/build/73561048)', 'created_at': datetime.datetime(2025, 1, 17, 22, 10, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599657382, 'issue_id': 2796101654, 'author': 'barracudapps', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 18, 10, 12, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599668223, 'issue_id': 2796101654, 'author': 'robodoo', 'body': '@barracudapps @jbw-odoo staging failed: ci/runbot on 34c593ea58e0e5b1d4c30f1442978ba026ba09d0 (view more at https://runbot.odoo.com/runbot/build/73568313)', 'created_at': datetime.datetime(2025, 1, 18, 10, 51, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601605994, 'issue_id': 2796101654, 'author': 'barracudapps', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 20, 7, 21, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:47:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194224.png)](https://mergebot.odoo.com/odoo/odoo/pull/194224)

fw-bot (Issue Creator) on (2025-01-17 18:47:49 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 19:30:41 UTC): @barracudapps @jbw-odoo ci/runbot failed on this forward-port PR

robodoo on (2025-01-17 22:10:57 UTC): @barracudapps @jbw-odoo staging failed: ci/runbot on 2470a9a2f1e9128da63d9db0dc221c61649075d6 (view more at https://runbot.odoo.com/runbot/build/73561048)

barracudapps on (2025-01-18 10:12:35 UTC): robodoo retry

robodoo on (2025-01-18 10:51:24 UTC): @barracudapps @jbw-odoo staging failed: ci/runbot on 34c593ea58e0e5b1d4c30f1442978ba026ba09d0 (view more at https://runbot.odoo.com/runbot/build/73568313)

barracudapps on (2025-01-20 07:21:34 UTC): @robodoo retry

"
2796097874,pull_request,closed,,[FW][FIX] web: form compiler: correctly detect anchors to same form,"Before this commit, the form compiler did a search in the whole DOM, when compiling a form, to find anchors, for which the target node would be in the form being compiled. The point of this was to automatically open the notebook tab when an anchor is click for an element that is hidden in a non active tab.

However, looking in the DOM makes no sense. It's very likely that the found element won't be there anymore when the view we compile will be put in the DOM, and moreover the compilation is done only once, so if we come back later on on the same form, we'll still use the information of the anchor we found the first time, which is ever less likely to be again in the DOM.

This was actually a code mistake, as what we aimed to do was to find anchors **in the form**, pointing to elements hidden in the notebook, but definitely not **in the dom**.

This mistake produces a crash: go to ""Timesheet / Configuration / Settings"" and try to open the ""Internal"" project in the time off section => traceback.

This commit removes the look up in the document. The feature of automatically opening the tab already partially works, but we won't fix it, and we'll even drop it in master.

opw~4457605

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194119",fw-bot,2025-01-17 18:45:18+00:00,[],2025-02-01 09:54:23+00:00,2025-01-18 09:38:21+00:00,https://github.com/odoo/odoo/pull/194223,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598988802, 'issue_id': 2796097874, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194223.png)](https://mergebot.odoo.com/odoo/odoo/pull/194223)', 'created_at': datetime.datetime(2025, 1, 17, 18, 45, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598988810, 'issue_id': 2796097874, 'author': 'fw-bot', 'body': '@aab-odoo @kebeclibre this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194213\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 45, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599004771, 'issue_id': 2796097874, 'author': 'aab-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 18, 56, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:45:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194223.png)](https://mergebot.odoo.com/odoo/odoo/pull/194223)

fw-bot (Issue Creator) on (2025-01-17 18:45:20 UTC): @aab-odoo @kebeclibre this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194213

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aab-odoo on (2025-01-17 18:56:14 UTC): @robodoo r+

"
2796069653,pull_request,closed,,[FW][FIX] web: typo in mobile form view test,"This commit fixes a typo in two mobile form view's tests where ""screenLeft"" was used instead of ""scrollX"".

Note: this was detected while testing for the new Chrome's headless mode set by default on Chrome 128+.

Forward-Port-Of: odoo/odoo#194105",fw-bot,2025-01-17 18:27:32+00:00,[],2025-02-01 01:51:26+00:00,2025-01-18 01:40:16+00:00,https://github.com/odoo/odoo/pull/194222,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598956031, 'issue_id': 2796069653, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194222.png)](https://mergebot.odoo.com/odoo/odoo/pull/194222)', 'created_at': datetime.datetime(2025, 1, 17, 18, 27, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598956051, 'issue_id': 2796069653, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 27, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598989253, 'issue_id': 2796069653, 'author': 'fw-bot', 'body': '@pparidans @rfr-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 18, 45, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599298872, 'issue_id': 2796069653, 'author': 'fw-bot', 'body': '@pparidans @rfr-odoo the next pull request (odoo/odoo#194269) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 22, 13, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599373729, 'issue_id': 2796069653, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 23, 35, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:27:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194222.png)](https://mergebot.odoo.com/odoo/odoo/pull/194222)

fw-bot (Issue Creator) on (2025-01-17 18:27:34 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 18:45:38 UTC): @pparidans @rfr-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 22:13:30 UTC): @pparidans @rfr-odoo the next pull request (odoo/odoo#194269) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-17 23:35:07 UTC): @robodoo r+

"
2796068169,pull_request,closed,,[FW][FIX] web: remove error notification when loading an image,"There is already a placeholder image displayed when an image fails to load.

opw-4419565

Forward-Port-Of: odoo/odoo#194011
Forward-Port-Of: odoo/odoo#193825",fw-bot,2025-01-17 18:26:34+00:00,[],2025-01-27 16:32:44+00:00,2025-01-27 16:32:44+00:00,https://github.com/odoo/odoo/pull/194221,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598954614, 'issue_id': 2796068169, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194221.png)](https://mergebot.odoo.com/odoo/odoo/pull/194221)', 'created_at': datetime.datetime(2025, 1, 17, 18, 26, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598954633, 'issue_id': 2796068169, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 26, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:26:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194221.png)](https://mergebot.odoo.com/odoo/odoo/pull/194221)

fw-bot (Issue Creator) on (2025-01-17 18:26:36 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796054469,pull_request,closed,,[FW][FIX] mrp: finished date of unplanned work order,"Problem: When a manufacturing order with a work order that was not planned is completed, a resource.calendar.leave is created for the work order. During this process the work order’s date_finished field is recalculated. This means that this work order reserves a slot in the work center to be finished in the future even though it has already been completed.

Purpose: If the work order already has a date_finished value, then that value should be used instead of it being recalculated based on the availability of the work center. This will help ensure that completed work orders are not reserving time in a work center when it has already been completed.

Steps to Reproduce on Runbot:

1. Create a new storable product.
2. Create a BoM for this product and navigate to the Operations tab and add an operation.
3. Create a manufacturing order, confirm it, and then produce all without planning it.
4. Navigate to the completed work order and observe the finished date is in the future.
5. Navigate to the work centers working hours’ time off and find the record associated with the work order.
6. Observe that the end date is in the future.

opw-4393301

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193705
Forward-Port-Of: odoo/odoo#192393",fw-bot,2025-01-17 18:20:01+00:00,[],2025-01-31 21:53:24+00:00,2025-01-17 21:29:23+00:00,https://github.com/odoo/odoo/pull/194220,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598941116, 'issue_id': 2796054469, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194220.png)](https://mergebot.odoo.com/odoo/odoo/pull/194220)', 'created_at': datetime.datetime(2025, 1, 17, 18, 20, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598941135, 'issue_id': 2796054469, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 20, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599048713, 'issue_id': 2796054469, 'author': 'fw-bot', 'body': '@prri-odoo @Whenrow the next pull request (odoo/odoo#194230) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 19, 26, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599058458, 'issue_id': 2796054469, 'author': 'prri-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 19, 32, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:20:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194220.png)](https://mergebot.odoo.com/odoo/odoo/pull/194220)

fw-bot (Issue Creator) on (2025-01-17 18:20:03 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 19:26:18 UTC): @prri-odoo @Whenrow the next pull request (odoo/odoo#194230) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

prri-odoo on (2025-01-17 19:32:45 UTC): robodoo r+

"
2796047342,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194050
Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-17 18:15:32+00:00,[],2025-02-01 09:54:23+00:00,2025-01-18 09:38:25+00:00,https://github.com/odoo/odoo/pull/194219,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598933076, 'issue_id': 2796047342, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194219.png)](https://mergebot.odoo.com/odoo/odoo/pull/194219)', 'created_at': datetime.datetime(2025, 1, 17, 18, 15, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598933097, 'issue_id': 2796047342, 'author': 'fw-bot', 'body': '@kawkb @smetl this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194207\n* odoo/odoo#194184\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 15, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598954740, 'issue_id': 2796047342, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 18, 26, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599010490, 'issue_id': 2796047342, 'author': 'robodoo', 'body': ""@kawkb @smetl 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 19, 0, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:15:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194219.png)](https://mergebot.odoo.com/odoo/odoo/pull/194219)

fw-bot (Issue Creator) on (2025-01-17 18:15:34 UTC): @kawkb @smetl this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194207
* odoo/odoo#194184

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-17 18:26:40 UTC): @robodoo r+

robodoo on (2025-01-17 19:00:11 UTC): @kawkb @smetl 'ci/runbot' failed on this reviewed PR.

"
2796024086,pull_request,closed,,[FW][FIX] point_of_sale: fix closing session popup,"Fix issue that was always displaying popup ""The session is being closed by another user. The page will be reloaded."" each time you close a session. Now the `login_number` is correctly send in the context and can then be used inside `close_session_from_ui` correctly.

task-id: 4485659

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194082",fw-bot,2025-01-17 18:03:22+00:00,[],2025-02-03 13:39:12+00:00,2025-01-20 13:19:31+00:00,https://github.com/odoo/odoo/pull/194218,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598909166, 'issue_id': 2796024086, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194218.png)](https://mergebot.odoo.com/odoo/odoo/pull/194218)', 'created_at': datetime.datetime(2025, 1, 17, 18, 3, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598909184, 'issue_id': 2796024086, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 3, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601800324, 'issue_id': 2796024086, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 57, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:03:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194218.png)](https://mergebot.odoo.com/odoo/odoo/pull/194218)

fw-bot (Issue Creator) on (2025-01-17 18:03:24 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-20 08:57:28 UTC): @robodoo r+

"
2796021085,pull_request,closed,,[FIX] auth_oauth: ensure werkzeug 3 compatibility ,"Description of the issue/feature this PR addresses:
The method `werkzeug.http.parse_www_authenticate_header` has been removed in werkzeug 3 and later. This causes an issue in Odoo when using python 3.12, as the `requirements.txt` specifies werkzeug 3.0.1. This results in a misleading error stating that `auth_signup` is not installed on the database when authenticating a new user with an OAuth provider.

Current behavior before PR:
When attempting to authenticate a new user with an OAuth provider in Odoo using Python 3.12, the method werkzeug.http.parse_www_authenticate_header is called. Since this method is removed in Werkzeug 3.0.1, a misleading error message about auth_signup not being installed on the database is displayed.

Desired behavior after PR is merged:
The code will use WWWAuthenticate.from_header for parsing the WWW-Authenticate header if available, otherwise, it will fall back to using werkzeug.http.parse_www_authenticate_header for compatibility with older versions of Werkzeug (2.0 and 2.2). The misleading error message will no longer appear, and OAuth authentication will work as expected.


Fixes #194002

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",0yik,2025-01-17 18:01:45+00:00,[],2025-01-21 10:07:41+00:00,2025-01-21 10:07:41+00:00,https://github.com/odoo/odoo/pull/194217,[],"[{'comment_id': 2598906601, 'issue_id': 2796021085, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194217.png)](https://mergebot.odoo.com/odoo/odoo/pull/194217)', 'created_at': datetime.datetime(2025, 1, 17, 18, 1, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 18:01:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194217.png)](https://mergebot.odoo.com/odoo/odoo/pull/194217)

"
2796013096,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194048
Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-17 17:56:28+00:00,[],2025-02-04 14:11:30+00:00,2025-01-21 13:55:47+00:00,https://github.com/odoo/odoo/pull/194216,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598898230, 'issue_id': 2796013096, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194216.png)](https://mergebot.odoo.com/odoo/odoo/pull/194216)', 'created_at': datetime.datetime(2025, 1, 17, 17, 56, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598898253, 'issue_id': 2796013096, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 56, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:56:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194216.png)](https://mergebot.odoo.com/odoo/odoo/pull/194216)

fw-bot (Issue Creator) on (2025-01-17 17:56:30 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2796011506,pull_request,closed,,[FW][FIX] stock: allow lot to be used by branches,"Steps to reproduce the bug:
- Create a “Company A” and a “ branch 1” linked to this company
- Create a storable product “P1”:
    - limited to Company A

- Select only the branch 1 as current company
- Create a receipt for one unit of P1
- Mark it as to do.
- Try to create a lot or use lot created in Company A

Problem:
An acces error is raised:
`Incompatible companies on records:
- 'Product B' belongs to company 'Branch X' and 'Lot/Serial Number' (lot_id: 'sn_test') belongs to another company.`

opw-4415565

Forward-Port-Of: odoo/odoo#191529",fw-bot,2025-01-17 17:55:25+00:00,[],2025-01-28 19:09:45+00:00,2025-01-28 19:09:45+00:00,https://github.com/odoo/odoo/pull/194215,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598896652, 'issue_id': 2796011506, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194215.png)](https://mergebot.odoo.com/odoo/odoo/pull/194215)', 'created_at': datetime.datetime(2025, 1, 17, 17, 55, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598896673, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 55, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598957964, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 18, 28, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476583, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119833, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689579, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385927, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721944, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172396, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723480, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616181328, 'issue_id': 2796011506, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 27, 16, 10, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618896566, 'issue_id': 2796011506, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 12, 41, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:55:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194215.png)](https://mergebot.odoo.com/odoo/odoo/pull/194215)

fw-bot (Issue Creator) on (2025-01-17 17:55:27 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 18:28:35 UTC): @DjamelTouati @clesgow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-21 02:01:46 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:55 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:31 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:26 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:36 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:56 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:33 UTC): @DjamelTouati @clesgow this forward port of odoo/odoo#191529 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 16:10:02 UTC): @DjamelTouati @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.

DjamelTouati on (2025-01-28 12:41:58 UTC): robodoo r+

"
2795982910,pull_request,closed,,[FW][FIX] mail: draggable participant cards on mobile,"Before this commit, when dragging participant cards on mobile they will get dragged off screen.
1. Open discuss on mobile
2. Get into a call
3. Move the participant cards -> they will disappear

This happens because the `drag` function gets called without checking if the participant card is in the inset state (the state in which it can be moved around).
This commit fixes the issue by checking that the component is in that state before being able to drag it.

task-4491597

Forward-Port-Of: odoo/odoo#194075",fw-bot,2025-01-17 17:37:53+00:00,[],2025-01-20 10:09:50+00:00,2025-01-20 05:46:40+00:00,https://github.com/odoo/odoo/pull/194214,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598866850, 'issue_id': 2795982910, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194214.png)](https://mergebot.odoo.com/odoo/odoo/pull/194214)', 'created_at': datetime.datetime(2025, 1, 17, 17, 37, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598866864, 'issue_id': 2795982910, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 37, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598915985, 'issue_id': 2795982910, 'author': 'fw-bot', 'body': '@Atovange @alexkuhn ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 18, 6, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600943706, 'issue_id': 2795982910, 'author': 'robodoo', 'body': '@Atovange @alexkuhn staging failed: ci/runbot on 41ed69795d64c79a7faac0767f275948b0557433 (view more at https://runbot.odoo.com/runbot/build/73599299)', 'created_at': datetime.datetime(2025, 1, 19, 17, 2, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600988102, 'issue_id': 2795982910, 'author': 'fw-bot', 'body': '@Atovange @alexkuhn this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 19, 19, 19, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600988280, 'issue_id': 2795982910, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 19, 19, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:37:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194214.png)](https://mergebot.odoo.com/odoo/odoo/pull/194214)

fw-bot (Issue Creator) on (2025-01-17 17:37:55 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 18:06:09 UTC): @Atovange @alexkuhn ci/runbot failed on this forward-port PR

robodoo on (2025-01-19 17:02:04 UTC): @Atovange @alexkuhn staging failed: ci/runbot on 41ed69795d64c79a7faac0767f275948b0557433 (view more at https://runbot.odoo.com/runbot/build/73599299)

fw-bot (Issue Creator) on (2025-01-19 19:19:23 UTC): @Atovange @alexkuhn this PR was modified / updated and has become a normal PR. It must be merged directly.

alexkuhn on (2025-01-19 19:19:55 UTC): @robodoo r+

"
2795982427,pull_request,closed,,[FW][FIX] web: form compiler: correctly detect anchors to same form,"Before this commit, the form compiler did a search in the whole DOM, when compiling a form, to find anchors, for which the target node would be in the form being compiled. The point of this was to automatically open the notebook tab when an anchor is click for an element that is hidden in a non active tab.

However, looking in the DOM makes no sense. It's very likely that the found element won't be there anymore when the view we compile will be put in the DOM, and moreover the compilation is done only once, so if we come back later on on the same form, we'll still use the information of the anchor we found the first time, which is ever less likely to be again in the DOM.

This was actually a code mistake, as what we aimed to do was to find anchors **in the form**, pointing to elements hidden in the notebook, but definitely not **in the dom**.

This mistake produces a crash: go to ""Timesheet / Configuration / Settings"" and try to open the ""Internal"" project in the time off section => traceback.

This commit removes the look up in the document. The feature of automatically opening the tab already partially works, but we won't fix it, and we'll even drop it in master.

opw~4457605

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194119",fw-bot,2025-01-17 17:37:36+00:00,[],2025-02-01 19:34:21+00:00,2025-01-18 19:04:10+00:00,https://github.com/odoo/odoo/pull/194213,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598866376, 'issue_id': 2795982427, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194213.png)](https://mergebot.odoo.com/odoo/odoo/pull/194213)', 'created_at': datetime.datetime(2025, 1, 17, 17, 37, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598866391, 'issue_id': 2795982427, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 37, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:37:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194213.png)](https://mergebot.odoo.com/odoo/odoo/pull/194213)

fw-bot (Issue Creator) on (2025-01-17 17:37:38 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795980883,pull_request,closed,,[FW][IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193752",fw-bot,2025-01-17 17:36:36+00:00,[],2025-02-04 12:31:41+00:00,2025-01-21 12:28:23+00:00,https://github.com/odoo/odoo/pull/194212,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598864701, 'issue_id': 2795980883, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194212.png)](https://mergebot.odoo.com/odoo/odoo/pull/194212)', 'created_at': datetime.datetime(2025, 1, 17, 17, 36, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598864713, 'issue_id': 2795980883, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 36, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598995242, 'issue_id': 2795980883, 'author': 'fw-bot', 'body': '@lade-odoo @amigrave the next pull request (odoo/odoo#194225) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 18, 49, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601773589, 'issue_id': 2795980883, 'author': 'lade-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 45, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602644314, 'issue_id': 2795980883, 'author': 'robodoo', 'body': '@lade-odoo @amigrave staging failed: ci/runbot on 2a47a68833260454d6b6f6f4ff10a85a9e90b1f9 (view more at https://runbot.odoo.com/runbot/build/73649541)', 'created_at': datetime.datetime(2025, 1, 20, 15, 0, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475949, 'issue_id': 2795980883, 'author': 'fw-bot', 'body': '@lade-odoo @amigrave this forward port of odoo/odoo#193752 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604011711, 'issue_id': 2795980883, 'author': 'lade-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 8, 52, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604011803, 'issue_id': 2795980883, 'author': 'robodoo', 'body': ""This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate)."", 'created_at': datetime.datetime(2025, 1, 21, 8, 52, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604287412, 'issue_id': 2795980883, 'author': 'lade-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 10, 18, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604287534, 'issue_id': 2795980883, 'author': 'robodoo', 'body': ""This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate)."", 'created_at': datetime.datetime(2025, 1, 21, 10, 18, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604288967, 'issue_id': 2795980883, 'author': 'lade-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 21, 10, 18, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:36:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194212.png)](https://mergebot.odoo.com/odoo/odoo/pull/194212)

fw-bot (Issue Creator) on (2025-01-17 17:36:38 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 18:49:37 UTC): @lade-odoo @amigrave the next pull request (odoo/odoo#194225) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lade-odoo on (2025-01-20 08:45:34 UTC): @robodoo r+

robodoo on (2025-01-20 15:00:24 UTC): @lade-odoo @amigrave staging failed: ci/runbot on 2a47a68833260454d6b6f6f4ff10a85a9e90b1f9 (view more at https://runbot.odoo.com/runbot/build/73649541)

fw-bot (Issue Creator) on (2025-01-21 02:01:11 UTC): @lade-odoo @amigrave this forward port of odoo/odoo#193752 is awaiting action (not merged or closed).

lade-odoo on (2025-01-21 08:52:41 UTC): @robodoo r+

robodoo on (2025-01-21 08:52:44 UTC): This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate).

lade-odoo on (2025-01-21 10:18:15 UTC): @robodoo r+

robodoo on (2025-01-21 10:18:17 UTC): This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate).

lade-odoo on (2025-01-21 10:18:32 UTC): @robodoo retry

"
2795979188,pull_request,closed,,[FW][FIX] l10n_it_edi: Add fallback for remove_signature,"Backporting from saas-17.3 odoo/odoo#137572 because of tickets, see opws below.
The OpenSSL call started not working after `cryptography==42.0.8`

\---

Some of the invoices (i.e. those from Servizio Elettrico Nazionale, the
ex-monopoly-of-energy company) have custom signatures that rely on an
old OpenSSL implementation that breaks the current one that sees them as
malformed, so we cannot read those files. Also, we couldn't find an
alternative way to use OpenSSL to just get the same result without
getting the error.

A new fallback method has been added that reads the ASN1 file structure
and takes the encoded pkcs7-data tag content out of it, regardless of
the signature.

Being a non-optimized pure Python implementation, it takes about 2x the
time than the regular method, so it's better used as a fallback. We
didn't use an existing library not to further pollute the dependencies
space.

\---

opw-4471459
opw-4437288
opw-4417875

Forward-Port-Of: odoo/odoo#193950",fw-bot,2025-01-17 17:35:31+00:00,[],2025-02-03 10:18:05+00:00,2025-01-20 10:13:01+00:00,https://github.com/odoo/odoo/pull/194211,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598862830, 'issue_id': 2795979188, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194211.png)](https://mergebot.odoo.com/odoo/odoo/pull/194211)', 'created_at': datetime.datetime(2025, 1, 17, 17, 35, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598862848, 'issue_id': 2795979188, 'author': 'fw-bot', 'body': '@lordkrandel @jco-odoo cherrypicking of pull request odoo/odoo#193950 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/l10n_it_edi/models/account_edi_format.py deleted in 3c54d3b2170c4253deb415bb3bd50b1578a4cfd7 and modified in 3f95474302600a05e33a9353d5c6e2b09df7f67b.  Version 3f95474302600a05e33a9353d5c6e2b09df7f67b of addons/l10n_it_edi/models/account_edi_format.py left in tree.\nCONFLICT (file location): addons/l10n_it_edi/tests/expected_xmls/IT09633951000_NpFwF.xml.p7m added in 3f95474302600a05e33a9353d5c6e2b09df7f67b inside a directory that was renamed in 3c54d3b2170c4253deb415bb3bd50b1578a4cfd7, suggesting it should perhaps be moved to addons/l10n_it_edi/tests/export_xmls/IT09633951000_NpFwF.xml.p7m.\nAuto-merging addons/l10n_it_edi/tests/test_edi_import.py\nCONFLICT (content): Merge conflict in addons/l10n_it_edi/tests/test_edi_import.py\nAuto-merging addons/l10n_it_edi/tools/remove_signature.py\nCONFLICT (content): Merge conflict in addons/l10n_it_edi/tools/remove_signature.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 35, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599012778, 'issue_id': 2795979188, 'author': 'lordkrandel', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 19, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599012825, 'issue_id': 2795979188, 'author': 'robodoo', 'body': '@lordkrandel you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 17, 19, 1, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599021084, 'issue_id': 2795979188, 'author': 'lordkrandel', 'body': '@odoo/rd-security Hello 👋🏻 \r\nI fixed the conflict in the fw-port.\r\nI think I need another security override... ?\r\nThank you in advance!\r\nhttps://github.com/odoo/odoo/pull/193950', 'created_at': datetime.datetime(2025, 1, 17, 19, 7, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601617544, 'issue_id': 2795979188, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 20, 7, 29, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601767343, 'issue_id': 2795979188, 'author': 'lordkrandel', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 43, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601767491, 'issue_id': 2795979188, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 20, 8, 43, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:35:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194211.png)](https://mergebot.odoo.com/odoo/odoo/pull/194211)

fw-bot (Issue Creator) on (2025-01-17 17:35:33 UTC): @lordkrandel @jco-odoo cherrypicking of pull request odoo/odoo#193950 failed.

stdout:
```
CONFLICT (modify/delete): addons/l10n_it_edi/models/account_edi_format.py deleted in 3c54d3b2170c4253deb415bb3bd50b1578a4cfd7 and modified in 3f95474302600a05e33a9353d5c6e2b09df7f67b.  Version 3f95474302600a05e33a9353d5c6e2b09df7f67b of addons/l10n_it_edi/models/account_edi_format.py left in tree.
CONFLICT (file location): addons/l10n_it_edi/tests/expected_xmls/IT09633951000_NpFwF.xml.p7m added in 3f95474302600a05e33a9353d5c6e2b09df7f67b inside a directory that was renamed in 3c54d3b2170c4253deb415bb3bd50b1578a4cfd7, suggesting it should perhaps be moved to addons/l10n_it_edi/tests/export_xmls/IT09633951000_NpFwF.xml.p7m.
Auto-merging addons/l10n_it_edi/tests/test_edi_import.py
CONFLICT (content): Merge conflict in addons/l10n_it_edi/tests/test_edi_import.py
Auto-merging addons/l10n_it_edi/tools/remove_signature.py
CONFLICT (content): Merge conflict in addons/l10n_it_edi/tools/remove_signature.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lordkrandel on (2025-01-17 19:01:46 UTC): @robodoo r+

robodoo on (2025-01-17 19:01:48 UTC): @lordkrandel you may want to rebuild or fix this PR as it has failed CI.

lordkrandel on (2025-01-17 19:07:34 UTC): @odoo/rd-security Hello 👋🏻 
I fixed the conflict in the fw-port.
I think I need another security override... ?
Thank you in advance!
https://github.com/odoo/odoo/pull/193950

xmo-odoo on (2025-01-20 07:29:07 UTC): @robodoo override=ci/security

lordkrandel on (2025-01-20 08:43:17 UTC): @robodoo r+

robodoo on (2025-01-20 08:43:20 UTC): This PR is already reviewed, reviewing it again is useless.

"
2795978665,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193519
Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-17 17:35:10+00:00,[],2025-02-03 09:40:07+00:00,2025-01-20 09:22:47+00:00,https://github.com/odoo/odoo/pull/194210,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598862255, 'issue_id': 2795978665, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194210.png)](https://mergebot.odoo.com/odoo/odoo/pull/194210)', 'created_at': datetime.datetime(2025, 1, 17, 17, 35, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598862273, 'issue_id': 2795978665, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194179\n* odoo/odoo#194154\n* odoo/odoo#194127\n* odoo/odoo#194114\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 35, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598948196, 'issue_id': 2795978665, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 18, 23, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468766, 'issue_id': 2795978665, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600466334, 'issue_id': 2795978665, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173936, 'issue_id': 2795978665, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601615501, 'issue_id': 2795978665, 'author': 'walidsahli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 7, 27, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:35:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194210.png)](https://mergebot.odoo.com/odoo/odoo/pull/194210)

fw-bot (Issue Creator) on (2025-01-17 17:35:12 UTC): @walidsahli @Whenrow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194179
* odoo/odoo#194154
* odoo/odoo#194127
* odoo/odoo#194114

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 18:23:56 UTC): @walidsahli @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-18 02:01:10 UTC): @walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:01 UTC): @walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:05 UTC): @walidsahli @Whenrow this forward port of odoo/odoo#192651 is awaiting action (not merged or closed).

walidsahli on (2025-01-20 07:27:50 UTC): @robodoo r+

"
2795958888,pull_request,closed,,[FW][FIX] point_of_sale: add default logs location fallback to IoT log do…,"…wnload

Current behavior before PR:
 When using the ""Download logs"" button, from the IoT box form view, an Internal Server Error is raised every time.
```py
Internal Server Error : Log file configuration is not set
```

Description of the issue/feature this PR addresses:
New IoT Box images are missing the default `logfile` parameter in their config. This parameter is required for log downloading, and cannot be left empty.

The `logfile` parameter has been removed from the `odoo.conf` config file in PR #169633. However, it is still explicitly mentioned as `/var/log/odoo/odoo-server.log` in two other files: https://github.com/odoo/odoo/blob/451a956a22015034b8c35bd0d9a860b78442af7f/addons/hw_posbox_homepage/controllers/homepage.py#L74 and
https://github.com/odoo/odoo/blob/451a956a22015034b8c35bd0d9a860b78442af7f/addons/point_of_sale/tools/posbox/overwrite_before_init/etc/init_posbox_image.sh#L28 As such, a fallback to the default `/var/log/odoo/odoo-server.log` is added.

Desired behavior after PR is merged:
The Logs can be downloaded from the IoT box form view without receiving an Internal Server Error.

opw-4443593

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192986
Forward-Port-Of: odoo/odoo#192867",fw-bot,2025-01-17 17:22:34+00:00,[],2025-02-03 20:56:04+00:00,2025-01-20 20:54:18+00:00,https://github.com/odoo/odoo/pull/194209,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598841430, 'issue_id': 2795958888, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194209.png)](https://mergebot.odoo.com/odoo/odoo/pull/194209)', 'created_at': datetime.datetime(2025, 1, 17, 17, 22, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598841441, 'issue_id': 2795958888, 'author': 'fw-bot', 'body': '@vise-odoo @Ysoroko this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194135\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 22, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598891136, 'issue_id': 2795958888, 'author': 'fw-bot', 'body': '@vise-odoo @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 17, 52, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468740, 'issue_id': 2795958888, 'author': 'fw-bot', 'body': '@vise-odoo @Ysoroko this forward port of odoo/odoo#192867 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173836, 'issue_id': 2795958888, 'author': 'fw-bot', 'body': '@vise-odoo @Ysoroko this forward port of odoo/odoo#192867 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602548665, 'issue_id': 2795958888, 'author': 'Ysoroko', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 14, 20, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:22:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194209.png)](https://mergebot.odoo.com/odoo/odoo/pull/194209)

fw-bot (Issue Creator) on (2025-01-17 17:22:36 UTC): @vise-odoo @Ysoroko this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194135

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 17:52:03 UTC): @vise-odoo @Ysoroko ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-18 02:01:07 UTC): @vise-odoo @Ysoroko this forward port of odoo/odoo#192867 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:00 UTC): @vise-odoo @Ysoroko this forward port of odoo/odoo#192867 is awaiting action (not merged or closed).

Ysoroko on (2025-01-20 14:20:30 UTC): @robodoo r+

"
2795936369,pull_request,closed,,[FIX] sale_expense: call the write expense approval function in tests,"This fixes an mistake in this forward-port: https://github.com/odoo/odoo/pull/193036 Only 17.0 is impacted; further forward-ports will directly be done right.
",oco-odoo,2025-01-17 17:11:35+00:00,[],2025-02-01 04:46:37+00:00,2025-01-18 02:50:48+00:00,https://github.com/odoo/odoo/pull/194208,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598814000, 'issue_id': 2795936369, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194208.png)](https://mergebot.odoo.com/odoo/odoo/pull/194208)', 'created_at': datetime.datetime(2025, 1, 17, 17, 11, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598814307, 'issue_id': 2795936369, 'author': 'oco-odoo', 'body': '@robodoo up to 17.0', 'created_at': datetime.datetime(2025, 1, 17, 17, 11, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598814412, 'issue_id': 2795936369, 'author': 'robodoo', 'body': 'Forward-port disabled (via limit).', 'created_at': datetime.datetime(2025, 1, 17, 17, 11, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598828760, 'issue_id': 2795936369, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 17, 17, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:11:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194208.png)](https://mergebot.odoo.com/odoo/odoo/pull/194208)

oco-odoo (Issue Creator) on (2025-01-17 17:11:48 UTC): @robodoo up to 17.0

robodoo on (2025-01-17 17:11:52 UTC): Forward-port disabled (via limit).

jco-odoo on (2025-01-17 17:17:18 UTC): @robodoo r+

"
2795927388,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194050
Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-17 17:06:55+00:00,[],2025-02-01 19:34:20+00:00,2025-01-18 19:04:05+00:00,https://github.com/odoo/odoo/pull/194207,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598805584, 'issue_id': 2795927388, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194207.png)](https://mergebot.odoo.com/odoo/odoo/pull/194207)', 'created_at': datetime.datetime(2025, 1, 17, 17, 6, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598805602, 'issue_id': 2795927388, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 6, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:06:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194207.png)](https://mergebot.odoo.com/odoo/odoo/pull/194207)

fw-bot (Issue Creator) on (2025-01-17 17:06:57 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795926788,pull_request,closed,,[FW][FIX] project: rely on access rules for task count in portal,"## Issue:
- Child contacts of followers were unable to access the tasks menu in the portal home, despite having access according to the access rules.

## Steps to reproduce:
1. Create a parent contact with a child contact.
2. Grant the child contact portal access.
3. Create a task with the parent contact as the customer.
4. Add the parent contact as a follower or send a message in the task chatter.
5. Log in as the child contact in the portal.
6. Notice the tasks menu is unavailable.

## Solution:
- The issue originated in `_prepare_home_portal_values`, where the task count was computed with a restrictive domain and sudo instead of relying on the access rules.
- Removed the unnecessary domain filter to let the access rules handle it.

opw-4306834



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194030
Forward-Port-Of: odoo/odoo#191601",fw-bot,2025-01-17 17:06:33+00:00,[],2025-02-01 08:58:07+00:00,2025-01-18 08:27:39+00:00,https://github.com/odoo/odoo/pull/194206,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598805015, 'issue_id': 2795926788, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194206.png)](https://mergebot.odoo.com/odoo/odoo/pull/194206)', 'created_at': datetime.datetime(2025, 1, 17, 17, 6, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598805037, 'issue_id': 2795926788, 'author': 'fw-bot', 'body': '@kawkb @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194094\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 6, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598911623, 'issue_id': 2795926788, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 18, 4, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:06:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194206.png)](https://mergebot.odoo.com/odoo/odoo/pull/194206)

fw-bot (Issue Creator) on (2025-01-17 17:06:36 UTC): @kawkb @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194094

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-17 18:04:40 UTC): @robodoo r+

"
2795925547,pull_request,closed,,[FW][FIX] sale_stock: return section in portal,"When cusomers access portal view, they are able to see deliveries/returns made for their sales order. Currently in the returns list, incoming deliveries are shown, without checking if it is a real return. This will show incoming deliveries from third party vendor that a customer should not see

- Activate Route MTO
- In Route Buy, open the first rule and set
  - Propagation of Procurement Group: Propagate
- Create a product [TEST] with:
  - Product Type: Goods
  - Invoicing Policy: Ordered Quantities
  - [Purchase tab] Set a Vendor
  - [Inventory Tab] Routes Buy, MTO
- Create a Sales Order with [TEST]
- Confirm
- Open the Purchase order and confirm it
- Back to the SO, 2 deliveries are created
- Open portal

Issue: Under 'Returns' it is listed the delivery from the vendor to the company.

opw-4420364

Forward-Port-Of: odoo/odoo#192729",fw-bot,2025-01-17 17:05:45+00:00,[],2025-02-01 09:54:22+00:00,2025-01-18 09:38:16+00:00,https://github.com/odoo/odoo/pull/194205,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598803582, 'issue_id': 2795925547, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194205.png)](https://mergebot.odoo.com/odoo/odoo/pull/194205)', 'created_at': datetime.datetime(2025, 1, 17, 17, 5, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598803610, 'issue_id': 2795925547, 'author': 'fw-bot', 'body': '@agr-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194189\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 17, 5, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598840096, 'issue_id': 2795925547, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 17, 21, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 17:05:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194205.png)](https://mergebot.odoo.com/odoo/odoo/pull/194205)

fw-bot (Issue Creator) on (2025-01-17 17:05:47 UTC): @agr-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194189

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

clesgow on (2025-01-17 17:21:48 UTC): @robodoo r+

"
2795904053,pull_request,closed,,[FW][FIX] pos_mercado_pago: undefined payment_method on MP callback,"Before this commit:
Once receveiving Mercado Pago callback, a JS traceback would occur:
```js
TypeError: Cannot read properties of undefined (reading 'payment_method')
at Proxy.get_payment
```

opw-4349957

Forward-Port-Of: odoo/odoo#194112",fw-bot,2025-01-17 16:53:15+00:00,[],2025-02-04 19:45:39+00:00,2025-01-21 19:30:22+00:00,https://github.com/odoo/odoo/pull/194204,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598781296, 'issue_id': 2795904053, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194204.png)](https://mergebot.odoo.com/odoo/odoo/pull/194204)', 'created_at': datetime.datetime(2025, 1, 17, 16, 53, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598781367, 'issue_id': 2795904053, 'author': 'fw-bot', 'body': '@lse-odoo @caburj cherrypicking of pull request odoo/odoo#194112 failed.\n\nstdout:\n```\nAuto-merging addons/pos_mercado_pago/static/src/app/utils/payment/payment_mercado_pago.js\nCONFLICT (content): Merge conflict in addons/pos_mercado_pago/static/src/app/utils/payment/payment_mercado_pago.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 53, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475479, 'issue_id': 2795904053, 'author': 'fw-bot', 'body': '@lse-odoo @caburj this forward port of odoo/odoo#194112 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2605183105, 'issue_id': 2795904053, 'author': 'lse-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 16, 20, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:53:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194204.png)](https://mergebot.odoo.com/odoo/odoo/pull/194204)

fw-bot (Issue Creator) on (2025-01-17 16:53:19 UTC): @lse-odoo @caburj cherrypicking of pull request odoo/odoo#194112 failed.

stdout:
```
Auto-merging addons/pos_mercado_pago/static/src/app/utils/payment/payment_mercado_pago.js
CONFLICT (content): Merge conflict in addons/pos_mercado_pago/static/src/app/utils/payment/payment_mercado_pago.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-21 02:00:45 UTC): @lse-odoo @caburj this forward port of odoo/odoo#194112 is awaiting action (not merged or closed).

lse-odoo on (2025-01-21 16:20:45 UTC): @robodoo r+

"
2795896288,pull_request,closed,,[FIX] point_of_sale: ios: download invoice on other tab,"Check commits for description.

OPW: 4348541
",caburj,2025-01-17 16:48:46+00:00,[],2025-02-03 16:01:33+00:00,2025-01-20 15:53:02+00:00,https://github.com/odoo/odoo/pull/194203,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598772993, 'issue_id': 2795896288, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194203.png)](https://mergebot.odoo.com/odoo/odoo/pull/194203)', 'created_at': datetime.datetime(2025, 1, 17, 16, 48, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601706528, 'issue_id': 2795896288, 'author': 'caburj', 'body': 'Not yet ready. Should take into account if connected to iot that can print pdf.', 'created_at': datetime.datetime(2025, 1, 20, 8, 15, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601859176, 'issue_id': 2795896288, 'author': 'caburj', 'body': 'Related: https://github.com/odoo/enterprise/pull/77408', 'created_at': datetime.datetime(2025, 1, 20, 9, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601887706, 'issue_id': 2795896288, 'author': 'caburj', 'body': '@robinengels I found a solution for 16.0. Can you review?', 'created_at': datetime.datetime(2025, 1, 20, 9, 35, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602008452, 'issue_id': 2795896288, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-17.4'."", 'created_at': datetime.datetime(2025, 1, 20, 10, 23, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:48:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194203.png)](https://mergebot.odoo.com/odoo/odoo/pull/194203)

caburj (Issue Creator) on (2025-01-20 08:15:03 UTC): Not yet ready. Should take into account if connected to iot that can print pdf.

caburj (Issue Creator) on (2025-01-20 09:23:00 UTC): Related: https://github.com/odoo/enterprise/pull/77408

caburj (Issue Creator) on (2025-01-20 09:35:21 UTC): @robinengels I found a solution for 16.0. Can you review?

robodoo on (2025-01-20 10:23:44 UTC): Forward-porting to 'saas-17.4'.

"
2795895260,pull_request,closed,,[FW][FIX] point_of_sale: fix closing session popup,"Fix issue that was always displaying popup ""The session is being closed by another user. The page will be reloaded."" each time you close a session. Now the `login_number` is correctly send in the context and can then be used inside `close_session_from_ui` correctly.

task-id: 4485659

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194082",fw-bot,2025-01-17 16:48:07+00:00,[],2025-02-03 20:55:55+00:00,2025-01-20 20:07:19+00:00,https://github.com/odoo/odoo/pull/194202,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598771784, 'issue_id': 2795895260, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194202.png)](https://mergebot.odoo.com/odoo/odoo/pull/194202)', 'created_at': datetime.datetime(2025, 1, 17, 16, 48, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598771810, 'issue_id': 2795895260, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 48, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601794412, 'issue_id': 2795895260, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 54, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:48:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194202.png)](https://mergebot.odoo.com/odoo/odoo/pull/194202)

fw-bot (Issue Creator) on (2025-01-17 16:48:09 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-20 08:54:52 UTC): @robodoo r+

"
2795881870,pull_request,open,,[IMP] point_of_sale: remove empty order lines,"- Now when paying an order we want to remove empty order lines (lines with qty=0).
- In order to keep the deleted quantity of the order line in the order chatter, we add the deleted quantity in the message (Previously we would get the message `{product_name}: Ordered quantity: {qty}->0` when paying and order with a line quantity set to 0).

task-id: 4485551

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-17 16:40:28+00:00,[],2025-02-04 15:27:32+00:00,,https://github.com/odoo/odoo/pull/194201,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598757525, 'issue_id': 2795881870, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194201.png)](https://mergebot.odoo.com/odoo/odoo/pull/194201)', 'created_at': datetime.datetime(2025, 1, 17, 16, 40, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:40:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194201.png)](https://mergebot.odoo.com/odoo/odoo/pull/194201)

"
2795880144,pull_request,closed,,[FW][FIX] web: typo in mobile form view test,"This commit fixes a typo in two mobile form view's tests where ""screenLeft"" was used instead of ""scrollX"".

Note: this was detected while testing for the new Chrome's headless mode set by default on Chrome 128+.

Forward-Port-Of: odoo/odoo#194105",fw-bot,2025-01-17 16:39:28+00:00,[],2025-02-01 01:51:24+00:00,2025-01-18 01:02:45+00:00,https://github.com/odoo/odoo/pull/194200,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598755650, 'issue_id': 2795880144, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194200.png)](https://mergebot.odoo.com/odoo/odoo/pull/194200)', 'created_at': datetime.datetime(2025, 1, 17, 16, 39, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598755666, 'issue_id': 2795880144, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 39, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598854733, 'issue_id': 2795880144, 'author': 'fw-bot', 'body': '@pparidans @rfr-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 17, 30, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:39:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194200.png)](https://mergebot.odoo.com/odoo/odoo/pull/194200)

fw-bot (Issue Creator) on (2025-01-17 16:39:30 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 17:30:41 UTC): @pparidans @rfr-odoo ci/runbot failed on this forward-port PR

"
2795879610,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194048
Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-17 16:39:11+00:00,[],2025-02-04 10:57:01+00:00,2025-01-21 10:54:34+00:00,https://github.com/odoo/odoo/pull/194199,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598755073, 'issue_id': 2795879610, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194199.png)](https://mergebot.odoo.com/odoo/odoo/pull/194199)', 'created_at': datetime.datetime(2025, 1, 17, 16, 39, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598755093, 'issue_id': 2795879610, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 39, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:39:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194199.png)](https://mergebot.odoo.com/odoo/odoo/pull/194199)

fw-bot (Issue Creator) on (2025-01-17 16:39:13 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795874331,pull_request,closed,,[FW][FIX] mrp: finished date of unplanned work order,"Problem: When a manufacturing order with a work order that was not planned is completed, a resource.calendar.leave is created for the work order. During this process the work order’s date_finished field is recalculated. This means that this work order reserves a slot in the work center to be finished in the future even though it has already been completed.

Purpose: If the work order already has a date_finished value, then that value should be used instead of it being recalculated based on the availability of the work center. This will help ensure that completed work orders are not reserving time in a work center when it has already been completed.

Steps to Reproduce on Runbot:

1. Create a new storable product.
2. Create a BoM for this product and navigate to the Operations tab and add an operation.
3. Create a manufacturing order, confirm it, and then produce all without planning it.
4. Navigate to the completed work order and observe the finished date is in the future.
5. Navigate to the work centers working hours’ time off and find the record associated with the work order.
6. Observe that the end date is in the future.

opw-4393301

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193705
Forward-Port-Of: odoo/odoo#192393",fw-bot,2025-01-17 16:37:29+00:00,[],2025-01-31 23:33:28+00:00,2025-01-17 23:15:47+00:00,https://github.com/odoo/odoo/pull/194198,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598748834, 'issue_id': 2795874331, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194198.png)](https://mergebot.odoo.com/odoo/odoo/pull/194198)', 'created_at': datetime.datetime(2025, 1, 17, 16, 37, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598748854, 'issue_id': 2795874331, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 37, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598850452, 'issue_id': 2795874331, 'author': 'fw-bot', 'body': '@prri-odoo @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 17, 28, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:37:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194198.png)](https://mergebot.odoo.com/odoo/odoo/pull/194198)

fw-bot (Issue Creator) on (2025-01-17 16:37:31 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 17:28:06 UTC): @prri-odoo @Whenrow ci/runbot failed on this forward-port PR

"
2795869572,pull_request,closed,,[FW][FIX] stock_landed_costs: round down in cost split,"**Current behavior:**
The rounding applied during the cost split of a landed cost's
cost computation can yield undesirable/unexpected results.

**Expected behavior:**
Sensible rounding.

**Steps to reproduce:**
1. Create some product with arbitrary cost, with avg and
real_time costing and valuation, respectively

2. Create a purchase order with 6 lines, all for that product

3. Confirm order & receive products, create bill and add a
landed cost line with cost=6.85

4. Post bill and create the landed cost:
* link to the receipt
* set split method to `equal`

5. Validate the LC, see that the val adjustment lines are
rounded unexpectedly- *specifically all the lines are rounded up
(beyond the per-adjustment-line value) which means the final
adjustment line cost-split share will reflect the cumulative
rounding loss of every adjustment line rounded prior*
E.g.,
<pre>
[ 1.15, 1.15, 1.15, 1.15, 1.15, 1.11 ]
                                  ^
</pre>

**Cause of the issue:**
We currently use `rounding_method='UP'`.

**Fix:**
Round HALF-UP. This will minimize the difference between the
true, unrounded split-value and the post-rounding value.

Semi-related fix: try to use consistent `ResCurrency.round()`
methods between `compute_landed_cost()` and `_check_sum()`.

opw-4200916

Forward-Port-Of: odoo/odoo#193861
Forward-Port-Of: odoo/odoo#190449",fw-bot,2025-01-17 16:35:05+00:00,[],2025-02-01 08:58:07+00:00,2025-01-18 08:27:44+00:00,https://github.com/odoo/odoo/pull/194197,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598743536, 'issue_id': 2795869572, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194197.png)](https://mergebot.odoo.com/odoo/odoo/pull/194197)', 'created_at': datetime.datetime(2025, 1, 17, 16, 35, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598743562, 'issue_id': 2795869572, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194178\n* odoo/odoo#194156\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 35, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598745493, 'issue_id': 2795869572, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 36, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598799692, 'issue_id': 2795869572, 'author': 'robodoo', 'body': ""@ethanrobv @clesgow 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 17, 3, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603880652, 'issue_id': 2795869572, 'author': 'fw-bot', 'body': ""@ethanrobv @clesgow ancestor PR odoo/odoo#194178 has been updated but this PR is merged and can't be updated to match.\n\nYou may want or need to manually update any followup PR."", 'created_at': datetime.datetime(2025, 1, 21, 7, 48, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:35:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194197.png)](https://mergebot.odoo.com/odoo/odoo/pull/194197)

fw-bot (Issue Creator) on (2025-01-17 16:35:07 UTC): @ethanrobv @clesgow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194178
* odoo/odoo#194156

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

clesgow on (2025-01-17 16:36:09 UTC): @robodoo r+

robodoo on (2025-01-17 17:03:32 UTC): @ethanrobv @clesgow 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-21 07:48:44 UTC): @ethanrobv @clesgow ancestor PR odoo/odoo#194178 has been updated but this PR is merged and can't be updated to match.

You may want or need to manually update any followup PR.

"
2795849448,pull_request,closed,,[FW][FIX] stock: allow lot to be used by branches,"Steps to reproduce the bug:
- Create a “Company A” and a “ branch 1” linked to this company
- Create a storable product “P1”:
    - limited to Company A

- Select only the branch 1 as current company
- Create a receipt for one unit of P1
- Mark it as to do.
- Try to create a lot or use lot created in Company A

Problem:
An acces error is raised:
`Incompatible companies on records:
- 'Product B' belongs to company 'Branch X' and 'Lot/Serial Number' (lot_id: 'sn_test') belongs to another company.`

opw-4415565

Forward-Port-Of: odoo/odoo#191529",fw-bot,2025-01-17 16:24:03+00:00,[],2025-01-27 19:55:39+00:00,2025-01-27 19:55:39+00:00,https://github.com/odoo/odoo/pull/194196,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598722946, 'issue_id': 2795849448, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194196.png)](https://mergebot.odoo.com/odoo/odoo/pull/194196)', 'created_at': datetime.datetime(2025, 1, 17, 16, 24, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598722970, 'issue_id': 2795849448, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 24, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598787262, 'issue_id': 2795849448, 'author': 'fw-bot', 'body': '@DjamelTouati @clesgow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 16, 56, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616181394, 'issue_id': 2795849448, 'author': 'fw-bot', 'body': ""@DjamelTouati @clesgow child PR odoo/odoo#194215 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 27, 16, 10, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616187410, 'issue_id': 2795849448, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 16, 12, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:24:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194196.png)](https://mergebot.odoo.com/odoo/odoo/pull/194196)

fw-bot (Issue Creator) on (2025-01-17 16:24:05 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 16:56:35 UTC): @DjamelTouati @clesgow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-27 16:10:04 UTC): @DjamelTouati @clesgow child PR odoo/odoo#194215 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

DjamelTouati on (2025-01-27 16:12:25 UTC): robodoo r+

"
2795827828,pull_request,closed,,[FW][IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193752",fw-bot,2025-01-17 16:13:18+00:00,[],2025-02-03 11:38:37+00:00,2025-01-20 11:38:34+00:00,https://github.com/odoo/odoo/pull/194195,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598700665, 'issue_id': 2795827828, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194195.png)](https://mergebot.odoo.com/odoo/odoo/pull/194195)', 'created_at': datetime.datetime(2025, 1, 17, 16, 13, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598700673, 'issue_id': 2795827828, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 13, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:13:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194195.png)](https://mergebot.odoo.com/odoo/odoo/pull/194195)

fw-bot (Issue Creator) on (2025-01-17 16:13:20 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795815986,pull_request,open,,"[FIX] {sale_purchase_,}stock: remove the cross-dock route","## General Issue

The current Cross-dock route cannot function as the main rule set on products without disrupting unrelated flows (e.g., regular purchases). They also fail as exceptions, as they are not triggered in such cases.

### Cause:

Push and pull rules have been refactored in saas-17.2 (see commit 11e69870db1c49d9a6af79ffd263e4e162b34b6b). Previously, most flows relied solely on pull rules, generating the entire picking chain at inventory need confirmation. With the refactoring, push rules are now prioritized, generating pickings step-by-step upon validation. While this increases route flexibility, it introduces issues for flows expected to be entirely triggered by sales order (SO) validations, such as cross-docking.

In version 18.0, cross-dock rules were refactored to rely only on push rules (see commit af5479dfdbed0959c02bd862c8184fe141b51788), but this created significant issues.

### Steps to Reproduce:

- In the settings, Enable multi-step routes.
- Configure the warehouse for 2-step receipt and delivery
> automatically unarchives the cross-dock route and updates its rules:
    - Push rule: Input → Output
    - Buy rule: → Partner/Customer

#### Scenario 1: Cross-dock set on the product

Issue: Cannot receipt in 2 steps → cross dock can not be the rule.

- Create an inventory-tracked product with the buy and cross-dock routes.
- Create and confirm a purchase order for 1 unit of the product.
- Validate the receipt from Vendor → Input.

### Result:

Instead of generating a picking Input → Stock, the cross-dock push rule triggers, generating a picking Input → Output.

### Cause:

Rules are prioritized by product-specific rules, followed by warehouse rules: https://github.com/odoo/odoo/blob/e3d54695862f73d9be6c35121def57ed641a1a45/addons/stock/models/stock_rule.py#L535-L539 The cross-dock push rule therefore overrides regular 2-step receipt rules, even though cross-dock routes only make sense for flows initiated by an SO.

#### Scenario 2: Cross-dock not set on the product

Issue: Cannot trigger cross-docking by any means → cross dock can not be the exception.

- Create an inventory-tracked product with only the buy route.
- Create an SO for 1 unit of the product and set the cross-dock route on the Sales Order Line (SOL). Confirm the SO.
> A purchase order (PO) is created.
- Confirm the PO.
> A regular receipt is generated.
- Confirm the receipt.

### Result:

The flow proceeds as a regular 2-step delivery; the cross-dock route is not applied.

Cause:

The SO uses the cross-dock route only for the buy rule to generate a PO. Once the PO is generated is role in this world is done. There is no way to provide a route on the PO, it will just generate a regular receipt: https://github.com/odoo/odoo/blob/e3d54695862f73d9be6c35121def57ed641a1a45/addons/purchase_stock/models/purchase_order_line.py#L343-L350 Once it is confirmed, the flow defaults to regular 2-step delivery rules, as the cross-dock route is neither a default nor set on the product.

### Master fix:

We remove that route + we add the possibility of transmitting the route_id from the pol.

opw-4380375
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lase-odoo,2025-01-17 16:07:04+00:00,[],2025-02-05 08:20:35+00:00,,https://github.com/odoo/odoo/pull/194194,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598688839, 'issue_id': 2795815986, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194194.png)](https://mergebot.odoo.com/odoo/odoo/pull/194194)', 'created_at': datetime.datetime(2025, 1, 17, 16, 7, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598689451, 'issue_id': 2795815986, 'author': 'lase-odoo', 'body': 'Stable change: https://github.com/odoo/odoo/pull/192362', 'created_at': datetime.datetime(2025, 1, 17, 16, 7, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607341547, 'issue_id': 2795815986, 'author': 'lase-odoo', 'body': 'I had to rebase for the upgrade.', 'created_at': datetime.datetime(2025, 1, 22, 14, 6, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 16:07:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194194.png)](https://mergebot.odoo.com/odoo/odoo/pull/194194)

lase-odoo (Issue Creator) on (2025-01-17 16:07:25 UTC): Stable change: https://github.com/odoo/odoo/pull/192362

lase-odoo (Issue Creator) on (2025-01-22 14:06:22 UTC): I had to rebase for the upgrade.

"
2795779941,pull_request,open,,[IMP] hr: ignore work_phone update from address_id when manually updated,"The `hr.employee.base` model needed to track whether its `work_phone` field had been manually updated to ensure that updates are ignored if the field was manually modified. Updates should be allowed again if a new `address_id` is set.""

task-3823390

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ataha1,2025-01-17 15:48:06+00:00,[],2025-01-24 14:29:02+00:00,,https://github.com/odoo/odoo/pull/194193,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598651061, 'issue_id': 2795779941, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194193.png)](https://mergebot.odoo.com/odoo/odoo/pull/194193)', 'created_at': datetime.datetime(2025, 1, 17, 15, 48, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:48:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194193.png)](https://mergebot.odoo.com/odoo/odoo/pull/194193)

"
2795774050,pull_request,open,,[IMP] account_reports: dynamic expressions system,"A change to the expressions has been made.

Same as before, the label targets the name and the subformula targets the engine output.
But now, the subformula can target a field on the model account_move_line.

Example for the engine domain, if we want to target the field balance we just set `balance` the aggregation is bu default sum.
If we want to target the field debit we do the same we just set `debit` yey.

We can explicitly set the aggregation function for instance instead of just setting balance, we can set the subforumla to `sum(balance)`.
The subformula pattern is as follow: `sign aggregation_function(field)` examples: `-sum_if_pos(debit)` or `move_name` or `-balance` or `count(id)` ...

This enables us to dynamically, from the interface, add columns and expressions to fill these with the values we want and add some flexibility to these reports.
This is only working for reports using engines.

task-4345514

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lost-odoo,2025-01-17 15:45:05+00:00,['lost-odoo'],2025-02-06 12:34:06+00:00,,https://github.com/odoo/odoo/pull/194192,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598645129, 'issue_id': 2795774050, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194192.png)](https://mergebot.odoo.com/odoo/odoo/pull/194192)', 'created_at': datetime.datetime(2025, 1, 17, 15, 45, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:45:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194192.png)](https://mergebot.odoo.com/odoo/odoo/pull/194192)

"
2795772129,pull_request,closed,,[FIX] point_of_sale: only display payments for paid and invoiced orders,"Before this commit, the payment smart button included payments for cancelled orders, even though those payments were not captured. This caused discrepancies as it inaccurately reflected payments for orders that were not finalized.

opw-4487386

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-17 15:44:03+00:00,[],2025-02-06 19:37:41+00:00,2025-02-06 19:37:41+00:00,https://github.com/odoo/odoo/pull/194191,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598643120, 'issue_id': 2795772129, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194191.png)](https://mergebot.odoo.com/odoo/odoo/pull/194191)', 'created_at': datetime.datetime(2025, 1, 17, 15, 44, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621012977, 'issue_id': 2795772129, 'author': 'pedrambiria', 'body': '@adgu-odoo Hello,\r\nCould you please review this pr?', 'created_at': datetime.datetime(2025, 1, 29, 8, 47, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640110702, 'issue_id': 2795772129, 'author': 'adgu-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 15, 15, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:44:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194191.png)](https://mergebot.odoo.com/odoo/odoo/pull/194191)

pedrambiria (Issue Creator) on (2025-01-29 08:47:15 UTC): @adgu-odoo Hello,
Could you please review this pr?

adgu-odoo on (2025-02-06 15:15:46 UTC): robodoo r+

"
2795769095,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747

Forward-Port-Of: odoo/odoo#194019
Forward-Port-Of: odoo/odoo#193786",fw-bot,2025-01-17 15:42:34+00:00,[],2025-02-04 10:01:31+00:00,2025-01-21 10:00:05+00:00,https://github.com/odoo/odoo/pull/194190,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598640076, 'issue_id': 2795769095, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194190.png)](https://mergebot.odoo.com/odoo/odoo/pull/194190)', 'created_at': datetime.datetime(2025, 1, 17, 15, 42, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598640091, 'issue_id': 2795769095, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194140\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 42, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172954, 'issue_id': 2795769095, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo this forward port of odoo/odoo#193786 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475853, 'issue_id': 2795769095, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo this forward port of odoo/odoo#193786 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603893504, 'issue_id': 2795769095, 'author': 'guva-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 7, 56, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:42:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194190.png)](https://mergebot.odoo.com/odoo/odoo/pull/194190)

fw-bot (Issue Creator) on (2025-01-17 15:42:36 UTC): @guva-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194140

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:19 UTC): @guva-odoo @jbw-odoo this forward port of odoo/odoo#193786 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:06 UTC): @guva-odoo @jbw-odoo this forward port of odoo/odoo#193786 is awaiting action (not merged or closed).

guva-odoo on (2025-01-21 07:56:33 UTC): @robodoo r+

"
2795766711,pull_request,closed,,[FW][FIX] sale_stock: return section in portal,"When cusomers access portal view, they are able to see deliveries/returns made for their sales order. Currently in the returns list, incoming deliveries are shown, without checking if it is a real return. This will show incoming deliveries from third party vendor that a customer should not see

- Activate Route MTO
- In Route Buy, open the first rule and set
  - Propagation of Procurement Group: Propagate
- Create a product [TEST] with:
  - Product Type: Goods
  - Invoicing Policy: Ordered Quantities
  - [Purchase tab] Set a Vendor
  - [Inventory Tab] Routes Buy, MTO
- Create a Sales Order with [TEST]
- Confirm
- Open the Purchase order and confirm it
- Back to the SO, 2 deliveries are created
- Open portal

Issue: Under 'Returns' it is listed the delivery from the vendor to the company.

opw-4420364

Forward-Port-Of: odoo/odoo#192729",fw-bot,2025-01-17 15:41:41+00:00,[],2025-02-01 19:34:18+00:00,2025-01-18 19:03:50+00:00,https://github.com/odoo/odoo/pull/194189,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598637945, 'issue_id': 2795766711, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194189.png)](https://mergebot.odoo.com/odoo/odoo/pull/194189)', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598637962, 'issue_id': 2795766711, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:41:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194189.png)](https://mergebot.odoo.com/odoo/odoo/pull/194189)

fw-bot (Issue Creator) on (2025-01-17 15:41:43 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795766199,pull_request,closed,,[FW][IMP] account: Raise a User error rather than assert,"Problem
---------
When you use a Invoice report with the checkbox ""Invoice report"" unselected (misconfiguration), you get a traceback.

Objective
---------
Replace it with an error message instead, saying there's no invoice report configured in the database.

Solution
---------
Turn the asserts into a if condition that raises a user error.

task-4421065

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192920",fw-bot,2025-01-17 15:41:25+00:00,[],2025-02-03 13:39:16+00:00,2025-01-20 13:19:51+00:00,https://github.com/odoo/odoo/pull/194188,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598637329, 'issue_id': 2795766199, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194188.png)](https://mergebot.odoo.com/odoo/odoo/pull/194188)', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598637361, 'issue_id': 2795766199, 'author': 'fw-bot', 'body': '@aboo-odoo @clbr-odoo cherrypicking of pull request odoo/odoo#192920 failed.\n\nstdout:\n```\nAuto-merging addons/account/i18n/account.pot\nAuto-merging addons/account/models/account_move_send.py\nCONFLICT (content): Merge conflict in addons/account/models/account_move_send.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601924772, 'issue_id': 2795766199, 'author': 'aboo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 9, 50, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:41:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194188.png)](https://mergebot.odoo.com/odoo/odoo/pull/194188)

fw-bot (Issue Creator) on (2025-01-17 15:41:27 UTC): @aboo-odoo @clbr-odoo cherrypicking of pull request odoo/odoo#192920 failed.

stdout:
```
Auto-merging addons/account/i18n/account.pot
Auto-merging addons/account/models/account_move_send.py
CONFLICT (content): Merge conflict in addons/account/models/account_move_send.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aboo-odoo on (2025-01-20 09:50:18 UTC): @robodoo r+

"
2795765607,pull_request,closed,,[FW][IMP] account: unified the labelling of account.move.line,"In list view and reports, the accounting entries were displayed in different manners. Sometimes in a stupid way (name of the move repeated twice).

This commit aims to give a single and unified way to display them.

ticket-4440711




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193607
Forward-Port-Of: odoo/odoo#192463",fw-bot,2025-01-17 15:41:06+00:00,[],2025-02-03 16:25:50+00:00,2025-01-20 16:23:55+00:00,https://github.com/odoo/odoo/pull/194187,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598636710, 'issue_id': 2795765607, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194187.png)](https://mergebot.odoo.com/odoo/odoo/pull/194187)', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598636771, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 41, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598748021, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 16, 37, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468794, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600466894, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173994, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602007488, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo ci/template failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 20, 10, 23, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602009480, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 20, 10, 24, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602018152, 'issue_id': 2795765607, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 20, 10, 26, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602565679, 'issue_id': 2795765607, 'author': 'qdp-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 14, 27, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:41:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194187.png)](https://mergebot.odoo.com/odoo/odoo/pull/194187)

fw-bot (Issue Creator) on (2025-01-17 15:41:10 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 16:37:07 UTC): @qdp-odoo @oco-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-18 02:01:14 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:05 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:08 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 10:23:20 UTC): @qdp-odoo @oco-odoo ci/template failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-20 10:24:03 UTC): @qdp-odoo @oco-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-20 10:26:58 UTC): @qdp-odoo @oco-odoo ci/upgrade_enterprise failed on this forward-port PR

qdp-odoo on (2025-01-20 14:27:12 UTC): @robodoo r+

"
2795762215,pull_request,closed,,[BW][FIX] core: disable typofix translations during upgrades,"Before:
The typofix feature treats terms in the old and new values with similar text
content as the same term, migrating the translations of the old term to the new
term.

For example

The old value has the mapping:
'Draft': 'Brouillon'

The new value contains the term:
'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'

Since the old term and the new term share the same text content, 'Draft', after
`write`, the new term reuses the old translation of 'Draft'. However, the
translation 'Brouillon' is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the
en_US value and is responsible for verifying translations afterward. However, it
is problematic during upgrades because users cannot easily identify which
records have changed and need to be rechecked.

After:
The translation inheritance behavior can be described as below
Translations can be inherited after `write` from old terms to new terms which
share the very close text contents
1. when `write` in production mode, text contents for translation terms are more
   important than the HTML/XML structures of them, and the old term translations
   should be remained as much as possible. Because
    * the writing user is responsible to recheck all translations after `write`.
    * it is easier for the writing user to copy technical HTML/XML structures
      than translate text contents for a language they may not know.
    * the feature can also be used as typofix when the only small diff is the
      text content
2. when `write` in upgrade time, the HTML/XML structure is more important than
   the text content, and the new term structure should be remained as much as
   possible. Because
    * HTML/XML structures might be changed a lot after upgrade, which may
      contain behavior relevant diff (e.g. `invisible`), even if text contents
      are not changed.
    * users have no idea which records' values are changed during upgrade and
      are hard to recheck their translations.
    * new terms are highly likely to be correctly translated in the latest po
      files which will be imported during upgrade.
    * the typofix feature can still be remained when the only small diff is the
      text content

Based on the above feature analysis, we use the below new strategy
1. translations can be inherited only if the old source term and the new source
   term share the same HTML/XML structure
2. translations can be inherited only if the old translation term and the new
   source term share the same HTML/XML structure
3. when translations are inherited, MODIFIER_ATTRS will be synchronized with
   the new source term, other attributes will be copied from the source term if
   available.

Backward-Port-Of: #194181
Backward-Port-Of: #150152

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",HydrionBurst,2025-01-17 15:39:18+00:00,[],2025-02-07 12:58:41+00:00,2025-01-24 12:58:22+00:00,https://github.com/odoo/odoo/pull/194186,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598633279, 'issue_id': 2795762215, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194186.png)](https://mergebot.odoo.com/odoo/odoo/pull/194186)', 'created_at': datetime.datetime(2025, 1, 17, 15, 39, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612157626, 'issue_id': 2795762215, 'author': 'rco-odoo', 'body': '@robodoo fw=no r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 14, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612157706, 'issue_id': 2795762215, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 24, 10, 14, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:39:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194186.png)](https://mergebot.odoo.com/odoo/odoo/pull/194186)

rco-odoo on (2025-01-24 10:14:10 UTC): @robodoo fw=no r+

robodoo on (2025-01-24 10:14:13 UTC): Disabled forward-porting.

"
2795742958,pull_request,closed,,[FW][FIX] pos_mercado_pago: undefined payment_method on MP callback,"Before this commit:
Once receveiving Mercado Pago callback, a JS traceback would occur:
```js
TypeError: Cannot read properties of undefined (reading 'payment_method')
at Proxy.get_payment
```

opw-4349957

Forward-Port-Of: odoo/odoo#194112",fw-bot,2025-01-17 15:29:45+00:00,[],2025-01-31 21:53:22+00:00,2025-01-17 21:29:21+00:00,https://github.com/odoo/odoo/pull/194185,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598614339, 'issue_id': 2795742958, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194185.png)](https://mergebot.odoo.com/odoo/odoo/pull/194185)', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598614360, 'issue_id': 2795742958, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598781321, 'issue_id': 2795742958, 'author': 'fw-bot', 'body': '@lse-odoo @caburj the next pull request (odoo/odoo#194204) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 16, 53, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598818475, 'issue_id': 2795742958, 'author': 'lse-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 17, 13, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:29:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194185.png)](https://mergebot.odoo.com/odoo/odoo/pull/194185)

fw-bot (Issue Creator) on (2025-01-17 15:29:47 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 16:53:17 UTC): @lse-odoo @caburj the next pull request (odoo/odoo#194204) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lse-odoo on (2025-01-17 17:13:05 UTC): @robodoo r+

"
2795742385,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194050
Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-17 15:29:28+00:00,[],2025-01-31 21:53:24+00:00,2025-01-17 21:29:22+00:00,https://github.com/odoo/odoo/pull/194184,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598613808, 'issue_id': 2795742385, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194184.png)](https://mergebot.odoo.com/odoo/odoo/pull/194184)', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598613831, 'issue_id': 2795742385, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598696021, 'issue_id': 2795742385, 'author': 'fw-bot', 'body': '@kawkb @smetl ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 16, 10, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598759068, 'issue_id': 2795742385, 'author': 'kawkb', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 16, 41, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598759160, 'issue_id': 2795742385, 'author': 'robodoo', 'body': '@kawkb retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 17, 16, 41, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:29:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194184.png)](https://mergebot.odoo.com/odoo/odoo/pull/194184)

fw-bot (Issue Creator) on (2025-01-17 15:29:30 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 16:10:48 UTC): @kawkb @smetl ci/runbot failed on this forward-port PR

kawkb on (2025-01-17 16:41:20 UTC): @robodoo retry

robodoo on (2025-01-17 16:41:23 UTC): @kawkb retry makes no sense when the PR is not in error.

"
2795741797,pull_request,closed,,[FW][IMP] l10n_be: improve/add deductible taxes,"For Belgium, combination of taxes and their deductibility are many. While our system of Distribution lines can be used in many cases, it's not easy or intuitive to configure, even for advanced accountants.

This commit aims at making sure:
- The most useful taxes are active by default
- We provide a few examples of the most commonly used Deductible taxes as well as examples of specific cases (Deductible IntraCom taxes).

task-id 4417039

Forward-Port-Of: odoo/odoo#193860
Forward-Port-Of: odoo/odoo#191350",fw-bot,2025-01-17 15:29:11+00:00,[],2025-01-31 21:53:23+00:00,2025-01-17 21:29:22+00:00,https://github.com/odoo/odoo/pull/194183,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598613405, 'issue_id': 2795741797, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194183.png)](https://mergebot.odoo.com/odoo/odoo/pull/194183)', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598613433, 'issue_id': 2795741797, 'author': 'fw-bot', 'body': '@RicGR98 @h4818 cherrypicking of pull request odoo/odoo#191350 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_be/data/template/account.tax-be.csv\nCONFLICT (content): Merge conflict in addons/l10n_be/data/template/account.tax-be.csv\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598757284, 'issue_id': 2795741797, 'author': 'RicGR98', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 40, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:29:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194183.png)](https://mergebot.odoo.com/odoo/odoo/pull/194183)

fw-bot (Issue Creator) on (2025-01-17 15:29:18 UTC): @RicGR98 @h4818 cherrypicking of pull request odoo/odoo#191350 failed.

stdout:
```
Auto-merging addons/l10n_be/data/template/account.tax-be.csv
CONFLICT (content): Merge conflict in addons/l10n_be/data/template/account.tax-be.csv

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

RicGR98 on (2025-01-17 16:40:23 UTC): @robodoo r+

"
2795741127,pull_request,closed,,[FW][FIX] pos_self_order: corrected price calculation for combo product lines,"Issue:
=======
Combo product lines in the POS frontend displayed incorrect prices when order from self Order

Cause:
=======
The `price_unit` was being calculated without considering the `combo_item_id`. For example:
price_unit += pos_order_line.combo_price + price_extra_child`

Fix:
=====
The `combo_item_id` was included in the calculation to ensure accuracy: 
price_unit += pos_order_line.`combo_item_id`.combo_price + price_extra_child

Task-4464002

Forward-Port-Of: odoo/odoo#193356",fw-bot,2025-01-17 15:28:52+00:00,[],2025-02-03 08:53:21+00:00,2025-01-20 08:46:45+00:00,https://github.com/odoo/odoo/pull/194182,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598613342, 'issue_id': 2795741127, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194182.png)](https://mergebot.odoo.com/odoo/odoo/pull/194182)', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598613376, 'issue_id': 2795741127, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 29, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598668324, 'issue_id': 2795741127, 'author': 'fw-bot', 'body': '@jipr-odoo @adgu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 15, 57, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601366755, 'issue_id': 2795741127, 'author': 'fw-bot', 'body': '@jipr-odoo @adgu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 20, 4, 55, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601534598, 'issue_id': 2795741127, 'author': 'jipr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 7, 5, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:29:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194182.png)](https://mergebot.odoo.com/odoo/odoo/pull/194182)

fw-bot (Issue Creator) on (2025-01-17 15:29:16 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 15:57:01 UTC): @jipr-odoo @adgu-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-20 04:55:58 UTC): @jipr-odoo @adgu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

jipr-odoo on (2025-01-20 07:05:47 UTC): @robodoo r+

"
2795739444,pull_request,closed,,[FIX] core: inherit translations better when upgrade,"# Before:
The typofix feature treats terms in the old and new values with similar text
content as the same term, migrating the translations of the old term to the new
term.

For example

The old value has the mapping:
`'Draft': 'Brouillon'`

The new value contains the term:
`'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'`

Since the old term and the new term share the same text content, `'Draft'`, after
`write`, the new term reuses the old translation of 'Draft'. However, the
translation `'Brouillon'` is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the
en_US value and is responsible for verifying translations afterward. However, it
is problematic during upgrades because users cannot easily identify which
records have changed and need to be rechecked.

# After:
The translation inheritance behavior can be described as below
Translations can be inherited after `write` from old terms to new terms which
share the very close text contents
1. when `write` in production mode, text contents for translation terms are more
   important than the HTML/XML structures of them, and the old term translations
   should be remained as much as possible. Because
    * the writing user is responsible to recheck all translations after `write`.
    * it is easier for the writing user to copy technical HTML/XML structures
      than translate text contents for a language they may not know.
    * the feature can also be used as typofix when the only small diff is the
      text content
2. when `write` in upgrade time, the HTML/XML structure is more important than
   the text content, and the new term structure should be remained as much as
   possible. Because
    * HTML/XML structures might be changed a lot after upgrade, which may
      contain behavior relevant diff (e.g. `invisible`), even if text contents
      are not changed.
    * users have no idea which records' values are changed during upgrade and
      are hard to recheck their translations.
    * new terms are highly likely to be correctly translated in the latest po
      files which will be imported during upgrade.
    * the typofix feature can still be remained when the only small diff is the
      text content

Based on the above feature analysis, we use the below new strategy
1. translations can be inherited only if the old source term and the new source
   term share the same HTML/XML structure
2. translations can be inherited only if the old translation term and the new
   source term share the same HTML/XML structure
3. when translations are inherited, MODIFIER_ATTRS will be synchronized with 
   the new source term, other attributes will be copied from the source term if 
   available.",HydrionBurst,2025-01-17 15:28:05+00:00,[],2025-02-07 13:56:58+00:00,2025-01-24 13:48:20+00:00,https://github.com/odoo/odoo/pull/194181,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598611093, 'issue_id': 2795739444, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194181.png)](https://mergebot.odoo.com/odoo/odoo/pull/194181)', 'created_at': datetime.datetime(2025, 1, 17, 15, 28, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612156894, 'issue_id': 2795739444, 'author': 'rco-odoo', 'body': '@robodoo fw=no r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 13, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612156977, 'issue_id': 2795739444, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 24, 10, 13, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:28:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194181.png)](https://mergebot.odoo.com/odoo/odoo/pull/194181)

rco-odoo on (2025-01-24 10:13:55 UTC): @robodoo fw=no r+

robodoo on (2025-01-24 10:13:58 UTC): Disabled forward-porting.

"
2795727547,pull_request,closed,,"[IMP] im_livechat, web: proper focus when using hotkeys on CloseConfirmation","Before this commit, the Enter hotkey did not work to confirm the CloseConfirmation in livechat. This happened because:
- The `keydown` event is currently captured by the chat window not the CloseConfirmation component because the focused element is not properly detected.
- `useAutofocus` doesn't detect the focus target element because it checks only for the main tree DOM root, not the shadow root.

This PR changes the `useAutofocus` to handle the shadow roots and puts the focus on the chat window composer on cancel so it's more effective in case the user needs to type or use Esc to reopen close confirmation.

",maki-odoo,2025-01-17 15:22:15+00:00,[],2025-01-29 13:58:08+00:00,2025-01-29 13:40:32+00:00,https://github.com/odoo/odoo/pull/194180,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598599699, 'issue_id': 2795727547, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194180.png)](https://mergebot.odoo.com/odoo/odoo/pull/194180)', 'created_at': datetime.datetime(2025, 1, 17, 15, 22, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620757711, 'issue_id': 2795727547, 'author': 'robodoo', 'body': '@maki-odoo @alexkuhn staging failed: ci/runbot on 9b2c6561cd3a20ac2f31f607e7cbe2a782a1ef6d (view more at https://runbot.odoo.com/runbot/build/74129705)', 'created_at': datetime.datetime(2025, 1, 29, 5, 36, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621063111, 'issue_id': 2795727547, 'author': 'maki-odoo', 'body': '@alexkuhn Some imports have been deleted by odoo/odoo#194402', 'created_at': datetime.datetime(2025, 1, 29, 9, 8, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621258843, 'issue_id': 2795727547, 'author': 'alexkuhn', 'body': '@robodoo r+ delegate+', 'created_at': datetime.datetime(2025, 1, 29, 10, 34, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:22:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194180.png)](https://mergebot.odoo.com/odoo/odoo/pull/194180)

robodoo on (2025-01-29 05:36:14 UTC): @maki-odoo @alexkuhn staging failed: ci/runbot on 9b2c6561cd3a20ac2f31f607e7cbe2a782a1ef6d (view more at https://runbot.odoo.com/runbot/build/74129705)

maki-odoo (Issue Creator) on (2025-01-29 09:08:52 UTC): @alexkuhn Some imports have been deleted by odoo/odoo#194402

alexkuhn on (2025-01-29 10:34:14 UTC): @robodoo r+ delegate+

"
2795725840,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193519
Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-17 15:21:22+00:00,[],2025-02-03 13:39:08+00:00,2025-01-20 13:19:01+00:00,https://github.com/odoo/odoo/pull/194179,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598597947, 'issue_id': 2795725840, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194179.png)](https://mergebot.odoo.com/odoo/odoo/pull/194179)', 'created_at': datetime.datetime(2025, 1, 17, 15, 21, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598597974, 'issue_id': 2795725840, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 21, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598659151, 'issue_id': 2795725840, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 15, 52, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:21:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194179.png)](https://mergebot.odoo.com/odoo/odoo/pull/194179)

fw-bot (Issue Creator) on (2025-01-17 15:21:23 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 15:52:18 UTC): @walidsahli @Whenrow ci/runbot failed on this forward-port PR

"
2795720430,pull_request,closed,,[FW][FIX] stock_landed_costs: round down in cost split,"**Current behavior:**
The rounding applied during the cost split of a landed cost's
cost computation can yield undesirable/unexpected results.

**Expected behavior:**
Sensible rounding.

**Steps to reproduce:**
1. Create some product with arbitrary cost, with avg and
real_time costing and valuation, respectively

2. Create a purchase order with 6 lines, all for that product

3. Confirm order & receive products, create bill and add a
landed cost line with cost=6.85

4. Post bill and create the landed cost:
* link to the receipt
* set split method to `equal`

5. Validate the LC, see that the val adjustment lines are
rounded unexpectedly- *specifically all the lines are rounded up
(beyond the per-adjustment-line value) which means the final
adjustment line cost-split share will reflect the cumulative
rounding loss of every adjustment line rounded prior*
E.g.,
<pre>
[ 1.15, 1.15, 1.15, 1.15, 1.15, 1.11 ]
                                  ^
</pre>

**Cause of the issue:**
We currently use `rounding_method='UP'`.

**Fix:**
Round HALF-UP. This will minimize the difference between the
true, unrounded split-value and the post-rounding value.

Semi-related fix: try to use consistent `ResCurrency.round()`
methods between `compute_landed_cost()` and `_check_sum()`.

opw-4200916

Forward-Port-Of: odoo/odoo#193861
Forward-Port-Of: odoo/odoo#190449",fw-bot,2025-01-17 15:18:35+00:00,[],2025-02-04 18:21:59+00:00,2025-01-21 18:16:17+00:00,https://github.com/odoo/odoo/pull/194178,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598592678, 'issue_id': 2795720430, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194178.png)](https://mergebot.odoo.com/odoo/odoo/pull/194178)', 'created_at': datetime.datetime(2025, 1, 17, 15, 18, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598592702, 'issue_id': 2795720430, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 18, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599656225, 'issue_id': 2795720430, 'author': 'robodoo', 'body': '@ethanrobv @clesgow staging failed: ci/runbot on 997d89964ef51c4552a86676efb51cc6f5f951e0 (view more at https://runbot.odoo.com/runbot/build/73568024)', 'created_at': datetime.datetime(2025, 1, 18, 10, 8, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600468980, 'issue_id': 2795720430, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174383, 'issue_id': 2795720430, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476799, 'issue_id': 2795720430, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603880625, 'issue_id': 2795720430, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 21, 7, 48, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604944507, 'issue_id': 2795720430, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 14, 50, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:18:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194178.png)](https://mergebot.odoo.com/odoo/odoo/pull/194178)

fw-bot (Issue Creator) on (2025-01-17 15:18:36 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-18 10:08:20 UTC): @ethanrobv @clesgow staging failed: ci/runbot on 997d89964ef51c4552a86676efb51cc6f5f951e0 (view more at https://runbot.odoo.com/runbot/build/73568024)

fw-bot (Issue Creator) on (2025-01-19 02:02:19 UTC): @ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:26 UTC): @ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:58 UTC): @ethanrobv @clesgow this forward port of odoo/odoo#190449 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 07:48:43 UTC): @ethanrobv @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.

clesgow on (2025-01-21 14:50:03 UTC): @robodoo r+

"
2795716954,pull_request,closed,,[FW][FIX] delivery: fix loc. selector maker position,"Before this commit, markers on the location selector map were misaligned. The misalignment was proportional to the zoom level, as the marker incorrectly used the top-left corner of the anchor as its reference.

This commit resolves the issue by defining the correct icon anchor position for markers.

Forward-Port-Of: odoo/odoo#193982",fw-bot,2025-01-17 15:16:48+00:00,[],2025-02-01 08:58:08+00:00,2025-01-18 08:27:48+00:00,https://github.com/odoo/odoo/pull/194177,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598588874, 'issue_id': 2795716954, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194177.png)](https://mergebot.odoo.com/odoo/odoo/pull/194177)', 'created_at': datetime.datetime(2025, 1, 17, 15, 16, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598588903, 'issue_id': 2795716954, 'author': 'fw-bot', 'body': '@chevalierv this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194152\n* odoo/odoo#194126\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 16, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598712670, 'issue_id': 2795716954, 'author': 'chevalierv', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 19, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:16:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194177.png)](https://mergebot.odoo.com/odoo/odoo/pull/194177)

fw-bot (Issue Creator) on (2025-01-17 15:16:49 UTC): @chevalierv this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194152
* odoo/odoo#194126

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

chevalierv on (2025-01-17 16:19:42 UTC): robodoo r+

"
2795709710,pull_request,closed,,[FIX] google_calendar: avoid sync failure on rescheduled all-day events,"Before this commit, syncing a Google Calendar that includes an all-day recurrent event—one of which is rescheduled—would fail entirely. This happened because `full_recurring_event_id` only handled events with a specific date-time format (`T...Z`), causing the regex to break for date-only IDs.

opw-4443780

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-17 15:13:17+00:00,[],2025-01-27 13:20:40+00:00,2025-01-27 13:20:39+00:00,https://github.com/odoo/odoo/pull/194176,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598581464, 'issue_id': 2795709710, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194176.png)](https://mergebot.odoo.com/odoo/odoo/pull/194176)', 'created_at': datetime.datetime(2025, 1, 17, 15, 13, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598843441, 'issue_id': 2795709710, 'author': 'pedrambiria', 'body': ""@arj-odoo Hello,\r\nIt's green now"", 'created_at': datetime.datetime(2025, 1, 17, 17, 23, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615387628, 'issue_id': 2795709710, 'author': 'arj-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 10, 35, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:13:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194176.png)](https://mergebot.odoo.com/odoo/odoo/pull/194176)

pedrambiria (Issue Creator) on (2025-01-17 17:23:50 UTC): @arj-odoo Hello,
It's green now

arj-odoo on (2025-01-27 10:35:31 UTC): @robodoo r+

"
2795709663,pull_request,closed,,[FW][FIX] web: typo in mobile form view test,"This commit fixes a typo in two mobile form view's tests where ""screenLeft"" was used instead of ""scrollX"".

Note: this was detected while testing for the new Chrome's headless mode set by default on Chrome 128+.

Forward-Port-Of: odoo/odoo#194105",fw-bot,2025-01-17 15:13:16+00:00,[],2025-02-01 01:51:26+00:00,2025-01-18 01:22:19+00:00,https://github.com/odoo/odoo/pull/194175,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598581326, 'issue_id': 2795709663, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194175.png)](https://mergebot.odoo.com/odoo/odoo/pull/194175)', 'created_at': datetime.datetime(2025, 1, 17, 15, 13, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598581346, 'issue_id': 2795709663, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 13, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:13:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194175.png)](https://mergebot.odoo.com/odoo/odoo/pull/194175)

fw-bot (Issue Creator) on (2025-01-17 15:13:17 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795701677,pull_request,closed,,[FW][FIX] website_hr_recruitment: fix plural,Forward-Port-Of: odoo/odoo#193276,fw-bot,2025-01-17 15:09:20+00:00,[],2025-02-07 09:44:19+00:00,2025-01-24 09:27:50+00:00,https://github.com/odoo/odoo/pull/194174,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598573361, 'issue_id': 2795701677, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194174.png)](https://mergebot.odoo.com/odoo/odoo/pull/194174)', 'created_at': datetime.datetime(2025, 1, 17, 15, 9, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598573389, 'issue_id': 2795701677, 'author': 'fw-bot', 'body': '@Bertrand2 cherrypicking of pull request odoo/odoo#193276 failed.\n\nstdout:\n```\nAuto-merging addons/website_hr_recruitment/i18n/website_hr_recruitment.pot\nAuto-merging addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml\nCONFLICT (content): Merge conflict in addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 9, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476240, 'issue_id': 2795701677, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119544, 'issue_id': 2795701677, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689415, 'issue_id': 2795701677, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385642, 'issue_id': 2795701677, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611919923, 'issue_id': 2795701677, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 8, 17, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:09:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194174.png)](https://mergebot.odoo.com/odoo/odoo/pull/194174)

fw-bot (Issue Creator) on (2025-01-17 15:09:24 UTC): @Bertrand2 cherrypicking of pull request odoo/odoo#193276 failed.

stdout:
```
Auto-merging addons/website_hr_recruitment/i18n/website_hr_recruitment.pot
Auto-merging addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml
CONFLICT (content): Merge conflict in addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-21 02:01:26 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:41 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:22 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:14 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

Bertrand2 on (2025-01-24 08:17:17 UTC): robodoo r+

"
2795701083,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194048
Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-17 15:09:02+00:00,[],2025-02-04 13:06:05+00:00,2025-01-21 12:55:46+00:00,https://github.com/odoo/odoo/pull/194173,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598572600, 'issue_id': 2795701083, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194173.png)](https://mergebot.odoo.com/odoo/odoo/pull/194173)', 'created_at': datetime.datetime(2025, 1, 17, 15, 9, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598572627, 'issue_id': 2795701083, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 9, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:09:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194173.png)](https://mergebot.odoo.com/odoo/odoo/pull/194173)

fw-bot (Issue Creator) on (2025-01-17 15:09:04 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795700442,pull_request,closed,,[FW][FIX] stock: allow lot to be used by branches,"Steps to reproduce the bug:
- Create a “Company A” and a “ branch 1” linked to this company
- Create a storable product “P1”:
    - limited to Company A

- Select only the branch 1 as current company
- Create a receipt for one unit of P1
- Mark it as to do.
- Try to create a lot or use lot created in Company A

Problem:
An acces error is raised:
`Incompatible companies on records:
- 'Product B' belongs to company 'Branch X' and 'Lot/Serial Number' (lot_id: 'sn_test') belongs to another company.`

opw-4415565

Forward-Port-Of: odoo/odoo#191529",fw-bot,2025-01-17 15:08:42+00:00,[],2025-01-27 18:37:16+00:00,2025-01-27 18:37:16+00:00,https://github.com/odoo/odoo/pull/194172,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598572310, 'issue_id': 2795700442, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194172.png)](https://mergebot.odoo.com/odoo/odoo/pull/194172)', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598572339, 'issue_id': 2795700442, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:08:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194172.png)](https://mergebot.odoo.com/odoo/odoo/pull/194172)

fw-bot (Issue Creator) on (2025-01-17 15:08:57 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795699833,pull_request,closed,,[FW][FIX] account_peppol: remove peppol registration migration button,"Peppol migration creates more issues than it solves. A lot of users issue migration requests to move to another SMP but later discover that the SMP they wanted to migrate to does not support migration keys. This creates a state that we need to handle manually. Most SMP do not support migrating away and force users to deregister and reregister again on another one.

This commit adds a fix in stable for that issue by removing the button from the res_config_settings_buttons and adding a deprecated warning when the user tries to call the `button_migrate_peppol_registration` method.

task-4394408

Forward-Port-Of: odoo/odoo#193955
Forward-Port-Of: odoo/odoo#193794",fw-bot,2025-01-17 15:08:23+00:00,[],2025-02-04 13:06:06+00:00,2025-01-21 12:55:51+00:00,https://github.com/odoo/odoo/pull/194171,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598571760, 'issue_id': 2795699833, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194171.png)](https://mergebot.odoo.com/odoo/odoo/pull/194171)', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598571782, 'issue_id': 2795699833, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.\n\nstdout:\n```\nAuto-merging addons/account_peppol/i18n/account_peppol.pot\nCONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot\nAuto-merging addons/account_peppol/models/res_config_settings.py\nCONFLICT (content): Merge conflict in addons/account_peppol/models/res_config_settings.py\nAuto-merging addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js\nAuto-merging addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml\nCONFLICT (content): Merge conflict in addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml\nAuto-merging addons/account_peppol/tests/test_peppol_participant.py\nCONFLICT (content): Merge conflict in addons/account_peppol/tests/test_peppol_participant.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172925, 'issue_id': 2795699833, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475818, 'issue_id': 2795699833, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604116460, 'issue_id': 2795699833, 'author': 'antonrom1', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 9, 14, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:08:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194171.png)](https://mergebot.odoo.com/odoo/odoo/pull/194171)

fw-bot (Issue Creator) on (2025-01-17 15:08:41 UTC): @antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.

stdout:
```
Auto-merging addons/account_peppol/i18n/account_peppol.pot
CONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot
Auto-merging addons/account_peppol/models/res_config_settings.py
CONFLICT (content): Merge conflict in addons/account_peppol/models/res_config_settings.py
Auto-merging addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js
Auto-merging addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml
CONFLICT (content): Merge conflict in addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml
Auto-merging addons/account_peppol/tests/test_peppol_participant.py
CONFLICT (content): Merge conflict in addons/account_peppol/tests/test_peppol_participant.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:17 UTC): @antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:04 UTC): @antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).

antonrom1 on (2025-01-21 09:14:11 UTC): @robodoo r+

"
2795699258,pull_request,closed,,[FW][FIX] web: graph: prevent rendering too many datasets,"Chart.js can be really slow when rendering a large number of datasets.
So this commit limits the amount of datasets displayed by default on the graph.
However a button is present to display all datasets even if it can take a moment to render them.

task-4351783

Forward-Port-Of: odoo/odoo#193954
Forward-Port-Of: odoo/odoo#192892",fw-bot,2025-01-17 15:08:06+00:00,[],2025-02-03 18:30:13+00:00,2025-01-20 18:13:03+00:00,https://github.com/odoo/odoo/pull/194170,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598571634, 'issue_id': 2795699258, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194170.png)](https://mergebot.odoo.com/odoo/odoo/pull/194170)', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598571655, 'issue_id': 2795699258, 'author': 'fw-bot', 'body': '@mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/tests/views/graph/graph_view.test.js\nCONFLICT (content): Merge conflict in addons/web/static/tests/views/graph/graph_view.test.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 15, 8, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600465609, 'issue_id': 2795699258, 'author': 'fw-bot', 'body': '@mcm-odoo @polymorphe57 this forward port of odoo/odoo#192892 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173796, 'issue_id': 2795699258, 'author': 'fw-bot', 'body': '@mcm-odoo @polymorphe57 this forward port of odoo/odoo#192892 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602327049, 'issue_id': 2795699258, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 12, 40, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 15:08:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194170.png)](https://mergebot.odoo.com/odoo/odoo/pull/194170)

fw-bot (Issue Creator) on (2025-01-17 15:08:38 UTC): @mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.

stdout:
```
Auto-merging addons/web/static/tests/views/graph/graph_view.test.js
CONFLICT (content): Merge conflict in addons/web/static/tests/views/graph/graph_view.test.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:57 UTC): @mcm-odoo @polymorphe57 this forward port of odoo/odoo#192892 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:59 UTC): @mcm-odoo @polymorphe57 this forward port of odoo/odoo#192892 is awaiting action (not merged or closed).

mcm-odoo on (2025-01-20 12:40:56 UTC): @robodoo r+

"
2795677110,pull_request,closed,,[FIX] stock: make the table take the whole width,"Commit 239e75b1385fa0 removes `colspan=""2""` to guess it from the `nolabel` attribute. This is not working because of the `string=` attribute in the `group` tag that makes the DOM having two elements instead of only one. The rule in

https://github.com/odoo/odoo/blob/0ba664bace1e6bbb256bd98570866df19d35f401/addons/web/static/src/views/form/form_controller.scss#L474

is not applied.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",Whenrow,2025-01-17 14:58:49+00:00,[],2025-01-20 11:18:06+00:00,2025-01-20 11:13:01+00:00,https://github.com/odoo/odoo/pull/194169,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598551483, 'issue_id': 2795677110, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194169.png)](https://mergebot.odoo.com/odoo/odoo/pull/194169)', 'created_at': datetime.datetime(2025, 1, 17, 14, 58, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:58:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194169.png)](https://mergebot.odoo.com/odoo/odoo/pull/194169)

"
2795676550,pull_request,closed,,[FW][CLA] Update Quartile CLA,"@qrtl

-------------------------------

I confirm I have signed the CLA and read the PR guidelines at [www.odoo.com/submit-pr](http://www.odoo.com/submit-pr)

Forward-Port-Of: odoo/odoo#194087",fw-bot,2025-01-17 14:58:35+00:00,[],2025-02-03 18:30:19+00:00,2025-01-20 18:13:16+00:00,https://github.com/odoo/odoo/pull/194168,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598550930, 'issue_id': 2795676550, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194168.png)](https://mergebot.odoo.com/odoo/odoo/pull/194168)', 'created_at': datetime.datetime(2025, 1, 17, 14, 58, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598550954, 'issue_id': 2795676550, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 58, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598627980, 'issue_id': 2795676550, 'author': 'fw-bot', 'body': '@kanda999 @mart-e ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 15, 36, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598781874, 'issue_id': 2795676550, 'author': 'mart-e', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 16, 53, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598781934, 'issue_id': 2795676550, 'author': 'robodoo', 'body': '@mart-e retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 17, 16, 53, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:58:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194168.png)](https://mergebot.odoo.com/odoo/odoo/pull/194168)

fw-bot (Issue Creator) on (2025-01-17 14:58:36 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 15:36:33 UTC): @kanda999 @mart-e ci/runbot failed on this forward-port PR

mart-e on (2025-01-17 16:53:37 UTC): robodoo retry

robodoo on (2025-01-17 16:53:39 UTC): @mart-e retry makes no sense when the PR is not in error.

"
2795660473,pull_request,closed,,[FW][FIX] account: edi format parent partner,"The invoice edi format should be take from the parent
of the partner instead of the partner himself.

Steps:

- Create an individual partner X and set an edi format
- Create a company partner Y and set a different edi format
- Make X child of Y
- Create an invoice for X, confirm and click on 'Send and print' button
-> The edi file is in the format set on X instead of the format set on Y

opw-4480527

Forward-Port-Of: odoo/odoo#193981",fw-bot,2025-01-17 14:51:40+00:00,[],2025-02-04 10:01:30+00:00,2025-01-21 10:00:00+00:00,https://github.com/odoo/odoo/pull/194167,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598537168, 'issue_id': 2795660473, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194167.png)](https://mergebot.odoo.com/odoo/odoo/pull/194167)', 'created_at': datetime.datetime(2025, 1, 17, 14, 51, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598537210, 'issue_id': 2795660473, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194134\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 51, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598542045, 'issue_id': 2795660473, 'author': 'guva-odoo', 'body': '@roboodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 54, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475600, 'issue_id': 2795660473, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo this forward port of odoo/odoo#193981 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603892564, 'issue_id': 2795660473, 'author': 'guva-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 7, 55, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:51:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194167.png)](https://mergebot.odoo.com/odoo/odoo/pull/194167)

fw-bot (Issue Creator) on (2025-01-17 14:51:43 UTC): @guva-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194134

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

guva-odoo on (2025-01-17 14:54:05 UTC): @roboodoo r+

fw-bot (Issue Creator) on (2025-01-21 02:00:52 UTC): @guva-odoo @jbw-odoo this forward port of odoo/odoo#193981 is awaiting action (not merged or closed).

guva-odoo on (2025-01-21 07:55:58 UTC): @robodoo r+

"
2795652379,pull_request,closed,,[FIX] bus: do not show connection alert everywhere,"This is distracting for end users, restrict it to the discuss app. Also reduce its style so this feels less aggressive.",tsm-odoo,2025-01-17 14:47:47+00:00,[],2025-01-18 22:45:21+00:00,2025-01-17 21:29:20+00:00,https://github.com/odoo/odoo/pull/194166,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598529444, 'issue_id': 2795652379, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194166.png)](https://mergebot.odoo.com/odoo/odoo/pull/194166)', 'created_at': datetime.datetime(2025, 1, 17, 14, 47, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:47:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194166.png)](https://mergebot.odoo.com/odoo/odoo/pull/194166)

"
2795651611,pull_request,closed,,[FIX] account: avoid searching on account.root,"account.root is a technical model only meant to be used in the side panel and therefore only has a limited ORM functionality. Trying to search on anything else than the ID is not allowed, and rather useless since a domain on `root_id` and be replaced with a domain on the account (or it's display_name) directly.
Instead of:
* `[('root_id', 'ilike', prefix)]`, use `[('display_name', 'ilike', prefix)]`
* `[('account_id.root_id', 'ilike', prefix)]`, use `[('account_id', 'ilike', prefix)]`

This commit simply redirects the user to the alternate field.
",william-andre,2025-01-17 14:47:26+00:00,[],2025-02-04 05:36:46+00:00,2025-01-21 04:54:15+00:00,https://github.com/odoo/odoo/pull/194165,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598528657, 'issue_id': 2795651611, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194165.png)](https://mergebot.odoo.com/odoo/odoo/pull/194165)', 'created_at': datetime.datetime(2025, 1, 17, 14, 47, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601807921, 'issue_id': 2795651611, 'author': 'antoine162', 'body': 'I think this is great, it might just need a rebase :+1:', 'created_at': datetime.datetime(2025, 1, 20, 9, 0, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603323831, 'issue_id': 2795651611, 'author': 'robodoo', 'body': '@antoine162 you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 20, 22, 46, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:47:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194165.png)](https://mergebot.odoo.com/odoo/odoo/pull/194165)

antoine162 on (2025-01-20 09:00:53 UTC): I think this is great, it might just need a rebase :+1:

robodoo on (2025-01-20 22:46:57 UTC): @antoine162 you may want to rebuild or fix this PR as it has failed CI.

"
2795648443,pull_request,closed,,[FW][IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193752",fw-bot,2025-01-17 14:45:52+00:00,[],2025-02-03 12:14:12+00:00,2025-01-20 12:05:58+00:00,https://github.com/odoo/odoo/pull/194164,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598525381, 'issue_id': 2795648443, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194164.png)](https://mergebot.odoo.com/odoo/odoo/pull/194164)', 'created_at': datetime.datetime(2025, 1, 17, 14, 45, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598525395, 'issue_id': 2795648443, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 45, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:45:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194164.png)](https://mergebot.odoo.com/odoo/odoo/pull/194164)

fw-bot (Issue Creator) on (2025-01-17 14:45:54 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795640021,pull_request,closed,,[FW][FIX] spreadsheet: disable public download button,"Steps to reproduce:

- install Documents
- create a new spreadsheet
- hit the Share button
- change the sharing settings to ""Anyone with the link: Viewer / Musty have the link to access""
- open the sharing link in an incognito window
- hit the download button

=> 404 not found

A public user cannot convert a spreadsheet to an excel file and downlaod it because a route needs to be called to create the excel file. This route is currently not allowed for public users.

For frozen spreadsheet, we generate the excel file before-hand (when the internal user shares the spreadsheet). For a regular ""live"" share though, we cannot pre-generate the excel file since the spreadsheet continues to live and evolve.

The `spreadsheet` module needs to be updated for this bug fix to take effect. (otherwise the download button won't do anything, which is not worse than facing a 404 response)

See also Enterprise PR.

Task: 4440241
opw: 4417519




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192349",fw-bot,2025-01-17 14:41:46+00:00,[],2025-02-03 20:56:05+00:00,2025-01-20 20:54:23+00:00,https://github.com/odoo/odoo/pull/194163,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598517131, 'issue_id': 2795640021, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194163.png)](https://mergebot.odoo.com/odoo/odoo/pull/194163)', 'created_at': datetime.datetime(2025, 1, 17, 14, 41, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598517173, 'issue_id': 2795640021, 'author': 'fw-bot', 'body': '@LucasLefevre @pro-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194137\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 41, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598521654, 'issue_id': 2795640021, 'author': 'LucasLefevre', 'body': 'robodoo r+\r\n\r\nOn Fri, Jan 17, 2025 at 3:42\u202fPM Otis - Odoo Forward-Port Steward [bot] <\r\n***@***.***> wrote:\r\n\r\n> @LucasLefevre <https://github.com/LucasLefevre> @pro-odoo\r\n> <https://github.com/pro-odoo> this PR targets master and is the last of\r\n> the forward-port chain containing:\r\n>\r\n>    - #194137 <https://github.com/odoo/odoo/pull/194137>\r\n>\r\n> To merge the full chain, use\r\n>\r\n> @robodoo <https://github.com/robodoo> r+\r\n>\r\n> More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/odoo/odoo/pull/194163#issuecomment-2598517173>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACTHFEKYEIH5USFGMHXWZKL2LEJELAVCNFSM6AAAAABVMCGTJKVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKOJYGUYTOMJXGM>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2025, 1, 17, 14, 44, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598590145, 'issue_id': 2795640021, 'author': 'robodoo', 'body': ""@LucasLefevre @pro-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 15, 17, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:41:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194163.png)](https://mergebot.odoo.com/odoo/odoo/pull/194163)

fw-bot (Issue Creator) on (2025-01-17 14:41:50 UTC): @LucasLefevre @pro-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194137

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LucasLefevre on (2025-01-17 14:44:04 UTC): robodoo r+

On Fri, Jan 17, 2025 at 3:42 PM Otis - Odoo Forward-Port Steward [bot] <
***@***.***> wrote:

robodoo on (2025-01-17 15:17:25 UTC): @LucasLefevre @pro-odoo 'ci/runbot' failed on this reviewed PR.

"
2795616669,pull_request,closed,,[FW][FIX] analytic: force analytic distribution title display nowrap,"**Steps to reproduce:**
- Configure `Analytic Accounting` via `Accounting` module's settings;
- Go to `Analytic Plans` through `Accounting / Configuration / Analytic Accounting`:
    - Select any record and change its name for a really long one;

![Capture d’écran 2025-01-02 à 15 21 40](https://github.com/user-attachments/assets/365a7089-9bb4-4215-8b7d-59ac85abc952)

- Go to `Expenses` app:
    - Select any expense in the list;
    - Open the `Analytic Distribution` widget.

___
**Issue:**
Long `Analytic Plans` names are wrapped and may lead to unreadable texts.

![Capture d’écran 2025-01-02 à 15 22 28](https://github.com/user-attachments/assets/b5ddbd88-1209-4640-a0ce-bf9396871038)

*(from the ticket - Odoo 17)*

![imagem](https://github.com/user-attachments/assets/2f3f0543-b08b-4f16-a4a0-4547369eb478)

___
**Expected:**
A smooth UI should display `Analytic Plans` as when accessed through an invoice line from `Accounting` app.

![Capture d’écran 2025-01-02 à 15 23 16](https://github.com/user-attachments/assets/ef0aa2fd-e8c5-47ba-8c39-ce4538b85380)

___
**Cause:**
The `Analytic Distribution` widget style of the invoice view inherits from the list renderer, forcing a `nowrap` style while the expense view of the same widget does not.

___
**Fix:**
Force a `nowrap` style for that specific widget.

![Capture d’écran 2025-01-02 à 15 22 55](https://github.com/user-attachments/assets/2af26b22-63e2-43fc-b636-f739a0aa094d)

___
opw-4357324

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192203",fw-bot,2025-01-17 14:30:39+00:00,[],2025-01-31 18:52:56+00:00,2025-01-17 18:47:34+00:00,https://github.com/odoo/odoo/pull/194162,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598494545, 'issue_id': 2795616669, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194162.png)](https://mergebot.odoo.com/odoo/odoo/pull/194162)', 'created_at': datetime.datetime(2025, 1, 17, 14, 30, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598494614, 'issue_id': 2795616669, 'author': 'fw-bot', 'body': '@barracudapps @jbw-odoo cherrypicking of pull request odoo/odoo#192203 failed.\n\nstdout:\n```\nAuto-merging addons/analytic/static/src/components/analytic_distribution/analytic_distribution.scss\nCONFLICT (content): Merge conflict in addons/analytic/static/src/components/analytic_distribution/analytic_distribution.scss\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 30, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598684812, 'issue_id': 2795616669, 'author': 'barracudapps', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 16, 5, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598684901, 'issue_id': 2795616669, 'author': 'robodoo', 'body': '@barracudapps retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 17, 16, 5, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598686490, 'issue_id': 2795616669, 'author': 'barracudapps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 5, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:30:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194162.png)](https://mergebot.odoo.com/odoo/odoo/pull/194162)

fw-bot (Issue Creator) on (2025-01-17 14:30:43 UTC): @barracudapps @jbw-odoo cherrypicking of pull request odoo/odoo#192203 failed.

stdout:
```
Auto-merging addons/analytic/static/src/components/analytic_distribution/analytic_distribution.scss
CONFLICT (content): Merge conflict in addons/analytic/static/src/components/analytic_distribution/analytic_distribution.scss

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

barracudapps on (2025-01-17 16:05:11 UTC): robodoo retry

robodoo on (2025-01-17 16:05:13 UTC): @barracudapps retry makes no sense when the PR is not in error.

barracudapps on (2025-01-17 16:05:53 UTC): @robodoo r+

"
2795594554,pull_request,closed,,[FW][FIX] core: JS tests / tours needing focus,"Apparently in normal mode (and thus the new headless mode) Chrome does not focus the document. The `activeElement` is correctly set, but `document.hasFocus()` always returns `false` and per-element focus events are suppressed.

That makes tests testing or needing focus fail in the new headless mode as well as well as impossible (or at least frustrating) to `debug`.

Enabling ""focus emulation"", which corresponds to the ""Emulate a focused page"" UI option, seems to resolve the issue.

Fixes reliably failing tests

- `/im_livechat:ExternalTestSuite.test_external_livechat`
- `/account:TestUI.test_01_account_tax_groups_tour`
- `/account_accountant:TestBankRecWidget.test_tour_bank_rec_widget`
- `/web_editor:TestOdooEditor.test_odoo_editor_suite`

Backport of: odoo/odoo@0aaf98b77feaa15f5eb30e1c251f5765e8afbfa5

Forward-Port-Of: odoo/odoo#193993",fw-bot,2025-01-17 14:20:13+00:00,[],2025-01-31 20:32:10+00:00,2025-01-17 20:12:30+00:00,https://github.com/odoo/odoo/pull/194161,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598472683, 'issue_id': 2795594554, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194161.png)](https://mergebot.odoo.com/odoo/odoo/pull/194161)', 'created_at': datetime.datetime(2025, 1, 17, 14, 20, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598472703, 'issue_id': 2795594554, 'author': 'fw-bot', 'body': '@pparidans @adr-odoo this PR targets 18.0 and is the last of the forward-port chain containing:\n* odoo/odoo#194132\n* odoo/odoo#194117\n* odoo/odoo#194098\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 20, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598546485, 'issue_id': 2795594554, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 56, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:20:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194161.png)](https://mergebot.odoo.com/odoo/odoo/pull/194161)

fw-bot (Issue Creator) on (2025-01-17 14:20:15 UTC): @pparidans @adr-odoo this PR targets 18.0 and is the last of the forward-port chain containing:
* odoo/odoo#194132
* odoo/odoo#194117
* odoo/odoo#194098

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-17 14:56:20 UTC): @robodoo r+

"
2795591110,pull_request,open,,[FIX] bus: samesite and proxy_mode,"When Odoo is behind and inverse proxy an the web client sends a wss request it could be forwarded as https, resulting in the missbehavior of the apps when the bus_service is used: https://github.com/odoo/odoo/blob/16.0/addons/bus/static/src/services/bus_service.js#L95

cc @Tecnativa TT52638 TT54556

fyi @josep-tecnativa @yajo @pedrobaeza 

Description of the issue/feature this PR addresses:

The presence service for the messaging client stops working correctly

Current behavior before PR:

There's no guest/user presence refreshing as those connections get downgraded

Desired behavior after PR is merged:

Everything works again :)

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",chienandalu,2025-01-17 14:18:34+00:00,[],2025-01-21 06:57:12+00:00,,https://github.com/odoo/odoo/pull/194160,[],"[{'comment_id': 2598469543, 'issue_id': 2795591110, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194160.png)](https://mergebot.odoo.com/odoo/odoo/pull/194160)', 'created_at': datetime.datetime(2025, 1, 17, 14, 18, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598476507, 'issue_id': 2795591110, 'author': 'pedrobaeza', 'body': 'Related comment: https://github.com/Tecnativa/doodba-copier-template/pull/513#issuecomment-2589324023', 'created_at': datetime.datetime(2025, 1, 17, 14, 21, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601882027, 'issue_id': 2795591110, 'author': 'chienandalu', 'body': ""> I don't understand very well how to reproduce the problem. Does it happen when running without workers?\r\n\r\nNope, we're runnning Odoo with workers set. We can't still tell who's the main offender. Some candidates:\r\n\r\n- Something about our inverse proxy settings\r\n- Something about the [legacy session service used in the bus web client](https://github.com/odoo/odoo/blob/16.0/addons/bus/static/src/services/bus_service.js#L95) that maybe isn't problematic in greater versions.\r\n\r\nThe thing is that (at least) the conversations users status stops update working and its due to that client requests that get downgraded when the new environment var is set due to the scheme change thing"", 'created_at': datetime.datetime(2025, 1, 20, 9, 32, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601916527, 'issue_id': 2795591110, 'author': 'tsm-odoo', 'body': '> > I don\'t understand very well how to reproduce the problem. Does it happen when running without workers?\r\n> \r\n> Nope, we\'re runnning Odoo with workers set. We can\'t still tell who\'s the main offender. Some candidates:\r\n> \r\n> * Something about our inverse proxy settings\r\n> * Something about the [legacy session service used in the bus web client](https://github.com/odoo/odoo/blob/16.0/addons/bus/static/src/services/bus_service.js#L95) that maybe isn\'t problematic in greater versions.\r\n> \r\n> The thing is that (at least) the conversations users status stops update working and its due to that client requests that get downgraded when the new environment var is set due to the scheme change thing\r\n\r\nHello, if this diff resolves your issue, you can remove the legacy session service from the list of culprits. It seems like there might be an issue with the forwarded headers—missing or incorrect.\r\n\r\n> Not working, as the one that comes as `https` is `origin_url.scheme`, the others (`request.httprequest.environ[""wsgi.url_scheme""]`, `headers[""X-Forwarded-Proto""]` and `request.httprequest.scheme` come as `wss`\r\n\r\nI\'ve seen several configurations working fine with the `ProxyFix` middleware. WebSocket initial requests start as plain HTTP requests and are upgraded afterward. This means the scheme should be `https://`. Otherwise, the session would be downgraded, even in simple scenarios.', 'created_at': datetime.datetime(2025, 1, 20, 9, 47, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:18:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194160.png)](https://mergebot.odoo.com/odoo/odoo/pull/194160)

pedrobaeza on (2025-01-17 14:21:57 UTC): Related comment: https://github.com/Tecnativa/doodba-copier-template/pull/513#issuecomment-2589324023

chienandalu (Issue Creator) on (2025-01-20 09:32:57 UTC): Nope, we're runnning Odoo with workers set. We can't still tell who's the main offender. Some candidates:

- Something about our inverse proxy settings
- Something about the [legacy session service used in the bus web client](https://github.com/odoo/odoo/blob/16.0/addons/bus/static/src/services/bus_service.js#L95) that maybe isn't problematic in greater versions.

The thing is that (at least) the conversations users status stops update working and its due to that client requests that get downgraded when the new environment var is set due to the scheme change thing

tsm-odoo on (2025-01-20 09:47:15 UTC): Hello, if this diff resolves your issue, you can remove the legacy session service from the list of culprits. It seems like there might be an issue with the forwarded headers—missing or incorrect.


I've seen several configurations working fine with the `ProxyFix` middleware. WebSocket initial requests start as plain HTTP requests and are upgraded afterward. This means the scheme should be `https://`. Otherwise, the session would be downgraded, even in simple scenarios.

"
2795587805,pull_request,open,,[IMP] web: pass the action context,"When the Kanban view is opened from the Gantt popover, the context is not being passed in the record.If the visibility of the field is based on the context, it will not work, as shown in the example below.

For example:
   When a task is opened from a specific project, the project name should not be displayed.
XML:
  `<field invisible=""context.get('default_project_id', False)"" name=""project_id"" options=""{'no_open': True}""/>`

task-4444660",ppr-odoo,2025-01-17 14:16:55+00:00,[],2025-01-20 06:50:34+00:00,,https://github.com/odoo/odoo/pull/194159,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598466205, 'issue_id': 2795587805, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194159.png)](https://mergebot.odoo.com/odoo/odoo/pull/194159)', 'created_at': datetime.datetime(2025, 1, 17, 14, 16, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:16:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194159.png)](https://mergebot.odoo.com/odoo/odoo/pull/194159)

"
2795577727,pull_request,closed,,[FIX] base_automation: hide domain for on_change's,"Before this commit, the base.automation form view displays the filter_domain field when on_change trigger type is selected but the code does not take into account the filter_domain value for this type of trigger.

After this commit, this field is simply hidden in that case.

Task: opw-4492554",brboi,2025-01-17 14:12:03+00:00,[],2025-02-03 08:09:28+00:00,2025-01-20 08:07:51+00:00,https://github.com/odoo/odoo/pull/194158,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598456186, 'issue_id': 2795577727, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194158.png)](https://mergebot.odoo.com/odoo/odoo/pull/194158)', 'created_at': datetime.datetime(2025, 1, 17, 14, 12, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:12:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194158.png)](https://mergebot.odoo.com/odoo/odoo/pull/194158)

"
2795574860,pull_request,closed,,[FW][FIX] account: change shortcut for Upload Button to Alt+Shift+I to avoid conflict,"Before this PR:
- The Upload Button was assigned the shortcut Alt+B.
- This caused a conflict with Odoo's default shortcut for navigating backward.

After this PR:
- The shortcut for the Upload Button is now updated to Alt+Shift+I.
- This resolves the conflict and ensures smooth navigation and functionality.

Task ID:-4417310

Forward-Port-Of: odoo/odoo#191003",fw-bot,2025-01-17 14:10:39+00:00,[],2025-02-01 08:58:09+00:00,2025-01-18 08:27:52+00:00,https://github.com/odoo/odoo/pull/194157,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598453482, 'issue_id': 2795574860, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194157.png)](https://mergebot.odoo.com/odoo/odoo/pull/194157)', 'created_at': datetime.datetime(2025, 1, 17, 14, 10, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598453495, 'issue_id': 2795574860, 'author': 'fw-bot', 'body': '@zepa-odoo @rugo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194136\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 10, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598486598, 'issue_id': 2795574860, 'author': 'rugo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 26, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 14:10:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194157.png)](https://mergebot.odoo.com/odoo/odoo/pull/194157)

fw-bot (Issue Creator) on (2025-01-17 14:10:41 UTC): @zepa-odoo @rugo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194136

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

rugo-odoo on (2025-01-17 14:26:45 UTC): @robodoo r+

"
2795532338,pull_request,closed,,[FW][FIX] stock_landed_costs: round down in cost split,"**Current behavior:**
The rounding applied during the cost split of a landed cost's
cost computation can yield undesirable/unexpected results.

**Expected behavior:**
Sensible rounding.

**Steps to reproduce:**
1. Create some product with arbitrary cost, with avg and
real_time costing and valuation, respectively

2. Create a purchase order with 6 lines, all for that product

3. Confirm order & receive products, create bill and add a
landed cost line with cost=6.85

4. Post bill and create the landed cost:
* link to the receipt
* set split method to `equal`

5. Validate the LC, see that the val adjustment lines are
rounded unexpectedly- *specifically all the lines are rounded up
(beyond the per-adjustment-line value) which means the final
adjustment line cost-split share will reflect the cumulative
rounding loss of every adjustment line rounded prior*
E.g.,
<pre>
[ 1.15, 1.15, 1.15, 1.15, 1.15, 1.11 ]
                                  ^
</pre>

**Cause of the issue:**
We currently use `rounding_method='UP'`.

**Fix:**
Round HALF-UP. This will minimize the difference between the
true, unrounded split-value and the post-rounding value.

Semi-related fix: try to use consistent `ResCurrency.round()`
methods between `compute_landed_cost()` and `_check_sum()`.

opw-4200916

Forward-Port-Of: odoo/odoo#193861
Forward-Port-Of: odoo/odoo#190449",fw-bot,2025-01-17 13:51:45+00:00,[],2025-01-31 21:53:18+00:00,2025-01-17 21:29:20+00:00,https://github.com/odoo/odoo/pull/194156,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598413270, 'issue_id': 2795532338, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194156.png)](https://mergebot.odoo.com/odoo/odoo/pull/194156)', 'created_at': datetime.datetime(2025, 1, 17, 13, 51, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598413294, 'issue_id': 2795532338, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 51, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598523133, 'issue_id': 2795532338, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 14, 44, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:51:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194156.png)](https://mergebot.odoo.com/odoo/odoo/pull/194156)

fw-bot (Issue Creator) on (2025-01-17 13:51:46 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:44:47 UTC): @ethanrobv @clesgow ci/runbot failed on this forward-port PR

"
2795528165,pull_request,open,,"[IMP] project: Change domains for using in, not '!='","Description of the issue/feature this PR addresses: we cannot extend privacy_visibility to use other configurations, like checking by group, department or something different.

Current behavior before PR: if we add a new project_visibility option, it works as employees

Desired behavior after PR is merged: We are allowed to add extra visibilities




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",etobella,2025-01-17 13:49:38+00:00,[],2025-01-17 14:05:37+00:00,,https://github.com/odoo/odoo/pull/194155,[],"[{'comment_id': 2598409341, 'issue_id': 2795528165, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194155.png)](https://mergebot.odoo.com/odoo/odoo/pull/194155)', 'created_at': datetime.datetime(2025, 1, 17, 13, 49, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:49:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194155.png)](https://mergebot.odoo.com/odoo/odoo/pull/194155)

"
2795514263,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193519
Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-17 13:42:47+00:00,[],2025-02-03 11:38:35+00:00,2025-01-20 11:13:02+00:00,https://github.com/odoo/odoo/pull/194154,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598396233, 'issue_id': 2795514263, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194154.png)](https://mergebot.odoo.com/odoo/odoo/pull/194154)', 'created_at': datetime.datetime(2025, 1, 17, 13, 42, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598396246, 'issue_id': 2795514263, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 42, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598499881, 'issue_id': 2795514263, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 14, 33, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:42:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194154.png)](https://mergebot.odoo.com/odoo/odoo/pull/194154)

fw-bot (Issue Creator) on (2025-01-17 13:42:49 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:33:20 UTC): @walidsahli @Whenrow ci/runbot failed on this forward-port PR

"
2795508408,pull_request,closed,,[FW][FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.

Forward-Port-Of: odoo/odoo#193990",fw-bot,2025-01-17 13:39:53+00:00,[],2025-02-01 08:58:09+00:00,2025-01-18 08:27:57+00:00,https://github.com/odoo/odoo/pull/194153,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598390932, 'issue_id': 2795508408, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194153.png)](https://mergebot.odoo.com/odoo/odoo/pull/194153)', 'created_at': datetime.datetime(2025, 1, 17, 13, 39, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598390944, 'issue_id': 2795508408, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194125\n* odoo/odoo#194111\n* odoo/odoo#194086\n* odoo/odoo#194027\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 39, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598500906, 'issue_id': 2795508408, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 33, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598542897, 'issue_id': 2795508408, 'author': 'robodoo', 'body': ""@loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 14, 54, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:39:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194153.png)](https://mergebot.odoo.com/odoo/odoo/pull/194153)

fw-bot (Issue Creator) on (2025-01-17 13:39:55 UTC): @loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194125
* odoo/odoo#194111
* odoo/odoo#194086
* odoo/odoo#194027

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-17 14:33:49 UTC): @robodoo r+

robodoo on (2025-01-17 14:54:33 UTC): @loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR.

"
2795507866,pull_request,closed,,[FW][FIX] delivery: fix loc. selector maker position,"Before this commit, markers on the location selector map were misaligned. The misalignment was proportional to the zoom level, as the marker incorrectly used the top-left corner of the anchor as its reference.

This commit resolves the issue by defining the correct icon anchor position for markers.

Forward-Port-Of: odoo/odoo#193982",fw-bot,2025-01-17 13:39:36+00:00,[],2025-02-03 15:14:56+00:00,2025-01-20 15:07:52+00:00,https://github.com/odoo/odoo/pull/194152,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598390409, 'issue_id': 2795507866, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194152.png)](https://mergebot.odoo.com/odoo/odoo/pull/194152)', 'created_at': datetime.datetime(2025, 1, 17, 13, 39, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598390427, 'issue_id': 2795507866, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 39, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599673403, 'issue_id': 2795507866, 'author': 'robodoo', 'body': '@chevalierv staging failed: ci/runbot on 756d9e4997958e5313fc0e71a1d5cc83f4e28649 (view more at https://runbot.odoo.com/runbot/build/73568286)', 'created_at': datetime.datetime(2025, 1, 18, 11, 6, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600786654, 'issue_id': 2795507866, 'author': 'chevalierv', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 19, 9, 53, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600802616, 'issue_id': 2795507866, 'author': 'robodoo', 'body': '@chevalierv staging failed: ci/runbot on e083ade52f42c4537ae776350cac15fdc8f4eac4 (view more at https://runbot.odoo.com/runbot/build/73598093)', 'created_at': datetime.datetime(2025, 1, 19, 10, 36, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602027673, 'issue_id': 2795507866, 'author': 'chevalierv', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 20, 10, 29, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:39:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194152.png)](https://mergebot.odoo.com/odoo/odoo/pull/194152)

fw-bot (Issue Creator) on (2025-01-17 13:39:38 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-18 11:06:59 UTC): @chevalierv staging failed: ci/runbot on 756d9e4997958e5313fc0e71a1d5cc83f4e28649 (view more at https://runbot.odoo.com/runbot/build/73568286)

chevalierv on (2025-01-19 09:53:39 UTC): robodoo retry

robodoo on (2025-01-19 10:36:47 UTC): @chevalierv staging failed: ci/runbot on e083ade52f42c4537ae776350cac15fdc8f4eac4 (view more at https://runbot.odoo.com/runbot/build/73598093)

chevalierv on (2025-01-20 10:29:31 UTC): robodoo retry

"
2795503833,pull_request,closed,,[FW][IMP] mail: better call context menu,"This commit fixes various issues with the context menu on the call participant:

- Before this commit it wasn't possible to set the volume of a user to 0 due to the use of the `||` operator in the getVolume function. This commit fixes the issue by using the correct `??` operator.
- Before this commit the volume slider in dark mode had the same background as the popover menu, making it difficult to see. This commit fixes the issue by making the slider darker than the background.
- A volume icon was added to better indicate the slider purpose.
- A volume percentage tooltip was added for more accurate use.
- A chevron button was added to the participant card for  better discoverability of the context menu.

Forward-Port-Of: odoo/odoo#193577",fw-bot,2025-01-17 13:37:33+00:00,[],2025-01-18 22:46:09+00:00,2025-01-18 07:21:46+00:00,https://github.com/odoo/odoo/pull/194151,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598386707, 'issue_id': 2795503833, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194151.png)](https://mergebot.odoo.com/odoo/odoo/pull/194151)', 'created_at': datetime.datetime(2025, 1, 17, 13, 37, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598386742, 'issue_id': 2795503833, 'author': 'fw-bot', 'body': '@Atovange @alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 37, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598459106, 'issue_id': 2795503833, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 13, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:37:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194151.png)](https://mergebot.odoo.com/odoo/odoo/pull/194151)

fw-bot (Issue Creator) on (2025-01-17 13:37:37 UTC): @Atovange @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-17 14:13:29 UTC): @robodoo r+

"
2795499376,pull_request,closed,,[FW][FIX] hr_recruitment: fix candidate/application link and constraint,"Before this commit, the creation of an applicant though `message_new`, It would check for existing candidates but not for the company; however, if the company is different, an error would be raised upon applicant creation and prevent it.

This commit adds the company to the candidate check to avoid raising the constraint, and adjusts the said constraint so that it allows linking to candidates with no company set.

Forward-Port-Of: odoo/odoo#193769",fw-bot,2025-01-17 13:35:14+00:00,[],2025-02-03 19:00:26+00:00,2025-01-20 18:50:11+00:00,https://github.com/odoo/odoo/pull/194150,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598382503, 'issue_id': 2795499376, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194150.png)](https://mergebot.odoo.com/odoo/odoo/pull/194150)', 'created_at': datetime.datetime(2025, 1, 17, 13, 35, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598382523, 'issue_id': 2795499376, 'author': 'fw-bot', 'body': '@Bertrand2 @tivisse this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193960\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 35, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173013, 'issue_id': 2795499376, 'author': 'fw-bot', 'body': '@Bertrand2 @tivisse this forward port of odoo/odoo#193769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602056192, 'issue_id': 2795499376, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 10, 39, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:35:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194150.png)](https://mergebot.odoo.com/odoo/odoo/pull/194150)

fw-bot (Issue Creator) on (2025-01-17 13:35:16 UTC): @Bertrand2 @tivisse this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193960

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:22 UTC): @Bertrand2 @tivisse this forward port of odoo/odoo#193769 is awaiting action (not merged or closed).

Bertrand2 on (2025-01-20 10:39:36 UTC): robodoo r+

"
2795496241,pull_request,closed,,[FIX] web: fix duplicate key error in user switch template,"**Description of the issue/feature this PR addresses:**
The user switch component fails in debug mode with the following error in the console log

> Error message:
> OwlError: Got duplicate key in t-foreach: [object Object]
>     at UserSwitch.template

This error happens because we are using the user object as a key ([object Object]), instead we should use the user_index 

**Current behavior before PR:**
1. Open a runbot
2. Log in and log out with admin account
3. Log in and log out with demo account
4. The user switch component appears on the login page
5. Adding ?debug=1 to the URL causes:
   - User switch component disappears
   - Console shows duplicate key error

**Desired behavior after PR is merged:**
- Having possibility to use switch user component in debug mode

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",cro-odoo,2025-01-17 13:33:41+00:00,[],2025-01-29 15:25:41+00:00,2025-01-29 15:25:41+00:00,https://github.com/odoo/odoo/pull/194149,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598379746, 'issue_id': 2795496241, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194149.png)](https://mergebot.odoo.com/odoo/odoo/pull/194149)', 'created_at': datetime.datetime(2025, 1, 17, 13, 33, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621413148, 'issue_id': 2795496241, 'author': 'BastienFafchamps', 'body': 'This looks good to me, thanks for the fix!\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 11, 42, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:33:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194149.png)](https://mergebot.odoo.com/odoo/odoo/pull/194149)

BastienFafchamps on (2025-01-29 11:42:21 UTC): This looks good to me, thanks for the fix!
@robodoo r+

"
2795466521,pull_request,closed,,[FW][CLA] Update Quartile CLA,"@qrtl

-------------------------------

I confirm I have signed the CLA and read the PR guidelines at [www.odoo.com/submit-pr](http://www.odoo.com/submit-pr)

Forward-Port-Of: odoo/odoo#194087",fw-bot,2025-01-17 13:18:49+00:00,[],2025-02-03 19:00:28+00:00,2025-01-20 18:53:07+00:00,https://github.com/odoo/odoo/pull/194148,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598353019, 'issue_id': 2795466521, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194148.png)](https://mergebot.odoo.com/odoo/odoo/pull/194148)', 'created_at': datetime.datetime(2025, 1, 17, 13, 18, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598353043, 'issue_id': 2795466521, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 18, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:18:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194148.png)](https://mergebot.odoo.com/odoo/odoo/pull/194148)

fw-bot (Issue Creator) on (2025-01-17 13:18:51 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795457154,pull_request,closed,,[FW][FIX] analytic: force analytic distribution title display nowrap,"**Steps to reproduce:**
- Configure `Analytic Accounting` via `Accounting` module's settings;
- Go to `Analytic Plans` through `Accounting / Configuration / Analytic Accounting`:
    - Select any record and change its name for a really long one;

![Capture d’écran 2025-01-02 à 15 21 40](https://github.com/user-attachments/assets/365a7089-9bb4-4215-8b7d-59ac85abc952)

- Go to `Expenses` app:
    - Select any expense in the list;
    - Open the `Analytic Distribution` widget.

___
**Issue:**
Long `Analytic Plans` names are wrapped and may lead to unreadable texts.

![Capture d’écran 2025-01-02 à 15 22 28](https://github.com/user-attachments/assets/b5ddbd88-1209-4640-a0ce-bf9396871038)

*(from the ticket - Odoo 17)*

![imagem](https://github.com/user-attachments/assets/2f3f0543-b08b-4f16-a4a0-4547369eb478)

___
**Expected:**
A smooth UI should display `Analytic Plans` as when accessed through an invoice line from `Accounting` app.

![Capture d’écran 2025-01-02 à 15 23 16](https://github.com/user-attachments/assets/ef0aa2fd-e8c5-47ba-8c39-ce4538b85380)

___
**Cause:**
The `Analytic Distribution` widget style of the invoice view inherits from the list renderer, forcing a `nowrap` style while the expense view of the same widget does not.

___
**Fix:**
Force a `nowrap` style for that specific widget.

![Capture d’écran 2025-01-02 à 15 22 55](https://github.com/user-attachments/assets/2af26b22-63e2-43fc-b636-f739a0aa094d)

___
opw-4357324

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192203",fw-bot,2025-01-17 13:14:46+00:00,[],2025-02-03 10:00:25+00:00,2025-01-20 09:56:38+00:00,https://github.com/odoo/odoo/pull/194147,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598344912, 'issue_id': 2795457154, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194147.png)](https://mergebot.odoo.com/odoo/odoo/pull/194147)', 'created_at': datetime.datetime(2025, 1, 17, 13, 14, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598344927, 'issue_id': 2795457154, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 14, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598494566, 'issue_id': 2795457154, 'author': 'fw-bot', 'body': '@barracudapps @jbw-odoo the next pull request (odoo/odoo#194162) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 14, 30, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601605034, 'issue_id': 2795457154, 'author': 'barracudapps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 7, 20, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:14:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194147.png)](https://mergebot.odoo.com/odoo/odoo/pull/194147)

fw-bot (Issue Creator) on (2025-01-17 13:14:48 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:30:41 UTC): @barracudapps @jbw-odoo the next pull request (odoo/odoo#194162) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

barracudapps on (2025-01-20 07:20:55 UTC): @robodoo r+

"
2795455727,pull_request,closed,,[FIX] html_editor: preserve p tag inside li when changing tag,"Description of the issue this PR addresses:

Current behavior before PR:

When converting paragraph related elements (other than the `<p>` tag itself) to a `<p>` tag, the tag would be unwrapped.

Desired behavior after PR is merged:

The tag is now converted directly to a `<p>` tag without unwrapping it.

task-4488784

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",deso-odoo,2025-01-17 13:14:09+00:00,[],2025-02-03 16:10:31+00:00,2025-02-03 16:10:31+00:00,https://github.com/odoo/odoo/pull/194146,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598343833, 'issue_id': 2795455727, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194146.png)](https://mergebot.odoo.com/odoo/odoo/pull/194146)', 'created_at': datetime.datetime(2025, 1, 17, 13, 14, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631025683, 'issue_id': 2795455727, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 13, 35, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:14:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194146.png)](https://mergebot.odoo.com/odoo/odoo/pull/194146)

dmo-odoo on (2025-02-03 13:35:29 UTC): @robodoo r+

"
2795455028,pull_request,closed,,[FIX] hw_posbox_homepage: allow windows access to update dialog,"Since odoo/odoo#191886, ""download handlers"" is available through ""Update"" page. As Windows IoT Boxes have no access to this page, the feature was unreachable. This commit fixes this behaviour by allowing access to Update page and disabling Linux specific tools on it.
",loouis-t,2025-01-17 13:13:46+00:00,[],2025-02-01 08:58:00+00:00,2025-01-18 05:47:28+00:00,https://github.com/odoo/odoo/pull/194145,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598343185, 'issue_id': 2795455028, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194145.png)](https://mergebot.odoo.com/odoo/odoo/pull/194145)', 'created_at': datetime.datetime(2025, 1, 17, 13, 13, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598398060, 'issue_id': 2795455028, 'author': 'robodoo', 'body': ""@loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 13, 43, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:13:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194145.png)](https://mergebot.odoo.com/odoo/odoo/pull/194145)

robodoo on (2025-01-17 13:43:49 UTC): @loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR.

"
2795446410,pull_request,closed,,[FW][FIX] web: typo in mobile form view test,"This commit fixes a typo in two mobile form view's tests where ""screenLeft"" was used instead of ""scrollX"".

Note: this was detected while testing for the new Chrome's headless mode set by default on Chrome 128+.

Forward-Port-Of: odoo/odoo#194105",fw-bot,2025-01-17 13:09:27+00:00,[],2025-02-01 11:06:38+00:00,2025-01-18 10:50:32+00:00,https://github.com/odoo/odoo/pull/194144,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598335457, 'issue_id': 2795446410, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194144.png)](https://mergebot.odoo.com/odoo/odoo/pull/194144)', 'created_at': datetime.datetime(2025, 1, 17, 13, 9, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598335476, 'issue_id': 2795446410, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 9, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598474139, 'issue_id': 2795446410, 'author': 'fw-bot', 'body': '@pparidans @rfr-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 14, 20, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:09:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194144.png)](https://mergebot.odoo.com/odoo/odoo/pull/194144)

fw-bot (Issue Creator) on (2025-01-17 13:09:29 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:20:56 UTC): @pparidans @rfr-odoo ci/runbot failed on this forward-port PR

"
2795445629,pull_request,closed,,[FW][16.0][IMP] iap: add outlook.jp to _MAIL_PROVIDERS,"@qrtl QT5121

Forward-Port-Of: odoo/odoo#193910",fw-bot,2025-01-17 13:09:06+00:00,[],2025-02-06 13:30:51+00:00,2025-02-06 13:30:51+00:00,https://github.com/odoo/odoo/pull/194143,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598334739, 'issue_id': 2795445629, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194143.png)](https://mergebot.odoo.com/odoo/odoo/pull/194143)', 'created_at': datetime.datetime(2025, 1, 17, 13, 9, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598334767, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 9, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598487085, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': '@AungKoKoLin1997 @tde-banana-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 14, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475756, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': '@AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119018, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': '@AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608688947, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': '@AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385237, 'issue_id': 2795445629, 'author': 'fw-bot', 'body': '@AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 0, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:09:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194143.png)](https://mergebot.odoo.com/odoo/odoo/pull/194143)

fw-bot (Issue Creator) on (2025-01-17 13:09:08 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:27:00 UTC): @AungKoKoLin1997 @tde-banana-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-21 02:01:01 UTC): @AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:21 UTC): @AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:02 UTC): @AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:00:57 UTC): @AungKoKoLin1997 @tde-banana-odoo this forward port of odoo/odoo#193910 is awaiting action (not merged or closed).

"
2795445095,pull_request,closed,,[FW][IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193752",fw-bot,2025-01-17 13:08:49+00:00,[],2025-02-03 10:18:09+00:00,2025-01-20 10:13:20+00:00,https://github.com/odoo/odoo/pull/194142,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598334216, 'issue_id': 2795445095, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194142.png)](https://mergebot.odoo.com/odoo/odoo/pull/194142)', 'created_at': datetime.datetime(2025, 1, 17, 13, 8, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598334239, 'issue_id': 2795445095, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 13, 8, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:08:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194142.png)](https://mergebot.odoo.com/odoo/odoo/pull/194142)

fw-bot (Issue Creator) on (2025-01-17 13:08:51 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795430580,pull_request,closed,,[IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html",Williambraecky,2025-01-17 13:01:29+00:00,[],2025-02-05 13:23:19+00:00,2025-01-22 13:23:15+00:00,https://github.com/odoo/odoo/pull/194141,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598319214, 'issue_id': 2795430580, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194141.png)](https://mergebot.odoo.com/odoo/odoo/pull/194141)', 'created_at': datetime.datetime(2025, 1, 17, 13, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601700556, 'issue_id': 2795430580, 'author': 'Williambraecky', 'body': 'Hi @Julien00859 \r\n\r\nCould I ask a pre-review from you before opening the PR?\r\nThanks\r\n\r\nDocumentation PR: https://github.com/odoo/documentation/pull/11779', 'created_at': datetime.datetime(2025, 1, 20, 8, 11, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603930759, 'issue_id': 2795430580, 'author': 'Williambraecky', 'body': ""> Thank you for the extensive documentation in the commit message!\r\n> \r\n> I'm fine adding new options but it seems this one is going to be rather hard for system administrators to configure. Would it be possible to detect when the connection is about to outlive a wraparound? Or to instead catch the specific exception? So we can open a new transaction automatically and the sysadmin don't have anything to do.\r\n\r\nI don't think it's possible, and even if we could, from what I understand you might need multiple connections/notifies before cleanup actually happens.\r\nThis problem is strictly related to long running connections using LISTEN.\r\nWe might be able to use `UNLISTEN` and re-`LISTEN` periodically, but I preferred staying consistent with they way we currently handle limits."", 'created_at': datetime.datetime(2025, 1, 21, 8, 16, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603991710, 'issue_id': 2795430580, 'author': 'Williambraecky', 'body': ""> Thank you for the extensive documentation in the commit message!\r\n> \r\n> I'm fine adding new options but it seems this one is going to be rather hard for system administrators to configure. Would it be possible to detect when the connection is about to outlive a wraparound? Or to instead catch the specific exception? So we can open a new transaction automatically and the sysadmin don't have anything to do.\r\n\r\nAlso, once the exception happens, there is no way to listen to that channel until the postgres server is restarted."", 'created_at': datetime.datetime(2025, 1, 21, 8, 43, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604489378, 'issue_id': 2795430580, 'author': 'Julien00859', 'body': '> Also, once the exception happens, there is no way to listen to that channel until the postgres server is restarted.\r\n\r\n![ah-denis](https://github.com/user-attachments/assets/55050847-0e28-4362-b713-844c1c8bce2d)\r\n\r\nok then this option seems adequate', 'created_at': datetime.datetime(2025, 1, 21, 11, 40, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 13:01:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194141.png)](https://mergebot.odoo.com/odoo/odoo/pull/194141)

Williambraecky (Issue Creator) on (2025-01-20 08:11:54 UTC): Hi @Julien00859 

Could I ask a pre-review from you before opening the PR?
Thanks

Documentation PR: https://github.com/odoo/documentation/pull/11779

Williambraecky (Issue Creator) on (2025-01-21 08:16:47 UTC): I don't think it's possible, and even if we could, from what I understand you might need multiple connections/notifies before cleanup actually happens.
This problem is strictly related to long running connections using LISTEN.
We might be able to use `UNLISTEN` and re-`LISTEN` periodically, but I preferred staying consistent with they way we currently handle limits.

Williambraecky (Issue Creator) on (2025-01-21 08:43:34 UTC): Also, once the exception happens, there is no way to listen to that channel until the postgres server is restarted.

Julien00859 on (2025-01-21 11:40:12 UTC): ![ah-denis](https://github.com/user-attachments/assets/55050847-0e28-4362-b713-844c1c8bce2d)

ok then this option seems adequate

"
2795424117,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747

Forward-Port-Of: odoo/odoo#194019
Forward-Port-Of: odoo/odoo#193786",fw-bot,2025-01-17 12:58:01+00:00,[],2025-02-04 09:46:21+00:00,2025-01-21 09:43:12+00:00,https://github.com/odoo/odoo/pull/194140,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598312911, 'issue_id': 2795424117, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194140.png)](https://mergebot.odoo.com/odoo/odoo/pull/194140)', 'created_at': datetime.datetime(2025, 1, 17, 12, 58, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598312932, 'issue_id': 2795424117, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 58, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598430325, 'issue_id': 2795424117, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 14, 0, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:58:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194140.png)](https://mergebot.odoo.com/odoo/odoo/pull/194140)

fw-bot (Issue Creator) on (2025-01-17 12:58:03 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 14:00:34 UTC): @guva-odoo @jbw-odoo ci/runbot failed on this forward-port PR

"
2795423441,pull_request,closed,,[FW][FIX] pos_restaurant: remove dead code,"Remove dead code forgotten in previous commit

Forward-Port-Of: odoo/odoo#193995",fw-bot,2025-01-17 12:57:40+00:00,[],2025-02-02 12:13:49+00:00,2025-01-19 11:50:41+00:00,https://github.com/odoo/odoo/pull/194139,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598312242, 'issue_id': 2795423441, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194139.png)](https://mergebot.odoo.com/odoo/odoo/pull/194139)', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598312272, 'issue_id': 2795423441, 'author': 'fw-bot', 'body': '@davidmonnom @caburj cherrypicking of pull request odoo/odoo#193995 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in f1a653d8afe029c89cac220f7884f6d7d4b2d0e7 and modified in f5af022f1f7afbfe02d46dd0f8cda8a7df69c391.  Version f5af022f1f7afbfe02d46dd0f8cda8a7df69c391 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598518155, 'issue_id': 2795423441, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 42, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599732442, 'issue_id': 2795423441, 'author': 'robodoo', 'body': '@davidmonnom @caburj staging failed: ci/runbot on 18b51e5406ee272aa457304ed72da1c8977ddd06 (view more at https://runbot.odoo.com/runbot/build/73568888)', 'created_at': datetime.datetime(2025, 1, 18, 14, 12, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600794268, 'issue_id': 2795423441, 'author': 'davidmonnom', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 19, 10, 12, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:57:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194139.png)](https://mergebot.odoo.com/odoo/odoo/pull/194139)

fw-bot (Issue Creator) on (2025-01-17 12:57:41 UTC): @davidmonnom @caburj cherrypicking of pull request odoo/odoo#193995 failed.

stdout:
```
CONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in f1a653d8afe029c89cac220f7884f6d7d4b2d0e7 and modified in f5af022f1f7afbfe02d46dd0f8cda8a7df69c391.  Version f5af022f1f7afbfe02d46dd0f8cda8a7df69c391 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

davidmonnom on (2025-01-17 14:42:20 UTC): @robodoo r+

robodoo on (2025-01-18 14:12:55 UTC): @davidmonnom @caburj staging failed: ci/runbot on 18b51e5406ee272aa457304ed72da1c8977ddd06 (view more at https://runbot.odoo.com/runbot/build/73568888)

davidmonnom on (2025-01-19 10:12:30 UTC): @robodoo retry

"
2795423083,pull_request,closed,,[FIX] hw_posbox_homepage: allow windows access to update dialog,"Since odoo/odoo#190338, ""download handlers"" is available through ""Update"" page. As Windows IoT Boxes have no access to this page, the feature was unreachable. This commit fixes this behaviour by allowing access to Update page and disabling Linux specific tools on it.
",loouis-t,2025-01-17 12:57:28+00:00,[],2025-01-17 13:14:05+00:00,2025-01-17 13:14:05+00:00,https://github.com/odoo/odoo/pull/194138,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598311895, 'issue_id': 2795423083, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194138.png)](https://mergebot.odoo.com/odoo/odoo/pull/194138)', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598323281, 'issue_id': 2795423083, 'author': 'lse-odoo', 'body': '@loouis-t should it target 17.0 as https://github.com/odoo/odoo/pull/190338 was backward ported in 17 ?', 'created_at': datetime.datetime(2025, 1, 17, 13, 3, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598335133, 'issue_id': 2795423083, 'author': 'loouis-t', 'body': ""> @loouis-t should it target 17.0 as #190338 was backward ported in 17 ?\r\n\r\noh yes, you're right"", 'created_at': datetime.datetime(2025, 1, 17, 13, 9, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598343638, 'issue_id': 2795423083, 'author': 'loouis-t', 'body': 'Retargeted to [17.0](https://github.com/odoo/odoo/pull/194145)', 'created_at': datetime.datetime(2025, 1, 17, 13, 14, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:57:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194138.png)](https://mergebot.odoo.com/odoo/odoo/pull/194138)

lse-odoo on (2025-01-17 13:03:46 UTC): @loouis-t should it target 17.0 as https://github.com/odoo/odoo/pull/190338 was backward ported in 17 ?

loouis-t (Issue Creator) on (2025-01-17 13:09:17 UTC): oh yes, you're right

loouis-t (Issue Creator) on (2025-01-17 13:14:05 UTC): Retargeted to [17.0](https://github.com/odoo/odoo/pull/194145)

"
2795422882,pull_request,closed,,[FW][FIX] spreadsheet: disable public download button,"Steps to reproduce:

- install Documents
- create a new spreadsheet
- hit the Share button
- change the sharing settings to ""Anyone with the link: Viewer / Musty have the link to access""
- open the sharing link in an incognito window
- hit the download button

=> 404 not found

A public user cannot convert a spreadsheet to an excel file and downlaod it because a route needs to be called to create the excel file. This route is currently not allowed for public users.

For frozen spreadsheet, we generate the excel file before-hand (when the internal user shares the spreadsheet). For a regular ""live"" share though, we cannot pre-generate the excel file since the spreadsheet continues to live and evolve.

The `spreadsheet` module needs to be updated for this bug fix to take effect. (otherwise the download button won't do anything, which is not worse than facing a 404 response)

See also Enterprise PR.

Task: 4440241
opw: 4417519




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192349",fw-bot,2025-01-17 12:57:21+00:00,[],2025-02-01 17:47:23+00:00,2025-01-18 15:27:41+00:00,https://github.com/odoo/odoo/pull/194137,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598311713, 'issue_id': 2795422882, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194137.png)](https://mergebot.odoo.com/odoo/odoo/pull/194137)', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598311751, 'issue_id': 2795422882, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:57:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194137.png)](https://mergebot.odoo.com/odoo/odoo/pull/194137)

fw-bot (Issue Creator) on (2025-01-17 12:57:25 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795421859,pull_request,closed,,[FW][FIX] account: change shortcut for Upload Button to Alt+Shift+I to avoid conflict,"Before this PR:
- The Upload Button was assigned the shortcut Alt+B.
- This caused a conflict with Odoo's default shortcut for navigating backward.

After this PR:
- The shortcut for the Upload Button is now updated to Alt+Shift+I.
- This resolves the conflict and ensures smooth navigation and functionality.

Task ID:-4417310

Forward-Port-Of: odoo/odoo#191003",fw-bot,2025-01-17 12:56:46+00:00,[],2025-02-01 05:46:49+00:00,2025-01-18 05:11:48+00:00,https://github.com/odoo/odoo/pull/194136,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598310606, 'issue_id': 2795421859, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194136.png)](https://mergebot.odoo.com/odoo/odoo/pull/194136)', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598310622, 'issue_id': 2795421859, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:56:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194136.png)](https://mergebot.odoo.com/odoo/odoo/pull/194136)

fw-bot (Issue Creator) on (2025-01-17 12:56:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795421357,pull_request,closed,,[FW][FIX] point_of_sale: add default logs location fallback to IoT log do…,"…wnload

Current behavior before PR:
 When using the ""Download logs"" button, from the IoT box form view, an Internal Server Error is raised every time.
```py
Internal Server Error : Log file configuration is not set
```

Description of the issue/feature this PR addresses:
New IoT Box images are missing the default `logfile` parameter in their config. This parameter is required for log downloading, and cannot be left empty.

The `logfile` parameter has been removed from the `odoo.conf` config file in PR #169633. However, it is still explicitly mentioned as `/var/log/odoo/odoo-server.log` in two other files: https://github.com/odoo/odoo/blob/451a956a22015034b8c35bd0d9a860b78442af7f/addons/hw_posbox_homepage/controllers/homepage.py#L74 and
https://github.com/odoo/odoo/blob/451a956a22015034b8c35bd0d9a860b78442af7f/addons/point_of_sale/tools/posbox/overwrite_before_init/etc/init_posbox_image.sh#L28 As such, a fallback to the default `/var/log/odoo/odoo-server.log` is added.

Desired behavior after PR is merged:
The Logs can be downloaded from the IoT box form view without receiving an Internal Server Error.

opw-4443593

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192986
Forward-Port-Of: odoo/odoo#192867",fw-bot,2025-01-17 12:56:30+00:00,[],2025-02-03 16:25:50+00:00,2025-01-20 16:23:50+00:00,https://github.com/odoo/odoo/pull/194135,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598310102, 'issue_id': 2795421357, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194135.png)](https://mergebot.odoo.com/odoo/odoo/pull/194135)', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598310116, 'issue_id': 2795421357, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598425589, 'issue_id': 2795421357, 'author': 'fw-bot', 'body': '@vise-odoo @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 13, 58, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:56:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194135.png)](https://mergebot.odoo.com/odoo/odoo/pull/194135)

fw-bot (Issue Creator) on (2025-01-17 12:56:32 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 13:58:06 UTC): @vise-odoo @Ysoroko ci/runbot failed on this forward-port PR

"
2795420446,pull_request,closed,,[FW][FIX] account: edi format parent partner,"The invoice edi format should be take from the parent
of the partner instead of the partner himself.

Steps:

- Create an individual partner X and set an edi format
- Create a company partner Y and set a different edi format
- Make X child of Y
- Create an invoice for X, confirm and click on 'Send and print' button
-> The edi file is in the format set on X instead of the format set on Y

opw-4480527

Forward-Port-Of: odoo/odoo#193981",fw-bot,2025-01-17 12:56:03+00:00,[],2025-02-04 09:46:20+00:00,2025-01-21 09:43:08+00:00,https://github.com/odoo/odoo/pull/194134,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598310035, 'issue_id': 2795420446, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194134.png)](https://mergebot.odoo.com/odoo/odoo/pull/194134)', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598310045, 'issue_id': 2795420446, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 56, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598350392, 'issue_id': 2795420446, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 13, 17, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598419610, 'issue_id': 2795420446, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 13, 55, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:56:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194134.png)](https://mergebot.odoo.com/odoo/odoo/pull/194134)

fw-bot (Issue Creator) on (2025-01-17 12:56:29 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 13:17:22 UTC): @guva-odoo @jbw-odoo ci/upgrade_enterprise failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 13:55:05 UTC): @guva-odoo @jbw-odoo ci/runbot failed on this forward-port PR

"
2795418112,pull_request,closed,,[FW][FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.

Forward-Port-Of: odoo/odoo#193716",fw-bot,2025-01-17 12:54:53+00:00,[],2025-02-03 15:14:54+00:00,2025-01-20 15:07:40+00:00,https://github.com/odoo/odoo/pull/194133,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598307330, 'issue_id': 2795418112, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194133.png)](https://mergebot.odoo.com/odoo/odoo/pull/194133)', 'created_at': datetime.datetime(2025, 1, 17, 12, 54, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598307351, 'issue_id': 2795418112, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 54, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598322177, 'issue_id': 2795418112, 'author': 'fw-bot', 'body': '@ryv-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 13, 3, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598340794, 'issue_id': 2795418112, 'author': 'fw-bot', 'body': '@ryv-odoo ci/template failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 13, 12, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173081, 'issue_id': 2795418112, 'author': 'fw-bot', 'body': '@ryv-odoo this forward port of odoo/odoo#193716 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601760077, 'issue_id': 2795418112, 'author': 'Williambraecky', 'body': ""encore moc qu'à tout pété, jte jure"", 'created_at': datetime.datetime(2025, 1, 20, 8, 40, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:54:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194133.png)](https://mergebot.odoo.com/odoo/odoo/pull/194133)

fw-bot (Issue Creator) on (2025-01-17 12:54:55 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 13:03:08 UTC): @ryv-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 13:12:27 UTC): @ryv-odoo ci/template failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-20 02:01:25 UTC): @ryv-odoo this forward port of odoo/odoo#193716 is awaiting action (not merged or closed).

Williambraecky on (2025-01-20 08:40:03 UTC): encore moc qu'à tout pété, jte jure

"
2795413191,pull_request,closed,,[FW][FIX] core: JS tests / tours needing focus,"Apparently in normal mode (and thus the new headless mode) Chrome does not focus the document. The `activeElement` is correctly set, but `document.hasFocus()` always returns `false` and per-element focus events are suppressed.

That makes tests testing or needing focus fail in the new headless mode as well as well as impossible (or at least frustrating) to `debug`.

Enabling ""focus emulation"", which corresponds to the ""Emulate a focused page"" UI option, seems to resolve the issue.

Fixes reliably failing tests

- `/im_livechat:ExternalTestSuite.test_external_livechat`
- `/account:TestUI.test_01_account_tax_groups_tour`
- `/account_accountant:TestBankRecWidget.test_tour_bank_rec_widget`
- `/web_editor:TestOdooEditor.test_odoo_editor_suite`

Backport of: odoo/odoo@0aaf98b77feaa15f5eb30e1c251f5765e8afbfa5

Forward-Port-Of: odoo/odoo#193993",fw-bot,2025-01-17 12:52:28+00:00,[],2025-01-31 16:56:39+00:00,2025-01-17 16:47:56+00:00,https://github.com/odoo/odoo/pull/194132,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598303247, 'issue_id': 2795413191, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194132.png)](https://mergebot.odoo.com/odoo/odoo/pull/194132)', 'created_at': datetime.datetime(2025, 1, 17, 12, 52, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598303268, 'issue_id': 2795413191, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 52, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:52:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194132.png)](https://mergebot.odoo.com/odoo/odoo/pull/194132)

fw-bot (Issue Creator) on (2025-01-17 12:52:30 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795407559,pull_request,open,,[IMP] base: remove default '--' sign,"Hide the '--' separator added before user signatures, similar to Gmail, to prevent accidental edits or formatting issues, except for 'Send Message' and 'Composer' actions.

Task-4485719",spe-odoo,2025-01-17 12:49:23+00:00,[],2025-02-07 10:39:02+00:00,,https://github.com/odoo/odoo/pull/194131,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598297898, 'issue_id': 2795407559, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194131.png)](https://mergebot.odoo.com/odoo/odoo/pull/194131)', 'created_at': datetime.datetime(2025, 1, 17, 12, 49, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620719615, 'issue_id': 2795407559, 'author': 'spe-odoo', 'body': 'Hey @mrsr-odoo, \r\n\r\nThe given change has been made. Please have a look.\r\n\r\nThanks', 'created_at': datetime.datetime(2025, 1, 29, 4, 54, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636169844, 'issue_id': 2795407559, 'author': 'spe-odoo', 'body': ""hey @seb-odoo @mrsr-odoo,\r\n\r\nThe changes have been made. Also, I adapted the code based on a few signature tests. code removes `data-o-mail-quote` attribute from all children elements when the signature is multi-lined. it creates `<p></p>` for every line of the content due to this, 'read more/less' was appearing for every line in chatter after mail sent and caused weird ui changes.\r\n\r\nTo overcome the above issue, The code is adapted. \r\n\r\nThanks"", 'created_at': datetime.datetime(2025, 2, 5, 9, 19, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639262551, 'issue_id': 2795407559, 'author': 'mrsr-odoo', 'body': 'Hello @spe-odoo :wave: ,\r\ntested on the branch and found we have multiple read more buttons when we open full composer with some message \r\n![image](https://github.com/user-attachments/assets/6bd31be2-c451-4034-ad59-8a16b9012c0d)\r\n\r\nCould you please have a look?\r\nThanks', 'created_at': datetime.datetime(2025, 2, 6, 9, 26, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642505708, 'issue_id': 2795407559, 'author': 'spe-odoo', 'body': 'hey @mrsr-odoo,\r\n\r\nThe changes have been made. Please have a look.\r\n\r\nThanks', 'created_at': datetime.datetime(2025, 2, 7, 10, 15, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:49:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194131.png)](https://mergebot.odoo.com/odoo/odoo/pull/194131)

spe-odoo (Issue Creator) on (2025-01-29 04:54:05 UTC): Hey @mrsr-odoo, 

The given change has been made. Please have a look.

Thanks

spe-odoo (Issue Creator) on (2025-02-05 09:19:42 UTC): hey @seb-odoo @mrsr-odoo,

The changes have been made. Also, I adapted the code based on a few signature tests. code removes `data-o-mail-quote` attribute from all children elements when the signature is multi-lined. it creates `<p></p>` for every line of the content due to this, 'read more/less' was appearing for every line in chatter after mail sent and caused weird ui changes.

To overcome the above issue, The code is adapted. 

Thanks

mrsr-odoo on (2025-02-06 09:26:14 UTC): Hello @spe-odoo :wave: ,
tested on the branch and found we have multiple read more buttons when we open full composer with some message 
![image](https://github.com/user-attachments/assets/6bd31be2-c451-4034-ad59-8a16b9012c0d)

Could you please have a look?
Thanks

spe-odoo (Issue Creator) on (2025-02-07 10:15:49 UTC): hey @mrsr-odoo,

The changes have been made. Please have a look.

Thanks

"
2795406992,pull_request,closed,,[FIX] l10n_es_edi_tbai_multi_refund: allow selecting customer refunds,"In https://github.com/odoo/odoo/pull/193392 the reversed invoices field was exposed when reversing customer invoices.

However, the field domain forbids selection of customer invoices. Also, the field name was misleading.

![image](https://github.com/user-attachments/assets/520d0b47-a776-4354-a7d2-feaf986ad7d8)


This hotfix should make it possible to actually refund outgoing invoices.

@moduon MT-4966



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",yajo,2025-01-17 12:49:05+00:00,[],2025-01-24 12:58:43+00:00,2025-01-20 09:58:32+00:00,https://github.com/odoo/odoo/pull/194130,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2598297249, 'issue_id': 2795406992, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194130.png)](https://mergebot.odoo.com/odoo/odoo/pull/194130)', 'created_at': datetime.datetime(2025, 1, 17, 12, 49, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598307905, 'issue_id': 2795406992, 'author': 'yajo', 'body': '@RicGR98 please could you review?', 'created_at': datetime.datetime(2025, 1, 17, 12, 55, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612475154, 'issue_id': 2795406992, 'author': 'yajo', 'body': 'This PR was buggy and fix is in https://github.com/odoo/odoo/pull/194361. Could you review please?', 'created_at': datetime.datetime(2025, 1, 24, 12, 58, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:49:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194130.png)](https://mergebot.odoo.com/odoo/odoo/pull/194130)

yajo (Issue Creator) on (2025-01-17 12:55:17 UTC): @RicGR98 please could you review?

yajo (Issue Creator) on (2025-01-24 12:58:42 UTC): This PR was buggy and fix is in https://github.com/odoo/odoo/pull/194361. Could you review please?

"
2795391976,pull_request,closed,,[FW][FIX] mail: rename mail template to avoid duplicate names,"Currently, there are two mail templates named ""Settings: New User Invite"" in the records. To avoid duplication, we will rename the template used to welcome portal users who register as internal users to ""Settings: New Portal Sign Up"".

Follow up of #188391

Task-4481862

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194067",fw-bot,2025-01-17 12:41:02+00:00,[],2025-01-31 21:53:25+00:00,2025-01-17 21:39:18+00:00,https://github.com/odoo/odoo/pull/194129,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598282805, 'issue_id': 2795391976, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194129.png)](https://mergebot.odoo.com/odoo/odoo/pull/194129)', 'created_at': datetime.datetime(2025, 1, 17, 12, 41, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598282829, 'issue_id': 2795391976, 'author': 'fw-bot', 'body': '@julien-banken @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194116\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 41, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598414952, 'issue_id': 2795391976, 'author': 'tde-banana-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 52, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:41:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194129.png)](https://mergebot.odoo.com/odoo/odoo/pull/194129)

fw-bot (Issue Creator) on (2025-01-17 12:41:04 UTC): @julien-banken @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194116

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tde-banana-odoo on (2025-01-17 13:52:37 UTC): @robodoo r+

"
2795380744,pull_request,closed,,[FW][FIX] spreadsheet_account: fix misleading function description,"The example of values in the description are translated in other languages. It should not because only the technical values are accepted (which are never translated)

It's not needed to backport to 16.0 because function description were not translated at that time.

Task: 4471424

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193350
Forward-Port-Of: odoo/odoo#193205",fw-bot,2025-01-17 12:34:54+00:00,[],2025-01-31 21:53:25+00:00,2025-01-17 21:39:22+00:00,https://github.com/odoo/odoo/pull/194128,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598272280, 'issue_id': 2795380744, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194128.png)](https://mergebot.odoo.com/odoo/odoo/pull/194128)', 'created_at': datetime.datetime(2025, 1, 17, 12, 34, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598272293, 'issue_id': 2795380744, 'author': 'fw-bot', 'body': '@LucasLefevre @rrahir this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194115\n* odoo/odoo#194095\n* odoo/odoo#194078\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 34, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598322497, 'issue_id': 2795380744, 'author': 'LucasLefevre', 'body': 'robodoo r+\r\n\r\nOn Fri, Jan 17, 2025 at 1:35\u202fPM Otis - Odoo Forward-Port Steward [bot] <\r\n***@***.***> wrote:\r\n\r\n> @LucasLefevre <https://github.com/LucasLefevre> @rrahir\r\n> <https://github.com/rrahir> this PR targets master and is the last of the\r\n> forward-port chain containing:\r\n>\r\n>    - #194115 <https://github.com/odoo/odoo/pull/194115>\r\n>    - #194095 <https://github.com/odoo/odoo/pull/194095>\r\n>    - #194078 <https://github.com/odoo/odoo/pull/194078>\r\n>\r\n> To merge the full chain, use\r\n>\r\n> @robodoo <https://github.com/robodoo> r+\r\n>\r\n> More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/odoo/odoo/pull/194128#issuecomment-2598272293>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACTHFEIPQAYCVGZCWKBQW632LD2ITAVCNFSM6AAAAABVL2OHYGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKOJYGI3TEMRZGM>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>', 'created_at': datetime.datetime(2025, 1, 17, 13, 3, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:34:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194128.png)](https://mergebot.odoo.com/odoo/odoo/pull/194128)

fw-bot (Issue Creator) on (2025-01-17 12:34:56 UTC): @LucasLefevre @rrahir this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194115
* odoo/odoo#194095
* odoo/odoo#194078

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LucasLefevre on (2025-01-17 13:03:17 UTC): robodoo r+

On Fri, Jan 17, 2025 at 1:35 PM Otis - Odoo Forward-Port Steward [bot] <
***@***.***> wrote:

"
2795368099,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193519
Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-17 12:28:05+00:00,[],2025-02-03 10:02:22+00:00,2025-01-20 10:01:00+00:00,https://github.com/odoo/odoo/pull/194127,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598260431, 'issue_id': 2795368099, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194127.png)](https://mergebot.odoo.com/odoo/odoo/pull/194127)', 'created_at': datetime.datetime(2025, 1, 17, 12, 28, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598260461, 'issue_id': 2795368099, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 28, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:28:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194127.png)](https://mergebot.odoo.com/odoo/odoo/pull/194127)

fw-bot (Issue Creator) on (2025-01-17 12:28:07 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795361341,pull_request,closed,,[FW][FIX] delivery: fix loc. selector maker position,"Before this commit, markers on the location selector map were misaligned. The misalignment was proportional to the zoom level, as the marker incorrectly used the top-left corner of the anchor as its reference.

This commit resolves the issue by defining the correct icon anchor position for markers.

Forward-Port-Of: odoo/odoo#193982",fw-bot,2025-01-17 12:24:25+00:00,[],2025-01-31 20:32:12+00:00,2025-01-17 20:12:32+00:00,https://github.com/odoo/odoo/pull/194126,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598254308, 'issue_id': 2795361341, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194126.png)](https://mergebot.odoo.com/odoo/odoo/pull/194126)', 'created_at': datetime.datetime(2025, 1, 17, 12, 24, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598254321, 'issue_id': 2795361341, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 24, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:24:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194126.png)](https://mergebot.odoo.com/odoo/odoo/pull/194126)

fw-bot (Issue Creator) on (2025-01-17 12:24:27 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795347646,pull_request,closed,,[FW][FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.

Forward-Port-Of: odoo/odoo#193990",fw-bot,2025-01-17 12:17:23+00:00,[],2025-02-01 05:46:49+00:00,2025-01-18 05:11:52+00:00,https://github.com/odoo/odoo/pull/194125,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598242113, 'issue_id': 2795347646, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194125.png)](https://mergebot.odoo.com/odoo/odoo/pull/194125)', 'created_at': datetime.datetime(2025, 1, 17, 12, 17, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598242134, 'issue_id': 2795347646, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 17, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:17:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194125.png)](https://mergebot.odoo.com/odoo/odoo/pull/194125)

fw-bot (Issue Creator) on (2025-01-17 12:17:25 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795329350,pull_request,closed,,[FW][FIX] pos_restaurant: split decimal orderline,"Fixes an issue where splitting an order line with a decimal quantity (e.g., 2.5) would cause indefinite increments in the split bill screen. This adds a check to ensure the split quantity does not exceed the original order line quantity.

task-id: 4461861

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193801
Forward-Port-Of: odoo/odoo#193514",fw-bot,2025-01-17 12:07:21+00:00,[],2025-02-03 13:39:24+00:00,2025-01-20 13:32:19+00:00,https://github.com/odoo/odoo/pull/194124,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598224233, 'issue_id': 2795329350, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194124.png)](https://mergebot.odoo.com/odoo/odoo/pull/194124)', 'created_at': datetime.datetime(2025, 1, 17, 12, 7, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598224254, 'issue_id': 2795329350, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 7, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598294968, 'issue_id': 2795329350, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 12, 47, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598713504, 'issue_id': 2795329350, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 16, 20, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600463405, 'issue_id': 2795329350, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom this forward port of odoo/odoo#193514 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173273, 'issue_id': 2795329350, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom this forward port of odoo/odoo#193514 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601847779, 'issue_id': 2795329350, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 9, 17, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:07:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194124.png)](https://mergebot.odoo.com/odoo/odoo/pull/194124)

fw-bot (Issue Creator) on (2025-01-17 12:07:23 UTC): @manv-afk @davidmonnom this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 12:47:55 UTC): @manv-afk @davidmonnom ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 16:20:04 UTC): @manv-afk @davidmonnom this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-19 02:01:37 UTC): @manv-afk @davidmonnom this forward port of odoo/odoo#193514 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:34 UTC): @manv-afk @davidmonnom this forward port of odoo/odoo#193514 is awaiting action (not merged or closed).

manv-afk on (2025-01-20 09:17:58 UTC): @robodoo r+

"
2795328853,pull_request,closed,,"[FW][FIX] sale,website_sale: pricelist valid dates not applied","If you create a pricelist rule with a discount that has a valid date range, that discount is only applied if the SO was created in that range. Even if it is confirmed within the valid date range.

Fix:
For website_sale orders we consider the date to be the current time when computing the price.

opw-4375643


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192943
Forward-Port-Of: odoo/odoo#191538",fw-bot,2025-01-17 12:07:05+00:00,[],2025-01-31 19:53:21+00:00,2025-01-17 19:41:29+00:00,https://github.com/odoo/odoo/pull/194123,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2598224128, 'issue_id': 2795328853, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194123.png)](https://mergebot.odoo.com/odoo/odoo/pull/194123)', 'created_at': datetime.datetime(2025, 1, 17, 12, 7, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598224142, 'issue_id': 2795328853, 'author': 'fw-bot', 'body': '@livaios this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 12, 7, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598227368, 'issue_id': 2795328853, 'author': 'livaios', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 9, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:07:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194123.png)](https://mergebot.odoo.com/odoo/odoo/pull/194123)

fw-bot (Issue Creator) on (2025-01-17 12:07:20 UTC): @livaios this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

livaios on (2025-01-17 12:09:06 UTC): @robodoo r+

"
2795315403,pull_request,closed,,[FIX] mail: no autofocus on composer on mobile,"Before this commit, when opening a channel on mobile the composer gets automatically focused.
This is not a problem on desktop, but when on mobile it triggers the opening of the system keyboard, occupying half the screen and requiring a ""back"" command to close it.

This happens because the function that opens the chat window will put focus on the composer.
This commit fixes the issue by only focusing the composer when not on mobile.

task-4115728",Atovange,2025-01-17 12:00:15+00:00,[],2025-01-18 22:45:48+00:00,2025-01-18 02:50:52+00:00,https://github.com/odoo/odoo/pull/194122,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598211792, 'issue_id': 2795315403, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194122.png)](https://mergebot.odoo.com/odoo/odoo/pull/194122)', 'created_at': datetime.datetime(2025, 1, 17, 12, 0, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598212227, 'issue_id': 2795315403, 'author': 'Atovange', 'body': 'This fix should only be forwarded up to saas-17.2', 'created_at': datetime.datetime(2025, 1, 17, 12, 0, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 12:00:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194122.png)](https://mergebot.odoo.com/odoo/odoo/pull/194122)

Atovange (Issue Creator) on (2025-01-17 12:00:35 UTC): This fix should only be forwarded up to saas-17.2

"
2795307756,pull_request,closed,,[FW][CLA] Update Quartile CLA,"@qrtl

-------------------------------

I confirm I have signed the CLA and read the PR guidelines at [www.odoo.com/submit-pr](http://www.odoo.com/submit-pr)

Forward-Port-Of: odoo/odoo#194087",fw-bot,2025-01-17 11:56:06+00:00,[],2025-02-03 19:00:23+00:00,2025-01-20 18:40:21+00:00,https://github.com/odoo/odoo/pull/194121,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598204704, 'issue_id': 2795307756, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194121.png)](https://mergebot.odoo.com/odoo/odoo/pull/194121)', 'created_at': datetime.datetime(2025, 1, 17, 11, 56, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598204720, 'issue_id': 2795307756, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 56, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:56:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194121.png)](https://mergebot.odoo.com/odoo/odoo/pull/194121)

fw-bot (Issue Creator) on (2025-01-17 11:56:07 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795293957,pull_request,closed,,[FW][FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.

Forward-Port-Of: odoo/odoo#193716",fw-bot,2025-01-17 11:48:30+00:00,[],2025-02-03 20:55:56+00:00,2025-01-20 20:07:20+00:00,https://github.com/odoo/odoo/pull/194120,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598192097, 'issue_id': 2795293957, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194120.png)](https://mergebot.odoo.com/odoo/odoo/pull/194120)', 'created_at': datetime.datetime(2025, 1, 17, 11, 48, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598192115, 'issue_id': 2795293957, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 48, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:48:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194120.png)](https://mergebot.odoo.com/odoo/odoo/pull/194120)

fw-bot (Issue Creator) on (2025-01-17 11:48:32 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795282670,pull_request,closed,,[FIX] web: form compiler: correctly detect anchors to same form,"Before this commit, the form compiler did a search in the whole DOM, when compiling a form, to find anchors, for which the target node would be in the form being compiled. The point of this was to automatically open the notebook tab when an anchor is click for an element that is hidden in a non active tab.

However, looking in the DOM makes no sense. It's very likely that the found element won't be there anymore when the view we compile will be put in the DOM, and moreover the compilation is done only once, so if we come back later on on the same form, we'll still use the information of the anchor we found the first time, which is ever less likely to be again in the DOM.

This was actually a code mistake, as what we aimed to do was to find anchors **in the form**, pointing to elements hidden in the notebook, but definitely not **in the dom**.

This mistake produces a crash: go to ""Timesheet / Configuration / Settings"" and try to open the ""Internal"" project in the time off section => traceback.

This commit removes the look up in the document. The feature of automatically opening the tab already partially works, but we won't fix it, and we'll even drop it in master.

opw~4457605

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",aab-odoo,2025-01-17 11:42:10+00:00,[],2025-01-31 17:45:41+00:00,2025-01-17 17:37:18+00:00,https://github.com/odoo/odoo/pull/194119,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598181136, 'issue_id': 2795282670, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194119.png)](https://mergebot.odoo.com/odoo/odoo/pull/194119)', 'created_at': datetime.datetime(2025, 1, 17, 11, 42, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598205680, 'issue_id': 2795282670, 'author': 'kebeclibre', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 56, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:42:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194119.png)](https://mergebot.odoo.com/odoo/odoo/pull/194119)

kebeclibre on (2025-01-17 11:56:43 UTC): robodoo r+

"
2795270245,pull_request,closed,,[FIX] base: prevent error on duplicating multiple records,"This error occurs when attempting to duplicate two actions in ``Server Actions``.

Steps to reproduce:
---
- Search ``Server Actions``
- Select any two Actions and ``Duplicate``

Traceback:
---
``ValueError: Expected singleton: ir.actions.server(606, 701)``

After this commit:
---
We are now able to duplicate multiple records.

sentry-6218495006

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",aamo-odoo,2025-01-17 11:35:09+00:00,[],2025-02-08 08:45:48+00:00,2025-02-08 08:45:48+00:00,https://github.com/odoo/odoo/pull/194118,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598169092, 'issue_id': 2795270245, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194118.png)](https://mergebot.odoo.com/odoo/odoo/pull/194118)', 'created_at': datetime.datetime(2025, 1, 17, 11, 35, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598319475, 'issue_id': 2795270245, 'author': 'aamo-odoo', 'body': 'Hello @odoo/sentry_reviewers\r\n\r\nPlease review this PR.\r\n\r\nThanks! :)', 'created_at': datetime.datetime(2025, 1, 17, 13, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602321387, 'issue_id': 2795270245, 'author': 'aamo-odoo', 'body': 'Hey @xmo-odoo \r\n\r\nRequested changes are done.\r\nPlease have a review.\r\n\r\nThanks:)', 'created_at': datetime.datetime(2025, 1, 20, 12, 38, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:35:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194118.png)](https://mergebot.odoo.com/odoo/odoo/pull/194118)

aamo-odoo (Issue Creator) on (2025-01-17 13:01:41 UTC): Hello @odoo/sentry_reviewers

Please review this PR.

Thanks! :)

aamo-odoo (Issue Creator) on (2025-01-20 12:38:22 UTC): Hey @xmo-odoo 

Requested changes are done.
Please have a review.

Thanks:)

"
2795263820,pull_request,closed,,[FW][FIX] core: JS tests / tours needing focus,"Apparently in normal mode (and thus the new headless mode) Chrome does not focus the document. The `activeElement` is correctly set, but `document.hasFocus()` always returns `false` and per-element focus events are suppressed.

That makes tests testing or needing focus fail in the new headless mode as well as well as impossible (or at least frustrating) to `debug`.

Enabling ""focus emulation"", which corresponds to the ""Emulate a focused page"" UI option, seems to resolve the issue.

Fixes reliably failing tests

- `/im_livechat:ExternalTestSuite.test_external_livechat`
- `/account:TestUI.test_01_account_tax_groups_tour`
- `/account_accountant:TestBankRecWidget.test_tour_bank_rec_widget`
- `/web_editor:TestOdooEditor.test_odoo_editor_suite`

Backport of: odoo/odoo@0aaf98b77feaa15f5eb30e1c251f5765e8afbfa5

Forward-Port-Of: odoo/odoo#193993",fw-bot,2025-01-17 11:31:34+00:00,[],2025-01-31 16:56:33+00:00,2025-01-17 16:37:29+00:00,https://github.com/odoo/odoo/pull/194117,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598163308, 'issue_id': 2795263820, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194117.png)](https://mergebot.odoo.com/odoo/odoo/pull/194117)', 'created_at': datetime.datetime(2025, 1, 17, 11, 31, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598163332, 'issue_id': 2795263820, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 31, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:31:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194117.png)](https://mergebot.odoo.com/odoo/odoo/pull/194117)

fw-bot (Issue Creator) on (2025-01-17 11:31:36 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795252593,pull_request,closed,,[FW][FIX] mail: rename mail template to avoid duplicate names,"Currently, there are two mail templates named ""Settings: New User Invite"" in the records. To avoid duplication, we will rename the template used to welcome portal users who register as internal users to ""Settings: New Portal Sign Up"".

Follow up of #188391

Task-4481862

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194067",fw-bot,2025-01-17 11:26:41+00:00,[],2025-02-01 04:46:34+00:00,2025-01-18 02:24:47+00:00,https://github.com/odoo/odoo/pull/194116,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598154452, 'issue_id': 2795252593, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194116.png)](https://mergebot.odoo.com/odoo/odoo/pull/194116)', 'created_at': datetime.datetime(2025, 1, 17, 11, 26, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598154475, 'issue_id': 2795252593, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 26, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:26:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194116.png)](https://mergebot.odoo.com/odoo/odoo/pull/194116)

fw-bot (Issue Creator) on (2025-01-17 11:26:53 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795241640,pull_request,closed,,[FW][FIX] spreadsheet_account: fix misleading function description,"The example of values in the description are translated in other languages. It should not because only the technical values are accepted (which are never translated)

It's not needed to backport to 16.0 because function description were not translated at that time.

Task: 4471424

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193350
Forward-Port-Of: odoo/odoo#193205",fw-bot,2025-01-17 11:22:31+00:00,[],2025-01-31 18:00:44+00:00,2025-01-17 17:58:31+00:00,https://github.com/odoo/odoo/pull/194115,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598143072, 'issue_id': 2795241640, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194115.png)](https://mergebot.odoo.com/odoo/odoo/pull/194115)', 'created_at': datetime.datetime(2025, 1, 17, 11, 22, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598143090, 'issue_id': 2795241640, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 22, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:22:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194115.png)](https://mergebot.odoo.com/odoo/odoo/pull/194115)

fw-bot (Issue Creator) on (2025-01-17 11:22:32 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795222158,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193519
Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-17 11:15:18+00:00,[],2025-02-03 10:00:26+00:00,2025-01-20 09:56:42+00:00,https://github.com/odoo/odoo/pull/194114,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598120421, 'issue_id': 2795222158, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194114.png)](https://mergebot.odoo.com/odoo/odoo/pull/194114)', 'created_at': datetime.datetime(2025, 1, 17, 11, 15, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598120444, 'issue_id': 2795222158, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 15, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:15:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194114.png)](https://mergebot.odoo.com/odoo/odoo/pull/194114)

fw-bot (Issue Creator) on (2025-01-17 11:15:20 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795186389,pull_request,closed,,[FW][FIX] sale_pdf_quote_builder: use correct datetime format,"Versions
--------
- saas-17.4+

Steps
-----
1. Create a new quotation template;
2. add a header which uses the `date_order` field;
3. configure the mapping from this form field to the record field;
4. print the quotation template.

Issue
-----
The datetime is formatted as ""Jan 16, 2025, 5:59:26 PM"", which is different from how dates are formatted, or how datetimes are usually formatted elsewhere in Odoo.

Additionally, it may also be too long to fit in the form field.

Cause
-----
The `format_datetime` function is used without a `dt_format` specified, falling back on the default `'medium'`: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1399

Solution
--------
In order to get the format defined for the relevant locale in Odoo, `dt_format=False` should be specified in the `format_datetime` call: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1427-L1430

opw-4414688

Forward-Port-Of: odoo/odoo#194016",fw-bot,2025-01-17 11:02:06+00:00,[],2025-01-31 20:32:02+00:00,2025-01-17 20:12:25+00:00,https://github.com/odoo/odoo/pull/194113,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598076728, 'issue_id': 2795186389, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194113.png)](https://mergebot.odoo.com/odoo/odoo/pull/194113)', 'created_at': datetime.datetime(2025, 1, 17, 11, 2, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598076816, 'issue_id': 2795186389, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 11, 2, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598165326, 'issue_id': 2795186389, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 32, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598171742, 'issue_id': 2795186389, 'author': 'robodoo', 'body': ""@lvsz @Demesmaeker 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 11, 36, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598185203, 'issue_id': 2795186389, 'author': 'fw-bot', 'body': '@lvsz @Demesmaeker this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 11, 44, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598185775, 'issue_id': 2795186389, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 44, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:02:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194113.png)](https://mergebot.odoo.com/odoo/odoo/pull/194113)

fw-bot (Issue Creator) on (2025-01-17 11:02:16 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-17 11:32:48 UTC): robodoo r+

robodoo on (2025-01-17 11:36:49 UTC): @lvsz @Demesmaeker 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-17 11:44:34 UTC): @lvsz @Demesmaeker this PR was modified / updated and has become a normal PR. It must be merged directly.

lvsz on (2025-01-17 11:44:53 UTC): robodoo r+

"
2795182810,pull_request,closed,,[FIX] pos_mercado_pago: undefined payment_method on MP callback,"Before this commit:
Once receveiving Mercado Pago callback, a JS traceback would occur:
```js
TypeError: Cannot read properties of undefined (reading 'payment_method')
at Proxy.get_payment
```

opw-4349957",lse-odoo,2025-01-17 11:00:40+00:00,[],2025-01-31 15:34:08+00:00,2025-01-17 15:29:14+00:00,https://github.com/odoo/odoo/pull/194112,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598071097, 'issue_id': 2795182810, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194112.png)](https://mergebot.odoo.com/odoo/odoo/pull/194112)', 'created_at': datetime.datetime(2025, 1, 17, 11, 0, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598406392, 'issue_id': 2795182810, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 48, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 11:00:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194112.png)](https://mergebot.odoo.com/odoo/odoo/pull/194112)

caburj on (2025-01-17 13:48:10 UTC): robodoo r+

"
2795180649,pull_request,closed,,[FW][FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.

Forward-Port-Of: odoo/odoo#193990",fw-bot,2025-01-17 10:59:53+00:00,[],2025-01-31 20:32:08+00:00,2025-01-17 20:12:29+00:00,https://github.com/odoo/odoo/pull/194111,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2598068002, 'issue_id': 2795180649, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194111.png)](https://mergebot.odoo.com/odoo/odoo/pull/194111)', 'created_at': datetime.datetime(2025, 1, 17, 10, 59, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598068081, 'issue_id': 2795180649, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 59, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:59:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194111.png)](https://mergebot.odoo.com/odoo/odoo/pull/194111)

fw-bot (Issue Creator) on (2025-01-17 10:59:55 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795179569,pull_request,closed,,[FIX] l10n_br_website_sale: b2b fields error,"The b2b fields are still required in the portal form
even if the ""Show b2b fields"" is deactivated

Steps:

- From the website editor, on the checkout form,
  unselect the ""Show b2b fields"" setting
- Log out and go to ecommerce
- Add a product to card and checkout
- Fill the address form with a Brazilian address
-> Error: ""Some required fields are empty.""

With this commit, we add the field `vat` to the mandatory fields only if
the option ""Show b2b"" fields is activated.

opw-4403161
",guva-odoo,2025-01-17 10:59:29+00:00,[],2025-01-30 12:43:34+00:00,2025-01-30 12:43:34+00:00,https://github.com/odoo/odoo/pull/194110,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2598066709, 'issue_id': 2795179569, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194110.png)](https://mergebot.odoo.com/odoo/odoo/pull/194110)', 'created_at': datetime.datetime(2025, 1, 17, 10, 59, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623896348, 'issue_id': 2795179569, 'author': 'guva-odoo', 'body': 'Hello @clbr-odoo little up 🙂', 'created_at': datetime.datetime(2025, 1, 30, 9, 0, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623910207, 'issue_id': 2795179569, 'author': 'clbr-odoo', 'body': 'Little\r\n@robodoo r+\r\n(Sorry for the delay :saluting_face: )', 'created_at': datetime.datetime(2025, 1, 30, 9, 7, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:59:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194110.png)](https://mergebot.odoo.com/odoo/odoo/pull/194110)

guva-odoo (Issue Creator) on (2025-01-30 09:00:49 UTC): Hello @clbr-odoo little up 🙂

clbr-odoo on (2025-01-30 09:07:04 UTC): Little
@robodoo r+
(Sorry for the delay :saluting_face: )

"
2795147369,pull_request,closed,,[FW][IMP] website: allow to bypass the website domain redirection,"When we go to the website preview in the Odoo backend, if the current domain used (to access the backend) is not the same as the one of the previewed website, we redirect the user, and he might have to reconnect. The same is done when using the website switcher.
Note: in the first case, the user is warned. We should probably do the same for the second case (?).

This is a problem for the Odoo support team. When they connect to a customer database upon user request, the <customer_db_name>.odoo.com address is used. But as soon as they are using the website app, they are redirected to the real website domains... where they are disconnected and cannot connect themselves.
To fix this issue, we allow setting up a session info parameter to bypass those website redirections. This is not to be done by real users: this will come with bugs (for the support team). Indeed, we are normally redirecting for a reason: many flows rely on using the right domain when visiting a specific website. Depending on what users have in their page, this could also simply make the website preview iframe crash.

task-4069779

Forward-Port-Of: odoo/odoo#193648
Forward-Port-Of: odoo/odoo#193122",fw-bot,2025-01-17 10:47:46+00:00,[],2025-01-20 15:37:34+00:00,2025-01-17 20:12:29+00:00,https://github.com/odoo/odoo/pull/194109,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2598013196, 'issue_id': 2795147369, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194109.png)](https://mergebot.odoo.com/odoo/odoo/pull/194109)', 'created_at': datetime.datetime(2025, 1, 17, 10, 47, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598013324, 'issue_id': 2795147369, 'author': 'fw-bot', 'body': '@qsm-odoo cherrypicking of pull request odoo/odoo#193122 failed.\n\nstdout:\n```\nAuto-merging addons/website/static/src/client_actions/website_preview/website_preview.js\nCONFLICT (content): Merge conflict in addons/website/static/src/client_actions/website_preview/website_preview.js\nAuto-merging addons/website/static/src/systray_items/website_switcher.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 47, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:47:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194109.png)](https://mergebot.odoo.com/odoo/odoo/pull/194109)

fw-bot (Issue Creator) on (2025-01-17 10:47:49 UTC): @qsm-odoo cherrypicking of pull request odoo/odoo#193122 failed.

stdout:
```
Auto-merging addons/website/static/src/client_actions/website_preview/website_preview.js
CONFLICT (content): Merge conflict in addons/website/static/src/client_actions/website_preview/website_preview.js
Auto-merging addons/website/static/src/systray_items/website_switcher.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795146390,pull_request,open,,[IMP] mail: share screen audio,"With this commit it will be possible to also share the audio when sharing the screen.

task-4450111
",Atovange,2025-01-17 10:47:27+00:00,[],2025-01-17 11:00:14+00:00,,https://github.com/odoo/odoo/pull/194108,"[('RD', 'research & development, internal work')]","[{'comment_id': 2598011328, 'issue_id': 2795146390, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194108.png)](https://mergebot.odoo.com/odoo/odoo/pull/194108)', 'created_at': datetime.datetime(2025, 1, 17, 10, 47, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:47:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194108.png)](https://mergebot.odoo.com/odoo/odoo/pull/194108)

"
2795139635,pull_request,closed,,"[FW][IMP] stock: add a ""Return All"" button on the picking return wizard","### Issue:

Since 57b8b2487def43a1b9c461c0fa4eb02200b5c1ef (18.0), the return picking wizard sets a default quantity of 0. This fits the new design of returns that are no longer exclusively tied to the initial delivery. However, in workflows where you are expected to return all/almost all products of a consequent picking this is both fastidious and error prone to set all the quantities to match the delivered values by hand.

### Solution:

We add a ""Return All"" button in the wizard view to allow the user to create a return whose quantity matches the delivered quantities.

opw-4416167
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192509",fw-bot,2025-01-17 10:44:54+00:00,[],2025-01-31 14:38:57+00:00,2025-01-17 14:18:31+00:00,https://github.com/odoo/odoo/pull/194107,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597995646, 'issue_id': 2795139635, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194107.png)](https://mergebot.odoo.com/odoo/odoo/pull/194107)', 'created_at': datetime.datetime(2025, 1, 17, 10, 44, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597995761, 'issue_id': 2795139635, 'author': 'fw-bot', 'body': '@lase-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193883\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 44, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598055304, 'issue_id': 2795139635, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 56, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:44:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194107.png)](https://mergebot.odoo.com/odoo/odoo/pull/194107)

fw-bot (Issue Creator) on (2025-01-17 10:44:56 UTC): @lase-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193883

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

clesgow on (2025-01-17 10:56:45 UTC): @robodoo r+

"
2795137774,pull_request,closed,,[IMP] hr_recruitment: Interface Promenade,"- made the changes for the candidate views

Task: 4463696



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",amah-odoo,2025-01-17 10:44:17+00:00,[],2025-01-27 08:42:02+00:00,2025-01-27 08:42:02+00:00,https://github.com/odoo/odoo/pull/194106,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597991974, 'issue_id': 2795137774, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194106.png)](https://mergebot.odoo.com/odoo/odoo/pull/194106)', 'created_at': datetime.datetime(2025, 1, 17, 10, 44, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:44:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194106.png)](https://mergebot.odoo.com/odoo/odoo/pull/194106)

"
2795124373,pull_request,closed,,[FIX] web: typo in mobile form view test,"This commit fixes a typo in two mobile form view's tests where ""screenLeft"" was used instead of ""scrollX"".

Note: this was detected while testing for the new Chrome's headless mode set by default on Chrome 128+.
",pparidans,2025-01-17 10:39:17+00:00,['pparidans'],2025-01-31 13:22:51+00:00,2025-01-17 13:08:47+00:00,https://github.com/odoo/odoo/pull/194105,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597959439, 'issue_id': 2795124373, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194105.png)](https://mergebot.odoo.com/odoo/odoo/pull/194105)', 'created_at': datetime.datetime(2025, 1, 17, 10, 39, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:39:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194105.png)](https://mergebot.odoo.com/odoo/odoo/pull/194105)

"
2795120761,pull_request,open,,[IMP] website: hide address bar on iOS small screens,"Purpose:
On iOS, the address bar doesn't minimize when scrolling, which can be distracting and reduce the available screen space for content. This commit addresses this issue to enhance the user experience.

Spec:
When the user begins to scroll, the address bar should minimize to provide more screen real estate for the content and reduce distractions.

On iOS devices, particularly on small screens, the address bar (or URL bar) does not automatically minimize when the user starts scrolling. This can reduce the available screen space for displaying content and can be distracting.

By using `window.scrollTo(0, 1)`, the browser is forced to scroll down by 1 pixel, which can trigger the address bar to minimize, thereby providing more screen real estate for the web content. This is a common workaround to enhance the user experience on iOS devices by ensuring that the address bar does not take up unnecessary space.

task-4177998",shsa-odoo,2025-01-17 10:37:59+00:00,[],2025-01-17 11:00:18+00:00,,https://github.com/odoo/odoo/pull/194104,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597951271, 'issue_id': 2795120761, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194104.png)](https://mergebot.odoo.com/odoo/odoo/pull/194104)', 'created_at': datetime.datetime(2025, 1, 17, 10, 38, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:38:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194104.png)](https://mergebot.odoo.com/odoo/odoo/pull/194104)

"
2795104139,pull_request,closed,,[FIX] mail: no flicker on call video stream inset,"Before this commit, during a discuss call while sharing screen and enabling camera, the inset card (= small video stream preview in bottom right of call view of the participant, either camera or screen-sharing depending on other stream being main active) was flickering.

This happens because each rendering of the call view re-renders the inset, which leads to the perceived flickers from stream being re-rendered.

The main cause of re-render comes from `setInset()` that is invoked whenever the `visibleMainCards` getter is called with inset, which is triggered on renderings like mouse-hovering on call view to display the call actions. Even when the inset card is unchanged, `setInset()` produces another object, which forces OWL to re-render the inset component.

This commit fixes the issue by having `setInset` reusing the inset data object if the inset to render refers to the same inset session.

Task-4484908",alexkuhn,2025-01-17 10:30:55+00:00,[],2025-01-18 22:44:12+00:00,2025-01-17 19:45:48+00:00,https://github.com/odoo/odoo/pull/194103,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597925787, 'issue_id': 2795104139, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194103.png)](https://mergebot.odoo.com/odoo/odoo/pull/194103)', 'created_at': datetime.datetime(2025, 1, 17, 10, 30, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598067341, 'issue_id': 2795104139, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 59, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:30:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194103.png)](https://mergebot.odoo.com/odoo/odoo/pull/194103)

alexkuhn (Issue Creator) on (2025-01-17 10:59:40 UTC): @robodoo r+

"
2795089747,pull_request,closed,,[FW][FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.

Forward-Port-Of: odoo/odoo#193716",fw-bot,2025-01-17 10:23:32+00:00,[],2025-02-03 14:06:08+00:00,2025-01-20 14:00:58+00:00,https://github.com/odoo/odoo/pull/194102,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597911362, 'issue_id': 2795089747, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194102.png)](https://mergebot.odoo.com/odoo/odoo/pull/194102)', 'created_at': datetime.datetime(2025, 1, 17, 10, 23, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597911383, 'issue_id': 2795089747, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 23, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:23:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194102.png)](https://mergebot.odoo.com/odoo/odoo/pull/194102)

fw-bot (Issue Creator) on (2025-01-17 10:23:34 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795089378,pull_request,open,,[FIX] html_editor: hide toolbar when selection is in non-contenteditable,"Before this commit:
The toolbar appeared even when selecting a contenteditable false element within the editable area. For instance, while editing a report, clicking on a non-editable element like a delivery slip would still show the toolbar.

After this commit:
The toolbar is hidden when the selection is within contenteditable false elements or consists only such elements. Exception: The toolbar remains visible for icons, as they are editable by the toolbar. Tests are added.

task-4309925




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",Jinjiu96,2025-01-17 10:23:21+00:00,[],2025-01-17 11:00:22+00:00,,https://github.com/odoo/odoo/pull/194101,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597911051, 'issue_id': 2795089378, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194101.png)](https://mergebot.odoo.com/odoo/odoo/pull/194101)', 'created_at': datetime.datetime(2025, 1, 17, 10, 23, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:23:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194101.png)](https://mergebot.odoo.com/odoo/odoo/pull/194101)

"
2795084118,pull_request,closed,,[FW][FIX] stock: correct uom write comparison,"Currently the write will check if uom.relative_uom_id != int, which will throw a UserWarning:

unsupported operand type(s) for ""=="": 'uom.uom()' == '8'

whenever `relative_uom_id` was written to. Although this error is only show via the log, it's best to not have it at all + we should probably properly enforce the check.

Also, remove `category_id` from the `keys_to_protect` since it was deleted anyways.

Followup to task: 4252043


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193815",fw-bot,2025-01-17 10:20:47+00:00,[],2025-01-31 19:53:21+00:00,2025-01-17 19:41:34+00:00,https://github.com/odoo/odoo/pull/194100,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597906284, 'issue_id': 2795084118, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194100.png)](https://mergebot.odoo.com/odoo/odoo/pull/194100)', 'created_at': datetime.datetime(2025, 1, 17, 10, 20, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597906310, 'issue_id': 2795084118, 'author': 'fw-bot', 'body': '@ticodoo @svs-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 20, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598080470, 'issue_id': 2795084118, 'author': 'fw-bot', 'body': '@ticodoo @svs-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 11, 3, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598294399, 'issue_id': 2795084118, 'author': 'ticodoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 47, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:20:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194100.png)](https://mergebot.odoo.com/odoo/odoo/pull/194100)

fw-bot (Issue Creator) on (2025-01-17 10:20:56 UTC): @ticodoo @svs-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 11:03:20 UTC): @ticodoo @svs-odoo ci/runbot failed on this forward-port PR

ticodoo on (2025-01-17 12:47:36 UTC): @robodoo r+

"
2795065930,pull_request,closed,,[IMP] stock: put delivery name in the same line as 'Delivery Note',"This commit places the name of the transfer into the header in delivery note reports.

Task ID: [4491835](https://www.odoo.com/odoo/project/966/tasks/4491835)
",lugr-odoo,2025-01-17 10:12:00+00:00,[],2025-02-06 12:07:30+00:00,2025-01-23 12:03:11+00:00,https://github.com/odoo/odoo/pull/194099,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2597888237, 'issue_id': 2795065930, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194099.png)](https://mergebot.odoo.com/odoo/odoo/pull/194099)', 'created_at': datetime.datetime(2025, 1, 17, 10, 12, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607679926, 'issue_id': 2795065930, 'author': 'ticodoo', 'body': '@lugr-odoo code is good, but in the future try to make your commit message explain _why_ you\'re making your change, not _what_ you changed (it\'s easy to see this in the code, but it\'s hard to tell why you did it). In this case a better description would have been ""Save vertical space within report by putting transfer name into delivery header""\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 16, 17, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:12:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194099.png)](https://mergebot.odoo.com/odoo/odoo/pull/194099)

ticodoo on (2025-01-22 16:17:58 UTC): @lugr-odoo code is good, but in the future try to make your commit message explain _why_ you're making your change, not _what_ you changed (it's easy to see this in the code, but it's hard to tell why you did it). In this case a better description would have been ""Save vertical space within report by putting transfer name into delivery header""

@robodoo r+

"
2795053042,pull_request,closed,,[FW][FIX] core: JS tests / tours needing focus,"Apparently in normal mode (and thus the new headless mode) Chrome does not focus the document. The `activeElement` is correctly set, but `document.hasFocus()` always returns `false` and per-element focus events are suppressed.

That makes tests testing or needing focus fail in the new headless mode as well as well as impossible (or at least frustrating) to `debug`.

Enabling ""focus emulation"", which corresponds to the ""Emulate a focused page"" UI option, seems to resolve the issue.

Fixes reliably failing tests

- `/im_livechat:ExternalTestSuite.test_external_livechat`
- `/account:TestUI.test_01_account_tax_groups_tour`
- `/account_accountant:TestBankRecWidget.test_tour_bank_rec_widget`
- `/web_editor:TestOdooEditor.test_odoo_editor_suite`

Backport of: odoo/odoo@0aaf98b77feaa15f5eb30e1c251f5765e8afbfa5

Forward-Port-Of: odoo/odoo#193993",fw-bot,2025-01-17 10:05:34+00:00,[],2025-02-01 08:58:02+00:00,2025-01-18 07:05:46+00:00,https://github.com/odoo/odoo/pull/194098,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597875233, 'issue_id': 2795053042, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194098.png)](https://mergebot.odoo.com/odoo/odoo/pull/194098)', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597875250, 'issue_id': 2795053042, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:05:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194098.png)](https://mergebot.odoo.com/odoo/odoo/pull/194098)

fw-bot (Issue Creator) on (2025-01-17 10:05:37 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795052475,pull_request,closed,,[FW][FIX] point_of_sale: deduct change from cash payment,"**Issue:**

when making a payment using 2 different payment methods (cash and bank), the change gets deducted from the bank payment not the cash payment in the invoice.

**Steps To Reproduce:**

On POS, for an order totaling $120.
    - Add a customer and ensure the ""Invoice"" box is checked.
    - pay using two payments methods bank 100$ Cash 50$
    - the change is $30, everything looks fine on the ticket on the pos.
    - Notice on the invoice on the db backend the $30 change is incorrectly deducted from the bank payment. As a result, the invoice displays: bank : $70 cash: $50

**Soltution:**
- In the `_create_payment_moves` method, ensure that cash payment method creates an `account.move` including the change amount.

opw-4076246

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#187727",fw-bot,2025-01-17 10:05:17+00:00,[],2025-02-01 08:58:06+00:00,2025-01-18 08:22:16+00:00,https://github.com/odoo/odoo/pull/194097,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2597874671, 'issue_id': 2795052475, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194097.png)](https://mergebot.odoo.com/odoo/odoo/pull/194097)', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597874696, 'issue_id': 2795052475, 'author': 'fw-bot', 'body': '@kawkb @caburj cherrypicking of pull request odoo/odoo#187727 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_payment.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_payment.py\nAuto-merging addons/point_of_sale/tests/test_point_of_sale_flow.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/tests/test_point_of_sale_flow.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598536018, 'issue_id': 2795052475, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 51, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:05:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194097.png)](https://mergebot.odoo.com/odoo/odoo/pull/194097)

fw-bot (Issue Creator) on (2025-01-17 10:05:20 UTC): @kawkb @caburj cherrypicking of pull request odoo/odoo#187727 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_payment.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_payment.py
Auto-merging addons/point_of_sale/tests/test_point_of_sale_flow.py
CONFLICT (content): Merge conflict in addons/point_of_sale/tests/test_point_of_sale_flow.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-17 14:51:09 UTC): @robodoo r+

"
2795051676,pull_request,open,,"[IMP] payment, _*: onboard user with stripe connect or razorpay","_*= sale, website_payment

Prior this commit:
Users were not invited to configure online payments after the removal of the config bar for onboarding.

Post this commit:
When online payments are activated for Sales or Invoicing, users are onboarded to configure Stripe Connect or Razorpay directly in the settings.

task-4156274

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",shrm-odoo,2025-01-17 10:04:56+00:00,[],2025-01-29 08:53:39+00:00,,https://github.com/odoo/odoo/pull/194096,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597873970, 'issue_id': 2795051676, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194096.png)](https://mergebot.odoo.com/odoo/odoo/pull/194096)', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:05:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194096.png)](https://mergebot.odoo.com/odoo/odoo/pull/194096)

"
2795051293,pull_request,closed,,[FW][FIX] spreadsheet_account: fix misleading function description,"The example of values in the description are translated in other languages. It should not because only the technical values are accepted (which are never translated)

It's not needed to backport to 16.0 because function description were not translated at that time.

Task: 4471424

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193350
Forward-Port-Of: odoo/odoo#193205",fw-bot,2025-01-17 10:04:44+00:00,[],2025-01-31 20:32:02+00:00,2025-01-17 20:12:26+00:00,https://github.com/odoo/odoo/pull/194095,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597873445, 'issue_id': 2795051293, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194095.png)](https://mergebot.odoo.com/odoo/odoo/pull/194095)', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597873460, 'issue_id': 2795051293, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:04:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194095.png)](https://mergebot.odoo.com/odoo/odoo/pull/194095)

fw-bot (Issue Creator) on (2025-01-17 10:04:46 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2795050752,pull_request,closed,,[FW][FIX] project: rely on access rules for task count in portal,"## Issue:
- Child contacts of followers were unable to access the tasks menu in the portal home, despite having access according to the access rules.

## Steps to reproduce:
1. Create a parent contact with a child contact.
2. Grant the child contact portal access.
3. Create a task with the parent contact as the customer.
4. Add the parent contact as a follower or send a message in the task chatter.
5. Log in as the child contact in the portal.
6. Notice the tasks menu is unavailable.

## Solution:
- The issue originated in `_prepare_home_portal_values`, where the task count was computed with a restrictive domain and sudo instead of relying on the access rules.
- Removed the unnecessary domain filter to let the access rules handle it.

opw-4306834



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194030
Forward-Port-Of: odoo/odoo#191601",fw-bot,2025-01-17 10:04:28+00:00,[],2025-02-01 19:34:20+00:00,2025-01-18 19:04:01+00:00,https://github.com/odoo/odoo/pull/194094,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597872893, 'issue_id': 2795050752, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194094.png)](https://mergebot.odoo.com/odoo/odoo/pull/194094)', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597872918, 'issue_id': 2795050752, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597932172, 'issue_id': 2795050752, 'author': 'fw-bot', 'body': '@kawkb @xavierbol ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 10, 34, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:04:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194094.png)](https://mergebot.odoo.com/odoo/odoo/pull/194094)

fw-bot (Issue Creator) on (2025-01-17 10:04:30 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 10:34:10 UTC): @kawkb @xavierbol ci/runbot failed on this forward-port PR

"
2795050112,pull_request,closed,,[FW] Hoot fixes,"This commit handles various fixes for the Hoot testing framework & other frontend unit test helpers.

Enterprise: https://github.com/odoo/enterprise/pull/77245

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193937",fw-bot,2025-01-17 10:04:10+00:00,[],2025-01-27 15:55:44+00:00,2025-01-27 15:55:44+00:00,https://github.com/odoo/odoo/pull/194093,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2597872340, 'issue_id': 2795050112, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194093.png)](https://mergebot.odoo.com/odoo/odoo/pull/194093)', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597872394, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo cherrypicking of pull request odoo/odoo#193937 failed.\n\n* 520d3433902666f21c11063c16282991457ad621 <- on this commit\n* 6ac4bd9fca8be56f51a0ac5a404dd1629ee0559e\n* 28f86da8b8c3c81c78c355ddc07b09149404c8be\n* ad5f372d38838a59637f1abbe4c2d7346390c29e\n* 0fe43b77f91ba6012e6b1c13571332b646a322cb\n\nstdout:\n```\nAuto-merging addons/html_editor/static/tests/odoo_collaboration.test.js\nCONFLICT (content): Merge conflict in addons/html_editor/static/tests/odoo_collaboration.test.js\nAuto-merging addons/mail/static/tests/chatter/web/follower_list_menu.test.js\nCONFLICT (content): Merge conflict in addons/mail/static/tests/chatter/web/follower_list_menu.test.js\nAuto-merging addons/mail/static/tests/discuss_app/jump_to_present.test.js\nCONFLICT (content): Merge conflict in addons/mail/static/tests/discuss_app/jump_to_present.test.js\nAuto-merging addons/mail/static/tests/mail_utils.test.js\nCONFLICT (content): Merge conflict in addons/mail/static/tests/mail_utils.test.js\nAuto-merging addons/mail/static/tests/thread/message_highlight.test.js\nCONFLICT (content): Merge conflict in addons/mail/static/tests/thread/message_highlight.test.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475659, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606118945, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608688862, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385200, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 0, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721761, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172016, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722946, 'issue_id': 2795050112, 'author': 'fw-bot', 'body': '@jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615774699, 'issue_id': 2795050112, 'author': 'jum-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 13, 32, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615774812, 'issue_id': 2795050112, 'author': 'robodoo', 'body': '@jum-odoo @mcm-odoo because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 27, 13, 32, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615781443, 'issue_id': 2795050112, 'author': 'jum-odoo', 'body': '@robodoo rebase-ff r+ delegate+', 'created_at': datetime.datetime(2025, 1, 27, 13, 35, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615781551, 'issue_id': 2795050112, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 27, 13, 35, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615781603, 'issue_id': 2795050112, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 27, 13, 35, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:04:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194093.png)](https://mergebot.odoo.com/odoo/odoo/pull/194093)

fw-bot (Issue Creator) on (2025-01-17 10:04:14 UTC): @jum-odoo @mcm-odoo cherrypicking of pull request odoo/odoo#193937 failed.

* 520d3433902666f21c11063c16282991457ad621 <- on this commit
* 6ac4bd9fca8be56f51a0ac5a404dd1629ee0559e
* 28f86da8b8c3c81c78c355ddc07b09149404c8be
* ad5f372d38838a59637f1abbe4c2d7346390c29e
* 0fe43b77f91ba6012e6b1c13571332b646a322cb

stdout:
```
Auto-merging addons/html_editor/static/tests/odoo_collaboration.test.js
CONFLICT (content): Merge conflict in addons/html_editor/static/tests/odoo_collaboration.test.js
Auto-merging addons/mail/static/tests/chatter/web/follower_list_menu.test.js
CONFLICT (content): Merge conflict in addons/mail/static/tests/chatter/web/follower_list_menu.test.js
Auto-merging addons/mail/static/tests/discuss_app/jump_to_present.test.js
CONFLICT (content): Merge conflict in addons/mail/static/tests/discuss_app/jump_to_present.test.js
Auto-merging addons/mail/static/tests/mail_utils.test.js
CONFLICT (content): Merge conflict in addons/mail/static/tests/mail_utils.test.js
Auto-merging addons/mail/static/tests/thread/message_highlight.test.js
CONFLICT (content): Merge conflict in addons/mail/static/tests/thread/message_highlight.test.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-21 02:00:55 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:18 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:01 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:00:55 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:08 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:25 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:02 UTC): @jum-odoo @mcm-odoo this forward port of odoo/odoo#193937 is awaiting action (not merged or closed).

jum-odoo on (2025-01-27 13:32:46 UTC): @robodoo r+

robodoo on (2025-01-27 13:32:49 UTC): @jum-odoo @mcm-odoo because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

jum-odoo on (2025-01-27 13:35:36 UTC): @robodoo rebase-ff r+ delegate+

robodoo on (2025-01-27 13:35:39 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-27 13:35:41 UTC): This PR is already reviewed, reviewing it again is useless.

"
2795049194,pull_request,closed,,[FW][FIX] point_of_sale: prevent error when loading order,"Before this commit, selecting an order from the order list and attempting to load it would result in an error.

opw-4251717

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193441
Forward-Port-Of: odoo/odoo#184754",fw-bot,2025-01-17 10:03:43+00:00,[],2025-02-04 18:22:05+00:00,2025-01-21 18:16:51+00:00,https://github.com/odoo/odoo/pull/194092,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2597871439, 'issue_id': 2795049194, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194092.png)](https://mergebot.odoo.com/odoo/odoo/pull/194092)', 'created_at': datetime.datetime(2025, 1, 17, 10, 3, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597871487, 'issue_id': 2795049194, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#184754 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 3, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468999, 'issue_id': 2795049194, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600471741, 'issue_id': 2795049194, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174741, 'issue_id': 2795049194, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477091, 'issue_id': 2795049194, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2605108112, 'issue_id': 2795049194, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 15, 52, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:03:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194092.png)](https://mergebot.odoo.com/odoo/odoo/pull/194092)

fw-bot (Issue Creator) on (2025-01-17 10:03:47 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#184754 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-18 02:01:40 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:34 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:45 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:17 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).

pedrambiria on (2025-01-21 15:52:59 UTC): robodoo r+

"
2795046500,pull_request,closed,,[FW][FIX] account: fix fiscalyear last day in name sequence,"When computing an invoice name placeholder dynamically the sequence used depends on the fiscal year end date but it does not account for february 29 on non-leap years, which is a [valid](https://github.com/odoo/odoo/blob/893b253644159a70d1916e3eaf25d1c8af4e92c3/addons/account/models/company.py#L294-L298) date. Here an adjustment for the day is added to safely compare a date with the fiscalyear end.


Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193924",fw-bot,2025-01-17 10:02:39+00:00,[],2025-02-06 13:55:22+00:00,2025-01-23 13:45:18+00:00,https://github.com/odoo/odoo/pull/194091,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597868284, 'issue_id': 2795046500, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194091.png)](https://mergebot.odoo.com/odoo/odoo/pull/194091)', 'created_at': datetime.datetime(2025, 1, 17, 10, 2, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597868308, 'issue_id': 2795046500, 'author': 'fw-bot', 'body': '@jjmaksoud @jbw-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194072\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 2, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597875776, 'issue_id': 2795046500, 'author': 'jjmaksoud', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 5, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598017524, 'issue_id': 2795046500, 'author': 'robodoo', 'body': ""@jjmaksoud @jbw-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 10, 48, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475702, 'issue_id': 2795046500, 'author': 'fw-bot', 'body': '@jjmaksoud @jbw-odoo this forward port of odoo/odoo#193924 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604109293, 'issue_id': 2795046500, 'author': 'fw-bot', 'body': '@jjmaksoud @jbw-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 21, 9, 11, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606118974, 'issue_id': 2795046500, 'author': 'fw-bot', 'body': '@jjmaksoud @jbw-odoo this forward port of odoo/odoo#193924 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606978093, 'issue_id': 2795046500, 'author': 'jjmaksoud', 'body': 'Hello @jbw-odoo I rebased for the runbot errors', 'created_at': datetime.datetime(2025, 1, 22, 11, 22, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606996872, 'issue_id': 2795046500, 'author': 'jbw-odoo', 'body': ""> Hello @jbw-odoo I rebased for the runbot errors\r\n\r\nYou're allowed to r+ fw ports yourself, even after a force push :)."", 'created_at': datetime.datetime(2025, 1, 22, 11, 31, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607087042, 'issue_id': 2795046500, 'author': 'jjmaksoud', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 12, 13, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 10:02:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194091.png)](https://mergebot.odoo.com/odoo/odoo/pull/194091)

fw-bot (Issue Creator) on (2025-01-17 10:02:41 UTC): @jjmaksoud @jbw-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194072

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

jjmaksoud on (2025-01-17 10:05:52 UTC): robodoo r+

robodoo on (2025-01-17 10:48:30 UTC): @jjmaksoud @jbw-odoo 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-21 02:00:58 UTC): @jjmaksoud @jbw-odoo this forward port of odoo/odoo#193924 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 09:11:03 UTC): @jjmaksoud @jbw-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-22 02:01:19 UTC): @jjmaksoud @jbw-odoo this forward port of odoo/odoo#193924 is awaiting action (not merged or closed).

jjmaksoud on (2025-01-22 11:22:59 UTC): Hello @jbw-odoo I rebased for the runbot errors

jbw-odoo on (2025-01-22 11:31:49 UTC): You're allowed to r+ fw ports yourself, even after a force push :).

jjmaksoud on (2025-01-22 12:13:05 UTC): robodoo r+

"
2795039302,pull_request,open,,[IMP] web: allow kanban record selection,"This commit brings selection feature parity in Kanban compared to the similar List view. It is now possible to select some records, by using the alt+click on a card. Once the selection mode is enabled, it is possible to select more cards by clicking on them directly.
",Iucapad,2025-01-17 09:59:26+00:00,[],2025-02-07 13:37:41+00:00,,https://github.com/odoo/odoo/pull/194090,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597861273, 'issue_id': 2795039302, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194090.png)](https://mergebot.odoo.com/odoo/odoo/pull/194090)', 'created_at': datetime.datetime(2025, 1, 17, 9, 59, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:59:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194090.png)](https://mergebot.odoo.com/odoo/odoo/pull/194090)

"
2795015827,pull_request,closed,,[FIX] website: prevent crash with empty links in the mega menu,"Steps to reproduce:

- Open the ""Menu Editor"" dialog.
- Add a ""Mega Menu Item"".
- Save the ""Menu Editor"" dialog.
- Enter ""Edit Mode"".
- Open the ""Mega Menu"".
- Select ""Images Subtitles"" as the ""Mega Menu"" template option.
- Click on the largest image on the right side of the ""Mega Menu"".
- Click the ""Create Link"" button in the image options.
- Leave the input URL empty for this new link.
- Save the page.
- A link without an ""href"" attribute is now present in the ""Mega Menu"".
- Edit the browser URL to redirect to a page that is not present in the menu; for example, add ""/test"" to the current URL. It does not matter whether the page exists or not.
- Bug: A traceback occurs.

The bug occurred because the function ""_updateActiveMenuLinks"" (introduced by this commit [1]) called ""new URL"" on an empty string, as it attempted to process a link without an href attribute.

[1]: https://github.com/odoo/odoo/commit/5be12800a59e912997fff39cec57ab70914f2485

opw-4480958",bvr-odoo,2025-01-17 09:47:57+00:00,[],2025-01-31 20:32:06+00:00,2025-01-17 20:12:27+00:00,https://github.com/odoo/odoo/pull/194089,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2597838968, 'issue_id': 2795015827, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194089.png)](https://mergebot.odoo.com/odoo/odoo/pull/194089)', 'created_at': datetime.datetime(2025, 1, 17, 9, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597871402, 'issue_id': 2795015827, 'author': 'qsm-odoo', 'body': '@robodoo delegate=SergeBayet \r\n@SergeBayet', 'created_at': datetime.datetime(2025, 1, 17, 10, 3, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598443643, 'issue_id': 2795015827, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 6, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:48:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194089.png)](https://mergebot.odoo.com/odoo/odoo/pull/194089)

qsm-odoo on (2025-01-17 10:03:44 UTC): @robodoo delegate=SergeBayet 
@SergeBayet

SergeBayet on (2025-01-17 14:06:14 UTC): @robodoo r+

"
2795014002,pull_request,open,,[IMP] stock: display src and dest warehouses in traceability reports,"This commit prefixes the warehouse names to the source and destination locations of lots in traceability reports for clarity if multiwarehouse is enabled.

Task ID: [4430229](https://www.odoo.com/odoo/project/966/tasks/4430229)

",lugr-odoo,2025-01-17 09:46:59+00:00,[],2025-01-30 08:55:05+00:00,,https://github.com/odoo/odoo/pull/194088,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597837216, 'issue_id': 2795014002, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194088.png)](https://mergebot.odoo.com/odoo/odoo/pull/194088)', 'created_at': datetime.datetime(2025, 1, 17, 9, 47, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612433716, 'issue_id': 2795014002, 'author': 'amoyaux', 'body': 'I think it would be a good idea to create a generic way to do in the _compute_display_name with a context key and use it in the report when needed', 'created_at': datetime.datetime(2025, 1, 24, 12, 37, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623880133, 'issue_id': 2795014002, 'author': 'lugr-odoo', 'body': 'I have implemented a `_compute_display_name()` that takes a context parameter to be called from the report.', 'created_at': datetime.datetime(2025, 1, 30, 8, 53, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:47:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194088.png)](https://mergebot.odoo.com/odoo/odoo/pull/194088)

amoyaux on (2025-01-24 12:37:04 UTC): I think it would be a good idea to create a generic way to do in the _compute_display_name with a context key and use it in the report when needed

lugr-odoo (Issue Creator) on (2025-01-30 08:53:15 UTC): I have implemented a `_compute_display_name()` that takes a context parameter to be called from the report.

"
2795002577,pull_request,closed,,[CLA] Update Quartile CLA,"@qrtl

-------------------------------

I confirm I have signed the CLA and read the PR guidelines at [www.odoo.com/submit-pr](http://www.odoo.com/submit-pr)
",kanda999,2025-01-17 09:41:09+00:00,[],2025-01-17 11:55:56+00:00,2025-01-17 11:55:56+00:00,https://github.com/odoo/odoo/pull/194087,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2597825894, 'issue_id': 2795002577, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194087.png)](https://mergebot.odoo.com/odoo/odoo/pull/194087)', 'created_at': datetime.datetime(2025, 1, 17, 9, 41, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597883930, 'issue_id': 2795002577, 'author': 'mart-e', 'body': ""Hello,\r\n\r\nThank you for the signature, it will soon be integrated into Odoo.\r\nFuture pull requests made on odoo will be validated by the runbot.\r\nIf you have existing PRs that are awaiting for CLA validation, don't forget to rebase your code as soon as this is merged.\r\n\r\nRegards\r\n\r\n@robodoo review+"", 'created_at': datetime.datetime(2025, 1, 17, 10, 9, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:41:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194087.png)](https://mergebot.odoo.com/odoo/odoo/pull/194087)

mart-e on (2025-01-17 10:09:50 UTC): Hello,

Thank you for the signature, it will soon be integrated into Odoo.
Future pull requests made on odoo will be validated by the runbot.
If you have existing PRs that are awaiting for CLA validation, don't forget to rebase your code as soon as this is merged.

Regards

@robodoo review+

"
2795002051,pull_request,closed,,[FW][FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.

Forward-Port-Of: odoo/odoo#193990",fw-bot,2025-01-17 09:40:54+00:00,[],2025-01-31 16:56:39+00:00,2025-01-17 16:47:52+00:00,https://github.com/odoo/odoo/pull/194086,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597825367, 'issue_id': 2795002051, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194086.png)](https://mergebot.odoo.com/odoo/odoo/pull/194086)', 'created_at': datetime.datetime(2025, 1, 17, 9, 40, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597825402, 'issue_id': 2795002051, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 9, 40, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:40:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194086.png)](https://mergebot.odoo.com/odoo/odoo/pull/194086)

fw-bot (Issue Creator) on (2025-01-17 09:40:56 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2794995062,pull_request,closed,,[FW][IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.

Forward-Port-Of: odoo/odoo#193935",fw-bot,2025-01-17 09:37:29+00:00,[],2025-01-31 20:52:55+00:00,2025-01-17 20:34:53+00:00,https://github.com/odoo/odoo/pull/194085,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2597818237, 'issue_id': 2794995062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194085.png)](https://mergebot.odoo.com/odoo/odoo/pull/194085)', 'created_at': datetime.datetime(2025, 1, 17, 9, 37, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597818306, 'issue_id': 2794995062, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193935 failed.\n\nstdout:\n```\nAuto-merging addons/iot_box_image/build_image.sh\nCONFLICT (content): Merge conflict in addons/iot_box_image/build_image.sh\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 9, 37, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598378649, 'issue_id': 2794995062, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 33, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:37:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194085.png)](https://mergebot.odoo.com/odoo/odoo/pull/194085)

fw-bot (Issue Creator) on (2025-01-17 09:37:32 UTC): @loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193935 failed.

stdout:
```
Auto-merging addons/iot_box_image/build_image.sh
CONFLICT (content): Merge conflict in addons/iot_box_image/build_image.sh

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-17 13:33:09 UTC): @robodoo r+

"
2794974458,pull_request,closed,,[FIX] hw_driver: missing injected server_url parameter,"In odoo/odoo#193082, we introduced a decorator to check if a database is connected to the IoT Box. This decorator also injects the server url into the callee if it expects it. As we missed one injection, this commit fixes it.
",loouis-t,2025-01-17 09:27:17+00:00,[],2025-01-31 13:42:32+00:00,2025-01-17 13:37:05+00:00,https://github.com/odoo/odoo/pull/194084,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597797311, 'issue_id': 2794974458, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194084.png)](https://mergebot.odoo.com/odoo/odoo/pull/194084)', 'created_at': datetime.datetime(2025, 1, 17, 9, 27, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597797982, 'issue_id': 2794974458, 'author': 'loouis-t', 'body': '@robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 17, 9, 27, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597798112, 'issue_id': 2794974458, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 17, 9, 27, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:27:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194084.png)](https://mergebot.odoo.com/odoo/odoo/pull/194084)

loouis-t (Issue Creator) on (2025-01-17 09:27:36 UTC): @robodoo fw=no

robodoo on (2025-01-17 09:27:38 UTC): Disabled forward-porting.

"
2794966797,pull_request,closed,,[FIX] web: buttonbox with only one item alignment on small screen,"On smaller screen, the statbuttons are grouped in a dropdown (the
""lightning"" icon) and displayed in two columns.

But when only one button is present, it leaves a weird empty cell next
to it.

This commit fixes it by adding an exception in CSS when only one button
is present to remove the useless column and center it.

Note: this change doesn't affect the empty cell when an odd number of
buttons are displayed.

task-4491705
",pparidans,2025-01-17 09:23:22+00:00,['pparidans'],2025-01-31 20:32:06+00:00,2025-01-17 20:12:28+00:00,https://github.com/odoo/odoo/pull/194083,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597789760, 'issue_id': 2794966797, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194083.png)](https://mergebot.odoo.com/odoo/odoo/pull/194083)', 'created_at': datetime.datetime(2025, 1, 17, 9, 23, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:23:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194083.png)](https://mergebot.odoo.com/odoo/odoo/pull/194083)

"
2794962749,pull_request,closed,,[FIX] point_of_sale: fix closing session popup,"Fix issue that was always displaying popup ""The session is being closed by another user. The page will be reloaded."" each time you close a session. Now the `login_number` is correctly send in the context and can then be used inside `close_session_from_ui` correctly.

task-id: 4485659

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-17 09:21:19+00:00,[],2025-01-31 16:56:38+00:00,2025-01-17 16:47:47+00:00,https://github.com/odoo/odoo/pull/194082,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597785687, 'issue_id': 2794962749, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194082.png)](https://mergebot.odoo.com/odoo/odoo/pull/194082)', 'created_at': datetime.datetime(2025, 1, 17, 9, 21, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598497624, 'issue_id': 2794962749, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 14, 32, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:21:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194082.png)](https://mergebot.odoo.com/odoo/odoo/pull/194082)

caburj on (2025-01-17 14:32:14 UTC): robodoo r+

"
2794947873,pull_request,closed,,[FW][FIX] website_slides: preserve order of slides when duplicating,"Steps to reproduce:

1. In elearning get a current course or create a new one.
2. Add or just reorder some of the slides/sections.
3. Duplicate the course.

After the changes applied to improve the batch call of copy in https://github.com/odoo/odoo/commit/4ac2702c31f0e95f33f9ad554e7350bef9dab8bd the values that we get after the copy are ordered by id instead of preserving the original order, so for this case we can make sure to reorder the values and mantain the proper sequence when duplicating inside copy_data().

opw-4240873

Forward-Port-Of: odoo/odoo#188333",fw-bot,2025-01-17 09:13:30+00:00,[],2025-01-31 14:38:57+00:00,2025-01-17 14:18:36+00:00,https://github.com/odoo/odoo/pull/194081,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597770423, 'issue_id': 2794947873, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194081.png)](https://mergebot.odoo.com/odoo/odoo/pull/194081)', 'created_at': datetime.datetime(2025, 1, 17, 9, 13, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597770443, 'issue_id': 2794947873, 'author': 'fw-bot', 'body': '@ephoniz @flch-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194056\n* odoo/odoo#194055\n* odoo/odoo#194049\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 9, 13, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597779015, 'issue_id': 2794947873, 'author': 'flch-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 17, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597835913, 'issue_id': 2794947873, 'author': 'robodoo', 'body': ""@ephoniz @flch-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 9, 46, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:13:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194081.png)](https://mergebot.odoo.com/odoo/odoo/pull/194081)

fw-bot (Issue Creator) on (2025-01-17 09:13:32 UTC): @ephoniz @flch-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194056
* odoo/odoo#194055
* odoo/odoo#194049

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

flch-odoo on (2025-01-17 09:17:57 UTC): @robodoo r+

robodoo on (2025-01-17 09:46:24 UTC): @ephoniz @flch-odoo 'ci/runbot' failed on this reviewed PR.

"
2794941597,pull_request,closed,,[FW][FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.

Forward-Port-Of: odoo/odoo#193716",fw-bot,2025-01-17 09:10:17+00:00,[],2025-02-03 15:05:18+00:00,2025-01-20 14:50:23+00:00,https://github.com/odoo/odoo/pull/194080,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597764090, 'issue_id': 2794941597, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194080.png)](https://mergebot.odoo.com/odoo/odoo/pull/194080)', 'created_at': datetime.datetime(2025, 1, 17, 9, 10, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597764114, 'issue_id': 2794941597, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 9, 10, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:10:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194080.png)](https://mergebot.odoo.com/odoo/odoo/pull/194080)

fw-bot (Issue Creator) on (2025-01-17 09:10:19 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2794925020,pull_request,closed,,[FIX] stock: allow creation of lotless quant with quantity,"### Steps to reproduce:

- Create a storable product tracked by lot/serial
- Click on ""On Hand""
- Create a new line with 10 ""On Hand Quantity"" WITHOUT lot/serial
- Go back to the product: The ""On Hand"" quantity is still at 0.
- Click back to the ""On Hand"": the quantity of the line is back to 0.

### Cause of the issue:

When a new line is created and the ""On Hand Quantity"" is edited from the `view_stock_quant_tree` view, we actually performs a create of the stock.quant followed by a write on the `inventory_quantity_auto_apply`. At this point the 'quantity' field of the new quant is not set and the `action_apply_inventory` of the `inventory_quantity_auto_apply` is expected to create and validate a move line in order to update our quant quantities here:
https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L230-L235 However, this steps will never be performed as we return the call before the `_apply_invetory` because our quant is set without lots: https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L447-L449 https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L465-L477

### Master Fix:

We remove the wizzard.

opw-4428050
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lase-odoo,2025-01-17 09:01:24+00:00,[],2025-01-31 15:13:22+00:00,2025-01-31 15:13:22+00:00,https://github.com/odoo/odoo/pull/194079,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('18.2', None)]","[{'comment_id': 2597746582, 'issue_id': 2794925020, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194079.png)](https://mergebot.odoo.com/odoo/odoo/pull/194079)', 'created_at': datetime.datetime(2025, 1, 17, 9, 1, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597748366, 'issue_id': 2794925020, 'author': 'lase-odoo', 'body': 'Stable fix: https://github.com/odoo/odoo/pull/194068', 'created_at': datetime.datetime(2025, 1, 17, 9, 2, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624592561, 'issue_id': 2794925020, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 13, 58, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624596420, 'issue_id': 2794925020, 'author': 'robodoo', 'body': '@lase-odoo @Whenrow linked pull request(s) odoo/upgrade#7088 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 30, 14, 0, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624605433, 'issue_id': 2794925020, 'author': 'robodoo', 'body': ""@lase-odoo @Whenrow 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 30, 14, 3, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624920234, 'issue_id': 2794925020, 'author': 'KangOl', 'body': '> [!WARNING]  \r\n> Some CI checks were not successful.\r\n\r\nCan you please rebase all your branches to ensure they are up-to-date?', 'created_at': datetime.datetime(2025, 1, 30, 16, 7, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627042839, 'issue_id': 2794925020, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 31, 12, 1, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 09:01:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194079.png)](https://mergebot.odoo.com/odoo/odoo/pull/194079)

lase-odoo (Issue Creator) on (2025-01-17 09:02:20 UTC): Stable fix: https://github.com/odoo/odoo/pull/194068

Whenrow on (2025-01-30 13:58:41 UTC): robodoo r+

robodoo on (2025-01-30 14:00:14 UTC): @lase-odoo @Whenrow linked pull request(s) odoo/upgrade#7088 not ready. Linked PRs are not staged until all of them are ready.

robodoo on (2025-01-30 14:03:55 UTC): @lase-odoo @Whenrow 'ci/upgrade_enterprise' failed on this reviewed PR.

KangOl on (2025-01-30 16:07:28 UTC): Can you please rebase all your branches to ensure they are up-to-date?

Whenrow on (2025-01-31 12:01:12 UTC): robodoo r+

"
2794920746,pull_request,closed,,[FW][FIX] spreadsheet_account: fix misleading function description,"The example of values in the description are translated in other languages. It should not because only the technical values are accepted (which are never translated)

It's not needed to backport to 16.0 because function description were not translated at that time.

Task: 4471424

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193350
Forward-Port-Of: odoo/odoo#193205",fw-bot,2025-01-17 08:59:10+00:00,[],2025-01-31 15:34:07+00:00,2025-01-17 15:29:05+00:00,https://github.com/odoo/odoo/pull/194078,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597741818, 'issue_id': 2794920746, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194078.png)](https://mergebot.odoo.com/odoo/odoo/pull/194078)', 'created_at': datetime.datetime(2025, 1, 17, 8, 59, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597741839, 'issue_id': 2794920746, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 8, 59, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:59:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194078.png)](https://mergebot.odoo.com/odoo/odoo/pull/194078)

fw-bot (Issue Creator) on (2025-01-17 08:59:11 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2794917323,pull_request,open,,[FIX] point_of_sale: auto apply fiscal position,"Before this commit the auto apply of a fiscal position wasn't implemented in pos.

This commit implements the auto apply of a fiscal position by using the _get_fiscal_position method from account fiscal position to get the fiscal position of each customer. In order to keep the fiscal positions applied to the customers not selectable by the cashier, only the fiscal positions selected in the pos settings are shown in the fiscal position action menu.

Task-4318016
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",loukwets,2025-01-17 08:57:20+00:00,[],2025-01-31 15:46:05+00:00,,https://github.com/odoo/odoo/pull/194077,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597738739, 'issue_id': 2794917323, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194077.png)](https://mergebot.odoo.com/odoo/odoo/pull/194077)', 'created_at': datetime.datetime(2025, 1, 17, 8, 57, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:57:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194077.png)](https://mergebot.odoo.com/odoo/odoo/pull/194077)

"
2794915183,pull_request,closed,,[FW][FIX] analytic: force analytic distribution title display nowrap,"**Steps to reproduce:**
- Configure `Analytic Accounting` via `Accounting` module's settings;
- Go to `Analytic Plans` through `Accounting / Configuration / Analytic Accounting`:
    - Select any record and change its name for a really long one;

![Capture d’écran 2025-01-02 à 15 21 40](https://github.com/user-attachments/assets/365a7089-9bb4-4215-8b7d-59ac85abc952)

- Go to `Expenses` app:
    - Select any expense in the list;
    - Open the `Analytic Distribution` widget.

___
**Issue:**
Long `Analytic Plans` names are wrapped and may lead to unreadable texts.

![Capture d’écran 2025-01-02 à 15 22 28](https://github.com/user-attachments/assets/b5ddbd88-1209-4640-a0ce-bf9396871038)

*(from the ticket - Odoo 17)*

![imagem](https://github.com/user-attachments/assets/2f3f0543-b08b-4f16-a4a0-4547369eb478)

___
**Expected:**
A smooth UI should display `Analytic Plans` as when accessed through an invoice line from `Accounting` app.

![Capture d’écran 2025-01-02 à 15 23 16](https://github.com/user-attachments/assets/ef0aa2fd-e8c5-47ba-8c39-ce4538b85380)

___
**Cause:**
The `Analytic Distribution` widget style of the invoice view inherits from the list renderer, forcing a `nowrap` style while the expense view of the same widget does not.

___
**Fix:**
Force a `nowrap` style for that specific widget.

![Capture d’écran 2025-01-02 à 15 22 55](https://github.com/user-attachments/assets/2af26b22-63e2-43fc-b636-f739a0aa094d)

___
opw-4357324

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192203",fw-bot,2025-01-17 08:56:11+00:00,[],2025-02-02 23:46:50+00:00,2025-01-19 22:06:27+00:00,https://github.com/odoo/odoo/pull/194076,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597736481, 'issue_id': 2794915183, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194076.png)](https://mergebot.odoo.com/odoo/odoo/pull/194076)', 'created_at': datetime.datetime(2025, 1, 17, 8, 56, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597736493, 'issue_id': 2794915183, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 8, 56, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597892805, 'issue_id': 2794915183, 'author': 'fw-bot', 'body': '@barracudapps @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 17, 10, 14, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601017027, 'issue_id': 2794915183, 'author': 'barracudapps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 20, 50, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:56:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194076.png)](https://mergebot.odoo.com/odoo/odoo/pull/194076)

fw-bot (Issue Creator) on (2025-01-17 08:56:13 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 10:14:20 UTC): @barracudapps @jbw-odoo ci/runbot failed on this forward-port PR

barracudapps on (2025-01-19 20:50:42 UTC): @robodoo r+

"
2794910316,pull_request,closed,,[FIX] mail: draggable participant cards on mobile,"Before this commit, when dragging participant cards on mobile they will get dragged off screen.
1. Open discuss on mobile
2. Get into a call
3. Move the participant cards -> they will disappear

This happens because the `drag` function gets called without checking if the participant card is in the inset state (the state in which it can be moved around).
This commit fixes the issue by checking that the component is in that state before being able to drag it.

task-4491597",Atovange,2025-01-17 08:53:30+00:00,[],2025-01-18 22:43:18+00:00,2025-01-17 17:37:18+00:00,https://github.com/odoo/odoo/pull/194075,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597731889, 'issue_id': 2794910316, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194075.png)](https://mergebot.odoo.com/odoo/odoo/pull/194075)', 'created_at': datetime.datetime(2025, 1, 17, 8, 53, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:53:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194075.png)](https://mergebot.odoo.com/odoo/odoo/pull/194075)

"
2794894524,pull_request,closed,,[FIX] mail: users appearing as offline,"When a user disconnects, a message is sent on the bus. If another device is active, he will correct the user status. However, it can happen that this message is lost. For instance, when the bus table is cleared while the user is disconnected. Other parts of the code will update the user status, but the status will never be corrected.

This PR react to the user status changes to solve this issue.

opw-4484966

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",tsm-odoo,2025-01-17 08:44:37+00:00,[],2025-01-18 22:44:04+00:00,2025-01-17 18:58:05+00:00,https://github.com/odoo/odoo/pull/194074,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2597716345, 'issue_id': 2794894524, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194074.png)](https://mergebot.odoo.com/odoo/odoo/pull/194074)', 'created_at': datetime.datetime(2025, 1, 17, 8, 44, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598171276, 'issue_id': 2794894524, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 36, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598186908, 'issue_id': 2794894524, 'author': 'robodoo', 'body': ""@tsm-odoo @alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 11, 45, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:44:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194074.png)](https://mergebot.odoo.com/odoo/odoo/pull/194074)

alexkuhn on (2025-01-17 11:36:32 UTC): @robodoo r+

robodoo on (2025-01-17 11:45:34 UTC): @tsm-odoo @alexkuhn 'ci/runbot' failed on this reviewed PR.

"
2794880236,pull_request,closed,,[FW][FIX] account: fix fiscalyear last day in name sequence,"When computing an invoice name placeholder dynamically the sequence used depends on the fiscal year end date but it does not account for february 29 on non-leap years, which is a [valid](https://github.com/odoo/odoo/blob/893b253644159a70d1916e3eaf25d1c8af4e92c3/addons/account/models/company.py#L294-L298) date. Here an adjustment for the day is added to safely compare a date with the fiscalyear end.


Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193924",fw-bot,2025-01-17 08:36:30+00:00,[],2025-01-31 12:12:00+00:00,2025-01-17 12:07:18+00:00,https://github.com/odoo/odoo/pull/194072,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597702398, 'issue_id': 2794880236, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194072.png)](https://mergebot.odoo.com/odoo/odoo/pull/194072)', 'created_at': datetime.datetime(2025, 1, 17, 8, 36, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597702418, 'issue_id': 2794880236, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 8, 36, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:36:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194072.png)](https://mergebot.odoo.com/odoo/odoo/pull/194072)

fw-bot (Issue Creator) on (2025-01-17 08:36:32 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2794864797,pull_request,open,,[IMP] partner_autocomplete: additional info on partner update,"targeted versions: >=16

We can enrich an existing partner but only when we create it we get a message with the additional info. Until now, it remained hidden in the additional_info field. Now we can follow the same approach as when we create the contact and post it to the partner thread.

cc @Tecnativa TT52584


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",chienandalu,2025-01-17 08:27:31+00:00,[],2025-01-17 08:30:00+00:00,,https://github.com/odoo/odoo/pull/194071,[],"[{'comment_id': 2597687316, 'issue_id': 2794864797, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194071.png)](https://mergebot.odoo.com/odoo/odoo/pull/194071)', 'created_at': datetime.datetime(2025, 1, 17, 8, 27, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:27:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194071.png)](https://mergebot.odoo.com/odoo/odoo/pull/194071)

"
2794864796,pull_request,closed,,"[MERGE] mail, various: improve sending flow (author, notified followers)","Rationale

Improve post and discussion flows to look more like classic email flows.
Notable make explicit recipients, who is going to be notified, who
are authors and replies going to land, ...

Specifications: Bcc in composer

When being in monorecord comment mode, compute 'Bcc' as being the
followers about to be notified of the message. This is done using
the same heuristics as mail.thread, aka calling '_get_recipients_data'
using the record, message_type, message_subtype. That way followers
are correctly computed. Remove partners being in partner_ids, as they
are already in explicit 'To' recipients.

Specifications: author name in Reply-To

New reply-to form should be '""Author Name"" <notification@domain.com>'.
Remove computation based on record name, company, ... Customers expect
to reply to people, not on records.

Part of Task-4273479: [mail] Email-like recipients",tde-banana-odoo,2025-01-17 08:27:31+00:00,[],2025-02-03 20:56:06+00:00,2025-01-20 20:54:30+00:00,https://github.com/odoo/odoo/pull/194070,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2597687334, 'issue_id': 2794864796, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194070.png)](https://mergebot.odoo.com/odoo/odoo/pull/194070)', 'created_at': datetime.datetime(2025, 1, 17, 8, 27, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602317393, 'issue_id': 2794864796, 'author': 'tde-banana-odoo', 'body': '@robodoo r+ rebase-merge', 'created_at': datetime.datetime(2025, 1, 20, 12, 36, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602317496, 'issue_id': 2794864796, 'author': 'robodoo', 'body': 'Merge method set to rebase and merge, using the PR as merge commit message.', 'created_at': datetime.datetime(2025, 1, 20, 12, 36, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602317518, 'issue_id': 2794864796, 'author': 'robodoo', 'body': '@tde-banana-odoo linked pull request(s) odoo/enterprise#77353 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 20, 12, 36, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:27:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194070.png)](https://mergebot.odoo.com/odoo/odoo/pull/194070)

tde-banana-odoo (Issue Creator) on (2025-01-20 12:36:34 UTC): @robodoo r+ rebase-merge

robodoo on (2025-01-20 12:36:36 UTC): Merge method set to rebase and merge, using the PR as merge commit message.

robodoo on (2025-01-20 12:36:37 UTC): @tde-banana-odoo linked pull request(s) odoo/enterprise#77353 not ready. Linked PRs are not staged until all of them are ready.

"
2794861782,pull_request,closed,,[FW][FIX] certificate: show an error if the private key cannot be loaded,"When the private key has an issue if we attempt to sing an invoice we may get a traceback in the frontend. We can instead show an error and include the key that's failing.

Example traceback if the key is invalid:
```
  File ""/home/odoo/src/odoo/18.0/addons/certificate/models/key.py"", line 206, in _sign_with_key
    private_key = serialization.load_pem_private_key(base64.b64decode(pem_key), pwd)
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 83, in b64decode
    s = _bytes_from_decode_data(s)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 45, in _bytes_from_decode_data
    raise TypeError(""argument should be a bytes-like object or ASCII ""
TypeError: argument should be a bytes-like object or ASCII string, not 'bool'
```

Steps to reproduce:
1. Install l10n_sa_edi
3. Alter the key in a way that makes it fail to load, e.g. upload a garbage text file as a key (note the error in the warning)
2. Make an invoice to ARAMCO partner
4. Click in the `Process now` link at the top of the invoice

We get the traceback.

This issue was seen during upgrades due to improper migration of SA keys (already solved). Still the UX here is suboptimal. This patch proposes to show an error that can help users understand the issue. We already show the error in the keys management interface, but the user working in invoices may be unaware of the issue with the key.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193931",fw-bot,2025-01-17 08:25:41+00:00,[],2025-01-31 12:44:24+00:00,2025-01-17 12:43:56+00:00,https://github.com/odoo/odoo/pull/194069,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597684355, 'issue_id': 2794861782, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194069.png)](https://mergebot.odoo.com/odoo/odoo/pull/194069)', 'created_at': datetime.datetime(2025, 1, 17, 8, 25, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597684377, 'issue_id': 2794861782, 'author': 'fw-bot', 'body': '@aj-fuentes @rugo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194024\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 8, 25, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597696740, 'issue_id': 2794861782, 'author': 'rugo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 33, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:25:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194069.png)](https://mergebot.odoo.com/odoo/odoo/pull/194069)

fw-bot (Issue Creator) on (2025-01-17 08:25:44 UTC): @aj-fuentes @rugo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194024

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

rugo-odoo on (2025-01-17 08:33:13 UTC): @robodoo r+

"
2794847319,pull_request,closed,,[FIX] stock: allow creation of lotless quant with quantity,"### Steps to reproduce:

- Create a storable product tracked by lot/serial
- Click on ""On Hand""
- Create a new line with 10 ""On Hand Quantity"" WITHOUT lot/serial
- Go back to the product: The ""On Hand"" quantity is still at 0.
- Click back to the ""On Hand"": the quantity of the line is back to 0.

### Cause of the issue:

When a new line is created and the ""On Hand Quantity"" is edited from the `view_stock_quant_tree` view, we actually performs a create of the stock.quant followed by a write on the `inventory_quantity_auto_apply`. At this point the 'quantity' field of the new quant is not set and the `action_apply_inventory` of the `inventory_quantity_auto_apply` is expected to create and validate a move line in order to update our quant quantities here:
https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L230-L235 However, this steps will never be performed as we return the call before the `_apply_invetory` because our quant is set without lots: https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L447-L449 https://github.com/odoo/odoo/blob/e041e890b91e5bc515e1827683f073781788f253/addons/stock/models/stock_quant.py#L465-L477

### Fix:

Since the return value of the `action_apply_inventory` is only expected to be used in the `view_stock_quant_tree_editable` (Inventory adjustment ) where it is not possible to set the `inventory_quantity_auto_apply` inventory, we skip this return in case the calls has been performed from setting the `inventory_quantity_auto_apply` and proceed with the `_apply_inventory`.

opw-4428050
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lase-odoo,2025-01-17 08:17:02+00:00,[],2025-01-30 18:12:55+00:00,2025-01-30 18:12:55+00:00,https://github.com/odoo/odoo/pull/194068,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2597670311, 'issue_id': 2794847319, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194068.png)](https://mergebot.odoo.com/odoo/odoo/pull/194068)', 'created_at': datetime.datetime(2025, 1, 17, 8, 17, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597747602, 'issue_id': 2794847319, 'author': 'lase-odoo', 'body': 'Master fix: https://github.com/odoo/odoo/pull/194079\r\n\r\nrobodoo up to saas-18.1', 'created_at': datetime.datetime(2025, 1, 17, 9, 1, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597747694, 'issue_id': 2794847319, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-18.1'."", 'created_at': datetime.datetime(2025, 1, 17, 9, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624584425, 'issue_id': 2794847319, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 13, 55, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:17:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194068.png)](https://mergebot.odoo.com/odoo/odoo/pull/194068)

lase-odoo (Issue Creator) on (2025-01-17 09:01:58 UTC): Master fix: https://github.com/odoo/odoo/pull/194079

robodoo up to saas-18.1

robodoo on (2025-01-17 09:02:01 UTC): Forward-porting to 'saas-18.1'.

Whenrow on (2025-01-30 13:55:23 UTC): robodoo r+

"
2794840983,pull_request,closed,,[FIX] mail: rename mail template to avoid duplicate names,"Currently, there are two mail templates named ""Settings: New User Invite"" in the records. To avoid duplication, we will rename the template used to welcome portal users who register as internal users to ""Settings: New Portal Sign Up"".

Follow up of #188391

Task-4481862

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",julien-banken,2025-01-17 08:13:05+00:00,[],2025-01-31 11:44:14+00:00,2025-01-17 11:26:25+00:00,https://github.com/odoo/odoo/pull/194067,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597664098, 'issue_id': 2794840983, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194067.png)](https://mergebot.odoo.com/odoo/odoo/pull/194067)', 'created_at': datetime.datetime(2025, 1, 17, 8, 13, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597690711, 'issue_id': 2794840983, 'author': 'tde-banana-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 29, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:13:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194067.png)](https://mergebot.odoo.com/odoo/odoo/pull/194067)

tde-banana-odoo on (2025-01-17 08:29:39 UTC): @robodoo r+

"
2794838749,pull_request,open,,[IMP][REM] html_editor: add JS migration to standard and remove /draw,"This PR adds the migration system previously implemented in Knowledge to update embedded components inside the html field/viewer, see odoo/enterprise@0df669159aaa1a9631ab12a68758bf78954071f7. It also makes use of it by removing the /draw command and thus migrating the associated components in html fields to a simple link to the excalidraw.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",thjo-odoo,2025-01-17 08:11:44+00:00,[],2025-02-04 08:04:22+00:00,,https://github.com/odoo/odoo/pull/194066,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597662080, 'issue_id': 2794838749, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194066.png)](https://mergebot.odoo.com/odoo/odoo/pull/194066)', 'created_at': datetime.datetime(2025, 1, 17, 8, 11, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:11:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194066.png)](https://mergebot.odoo.com/odoo/odoo/pull/194066)

"
2794824254,pull_request,closed,,[IMP] fleet: keep odometers driver history,"This PR allows to have a different driver per odometer in order to keep an history of odometers with their driver. By default, when a new odometer is created, the current driver of the car is set.

task-3995630
",romaincarlier4,2025-01-17 08:02:57+00:00,[],2025-02-05 09:15:21+00:00,2025-02-04 23:36:11+00:00,https://github.com/odoo/odoo/pull/194065,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2597647780, 'issue_id': 2794824254, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194065.png)](https://mergebot.odoo.com/odoo/odoo/pull/194065)', 'created_at': datetime.datetime(2025, 1, 17, 8, 2, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633287680, 'issue_id': 2794824254, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 4, 9, 7, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 08:02:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194065.png)](https://mergebot.odoo.com/odoo/odoo/pull/194065)

tivisse on (2025-02-04 09:07:14 UTC): @robodoo r+

"
2794791644,pull_request,open,,[FIX] tools: extract _t in template strings,"When using the `_t()` function in Javascript as variable part in a template string, the term inside didn't get extracted.

This commit adapts the extractor to support that and meanwhile fixes some small issues.",dylankiss,2025-01-17 07:41:59+00:00,[],2025-01-20 12:00:05+00:00,,https://github.com/odoo/odoo/pull/194064,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597617806, 'issue_id': 2794791644, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194064.png)](https://mergebot.odoo.com/odoo/odoo/pull/194064)', 'created_at': datetime.datetime(2025, 1, 17, 7, 42, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602230059, 'issue_id': 2794791644, 'author': 'oomsveta', 'body': ""Some parts of the code can be cleaned up thanks to your commit :)\r\nhttps://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/web/static/src/webclient/user_menu/user_menu_items.js#L50\r\nhttps://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/iap_mail/static/src/js/services/iap_notification_service.js#L29\r\nhttps://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/website_forum/static/src/js/website_forum.js#L317\r\nhttps://github.com/odoo/enterprise/blob/cb638e8360c615f202e626c163c98bd97e80706f/web_enterprise/static/src/webclient/share_url/share_url.js#L24\r\n(last one is from Enterprise repository, that's why the preview doesn't work)"", 'created_at': datetime.datetime(2025, 1, 20, 11, 57, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 07:42:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194064.png)](https://mergebot.odoo.com/odoo/odoo/pull/194064)

oomsveta on (2025-01-20 11:57:05 UTC): Some parts of the code can be cleaned up thanks to your commit :)
https://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/web/static/src/webclient/user_menu/user_menu_items.js#L50
https://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/iap_mail/static/src/js/services/iap_notification_service.js#L29
https://github.com/odoo/odoo/blob/bb9bf90cda42b5cccb072d4c7ded506f9764ccc1/addons/website_forum/static/src/js/website_forum.js#L317
https://github.com/odoo/enterprise/blob/cb638e8360c615f202e626c163c98bd97e80706f/web_enterprise/static/src/webclient/share_url/share_url.js#L24
(last one is from Enterprise repository, that's why the preview doesn't work)

"
2794763506,pull_request,open,,[IMP] html_editor: add loader for history review transition,"### Description of the issue/feature this PR addresses:

- The history review screen blocks and flickers when switching history.

### Desired behavior after PR is merged:

- Added a loading spinner in the content area of the dialog, on the right side, to enhance the transition.
- Disabled actions to prevent interaction during history review.

task-4050257",adch-odoo,2025-01-17 07:23:12+00:00,[],2025-01-30 09:36:19+00:00,,https://github.com/odoo/odoo/pull/194063,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597593757, 'issue_id': 2794763506, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194063.png)](https://mergebot.odoo.com/odoo/odoo/pull/194063)', 'created_at': datetime.datetime(2025, 1, 17, 7, 23, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 07:23:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194063.png)](https://mergebot.odoo.com/odoo/odoo/pull/194063)

"
2794686460,pull_request,closed,,[FIX] web_editor: website editor unresponsive issue,"Steps to Reproduce:

* Go to Website --> Edit Mode.
* Drag and drop the form snippet.
* Click inside the submit button such that the entire label ""Submit"" is
  selected.
* Press the right arrow key.
* The website will become unresponsive.


**Changes made:**

Assign `previousSelection` with the following properties:
 `anchorNode: selection.anchorNode`
 `anchorOffset: selection.anchorOffset`
 `focusNode: selection.focusNode`
 `focusOffset: selection.focusOffset`

**Reason:**

The original code attempted to spread the Selection object into previousSelection using **{...selection}**, which is incorrect since **the Selection object is not iterable**. As a result, `previousSelection` was never updated correctly, potentially causing the while loop to run indefinitely.

This fix manually extracts key properties—anchorNode, anchorOffset, focusNode, and focusOffset—from the Selection object and stores them in a plain object. This ensures that previousSelection updates properly, allowing the `hasSelectionChanged` function to function as expected.

By implementing this change, we prevent infinite loops and ensure accurate selection tracking, improving the stability and functionality of the text editor.

task-4471656",shsa-odoo,2025-01-17 06:29:05+00:00,[],2025-02-07 16:01:02+00:00,2025-02-07 16:01:02+00:00,https://github.com/odoo/odoo/pull/194061,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597529244, 'issue_id': 2794686460, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194061.png)](https://mergebot.odoo.com/odoo/odoo/pull/194061)', 'created_at': datetime.datetime(2025, 1, 17, 6, 29, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615348168, 'issue_id': 2794686460, 'author': 'shsa-odoo', 'body': '@msh-odoo Changes have been made.', 'created_at': datetime.datetime(2025, 1, 27, 10, 17, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643114382, 'issue_id': 2794686460, 'author': 'bso-odoo', 'body': '@robodoo delegate=bvr-odoo', 'created_at': datetime.datetime(2025, 2, 7, 14, 35, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643116608, 'issue_id': 2794686460, 'author': 'bvr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 7, 14, 36, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 06:29:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194061.png)](https://mergebot.odoo.com/odoo/odoo/pull/194061)

shsa-odoo (Issue Creator) on (2025-01-27 10:17:36 UTC): @msh-odoo Changes have been made.

bso-odoo on (2025-02-07 14:35:17 UTC): @robodoo delegate=bvr-odoo

bvr-odoo on (2025-02-07 14:36:18 UTC): @robodoo r+

"
2794679898,pull_request,closed,,[FW][17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193790
Forward-Port-Of: odoo/odoo#193522",fw-bot,2025-01-17 06:24:50+00:00,[],2025-01-31 11:44:12+00:00,2025-01-17 11:26:08+00:00,https://github.com/odoo/odoo/pull/194060,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2597524519, 'issue_id': 2794679898, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194060.png)](https://mergebot.odoo.com/odoo/odoo/pull/194060)', 'created_at': datetime.datetime(2025, 1, 17, 6, 24, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597524526, 'issue_id': 2794679898, 'author': 'fw-bot', 'body': '@yostashiro @jco-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 6, 24, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597525706, 'issue_id': 2794679898, 'author': 'vin-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 6, 25, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 06:24:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194060.png)](https://mergebot.odoo.com/odoo/odoo/pull/194060)

fw-bot (Issue Creator) on (2025-01-17 06:24:52 UTC): @yostashiro @jco-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vin-odoo on (2025-01-17 06:25:56 UTC): @robodoo r+

"
2794673063,pull_request,open,,[ADD] l10n_vn: short/long term accounts,"With the addition of financial reports where
the distinction between short and long term
is done, we add new default accounts to cover
these needs.

task-2492680

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",vin-odoo,2025-01-17 06:19:23+00:00,[],2025-02-04 01:46:54+00:00,,https://github.com/odoo/odoo/pull/194059,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597518746, 'issue_id': 2794673063, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194059.png)](https://mergebot.odoo.com/odoo/odoo/pull/194059)', 'created_at': datetime.datetime(2025, 1, 17, 6, 19, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 06:19:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194059.png)](https://mergebot.odoo.com/odoo/odoo/pull/194059)

"
2794571558,pull_request,open,,[FIX] point_of_sale: preset wrong time in back-end,"Steps:
===
- Open Restaurant in POS system.
- Create an order with preset as `Takeout` and select desired time.
- validate it.
- open that order in backend.
- Observe the takeout date & time—it differs from the originally selected time.

Issue:
===
- The POS system stores the preset_time in local time directly to the database, but the backend consider it as UTC, leading to mismatched times when displayed.

Fix:
===
- The frontend now sets preset_time in UTC before saving, ensuring consistent time handling across the system.

Task: 4477402
Related: odoo/enterprise#77558  
",djip-odoo,2025-01-17 04:52:23+00:00,[],2025-02-03 13:11:17+00:00,,https://github.com/odoo/odoo/pull/194058,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597431623, 'issue_id': 2794571558, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194058.png)](https://mergebot.odoo.com/odoo/odoo/pull/194058)', 'created_at': datetime.datetime(2025, 1, 17, 4, 52, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626511859, 'issue_id': 2794571558, 'author': 'caburj', 'body': ""When a field in the backend is declared as DateTime, we instantiate it as luxon.DateTime object in js. Let's keep it consistent that way -- in js, it should be a DateTime or null/undefined/false.\r\n\r\n1. Make sure that `preset_time` is only `DateTime or null/undefined/false` in js.\r\n2. If you want to set its value, make sure that the new value is DateTime. If it's coming from `sql_datetime` which I believe a `string`, you should either call `parseDatetime` or `deserializeDatetime` to convert it to a `DateTime` object.\r\n\r\nCheck the `@web/core/l10n/dates.js` module for helper functions."", 'created_at': datetime.datetime(2025, 1, 31, 7, 51, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626812123, 'issue_id': 2794571558, 'author': 'djip-odoo', 'body': '@caburj \r\nIf `preset_time` is set as a `DateTime` object, an error occurs when clicking the **Order** button or validating the payment because the backend expects a string in the format `yyyy-MM-dd HH:mm`.\r\n![err_1_preset_time](https://github.com/user-attachments/assets/97b917f0-0255-4b1b-b33a-051fe9f00e91)\r\n![err_2_preset_time](https://github.com/user-attachments/assets/b42c1e60-88f2-4f28-b838-e4e53ab5c935)\r\n\r\nMoreover bellow line also set as string, in the file for date https://github.com/odoo/odoo/blob/7d88106ea35e6fbff789cc385c62982ba81c5256/addons/point_of_sale/static/src/app/models/pos_order.js#L25', 'created_at': datetime.datetime(2025, 1, 31, 10, 1, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 04:52:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194058.png)](https://mergebot.odoo.com/odoo/odoo/pull/194058)

caburj on (2025-01-31 07:51:59 UTC): When a field in the backend is declared as DateTime, we instantiate it as luxon.DateTime object in js. Let's keep it consistent that way -- in js, it should be a DateTime or null/undefined/false.

1. Make sure that `preset_time` is only `DateTime or null/undefined/false` in js.
2. If you want to set its value, make sure that the new value is DateTime. If it's coming from `sql_datetime` which I believe a `string`, you should either call `parseDatetime` or `deserializeDatetime` to convert it to a `DateTime` object.

Check the `@web/core/l10n/dates.js` module for helper functions.

djip-odoo (Issue Creator) on (2025-01-31 10:01:25 UTC): @caburj 
If `preset_time` is set as a `DateTime` object, an error occurs when clicking the **Order** button or validating the payment because the backend expects a string in the format `yyyy-MM-dd HH:mm`.
![err_1_preset_time](https://github.com/user-attachments/assets/97b917f0-0255-4b1b-b33a-051fe9f00e91)
![err_2_preset_time](https://github.com/user-attachments/assets/b42c1e60-88f2-4f28-b838-e4e53ab5c935)

Moreover bellow line also set as string, in the file for date https://github.com/odoo/odoo/blob/7d88106ea35e6fbff789cc385c62982ba81c5256/addons/point_of_sale/static/src/app/models/pos_order.js#L25

"
2794543999,pull_request,open,,[FIX] point_of_sale: resolve download furniture shop scenario issue,"Steps to reproduce:
--------------------------
- Start db without demo data.
- Click on furniture shop.

Issue:
--------
- There will be a TB while loading the furniture scenario.

Cause:
---------
- The user used in demo data doesn't have an email and it tries to post message in chatter.

Fix:
-----
- We have assigned a demo email to the user to avoid TB and also have the logs in chatter.

Task: 4486094
",sjai-odoo,2025-01-17 04:35:22+00:00,[],2025-02-04 07:32:22+00:00,,https://github.com/odoo/odoo/pull/194057,"[('RD', 'research & development, internal work')]","[{'comment_id': 2597417387, 'issue_id': 2794543999, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194057.png)](https://mergebot.odoo.com/odoo/odoo/pull/194057)', 'created_at': datetime.datetime(2025, 1, 17, 4, 35, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626494587, 'issue_id': 2794543999, 'author': 'caburj', 'body': 'There should be a reason why starting in saas-18.1 the default email of the user_admin is removed. Can you find out why? I\'d prefer a fix that takes into account in our code that sending a message can fail that it should be handled. For this example, I believe the ""opening of register"" is the issue so we should try catch it and handle/ignore the message error.', 'created_at': datetime.datetime(2025, 1, 31, 7, 40, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626674407, 'issue_id': 2794543999, 'author': 'sjai-odoo', 'body': ""Hi @caburj ,\r\nIt was removed as it can't be used in business flow and that admin was created in data file but we are adding it in demo, so won't that be fine, or we can give user a redirect warning to set the email in the user form when we click on that scenario.\r\nOr directly bypass that without showing error just using try catch as you suggested.\r\n\r\nWhat should we do?\r\nHere the referance of that commit: https://github.com/odoo/odoo/commit/441679648ada6d9ea3c2b762b6d19c1795f90517\r\n![image](https://github.com/user-attachments/assets/b8d2c154-38ac-4889-b929-d0907ea7d424)"", 'created_at': datetime.datetime(2025, 1, 31, 8, 50, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626788486, 'issue_id': 2794543999, 'author': 'caburj', 'body': 'Is there a way to put a default email when calling message_post? Otherwise, we can actually proceed with your current solution.', 'created_at': datetime.datetime(2025, 1, 31, 9, 49, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626829154, 'issue_id': 2794543999, 'author': 'sjai-odoo', 'body': 'Yes, we can do that by just adding an example mail to email_from parameter ![image](https://github.com/user-attachments/assets/fbc9e1dd-dea5-4a9f-99b3-d308f8d7020a)\r\nbut there are many message_post so should i just write it in the method from where it tries ti post while loading scenario?', 'created_at': datetime.datetime(2025, 1, 31, 10, 9, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626835036, 'issue_id': 2794543999, 'author': 'caburj', 'body': '> Yes, we can do that by just adding an example mail to email_from parameter ![image](https://private-user-images.githubusercontent.com/157008535/408515008-fbc9e1dd-dea5-4a9f-99b3-d308f8d7020a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzgzMTg0NTIsIm5iZiI6MTczODMxODE1MiwicGF0aCI6Ii8xNTcwMDg1MzUvNDA4NTE1MDA4LWZiYzllMWRkLWRlYTUtNGE5Zi05OWIzLWQzMDhmOGQ3MDIwYS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTMxJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDEzMVQxMDA5MTJaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lM2U1YTk0YTUyMGIwNTkwNjA2NDYzNmJlNzYwMmYzNDZhNzJjZWM0NmZlNjcxYTlkYjg5MmY4YjkxMzRmOWQzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.Kl5tlW68gL0GbPQXARlzISWYEOBWwD0TRrdv7un8_4o) but there are many message_post so should i just write it in the method from where it tries ti post while loading scenario?\r\n\r\nWhat we want is to be able to specify a ""default"" (fallback) email add such that if user\'s email ad can\'t be found, there will be a fallback. Specifying ""email_from"" will override the user\'s real email ad.', 'created_at': datetime.datetime(2025, 1, 31, 10, 12, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626883140, 'issue_id': 2794543999, 'author': 'sjai-odoo', 'body': 'Than i think we can apply same logic which is applied in data here in python\r\n![image](https://github.com/user-attachments/assets/104fb673-c335-4180-9bd8-44e8a259a008)', 'created_at': datetime.datetime(2025, 1, 31, 10, 35, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-17 04:35:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194057.png)](https://mergebot.odoo.com/odoo/odoo/pull/194057)

caburj on (2025-01-31 07:40:05 UTC): There should be a reason why starting in saas-18.1 the default email of the user_admin is removed. Can you find out why? I'd prefer a fix that takes into account in our code that sending a message can fail that it should be handled. For this example, I believe the ""opening of register"" is the issue so we should try catch it and handle/ignore the message error.

sjai-odoo (Issue Creator) on (2025-01-31 08:50:41 UTC): Hi @caburj ,
It was removed as it can't be used in business flow and that admin was created in data file but we are adding it in demo, so won't that be fine, or we can give user a redirect warning to set the email in the user form when we click on that scenario.
Or directly bypass that without showing error just using try catch as you suggested.

What should we do?
Here the referance of that commit: https://github.com/odoo/odoo/commit/441679648ada6d9ea3c2b762b6d19c1795f90517
![image](https://github.com/user-attachments/assets/b8d2c154-38ac-4889-b929-d0907ea7d424)

caburj on (2025-01-31 09:49:31 UTC): Is there a way to put a default email when calling message_post? Otherwise, we can actually proceed with your current solution.

sjai-odoo (Issue Creator) on (2025-01-31 10:09:10 UTC): Yes, we can do that by just adding an example mail to email_from parameter ![image](https://github.com/user-attachments/assets/fbc9e1dd-dea5-4a9f-99b3-d308f8d7020a)
but there are many message_post so should i just write it in the method from where it tries ti post while loading scenario?

caburj on (2025-01-31 10:12:01 UTC): What we want is to be able to specify a ""default"" (fallback) email add such that if user's email ad can't be found, there will be a fallback. Specifying ""email_from"" will override the user's real email ad.

sjai-odoo (Issue Creator) on (2025-01-31 10:35:52 UTC): Than i think we can apply same logic which is applied in data here in python
![image](https://github.com/user-attachments/assets/104fb673-c335-4180-9bd8-44e8a259a008)

"
2793958602,pull_request,closed,,[FW][FIX] website_slides: preserve order of slides when duplicating,"Steps to reproduce:

1. In elearning get a current course or create a new one.
2. Add or just reorder some of the slides/sections.
3. Duplicate the course.

After the changes applied to improve the batch call of copy in https://github.com/odoo/odoo/commit/4ac2702c31f0e95f33f9ad554e7350bef9dab8bd the values that we get after the copy are ordered by id instead of preserving the original order, so for this case we can make sure to reorder the values and mantain the proper sequence when duplicating inside copy_data().

opw-4240873

Forward-Port-Of: odoo/odoo#188333",fw-bot,2025-01-16 23:03:59+00:00,[],2025-01-31 12:11:59+00:00,2025-01-17 12:07:11+00:00,https://github.com/odoo/odoo/pull/194056,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2597083732, 'issue_id': 2793958602, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194056.png)](https://mergebot.odoo.com/odoo/odoo/pull/194056)', 'created_at': datetime.datetime(2025, 1, 16, 23, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597083759, 'issue_id': 2793958602, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 23, 4, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597129614, 'issue_id': 2793958602, 'author': 'fw-bot', 'body': '@ephoniz @flch-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 23, 40, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597683983, 'issue_id': 2793958602, 'author': 'Ephoniz', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 8, 25, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597684037, 'issue_id': 2793958602, 'author': 'robodoo', 'body': '@ephoniz retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 17, 8, 25, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 23:04:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194056.png)](https://mergebot.odoo.com/odoo/odoo/pull/194056)

fw-bot (Issue Creator) on (2025-01-16 23:04:01 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 23:40:57 UTC): @ephoniz @flch-odoo ci/runbot failed on this forward-port PR

Ephoniz on (2025-01-17 08:25:28 UTC): robodoo retry

robodoo on (2025-01-17 08:25:31 UTC): @ephoniz retry makes no sense when the PR is not in error.

"
2793832214,pull_request,closed,,[FW][FIX] website_slides: preserve order of slides when duplicating,"Steps to reproduce:

1. In elearning get a current course or create a new one.
2. Add or just reorder some of the slides/sections.
3. Duplicate the course.

After the changes applied to improve the batch call of copy in https://github.com/odoo/odoo/commit/4ac2702c31f0e95f33f9ad554e7350bef9dab8bd the values that we get after the copy are ordered by id instead of preserving the original order, so for this case we can make sure to reorder the values and mantain the proper sequence when duplicating inside copy_data().

opw-4240873

Forward-Port-Of: odoo/odoo#188333",fw-bot,2025-01-16 21:42:09+00:00,[],2025-01-31 11:44:13+00:00,2025-01-17 11:26:24+00:00,https://github.com/odoo/odoo/pull/194055,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596951499, 'issue_id': 2793832214, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194055.png)](https://mergebot.odoo.com/odoo/odoo/pull/194055)', 'created_at': datetime.datetime(2025, 1, 16, 21, 42, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596951511, 'issue_id': 2793832214, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 21, 42, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 21:42:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194055.png)](https://mergebot.odoo.com/odoo/odoo/pull/194055)

fw-bot (Issue Creator) on (2025-01-16 21:42:11 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793771715,pull_request,closed,,[FW][FIX] mrp: only show current company calendar in workcenter,"Steps to reproduce the bug:
- Create a workcenter:

Problem:
All the resource calendar from all the companies are displayed.

opw-4478393

Forward-Port-Of: odoo/odoo#193930
Forward-Port-Of: odoo/odoo#193634",fw-bot,2025-01-16 21:09:24+00:00,[],2025-01-30 15:32:36+00:00,2025-01-30 15:32:36+00:00,https://github.com/odoo/odoo/pull/194054,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2596892929, 'issue_id': 2793771715, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194054.png)](https://mergebot.odoo.com/odoo/odoo/pull/194054)', 'created_at': datetime.datetime(2025, 1, 16, 21, 9, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596892977, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#193634 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_workcenter.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 21, 9, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173146, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476045, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119263, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689150, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385412, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721831, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172145, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617541537, 'issue_id': 2793771715, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624320285, 'issue_id': 2793771715, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 12, 3, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 21:09:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194054.png)](https://mergebot.odoo.com/odoo/odoo/pull/194054)

fw-bot (Issue Creator) on (2025-01-16 21:09:27 UTC): @DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#193634 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_workcenter.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:28 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:15 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:30 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:10 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:05 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:19 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:36 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:29 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

DjamelTouati on (2025-01-30 12:03:50 UTC): robodoo r+

"
2793745578,pull_request,closed,,"[FW][REV] website,_*: revert set task partner from form email","_* = website_crm, website_project, website_hr_recruitment


- This commit reverts [#128964 ](https://github.com/odoo/odoo/pull/128964)because the feature has been made in generic instead of doing it in project and helpdesk which is caused some issues in other models using website form feature. Also, the feature adds more complexity to just add a warning in the task description and in a message linked to the task generated to notify the user the task has been generated from an external submission (when the email set in the website form is not the one set on the user who submits the form) since the feature used the email set to search the partner to set on the task.

task-4295363

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193823
Forward-Port-Of: odoo/odoo#192322",fw-bot,2025-01-16 20:51:46+00:00,[],2025-01-31 10:24:48+00:00,2025-01-17 10:10:09+00:00,https://github.com/odoo/odoo/pull/194053,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2596865489, 'issue_id': 2793745578, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194053.png)](https://mergebot.odoo.com/odoo/odoo/pull/194053)', 'created_at': datetime.datetime(2025, 1, 16, 20, 51, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596865560, 'issue_id': 2793745578, 'author': 'fw-bot', 'body': '@mjvi-odoo @xavierbol cherrypicking of pull request odoo/odoo#192322 failed.\n\nstdout:\n```\nAuto-merging addons/website/controllers/form.py\nCONFLICT (content): Merge conflict in addons/website/controllers/form.py\nAuto-merging addons/website/i18n/website.pot\nAuto-merging addons/website_crm/tests/test_website_crm.py\nAuto-merging addons/website_hr_recruitment/controllers/main.py\nCONFLICT (content): Merge conflict in addons/website_hr_recruitment/controllers/main.py\nAuto-merging addons/website_project/controllers/main.py\nCONFLICT (content): Merge conflict in addons/website_project/controllers/main.py\nAuto-merging addons/website_project/i18n/website_project.pot\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 51, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597598681, 'issue_id': 2793745578, 'author': 'mjvi-odoo', 'body': '@robodoo  r+', 'created_at': datetime.datetime(2025, 1, 17, 7, 27, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 20:51:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194053.png)](https://mergebot.odoo.com/odoo/odoo/pull/194053)

fw-bot (Issue Creator) on (2025-01-16 20:51:51 UTC): @mjvi-odoo @xavierbol cherrypicking of pull request odoo/odoo#192322 failed.

stdout:
```
Auto-merging addons/website/controllers/form.py
CONFLICT (content): Merge conflict in addons/website/controllers/form.py
Auto-merging addons/website/i18n/website.pot
Auto-merging addons/website_crm/tests/test_website_crm.py
Auto-merging addons/website_hr_recruitment/controllers/main.py
CONFLICT (content): Merge conflict in addons/website_hr_recruitment/controllers/main.py
Auto-merging addons/website_project/controllers/main.py
CONFLICT (content): Merge conflict in addons/website_project/controllers/main.py
Auto-merging addons/website_project/i18n/website_project.pot

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mjvi-odoo on (2025-01-17 07:27:13 UTC): @robodoo  r+

"
2793730177,pull_request,closed,,[FW][FIX] account: draft bill entries in partner ledger,"### Before
When creating a new vendor bill through Vendors > 'Example Vendor 1'> Vendor Bills (magic button), if the vendor was changed to 'Example Vendor 2' and the draft saved then it would show up under the 'Example Vendor 1' in the Partner Ledger instead of under the correct 'Example Vendor 2'. 

This is due to the partner_id being defined in the context when going through the 'Example Vendor 1' view. 

### Now
During the creation of the account move lines we use a context without the default_partner_id.

The Partner Ledger now shows the draft bill entry under the right vendor.

opw-4407709

Forward-Port-Of: odoo/odoo#193842
Forward-Port-Of: odoo/odoo#192567",fw-bot,2025-01-16 20:41:42+00:00,[],2025-01-31 20:32:13+00:00,2025-01-17 20:12:33+00:00,https://github.com/odoo/odoo/pull/194052,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596850071, 'issue_id': 2793730177, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194052.png)](https://mergebot.odoo.com/odoo/odoo/pull/194052)', 'created_at': datetime.datetime(2025, 1, 16, 20, 41, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596850128, 'issue_id': 2793730177, 'author': 'fw-bot', 'body': '@aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_move.py\nAuto-merging addons/account/tests/test_account_move_out_invoice.py\nCONFLICT (content): Merge conflict in addons/account/tests/test_account_move_out_invoice.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 41, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598715271, 'issue_id': 2793730177, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 20, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 20:41:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194052.png)](https://mergebot.odoo.com/odoo/odoo/pull/194052)

fw-bot (Issue Creator) on (2025-01-16 20:41:45 UTC): @aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.

stdout:
```
Auto-merging addons/account/models/account_move.py
Auto-merging addons/account/tests/test_account_move_out_invoice.py
CONFLICT (content): Merge conflict in addons/account/tests/test_account_move_out_invoice.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-17 16:20:43 UTC): @robodoo r+

"
2793725039,pull_request,closed,,[FW][FIX] hr_holidays_attendance: not deduct extra hours on draft,"Before this commit, when a time off request based on extra hours was set to draft, a new overtime record with negative duration was created.

This commit makes sure that the record is only created when the time off request is in the state confirm or validate.

task-4096548


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192166
Forward-Port-Of: odoo/odoo#185962",fw-bot,2025-01-16 20:38:23+00:00,[],2025-01-31 12:44:19+00:00,2025-01-17 12:43:33+00:00,https://github.com/odoo/odoo/pull/194051,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596845100, 'issue_id': 2793725039, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194051.png)](https://mergebot.odoo.com/odoo/odoo/pull/194051)', 'created_at': datetime.datetime(2025, 1, 16, 20, 38, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596845114, 'issue_id': 2793725039, 'author': 'fw-bot', 'body': '@khah-odoo @tivisse this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194045\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 38, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597741493, 'issue_id': 2793725039, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 20:38:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194051.png)](https://mergebot.odoo.com/odoo/odoo/pull/194051)

fw-bot (Issue Creator) on (2025-01-16 20:38:25 UTC): @khah-odoo @tivisse this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194045

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-17 08:59:00 UTC): @robodoo r+

"
2793704986,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-16 20:25:05+00:00,[],2025-01-31 15:34:04+00:00,2025-01-17 15:28:54+00:00,https://github.com/odoo/odoo/pull/194050,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596824707, 'issue_id': 2793704986, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194050.png)](https://mergebot.odoo.com/odoo/odoo/pull/194050)', 'created_at': datetime.datetime(2025, 1, 16, 20, 25, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596824758, 'issue_id': 2793704986, 'author': 'fw-bot', 'body': '@kawkb @smetl cherrypicking of pull request odoo/odoo#177929 failed.\n\nstdout:\n```\nAuto-merging addons/account/i18n/account.pot\nAuto-merging addons/account/wizard/accrued_orders.py\nAuto-merging addons/purchase/tests/test_accrued_purchase_orders.py\nCONFLICT (content): Merge conflict in addons/purchase/tests/test_accrued_purchase_orders.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598298181, 'issue_id': 2793704986, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 49, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 20:25:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194050.png)](https://mergebot.odoo.com/odoo/odoo/pull/194050)

fw-bot (Issue Creator) on (2025-01-16 20:25:08 UTC): @kawkb @smetl cherrypicking of pull request odoo/odoo#177929 failed.

stdout:
```
Auto-merging addons/account/i18n/account.pot
Auto-merging addons/account/wizard/accrued_orders.py
Auto-merging addons/purchase/tests/test_accrued_purchase_orders.py
CONFLICT (content): Merge conflict in addons/purchase/tests/test_accrued_purchase_orders.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-17 12:49:35 UTC): @robodoo r+

"
2793703449,pull_request,closed,,[FW][FIX] website_slides: preserve order of slides when duplicating,"Steps to reproduce:

1. In elearning get a current course or create a new one.
2. Add or just reorder some of the slides/sections.
3. Duplicate the course.

After the changes applied to improve the batch call of copy in https://github.com/odoo/odoo/commit/4ac2702c31f0e95f33f9ad554e7350bef9dab8bd the values that we get after the copy are ordered by id instead of preserving the original order, so for this case we can make sure to reorder the values and mantain the proper sequence when duplicating inside copy_data().

opw-4240873

Forward-Port-Of: odoo/odoo#188333",fw-bot,2025-01-16 20:24:06+00:00,[],2025-01-31 11:14:19+00:00,2025-01-17 11:02:02+00:00,https://github.com/odoo/odoo/pull/194049,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596823283, 'issue_id': 2793703449, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194049.png)](https://mergebot.odoo.com/odoo/odoo/pull/194049)', 'created_at': datetime.datetime(2025, 1, 16, 20, 24, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596823302, 'issue_id': 2793703449, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 24, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 20:24:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194049.png)](https://mergebot.odoo.com/odoo/odoo/pull/194049)

fw-bot (Issue Creator) on (2025-01-16 20:24:08 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793661026,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-16 19:57:39+00:00,[],2025-01-31 15:10:43+00:00,2025-01-17 15:08:23+00:00,https://github.com/odoo/odoo/pull/194048,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596779892, 'issue_id': 2793661026, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194048.png)](https://mergebot.odoo.com/odoo/odoo/pull/194048)', 'created_at': datetime.datetime(2025, 1, 16, 19, 57, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596779951, 'issue_id': 2793661026, 'author': 'fw-bot', 'body': '@lvsz @chevalierv cherrypicking of pull request odoo/odoo#194005 failed.\n\nstdout:\n```\nAuto-merging addons/website_sale/models/product_product.py\nCONFLICT (content): Merge conflict in addons/website_sale/models/product_product.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 57, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598168152, 'issue_id': 2793661026, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 34, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:57:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194048.png)](https://mergebot.odoo.com/odoo/odoo/pull/194048)

fw-bot (Issue Creator) on (2025-01-16 19:57:43 UTC): @lvsz @chevalierv cherrypicking of pull request odoo/odoo#194005 failed.

stdout:
```
Auto-merging addons/website_sale/models/product_product.py
CONFLICT (content): Merge conflict in addons/website_sale/models/product_product.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-17 11:34:39 UTC): robodoo r+

"
2793648518,pull_request,closed,,[FW][FIX] base_import: stop importing when everything has been imported,"Versions
--------
- 17.0+

Steps
-----
1. Create a pricelist with 200 price rules;
2. export pricelist to xlsx;
3. delete original pricelist;
4. import pricelist, setting batch size to 100.

Test files ready for import:
- [200_products.xlsx](https://github.com/user-attachments/files/17848187/200_products.xlsx)
- [200_pricelist_rules.xlsx](https://github.com/user-attachments/files/17848188/200_pricelist_rules.xlsx)

Issue
-----
Pricelist is imported with 400 price rules.

Cause
-----
The back-end signals there's nothing left to import by having `nextrow` be falsy[^1]. The front-end ignores this, and continues looping until it's taken as many steps as it initially planned.

The upfront `totalSteps` calculation is too high when an imported record has a number of nested relational records that's larger than the batch size.

Solution
--------
If the ORM returns a falsy `nextrow` value, call `stopImport`.

opw-4164056

[^1]: see note on f58368210c9c

Forward-Port-Of: odoo/odoo#193992
Forward-Port-Of: odoo/odoo#188092",fw-bot,2025-01-16 19:49:46+00:00,[],2025-02-05 23:11:20+00:00,2025-01-22 23:04:36+00:00,https://github.com/odoo/odoo/pull/194047,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596766720, 'issue_id': 2793648518, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194047.png)](https://mergebot.odoo.com/odoo/odoo/pull/194047)', 'created_at': datetime.datetime(2025, 1, 16, 19, 49, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596766734, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 49, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596811959, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 20, 17, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600470506, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174524, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476986, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604027342, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 21, 8, 55, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604031099, 'issue_id': 2793648518, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 8, 56, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604185422, 'issue_id': 2793648518, 'author': 'robodoo', 'body': ""@lvsz @iucapad 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 21, 9, 43, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606120110, 'issue_id': 2793648518, 'author': 'fw-bot', 'body': '@lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 2, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:49:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194047.png)](https://mergebot.odoo.com/odoo/odoo/pull/194047)

fw-bot (Issue Creator) on (2025-01-16 19:49:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 20:17:05 UTC): @lvsz @iucapad ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-19 02:02:28 UTC): @lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:34 UTC): @lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:11 UTC): @lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 08:55:51 UTC): @lvsz @iucapad this PR was modified / updated and has become a normal PR. It must be merged directly.

lvsz on (2025-01-21 08:56:32 UTC): robodoo r+

robodoo on (2025-01-21 09:43:31 UTC): @lvsz @iucapad 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-22 02:02:08 UTC): @lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).

"
2793648042,pull_request,closed,,[FW][FIX] mrp: only show current company calendar in workcenter,"Steps to reproduce the bug:
- Create a workcenter:

Problem:
All the resource calendar from all the companies are displayed.

opw-4478393

Forward-Port-Of: odoo/odoo#193930
Forward-Port-Of: odoo/odoo#193634",fw-bot,2025-01-16 19:49:29+00:00,[],2025-01-30 12:54:13+00:00,2025-01-30 12:54:13+00:00,https://github.com/odoo/odoo/pull/194046,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596766031, 'issue_id': 2793648042, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194046.png)](https://mergebot.odoo.com/odoo/odoo/pull/194046)', 'created_at': datetime.datetime(2025, 1, 16, 19, 49, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596766093, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 49, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596892943, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow the next pull request (odoo/odoo#194054) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 21, 9, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173108, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476010, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119207, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689186, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385447, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721837, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172165, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617541628, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621884329, 'issue_id': 2793648042, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 29, 14, 56, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2622101505, 'issue_id': 2793648042, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 16, 19, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2622798786, 'issue_id': 2793648042, 'author': 'robodoo', 'body': '@DjamelTouati @Whenrow staging failed: ci/runbot on eb4cf40f8ad6496cd416df4ea34af75f62c5947b (view more at https://runbot.odoo.com/runbot/build/74164266)', 'created_at': datetime.datetime(2025, 1, 29, 20, 40, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623926777, 'issue_id': 2793648042, 'author': 'DjamelTouati', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 30, 9, 14, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:49:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194046.png)](https://mergebot.odoo.com/odoo/odoo/pull/194046)

fw-bot (Issue Creator) on (2025-01-16 19:49:31 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 21:09:26 UTC): @DjamelTouati @Whenrow the next pull request (odoo/odoo#194054) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:26 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:14 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:29 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:11 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:07 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:21 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:38 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:31 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#193634 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 14:56:07 UTC): @DjamelTouati @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.

DjamelTouati on (2025-01-29 16:19:29 UTC): robodoo r+

robodoo on (2025-01-29 20:40:57 UTC): @DjamelTouati @Whenrow staging failed: ci/runbot on eb4cf40f8ad6496cd416df4ea34af75f62c5947b (view more at https://runbot.odoo.com/runbot/build/74164266)

DjamelTouati on (2025-01-30 09:14:02 UTC): robodoo retry

"
2793611262,pull_request,closed,,[FW][FIX] hr_holidays_attendance: not deduct extra hours on draft,"Before this commit, when a time off request based on extra hours was set to draft, a new overtime record with negative duration was created.

This commit makes sure that the record is only created when the time off request is in the state confirm or validate.

task-4096548


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192166
Forward-Port-Of: odoo/odoo#185962",fw-bot,2025-01-16 19:33:17+00:00,[],2025-01-31 12:11:56+00:00,2025-01-17 12:06:55+00:00,https://github.com/odoo/odoo/pull/194045,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596686034, 'issue_id': 2793611262, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194045.png)](https://mergebot.odoo.com/odoo/odoo/pull/194045)', 'created_at': datetime.datetime(2025, 1, 16, 19, 33, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596686192, 'issue_id': 2793611262, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 33, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:33:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194045.png)](https://mergebot.odoo.com/odoo/odoo/pull/194045)

fw-bot (Issue Creator) on (2025-01-16 19:33:19 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793610238,pull_request,closed,,[FW][FIX] point_of_sale: set opening amount to last session's closing balance,"- Resolved issue where the ""expected opening"" amount in the POS session chatter incorrectly displayed the manually modified amount instead of the previous closing balance.
- Adjusted the sequence of setting `cash_register_balance_start` to maintain consistent chatter messages with accurate deltas.

task-id: 4471816

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193926",fw-bot,2025-01-16 19:32:51+00:00,[],2025-02-03 20:56:00+00:00,2025-01-20 20:18:35+00:00,https://github.com/odoo/odoo/pull/194044,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596683537, 'issue_id': 2793610238, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194044.png)](https://mergebot.odoo.com/odoo/odoo/pull/194044)', 'created_at': datetime.datetime(2025, 1, 16, 19, 32, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596683676, 'issue_id': 2793610238, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 32, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596783204, 'issue_id': 2793610238, 'author': 'fw-bot', 'body': '@manv-afk @adgu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 19, 59, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598729454, 'issue_id': 2793610238, 'author': 'fw-bot', 'body': '@manv-afk @adgu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 16, 27, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172755, 'issue_id': 2793610238, 'author': 'fw-bot', 'body': '@manv-afk @adgu-odoo this forward port of odoo/odoo#193926 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602871020, 'issue_id': 2793610238, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 16, 42, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:32:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194044.png)](https://mergebot.odoo.com/odoo/odoo/pull/194044)

fw-bot (Issue Creator) on (2025-01-16 19:32:53 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 19:59:40 UTC): @manv-afk @adgu-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 16:27:32 UTC): @manv-afk @adgu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-20 02:01:09 UTC): @manv-afk @adgu-odoo this forward port of odoo/odoo#193926 is awaiting action (not merged or closed).

manv-afk on (2025-01-20 16:42:41 UTC): @robodoo r+

"
2793609267,pull_request,closed,,"[FW][FIX] account,l10n_it_edi: Batch Print & Send when manual sending method.","## Commit 1: 
### [FIX] account: Batch invoice sending when partner on ""Download""

Context:
In 18.0, all batch/multiple invoice sending are processed asynchronously, we never directly
download the generated PDF/XML files. The sending method that is used depends on what is
set on the partner.

Problem:
If you set your partner to ""Download"" by default, in the batch Send & Print, it
will display ""You are about to send: x invoice(s) Download"". While it's actually
not downloading, only generating. In 18.1 we changed this to ""Manual"" which is better but
doesn't go well in a sentence.

Solution:
Let's align everything to ""Manually"" in batch sending to avoid confusion.

Before:
![image](https://github.com/user-attachments/assets/9048c5bd-0e5f-4c25-a816-3c941bec7fce)

After:
![image](https://github.com/user-attachments/assets/8a4201f4-e4be-4c0d-b801-83815b337352)


opw-4315079

## Commit 2: 
###[IMP] l10n_it_edi: Add possibility to download in batch XML FatturaPA
Context:
In 18.0, when sending invoices in batch, we never download a zip of all generated
files (PDF, XML) since we always process invoices asynchronously with the partner's
sending method set on the partner's form.

Problem:
It's no longer possible to retrieve all XML Fattura PA at once.

Solution:
Add a button under the ""Print/Download"" button to download them all.

opw-4315079

## Commit 3:
### [FIX] l10n_it_edi: Fix error message display in Print & Send
The italian error dict does not comply to the default format expected
by the generic Print & Send. It displays the key of the error
instead of the message.
Before:
![it_error_msg_pre](https://github.com/user-attachments/assets/22707d0d-95b4-4b74-b31f-b4bc3ba334fd)
After:
![it_error_msg_post](https://github.com/user-attachments/assets/e32eef16-14d5-4462-96cc-c8e5ede5feb7)

task-no

Forward-Port-Of: odoo/odoo#192473",fw-bot,2025-01-16 19:32:26+00:00,[],2025-02-03 13:39:11+00:00,2025-01-20 13:19:22+00:00,https://github.com/odoo/odoo/pull/194043,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596682091, 'issue_id': 2793609267, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194043.png)](https://mergebot.odoo.com/odoo/odoo/pull/194043)', 'created_at': datetime.datetime(2025, 1, 16, 19, 32, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596682200, 'issue_id': 2793609267, 'author': 'fw-bot', 'body': '@clbr-odoo @rugo-odoo cherrypicking of pull request odoo/odoo#192473 failed.\n\n* 8467681a1cbb7ed8176b5d59254f3241cb2fd5be <- on this commit\n* f8f2d9358978df045c02d9ab3676c3e67cb4eb75\n* bd7bac5ed5c64f8405ca70a6e3c2a1b62dc48518\n\nstdout:\n```\nAuto-merging addons/account/i18n/account.pot\nAuto-merging addons/account/tests/test_account_move_send.py\nCONFLICT (content): Merge conflict in addons/account/tests/test_account_move_send.py\nAuto-merging addons/account/wizard/account_move_send_batch_wizard.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 32, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173966, 'issue_id': 2793609267, 'author': 'fw-bot', 'body': '@clbr-odoo @rugo-odoo this forward port of odoo/odoo#192473 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601611213, 'issue_id': 2793609267, 'author': 'clbr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 7, 25, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:32:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194043.png)](https://mergebot.odoo.com/odoo/odoo/pull/194043)

fw-bot (Issue Creator) on (2025-01-16 19:32:28 UTC): @clbr-odoo @rugo-odoo cherrypicking of pull request odoo/odoo#192473 failed.

* 8467681a1cbb7ed8176b5d59254f3241cb2fd5be <- on this commit
* f8f2d9358978df045c02d9ab3676c3e67cb4eb75
* bd7bac5ed5c64f8405ca70a6e3c2a1b62dc48518

stdout:
```
Auto-merging addons/account/i18n/account.pot
Auto-merging addons/account/tests/test_account_move_send.py
CONFLICT (content): Merge conflict in addons/account/tests/test_account_move_send.py
Auto-merging addons/account/wizard/account_move_send_batch_wizard.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:02:06 UTC): @clbr-odoo @rugo-odoo this forward port of odoo/odoo#192473 is awaiting action (not merged or closed).

clbr-odoo on (2025-01-20 07:25:06 UTC): @robodoo r+

"
2793607343,pull_request,closed,,"[FW][REV] website,_*: revert set task partner from form email","_* = website_crm, website_project, website_hr_recruitment


- This commit reverts [#128964 ](https://github.com/odoo/odoo/pull/128964)because the feature has been made in generic instead of doing it in project and helpdesk which is caused some issues in other models using website form feature. Also, the feature adds more complexity to just add a warning in the task description and in a message linked to the task generated to notify the user the task has been generated from an external submission (when the email set in the website form is not the one set on the user who submits the form) since the feature used the email set to search the partner to set on the task.

task-4295363

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193823
Forward-Port-Of: odoo/odoo#192322",fw-bot,2025-01-16 19:31:38+00:00,[],2025-01-31 10:24:51+00:00,2025-01-17 10:20:38+00:00,https://github.com/odoo/odoo/pull/194042,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596678413, 'issue_id': 2793607343, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194042.png)](https://mergebot.odoo.com/odoo/odoo/pull/194042)', 'created_at': datetime.datetime(2025, 1, 16, 19, 31, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596678479, 'issue_id': 2793607343, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 31, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596865508, 'issue_id': 2793607343, 'author': 'fw-bot', 'body': '@mjvi-odoo @xavierbol the next pull request (odoo/odoo#194053) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 51, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597651895, 'issue_id': 2793607343, 'author': 'xavierbol', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 5, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:31:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194042.png)](https://mergebot.odoo.com/odoo/odoo/pull/194042)

fw-bot (Issue Creator) on (2025-01-16 19:31:42 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 20:51:49 UTC): @mjvi-odoo @xavierbol the next pull request (odoo/odoo#194053) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

xavierbol on (2025-01-17 08:05:32 UTC): robodoo r+

"
2793605995,pull_request,closed,,[FW][IMP] hw_drivers: better check for server url,"Lots of methods need to know the associated database url. It is sometimes checked in the caller method, and sometimes inside of the called method itself.

We now use a decorator that checks it for us.

Task: 4391509

Forward-Port-Of: odoo/odoo#193082",fw-bot,2025-01-16 19:30:59+00:00,[],2025-01-31 14:38:53+00:00,2025-01-17 14:18:07+00:00,https://github.com/odoo/odoo/pull/194041,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2596674998, 'issue_id': 2793605995, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194041.png)](https://mergebot.odoo.com/odoo/odoo/pull/194041)', 'created_at': datetime.datetime(2025, 1, 16, 19, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596675116, 'issue_id': 2793605995, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193082 failed.\n\nstdout:\n```\nAuto-merging addons/hw_drivers/iot_handlers/drivers/KeyboardUSBDriver_L.py\nAuto-merging addons/hw_drivers/main.py\nAuto-merging addons/hw_drivers/tools/helpers.py\nCONFLICT (content): Merge conflict in addons/hw_drivers/tools/helpers.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 31, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597751344, 'issue_id': 2793605995, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 3, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597753773, 'issue_id': 2793605995, 'author': 'robodoo', 'body': ""@loouis-t @Ysoroko 'ci/security' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 9, 5, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597832426, 'issue_id': 2793605995, 'author': 'robodoo', 'body': ""@loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 9, 44, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597887522, 'issue_id': 2793605995, 'author': 'loouis-t', 'body': 'Hello @odoo/rd-security, could you override this FW port please?', 'created_at': datetime.datetime(2025, 1, 17, 10, 11, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597903704, 'issue_id': 2793605995, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 17, 10, 19, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:31:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194041.png)](https://mergebot.odoo.com/odoo/odoo/pull/194041)

fw-bot (Issue Creator) on (2025-01-16 19:31:01 UTC): @loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193082 failed.

stdout:
```
Auto-merging addons/hw_drivers/iot_handlers/drivers/KeyboardUSBDriver_L.py
Auto-merging addons/hw_drivers/main.py
Auto-merging addons/hw_drivers/tools/helpers.py
CONFLICT (content): Merge conflict in addons/hw_drivers/tools/helpers.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-17 09:03:49 UTC): @robodoo r+

robodoo on (2025-01-17 09:05:03 UTC): @loouis-t @Ysoroko 'ci/security' failed on this reviewed PR.

robodoo on (2025-01-17 09:44:39 UTC): @loouis-t @Ysoroko 'ci/runbot' failed on this reviewed PR.

loouis-t on (2025-01-17 10:11:41 UTC): Hello @odoo/rd-security, could you override this FW port please?

xmo-odoo on (2025-01-17 10:19:33 UTC): @robodoo override=ci/security

"
2793605278,pull_request,closed,,[FW][FIX] website_sale_loyalty: validate rewards before payment,"Versions
--------
- 16.0+

Steps
-----
1. Have a payment provider like Demo published;
2. create a discount program that expired yesterday;
3. change time of PC to yesterday;
4. go to eCommerce, add product to cart, go to checkout;
5. follow steps until you get to the ""Pay Now"" button;
6. change time of PC to today;
7. finalize payment.

Issue
-----
The payment transaction proceeds, but doesn't cover the entire amount, as the promotion was removed afterwards.

Cause
-----
When initiating payment, there's check on whether the applied rewards are still valid.

Solution
--------
Add an override for `_validate_transaction_for_order`, which compares the order amount before and after updating programs & rewards.

If they don't match, raise a `ValidationError`, forcing the user reload the order without expired programs & rewards.

opw-4304241

Forward-Port-Of: odoo/odoo#193824
Forward-Port-Of: odoo/odoo#191256",fw-bot,2025-01-16 19:30:43+00:00,[],2025-01-31 14:38:56+00:00,2025-01-17 14:18:21+00:00,https://github.com/odoo/odoo/pull/194040,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596674096, 'issue_id': 2793605278, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194040.png)](https://mergebot.odoo.com/odoo/odoo/pull/194040)', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596674118, 'issue_id': 2793605278, 'author': 'fw-bot', 'body': '@lvsz this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278311, 'issue_id': 2793605278, 'author': 'fw-bot', 'body': '@lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598169703, 'issue_id': 2793605278, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 35, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:30:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194040.png)](https://mergebot.odoo.com/odoo/odoo/pull/194040)

fw-bot (Issue Creator) on (2025-01-16 19:30:50 UTC): @lvsz this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:14 UTC): @lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).

lvsz on (2025-01-17 11:35:33 UTC): robodoo r+

"
2793604823,pull_request,closed,,"[FW][IMP] im_livechat, mail: clearer leaving livechat conversation message","This commit changes the toast notification message when leaving a livechat conversation.

task-4481370

Forward-Port-Of: odoo/odoo#193998",fw-bot,2025-01-16 19:30:26+00:00,[],2025-01-17 13:11:59+00:00,2025-01-17 12:44:19+00:00,https://github.com/odoo/odoo/pull/194039,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596674041, 'issue_id': 2793604823, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194039.png)](https://mergebot.odoo.com/odoo/odoo/pull/194039)', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596674062, 'issue_id': 2793604823, 'author': 'fw-bot', 'body': '@alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597905750, 'issue_id': 2793604823, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 20, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:30:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194039.png)](https://mergebot.odoo.com/odoo/odoo/pull/194039)

fw-bot (Issue Creator) on (2025-01-16 19:30:48 UTC): @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-17 10:20:37 UTC): @robodoo r+

"
2793604102,pull_request,closed,,[FW][FIX] discuss: prevent traceback with sessions missing a channelMember,"Since [1], the session getter for the sidebar cards assumes that channelMember is always defined on rtcSessions, this could cause tracebacks.

[1]: https://github.com/odoo/odoo/pull/190050

Forward-Port-Of: odoo/odoo#193958
Forward-Port-Of: odoo/odoo#193893",fw-bot,2025-01-16 19:30:09+00:00,[],2025-01-31 07:56:02+00:00,2025-01-17 07:46:07+00:00,https://github.com/odoo/odoo/pull/194038,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596673979, 'issue_id': 2793604102, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194038.png)](https://mergebot.odoo.com/odoo/odoo/pull/194038)', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596674000, 'issue_id': 2793604102, 'author': 'fw-bot', 'body': '@thanhdodeurodoo @phenix-factory this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597529091, 'issue_id': 2793604102, 'author': 'ThanhDodeurOdoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 6, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:30:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194038.png)](https://mergebot.odoo.com/odoo/odoo/pull/194038)

fw-bot (Issue Creator) on (2025-01-16 19:30:46 UTC): @thanhdodeurodoo @phenix-factory this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ThanhDodeurOdoo on (2025-01-17 06:29:00 UTC): @robodoo r+

"
2793603018,pull_request,closed,,[FW][FIX] project: align the field and the field selection for analytic setting,"This commit's purpose is to fix the alignment of the plans and the selection fields associated to those plan in the setting of the form view of projects. The issue was caused by the extra 'div' inside the group, which was disrupting the usual display order of 'field name' - 'field selection'

Solution: remove that extra div and adds a css class to handle margin issue with the group section. Adding a 'colspan' was a cleaner solution, but it also update the display of fields in mobile view, and we don't want that.

task - 4397694

Forward-Port-Of: odoo/odoo#191768",fw-bot,2025-01-16 19:29:42+00:00,[],2025-01-31 12:44:17+00:00,2025-01-17 12:43:22+00:00,https://github.com/odoo/odoo/pull/194037,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596673880, 'issue_id': 2793603018, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194037.png)](https://mergebot.odoo.com/odoo/odoo/pull/194037)', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596673905, 'issue_id': 2793603018, 'author': 'fw-bot', 'body': '@damrOdoo @xavierbol this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 30, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597656473, 'issue_id': 2793603018, 'author': 'xavierbol', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 8, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:30:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194037.png)](https://mergebot.odoo.com/odoo/odoo/pull/194037)

fw-bot (Issue Creator) on (2025-01-16 19:30:44 UTC): @damrOdoo @xavierbol this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

xavierbol on (2025-01-17 08:08:05 UTC): robodoo r+

"
2793602521,pull_request,closed,,[FW][IMP] orm: rename get_domain_list to get_comodel_domain,"The function now returns a `Domain` which indicates a more specific type
and simplifies some code.
Fix usages in relational fields: the domain for inverses is not always
correct and may crash for computed fields. Resolve the `get_depends`
using the `get_domain_list` whenever possible.
Update `_description_domain` to also use `get_comodel_domain`.

task-4380712
odoo/enterprise#75983

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191351",fw-bot,2025-01-16 19:29:24+00:00,[],2025-01-17 12:48:29+00:00,2025-01-17 12:43:40+00:00,https://github.com/odoo/odoo/pull/194036,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2596669113, 'issue_id': 2793602521, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194036.png)](https://mergebot.odoo.com/odoo/odoo/pull/194036)', 'created_at': datetime.datetime(2025, 1, 16, 19, 29, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596669181, 'issue_id': 2793602521, 'author': 'fw-bot', 'body': '@kmagusiak @ryv-odoo cherrypicking of pull request odoo/odoo#191351 failed.\n\n* 0ae9b5a17e95044192c6834dd21ddd6a68f743e5\n* eb6f139be45145c8b59630ae7c2c6c138c4ac207 <- on this commit\n* 8dd4b8d227ad496f9df8b4175d03dbe5b6c0f8a9\n\nstdout:\n```\nAuto-merging addons/portal/controllers/mail.py\nCONFLICT (content): Merge conflict in addons/portal/controllers/mail.py\nAuto-merging odoo/orm/domains.py\nAuto-merging odoo/orm/fields_relational.py\nAuto-merging odoo/orm/models.py\nCONFLICT (content): Merge conflict in odoo/orm/models.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 29, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597774850, 'issue_id': 2793602521, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 15, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:29:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194036.png)](https://mergebot.odoo.com/odoo/odoo/pull/194036)

fw-bot (Issue Creator) on (2025-01-16 19:29:40 UTC): @kmagusiak @ryv-odoo cherrypicking of pull request odoo/odoo#191351 failed.

* 0ae9b5a17e95044192c6834dd21ddd6a68f743e5
* eb6f139be45145c8b59630ae7c2c6c138c4ac207 <- on this commit
* 8dd4b8d227ad496f9df8b4175d03dbe5b6c0f8a9

stdout:
```
Auto-merging addons/portal/controllers/mail.py
CONFLICT (content): Merge conflict in addons/portal/controllers/mail.py
Auto-merging odoo/orm/domains.py
Auto-merging odoo/orm/fields_relational.py
Auto-merging odoo/orm/models.py
CONFLICT (content): Merge conflict in odoo/orm/models.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-17 09:15:49 UTC): @robodoo r+

"
2793601582,pull_request,closed,,[FW][FIX] mrp: prevent re-count global lead days if not 1-step manufacture,"**Current behavior:**
The global lead days system parameter may be counted in the lead days breakdown in the replenishment report when:
A) product has manufacture route and,
B) WH manufacture steps is not 1-step

**Expected behavior:**
The parameter is counted once.

**Steps to reproduce:**
1. Create a product with a simple BoM and the manufacture route

2. Enable 2 or 3 step manufacturing in WH

3. Create an out move for the product

4. Open the replenishment report in inventory

5. Click the (i) in the orderpoint line for the product -> see the global vis. days are counted 2x

**Cause of the issue:**
Like the issue solved by 38d8e77
In some instances the `_get_lead_days()` must be called a second time to capture some additional lead time (in this case because we have > 1-step manufacturing).

**Fix:**
Use the context added in the referenced similar commit to ignore the global days in the second call.

opw-4410790

Forward-Port-Of: odoo/odoo#193299
Forward-Port-Of: odoo/odoo#190808",fw-bot,2025-01-16 19:28:59+00:00,[],2025-01-31 12:44:23+00:00,2025-01-17 12:43:52+00:00,https://github.com/odoo/odoo/pull/194035,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596669007, 'issue_id': 2793601582, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194035.png)](https://mergebot.odoo.com/odoo/odoo/pull/194035)', 'created_at': datetime.datetime(2025, 1, 16, 19, 29, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596669060, 'issue_id': 2793601582, 'author': 'fw-bot', 'body': '@ethanrobv @Whenrow this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 29, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278451, 'issue_id': 2793601582, 'author': 'fw-bot', 'body': '@ethanrobv @Whenrow this forward port of odoo/odoo#190808 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597808921, 'issue_id': 2793601582, 'author': 'ethanrobv', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 32, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:29:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194035.png)](https://mergebot.odoo.com/odoo/odoo/pull/194035)

fw-bot (Issue Creator) on (2025-01-16 19:29:38 UTC): @ethanrobv @Whenrow this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:22 UTC): @ethanrobv @Whenrow this forward port of odoo/odoo#190808 is awaiting action (not merged or closed).

ethanrobv on (2025-01-17 09:32:43 UTC): @robodoo r+

"
2793600803,pull_request,closed,,[FW][FIX] test_http: call new_test_user in setUpClass,"Forward-Port-Of: odoo/odoo#193832
Forward-Port-Of: odoo/odoo#193775",fw-bot,2025-01-16 19:28:40+00:00,[],2025-02-04 07:42:21+00:00,2025-01-21 07:35:07+00:00,https://github.com/odoo/odoo/pull/194034,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596664516, 'issue_id': 2793600803, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194034.png)](https://mergebot.odoo.com/odoo/odoo/pull/194034)', 'created_at': datetime.datetime(2025, 1, 16, 19, 28, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596664551, 'issue_id': 2793600803, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193775 failed.\n\n* 469f8eba1bd71f42f78b3f0d881ddf82a9b3ae03 <- on this commit\n* 91281330ec3d2d1a502bb860d296151175f2398d\n\nstdout:\n```\nAuto-merging odoo/addons/test_http/tests/test_greeting.py\nCONFLICT (content): Merge conflict in odoo/addons/test_http/tests/test_greeting.py\nAuto-merging odoo/addons/test_http/tests/test_models.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 28, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600462671, 'issue_id': 2793600803, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172984, 'issue_id': 2793600803, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475885, 'issue_id': 2793600803, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603717275, 'issue_id': 2793600803, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 5, 51, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:28:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194034.png)](https://mergebot.odoo.com/odoo/odoo/pull/194034)

fw-bot (Issue Creator) on (2025-01-16 19:28:42 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193775 failed.

* 469f8eba1bd71f42f78b3f0d881ddf82a9b3ae03 <- on this commit
* 91281330ec3d2d1a502bb860d296151175f2398d

stdout:
```
Auto-merging odoo/addons/test_http/tests/test_greeting.py
CONFLICT (content): Merge conflict in odoo/addons/test_http/tests/test_greeting.py
Auto-merging odoo/addons/test_http/tests/test_models.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:29 UTC): @Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:20 UTC): @Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:07 UTC): @Julien00859 this forward port of odoo/odoo#193775 is awaiting action (not merged or closed).

Julien00859 on (2025-01-21 05:51:50 UTC): @robodoo r+

"
2793542355,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-16 19:03:43+00:00,[],2025-01-30 23:14:34+00:00,2025-01-16 23:02:49+00:00,https://github.com/odoo/odoo/pull/194033,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596548613, 'issue_id': 2793542355, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194033.png)](https://mergebot.odoo.com/odoo/odoo/pull/194033)', 'created_at': datetime.datetime(2025, 1, 16, 19, 3, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596548646, 'issue_id': 2793542355, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 3, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596824717, 'issue_id': 2793542355, 'author': 'fw-bot', 'body': '@kawkb @smetl the next pull request (odoo/odoo#194050) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 25, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596933872, 'issue_id': 2793542355, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 21, 33, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:03:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194033.png)](https://mergebot.odoo.com/odoo/odoo/pull/194033)

fw-bot (Issue Creator) on (2025-01-16 19:03:45 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 20:25:06 UTC): @kawkb @smetl the next pull request (odoo/odoo#194050) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-16 21:33:47 UTC): @robodoo r+

"
2793536212,pull_request,closed,,[FW][FIX] mrp: find all child MO,"Steps to reproduce the bug:
- Create a storable product “C1”:
     - MTO + Manufacture
     - BoM:
        - Component: 1 unit of C2
- Create a storable product “P1”
    - Component: 1 unit of C1

- Create a MO to produce one unit of P1:
    - Confirm
- A child MO with one unit of C1 is created
- Update the qty producing of P1 to 2
- A new MO to produce one unit of C1 is created

Problem:
The MO of P1 is linked only to the last MO of C1.
This occurs because the “created_production_id” field in the stock move of C1 (associated with the MO of P1) is updated to reference the most recent MO of C1. Additionally, since the following fix:
https://github.com/odoo/odoo/commit/c5b3f41fbd442def9e97acb023a00862e7d03eb3#diff-6d86bc8c3e9aa22586656b702849c5bbbb00c9b97ffd08bc0842e0e68f8948f9R74
Each new MO has its own procurement group.
As a result, when using the _get_children method:
- The method retrieves stock moves linked to the current procurement group.
- It uses their created_production_id to fetch the associated procurement group and then retrieves the related production_id.
However, since the two child MOs of C1 belong to different procurement groups, only the latest MO is returned.

opw-4450210

Forward-Port-Of: odoo/odoo#193952
Forward-Port-Of: odoo/odoo#192952",fw-bot,2025-01-16 19:01:10+00:00,[],2025-01-28 09:13:22+00:00,2025-01-28 09:13:22+00:00,https://github.com/odoo/odoo/pull/194032,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596536749, 'issue_id': 2793536212, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194032.png)](https://mergebot.odoo.com/odoo/odoo/pull/194032)', 'created_at': datetime.datetime(2025, 1, 16, 19, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596536783, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_production.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600465492, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173759, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476310, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119632, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689481, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385681, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721888, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723217, 'issue_id': 2793536212, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618145965, 'issue_id': 2793536212, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 7, 51, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 19:01:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194032.png)](https://mergebot.odoo.com/odoo/odoo/pull/194032)

fw-bot (Issue Creator) on (2025-01-16 19:01:12 UTC): @DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_production.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:55 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:57 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:30 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:46 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:25 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:15 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:28 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:18 UTC): @DjamelTouati @Whenrow this forward port of odoo/odoo#192952 is awaiting action (not merged or closed).

DjamelTouati on (2025-01-28 07:51:43 UTC): robodoo r+

"
2793528621,pull_request,closed,,[FW][FIX] pos_sale: separate downpayment for fixed tax,"When a product has a fixed tax, there should be a separate downpayment line for the fixed tax amount.

Steps to reproduce:
-------------------
* Create a fixed tax of 1€
* Assign this tax to any product
* Create a sale order with this product
* Open PoS and make a downpayment of 10%
> Observation: There is only one downpayment line with the total amount
  of the product and the fixed tax combined.

opw-4252104

Forward-Port-Of: odoo/odoo#193732
Forward-Port-Of: odoo/odoo#192208",fw-bot,2025-01-16 18:57:55+00:00,[],2025-02-06 09:00:31+00:00,2025-01-23 08:44:01+00:00,https://github.com/odoo/odoo/pull/194031,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596523270, 'issue_id': 2793528621, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194031.png)](https://mergebot.odoo.com/odoo/odoo/pull/194031)', 'created_at': datetime.datetime(2025, 1, 16, 18, 57, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596523322, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.\n\nstdout:\n```\nAuto-merging addons/pos_sale/static/src/overrides/models/pos_store.js\nAuto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js\nCONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js\nAuto-merging addons/pos_sale/tests/test_pos_sale_flow.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 57, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278174, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598426321, 'issue_id': 2793528621, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 58, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598513583, 'issue_id': 2793528621, 'author': 'robodoo', 'body': ""@robinengels @adgu-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 14, 40, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468824, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600467452, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174073, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602038999, 'issue_id': 2793528621, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 10, 32, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603406722, 'issue_id': 2793528621, 'author': 'robodoo', 'body': '@robinengels @adgu-odoo staging failed: ci/runbot on da2bea0d8256293951ac255b64d033f3973d3741 (view more at https://runbot.odoo.com/runbot/build/73686876)', 'created_at': datetime.datetime(2025, 1, 21, 0, 31, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119770, 'issue_id': 2793528621, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606996696, 'issue_id': 2793528621, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 11, 31, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:57:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194031.png)](https://mergebot.odoo.com/odoo/odoo/pull/194031)

fw-bot (Issue Creator) on (2025-01-16 18:57:57 UTC): @robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.

stdout:
```
Auto-merging addons/pos_sale/static/src/overrides/models/pos_store.js
Auto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js
CONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js
Auto-merging addons/pos_sale/tests/test_pos_sale_flow.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:07 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

robinengels on (2025-01-17 13:58:28 UTC): @robodoo r+

robodoo on (2025-01-17 14:40:02 UTC): @robinengels @adgu-odoo 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-18 02:01:17 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:08 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:11 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

robinengels on (2025-01-20 10:32:53 UTC): @robodoo r+

robodoo on (2025-01-21 00:31:55 UTC): @robinengels @adgu-odoo staging failed: ci/runbot on da2bea0d8256293951ac255b64d033f3973d3741 (view more at https://runbot.odoo.com/runbot/build/73686876)

fw-bot (Issue Creator) on (2025-01-22 02:01:52 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

robinengels on (2025-01-22 11:31:44 UTC): @robodoo r+

"
2793520811,pull_request,closed,,[FW][FIX] project: rely on access rules for task count in portal,"## Issue:
- Child contacts of followers were unable to access the tasks menu in the portal home, despite having access according to the access rules.

## Steps to reproduce:
1. Create a parent contact with a child contact.
2. Grant the child contact portal access.
3. Create a task with the parent contact as the customer.
4. Add the parent contact as a follower or send a message in the task chatter.
5. Log in as the child contact in the portal.
6. Notice the tasks menu is unavailable.

## Solution:
- The issue originated in `_prepare_home_portal_values`, where the task count was computed with a restrictive domain and sudo instead of relying on the access rules.
- Removed the unnecessary domain filter to let the access rules handle it.

opw-4306834



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191601",fw-bot,2025-01-16 18:54:37+00:00,[],2025-01-31 10:24:46+00:00,2025-01-17 10:03:19+00:00,https://github.com/odoo/odoo/pull/194030,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596508864, 'issue_id': 2793520811, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194030.png)](https://mergebot.odoo.com/odoo/odoo/pull/194030)', 'created_at': datetime.datetime(2025, 1, 16, 18, 54, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596508975, 'issue_id': 2793520811, 'author': 'fw-bot', 'body': '@kawkb @xavierbol cherrypicking of pull request odoo/odoo#191601 failed.\n\nstdout:\n```\nAuto-merging addons/project/controllers/portal.py\nCONFLICT (content): Merge conflict in addons/project/controllers/portal.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 54, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596932399, 'issue_id': 2793520811, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 21, 33, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597006729, 'issue_id': 2793520811, 'author': 'robodoo', 'body': '@kawkb @xavierbol staging failed: ci/runbot on c3cf627a6e81247c425a558e3a405615f72dc109 (view more at https://runbot.odoo.com/runbot/build/73498776)', 'created_at': datetime.datetime(2025, 1, 16, 22, 6, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597655751, 'issue_id': 2793520811, 'author': 'xavierbol', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 8, 7, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:54:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194030.png)](https://mergebot.odoo.com/odoo/odoo/pull/194030)

fw-bot (Issue Creator) on (2025-01-16 18:54:40 UTC): @kawkb @xavierbol cherrypicking of pull request odoo/odoo#191601 failed.

stdout:
```
Auto-merging addons/project/controllers/portal.py
CONFLICT (content): Merge conflict in addons/project/controllers/portal.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-16 21:33:04 UTC): @robodoo r+

robodoo on (2025-01-16 22:06:24 UTC): @kawkb @xavierbol staging failed: ci/runbot on c3cf627a6e81247c425a558e3a405615f72dc109 (view more at https://runbot.odoo.com/runbot/build/73498776)

xavierbol on (2025-01-17 08:07:40 UTC): robodoo retry

"
2793508930,pull_request,closed,,[FW][FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326

Forward-Port-Of: odoo/odoo#194005",fw-bot,2025-01-16 18:49:36+00:00,[],2025-01-31 17:19:55+00:00,2025-01-17 17:11:28+00:00,https://github.com/odoo/odoo/pull/194029,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596487023, 'issue_id': 2793508930, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194029.png)](https://mergebot.odoo.com/odoo/odoo/pull/194029)', 'created_at': datetime.datetime(2025, 1, 16, 18, 49, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596487069, 'issue_id': 2793508930, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 49, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596779909, 'issue_id': 2793508930, 'author': 'fw-bot', 'body': '@lvsz @chevalierv the next pull request (odoo/odoo#194048) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 19, 57, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598168747, 'issue_id': 2793508930, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 35, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:49:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194029.png)](https://mergebot.odoo.com/odoo/odoo/pull/194029)

fw-bot (Issue Creator) on (2025-01-16 18:49:38 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 19:57:41 UTC): @lvsz @chevalierv the next pull request (odoo/odoo#194048) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-17 11:35:01 UTC): robodoo r+

"
2793500726,pull_request,open,,[REM] partner_autocomplete: removve auto install,"


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",rov-adhoc,2025-01-16 18:46:09+00:00,[],2025-01-16 18:46:13+00:00,,https://github.com/odoo/odoo/pull/194028,[],"[{'comment_id': 2596473650, 'issue_id': 2793500726, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194028.png)](https://mergebot.odoo.com/odoo/odoo/pull/194028)', 'created_at': datetime.datetime(2025, 1, 16, 18, 46, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:46:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194028.png)](https://mergebot.odoo.com/odoo/odoo/pull/194028)

"
2793489893,pull_request,closed,,[FW][FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.

Forward-Port-Of: odoo/odoo#193990",fw-bot,2025-01-16 18:41:36+00:00,[],2025-01-31 16:56:32+00:00,2025-01-17 16:37:25+00:00,https://github.com/odoo/odoo/pull/194027,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596457995, 'issue_id': 2793489893, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194027.png)](https://mergebot.odoo.com/odoo/odoo/pull/194027)', 'created_at': datetime.datetime(2025, 1, 16, 18, 41, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596458013, 'issue_id': 2793489893, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 41, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596588003, 'issue_id': 2793489893, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 19, 12, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:41:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194027.png)](https://mergebot.odoo.com/odoo/odoo/pull/194027)

fw-bot (Issue Creator) on (2025-01-16 18:41:37 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 19:12:39 UTC): @loouis-t @Ysoroko ci/runbot failed on this forward-port PR

"
2793477341,pull_request,open,,[FW][FIX] base: allow to edit vat on child company,"FW of https://github.com/odoo/odoo/pull/55239

Description of the issue/feature this PR addresses:

Create one partner of type ""is company"" (let's name it ""Parent company"")
Create another partner, set type ""individual"", choose a parent company, then change to type ""is company"" (let's name it ""Child company"")
Current behavior before PR:

VAT is not editable on ""Child Company""
Desired behavior after PR is merged:

VAT should be editable on ""Child Company"" as other commercial fields.
The Child Company should be able to get a vat different to the parent company, that is already implemented on the method [_commercial_sync_to_children](https://github.com/odoo/odoo/blob/d17b6e8b4872fc579c565ba356e94fab2c370e60/odoo/addons/base/models/res_partner.py#L609), but now the field remains empty and readonly
With this change we are using same criteria as in another commercial field like pricelist and accounts tab

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",rov-adhoc,2025-01-16 18:36:21+00:00,[],2025-01-16 18:36:25+00:00,,https://github.com/odoo/odoo/pull/194026,[],"[{'comment_id': 2596440494, 'issue_id': 2793477341, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194026.png)](https://mergebot.odoo.com/odoo/odoo/pull/194026)', 'created_at': datetime.datetime(2025, 1, 16, 18, 36, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:36:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194026.png)](https://mergebot.odoo.com/odoo/odoo/pull/194026)

"
2793472973,pull_request,closed,,[FW][IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.

Forward-Port-Of: odoo/odoo#193935",fw-bot,2025-01-16 18:34:25+00:00,[],2025-01-31 12:57:37+00:00,2025-01-17 12:55:45+00:00,https://github.com/odoo/odoo/pull/194025,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596434002, 'issue_id': 2793472973, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194025.png)](https://mergebot.odoo.com/odoo/odoo/pull/194025)', 'created_at': datetime.datetime(2025, 1, 16, 18, 34, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596434058, 'issue_id': 2793472973, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 34, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596606791, 'issue_id': 2793472973, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 19, 16, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597818259, 'issue_id': 2793472973, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko the next pull request (odoo/odoo#194085) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 9, 37, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597872579, 'issue_id': 2793472973, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 4, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:34:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194025.png)](https://mergebot.odoo.com/odoo/odoo/pull/194025)

fw-bot (Issue Creator) on (2025-01-16 18:34:27 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 19:16:45 UTC): @loouis-t @Ysoroko ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 09:37:31 UTC): @loouis-t @Ysoroko the next pull request (odoo/odoo#194085) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-17 10:04:19 UTC): @robodoo r+

"
2793469453,pull_request,closed,,[FW][FIX] certificate: show an error if the private key cannot be loaded,"When the private key has an issue if we attempt to sing an invoice we may get a traceback in the frontend. We can instead show an error and include the key that's failing.

Example traceback if the key is invalid:
```
  File ""/home/odoo/src/odoo/18.0/addons/certificate/models/key.py"", line 206, in _sign_with_key
    private_key = serialization.load_pem_private_key(base64.b64decode(pem_key), pwd)
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 83, in b64decode
    s = _bytes_from_decode_data(s)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 45, in _bytes_from_decode_data
    raise TypeError(""argument should be a bytes-like object or ASCII ""
TypeError: argument should be a bytes-like object or ASCII string, not 'bool'
```

Steps to reproduce:
1. Install l10n_sa_edi
3. Alter the key in a way that makes it fail to load, e.g. upload a garbage text file as a key (note the error in the warning)
2. Make an invoice to ARAMCO partner
4. Click in the `Process now` link at the top of the invoice

We get the traceback.

This issue was seen during upgrades due to improper migration of SA keys (already solved). Still the UX here is suboptimal. This patch proposes to show an error that can help users understand the issue. We already show the error in the keys management interface, but the user working in invoices may be unaware of the issue with the key.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193931",fw-bot,2025-01-16 18:33:01+00:00,[],2025-01-31 10:24:53+00:00,2025-01-17 10:20:54+00:00,https://github.com/odoo/odoo/pull/194024,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596429035, 'issue_id': 2793469453, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194024.png)](https://mergebot.odoo.com/odoo/odoo/pull/194024)', 'created_at': datetime.datetime(2025, 1, 16, 18, 33, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596429057, 'issue_id': 2793469453, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 33, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596557316, 'issue_id': 2793469453, 'author': 'fw-bot', 'body': '@aj-fuentes @rugo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 19, 5, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:33:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194024.png)](https://mergebot.odoo.com/odoo/odoo/pull/194024)

fw-bot (Issue Creator) on (2025-01-16 18:33:03 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 19:05:41 UTC): @aj-fuentes @rugo-odoo ci/runbot failed on this forward-port PR

"
2793446430,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193713
Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-16 18:19:48+00:00,[],2025-02-01 17:47:21+00:00,2025-01-18 12:56:47+00:00,https://github.com/odoo/odoo/pull/194023,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596405107, 'issue_id': 2793446430, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194023.png)](https://mergebot.odoo.com/odoo/odoo/pull/194023)', 'created_at': datetime.datetime(2025, 1, 16, 18, 19, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596405133, 'issue_id': 2793446430, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 19, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468605, 'issue_id': 2793446430, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo this forward port of odoo/odoo#193568 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 0, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599685316, 'issue_id': 2793446430, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 18, 11, 50, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:19:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194023.png)](https://mergebot.odoo.com/odoo/odoo/pull/194023)

fw-bot (Issue Creator) on (2025-01-16 18:19:50 UTC): @asno-odoo @jugj-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-18 02:00:49 UTC): @asno-odoo @jugj-odoo this forward port of odoo/odoo#193568 is awaiting action (not merged or closed).

asno-odoo on (2025-01-18 11:50:46 UTC): robodoo r+

"
2793427010,pull_request,closed,,[FW][FIX] account: draft bill entries in partner ledger,"### Before
When creating a new vendor bill through Vendors > 'Example Vendor 1'> Vendor Bills (magic button), if the vendor was changed to 'Example Vendor 2' and the draft saved then it would show up under the 'Example Vendor 1' in the Partner Ledger instead of under the correct 'Example Vendor 2'. 

This is due to the partner_id being defined in the context when going through the 'Example Vendor 1' view. 

### Now
During the creation of the account move lines we use a context without the default_partner_id.

The Partner Ledger now shows the draft bill entry under the right vendor.

opw-4407709

Forward-Port-Of: odoo/odoo#193842
Forward-Port-Of: odoo/odoo#192567",fw-bot,2025-01-16 18:08:52+00:00,[],2025-01-31 01:19:55+00:00,2025-01-17 00:34:40+00:00,https://github.com/odoo/odoo/pull/194022,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596385535, 'issue_id': 2793427010, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194022.png)](https://mergebot.odoo.com/odoo/odoo/pull/194022)', 'created_at': datetime.datetime(2025, 1, 16, 18, 8, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596385559, 'issue_id': 2793427010, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 8, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596512243, 'issue_id': 2793427010, 'author': 'fw-bot', 'body': '@aizu-odoo @william-andre ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 18, 55, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596850089, 'issue_id': 2793427010, 'author': 'fw-bot', 'body': '@aizu-odoo @william-andre the next pull request (odoo/odoo#194052) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 20, 41, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597087500, 'issue_id': 2793427010, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 23, 6, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 18:08:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194022.png)](https://mergebot.odoo.com/odoo/odoo/pull/194022)

fw-bot (Issue Creator) on (2025-01-16 18:08:54 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 18:55:27 UTC): @aizu-odoo @william-andre ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 20:41:43 UTC): @aizu-odoo @william-andre the next pull request (odoo/odoo#194052) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-16 23:06:36 UTC): @robodoo r+

"
2793396377,pull_request,closed,,[FW][FIX] account: set currency_id in multicurrency accrual moves,"Issue:
* Accrued Expense Entry shows wrong currency symbol for 'Total in Currency' for multicurrency POs.

Steps To Reproduce:
* In a multicurrency environmentcreate a PO with a currency different  than the one of the company and confirm it.
* Receive the product and validate it.
* On the PO action wheel, create `Accrued Expense Entry`.
* Notice 'Total in Currency' is set to the wrong currency.

Solution:
* In `_compute_move_vals` I set the move's `currency_id` of the accrual move to that of the order's currency.
* in `create_entries` I prevent the creation of the accrual move if orders have different currencies.
* Please note that there were no issues with currency conversions.

opw-4072932

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#177929",fw-bot,2025-01-16 17:51:09+00:00,[],2025-01-30 23:14:34+00:00,2025-01-16 23:01:38+00:00,https://github.com/odoo/odoo/pull/194021,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596353624, 'issue_id': 2793396377, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194021.png)](https://mergebot.odoo.com/odoo/odoo/pull/194021)', 'created_at': datetime.datetime(2025, 1, 16, 17, 51, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596353647, 'issue_id': 2793396377, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 17, 51, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:51:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194021.png)](https://mergebot.odoo.com/odoo/odoo/pull/194021)

fw-bot (Issue Creator) on (2025-01-16 17:51:10 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793394304,pull_request,closed,,[FW][FIX] test_discuss_full: remove implicit dependency on whatsapp,"Removes the implicit dependency on whatsapp.
We instead override the method in `test_discuss_full_enterprise` such that the tests passes both with community only and community + enterprise.

Runbot Error:
 - 109621
 - 109622
 - 111962
 - 111963
 - 111964
 - 111965

Related to: https://github.com/odoo/enterprise/pull/77157

Forward-Port-Of: odoo/odoo#193709",fw-bot,2025-01-16 17:49:54+00:00,[],2025-01-17 13:11:41+00:00,2025-01-17 12:44:07+00:00,https://github.com/odoo/odoo/pull/194020,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2596351406, 'issue_id': 2793394304, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194020.png)](https://mergebot.odoo.com/odoo/odoo/pull/194020)', 'created_at': datetime.datetime(2025, 1, 16, 17, 49, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596351449, 'issue_id': 2793394304, 'author': 'fw-bot', 'body': '@Williambraecky cherrypicking of pull request odoo/odoo#193709 failed.\n\nstdout:\n```\nAuto-merging addons/test_discuss_full/tests/test_performance.py\nCONFLICT (content): Merge conflict in addons/test_discuss_full/tests/test_performance.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 17, 49, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597888291, 'issue_id': 2793394304, 'author': 'Williambraecky', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 12, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:49:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194020.png)](https://mergebot.odoo.com/odoo/odoo/pull/194020)

fw-bot (Issue Creator) on (2025-01-16 17:49:58 UTC): @Williambraecky cherrypicking of pull request odoo/odoo#193709 failed.

stdout:
```
Auto-merging addons/test_discuss_full/tests/test_performance.py
CONFLICT (content): Merge conflict in addons/test_discuss_full/tests/test_performance.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Williambraecky on (2025-01-17 10:12:04 UTC): robodoo r+

"
2793388707,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747

Forward-Port-Of: odoo/odoo#193984
Forward-Port-Of: odoo/odoo#193786",fw-bot,2025-01-16 17:46:39+00:00,[],2025-01-31 12:57:44+00:00,2025-01-17 12:55:49+00:00,https://github.com/odoo/odoo/pull/194019,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596345533, 'issue_id': 2793388707, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194019.png)](https://mergebot.odoo.com/odoo/odoo/pull/194019)', 'created_at': datetime.datetime(2025, 1, 16, 17, 46, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596345556, 'issue_id': 2793388707, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo cherrypicking of pull request odoo/odoo#193786 failed.\n\nstdout:\n```\nAuto-merging addons/account_edi_ubl_cii/models/account_edi_common.py\nCONFLICT (content): Merge conflict in addons/account_edi_ubl_cii/models/account_edi_common.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 17, 46, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597643919, 'issue_id': 2793388707, 'author': 'guva-odoo', 'body': 'hi @jbw-odoo the fix has changed, still ok for you?', 'created_at': datetime.datetime(2025, 1, 17, 8, 0, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598015058, 'issue_id': 2793388707, 'author': 'jbw-odoo', 'body': '> hi @jbw-odoo the fix has changed, still ok for you?\r\n\r\nyes\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 48, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:46:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194019.png)](https://mergebot.odoo.com/odoo/odoo/pull/194019)

fw-bot (Issue Creator) on (2025-01-16 17:46:41 UTC): @guva-odoo @jbw-odoo cherrypicking of pull request odoo/odoo#193786 failed.

stdout:
```
Auto-merging addons/account_edi_ubl_cii/models/account_edi_common.py
CONFLICT (content): Merge conflict in addons/account_edi_ubl_cii/models/account_edi_common.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

guva-odoo on (2025-01-17 08:00:25 UTC): hi @jbw-odoo the fix has changed, still ok for you?

jbw-odoo on (2025-01-17 10:48:05 UTC): yes
robodoo r+

"
2793385390,pull_request,closed,,[IMP] base: creating new res device log returns true,"In case you want to inherit _update_device, and want to know whether or not a device was made, you need to first get the latest id, then call super(), and then compare the latest id with the previous value. This can simply be fixed by returning True and checking the return value.

Meant to simplify https://github.com/odoo/internal/pull/3299
",bram1000,2025-01-16 17:44:43+00:00,[],2025-01-21 15:32:35+00:00,2025-01-21 15:32:35+00:00,https://github.com/odoo/odoo/pull/194018,"[('RD', 'research & development, internal work')]","[{'comment_id': 2596342192, 'issue_id': 2793385390, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194018.png)](https://mergebot.odoo.com/odoo/odoo/pull/194018)', 'created_at': datetime.datetime(2025, 1, 16, 17, 44, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597743162, 'issue_id': 2793385390, 'author': 'xmo-odoo', 'body': 'If you\'re updating the type of the method, then the ""failure"" cases should return `False`, not `None`, and even less so implicitly.', 'created_at': datetime.datetime(2025, 1, 17, 8, 59, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597745097, 'issue_id': 2793385390, 'author': 'xmo-odoo', 'body': 'Also needs to add method types or at least update the docstring.', 'created_at': datetime.datetime(2025, 1, 17, 9, 0, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603115819, 'issue_id': 2793385390, 'author': 'bram1000', 'body': '@xmo-odoo Right now the docstring provides value, it explains the goal of the function, when it needs to be called and that request can be of 2 different types.\r\n\r\nWhat you\'re asking me to do is useless boilerplate, it turns a beautiful comment into java-esque boilerplate. I mean look at this:\r\n```py\r\n""""""\r\nMust be called when we want to update the device for the current request.\r\nPassage through this method must leave a ""trace"" in the session.\r\n\r\n:param request: Request or WebsocketRequest object\r\n:return bool: True if new device log was made, False if not\r\n""""""\r\n```\r\n\r\nThis function is not something that needs a docstring to explain what it returns to be a boolean, it\'s a function that is called only in niche situations and should only be touched when you know what you are doing. It\'s not some kind of helper function where it might be handy to be explicit for auto-completion\'s sake.\r\n\r\nI understand the need for consistency, but small stuff like `return False` instead of `return None` I can live with. I just think it would be more efficient to not spend time having a review process for such a minor change. `Dev -> Review -> Feedback -> Implement -> Review -> R+` instead of just `Dev -> R+` for a simple return True.\r\n\r\nBut what I absolutely want to avoid is this docstring update, it\'s overly explicit nature makes the code worse, not better. It\'s equivalent to the following image:\r\n<img src=""https://github.com/user-attachments/assets/7eda7ae1-2fbc-49a1-a55b-e9c2eacba40c"" width=100/>', 'created_at': datetime.datetime(2025, 1, 20, 19, 26, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603855803, 'issue_id': 2793385390, 'author': 'xmo-odoo', 'body': '> Right now the docstring provides value, it explains the goal of the function, when it needs to be called and that request can be of 2 different types.\r\n\r\nAnd implies that the method only has side effects.\r\n\r\n> a beautiful comment\r\n\r\n[x]\r\n\r\n> I mean look at this:\r\n\r\nIgnoring that the entire addition is wrong, this can be written to flow just fine\r\n\r\n    :return: whether a device log was created\r\n\r\n> This function is not something that needs a docstring to explain what it returns to be a boolean, it\'s a function that is called only in niche situations and should only be touched when you know what you are doing.\r\n\r\nEither it needs a docstring to explain its semantics, in which case it has no reason to be some sort of half-assed incomplete nonsense when there\'s nothing difficult about the explanation, or it doesn\'t need a docstring at all because ""you know what you are doing"".\r\n\r\n> I just think it would be more efficient to not spend time having a review process for such a minor change.\r\n\r\nSo you wrote 5 paragraphs to avoid wasting time?\r\n\r\n> But what I absolutely want to avoid is this docstring update\r\n\r\n:ok:', 'created_at': datetime.datetime(2025, 1, 21, 7, 32, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604019023, 'issue_id': 2793385390, 'author': 'bram1000', 'body': '@xmo-odoo I wrote the `:return` based on https://github.com/odoo/odoo/blob/d8d4e946933156249991ca76a9c00e9b28063120/addons/mail/models/mail_message_schedule.py#L115 which did not seem to fit at all in this comment.\r\n\r\n`:return: whether a device log was created` is indeed a lot nicer and fits inside the docstring quite well. Seems like my frustration was due to my own inability to create beautiful docstrings.', 'created_at': datetime.datetime(2025, 1, 21, 8, 54, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:44:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194018.png)](https://mergebot.odoo.com/odoo/odoo/pull/194018)

xmo-odoo on (2025-01-17 08:59:51 UTC): If you're updating the type of the method, then the ""failure"" cases should return `False`, not `None`, and even less so implicitly.

xmo-odoo on (2025-01-17 09:00:47 UTC): Also needs to add method types or at least update the docstring.

bram1000 (Issue Creator) on (2025-01-20 19:26:27 UTC): @xmo-odoo Right now the docstring provides value, it explains the goal of the function, when it needs to be called and that request can be of 2 different types.

What you're asking me to do is useless boilerplate, it turns a beautiful comment into java-esque boilerplate. I mean look at this:
```py
""""""
Must be called when we want to update the device for the current request.
Passage through this method must leave a ""trace"" in the session.

:param request: Request or WebsocketRequest object
:return bool: True if new device log was made, False if not
""""""
```

This function is not something that needs a docstring to explain what it returns to be a boolean, it's a function that is called only in niche situations and should only be touched when you know what you are doing. It's not some kind of helper function where it might be handy to be explicit for auto-completion's sake.

I understand the need for consistency, but small stuff like `return False` instead of `return None` I can live with. I just think it would be more efficient to not spend time having a review process for such a minor change. `Dev -> Review -> Feedback -> Implement -> Review -> R+` instead of just `Dev -> R+` for a simple return True.

But what I absolutely want to avoid is this docstring update, it's overly explicit nature makes the code worse, not better. It's equivalent to the following image:
<img src=""https://github.com/user-attachments/assets/7eda7ae1-2fbc-49a1-a55b-e9c2eacba40c"" width=100/>

xmo-odoo on (2025-01-21 07:32:51 UTC): And implies that the method only has side effects.


[x]


Ignoring that the entire addition is wrong, this can be written to flow just fine

    :return: whether a device log was created


Either it needs a docstring to explain its semantics, in which case it has no reason to be some sort of half-assed incomplete nonsense when there's nothing difficult about the explanation, or it doesn't need a docstring at all because ""you know what you are doing"".


So you wrote 5 paragraphs to avoid wasting time?


:ok:

bram1000 (Issue Creator) on (2025-01-21 08:54:20 UTC): @xmo-odoo I wrote the `:return` based on https://github.com/odoo/odoo/blob/d8d4e946933156249991ca76a9c00e9b28063120/addons/mail/models/mail_message_schedule.py#L115 which did not seem to fit at all in this comment.

`:return: whether a device log was created` is indeed a lot nicer and fits inside the docstring quite well. Seems like my frustration was due to my own inability to create beautiful docstrings.

"
2793374615,pull_request,closed,,[FW][FIX] project: rely on access rules for task count in portal,"## Issue:
- Child contacts of followers were unable to access the tasks menu in the portal home, despite having access according to the access rules.

## Steps to reproduce:
1. Create a parent contact with a child contact.
2. Grant the child contact portal access.
3. Create a task with the parent contact as the customer.
4. Add the parent contact as a follower or send a message in the task chatter.
5. Log in as the child contact in the portal.
6. Notice the tasks menu is unavailable.

## Solution:
- The issue originated in `_prepare_home_portal_values`, where the task count was computed with a restrictive domain and sudo instead of relying on the access rules.
- Removed the unnecessary domain filter to let the access rules handle it.

opw-4306834



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191601",fw-bot,2025-01-16 17:38:47+00:00,[],2025-01-30 20:32:54+00:00,2025-01-16 20:20:25+00:00,https://github.com/odoo/odoo/pull/194017,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596331007, 'issue_id': 2793374615, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194017.png)](https://mergebot.odoo.com/odoo/odoo/pull/194017)', 'created_at': datetime.datetime(2025, 1, 16, 17, 38, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596331037, 'issue_id': 2793374615, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 17, 38, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596508898, 'issue_id': 2793374615, 'author': 'fw-bot', 'body': '@kawkb @xavierbol the next pull request (odoo/odoo#194030) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 18, 54, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596572164, 'issue_id': 2793374615, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 19, 9, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:38:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194017.png)](https://mergebot.odoo.com/odoo/odoo/pull/194017)

fw-bot (Issue Creator) on (2025-01-16 17:38:51 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 18:54:39 UTC): @kawkb @xavierbol the next pull request (odoo/odoo#194030) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-16 19:09:04 UTC): @robodoo r+

"
2793364903,pull_request,closed,,[FIX] sale_pdf_quote_builder: use correct datetime format,"Versions
--------
- saas-17.4+

Steps
-----
1. Create a new quotation template;
2. add a header which uses the `date_order` field;
3. configure the mapping from this form field to the record field;
4. print the quotation template.

Issue
-----
The datetime is formatted as ""Jan 16, 2025, 5:59:26 PM"", which is different from how dates are formatted, or how datetimes are usually formatted elsewhere in Odoo.

Additionally, it may also be too long to fit in the form field.

Cause
-----
The `format_datetime` function is used without a `dt_format` specified, falling back on the default `'medium'`: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1399

Solution
--------
In order to get the format defined for the relevant locale in Odoo, `dt_format=False` should be specified in the `format_datetime` call: https://github.com/odoo/odoo/blob/cbd5531697954ec62d79e0eec2c00bd61cd8b0e4/odoo/tools/misc.py#L1427-L1430

opw-4414688",lvsz,2025-01-16 17:33:40+00:00,[],2025-01-31 11:14:18+00:00,2025-01-17 11:01:58+00:00,https://github.com/odoo/odoo/pull/194016,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596320648, 'issue_id': 2793364903, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194016.png)](https://mergebot.odoo.com/odoo/odoo/pull/194016)', 'created_at': datetime.datetime(2025, 1, 16, 17, 33, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:33:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194016.png)](https://mergebot.odoo.com/odoo/odoo/pull/194016)

"
2793349930,pull_request,closed,,[FW][IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.

Forward-Port-Of: odoo/odoo#193935",fw-bot,2025-01-16 17:26:41+00:00,[],2025-01-31 12:29:14+00:00,2025-01-17 12:24:18+00:00,https://github.com/odoo/odoo/pull/194015,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596305005, 'issue_id': 2793349930, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194015.png)](https://mergebot.odoo.com/odoo/odoo/pull/194015)', 'created_at': datetime.datetime(2025, 1, 16, 17, 26, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596305021, 'issue_id': 2793349930, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 17, 26, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:26:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194015.png)](https://mergebot.odoo.com/odoo/odoo/pull/194015)

fw-bot (Issue Creator) on (2025-01-16 17:26:43 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793339293,pull_request,closed,,[FIX] website: make labels in sidebar translatable,"Some labels in the website editor's sidebar were not translatable, while all the others were.

In this commit we make the following parts translatable:
- The header of the ""Field"" options
- The ""Custom Text"" new field name
- The ""Existing field"" header in the selection list of existing field
- ""Option"", ""Radio"", ""Checkbox"", and ""List"" for list-type fields

[opw-4421055](https://www.odoo.com/odoo/project.task/4421055)",dylankiss,2025-01-16 17:21:16+00:00,[],2025-01-30 14:52:37+00:00,2025-01-30 14:52:37+00:00,https://github.com/odoo/odoo/pull/194014,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596294127, 'issue_id': 2793339293, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194014.png)](https://mergebot.odoo.com/odoo/odoo/pull/194014)', 'created_at': datetime.datetime(2025, 1, 16, 17, 21, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597841247, 'issue_id': 2793339293, 'author': 'robodoo', 'body': '@oomsveta you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 17, 9, 49, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624104045, 'issue_id': 2793339293, 'author': 'dylankiss', 'body': '@qsm-odoo Could I get another review of this please? 🙏', 'created_at': datetime.datetime(2025, 1, 30, 10, 31, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624224644, 'issue_id': 2793339293, 'author': 'robodoo', 'body': '@qsm-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 30, 11, 24, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624348282, 'issue_id': 2793339293, 'author': 'dylankiss', 'body': '@odoo/rd-security Can I get an exception for this? The value of the translated string is escaped before being passed to QWeb.', 'created_at': datetime.datetime(2025, 1, 30, 12, 16, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624489639, 'issue_id': 2793339293, 'author': 'xmo-odoo', 'body': '> Can I get an exception for this? The value of the translated string is escaped before being passed to QWeb.\r\n\r\nThe escaping is unnecessary, qweb escapes injected values by default (or should).\r\n\r\n@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 30, 13, 15, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:21:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194014.png)](https://mergebot.odoo.com/odoo/odoo/pull/194014)

robodoo on (2025-01-17 09:49:07 UTC): @oomsveta you may want to rebuild or fix this PR as it has failed CI.

dylankiss (Issue Creator) on (2025-01-30 10:31:34 UTC): @qsm-odoo Could I get another review of this please? 🙏

robodoo on (2025-01-30 11:24:17 UTC): @qsm-odoo you may want to rebuild or fix this PR as it has failed CI.

dylankiss (Issue Creator) on (2025-01-30 12:16:09 UTC): @odoo/rd-security Can I get an exception for this? The value of the translated string is escaped before being passed to QWeb.

xmo-odoo on (2025-01-30 13:15:45 UTC): The escaping is unnecessary, qweb escapes injected values by default (or should).

@robodoo override=ci/security

"
2793319539,pull_request,closed,,[FIX] mail: no flicker on call video stream inset,"Before this commit, during a discuss call while sharing screen and enabling camera, the inset card (= small video stream preview in bottom right of call view of the participant, either camera or screen-sharing depending on other stream being main active) was flickering.

This happens because each rendering of the call view re-renders the inset, which leads to the perceived flickers from stream being re-rendered.

The main cause of re-render comes from `setInset()` that is invoked whenever the `visibleMainCards` getter is called with inset, which is triggered on renderings like mouse-hovering on call view to display the call actions. Even when the inset card is unchanged, `setInset()` produces another object, which forces OWL to re-render the inset component.

This commit fixes the issue by having `setInset` reusing the inset data object if the inset to render refers to the same inset session.

Task-4484908",alexkuhn,2025-01-16 17:11:14+00:00,[],2025-01-24 17:55:43+00:00,2025-01-24 17:55:33+00:00,https://github.com/odoo/odoo/pull/194013,"[('RD', 'research & development, internal work')]","[{'comment_id': 2596273735, 'issue_id': 2793319539, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194013.png)](https://mergebot.odoo.com/odoo/odoo/pull/194013)', 'created_at': datetime.datetime(2025, 1, 16, 17, 11, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596362846, 'issue_id': 2793319539, 'author': 'ThanhDodeurOdoo', 'body': 'I think it can be retargetted to v17 the flicker issue exists since the introduction of the feature', 'created_at': datetime.datetime(2025, 1, 16, 17, 56, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597931816, 'issue_id': 2793319539, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 33, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598045169, 'issue_id': 2793319539, 'author': 'alexkuhn', 'body': '> @robodoo r-plus\r\n\r\nOops, meant to r-plus that PR instead, mis-r-plus: https://github.com/odoo/odoo/pull/193577', 'created_at': datetime.datetime(2025, 1, 17, 10, 54, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598066230, 'issue_id': 2793319539, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 59, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598169758, 'issue_id': 2793319539, 'author': 'robodoo', 'body': ""@alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 11, 35, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598647152, 'issue_id': 2793319539, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 15, 46, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598740607, 'issue_id': 2793319539, 'author': 'robodoo', 'body': ""@alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 16, 33, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613091303, 'issue_id': 2793319539, 'author': 'alexkuhn', 'body': 'Fixed by https://github.com/odoo/odoo/pull/194103', 'created_at': datetime.datetime(2025, 1, 24, 17, 55, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:11:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194013.png)](https://mergebot.odoo.com/odoo/odoo/pull/194013)

ThanhDodeurOdoo on (2025-01-16 17:56:21 UTC): I think it can be retargetted to v17 the flicker issue exists since the introduction of the feature

alexkuhn (Issue Creator) on (2025-01-17 10:33:59 UTC): @robodoo r+

alexkuhn (Issue Creator) on (2025-01-17 10:54:11 UTC): Oops, meant to r-plus that PR instead, mis-r-plus: https://github.com/odoo/odoo/pull/193577

alexkuhn (Issue Creator) on (2025-01-17 10:59:24 UTC): @robodoo r+

robodoo on (2025-01-17 11:35:35 UTC): @alexkuhn 'ci/runbot' failed on this reviewed PR.

alexkuhn (Issue Creator) on (2025-01-17 15:46:13 UTC): @robodoo r+

robodoo on (2025-01-17 16:33:34 UTC): @alexkuhn 'ci/runbot' failed on this reviewed PR.

alexkuhn (Issue Creator) on (2025-01-24 17:55:41 UTC): Fixed by https://github.com/odoo/odoo/pull/194103

"
2793314738,pull_request,closed,,[FIX] stock: clean context before scrap validation,"Steps to reproduce the bug:
- Create a storable product “P1”:
    - UoM: g
- Go to inventory > operation > Scrap:
    - Create a new one: - product: P1 - UoM: KG - Quantity: 1

- Validate the scrap
- A wizard is triggered indicating insufficient stock quantity.
- validate it

Problem:
The quantity in the scrap is updated to 1000 kg, and the related move is created with a quantity of 1000 kg.

opw-4485849
",DjamelTouati,2025-01-16 17:08:45+00:00,[],2025-01-30 11:04:13+00:00,2025-01-30 11:04:13+00:00,https://github.com/odoo/odoo/pull/194012,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596268899, 'issue_id': 2793314738, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194012.png)](https://mergebot.odoo.com/odoo/odoo/pull/194012)', 'created_at': datetime.datetime(2025, 1, 16, 17, 8, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596269592, 'issue_id': 2793314738, 'author': 'DjamelTouati', 'body': 'FYI, before this PR (in V17.0)  the issue is fixed in: https://github.com/odoo/odoo/pull/176186/files', 'created_at': datetime.datetime(2025, 1, 16, 17, 9, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623975784, 'issue_id': 2793314738, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 9, 36, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 17:08:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194012.png)](https://mergebot.odoo.com/odoo/odoo/pull/194012)

DjamelTouati (Issue Creator) on (2025-01-16 17:09:19 UTC): FYI, before this PR (in V17.0)  the issue is fixed in: https://github.com/odoo/odoo/pull/176186/files

Whenrow on (2025-01-30 09:36:06 UTC): robodoo r+

"
2793261929,pull_request,closed,,[FW][FIX] web: remove error notification when loading an image,"There is already a placeholder image displayed when an image fails to load.

opw-4419565

Forward-Port-Of: odoo/odoo#193825",fw-bot,2025-01-16 16:44:10+00:00,[],2025-01-31 18:27:03+00:00,2025-01-17 18:26:21+00:00,https://github.com/odoo/odoo/pull/194011,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596213010, 'issue_id': 2793261929, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194011.png)](https://mergebot.odoo.com/odoo/odoo/pull/194011)', 'created_at': datetime.datetime(2025, 1, 16, 16, 44, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596213028, 'issue_id': 2793261929, 'author': 'fw-bot', 'body': '@hubvd @aab-odoo cherrypicking of pull request odoo/odoo#193825 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/views/fields/image/image_field.js\nCONFLICT (content): Merge conflict in addons/web/static/src/views/fields/image/image_field.js\nAuto-merging addons/web/static/src/views/fields/image_url/image_url_field.js\nCONFLICT (content): Merge conflict in addons/web/static/src/views/fields/image_url/image_url_field.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 16, 44, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598147553, 'issue_id': 2793261929, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 23, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:44:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194011.png)](https://mergebot.odoo.com/odoo/odoo/pull/194011)

fw-bot (Issue Creator) on (2025-01-16 16:44:12 UTC): @hubvd @aab-odoo cherrypicking of pull request odoo/odoo#193825 failed.

stdout:
```
Auto-merging addons/web/static/src/views/fields/image/image_field.js
CONFLICT (content): Merge conflict in addons/web/static/src/views/fields/image/image_field.js
Auto-merging addons/web/static/src/views/fields/image_url/image_url_field.js
CONFLICT (content): Merge conflict in addons/web/static/src/views/fields/image_url/image_url_field.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

hubvd on (2025-01-17 11:23:57 UTC): @robodoo r+

"
2793240925,pull_request,closed,,"[FIX] account,point_of_sale: iOS downoad invoice popup","When downloading an invoice from the POS on iOS the PoS would be
reloaded after closing the download popup.

Steps to reproduce:
-------------------
* Open PoS on iOS
* Make an order and invoice it
> Observation: After closing the invoice you are back on the product
screen

Why the fix:
------------
We open the download invoice popup in a new tab so that the PoS is not
reloaded after closing the popup.

opw-4471713",robinengels,2025-01-16 16:34:54+00:00,[],2025-02-03 19:00:27+00:00,2025-01-20 18:50:15+00:00,https://github.com/odoo/odoo/pull/194010,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('18.2', None)]","[{'comment_id': 2596191755, 'issue_id': 2793240925, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194010.png)](https://mergebot.odoo.com/odoo/odoo/pull/194010)', 'created_at': datetime.datetime(2025, 1, 16, 16, 34, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598378326, 'issue_id': 2793240925, 'author': 'robinengels', 'body': ""@davidmonnom As we are changing some method signature it's better to do it in master, and we have another fix for stable that doesn't modify signatures here : https://github.com/odoo/odoo/pull/194000"", 'created_at': datetime.datetime(2025, 1, 17, 13, 32, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598509606, 'issue_id': 2793240925, 'author': 'robinengels', 'body': ""@jbw-odoo Could you check this PR ? It's mostly about PoS but we are changing a little bit in the accouting module"", 'created_at': datetime.datetime(2025, 1, 17, 14, 38, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:34:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194010.png)](https://mergebot.odoo.com/odoo/odoo/pull/194010)

robinengels (Issue Creator) on (2025-01-17 13:32:57 UTC): @davidmonnom As we are changing some method signature it's better to do it in master, and we have another fix for stable that doesn't modify signatures here : https://github.com/odoo/odoo/pull/194000

robinengels (Issue Creator) on (2025-01-17 14:38:02 UTC): @jbw-odoo Could you check this PR ? It's mostly about PoS but we are changing a little bit in the accouting module

"
2793217662,pull_request,closed,,[FW][FIX] pos_mercado_pago: wrong attribute was chosen,"Before this commit:
Nothing would happen after a mercado pago webhook notification received.

Since 17.4, `payment_method` attribute have been changed to `payment_method_id`. Thus it was returning `undefined` and silently fail to update the line

After this commit:
Call `handleMercadoPagoWebhook` on notification received as intended

opw-4349957

Forward-Port-Of: odoo/odoo#193784",fw-bot,2025-01-16 16:24:58+00:00,[],2025-01-30 22:24:14+00:00,2025-01-16 21:56:40+00:00,https://github.com/odoo/odoo/pull/194009,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2596167955, 'issue_id': 2793217662, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194009.png)](https://mergebot.odoo.com/odoo/odoo/pull/194009)', 'created_at': datetime.datetime(2025, 1, 16, 16, 24, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596167980, 'issue_id': 2793217662, 'author': 'fw-bot', 'body': '@lse-odoo @davidmonnom this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193970\n* odoo/odoo#193946\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 16, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596536628, 'issue_id': 2793217662, 'author': 'lse-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 19, 1, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:24:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194009.png)](https://mergebot.odoo.com/odoo/odoo/pull/194009)

fw-bot (Issue Creator) on (2025-01-16 16:25:00 UTC): @lse-odoo @davidmonnom this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193970
* odoo/odoo#193946

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lse-odoo on (2025-01-16 19:01:09 UTC): @robodoo r+

"
2793214364,pull_request,closed,,[FIX] discuss: prevents inset video from blinking,"Before this commit, the inset card would be re-rendered too often which caused noticeable blinking due to the slow nature of starting a videoStream in a video element.

This commit fixes this issue by preventing the update of the inset card data when not necessary.

",ThanhDodeurOdoo,2025-01-16 16:23:26+00:00,[],2025-01-16 17:20:51+00:00,2025-01-16 17:20:51+00:00,https://github.com/odoo/odoo/pull/194008,"[('RD', 'research & development, internal work')]","[{'comment_id': 2596164447, 'issue_id': 2793214364, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194008.png)](https://mergebot.odoo.com/odoo/odoo/pull/194008)', 'created_at': datetime.datetime(2025, 1, 16, 16, 23, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:23:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194008.png)](https://mergebot.odoo.com/odoo/odoo/pull/194008)

"
2793191041,pull_request,closed,,[FW][REM] html_builder: remove empty file,"In the forward port #190318 while fixing conflict, a new empty file from another projet was accedentally sled in the commit. This commit removes this empty useless file.

Forward-Port-Of: odoo/odoo#193907",fw-bot,2025-01-16 16:13:14+00:00,[],2025-01-20 12:56:46+00:00,2025-01-20 12:56:45+00:00,https://github.com/odoo/odoo/pull/194007,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2596140216, 'issue_id': 2793191041, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194007.png)](https://mergebot.odoo.com/odoo/odoo/pull/194007)', 'created_at': datetime.datetime(2025, 1, 16, 16, 13, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596140323, 'issue_id': 2793191041, 'author': 'fw-bot', 'body': '@fdardenne @sobo-odoo cherrypicking of pull request odoo/odoo#193907 failed.\n\nstdout:\n```\nYou are currently cherry-picking commit 393f124406b616061072189a7e7768ae02f967be.\n```\n\nstderr:\n```\nThe previous cherry-pick is now empty, possibly due to conflict resolution.\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 16, 13, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172859, 'issue_id': 2793191041, 'author': 'fw-bot', 'body': '@fdardenne @sobo-odoo this forward port of odoo/odoo#193907 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602361400, 'issue_id': 2793191041, 'author': 'sobo-odoo', 'body': 'Closing this, as the file was not forward-ported above 18.0 :+1:', 'created_at': datetime.datetime(2025, 1, 20, 12, 56, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:13:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194007.png)](https://mergebot.odoo.com/odoo/odoo/pull/194007)

fw-bot (Issue Creator) on (2025-01-16 16:13:17 UTC): @fdardenne @sobo-odoo cherrypicking of pull request odoo/odoo#193907 failed.

stdout:
```
You are currently cherry-picking commit 393f124406b616061072189a7e7768ae02f967be.
```

stderr:
```
The previous cherry-pick is now empty, possibly due to conflict resolution.
```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:14 UTC): @fdardenne @sobo-odoo this forward port of odoo/odoo#193907 is awaiting action (not merged or closed).

sobo-odoo on (2025-01-20 12:56:45 UTC): Closing this, as the file was not forward-ported above 18.0 :+1:

"
2793181704,pull_request,closed,,[FW][IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.

Forward-Port-Of: odoo/odoo#193935",fw-bot,2025-01-16 16:09:24+00:00,[],2025-01-31 15:10:40+00:00,2025-01-17 15:07:56+00:00,https://github.com/odoo/odoo/pull/194006,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2596130302, 'issue_id': 2793181704, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194006.png)](https://mergebot.odoo.com/odoo/odoo/pull/194006)', 'created_at': datetime.datetime(2025, 1, 16, 16, 9, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596130330, 'issue_id': 2793181704, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 16, 9, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:09:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194006.png)](https://mergebot.odoo.com/odoo/odoo/pull/194006)

fw-bot (Issue Creator) on (2025-01-16 16:09:26 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2793179738,pull_request,closed,,[FIX] website_sale: make product variant chatter consistent w/ template,"Versions
--------
- 16.0+

Steps
-----
1. Have a user with only access to ""Sales User: Own Documents Only"";
2. open a product variant page;
3. add a comment in the chatter.

Issue
-----
Access Error

Cause
-----
Commit 35a07975deb0 added `_mail_post_access = 'read'` to the `product.template` model. This allows users with read-only access to still comment on `product.template` records.

This was not done for product variants, leading to an inconsistency where an internal user can comment on product templates, but not variants.

Solution
--------
Add `_mail_post_access = 'read'` to `product.product` as well.

opw-4189326",lvsz,2025-01-16 16:08:30+00:00,[],2025-01-30 19:01:01+00:00,2025-01-16 18:49:23+00:00,https://github.com/odoo/odoo/pull/194005,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596128264, 'issue_id': 2793179738, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194005.png)](https://mergebot.odoo.com/odoo/odoo/pull/194005)', 'created_at': datetime.datetime(2025, 1, 16, 16, 8, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596143740, 'issue_id': 2793179738, 'author': 'lvsz', 'body': 'THD is still looking into whether this should be the default behavior (i.e. add the setting in `product` instead of `website_sale`), but for now he said post access should at least be consistent between product templates & product variants.', 'created_at': datetime.datetime(2025, 1, 16, 16, 14, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 16:08:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194005.png)](https://mergebot.odoo.com/odoo/odoo/pull/194005)

lvsz (Issue Creator) on (2025-01-16 16:14:44 UTC): THD is still looking into whether this should be the default behavior (i.e. add the setting in `product` instead of `website_sale`), but for now he said post access should at least be consistent between product templates & product variants.

"
2793135132,pull_request,closed,,[FIX] payment_worldline: make API request not depend on locale variable,"Versions
--------
- 18.0+

Steps
-----
1. Set locale variable `LC_TIME` to `be_FR.UTF-8` via command line;
2. do the same for `LC_ALL`;
3. start Odoo server;
4. attempt to make a payment via Worldline.

Example updating locale for a single shell session:
```bash
$ export LC_TIME=be_FR.UTF-8
$ export LC_ALL=$LC_TIME
$ ./odoo-bin
```

Issue
-----
Invalid API request: ACCESS_TO_MERCHANT_NOT_ALLOWED

Cause
-----
The date string sent to the Worldline API is formatted via the `datetime.strftime` method to be RFC 1123 compliant. The issue is that the result of this method is locale-dependent. If it's not set to `en_US.UTF-8`, it no longer adheres to the format expected by Worldline.

Solution
--------
Use the `format_date_time` method from the Python's standard `wsgiref` library. This method will always return a RFC 1123 compliant date string, regardless of locale setting.

opw-4472440",lvsz,2025-01-16 15:49:36+00:00,[],2025-02-06 03:07:08+00:00,2025-01-23 02:57:54+00:00,https://github.com/odoo/odoo/pull/194004,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596081713, 'issue_id': 2793135132, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194004.png)](https://mergebot.odoo.com/odoo/odoo/pull/194004)', 'created_at': datetime.datetime(2025, 1, 16, 15, 49, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607204731, 'issue_id': 2793135132, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 13, 7, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607222525, 'issue_id': 2793135132, 'author': 'robodoo', 'body': ""@lvsz 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 22, 13, 15, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:49:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194004.png)](https://mergebot.odoo.com/odoo/odoo/pull/194004)

lvsz (Issue Creator) on (2025-01-22 13:07:39 UTC): robodoo r+

robodoo on (2025-01-22 13:15:13 UTC): @lvsz 'ci/runbot' failed on this reviewed PR.

"
2793109037,pull_request,open,,"[REF] account: ""Amount"" field name changed to ""Subtotal""","Description of the issue/feature this PR addresses:
""Amount"" is in price_subtotal and price_total

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",feg-adhoc,2025-01-16 15:38:21+00:00,[],2025-01-30 15:27:06+00:00,,https://github.com/odoo/odoo/pull/194003,"[('Accounting', '')]","[{'comment_id': 2596055210, 'issue_id': 2793109037, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194003.png)](https://mergebot.odoo.com/odoo/odoo/pull/194003)', 'created_at': datetime.datetime(2025, 1, 16, 15, 38, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597638293, 'issue_id': 2793109037, 'author': 'jbw-odoo', 'body': 'Hi @feg-adhoc, thx for the contribution.\r\n@chklop , was last changed with task https://www.odoo.com/odoo/967/tasks/4019610, any take on this ?', 'created_at': datetime.datetime(2025, 1, 17, 7, 56, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624387187, 'issue_id': 2793109037, 'author': 'feg-adhoc', 'body': '@jbw-odoo @chklop Hi there! Any updates on this PR?', 'created_at': datetime.datetime(2025, 1, 30, 12, 34, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624808939, 'issue_id': 2793109037, 'author': 'chklop', 'body': 'No this was done on purpose, why would we change it? You either have a DB configured mostly with prices included or not, and depending of that configuration the meaning of that column makes sense.', 'created_at': datetime.datetime(2025, 1, 30, 15, 27, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:38:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194003.png)](https://mergebot.odoo.com/odoo/odoo/pull/194003)

jbw-odoo on (2025-01-17 07:56:30 UTC): Hi @feg-adhoc, thx for the contribution.
@chklop , was last changed with task https://www.odoo.com/odoo/967/tasks/4019610, any take on this ?

feg-adhoc (Issue Creator) on (2025-01-30 12:34:08 UTC): @jbw-odoo @chklop Hi there! Any updates on this PR?

chklop on (2025-01-30 15:27:06 UTC): No this was done on purpose, why would we change it? You either have a DB configured mostly with prices included or not, and depending of that configuration the meaning of that column makes sense.

"
2793067683,pull_request,closed,,[FIX] stock_account: prevent lot valuation if quant without lot,"When Lot valuation is enabled on a product, it is not longer possible to create a move without lot. Hence, if you had a valued quantity without lot before enabling lot valuation, it was impossible to update or empty this quantity in any way. Leaving you with an unusable StockQuant. Furthermore, when enabling the lot valuation, no layer was created for the quants without lot, creating a permanent discrepancy between the stock and valuation. This discrepancy was still present even after disabling the lot valuation.

To fix this issue, we do not allow the lot valuation if there is a quant without lot in a valued location.
![image](https://github.com/user-attachments/assets/71dd7d28-9bba-4215-af2c-96daa8825825)


+ Fix negative lot error message

PREV:
![image](https://github.com/user-attachments/assets/42c7e297-8b1d-4a3c-acae-aed1954001e1)


NOW:
![image](https://github.com/user-attachments/assets/aa03b99a-a8b9-48e0-b7b8-a3d9286c4194)

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",DavidFesquet,2025-01-16 15:20:56+00:00,[],2025-01-31 10:37:23+00:00,2025-01-31 10:37:23+00:00,https://github.com/odoo/odoo/pull/194001,"[('RD', 'research & development, internal work')]","[{'comment_id': 2596011687, 'issue_id': 2793067683, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194001.png)](https://mergebot.odoo.com/odoo/odoo/pull/194001)', 'created_at': datetime.datetime(2025, 1, 16, 15, 20, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626497617, 'issue_id': 2793067683, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 31, 7, 42, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:20:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194001.png)](https://mergebot.odoo.com/odoo/odoo/pull/194001)

Whenrow on (2025-01-31 07:42:19 UTC): robodoo r+

"
2793063866,pull_request,closed,,[FIX] point_of_sale: iOS downoad invoice popup,"When downloading an invoice from the POS on iOS the PoS would be
reloaded after closing the download popup.

Steps to reproduce:
-------------------
* Open PoS on iOS
* Make an order and invoice it
> Observation: After closing the invoice you are back on the product
screen

Why the fix:
------------
We open the download invoice popup in a new tab so that the PoS is not
reloaded after closing the popup.

opw-4471713",robinengels,2025-01-16 15:19:21+00:00,[],2025-01-31 20:32:04+00:00,2025-01-17 20:12:27+00:00,https://github.com/odoo/odoo/pull/194000,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2596007841, 'issue_id': 2793063866, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194000.png)](https://mergebot.odoo.com/odoo/odoo/pull/194000)', 'created_at': datetime.datetime(2025, 1, 16, 15, 19, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:19:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194000.png)](https://mergebot.odoo.com/odoo/odoo/pull/194000)

"
2793050602,pull_request,closed,,[FIX] account: no frequent accounts,"The name search on the account field (account.account on account move line) looks for frequently used accounts for the partner. When no search text is provided, the name search suggests accounts that were previously used. When there are no frequent accounts, the name search returns nothing.

To reproduce

- create a vendor bill
- select a partner that has never been billed
- add a line
- click the account many2one field dropdown

Since no account options are available, the dropdown flashes open and quickly disappears.
",h4818,2025-01-16 15:14:11+00:00,[],2025-02-02 05:47:08+00:00,2025-01-19 02:58:49+00:00,https://github.com/odoo/odoo/pull/193999,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595993089, 'issue_id': 2793050602, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193999.png)](https://mergebot.odoo.com/odoo/odoo/pull/193999)', 'created_at': datetime.datetime(2025, 1, 16, 15, 14, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:14:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193999.png)](https://mergebot.odoo.com/odoo/odoo/pull/193999)

"
2793046064,pull_request,closed,,"[IMP] im_livechat, mail: clearer leaving livechat conversation message","This commit changes the toast notification message when leaving a livechat conversation.

task-4481370",alexkuhn,2025-01-16 15:12:17+00:00,[],2025-01-16 19:30:48+00:00,2025-01-16 19:29:27+00:00,https://github.com/odoo/odoo/pull/193998,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595988491, 'issue_id': 2793046064, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193998.png)](https://mergebot.odoo.com/odoo/odoo/pull/193998)', 'created_at': datetime.datetime(2025, 1, 16, 15, 12, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595993002, 'issue_id': 2793046064, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 15, 14, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:12:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193998.png)](https://mergebot.odoo.com/odoo/odoo/pull/193998)

alexkuhn (Issue Creator) on (2025-01-16 15:14:12 UTC): @robodoo r+

"
2793039183,pull_request,closed,,"[FIX] digest, various: fix URLs to new format","Some URLs in the digest emails are currently broken due to an outdated URL format.

### Steps to reproduce

* Install `digest` and `crm` modules
* Go to Settings > Technical > Digest Emails
* Select the ""Your Odoo Periodic Digest"" digest and send it
* Check the sent email and click on any of the ""Open Email"" links

You should encounter an error indicating that the action does not exist.

Although the reproduction steps use the `crm` module as an example, this issue occurs with all the modules listed in the title.

### Cause

The ""Open Report"" URLs were not updated to account for the new URL format.

opw-4405288
opw-4502625",ushyme,2025-01-16 15:09:25+00:00,[],2025-02-03 13:08:45+00:00,2025-02-03 13:08:45+00:00,https://github.com/odoo/odoo/pull/193997,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595981088, 'issue_id': 2793039183, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193997.png)](https://mergebot.odoo.com/odoo/odoo/pull/193997)', 'created_at': datetime.datetime(2025, 1, 16, 15, 9, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598418813, 'issue_id': 2793039183, 'author': 'tde-banana-odoo', 'body': 'Side remark: at that point you can use a generic ""addon"" name like ``[FIX] digest, various: fix URLs to new format`` . We can find the actual addons in the diff ): .', 'created_at': datetime.datetime(2025, 1, 17, 13, 54, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598469611, 'issue_id': 2793039183, 'author': 'ushyme', 'body': 'Hello @tde-banana-odoo, \r\nthanks for the info 👍🏾, I made the change.', 'created_at': datetime.datetime(2025, 1, 17, 14, 18, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630495423, 'issue_id': 2793039183, 'author': 'epictete', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 10, 7, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:09:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193997.png)](https://mergebot.odoo.com/odoo/odoo/pull/193997)

tde-banana-odoo on (2025-01-17 13:54:42 UTC): Side remark: at that point you can use a generic ""addon"" name like ``[FIX] digest, various: fix URLs to new format`` . We can find the actual addons in the diff ): .

ushyme (Issue Creator) on (2025-01-17 14:18:44 UTC): Hello @tde-banana-odoo, 
thanks for the info 👍🏾, I made the change.

epictete on (2025-02-03 10:07:30 UTC): @robodoo r+

"
2793021172,pull_request,open,,[FIX] stock: display correct description 3 step incoming,"There is an inconsistency in the product description during 3-step incoming shipments.

How to reproduce the issue:

- Enable three-step incoming shipments.

- Create a product with a description for receipts (e.g., 'receipt') and a different description for internal transfers (e.g., 'transfer').

- Create a receipt with the product, validate it, and open the corresponding picking for the internal transfer.

The move_line description_picking is taken from the receipt description instead of the internal transfer description (it shows 'receipt' instead of 'transfer').

opw-4406582

PR with very similar issue: https://github.com/odoo/enterprise/pull/77283




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",gteboul,2025-01-16 15:01:53+00:00,[],2025-02-06 13:07:01+00:00,,https://github.com/odoo/odoo/pull/193996,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595962278, 'issue_id': 2793021172, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193996.png)](https://mergebot.odoo.com/odoo/odoo/pull/193996)', 'created_at': datetime.datetime(2025, 1, 16, 15, 1, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:01:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193996.png)](https://mergebot.odoo.com/odoo/odoo/pull/193996)

"
2793019078,pull_request,closed,,[FIX] pos_restaurant: remove dead code,"Remove dead code forgotten in previous commit


",davidmonnom,2025-01-16 15:01:00+00:00,[],2025-01-31 12:57:43+00:00,2025-01-17 12:55:48+00:00,https://github.com/odoo/odoo/pull/193995,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595959817, 'issue_id': 2793019078, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193995.png)](https://mergebot.odoo.com/odoo/odoo/pull/193995)', 'created_at': datetime.datetime(2025, 1, 16, 15, 1, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597965095, 'issue_id': 2793019078, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 40, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 15:01:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193995.png)](https://mergebot.odoo.com/odoo/odoo/pull/193995)

caburj on (2025-01-17 10:40:16 UTC): robodoo r+

"
2793014761,pull_request,closed,,[FIX] account: cash basis journal for last payment,"If you pay an invoice with multiple payments some roundings are made for the taxes. On the last payment, the error from those roundings are put on a move to make sure that the exact amount of the invoice is paid.

That move was put on the wrong journal. It was put in the 'Exchange Difference' journal instead of the 'Cash Basis Taxes'.

opw-4460696

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",rugo-odoo,2025-01-16 14:59:21+00:00,[],2025-02-07 16:47:54+00:00,2025-01-24 16:43:40+00:00,https://github.com/odoo/odoo/pull/193994,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595955405, 'issue_id': 2793014761, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193994.png)](https://mergebot.odoo.com/odoo/odoo/pull/193994)', 'created_at': datetime.datetime(2025, 1, 16, 14, 59, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:59:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193994.png)](https://mergebot.odoo.com/odoo/odoo/pull/193994)

"
2793006621,pull_request,closed,,[FIX] core: JS tests / tours needing focus,"Apparently in normal mode (and thus the new headless mode) Chrome does not focus the document. The `activeElement` is correctly set, but `document.hasFocus()` always returns `false` and per-element focus events are suppressed.

That makes tests testing or needing focus fail in the new headless mode as well as well as impossible (or at least frustrating) to `debug`.

Enabling ""focus emulation"", which corresponds to the ""Emulate a focused page"" UI option, seems to resolve the issue.

Fixes reliably failing tests

- `/im_livechat:ExternalTestSuite.test_external_livechat`
- `/account:TestUI.test_01_account_tax_groups_tour`
- `/account_accountant:TestBankRecWidget.test_tour_bank_rec_widget`
- `/web_editor:TestOdooEditor.test_odoo_editor_suite`

Backport of: odoo/odoo@0aaf98b77feaa15f5eb30e1c251f5765e8afbfa5
",pparidans,2025-01-16 14:56:21+00:00,['pparidans'],2025-01-31 10:24:48+00:00,2025-01-17 10:05:08+00:00,https://github.com/odoo/odoo/pull/193993,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595947592, 'issue_id': 2793006621, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193993.png)](https://mergebot.odoo.com/odoo/odoo/pull/193993)', 'created_at': datetime.datetime(2025, 1, 16, 14, 56, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597732348, 'issue_id': 2793006621, 'author': 'xmo-odoo', 'body': '@robodoo up to 18.0', 'created_at': datetime.datetime(2025, 1, 17, 8, 53, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597732406, 'issue_id': 2793006621, 'author': 'robodoo', 'body': ""Forward-porting to '18.0'."", 'created_at': datetime.datetime(2025, 1, 17, 8, 53, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:56:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193993.png)](https://mergebot.odoo.com/odoo/odoo/pull/193993)

xmo-odoo on (2025-01-17 08:53:50 UTC): @robodoo up to 18.0

robodoo on (2025-01-17 08:53:52 UTC): Forward-porting to '18.0'.

"
2793001981,pull_request,closed,,[FW][FIX] base_import: stop importing when everything has been imported,"Versions
--------
- 17.0+

Steps
-----
1. Create a pricelist with 200 price rules;
2. export pricelist to xlsx;
3. delete original pricelist;
4. import pricelist, setting batch size to 100.

Test files ready for import:
- [200_products.xlsx](https://github.com/user-attachments/files/17848187/200_products.xlsx)
- [200_pricelist_rules.xlsx](https://github.com/user-attachments/files/17848188/200_pricelist_rules.xlsx)

Issue
-----
Pricelist is imported with 400 price rules.

Cause
-----
The back-end signals there's nothing left to import by having `nextrow` be falsy[^1]. The front-end ignores this, and continues looping until it's taken as many steps as it initially planned.

The upfront `totalSteps` calculation is too high when an imported record has a number of nested relational records that's larger than the batch size.

Solution
--------
If the ORM returns a falsy `nextrow` value, call `stopImport`.

opw-4164056

[^1]: see note on f58368210c9c

Forward-Port-Of: odoo/odoo#193817
Forward-Port-Of: odoo/odoo#188092",fw-bot,2025-01-16 14:54:24+00:00,[],2025-01-30 19:33:35+00:00,2025-01-16 19:29:41+00:00,https://github.com/odoo/odoo/pull/193992,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595942543, 'issue_id': 2793001981, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193992.png)](https://mergebot.odoo.com/odoo/odoo/pull/193992)', 'created_at': datetime.datetime(2025, 1, 16, 14, 54, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595942581, 'issue_id': 2793001981, 'author': 'fw-bot', 'body': '@lvsz @iucapad cherrypicking of pull request odoo/odoo#188092 failed.\n\nstdout:\n```\nAuto-merging addons/base_import/static/src/import_model.js\nCONFLICT (content): Merge conflict in addons/base_import/static/src/import_model.js\nAuto-merging addons/base_import/static/tests/import_action_tests.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 54, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596136347, 'issue_id': 2793001981, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 16, 11, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:54:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193992.png)](https://mergebot.odoo.com/odoo/odoo/pull/193992)

fw-bot (Issue Creator) on (2025-01-16 14:54:26 UTC): @lvsz @iucapad cherrypicking of pull request odoo/odoo#188092 failed.

stdout:
```
Auto-merging addons/base_import/static/src/import_model.js
CONFLICT (content): Merge conflict in addons/base_import/static/src/import_model.js
Auto-merging addons/base_import/static/tests/import_action_tests.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-16 16:11:46 UTC): robodoo r+

"
2792986191,pull_request,closed,,[FW][FIX] sale_timesheet: Allow users without Sales access to record time,"This PR addresses the issue of users without Sales access not being able to record on time on timesheets that are linked to a sale order line.

If a user with access to Projects and Timesheets, but not Sales, wants to record time on a timesheet linked to a sales order, they will get an access rights error. This is because we check to see if there is an analytic distribution associated with the sale order line associated with the project task. However, this check is done without `sudo()` access in its current state. This PR provides that access because the result is not propagated further than simply evaluating whether or not there is an analytic distribution at all.

The result is that this workflow is no longer blocking for users who should be able to timesheet, but not necessarily view or edit the sale order.

This can be tested on Runbot by following these steps:

Configuration:
- User A does not have any Sales access, but has full rights to Projects and Timesheets
- Have a service product that creates a task in a project
- Have a sale order made for this product by User B, who does have Sales access

Now, 
1) On User A, navigate to the associated project and task made by the sale order from earlier
2) Click on the Timesheets tab in the notebook part of the view
3) Attempt to record an hour of work by adding a line to the timesheet, then clicking the ""save"" button

Prior to this PR, the user will get an access rights error. Once this is merged, that error will no longer appear. 

opw-4409571

Forward-Port-Of: odoo/odoo#193311",fw-bot,2025-01-16 14:47:54+00:00,[],2025-01-30 20:32:51+00:00,2025-01-16 20:13:35+00:00,https://github.com/odoo/odoo/pull/193991,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595926511, 'issue_id': 2792986191, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193991.png)](https://mergebot.odoo.com/odoo/odoo/pull/193991)', 'created_at': datetime.datetime(2025, 1, 16, 14, 47, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595926540, 'issue_id': 2792986191, 'author': 'fw-bot', 'body': '@hahu-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193956\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 47, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596102654, 'issue_id': 2792986191, 'author': 'xavierbol', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 15, 58, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596355187, 'issue_id': 2792986191, 'author': 'hahu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 17, 52, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596355254, 'issue_id': 2792986191, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 16, 17, 52, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:47:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193991.png)](https://mergebot.odoo.com/odoo/odoo/pull/193991)

fw-bot (Issue Creator) on (2025-01-16 14:47:56 UTC): @hahu-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193956

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

xavierbol on (2025-01-16 15:58:04 UTC): robodoo r+

hahu-odoo on (2025-01-16 17:52:02 UTC): @robodoo r+

robodoo on (2025-01-16 17:52:05 UTC): This PR is already reviewed, reviewing it again is useless.

"
2792954415,pull_request,closed,,[FIX] hw_drivers: ensure lib directory before iterdir,"We now also delete `lib/` directory before deleting/downloading new IoT handlers.
In community, this directory does not exist, resulting in Path error while trying to `iterdir()` on it.
We now look for files recursively inside `iot_handlers/`, and provide the list to the updated method `unlink_file` that now accepts multiple arguments to avoid excessively switching between rw/ro  filesystem modes.
",loouis-t,2025-01-16 14:35:14+00:00,[],2025-01-30 19:00:59+00:00,2025-01-16 18:41:23+00:00,https://github.com/odoo/odoo/pull/193990,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595894716, 'issue_id': 2792954415, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193990.png)](https://mergebot.odoo.com/odoo/odoo/pull/193990)', 'created_at': datetime.datetime(2025, 1, 16, 14, 35, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596068047, 'issue_id': 2792954415, 'author': 'loouis-t', 'body': ""@odoo/rd-security could you have a look at this please?\r\n\r\n## Context\r\n\r\nWe encountered an issue while trying to delete handlers when `lib/` directory was not present on the IoT Box (always the case in community).\r\nWhile testing a fix, we noticed that we were switching from r/w mode to r/o mode for every file to delete.\r\n\r\n### Solution proposed\r\n\r\nWe optimized this by allowing the method `unlink_file` to accept multiple arguments.\r\n\r\n## Security issues\r\n\r\n- `iot_handlers = Path(file_path(f'hw_drivers/iot_handlers'))`\r\n  - **Reason for the use:** need to get path from Odoo root  to `iot_handlers/`\r\n  - **Safe because:** path is hardcoded"", 'created_at': datetime.datetime(2025, 1, 16, 15, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596124528, 'issue_id': 2792954415, 'author': 'mart-e', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 16, 16, 6, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:35:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193990.png)](https://mergebot.odoo.com/odoo/odoo/pull/193990)

loouis-t (Issue Creator) on (2025-01-16 15:44:00 UTC): @odoo/rd-security could you have a look at this please?

## Context

We encountered an issue while trying to delete handlers when `lib/` directory was not present on the IoT Box (always the case in community).
While testing a fix, we noticed that we were switching from r/w mode to r/o mode for every file to delete.

### Solution proposed

We optimized this by allowing the method `unlink_file` to accept multiple arguments.

## Security issues

- `iot_handlers = Path(file_path(f'hw_drivers/iot_handlers'))`
  - **Reason for the use:** need to get path from Odoo root  to `iot_handlers/`
  - **Safe because:** path is hardcoded

mart-e on (2025-01-16 16:06:58 UTC): @robodoo override=ci/security

"
2792941387,pull_request,closed,,[FW][FIX] website: do not observe mutations making s_popup visible,"Description of the issue this PR addresses:

Pressing enter in the `s_popup` snippet after making it visible via the right panel would hide the popup. This occurred because the mutation observer detected changes which shows the modal and rolled them back during the `insertLineBreak` operation. This commit ensures that those mutations are not observed.

task-4255083

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191810",fw-bot,2025-01-16 14:30:09+00:00,[],2025-02-04 17:22:42+00:00,2025-01-21 17:22:40+00:00,https://github.com/odoo/odoo/pull/193989,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595881570, 'issue_id': 2792941387, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193989.png)](https://mergebot.odoo.com/odoo/odoo/pull/193989)', 'created_at': datetime.datetime(2025, 1, 16, 14, 30, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595881607, 'issue_id': 2792941387, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 30, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595982376, 'issue_id': 2792941387, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 15, 9, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174099, 'issue_id': 2792941387, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476540, 'issue_id': 2792941387, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604577879, 'issue_id': 2792941387, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 21, 12, 19, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604780904, 'issue_id': 2792941387, 'author': 'deso-odoo', 'body': '@dmo-odoo The red runbot is fixed. I had to change the [trigger](https://github.com/odoo/odoo/pull/193989/files#diff-48add6aa7399847ce233d11383ac8aacd930e4d6dc9e07e9dda3aa87d5e3054cR44) in the tour. Reason being in 17.0 [canContinue](https://github.com/odoo/odoo/blob/17.0/addons/web_tour/static/src/tour_service/tour_compilers.js#L319) would be false due to [isVisible](https://github.com/odoo/odoo/blob/17.0/addons/web_tour/static/src/tour_service/tour_compilers.js#L159) check in it. So for `iframe #wrap.o_editable [data-snippet=""s_popup""]:not(.d-none)` because `iframe #wrap.o_editable [data-snippet=""s_popup""]` would have [`el.offsetHeight` 0](https://github.com/odoo/odoo/blob/17.0/addons/web/static/src/core/utils/ui.js#L44). So I changed `trigger: \'iframe #wrap.o_editable [data-snippet=""s_popup""]:not(.d-none)\'` to `trigger: \'iframe #wrapwrap:has([data-snippet=""s_popup""]:not(.d-none))\'`', 'created_at': datetime.datetime(2025, 1, 21, 13, 45, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604967817, 'issue_id': 2792941387, 'author': 'dmo-odoo', 'body': '@deso-odoo Ok, thanks!\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 14, 59, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:30:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193989.png)](https://mergebot.odoo.com/odoo/odoo/pull/193989)

fw-bot (Issue Creator) on (2025-01-16 14:30:11 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 15:09:59 UTC): @deso-odoo @dmo-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-20 02:02:13 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:43 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 12:19:26 UTC): @deso-odoo @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

deso-odoo on (2025-01-21 13:45:38 UTC): @dmo-odoo The red runbot is fixed. I had to change the [trigger](https://github.com/odoo/odoo/pull/193989/files#diff-48add6aa7399847ce233d11383ac8aacd930e4d6dc9e07e9dda3aa87d5e3054cR44) in the tour. Reason being in 17.0 [canContinue](https://github.com/odoo/odoo/blob/17.0/addons/web_tour/static/src/tour_service/tour_compilers.js#L319) would be false due to [isVisible](https://github.com/odoo/odoo/blob/17.0/addons/web_tour/static/src/tour_service/tour_compilers.js#L159) check in it. So for `iframe #wrap.o_editable [data-snippet=""s_popup""]:not(.d-none)` because `iframe #wrap.o_editable [data-snippet=""s_popup""]` would have [`el.offsetHeight` 0](https://github.com/odoo/odoo/blob/17.0/addons/web/static/src/core/utils/ui.js#L44). So I changed `trigger: 'iframe #wrap.o_editable [data-snippet=""s_popup""]:not(.d-none)'` to `trigger: 'iframe #wrapwrap:has([data-snippet=""s_popup""]:not(.d-none))'`

dmo-odoo on (2025-01-21 14:59:04 UTC): @deso-odoo Ok, thanks!

@robodoo r+

"
2792940600,pull_request,closed,,[FW][IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.

Forward-Port-Of: odoo/odoo#193935",fw-bot,2025-01-16 14:29:51+00:00,[],2025-01-31 12:44:15+00:00,2025-01-17 12:41:08+00:00,https://github.com/odoo/odoo/pull/193988,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595880820, 'issue_id': 2792940600, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193988.png)](https://mergebot.odoo.com/odoo/odoo/pull/193988)', 'created_at': datetime.datetime(2025, 1, 16, 14, 29, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595880838, 'issue_id': 2792940600, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 29, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:29:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193988.png)](https://mergebot.odoo.com/odoo/odoo/pull/193988)

fw-bot (Issue Creator) on (2025-01-16 14:29:53 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2792934775,pull_request,closed,,[IMP] stock: hide XLSX export action in quant list view for moves,"The cogwheel dropdown menu is unwanted and only contains the 'Export All' button, which is disabled with an attribute. This commit extends the existing base tree view for this specific use to avoid interfering with other views that use/extend it.

Task ID: [4471980](https://www.odoo.com/odoo/project/966/tasks/4471980)
",lugr-odoo,2025-01-16 14:27:36+00:00,[],2025-02-07 19:55:43+00:00,2025-01-24 19:17:01+00:00,https://github.com/odoo/odoo/pull/193987,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595875187, 'issue_id': 2792934775, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193987.png)](https://mergebot.odoo.com/odoo/odoo/pull/193987)', 'created_at': datetime.datetime(2025, 1, 16, 14, 27, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612109560, 'issue_id': 2792934775, 'author': 'amoyaux', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 53, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:27:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193987.png)](https://mergebot.odoo.com/odoo/odoo/pull/193987)

amoyaux on (2025-01-24 09:53:55 UTC): robodoo r+

"
2792919432,pull_request,closed,,[IMP] html_editor : add font-family,"Implement a new option in the toolbar that let the user change the text font-family.


task-4285524


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",sebgeelen,2025-01-16 14:21:33+00:00,[],2025-02-04 11:59:30+00:00,2025-02-04 11:59:30+00:00,https://github.com/odoo/odoo/pull/193986,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2595859682, 'issue_id': 2792919432, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193986.png)](https://mergebot.odoo.com/odoo/odoo/pull/193986)', 'created_at': datetime.datetime(2025, 1, 16, 14, 21, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609642305, 'issue_id': 2792919432, 'author': 'cammarosano', 'body': 'ro**d**odoo r+ :stuck_out_tongue:', 'created_at': datetime.datetime(2025, 1, 23, 12, 6, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609974306, 'issue_id': 2792919432, 'author': 'qsm-odoo', 'body': ""@sebgeelen @cammarosano cc @dmo-odoo @lebl-odoo \r\n\r\nI did not check the PR at all but got curious and tested a bit as I was curious about the fonts you would be using. When it comes to the website, I still think we should not do this as it does not make sense to mix fonts at random places in a website and that it would be very limiting anyway, if we don't want to have to handle *importing* the fonts the user wants to be able to use in every pages.\r\n\r\nFor the backend, I guess why not, hopefully the fonts you chose are available on most systems? However, I would recommend you make the fonts suffer the same treatment as all our fonts otherwise you'll definitely have customer tickets about it at some point. See this example to illustrate:\r\n| Default font | Forced Tahoma font with this PR feature |\r\n|--------|--------|\r\n| ![image](https://github.com/user-attachments/assets/b4bb30a4-6e45-41e3-be98-2566a3643ed2) | ![image](https://github.com/user-attachments/assets/8c726cd5-df7f-4774-b2cf-981bc8a24f67) |\r\n\r\n=> See: the default font as a lot of stuff in its definition, but the relevant part is the `Odoo Unicode Support Noto` one. It allows to ensure (at least increase chances) that in all languages, characters will be displayed correctly. We have the `o-add-unicode-support-font` util to add that automatically to all fonts used in the website builder... but since you are applying inline style, I think your only possibility would be to hardcode it in your font application code :+1:"", 'created_at': datetime.datetime(2025, 1, 23, 14, 36, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612041390, 'issue_id': 2792919432, 'author': 'lebl-odoo', 'body': 'Hello @qsm-odoo ,\r\n\r\nThis task is focused on backend. Note that the fonts I listed are what we call ""web safe fonts"", it means all devices are able to use them (they are installed on the device). This is a regular feedback to be able to change the font-family.\r\n\r\nThis task aims to improve the current font-family picker in the website builder : https://www.odoo.com/odoo/project/974/tasks/4285467. For website, the main idea is to override the default behavior to let the use adds its own fonts, the default list from website will still be the one we\'ll use.\r\n\r\nHope it helps', 'created_at': datetime.datetime(2025, 1, 24, 9, 19, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612333684, 'issue_id': 2792919432, 'author': 'qsm-odoo', 'body': '@lebl-odoo I know all that and ""regular feedback"" is not a synonym of ""good feedback"" :wink: What I said remains the same:\r\n\r\n> the fonts I listed are what we call ""web safe fonts"", it means all devices are able to use them (they are installed on the device)\r\n\r\nYou can call them the way you want, that does not make it true unfortunately :smile: I spoke about the Odoo support font but did not mention that those fonts have no effect on many computers... so this could change your vision of this task if you thought that ""web safe fonts"" was a real thing :wink: Here, I tested the task:\r\n![image](https://github.com/user-attachments/assets/1d0012d1-d8da-4286-9728-a902d9c34466)\r\n\r\n**None** of those fonts are on my computer, they all fallback to something else, and that makes 3 of them act exactly the same... and would thus appear as a bug for users.\r\n\r\nUsing the Odoo support font as I mentioned won\'t fix that though: the goal of the Odoo support font is that when you are in this case, there is also even more problem: with some computer not even having a font to display some characters in some other languages, or displaying them badly. So my example would fallback to ""????????"" or something very difficult to read.\r\n\r\nSo:\r\n1. The Odoo support font is needed if you want to ensure that all characters can be displayed and readable.\r\n2. ""Web safe fonts"" do not exist. If your goal here was to have 5 fonts that exist on all computers and are different from each other, the only way is to include them in Odoo.\r\n\r\n> the default list from website will still be the one we\'ll use.\r\n\r\nWhich would be awful, as you would need to import all fonts on all pages... or come up with a system importing them on-the-fly when needed (which is obviously what we would do, but then more code and maintenance for a feature that does not make sense). While with the current system we have, we limit to loading fonts configured by theme choices, not per-page choices. But I know that\'s not the topic here :wink: Changing the font in the backend description is nice, it\'s different for a website.', 'created_at': datetime.datetime(2025, 1, 24, 11, 45, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612445515, 'issue_id': 2792919432, 'author': 'sebgeelen', 'body': ""Some statistics ([source](https://www.cssfontstack.com/))\r\n\r\n[Arial](https://www.cssfontstack.com/Arial) - Win: 99.84% - Mac: 98.74%\r\n[Verdana](https://www.cssfontstack.com/Verdana) - Win: 99.84% - Mac: 99.1%\r\n[Tahoma](https://www.cssfontstack.com/Tahoma) - Win: 99.95% - Mac: 91.71%\r\n[Trebuchet MS](https://www.cssfontstack.com/Trebuchet-MS) - Win: 99.67% - Mac: 97.12%\r\n[Courier New](https://www.cssfontstack.com/Courier-New) - Win: 99.73% - Mac: 95.68%\r\n\r\nThis seems pretty safe to me. \r\nBut we can always add some fallback in the fontFamily configuration. it doesn't hurt anybody.\r\nThe question is which font should be used for the fallback.\r\n\r\ncc @qsm-odoo @lebl-odoo"", 'created_at': datetime.datetime(2025, 1, 24, 12, 43, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633139760, 'issue_id': 2792919432, 'author': 'dmo-odoo', 'body': 'As discussed with @lebl-odoo, we proceed for Odoo backend. I let you two see for the website part.\r\n\r\nThanks @cammarosano for the review!\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 2, 4, 7, 54, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633201467, 'issue_id': 2792919432, 'author': 'lebl-odoo', 'body': ""Indeed, since it's for backend for now, we can assume that more than 100% of our users won't have any issue with those web safe fonts.\r\n\r\nPS: I know you point out this is not the case on your computer, Quentin, but... who cares? :D More seriously, I think it is acceptable"", 'created_at': datetime.datetime(2025, 2, 4, 8, 27, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:21:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193986.png)](https://mergebot.odoo.com/odoo/odoo/pull/193986)

cammarosano on (2025-01-23 12:06:21 UTC): ro**d**odoo r+ :stuck_out_tongue:

qsm-odoo on (2025-01-23 14:36:35 UTC): @sebgeelen @cammarosano cc @dmo-odoo @lebl-odoo 

I did not check the PR at all but got curious and tested a bit as I was curious about the fonts you would be using. When it comes to the website, I still think we should not do this as it does not make sense to mix fonts at random places in a website and that it would be very limiting anyway, if we don't want to have to handle *importing* the fonts the user wants to be able to use in every pages.

For the backend, I guess why not, hopefully the fonts you chose are available on most systems? However, I would recommend you make the fonts suffer the same treatment as all our fonts otherwise you'll definitely have customer tickets about it at some point. See this example to illustrate:
| Default font | Forced Tahoma font with this PR feature |
|--------|--------|
| ![image](https://github.com/user-attachments/assets/b4bb30a4-6e45-41e3-be98-2566a3643ed2) | ![image](https://github.com/user-attachments/assets/8c726cd5-df7f-4774-b2cf-981bc8a24f67) |

=> See: the default font as a lot of stuff in its definition, but the relevant part is the `Odoo Unicode Support Noto` one. It allows to ensure (at least increase chances) that in all languages, characters will be displayed correctly. We have the `o-add-unicode-support-font` util to add that automatically to all fonts used in the website builder... but since you are applying inline style, I think your only possibility would be to hardcode it in your font application code :+1:

lebl-odoo on (2025-01-24 09:19:18 UTC): Hello @qsm-odoo ,

This task is focused on backend. Note that the fonts I listed are what we call ""web safe fonts"", it means all devices are able to use them (they are installed on the device). This is a regular feedback to be able to change the font-family.

This task aims to improve the current font-family picker in the website builder : https://www.odoo.com/odoo/project/974/tasks/4285467. For website, the main idea is to override the default behavior to let the use adds its own fonts, the default list from website will still be the one we'll use.

Hope it helps

qsm-odoo on (2025-01-24 11:45:51 UTC): @lebl-odoo I know all that and ""regular feedback"" is not a synonym of ""good feedback"" :wink: What I said remains the same:


You can call them the way you want, that does not make it true unfortunately :smile: I spoke about the Odoo support font but did not mention that those fonts have no effect on many computers... so this could change your vision of this task if you thought that ""web safe fonts"" was a real thing :wink: Here, I tested the task:
![image](https://github.com/user-attachments/assets/1d0012d1-d8da-4286-9728-a902d9c34466)

**None** of those fonts are on my computer, they all fallback to something else, and that makes 3 of them act exactly the same... and would thus appear as a bug for users.

Using the Odoo support font as I mentioned won't fix that though: the goal of the Odoo support font is that when you are in this case, there is also even more problem: with some computer not even having a font to display some characters in some other languages, or displaying them badly. So my example would fallback to ""????????"" or something very difficult to read.

So:
1. The Odoo support font is needed if you want to ensure that all characters can be displayed and readable.
2. ""Web safe fonts"" do not exist. If your goal here was to have 5 fonts that exist on all computers and are different from each other, the only way is to include them in Odoo.


Which would be awful, as you would need to import all fonts on all pages... or come up with a system importing them on-the-fly when needed (which is obviously what we would do, but then more code and maintenance for a feature that does not make sense). While with the current system we have, we limit to loading fonts configured by theme choices, not per-page choices. But I know that's not the topic here :wink: Changing the font in the backend description is nice, it's different for a website.

sebgeelen (Issue Creator) on (2025-01-24 12:43:41 UTC): Some statistics ([source](https://www.cssfontstack.com/))

[Arial](https://www.cssfontstack.com/Arial) - Win: 99.84% - Mac: 98.74%
[Verdana](https://www.cssfontstack.com/Verdana) - Win: 99.84% - Mac: 99.1%
[Tahoma](https://www.cssfontstack.com/Tahoma) - Win: 99.95% - Mac: 91.71%
[Trebuchet MS](https://www.cssfontstack.com/Trebuchet-MS) - Win: 99.67% - Mac: 97.12%
[Courier New](https://www.cssfontstack.com/Courier-New) - Win: 99.73% - Mac: 95.68%

This seems pretty safe to me. 
But we can always add some fallback in the fontFamily configuration. it doesn't hurt anybody.
The question is which font should be used for the fallback.

cc @qsm-odoo @lebl-odoo

dmo-odoo on (2025-02-04 07:54:08 UTC): As discussed with @lebl-odoo, we proceed for Odoo backend. I let you two see for the website part.

Thanks @cammarosano for the review!

@robodoo r+

lebl-odoo on (2025-02-04 08:27:08 UTC): Indeed, since it's for backend for now, we can assume that more than 100% of our users won't have any issue with those web safe fonts.

PS: I know you point out this is not the case on your computer, Quentin, but... who cares? :D More seriously, I think it is acceptable

"
2792918108,pull_request,closed,,[FW][FIX] stock: track returned and unreturned products from customer report,"**Steps to reproduce:**
In Inventory > Settings > Traceability, enable Lots & Serial Numbers
- Create a product P1 tracked by unique serial number
- Update on-hand quantities: 2 x P1
- Create a quotation with 2 units of P1
- Deliver products (assign the two serial numbers)
- Return only 1 product
- Go to the Customer view, click Lot/Serial Numbers, and remove all filters.

**Issue:**
When returning just one product from a delivery containing multiple products, all products in the picking appear as returned.

**Expected:**
Only the product that was actually returned should be marked as returned.

**Cause:**
The logic that sets `has_return` relies solely on the `return_id` field, incorrectly marking all items in the picking as returned if one item is returned.

opw-4417716

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192641",fw-bot,2025-01-16 14:21:01+00:00,[],2025-01-30 20:32:50+00:00,2025-01-16 20:13:25+00:00,https://github.com/odoo/odoo/pull/193985,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595858317, 'issue_id': 2792918108, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193985.png)](https://mergebot.odoo.com/odoo/odoo/pull/193985)', 'created_at': datetime.datetime(2025, 1, 16, 14, 21, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595858351, 'issue_id': 2792918108, 'author': 'fw-bot', 'body': '@barracudapps @adwid this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193962\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 21, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595861773, 'issue_id': 2792918108, 'author': 'barracudapps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 22, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596009648, 'issue_id': 2792918108, 'author': 'robodoo', 'body': ""@barracudapps @adwid 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 15, 20, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:21:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193985.png)](https://mergebot.odoo.com/odoo/odoo/pull/193985)

fw-bot (Issue Creator) on (2025-01-16 14:21:03 UTC): @barracudapps @adwid this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193962

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

barracudapps on (2025-01-16 14:22:27 UTC): @robodoo r+

robodoo on (2025-01-16 15:20:09 UTC): @barracudapps @adwid 'ci/runbot' failed on this reviewed PR.

"
2792917400,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747

Forward-Port-Of: odoo/odoo#193786",fw-bot,2025-01-16 14:20:45+00:00,[],2025-01-30 17:46:42+00:00,2025-01-16 17:46:30+00:00,https://github.com/odoo/odoo/pull/193984,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595857657, 'issue_id': 2792917400, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193984.png)](https://mergebot.odoo.com/odoo/odoo/pull/193984)', 'created_at': datetime.datetime(2025, 1, 16, 14, 20, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595857763, 'issue_id': 2792917400, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo cherrypicking of pull request odoo/odoo#193786 failed.\n\nstdout:\n```\nAuto-merging addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py\nCONFLICT (content): Merge conflict in addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 20, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595931850, 'issue_id': 2792917400, 'author': 'guva-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 50, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:20:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193984.png)](https://mergebot.odoo.com/odoo/odoo/pull/193984)

fw-bot (Issue Creator) on (2025-01-16 14:20:48 UTC): @guva-odoo @jbw-odoo cherrypicking of pull request odoo/odoo#193786 failed.

stdout:
```
Auto-merging addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py
CONFLICT (content): Merge conflict in addons/account_edi_ubl_cii/models/account_edi_xml_ubl_20.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

guva-odoo on (2025-01-16 14:50:04 UTC): @robodoo r+

"
2792912590,pull_request,closed,,[FW] 18.0 fix dynamic snippet link not editable bvr,"Steps to reproduce:

- Install the e-commerce module.
- Go to the homepage.
- Enter edit mode.
- Drag and drop a ""Products"" block onto the page.
- Click on the ""See all"" link.
- Edit the link (e.g., change ""/shop"" to ""/contactus"").
- Save the page.
- Click on the ""See all"" link.
- Bug: You are redirected to the ""/shop"" page instead of the
""/contactus"" page as expected.

The bug occurs since commit [1], where the ""See all"" link was added to
""Dynamic"" snippets. Each time a ""Dynamic"" snippet is rendered during a
page load, the href of the ""See all"" link is reset to the main module
page. While this behavior is useful when the snippet is first rendered
after being dropped onto the page, it is problematic afterward. Once the
user has edited the link with a different href, it should not be reset
on every page load.

[1]: https://github.com/odoo/odoo/commit/bbcff746075485be61807d08ad8232dbad347713

[opw-4418048](https://www.odoo.com/web#id=4418048&cids=1&menu_id=4720&action=333&active_id=1695&model=project.task&view_type=form)

Forward-Port-Of: odoo/odoo#191689",fw-bot,2025-01-16 14:18:41+00:00,[],2025-02-04 20:40:48+00:00,2025-01-21 20:37:26+00:00,https://github.com/odoo/odoo/pull/193983,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595852670, 'issue_id': 2792912590, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193983.png)](https://mergebot.odoo.com/odoo/odoo/pull/193983)', 'created_at': datetime.datetime(2025, 1, 16, 14, 18, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595852689, 'issue_id': 2792912590, 'author': 'fw-bot', 'body': '@bvr-odoo @xO-Tx this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193961\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 18, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595977233, 'issue_id': 2792912590, 'author': 'fw-bot', 'body': '@bvr-odoo @xO-Tx ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 15, 7, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596112458, 'issue_id': 2792912590, 'author': 'fw-bot', 'body': '@bvr-odoo @xO-Tx this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 16, 16, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174150, 'issue_id': 2792912590, 'author': 'fw-bot', 'body': '@bvr-odoo @xO-Tx this forward port of odoo/odoo#191689 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476562, 'issue_id': 2792912590, 'author': 'fw-bot', 'body': '@bvr-odoo @xO-Tx this forward port of odoo/odoo#191689 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2605062335, 'issue_id': 2792912590, 'author': 'xO-Tx', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 15, 34, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:18:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193983.png)](https://mergebot.odoo.com/odoo/odoo/pull/193983)

fw-bot (Issue Creator) on (2025-01-16 14:18:42 UTC): @bvr-odoo @xO-Tx this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193961

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 15:07:53 UTC): @bvr-odoo @xO-Tx ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 16:02:02 UTC): @bvr-odoo @xO-Tx this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-20 02:02:14 UTC): @bvr-odoo @xO-Tx this forward port of odoo/odoo#191689 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:45 UTC): @bvr-odoo @xO-Tx this forward port of odoo/odoo#191689 is awaiting action (not merged or closed).

xO-Tx on (2025-01-21 15:34:54 UTC): @robodoo r+

"
2792898919,pull_request,closed,,[FIX] delivery: fix loc. selector maker position,"Before this commit, markers on the location selector map were misaligned. The misalignment was proportional to the zoom level, as the marker incorrectly used the top-left corner of the anchor as its reference.

This commit resolves the issue by defining the correct icon anchor position for markers.
",chevalierv,2025-01-16 14:14:08+00:00,[],2025-01-31 12:29:15+00:00,2025-01-17 12:24:22+00:00,https://github.com/odoo/odoo/pull/193982,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595839736, 'issue_id': 2792898919, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193982.png)](https://mergebot.odoo.com/odoo/odoo/pull/193982)', 'created_at': datetime.datetime(2025, 1, 16, 14, 14, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597920498, 'issue_id': 2792898919, 'author': 'chevalierv', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 28, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:14:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193982.png)](https://mergebot.odoo.com/odoo/odoo/pull/193982)

chevalierv (Issue Creator) on (2025-01-17 10:28:19 UTC): robodoo r+

"
2792890239,pull_request,closed,,[FIX] account: edi format parent partner,"The invoice edi format should be take from the parent
of the partner instead of the partner himself.

Steps:

- Create an individual partner X and set an edi format
- Create a company partner Y and set a different edi format
- Make X child of Y
- Create an invoice for X, confirm and click on 'Send and print' button
-> The edi file is in the format set on X instead of the format set on Y

opw-4480527
",guva-odoo,2025-01-16 14:11:06+00:00,[],2025-01-31 12:57:38+00:00,2025-01-17 12:55:46+00:00,https://github.com/odoo/odoo/pull/193981,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595831231, 'issue_id': 2792890239, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193981.png)](https://mergebot.odoo.com/odoo/odoo/pull/193981)', 'created_at': datetime.datetime(2025, 1, 16, 14, 11, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:11:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193981.png)](https://mergebot.odoo.com/odoo/odoo/pull/193981)

"
2792890221,pull_request,closed,,[FIX] point_of_sale: display correct stock quantity for product variants,"Currently, for products with variants, the quantities on hand displayed in the product configurator can be incorrect.

### Steps to reproduce

* Install `point_of_sale`.
* Start the furniture shop POS session.
* Click on the Conference Chair; the steel legs are selected by default, and the system displays quantities on hand as 30.
* Switch to aluminum legs; the quantity remains 30.
* Switch back to steel legs.

You should see that the quantity on hand is now 26. This is the actual, correct quantity for steel legs. The originally displayed value of 30 was already incorrect for those legs.

### Cause

The issue arises from how the product's quantities on hand are fetched and updated:

- The `useEffect` hook is used to fetch quantities on hand whenever the product changes.
- However, the function used to retrieve these quantities (`fetchStock`) is wrapped with `useTrackedAsync`, which internally utilizes `useAsyncLockedMethod`.
- The `useAsyncLockedMethod` hook ensures that two calls to `fetchStock` cannot run simultaneously; if `fetchStock` is called while another call is still in progress, the subsequent call is ignored.

This behavior causes the problem. In the product attribute component, the `useEffect` hook is triggered twice in rapid succession when switching attributes. Since the second `fetchStock` call happens before the first completes, it is discarded due to the locking mechanism. As a result, the product changes twice, but the stock fetching process is executed only once, causing a mismatch between the selected product variant and its displayed quantities on hand.

### Fix

The `useTrackedAsync` utility was updated to allow specifying the locking mechanism. Specifically, it now supports an option to keep the last call instead of the first. This change ensures that even when multiple `fetchStock` calls are triggered in quick succession, the most recent call is executed, maintaining synchronization between the product variant and the displayed stock quantities.

opw-4421070",ushyme,2025-01-16 14:11:06+00:00,[],2025-01-31 20:32:07+00:00,2025-01-17 20:12:28+00:00,https://github.com/odoo/odoo/pull/193980,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595831192, 'issue_id': 2792890221, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193980.png)](https://mergebot.odoo.com/odoo/odoo/pull/193980)', 'created_at': datetime.datetime(2025, 1, 16, 14, 11, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:11:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193980.png)](https://mergebot.odoo.com/odoo/odoo/pull/193980)

"
2792869858,pull_request,closed,,[IMP] web: list view: select all records on mobile,"Back-port of https://github.com/odoo/odoo/pull/189029/

Task-ID: 4314183",adr-odoo,2025-01-16 14:03:11+00:00,[],2025-01-20 07:27:13+00:00,2025-01-17 11:26:26+00:00,https://github.com/odoo/odoo/pull/193979,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595782925, 'issue_id': 2792869858, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193979.png)](https://mergebot.odoo.com/odoo/odoo/pull/193979)', 'created_at': datetime.datetime(2025, 1, 16, 14, 3, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597819213, 'issue_id': 2792869858, 'author': 'pparidans', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 38, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597819284, 'issue_id': 2792869858, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 17, 9, 38, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597912992, 'issue_id': 2792869858, 'author': 'pparidans', 'body': '@robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 17, 10, 24, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597913067, 'issue_id': 2792869858, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 17, 10, 24, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 14:03:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193979.png)](https://mergebot.odoo.com/odoo/odoo/pull/193979)

pparidans on (2025-01-17 09:38:01 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-17 09:38:04 UTC): Merge method set to rebase and fast-forward.

pparidans on (2025-01-17 10:24:26 UTC): @robodoo fw=no

robodoo on (2025-01-17 10:24:29 UTC): Disabled forward-porting.

"
2792828610,pull_request,open,,[IMP] base: add phonenumbers package.,"This commit adds the `phonenumbers` package in the `requirements.txt`
file as it's needed in the VoIP module to get the country code of the
phone numbers the calls are made to.

Task-441692

Enterprise: https://github.com/odoo/enterprise/pull/77271",MohammedBasioni,2025-01-16 13:46:10+00:00,[],2025-02-06 14:08:06+00:00,,https://github.com/odoo/odoo/pull/193978,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595737467, 'issue_id': 2792828610, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193978.png)](https://mergebot.odoo.com/odoo/odoo/pull/193978)', 'created_at': datetime.datetime(2025, 1, 16, 13, 46, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:46:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193978.png)](https://mergebot.odoo.com/odoo/odoo/pull/193978)

"
2792810383,pull_request,closed,,[FW][FIX] point_of_sale: fix `getPortalURL()`,"access the url through `order.session._base_url` rather than the `props`

Forward-Port-Of: odoo/odoo#193920",fw-bot,2025-01-16 13:38:48+00:00,[],2025-01-21 08:55:14+00:00,2025-01-21 08:55:13+00:00,https://github.com/odoo/odoo/pull/193977,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595720194, 'issue_id': 2792810383, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193977.png)](https://mergebot.odoo.com/odoo/odoo/pull/193977)', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595720219, 'issue_id': 2792810383, 'author': 'fw-bot', 'body': '@AH-Yussef @davidmonnom cherrypicking of pull request odoo/odoo#193920 failed.\n\nstdout:\n```\nYou are currently cherry-picking commit 852a1b3be2e7a0e918c104248ce8d9436ab87919.\n```\n\nstderr:\n```\nThe previous cherry-pick is now empty, possibly due to conflict resolution.\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172790, 'issue_id': 2792810383, 'author': 'fw-bot', 'body': '@AH-Yussef @davidmonnom this forward port of odoo/odoo#193920 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475732, 'issue_id': 2792810383, 'author': 'fw-bot', 'body': '@AH-Yussef @davidmonnom this forward port of odoo/odoo#193920 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 0, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:38:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193977.png)](https://mergebot.odoo.com/odoo/odoo/pull/193977)

fw-bot (Issue Creator) on (2025-01-16 13:38:50 UTC): @AH-Yussef @davidmonnom cherrypicking of pull request odoo/odoo#193920 failed.

stdout:
```
You are currently cherry-picking commit 852a1b3be2e7a0e918c104248ce8d9436ab87919.
```

stderr:
```
The previous cherry-pick is now empty, possibly due to conflict resolution.
```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:11 UTC): @AH-Yussef @davidmonnom this forward port of odoo/odoo#193920 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:00:59 UTC): @AH-Yussef @davidmonnom this forward port of odoo/odoo#193920 is awaiting action (not merged or closed).

"
2792809171,pull_request,closed,,[FW][IMP] point_of_sale: screen saver,"- Added a new ScreenSaver component that displays the brand image.
- The screensaver disappears when clicked.
- Automatically activates and becomes visible after 5 minutes of user
inactivity.

task- 4374221

Forward-Port-Of: odoo/odoo#193534
Forward-Port-Of: odoo/odoo#191392",fw-bot,2025-01-16 13:38:20+00:00,[],2025-01-30 20:32:51+00:00,2025-01-16 20:13:30+00:00,https://github.com/odoo/odoo/pull/193976,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595718872, 'issue_id': 2792809171, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193976.png)](https://mergebot.odoo.com/odoo/odoo/pull/193976)', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595718903, 'issue_id': 2792809171, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595928078, 'issue_id': 2792809171, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 14, 48, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596145669, 'issue_id': 2792809171, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 16, 15, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:38:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193976.png)](https://mergebot.odoo.com/odoo/odoo/pull/193976)

fw-bot (Issue Creator) on (2025-01-16 13:38:23 UTC): @davidmonnom @adgu-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 14:48:32 UTC): @davidmonnom @adgu-odoo ci/runbot failed on this forward-port PR

davidmonnom on (2025-01-16 16:15:33 UTC): @robodoo r+

"
2792807897,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193877
Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-16 13:37:53+00:00,[],2025-01-30 20:32:48+00:00,2025-01-16 20:13:18+00:00,https://github.com/odoo/odoo/pull/193975,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595718695, 'issue_id': 2792807897, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193975.png)](https://mergebot.odoo.com/odoo/odoo/pull/193975)', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595718718, 'issue_id': 2792807897, 'author': 'fw-bot', 'body': '@pparidans @xmo-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595737676, 'issue_id': 2792807897, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 13, 46, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:38:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193975.png)](https://mergebot.odoo.com/odoo/odoo/pull/193975)

fw-bot (Issue Creator) on (2025-01-16 13:38:19 UTC): @pparidans @xmo-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-16 13:46:19 UTC): @robodoo r+

"
2792806119,pull_request,open,,[IMP] website: standardize website_loader and use at other places,"`website_loader` was previously designed mainly for the website configurator. This commit aims to improve the `website_loader` and make it more standard.

**Improvements include:**
- Custom loading messages:
  Previously, we had no option to pass custom loading messages in the loader.
  Now, we can pass in custom loading messages that will be displayed as the loader progresses.

- Loading messages and progress bar:
  Previously, the loading messages and progress bar worked independently.
  Now loading messages are linked with progress. So, a loading message will be marked as completed when certain progress is reached.

- Mock/Real progress updates:
  Previously, the website loader displayed progress updates using mocked values.
  Now, the website loader also supports showing real progress.

- Changes in props and their precedence:
  - If `title` prop is used, it will take precedence over the current loading message's title.
  - If `flag` prop is used, it will take precedence over the current loading message's flag.
  - The `showTooltip` prop has been removed. Instead, the existing `bottomTemplate` prop can be used to achieve the same functionality.
  - The `showLoader` prop, which controlled the visibility of the progress bar, has been renamed to the more descriptive `showProgressBar`.

- Prevent abrupt close of loader:
  Previously, when the loader was closed, it closed abruptly.
  Now, we have an option to gracefully close the loader which shows the remaining messages and completes the progress quickly before closing the loader.

- Redirect/refresh out from the loader:
  `prepareOutLoader()` is now replaced with `redirectOutFromLoader()`.
  This change allows for graceful closing of the loader before performing a redirect or refresh.

**Places where new implementation is used:**
- **Website Configurator** (when creating a new website):
  Uses custom loading messages.
  Uses real progress (Simulated progress which starts fast and slows down as it reaches end to give users the feeling of fast progression).

- **New Content** (Installing new module from ""New"" button in the editor):
  Uses custom title and flag.

- **Switch Theme**:
  Uses custom loading messages.

task-4252688",aans-odoo,2025-01-16 13:37:11+00:00,[],2025-02-06 10:15:16+00:00,,https://github.com/odoo/odoo/pull/193974,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595716046, 'issue_id': 2792806119, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193974.png)](https://mergebot.odoo.com/odoo/odoo/pull/193974)', 'created_at': datetime.datetime(2025, 1, 16, 13, 37, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:37:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193974.png)](https://mergebot.odoo.com/odoo/odoo/pull/193974)

"
2792798568,pull_request,closed,,[FIX] web_editor: adapt `border-style` value based on border widths,"[FIX] web_editor: adapt `border-style` value based on border widths

**Problem**:  
Outlook always displays the border of an element if `border-style` is set  
to `solid`, even when all border widths are 0.  

**Solution**:  
Change `border-style` to `none` if all border widths are 0.  

**Steps to Reproduce**:  
1. Open the ""Event: Registration Confirmation"" email template in the web editor.  
2. Add a character and save the template.  
3. Check the saved `body_html`.  
   -> All table elements will have `border-style: solid;` added as inline styling,  
      causing borders to appear in Outlook.  

opw-4211794

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",walidsahli,2025-01-16 13:34:02+00:00,[],2025-02-07 15:10:10+00:00,2025-01-24 15:02:45+00:00,https://github.com/odoo/odoo/pull/193973,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595706454, 'issue_id': 2792798568, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193973.png)](https://mergebot.odoo.com/odoo/odoo/pull/193973)', 'created_at': datetime.datetime(2025, 1, 16, 13, 34, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602423894, 'issue_id': 2792798568, 'author': 'walidsahli', 'body': ""@dmo-odoo i used `dummy` node to get valid string style to avoid any unexpected values, just i didn't used the `dummy.style` to the end because if `dummy.style` has `border-bottom-width: 0px;\r\n                border-left-width: 0px;\r\n                border-right-width: 0px;\r\n                border-top-width: 0px;` calling `dummy.getAttribute('style')` will replace all those attributes with `border-width: 0px` which we dont want here because we need all the borders values.\r\nLet me know if we can do better."", 'created_at': datetime.datetime(2025, 1, 20, 13, 25, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603861036, 'issue_id': 2792798568, 'author': 'dmo-odoo', 'body': '@walidsahli Do you have an exemple of a style string that is being ""corrected"" by assigning it to an element?\r\n\r\nI\'m not sure I understand what you mean when you say that we dont want the merging of the four properties into ""border-width: 0px"". Isn\'t that in fact very convenient? If they are converted to that form when all of them are the same, then you could use the existence of that particular form being equal to 0 to instantly check if they are 0 all at once rather than having to check the four properties and summing their values. Am I missing something?', 'created_at': datetime.datetime(2025, 1, 21, 7, 36, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612580452, 'issue_id': 2792798568, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 51, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:34:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193973.png)](https://mergebot.odoo.com/odoo/odoo/pull/193973)

walidsahli (Issue Creator) on (2025-01-20 13:25:31 UTC): @dmo-odoo i used `dummy` node to get valid string style to avoid any unexpected values, just i didn't used the `dummy.style` to the end because if `dummy.style` has `border-bottom-width: 0px;
                border-left-width: 0px;
                border-right-width: 0px;
                border-top-width: 0px;` calling `dummy.getAttribute('style')` will replace all those attributes with `border-width: 0px` which we dont want here because we need all the borders values.
Let me know if we can do better.

dmo-odoo on (2025-01-21 07:36:15 UTC): @walidsahli Do you have an exemple of a style string that is being ""corrected"" by assigning it to an element?

I'm not sure I understand what you mean when you say that we dont want the merging of the four properties into ""border-width: 0px"". Isn't that in fact very convenient? If they are converted to that form when all of them are the same, then you could use the existence of that particular form being equal to 0 to instantly check if they are 0 all at once rather than having to check the four properties and summing their values. Am I missing something?

dmo-odoo on (2025-01-24 13:51:58 UTC): @robodoo r+

"
2792798371,pull_request,closed,,"[IMP] im_livechat, mail: clearer leaving livechat conversation message","This commit changes the toast notification message when leaving a livechat conversation.

task-4481370",Atovange,2025-01-16 13:33:57+00:00,[],2025-01-16 15:12:34+00:00,2025-01-16 15:12:31+00:00,https://github.com/odoo/odoo/pull/193972,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595706229, 'issue_id': 2792798371, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193972.png)](https://mergebot.odoo.com/odoo/odoo/pull/193972)', 'created_at': datetime.datetime(2025, 1, 16, 13, 33, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595988913, 'issue_id': 2792798371, 'author': 'alexkuhn', 'body': 'Back-ported to 18.1: https://github.com/odoo/odoo/pull/193998', 'created_at': datetime.datetime(2025, 1, 16, 15, 12, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:33:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193972.png)](https://mergebot.odoo.com/odoo/odoo/pull/193972)

alexkuhn on (2025-01-16 15:12:31 UTC): Back-ported to 18.1: https://github.com/odoo/odoo/pull/193998

"
2792797227,pull_request,closed,,"[FIX] purchase_stock,stock_account: no exch. diff. if future correction AMLs","**Current behavior:**
With Anglo-Saxon accounting, for some tracked product, with FIFO and real-time valuation:

Making a purchase order in some foreign currency, having some exchange rate for today, receiving the product, then dating the vendor bill to some future date with a different exchange rate will result in exchange difference journal entries when the bill is posted.

**Expected behavior:**
We shouldn't see exchange difference entries, as there are pending corrective valuation entries which have simply not been posted yet.

Reconciliation should be deferred until these moves are no longer in draft.

**Steps to reproduce:**
1. Activate another currency, define some rate for today and another (different) rate for tomorrow

2. Create a product with FIFO and real-time costing & valuation

3. Create an initial purchase for the product, receive then bill normally

4. Create another purchase order and receive the product

5. Create the invoice, set the invoie date for tomorrow

6. Post the invoice -> Open the `Exchange Difference` journal to see the entries which should not have been generated

**Cause of the issue:**
After creating the AMLs which represent the difference in reception/bill unit price of the product, they are caught here: https://github.com/odoo/odoo/blob/971400771a31c05641a8672f6b1d85afaa9c4a19/addons/account/models/account_move.py#L3575 and designated as future moves, not to be posted at this time.

At the end of the `_post()` stack: https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L229 where there would normally be some `correction_amls`, they weren't created here because the AMLs for the price diff were not posted- so the price diff entry is generated.

**Fix:**
Wait for pending (`state == 'draft'`) AMLs that are part of some `AccountMove`'s valuation to be no longer in draft before allowing reconciliation with a currency exchange difference.

opw-4266652",ethanrobv,2025-01-16 13:33:26+00:00,[],2025-02-07 15:10:09+00:00,2025-01-24 15:02:41+00:00,https://github.com/odoo/odoo/pull/193971,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595705188, 'issue_id': 2792797227, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193971.png)](https://mergebot.odoo.com/odoo/odoo/pull/193971)', 'created_at': datetime.datetime(2025, 1, 16, 13, 33, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612573371, 'issue_id': 2792797227, 'author': 'Whenrow', 'body': 'robodoo r+\r\nthank you', 'created_at': datetime.datetime(2025, 1, 24, 13, 48, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:33:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193971.png)](https://mergebot.odoo.com/odoo/odoo/pull/193971)

Whenrow on (2025-01-24 13:48:32 UTC): robodoo r+
thank you

"
2792790222,pull_request,closed,,[FW][FIX] pos_mercado_pago: wrong attribute was chosen,"Before this commit:
Nothing would happen after a mercado pago webhook notification received.

Since 17.4, `payment_method` attribute have been changed to `payment_method_id`. Thus it was returning `undefined` and silently fail to update the line

After this commit:
Call `handleMercadoPagoWebhook` on notification received as intended

opw-4349957

Forward-Port-Of: odoo/odoo#193784",fw-bot,2025-01-16 13:30:38+00:00,[],2025-01-30 21:23:57+00:00,2025-01-16 21:03:29+00:00,https://github.com/odoo/odoo/pull/193970,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595695454, 'issue_id': 2792790222, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193970.png)](https://mergebot.odoo.com/odoo/odoo/pull/193970)', 'created_at': datetime.datetime(2025, 1, 16, 13, 30, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595695550, 'issue_id': 2792790222, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 30, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595858679, 'issue_id': 2792790222, 'author': 'fw-bot', 'body': '@lse-odoo @davidmonnom ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 14, 21, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:30:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193970.png)](https://mergebot.odoo.com/odoo/odoo/pull/193970)

fw-bot (Issue Creator) on (2025-01-16 13:30:40 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 14:21:11 UTC): @lse-odoo @davidmonnom ci/runbot failed on this forward-port PR

"
2792770395,pull_request,closed,,[FW][FIX] web: Fix navigation test hotkeys issue,"Fixes test broken by: be23ed0

https://runbot.odoo.com/odoo/runbot.build.error/109595

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193764",fw-bot,2025-01-16 13:24:09+00:00,[],2025-01-27 14:21:24+00:00,2025-01-27 14:21:24+00:00,https://github.com/odoo/odoo/pull/193969,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595666030, 'issue_id': 2792770395, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193969.png)](https://mergebot.odoo.com/odoo/odoo/pull/193969)', 'created_at': datetime.datetime(2025, 1, 16, 13, 24, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595666079, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo cherrypicking of pull request odoo/odoo#193764 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/web/static/tests/legacy/core/dropdown_tests.js deleted in 07b4833b6fbbcb0cb03555575271a3cfc90f4f2a and modified in 68d65e6a1f579573d5a8617ce18722bcd356f3fe.  Version 68d65e6a1f579573d5a8617ce18722bcd356f3fe of addons/web/static/tests/legacy/core/dropdown_tests.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 24, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173051, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603475917, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119127, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689072, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385351, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721803, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172084, 'issue_id': 2792770395, 'author': 'fw-bot', 'body': '@BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615409572, 'issue_id': 2792770395, 'author': 'BastienFafchamps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 10, 45, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:24:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193969.png)](https://mergebot.odoo.com/odoo/odoo/pull/193969)

fw-bot (Issue Creator) on (2025-01-16 13:24:11 UTC): @BastienFafchamps @aab-odoo cherrypicking of pull request odoo/odoo#193764 failed.

stdout:
```
CONFLICT (modify/delete): addons/web/static/tests/legacy/core/dropdown_tests.js deleted in 07b4833b6fbbcb0cb03555575271a3cfc90f4f2a and modified in 68d65e6a1f579573d5a8617ce18722bcd356f3fe.  Version 68d65e6a1f579573d5a8617ce18722bcd356f3fe of addons/web/static/tests/legacy/core/dropdown_tests.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:23 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:09 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:26 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:07 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:02 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:14 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:31 UTC): @BastienFafchamps @aab-odoo this forward port of odoo/odoo#193764 is awaiting action (not merged or closed).

BastienFafchamps on (2025-01-27 10:45:30 UTC): @robodoo r+

"
2792753796,pull_request,closed,,[FW][FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.

Forward-Port-Of: odoo/odoo#193716",fw-bot,2025-01-16 13:19:01+00:00,[],2025-02-03 17:34:11+00:00,2025-01-20 17:30:40+00:00,https://github.com/odoo/odoo/pull/193968,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595648381, 'issue_id': 2792753796, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193968.png)](https://mergebot.odoo.com/odoo/odoo/pull/193968)', 'created_at': datetime.datetime(2025, 1, 16, 13, 19, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595648423, 'issue_id': 2792753796, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 19, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595901202, 'issue_id': 2792753796, 'author': 'fw-bot', 'body': '@ryv-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 14, 37, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602202001, 'issue_id': 2792753796, 'author': 'robodoo', 'body': '@ryv-odoo staging failed: ci/runbot on 94f7cf40325d4a3e4f041f36d8a088184db0c088 (view more at https://runbot.odoo.com/runbot/build/73640435)', 'created_at': datetime.datetime(2025, 1, 20, 11, 43, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602686438, 'issue_id': 2792753796, 'author': 'Williambraecky', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 20, 15, 18, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:19:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193968.png)](https://mergebot.odoo.com/odoo/odoo/pull/193968)

fw-bot (Issue Creator) on (2025-01-16 13:19:03 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 14:37:42 UTC): @ryv-odoo ci/runbot failed on this forward-port PR

robodoo on (2025-01-20 11:43:12 UTC): @ryv-odoo staging failed: ci/runbot on 94f7cf40325d4a3e4f041f36d8a088184db0c088 (view more at https://runbot.odoo.com/runbot/build/73640435)

Williambraecky on (2025-01-20 15:18:27 UTC): @robodoo retry

"
2792731066,pull_request,open,,[IMP] l10n_it_edi: remove_signature improvement,"Homemade Python implementation, with no external dependencies. This version is more optimized (2x) than what we had as a fallback.

We remove the OpenSSL method, which is now superfluous.

Research:
- PyOpenSSL doesn't support ``load_pkcs7_data`` anymore. https://github.com/pyca/pyopenssl/commit/0fe822dc8d6610b8ec9ebaff626d6bf23e0a7ad3
- Cryptography is migrating PKCS7_verify to Rust, and has removed PKCS7_NOVERIFY https://github.com/pyca/cryptography/commit/615967bfab5b49e470fe7d0df44649c69fb9a847 https://github.com/pyca/cryptography/pull/8332
- ``asn1`` library is pure Python and MIT licensed, but is slower than our homemade solution https://github.com/andrivet/python-asn1/blob/master/src/asn1.py

opw-4471459
opw-4437288
opw-4417875",lordkrandel,2025-01-16 13:12:58+00:00,[],2025-01-24 16:42:42+00:00,,https://github.com/odoo/odoo/pull/193967,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595618289, 'issue_id': 2792731066, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193967.png)](https://mergebot.odoo.com/odoo/odoo/pull/193967)', 'created_at': datetime.datetime(2025, 1, 16, 13, 13, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612956293, 'issue_id': 2792731066, 'author': 'lordkrandel', 'body': 'This is ready.', 'created_at': datetime.datetime(2025, 1, 24, 16, 42, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:13:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193967.png)](https://mergebot.odoo.com/odoo/odoo/pull/193967)

lordkrandel (Issue Creator) on (2025-01-24 16:42:40 UTC): This is ready.

"
2792700080,pull_request,closed,,[FW][FIX] point_of_sale: handle custom one2many fields,"Before this commit, if there was a custom one2many field with the same related field as an existing one, it would cause issues in PoS when capturing an order. For example, if there was a custom field in pos.order with a related field of order_id, adding products to the order would not show them in the order summary.

opw-4462991

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193041",fw-bot,2025-01-16 13:03:13+00:00,[],2025-02-03 16:25:49+00:00,2025-01-20 16:23:46+00:00,https://github.com/odoo/odoo/pull/193966,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595580284, 'issue_id': 2792700080, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193966.png)](https://mergebot.odoo.com/odoo/odoo/pull/193966)', 'created_at': datetime.datetime(2025, 1, 16, 13, 3, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595580481, 'issue_id': 2792700080, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#193041 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_session.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 3, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468706, 'issue_id': 2792700080, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600465228, 'issue_id': 2792700080, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173675, 'issue_id': 2792700080, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602515662, 'issue_id': 2792700080, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 14, 6, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:03:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193966.png)](https://mergebot.odoo.com/odoo/odoo/pull/193966)

fw-bot (Issue Creator) on (2025-01-16 13:03:16 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#193041 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_session.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-18 02:01:04 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:52 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:54 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#193041 is awaiting action (not merged or closed).

pedrambiria on (2025-01-20 14:06:10 UTC): robodoo r+

"
2792698786,pull_request,closed,,[FIX] mrp: allow finished lot production via quality checks,"### Steps to reproduce:

- Create a storable product FP tracked by SN with a BOM:
    - 1 Operation: - instruction: Register Production type (per product)
    - 1 x Comp (storable product in stock)
- Create and confirm an MO for one unit of FP.
- Go to the shopfoor app > open the instruction of your operation
- Type a non-existing serial number in the search bar > Create ""new_sn""
> This opens a form view of the stock.lot model
- Save and close the new stock.lot
> Invalid operation: You are not allowed to create or edit a lot or serial number for the components with the operation type
> ""Manufacturing"". To change this, go on the operation type and tick the box ""Create New Lots/Serial Numbers for
> Components""

#### Expected behavior:

The invalid operation should not be raised as the ""required"" option concerns only componenets and not final products.

### Cause of the issue:

Creating a stock lot will first launch a call of the `_check_create`: https://github.com/odoo/odoo/blob/c25d71f14fa168807f07cd88bed805d15db8add5/addons/stock/models/stock_lot.py#L150-L153 However, since this check does not verifies that the product for which we create the lot is indeed related to a component of the MO it will raise the invalid operation even for final products: https://github.com/odoo/odoo/blob/c25d71f14fa168807f07cd88bed805d15db8add5/addons/mrp/models/stock_lot.py#L11-L17

### Issue 2:

Currently, the `quickCreate` (""Create *sn_name*"") option of the lot field of te ""register production"" dialog calls a `name_create` that will set an error message in the logs as the product_id required field can not be provided neither in the vals or the context of the `name_create`.  You then fall back on the same form dialog than the ""Create and edit"".  The `quickCreate` option should therefore just be disabled.

Enterprise: https://github.com/odoo/enterprise/pull/77265

opw-4452747
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lase-odoo,2025-01-16 13:02:45+00:00,[],2025-02-05 15:34:16+00:00,2025-02-05 15:34:16+00:00,https://github.com/odoo/odoo/pull/193965,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595578971, 'issue_id': 2792698786, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193965.png)](https://mergebot.odoo.com/odoo/odoo/pull/193965)', 'created_at': datetime.datetime(2025, 1, 16, 13, 2, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636900264, 'issue_id': 2792698786, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 5, 13, 47, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:02:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193965.png)](https://mergebot.odoo.com/odoo/odoo/pull/193965)

Whenrow on (2025-02-05 13:47:07 UTC): robodoo r+

"
2792698449,pull_request,closed,,[FIX] account: domestic currency comp exist,"We are not gonna find a value for domestic_currency_companies everytime, sometime they simply don't exist. In that case, we should check that they exist before we call _get_table_builder_domestic_currency.

otherwise syntax of this query: https://github.com/odoo/odoo/blob/18.0/addons/account/models/res_currency.py#L157 is gonna be wrong.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",asno-odoo,2025-01-16 13:02:36+00:00,[],2025-02-07 17:26:20+00:00,2025-01-24 17:14:50+00:00,https://github.com/odoo/odoo/pull/193964,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595578154, 'issue_id': 2792698449, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193964.png)](https://mergebot.odoo.com/odoo/odoo/pull/193964)', 'created_at': datetime.datetime(2025, 1, 16, 13, 2, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:02:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193964.png)](https://mergebot.odoo.com/odoo/odoo/pull/193964)

"
2792693275,pull_request,closed,,[FIX] pos_restaurant: uniformize the splitting and merging of order,"
Before this commit, the splitting and merging of orders was not
consistent in the PoS code base. This commit aims to make the
splitting and merging of orders more consistent.

The synchronization between several devices was not working properly
when splitting an order. This commit fixes this issue by sending the
order before and after the split to the backend.

This commit also ensure that the last_order_preparation_change quantity
are always numbers.


Forward-Port-Of: odoo/odoo#193604
Forward-Port-Of: odoo/odoo#193024",fw-bot,2025-01-16 13:00:56+00:00,[],2025-01-31 20:52:55+00:00,2025-01-17 20:34:57+00:00,https://github.com/odoo/odoo/pull/193963,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595572610, 'issue_id': 2792693275, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193963.png)](https://mergebot.odoo.com/odoo/odoo/pull/193963)', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595572641, 'issue_id': 2792693275, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193024 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/components/navbar/navbar.js\nAuto-merging addons/point_of_sale/static/src/app/components/navbar/navbar.xml\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/components/navbar/navbar.xml\nAuto-merging addons/point_of_sale/static/src/app/models/utils/order_change.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/utils/order_change.js\nAuto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js\nAuto-merging addons/point_of_sale/static/src/app/services/data_service.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js\nAuto-merging addons/pos_restaurant/static/src/app/screens/product_screen/order_summary/order_summary.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/screens/product_screen/order_summary/order_summary.js\nAuto-merging addons/pos_restaurant/static/src/app/screens/split_bill_screen/split_bill_screen.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/screens/split_bill_screen/split_bill_screen.js\nCONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in 384f7253b90cd3f0dc1a5446506f7b8e00e1390a and modified in 050a45ed323875cc3cafc5ff287c23188c6c3484.  Version 050a45ed323875cc3cafc5ff287c23188c6c3484 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.\nAuto-merging addons/pos_restaurant/static/tests/tours/floor_screen_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/refund_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/tip_screen_tour.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598359271, 'issue_id': 2792693275, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 22, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:00:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193963.png)](https://mergebot.odoo.com/odoo/odoo/pull/193963)

fw-bot (Issue Creator) on (2025-01-16 13:00:58 UTC): @davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193024 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/components/navbar/navbar.js
Auto-merging addons/point_of_sale/static/src/app/components/navbar/navbar.xml
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/components/navbar/navbar.xml
Auto-merging addons/point_of_sale/static/src/app/models/utils/order_change.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/utils/order_change.js
Auto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js
Auto-merging addons/point_of_sale/static/src/app/services/data_service.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js
Auto-merging addons/pos_restaurant/static/src/app/screens/product_screen/order_summary/order_summary.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/screens/product_screen/order_summary/order_summary.js
Auto-merging addons/pos_restaurant/static/src/app/screens/split_bill_screen/split_bill_screen.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/screens/split_bill_screen/split_bill_screen.js
CONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in 384f7253b90cd3f0dc1a5446506f7b8e00e1390a and modified in 050a45ed323875cc3cafc5ff287c23188c6c3484.  Version 050a45ed323875cc3cafc5ff287c23188c6c3484 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.
Auto-merging addons/pos_restaurant/static/tests/tours/floor_screen_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/refund_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/tip_screen_tour.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

caburj on (2025-01-17 13:22:20 UTC): robodoo r+

"
2792692342,pull_request,closed,,[FW][FIX] stock: track returned and unreturned products from customer report,"**Steps to reproduce:**
In Inventory > Settings > Traceability, enable Lots & Serial Numbers
- Create a product P1 tracked by unique serial number
- Update on-hand quantities: 2 x P1
- Create a quotation with 2 units of P1
- Deliver products (assign the two serial numbers)
- Return only 1 product
- Go to the Customer view, click Lot/Serial Numbers, and remove all filters.

**Issue:**
When returning just one product from a delivery containing multiple products, all products in the picking appear as returned.

**Expected:**
Only the product that was actually returned should be marked as returned.

**Cause:**
The logic that sets `has_return` relies solely on the `return_id` field, incorrectly marking all items in the picking as returned if one item is returned.

opw-4417716

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192641",fw-bot,2025-01-16 13:00:38+00:00,[],2025-01-30 19:33:17+00:00,2025-01-16 19:28:59+00:00,https://github.com/odoo/odoo/pull/193962,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595571916, 'issue_id': 2792692342, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193962.png)](https://mergebot.odoo.com/odoo/odoo/pull/193962)', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595571947, 'issue_id': 2792692342, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:00:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193962.png)](https://mergebot.odoo.com/odoo/odoo/pull/193962)

fw-bot (Issue Creator) on (2025-01-16 13:00:40 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2792690717,pull_request,closed,,[FW] 18.0 fix dynamic snippet link not editable bvr,"Steps to reproduce:

- Install the e-commerce module.
- Go to the homepage.
- Enter edit mode.
- Drag and drop a ""Products"" block onto the page.
- Click on the ""See all"" link.
- Edit the link (e.g., change ""/shop"" to ""/contactus"").
- Save the page.
- Click on the ""See all"" link.
- Bug: You are redirected to the ""/shop"" page instead of the
""/contactus"" page as expected.

The bug occurs since commit [1], where the ""See all"" link was added to
""Dynamic"" snippets. Each time a ""Dynamic"" snippet is rendered during a
page load, the href of the ""See all"" link is reset to the main module
page. While this behavior is useful when the snippet is first rendered
after being dropped onto the page, it is problematic afterward. Once the
user has edited the link with a different href, it should not be reset
on every page load.

[1]: https://github.com/odoo/odoo/commit/bbcff746075485be61807d08ad8232dbad347713

[opw-4418048](https://www.odoo.com/web#id=4418048&cids=1&menu_id=4720&action=333&active_id=1695&model=project.task&view_type=form)

Forward-Port-Of: odoo/odoo#191689",fw-bot,2025-01-16 13:00:10+00:00,[],2025-01-30 19:33:19+00:00,2025-01-16 19:29:07+00:00,https://github.com/odoo/odoo/pull/193961,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595570303, 'issue_id': 2792690717, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193961.png)](https://mergebot.odoo.com/odoo/odoo/pull/193961)', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595570335, 'issue_id': 2792690717, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 0, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595863717, 'issue_id': 2792690717, 'author': 'bvr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 23, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596112512, 'issue_id': 2792690717, 'author': 'fw-bot', 'body': ""@bvr-odoo @xO-Tx child PR odoo/odoo#193983 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 16, 16, 2, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 13:00:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193961.png)](https://mergebot.odoo.com/odoo/odoo/pull/193961)

fw-bot (Issue Creator) on (2025-01-16 13:00:12 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

bvr-odoo on (2025-01-16 14:23:13 UTC): @robodoo r+

fw-bot (Issue Creator) on (2025-01-16 16:02:04 UTC): @bvr-odoo @xO-Tx child PR odoo/odoo#193983 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2792689971,pull_request,closed,,[FW][FIX] hr_recruitment: fix candidate/application link and constraint,"Before this commit, the creation of an applicant though `message_new`, It would check for existing candidates but not for the company; however, if the company is different, an error would be raised upon applicant creation and prevent it.

This commit adds the company to the candidate check to avoid raising the constraint, and adjusts the said constraint so that it allows linking to candidates with no company set.

Forward-Port-Of: odoo/odoo#193769",fw-bot,2025-01-16 12:59:51+00:00,[],2025-02-03 15:14:58+00:00,2025-01-20 15:08:03+00:00,https://github.com/odoo/odoo/pull/193960,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595569159, 'issue_id': 2792689971, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193960.png)](https://mergebot.odoo.com/odoo/odoo/pull/193960)', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595569183, 'issue_id': 2792689971, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595823106, 'issue_id': 2792689971, 'author': 'fw-bot', 'body': '@Bertrand2 @tivisse ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 14, 8, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:59:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193960.png)](https://mergebot.odoo.com/odoo/odoo/pull/193960)

fw-bot (Issue Creator) on (2025-01-16 12:59:53 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 14:08:40 UTC): @Bertrand2 @tivisse ci/runbot failed on this forward-port PR

"
2792689105,pull_request,closed,,[FW][FIX] point_of_sale: redesign categories shown,"Currently when users have too many categories in their pos, their are not able to see the products and cannot scroll.

Steps to reproduce:
-------------------
* Add categories to the pos `> 100`
* Open pos shop
> Observation: We cannot see all categories, cannot scroll through them,
and cannot see/select products

Why the fix:
------------

This issue is the same as the one in this commit: https://github.com/odoo/odoo/commit/dd14967a037a93346123265ed489a0b4ce5f8218

But this time we expend the scope of the fix because the issue can also appear on other size screens.

The number of rows of category displayed depends of the size of the screen.

opw-4457772

Forward-Port-Of: odoo/odoo#193164",fw-bot,2025-01-16 12:59:35+00:00,[],2025-01-31 22:16:28+00:00,2025-01-17 22:12:05+00:00,https://github.com/odoo/odoo/pull/193959,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595568509, 'issue_id': 2792689105, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193959.png)](https://mergebot.odoo.com/odoo/odoo/pull/193959)', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595568539, 'issue_id': 2792689105, 'author': 'fw-bot', 'body': '@sbel-odoo @caburj cherrypicking of pull request odoo/odoo#193164 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/components/category_selector/category_selector.scss\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/components/category_selector/category_selector.scss\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598379094, 'issue_id': 2792689105, 'author': 'sbel-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 33, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:59:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193959.png)](https://mergebot.odoo.com/odoo/odoo/pull/193959)

fw-bot (Issue Creator) on (2025-01-16 12:59:37 UTC): @sbel-odoo @caburj cherrypicking of pull request odoo/odoo#193164 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/components/category_selector/category_selector.scss
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/components/category_selector/category_selector.scss

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

sbel-odoo on (2025-01-17 13:33:23 UTC): @robodoo r+

"
2792688146,pull_request,closed,,[FW][FIX] discuss: prevent traceback with sessions missing a channelMember,"Since [1], the session getter for the sidebar cards assumes that channelMember is always defined on rtcSessions, this could cause tracebacks.

[1]: https://github.com/odoo/odoo/pull/190050

Forward-Port-Of: odoo/odoo#193893",fw-bot,2025-01-16 12:59:16+00:00,[],2025-01-16 19:31:05+00:00,2025-01-16 19:29:19+00:00,https://github.com/odoo/odoo/pull/193958,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595567412, 'issue_id': 2792688146, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193958.png)](https://mergebot.odoo.com/odoo/odoo/pull/193958)', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595567431, 'issue_id': 2792688146, 'author': 'fw-bot', 'body': '@thanhdodeurodoo @phenix-factory cherrypicking of pull request odoo/odoo#193893 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/discuss/call/public_web/discuss_sidebar_call_participants.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/discuss/call/public_web/discuss_sidebar_call_participants.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595909007, 'issue_id': 2792688146, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 40, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:59:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193958.png)](https://mergebot.odoo.com/odoo/odoo/pull/193958)

fw-bot (Issue Creator) on (2025-01-16 12:59:18 UTC): @thanhdodeurodoo @phenix-factory cherrypicking of pull request odoo/odoo#193893 failed.

stdout:
```
Auto-merging addons/mail/static/src/discuss/call/public_web/discuss_sidebar_call_participants.js
CONFLICT (content): Merge conflict in addons/mail/static/src/discuss/call/public_web/discuss_sidebar_call_participants.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-16 14:40:51 UTC): @robodoo r+

"
2792686493,pull_request,closed,,[FW][FIX] pos_online_payment_self_order: runbot error 111171,"The `test_01_online_payment_with_multi_table` fails in runbot when running in ""no-demo"" mode. This is because it's not using the correct setup for testing restaurant configs.

We ensure, in this commit, that the test uses the correct setup for testing by inheriting from the pos_restaurant's TestFrontendCommon. The total amount in the tour is adjusted because the test product from the default setup has no tax.

Runbot Error: [111171](https://runbot.odoo.com/odoo/runbot.build.error/111171)

Forward-Port-Of: odoo/odoo#193194",fw-bot,2025-01-16 12:58:39+00:00,[],2025-02-03 13:39:15+00:00,2025-01-20 13:19:47+00:00,https://github.com/odoo/odoo/pull/193957,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595566606, 'issue_id': 2792686493, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193957.png)](https://mergebot.odoo.com/odoo/odoo/pull/193957)', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595566650, 'issue_id': 2792686493, 'author': 'fw-bot', 'body': '@caburj @Williambraecky cherrypicking of pull request odoo/odoo#193194 failed.\n\nstdout:\n```\nAuto-merging addons/pos_online_payment_self_order/static/tests/tours/pos_online_payment_multi_table_order.js\nCONFLICT (content): Merge conflict in addons/pos_online_payment_self_order/static/tests/tours/pos_online_payment_multi_table_order.js\nAuto-merging addons/pos_online_payment_self_order/tests/test_self_order_frontend.py\nCONFLICT (content): Merge conflict in addons/pos_online_payment_self_order/tests/test_self_order_frontend.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597760776, 'issue_id': 2792686493, 'author': 'caburj', 'body': 'Hi @Williambraecky. Can you also make a custom build for ""no demo"" test of this forward port?', 'created_at': datetime.datetime(2025, 1, 17, 9, 8, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597764471, 'issue_id': 2792686493, 'author': 'Williambraecky', 'body': '> Hi @Williambraecky. Can you also make a custom build for ""no demo"" test of this forward port?\r\n\r\nSeems like it\'s already done 👍', 'created_at': datetime.datetime(2025, 1, 17, 9, 10, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173467, 'issue_id': 2792686493, 'author': 'fw-bot', 'body': '@caburj @Williambraecky this forward port of odoo/odoo#193194 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601899526, 'issue_id': 2792686493, 'author': 'caburj', 'body': ""The test isn't failing in no-demo build.\r\n\r\nrobodoo r+"", 'created_at': datetime.datetime(2025, 1, 20, 9, 40, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:59:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193957.png)](https://mergebot.odoo.com/odoo/odoo/pull/193957)

fw-bot (Issue Creator) on (2025-01-16 12:59:01 UTC): @caburj @Williambraecky cherrypicking of pull request odoo/odoo#193194 failed.

stdout:
```
Auto-merging addons/pos_online_payment_self_order/static/tests/tours/pos_online_payment_multi_table_order.js
CONFLICT (content): Merge conflict in addons/pos_online_payment_self_order/static/tests/tours/pos_online_payment_multi_table_order.js
Auto-merging addons/pos_online_payment_self_order/tests/test_self_order_frontend.py
CONFLICT (content): Merge conflict in addons/pos_online_payment_self_order/tests/test_self_order_frontend.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

caburj on (2025-01-17 09:08:36 UTC): Hi @Williambraecky. Can you also make a custom build for ""no demo"" test of this forward port?

Williambraecky on (2025-01-17 09:10:30 UTC): Seems like it's already done 👍

fw-bot (Issue Creator) on (2025-01-20 02:01:45 UTC): @caburj @Williambraecky this forward port of odoo/odoo#193194 is awaiting action (not merged or closed).

caburj on (2025-01-20 09:40:28 UTC): The test isn't failing in no-demo build.

robodoo r+

"
2792685869,pull_request,closed,,[FW][FIX] sale_timesheet: Allow users without Sales access to record time,"This PR addresses the issue of users without Sales access not being able to record on time on timesheets that are linked to a sale order line.

If a user with access to Projects and Timesheets, but not Sales, wants to record time on a timesheet linked to a sales order, they will get an access rights error. This is because we check to see if there is an analytic distribution associated with the sale order line associated with the project task. However, this check is done without `sudo()` access in its current state. This PR provides that access because the result is not propagated further than simply evaluating whether or not there is an analytic distribution at all.

The result is that this workflow is no longer blocking for users who should be able to timesheet, but not necessarily view or edit the sale order.

This can be tested on Runbot by following these steps:

Configuration:
- User A does not have any Sales access, but has full rights to Projects and Timesheets
- Have a service product that creates a task in a project
- Have a sale order made for this product by User B, who does have Sales access

Now, 
1) On User A, navigate to the associated project and task made by the sale order from earlier
2) Click on the Timesheets tab in the notebook part of the view
3) Attempt to record an hour of work by adding a line to the timesheet, then clicking the ""save"" button

Prior to this PR, the user will get an access rights error. Once this is merged, that error will no longer appear. 

opw-4409571

Forward-Port-Of: odoo/odoo#193311",fw-bot,2025-01-16 12:58:22+00:00,[],2025-01-30 19:33:21+00:00,2025-01-16 19:29:23+00:00,https://github.com/odoo/odoo/pull/193956,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595566476, 'issue_id': 2792685869, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193956.png)](https://mergebot.odoo.com/odoo/odoo/pull/193956)', 'created_at': datetime.datetime(2025, 1, 16, 12, 58, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595566528, 'issue_id': 2792685869, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595704535, 'issue_id': 2792685869, 'author': 'fw-bot', 'body': '@hahu-odoo @xavierbol ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 13, 33, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:58:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193956.png)](https://mergebot.odoo.com/odoo/odoo/pull/193956)

fw-bot (Issue Creator) on (2025-01-16 12:59:00 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 13:33:14 UTC): @hahu-odoo @xavierbol ci/runbot failed on this forward-port PR

"
2792671093,pull_request,closed,,[FW][FIX] account_peppol: remove peppol registration migration button,"Peppol migration creates more issues than it solves. A lot of users issue migration requests to move to another SMP but later discover that the SMP they wanted to migrate to does not support migration keys. This creates a state that we need to handle manually. Most SMP do not support migrating away and force users to deregister and reregister again on another one.

This commit adds a fix in stable for that issue by removing the button from the res_config_settings_buttons and adding a deprecated warning when the user tries to call the `button_migrate_peppol_registration` method.

task-4394408

Forward-Port-Of: odoo/odoo#193794",fw-bot,2025-01-16 12:53:33+00:00,[],2025-01-31 15:10:42+00:00,2025-01-17 15:08:14+00:00,https://github.com/odoo/odoo/pull/193955,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595548628, 'issue_id': 2792671093, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193955.png)](https://mergebot.odoo.com/odoo/odoo/pull/193955)', 'created_at': datetime.datetime(2025, 1, 16, 12, 53, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595548651, 'issue_id': 2792671093, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.\n\nstdout:\n```\nAuto-merging addons/account_peppol/i18n/account_peppol.pot\nCONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot\nAuto-merging addons/account_peppol/models/res_config_settings.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 53, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598030961, 'issue_id': 2792671093, 'author': 'antonrom1', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 50, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:53:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193955.png)](https://mergebot.odoo.com/odoo/odoo/pull/193955)

fw-bot (Issue Creator) on (2025-01-16 12:53:34 UTC): @antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.

stdout:
```
Auto-merging addons/account_peppol/i18n/account_peppol.pot
CONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot
Auto-merging addons/account_peppol/models/res_config_settings.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

antonrom1 on (2025-01-17 10:50:54 UTC): @robodoo r+

"
2792669782,pull_request,closed,,[FW][FIX] web: graph: prevent rendering too many datasets,"Chart.js can be really slow when rendering a large number of datasets.
So this commit limits the amount of datasets displayed by default on the graph.
However a button is present to display all datasets even if it can take a moment to render them.

task-4351783

Forward-Port-Of: odoo/odoo#193814
Forward-Port-Of: odoo/odoo#192892",fw-bot,2025-01-16 12:53:05+00:00,[],2025-01-31 15:10:40+00:00,2025-01-17 15:08:00+00:00,https://github.com/odoo/odoo/pull/193954,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595547221, 'issue_id': 2792669782, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193954.png)](https://mergebot.odoo.com/odoo/odoo/pull/193954)', 'created_at': datetime.datetime(2025, 1, 16, 12, 53, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595547283, 'issue_id': 2792669782, 'author': 'fw-bot', 'body': '@mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/views/graph/graph_controller.js\nAuto-merging addons/web/static/src/views/graph/graph_controller.xml\nAuto-merging addons/web/static/src/views/graph/graph_model.js\nCONFLICT (modify/delete): addons/web/static/tests/views/graph_view_tests.js deleted in 3a9090e09b25aeb06994ebf0a91cdcf30cdb059d and modified in 9ef24db18c9d4646b88fe23c5a888d7088bb44ca.  Version 9ef24db18c9d4646b88fe23c5a888d7088bb44ca of addons/web/static/tests/views/graph_view_tests.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 53, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597880286, 'issue_id': 2792669782, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 8, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:53:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193954.png)](https://mergebot.odoo.com/odoo/odoo/pull/193954)

fw-bot (Issue Creator) on (2025-01-16 12:53:07 UTC): @mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.

stdout:
```
Auto-merging addons/web/static/src/views/graph/graph_controller.js
Auto-merging addons/web/static/src/views/graph/graph_controller.xml
Auto-merging addons/web/static/src/views/graph/graph_model.js
CONFLICT (modify/delete): addons/web/static/tests/views/graph_view_tests.js deleted in 3a9090e09b25aeb06994ebf0a91cdcf30cdb059d and modified in 9ef24db18c9d4646b88fe23c5a888d7088bb44ca.  Version 9ef24db18c9d4646b88fe23c5a888d7088bb44ca of addons/web/static/tests/views/graph_view_tests.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mcm-odoo on (2025-01-17 10:08:06 UTC): @robodoo r+

"
2792668834,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747

Forward-Port-Of: odoo/odoo#193786",fw-bot,2025-01-16 12:52:46+00:00,[],2025-01-30 16:33:20+00:00,2025-01-16 16:29:45+00:00,https://github.com/odoo/odoo/pull/193953,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595546251, 'issue_id': 2792668834, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193953.png)](https://mergebot.odoo.com/odoo/odoo/pull/193953)', 'created_at': datetime.datetime(2025, 1, 16, 12, 52, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595546291, 'issue_id': 2792668834, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 52, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595857697, 'issue_id': 2792668834, 'author': 'fw-bot', 'body': '@guva-odoo @jbw-odoo the next pull request (odoo/odoo#193984) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 14, 20, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595891700, 'issue_id': 2792668834, 'author': 'guva-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 34, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:52:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193953.png)](https://mergebot.odoo.com/odoo/odoo/pull/193953)

fw-bot (Issue Creator) on (2025-01-16 12:52:48 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 14:20:47 UTC): @guva-odoo @jbw-odoo the next pull request (odoo/odoo#193984) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

guva-odoo on (2025-01-16 14:34:07 UTC): @robodoo r+

"
2792667340,pull_request,closed,,[FW][FIX] mrp: find all child MO,"Steps to reproduce the bug:
- Create a storable product “C1”:
     - MTO + Manufacture
     - BoM:
        - Component: 1 unit of C2
- Create a storable product “P1”
    - Component: 1 unit of C1

- Create a MO to produce one unit of P1:
    - Confirm
- A child MO with one unit of C1 is created
- Update the qty producing of P1 to 2
- A new MO to produce one unit of C1 is created

Problem:
The MO of P1 is linked only to the last MO of C1.
This occurs because the “created_production_id” field in the stock move of C1 (associated with the MO of P1) is updated to reference the most recent MO of C1. Additionally, since the following fix:
https://github.com/odoo/odoo/commit/c5b3f41fbd442def9e97acb023a00862e7d03eb3#diff-6d86bc8c3e9aa22586656b702849c5bbbb00c9b97ffd08bc0842e0e68f8948f9R74
Each new MO has its own procurement group.
As a result, when using the _get_children method:
- The method retrieves stock moves linked to the current procurement group.
- It uses their created_production_id to fetch the associated procurement group and then retrieves the related production_id.
However, since the two child MOs of C1 belong to different procurement groups, only the latest MO is returned.

opw-4450210

Forward-Port-Of: odoo/odoo#193829
Forward-Port-Of: odoo/odoo#192952",fw-bot,2025-01-16 12:52:11+00:00,[],2025-01-30 19:01:05+00:00,2025-01-16 19:00:56+00:00,https://github.com/odoo/odoo/pull/193952,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595545079, 'issue_id': 2792667340, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193952.png)](https://mergebot.odoo.com/odoo/odoo/pull/193952)', 'created_at': datetime.datetime(2025, 1, 16, 12, 52, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595545093, 'issue_id': 2792667340, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_production.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 52, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596271844, 'issue_id': 2792667340, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 17, 10, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:52:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193952.png)](https://mergebot.odoo.com/odoo/odoo/pull/193952)

fw-bot (Issue Creator) on (2025-01-16 12:52:30 UTC): @DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_production.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

DjamelTouati on (2025-01-16 17:10:24 UTC): robodoo r+

"
2792627042,pull_request,closed,,[FW][FIX] hr_attendance : fix `get_base_url` ref,"Issue: when the website has a domain `get_base_url` return the domain if the record calling it has a company set on it

- call the function with an empty object to get the database url instead

Task: 3903743



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193182",fw-bot,2025-01-16 12:37:47+00:00,[],2025-01-17 21:34:47+00:00,2025-01-17 20:12:24+00:00,https://github.com/odoo/odoo/pull/193951,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595492941, 'issue_id': 2792627042, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193951.png)](https://mergebot.odoo.com/odoo/odoo/pull/193951)', 'created_at': datetime.datetime(2025, 1, 16, 12, 37, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595493029, 'issue_id': 2792627042, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77256) did not succeed. You will need to fix it before this can be merged.\n\nBoth this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 37, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598312224, 'issue_id': 2792627042, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 57, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:37:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193951.png)](https://mergebot.odoo.com/odoo/odoo/pull/193951)

fw-bot (Issue Creator) on (2025-01-16 12:37:52 UTC): @amah-odoo @Bertrand2 while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77256) did not succeed. You will need to fix it before this can be merged.

Both this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-17 12:57:40 UTC): @robodoo r+

"
2792616044,pull_request,closed,,[FIX] l10n_it_edi: Add fallback for remove_signature,"Backporting from saas-17.3 odoo/odoo#137572 because of tickets, see opws below.
The OpenSSL call started not working after `cryptography==42.0.8`

\---

Some of the invoices (i.e. those from Servizio Elettrico Nazionale, the
ex-monopoly-of-energy company) have custom signatures that rely on an
old OpenSSL implementation that breaks the current one that sees them as
malformed, so we cannot read those files. Also, we couldn't find an
alternative way to use OpenSSL to just get the same result without
getting the error.

A new fallback method has been added that reads the ASN1 file structure
and takes the encoded pkcs7-data tag content out of it, regardless of
the signature.

Being a non-optimized pure Python implementation, it takes about 2x the
time than the regular method, so it's better used as a fallback. We
didn't use an existing library not to further pollute the dependencies
space.

\---

opw-4471459
opw-4437288
opw-4417875",lordkrandel,2025-01-16 12:33:31+00:00,[],2025-01-31 17:45:40+00:00,2025-01-17 17:35:08+00:00,https://github.com/odoo/odoo/pull/193950,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595477781, 'issue_id': 2792616044, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193950.png)](https://mergebot.odoo.com/odoo/odoo/pull/193950)', 'created_at': datetime.datetime(2025, 1, 16, 12, 33, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595585281, 'issue_id': 2792616044, 'author': 'lordkrandel', 'body': '@robodoo up to saas-17.2', 'created_at': datetime.datetime(2025, 1, 16, 13, 4, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595585416, 'issue_id': 2792616044, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-17.2'."", 'created_at': datetime.datetime(2025, 1, 16, 13, 4, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597834969, 'issue_id': 2792616044, 'author': 'lordkrandel', 'body': '@odoo/rd-security \r\nHello 👋🏻 \r\nWe need an override, and the PR solves some 3 urgent tickets for Italy on older versions.\r\n\r\nThis is a backport, same code was already reviewed...\r\nhere: https://github.com/odoo/odoo/pull/137572\r\nand here: https://github.com/odoo/iap-apps/pull/694', 'created_at': datetime.datetime(2025, 1, 17, 9, 45, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597913061, 'issue_id': 2792616044, 'author': 'xmo-odoo', 'body': '> This is a backport, same code was already reviewed... here: https://github.com/odoo/odoo/pull/137572 and here: https://github.com/odoo/iap-apps/pull/694\r\n\r\nPlease fix the commit message to refer to the PR being backported (it currently refers to a completely unrelated PR).\r\n\r\n@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 17, 10, 24, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598424648, 'issue_id': 2792616044, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 57, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:33:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193950.png)](https://mergebot.odoo.com/odoo/odoo/pull/193950)

lordkrandel (Issue Creator) on (2025-01-16 13:04:45 UTC): @robodoo up to saas-17.2

robodoo on (2025-01-16 13:04:47 UTC): Forward-porting to 'saas-17.2'.

lordkrandel (Issue Creator) on (2025-01-17 09:45:58 UTC): @odoo/rd-security 
Hello 👋🏻 
We need an override, and the PR solves some 3 urgent tickets for Italy on older versions.

This is a backport, same code was already reviewed...
here: https://github.com/odoo/odoo/pull/137572
and here: https://github.com/odoo/iap-apps/pull/694

xmo-odoo on (2025-01-17 10:24:29 UTC): Please fix the commit message to refer to the PR being backported (it currently refers to a completely unrelated PR).

@robodoo override=ci/security

jco-odoo on (2025-01-17 13:57:38 UTC): @robodoo r+

"
2792566326,pull_request,closed,,[FIX] stock_account: Update lot_valuated from ProductProduct,"The write logic for lot_valuated is handled on the ProductTemplate. When you change the value of 'lot_valuated', '_svl_empty_stock()' is called before the new value is set, and the code expects ProductTemplate.lot_valuated and ProductProduct.lot_valuated to not yet be updated. However, if you change 'lot_valuated' from the ProductProduct model, ProductProduct.lot_valuated will be updated before ProductTemplate.write() is called. Hence, in '_svl_empty_stock()', ProductTemplate.lot_valuated != ProductProduct.lot_valuated

This issue only happens in the 'write' context, so it should not cause too much issue.

To fix this issue, when lot_valuated is updated from ProductProduct, we call the ProductTemplate write instead.
---


https://github.com/user-attachments/assets/9d2f64a4-a7ad-4078-ad0b-0cc50270492b


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",DavidFesquet,2025-01-16 12:14:16+00:00,[],2025-02-07 17:26:19+00:00,2025-01-24 17:14:49+00:00,https://github.com/odoo/odoo/pull/193948,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595388269, 'issue_id': 2792566326, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193948.png)](https://mergebot.odoo.com/odoo/odoo/pull/193948)', 'created_at': datetime.datetime(2025, 1, 16, 12, 14, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597749922, 'issue_id': 2792566326, 'author': 'DavidFesquet', 'body': ""### New strategy (to confirm):\r\n\r\nInstead of handling the update from ProductProduct, we forbid it.\r\nIt makes sense as the user may not realize that when changing the setting for 1 variant it will propagate to all the template variants.\r\n\r\nSo this strategy require 2 modifications:\r\n- Set 'lot_valuated' to read-only in ProductProduct form\r\n- Raise a UserError if lot_valuated is changed from the ProductProduct. This can be accomplished by checking for discrepancies in the value of `lot_valuated` between the variants and template."", 'created_at': datetime.datetime(2025, 1, 17, 9, 3, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2605083516, 'issue_id': 2792566326, 'author': 'Whenrow', 'body': 'What about overriding `product.product` `write` method to write on `self.product_tmpl_id.lot_valuated` instead ?', 'created_at': datetime.datetime(2025, 1, 21, 15, 43, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609779334, 'issue_id': 2792566326, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 13, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609787749, 'issue_id': 2792566326, 'author': 'MiquelRForgeFlow', 'body': 'conflicts', 'created_at': datetime.datetime(2025, 1, 23, 13, 17, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612420816, 'issue_id': 2792566326, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 12, 30, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:14:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193948.png)](https://mergebot.odoo.com/odoo/odoo/pull/193948)

DavidFesquet (Issue Creator) on (2025-01-17 09:03:05 UTC): ### New strategy (to confirm):

Instead of handling the update from ProductProduct, we forbid it.
It makes sense as the user may not realize that when changing the setting for 1 variant it will propagate to all the template variants.

So this strategy require 2 modifications:
- Set 'lot_valuated' to read-only in ProductProduct form
- Raise a UserError if lot_valuated is changed from the ProductProduct. This can be accomplished by checking for discrepancies in the value of `lot_valuated` between the variants and template.

Whenrow on (2025-01-21 15:43:06 UTC): What about overriding `product.product` `write` method to write on `self.product_tmpl_id.lot_valuated` instead ?

Whenrow on (2025-01-23 13:13:51 UTC): robodoo r+

MiquelRForgeFlow on (2025-01-23 13:17:47 UTC): conflicts

Whenrow on (2025-01-24 12:30:11 UTC): robodoo r+

"
2792561772,pull_request,closed,,[IMP] mail: change chat window header background color with unread,"This PR changes the background color of a chat window with unread messages.
",phenix-factory,2025-01-16 12:12:40+00:00,[],2025-01-28 13:48:22+00:00,2025-01-28 13:48:22+00:00,https://github.com/odoo/odoo/pull/193947,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595380670, 'issue_id': 2792561772, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193947.png)](https://mergebot.odoo.com/odoo/odoo/pull/193947)', 'created_at': datetime.datetime(2025, 1, 16, 12, 12, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:12:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193947.png)](https://mergebot.odoo.com/odoo/odoo/pull/193947)

"
2792550933,pull_request,closed,,[FW][FIX] pos_mercado_pago: wrong attribute was chosen,"Before this commit:
Nothing would happen after a mercado pago webhook notification received.

Since 17.4, `payment_method` attribute have been changed to `payment_method_id`. Thus it was returning `undefined` and silently fail to update the line

After this commit:
Call `handleMercadoPagoWebhook` on notification received as intended

opw-4349957

Forward-Port-Of: odoo/odoo#193784",fw-bot,2025-01-16 12:08:45+00:00,[],2025-01-31 12:57:43+00:00,2025-01-17 12:55:48+00:00,https://github.com/odoo/odoo/pull/193946,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595367508, 'issue_id': 2792550933, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193946.png)](https://mergebot.odoo.com/odoo/odoo/pull/193946)', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595367635, 'issue_id': 2792550933, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596784471, 'issue_id': 2792550933, 'author': 'robodoo', 'body': '@lse-odoo @davidmonnom staging failed: ci/runbot on a159a140d93acf42266ada8e3e9f6841e0961bff (view more at https://runbot.odoo.com/runbot/build/73472269)', 'created_at': datetime.datetime(2025, 1, 16, 20, 0, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597965099, 'issue_id': 2792550933, 'author': 'lse-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 10, 40, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:08:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193946.png)](https://mergebot.odoo.com/odoo/odoo/pull/193946)

fw-bot (Issue Creator) on (2025-01-16 12:08:47 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-16 20:00:22 UTC): @lse-odoo @davidmonnom staging failed: ci/runbot on a159a140d93acf42266ada8e3e9f6841e0961bff (view more at https://runbot.odoo.com/runbot/build/73472269)

lse-odoo on (2025-01-17 10:40:16 UTC): @robodoo retry

"
2792550004,pull_request,closed,,[FW][REM] html_builder: remove empty file,"In the forward port #190318 while fixing conflict, a new empty file from another projet was accedentally sled in the commit. This commit removes this empty useless file.

Forward-Port-Of: odoo/odoo#193907",fw-bot,2025-01-16 12:08:28+00:00,[],2025-02-03 22:25:07+00:00,2025-01-20 21:48:37+00:00,https://github.com/odoo/odoo/pull/193945,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595365742, 'issue_id': 2792550004, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193945.png)](https://mergebot.odoo.com/odoo/odoo/pull/193945)', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595365765, 'issue_id': 2792550004, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595434295, 'issue_id': 2792550004, 'author': 'fdardenne', 'body': '@fw-bot r+', 'created_at': datetime.datetime(2025, 1, 16, 12, 22, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595597087, 'issue_id': 2792550004, 'author': 'fw-bot', 'body': '@fdardenne @sobo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 13, 8, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596140247, 'issue_id': 2792550004, 'author': 'fw-bot', 'body': '@fdardenne @sobo-odoo the next pull request (odoo/odoo#194007) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 16, 13, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601172829, 'issue_id': 2792550004, 'author': 'fw-bot', 'body': '@fdardenne @sobo-odoo this forward port of odoo/odoo#193907 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602359540, 'issue_id': 2792550004, 'author': 'sobo-odoo', 'body': '@robodoo r+ \r\n(apparently the ""up to"" command was not taken into account)', 'created_at': datetime.datetime(2025, 1, 20, 12, 55, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:08:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193945.png)](https://mergebot.odoo.com/odoo/odoo/pull/193945)

fw-bot (Issue Creator) on (2025-01-16 12:08:30 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fdardenne on (2025-01-16 12:22:42 UTC): @fw-bot r+

fw-bot (Issue Creator) on (2025-01-16 13:08:25 UTC): @fdardenne @sobo-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 16:13:16 UTC): @fdardenne @sobo-odoo the next pull request (odoo/odoo#194007) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-20 02:01:12 UTC): @fdardenne @sobo-odoo this forward port of odoo/odoo#193907 is awaiting action (not merged or closed).

sobo-odoo on (2025-01-20 12:55:54 UTC): @robodoo r+ 
(apparently the ""up to"" command was not taken into account)

"
2792549078,pull_request,closed,,"[FW][FIX] repair,sale_stock,stock_account: repair with auto FIFO component","When using an auto fifo product as part of the repair, the COGS
won't be based on the used product

To reproduce the issue:
1. Setup auto fifo product
2. Receive 1@10 and 1@20
3. Process a RO:
   - Invoice method: After repair
   - Parts:
     - Add 1 x fifo product
4. Create and post the invoice
5. Open its journal items

Error: Cogs are $20 instead of $10

When posting the invoice, we generate the COGS:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L47-L48
We therefore compute the ""anglo saxon unit price"":
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L133
However, there isn't any override to handle the RO case, so it leads
to the default mechanism, i.e. the standard price of the product:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/7cd7563f6708331bb6baf0e06d07a9f9ee329e38/addons/stock_account/models/product.py#L753-L757

And, since the first product is out, its standard price is now based
on the next candidate: $20

About the `sudo`: an accountman has not any access to `repair`, so
posting such an invoice would raise an error. Since this diff is
specific to Odoo 16, the idea is not to impact any security rules
and rather minimize the changes.

Note: Indeed, `repair` does not depend on `stock_account`, so this
commit could lead to a traceback if the bridge is removed. I delegate
this issue to the error of dependencies. Anyway, removing the bridge
would lead to other bugs. Hopefully, this has been fixed on master [1].

[1] https://github.com/odoo/odoo/commit/f7dbdec11b74f8c7d969763d8c5cf09542a47f86

OPW-4166570

Forward-Port-Of: odoo/odoo#193826
Forward-Port-Of: odoo/odoo#193076",fw-bot,2025-01-16 12:08:10+00:00,[],2025-02-04 12:31:39+00:00,2025-01-21 12:28:23+00:00,https://github.com/odoo/odoo/pull/193944,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595364958, 'issue_id': 2792549078, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193944.png)](https://mergebot.odoo.com/odoo/odoo/pull/193944)', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595365000, 'issue_id': 2792549078, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 8, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595451036, 'issue_id': 2792549078, 'author': 'fw-bot', 'body': '@adwid @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 12, 26, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468684, 'issue_id': 2792549078, 'author': 'fw-bot', 'body': '@adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600464930, 'issue_id': 2792549078, 'author': 'fw-bot', 'body': '@adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173610, 'issue_id': 2792549078, 'author': 'fw-bot', 'body': '@adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:08:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193944.png)](https://mergebot.odoo.com/odoo/odoo/pull/193944)

fw-bot (Issue Creator) on (2025-01-16 12:08:17 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 12:26:54 UTC): @adwid @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-18 02:01:00 UTC): @adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:49 UTC): @adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:51 UTC): @adwid @Whenrow this forward port of odoo/odoo#193076 is awaiting action (not merged or closed).

"
2792546276,pull_request,closed,,[FIX] hr_holidays: fix graphs in time off reporting by type,"The line and pie chart were crashing in the time off reporting by type. Steps to reproduce:
- Open time off > Reporting > By type
- Click on the line or pie chart view

This commit fixes the issue by processing the data points for the line and pie chart views.

task-4477518
",romaincarlier4,2025-01-16 12:07:14+00:00,[],2025-01-21 13:59:44+00:00,2025-01-21 13:55:52+00:00,https://github.com/odoo/odoo/pull/193943,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595360589, 'issue_id': 2792546276, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193943.png)](https://mergebot.odoo.com/odoo/odoo/pull/193943)', 'created_at': datetime.datetime(2025, 1, 16, 12, 7, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603993278, 'issue_id': 2792546276, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 8, 44, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:07:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193943.png)](https://mergebot.odoo.com/odoo/odoo/pull/193943)

tivisse on (2025-01-21 08:44:20 UTC): @robodoo r+

"
2792542107,pull_request,closed,,[FW][FIX] hr: fix archive banner z-index,"if an employee get archived the banner will appear behind the employee picture

Issue: the `--Ribbon-z-index: 1` var is removed from web/static because it overlap with something else

- move the widget after the div to have a higher z-index

Task: 4452394


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193507",fw-bot,2025-01-16 12:05:42+00:00,[],2025-01-30 20:32:45+00:00,2025-01-16 20:12:53+00:00,https://github.com/odoo/odoo/pull/193942,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595353265, 'issue_id': 2792542107, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193942.png)](https://mergebot.odoo.com/odoo/odoo/pull/193942)', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595353288, 'issue_id': 2792542107, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595376695, 'issue_id': 2792542107, 'author': 'amah-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 12, 12, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:05:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193942.png)](https://mergebot.odoo.com/odoo/odoo/pull/193942)

fw-bot (Issue Creator) on (2025-01-16 12:05:43 UTC): @amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

amah-odoo on (2025-01-16 12:12:05 UTC): @robodoo r+

"
2792541372,pull_request,closed,,[FW][IMP] base: phone field alignment,"Aligned the phone field to ensure it properly matches the overall layout and maintains visual consistency across the form. This adjustment improves the user interface by correcting misalignment issues, enhancing readability, and providing a cleaner design.

Task-4427199

Forward-Port-Of: odoo/odoo#191898",fw-bot,2025-01-16 12:05:23+00:00,[],2025-01-30 20:32:46+00:00,2025-01-16 20:13:02+00:00,https://github.com/odoo/odoo/pull/193941,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595351306, 'issue_id': 2792541372, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193941.png)](https://mergebot.odoo.com/odoo/odoo/pull/193941)', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595351468, 'issue_id': 2792541372, 'author': 'fw-bot', 'body': '@aath-odoo @std-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595720319, 'issue_id': 2792541372, 'author': 'std-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 13, 38, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:05:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193941.png)](https://mergebot.odoo.com/odoo/odoo/pull/193941)

fw-bot (Issue Creator) on (2025-01-16 12:05:25 UTC): @aath-odoo @std-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

std-odoo on (2025-01-16 13:38:53 UTC): @robodoo r+

"
2792540332,pull_request,closed,,[FW][FIX] core: add_index needs a savepoint,"When there is a failure when adding an index, the ORM supposes a rollback is done in `add_index`, so the next SQL statement will fail because the current transaction is aborted.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193499",fw-bot,2025-01-16 12:04:57+00:00,[],2025-01-17 07:36:43+00:00,2025-01-16 20:12:49+00:00,https://github.com/odoo/odoo/pull/193940,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595350866, 'issue_id': 2792540332, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193940.png)](https://mergebot.odoo.com/odoo/odoo/pull/193940)', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595350895, 'issue_id': 2792540332, 'author': 'fw-bot', 'body': '@kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595496095, 'issue_id': 2792540332, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 12, 38, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:05:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193940.png)](https://mergebot.odoo.com/odoo/odoo/pull/193940)

fw-bot (Issue Creator) on (2025-01-16 12:05:16 UTC): @kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-16 12:38:40 UTC): @robodoo r+

"
2792539406,pull_request,closed,,[FW][FIX] web: make resequence work after a resequence crash,"Steps to reproduce:
- Go to a form view with a one2many with a handle widget
- Move a line in the one2many that make Odoo crash with the onchange

To generate a faulty view, create a form view with a one2many and add an automation ""On UI change"" to make the resequence crash.

Current behaviour
-----------------
After the error being thrown, the user will not be able to resequence this line again.

Expected Behaviour
------------------
After the error, the user will still be able to resequence this line

Forward-Port-Of: odoo/odoo#193901
Forward-Port-Of: odoo/odoo#157539",fw-bot,2025-01-16 12:04:40+00:00,[],2025-01-30 20:32:45+00:00,2025-01-16 20:12:57+00:00,https://github.com/odoo/odoo/pull/193939,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2595350811, 'issue_id': 2792539406, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193939.png)](https://mergebot.odoo.com/odoo/odoo/pull/193939)', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595350842, 'issue_id': 2792539406, 'author': 'fw-bot', 'body': '@fdardenne @SimonGenin this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 5, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595419739, 'issue_id': 2792539406, 'author': 'fdardenne', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 12, 19, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 12:05:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193939.png)](https://mergebot.odoo.com/odoo/odoo/pull/193939)

fw-bot (Issue Creator) on (2025-01-16 12:05:14 UTC): @fdardenne @SimonGenin this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fdardenne on (2025-01-16 12:19:14 UTC): @robodoo r+

"
2792502291,pull_request,closed,,[FIX] im_livechat: hotkeys don't work on close confirmation,"Before this commit, the Escape and Enter hotkeys did not work to cancel and confirm the `CloseConfirmation` in livechat. This happened because:
- The `keydown' event is not captured without the focused element.
- `useAutofocus` doesn't detect the element properly because the active element in the ui service is set by the main tree DOM root, not the shadow root. This PR makes sure that the close confirmation element is focusable on mounting and also puts the focus on the chat window composer on cancel so it's more effective in case the user needs to type or use Esc to reopen close confirmation.

",maki-odoo,2025-01-16 11:49:26+00:00,[],2025-01-17 15:27:54+00:00,2025-01-17 15:27:44+00:00,https://github.com/odoo/odoo/pull/193938,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595312371, 'issue_id': 2792502291, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193938.png)](https://mergebot.odoo.com/odoo/odoo/pull/193938)', 'created_at': datetime.datetime(2025, 1, 16, 11, 49, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598610363, 'issue_id': 2792502291, 'author': 'maki-odoo', 'body': 'Moved to odoo/odoo#194180', 'created_at': datetime.datetime(2025, 1, 17, 15, 27, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 11:49:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193938.png)](https://mergebot.odoo.com/odoo/odoo/pull/193938)

maki-odoo (Issue Creator) on (2025-01-17 15:27:44 UTC): Moved to odoo/odoo#194180

"
2792493246,pull_request,closed,,Hoot fixes,"This commit handles various fixes for the Hoot testing framework & other frontend unit test helpers.

Enterprise: https://github.com/odoo/enterprise/pull/77245

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jum-odoo,2025-01-16 11:45:03+00:00,[],2025-01-17 10:03:18+00:00,2025-01-17 10:03:18+00:00,https://github.com/odoo/odoo/pull/193937,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595303750, 'issue_id': 2792493246, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193937.png)](https://mergebot.odoo.com/odoo/odoo/pull/193937)', 'created_at': datetime.datetime(2025, 1, 16, 11, 45, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597647062, 'issue_id': 2792493246, 'author': 'mcm-odoo', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 2, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597647118, 'issue_id': 2792493246, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 17, 8, 2, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 11:45:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193937.png)](https://mergebot.odoo.com/odoo/odoo/pull/193937)

mcm-odoo on (2025-01-17 08:02:27 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-17 08:02:30 UTC): Merge method set to rebase and fast-forward.

"
2792484378,pull_request,closed,,[FIX] mail: full composer auto-save does not affect other composers,"Before this commit, when some conversations were open in chat windows and the full composer was open in a chatter, the content of full composer message composition could be duplicated in other conversation composers.

Steps to reproduce:
- open a discuss conversation in chat window
- open a form view with chatter
- quickly perform these actions in a 5 seconds window:
  - type something in composer of discuss chat window
  - clear content in composer of discuss chat window
  - open basic composer of chatter then type something
  - open the full composer
- wait about 5 seconds, then open a new browser tab with the same URL
=> the chat window of discuss conversation contains the full composer text content

This happens because when some content is typed in the non-full composer, the text content is regularly saved in local storage so that content is not lost on page reload.

The saving is debounced 5 seconds whenever the user types something.

The full composer must also be saved & restored in chatter, as this is also a frequent point of typing long messages and content may be lost without the save & restore feature.
The code to handling it was poorly written and forgot to assume there could be more than 1 composer open at once: whenever a save content in composer is in progress, it was simply checking whether a full composer is open, and if so it was simply saving the full composer content.

This explains the problem in the scenario above: when typing in discuss conversation in chat window, the save content is triggered after 5 seconds. The opening of full composer disrupts the discuss conversation composer content saving by not saving the discuss conversation composer but instead the full composer content in it.

This commit fixes the issue by enforcing debounce saving to save the content in the current composer. The full composer was never intended to be implied in the debounced save content, only the basic composer is. The full composer saving content works differently: whenever the full composer is closed in non-discard way the save of full composer in basic composer must happen.

Task-4485021

![Jan-16-2025 12-38-38](https://github.com/user-attachments/assets/1637bebe-e3e0-41f5-8cdf-24f3264b4318)
",alexkuhn,2025-01-16 11:40:41+00:00,[],2025-01-19 19:20:17+00:00,2025-01-19 17:59:47+00:00,https://github.com/odoo/odoo/pull/193936,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595295407, 'issue_id': 2792484378, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193936.png)](https://mergebot.odoo.com/odoo/odoo/pull/193936)', 'created_at': datetime.datetime(2025, 1, 16, 11, 40, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600937030, 'issue_id': 2792484378, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 16, 43, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 11:40:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193936.png)](https://mergebot.odoo.com/odoo/odoo/pull/193936)

alexkuhn (Issue Creator) on (2025-01-19 16:43:10 UTC): @robodoo r+

"
2792439499,pull_request,closed,,[IMP] point_of_sale: remove iot patch loop from build,"In odoo/odoo#192449, we removed the only code patch we had on the IoT Box. We can then remove the patching logic.
",loouis-t,2025-01-16 11:18:12+00:00,[],2025-01-30 14:31:03+00:00,2025-01-16 14:29:38+00:00,https://github.com/odoo/odoo/pull/193935,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595252292, 'issue_id': 2792439499, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193935.png)](https://mergebot.odoo.com/odoo/odoo/pull/193935)', 'created_at': datetime.datetime(2025, 1, 16, 11, 18, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 11:18:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193935.png)](https://mergebot.odoo.com/odoo/odoo/pull/193935)

"
2792421062,pull_request,closed,,[FW][FIX] hr_attendance : fix `get_base_url` ref,"Issue: when the website has a domain `get_base_url` return the domain if the record calling it has a company set on it

- call the function with an empty object to get the database url instead

Task: 3903743



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193182",fw-bot,2025-01-16 11:09:26+00:00,[],2025-01-31 09:45:34+00:00,2025-01-17 09:44:22+00:00,https://github.com/odoo/odoo/pull/193934,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595234600, 'issue_id': 2792421062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193934.png)](https://mergebot.odoo.com/odoo/odoo/pull/193934)', 'created_at': datetime.datetime(2025, 1, 16, 11, 9, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595234641, 'issue_id': 2792421062, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 11, 9, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595492956, 'issue_id': 2792421062, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 the next pull request (odoo/odoo#193951) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 12, 37, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597672862, 'issue_id': 2792421062, 'author': 'amah-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 18, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 11:09:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193934.png)](https://mergebot.odoo.com/odoo/odoo/pull/193934)

fw-bot (Issue Creator) on (2025-01-16 11:09:29 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 12:37:50 UTC): @amah-odoo @Bertrand2 the next pull request (odoo/odoo#193951) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

amah-odoo on (2025-01-17 08:18:39 UTC): @robodoo r+

"
2792386362,pull_request,open,,[IMP] product: improve notification of duplicate packaging barcode,"The validation error message preventing the reuse of the same barcode on different packaging was unclear.
We updated the message to clearly explain why the
same barcode cannot be assigned to multiple product packaging.

Task - [4395267](https://www.odoo.com/odoo/project/966/tasks/4395267)
",dhha-odoo,2025-01-16 10:53:54+00:00,[],2025-01-23 06:56:44+00:00,,https://github.com/odoo/odoo/pull/193933,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595201554, 'issue_id': 2792386362, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193933.png)](https://mergebot.odoo.com/odoo/odoo/pull/193933)', 'created_at': datetime.datetime(2025, 1, 16, 10, 53, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:53:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193933.png)](https://mergebot.odoo.com/odoo/odoo/pull/193933)

"
2792348814,pull_request,closed,,[FIX] certificate: show an error if the private key cannot be loaded,"When the private key has an issue if we attempt to sing an invoice we may get a traceback in the frontend. We can instead show an error and include the key that's failing.

Example traceback if the key is invalid:
```
  File ""/home/odoo/src/odoo/18.0/addons/certificate/models/key.py"", line 206, in _sign_with_key
    private_key = serialization.load_pem_private_key(base64.b64decode(pem_key), pwd)
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 83, in b64decode
    s = _bytes_from_decode_data(s)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/lib/python3.12/base64.py"", line 45, in _bytes_from_decode_data
    raise TypeError(""argument should be a bytes-like object or ASCII ""
TypeError: argument should be a bytes-like object or ASCII string, not 'bool'
```

Steps to reproduce:
1. Install l10n_sa_edi
3. Alter the key in a way that makes it fail to load, e.g. upload a garbage text file as a key (note the error in the warning)
2. Make an invoice to ARAMCO partner
4. Click in the `Process now` link at the top of the invoice

We get the traceback.

This issue was seen during upgrades due to improper migration of SA keys (already solved). Still the UX here is suboptimal. This patch proposes to show an error that can help users understand the issue. We already show the error in the keys management interface, but the user working in invoices may be unaware of the issue with the key.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",aj-fuentes,2025-01-16 10:39:52+00:00,[],2025-01-30 18:09:17+00:00,2025-01-16 18:02:40+00:00,https://github.com/odoo/odoo/pull/193931,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595171558, 'issue_id': 2792348814, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193931.png)](https://mergebot.odoo.com/odoo/odoo/pull/193931)', 'created_at': datetime.datetime(2025, 1, 16, 10, 40, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:40:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193931.png)](https://mergebot.odoo.com/odoo/odoo/pull/193931)

"
2792326521,pull_request,closed,,[FW][FIX] mrp: only show current company calendar in workcenter,"Steps to reproduce the bug:
- Create a workcenter:

Problem:
All the resource calendar from all the companies are displayed.

opw-4478393

Forward-Port-Of: odoo/odoo#193634",fw-bot,2025-01-16 10:32:06+00:00,[],2025-01-30 19:33:34+00:00,2025-01-16 19:29:41+00:00,https://github.com/odoo/odoo/pull/193930,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2595151715, 'issue_id': 2792326521, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193930.png)](https://mergebot.odoo.com/odoo/odoo/pull/193930)', 'created_at': datetime.datetime(2025, 1, 16, 10, 32, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595151737, 'issue_id': 2792326521, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#193634 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_workcenter.py\nCONFLICT (content): Merge conflict in addons/mrp/models/mrp_workcenter.py\nAuto-merging addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 10, 32, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596272502, 'issue_id': 2792326521, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 17, 10, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:32:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193930.png)](https://mergebot.odoo.com/odoo/odoo/pull/193930)

fw-bot (Issue Creator) on (2025-01-16 10:32:08 UTC): @DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#193634 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_workcenter.py
CONFLICT (content): Merge conflict in addons/mrp/models/mrp_workcenter.py
Auto-merging addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

DjamelTouati on (2025-01-16 17:10:44 UTC): robodoo r+

"
2792321346,pull_request,open,,[FIX] web: no *_view_ref propagation after m2o opening,"Scenario:

- install hr_expense
- in settings enable ""Google Images"" and fill dummy parameters
- create an expanse for category ""[FOOD] Meals""
- follow the internal link to the product
- click on gear icon > Get Pictures from Google Images

Result: error because there is no field 'product_variant_count' on the 'product.fetch.image.wizard' model

Expected result: no error

Why: the form_view_ref of the category field is kept after opening the product.product window action, so when opening the form view for the model product.fetch.image.wizard we will erroneously use the product.product view which causes an error.

Fix: WIP

opw-4358190",nle-odoo,2025-01-16 10:30:01+00:00,[],2025-01-16 11:00:16+00:00,,https://github.com/odoo/odoo/pull/193929,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2595147121, 'issue_id': 2792321346, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193929.png)](https://mergebot.odoo.com/odoo/odoo/pull/193929)', 'created_at': datetime.datetime(2025, 1, 16, 10, 30, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:30:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193929.png)](https://mergebot.odoo.com/odoo/odoo/pull/193929)

"
2792293145,pull_request,open,,[IMP] profiler: Add memory profiling,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",Beekan,2025-01-16 10:18:08+00:00,[],2025-02-06 13:44:46+00:00,,https://github.com/odoo/odoo/pull/193928,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595121686, 'issue_id': 2792293145, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193928.png)](https://mergebot.odoo.com/odoo/odoo/pull/193928)', 'created_at': datetime.datetime(2025, 1, 16, 10, 18, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:18:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193928.png)](https://mergebot.odoo.com/odoo/odoo/pull/193928)

"
2792267377,pull_request,closed,,[FIX] account: prevent singleton error during journal entry reversal,"Currently, an error was occurring when a user tried to reverse a journal entry.

Step to reproduce:
---
- Enabled payroll entries in Payroll > Configuration > Settings.
- Created a new employee and its corresponding contract in payroll.
- Computed the payslip, generated draft journal entries, and created a payment.
- In accounting check in payments by payslip, currency id will not get fetched.
- Make a reverse entry.

Traceback:
---
ValueError: Expected singleton: res.currency().

This is because at [1] does not have ``currency_id`` in self so it does not link any currency with account payment register

This commit will fix the above issue by providing default company currency when currency is not found in self.

[1] - https://github.com/odoo/odoo/blob/0583db332efdc884975da1a074c91981d2865c9d/addons/account/wizard/account_payment_register.py#L972

sentry-6207053954

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",shka-odoo,2025-01-16 10:07:30+00:00,[],2025-01-16 13:07:00+00:00,2025-01-16 13:06:55+00:00,https://github.com/odoo/odoo/pull/193927,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595097775, 'issue_id': 2792267377, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193927.png)](https://mergebot.odoo.com/odoo/odoo/pull/193927)', 'created_at': datetime.datetime(2025, 1, 16, 10, 7, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595592112, 'issue_id': 2792267377, 'author': 'maan-odoo', 'body': 'You should fix  this issue in Payroll Accounting', 'created_at': datetime.datetime(2025, 1, 16, 13, 6, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:07:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193927.png)](https://mergebot.odoo.com/odoo/odoo/pull/193927)

maan-odoo on (2025-01-16 13:06:55 UTC): You should fix  this issue in Payroll Accounting

"
2792265859,pull_request,closed,,[FIX] point_of_sale: set opening amount to last session's closing balance,"- Resolved issue where the ""expected opening"" amount in the POS session chatter incorrectly displayed the manually modified amount instead of the previous closing balance.
- Adjusted the sequence of setting `cash_register_balance_start` to maintain consistent chatter messages with accurate deltas.

task-id: 4471816

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-16 10:06:51+00:00,[],2025-01-30 19:33:30+00:00,2025-01-16 19:29:38+00:00,https://github.com/odoo/odoo/pull/193926,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595096325, 'issue_id': 2792265859, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193926.png)](https://mergebot.odoo.com/odoo/odoo/pull/193926)', 'created_at': datetime.datetime(2025, 1, 16, 10, 6, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595876630, 'issue_id': 2792265859, 'author': 'adgu-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 28, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:06:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193926.png)](https://mergebot.odoo.com/odoo/odoo/pull/193926)

adgu-odoo on (2025-01-16 14:28:10 UTC): robodoo r+

"
2792254717,pull_request,open,,[FIX] resource : Avoid override the company_id,"In this FW-port https://github.com/odoo/enterprise/pull/74528 we are having a test failing when checking I found out that it is failing because demo data of payroll belgian localization as it is creating a public holiday which affects the working dates of the test 'test_move_backward_without_conflicts'.

This public holiday https://github.com/odoo/enterprise/blob/c16044ce583fd2caf9210ab2621e2bcd55be4421/l10n_be_hr_payroll/data/l10n_be_hr_payroll_demo.xml#L29-L35 should be only for the belgian company but since company_id field in 'resource.calendar.leaves' is readonly and computed so it is not protected while creation https://github.com/odoo/odoo/blob/0506eb85a3f6717117110bed53c4397e25672dc5/odoo/models.py#L4780-L4781 at some point it is getting changed to the main company id when computing the company_id in resource.calendar.leave since we don't have a calendar_id
https://github.com/odoo/odoo/blob/d8fa043f085ee1e1d11708e2bd1213b7ce3c9dd9/addons/resource/models/resource_calendar_leaves.py#L59-L61

To fix this while computing the company_id we are now checking if the company_id is not set as if it is already has a value we will not override it and we fallback on the resource_id.company_id before we get the self.env.company",yoba-odoo,2025-01-16 10:02:51+00:00,[],2025-01-20 13:16:45+00:00,,https://github.com/odoo/odoo/pull/193925,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595086542, 'issue_id': 2792254717, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193925.png)](https://mergebot.odoo.com/odoo/odoo/pull/193925)', 'created_at': datetime.datetime(2025, 1, 16, 10, 2, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 10:02:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193925.png)](https://mergebot.odoo.com/odoo/odoo/pull/193925)

"
2792238762,pull_request,closed,,[FIX] account: fix fiscalyear last day in name sequence,"When computing an invoice name placeholder dynamically the sequence used depends on the fiscal year end date but it does not account for february 29 on non-leap years, which is a [valid](https://github.com/odoo/odoo/blob/893b253644159a70d1916e3eaf25d1c8af4e92c3/addons/account/models/company.py#L294-L298) date. Here an adjustment for the day is added to safely compare a date with the fiscalyear end.


Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jjmaksoud,2025-01-16 09:57:00+00:00,[],2025-01-31 08:43:54+00:00,2025-01-17 08:36:11+00:00,https://github.com/odoo/odoo/pull/193924,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595066371, 'issue_id': 2792238762, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193924.png)](https://mergebot.odoo.com/odoo/odoo/pull/193924)', 'created_at': datetime.datetime(2025, 1, 16, 9, 57, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:57:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193924.png)](https://mergebot.odoo.com/odoo/odoo/pull/193924)

"
2792237247,pull_request,closed,,[FIX] website: translate model form labels,"When `website` is installed, models have a `website_form_label` field that is used when an instance of that model can be created through a website form. It will show in the ""Action"" dropdown list on the ""Form"" component.

However, that field was not translatable and thus always shown in English. This commit fixes that by making it translatable.

[opw-4421055](https://www.odoo.com/odoo/project.task/4421055)",dylankiss,2025-01-16 09:56:33+00:00,[],2025-01-30 20:32:53+00:00,2025-01-16 20:13:47+00:00,https://github.com/odoo/odoo/pull/193923,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('18.2', None)]","[{'comment_id': 2595065157, 'issue_id': 2792237247, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193923.png)](https://mergebot.odoo.com/odoo/odoo/pull/193923)', 'created_at': datetime.datetime(2025, 1, 16, 9, 56, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595175985, 'issue_id': 2792237247, 'author': 'robodoo', 'body': ""@dylankiss @oomsveta 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 10, 42, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:56:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193923.png)](https://mergebot.odoo.com/odoo/odoo/pull/193923)

robodoo on (2025-01-16 10:42:39 UTC): @dylankiss @oomsveta 'ci/runbot' failed on this reviewed PR.

"
2792210035,pull_request,open,,[IMP] product: improve layout of weight and volume fields with UOMs,"In This Commit:
---------------------------
- Refined the layout to align weight and volume fields with their respective unit of measures (UOMs), improving readability.

task-4475793
",srap-odoo,2025-01-16 09:47:27+00:00,[],2025-01-17 05:21:00+00:00,,https://github.com/odoo/odoo/pull/193922,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595041065, 'issue_id': 2792210035, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193922.png)](https://mergebot.odoo.com/odoo/odoo/pull/193922)', 'created_at': datetime.datetime(2025, 1, 16, 9, 47, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:47:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193922.png)](https://mergebot.odoo.com/odoo/odoo/pull/193922)

"
2792186350,pull_request,closed,,[FIX] hr_holidays: delete time off activity upon cancel,"All approval (first and second) activities should be deleted when the time off is set to cancelled. 
Before the fix, only automated activities were cancelled. 
After the fix, all approval activities are removed when the time off is cancelled, even approval activities added manually.
",romaincarlier4,2025-01-16 09:37:33+00:00,[],2025-02-05 13:55:47+00:00,2025-02-05 13:54:40+00:00,https://github.com/odoo/odoo/pull/193921,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2595018826, 'issue_id': 2792186350, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193921.png)](https://mergebot.odoo.com/odoo/odoo/pull/193921)', 'created_at': datetime.datetime(2025, 1, 16, 9, 37, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631897138, 'issue_id': 2792186350, 'author': 'tivisse', 'body': ""I'm not against adapting the mail API (I think it could make sense) but I would like @tde-banana-odoo opinion about it as well before r+ing this."", 'created_at': datetime.datetime(2025, 2, 3, 19, 34, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631898462, 'issue_id': 2792186350, 'author': 'tivisse', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 2, 3, 19, 34, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631898562, 'issue_id': 2792186350, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 3, 19, 34, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633774498, 'issue_id': 2792186350, 'author': 'romaincarlier4', 'body': 'Thanks @tde-banana-odoo for the review ! Suggested changes has been applied @tivisse', 'created_at': datetime.datetime(2025, 2, 4, 12, 32, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636582575, 'issue_id': 2792186350, 'author': 'tivisse', 'body': '@robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 2, 5, 12, 21, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636582644, 'issue_id': 2792186350, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 5, 12, 21, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:37:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193921.png)](https://mergebot.odoo.com/odoo/odoo/pull/193921)

tivisse on (2025-02-03 19:34:06 UTC): I'm not against adapting the mail API (I think it could make sense) but I would like @tde-banana-odoo opinion about it as well before r+ing this.

tivisse on (2025-02-03 19:34:46 UTC): @robodoo rebase-ff

robodoo on (2025-02-03 19:34:49 UTC): Merge method set to rebase and fast-forward.

romaincarlier4 (Issue Creator) on (2025-02-04 12:32:47 UTC): Thanks @tde-banana-odoo for the review ! Suggested changes has been applied @tivisse

tivisse on (2025-02-05 12:21:46 UTC): @robodoo r+ rebase-ff

robodoo on (2025-02-05 12:21:48 UTC): Merge method set to rebase and fast-forward.

"
2792180059,pull_request,closed,,[FIX] point_of_sale: fix `getPortalURL()`,"access the url through `order.session._base_url` rather than the `props`
",AH-Yussef,2025-01-16 09:35:05+00:00,['AH-Yussef'],2025-01-30 13:45:57+00:00,2025-01-16 13:38:13+00:00,https://github.com/odoo/odoo/pull/193920,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595013505, 'issue_id': 2792180059, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193920.png)](https://mergebot.odoo.com/odoo/odoo/pull/193920)', 'created_at': datetime.datetime(2025, 1, 16, 9, 35, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:35:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193920.png)](https://mergebot.odoo.com/odoo/odoo/pull/193920)

"
2792177020,pull_request,closed,,[FW][FIX] hr_attendance : fix `get_base_url` ref,"Issue: when the website has a domain `get_base_url` return the domain if the record calling it has a company set on it

- call the function with an empty object to get the database url instead

Task: 3903743



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193182",fw-bot,2025-01-16 09:33:44+00:00,[],2025-01-31 12:11:54+00:00,2025-01-17 12:06:44+00:00,https://github.com/odoo/odoo/pull/193919,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2595010690, 'issue_id': 2792177020, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193919.png)](https://mergebot.odoo.com/odoo/odoo/pull/193919)', 'created_at': datetime.datetime(2025, 1, 16, 9, 33, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595010738, 'issue_id': 2792177020, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 9, 33, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:33:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193919.png)](https://mergebot.odoo.com/odoo/odoo/pull/193919)

fw-bot (Issue Creator) on (2025-01-16 09:33:48 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2792175961,pull_request,closed,,[FIX] base: fix warning message for company check,"Description of the issue/feature this PR addresses:
In the company check warning message, self.model_name was used instead of self._name. 

Current behavior before PR:
model_name is not an attribute of the class BaseModel, which causes an AttributeError when the warning message is triggered.

Desired behavior after PR is merged:
Warning message correctly logged without having an error.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",cro-odoo,2025-01-16 09:33:16+00:00,[],2025-01-29 15:25:41+00:00,2025-01-29 15:25:41+00:00,https://github.com/odoo/odoo/pull/193918,"[('RD', 'research & development, internal work')]","[{'comment_id': 2595009675, 'issue_id': 2792175961, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193918.png)](https://mergebot.odoo.com/odoo/odoo/pull/193918)', 'created_at': datetime.datetime(2025, 1, 16, 9, 33, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619237850, 'issue_id': 2792175961, 'author': 'ryv-odoo', 'body': '@robodoo r+\r\nThx @cro-odoo', 'created_at': datetime.datetime(2025, 1, 28, 14, 55, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:33:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193918.png)](https://mergebot.odoo.com/odoo/odoo/pull/193918)

ryv-odoo on (2025-01-28 14:55:09 UTC): @robodoo r+
Thx @cro-odoo

"
2792165281,pull_request,closed,,[FIX] website_slides: fix test dependent on demo data,"The demo user is only accessible with demo data, which may not
work if demo data is not used.

Followup of https://github.com/odoo/odoo/pull/179915

Runbot-111710",mrsr-odoo,2025-01-16 09:28:50+00:00,[],2025-02-04 12:17:17+00:00,2025-01-21 12:03:52+00:00,https://github.com/odoo/odoo/pull/193917,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2594999951, 'issue_id': 2792165281, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193917.png)](https://mergebot.odoo.com/odoo/odoo/pull/193917)', 'created_at': datetime.datetime(2025, 1, 16, 9, 28, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595311015, 'issue_id': 2792165281, 'author': 'Williambraecky', 'body': 'Started no demo manual build, thanks for the fix', 'created_at': datetime.datetime(2025, 1, 16, 11, 48, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:28:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193917.png)](https://mergebot.odoo.com/odoo/odoo/pull/193917)

Williambraecky on (2025-01-16 11:48:48 UTC): Started no demo manual build, thanks for the fix

"
2792164041,pull_request,closed,,[FW][FIX] hw_drivers: wrong foot pedal name,"Devices detected through usb don't always have there manufactured and product name which can be retrieved.
For example, our foot pedal in the office doesn't which leads to it having a name `""None - None""` in Odoo.

After this PR if a device doesn't have a product name / manufacturer name it will be saved as `""Unknown input device""`

task-4472585

Forward-Port-Of: odoo/odoo#193295
Forward-Port-Of: odoo/odoo#193277",fw-bot,2025-01-16 09:28:18+00:00,[],2025-02-05 14:13:33+00:00,2025-01-22 14:10:27+00:00,https://github.com/odoo/odoo/pull/193916,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594998746, 'issue_id': 2792164041, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193916.png)](https://mergebot.odoo.com/odoo/odoo/pull/193916)', 'created_at': datetime.datetime(2025, 1, 16, 9, 28, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594998760, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193908\n* odoo/odoo#193867\n* odoo/odoo#193856\n* odoo/odoo#193841\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 9, 28, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595053615, 'issue_id': 2792164041, 'author': 'Ysoroko', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 52, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596334592, 'issue_id': 2792164041, 'author': 'robodoo', 'body': '@Ysoroko @qle-odoo staging failed: ci/runbot on 981afc77998b1837274c1202eccc035b06048c5d (view more at https://runbot.odoo.com/runbot/build/73468696)', 'created_at': datetime.datetime(2025, 1, 16, 17, 40, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597277812, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 0, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468649, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 0, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600464415, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173406, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119500, 'issue_id': 2792164041, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606612559, 'issue_id': 2792164041, 'author': 'Ysoroko', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 8, 42, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606612629, 'issue_id': 2792164041, 'author': 'robodoo', 'body': ""This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate)."", 'created_at': datetime.datetime(2025, 1, 22, 8, 42, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606613006, 'issue_id': 2792164041, 'author': 'Ysoroko', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 22, 8, 43, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:28:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193916.png)](https://mergebot.odoo.com/odoo/odoo/pull/193916)

fw-bot (Issue Creator) on (2025-01-16 09:28:20 UTC): @Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193908
* odoo/odoo#193867
* odoo/odoo#193856
* odoo/odoo#193841

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Ysoroko on (2025-01-16 09:52:24 UTC): @robodoo r+

robodoo on (2025-01-16 17:40:40 UTC): @Ysoroko @qle-odoo staging failed: ci/runbot on 981afc77998b1837274c1202eccc035b06048c5d (view more at https://runbot.odoo.com/runbot/build/73468696)

fw-bot (Issue Creator) on (2025-01-17 02:00:47 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:00:56 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:44 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:42 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:40 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

Ysoroko on (2025-01-22 08:42:47 UTC): @robodoo r+

robodoo on (2025-01-22 08:42:50 UTC): This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate).

Ysoroko on (2025-01-22 08:43:01 UTC): @robodoo retry

"
2792134831,pull_request,open,,[FIX] mail: command description cropped,"Purpose of this commit:
The command descriptions (canned responses, channel command) currently use an italic font style due to being wrapped in the emphasis tag, causing the text to appear cropped at the end of the sentence. This commit resolves the issue by replacing the emphasis tag with a span tag.

task-4485553





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",maad-odoo,2025-01-16 09:16:01+00:00,[],2025-01-16 10:00:23+00:00,,https://github.com/odoo/odoo/pull/193915,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594971180, 'issue_id': 2792134831, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193915.png)](https://mergebot.odoo.com/odoo/odoo/pull/193915)', 'created_at': datetime.datetime(2025, 1, 16, 9, 16, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:16:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193915.png)](https://mergebot.odoo.com/odoo/odoo/pull/193915)

"
2792130513,pull_request,open,,[FIX] mail: command description cropped,"Purpose of this commit:
The command descriptions currently use an italic font style due to being wrapped in the emphasis tag, causing the text to appear cropped at the end of the sentence. This commit resolves the issue by replacing the emphasis tag with a span tag.

task-4485553



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",maad-odoo,2025-01-16 09:13:59+00:00,[],2025-01-16 10:00:24+00:00,,https://github.com/odoo/odoo/pull/193914,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594966742, 'issue_id': 2792130513, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193914.png)](https://mergebot.odoo.com/odoo/odoo/pull/193914)', 'created_at': datetime.datetime(2025, 1, 16, 9, 14, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:14:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193914.png)](https://mergebot.odoo.com/odoo/odoo/pull/193914)

"
2792114077,pull_request,open,,[IMP] website_slides: update content of file and attendees upload,"Specification:
1. Change the label here (when adding content to a course from the front end).
2. Change the import doc modal.
3. Change the text of the import video modal.

Task- 4398430",assi-odoo,2025-01-16 09:06:24+00:00,[],2025-02-07 10:12:04+00:00,,https://github.com/odoo/odoo/pull/193913,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594950791, 'issue_id': 2792114077, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193913.png)](https://mergebot.odoo.com/odoo/odoo/pull/193913)', 'created_at': datetime.datetime(2025, 1, 16, 9, 6, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2635952579, 'issue_id': 2792114077, 'author': 'assi-odoo', 'body': 'Hello @amdi-odoo \r\nmade the requested changes,\r\nplease have a look.\r\n\r\nThank you :slightly_smiling_face:', 'created_at': datetime.datetime(2025, 2, 5, 7, 39, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 09:06:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193913.png)](https://mergebot.odoo.com/odoo/odoo/pull/193913)

assi-odoo (Issue Creator) on (2025-02-05 07:39:27 UTC): Hello @amdi-odoo 
made the requested changes,
please have a look.

Thank you :slightly_smiling_face:

"
2792093948,pull_request,closed,,[IMP] web: showing module_loader errors,"Before this commit, the module_loader was showing error by empty the DOM and then adding his element with the errors. The issue is, if you have an error because of custom script or after an upgrade, then you were lockout because the DOM with empty and you cannot go fix the script.

After this commit, a shorter message will be shown in the bottom-left of the screen. This message will invite the user to check the devtool to have more details about the error.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",bastien-ipb,2025-01-16 08:57:01+00:00,[],2025-02-03 10:18:06+00:00,2025-01-20 10:13:08+00:00,https://github.com/odoo/odoo/pull/193912,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594928160, 'issue_id': 2792093948, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193912.png)](https://mergebot.odoo.com/odoo/odoo/pull/193912)', 'created_at': datetime.datetime(2025, 1, 16, 8, 57, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594971411, 'issue_id': 2792093948, 'author': 'diagnoza', 'body': 'Run a quick test with invalid js code and it seems to work:\r\n![image](https://github.com/user-attachments/assets/b8ef8a25-0fb2-407c-bd26-b70ada7edc99)\r\n\r\nThanks for addressing it so quickly @bastien-ipb!', 'created_at': datetime.datetime(2025, 1, 16, 9, 16, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594991402, 'issue_id': 2792093948, 'author': 'ged-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 25, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594997916, 'issue_id': 2792093948, 'author': 'robodoo', 'body': ""@bastien-ipb @ged-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 9, 28, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595004462, 'issue_id': 2792093948, 'author': 'robodoo', 'body': ""@bastien-ipb @ged-odoo 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 9, 30, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595005734, 'issue_id': 2792093948, 'author': 'ged-odoo', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 16, 9, 31, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595005845, 'issue_id': 2792093948, 'author': 'robodoo', 'body': '@ged-odoo retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 16, 9, 31, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595013329, 'issue_id': 2792093948, 'author': 'ged-odoo', 'body': 'well, @robodoo. You are annoying. If the PR is not in error, merge it then', 'created_at': datetime.datetime(2025, 1, 16, 9, 35, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595815715, 'issue_id': 2792093948, 'author': 'bastien-ipb', 'body': 'Hello @amoyaux , I removed the assets_tests from the `subcontracting_portal_embed` because it was causing dependency error. Do you know the reason why the embed view was loading the assets_tests (tours) ?', 'created_at': datetime.datetime(2025, 1, 16, 14, 6, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601755108, 'issue_id': 2792093948, 'author': 'ged-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 37, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601755188, 'issue_id': 2792093948, 'author': 'robodoo', 'body': '@bastien-ipb @ged-odoo because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 20, 8, 37, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601757937, 'issue_id': 2792093948, 'author': 'ged-odoo', 'body': 'robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 20, 8, 38, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601757992, 'issue_id': 2792093948, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 20, 8, 39, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:57:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193912.png)](https://mergebot.odoo.com/odoo/odoo/pull/193912)

diagnoza on (2025-01-16 09:16:10 UTC): Run a quick test with invalid js code and it seems to work:
![image](https://github.com/user-attachments/assets/b8ef8a25-0fb2-407c-bd26-b70ada7edc99)

Thanks for addressing it so quickly @bastien-ipb!

ged-odoo on (2025-01-16 09:25:07 UTC): robodoo r+

robodoo on (2025-01-16 09:28:03 UTC): @bastien-ipb @ged-odoo 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-01-16 09:30:55 UTC): @bastien-ipb @ged-odoo 'ci/upgrade_enterprise' failed on this reviewed PR.

ged-odoo on (2025-01-16 09:31:27 UTC): robodoo retry

robodoo on (2025-01-16 09:31:30 UTC): @ged-odoo retry makes no sense when the PR is not in error.

ged-odoo on (2025-01-16 09:35:02 UTC): well, @robodoo. You are annoying. If the PR is not in error, merge it then

bastien-ipb (Issue Creator) on (2025-01-16 14:06:58 UTC): Hello @amoyaux , I removed the assets_tests from the `subcontracting_portal_embed` because it was causing dependency error. Do you know the reason why the embed view was loading the assets_tests (tours) ?

ged-odoo on (2025-01-20 08:37:35 UTC): robodoo r+

robodoo on (2025-01-20 08:37:38 UTC): @bastien-ipb @ged-odoo because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

ged-odoo on (2025-01-20 08:38:59 UTC): robodoo rebase-ff

robodoo on (2025-01-20 08:39:01 UTC): Merge method set to rebase and fast-forward.

"
2792093187,pull_request,closed,,[FIX] account: hide purchase tab on product template,"Before the refactoring of uom, it was possible to define `uom_po_id`, the uom for purchase that was used for vendor bills. This was the only setting to define in Purchase tab if the Purchase app was not installed.

Since the commit removed this field, the tab became useless and should be removed.

*https://github.com/odoo/odoo/commit/d3fa388cf7c41984b5f7cbc2a81fec3e27a00325",vava-odoo,2025-01-16 08:56:40+00:00,[],2025-02-07 12:48:59+00:00,2025-01-24 12:45:46+00:00,https://github.com/odoo/odoo/pull/193911,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594926833, 'issue_id': 2792093187, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193911.png)](https://mergebot.odoo.com/odoo/odoo/pull/193911)', 'created_at': datetime.datetime(2025, 1, 16, 8, 56, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:56:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193911.png)](https://mergebot.odoo.com/odoo/odoo/pull/193911)

"
2792063981,pull_request,closed,,[16.0][IMP] iap: add outlook.jp to _MAIL_PROVIDERS,@qrtl QT5121,AungKoKoLin1997,2025-01-16 08:43:54+00:00,[],2025-02-06 09:41:55+00:00,2025-01-17 13:08:43+00:00,https://github.com/odoo/odoo/pull/193910,[],"[{'comment_id': 2594886809, 'issue_id': 2792063981, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193910.png)](https://mergebot.odoo.com/odoo/odoo/pull/193910)', 'created_at': datetime.datetime(2025, 1, 16, 8, 43, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598119804, 'issue_id': 2792063981, 'author': 'tde-banana-odoo', 'body': '@robodoo r+\r\n\r\nseems legit :)', 'created_at': datetime.datetime(2025, 1, 17, 11, 15, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598126653, 'issue_id': 2792063981, 'author': 'MiquelRForgeFlow', 'body': ""I have to say that this part of _MAIL_PROVIDERS is a mess. Couldn't be cleaner or ordered in some way?"", 'created_at': datetime.datetime(2025, 1, 17, 11, 17, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598143006, 'issue_id': 2792063981, 'author': 'tde-banana-odoo', 'body': 'Probably.', 'created_at': datetime.datetime(2025, 1, 17, 11, 22, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639305506, 'issue_id': 2792063981, 'author': 'AungKoKoLin1997', 'body': ""> I have to say that this part of _MAIL_PROVIDERS is a mess. Couldn't be cleaner or ordered in some way?\r\n\r\n@tde-banana-odoo I agree with that. Now, I want to add some dynamic values to _MAIL_PROVIDERS as a configurable option in Odoo 15 using a custom module, but I can't find a way to do."", 'created_at': datetime.datetime(2025, 2, 6, 9, 41, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:43:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193910.png)](https://mergebot.odoo.com/odoo/odoo/pull/193910)

tde-banana-odoo on (2025-01-17 11:15:11 UTC): @robodoo r+

seems legit :)

MiquelRForgeFlow on (2025-01-17 11:17:21 UTC): I have to say that this part of _MAIL_PROVIDERS is a mess. Couldn't be cleaner or ordered in some way?

tde-banana-odoo on (2025-01-17 11:22:30 UTC): Probably.

AungKoKoLin1997 (Issue Creator) on (2025-02-06 09:41:53 UTC): @tde-banana-odoo I agree with that. Now, I want to add some dynamic values to _MAIL_PROVIDERS as a configurable option in Odoo 15 using a custom module, but I can't find a way to do.

"
2791992912,pull_request,closed,,[FIX] account: Print & Send - Remove deadcode,"With previous commit [1], we aligned the Print & Send wizard's behavior to the one in the Sales app.
It's no longer possible to download directly from the wizard, therefore the code removed in this commit was never accessed.

[1]: https://github.com/odoo/odoo/commit/7ad7a1d976391e81eaa03be7076cc61f4a6cfcbe

task-no
",clbr-odoo,2025-01-16 08:14:56+00:00,[],2025-01-20 07:36:56+00:00,2025-01-20 07:36:56+00:00,https://github.com/odoo/odoo/pull/193909,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594790156, 'issue_id': 2791992912, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193909.png)](https://mergebot.odoo.com/odoo/odoo/pull/193909)', 'created_at': datetime.datetime(2025, 1, 16, 8, 14, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:14:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193909.png)](https://mergebot.odoo.com/odoo/odoo/pull/193909)

"
2791983252,pull_request,closed,,[FW][FIX] hw_drivers: wrong foot pedal name,"Devices detected through usb don't always have there manufactured and product name which can be retrieved.
For example, our foot pedal in the office doesn't which leads to it having a name `""None - None""` in Odoo.

After this PR if a device doesn't have a product name / manufacturer name it will be saved as `""Unknown input device""`

task-4472585

Forward-Port-Of: odoo/odoo#193295
Forward-Port-Of: odoo/odoo#193277",fw-bot,2025-01-16 08:09:29+00:00,[],2025-01-30 12:41:23+00:00,2025-01-16 12:04:57+00:00,https://github.com/odoo/odoo/pull/193908,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594780933, 'issue_id': 2791983252, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193908.png)](https://mergebot.odoo.com/odoo/odoo/pull/193908)', 'created_at': datetime.datetime(2025, 1, 16, 8, 9, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594780952, 'issue_id': 2791983252, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 8, 9, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:09:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193908.png)](https://mergebot.odoo.com/odoo/odoo/pull/193908)

fw-bot (Issue Creator) on (2025-01-16 08:09:31 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791979577,pull_request,closed,,[REM] html_builder: remove empty file,"In the forward port #190318 while fixing conflict, a new empty file from another projet was accedentally sled in the commit. This commit removes this empty useless file.
",fdardenne,2025-01-16 08:07:29+00:00,[],2025-01-30 12:41:28+00:00,2025-01-16 12:08:06+00:00,https://github.com/odoo/odoo/pull/193907,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594777317, 'issue_id': 2791979577, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193907.png)](https://mergebot.odoo.com/odoo/odoo/pull/193907)', 'created_at': datetime.datetime(2025, 1, 16, 8, 7, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594778911, 'issue_id': 2791979577, 'author': 'fdardenne', 'body': '@fw-bot up to 18.0', 'created_at': datetime.datetime(2025, 1, 16, 8, 8, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 08:07:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193907.png)](https://mergebot.odoo.com/odoo/odoo/pull/193907)

fdardenne (Issue Creator) on (2025-01-16 08:08:20 UTC): @fw-bot up to 18.0

"
2791926125,pull_request,closed,,[FW][FIX] web_editor: fix video option in media dialog,"After merging of this PR [1], video tab will not be visible in media dialog in report as `allowCommandVideo` is false. But this will override `noVideos` option from `params` to false if `allowCommandVideo` is true and video tab will be visible even if `noVideos` is `true`.

This PR makes sure that `noVideos` property from `params` should be checked if `allowCommandVideo` is true.

[1]: 187251



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192838",fw-bot,2025-01-16 07:38:11+00:00,[],2025-01-30 12:41:32+00:00,2025-01-16 12:28:51+00:00,https://github.com/odoo/odoo/pull/193906,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594730181, 'issue_id': 2791926125, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193906.png)](https://mergebot.odoo.com/odoo/odoo/pull/193906)', 'created_at': datetime.datetime(2025, 1, 16, 7, 38, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594730202, 'issue_id': 2791926125, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193902\n* odoo/odoo#193741\n* odoo/odoo#193724\n* odoo/odoo#193706\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 7, 38, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594731957, 'issue_id': 2791926125, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 39, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 07:38:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193906.png)](https://mergebot.odoo.com/odoo/odoo/pull/193906)

fw-bot (Issue Creator) on (2025-01-16 07:38:13 UTC): @adsa-odoo @dmo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193902
* odoo/odoo#193741
* odoo/odoo#193724
* odoo/odoo#193706

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dmo-odoo on (2025-01-16 07:39:24 UTC): @robodoo r+

"
2791915181,pull_request,closed,,[FW][FIX] account: correct get fields from company,"We can only attempt to get fields from `res.company` model.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193760",fw-bot,2025-01-16 07:32:18+00:00,[],2025-01-30 12:41:37+00:00,2025-01-16 12:29:14+00:00,https://github.com/odoo/odoo/pull/193905,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594721531, 'issue_id': 2791915181, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193905.png)](https://mergebot.odoo.com/odoo/odoo/pull/193905)', 'created_at': datetime.datetime(2025, 1, 16, 7, 32, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594721538, 'issue_id': 2791915181, 'author': 'fw-bot', 'body': '@aj-fuentes @william-andre this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193899\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 7, 32, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594791769, 'issue_id': 2791915181, 'author': 'fw-bot', 'body': '@aj-fuentes @william-andre ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 8, 15, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595006136, 'issue_id': 2791915181, 'author': 'aj-fuentes', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 31, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 07:32:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193905.png)](https://mergebot.odoo.com/odoo/odoo/pull/193905)

fw-bot (Issue Creator) on (2025-01-16 07:32:20 UTC): @aj-fuentes @william-andre this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193899

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 08:15:54 UTC): @aj-fuentes @william-andre ci/runbot failed on this forward-port PR

aj-fuentes on (2025-01-16 09:31:38 UTC): @robodoo r+

"
2791907532,pull_request,closed,,[FW][FIX] mail: fix call on embed livechat,"__Current behavior before commit:__
Since [`9592bd1`][1] when the livechat is integrated on a third-party website, a visitor can not answer the call of an operator. This is because the script `selfie_segmentation.js` is being fetched from the third-party website domain instead of the Odoo database domain; resulting in the following error:
`AssetsLoadingError: The loading of
/mail/static/lib/selfie_segmentation/selfie_segmentation.js failed`

__Description of the fix:__
Use of the `url` function to prepend the correct domain name.

opw-4417974

[1]: https://github.com/odoo/odoo/commit/9592bd1

Forward-Port-Of: odoo/odoo#193798",fw-bot,2025-01-16 07:27:43+00:00,[],2025-01-16 13:08:04+00:00,2025-01-16 12:28:46+00:00,https://github.com/odoo/odoo/pull/193904,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594714960, 'issue_id': 2791907532, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193904.png)](https://mergebot.odoo.com/odoo/odoo/pull/193904)', 'created_at': datetime.datetime(2025, 1, 16, 7, 27, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594714979, 'issue_id': 2791907532, 'author': 'fw-bot', 'body': '@Dj0ulo @alexkuhn this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193900\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 7, 27, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594914505, 'issue_id': 2791907532, 'author': 'Dj0ulo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 53, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 07:27:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193904.png)](https://mergebot.odoo.com/odoo/odoo/pull/193904)

fw-bot (Issue Creator) on (2025-01-16 07:27:45 UTC): @Dj0ulo @alexkuhn this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193900

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Dj0ulo on (2025-01-16 08:53:25 UTC): @robodoo r+

"
2791845816,pull_request,closed,,"[FW][FIX] mail: redirect to record ""nice"" url from mail","Commit c63d14a0485a553b74a8457aee158384e9ae6d3f introduced new nicer urls to get to Odoo. Commit 5776b574b3aba190c54b2e4974ce514d9b0bec2a adapted the /mail/view controller for it, allowing people clicking on a link to a record in a mail to be redirected to a nice new URL.

Although one case was missing: when the model doesn't contain dots, the string is considered an action's path. So, when opening a record from a mail, there was a crash in odoo because the action could not be found.

After this commit, there is no crash, and the record is opened correctly with a nice url.

see router.js: heuristics to discrimate a model name from an action path is the presence of dots, or the prefix m- for models

opw-4475237

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193762",fw-bot,2025-01-16 06:50:30+00:00,[],2025-01-30 20:32:43+00:00,2025-01-16 20:12:44+00:00,https://github.com/odoo/odoo/pull/193903,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594662935, 'issue_id': 2791845816, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193903.png)](https://mergebot.odoo.com/odoo/odoo/pull/193903)', 'created_at': datetime.datetime(2025, 1, 16, 6, 50, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594662950, 'issue_id': 2791845816, 'author': 'fw-bot', 'body': '@kebeclibre @jpp-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193888\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 50, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594699660, 'issue_id': 2791845816, 'author': 'fw-bot', 'body': '@kebeclibre @jpp-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 7, 17, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595303106, 'issue_id': 2791845816, 'author': 'kebeclibre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 44, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595303178, 'issue_id': 2791845816, 'author': 'robodoo', 'body': '@kebeclibre you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 11, 44, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:50:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193903.png)](https://mergebot.odoo.com/odoo/odoo/pull/193903)

fw-bot (Issue Creator) on (2025-01-16 06:50:32 UTC): @kebeclibre @jpp-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193888

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 07:17:52 UTC): @kebeclibre @jpp-odoo ci/runbot failed on this forward-port PR

kebeclibre on (2025-01-16 11:44:45 UTC): @robodoo r+

robodoo on (2025-01-16 11:44:48 UTC): @kebeclibre you may want to rebuild or fix this PR as it has failed CI.

"
2791808413,pull_request,closed,,[FW][FIX] web_editor: fix video option in media dialog,"After merging of this PR [1], video tab will not be visible in media dialog in report as `allowCommandVideo` is false. But this will override `noVideos` option from `params` to false if `allowCommandVideo` is true and video tab will be visible even if `noVideos` is `true`.

This PR makes sure that `noVideos` property from `params` should be checked if `allowCommandVideo` is true.

[1]: 187251



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192838",fw-bot,2025-01-16 06:25:00+00:00,[],2025-01-30 10:23:44+00:00,2025-01-16 10:12:32+00:00,https://github.com/odoo/odoo/pull/193902,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594630954, 'issue_id': 2791808413, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193902.png)](https://mergebot.odoo.com/odoo/odoo/pull/193902)', 'created_at': datetime.datetime(2025, 1, 16, 6, 25, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594630965, 'issue_id': 2791808413, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 25, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:25:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193902.png)](https://mergebot.odoo.com/odoo/odoo/pull/193902)

fw-bot (Issue Creator) on (2025-01-16 06:25:02 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791801735,pull_request,closed,,[FW][FIX] web: make resequence work after a resequence crash,"Steps to reproduce:
- Go to a form view with a one2many with a handle widget
- Move a line in the one2many that make Odoo crash with the onchange

To generate a faulty view, create a form view with a one2many and add an automation ""On UI change"" to make the resequence crash.

Current behaviour
-----------------
After the error being thrown, the user will not be able to resequence this line again.

Expected Behaviour
------------------
After the error, the user will still be able to resequence this line

Forward-Port-Of: odoo/odoo#193781
Forward-Port-Of: odoo/odoo#157539",fw-bot,2025-01-16 06:20:05+00:00,[],2025-01-30 12:41:18+00:00,2025-01-16 12:04:31+00:00,https://github.com/odoo/odoo/pull/193901,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2594624908, 'issue_id': 2791801735, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193901.png)](https://mergebot.odoo.com/odoo/odoo/pull/193901)', 'created_at': datetime.datetime(2025, 1, 16, 6, 20, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594624923, 'issue_id': 2791801735, 'author': 'fw-bot', 'body': '@fdardenne @SimonGenin cherrypicking of pull request odoo/odoo#157539 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/views/list/list_renderer.js\nAuto-merging addons/web/static/tests/views/form/form_view.test.js\nCONFLICT (content): Merge conflict in addons/web/static/tests/views/form/form_view.test.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 20, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594746582, 'issue_id': 2791801735, 'author': 'fdardenne', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 48, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594749967, 'issue_id': 2791801735, 'author': 'fdardenne', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 16, 7, 50, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594945626, 'issue_id': 2791801735, 'author': 'fdardenne', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 4, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:20:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193901.png)](https://mergebot.odoo.com/odoo/odoo/pull/193901)

fw-bot (Issue Creator) on (2025-01-16 06:20:07 UTC): @fdardenne @SimonGenin cherrypicking of pull request odoo/odoo#157539 failed.

stdout:
```
Auto-merging addons/web/static/src/views/list/list_renderer.js
Auto-merging addons/web/static/tests/views/form/form_view.test.js
CONFLICT (content): Merge conflict in addons/web/static/tests/views/form/form_view.test.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fdardenne on (2025-01-16 07:48:44 UTC): @robodoo r+

fdardenne on (2025-01-16 07:50:51 UTC): @robodoo r-

fdardenne on (2025-01-16 09:04:04 UTC): @robodoo r+

"
2791801335,pull_request,closed,,[FW][FIX] mail: fix call on embed livechat,"__Current behavior before commit:__
Since [`9592bd1`][1] when the livechat is integrated on a third-party website, a visitor can not answer the call of an operator. This is because the script `selfie_segmentation.js` is being fetched from the third-party website domain instead of the Odoo database domain; resulting in the following error:
`AssetsLoadingError: The loading of
/mail/static/lib/selfie_segmentation/selfie_segmentation.js failed`

__Description of the fix:__
Use of the `url` function to prepend the correct domain name.

opw-4417974

[1]: https://github.com/odoo/odoo/commit/9592bd1

Forward-Port-Of: odoo/odoo#193798",fw-bot,2025-01-16 06:19:49+00:00,[],2025-01-30 12:41:17+00:00,2025-01-16 12:04:27+00:00,https://github.com/odoo/odoo/pull/193900,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594624591, 'issue_id': 2791801335, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193900.png)](https://mergebot.odoo.com/odoo/odoo/pull/193900)', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594624603, 'issue_id': 2791801335, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:19:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193900.png)](https://mergebot.odoo.com/odoo/odoo/pull/193900)

fw-bot (Issue Creator) on (2025-01-16 06:19:53 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791801010,pull_request,closed,,[FW][FIX] account: correct get fields from company,"We can only attempt to get fields from `res.company` model.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193760",fw-bot,2025-01-16 06:19:34+00:00,[],2025-01-30 12:41:21+00:00,2025-01-16 12:04:48+00:00,https://github.com/odoo/odoo/pull/193899,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594624505, 'issue_id': 2791801010, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193899.png)](https://mergebot.odoo.com/odoo/odoo/pull/193899)', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594624519, 'issue_id': 2791801010, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:19:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193899.png)](https://mergebot.odoo.com/odoo/odoo/pull/193899)

fw-bot (Issue Creator) on (2025-01-16 06:19:49 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791796199,pull_request,closed,,[FW][FIX] website: duplicate dialog issue and closure on button click,"Since [1], clicking the button while the SEO toaster was
visible could repeatedly open the SEO optimization dialog, resulting in
multiple instances of the dialog box being opened.

This commit addresses this issue by:

- Adding logic to ensure toasters close properly when a button is
  clicked. (i.e the SEO toaster when you publish a page with missing
  important SEO informations).

[1]: https://github.com/odoo/odoo/commit/45ea6e4a4a5c8e314b110a45198fbe3d57bb996e

task-4384773

Forward-Port-Of: odoo/odoo#189788",fw-bot,2025-01-16 06:15:49+00:00,[],2025-01-30 11:01:09+00:00,2025-01-16 10:40:07+00:00,https://github.com/odoo/odoo/pull/193898,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594619738, 'issue_id': 2791796199, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193898.png)](https://mergebot.odoo.com/odoo/odoo/pull/193898)', 'created_at': datetime.datetime(2025, 1, 16, 6, 15, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594619750, 'issue_id': 2791796199, 'author': 'fw-bot', 'body': '@SergeBayet @qsm-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193891\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 15, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594751855, 'issue_id': 2791796199, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 52, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:15:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193898.png)](https://mergebot.odoo.com/odoo/odoo/pull/193898)

fw-bot (Issue Creator) on (2025-01-16 06:15:51 UTC): @SergeBayet @qsm-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193891

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

SergeBayet on (2025-01-16 07:52:02 UTC): @robodoo r+

"
2791795291,pull_request,closed,,[FW][FIX] core: fix inverse x2many field in create(),"### To reproduce:
- Model A has an inverse X2many stored field pointing to model B.
- Calling `A.create({'X2many': [Command.create({...})]})` returns `A(1)`.
- `A(1).X2many` returns `B(1, <NewId NoOrigin>)`. This breaks one of the implicit invariants of the ORM, we shouldn't have a mix of real and New ids in the same recordset. Also, it may break some computation done on this X2many later in the same request, since `A(1).X2many` contains two records instead of one.

This happens because `create()` calls `_update_cache()` with X2many values, but the value of that X2many is already in the cache with the record created from the command values. This causes the X2many values to be duplicated with the new record version of the command values.

### Real Issue in the standard code

In the case of the 'sale.commission.plan' model and due to the inversed `target_commission_ids` field, it breaks the duplicate feature (`copy()` method):
```
Traceback (most recent call last):
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 1960, in _transactioning
    return service_model.retrying(func, env=self.env)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/service/model.py"", line 138, in retrying
    result = func()
             ^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 1927, in _serve_ir_http
    response = self.dispatcher.dispatch(rule.endpoint, args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 2174, in dispatch
    result = self.request.registry['ir.http']._dispatch(endpoint)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/addons/base/models/ir_http.py"", line 329, in _dispatch
    result = endpoint(**request.params)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 729, in route_wrapper
    result = endpoint(self, *args, **params_ok)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/addons/web/controllers/dataset.py"", line 35, in call_kw
    return call_kw(request.env[model], method, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/api.py"", line 517, in call_kw
    result = getattr(recs, name)(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 5921, in copy
    old_record.copy_translations(new_record, excluded=default or ())
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 5874, in copy_translations
    new_lines = new[name].sorted(key='id')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 6690, in sorted
    ids = tuple(item.id for item in sorted(self, key=key, reverse=reverse))
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<' not supported between instances of 'NewId' and 'int'
```
Explanation of the traceback:
A `copy()` calls `create()` on 'sale.commission.plan', which returns a `commission` record that should contain the same `target_commission_ids` values. Instead of that, `commission.target_commission_ids` (after the create and before `copy_translations`) returns twice as many records and with a mix of New and real ids, causing `copy_translations()` to crash when sorting by id.

### Fix

To avoid this issue, we don't call `_update_cache()` for the stored fields because we are sure that the cache has already been set in `_create()` and not invalidated by `modified()`.

Forward-Port-Of: odoo/odoo#193256",fw-bot,2025-01-16 06:15:05+00:00,[],2025-01-30 11:01:12+00:00,2025-01-16 10:40:30+00:00,https://github.com/odoo/odoo/pull/193897,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594618842, 'issue_id': 2791795291, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193897.png)](https://mergebot.odoo.com/odoo/odoo/pull/193897)', 'created_at': datetime.datetime(2025, 1, 16, 6, 15, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594618874, 'issue_id': 2791795291, 'author': 'fw-bot', 'body': '@ryv-odoo @rco-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193889\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 15, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594658422, 'issue_id': 2791795291, 'author': 'fw-bot', 'body': '@ryv-odoo @rco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 6, 46, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594804183, 'issue_id': 2791795291, 'author': 'rco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 22, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594804283, 'issue_id': 2791795291, 'author': 'robodoo', 'body': '@rco-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 8, 22, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:15:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193897.png)](https://mergebot.odoo.com/odoo/odoo/pull/193897)

fw-bot (Issue Creator) on (2025-01-16 06:15:09 UTC): @ryv-odoo @rco-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193889

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 06:46:51 UTC): @ryv-odoo @rco-odoo ci/runbot failed on this forward-port PR

rco-odoo on (2025-01-16 08:22:26 UTC): @robodoo r+

robodoo on (2025-01-16 08:22:29 UTC): @rco-odoo you may want to rebuild or fix this PR as it has failed CI.

"
2791793025,pull_request,closed,,[IMP] point_of_sale: ui improvements,"In this commit:
===
- Added the fa-fw class to the expand controls menu button for icon sizing.
- Reduced the size of the left pane to 10% for better screen utilization.
- Displayed product attribute names below the product name in the cart.
- Right-aligned the status in the ticket screen for improved layout consistency.

task-4486420

",meji-odoo,2025-01-16 06:13:20+00:00,[],2025-01-30 19:01:52+00:00,2025-01-30 19:01:52+00:00,https://github.com/odoo/odoo/pull/193896,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594616725, 'issue_id': 2791793025, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193896.png)](https://mergebot.odoo.com/odoo/odoo/pull/193896)', 'created_at': datetime.datetime(2025, 1, 16, 6, 13, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624998482, 'issue_id': 2791793025, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 16, 38, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:13:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193896.png)](https://mergebot.odoo.com/odoo/odoo/pull/193896)

caburj on (2025-01-30 16:38:02 UTC): robodoo r+

"
2791791375,pull_request,closed,,[FW][IMP] hr: fix department employees count,"- edit the `_read_group` domain to include the current active companies

Task: 4353391





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#190322",fw-bot,2025-01-16 06:12:00+00:00,[],2025-01-30 11:01:11+00:00,2025-01-16 10:40:20+00:00,https://github.com/odoo/odoo/pull/193895,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594615053, 'issue_id': 2791791375, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193895.png)](https://mergebot.odoo.com/odoo/odoo/pull/193895)', 'created_at': datetime.datetime(2025, 1, 16, 6, 12, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594615058, 'issue_id': 2791791375, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193890\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 6, 12, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594652525, 'issue_id': 2791791375, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 6, 42, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594757558, 'issue_id': 2791791375, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 55, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594757625, 'issue_id': 2791791375, 'author': 'robodoo', 'body': '@Bertrand2 you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 7, 55, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594780071, 'issue_id': 2791791375, 'author': 'amah-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 8, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594780124, 'issue_id': 2791791375, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 16, 8, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 06:12:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193895.png)](https://mergebot.odoo.com/odoo/odoo/pull/193895)

fw-bot (Issue Creator) on (2025-01-16 06:12:02 UTC): @amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193890

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 06:42:13 UTC): @amah-odoo @Bertrand2 ci/runbot failed on this forward-port PR

Bertrand2 on (2025-01-16 07:55:41 UTC): robodoo r+

robodoo on (2025-01-16 07:55:43 UTC): @Bertrand2 you may want to rebuild or fix this PR as it has failed CI.

amah-odoo on (2025-01-16 08:08:58 UTC): @robodoo r+

robodoo on (2025-01-16 08:09:00 UTC): This PR is already reviewed, reviewing it again is useless.

"
2791771705,pull_request,closed,,[IMP] point_of_sale: revert send mail server action,"Before this commit:
==========
- The Send Mail server action was removed in the SM cleanup PR while improving the mail template flow. This improvement broke down the email marketing flow from PoS.

After this commit:
==========
- Send Mail server action reverted to do email marketing from PoS.

task-4464312",paan-odoo,2025-01-16 05:56:26+00:00,[],2025-01-27 12:28:25+00:00,2025-01-27 12:28:25+00:00,https://github.com/odoo/odoo/pull/193894,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594596847, 'issue_id': 2791771705, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193894.png)](https://mergebot.odoo.com/odoo/odoo/pull/193894)', 'created_at': datetime.datetime(2025, 1, 16, 5, 56, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:56:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193894.png)](https://mergebot.odoo.com/odoo/odoo/pull/193894)

"
2791754017,pull_request,closed,,[FIX] discuss: prevent traceback with sessions missing a channelMember,"Since [1], the session getter for the sidebar cards assumes that channelMember is always defined on rtcSessions, this could cause tracebacks.

[1]: https://github.com/odoo/odoo/pull/190050

",ThanhDodeurOdoo,2025-01-16 05:41:18+00:00,[],2025-01-16 13:08:22+00:00,2025-01-16 12:58:04+00:00,https://github.com/odoo/odoo/pull/193893,"[('RD', 'research & development, internal work')]","[{'comment_id': 2594580846, 'issue_id': 2791754017, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193893.png)](https://mergebot.odoo.com/odoo/odoo/pull/193893)', 'created_at': datetime.datetime(2025, 1, 16, 5, 41, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594664261, 'issue_id': 2791754017, 'author': 'phenix-factory', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 16, 6, 51, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:41:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193893.png)](https://mergebot.odoo.com/odoo/odoo/pull/193893)

phenix-factory on (2025-01-16 06:51:42 UTC): @robodoo r-

"
2791734365,pull_request,closed,,[FW][FIX] web: drag&drop text between fields in the form view,"Before this commit:
It is not able to drag and drop text between fields in the form view.

After this commit:
It is possible to drag and drop text between fields in the form view.

Task-4286285

Forward-Port-Of: odoo/odoo#189397",fw-bot,2025-01-16 05:24:28+00:00,[],2025-01-30 11:01:08+00:00,2025-01-16 10:40:03+00:00,https://github.com/odoo/odoo/pull/193892,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594563273, 'issue_id': 2791734365, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193892.png)](https://mergebot.odoo.com/odoo/odoo/pull/193892)', 'created_at': datetime.datetime(2025, 1, 16, 5, 24, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594563277, 'issue_id': 2791734365, 'author': 'fw-bot', 'body': '@sabr-odoo @aab-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193885\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 5, 24, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594747596, 'issue_id': 2791734365, 'author': 'aab-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 49, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:24:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193892.png)](https://mergebot.odoo.com/odoo/odoo/pull/193892)

fw-bot (Issue Creator) on (2025-01-16 05:24:30 UTC): @sabr-odoo @aab-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193885

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aab-odoo on (2025-01-16 07:49:24 UTC): robodoo r+

"
2791712691,pull_request,closed,,[FW][FIX] website: duplicate dialog issue and closure on button click,"Since [1], clicking the button while the SEO toaster was
visible could repeatedly open the SEO optimization dialog, resulting in
multiple instances of the dialog box being opened.

This commit addresses this issue by:

- Adding logic to ensure toasters close properly when a button is
  clicked. (i.e the SEO toaster when you publish a page with missing
  important SEO informations).

[1]: https://github.com/odoo/odoo/commit/45ea6e4a4a5c8e314b110a45198fbe3d57bb996e

task-4384773

Forward-Port-Of: odoo/odoo#189788",fw-bot,2025-01-16 05:04:23+00:00,[],2025-01-30 10:23:47+00:00,2025-01-16 10:12:49+00:00,https://github.com/odoo/odoo/pull/193891,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594544314, 'issue_id': 2791712691, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193891.png)](https://mergebot.odoo.com/odoo/odoo/pull/193891)', 'created_at': datetime.datetime(2025, 1, 16, 5, 4, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594544328, 'issue_id': 2791712691, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 5, 4, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:04:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193891.png)](https://mergebot.odoo.com/odoo/odoo/pull/193891)

fw-bot (Issue Creator) on (2025-01-16 05:04:24 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791712399,pull_request,closed,,[FW][IMP] hr: fix department employees count,"- edit the `_read_group` domain to include the current active companies

Task: 4353391





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#190322",fw-bot,2025-01-16 05:04:08+00:00,[],2025-01-30 10:23:47+00:00,2025-01-16 10:12:53+00:00,https://github.com/odoo/odoo/pull/193890,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594544100, 'issue_id': 2791712399, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193890.png)](https://mergebot.odoo.com/odoo/odoo/pull/193890)', 'created_at': datetime.datetime(2025, 1, 16, 5, 4, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594544113, 'issue_id': 2791712399, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 5, 4, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:04:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193890.png)](https://mergebot.odoo.com/odoo/odoo/pull/193890)

fw-bot (Issue Creator) on (2025-01-16 05:04:09 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791711794,pull_request,closed,,[FW][FIX] core: fix inverse x2many field in create(),"### To reproduce:
- Model A has an inverse X2many stored field pointing to model B.
- Calling `A.create({'X2many': [Command.create({...})]})` returns `A(1)`.
- `A(1).X2many` returns `B(1, <NewId NoOrigin>)`. This breaks one of the implicit invariants of the ORM, we shouldn't have a mix of real and New ids in the same recordset. Also, it may break some computation done on this X2many later in the same request, since `A(1).X2many` contains two records instead of one.

This happens because `create()` calls `_update_cache()` with X2many values, but the value of that X2many is already in the cache with the record created from the command values. This causes the X2many values to be duplicated with the new record version of the command values.

### Real Issue in the standard code

In the case of the 'sale.commission.plan' model and due to the inversed `target_commission_ids` field, it breaks the duplicate feature (`copy()` method):
```
Traceback (most recent call last):
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 1960, in _transactioning
    return service_model.retrying(func, env=self.env)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/service/model.py"", line 138, in retrying
    result = func()
             ^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 1927, in _serve_ir_http
    response = self.dispatcher.dispatch(rule.endpoint, args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 2174, in dispatch
    result = self.request.registry['ir.http']._dispatch(endpoint)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/addons/base/models/ir_http.py"", line 329, in _dispatch
    result = endpoint(**request.params)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/http.py"", line 729, in route_wrapper
    result = endpoint(self, *args, **params_ok)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/addons/web/controllers/dataset.py"", line 35, in call_kw
    return call_kw(request.env[model], method, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/api.py"", line 517, in call_kw
    result = getattr(recs, name)(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 5921, in copy
    old_record.copy_translations(new_record, excluded=default or ())
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 5874, in copy_translations
    new_lines = new[name].sorted(key='id')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/18.0/odoo/models.py"", line 6690, in sorted
    ids = tuple(item.id for item in sorted(self, key=key, reverse=reverse))
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<' not supported between instances of 'NewId' and 'int'
```
Explanation of the traceback:
A `copy()` calls `create()` on 'sale.commission.plan', which returns a `commission` record that should contain the same `target_commission_ids` values. Instead of that, `commission.target_commission_ids` (after the create and before `copy_translations`) returns twice as many records and with a mix of New and real ids, causing `copy_translations()` to crash when sorting by id.

### Fix

To avoid this issue, we don't call `_update_cache()` for the stored fields because we are sure that the cache has already been set in `_create()` and not invalidated by `modified()`.

Forward-Port-Of: odoo/odoo#193256",fw-bot,2025-01-16 05:03:52+00:00,[],2025-01-30 10:23:49+00:00,2025-01-16 10:13:00+00:00,https://github.com/odoo/odoo/pull/193889,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594543882, 'issue_id': 2791711794, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193889.png)](https://mergebot.odoo.com/odoo/odoo/pull/193889)', 'created_at': datetime.datetime(2025, 1, 16, 5, 3, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594543902, 'issue_id': 2791711794, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 5, 3, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:03:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193889.png)](https://mergebot.odoo.com/odoo/odoo/pull/193889)

fw-bot (Issue Creator) on (2025-01-16 05:03:55 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791711377,pull_request,closed,,"[FW][FIX] mail: redirect to record ""nice"" url from mail","Commit c63d14a0485a553b74a8457aee158384e9ae6d3f introduced new nicer urls to get to Odoo. Commit 5776b574b3aba190c54b2e4974ce514d9b0bec2a adapted the /mail/view controller for it, allowing people clicking on a link to a record in a mail to be redirected to a nice new URL.

Although one case was missing: when the model doesn't contain dots, the string is considered an action's path. So, when opening a record from a mail, there was a crash in odoo because the action could not be found.

After this commit, there is no crash, and the record is opened correctly with a nice url.

see router.js: heuristics to discrimate a model name from an action path is the presence of dots, or the prefix m- for models

opw-4475237

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193762",fw-bot,2025-01-16 05:03:24+00:00,[],2025-01-30 13:45:57+00:00,2025-01-16 13:38:17+00:00,https://github.com/odoo/odoo/pull/193888,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594543772, 'issue_id': 2791711377, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193888.png)](https://mergebot.odoo.com/odoo/odoo/pull/193888)', 'created_at': datetime.datetime(2025, 1, 16, 5, 3, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594543787, 'issue_id': 2791711377, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 5, 3, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594585261, 'issue_id': 2791711377, 'author': 'fw-bot', 'body': '@kebeclibre @jpp-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 5, 45, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 05:03:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193888.png)](https://mergebot.odoo.com/odoo/odoo/pull/193888)

fw-bot (Issue Creator) on (2025-01-16 05:03:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 05:45:46 UTC): @kebeclibre @jpp-odoo ci/runbot failed on this forward-port PR

"
2791691605,pull_request,closed,,[FW][FIX] hr: fix employee image in the mobile view.,"Steps to Reproduce:
• Install the Employee app.
• Switch to mobile view.
• Open the Employee app; employee images are not visible.

Cause:
CSS was not defined for screen sizes smaller than medium.

Fix:
Added CSS rules for screens smaller than medium to ensure employee images are displayed correctly in mobile view.

task-4380126

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#189829",fw-bot,2025-01-16 04:47:24+00:00,[],2025-01-30 09:03:15+00:00,2025-01-16 08:49:17+00:00,https://github.com/odoo/odoo/pull/193887,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594510885, 'issue_id': 2791691605, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193887.png)](https://mergebot.odoo.com/odoo/odoo/pull/193887)', 'created_at': datetime.datetime(2025, 1, 16, 4, 47, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594510915, 'issue_id': 2791691605, 'author': 'fw-bot', 'body': '@rmun-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193884\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 4, 47, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594692097, 'issue_id': 2791691605, 'author': 'rmun-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 12, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 04:47:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193887.png)](https://mergebot.odoo.com/odoo/odoo/pull/193887)

fw-bot (Issue Creator) on (2025-01-16 04:47:25 UTC): @rmun-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193884

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

rmun-odoo on (2025-01-16 07:12:32 UTC): robodoo r+

"
2791684694,pull_request,closed,,[FW][FIX] l10n_ro_eFactura: Invoice content error detection,"### Before
-When the eFactura status was fetched and there was an invoice content error it was not displayed. This issue was due to both the overlooking of:
-  ​the 'nok' status (sent back by the Romanian authorities regarding the presence of errors in the invoice content) 
-  the file provided in the zip that would contain the errors

-The error message shown would also only contain the first error even if many were present.

### Now

-If the status fetched contains 'nok' and is therefore signaling the presence of invoice content errors, then the apposite error file is chosen instead of the file with the electronic signature. This allows for following logic to account for errors, to retrieve the error message and to provide the error file as the downloadable document. 

-The pop up shows all the errors with an increased width to account for more content.

task-4306506

Forward-Port-Of: odoo/odoo#193668
Forward-Port-Of: odoo/odoo#190618",fw-bot,2025-01-16 04:43:24+00:00,[],2025-01-30 12:41:42+00:00,2025-01-16 12:29:43+00:00,https://github.com/odoo/odoo/pull/193886,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594495238, 'issue_id': 2791684694, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193886.png)](https://mergebot.odoo.com/odoo/odoo/pull/193886)', 'created_at': datetime.datetime(2025, 1, 16, 4, 43, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594495306, 'issue_id': 2791684694, 'author': 'fw-bot', 'body': '@aizu-odoo @qdp-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193882\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 4, 43, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595108322, 'issue_id': 2791684694, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 10, 12, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 04:43:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193886.png)](https://mergebot.odoo.com/odoo/odoo/pull/193886)

fw-bot (Issue Creator) on (2025-01-16 04:43:26 UTC): @aizu-odoo @qdp-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193882

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-16 10:12:02 UTC): @robodoo r+

"
2791604772,pull_request,closed,,[FW][FIX] web: drag&drop text between fields in the form view,"Before this commit:
It is not able to drag and drop text between fields in the form view.

After this commit:
It is possible to drag and drop text between fields in the form view.

Task-4286285

Forward-Port-Of: odoo/odoo#189397",fw-bot,2025-01-16 03:26:46+00:00,[],2025-01-30 10:23:46+00:00,2025-01-16 10:12:44+00:00,https://github.com/odoo/odoo/pull/193885,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594401208, 'issue_id': 2791604772, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193885.png)](https://mergebot.odoo.com/odoo/odoo/pull/193885)', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594401216, 'issue_id': 2791604772, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594428987, 'issue_id': 2791604772, 'author': 'fw-bot', 'body': '@sabr-odoo @aab-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 4, 0, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 03:26:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193885.png)](https://mergebot.odoo.com/odoo/odoo/pull/193885)

fw-bot (Issue Creator) on (2025-01-16 03:26:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 04:00:31 UTC): @sabr-odoo @aab-odoo ci/runbot failed on this forward-port PR

"
2791604536,pull_request,closed,,[FW][FIX] hr: fix employee image in the mobile view.,"Steps to Reproduce:
• Install the Employee app.
• Switch to mobile view.
• Open the Employee app; employee images are not visible.

Cause:
CSS was not defined for screen sizes smaller than medium.

Fix:
Added CSS rules for screens smaller than medium to ensure employee images are displayed correctly in mobile view.

task-4380126

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#189829",fw-bot,2025-01-16 03:26:32+00:00,[],2025-01-30 10:23:42+00:00,2025-01-16 10:12:18+00:00,https://github.com/odoo/odoo/pull/193884,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594400964, 'issue_id': 2791604536, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193884.png)](https://mergebot.odoo.com/odoo/odoo/pull/193884)', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594400971, 'issue_id': 2791604536, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 03:26:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193884.png)](https://mergebot.odoo.com/odoo/odoo/pull/193884)

fw-bot (Issue Creator) on (2025-01-16 03:26:33 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791604285,pull_request,closed,,"[FW][IMP] stock: add a ""Return All"" button on the picking return wizard","### Issue:

Since 57b8b2487def43a1b9c461c0fa4eb02200b5c1ef (18.0), the return picking wizard sets a default quantity of 0. This fits the new design of returns that are no longer exclusively tied to the initial delivery. However, in workflows where you are expected to return all/almost all products of a consequent picking this is both fastidious and error prone to set all the quantities to match the delivered values by hand.

### Solution:

We add a ""Return All"" button in the wizard view to allow the user to create a return whose quantity matches the delivered quantities.

opw-4416167
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192509",fw-bot,2025-01-16 03:26:17+00:00,[],2025-01-31 13:42:34+00:00,2025-01-17 13:37:16+00:00,https://github.com/odoo/odoo/pull/193883,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594400774, 'issue_id': 2791604285, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193883.png)](https://mergebot.odoo.com/odoo/odoo/pull/193883)', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594400781, 'issue_id': 2791604285, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594428636, 'issue_id': 2791604285, 'author': 'fw-bot', 'body': '@lase-odoo @clesgow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 4, 0, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 03:26:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193883.png)](https://mergebot.odoo.com/odoo/odoo/pull/193883)

fw-bot (Issue Creator) on (2025-01-16 03:26:19 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 04:00:08 UTC): @lase-odoo @clesgow ci/runbot failed on this forward-port PR

"
2791603930,pull_request,closed,,[FW][FIX] l10n_ro_eFactura: Invoice content error detection,"### Before
-When the eFactura status was fetched and there was an invoice content error it was not displayed. This issue was due to both the overlooking of:
-  ​the 'nok' status (sent back by the Romanian authorities regarding the presence of errors in the invoice content) 
-  the file provided in the zip that would contain the errors

-The error message shown would also only contain the first error even if many were present.

### Now

-If the status fetched contains 'nok' and is therefore signaling the presence of invoice content errors, then the apposite error file is chosen instead of the file with the electronic signature. This allows for following logic to account for errors, to retrieve the error message and to provide the error file as the downloadable document. 

-The pop up shows all the errors with an increased width to account for more content.

task-4306506

Forward-Port-Of: odoo/odoo#193668
Forward-Port-Of: odoo/odoo#190618",fw-bot,2025-01-16 03:25:53+00:00,[],2025-01-30 12:41:26+00:00,2025-01-16 12:05:12+00:00,https://github.com/odoo/odoo/pull/193882,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594400566, 'issue_id': 2791603930, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193882.png)](https://mergebot.odoo.com/odoo/odoo/pull/193882)', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594400570, 'issue_id': 2791603930, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 3, 26, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 03:26:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193882.png)](https://mergebot.odoo.com/odoo/odoo/pull/193882)

fw-bot (Issue Creator) on (2025-01-16 03:26:08 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791597245,pull_request,open,,[FIX] pos_online_payment: access error if no customer when paying online,"* STEP TO REPRODUCE: Have 2 company (1 is Default San Francisco the other is VN company),Start enviroment in VN company -> config an online payment method with
Demo/Wire
Transfer -> Start session and create pos order with no customer then Validate -> Customer scan QR code using mobile (not logged in) -> 403 forbidden error, read the log said: Sorry, Public user for VN company (id=10) doesn't have 'read' access to: User (res.users)
* REASON: when request.env.ref('base.public_user') it will get public user from San Francisco company while the request user is Public User of VN company, the record rule prevent that
* SOLUTION: Fix by using method _get_public_user() in res.company, this
commit also move _get_public_user() from website to base module so other
modules can use it

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ndd-odoo,2025-01-16 03:18:33+00:00,[],2025-02-04 09:13:52+00:00,,https://github.com/odoo/odoo/pull/193881,"[('Point of Sale', '')]","[{'comment_id': 2594393028, 'issue_id': 2791597245, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193881.png)](https://mergebot.odoo.com/odoo/odoo/pull/193881)', 'created_at': datetime.datetime(2025, 1, 16, 3, 18, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594393684, 'issue_id': 2791597245, 'author': 'ndd-odoo', 'body': 'Hello @caburj @thvi-odoo Can you have a look please ? Thank you', 'created_at': datetime.datetime(2025, 1, 16, 3, 19, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604218533, 'issue_id': 2791597245, 'author': 'ndd-odoo', 'body': 'Hi @caburj i have done as you said please review, thank you', 'created_at': datetime.datetime(2025, 1, 21, 9, 57, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633303129, 'issue_id': 2791597245, 'author': 'ndd-odoo', 'body': 'Hello @caburj How are you doing, can this ok to merge ?', 'created_at': datetime.datetime(2025, 2, 4, 9, 13, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 03:18:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193881.png)](https://mergebot.odoo.com/odoo/odoo/pull/193881)

ndd-odoo (Issue Creator) on (2025-01-16 03:19:16 UTC): Hello @caburj @thvi-odoo Can you have a look please ? Thank you

ndd-odoo (Issue Creator) on (2025-01-21 09:57:17 UTC): Hi @caburj i have done as you said please review, thank you

ndd-odoo (Issue Creator) on (2025-02-04 09:13:50 UTC): Hello @caburj How are you doing, can this ok to merge ?

"
2791571091,pull_request,closed,,[FW][FIX] website_sale_collect: add check on delivery radio existing,"Versions
--------
- 18.0+

Steps
-----
1. Go to eCommerce;
2. add only services to cart;
3. go to checkout;
4. on payment page, go back to Delivery page;
5. add a second address if needed;
6. change selected address.

Issue
-----
> Uncaught Promise > Cannot read properties of null

Cause
-----
The query selector in `_canEnabledMainButton` assumes a radio input is always present on this step, but this is only the case when deliverable products were added to the cart.

Solution
--------
Skip the remainder of the method if the delivery radio wasn't found.

opw-4365246
opw-4422905

Forward-Port-Of: odoo/odoo#193357",fw-bot,2025-01-16 02:53:42+00:00,[],2025-01-30 17:27:52+00:00,2025-01-16 17:08:44+00:00,https://github.com/odoo/odoo/pull/193880,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594365056, 'issue_id': 2791571091, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193880.png)](https://mergebot.odoo.com/odoo/odoo/pull/193880)', 'created_at': datetime.datetime(2025, 1, 16, 2, 53, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594365073, 'issue_id': 2791571091, 'author': 'fw-bot', 'body': '@lvsz @vchu-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193879\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 2, 53, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594413419, 'issue_id': 2791571091, 'author': 'fw-bot', 'body': '@lvsz @vchu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 3, 40, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595246835, 'issue_id': 2791571091, 'author': 'lvsz', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 15, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 02:53:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193880.png)](https://mergebot.odoo.com/odoo/odoo/pull/193880)

fw-bot (Issue Creator) on (2025-01-16 02:53:44 UTC): @lvsz @vchu-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193879

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 03:40:37 UTC): @lvsz @vchu-odoo ci/runbot failed on this forward-port PR

lvsz on (2025-01-16 11:15:34 UTC): @robodoo r+

"
2791433264,pull_request,closed,,[FW][FIX] website_sale_collect: add check on delivery radio existing,"Versions
--------
- 18.0+

Steps
-----
1. Go to eCommerce;
2. add only services to cart;
3. go to checkout;
4. on payment page, go back to Delivery page;
5. add a second address if needed;
6. change selected address.

Issue
-----
> Uncaught Promise > Cannot read properties of null

Cause
-----
The query selector in `_canEnabledMainButton` assumes a radio input is always present on this step, but this is only the case when deliverable products were added to the cart.

Solution
--------
Skip the remainder of the method if the delivery radio wasn't found.

opw-4365246
opw-4422905

Forward-Port-Of: odoo/odoo#193357",fw-bot,2025-01-16 01:22:02+00:00,[],2025-01-30 13:45:55+00:00,2025-01-16 13:38:01+00:00,https://github.com/odoo/odoo/pull/193879,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594270552, 'issue_id': 2791433264, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193879.png)](https://mergebot.odoo.com/odoo/odoo/pull/193879)', 'created_at': datetime.datetime(2025, 1, 16, 1, 22, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594270570, 'issue_id': 2791433264, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 1, 22, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 01:22:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193879.png)](https://mergebot.odoo.com/odoo/odoo/pull/193879)

fw-bot (Issue Creator) on (2025-01-16 01:22:04 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791384416,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#193777
Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-16 00:55:23+00:00,[],2025-01-30 09:03:13+00:00,2025-01-16 08:49:08+00:00,https://github.com/odoo/odoo/pull/193878,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594238254, 'issue_id': 2791384416, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193878.png)](https://mergebot.odoo.com/odoo/odoo/pull/193878)', 'created_at': datetime.datetime(2025, 1, 16, 0, 55, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594238270, 'issue_id': 2791384416, 'author': 'fw-bot', 'body': '@LouisGobert @clesgow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193874\n* odoo/odoo#193870\n* odoo/odoo#193859\n* odoo/odoo#193848\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 0, 55, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594593290, 'issue_id': 2791384416, 'author': 'LouisGobert', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 5, 53, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-16 00:55:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193878.png)](https://mergebot.odoo.com/odoo/odoo/pull/193878)

fw-bot (Issue Creator) on (2025-01-16 00:55:25 UTC): @LouisGobert @clesgow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193874
* odoo/odoo#193870
* odoo/odoo#193859
* odoo/odoo#193848

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LouisGobert on (2025-01-16 05:53:10 UTC): @robodoo r+

"
2791263458,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193847
Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-15 23:50:59+00:00,[],2025-01-30 13:45:53+00:00,2025-01-16 13:37:49+00:00,https://github.com/odoo/odoo/pull/193877,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2594166589, 'issue_id': 2791263458, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193877.png)](https://mergebot.odoo.com/odoo/odoo/pull/193877)', 'created_at': datetime.datetime(2025, 1, 15, 23, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594166621, 'issue_id': 2791263458, 'author': 'fw-bot', 'body': '@pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.\n\nstdout:\n```\nAuto-merging odoo/tests/common.py\nCONFLICT (content): Merge conflict in odoo/tests/common.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 23, 51, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594954687, 'issue_id': 2791263458, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 8, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 23:51:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193877.png)](https://mergebot.odoo.com/odoo/odoo/pull/193877)

fw-bot (Issue Creator) on (2025-01-15 23:51:02 UTC): @pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.

stdout:
```
Auto-merging odoo/tests/common.py
CONFLICT (content): Merge conflict in odoo/tests/common.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-16 09:08:15 UTC): @robodoo r+

"
2791263184,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193847
Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-15 23:50:44+00:00,[],2025-01-30 13:08:01+00:00,2025-01-16 12:58:05+00:00,https://github.com/odoo/odoo/pull/193876,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594166369, 'issue_id': 2791263184, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193876.png)](https://mergebot.odoo.com/odoo/odoo/pull/193876)', 'created_at': datetime.datetime(2025, 1, 15, 23, 50, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594166382, 'issue_id': 2791263184, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 23, 50, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594166598, 'issue_id': 2791263184, 'author': 'fw-bot', 'body': '@pparidans @xmo-odoo the next pull request (odoo/odoo#193877) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 23, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594929186, 'issue_id': 2791263184, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 57, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 23:50:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193876.png)](https://mergebot.odoo.com/odoo/odoo/pull/193876)

fw-bot (Issue Creator) on (2025-01-15 23:50:45 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 23:51:00 UTC): @pparidans @xmo-odoo the next pull request (odoo/odoo#193877) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-16 08:57:20 UTC): @robodoo r+

"
2791262655,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193847
Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-15 23:50:28+00:00,[],2025-01-30 11:01:03+00:00,2025-01-16 10:32:04+00:00,https://github.com/odoo/odoo/pull/193875,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594166080, 'issue_id': 2791262655, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193875.png)](https://mergebot.odoo.com/odoo/odoo/pull/193875)', 'created_at': datetime.datetime(2025, 1, 15, 23, 50, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594166089, 'issue_id': 2791262655, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 23, 50, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 23:50:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193875.png)](https://mergebot.odoo.com/odoo/odoo/pull/193875)

fw-bot (Issue Creator) on (2025-01-15 23:50:30 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791225063,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#193777
Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-15 23:30:09+00:00,[],2025-01-30 07:13:24+00:00,2025-01-16 07:11:15+00:00,https://github.com/odoo/odoo/pull/193874,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594145186, 'issue_id': 2791225063, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193874.png)](https://mergebot.odoo.com/odoo/odoo/pull/193874)', 'created_at': datetime.datetime(2025, 1, 15, 23, 30, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594145198, 'issue_id': 2791225063, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 23, 30, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 23:30:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193874.png)](https://mergebot.odoo.com/odoo/odoo/pull/193874)

fw-bot (Issue Creator) on (2025-01-15 23:30:10 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2791114300,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#193610
Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-15 22:38:32+00:00,[],2025-01-30 17:27:53+00:00,2025-01-16 17:08:49+00:00,https://github.com/odoo/odoo/pull/193873,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594080507, 'issue_id': 2791114300, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193873.png)](https://mergebot.odoo.com/odoo/odoo/pull/193873)', 'created_at': datetime.datetime(2025, 1, 15, 22, 38, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594080520, 'issue_id': 2791114300, 'author': 'fw-bot', 'body': '@lvsz @ryv-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193866\n* odoo/odoo#193855\n* odoo/odoo#193840\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 22, 38, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595259382, 'issue_id': 2791114300, 'author': 'fw-bot', 'body': '@lvsz @ryv-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 16, 11, 21, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595260949, 'issue_id': 2791114300, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 22, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 22:38:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193873.png)](https://mergebot.odoo.com/odoo/odoo/pull/193873)

fw-bot (Issue Creator) on (2025-01-15 22:38:34 UTC): @lvsz @ryv-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193866
* odoo/odoo#193855
* odoo/odoo#193840

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 11:21:54 UTC): @lvsz @ryv-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

lvsz on (2025-01-16 11:22:43 UTC): robodoo r+

"
2791074255,pull_request,closed,,"[FW][FIX] mail, *: better avatar card style in dark theme","- im status background was white in all themes, this is now the card color in all themes.
- avatar card color was too grey in dark theme, which made reading text content in card hard. This is now darker for better contrast.
- border is darker in dark theme too, so it's less harsh.
- borders in corners of avatar card were cut due to lack of rounded of card container. This commit adds `.rounded` to not cut corners.

Style in white theme is essentially unchanged.

Before / After
![Screenshot 2025-01-14 at 16 05 19](https://github.com/user-attachments/assets/8aa64798-afe6-4139-8a62-df7ded153b06) ![Screenshot 2025-01-14 at 16 05 31](https://github.com/user-attachments/assets/5feb590f-1a86-435c-a6dc-9cb1a53db708)

Forward-Port-Of: odoo/odoo#193594",fw-bot,2025-01-15 22:19:43+00:00,[],2025-01-20 10:02:30+00:00,2025-01-20 01:39:13+00:00,https://github.com/odoo/odoo/pull/193872,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2594055123, 'issue_id': 2791074255, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193872.png)](https://mergebot.odoo.com/odoo/odoo/pull/193872)', 'created_at': datetime.datetime(2025, 1, 15, 22, 19, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594055137, 'issue_id': 2791074255, 'author': 'fw-bot', 'body': '@alexkuhn this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193864\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 22, 19, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600462953, 'issue_id': 2791074255, 'author': 'fw-bot', 'body': '@alexkuhn this forward port of odoo/odoo#193594 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600860885, 'issue_id': 2791074255, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 13, 25, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600863348, 'issue_id': 2791074255, 'author': 'robodoo', 'body': '@alexkuhn staging failed: ci/runbot on cb60ff1bf15a41a772d76f4f31e1291ea1fc02fa (view more at https://runbot.odoo.com/runbot/build/73598771)', 'created_at': datetime.datetime(2025, 1, 19, 13, 31, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600911665, 'issue_id': 2791074255, 'author': 'alexkuhn', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 19, 15, 31, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600925812, 'issue_id': 2791074255, 'author': 'robodoo', 'body': '@alexkuhn staging failed: ci/runbot on f4f25dff2c9130dd7f4920f5150074663578aee4 (view more at https://runbot.odoo.com/runbot/build/73599120)', 'created_at': datetime.datetime(2025, 1, 19, 16, 9, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600926482, 'issue_id': 2791074255, 'author': 'fw-bot', 'body': '@alexkuhn this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 19, 16, 11, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600926827, 'issue_id': 2791074255, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 16, 12, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600973136, 'issue_id': 2791074255, 'author': 'robodoo', 'body': '@alexkuhn staging failed: ci/runbot on 2604afd31e69b128d6225e82771ad3ee4133a000 (view more at https://runbot.odoo.com/runbot/build/73599948)', 'created_at': datetime.datetime(2025, 1, 19, 18, 32, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600989894, 'issue_id': 2791074255, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 19, 19, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601000495, 'issue_id': 2791074255, 'author': 'robodoo', 'body': ""@alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 19, 19, 57, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601029227, 'issue_id': 2791074255, 'author': 'robodoo', 'body': '@alexkuhn staging failed: ci/runbot on 93efd25c35fb30c079bfef9a4cdf98fc24c679a8 (view more at https://runbot.odoo.com/runbot/build/73622204)', 'created_at': datetime.datetime(2025, 1, 19, 21, 31, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601031316, 'issue_id': 2791074255, 'author': 'alexkuhn', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 19, 21, 38, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 22:19:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193872.png)](https://mergebot.odoo.com/odoo/odoo/pull/193872)

fw-bot (Issue Creator) on (2025-01-15 22:19:45 UTC): @alexkuhn this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193864

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:33 UTC): @alexkuhn this forward port of odoo/odoo#193594 is awaiting action (not merged or closed).

alexkuhn on (2025-01-19 13:25:27 UTC): @robodoo r+

robodoo on (2025-01-19 13:31:48 UTC): @alexkuhn staging failed: ci/runbot on cb60ff1bf15a41a772d76f4f31e1291ea1fc02fa (view more at https://runbot.odoo.com/runbot/build/73598771)

alexkuhn on (2025-01-19 15:31:29 UTC): @robodoo retry

robodoo on (2025-01-19 16:09:50 UTC): @alexkuhn staging failed: ci/runbot on f4f25dff2c9130dd7f4920f5150074663578aee4 (view more at https://runbot.odoo.com/runbot/build/73599120)

fw-bot (Issue Creator) on (2025-01-19 16:11:44 UTC): @alexkuhn this PR was modified / updated and has become a normal PR. It must be merged directly.

alexkuhn on (2025-01-19 16:12:54 UTC): @robodoo r+

robodoo on (2025-01-19 18:32:56 UTC): @alexkuhn staging failed: ci/runbot on 2604afd31e69b128d6225e82771ad3ee4133a000 (view more at https://runbot.odoo.com/runbot/build/73599948)

alexkuhn on (2025-01-19 19:25:08 UTC): @robodoo r+

robodoo on (2025-01-19 19:57:59 UTC): @alexkuhn 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-01-19 21:31:53 UTC): @alexkuhn staging failed: ci/runbot on 93efd25c35fb30c079bfef9a4cdf98fc24c679a8 (view more at https://runbot.odoo.com/runbot/build/73622204)

alexkuhn on (2025-01-19 21:38:47 UTC): @robodoo retry

"
2791043569,pull_request,open,,[IMP] core: add handy static methods to the Html field,"In the same spirit than other handy static methods on fields, like:

* fields.Float.is_zero
* fields.Float.compare
* fields.Float.round
* fields.Date.context_today
* fields.Date.to_date
* fields.Datetime.context_timestamp
* fields.Datetime.to_datetime
* ...

This commit introduces the following static methods on the Html field:

* Html.escape
* Html.is_empty
* Html.to_plaintext
* Html.from_plaintext

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ivantodorovich,2025-01-15 22:06:27+00:00,[],2025-01-27 12:55:03+00:00,,https://github.com/odoo/odoo/pull/193871,[],"[{'comment_id': 2594034776, 'issue_id': 2791043569, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193871.png)](https://mergebot.odoo.com/odoo/odoo/pull/193871)', 'created_at': datetime.datetime(2025, 1, 15, 22, 6, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 22:06:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193871.png)](https://mergebot.odoo.com/odoo/odoo/pull/193871)

"
2790992646,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#193777
Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-15 21:45:07+00:00,[],2025-01-30 07:48:04+00:00,2025-01-16 07:43:08+00:00,https://github.com/odoo/odoo/pull/193870,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2594002861, 'issue_id': 2790992646, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193870.png)](https://mergebot.odoo.com/odoo/odoo/pull/193870)', 'created_at': datetime.datetime(2025, 1, 15, 21, 45, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594002876, 'issue_id': 2790992646, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 45, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 21:45:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193870.png)](https://mergebot.odoo.com/odoo/odoo/pull/193870)

fw-bot (Issue Creator) on (2025-01-15 21:45:09 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790991089,pull_request,closed,,"[FW][FIX] core: http.route ""methods"" accepts any Iterable","The docstring of `@route` states that it accepts any iterable for the `methods` argument, but several places in the source code wrongly expected a list, and break if it is a tuple.

Forward-Port-Of: odoo/odoo#193733
Forward-Port-Of: odoo/odoo#193621",fw-bot,2025-01-15 21:44:26+00:00,[],2025-02-03 22:25:02+00:00,2025-01-20 21:48:34+00:00,https://github.com/odoo/odoo/pull/193869,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2594001823, 'issue_id': 2790991089, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193869.png)](https://mergebot.odoo.com/odoo/odoo/pull/193869)', 'created_at': datetime.datetime(2025, 1, 15, 21, 44, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594001877, 'issue_id': 2790991089, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193621 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/models/ir_http.py\nAuto-merging odoo/addons/test_http/controllers.py\nCONFLICT (content): Merge conflict in odoo/addons/test_http/controllers.py\nAuto-merging odoo/http.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 44, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595938441, 'issue_id': 2790991089, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 52, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595973591, 'issue_id': 2790991089, 'author': 'robodoo', 'body': ""@Julien00859 'ci/security' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 15, 6, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596090843, 'issue_id': 2790991089, 'author': 'robodoo', 'body': ""@Julien00859 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 15, 53, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600462850, 'issue_id': 2790991089, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173221, 'issue_id': 2790991089, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602783537, 'issue_id': 2790991089, 'author': 'rco-odoo', 'body': 'robodoo override=ci/security\r\n\r\nReason: test route', 'created_at': datetime.datetime(2025, 1, 20, 16, 0, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 21:44:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193869.png)](https://mergebot.odoo.com/odoo/odoo/pull/193869)

fw-bot (Issue Creator) on (2025-01-15 21:44:29 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193621 failed.

stdout:
```
Auto-merging odoo/addons/base/models/ir_http.py
Auto-merging odoo/addons/test_http/controllers.py
CONFLICT (content): Merge conflict in odoo/addons/test_http/controllers.py
Auto-merging odoo/http.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Julien00859 on (2025-01-16 14:52:44 UTC): @robodoo r+

robodoo on (2025-01-16 15:06:22 UTC): @Julien00859 'ci/security' failed on this reviewed PR.

robodoo on (2025-01-16 15:53:19 UTC): @Julien00859 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-19 02:01:32 UTC): @Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:31 UTC): @Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).

rco-odoo on (2025-01-20 16:00:53 UTC): robodoo override=ci/security

Reason: test route

"
2790964127,pull_request,closed,,"[FW][FIX] mrp{,_subcontracting_purchase}: make MO date set consistent","**Current behavior:**
Having some product with a subcontract BoM and using the unarchived 'Subcontract' picking type and creating a purchase order to the subcontractor for that product: changing the `scheduled_date` of the generated receipt will improperly set the start/end date on the subcontracting MO which was generated alongside the receipt.

Specifically, the `scheduled_date` of the receipt should correspond to the `date_finished` of the MO- however currently it is incorrectly modifying the MO `date_start` instead.

**Expected behavior:**
Modifying `scheduled_date` on the receipt will in turn modify the `date_finished` of the MO.

**Steps to reproduce:**
*Unarchive the Subcontract picking type operation*
1. Create a final product with a subcontract type BoM, on the BoM set some positive value for Manuf. Lead Time (in miscellaneous tab)

2. Create a purchase order to the subcontractor for that product

3. Confirm the PO -> observe that on creation, the scheduled date of the receipt matches the end date of the MO

4. Change the scheduled date of the receipt (for example, 10 days in the future) -> observe that after saving, the MO date correspondence is inverted (end date = scheduled date + lead time) instead of the start date being set with respect to the end time (like on creation), the end date gets set with respect to the start date

**Cause of the issue:**
It's an inconsistency with how the fields (start, end) are calculated and when.

**Fix:**
Make this case behave the same as the creation does- that is, end date is informed by the receipt's scheduled date and the start date of the MO is set by subtracting the lead time from there.

opw-4231548

Forward-Port-Of: odoo/odoo#188389",fw-bot,2025-01-15 21:33:24+00:00,[],2025-01-27 09:21:01+00:00,2025-01-27 09:21:01+00:00,https://github.com/odoo/odoo/pull/193868,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593981525, 'issue_id': 2790964127, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193868.png)](https://mergebot.odoo.com/odoo/odoo/pull/193868)', 'created_at': datetime.datetime(2025, 1, 15, 21, 33, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593981540, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 33, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594025395, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 22, 0, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598292262, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 12, 46, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600470183, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174499, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476959, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606120075, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 2, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606704789, 'issue_id': 2790964127, 'author': 'Whenrow', 'body': '@ethanrobv Hi. could you make this correction https://github.com/odoo/odoo/pull/194376 here up to master ? Thank you', 'created_at': datetime.datetime(2025, 1, 22, 9, 25, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689694, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611386127, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613722073, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723766, 'issue_id': 2790964127, 'author': 'fw-bot', 'body': '@ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615034265, 'issue_id': 2790964127, 'author': 'ethanrobv', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 7, 42, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 21:33:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193868.png)](https://mergebot.odoo.com/odoo/odoo/pull/193868)

fw-bot (Issue Creator) on (2025-01-15 21:33:26 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 22:00:21 UTC): @ethanrobv @svs-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 12:46:25 UTC): @ethanrobv @svs-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-19 02:02:27 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:33 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:09 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:02:06 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

Whenrow on (2025-01-22 09:25:20 UTC): @ethanrobv Hi. could you make this correction https://github.com/odoo/odoo/pull/194376 here up to master ? Thank you

fw-bot (Issue Creator) on (2025-01-23 02:01:38 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:34 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:53 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:50 UTC): @ethanrobv @svs-odoo this forward port of odoo/odoo#188389 is awaiting action (not merged or closed).

ethanrobv on (2025-01-27 07:42:24 UTC): @robodoo r+

"
2790958325,pull_request,closed,,[FW][FIX] hw_drivers: wrong foot pedal name,"Devices detected through usb don't always have there manufactured and product name which can be retrieved.
For example, our foot pedal in the office doesn't which leads to it having a name `""None - None""` in Odoo.

After this PR if a device doesn't have a product name / manufacturer name it will be saved as `""Unknown input device""`

task-4472585

Forward-Port-Of: odoo/odoo#193295
Forward-Port-Of: odoo/odoo#193277",fw-bot,2025-01-15 21:31:11+00:00,[],2025-01-30 13:08:05+00:00,2025-01-16 12:58:08+00:00,https://github.com/odoo/odoo/pull/193867,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593977832, 'issue_id': 2790958325, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193867.png)](https://mergebot.odoo.com/odoo/odoo/pull/193867)', 'created_at': datetime.datetime(2025, 1, 15, 21, 31, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593977849, 'issue_id': 2790958325, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 31, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594048096, 'issue_id': 2790958325, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 22, 15, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594312851, 'issue_id': 2790958325, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 0, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 21:31:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193867.png)](https://mergebot.odoo.com/odoo/odoo/pull/193867)

fw-bot (Issue Creator) on (2025-01-15 21:31:13 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 22:15:51 UTC): @Ysoroko @qle-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 02:00:54 UTC): @Ysoroko @qle-odoo this forward port of odoo/odoo#193277 is awaiting action (not merged or closed).

"
2790913737,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#193610
Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-15 21:12:55+00:00,[],2025-01-30 13:45:55+00:00,2025-01-16 13:38:05+00:00,https://github.com/odoo/odoo/pull/193866,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593946943, 'issue_id': 2790913737, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193866.png)](https://mergebot.odoo.com/odoo/odoo/pull/193866)', 'created_at': datetime.datetime(2025, 1, 15, 21, 12, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593946960, 'issue_id': 2790913737, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 12, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595257916, 'issue_id': 2790913737, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 21, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595259424, 'issue_id': 2790913737, 'author': 'fw-bot', 'body': ""@lvsz @ryv-odoo child PR odoo/odoo#193873 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 16, 11, 21, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 21:12:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193866.png)](https://mergebot.odoo.com/odoo/odoo/pull/193866)

fw-bot (Issue Creator) on (2025-01-15 21:12:57 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-16 11:21:10 UTC): robodoo r+

fw-bot (Issue Creator) on (2025-01-16 11:21:55 UTC): @lvsz @ryv-odoo child PR odoo/odoo#193873 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2790873339,pull_request,closed,,[FW][18.0][FIX] mail: catch `imaplib.IMAP4.abort` errors when closing IMAP connection,"### Description of the issue/feature this PR addresses:

This error could be raised if oAuth session has expired before Odoo gets a chance to close the IMAP connection:

```
<class 'imaplib.IMAP4.abort'>: \""socket error: [Errno 32] Broken pipe\"" while evaluating\n'model._fetch_mails()
```

We get this error from time to time when fetching emails from a Gmail account configured with Google oAuth.

### Current behavior before PR:

Fetchmail scheduled action hangs when this happens, and no email are fetched anymore (dangling connection still in worker process, until this worker is recycled? Is it possible?).

### Desired behavior after PR is merged:

Catch properly the exception and have a scheduled action terminating nicely.

We did this patch on v14, but we are not entirely sure it is fixing the encountered issue as this happened randomly, and very rarely.
But I guess it is anyway a good thing to catch such errors to get a WARNING log, like it has been done by catching `OSError` for timeout issues.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191676
Forward-Port-Of: odoo/odoo#190319",fw-bot,2025-01-15 20:56:50+00:00,[],2025-01-30 12:41:39+00:00,2025-01-16 12:29:27+00:00,https://github.com/odoo/odoo/pull/193865,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593918817, 'issue_id': 2790873339, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193865.png)](https://mergebot.odoo.com/odoo/odoo/pull/193865)', 'created_at': datetime.datetime(2025, 1, 15, 20, 56, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593918845, 'issue_id': 2790873339, 'author': 'fw-bot', 'body': '@sebalix @tde-banana-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 56, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595056879, 'issue_id': 2790873339, 'author': 'tde-banana-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 53, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:56:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193865.png)](https://mergebot.odoo.com/odoo/odoo/pull/193865)

fw-bot (Issue Creator) on (2025-01-15 20:56:52 UTC): @sebalix @tde-banana-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tde-banana-odoo on (2025-01-16 09:53:43 UTC): @robodoo r+

"
2790856631,pull_request,closed,,"[FW][FIX] mail, *: better avatar card style in dark theme","- im status background was white in all themes, this is now the card color in all themes.
- avatar card color was too grey in dark theme, which made reading text content in card hard. This is now darker for better contrast.
- border is darker in dark theme too, so it's less harsh.
- borders in corners of avatar card were cut due to lack of rounded of card container. This commit adds `.rounded` to not cut corners.

Style in white theme is essentially unchanged.

Before / After
![Screenshot 2025-01-14 at 16 05 19](https://github.com/user-attachments/assets/8aa64798-afe6-4139-8a62-df7ded153b06) ![Screenshot 2025-01-14 at 16 05 31](https://github.com/user-attachments/assets/5feb590f-1a86-435c-a6dc-9cb1a53db708)

Forward-Port-Of: odoo/odoo#193594",fw-bot,2025-01-15 20:49:54+00:00,[],2025-02-02 17:47:07+00:00,2025-01-19 14:30:24+00:00,https://github.com/odoo/odoo/pull/193864,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593907824, 'issue_id': 2790856631, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193864.png)](https://mergebot.odoo.com/odoo/odoo/pull/193864)', 'created_at': datetime.datetime(2025, 1, 15, 20, 49, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593907833, 'issue_id': 2790856631, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 49, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:49:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193864.png)](https://mergebot.odoo.com/odoo/odoo/pull/193864)

fw-bot (Issue Creator) on (2025-01-15 20:49:56 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790792202,pull_request,closed,,[FW][IMP] l10n_it: Split Periodic & Annual Tax Reports,"Description of the issue this commit addresses:

The Italian tax report lacks clarity and can be improved both in readabilty and
usability by splitting the monthly and the annual reports.

---

Desired behavior after this commit is merged:

The Italian tax report is now split in a monthly and an annual report.
The report uses the sections mechanism to be split in the different parts it is
made from and clean the UI by not having everything on the same sreen.

---

Enterprise PR: https://github.com/odoo/enterprise/pull/62405
Task-3479785

---

I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193662
Forward-Port-Of: odoo/odoo#164064",fw-bot,2025-01-15 20:24:34+00:00,[],2025-01-30 19:01:01+00:00,2025-01-16 18:54:15+00:00,https://github.com/odoo/odoo/pull/193863,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593862226, 'issue_id': 2790792202, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193863.png)](https://mergebot.odoo.com/odoo/odoo/pull/193863)', 'created_at': datetime.datetime(2025, 1, 15, 20, 24, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593862250, 'issue_id': 2790792202, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193850\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 24, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593912670, 'issue_id': 2790792202, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 20, 52, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593918654, 'issue_id': 2790792202, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 20, 56, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593918723, 'issue_id': 2790792202, 'author': 'robodoo', 'body': '@william-andre you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 15, 20, 56, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594428665, 'issue_id': 2790792202, 'author': 'robodoo', 'body': '@muab-odoo @william-andre linked pull request(s) odoo/enterprise#77217 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 16, 4, 0, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:24:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193863.png)](https://mergebot.odoo.com/odoo/odoo/pull/193863)

fw-bot (Issue Creator) on (2025-01-15 20:24:38 UTC): @muab-odoo @william-andre this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193850

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 20:52:58 UTC): @muab-odoo @william-andre ci/runbot failed on this forward-port PR

william-andre on (2025-01-15 20:56:45 UTC): @robodoo r+

robodoo on (2025-01-15 20:56:47 UTC): @william-andre you may want to rebuild or fix this PR as it has failed CI.

robodoo on (2025-01-16 04:00:10 UTC): @muab-odoo @william-andre linked pull request(s) odoo/enterprise#77217 not ready. Linked PRs are not staged until all of them are ready.

"
2790790920,pull_request,closed,,"[FW][FIX] core: http.route ""methods"" accepts any Iterable","The docstring of `@route` states that it accepts any iterable for the `methods` argument, but several places in the source code wrongly expected a list, and break if it is a tuple.

Forward-Port-Of: odoo/odoo#193733
Forward-Port-Of: odoo/odoo#193621",fw-bot,2025-01-15 20:24:11+00:00,[],2025-02-03 18:30:18+00:00,2025-01-20 18:13:10+00:00,https://github.com/odoo/odoo/pull/193862,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593861534, 'issue_id': 2790790920, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193862.png)](https://mergebot.odoo.com/odoo/odoo/pull/193862)', 'created_at': datetime.datetime(2025, 1, 15, 20, 24, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593861551, 'issue_id': 2790790920, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 24, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594001843, 'issue_id': 2790790920, 'author': 'fw-bot', 'body': '@Julien00859 the next pull request (odoo/odoo#193869) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 21, 44, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595931039, 'issue_id': 2790790920, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 49, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596061653, 'issue_id': 2790790920, 'author': 'robodoo', 'body': '@Julien00859 staging failed: ci/runbot on 0812b7489ac321ee7cab44bc0c1536e2fa936be8 (view more at https://runbot.odoo.com/runbot/build/73463774)', 'created_at': datetime.datetime(2025, 1, 16, 15, 41, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600462769, 'issue_id': 2790790920, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173179, 'issue_id': 2790790920, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602782950, 'issue_id': 2790790920, 'author': 'rco-odoo', 'body': 'robodoo override=ci/security\r\n\r\nReason: test route', 'created_at': datetime.datetime(2025, 1, 20, 16, 0, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602785389, 'issue_id': 2790790920, 'author': 'rco-odoo', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 20, 16, 1, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:24:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193862.png)](https://mergebot.odoo.com/odoo/odoo/pull/193862)

fw-bot (Issue Creator) on (2025-01-15 20:24:13 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 21:44:28 UTC): @Julien00859 the next pull request (odoo/odoo#193869) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Julien00859 on (2025-01-16 14:49:43 UTC): @robodoo r+

robodoo on (2025-01-16 15:41:14 UTC): @Julien00859 staging failed: ci/runbot on 0812b7489ac321ee7cab44bc0c1536e2fa936be8 (view more at https://runbot.odoo.com/runbot/build/73463774)

fw-bot (Issue Creator) on (2025-01-19 02:01:30 UTC): @Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:29 UTC): @Julien00859 this forward port of odoo/odoo#193621 is awaiting action (not merged or closed).

rco-odoo on (2025-01-20 16:00:37 UTC): robodoo override=ci/security

Reason: test route

rco-odoo on (2025-01-20 16:01:40 UTC): robodoo retry

"
2790787270,pull_request,closed,,[FW][FIX] stock_landed_costs: round down in cost split,"**Current behavior:**
The rounding applied during the cost split of a landed cost's
cost computation can yield undesirable/unexpected results.

**Expected behavior:**
Sensible rounding.

**Steps to reproduce:**
1. Create some product with arbitrary cost, with avg and
real_time costing and valuation, respectively

2. Create a purchase order with 6 lines, all for that product

3. Confirm order & receive products, create bill and add a
landed cost line with cost=6.85

4. Post bill and create the landed cost:
* link to the receipt
* set split method to `equal`

5. Validate the LC, see that the val adjustment lines are
rounded unexpectedly- *specifically all the lines are rounded up
(beyond the per-adjustment-line value) which means the final
adjustment line cost-split share will reflect the cumulative
rounding loss of every adjustment line rounded prior*
E.g.,
<pre>
[ 1.15, 1.15, 1.15, 1.15, 1.15, 1.11 ]
                                  ^
</pre>

**Cause of the issue:**
We currently use `rounding_method='UP'`.

**Fix:**
Round HALF-UP. This will minimize the difference between the
true, unrounded split-value and the post-rounding value.

Semi-related fix: try to use consistent `ResCurrency.round()`
methods between `compute_landed_cost()` and `_check_sum()`.

opw-4200916

Forward-Port-Of: odoo/odoo#190449",fw-bot,2025-01-15 20:22:34+00:00,[],2025-01-31 13:55:58+00:00,2025-01-17 13:51:40+00:00,https://github.com/odoo/odoo/pull/193861,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593858929, 'issue_id': 2790787270, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193861.png)](https://mergebot.odoo.com/odoo/odoo/pull/193861)', 'created_at': datetime.datetime(2025, 1, 15, 20, 22, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593858949, 'issue_id': 2790787270, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 22, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593902816, 'issue_id': 2790787270, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 20, 47, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597929223, 'issue_id': 2790787270, 'author': 'fw-bot', 'body': '@ethanrobv @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 10, 32, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598191468, 'issue_id': 2790787270, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 11, 48, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:22:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193861.png)](https://mergebot.odoo.com/odoo/odoo/pull/193861)

fw-bot (Issue Creator) on (2025-01-15 20:22:36 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 20:47:13 UTC): @ethanrobv @clesgow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 10:32:41 UTC): @ethanrobv @clesgow this PR was modified / updated and has become a normal PR. It must be merged directly.

clesgow on (2025-01-17 11:48:11 UTC): @robodoo r+

"
2790782322,pull_request,closed,,[FW][IMP] l10n_be: improve/add deductible taxes,"For Belgium, combination of taxes and their deductibility are many. While our system of Distribution lines can be used in many cases, it's not easy or intuitive to configure, even for advanced accountants.

This commit aims at making sure:
- The most useful taxes are active by default
- We provide a few examples of the most commonly used Deductible taxes as well as examples of specific cases (Deductible IntraCom taxes).

task-id 4417039

Forward-Port-Of: odoo/odoo#191350",fw-bot,2025-01-15 20:20:34+00:00,[],2025-01-31 15:34:04+00:00,2025-01-17 15:28:49+00:00,https://github.com/odoo/odoo/pull/193860,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593855674, 'issue_id': 2790782322, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193860.png)](https://mergebot.odoo.com/odoo/odoo/pull/193860)', 'created_at': datetime.datetime(2025, 1, 15, 20, 20, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593855745, 'issue_id': 2790782322, 'author': 'fw-bot', 'body': '@RicGR98 @h4818 cherrypicking of pull request odoo/odoo#191350 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_be/data/template/account.tax-be.csv\nCONFLICT (content): Merge conflict in addons/l10n_be/data/template/account.tax-be.csv\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 20, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598287686, 'issue_id': 2790782322, 'author': 'RicGR98', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 43, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:20:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193860.png)](https://mergebot.odoo.com/odoo/odoo/pull/193860)

fw-bot (Issue Creator) on (2025-01-15 20:20:37 UTC): @RicGR98 @h4818 cherrypicking of pull request odoo/odoo#191350 failed.

stdout:
```
Auto-merging addons/l10n_be/data/template/account.tax-be.csv
CONFLICT (content): Merge conflict in addons/l10n_be/data/template/account.tax-be.csv

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

RicGR98 on (2025-01-17 12:43:49 UTC): @robodoo r+

"
2790781866,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#193777
Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-15 20:20:17+00:00,[],2025-01-30 07:13:24+00:00,2025-01-16 07:09:10+00:00,https://github.com/odoo/odoo/pull/193859,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593855193, 'issue_id': 2790781866, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193859.png)](https://mergebot.odoo.com/odoo/odoo/pull/193859)', 'created_at': datetime.datetime(2025, 1, 15, 20, 20, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593855207, 'issue_id': 2790781866, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 20, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:20:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193859.png)](https://mergebot.odoo.com/odoo/odoo/pull/193859)

fw-bot (Issue Creator) on (2025-01-15 20:20:18 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790766063,pull_request,closed,,"[FW][FIX] mrp{,_subcontracting_purchase}: make MO date set consistent","**Current behavior:**
Having some product with a subcontract BoM and using the unarchived 'Subcontract' picking type and creating a purchase order to the subcontractor for that product: changing the `scheduled_date` of the generated receipt will improperly set the start/end date on the subcontracting MO which was generated alongside the receipt.

Specifically, the `scheduled_date` of the receipt should correspond to the `date_finished` of the MO- however currently it is incorrectly modifying the MO `date_start` instead.

**Expected behavior:**
Modifying `scheduled_date` on the receipt will in turn modify the `date_finished` of the MO.

**Steps to reproduce:**
*Unarchive the Subcontract picking type operation*
1. Create a final product with a subcontract type BoM, on the BoM set some positive value for Manuf. Lead Time (in miscellaneous tab)

2. Create a purchase order to the subcontractor for that product

3. Confirm the PO -> observe that on creation, the scheduled date of the receipt matches the end date of the MO

4. Change the scheduled date of the receipt (for example, 10 days in the future) -> observe that after saving, the MO date correspondence is inverted (end date = scheduled date + lead time) instead of the start date being set with respect to the end time (like on creation), the end date gets set with respect to the start date

**Cause of the issue:**
It's an inconsistency with how the fields (start, end) are calculated and when.

**Fix:**
Make this case behave the same as the creation does- that is, end date is informed by the receipt's scheduled date and the start date of the MO is set by subtracting the lead time from there.

opw-4231548

Forward-Port-Of: odoo/odoo#188389",fw-bot,2025-01-15 20:14:08+00:00,[],2025-01-31 11:44:16+00:00,2025-01-17 11:26:25+00:00,https://github.com/odoo/odoo/pull/193858,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593845091, 'issue_id': 2790766063, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193858.png)](https://mergebot.odoo.com/odoo/odoo/pull/193858)', 'created_at': datetime.datetime(2025, 1, 15, 20, 14, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593845107, 'issue_id': 2790766063, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 14, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597818266, 'issue_id': 2790766063, 'author': 'ethanrobv', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 37, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:14:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193858.png)](https://mergebot.odoo.com/odoo/odoo/pull/193858)

fw-bot (Issue Creator) on (2025-01-15 20:14:10 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ethanrobv on (2025-01-17 09:37:31 UTC): @robodoo r+

"
2790764544,pull_request,closed,,[FW][IMP] website: allow to bypass the website domain redirection,"When we go to the website preview in the Odoo backend, if the current domain used (to access the backend) is not the same as the one of the previewed website, we redirect the user, and he might have to reconnect. The same is done when using the website switcher.
Note: in the first case, the user is warned. We should probably do the same for the second case (?).

This is a problem for the Odoo support team. When they connect to a customer database upon user request, the <customer_db_name>.odoo.com address is used. But as soon as they are using the website app, they are redirected to the real website domains... where they are disconnected and cannot connect themselves.
To fix this issue, we allow setting up a session info parameter to bypass those website redirections. This is not to be done by real users: this will come with bugs (for the support team). Indeed, we are normally redirecting for a reason: many flows rely on using the right domain when visiting a specific website. Depending on what users have in their page, this could also simply make the website preview iframe crash.

task-4069779

Forward-Port-Of: odoo/odoo#193648
Forward-Port-Of: odoo/odoo#193122",fw-bot,2025-01-15 20:13:32+00:00,[],2025-01-31 15:34:07+00:00,2025-01-17 15:29:10+00:00,https://github.com/odoo/odoo/pull/193857,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593844091, 'issue_id': 2790764544, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193857.png)](https://mergebot.odoo.com/odoo/odoo/pull/193857)', 'created_at': datetime.datetime(2025, 1, 15, 20, 13, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593844110, 'issue_id': 2790764544, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 13, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593916034, 'issue_id': 2790764544, 'author': 'fw-bot', 'body': '@qsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 20, 55, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598013230, 'issue_id': 2790764544, 'author': 'fw-bot', 'body': '@qsm-odoo the next pull request (odoo/odoo#194109) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 17, 10, 47, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:13:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193857.png)](https://mergebot.odoo.com/odoo/odoo/pull/193857)

fw-bot (Issue Creator) on (2025-01-15 20:13:34 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 20:55:07 UTC): @qsm-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-17 10:47:48 UTC): @qsm-odoo the next pull request (odoo/odoo#194109) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790754184,pull_request,closed,,[FW][FIX] hw_drivers: wrong foot pedal name,"Devices detected through usb don't always have there manufactured and product name which can be retrieved.
For example, our foot pedal in the office doesn't which leads to it having a name `""None - None""` in Odoo.

After this PR if a device doesn't have a product name / manufacturer name it will be saved as `""Unknown input device""`

task-4472585

Forward-Port-Of: odoo/odoo#193295
Forward-Port-Of: odoo/odoo#193277",fw-bot,2025-01-15 20:09:27+00:00,[],2025-01-30 12:41:29+00:00,2025-01-16 12:08:10+00:00,https://github.com/odoo/odoo/pull/193856,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593837379, 'issue_id': 2790754184, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193856.png)](https://mergebot.odoo.com/odoo/odoo/pull/193856)', 'created_at': datetime.datetime(2025, 1, 15, 20, 9, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593837398, 'issue_id': 2790754184, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 9, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 20:09:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193856.png)](https://mergebot.odoo.com/odoo/odoo/pull/193856)

fw-bot (Issue Creator) on (2025-01-15 20:09:29 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790729974,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#193610
Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-15 19:59:41+00:00,[],2025-01-30 16:38:24+00:00,2025-01-16 16:33:35+00:00,https://github.com/odoo/odoo/pull/193855,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593820971, 'issue_id': 2790729974, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193855.png)](https://mergebot.odoo.com/odoo/odoo/pull/193855)', 'created_at': datetime.datetime(2025, 1, 15, 19, 59, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593820992, 'issue_id': 2790729974, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 19, 59, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 19:59:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193855.png)](https://mergebot.odoo.com/odoo/odoo/pull/193855)

fw-bot (Issue Creator) on (2025-01-15 19:59:43 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790628693,pull_request,closed,,"[FW][FIX] sale, sale_expense: prevent creation of tax line","Steps to reproduce:
[l10n_dk]
- create and confirm a sale order
- create an expense for a new employee and use a product set with reinvoice at cost and a tax with multiple repartition lines
- confirm and process the expense
- post journal entries

Issue:
Missing required fields on accountable sale order line.

Cause:
We want to reinvoice the tax line that no product on it

opw-4378714

Forward-Port-Of: odoo/odoo#193036
Forward-Port-Of: odoo/odoo#191163",fw-bot,2025-01-15 19:05:38+00:00,[],2025-02-04 13:06:10+00:00,2025-01-21 12:56:16+00:00,https://github.com/odoo/odoo/pull/193853,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593730118, 'issue_id': 2790628693, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193853.png)](https://mergebot.odoo.com/odoo/odoo/pull/193853)', 'created_at': datetime.datetime(2025, 1, 15, 19, 5, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593730193, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo cherrypicking of pull request odoo/odoo#191163 failed.\n\nstdout:\n```\nAuto-merging addons/sale_expense/tests/test_reinvoice.py\nCONFLICT (content): Merge conflict in addons/sale_expense/tests/test_reinvoice.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 19, 5, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313533, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278373, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468888, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600468419, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476656, 'issue_id': 2790628693, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604258146, 'issue_id': 2790628693, 'author': 'yosa-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 10, 12, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 19:05:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193853.png)](https://mergebot.odoo.com/odoo/odoo/pull/193853)

fw-bot (Issue Creator) on (2025-01-15 19:05:42 UTC): @yosa-odoo @oco-odoo cherrypicking of pull request odoo/odoo#191163 failed.

stdout:
```
Auto-merging addons/sale_expense/tests/test_reinvoice.py
CONFLICT (content): Merge conflict in addons/sale_expense/tests/test_reinvoice.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:26 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:01:17 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:01:26 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:14 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:51 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

yosa-odoo on (2025-01-21 10:12:05 UTC): robodoo r+

"
2790619237,pull_request,closed,,"[FW][FIX] mrp{,_subcontracting_purchase}: make MO date set consistent","**Current behavior:**
Having some product with a subcontract BoM and using the unarchived 'Subcontract' picking type and creating a purchase order to the subcontractor for that product: changing the `scheduled_date` of the generated receipt will improperly set the start/end date on the subcontracting MO which was generated alongside the receipt.

Specifically, the `scheduled_date` of the receipt should correspond to the `date_finished` of the MO- however currently it is incorrectly modifying the MO `date_start` instead.

**Expected behavior:**
Modifying `scheduled_date` on the receipt will in turn modify the `date_finished` of the MO.

**Steps to reproduce:**
*Unarchive the Subcontract picking type operation*
1. Create a final product with a subcontract type BoM, on the BoM set some positive value for Manuf. Lead Time (in miscellaneous tab)

2. Create a purchase order to the subcontractor for that product

3. Confirm the PO -> observe that on creation, the scheduled date of the receipt matches the end date of the MO

4. Change the scheduled date of the receipt (for example, 10 days in the future) -> observe that after saving, the MO date correspondence is inverted (end date = scheduled date + lead time) instead of the start date being set with respect to the end time (like on creation), the end date gets set with respect to the start date

**Cause of the issue:**
It's an inconsistency with how the fields (start, end) are calculated and when.

**Fix:**
Make this case behave the same as the creation does- that is, end date is informed by the receipt's scheduled date and the start date of the MO is set by subtracting the lead time from there.

opw-4231548

Forward-Port-Of: odoo/odoo#188389",fw-bot,2025-01-15 19:01:33+00:00,[],2025-01-31 11:14:21+00:00,2025-01-17 11:02:14+00:00,https://github.com/odoo/odoo/pull/193852,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593723154, 'issue_id': 2790619237, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193852.png)](https://mergebot.odoo.com/odoo/odoo/pull/193852)', 'created_at': datetime.datetime(2025, 1, 15, 19, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593723176, 'issue_id': 2790619237, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 19, 1, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 19:01:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193852.png)](https://mergebot.odoo.com/odoo/odoo/pull/193852)

fw-bot (Issue Creator) on (2025-01-15 19:01:35 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790617852,pull_request,closed,,[FW][FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193531",fw-bot,2025-01-15 19:00:55+00:00,[],2025-01-30 12:41:36+00:00,2025-01-16 12:29:09+00:00,https://github.com/odoo/odoo/pull/193851,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593722068, 'issue_id': 2790617852, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193851.png)](https://mergebot.odoo.com/odoo/odoo/pull/193851)', 'created_at': datetime.datetime(2025, 1, 15, 19, 0, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593722093, 'issue_id': 2790617852, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193830\n* odoo/odoo#193813\n* odoo/odoo#193795\n* odoo/odoo#193767\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 19, 0, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594996138, 'issue_id': 2790617852, 'author': 'amoyaux', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 27, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 19:00:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193851.png)](https://mergebot.odoo.com/odoo/odoo/pull/193851)

fw-bot (Issue Creator) on (2025-01-15 19:00:57 UTC): @amoyaux @Whenrow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193830
* odoo/odoo#193813
* odoo/odoo#193795
* odoo/odoo#193767

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

amoyaux on (2025-01-16 09:27:16 UTC): @robodoo r+

"
2790613514,pull_request,closed,,[FW][IMP] l10n_it: Split Periodic & Annual Tax Reports,"Description of the issue this commit addresses:

The Italian tax report lacks clarity and can be improved both in readabilty and
usability by splitting the monthly and the annual reports.

---

Desired behavior after this commit is merged:

The Italian tax report is now split in a monthly and an annual report.
The report uses the sections mechanism to be split in the different parts it is
made from and clean the UI by not having everything on the same sreen.

---

Enterprise PR: https://github.com/odoo/enterprise/pull/62405
Task-3479785

---

I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193662
Forward-Port-Of: odoo/odoo#164064",fw-bot,2025-01-15 18:58:56+00:00,[],2025-01-30 01:00:10+00:00,2025-01-16 00:32:39+00:00,https://github.com/odoo/odoo/pull/193850,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593718193, 'issue_id': 2790613514, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193850.png)](https://mergebot.odoo.com/odoo/odoo/pull/193850)', 'created_at': datetime.datetime(2025, 1, 15, 18, 58, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593718298, 'issue_id': 2790613514, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:58:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193850.png)](https://mergebot.odoo.com/odoo/odoo/pull/193850)

fw-bot (Issue Creator) on (2025-01-15 18:59:00 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790611583,pull_request,closed,,[FW][FIX] stock: cancel move upstream,"Currently the different documents are responsible on the move's cancelation. E.g. cancel a SO will delete all the pickings with the same procurement group. Cancel a PO will cancel the receipt an all the moves destination.

But in inter company transaction or inter warehouse. The source document is a stock.move directly (or a rr but it's already unlink) Some users delete the receipt from another warehouse but the delivery on the other still exists. So it let pickings that are never cancel in other companies/warehouses.

This commit and an option to allow the cancel propagate upstream. It's hidden under the `stock.cancel_moves_origin` system parameter in order to avoid a huge behavior modification for other users.

opw-3274939

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#186730",fw-bot,2025-01-15 18:58:09+00:00,[],2025-02-07 12:38:46+00:00,2025-01-24 12:28:26+00:00,https://github.com/odoo/odoo/pull/193849,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593716406, 'issue_id': 2790611583, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193849.png)](https://mergebot.odoo.com/odoo/odoo/pull/193849)', 'created_at': datetime.datetime(2025, 1, 15, 18, 58, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593716425, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow cherrypicking of pull request odoo/odoo#186730 failed.\n\n* f72251e83fd21a234cbf475d3f1b41df8deb85f1 <- on this commit\n* ab392c5172433d7f9b8de56abf7a13b23319051f\n\nstdout:\n```\nAuto-merging addons/stock/models/stock_move.py\nCONFLICT (content): Merge conflict in addons/stock/models/stock_move.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 58, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600471438, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174609, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477070, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606120219, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 2, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689762, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611386162, 'issue_id': 2790611583, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612208793, 'issue_id': 2790611583, 'author': 'Whenrow', 'body': 'robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 1, 24, 10, 39, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612208860, 'issue_id': 2790611583, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 24, 10, 39, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:58:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193849.png)](https://mergebot.odoo.com/odoo/odoo/pull/193849)

fw-bot (Issue Creator) on (2025-01-15 18:58:11 UTC): @amoyaux @Whenrow cherrypicking of pull request odoo/odoo#186730 failed.

* f72251e83fd21a234cbf475d3f1b41df8deb85f1 <- on this commit
* ab392c5172433d7f9b8de56abf7a13b23319051f

stdout:
```
Auto-merging addons/stock/models/stock_move.py
CONFLICT (content): Merge conflict in addons/stock/models/stock_move.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:02:33 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:39 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:16 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:02:12 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:41 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:35 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

Whenrow on (2025-01-24 10:39:10 UTC): robodoo r+ rebase-ff

robodoo on (2025-01-24 10:39:12 UTC): Merge method set to rebase and fast-forward.

"
2790611034,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#193777
Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-15 18:57:50+00:00,[],2025-01-30 07:08:09+00:00,2025-01-16 07:07:40+00:00,https://github.com/odoo/odoo/pull/193848,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593715882, 'issue_id': 2790611034, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193848.png)](https://mergebot.odoo.com/odoo/odoo/pull/193848)', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593715913, 'issue_id': 2790611034, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:57:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193848.png)](https://mergebot.odoo.com/odoo/odoo/pull/193848)

fw-bot (Issue Creator) on (2025-01-15 18:57:52 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790610538,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193779
Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-15 18:57:33+00:00,[],2025-01-30 01:00:09+00:00,2025-01-15 23:50:16+00:00,https://github.com/odoo/odoo/pull/193847,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593715454, 'issue_id': 2790610538, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193847.png)](https://mergebot.odoo.com/odoo/odoo/pull/193847)', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593715475, 'issue_id': 2790610538, 'author': 'fw-bot', 'body': '@pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.\n\nstdout:\n```\nAuto-merging odoo/tests/common.py\nCONFLICT (content): Merge conflict in odoo/tests/common.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593970836, 'issue_id': 2790610538, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 21, 27, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:57:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193847.png)](https://mergebot.odoo.com/odoo/odoo/pull/193847)

fw-bot (Issue Creator) on (2025-01-15 18:57:35 UTC): @pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.

stdout:
```
Auto-merging odoo/tests/common.py
CONFLICT (content): Merge conflict in odoo/tests/common.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-15 21:27:04 UTC): @robodoo r+

"
2790610066,pull_request,closed,,"[FW][FIX] core: http.route ""methods"" accepts any Iterable","The docstring of `@route` states that it accepts any iterable for the `methods` argument, but several places in the source code wrongly expected a list, and break if it is a tuple.

Forward-Port-Of: odoo/odoo#193733
Forward-Port-Of: odoo/odoo#193621",fw-bot,2025-01-15 18:57:15+00:00,[],2025-01-30 17:46:38+00:00,2025-01-16 17:38:33+00:00,https://github.com/odoo/odoo/pull/193846,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593714940, 'issue_id': 2790610066, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193846.png)](https://mergebot.odoo.com/odoo/odoo/pull/193846)', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593714954, 'issue_id': 2790610066, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:57:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193846.png)](https://mergebot.odoo.com/odoo/odoo/pull/193846)

fw-bot (Issue Creator) on (2025-01-15 18:57:17 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790609619,pull_request,closed,,[FW][FIX] stock_landed_costs: round down in cost split,"**Current behavior:**
The rounding applied during the cost split of a landed cost's
cost computation can yield undesirable/unexpected results.

**Expected behavior:**
Sensible rounding.

**Steps to reproduce:**
1. Create some product with arbitrary cost, with avg and
real_time costing and valuation, respectively

2. Create a purchase order with 6 lines, all for that product

3. Confirm order & receive products, create bill and add a
landed cost line with cost=6.85

4. Post bill and create the landed cost:
* link to the receipt
* set split method to `equal`

5. Validate the LC, see that the val adjustment lines are
rounded unexpectedly- *specifically all the lines are rounded up
(beyond the per-adjustment-line value) which means the final
adjustment line cost-split share will reflect the cumulative
rounding loss of every adjustment line rounded prior*
E.g.,
<pre>
[ 1.15, 1.15, 1.15, 1.15, 1.15, 1.11 ]
                                  ^
</pre>

**Cause of the issue:**
We currently use `rounding_method='UP'`.

**Fix:**
Round HALF-UP. This will minimize the difference between the
true, unrounded split-value and the post-rounding value.

Semi-related fix: try to use consistent `ResCurrency.round()`
methods between `compute_landed_cost()` and `_check_sum()`.

opw-4200916

Forward-Port-Of: odoo/odoo#190449",fw-bot,2025-01-15 18:56:57+00:00,[],2025-01-31 15:10:41+00:00,2025-01-17 15:08:09+00:00,https://github.com/odoo/odoo/pull/193845,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593714685, 'issue_id': 2790609619, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193845.png)](https://mergebot.odoo.com/odoo/odoo/pull/193845)', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593714742, 'issue_id': 2790609619, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 57, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597929274, 'issue_id': 2790609619, 'author': 'fw-bot', 'body': ""@ethanrobv @clesgow child PR odoo/odoo#193861 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 17, 10, 32, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597931983, 'issue_id': 2790609619, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 34, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:57:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193845.png)](https://mergebot.odoo.com/odoo/odoo/pull/193845)

fw-bot (Issue Creator) on (2025-01-15 18:57:10 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 10:32:42 UTC): @ethanrobv @clesgow child PR odoo/odoo#193861 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

clesgow on (2025-01-17 10:34:04 UTC): @robodoo r+

"
2790608899,pull_request,closed,,[FW][IMP] website: allow to bypass the website domain redirection,"When we go to the website preview in the Odoo backend, if the current domain used (to access the backend) is not the same as the one of the previewed website, we redirect the user, and he might have to reconnect. The same is done when using the website switcher.
Note: in the first case, the user is warned. We should probably do the same for the second case (?).

This is a problem for the Odoo support team. When they connect to a customer database upon user request, the <customer_db_name>.odoo.com address is used. But as soon as they are using the website app, they are redirected to the real website domains... where they are disconnected and cannot connect themselves.
To fix this issue, we allow setting up a session info parameter to bypass those website redirections. This is not to be done by real users: this will come with bugs (for the support team). Indeed, we are normally redirecting for a reason: many flows rely on using the right domain when visiting a specific website. Depending on what users have in their page, this could also simply make the website preview iframe crash.

task-4069779

Forward-Port-Of: odoo/odoo#193648
Forward-Port-Of: odoo/odoo#193122",fw-bot,2025-01-15 18:56:30+00:00,[],2025-01-31 16:56:30+00:00,2025-01-17 16:37:16+00:00,https://github.com/odoo/odoo/pull/193844,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593713628, 'issue_id': 2790608899, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193844.png)](https://mergebot.odoo.com/odoo/odoo/pull/193844)', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593713648, 'issue_id': 2790608899, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:56:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193844.png)](https://mergebot.odoo.com/odoo/odoo/pull/193844)

fw-bot (Issue Creator) on (2025-01-15 18:56:32 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790608431,pull_request,closed,,[FW][IMP] l10n_be: improve/add deductible taxes,"For Belgium, combination of taxes and their deductibility are many. While our system of Distribution lines can be used in many cases, it's not easy or intuitive to configure, even for advanced accountants.

This commit aims at making sure:
- The most useful taxes are active by default
- We provide a few examples of the most commonly used Deductible taxes as well as examples of specific cases (Deductible IntraCom taxes).

task-id 4417039

Forward-Port-Of: odoo/odoo#191350",fw-bot,2025-01-15 18:56:13+00:00,[],2025-01-31 15:10:41+00:00,2025-01-17 15:08:05+00:00,https://github.com/odoo/odoo/pull/193843,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593713154, 'issue_id': 2790608431, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193843.png)](https://mergebot.odoo.com/odoo/odoo/pull/193843)', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593713186, 'issue_id': 2790608431, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593855696, 'issue_id': 2790608431, 'author': 'fw-bot', 'body': '@RicGR98 @h4818 the next pull request (odoo/odoo#193860) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 20, 20, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597905882, 'issue_id': 2790608431, 'author': 'RicGR98', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 20, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:56:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193843.png)](https://mergebot.odoo.com/odoo/odoo/pull/193843)

fw-bot (Issue Creator) on (2025-01-15 18:56:15 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 20:20:35 UTC): @RicGR98 @h4818 the next pull request (odoo/odoo#193860) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

RicGR98 on (2025-01-17 10:20:42 UTC): @robodoo r+

"
2790607918,pull_request,closed,,[FW][FIX] account: draft bill entries in partner ledger,"### Before
When creating a new vendor bill through Vendors > 'Example Vendor 1'> Vendor Bills (magic button), if the vendor was changed to 'Example Vendor 2' and the draft saved then it would show up under the 'Example Vendor 1' in the Partner Ledger instead of under the correct 'Example Vendor 2'. 

This is due to the partner_id being defined in the context when going through the 'Example Vendor 1' view. 

### Now
During the creation of the account move lines we use a context without the default_partner_id.

The Partner Ledger now shows the draft bill entry under the right vendor.

opw-4407709

Forward-Port-Of: odoo/odoo#193629
Forward-Port-Of: odoo/odoo#192567",fw-bot,2025-01-15 18:55:54+00:00,[],2025-01-30 17:46:40+00:00,2025-01-16 17:38:42+00:00,https://github.com/odoo/odoo/pull/193842,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593712966, 'issue_id': 2790607918, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193842.png)](https://mergebot.odoo.com/odoo/odoo/pull/193842)', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593712999, 'issue_id': 2790607918, 'author': 'fw-bot', 'body': '@aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_move.py\nCONFLICT (content): Merge conflict in addons/account/models/account_move.py\nAuto-merging addons/account/tests/test_account_move_out_invoice.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596022665, 'issue_id': 2790607918, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 15, 25, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:56:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193842.png)](https://mergebot.odoo.com/odoo/odoo/pull/193842)

fw-bot (Issue Creator) on (2025-01-15 18:56:08 UTC): @aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.

stdout:
```
Auto-merging addons/account/models/account_move.py
CONFLICT (content): Merge conflict in addons/account/models/account_move.py
Auto-merging addons/account/tests/test_account_move_out_invoice.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-16 15:25:32 UTC): @robodoo r+

"
2790607413,pull_request,closed,,[FW][FIX] hw_drivers: wrong foot pedal name,"Devices detected through usb don't always have there manufactured and product name which can be retrieved.
For example, our foot pedal in the office doesn't which leads to it having a name `""None - None""` in Odoo.

After this PR if a device doesn't have a product name / manufacturer name it will be saved as `""Unknown input device""`

task-4472585

Forward-Port-Of: odoo/odoo#193295
Forward-Port-Of: odoo/odoo#193277",fw-bot,2025-01-15 18:55:36+00:00,[],2025-01-30 12:41:16+00:00,2025-01-16 11:55:50+00:00,https://github.com/odoo/odoo/pull/193841,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593712919, 'issue_id': 2790607413, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193841.png)](https://mergebot.odoo.com/odoo/odoo/pull/193841)', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593712943, 'issue_id': 2790607413, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 56, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:56:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193841.png)](https://mergebot.odoo.com/odoo/odoo/pull/193841)

fw-bot (Issue Creator) on (2025-01-15 18:56:07 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790592409,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#193610
Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-15 18:47:38+00:00,[],2025-01-30 13:45:52+00:00,2025-01-16 13:25:50+00:00,https://github.com/odoo/odoo/pull/193840,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593697940, 'issue_id': 2790592409, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193840.png)](https://mergebot.odoo.com/odoo/odoo/pull/193840)', 'created_at': datetime.datetime(2025, 1, 15, 18, 47, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593697961, 'issue_id': 2790592409, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 47, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:47:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193840.png)](https://mergebot.odoo.com/odoo/odoo/pull/193840)

fw-bot (Issue Creator) on (2025-01-15 18:47:39 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790540542,pull_request,closed,,[FW][FIX] hr_recruitment: action_unarchive does not return recordset,"The `action_unarchive` returns None by default. Rollback the change from odoo/odoo#183691 on this file which is incorrect.

task-4453279

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193171",fw-bot,2025-01-15 18:19:19+00:00,[],2025-01-16 08:04:07+00:00,2025-01-16 04:39:52+00:00,https://github.com/odoo/odoo/pull/193839,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593646735, 'issue_id': 2790540542, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193839.png)](https://mergebot.odoo.com/odoo/odoo/pull/193839)', 'created_at': datetime.datetime(2025, 1, 15, 18, 19, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593646751, 'issue_id': 2790540542, 'author': 'fw-bot', 'body': '@kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 19, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593795411, 'issue_id': 2790540542, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 19, 44, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:19:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193839.png)](https://mergebot.odoo.com/odoo/odoo/pull/193839)

fw-bot (Issue Creator) on (2025-01-15 18:19:21 UTC): @kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-15 19:44:40 UTC): @robodoo r+

"
2790539668,pull_request,closed,,[FW][FIX] resource_mail: added wrench icon for many2one_avatar_resource,"Steps to reproduce:

- Open planning app and click on New.
- A form is opened and searched for a material resource in the Resource field ex. Crane
- An empty photo icon is displayed in the selection bar.

Issue:

- An empty photo icon is being displayed instead of a wrench.

Cause:

- Many2XAutocomplete which adds an image in the many2one selection field is not modified to display
- the wrench icon in the many2one_avatar_resource_field.

Solution:

- A similar modification is done in many2many_avatar_resource_field through class which extends Many2XAutocomplete which can be imported and added into components of many2one_avatar_resource_field.

fix the alignment between of icon and text in many2many_avatar_resource.

task-3801551

Forward-Port-Of: odoo/odoo#193446
Forward-Port-Of: odoo/odoo#157968",fw-bot,2025-01-15 18:19:00+00:00,[],2025-01-30 09:03:12+00:00,2025-01-16 08:49:01+00:00,https://github.com/odoo/odoo/pull/193838,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593646172, 'issue_id': 2790539668, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193838.png)](https://mergebot.odoo.com/odoo/odoo/pull/193838)', 'created_at': datetime.datetime(2025, 1, 15, 18, 19, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593646214, 'issue_id': 2790539668, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 19, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593698092, 'issue_id': 2790539668, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 18, 47, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594314018, 'issue_id': 2790539668, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594531530, 'issue_id': 2790539668, 'author': 'kthe-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 4, 51, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594531717, 'issue_id': 2790539668, 'author': 'robodoo', 'body': '@kthe-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 4, 51, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594590408, 'issue_id': 2790539668, 'author': 'kthe-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 5, 50, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594590454, 'issue_id': 2790539668, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 16, 5, 50, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594591089, 'issue_id': 2790539668, 'author': 'kthe-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 16, 5, 51, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594591134, 'issue_id': 2790539668, 'author': 'robodoo', 'body': '@kthe-odoo retry makes no sense when the PR is not in error.', 'created_at': datetime.datetime(2025, 1, 16, 5, 51, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:19:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193838.png)](https://mergebot.odoo.com/odoo/odoo/pull/193838)

fw-bot (Issue Creator) on (2025-01-15 18:19:04 UTC): @kthe-odoo @xavierbol this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:47:44 UTC): @kthe-odoo @xavierbol ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 02:01:49 UTC): @kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).

kthe-odoo on (2025-01-16 04:51:44 UTC): @robodoo r+

robodoo on (2025-01-16 04:51:46 UTC): @kthe-odoo you may want to rebuild or fix this PR as it has failed CI.

kthe-odoo on (2025-01-16 05:50:37 UTC): @robodoo r+

robodoo on (2025-01-16 05:50:39 UTC): This PR is already reviewed, reviewing it again is useless.

kthe-odoo on (2025-01-16 05:51:14 UTC): @robodoo retry

robodoo on (2025-01-16 05:51:17 UTC): @kthe-odoo retry makes no sense when the PR is not in error.

"
2790538660,pull_request,closed,,[FW][FIX] mail: error on mention click by guest,"Purpose of this commit:
When an operator mentions someone in an ongoing live chat conversation and the guest clicks on it, a traceback error is raised. This occurs because clicking on the mention attempts to execute an action to open the mentioned partner's record. Since the guest user lacks access to the action services in the services registry, the error is triggered. This commit resolves the issue.

task-4459050





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193600
Forward-Port-Of: odoo/odoo#192834",fw-bot,2025-01-15 18:18:34+00:00,[],2025-01-16 09:06:34+00:00,2025-01-16 08:48:57+00:00,https://github.com/odoo/odoo/pull/193837,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593645372, 'issue_id': 2790538660, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193837.png)](https://mergebot.odoo.com/odoo/odoo/pull/193837)', 'created_at': datetime.datetime(2025, 1, 15, 18, 18, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593645391, 'issue_id': 2790538660, 'author': 'fw-bot', 'body': '@maad-odoo @alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 18, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594340539, 'issue_id': 2790538660, 'author': 'maad-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 2, 28, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:18:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193837.png)](https://mergebot.odoo.com/odoo/odoo/pull/193837)

fw-bot (Issue Creator) on (2025-01-15 18:18:36 UTC): @maad-odoo @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

maad-odoo on (2025-01-16 02:28:21 UTC): @robodoo r+

"
2790538080,pull_request,closed,,[FW][IMP] im_livechat: add continue button when chat bot is done,"When the chat bot is completed, the visitor is in a dead-end. He
can either restart the script, or close the chat window. This PR
adds a continue button to reach the feedback panel.

task-4433028

Forward-Port-Of: odoo/odoo#193693",fw-bot,2025-01-15 18:18:15+00:00,[],2025-01-30 11:01:09+00:00,2025-01-16 10:40:12+00:00,https://github.com/odoo/odoo/pull/193836,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593645101, 'issue_id': 2790538080, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193836.png)](https://mergebot.odoo.com/odoo/odoo/pull/193836)', 'created_at': datetime.datetime(2025, 1, 15, 18, 18, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593645113, 'issue_id': 2790538080, 'author': 'fw-bot', 'body': '@tsm-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 18, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593703756, 'issue_id': 2790538080, 'author': 'fw-bot', 'body': '@tsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 18, 50, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594719949, 'issue_id': 2790538080, 'author': 'tsm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 31, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594720009, 'issue_id': 2790538080, 'author': 'robodoo', 'body': '@tsm-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 7, 31, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:18:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193836.png)](https://mergebot.odoo.com/odoo/odoo/pull/193836)

fw-bot (Issue Creator) on (2025-01-15 18:18:27 UTC): @tsm-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:50:49 UTC): @tsm-odoo ci/runbot failed on this forward-port PR

tsm-odoo on (2025-01-16 07:31:11 UTC): @robodoo r+

robodoo on (2025-01-16 07:31:13 UTC): @tsm-odoo you may want to rebuild or fix this PR as it has failed CI.

"
2790527585,pull_request,closed,,[FW][FIX] auth_ldap: add email on new res.partner,"Before this commit, when a new res.user is created after signing in with auth_ldap, there was no email on the linked res.partner, which may cause issues in modules such as helpdesk, where partner email is used to find related tickets.

res.users created through the form view will trigger the onchange which sets the 'email' = 'login', which does not happen when creating a user directly through the ORM.

This commit adds 'email' as a key which is returned by the method _map_ldap_attributes, which is used to create new partners with the correct email associated with the res.user login.

opw-4378487



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193495",fw-bot,2025-01-15 18:13:59+00:00,[],2025-01-30 14:06:17+00:00,2025-01-30 14:06:17+00:00,https://github.com/odoo/odoo/pull/193835,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593636951, 'issue_id': 2790527585, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193835.png)](https://mergebot.odoo.com/odoo/odoo/pull/193835)', 'created_at': datetime.datetime(2025, 1, 15, 18, 14, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593637034, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo cherrypicking of pull request odoo/odoo#193495 failed.\n\nstdout:\n```\nAuto-merging addons/auth_ldap/models/res_company_ldap.py\nCONFLICT (content): Merge conflict in addons/auth_ldap/models/res_company_ldap.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 14, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600463635, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173303, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476150, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119385, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689291, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385475, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721844, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723051, 'issue_id': 2790527585, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624334384, 'issue_id': 2790527585, 'author': 'flvr-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 12, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:14:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193835.png)](https://mergebot.odoo.com/odoo/odoo/pull/193835)

fw-bot (Issue Creator) on (2025-01-15 18:14:03 UTC): @jelu-odoo @flvr-odoo cherrypicking of pull request odoo/odoo#193495 failed.

stdout:
```
Auto-merging addons/auth_ldap/models/res_company_ldap.py
CONFLICT (content): Merge conflict in addons/auth_ldap/models/res_company_ldap.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:38 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:36 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:21 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:35 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:16 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:08 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:22 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:08 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

flvr-odoo on (2025-01-30 12:10:00 UTC): robodoo r+

"
2790521384,pull_request,open,,"[IMP] web, point_of_sale: new l10n_br_edi_pos","[IMP] web: eslint the new l10n_br_edi_pos module

task-3564171

----

[IMP] point_of_sale: add some hooks for l10n_br_edi_pos

This doesn't change behavior, only adds a way to modify the behavior
from other modules.

task-3564171",jorenvo,2025-01-15 18:11:50+00:00,[],2025-01-27 20:31:04+00:00,,https://github.com/odoo/odoo/pull/193834,"[('RD', 'research & development, internal work'), ('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2593632988, 'issue_id': 2790521384, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193834.png)](https://mergebot.odoo.com/odoo/odoo/pull/193834)', 'created_at': datetime.datetime(2025, 1, 15, 18, 11, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:11:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193834.png)](https://mergebot.odoo.com/odoo/odoo/pull/193834)

"
