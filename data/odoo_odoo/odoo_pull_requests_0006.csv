id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2809502124,pull_request,closed,,[FIX] mail: mark as read depends on inbox counter,"Before this commit, when got a needaction_message from records that you don't have access to, you will see the counter of the inbox but you cannot mark it as read.

The reason was that the mark as read action was based on the isEmpty of the thread but if you don't have access to the record, the message will not be fetched and the computation was not correct.

The fix is to depend on the inbox counter so that the behavior of the red dot is consistent with the mark as read action.

![5666720560](https://github.com/user-attachments/assets/ec800614-448e-4608-84d2-5add1599c1d2)

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",zel-odoo,2025-01-24 13:46:52+00:00,[],2025-01-25 11:47:52+00:00,2025-01-25 00:08:40+00:00,https://github.com/odoo/odoo/pull/195056,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612570245, 'issue_id': 2809502124, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195056.png)](https://mergebot.odoo.com/odoo/odoo/pull/195056)', 'created_at': datetime.datetime(2025, 1, 24, 13, 46, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612711396, 'issue_id': 2809502124, 'author': 'zel-odoo', 'body': 'updated and test added', 'created_at': datetime.datetime(2025, 1, 24, 14, 49, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:46:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195056.png)](https://mergebot.odoo.com/odoo/odoo/pull/195056)

zel-odoo (Issue Creator) on (2025-01-24 14:49:18 UTC): updated and test added

"
2809500818,pull_request,closed,,[FW][FW][FIX] core: inherit translations better when upgrade,"Before:
The typofix feature treats terms in the old and new values with similar text content as the same term, migrating the translations of the old term to the new term.

For example

The old value has the mapping:
'Draft': 'Brouillon'

The new value contains the term:
'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'

Since the old term and the new term share the same text content, 'Draft', after `write`, the new term reuses the old translation of 'Draft'. However, the translation 'Brouillon' is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the en_US value and is responsible for verifying translations afterward. However, it is problematic during upgrades because users cannot easily identify which records have changed and need to be rechecked.

After:
The translation inheritance behavior can be described as below Translations can be inherited after `write` from old terms to new terms which share the very close text contents
1. when `write` in production mode, text contents for translation terms are more important than the HTML/XML structures of them, and the old term translations should be remained as much as possible. Because
    * the writing user is responsible to recheck all translations after `write`.
    * it is easier for the writing user to copy technical HTML/XML structures than translate text contents for a language they may not know.
    * the feature can also be used as typofix when the only small diff is the text content
2. when `write` in upgrade time, the HTML/XML structure is more important than the text content, and the new term structure should be remained as much as possible. Because
    * HTML/XML structures might be changed a lot after upgrade, which may contain behavior relevant diff (e.g. `invisible`), even if text contents are not changed.
    * users have no idea which records' values are changed during upgrade and are hard to recheck their translations.
    * new terms are highly likely to be correctly translated in the latest po files which will be imported during upgrade.
    * the typofix feature can still be remained when the only small diff is the text content

Based on the above feature analysis, we use the below new strategy
1. translations can be inherited only if the old source term and the new source term share the same HTML/XML structure
2. translations can be inherited only if the old translation term and the new source term share the same HTML/XML structure
3. when translations are inherited, MODIFIER_ATTRS will be synchronized with the new source term, other attributes will be copied from the source term if available.

Forward-Port-Of: #194181

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194816",fw-bot,2025-01-24 13:46:12+00:00,[],2025-02-07 17:26:25+00:00,2025-01-24 17:14:52+00:00,https://github.com/odoo/odoo/pull/195055,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612568711, 'issue_id': 2809500818, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195055.png)](https://mergebot.odoo.com/odoo/odoo/pull/195055)', 'created_at': datetime.datetime(2025, 1, 24, 13, 46, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612568735, 'issue_id': 2809500818, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 46, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612643310, 'issue_id': 2809500818, 'author': 'fw-bot', 'body': '@HydrionBurst @rco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 24, 14, 19, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612645335, 'issue_id': 2809500818, 'author': 'HydrionBurst', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 20, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612645457, 'issue_id': 2809500818, 'author': 'robodoo', 'body': '@HydrionBurst you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 24, 14, 20, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612756166, 'issue_id': 2809500818, 'author': 'fw-bot', 'body': '@HydrionBurst @rco-odoo the next pull request (odoo/odoo#195079) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 15, 8, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:46:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195055.png)](https://mergebot.odoo.com/odoo/odoo/pull/195055)

fw-bot (Issue Creator) on (2025-01-24 13:46:14 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 14:19:38 UTC): @HydrionBurst @rco-odoo ci/runbot failed on this forward-port PR

HydrionBurst on (2025-01-24 14:20:32 UTC): @robodoo r+

robodoo on (2025-01-24 14:20:35 UTC): @HydrionBurst you may want to rebuild or fix this PR as it has failed CI.

fw-bot (Issue Creator) on (2025-01-24 15:08:14 UTC): @HydrionBurst @rco-odoo the next pull request (odoo/odoo#195079) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809499572,pull_request,closed,,[FW][FIX] purchase: Prevent chatter logs for insignificant changes to Untaxed Amount,"The `amount_untaxed` field, which is tracked,
encounters floating-point precision issues during recomputation. When a value like `261,462.02` is assigned,
the field may become 261,`462.0200000002` due to floating-point imprecision. Although the value is stored correctly in the database (as `261,462.02`), the tracked change is logged in the chatter, causing unnecessary noise.

I couldn’t identify a clear or universal solution to this issue due to the inherent nature of floating-point arithmetic and its limitations. So what I did is checking if the new value is different than the old one then update the field.

Steps to reproduce:
1. Create a PO
2. Add a product with price 261,462.02
3. Save
4. Change the expected arrival date
5. Save See the chatter.
take a loot at the chatter.
![image](https://github.com/user-attachments/assets/a19ce09a-f02a-45a7-a02a-d044a4c1cc40)

opw-4315116



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193368",fw-bot,2025-01-24 13:45:35+00:00,[],2025-01-24 16:23:41+00:00,2025-01-24 16:23:41+00:00,https://github.com/odoo/odoo/pull/195054,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612567474, 'issue_id': 2809499572, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195054.png)](https://mergebot.odoo.com/odoo/odoo/pull/195054)', 'created_at': datetime.datetime(2025, 1, 24, 13, 45, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612567497, 'issue_id': 2809499572, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 45, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612742880, 'issue_id': 2809499572, 'author': 'fw-bot', 'body': '@elhayyany @Whenrow the next pull request (odoo/odoo#195072) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 15, 2, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612917609, 'issue_id': 2809499572, 'author': 'elhayyany', 'body': 'saas-17.4 does not face the issue solved by this PR.', 'created_at': datetime.datetime(2025, 1, 24, 16, 23, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:45:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195054.png)](https://mergebot.odoo.com/odoo/odoo/pull/195054)

fw-bot (Issue Creator) on (2025-01-24 13:45:37 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 15:02:13 UTC): @elhayyany @Whenrow the next pull request (odoo/odoo#195072) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

elhayyany on (2025-01-24 16:23:41 UTC): saas-17.4 does not face the issue solved by this PR.

"
2809498956,pull_request,closed,,"[FW][FIX] account: do not affect base of tax without ""is_base_affected""","**Steps to reproduce:**
- Install Accounting
- Create a first tax:
  * Tax Name: Tax1
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax1
  * Tax Group: Tax1
  * Affect Base of Subsequent Taxes: [Checked]
- Create a second tax:
  * Tax Name: Tax2
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax2
  * Tax Group: Tax2
  * Base Affected by Previous Taxes: [Not checked]
- Create an invoice
- Add an invoice line
- Add Tax1
- Add Tax2

**Issue:**
Base amount of Tax2 is affected by Tax1 when it should not.

opw-4450494




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194953
Forward-Port-Of: odoo/odoo#193451",fw-bot,2025-01-24 13:45:16+00:00,[],2025-02-07 16:47:53+00:00,2025-01-24 16:40:13+00:00,https://github.com/odoo/odoo/pull/195053,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612566907, 'issue_id': 2809498956, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195053.png)](https://mergebot.odoo.com/odoo/odoo/pull/195053)', 'created_at': datetime.datetime(2025, 1, 24, 13, 45, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612566917, 'issue_id': 2809498956, 'author': 'fw-bot', 'body': '@kitan191 @smetl this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195031\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 45, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612610543, 'issue_id': 2809498956, 'author': 'kitan191', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:45:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195053.png)](https://mergebot.odoo.com/odoo/odoo/pull/195053)

fw-bot (Issue Creator) on (2025-01-24 13:45:19 UTC): @kitan191 @smetl this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195031

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kitan191 on (2025-01-24 14:05:00 UTC): @robodoo r+

"
2809498340,pull_request,closed,,[FIX] uom: be able to modify the UoM on product template,"The constraint to change the main UoM of a product has been removed.
Globally on advanced case, it will result in a data corruption.

There is two different use case when modifying the UoM of product.
First, the user wants to manage the product flow to handle a different packaging
by default (e.g. unit to pack of 6). In this case, the previous
documents (SO/PO/...) can be trust and we need to update the current inventory
in consequence (30 units -> 5 pack of 6).
Second, he made a mistake or install the UoM setting and wants to update
the everything at once. In this case we set the new UoM everywhere and
we don't do any re-computation.

Both flows are valid use cases but we choose to handle the second for a
better on boarding of new users.

In order to do it, we check if all the documents are in the base UoM and
if it's possible to modify them everywhere without any computation. If
not, we block as before. If yes, we update all the stored many2one for
UoM accordingly.
",amoyaux,2025-01-24 13:44:58+00:00,[],2025-02-03 14:31:58+00:00,2025-02-03 14:31:58+00:00,https://github.com/odoo/odoo/pull/195052,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612566328, 'issue_id': 2809498340, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195052.png)](https://mergebot.odoo.com/odoo/odoo/pull/195052)', 'created_at': datetime.datetime(2025, 1, 24, 13, 45, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621113984, 'issue_id': 2809498340, 'author': 'mohammadhossam', 'body': ""Shouldn't we do this for all models that have related fields to product and UoM? I didn't go over all the models but accounting models like `account.move.line` are not corrected."", 'created_at': datetime.datetime(2025, 1, 29, 9, 29, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623983705, 'issue_id': 2809498340, 'author': 'amoyaux', 'body': ""> Shouldn't we do this for all models that have related fields to product and UoM? I didn't go over all the models but accounting models like `account.move.line` are not corrected.\r\n\r\nIt's already blocked by their constraint. So it's impossible to modify it. I let the account team do what they want as future change"", 'created_at': datetime.datetime(2025, 1, 30, 9, 39, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629580079, 'issue_id': 2809498340, 'author': 'amoyaux', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 2, 22, 10, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629601508, 'issue_id': 2809498340, 'author': 'robodoo', 'body': '@amoyaux linked pull request(s) odoo/enterprise#78282 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 2, 2, 23, 0, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629610467, 'issue_id': 2809498340, 'author': 'amoyaux', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 2, 23, 23, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630796800, 'issue_id': 2809498340, 'author': 'amoyaux', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 12, 21, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:45:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195052.png)](https://mergebot.odoo.com/odoo/odoo/pull/195052)

mohammadhossam on (2025-01-29 09:29:46 UTC): Shouldn't we do this for all models that have related fields to product and UoM? I didn't go over all the models but accounting models like `account.move.line` are not corrected.

amoyaux (Issue Creator) on (2025-01-30 09:39:50 UTC): It's already blocked by their constraint. So it's impossible to modify it. I let the account team do what they want as future change

amoyaux (Issue Creator) on (2025-02-02 22:10:51 UTC): robodoo r+

robodoo on (2025-02-02 23:00:15 UTC): @amoyaux linked pull request(s) odoo/enterprise#78282 not ready. Linked PRs are not staged until all of them are ready.

amoyaux (Issue Creator) on (2025-02-02 23:23:36 UTC): robodoo r+

amoyaux (Issue Creator) on (2025-02-03 12:21:47 UTC): robodoo r+

"
2809498280,pull_request,closed,,[FW][FIX] pos_hr: prevent singleton error with multiple related partners,"Before this commit, if an employee had multiple related partners, an expected singleton error occurred when attempting to set the opening or closing of the session.

opw-4482497

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194984",fw-bot,2025-01-24 13:44:56+00:00,[],2025-02-07 16:47:51+00:00,2025-01-24 16:40:01+00:00,https://github.com/odoo/odoo/pull/195051,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612566197, 'issue_id': 2809498280, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195051.png)](https://mergebot.odoo.com/odoo/odoo/pull/195051)', 'created_at': datetime.datetime(2025, 1, 24, 13, 44, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612566219, 'issue_id': 2809498280, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195029\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 44, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612613837, 'issue_id': 2809498280, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 6, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:44:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195051.png)](https://mergebot.odoo.com/odoo/odoo/pull/195051)

fw-bot (Issue Creator) on (2025-01-24 13:44:58 UTC): @pedrambiria @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195029

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 14:06:39 UTC): @robodoo r+

"
2809496816,pull_request,closed,,[FW][FIX] mrp: correct date of late filter,"Steps to reproduce:
----

- Go to manufacturing
- Planning by production
- Add late filter

Issue:
----
The late filter ""does not work"", the filter is based on the day. But the late order should be based on a much more precise datetime.

Fix:
---
Changed the filter from current_date to datetime.now to have more precision in the time, and so it filters more accurately.

opw-4493678

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194811",fw-bot,2025-01-24 13:44:14+00:00,[],2025-01-27 17:28:41+00:00,2025-01-27 17:28:40+00:00,https://github.com/odoo/odoo/pull/195050,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612564582, 'issue_id': 2809496816, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195050.png)](https://mergebot.odoo.com/odoo/odoo/pull/195050)', 'created_at': datetime.datetime(2025, 1, 24, 13, 44, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612564642, 'issue_id': 2809496816, 'author': 'fw-bot', 'body': '@jaeschwa @adwid this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195026\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 44, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615216740, 'issue_id': 2809496816, 'author': 'jaeschwa', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 9, 18, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:44:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195050.png)](https://mergebot.odoo.com/odoo/odoo/pull/195050)

fw-bot (Issue Creator) on (2025-01-24 13:44:16 UTC): @jaeschwa @adwid this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195026

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

jaeschwa on (2025-01-27 09:18:02 UTC): @robodoo r+

"
2809495222,pull_request,closed,,[FW][FIX] project_purchase: include negative bills in project profitability,"### Issue:

- The negative values in Vendor Bills are not being reflected in the Analytic Account linked to a project.
- the negative value does not reduce the project’s total cost in the Analytic Report cost calculations.

### Steps to reproduce:

1- Create a project and set an analytic account or use the ""Renovations"" project.
2- Create a vendor bill.
3- On the VB add two lines one with a positive Price and the other with a negative Price.
4- on `Analytic` of each line set the project to `Renovations` or the project you created.
5- Validate the vendor bill.
6- Go to the project app and click on the 3 dots of the project you choose and click on `Project Updates`.
7- Notice the total cost of the project is not reflecting the negative value of the vendor bill.

### Solution:

- The issue is caused by the condition ('price_subtotal', '>', 0) in the query for account.move.line.
- Removing this condition ensures both positive and negative price_subtotal values are included.

opw-[4416931](https://www.odoo.com/web#id=4416931&view_type=form&model=project.task)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194960
Forward-Port-Of: odoo/odoo#194300",fw-bot,2025-01-24 13:43:43+00:00,[],2025-01-26 13:55:26+00:00,2025-01-26 13:55:26+00:00,https://github.com/odoo/odoo/pull/195049,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612563046, 'issue_id': 2809495222, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195049.png)](https://mergebot.odoo.com/odoo/odoo/pull/195049)', 'created_at': datetime.datetime(2025, 1, 24, 13, 43, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612563067, 'issue_id': 2809495222, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 43, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614404646, 'issue_id': 2809495222, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 26, 12, 46, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614406449, 'issue_id': 2809495222, 'author': 'fw-bot', 'body': ""@kawkb @xavierbol child PR odoo/odoo#195071 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 26, 12, 51, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:43:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195049.png)](https://mergebot.odoo.com/odoo/odoo/pull/195049)

fw-bot (Issue Creator) on (2025-01-24 13:43:45 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-26 12:46:03 UTC): @robodoo r+

fw-bot (Issue Creator) on (2025-01-26 12:51:34 UTC): @kawkb @xavierbol child PR odoo/odoo#195071 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2809488287,pull_request,closed,,[FW][FIX] l10n_eg_edi_eta: withholding tax amount declaration,"Steps to reproduce:
- With an EG Company setup
- Create an invoice with a '3% WH' tax
- Confirm invoice and send for validation

Issue: Validation will fail with error
```
{'code': '2', 'message': 'Validation Error', 'target': 'INV/2025/00001', 'propertyPath': None, 'details': [{'code': None, 'message': 'ArrayItemNotValid', 'target': '[0]', 'propertyPath': '#/invoiceLines[0]', 'details': None}, {'code': None, 'message': 'ArrayItemNotValid', 'target': '[1]', 'propertyPath': '#/taxTotals[1]', 'details': None}]}
```
This is caused by the withholding tax amount being reported as negative, while it should be reported as positive

opw-4453002

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194708",fw-bot,2025-01-24 13:40:26+00:00,[],2025-02-07 16:47:49+00:00,2025-01-24 16:39:52+00:00,https://github.com/odoo/odoo/pull/195048,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612556603, 'issue_id': 2809488287, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195048.png)](https://mergebot.odoo.com/odoo/odoo/pull/195048)', 'created_at': datetime.datetime(2025, 1, 24, 13, 40, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612556620, 'issue_id': 2809488287, 'author': 'fw-bot', 'body': '@agr-odoo @smetl this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195024\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 40, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612589606, 'issue_id': 2809488287, 'author': 'agr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 56, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:40:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195048.png)](https://mergebot.odoo.com/odoo/odoo/pull/195048)

fw-bot (Issue Creator) on (2025-01-24 13:40:28 UTC): @agr-odoo @smetl this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195024

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

agr-odoo on (2025-01-24 13:56:03 UTC): @robodoo r+

"
2809485783,pull_request,closed,,[FW][FIX] sale_project: fixed a test_cost_invoicing test case,"It was failing in single module builds /locally and the reason was due to the fact that project not having a analytic account.

task-4500108

Forward-Port-Of: odoo/odoo#194701",fw-bot,2025-01-24 13:39:08+00:00,[],2025-02-07 16:47:50+00:00,2025-01-24 16:39:57+00:00,https://github.com/odoo/odoo/pull/195047,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612554304, 'issue_id': 2809485783, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195047.png)](https://mergebot.odoo.com/odoo/odoo/pull/195047)', 'created_at': datetime.datetime(2025, 1, 24, 13, 39, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612554326, 'issue_id': 2809485783, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195025\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 39, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612594694, 'issue_id': 2809485783, 'author': 'xavierbol', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 58, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:39:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195047.png)](https://mergebot.odoo.com/odoo/odoo/pull/195047)

fw-bot (Issue Creator) on (2025-01-24 13:39:10 UTC): @kthe-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195025

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

xavierbol on (2025-01-24 13:58:27 UTC): robodoo r+

"
2809469704,pull_request,closed,,[FIX] sale_stock: use only SOL linked COGS lines to get price unit,"**Current behavior:**
With a FIFO + real-time product, `ProductA`:
Creating a sale order with multiple order lines for ProductA,
processing the resulting delivery in 2 separate pickings via
backorder (1st delivery for the 1st line, 2nd delivery for the
2nd line), then invoicing the delivered product separately
result in an invoice with invoice lines which do not reflect the
value of the product at delivery time.

**Expected behavior:**
The SVLs generated from the deliveries should inform the
generated AccountMoves.

**Steps to reproduce:**
1. `FIFO-prod`: FIFO and real-time valuation & costing

2. Receive 12 units of `FIFO-prod` @ $100 per

3. Create a sale order with order lines:
* `FIFO-prod` `10 units` `price_unit=$100`
* `FIFO-prod` `2 units` `price_unit=$100`

4. Confirm the sale order, on the delivery, only receive the
first move for the 10 qty, backorder the other 2 qty

5. Receive the backorder, create an invoice- edit the invoice
lines so that 5/10 of line 1 and 2/2 of line 2 are invoiced,
then post/confirm

6. Edit the `standard_price` of `FIFO-prod` (e.g., $100 -> $50)

7. Create another invoice for the remaining quantity and post

8. Observe that the COGs lines on the invoice have been
calculated with a different price unit than the other invoice &
unit_price for the out SVLs

**Cause of the issue:**
When getting the price unit of a given anglo saxon invoice line,
there is no check that all the collected COGS lines are linked
to the sale order line which corresponds to the product and
product_qty that we are attempting to value.

This creates an imbalance in the qty calculation later here:
https://github.com/odoo/odoo/blob/f2728b2fe13a355ecb301a3714639b8a07f418b4/addons/stock_account/models/stock_valuation_layer.py#L202-L211
when the valuation is actually performed.

**Fix:**
Only consider posted COGS lines for the sale order line with the
product qty that is getting valued when calculating
`qty_invoiced`.

opw-4321363",ethanrobv,2025-01-24 13:31:31+00:00,[],2025-01-31 16:56:57+00:00,2025-01-31 16:56:57+00:00,https://github.com/odoo/odoo/pull/195046,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612539196, 'issue_id': 2809469704, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195046.png)](https://mergebot.odoo.com/odoo/odoo/pull/195046)', 'created_at': datetime.datetime(2025, 1, 24, 13, 31, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626807130, 'issue_id': 2809469704, 'author': 'Whenrow', 'body': ""@ethanrobv Hi, I'm a bit 'afraid' of your fix taking all the stock moves. I think this works because you validate entire moves in each picking in your test. But if you start mixing quantities of the 2 stock moves in the picking and the backorder. Some quantities might be counted 2 times for the cogs calculation. \r\n\r\nInstead, I try another fix that I took the liberty to push in a commit. Your test passes, but I wanted to show it to you and run all the tests on it as well. Please tell me what do you think of it :)"", 'created_at': datetime.datetime(2025, 1, 31, 9, 58, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627017023, 'issue_id': 2809469704, 'author': 'ethanrobv', 'body': '> Instead, I try another fix that I took the liberty to push in a commit. Your test passes, but I wanted to show it to you and run all the tests on it as well. Please tell me what do you think of it :)\r\n\r\nIt seems much better to me in virtually every sense :laughing: \r\n\r\nWill squash and reword :+1:', 'created_at': datetime.datetime(2025, 1, 31, 11, 47, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627419080, 'issue_id': 2809469704, 'author': 'Whenrow', 'body': 'robodoo r+\r\nthank you', 'created_at': datetime.datetime(2025, 1, 31, 13, 57, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:31:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195046.png)](https://mergebot.odoo.com/odoo/odoo/pull/195046)

Whenrow on (2025-01-31 09:58:58 UTC): @ethanrobv Hi, I'm a bit 'afraid' of your fix taking all the stock moves. I think this works because you validate entire moves in each picking in your test. But if you start mixing quantities of the 2 stock moves in the picking and the backorder. Some quantities might be counted 2 times for the cogs calculation. 

Instead, I try another fix that I took the liberty to push in a commit. Your test passes, but I wanted to show it to you and run all the tests on it as well. Please tell me what do you think of it :)

ethanrobv (Issue Creator) on (2025-01-31 11:47:38 UTC): It seems much better to me in virtually every sense :laughing: 

Will squash and reword :+1:

Whenrow on (2025-01-31 13:57:56 UTC): robodoo r+
thank you

"
2809449059,pull_request,open,,[FIX] im_livechat: prevent opening ended chat on Tab key press,"**Current behavior before PR:**

When a user had an open live chat window and pressed the Tab
key, it resulted in an ended chat window being opened.

**Desired behavior after PR is merged:**

This fix ensures that pressing the Tab key will not open chats that have already ended.

Task-4507082

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ramh-odoo,2025-01-24 13:21:50+00:00,[],2025-02-06 14:08:14+00:00,,https://github.com/odoo/odoo/pull/195045,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612519927, 'issue_id': 2809449059, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195045.png)](https://mergebot.odoo.com/odoo/odoo/pull/195045)', 'created_at': datetime.datetime(2025, 1, 24, 13, 21, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:21:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195045.png)](https://mergebot.odoo.com/odoo/odoo/pull/195045)

"
2809414320,pull_request,closed,,[FW][FIX] l10n_my_edi: XML format and test mode,"Fixes an issue with the xml file where the tax
exchange rate node would be added before the
payment terms node if both features are used,
which render the xml wrong.

Also add a sudo when getting the system param
for the test url; as this shouldn't block a non
administrator user from testing the feature.

opw-4425472
opw-4505562

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194971",fw-bot,2025-01-24 13:04:23+00:00,[],2025-02-07 17:26:28+00:00,2025-01-24 17:14:53+00:00,https://github.com/odoo/odoo/pull/195044,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612486275, 'issue_id': 2809414320, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195044.png)](https://mergebot.odoo.com/odoo/odoo/pull/195044)', 'created_at': datetime.datetime(2025, 1, 24, 13, 4, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612486299, 'issue_id': 2809414320, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 13, 4, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 13:04:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195044.png)](https://mergebot.odoo.com/odoo/odoo/pull/195044)

fw-bot (Issue Creator) on (2025-01-24 13:04:25 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809377029,pull_request,closed,,[FW][FIX] account: hide purchase tab on product template,"Before the refactoring of uom, it was possible to define `uom_po_id`, the uom for purchase that was used for vendor bills. This was the only setting to define in Purchase tab if the Purchase app was not installed.

Since the commit removed this field, the tab became useless and should be removed.

*https://github.com/odoo/odoo/commit/d3fa388cf7c41984b5f7cbc2a81fec3e27a00325

Forward-Port-Of: odoo/odoo#193911",fw-bot,2025-01-24 12:46:01+00:00,[],2025-02-07 16:47:46+00:00,2025-01-24 16:39:29+00:00,https://github.com/odoo/odoo/pull/195043,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612450110, 'issue_id': 2809377029, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195043.png)](https://mergebot.odoo.com/odoo/odoo/pull/195043)', 'created_at': datetime.datetime(2025, 1, 24, 12, 46, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612450143, 'issue_id': 2809377029, 'author': 'fw-bot', 'body': '@vava-odoo @oco-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 46, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612529832, 'issue_id': 2809377029, 'author': 'oco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 27, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:46:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195043.png)](https://mergebot.odoo.com/odoo/odoo/pull/195043)

fw-bot (Issue Creator) on (2025-01-24 12:46:03 UTC): @vava-odoo @oco-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

oco-odoo on (2025-01-24 13:27:03 UTC): @robodoo r+

"
2809376389,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194957
Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-24 12:45:41+00:00,[],2025-02-07 16:47:45+00:00,2025-01-24 16:39:22+00:00,https://github.com/odoo/odoo/pull/195042,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612449862, 'issue_id': 2809376389, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195042.png)](https://mergebot.odoo.com/odoo/odoo/pull/195042)', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612449908, 'issue_id': 2809376389, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612458465, 'issue_id': 2809376389, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 12, 50, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:45:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195042.png)](https://mergebot.odoo.com/odoo/odoo/pull/195042)

fw-bot (Issue Creator) on (2025-01-24 12:45:55 UTC): @Williambraecky @Julien00859 this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Williambraecky on (2025-01-24 12:50:35 UTC): @robodoo r+

"
2809375697,pull_request,closed,,[FW][FIX] hr: suppress warning on optimized domains,"If the domain is already optimized for another model, the optimize function logs a warning.
While the domain could probably be used as is without requiring the domain to be optimized again (due to the nature of the hr.employee models), we reset the domain completely if the domain has been optimized for another model.

Forward-Port-Of: odoo/odoo#194731",fw-bot,2025-01-24 12:45:19+00:00,[],2025-02-07 15:44:03+00:00,2025-01-24 15:20:55+00:00,https://github.com/odoo/odoo/pull/195041,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612449797, 'issue_id': 2809375697, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195041.png)](https://mergebot.odoo.com/odoo/odoo/pull/195041)', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612449823, 'issue_id': 2809375697, 'author': 'fw-bot', 'body': '@Williambraecky @Bertrand2 this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612458085, 'issue_id': 2809375697, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 12, 50, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:45:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195041.png)](https://mergebot.odoo.com/odoo/odoo/pull/195041)

fw-bot (Issue Creator) on (2025-01-24 12:45:53 UTC): @Williambraecky @Bertrand2 this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Williambraecky on (2025-01-24 12:50:23 UTC): @robodoo r+

"
2809375095,pull_request,closed,,[FW][FIX] sale_loyalty: traceback when coupon applied on so,"Steps to reproduce:
- Create SO and add a product.
- Apply  discount coupon to SO.

Issue:
- Traceback occurs when the delivery module is not installed.

Cause:
- The line.is_delivery attribute is not accessible when the delivery module is not installed, leading to an error.

Fix:
- Use the line._is_delivery() method to correctly check for delivery lines.

opw-4509360

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194919
Forward-Port-Of: odoo/odoo#194839",fw-bot,2025-01-24 12:44:59+00:00,[],2025-02-07 16:47:46+00:00,2025-01-24 16:39:33+00:00,https://github.com/odoo/odoo/pull/195040,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612449754, 'issue_id': 2809375095, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195040.png)](https://mergebot.odoo.com/odoo/odoo/pull/195040)', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612449773, 'issue_id': 2809375095, 'author': 'fw-bot', 'body': '@shrm-odoo @Feyensv this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612450106, 'issue_id': 2809375095, 'author': 'shrm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 12, 46, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:45:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195040.png)](https://mergebot.odoo.com/odoo/odoo/pull/195040)

fw-bot (Issue Creator) on (2025-01-24 12:45:52 UTC): @shrm-odoo @Feyensv this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

shrm-odoo on (2025-01-24 12:46:02 UTC): @robodoo r+

"
2809372694,pull_request,closed,,[FW][FIX] hr_holidays: improve test stability,"The test suffered from multiple problems:
 - Duration of leaves could sometimes be less or more depending on the day of the week (weekend don't count in duration)
 - Demo data could make the test pass while the leaves created during the test were not actually found Here we improved the date mechanism as well as forcing the domain to only search within our own leaves as well as comparing that those leaves are the one with fetched.

Forward-Port-Of: odoo/odoo#194994",fw-bot,2025-01-24 12:43:43+00:00,[],2025-02-07 22:34:16+00:00,2025-01-24 22:09:52+00:00,https://github.com/odoo/odoo/pull/195039,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612445611, 'issue_id': 2809372694, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195039.png)](https://mergebot.odoo.com/odoo/odoo/pull/195039)', 'created_at': datetime.datetime(2025, 1, 24, 12, 43, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612445629, 'issue_id': 2809372694, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 43, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:43:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195039.png)](https://mergebot.odoo.com/odoo/odoo/pull/195039)

fw-bot (Issue Creator) on (2025-01-24 12:43:45 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809372295,pull_request,open,,[IMP] discuss: synchronize the state of calls across tabs,"This commit adds the ability to see and control calls from any tab, with the exception of video features which cannot be shared.

This commit also limits the amount of RtcSession per user at 1. Which means that one user can only be in one call at a time.

task-4393318


",ThanhDodeurOdoo,2025-01-24 12:43:30+00:00,[],2025-02-04 09:54:32+00:00,,https://github.com/odoo/odoo/pull/195038,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612445301, 'issue_id': 2809372295, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195038.png)](https://mergebot.odoo.com/odoo/odoo/pull/195038)', 'created_at': datetime.datetime(2025, 1, 24, 12, 43, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612445984, 'issue_id': 2809372295, 'author': 'ThanhDodeurOdoo', 'body': 'master alternative for: https://github.com/odoo/odoo/pull/192320', 'created_at': datetime.datetime(2025, 1, 24, 12, 43, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:43:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195038.png)](https://mergebot.odoo.com/odoo/odoo/pull/195038)

ThanhDodeurOdoo (Issue Creator) on (2025-01-24 12:43:57 UTC): master alternative for: https://github.com/odoo/odoo/pull/192320

"
2809365535,pull_request,closed,,[FW][FIX] stock: prioritize routes by sequence in extract_rule,"### Description of the issue/feature this PR addresses:
When a product is configured with both buy and manufacture routes, the manufacture route is always prioritized, regardless of the sequence defined in the routes.

### Current behavior before PR:
The method extract_rule stops evaluating routes once it finds a valid rule, even if other rules with a lower sequence exist. This leads to the manufacture route being prioritized over buy, which is not the intended behavior.

### Desired behavior after PR is merged:
The routes are now evaluated based on their sequence, ensuring that rules associated with routes of lower sequence are considered first.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
cc @ForgeFlow

Forward-Port-Of: odoo/odoo#194922
Forward-Port-Of: odoo/odoo#188846",fw-bot,2025-01-24 12:39:55+00:00,[],2025-01-29 11:27:59+00:00,2025-01-29 11:27:58+00:00,https://github.com/odoo/odoo/pull/195037,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612438699, 'issue_id': 2809365535, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195037.png)](https://mergebot.odoo.com/odoo/odoo/pull/195037)', 'created_at': datetime.datetime(2025, 1, 24, 12, 39, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612438715, 'issue_id': 2809365535, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 39, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:39:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195037.png)](https://mergebot.odoo.com/odoo/odoo/pull/195037)

fw-bot (Issue Creator) on (2025-01-24 12:39:57 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809345178,pull_request,closed,,[FW][FIX] purchase: Prevent chatter logs for insignificant changes to Untaxed Amount,"The `amount_untaxed` field, which is tracked,
encounters floating-point precision issues during recomputation. When a value like `261,462.02` is assigned,
the field may become 261,`462.0200000002` due to floating-point imprecision. Although the value is stored correctly in the database (as `261,462.02`), the tracked change is logged in the chatter, causing unnecessary noise.

I couldn’t identify a clear or universal solution to this issue due to the inherent nature of floating-point arithmetic and its limitations. So what I did is checking if the new value is different than the old one then update the field.

Steps to reproduce:
1. Create a PO
2. Add a product with price 261,462.02
3. Save
4. Change the expected arrival date
5. Save See the chatter.
take a loot at the chatter.
![image](https://github.com/user-attachments/assets/a19ce09a-f02a-45a7-a02a-d044a4c1cc40)

opw-4315116



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193368",fw-bot,2025-01-24 12:30:58+00:00,[],2025-01-27 11:55:09+00:00,2025-01-27 11:55:09+00:00,https://github.com/odoo/odoo/pull/195036,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612422545, 'issue_id': 2809345178, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195036.png)](https://mergebot.odoo.com/odoo/odoo/pull/195036)', 'created_at': datetime.datetime(2025, 1, 24, 12, 30, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612422562, 'issue_id': 2809345178, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 30, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615346050, 'issue_id': 2809345178, 'author': 'elhayyany', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 10, 16, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:30:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195036.png)](https://mergebot.odoo.com/odoo/odoo/pull/195036)

fw-bot (Issue Creator) on (2025-01-24 12:30:59 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

elhayyany on (2025-01-27 10:16:42 UTC): @robodoo r+

"
2809342018,pull_request,closed,,[FW][FIX] stock: cancel move upstream,"Currently the different documents are responsible on the move's cancelation. E.g. cancel a SO will delete all the pickings with the same procurement group. Cancel a PO will cancel the receipt an all the moves destination.

But in inter company transaction or inter warehouse. The source document is a stock.move directly (or a rr but it's already unlink) Some users delete the receipt from another warehouse but the delivery on the other still exists. So it let pickings that are never cancel in other companies/warehouses.

This commit and an option to allow the cancel propagate upstream. It's hidden under the `stock.cancel_moves_origin` system parameter in order to avoid a huge behavior modification for other users.

opw-3274939

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193849
Forward-Port-Of: odoo/odoo#186730",fw-bot,2025-01-24 12:29:45+00:00,[],2025-01-29 11:07:02+00:00,2025-01-29 11:07:02+00:00,https://github.com/odoo/odoo/pull/195035,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612420123, 'issue_id': 2809342018, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195035.png)](https://mergebot.odoo.com/odoo/odoo/pull/195035)', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612420138, 'issue_id': 2809342018, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612459327, 'issue_id': 2809342018, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 24, 12, 51, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613722081, 'issue_id': 2809342018, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723776, 'issue_id': 2809342018, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620967891, 'issue_id': 2809342018, 'author': 'fw-bot', 'body': '@amoyaux @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 29, 8, 22, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620969397, 'issue_id': 2809342018, 'author': 'Whenrow', 'body': 'robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 1, 29, 8, 23, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620969468, 'issue_id': 2809342018, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 29, 8, 23, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:29:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195035.png)](https://mergebot.odoo.com/odoo/odoo/pull/195035)

fw-bot (Issue Creator) on (2025-01-24 12:29:54 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 12:51:02 UTC): @amoyaux @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-25 02:01:55 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:52 UTC): @amoyaux @Whenrow this forward port of odoo/odoo#186730 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 08:22:36 UTC): @amoyaux @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.

Whenrow on (2025-01-29 08:23:22 UTC): robodoo r+ rebase-ff

robodoo on (2025-01-29 08:23:24 UTC): Merge method set to rebase and fast-forward.

"
2809341141,pull_request,closed,,"[FW][IMP] l10n_sa, l10n_sa_edi: Improved Report Spacing","Description of the issue/feature this PR addresses:
Task ID: 4342267

Current behavior before PR:
-Error When printing draft invoice due to unset invoice_date.

-Report spacing between header & body in second page overlaps due to paperformat spacing.
Due to the long address format of saudi arabia, the default paperformat header spacing and margin top are not enough to show the full address without overlapping the second and onward pages.

-English labels on the exchange rate table in l10n_sa_edi are translated and not shown together with the arabic labels.

-Remove unnecessary spans in xpaths

Desired behavior after PR is merged:
-Fix printing draft invoice with invoice_date as today's date

-Fix report spacing header by adding a new A4 paperformat for l10n_sa which is set as the saudi arabia companies default paper format.

-Fix exchange rate table to show both arabic and english labels and remove unnecessary translations (no longer used)

-Remove unnecessary spans in xpath.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194725
Forward-Port-Of: odoo/odoo#190172",fw-bot,2025-01-24 12:29:27+00:00,[],2025-01-27 10:49:59+00:00,2025-01-27 10:18:12+00:00,https://github.com/odoo/odoo/pull/195034,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612420077, 'issue_id': 2809341141, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195034.png)](https://mergebot.odoo.com/odoo/odoo/pull/195034)', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612420091, 'issue_id': 2809341141, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612558462, 'issue_id': 2809341141, 'author': 'fw-bot', 'body': '@alny-odoo @gawa-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 13, 41, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612911597, 'issue_id': 2809341141, 'author': 'ygu-odoo', 'body': 'Do not r+ for now, some changes to be made', 'created_at': datetime.datetime(2025, 1, 24, 16, 20, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613722057, 'issue_id': 2809341141, 'author': 'fw-bot', 'body': '@alny-odoo @gawa-odoo this forward port of odoo/odoo#190172 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614923725, 'issue_id': 2809341141, 'author': 'alny-odoo', 'body': 'Hi @gawa-odoo in v18, the paperformat header spacing was increased for the standard A4 paperformat, so we can remove the custom Saudi A4 paperformat for v18 and onwards or do you think it could cause issues for the clients upgrading from v17.4 since they might be using it.\r\n\r\ncommit of the paperformat standard change: https://github.com/odoo/odoo/commit/0184f2236804a0619bc9a7c4afcd77dc0cf554f9#diff-a35f7b355115627fd64d418b6f04f4989ac51c1944c6f4ac37f0a7e73922118f', 'created_at': datetime.datetime(2025, 1, 27, 6, 14, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615059276, 'issue_id': 2809341141, 'author': 'gawa-odoo', 'body': ""Hello @alny-odoo \r\nYou can't indeed remove it. You will need an upgrade script to be able to remove the data, so in master"", 'created_at': datetime.datetime(2025, 1, 27, 7, 59, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615068811, 'issue_id': 2809341141, 'author': 'alny-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 8, 4, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615416733, 'issue_id': 2809341141, 'author': 'alny-odoo', 'body': 'Hi @gawa-odoo not sure why no fw port for 18.0, 18.1, & master was generated do I need to manually create one for v18?', 'created_at': datetime.datetime(2025, 1, 27, 10, 48, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615419298, 'issue_id': 2809341141, 'author': 'alny-odoo', 'body': '@gawa-odoo ignore my last message a fw port was created', 'created_at': datetime.datetime(2025, 1, 27, 10, 49, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:29:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195034.png)](https://mergebot.odoo.com/odoo/odoo/pull/195034)

fw-bot (Issue Creator) on (2025-01-24 12:29:52 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 13:41:28 UTC): @alny-odoo @gawa-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

ygu-odoo on (2025-01-24 16:20:46 UTC): Do not r+ for now, some changes to be made

fw-bot (Issue Creator) on (2025-01-25 02:01:50 UTC): @alny-odoo @gawa-odoo this forward port of odoo/odoo#190172 is awaiting action (not merged or closed).

alny-odoo on (2025-01-27 06:14:11 UTC): Hi @gawa-odoo in v18, the paperformat header spacing was increased for the standard A4 paperformat, so we can remove the custom Saudi A4 paperformat for v18 and onwards or do you think it could cause issues for the clients upgrading from v17.4 since they might be using it.

commit of the paperformat standard change: https://github.com/odoo/odoo/commit/0184f2236804a0619bc9a7c4afcd77dc0cf554f9#diff-a35f7b355115627fd64d418b6f04f4989ac51c1944c6f4ac37f0a7e73922118f

gawa-odoo on (2025-01-27 07:59:15 UTC): Hello @alny-odoo 
You can't indeed remove it. You will need an upgrade script to be able to remove the data, so in master

alny-odoo on (2025-01-27 08:04:55 UTC): @robodoo r+

alny-odoo on (2025-01-27 10:48:44 UTC): Hi @gawa-odoo not sure why no fw port for 18.0, 18.1, & master was generated do I need to manually create one for v18?

alny-odoo on (2025-01-27 10:49:57 UTC): @gawa-odoo ignore my last message a fw port was created

"
2809340424,pull_request,open,,[FIX] website_sale_collect: do not allow adding out of stock products,"Before the user could add a product when in-store delivery method was
activated even if the product was not available for any delivery. Now,
we will check free quantities before adding.

opw-4479075

",vchu-odoo,2025-01-24 12:29:14+00:00,[],2025-02-07 15:33:04+00:00,,https://github.com/odoo/odoo/pull/195033,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612420034, 'issue_id': 2809340424, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195033.png)](https://mergebot.odoo.com/odoo/odoo/pull/195033)', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:29:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195033.png)](https://mergebot.odoo.com/odoo/odoo/pull/195033)

"
2809339884,pull_request,closed,,[FW][FW][FIX] core: inherit translations better when upgrade,"Before:
The typofix feature treats terms in the old and new values with similar text content as the same term, migrating the translations of the old term to the new term.

For example

The old value has the mapping:
'Draft': 'Brouillon'

The new value contains the term:
'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'

Since the old term and the new term share the same text content, 'Draft', after `write`, the new term reuses the old translation of 'Draft'. However, the translation 'Brouillon' is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the en_US value and is responsible for verifying translations afterward. However, it is problematic during upgrades because users cannot easily identify which records have changed and need to be rechecked.

After:
The translation inheritance behavior can be described as below Translations can be inherited after `write` from old terms to new terms which share the very close text contents
1. when `write` in production mode, text contents for translation terms are more important than the HTML/XML structures of them, and the old term translations should be remained as much as possible. Because
    * the writing user is responsible to recheck all translations after `write`.
    * it is easier for the writing user to copy technical HTML/XML structures than translate text contents for a language they may not know.
    * the feature can also be used as typofix when the only small diff is the text content
2. when `write` in upgrade time, the HTML/XML structure is more important than the text content, and the new term structure should be remained as much as possible. Because
    * HTML/XML structures might be changed a lot after upgrade, which may contain behavior relevant diff (e.g. `invisible`), even if text contents are not changed.
    * users have no idea which records' values are changed during upgrade and are hard to recheck their translations.
    * new terms are highly likely to be correctly translated in the latest po files which will be imported during upgrade.
    * the typofix feature can still be remained when the only small diff is the text content

Based on the above feature analysis, we use the below new strategy
1. translations can be inherited only if the old source term and the new source term share the same HTML/XML structure
2. translations can be inherited only if the old translation term and the new source term share the same HTML/XML structure
3. when translations are inherited, MODIFIER_ATTRS will be synchronized with the new source term, other attributes will be copied from the source term if available.

Forward-Port-Of: #194181

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194816",fw-bot,2025-01-24 12:28:59+00:00,[],2025-02-07 15:44:10+00:00,2025-01-24 15:39:17+00:00,https://github.com/odoo/odoo/pull/195032,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612419960, 'issue_id': 2809339884, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195032.png)](https://mergebot.odoo.com/odoo/odoo/pull/195032)', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612419979, 'issue_id': 2809339884, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 29, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:29:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195032.png)](https://mergebot.odoo.com/odoo/odoo/pull/195032)

fw-bot (Issue Creator) on (2025-01-24 12:29:48 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809338707,pull_request,closed,,"[FW][FIX] account: do not affect base of tax without ""is_base_affected""","**Steps to reproduce:**
- Install Accounting
- Create a first tax:
  * Tax Name: Tax1
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax1
  * Tax Group: Tax1
  * Affect Base of Subsequent Taxes: [Checked]
- Create a second tax:
  * Tax Name: Tax2
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax2
  * Tax Group: Tax2
  * Base Affected by Previous Taxes: [Not checked]
- Create an invoice
- Add an invoice line
- Add Tax1
- Add Tax2

**Issue:**
Base amount of Tax2 is affected by Tax1 when it should not.

opw-4450494




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194953
Forward-Port-Of: odoo/odoo#193451",fw-bot,2025-01-24 12:28:30+00:00,[],2025-02-07 15:44:09+00:00,2025-01-24 15:33:53+00:00,https://github.com/odoo/odoo/pull/195031,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612416880, 'issue_id': 2809338707, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195031.png)](https://mergebot.odoo.com/odoo/odoo/pull/195031)', 'created_at': datetime.datetime(2025, 1, 24, 12, 28, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612416905, 'issue_id': 2809338707, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 28, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:28:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195031.png)](https://mergebot.odoo.com/odoo/odoo/pull/195031)

fw-bot (Issue Creator) on (2025-01-24 12:28:32 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809336862,pull_request,closed,,[FW][FIX] point_of_sale: new session opening time,"- Fix bug where session opening time was set to previous session closing time.
- Now we want the pos session opening time to be set when we click ""Open register"".

task-id: 4500391

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194977",fw-bot,2025-01-24 12:27:50+00:00,[],2025-02-07 17:01:16+00:00,2025-01-24 16:58:21+00:00,https://github.com/odoo/odoo/pull/195030,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2612415330, 'issue_id': 2809336862, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195030.png)](https://mergebot.odoo.com/odoo/odoo/pull/195030)', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612415354, 'issue_id': 2809336862, 'author': 'fw-bot', 'body': '@manv-afk @caburj cherrypicking of pull request odoo/odoo#194977 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_session.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612629877, 'issue_id': 2809336862, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 13, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:27:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195030.png)](https://mergebot.odoo.com/odoo/odoo/pull/195030)

fw-bot (Issue Creator) on (2025-01-24 12:27:52 UTC): @manv-afk @caburj cherrypicking of pull request odoo/odoo#194977 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_session.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-24 14:13:37 UTC): @robodoo r+

"
2809336291,pull_request,closed,,[FW][FIX] pos_hr: prevent singleton error with multiple related partners,"Before this commit, if an employee had multiple related partners, an expected singleton error occurred when attempting to set the opening or closing of the session.

opw-4482497

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194984",fw-bot,2025-01-24 12:27:33+00:00,[],2025-02-07 17:01:14+00:00,2025-01-24 16:58:08+00:00,https://github.com/odoo/odoo/pull/195029,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612414800, 'issue_id': 2809336291, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195029.png)](https://mergebot.odoo.com/odoo/odoo/pull/195029)', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612414820, 'issue_id': 2809336291, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:27:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195029.png)](https://mergebot.odoo.com/odoo/odoo/pull/195029)

fw-bot (Issue Creator) on (2025-01-24 12:27:34 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809335403,pull_request,closed,,[FW][FIX] sale_pdf_quote_builder: quote builder tab not visible immediately,"Steps to Reproduce:
- Ensure no headers or footers are in Configuration > Headers/Footers.
- Create a new Sale Order (SO).
- Add a partner to the SO.
- Add a product to the SO that has a document linked to it.
- The `Quote Builder` tab does not appear until the SO is saved and reopened.

Issue:
The `Quote Builder` tab did not appear immediately after adding a product with linked documents. This required saving and reopening the SO to make the tab visible, causing inconvenience to users.

Cause:
The `_compute_available_product_document_ids` method lacked an `@api.depends` decorator for fields `product_id` and `product_template_id`. As a result, the dependent field `is_pdf_quote_builder_available` was not updated dynamically.

Fix:
Added the `@api.depends` decorator to `_compute_available_product_document_ids`, ensuring the computation is triggered immediately when `product_id` or `product_template_id` changes. This ensures that
`is_pdf_quote_builder_available` is recalculated dynamically, making the `Quote Builder` tab visible immediately.

- Also added `compute_sudo` on `available_product_document_ids` field to ensure
available documents consistancy even though users have different access.

opw-4364152

Forward-Port-Of: odoo/odoo#191344",fw-bot,2025-01-24 12:27:15+00:00,[],2025-01-27 14:17:04+00:00,2025-01-27 14:17:04+00:00,https://github.com/odoo/odoo/pull/195028,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2612414152, 'issue_id': 2809335403, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195028.png)](https://mergebot.odoo.com/odoo/odoo/pull/195028)', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612414166, 'issue_id': 2809335403, 'author': 'fw-bot', 'body': '@jeep-odoo @Demesmaeker cherrypicking of pull request odoo/odoo#191344 failed.\n\nstdout:\n```\nAuto-merging addons/sale_pdf_quote_builder/tests/test_pdf_quote_builder.py\nCONFLICT (content): Merge conflict in addons/sale_pdf_quote_builder/tests/test_pdf_quote_builder.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614963268, 'issue_id': 2809335403, 'author': 'kcv-odoo', 'body': 'Hello @Demesmaeker :duck: \r\nCan you r+ this? since I am not the author of main PR :see_no_evil:', 'created_at': datetime.datetime(2025, 1, 27, 6, 49, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615111032, 'issue_id': 2809335403, 'author': 'robodoo', 'body': ""@Demesmaeker unknown command '@kcv-odoo'.\n\nFor your own safety I've ignored *everything in your entire comment*.\n\nCurrently available commands:\n\n|command||\n|-|-|\n|`help`|displays this help|\n|`r(eview)+`|approves the PR, if it's a forwardport also approves all non-detached parents|\n|`r(eview)=<number>`|only approves the specified parents|\n|`up to <branch>`|only ports this PR forward to the specified branch (included)|\n|`close`|closes this forward-port|\n|`merge`|integrate the PR with a simple merge commit, using the PR description as message|\n|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|\n|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|\n|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|\n|`delegate+`|grants approval rights to the PR author|\n|`delegate=<...>`|grants approval rights on this PR to the specified github users|\n|`default`|stages the PR normally|\n|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|\n|`alone`|stages this PR only with other PRs of the same priority|\n|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|\n|`check`|fetches or refreshes PR metadata, resets mergebot state|\n\nNote: this help text is dynamic and will change with the state of the PR."", 'created_at': datetime.datetime(2025, 1, 27, 8, 27, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615115380, 'issue_id': 2809335403, 'author': 'Demesmaeker', 'body': '@robodoo delegate=kcv-odoo\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 8, 29, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615115486, 'issue_id': 2809335403, 'author': 'robodoo', 'body': '@kcv-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 27, 8, 29, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615504078, 'issue_id': 2809335403, 'author': 'kcv-odoo', 'body': '@Demesmaeker Thank you :sparkles: \r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 11, 28, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:27:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195028.png)](https://mergebot.odoo.com/odoo/odoo/pull/195028)

fw-bot (Issue Creator) on (2025-01-24 12:27:17 UTC): @jeep-odoo @Demesmaeker cherrypicking of pull request odoo/odoo#191344 failed.

stdout:
```
Auto-merging addons/sale_pdf_quote_builder/tests/test_pdf_quote_builder.py
CONFLICT (content): Merge conflict in addons/sale_pdf_quote_builder/tests/test_pdf_quote_builder.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kcv-odoo on (2025-01-27 06:49:08 UTC): Hello @Demesmaeker :duck: 
Can you r+ this? since I am not the author of main PR :see_no_evil:

robodoo on (2025-01-27 08:27:21 UTC): @Demesmaeker unknown command '@kcv-odoo'.

For your own safety I've ignored *everything in your entire comment*.

Currently available commands:

|command||
|-|-|
|`help`|displays this help|
|`r(eview)+`|approves the PR, if it's a forwardport also approves all non-detached parents|
|`r(eview)=<number>`|only approves the specified parents|
|`up to <branch>`|only ports this PR forward to the specified branch (included)|
|`close`|closes this forward-port|
|`merge`|integrate the PR with a simple merge commit, using the PR description as message|
|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|
|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|
|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|
|`delegate+`|grants approval rights to the PR author|
|`delegate=<...>`|grants approval rights on this PR to the specified github users|
|`default`|stages the PR normally|
|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|
|`alone`|stages this PR only with other PRs of the same priority|
|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|
|`check`|fetches or refreshes PR metadata, resets mergebot state|

Note: this help text is dynamic and will change with the state of the PR.

Demesmaeker on (2025-01-27 08:29:36 UTC): @robodoo delegate=kcv-odoo
@robodoo r+

robodoo on (2025-01-27 08:29:39 UTC): @kcv-odoo you may want to rebuild or fix this PR as it has failed CI.

kcv-odoo on (2025-01-27 11:28:39 UTC): @Demesmaeker Thank you :sparkles: 

@robodoo r+

"
2809334515,pull_request,open,,[FIX] html_editor: ZWS before banner,"Before this commit and since [1], when inserting a banner at the top of the editable, a zero-width space (ZWS) was inserted before the banner to circuvent a Chromium bug that prevents fully selecting the banner with the mouse [2].

This led to the undesirable behavior of having a text node (with a ZWS) as the first child of the editable, creating a line above the banner and allowing for text insertion at the editable's root.

This commit replaces the ZWS insertion with an empty paragraph, which can be later be moved around by the user.

[1]: https://github.com/odoo/odoo/commit/a0fcba694a8a23a947ba28d188d6806272627447
[2]: https://issues.chromium.org/issues/40822311

task-4512959
",cammarosano,2025-01-24 12:26:58+00:00,[],2025-01-24 13:56:06+00:00,,https://github.com/odoo/odoo/pull/195027,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612413468, 'issue_id': 2809334515, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195027.png)](https://mergebot.odoo.com/odoo/odoo/pull/195027)', 'created_at': datetime.datetime(2025, 1, 24, 12, 27, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:27:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195027.png)](https://mergebot.odoo.com/odoo/odoo/pull/195027)

"
2809334496,pull_request,closed,,[FW][FIX] mrp: correct date of late filter,"Steps to reproduce:
----

- Go to manufacturing
- Planning by production
- Add late filter

Issue:
----
The late filter ""does not work"", the filter is based on the day. But the late order should be based on a much more precise datetime.

Fix:
---
Changed the filter from current_date to datetime.now to have more precision in the time, and so it filters more accurately.

opw-4493678

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194811",fw-bot,2025-01-24 12:26:57+00:00,[],2025-01-27 10:59:27+00:00,2025-01-27 10:59:27+00:00,https://github.com/odoo/odoo/pull/195026,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612413376, 'issue_id': 2809334496, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195026.png)](https://mergebot.odoo.com/odoo/odoo/pull/195026)', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612413400, 'issue_id': 2809334496, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:26:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195026.png)](https://mergebot.odoo.com/odoo/odoo/pull/195026)

fw-bot (Issue Creator) on (2025-01-24 12:26:59 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809333635,pull_request,closed,,[FW][FIX] sale_project: fixed a test_cost_invoicing test case,"It was failing in single module builds /locally and the reason was due to the fact that project not having a analytic account.

task-4500108

Forward-Port-Of: odoo/odoo#194701",fw-bot,2025-01-24 12:26:39+00:00,[],2025-02-07 15:44:08+00:00,2025-01-24 15:33:49+00:00,https://github.com/odoo/odoo/pull/195025,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612412611, 'issue_id': 2809333635, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195025.png)](https://mergebot.odoo.com/odoo/odoo/pull/195025)', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612412629, 'issue_id': 2809333635, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:26:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195025.png)](https://mergebot.odoo.com/odoo/odoo/pull/195025)

fw-bot (Issue Creator) on (2025-01-24 12:26:41 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809332771,pull_request,closed,,[FW][FIX] l10n_eg_edi_eta: withholding tax amount declaration,"Steps to reproduce:
- With an EG Company setup
- Create an invoice with a '3% WH' tax
- Confirm invoice and send for validation

Issue: Validation will fail with error
```
{'code': '2', 'message': 'Validation Error', 'target': 'INV/2025/00001', 'propertyPath': None, 'details': [{'code': None, 'message': 'ArrayItemNotValid', 'target': '[0]', 'propertyPath': '#/invoiceLines[0]', 'details': None}, {'code': None, 'message': 'ArrayItemNotValid', 'target': '[1]', 'propertyPath': '#/taxTotals[1]', 'details': None}]}
```
This is caused by the withholding tax amount being reported as negative, while it should be reported as positive

opw-4453002

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194708",fw-bot,2025-01-24 12:26:21+00:00,[],2025-02-07 15:44:07+00:00,2025-01-24 15:33:44+00:00,https://github.com/odoo/odoo/pull/195024,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612412261, 'issue_id': 2809332771, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195024.png)](https://mergebot.odoo.com/odoo/odoo/pull/195024)', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612412292, 'issue_id': 2809332771, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:26:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195024.png)](https://mergebot.odoo.com/odoo/odoo/pull/195024)

fw-bot (Issue Creator) on (2025-01-24 12:26:30 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809332215,pull_request,closed,,[FW][FIX] html_editor: button command in powerbox should create a button,"Before this commit: Using the button command in the powerbox resulted in the creation of a regular link instead of a button.

After this commit: Executing the button command now correctly creates a primary button as intended.

task-4380129




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#189893",fw-bot,2025-01-24 12:26:04+00:00,[],2025-01-28 22:38:08+00:00,2025-01-28 22:38:07+00:00,https://github.com/odoo/odoo/pull/195023,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612412132, 'issue_id': 2809332215, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195023.png)](https://mergebot.odoo.com/odoo/odoo/pull/195023)', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612412190, 'issue_id': 2809332215, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 26, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612485615, 'issue_id': 2809332215, 'author': 'fw-bot', 'body': '@Jinjiu96 @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 24, 13, 4, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616673684, 'issue_id': 2809332215, 'author': 'fw-bot', 'body': '@Jinjiu96 @dmo-odoo the next pull request (odoo/odoo#195355) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 27, 19, 10, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2616733420, 'issue_id': 2809332215, 'author': 'Jinjiu96', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 19, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617228503, 'issue_id': 2809332215, 'author': 'robodoo', 'body': '@Jinjiu96 @dmo-odoo staging failed: ci/runbot on cb07cf7d60f7a59053a5e42453dcb0964d3a3b74 (view more at https://runbot.odoo.com/runbot/build/74034689)', 'created_at': datetime.datetime(2025, 1, 28, 0, 5, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617543912, 'issue_id': 2809332215, 'author': 'fw-bot', 'body': '@Jinjiu96 @dmo-odoo this forward port of odoo/odoo#189893 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 2, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619048149, 'issue_id': 2809332215, 'author': 'Jinjiu96', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 28, 13, 44, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:26:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195023.png)](https://mergebot.odoo.com/odoo/odoo/pull/195023)

fw-bot (Issue Creator) on (2025-01-24 12:26:28 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 13:04:05 UTC): @Jinjiu96 @dmo-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-27 19:10:18 UTC): @Jinjiu96 @dmo-odoo the next pull request (odoo/odoo#195355) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Jinjiu96 on (2025-01-27 19:40:00 UTC): @robodoo r+

robodoo on (2025-01-28 00:05:03 UTC): @Jinjiu96 @dmo-odoo staging failed: ci/runbot on cb07cf7d60f7a59053a5e42453dcb0964d3a3b74 (view more at https://runbot.odoo.com/runbot/build/74034689)

fw-bot (Issue Creator) on (2025-01-28 02:02:06 UTC): @Jinjiu96 @dmo-odoo this forward port of odoo/odoo#189893 is awaiting action (not merged or closed).

Jinjiu96 on (2025-01-28 13:44:42 UTC): @robodoo retry

"
2809313740,pull_request,closed,,[FW][FIX] hr_attendance: add tests for multiple flexible attendance records,"This PR adds a test to ensure that negative overtime works properly and is recomputed as multiple attendance records are made on a single day. For employees who clock out to take breaks, this is necessary.

This ensures that the ""extra hours"" propagate to the most recent attendance record, while zeroing out those before it.

The PR that brought the notion of negative overtime to flexible working schedules is here:
https://github.com/odoo/odoo/pull/193523#pullrequestreview-2569240672

Forward-Port-Of: odoo/odoo#194898",fw-bot,2025-01-24 12:19:47+00:00,[],2025-01-28 23:33:19+00:00,2025-01-28 23:33:19+00:00,https://github.com/odoo/odoo/pull/195022,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612395902, 'issue_id': 2809313740, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195022.png)](https://mergebot.odoo.com/odoo/odoo/pull/195022)', 'created_at': datetime.datetime(2025, 1, 24, 12, 19, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612395919, 'issue_id': 2809313740, 'author': 'fw-bot', 'body': '@hahu-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#195010\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 19, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617539292, 'issue_id': 2809313740, 'author': 'fw-bot', 'body': '@hahu-odoo @Bertrand2 this forward port of odoo/odoo#194898 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 0, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619024477, 'issue_id': 2809313740, 'author': 'hahu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 13, 35, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:19:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195022.png)](https://mergebot.odoo.com/odoo/odoo/pull/195022)

fw-bot (Issue Creator) on (2025-01-24 12:19:49 UTC): @hahu-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#195010

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-28 02:00:55 UTC): @hahu-odoo @Bertrand2 this forward port of odoo/odoo#194898 is awaiting action (not merged or closed).

hahu-odoo on (2025-01-28 13:35:46 UTC): @robodoo r+

"
2809293804,pull_request,closed,,[FW][FIX] pos_loyalty: prevent access error in multi-company gift card use,"Before this commit, if a gift card was created in another company and the gift card program was not assigned to any company, using the gift card in another company resulted in an error.

opw-4422730

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192246",fw-bot,2025-01-24 12:10:17+00:00,[],2025-01-28 10:25:05+00:00,2025-01-28 10:25:04+00:00,https://github.com/odoo/odoo/pull/195021,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2612377915, 'issue_id': 2809293804, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195021.png)](https://mergebot.odoo.com/odoo/odoo/pull/195021)', 'created_at': datetime.datetime(2025, 1, 24, 12, 10, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612377972, 'issue_id': 2809293804, 'author': 'fw-bot', 'body': '@pedrambiria @caburj cherrypicking of pull request odoo/odoo#192246 failed.\n\nstdout:\n```\nAuto-merging addons/pos_loyalty/models/loyalty_card.py\nCONFLICT (content): Merge conflict in addons/pos_loyalty/models/loyalty_card.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 10, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723314, 'issue_id': 2809293804, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#192246 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542212, 'issue_id': 2809293804, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#192246 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618588247, 'issue_id': 2809293804, 'author': 'pedrambiria', 'body': ""it's not an issue in this version"", 'created_at': datetime.datetime(2025, 1, 28, 10, 25, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 12:10:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195021.png)](https://mergebot.odoo.com/odoo/odoo/pull/195021)

fw-bot (Issue Creator) on (2025-01-24 12:10:20 UTC): @pedrambiria @caburj cherrypicking of pull request odoo/odoo#192246 failed.

stdout:
```
Auto-merging addons/pos_loyalty/models/loyalty_card.py
CONFLICT (content): Merge conflict in addons/pos_loyalty/models/loyalty_card.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:24 UTC): @pedrambiria @caburj this forward port of odoo/odoo#192246 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:40 UTC): @pedrambiria @caburj this forward port of odoo/odoo#192246 is awaiting action (not merged or closed).

pedrambiria on (2025-01-28 10:25:04 UTC): it's not an issue in this version

"
2809262641,pull_request,open,,[FIX] account: Error computing placeholder without date,"Description of the issue/feature this PR addresses:
When creating a new journal entry, clearing the date field causes an error because the system tries to compute the placeholder name field using the date, which is missing.

Current behavior before PR:
An error is raised when the date field is cleared while creating a journal entry, as the computation of the name field relies on the date field being present.

Desired behavior after PR is merged:
The system will check if the date field is present before computing the name field. If the date field is missing, a default value will be used, or a clear validation error will be displayed to the user.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",feg-adhoc,2025-01-24 11:54:38+00:00,[],2025-01-24 12:00:11+00:00,,https://github.com/odoo/odoo/pull/195020,"[('Accounting', '')]","[{'comment_id': 2612349325, 'issue_id': 2809262641, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195020.png)](https://mergebot.odoo.com/odoo/odoo/pull/195020)', 'created_at': datetime.datetime(2025, 1, 24, 11, 54, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:54:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195020.png)](https://mergebot.odoo.com/odoo/odoo/pull/195020)

"
2809255626,pull_request,closed,,[FW][FIX] l10n_my_edi: XML format and test mode,"Fixes an issue with the xml file where the tax
exchange rate node would be added before the
payment terms node if both features are used,
which render the xml wrong.

Also add a sudo when getting the system param
for the test url; as this shouldn't block a non
administrator user from testing the feature.

opw-4425472
opw-4505562

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194971",fw-bot,2025-01-24 11:51:07+00:00,[],2025-02-07 16:54:21+00:00,2025-01-24 16:49:09+00:00,https://github.com/odoo/odoo/pull/195019,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612342748, 'issue_id': 2809255626, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195019.png)](https://mergebot.odoo.com/odoo/odoo/pull/195019)', 'created_at': datetime.datetime(2025, 1, 24, 11, 51, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612342761, 'issue_id': 2809255626, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 51, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:51:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195019.png)](https://mergebot.odoo.com/odoo/odoo/pull/195019)

fw-bot (Issue Creator) on (2025-01-24 11:51:09 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809226044,pull_request,open,,[FIX] html_editor: remove empty format tags,"**Behavior before this PR:**

- Create a bold or italic tag using keyboard when selection is collapsed, leave it empty.
- Change selection using arrow key.
- Put cursor back where format tag was created.

Notice that empty element is not removed and text is formatted when writing something.

**Behavior after PR is merged:**

- This PR makes sure that empty format element gets removed when changing selection.
- Tag will not get removed if it's parent block element is empty.

task-4240818


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adsa-odoo,2025-01-24 11:37:34+00:00,[],2025-02-04 06:12:44+00:00,,https://github.com/odoo/odoo/pull/195018,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612314770, 'issue_id': 2809226044, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195018.png)](https://mergebot.odoo.com/odoo/odoo/pull/195018)', 'created_at': datetime.datetime(2025, 1, 24, 11, 37, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:37:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195018.png)](https://mergebot.odoo.com/odoo/odoo/pull/195018)

"
2809224553,pull_request,open,,"[IMP] pos_{, razorpay}: allow refund for multiple paymentlines","Before this commit:
==========
- We are not allowing multiple payment lines to be refunded or partial refunds.
- We were showing `Waiting for card` for the terminal payment's refund process as payment status.

After this commit:
==========
- Refunds for multiple payment lines and partial refunds will be allowed.
- We will show `Refund in process` for the terminal payment's refund process as payment status.


task-4512844",paan-odoo,2025-01-24 11:36:45+00:00,[],2025-02-07 12:43:48+00:00,,https://github.com/odoo/odoo/pull/195017,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612313301, 'issue_id': 2809224553, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195017.png)](https://mergebot.odoo.com/odoo/odoo/pull/195017)', 'created_at': datetime.datetime(2025, 1, 24, 11, 36, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:36:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195017.png)](https://mergebot.odoo.com/odoo/odoo/pull/195017)

"
2809209584,pull_request,closed,,[FW][FIX] website: do not observe mutations making s_popup visible,"Description of the issue this PR addresses:

Pressing enter in the `s_popup` snippet after making it visible via the right panel would hide the popup. This occurred because the mutation observer detected changes which shows the modal and rolled them back during the `insertLineBreak` operation. This commit ensures that those mutations are not observed.

task-4255083

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194696
Forward-Port-Of: odoo/odoo#191810",fw-bot,2025-01-24 11:28:35+00:00,[],2025-01-29 13:43:36+00:00,2025-01-29 13:43:36+00:00,https://github.com/odoo/odoo/pull/195016,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612298881, 'issue_id': 2809209584, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195016.png)](https://mergebot.odoo.com/odoo/odoo/pull/195016)', 'created_at': datetime.datetime(2025, 1, 24, 11, 28, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612298898, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 28, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612306296, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 24, 11, 32, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721937, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172376, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614945964, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 27, 6, 34, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542800, 'issue_id': 2809209584, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621076021, 'issue_id': 2809209584, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 9, 14, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:28:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195016.png)](https://mergebot.odoo.com/odoo/odoo/pull/195016)

fw-bot (Issue Creator) on (2025-01-24 11:28:36 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 11:32:43 UTC): @deso-odoo @dmo-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-25 02:01:35 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:55 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 06:34:03 UTC): @deso-odoo @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-28 02:01:49 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

dmo-odoo on (2025-01-29 09:14:38 UTC): @robodoo r+

"
2809209072,pull_request,closed,,[FW][FIX] stock: prioritize routes by sequence in extract_rule,"### Description of the issue/feature this PR addresses:
When a product is configured with both buy and manufacture routes, the manufacture route is always prioritized, regardless of the sequence defined in the routes.

### Current behavior before PR:
The method extract_rule stops evaluating routes once it finds a valid rule, even if other rules with a lower sequence exist. This leads to the manufacture route being prioritized over buy, which is not the intended behavior.

### Desired behavior after PR is merged:
The routes are now evaluated based on their sequence, ensuring that rules associated with routes of lower sequence are considered first.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
cc @ForgeFlow

Forward-Port-Of: odoo/odoo#194922
Forward-Port-Of: odoo/odoo#188846",fw-bot,2025-01-24 11:28:17+00:00,[],2025-01-29 13:43:37+00:00,2025-01-29 13:43:36+00:00,https://github.com/odoo/odoo/pull/195015,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612298454, 'issue_id': 2809209072, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195015.png)](https://mergebot.odoo.com/odoo/odoo/pull/195015)', 'created_at': datetime.datetime(2025, 1, 24, 11, 28, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612298471, 'issue_id': 2809209072, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 28, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:28:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195015.png)](https://mergebot.odoo.com/odoo/odoo/pull/195015)

fw-bot (Issue Creator) on (2025-01-24 11:28:22 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809187391,pull_request,closed,,[FW][I18N] point_of_sale: make receipt header fully translated,"Because 'Tax ID' was within the `t-esc` the term was never translated. This goes against some country's compliance requirements for receipts, so we make it translatable now.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194943
Forward-Port-Of: odoo/odoo#194801",fw-bot,2025-01-24 11:16:41+00:00,[],2025-02-07 16:54:20+00:00,2025-01-24 16:49:04+00:00,https://github.com/odoo/odoo/pull/195014,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2612277698, 'issue_id': 2809187391, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195014.png)](https://mergebot.odoo.com/odoo/odoo/pull/195014)', 'created_at': datetime.datetime(2025, 1, 24, 11, 16, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612277720, 'issue_id': 2809187391, 'author': 'fw-bot', 'body': '@ticodoo @oomsveta cherrypicking of pull request odoo/odoo#194801 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/i18n/point_of_sale.pot\nCONFLICT (content): Merge conflict in addons/point_of_sale/i18n/point_of_sale.pot\nAuto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.js\nAuto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 16, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612616493, 'issue_id': 2809187391, 'author': 'ticodoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 7, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:16:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195014.png)](https://mergebot.odoo.com/odoo/odoo/pull/195014)

fw-bot (Issue Creator) on (2025-01-24 11:16:42 UTC): @ticodoo @oomsveta cherrypicking of pull request odoo/odoo#194801 failed.

stdout:
```
Auto-merging addons/point_of_sale/i18n/point_of_sale.pot
CONFLICT (content): Merge conflict in addons/point_of_sale/i18n/point_of_sale.pot
Auto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.js
Auto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ticodoo on (2025-01-24 14:07:55 UTC): @robodoo r+

"
2809182687,pull_request,open,,[IMP] website_sale: Only get draft sale orders,"We shouldn't use other sale orders, as the system might apply changes to `done` sale.orders

Description of the issue/feature this PR addresses: If we change the state of a website order and the user accesses again, it might apply modifications. This can happen with the customer.

Current behavior before PR: 

[Grabación de pantalla desde 24-01-25 12:09:07.webm](https://github.com/user-attachments/assets/63627b1d-8b3f-4b0c-8301-69606e994e3d)

Desired behavior after PR is merged:

The sale order is not modified




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",etobella,2025-01-24 11:14:14+00:00,[],2025-01-30 16:15:28+00:00,,https://github.com/odoo/odoo/pull/195013,"[('Website', '')]","[{'comment_id': 2612273429, 'issue_id': 2809182687, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195013.png)](https://mergebot.odoo.com/odoo/odoo/pull/195013)', 'created_at': datetime.datetime(2025, 1, 24, 11, 14, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612279047, 'issue_id': 2809182687, 'author': 'pedrobaeza', 'body': '@Feyensv FYI', 'created_at': datetime.datetime(2025, 1, 24, 11, 17, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624872974, 'issue_id': 2809182687, 'author': 'Feyensv', 'body': ""Mhm, I don't like touching this kind of stuff in stable :thinking:\r\nSome targeted fixes were done already in some specific routes to handle the case when the cart might not be in `draft` state anymore and I don't mind adding some here and there, but I don't feel at ease modifying `sale_get_order` that way in stable :confused: because I cannot be sure it won't break any existing code.\r\n\r\nI agree it is not as reliable as it should be, and we're working on handling this in a better way in master (#186923)."", 'created_at': datetime.datetime(2025, 1, 30, 15, 50, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624940362, 'issue_id': 2809182687, 'author': 'etobella', 'body': ""Well, the only thing that we changed here was to ignore non-draft sale orders. \r\n\r\nHowever, I understand your concerns. In some situations it makes more sense to leave a bug than provoking something larger. I don't know if it was the case, but I am sure you have a bigger picture :wink:"", 'created_at': datetime.datetime(2025, 1, 30, 16, 15, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:14:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195013.png)](https://mergebot.odoo.com/odoo/odoo/pull/195013)

pedrobaeza on (2025-01-24 11:17:27 UTC): @Feyensv FYI

Feyensv on (2025-01-30 15:50:09 UTC): Mhm, I don't like touching this kind of stuff in stable :thinking:
Some targeted fixes were done already in some specific routes to handle the case when the cart might not be in `draft` state anymore and I don't mind adding some here and there, but I don't feel at ease modifying `sale_get_order` that way in stable :confused: because I cannot be sure it won't break any existing code.

I agree it is not as reliable as it should be, and we're working on handling this in a better way in master (#186923).

etobella (Issue Creator) on (2025-01-30 16:15:26 UTC): Well, the only thing that we changed here was to ignore non-draft sale orders. 

However, I understand your concerns. In some situations it makes more sense to leave a bug than provoking something larger. I don't know if it was the case, but I am sure you have a bigger picture :wink:

"
2809168750,pull_request,closed,,[FW][FIX] portal: invoice layout issue,"This PR addresses the layout issue in the sidebar of the portal, where a preview of the customer's invoice is displayed.

Before this PR, users encountered a broken layout for large invoice amounts, making it difficult to read the total.

This issue is resolved in this PR by adding a rules for the `h2` and `span` fields ensuring proper wrapping for better readability.


Steps to reproduce:

- Login as admin.
- Go to Website app.
- Navigate to ""My account"" at my/home url.
- Click on ""My invoices"" or navigate to my/invoices url.
- Click on one invoice in order to see its preview.
- Via the browser tools, edit the amount of on the left sidebar and insert a very big number.

task-4435472

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194277
Forward-Port-Of: odoo/odoo#192769",fw-bot,2025-01-24 11:06:51+00:00,[],2025-01-30 15:41:44+00:00,2025-01-30 15:32:51+00:00,https://github.com/odoo/odoo/pull/195012,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2612260882, 'issue_id': 2809168750, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195012.png)](https://mergebot.odoo.com/odoo/odoo/pull/195012)', 'created_at': datetime.datetime(2025, 1, 24, 11, 6, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612260904, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194923\n* odoo/odoo#194903\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 6, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721896, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172282, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723264, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542097, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623354404, 'issue_id': 2809168750, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 30, 2, 2, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:06:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195012.png)](https://mergebot.odoo.com/odoo/odoo/pull/195012)

fw-bot (Issue Creator) on (2025-01-24 11:06:53 UTC): @fres-sudo @qsm-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194923
* odoo/odoo#194903

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-25 02:01:30 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:47 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:21 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:38 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-30 02:02:04 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

"
2809165651,pull_request,closed,,[CLA] update signatures for Camptocamp,"Removed old colleagues and added Rafael Lima.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",simahawk,2025-01-24 11:05:18+00:00,[],2025-01-28 15:58:34+00:00,2025-01-28 15:58:34+00:00,https://github.com/odoo/odoo/pull/195011,"[('CLA', 'Contributor License Agreement'), ('18.2', None)]","[{'comment_id': 2612258074, 'issue_id': 2809165651, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195011.png)](https://mergebot.odoo.com/odoo/odoo/pull/195011)', 'created_at': datetime.datetime(2025, 1, 24, 11, 5, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612371057, 'issue_id': 2809165651, 'author': 'mart-e', 'body': 'Hi @simahawk,\r\nYou are using your noupdate email address, which is why the CLA still fails', 'created_at': datetime.datetime(2025, 1, 24, 12, 6, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615333308, 'issue_id': 2809165651, 'author': 'MiquelRForgeFlow', 'body': 'Was not better to use the `(up to 20xx-xx-xx)` format instead of deleting them?', 'created_at': datetime.datetime(2025, 1, 27, 10, 10, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615467393, 'issue_id': 2809165651, 'author': 'mart-e', 'body': 'If they have already made a commit, yes indeed it’s better to keep them (and add a date if you want to indicate they are no longer working here).\r\nI checked and indeed, it seems that most already contributed.', 'created_at': datetime.datetime(2025, 1, 27, 11, 11, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618238357, 'issue_id': 2809165651, 'author': 'simahawk', 'body': ""TBH I don't know when everybody left and I'd like not to spend time on this. I've left only the newcomer.\r\nThanks for your review!"", 'created_at': datetime.datetime(2025, 1, 28, 8, 28, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618612012, 'issue_id': 2809165651, 'author': 'mart-e', 'body': '@simahawk this is just informal anyway, the fact that we prefer to leave it is to make it easier for us to track in the very unlikely scenario of somebody complaining he did not signed the cla.\r\nAs it is very unlikely that an old employee makes a pr with his no-longer-working corporate email address.\r\nIf that starts to become an issue at one point (too long,…), we can discuss the cleanup of cla files.\r\n\r\nBest,\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 10, 35, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:05:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195011.png)](https://mergebot.odoo.com/odoo/odoo/pull/195011)

mart-e on (2025-01-24 12:06:37 UTC): Hi @simahawk,
You are using your noupdate email address, which is why the CLA still fails

MiquelRForgeFlow on (2025-01-27 10:10:59 UTC): Was not better to use the `(up to 20xx-xx-xx)` format instead of deleting them?

mart-e on (2025-01-27 11:11:43 UTC): If they have already made a commit, yes indeed it’s better to keep them (and add a date if you want to indicate they are no longer working here).
I checked and indeed, it seems that most already contributed.

simahawk (Issue Creator) on (2025-01-28 08:28:20 UTC): TBH I don't know when everybody left and I'd like not to spend time on this. I've left only the newcomer.
Thanks for your review!

mart-e on (2025-01-28 10:35:19 UTC): @simahawk this is just informal anyway, the fact that we prefer to leave it is to make it easier for us to track in the very unlikely scenario of somebody complaining he did not signed the cla.
As it is very unlikely that an old employee makes a pr with his no-longer-working corporate email address.
If that starts to become an issue at one point (too long,…), we can discuss the cleanup of cla files.

Best,

@robodoo r+

"
2809164225,pull_request,closed,,[FW][FIX] hr_attendance: add tests for multiple flexible attendance records,"This PR adds a test to ensure that negative overtime works properly and is recomputed as multiple attendance records are made on a single day. For employees who clock out to take breaks, this is necessary.

This ensures that the ""extra hours"" propagate to the most recent attendance record, while zeroing out those before it.

The PR that brought the notion of negative overtime to flexible working schedules is here:
https://github.com/odoo/odoo/pull/193523#pullrequestreview-2569240672

Forward-Port-Of: odoo/odoo#194898",fw-bot,2025-01-24 11:04:34+00:00,[],2025-01-28 22:38:12+00:00,2025-01-28 22:38:12+00:00,https://github.com/odoo/odoo/pull/195010,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612256587, 'issue_id': 2809164225, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195010.png)](https://mergebot.odoo.com/odoo/odoo/pull/195010)', 'created_at': datetime.datetime(2025, 1, 24, 11, 4, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612256613, 'issue_id': 2809164225, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 11, 4, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 11:04:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195010.png)](https://mergebot.odoo.com/odoo/odoo/pull/195010)

fw-bot (Issue Creator) on (2025-01-24 11:04:36 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809151119,pull_request,closed,,"[IMP] web, website: minimize address bar on scroll in iOS","On iOS, the address bar doesn't minimize when scrolling, which reduces the usable screen space and impacts user experience. This commit addresses the issue by adjusting the CSS to ensure the address bar minimizes when the user begins to scroll.

Changes:
- Removed `#wrapwrap` from the `html, body` selector to allow proper scrolling behavior.
- Added `width` and `height` properties to `html, body`.
- Added `width` and `min-height` properties to `#wrapwrap` when it has the class `o_safari_browser`.
- Applied conditional styles to `html` and `body` to hide overflow when `#wrapwrap` does not have the class `o_safari_browser`.
- Ensured `#wrapwrap` has `overflow: auto` when it does not have the class `o_safari_browser`.
- Updated the test case condition to verify the overflow property as well

This change enhances the content visibility and reduces distractions for users on iOS devices.

task-4177998",msh-odoo,2025-01-24 10:57:44+00:00,[],2025-01-25 04:55:07+00:00,2025-01-25 04:55:07+00:00,https://github.com/odoo/odoo/pull/195009,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612244204, 'issue_id': 2809151119, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195009.png)](https://mergebot.odoo.com/odoo/odoo/pull/195009)', 'created_at': datetime.datetime(2025, 1, 24, 10, 57, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:57:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195009.png)](https://mergebot.odoo.com/odoo/odoo/pull/195009)

"
2809139062,pull_request,closed,,"[IMP] mail, im_livechat: remove channel leave toaster","This notification has little value as the channel is visually removed.

The opportunity is taken to clean the handlers to be simple store data.

Discussed as part of task-4488437

https://github.com/odoo/enterprise/pull/77760",seb-odoo,2025-01-24 10:51:23+00:00,['seb-odoo'],2025-01-24 16:57:23+00:00,2025-01-24 16:40:06+00:00,https://github.com/odoo/odoo/pull/195008,"[('RD', 'research & development, internal work'), ('Discuss', 'channels, livechat, chatter'), ('18.2', None)]","[{'comment_id': 2612232026, 'issue_id': 2809139062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195008.png)](https://mergebot.odoo.com/odoo/odoo/pull/195008)', 'created_at': datetime.datetime(2025, 1, 24, 10, 51, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:51:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195008.png)](https://mergebot.odoo.com/odoo/odoo/pull/195008)

"
2809129958,pull_request,open,,[IMP] maintenance: use `date_dl` existing variable instead of computing it twice,"Description of the issue/feature this PR addresses:
In the bellow bloc code `fields.Datetime.from_string(request.schedule_date).date()` is computed twice, but was saved into a variable just above. 

```py
            date_dl = fields.Datetime.from_string(request.schedule_date).date()
            updated = request.activity_reschedule(
                ['maintenance.mail_act_maintenance_request'],
                date_deadline=date_dl,
                new_user_id=request.user_id.id or request.owner_user_id.id or self.env.uid)
            if not updated:
                note = request._get_activity_note()
                request.activity_schedule(
                    'maintenance.mail_act_maintenance_request',
                    fields.Datetime.from_string(request.schedule_date).date(),
                    note=note, user_id=request.user_id.id or request.owner_user_id.id or self.env.uid)
```
Current behavior before PR:
The variable is computed twice
Desired behavior after PR is merged:
Using the cached variable instead



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",BenoitAnastay,2025-01-24 10:46:45+00:00,[],2025-01-24 11:00:14+00:00,,https://github.com/odoo/odoo/pull/195007,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2612223461, 'issue_id': 2809129958, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195007.png)](https://mergebot.odoo.com/odoo/odoo/pull/195007)', 'created_at': datetime.datetime(2025, 1, 24, 10, 46, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:46:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195007.png)](https://mergebot.odoo.com/odoo/odoo/pull/195007)

"
2809124624,pull_request,closed,,[FW][FIX] l10n_my_edi: XML format and test mode,"Fixes an issue with the xml file where the tax
exchange rate node would be added before the
payment terms node if both features are used,
which render the xml wrong.

Also add a sudo when getting the system param
for the test url; as this shouldn't block a non
administrator user from testing the feature.

opw-4425472
opw-4505562

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194971",fw-bot,2025-01-24 10:44:09+00:00,[],2025-02-07 17:46:44+00:00,2025-01-24 17:38:36+00:00,https://github.com/odoo/odoo/pull/195006,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612218420, 'issue_id': 2809124624, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195006.png)](https://mergebot.odoo.com/odoo/odoo/pull/195006)', 'created_at': datetime.datetime(2025, 1, 24, 10, 44, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612218444, 'issue_id': 2809124624, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 10, 44, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:44:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195006.png)](https://mergebot.odoo.com/odoo/odoo/pull/195006)

fw-bot (Issue Creator) on (2025-01-24 10:44:11 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2809122375,pull_request,closed,,[FW][FIX] website_hr_recruitment: fix plural,"Forward-Port-Of: odoo/odoo#194174
Forward-Port-Of: odoo/odoo#193276",fw-bot,2025-01-24 10:43:02+00:00,[],2025-01-28 16:25:12+00:00,2025-01-28 16:25:12+00:00,https://github.com/odoo/odoo/pull/195005,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2612216231, 'issue_id': 2809122375, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195005.png)](https://mergebot.odoo.com/odoo/odoo/pull/195005)', 'created_at': datetime.datetime(2025, 1, 24, 10, 43, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612216292, 'issue_id': 2809122375, 'author': 'fw-bot', 'body': '@Bertrand2 cherrypicking of pull request odoo/odoo#193276 failed.\n\nstdout:\n```\nAuto-merging addons/website_hr_recruitment/i18n/website_hr_recruitment.pot\nAuto-merging addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml\nCONFLICT (content): Merge conflict in addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 10, 43, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721877, 'issue_id': 2809122375, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172245, 'issue_id': 2809122375, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723133, 'issue_id': 2809122375, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619095476, 'issue_id': 2809122375, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 14, 3, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:43:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195005.png)](https://mergebot.odoo.com/odoo/odoo/pull/195005)

fw-bot (Issue Creator) on (2025-01-24 10:43:05 UTC): @Bertrand2 cherrypicking of pull request odoo/odoo#193276 failed.

stdout:
```
Auto-merging addons/website_hr_recruitment/i18n/website_hr_recruitment.pot
Auto-merging addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml
CONFLICT (content): Merge conflict in addons/website_hr_recruitment/views/website_hr_recruitment_templates.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-25 02:01:27 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:44 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:13 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

Bertrand2 on (2025-01-28 14:03:04 UTC): robodoo r+

"
2809111092,pull_request,closed,,[FIX] point_of_sale: fix crash with problematic chars in htmlToCanvas,"__Current behavior before commit:__
Sometimes when a Worldline terminal makes a payment with Edenred or Sodexo, it creates a ticket with special ascii characters like `0x0E` that are not supposed to be printed. Some of those characters make the [`createImage`][1] method throw an error with the `onerror` Event.

__Description of the fix:__
Added the `sanitizeNodeText` function to remove all problematic ascii characters that should not be printed anyway.
Added a test to make sure `htmlToCanvas` can handle all ascii characters without crashing.

opw-4322339

[1]:https://github.com/odoo/odoo/blob/a98e802976f6798f3aea07231a366fbcd8002ce2/addons/point_of_sale/static/src/app/utils/html-to-image.js#L217",Dj0ulo,2025-01-24 10:37:14+00:00,[],2025-02-04 17:22:49+00:00,2025-02-04 17:22:48+00:00,https://github.com/odoo/odoo/pull/195004,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612205194, 'issue_id': 2809111092, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195004.png)](https://mergebot.odoo.com/odoo/odoo/pull/195004)', 'created_at': datetime.datetime(2025, 1, 24, 10, 37, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618375116, 'issue_id': 2809111092, 'author': 'vlst-odoo', 'body': ""this makes sense to me, but it's weird to modify that file there. I don't really know why the file is not in a `lib` folder, so it's clear that it's not our code. Maybe you can make a thin wrapper around `htmlToCanvas` and use that instead ?"", 'created_at': datetime.datetime(2025, 1, 28, 9, 10, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631187123, 'issue_id': 2809111092, 'author': 'Dj0ulo', 'body': ""@vlst-odoo done! tbh I actually didn't notice it was not Odoo code because of this reason"", 'created_at': datetime.datetime(2025, 2, 3, 14, 38, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:37:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195004.png)](https://mergebot.odoo.com/odoo/odoo/pull/195004)

vlst-odoo on (2025-01-28 09:10:28 UTC): this makes sense to me, but it's weird to modify that file there. I don't really know why the file is not in a `lib` folder, so it's clear that it's not our code. Maybe you can make a thin wrapper around `htmlToCanvas` and use that instead ?

Dj0ulo (Issue Creator) on (2025-02-03 14:38:37 UTC): @vlst-odoo done! tbh I actually didn't notice it was not Odoo code because of this reason

"
2809109206,pull_request,closed,,[IMP] account: Add a way to force manual tax/base amounts to the taxes computation,"
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",smetl,2025-01-24 10:36:15+00:00,[],2025-02-03 14:44:30+00:00,2025-02-03 14:44:30+00:00,https://github.com/odoo/odoo/pull/195003,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612203331, 'issue_id': 2809109206, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195003.png)](https://mergebot.odoo.com/odoo/odoo/pull/195003)', 'created_at': datetime.datetime(2025, 1, 24, 10, 36, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627804199, 'issue_id': 2809109206, 'author': 'caburj', 'body': 'robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 31, 16, 55, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627804277, 'issue_id': 2809109206, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 31, 16, 55, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627813687, 'issue_id': 2809109206, 'author': 'robodoo', 'body': '@smetl @caburj linked pull request(s) odoo/enterprise#77743 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 31, 17, 0, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630412224, 'issue_id': 2809109206, 'author': 'clbr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 9, 31, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:36:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195003.png)](https://mergebot.odoo.com/odoo/odoo/pull/195003)

caburj on (2025-01-31 16:55:05 UTC): robodoo rebase-ff r+

robodoo on (2025-01-31 16:55:07 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-31 17:00:02 UTC): @smetl @caburj linked pull request(s) odoo/enterprise#77743 not ready. Linked PRs are not staged until all of them are ready.

clbr-odoo on (2025-02-03 09:31:57 UTC): @robodoo r+

"
2809104112,pull_request,closed,,[FIX] website_payment: public user tokenize donation feedback,"After commit ddda5d4a2623d03699d5cb6860d5c984807b6e3d public users were allowed to tokenize their payments with the exception of donation the tokenize field was forced to be False.
However Stripe threw an error when the received intent was different than the one on the frontend.

Fix:
Hide option to tokenize for unlogged in users for donations.

opw-4389881



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",livaios,2025-01-24 10:33:38+00:00,[],2025-01-29 13:37:06+00:00,2025-01-29 13:37:06+00:00,https://github.com/odoo/odoo/pull/195001,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612198546, 'issue_id': 2809104112, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195001.png)](https://mergebot.odoo.com/odoo/odoo/pull/195001)', 'created_at': datetime.datetime(2025, 1, 24, 10, 33, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621252935, 'issue_id': 2809104112, 'author': 'livaios', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 10, 31, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:33:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195001.png)](https://mergebot.odoo.com/odoo/odoo/pull/195001)

livaios (Issue Creator) on (2025-01-29 10:31:24 UTC): @robodoo r+

"
2809100387,pull_request,closed,,[FIX] account: partner autocomplete,"`partner_gid` was missing from `res_company_form_view_onboarding` view which was creating a bug when applying the partner autocomplete.

opw-4489441

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",rugo-odoo,2025-01-24 10:31:40+00:00,[],2025-02-07 15:44:12+00:00,2025-01-24 15:40:54+00:00,https://github.com/odoo/odoo/pull/195000,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612194906, 'issue_id': 2809100387, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195000.png)](https://mergebot.odoo.com/odoo/odoo/pull/195000)', 'created_at': datetime.datetime(2025, 1, 24, 10, 31, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:31:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/195000.png)](https://mergebot.odoo.com/odoo/odoo/pull/195000)

"
2809090142,pull_request,closed,,[IMP] pos_hr: make edit payment button invisible on receipt print,"Before this commit:
===============
- The 'Edit Payment' button appears even after printing the receipt. (only when pos_hr installed)

After this commit:
===============
- The 'Edit Payment' button will disappear after printing the receipt.

task-4507326


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",paso-odoo,2025-01-24 10:26:35+00:00,[],2025-01-30 18:09:11+00:00,2025-01-30 18:09:11+00:00,https://github.com/odoo/odoo/pull/194999,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612185089, 'issue_id': 2809090142, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194999.png)](https://mergebot.odoo.com/odoo/odoo/pull/194999)', 'created_at': datetime.datetime(2025, 1, 24, 10, 26, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621480527, 'issue_id': 2809090142, 'author': 'caburj', 'body': 'Can you make the `currentOrder` in the receipt screen component a getter instead of modifying the template?\r\n\r\n```\r\nget currentOrder() {\r\n    return this.pos.get_order();\r\n}\r\n```', 'created_at': datetime.datetime(2025, 1, 29, 12, 15, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624522716, 'issue_id': 2809090142, 'author': 'paso-odoo', 'body': '> Can you make the `currentOrder` in the receipt screen component a getter instead of modifying the template?\r\n> \r\n> ```\r\n> get currentOrder() {\r\n>     return this.pos.get_order();\r\n> }\r\n> ```\r\n\r\n@caburj \r\nChanges have been made!\r\nThanks', 'created_at': datetime.datetime(2025, 1, 30, 13, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624743029, 'issue_id': 2809090142, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 15, 3, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:26:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194999.png)](https://mergebot.odoo.com/odoo/odoo/pull/194999)

caburj on (2025-01-29 12:15:12 UTC): Can you make the `currentOrder` in the receipt screen component a getter instead of modifying the template?

```
get currentOrder() {
    return this.pos.get_order();
}
```

paso-odoo (Issue Creator) on (2025-01-30 13:30:00 UTC): @caburj 
Changes have been made!
Thanks

caburj on (2025-01-30 15:03:14 UTC): robodoo r+

"
2809063912,pull_request,open,,Master mercado pago integration anko,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",anko-odoo,2025-01-24 10:15:14+00:00,[],2025-01-24 11:00:22+00:00,,https://github.com/odoo/odoo/pull/194998,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612160700, 'issue_id': 2809063912, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194998.png)](https://mergebot.odoo.com/odoo/odoo/pull/194998)', 'created_at': datetime.datetime(2025, 1, 24, 10, 15, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:15:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194998.png)](https://mergebot.odoo.com/odoo/odoo/pull/194998)

"
2809050814,pull_request,closed,,[FIX] payment_paypal: disable the payment button when not allowed to pay,"Prior to this commit, the PayPal SDK was used to render a single payment button that replaced the generic submit button of the payment form. This prevented disabling the button when the conditions were not met to allow the payment (e.g., the ""Terms and Conditions checkbox was not ticked) as this mechanism relies on the PaymentButton public widget, which was incompatible with PayPal's custom buttons.

This commit ensures that PayPal buttons, too, are disabled when the payment is not allowed by making the PaymentButton widget attach itself to the PayPal button container, creating two PayPal buttons - one enabled and one permanently disabled - instead of one, and alternately showing them depending on whether the payment is allowed.

opw-4354267
",AntoineVDV,2025-01-24 10:10:06+00:00,[],2025-01-28 18:24:46+00:00,2025-01-28 18:24:46+00:00,https://github.com/odoo/odoo/pull/194997,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612149196, 'issue_id': 2809050814, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194997.png)](https://mergebot.odoo.com/odoo/odoo/pull/194997)', 'created_at': datetime.datetime(2025, 1, 24, 10, 10, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618385251, 'issue_id': 2809050814, 'author': 'AntoineVDV', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 9, 15, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:10:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194997.png)](https://mergebot.odoo.com/odoo/odoo/pull/194997)

AntoineVDV (Issue Creator) on (2025-01-28 09:15:14 UTC): @robodoo r+

"
2809039224,pull_request,closed,,[FW][FIX] web_editor: prevent adding empty `p` when deleting an image,"**Problem**:
When an image inside a `<p>` tag (e.g., `<p><img></p>`) is deleted using the toolbar delete button, the selection is not properly restored, leaving an empty `<p>` in the DOM and the selection in the editor root.

**Solution**:
Restore the selection to the correct position after deleting the image to avoid leaving an empty `<p>`.

**Steps to Reproduce**:
1. Open an empty editor and add an image.
2. Delete the image using the toolbar delete button.
3. Inspect the DOM:
   - An empty `<p>` remains, and the selection is in the editor root.

opw-4472173

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194882
Forward-Port-Of: odoo/odoo#193396",fw-bot,2025-01-24 10:05:03+00:00,[],2025-01-29 13:43:35+00:00,2025-01-29 13:43:35+00:00,https://github.com/odoo/odoo/pull/194996,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612135426, 'issue_id': 2809039224, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194996.png)](https://mergebot.odoo.com/odoo/odoo/pull/194996)', 'created_at': datetime.datetime(2025, 1, 24, 10, 5, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612135454, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 10, 5, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612175058, 'issue_id': 2809039224, 'author': 'dmo-odoo', 'body': ""@walidsahli Does this bug also happen in `html_editor`? If yes you'll need to adapt it too."", 'created_at': datetime.datetime(2025, 1, 24, 10, 21, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612184918, 'issue_id': 2809039224, 'author': 'walidsahli', 'body': ""> @walidsahli Does this bug also happen in `html_editor`? If yes you'll need to adapt it too.\r\n\r\n@dmo-odoo will check if it happens will adapt."", 'created_at': datetime.datetime(2025, 1, 24, 10, 26, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612199363, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 24, 10, 34, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612471329, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 12, 56, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612482457, 'issue_id': 2809039224, 'author': 'walidsahli', 'body': '@dmo-odoo PR updated', 'created_at': datetime.datetime(2025, 1, 24, 13, 2, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723073, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617541732, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620471457, 'issue_id': 2809039224, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621073845, 'issue_id': 2809039224, 'author': 'dmo-odoo', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 29, 9, 13, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621073931, 'issue_id': 2809039224, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 29, 9, 13, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:05:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194996.png)](https://mergebot.odoo.com/odoo/odoo/pull/194996)

fw-bot (Issue Creator) on (2025-01-24 10:05:05 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dmo-odoo on (2025-01-24 10:21:55 UTC): @walidsahli Does this bug also happen in `html_editor`? If yes you'll need to adapt it too.

walidsahli on (2025-01-24 10:26:33 UTC): @dmo-odoo will check if it happens will adapt.

fw-bot (Issue Creator) on (2025-01-24 10:34:09 UTC): @walidsahli @dmo-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 12:56:40 UTC): @walidsahli @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

walidsahli on (2025-01-24 13:02:32 UTC): @dmo-odoo PR updated

fw-bot (Issue Creator) on (2025-01-27 02:02:10 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:32 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 02:01:08 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193396 is awaiting action (not merged or closed).

dmo-odoo on (2025-01-29 09:13:35 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-29 09:13:38 UTC): Merge method set to rebase and fast-forward.

"
2809038818,pull_request,closed,,[IMP] maintenance: use `date_dl` existing variable instead of computing it twice,"Description of the issue/feature this PR addresses:
In the bellow bloc code `fields.Datetime.from_string(request.schedule_date).date()` is computed twice, but was saved into a variable just above. 

```py
            date_dl = fields.Datetime.from_string(request.schedule_date).date()
            updated = request.activity_reschedule(
                ['maintenance.mail_act_maintenance_request'],
                date_deadline=date_dl,
                new_user_id=request.user_id.id or request.owner_user_id.id or self.env.uid)
            if not updated:
                note = request._get_activity_note()
                request.activity_schedule(
                    'maintenance.mail_act_maintenance_request',
                    fields.Datetime.from_string(request.schedule_date).date(),
                    note=note, user_id=request.user_id.id or request.owner_user_id.id or self.env.uid)
```
Current behavior before PR:
The variable is computed twice
Desired behavior after PR is merged:
Using the cached variable instead



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",BenoitAnastay,2025-01-24 10:04:52+00:00,[],2025-01-24 10:47:14+00:00,2025-01-24 10:45:40+00:00,https://github.com/odoo/odoo/pull/194995,[],"[{'comment_id': 2612135010, 'issue_id': 2809038818, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194995.png)](https://mergebot.odoo.com/odoo/odoo/pull/194995)', 'created_at': datetime.datetime(2025, 1, 24, 10, 4, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612224188, 'issue_id': 2809038818, 'author': 'BenoitAnastay', 'body': 'Commits squashed #195007', 'created_at': datetime.datetime(2025, 1, 24, 10, 47, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 10:04:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194995.png)](https://mergebot.odoo.com/odoo/odoo/pull/194995)

BenoitAnastay (Issue Creator) on (2025-01-24 10:47:12 UTC): Commits squashed #195007

"
2809017158,pull_request,closed,,[FIX] hr_holidays: improve test stability,"The test suffered from multiple problems:
 - Duration of leaves could sometimes be less or more depending on the day of the week (weekend don't count in duration)
 - Demo data could make the test pass while the leaves created during the test were not actually found Here we improved the date mechanism as well as forcing the domain to only search within our own leaves as well as comparing that those leaves are the one with fetched.

",Williambraecky,2025-01-24 09:54:43+00:00,[],2025-02-07 12:48:48+00:00,2025-01-24 12:43:29+00:00,https://github.com/odoo/odoo/pull/194994,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612111113, 'issue_id': 2809017158, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194994.png)](https://mergebot.odoo.com/odoo/odoo/pull/194994)', 'created_at': datetime.datetime(2025, 1, 24, 9, 54, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:54:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194994.png)](https://mergebot.odoo.com/odoo/odoo/pull/194994)

"
2809016005,pull_request,open,,[FIX] point_of_sale: missing related fields after synchronization,"When we sync PoS models after write to a record we don't want to
overwrite local connections.
However this means we don't create new connections when we receive
related record data from the backend, possibly breaking flows relying on
the related record, like the following:

User in Chile needs to print on the POS receipt the SII Fiscal barcode
This is currently not being printed and this makes the ticket not a validal
legal invoice or electronic ticket.

Step to reproduce:
- With a Chilean company setup
- Open POS session
- Make an order to customer ""Consumidor Final Anónimo""
- Pay and check generated receipt

Issue: On the receipt no barcode is shown, a broken image placeholder
can be observed.
This occurs because the related record (account_move) is not loaded
",agr-odoo,2025-01-24 09:54:09+00:00,[],2025-02-03 12:41:00+00:00,,https://github.com/odoo/odoo/pull/194993,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612110047, 'issue_id': 2809016005, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194993.png)](https://mergebot.odoo.com/odoo/odoo/pull/194993)', 'created_at': datetime.datetime(2025, 1, 24, 9, 54, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2628743704, 'issue_id': 2809016005, 'author': 'robodoo', 'body': '@agr-odoo @davidmonnom staging failed: ci/l10n on 92e0172e9e3e8c3dc7815c56bb8e38bac54fff8d (view more at https://runbot.odoo.com/runbot/build/74321981)', 'created_at': datetime.datetime(2025, 2, 1, 3, 37, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:54:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194993.png)](https://mergebot.odoo.com/odoo/odoo/pull/194993)

robodoo on (2025-02-01 03:37:29 UTC): @agr-odoo @davidmonnom staging failed: ci/l10n on 92e0172e9e3e8c3dc7815c56bb8e38bac54fff8d (view more at https://runbot.odoo.com/runbot/build/74321981)

"
2808974487,pull_request,open,,[IMP] point_of_sale: improve computed values usage,"Previously, the order.recomputeOrderData method needed to be explicitly called to update certain values. 
This commit improves the process by using a JavaScript getter method to compute the values dynamically when needed.
",stva-odoo,2025-01-24 09:34:43+00:00,[],2025-01-29 16:10:44+00:00,,https://github.com/odoo/odoo/pull/194992,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612071334, 'issue_id': 2808974487, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194992.png)](https://mergebot.odoo.com/odoo/odoo/pull/194992)', 'created_at': datetime.datetime(2025, 1, 24, 9, 34, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:34:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194992.png)](https://mergebot.odoo.com/odoo/odoo/pull/194992)

"
2808961285,pull_request,closed,,[FW][FIX] website_hr_recruitment: fix plural,"Forward-Port-Of: odoo/odoo#194174
Forward-Port-Of: odoo/odoo#193276",fw-bot,2025-01-24 09:28:06+00:00,[],2025-01-28 12:22:29+00:00,2025-01-28 12:22:29+00:00,https://github.com/odoo/odoo/pull/194991,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2612058252, 'issue_id': 2808961285, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194991.png)](https://mergebot.odoo.com/odoo/odoo/pull/194991)', 'created_at': datetime.datetime(2025, 1, 24, 9, 28, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612058267, 'issue_id': 2808961285, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 9, 28, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612216246, 'issue_id': 2808961285, 'author': 'fw-bot', 'body': '@Bertrand2 the next pull request (odoo/odoo#195005) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 10, 43, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721870, 'issue_id': 2808961285, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172228, 'issue_id': 2808961285, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723105, 'issue_id': 2808961285, 'author': 'fw-bot', 'body': '@Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618451207, 'issue_id': 2808961285, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 9, 45, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:28:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194991.png)](https://mergebot.odoo.com/odoo/odoo/pull/194991)

fw-bot (Issue Creator) on (2025-01-24 09:28:08 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 10:43:04 UTC): @Bertrand2 the next pull request (odoo/odoo#195005) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-25 02:01:25 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:43 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:11 UTC): @Bertrand2 this forward port of odoo/odoo#193276 is awaiting action (not merged or closed).

Bertrand2 on (2025-01-28 09:45:41 UTC): robodoo r+

"
2808943890,pull_request,closed,,"[FIX] point_of_sale, pos_restaurant: Add UUID in demo data","Before this commit, demo data had no uuid, which is necessary for the rontend to function properly.

A fix had been merged by adding a default value to the uuid field, but this did not work.

The frontend is responsible for creating UUIDs, so we added the uuid to the demo data.


",davidmonnom,2025-01-24 09:19:27+00:00,[],2025-01-31 08:18:30+00:00,2025-01-28 17:05:24+00:00,https://github.com/odoo/odoo/pull/194990,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612041693, 'issue_id': 2808943890, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194990.png)](https://mergebot.odoo.com/odoo/odoo/pull/194990)', 'created_at': datetime.datetime(2025, 1, 24, 9, 19, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612068301, 'issue_id': 2808943890, 'author': 'aj-fuentes', 'body': ""Extra context: having this default was causing all records to get the same uuid after an upgrade (from a version that didn't have the uuid columns). It is still affecting clients."", 'created_at': datetime.datetime(2025, 1, 24, 9, 33, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626598023, 'issue_id': 2808943890, 'author': 'aj-fuentes', 'body': 'Note that to help clients facing this issue in 18.0 we could actually bump the module version and add a local upgrade script (to remove all duplicated uuids). That way clients can recover from the issue without more complex interventions from support. See also https://github.com/odoo/upgrade/pull/7143', 'created_at': datetime.datetime(2025, 1, 31, 8, 18, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:19:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194990.png)](https://mergebot.odoo.com/odoo/odoo/pull/194990)

aj-fuentes on (2025-01-24 09:33:12 UTC): Extra context: having this default was causing all records to get the same uuid after an upgrade (from a version that didn't have the uuid columns). It is still affecting clients.

aj-fuentes on (2025-01-31 08:18:29 UTC): Note that to help clients facing this issue in 18.0 we could actually bump the module version and add a local upgrade script (to remove all duplicated uuids). That way clients can recover from the issue without more complex interventions from support. See also https://github.com/odoo/upgrade/pull/7143

"
2808942978,pull_request,closed,,[FIX] html_editor: programmatically add space on automatic link creation,"**Problem**:
In Safari, relying on the browser to add a space after automatic link creation causes the cursor to be incorrectly positioned. This issue arises due to DOM manipulations (adding and removing nodes) during the process.

**Solution**:
To ensure proper link insertion and cursor positioning, explicitly add the space after the link and set the selection programmatically.

**Steps to Reproduce**:
1. Open the Editor on Safari.
2. Add the text ""test.com"".
3. Press the space key.
4. Observe that the link is created, but the cursor moves to the start of the paragraph.

opw-4441817
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",walidsahli,2025-01-24 09:18:59+00:00,[],2025-02-07 20:46:37+00:00,2025-02-07 20:46:37+00:00,https://github.com/odoo/odoo/pull/194989,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612040895, 'issue_id': 2808942978, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194989.png)](https://mergebot.odoo.com/odoo/odoo/pull/194989)', 'created_at': datetime.datetime(2025, 1, 24, 9, 19, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642435263, 'issue_id': 2808942978, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 7, 9, 42, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642535187, 'issue_id': 2808942978, 'author': 'robodoo', 'body': ""@walidsahli @dmo-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 7, 10, 30, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:19:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194989.png)](https://mergebot.odoo.com/odoo/odoo/pull/194989)

dmo-odoo on (2025-02-07 09:42:46 UTC): @robodoo r+

robodoo on (2025-02-07 10:30:29 UTC): @walidsahli @dmo-odoo 'ci/runbot' failed on this reviewed PR.

"
2808934258,pull_request,open,,"[FIX] base: binary encode ""message/rfc822"" mail attachments","Currently, if an email containing a `.eml` attachment is sent, that attachment won't be able to be downloaded correctly depending on the email client used; the attachment will download, but will have a size zero.

### Steps to reproduce

* On any chatter, send a message containing a `.eml` attachment (another email file).
* Using Thunderbird, attempt to download that attachment.

The downloaded attachment will be empty (0 kB).

### Cause

The `.eml` file format, which represents an email message, has the MIME type `message/rfc822`. According to [RFC 2046 Section 5.2.1](https://datatracker.ietf.org/doc/html/rfc2046#section-5.2.1:~:text=No%20encoding%20other%20than%20%227bit%22%2C%20%228bit%22%2C%20or%20%22binary%22%20is%20permitted%20for%0A%20%20%20the%20body%20of%20a%20%22message/rfc822%22%20entity.), attachments of this MIME type must be encoded using `7bit`, `8bit`, or `binary`. However, the system currently encodes all attachments using Base64 by default, which is not compliant with the standard for `message/rfc822`.

Although some email clients tolerate Base64 encoding for `message/rfc822`, others, such as Thunderbird, Roundcube, and Zimbra, strictly follow the RFC and reject Base64-encoded `message/rfc822` attachments. As a result, these attachments appear invalid and are downloaded as empty files.

opw-4126522",ushyme,2025-01-24 09:14:29+00:00,[],2025-01-29 11:52:59+00:00,,https://github.com/odoo/odoo/pull/194988,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2612032199, 'issue_id': 2808934258, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194988.png)](https://mergebot.odoo.com/odoo/odoo/pull/194988)', 'created_at': datetime.datetime(2025, 1, 24, 9, 14, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:14:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194988.png)](https://mergebot.odoo.com/odoo/odoo/pull/194988)

"
2808927359,pull_request,closed,,[IMP] im_livechat: add end_session step type to chatbot,"Purpose of this PR:

Introduce a new 'end_session' step type to the chatbot. When the chatbot reaches this step, the live chat conversation will terminate, ensuring that any subsequent steps are not executed.

task-id:4509331

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",akap-odoo,2025-01-24 09:11:29+00:00,[],2025-02-07 12:33:20+00:00,2025-02-07 12:33:20+00:00,https://github.com/odoo/odoo/pull/194987,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612026161, 'issue_id': 2808927359, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194987.png)](https://mergebot.odoo.com/odoo/odoo/pull/194987)', 'created_at': datetime.datetime(2025, 1, 24, 9, 11, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642798514, 'issue_id': 2808927359, 'author': 'akap-odoo', 'body': 'Since we are targeting the `master` instead, this PR is being closed, and PR #196749 has been opened.', 'created_at': datetime.datetime(2025, 2, 7, 12, 33, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:11:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194987.png)](https://mergebot.odoo.com/odoo/odoo/pull/194987)

akap-odoo (Issue Creator) on (2025-02-07 12:33:20 UTC): Since we are targeting the `master` instead, this PR is being closed, and PR #196749 has been opened.

"
2808910410,pull_request,open,,[FIX] website_sale: always show delivery row in cart summary,"Before delivery row was not displayed when dm was not set. It was confusing to not show delivery row when a product required delivery, and it caused a traceback on the checkout page when no delivery method was preselected and a user selected one.
After this commit when delivery is not set yet, we will show explicitly that delivery is required but the price will be updated after its selection.

task-4422630
opw-4397672
",vchu-odoo,2025-01-24 09:02:40+00:00,[],2025-01-28 09:43:31+00:00,,https://github.com/odoo/odoo/pull/194986,"[('RD', 'research & development, internal work')]","[{'comment_id': 2612008323, 'issue_id': 2808910410, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194986.png)](https://mergebot.odoo.com/odoo/odoo/pull/194986)', 'created_at': datetime.datetime(2025, 1, 24, 9, 2, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 09:02:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194986.png)](https://mergebot.odoo.com/odoo/odoo/pull/194986)

"
2808899685,pull_request,closed,,[FIX] point_of_sale: `console.error` unknown issue in `printHtml`,"__Current behavior before commit:__
If an unexpected error that has no body is thrown inside `printHtml`, the popup shows ""undefinedDo you want to print using the web printer?"" and nothing is written in the console, making it impossible to troubleshoot.

__Description of the fix:__
Don't print ""undefined"" in the popup if the error has no body but write the error in the console.

opw-4322339
",Dj0ulo,2025-01-24 08:57:09+00:00,[],2025-01-28 11:17:41+00:00,2025-01-28 11:17:41+00:00,https://github.com/odoo/odoo/pull/194985,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2611997746, 'issue_id': 2808899685, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194985.png)](https://mergebot.odoo.com/odoo/odoo/pull/194985)', 'created_at': datetime.datetime(2025, 1, 24, 8, 57, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:57:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194985.png)](https://mergebot.odoo.com/odoo/odoo/pull/194985)

"
2808881271,pull_request,closed,,[FIX] pos_hr: prevent singleton error with multiple related partners,"Before this commit, if an employee had multiple related partners, an expected singleton error occurred when attempting to set the opening or closing of the session.

opw-4482497

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-24 08:46:56+00:00,[],2025-02-07 12:38:41+00:00,2025-01-24 12:25:22+00:00,https://github.com/odoo/odoo/pull/194984,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2611979793, 'issue_id': 2808881271, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194984.png)](https://mergebot.odoo.com/odoo/odoo/pull/194984)', 'created_at': datetime.datetime(2025, 1, 24, 8, 46, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612047645, 'issue_id': 2808881271, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 22, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:46:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194984.png)](https://mergebot.odoo.com/odoo/odoo/pull/194984)

caburj on (2025-01-24 09:22:38 UTC): robodoo r+

"
2808873635,pull_request,open,,"[IMP] account, analytic: new default filter","This commit add a new default filter on the analytic reporting view, which filters data based on date >= 1st day of last fiscal year.

task-4453226",igbe-odoo,2025-01-24 08:42:38+00:00,[],2025-02-07 16:16:33+00:00,,https://github.com/odoo/odoo/pull/194983,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611972162, 'issue_id': 2808873635, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194983.png)](https://mergebot.odoo.com/odoo/odoo/pull/194983)', 'created_at': datetime.datetime(2025, 1, 24, 8, 42, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:42:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194983.png)](https://mergebot.odoo.com/odoo/odoo/pull/194983)

"
2808860011,pull_request,closed,,[FW][FIX] mail: ensure selection updates correctly after mention insertion,"**Problem**:
When typing `@` in a non-collapsed selection (`a[b]`) and selecting an item from the mention list, the selection state becomes stale. This happens because `handleObserverRecords` calls `updateHints`, which relies on `getSelectionData`. However, `this.activeSelection` retains the outdated selection due to conditions like `documentSelectionIsInEditable` and `!this.activeSelection.anchorNode.isConnected` being `false`.

As a result, `this.activeSelection` reflects `a[b]` while the DOM selection has already updated to `a[]`, leading to invalid offsets.

**Solution**:
Call `this.dependencies.selection.focusEditable();` during `onSelect` to ensure the selection is updated to reflect the editor state rather than the mention state.

**Steps to Reproduce**:
1. Open the chatter.
2. Add some text.
3. Select a portion of the text.
4. Type `@`.
5. Select an item (person) from the mention list.
6. Observe a traceback error.

opw-4498165

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194480",fw-bot,2025-01-24 08:35:06+00:00,[],2025-02-07 12:38:51+00:00,2025-01-24 12:29:16+00:00,https://github.com/odoo/odoo/pull/194982,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611958859, 'issue_id': 2808860011, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194982.png)](https://mergebot.odoo.com/odoo/odoo/pull/194982)', 'created_at': datetime.datetime(2025, 1, 24, 8, 35, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611958888, 'issue_id': 2808860011, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194918\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 8, 35, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612024217, 'issue_id': 2808860011, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 10, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:35:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194982.png)](https://mergebot.odoo.com/odoo/odoo/pull/194982)

fw-bot (Issue Creator) on (2025-01-24 08:35:08 UTC): @walidsahli @dmo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194918

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dmo-odoo on (2025-01-24 09:10:36 UTC): @robodoo r+

"
2808857994,pull_request,closed,,[FIX] hr_attendance : fix attendance creation,"STEPS TO REPRODUCE:

1- Check if marc demo doesn't have administrator right but has manager attendance right 2- Log in as Marc demo
3- Go on attendance application
4- Click on ""new""
You will have a traceback

REASON:
For this type of users the default employee_id is not set; so the extra hours computation failed.

task-4512288



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",mepe-odoo,2025-01-24 08:33:59+00:00,[],2025-02-05 15:03:34+00:00,2025-02-05 13:54:26+00:00,https://github.com/odoo/odoo/pull/194981,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2611956908, 'issue_id': 2808857994, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194981.png)](https://mergebot.odoo.com/odoo/odoo/pull/194981)', 'created_at': datetime.datetime(2025, 1, 24, 8, 34, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633875457, 'issue_id': 2808857994, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 4, 13, 16, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2634029199, 'issue_id': 2808857994, 'author': 'robodoo', 'body': ""@mepe-odoo @tivisse 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 4, 13, 50, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636322990, 'issue_id': 2808857994, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 5, 10, 22, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:34:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194981.png)](https://mergebot.odoo.com/odoo/odoo/pull/194981)

tivisse on (2025-02-04 13:16:08 UTC): @robodoo r+

robodoo on (2025-02-04 13:50:35 UTC): @mepe-odoo @tivisse 'ci/runbot' failed on this reviewed PR.

tivisse on (2025-02-05 10:22:40 UTC): @robodoo r+

"
2808857553,pull_request,open,,[FIX] im_livechat: allow operators to leave ended livechat channels,"**Current behavior before PR:**

 Since [1](https://github.com/odoo/odoo/pull/192378) when an operator accessed a live chat where the visitor had left, the composer was disabled, preventing markAsRead() from executing and showing the unread message counter badge instead of the leave action.

**Desired behavior after PR is merged:**

markAsRead() is now called when the visitor leaves the livechat, ensuring the operator can leave the channel.

Task-4500402

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ramh-odoo,2025-01-24 08:33:43+00:00,[],2025-02-04 12:58:48+00:00,,https://github.com/odoo/odoo/pull/194980,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611956478, 'issue_id': 2808857553, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194980.png)](https://mergebot.odoo.com/odoo/odoo/pull/194980)', 'created_at': datetime.datetime(2025, 1, 24, 8, 33, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633834142, 'issue_id': 2808857553, 'author': 'seb-odoo', 'body': ""Also we might want to challenge why we prevent from closing unread livechat. It's the operator choice after all if they do that, there's not really a good reason to prevent it."", 'created_at': datetime.datetime(2025, 2, 4, 12, 58, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:33:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194980.png)](https://mergebot.odoo.com/odoo/odoo/pull/194980)

seb-odoo on (2025-02-04 12:58:47 UTC): Also we might want to challenge why we prevent from closing unread livechat. It's the operator choice after all if they do that, there's not really a good reason to prevent it.

"
2808843987,pull_request,closed,,[FIX] sale: product desctiption readonly,"Steps:
- Install sale_project
- Create a service type product
- Create a SO and confirm it
- In the confirmed order add a SOL with the new product

Issue:
- cannot edit the description of the new SOL

Cause:
- readonly for the SOL is set based on product_updatable and product_updatable is set false when product type service even for new order line

Fix
- Updated the readonly condition to account for new lines

opw - 4473488

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",dere-odoo,2025-01-24 08:26:16+00:00,[],2025-01-27 12:56:55+00:00,2025-01-27 12:56:55+00:00,https://github.com/odoo/odoo/pull/194979,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2611935611, 'issue_id': 2808843987, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194979.png)](https://mergebot.odoo.com/odoo/odoo/pull/194979)', 'created_at': datetime.datetime(2025, 1, 24, 8, 26, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:26:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194979.png)](https://mergebot.odoo.com/odoo/odoo/pull/194979)

"
2808832159,pull_request,closed,,[FIX] l10n_in_gstin_status: restrict GSTIN update to IN companies,"This commit fixes a few issues in multi-company context:

- only show the GSTIN status/update button when user has at least one IN companies selected

- only allow the update when user's active company is an IN company (to ensure we correctly determine the EDI test/production status)

opw-4367302

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",xavieralt,2025-01-24 08:20:26+00:00,[],2025-02-06 10:43:51+00:00,2025-02-06 10:43:51+00:00,https://github.com/odoo/odoo/pull/194978,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2611926252, 'issue_id': 2808832159, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194978.png)](https://mergebot.odoo.com/odoo/odoo/pull/194978)', 'created_at': datetime.datetime(2025, 1, 24, 8, 20, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636128037, 'issue_id': 2808832159, 'author': 'd-fence', 'body': 'robodoo r-\r\n(sorry but it seems that this PR makes the [staging fails](https://runbot.odoo.com/runbot/build/74519391))', 'created_at': datetime.datetime(2025, 2, 5, 9, 3, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636333717, 'issue_id': 2808832159, 'author': 'xavieralt', 'body': ""@rugo-odoo cc @d-fence Shame on me :weary: , I've fixed the test, sorry again"", 'created_at': datetime.datetime(2025, 2, 5, 10, 27, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639187904, 'issue_id': 2808832159, 'author': 'rugo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 8, 51, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:20:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194978.png)](https://mergebot.odoo.com/odoo/odoo/pull/194978)

d-fence on (2025-02-05 09:03:26 UTC): robodoo r-
(sorry but it seems that this PR makes the [staging fails](https://runbot.odoo.com/runbot/build/74519391))

xavieralt (Issue Creator) on (2025-02-05 10:27:23 UTC): @rugo-odoo cc @d-fence Shame on me :weary: , I've fixed the test, sorry again

rugo-odoo on (2025-02-06 08:51:13 UTC): @robodoo r+

"
2808819354,pull_request,closed,,[FIX] point_of_sale: new session opening time,"- Fix bug where session opening time was set to previous session closing time.
- Now we want the pos session opening time to be set when we click ""Open register"".

task-id: 4500391

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-24 08:12:50+00:00,[],2025-02-07 12:38:42+00:00,2025-01-24 12:25:22+00:00,https://github.com/odoo/odoo/pull/194977,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611913297, 'issue_id': 2808819354, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194977.png)](https://mergebot.odoo.com/odoo/odoo/pull/194977)', 'created_at': datetime.datetime(2025, 1, 24, 8, 12, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612143358, 'issue_id': 2808819354, 'author': 'rhe-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 8, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612143470, 'issue_id': 2808819354, 'author': 'robodoo', 'body': ""I'm sorry, @rhe-odoo. I'm afraid I can't do that."", 'created_at': datetime.datetime(2025, 1, 24, 10, 8, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612147317, 'issue_id': 2808819354, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 9, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 08:12:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194977.png)](https://mergebot.odoo.com/odoo/odoo/pull/194977)

rhe-odoo on (2025-01-24 10:08:21 UTC): @robodoo r+

robodoo on (2025-01-24 10:08:24 UTC): I'm sorry, @rhe-odoo. I'm afraid I can't do that.

caburj on (2025-01-24 10:09:23 UTC): robodoo r+

"
2808778557,pull_request,closed,,[FIX] website: clean keywords in SEO dialog,"Steps to reproduce:

- Edit a page
- open ""Optimize SEO"" dialog
- Add a tag with a parenthesis. eg. ""Webinar Tools (OBS, YouTube)""
- Save
- Reload the page
- Reopen the ""Optimize SEO"" dialog
- ... crash

Since [1], the application crashes because keywords are dynamically used in a regular expression, and special characters (e.g., parentheses) are not properly escaped.

We address the keywords issues by escaping control characters before using them in the regular expression to prevent crashes.

[1]: https://github.com/odoo/odoo/commit/ac55f2bb113ecf7c774fe6e96d28e716184a97d1#diff-b51336c1ad97255bfb3646f013327eca1904ca194078f4ce671e517096233c58

task-4420262
",SergeBayet,2025-01-24 07:48:12+00:00,[],2025-01-30 10:27:21+00:00,2025-01-30 10:27:21+00:00,https://github.com/odoo/odoo/pull/194976,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611874842, 'issue_id': 2808778557, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194976.png)](https://mergebot.odoo.com/odoo/odoo/pull/194976)', 'created_at': datetime.datetime(2025, 1, 24, 7, 48, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621845462, 'issue_id': 2808778557, 'author': 'bso-odoo', 'body': '@robodoo delegate=bvr-odoo', 'created_at': datetime.datetime(2025, 1, 29, 14, 41, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623932168, 'issue_id': 2808778557, 'author': 'bvr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 9, 16, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 07:48:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194976.png)](https://mergebot.odoo.com/odoo/odoo/pull/194976)

bso-odoo on (2025-01-29 14:41:48 UTC): @robodoo delegate=bvr-odoo

bvr-odoo on (2025-01-30 09:16:27 UTC): @robodoo r+

"
2808702754,pull_request,closed,,[FIX] point_of_sale: cancel order sends empty ticket to the kitchen,"steps to reproduce:
===
- open POS 
- make an order 
- click on order
- open this order 
- delete order lines 
- click on order (negatives qty) 

Issue:
===
- insufficient data to display in receipt

fixed:
===
- configured data required to print

task: 4507218
",djip-odoo,2025-01-24 07:15:08+00:00,[],2025-02-03 13:08:42+00:00,2025-02-03 13:08:42+00:00,https://github.com/odoo/odoo/pull/194975,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611763825, 'issue_id': 2808702754, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194975.png)](https://mergebot.odoo.com/odoo/odoo/pull/194975)', 'created_at': datetime.datetime(2025, 1, 24, 7, 15, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 07:15:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194975.png)](https://mergebot.odoo.com/odoo/odoo/pull/194975)

"
2808648699,pull_request,open,,[IMP] mail: prevent infinite mirror effect during screen sharing,"Current behavior before PR:

Sharing the same screen or window resulted in an infinite mirror effect.

Desired behavior after PR is merged:

When users attempt to share their screen (monitor) or window while in full-screen mode, a warning is displayed. This warning alerts them to the potential infinite mirror effect and recommends sharing a browser tab instead.

Task-id:[4450257](https://www.odoo.com/odoo/project/1519/tasks/4450257)

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",akap-odoo,2025-01-24 06:51:48+00:00,[],2025-02-07 10:23:18+00:00,,https://github.com/odoo/odoo/pull/194974,"[('RD', 'research & development, internal work')]","[{'comment_id': 2611726898, 'issue_id': 2808648699, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194974.png)](https://mergebot.odoo.com/odoo/odoo/pull/194974)', 'created_at': datetime.datetime(2025, 1, 24, 6, 51, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 06:51:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194974.png)](https://mergebot.odoo.com/odoo/odoo/pull/194974)

"
2808550222,pull_request,closed,,[FW] 18.0 ref taxes tests las,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191402",fw-bot,2025-01-24 05:39:38+00:00,[],2025-02-07 14:12:10+00:00,2025-01-24 14:05:58+00:00,https://github.com/odoo/odoo/pull/194973,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2611645161, 'issue_id': 2808550222, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194973.png)](https://mergebot.odoo.com/odoo/odoo/pull/194973)', 'created_at': datetime.datetime(2025, 1, 24, 5, 39, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611645181, 'issue_id': 2808550222, 'author': 'fw-bot', 'body': '@smetl cherrypicking of pull request odoo/odoo#191402 failed.\n\n* a105c1e7bf634ac45aac516b95e878ce01057361 <- on this commit\n* 8e6a0cf127a6feacfd0ee54e584dba5e3463da38\n* 9595056b667d0589b89f7676fa475913c4b7ccf9\n\nstdout:\n```\nAuto-merging addons/account/static/src/components/tests_shared_js_python/tests_shared_js_python.js\nAuto-merging addons/account/tests/common.py\nAuto-merging addons/sale/tests/common.py\nCONFLICT (content): Merge conflict in addons/sale/tests/common.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 5, 39, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612352882, 'issue_id': 2808550222, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 56, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612359213, 'issue_id': 2808550222, 'author': 'robodoo', 'body': '@smetl linked pull request(s) odoo/enterprise#77729 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 24, 12, 0, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 05:39:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194973.png)](https://mergebot.odoo.com/odoo/odoo/pull/194973)

fw-bot (Issue Creator) on (2025-01-24 05:39:41 UTC): @smetl cherrypicking of pull request odoo/odoo#191402 failed.

* a105c1e7bf634ac45aac516b95e878ce01057361 <- on this commit
* 8e6a0cf127a6feacfd0ee54e584dba5e3463da38
* 9595056b667d0589b89f7676fa475913c4b7ccf9

stdout:
```
Auto-merging addons/account/static/src/components/tests_shared_js_python/tests_shared_js_python.js
Auto-merging addons/account/tests/common.py
Auto-merging addons/sale/tests/common.py
CONFLICT (content): Merge conflict in addons/sale/tests/common.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-24 11:56:35 UTC): @robodoo r+

robodoo on (2025-01-24 12:00:02 UTC): @smetl linked pull request(s) odoo/enterprise#77729 not ready. Linked PRs are not staged until all of them are ready.

"
2808466786,pull_request,open,,[FIX] mrp: inconsistency between stock.move and stock.move.line when changing byproduct's product in MO,"**Issue Description**
When producing a product in Odoo and changing the by-product from Product A to Product B, the stock.move record gets updated to reflect the new product (Product B), but the corresponding stock.move.line still retains the old product (Product A).

This leads to inconsistent data between stock.move and stock.move.line, which can cause inaccurate inventory reports and accounting records.

**Steps to Reproduce**
1. Create a BoM (Bill of Materials) that includes Product A as a by-product with a quantity of 1.
2. Create a Manufacturing Order (MO) from this BoM.
3. Confirm the MO and set it to In Progress.
4. In the MO interface: Change the by-product from Product A to Product B.
5. Complete the MO.


https://github.com/user-attachments/assets/811e181d-894d-4605-aeb9-027ff379d40d



**Current Behavior**
The product in the stock.move is updated to Product B. However, the product in the related stock.move.line remains as Product A.

**Expected Behavior**
The byproduct's product_id shouldn't even be editable in the first place when the MO has already been confirmed (as it is for components).
It would be worth to add the same kind of readonly condition on the byproduct side as well.





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",royle-vietnam,2025-01-24 04:26:31+00:00,[],2025-02-08 03:06:24+00:00,,https://github.com/odoo/odoo/pull/194972,"[('Logistics', 'about stock, mrp, delivery, purchase')]","[{'comment_id': 2611545762, 'issue_id': 2808466786, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194972.png)](https://mergebot.odoo.com/odoo/odoo/pull/194972)', 'created_at': datetime.datetime(2025, 1, 24, 4, 26, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613682539, 'issue_id': 2808466786, 'author': 'royle-vietnam', 'body': ""> In hindsight, I think that the byproduct's `product_id` shouldn't even be editable in the first place when the MO has already been confirmed (as it is for components). It would be worth to add the same kind of `readonly` condition on the byproduct side as well.\r\n\r\nHi @clesgow  Thanks for your suggestion, I find it very reasonable, I have updated it, please review again."", 'created_at': datetime.datetime(2025, 1, 25, 0, 53, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2644455659, 'issue_id': 2808466786, 'author': 'royle-vietnam', 'body': 'Hi @Whenrow, can you review this pr, thanks', 'created_at': datetime.datetime(2025, 2, 8, 3, 6, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 04:26:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194972.png)](https://mergebot.odoo.com/odoo/odoo/pull/194972)

royle-vietnam (Issue Creator) on (2025-01-25 00:53:13 UTC): Hi @clesgow  Thanks for your suggestion, I find it very reasonable, I have updated it, please review again.

royle-vietnam (Issue Creator) on (2025-02-08 03:06:21 UTC): Hi @Whenrow, can you review this pr, thanks

"
2808439183,pull_request,closed,,[FIX] l10n_my_edi: XML format and test mode,"Fixes an issue with the xml file where the tax
exchange rate node would be added before the
payment terms node if both features are used,
which render the xml wrong.

Also add a sudo when getting the system param
for the test url; as this shouldn't block a non
administrator user from testing the feature.

opw-4425472
opw-4505562

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",vin-odoo,2025-01-24 03:58:10+00:00,[],2025-02-07 10:44:27+00:00,2025-01-24 10:44:08+00:00,https://github.com/odoo/odoo/pull/194971,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2611509341, 'issue_id': 2808439183, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194971.png)](https://mergebot.odoo.com/odoo/odoo/pull/194971)', 'created_at': datetime.datetime(2025, 1, 24, 3, 58, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611933230, 'issue_id': 2808439183, 'author': 'qdp-odoo', 'body': '@robodoo r+\r\nthank you @vin-odoo for your detailed explanation :) des bisous!', 'created_at': datetime.datetime(2025, 1, 24, 8, 24, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:58:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194971.png)](https://mergebot.odoo.com/odoo/odoo/pull/194971)

qdp-odoo on (2025-01-24 08:24:51 UTC): @robodoo r+
thank you @vin-odoo for your detailed explanation :) des bisous!

"
2808437524,pull_request,closed,,[FW][FIX] core: flush as public user when there is no default_env,"When using livechat, there may be no default environment because during the whole transaction, no environment with a real user was created. In such a case, we should fallback to the public user.

task-4452913


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194612",fw-bot,2025-01-24 03:56:24+00:00,[],2025-01-24 13:50:45+00:00,2025-01-24 11:08:59+00:00,https://github.com/odoo/odoo/pull/194970,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611507023, 'issue_id': 2808437524, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194970.png)](https://mergebot.odoo.com/odoo/odoo/pull/194970)', 'created_at': datetime.datetime(2025, 1, 24, 3, 56, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611507046, 'issue_id': 2808437524, 'author': 'fw-bot', 'body': '@kmagusiak @Julien00859 this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 3, 56, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611883250, 'issue_id': 2808437524, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 7, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:56:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194970.png)](https://mergebot.odoo.com/odoo/odoo/pull/194970)

fw-bot (Issue Creator) on (2025-01-24 03:56:25 UTC): @kmagusiak @Julien00859 this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-24 07:53:00 UTC): @robodoo r+

"
2808436912,pull_request,closed,,"[FW][IMP] point_of_sale, bus: ensure websocket connection","This commit ensures that the websocket connection is established when receiving a connect or initialized event.

This can happen in multitab use of Odoo.

Forward-Port-Of: odoo/odoo#194775
Forward-Port-Of: odoo/odoo#194343",fw-bot,2025-01-24 03:56:05+00:00,[],2025-01-28 23:33:03+00:00,2025-01-28 23:33:03+00:00,https://github.com/odoo/odoo/pull/194969,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2611506545, 'issue_id': 2808436912, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194969.png)](https://mergebot.odoo.com/odoo/odoo/pull/194969)', 'created_at': datetime.datetime(2025, 1, 24, 3, 56, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611506574, 'issue_id': 2808436912, 'author': 'fw-bot', 'body': '@davidmonnom @caburj cherrypicking of pull request odoo/odoo#194343 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/services/data_service.js\nAuto-merging addons/point_of_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 3, 56, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721702, 'issue_id': 2808436912, 'author': 'fw-bot', 'body': '@davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614171962, 'issue_id': 2808436912, 'author': 'fw-bot', 'body': '@davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722786, 'issue_id': 2808436912, 'author': 'fw-bot', 'body': '@davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617540672, 'issue_id': 2808436912, 'author': 'fw-bot', 'body': '@davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618970023, 'issue_id': 2808436912, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 13, 15, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:56:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194969.png)](https://mergebot.odoo.com/odoo/odoo/pull/194969)

fw-bot (Issue Creator) on (2025-01-24 03:56:09 UTC): @davidmonnom @caburj cherrypicking of pull request odoo/odoo#194343 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/services/data_service.js
Auto-merging addons/point_of_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-25 02:01:00 UTC): @davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:19 UTC): @davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:01:53 UTC): @davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:16 UTC): @davidmonnom @caburj this forward port of odoo/odoo#194343 is awaiting action (not merged or closed).

davidmonnom on (2025-01-28 13:15:29 UTC): @robodoo r+

"
2808436202,pull_request,closed,,"[FW][FIX] sale,website_sale: fix configurable products in combo configurator","The combo configurator works with `product.product` records, so previously, we
only allowed to configure `no_variant` PTALs. However, we should also allow to
configure the `product.product`'s custom PTAVs (which can be `always` or
`dynamic`).

Moreover, we always allowed to configure `no_variant` PTALs, even if they
weren't configurable (i.e. PTALs with a single, non-custom, non-multicheckbox
PTAV). However, such PTAVs should be preselected and non-configurable in the
combo configurator.

Forward-Port-Of: odoo/odoo#194896
Forward-Port-Of: odoo/odoo#191130",fw-bot,2025-01-24 03:55:37+00:00,[],2025-02-07 12:38:52+00:00,2025-01-24 12:29:23+00:00,https://github.com/odoo/odoo/pull/194968,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2611506003, 'issue_id': 2808436202, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194968.png)](https://mergebot.odoo.com/odoo/odoo/pull/194968)', 'created_at': datetime.datetime(2025, 1, 24, 3, 55, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611506024, 'issue_id': 2808436202, 'author': 'fw-bot', 'body': '@ltinel cherrypicking of pull request odoo/odoo#191130 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/website_sale/static/src/js/website_sale_configurators.js deleted in d30db1b6f9d6d4d4efcd18b19ef6600b4e5e985d and modified in 3f0d121d91de99d07a34ebd3fc4f3c3d760d3528.  Version 3f0d121d91de99d07a34ebd3fc4f3c3d760d3528 of addons/website_sale/static/src/js/website_sale_configurators.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 3, 55, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612033107, 'issue_id': 2808436202, 'author': 'ltinel', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 15, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:55:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194968.png)](https://mergebot.odoo.com/odoo/odoo/pull/194968)

fw-bot (Issue Creator) on (2025-01-24 03:55:50 UTC): @ltinel cherrypicking of pull request odoo/odoo#191130 failed.

stdout:
```
CONFLICT (modify/delete): addons/website_sale/static/src/js/website_sale_configurators.js deleted in d30db1b6f9d6d4d4efcd18b19ef6600b4e5e985d and modified in 3f0d121d91de99d07a34ebd3fc4f3c3d760d3528.  Version 3f0d121d91de99d07a34ebd3fc4f3c3d760d3528 of addons/website_sale/static/src/js/website_sale_configurators.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ltinel on (2025-01-24 09:15:06 UTC): @robodoo r+

"
2808435955,pull_request,closed,,[FW][IMP] orm: keep indexes without comments,"Description of the issue/feature this PR addresses:
When upgrading, the team would like to keep existing modified indexes. Therefore, we will not re-create indexes that already exist and have no comments. We create the index only when the comment does not match or when the index does not exist.

Current behavior before PR:
If there is no comment, drop and re-create the index during the upgrade.

Desired behavior after PR is merged:
Keep the indexes during the upgrade.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194735",fw-bot,2025-01-24 03:55:19+00:00,[],2025-01-24 13:50:38+00:00,2025-01-24 11:09:04+00:00,https://github.com/odoo/odoo/pull/194967,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611505970, 'issue_id': 2808435955, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194967.png)](https://mergebot.odoo.com/odoo/odoo/pull/194967)', 'created_at': datetime.datetime(2025, 1, 24, 3, 55, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611505986, 'issue_id': 2808435955, 'author': 'fw-bot', 'body': '@kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 3, 55, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611883690, 'issue_id': 2808435955, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 7, 53, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:55:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194967.png)](https://mergebot.odoo.com/odoo/odoo/pull/194967)

fw-bot (Issue Creator) on (2025-01-24 03:55:49 UTC): @kmagusiak @ryv-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-24 07:53:18 UTC): @robodoo r+

"
2808413251,pull_request,open,,18.0 fix list widget extract props,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",tanzv,2025-01-24 03:30:27+00:00,[],2025-02-05 01:50:04+00:00,,https://github.com/odoo/odoo/pull/194966,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2611474528, 'issue_id': 2808413251, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194966.png)](https://mergebot.odoo.com/odoo/odoo/pull/194966)', 'created_at': datetime.datetime(2025, 1, 24, 3, 30, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2635522668, 'issue_id': 2808413251, 'author': 'tanzv', 'body': 'Please pass', 'created_at': datetime.datetime(2025, 2, 5, 1, 50, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:30:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194966.png)](https://mergebot.odoo.com/odoo/odoo/pull/194966)

tanzv (Issue Creator) on (2025-02-05 01:50:03 UTC): Please pass

"
2808387400,pull_request,closed,,[FIX] web: fix extractProps not executing in list widget,"Before this fix, the list widget's extractProps function was never called due to an incorrect method reference in the web module. This caused issues when rendering dynamic props or customizing the list view behavior.

After the fix:
- The extractProps function is properly invoked.
- The list widget can now retrieve props values as expected.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",tanzv,2025-01-24 03:05:32+00:00,[],2025-01-24 03:25:28+00:00,2025-01-24 03:25:28+00:00,https://github.com/odoo/odoo/pull/194965,[],"[{'comment_id': 2611447139, 'issue_id': 2808387400, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194965.png)](https://mergebot.odoo.com/odoo/odoo/pull/194965)', 'created_at': datetime.datetime(2025, 1, 24, 3, 5, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 03:05:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194965.png)](https://mergebot.odoo.com/odoo/odoo/pull/194965)

"
2808357905,pull_request,closed,,[FW][FIX] project_timesheet_holidays: prevent access error for non-timesheet users,"Steps to reproduce
- Install the `project_timesheet_holidays` module along with all its related dependencies.
- Assign Demo user rights only in the Project user group(no additional rights in other apps).
- Log in as the Demo user.
- Navigate to: Project > Task.
- Click on a task that has an associated timesheet
- Observe that an access error is encountered.

Cause:
- The `is_timeoff_task` field is loaded for users without Timesheet access, causing an `AccessError` due to its dependency on `account.analytic.line`.
- In this commit, we are counting time-off tasks from the timesheet instead of the time-off type. The time-off type model was accessible to all users, so this issue didn’t happen before. See [this commit](https://github.com/odoo/odoo/commit/4f887a878b1ef23b0fd8eb7b440fd2aa04c9d36c#diff-4f3297774d04158af2337bf66b96044ae115007ac202fd96fa46760dfbc470e2L14) for details.

Solution:
- Restrict the field's loading and add the hr_timesheet.group_hr_timesheet_user group in the field definition to ensure it is only computed for authorized users.

task-4417760

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191865",fw-bot,2025-01-24 02:36:57+00:00,[],2025-02-07 06:15:48+00:00,2025-01-24 06:13:08+00:00,https://github.com/odoo/odoo/pull/194964,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611419928, 'issue_id': 2808357905, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194964.png)](https://mergebot.odoo.com/odoo/odoo/pull/194964)', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611419938, 'issue_id': 2808357905, 'author': 'fw-bot', 'body': '@mjvi-odoo @pkyriakou this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611510124, 'issue_id': 2808357905, 'author': 'mjvi-odoo', 'body': '@robodoo  r+', 'created_at': datetime.datetime(2025, 1, 24, 3, 58, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 02:36:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194964.png)](https://mergebot.odoo.com/odoo/odoo/pull/194964)

fw-bot (Issue Creator) on (2025-01-24 02:36:59 UTC): @mjvi-odoo @pkyriakou this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mjvi-odoo on (2025-01-24 03:58:54 UTC): @robodoo  r+

"
2808357643,pull_request,closed,,[FW][FIX] account: Allow skipping bank account creation on reconciliation,"Description of the issue/feature this PR addresses:

This commit introduces system parameter to skip the creation of bank account in the reconciliation of bank statements.

The issue it can solve happens when 2 different commercial entities use the same paying partner (ie a partner that is not a subcontact) to pay their invoices.

When an invoice is paid by the paying partner, Odoo will store the account number that was used for the transfer on account.bank.statement.line. When this statement line is reconciled with an invoice, if the bank account was not stored on the partner previously, a res.partner.bank will be created automatically.
When another payment is coming from the same bank account, Odoo will then select the partner linked to the bank account that it did store previously, even if the payment was for an invoice linked to another partner, and it will not propose the proper invoice in the reconciliation widget, even if it uses an exact match on the payment reference number.

Having a parameter allowing to skip creation of the bank account in Odoo will allow the reconciliation to be based striclty on the reference number.

Current behavior before PR:

Bank account is stored and wrong invoices are proposed by the reconciliation widget

Desired behavior after PR is merged:

Allow to avoid storing bank account and having wrong invoices are proposed by the reconciliation widget


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192260
Forward-Port-Of: odoo/odoo#168029",fw-bot,2025-01-24 02:36:40+00:00,[],2025-02-07 05:04:59+00:00,2025-01-24 04:59:41+00:00,https://github.com/odoo/odoo/pull/194963,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611419689, 'issue_id': 2808357643, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194963.png)](https://mergebot.odoo.com/odoo/odoo/pull/194963)', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611419695, 'issue_id': 2808357643, 'author': 'fw-bot', 'body': '@grindtildeath @smetl this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611497012, 'issue_id': 2808357643, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 3, 48, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 02:36:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194963.png)](https://mergebot.odoo.com/odoo/odoo/pull/194963)

fw-bot (Issue Creator) on (2025-01-24 02:36:41 UTC): @grindtildeath @smetl this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-24 03:48:49 UTC): @robodoo r+

"
2808357416,pull_request,closed,,[FW][IMP] l10n_mx_hr_payroll: add mexican localisation,"This is a rework of the mexican localisation to make it compliant with the local
 authorities. In our case, it will be a working system only for the full-time
 jobs. The other cases will be coming separately.

Task: 3673251

Forward-Port-Of: odoo/odoo#194788
Forward-Port-Of: odoo/odoo#189466",fw-bot,2025-01-24 02:36:21+00:00,[],2025-01-24 12:21:35+00:00,2025-01-24 11:08:29+00:00,https://github.com/odoo/odoo/pull/194962,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611419426, 'issue_id': 2808357416, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194962.png)](https://mergebot.odoo.com/odoo/odoo/pull/194962)', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611419445, 'issue_id': 2808357416, 'author': 'fw-bot', 'body': '@arpi-odoo @tivisse this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 2, 36, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611771734, 'issue_id': 2808357416, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 7, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 02:36:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194962.png)](https://mergebot.odoo.com/odoo/odoo/pull/194962)

fw-bot (Issue Creator) on (2025-01-24 02:36:25 UTC): @arpi-odoo @tivisse this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-24 07:20:00 UTC): @robodoo r+

"
2808354516,pull_request,closed,,[FW][FIX] l10n_cl: translate VAT in invoice tax total,"Problem: When printing an invoice with l10n_cl installed, the tax total will display the lavel as 'VAT.' The user expects 'VAT' to be translated to maybe 'IVA.' It is hardcoded into the view, thus the .pot file needs to be updated.

Note: Starting from v17, there are missing translations
for strings ""Net Amount"", ""Total"", ""Exempt Amount"" in the
.pot file for the view l10n_cl.tax_totals_widget. However,
these are present for v16. Will probably need to modify
the fw-ports to include these strings in the file.

Purpose: Updating the .pot file to include the hardcoded VAT string will ensure there are translations for that label.

Steps to Reproduce on Runbot:
1. Install l10n_cl and Accounting
2. Add Spanish as a language
3. Switch to the CL company
4. Create an invoice for a customer whose language is Spanish
5. Print the invoice and notice 'VAT' is not translated

opw-4383092




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194800
Forward-Port-Of: odoo/odoo#190605",fw-bot,2025-01-24 02:33:31+00:00,[],2025-02-08 00:24:12+00:00,2025-01-25 00:08:40+00:00,https://github.com/odoo/odoo/pull/194961,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2611416693, 'issue_id': 2808354516, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194961.png)](https://mergebot.odoo.com/odoo/odoo/pull/194961)', 'created_at': datetime.datetime(2025, 1, 24, 2, 33, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611416739, 'issue_id': 2808354516, 'author': 'fw-bot', 'body': '@myhy-odoo @antoine162 cherrypicking of pull request odoo/odoo#190605 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_cl/i18n/es_419.po\nCONFLICT (content): Merge conflict in addons/l10n_cl/i18n/es_419.po\nAuto-merging addons/l10n_cl/i18n/l10n_cl.pot\nAuto-merging addons/l10n_cl/views/report_invoice.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 2, 33, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613268935, 'issue_id': 2808354516, 'author': 'myhy-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 19, 49, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 02:33:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194961.png)](https://mergebot.odoo.com/odoo/odoo/pull/194961)

fw-bot (Issue Creator) on (2025-01-24 02:33:35 UTC): @myhy-odoo @antoine162 cherrypicking of pull request odoo/odoo#190605 failed.

stdout:
```
Auto-merging addons/l10n_cl/i18n/es_419.po
CONFLICT (content): Merge conflict in addons/l10n_cl/i18n/es_419.po
Auto-merging addons/l10n_cl/i18n/l10n_cl.pot
Auto-merging addons/l10n_cl/views/report_invoice.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

myhy-odoo on (2025-01-24 19:49:23 UTC): @robodoo r+

"
2808287350,pull_request,closed,,[FW][FIX] project_purchase: include negative bills in project profitability,"### Issue:

- The negative values in Vendor Bills are not being reflected in the Analytic Account linked to a project.
- the negative value does not reduce the project’s total cost in the Analytic Report cost calculations.

### Steps to reproduce:

1- Create a project and set an analytic account or use the ""Renovations"" project.
2- Create a vendor bill.
3- On the VB add two lines one with a positive Price and the other with a negative Price.
4- on `Analytic` of each line set the project to `Renovations` or the project you created.
5- Validate the vendor bill.
6- Go to the project app and click on the 3 dots of the project you choose and click on `Project Updates`.
7- Notice the total cost of the project is not reflecting the negative value of the vendor bill.

### Solution:

- The issue is caused by the condition ('price_subtotal', '>', 0) in the query for account.move.line.
- Removing this condition ensures both positive and negative price_subtotal values are included.

opw-[4416931](https://www.odoo.com/web#id=4416931&view_type=form&model=project.task)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194837
Forward-Port-Of: odoo/odoo#194300",fw-bot,2025-01-24 01:27:01+00:00,[],2025-02-07 13:56:57+00:00,2025-01-24 13:43:33+00:00,https://github.com/odoo/odoo/pull/194960,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2611350456, 'issue_id': 2808287350, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194960.png)](https://mergebot.odoo.com/odoo/odoo/pull/194960)', 'created_at': datetime.datetime(2025, 1, 24, 1, 27, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611350463, 'issue_id': 2808287350, 'author': 'fw-bot', 'body': '@kawkb @xavierbol cherrypicking of pull request odoo/odoo#194300 failed.\n\nstdout:\n```\nAuto-merging addons/project_purchase/models/project_project.py\nAuto-merging addons/project_purchase/tests/test_project_profitability.py\nCONFLICT (content): Merge conflict in addons/project_purchase/tests/test_project_profitability.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 1, 27, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 01:27:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194960.png)](https://mergebot.odoo.com/odoo/odoo/pull/194960)

fw-bot (Issue Creator) on (2025-01-24 01:27:03 UTC): @kawkb @xavierbol cherrypicking of pull request odoo/odoo#194300 failed.

stdout:
```
Auto-merging addons/project_purchase/models/project_project.py
Auto-merging addons/project_purchase/tests/test_project_profitability.py
CONFLICT (content): Merge conflict in addons/project_purchase/tests/test_project_profitability.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2808278722,pull_request,closed,,[FW][FIX] l10n_cl: translate VAT in invoice tax total,"Problem: When printing an invoice with l10n_cl installed, the tax total will display the lavel as 'VAT.' The user expects 'VAT' to be translated to maybe 'IVA.' It is hardcoded into the view, thus the .pot file needs to be updated.

Note: Starting from v17, there are missing translations
for strings ""Net Amount"", ""Total"", ""Exempt Amount"" in the
.pot file for the view l10n_cl.tax_totals_widget. However,
these are present for v16. Will probably need to modify
the fw-ports to include these strings in the file.

Purpose: Updating the .pot file to include the hardcoded VAT string will ensure there are translations for that label.

Steps to Reproduce on Runbot:
1. Install l10n_cl and Accounting
2. Add Spanish as a language
3. Switch to the CL company
4. Create an invoice for a customer whose language is Spanish
5. Print the invoice and notice 'VAT' is not translated

opw-4383092




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194800
Forward-Port-Of: odoo/odoo#190605",fw-bot,2025-01-24 01:18:17+00:00,[],2025-02-07 18:57:22+00:00,2025-01-24 18:55:43+00:00,https://github.com/odoo/odoo/pull/194959,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2611342102, 'issue_id': 2808278722, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194959.png)](https://mergebot.odoo.com/odoo/odoo/pull/194959)', 'created_at': datetime.datetime(2025, 1, 24, 1, 18, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611342108, 'issue_id': 2808278722, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 1, 18, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611416714, 'issue_id': 2808278722, 'author': 'fw-bot', 'body': '@myhy-odoo @antoine162 the next pull request (odoo/odoo#194961) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 2, 33, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613016105, 'issue_id': 2808278722, 'author': 'myhy-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 17, 12, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-24 01:18:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194959.png)](https://mergebot.odoo.com/odoo/odoo/pull/194959)

fw-bot (Issue Creator) on (2025-01-24 01:18:19 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 02:33:33 UTC): @myhy-odoo @antoine162 the next pull request (odoo/odoo#194961) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

myhy-odoo on (2025-01-24 17:12:51 UTC): @robodoo r+

"
2808184077,pull_request,closed,,[FW][FIX] l10n_cl: translate VAT in invoice tax total,"Problem: When printing an invoice with l10n_cl installed, the tax total will display the lavel as 'VAT.' The user expects 'VAT' to be translated to maybe 'IVA.' It is hardcoded into the view, thus the .pot file needs to be updated.

Note: Starting from v17, there are missing translations
for strings ""Net Amount"", ""Total"", ""Exempt Amount"" in the
.pot file for the view l10n_cl.tax_totals_widget. However,
these are present for v16. Will probably need to modify
the fw-ports to include these strings in the file.

Purpose: Updating the .pot file to include the hardcoded VAT string will ensure there are translations for that label.

Steps to Reproduce on Runbot:
1. Install l10n_cl and Accounting
2. Add Spanish as a language
3. Switch to the CL company
4. Create an invoice for a customer whose language is Spanish
5. Print the invoice and notice 'VAT' is not translated

opw-4383092




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194800
Forward-Port-Of: odoo/odoo#190605",fw-bot,2025-01-23 23:55:52+00:00,[],2025-02-07 18:57:21+00:00,2025-01-24 18:54:14+00:00,https://github.com/odoo/odoo/pull/194958,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2611252301, 'issue_id': 2808184077, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194958.png)](https://mergebot.odoo.com/odoo/odoo/pull/194958)', 'created_at': datetime.datetime(2025, 1, 23, 23, 55, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611252309, 'issue_id': 2808184077, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 23, 55, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 23:55:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194958.png)](https://mergebot.odoo.com/odoo/odoo/pull/194958)

fw-bot (Issue Creator) on (2025-01-23 23:55:56 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2808148422,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194937
Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-23 23:30:28+00:00,[],2025-02-07 12:48:59+00:00,2025-01-24 12:45:33+00:00,https://github.com/odoo/odoo/pull/194957,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2611223017, 'issue_id': 2808148422, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194957.png)](https://mergebot.odoo.com/odoo/odoo/pull/194957)', 'created_at': datetime.datetime(2025, 1, 23, 23, 30, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611223039, 'issue_id': 2808148422, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 cherrypicking of pull request odoo/odoo#194141 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/tests/config/non_default.conf\nAuto-merging odoo/addons/base/tests/config/save_posix.conf\nAuto-merging odoo/addons/base/tests/test_configmanager.py\nCONFLICT (content): Merge conflict in odoo/addons/base/tests/test_configmanager.py\nAuto-merging odoo/service/server.py\nCONFLICT (content): Merge conflict in odoo/service/server.py\nAuto-merging odoo/tools/config.py\nCONFLICT (content): Merge conflict in odoo/tools/config.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 23, 30, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612170260, 'issue_id': 2808148422, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 19, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 23:30:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194957.png)](https://mergebot.odoo.com/odoo/odoo/pull/194957)

fw-bot (Issue Creator) on (2025-01-23 23:30:31 UTC): @Williambraecky @Julien00859 cherrypicking of pull request odoo/odoo#194141 failed.

stdout:
```
Auto-merging odoo/addons/base/tests/config/non_default.conf
Auto-merging odoo/addons/base/tests/config/save_posix.conf
Auto-merging odoo/addons/base/tests/test_configmanager.py
CONFLICT (content): Merge conflict in odoo/addons/base/tests/test_configmanager.py
Auto-merging odoo/service/server.py
CONFLICT (content): Merge conflict in odoo/service/server.py
Auto-merging odoo/tools/config.py
CONFLICT (content): Merge conflict in odoo/tools/config.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Williambraecky on (2025-01-24 10:19:21 UTC): @robodoo r+

"
2808118184,pull_request,closed,,[FW][FIX] mrp: bypass set_qty_producing on lot creation for MO,"### Steps to reproduce:

- Create a product tracked by LOT (not SN)
- Create a BOM for that product and a BOM line with a tracked product
- Put a an SN for your component in STOCK.
- Create an MO for 1 unit of your product and confirm.
> The SN should be set on your component line.
- Set an LOT on the finished product with the create option but without clicking on the [+]
#### > The quantity of the component line was updated to 0 and the SN of the comp was removed.

### Cause of the issue:

Changing the lot on the MO form will trigger the `_onchange_producing` which will in turn `_set_qty_producing`:
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L797-L799 In case the product is tracked by SN this `_set_qty_producing` will set a qty_producing of 1 and the move raws will reserve a quantity accordingly but if the product is tracked by lot or not tracked at all the quantities of the move raw will just be adapted to match the `qty_producing` (that was at 0 from the start):
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L1217-L1227

opw-4418809
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194847
Forward-Port-Of: odoo/odoo#192932",fw-bot,2025-01-23 23:03:40+00:00,[],2025-01-29 08:29:11+00:00,2025-01-29 08:29:11+00:00,https://github.com/odoo/odoo/pull/194956,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2611192287, 'issue_id': 2808118184, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194956.png)](https://mergebot.odoo.com/odoo/odoo/pull/194956)', 'created_at': datetime.datetime(2025, 1, 23, 23, 3, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611192331, 'issue_id': 2808118184, 'author': 'fw-bot', 'body': '@lase-odoo @svs-odoo cherrypicking of pull request odoo/odoo#192932 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_production.py\nCONFLICT (content): Merge conflict in addons/mrp/models/mrp_production.py\nAuto-merging addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 23, 3, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723236, 'issue_id': 2808118184, 'author': 'fw-bot', 'body': '@lase-odoo @svs-odoo this forward port of odoo/odoo#192932 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542004, 'issue_id': 2808118184, 'author': 'fw-bot', 'body': '@lase-odoo @svs-odoo this forward port of odoo/odoo#192932 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618903678, 'issue_id': 2808118184, 'author': 'lase-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 12, 45, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 23:03:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194956.png)](https://mergebot.odoo.com/odoo/odoo/pull/194956)

fw-bot (Issue Creator) on (2025-01-23 23:03:43 UTC): @lase-odoo @svs-odoo cherrypicking of pull request odoo/odoo#192932 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_production.py
CONFLICT (content): Merge conflict in addons/mrp/models/mrp_production.py
Auto-merging addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:19 UTC): @lase-odoo @svs-odoo this forward port of odoo/odoo#192932 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:37 UTC): @lase-odoo @svs-odoo this forward port of odoo/odoo#192932 is awaiting action (not merged or closed).

lase-odoo on (2025-01-28 12:45:22 UTC): robodoo r+

"
2807997328,pull_request,closed,,[FW][FIX] mrp: bypass set_qty_producing on lot creation for MO,"### Steps to reproduce:

- Create a product tracked by LOT (not SN)
- Create a BOM for that product and a BOM line with a tracked product
- Put a an SN for your component in STOCK.
- Create an MO for 1 unit of your product and confirm.
> The SN should be set on your component line.
- Set an LOT on the finished product with the create option but without clicking on the [+]
#### > The quantity of the component line was updated to 0 and the SN of the comp was removed.

### Cause of the issue:

Changing the lot on the MO form will trigger the `_onchange_producing` which will in turn `_set_qty_producing`:
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L797-L799 In case the product is tracked by SN this `_set_qty_producing` will set a qty_producing of 1 and the move raws will reserve a quantity accordingly but if the product is tracked by lot or not tracked at all the quantities of the move raw will just be adapted to match the `qty_producing` (that was at 0 from the start):
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L1217-L1227

opw-4418809
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194847
Forward-Port-Of: odoo/odoo#192932",fw-bot,2025-01-23 21:52:34+00:00,[],2025-02-07 11:40:33+00:00,2025-01-24 11:28:15+00:00,https://github.com/odoo/odoo/pull/194955,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2611093033, 'issue_id': 2807997328, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194955.png)](https://mergebot.odoo.com/odoo/odoo/pull/194955)', 'created_at': datetime.datetime(2025, 1, 23, 21, 52, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611093069, 'issue_id': 2807997328, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 21, 52, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611192297, 'issue_id': 2807997328, 'author': 'fw-bot', 'body': '@lase-odoo @svs-odoo the next pull request (odoo/odoo#194956) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 23, 3, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612075839, 'issue_id': 2807997328, 'author': 'lase-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 37, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 21:52:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194955.png)](https://mergebot.odoo.com/odoo/odoo/pull/194955)

fw-bot (Issue Creator) on (2025-01-23 21:52:37 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 23:03:41 UTC): @lase-odoo @svs-odoo the next pull request (odoo/odoo#194956) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lase-odoo on (2025-01-24 09:37:13 UTC): robodoo r+

"
2807909300,pull_request,closed,,[FW][FIX] iot_box_image: restore image auto version,"The forwardport PR #194085 accidentally removed the automatic IoT Box versionning added in the PR #193505.

This PR restores it as it was in #193505.

Forward-Port-Of: odoo/odoo#194803",fw-bot,2025-01-23 21:07:53+00:00,[],2025-02-07 07:44:57+00:00,2025-01-24 07:18:45+00:00,https://github.com/odoo/odoo/pull/194954,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2611020104, 'issue_id': 2807909300, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194954.png)](https://mergebot.odoo.com/odoo/odoo/pull/194954)', 'created_at': datetime.datetime(2025, 1, 23, 21, 7, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611020121, 'issue_id': 2807909300, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 21, 7, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611649776, 'issue_id': 2807909300, 'author': 'qle-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 43, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 21:07:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194954.png)](https://mergebot.odoo.com/odoo/odoo/pull/194954)

fw-bot (Issue Creator) on (2025-01-23 21:07:55 UTC): @Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

qle-odoo on (2025-01-24 05:43:29 UTC): @robodoo r+

"
2807864178,pull_request,closed,,"[FW][FIX] account: do not affect base of tax without ""is_base_affected""","**Steps to reproduce:**
- Install Accounting
- Create a first tax:
  * Tax Name: Tax1
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax1
  * Tax Group: Tax1
  * Affect Base of Subsequent Taxes: [Checked]
- Create a second tax:
  * Tax Name: Tax2
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax2
  * Tax Group: Tax2
  * Base Affected by Previous Taxes: [Not checked]
- Create an invoice
- Add an invoice line
- Add Tax1
- Add Tax2

**Issue:**
Base amount of Tax2 is affected by Tax1 when it should not.

opw-4450494




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193451",fw-bot,2025-01-23 20:42:38+00:00,[],2025-02-07 12:38:43+00:00,2025-01-24 12:25:23+00:00,https://github.com/odoo/odoo/pull/194953,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610976450, 'issue_id': 2807864178, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194953.png)](https://mergebot.odoo.com/odoo/odoo/pull/194953)', 'created_at': datetime.datetime(2025, 1, 23, 20, 42, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610976521, 'issue_id': 2807864178, 'author': 'fw-bot', 'body': '@kitan191 @smetl cherrypicking of pull request odoo/odoo#193451 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_tax.py\nCONFLICT (content): Merge conflict in addons/account/models/account_tax.py\nAuto-merging addons/account/static/src/helpers/account_tax.js\nCONFLICT (content): Merge conflict in addons/account/static/src/helpers/account_tax.js\nAuto-merging addons/account/tests/test_taxes_computation.py\nCONFLICT (content): Merge conflict in addons/account/tests/test_taxes_computation.py\nAuto-merging addons/l10n_in_edi/tests/test_edi_json.py\nAuto-merging addons/l10n_in_edi_ewaybill/tests/test_edi_ewaybill_json.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 20, 42, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612218175, 'issue_id': 2807864178, 'author': 'kitan191', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 44, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 20:42:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194953.png)](https://mergebot.odoo.com/odoo/odoo/pull/194953)

fw-bot (Issue Creator) on (2025-01-23 20:42:42 UTC): @kitan191 @smetl cherrypicking of pull request odoo/odoo#193451 failed.

stdout:
```
Auto-merging addons/account/models/account_tax.py
CONFLICT (content): Merge conflict in addons/account/models/account_tax.py
Auto-merging addons/account/static/src/helpers/account_tax.js
CONFLICT (content): Merge conflict in addons/account/static/src/helpers/account_tax.js
Auto-merging addons/account/tests/test_taxes_computation.py
CONFLICT (content): Merge conflict in addons/account/tests/test_taxes_computation.py
Auto-merging addons/l10n_in_edi/tests/test_edi_json.py
Auto-merging addons/l10n_in_edi_ewaybill/tests/test_edi_ewaybill_json.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kitan191 on (2025-01-24 10:44:02 UTC): @robodoo r+

"
2807781393,pull_request,closed,,"[FW][FIX] stock,product_expiry,point_of_sale: cron progress in scheduler","This commit makes use of the ir.cron.progress feature in the stock scheduler. The first approach is to simply count how many tasks have been completely done among the 5 currently available

* stock
    - trigger orderpoints
    - merge quant & delete 0 quant
    - reserve confirm stock move
* point_of_sale
    - close session
* product_expiry
    - make alerts on expired lots

They will be split in 5 different crons later to be able to count exactly the remaining records number to manage in each sub tasks.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#189708",fw-bot,2025-01-23 19:52:58+00:00,[],2025-02-07 12:38:50+00:00,2025-01-24 12:29:12+00:00,https://github.com/odoo/odoo/pull/194952,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610887938, 'issue_id': 2807781393, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194952.png)](https://mergebot.odoo.com/odoo/odoo/pull/194952)', 'created_at': datetime.datetime(2025, 1, 23, 19, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610887962, 'issue_id': 2807781393, 'author': 'fw-bot', 'body': '@Whenrow @amoyaux this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194944\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 19, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612082402, 'issue_id': 2807781393, 'author': 'amoyaux', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 40, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 19:53:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194952.png)](https://mergebot.odoo.com/odoo/odoo/pull/194952)

fw-bot (Issue Creator) on (2025-01-23 19:53:00 UTC): @Whenrow @amoyaux this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194944

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

amoyaux on (2025-01-24 09:40:47 UTC): @robodoo r+

"
2807778821,pull_request,closed,,[FW][FIX] account_check_printing: print info on checks without entry,"**Steps to reproduce:**
- Install Accounting
- Configure a Check Layout in Accounting settings
- Go to Bank journal configuration
- Make sure that ""Checks"" payment mehtod doesn't have an Outstanding Payment account
- Create a bill
- Register a Check payment for the bill
- Print the check

**Issue:**
All the data about the bill are missing from the check.

**Cause:**
These data were retrieved from the journal entry linked to the check payment.
As there is no journal entry in this case, they cannot be computed.

**Solution:**
Compute these data from the amount of the check and the linked bills.

opw-4482589




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194404",fw-bot,2025-01-23 19:51:29+00:00,[],2025-02-06 23:31:29+00:00,2025-01-23 22:44:11+00:00,https://github.com/odoo/odoo/pull/194951,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610885207, 'issue_id': 2807778821, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194951.png)](https://mergebot.odoo.com/odoo/odoo/pull/194951)', 'created_at': datetime.datetime(2025, 1, 23, 19, 51, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610885229, 'issue_id': 2807778821, 'author': 'fw-bot', 'body': '@kitan191 @william-andre this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194946\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 19, 51, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610887045, 'issue_id': 2807778821, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 19, 52, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 19:51:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194951.png)](https://mergebot.odoo.com/odoo/odoo/pull/194951)

fw-bot (Issue Creator) on (2025-01-23 19:51:31 UTC): @kitan191 @william-andre this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194946

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-23 19:52:30 UTC): @robodoo r+

"
2807736892,pull_request,closed,,"[FW][FIX] account: do not affect base of tax without ""is_base_affected""","**Steps to reproduce:**
- Install Accounting
- Create a first tax:
  * Tax Name: Tax1
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax1
  * Tax Group: Tax1
  * Affect Base of Subsequent Taxes: [Checked]
- Create a second tax:
  * Tax Name: Tax2
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax2
  * Tax Group: Tax2
  * Base Affected by Previous Taxes: [Not checked]
- Create an invoice
- Add an invoice line
- Add Tax1
- Add Tax2

**Issue:**
Base amount of Tax2 is affected by Tax1 when it should not.

opw-4450494




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193451",fw-bot,2025-01-23 19:27:06+00:00,[],2025-02-07 05:04:59+00:00,2025-01-24 04:58:11+00:00,https://github.com/odoo/odoo/pull/194950,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610839332, 'issue_id': 2807736892, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194950.png)](https://mergebot.odoo.com/odoo/odoo/pull/194950)', 'created_at': datetime.datetime(2025, 1, 23, 19, 27, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610839346, 'issue_id': 2807736892, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 19, 27, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610866677, 'issue_id': 2807736892, 'author': 'mariatouil', 'body': '@fw-bot Hi,\r\nI’ve pushed a pull request, but it’s currently blocked due to the following reason:\r\n\r\n<img width=""581"" alt=""image"" src=""https://github.com/user-attachments/assets/e683ce1a-d6c4-429b-b465-e56a91e7167b"" />\r\nCould you please advise on how I can resolve this issue?\r\nThank you!', 'created_at': datetime.datetime(2025, 1, 23, 19, 41, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610976465, 'issue_id': 2807736892, 'author': 'fw-bot', 'body': '@kitan191 @smetl the next pull request (odoo/odoo#194953) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 20, 42, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611498056, 'issue_id': 2807736892, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 3, 49, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 19:27:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194950.png)](https://mergebot.odoo.com/odoo/odoo/pull/194950)

fw-bot (Issue Creator) on (2025-01-23 19:27:08 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mariatouil on (2025-01-23 19:41:26 UTC): @fw-bot Hi,
I’ve pushed a pull request, but it’s currently blocked due to the following reason:

<img width=""581"" alt=""image"" src=""https://github.com/user-attachments/assets/e683ce1a-d6c4-429b-b465-e56a91e7167b"" />
Could you please advise on how I can resolve this issue?
Thank you!

fw-bot (Issue Creator) on (2025-01-23 20:42:40 UTC): @kitan191 @smetl the next pull request (odoo/odoo#194953) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-24 03:49:38 UTC): @robodoo r+

"
2807731433,pull_request,closed,,[FIX] l10n_it_edi: post invoice w/ multiple downpayments,"- Create a sale order and confirm it
- Create two partial down payments for that sale order and confirm them
- Create a invoice for the remaining amount and confirm it
- Send and print the invoice (with Send to Tax Agency selected)
- Traceback  
<a/>

     File ""addons/account/models/account_tax.py"", line 2475, in _dispatch_negative_lines
         line.setdefault('discount_amount', line['discount_amount_before_dispatching'])
     KeyError: 'discount_amount_before_dispatching'

bbe04fb62916ae326c830e89b2664dfd32b62b75 removes elements from base_list while looping over it.

In `17.0` this doesn't cause this error because we have two loops; one that sets 'discount_amount_before_dispatching' and after that one that remove downpayment from base_lines. But the fix should still be backported because it works by chance.

Ticket [link](https://www.odoo.com/odoo/project/967/tasks/4496310)
opw-4496310",nle-odoo,2025-01-23 19:23:55+00:00,[],2025-02-06 17:59:22+00:00,2025-02-06 17:59:22+00:00,https://github.com/odoo/odoo/pull/194949,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610833735, 'issue_id': 2807731433, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194949.png)](https://mergebot.odoo.com/odoo/odoo/pull/194949)', 'created_at': datetime.datetime(2025, 1, 23, 19, 23, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633352339, 'issue_id': 2807731433, 'author': 'lordkrandel', 'body': 'Rebuilding for JS tests failing with timeouts (as usual)', 'created_at': datetime.datetime(2025, 2, 4, 9, 34, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2638951703, 'issue_id': 2807731433, 'author': 'robodoo', 'body': '@nle-odoo @epictete staging failed: ci/l10n on ef5519cef880d1b7457a753ad5d905b4edaacaf3 (view more at https://runbot.odoo.com/runbot/build/74577048)', 'created_at': datetime.datetime(2025, 2, 6, 6, 30, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639622182, 'issue_id': 2807731433, 'author': 'nle-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 11, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 19:23:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194949.png)](https://mergebot.odoo.com/odoo/odoo/pull/194949)

lordkrandel on (2025-02-04 09:34:45 UTC): Rebuilding for JS tests failing with timeouts (as usual)

robodoo on (2025-02-06 06:30:14 UTC): @nle-odoo @epictete staging failed: ci/l10n on ef5519cef880d1b7457a753ad5d905b4edaacaf3 (view more at https://runbot.odoo.com/runbot/build/74577048)

nle-odoo (Issue Creator) on (2025-02-06 11:57:00 UTC): robodoo r+

"
2807722422,pull_request,closed,,[FW][FIX] base: Unallowed to fetch files from addon,"Steps to reproduce:
1. Import a module from the Odoo UI.
2. The imported zip file contains static files defined as follows:
   'assets': {
       'web.assets_backend': [
           'mob_sii_chile/static/src/backend/core/mob/mob_service.js',
       ],
   }
3. Upon importing the module, the instance encounters an Internal Server Error due to the following exception being raised:
   raise Exception(f""Unallowed to fetch files from addon {addon} for file {path_def}"")

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",felipeang,2025-01-23 19:18:53+00:00,[],2025-01-25 09:26:46+00:00,2025-01-25 09:26:46+00:00,https://github.com/odoo/odoo/pull/194948,"[('ORM', 'ORM, python Framework related')]","[{'comment_id': 2610823832, 'issue_id': 2807722422, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194948.png)](https://mergebot.odoo.com/odoo/odoo/pull/194948)', 'created_at': datetime.datetime(2025, 1, 23, 19, 18, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610846706, 'issue_id': 2807722422, 'author': 'felipeang', 'body': ""So does it mean that I should have the addon itself as a dependency?\r\n\r\n`'depends': [\r\n        'base',\r\n        'base_automation',\r\n        'l10n_cl',\r\n        'mob_sii_chile',  <-------\r\n    ],\r\n    'data': [\r\n        'data/data.xml',\r\n        'data/mob_data.xml',\r\n        'views/caf_views.xml',\r\n        'views/account_move_views.xml',\r\n        'views/res_partner_views.xml'\r\n    ],\r\n    'assets': {\r\n        'web.assets_backend': [\r\n            'mob_sii_chile/...`"", 'created_at': datetime.datetime(2025, 1, 23, 19, 31, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610961761, 'issue_id': 2807722422, 'author': 'kmagusiak', 'body': ""> So does it mean that I should have the addon itself as a dependency?\r\n> \r\n> `'depends': [ 'base', 'base_automation', 'l10n_cl', 'mob_sii_chile', <------- ], 'data': [ 'data/data.xml', 'data/mob_data.xml', 'views/caf_views.xml', 'views/account_move_views.xml', 'views/res_partner_views.xml' ], 'assets': { 'web.assets_backend': [ 'mob_sii_chile/...`\r\n\r\nSince you are using its assets, yes."", 'created_at': datetime.datetime(2025, 1, 23, 20, 34, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610977506, 'issue_id': 2807722422, 'author': 'felipeang', 'body': '> > So does it mean that I should have the addon itself as a dependency?\r\n> > `\'depends\': [ \'base\', \'base_automation\', \'l10n_cl\', \'mob_sii_chile\', <------- ], \'data\': [ \'data/data.xml\', \'data/mob_data.xml\', \'views/caf_views.xml\', \'views/account_move_views.xml\', \'views/res_partner_views.xml\' ], \'assets\': { \'web.assets_backend\': [ \'mob_sii_chile/...`\r\n> \r\n> Since you are using its assets, yes.\r\n\r\n\r\nBut the assets are from the same addon. In this case mob_sii_chile is the addon that I am importing. So when I add its own dependency I get this error\r\n WARNING com odoo.http: Error importing the module ""mob_sii_chile"".\r\n\r\n Unknown module dependencies:\r\n - mob_sii_chile', 'created_at': datetime.datetime(2025, 1, 23, 20, 43, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612699503, 'issue_id': 2807722422, 'author': 'kmagusiak', 'body': '> > > So does it mean that I should have the addon itself as a dependency?\r\n> > > `\'depends\': [ \'base\', \'base_automation\', \'l10n_cl\', \'mob_sii_chile\', <------- ], \'data\': [ \'data/data.xml\', \'data/mob_data.xml\', \'views/caf_views.xml\', \'views/account_move_views.xml\', \'views/res_partner_views.xml\' ], \'assets\': { \'web.assets_backend\': [ \'mob_sii_chile/...`\r\n> > \r\n> > \r\n> > Since you are using its assets, yes.\r\n> \r\n> But the assets are from the same addon. In this case mob_sii_chile is the addon that I am importing. So when I add its own dependency I get this error WARNING com odoo.http: Error importing the module ""mob_sii_chile"".\r\n> \r\n> Unknown module dependencies:\r\n> \r\n> * mob_sii_chile\r\n\r\nI did some testing and I could reproduce the issue only when the module folder was incorrectly named in the zip file. For example, if you compressed a wrong folder name which is a mistake. I couldn\'t reproduce it otherwise.', 'created_at': datetime.datetime(2025, 1, 24, 14, 44, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613486792, 'issue_id': 2807722422, 'author': 'MobilizeTI', 'body': '> > > > So does it mean that I should have the addon itself as a dependency?\r\n> > > > `\'depends\': [ \'base\', \'base_automation\', \'l10n_cl\', \'mob_sii_chile\', <------- ], \'data\': [ \'data/data.xml\', \'data/mob_data.xml\', \'views/caf_views.xml\', \'views/account_move_views.xml\', \'views/res_partner_views.xml\' ], \'assets\': { \'web.assets_backend\': [ \'mob_sii_chile/...`\r\n> > > \r\n> > > \r\n> > > Since you are using its assets, yes.\r\n> > \r\n> > \r\n> > But the assets are from the same addon. In this case mob_sii_chile is the addon that I am importing. So when I add its own dependency I get this error WARNING com odoo.http: Error importing the module ""mob_sii_chile"".\r\n> > Unknown module dependencies:\r\n> > \r\n> > * mob_sii_chile\r\n> \r\n> I did some testing and I could reproduce the issue only when the module folder was incorrectly named in the zip file. For example, if you compressed a wrong folder name which is a mistake. I couldn\'t reproduce it otherwise.\r\n\r\nYes, my mistake. I have an automation process that was creating the .zip incorrectly. I was able to solve it, thank you very much for your help', 'created_at': datetime.datetime(2025, 1, 24, 22, 13, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613860602, 'issue_id': 2807722422, 'author': 'kmagusiak', 'body': 'No problem. Closing the PR.', 'created_at': datetime.datetime(2025, 1, 25, 9, 26, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 19:18:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194948.png)](https://mergebot.odoo.com/odoo/odoo/pull/194948)

felipeang (Issue Creator) on (2025-01-23 19:31:10 UTC): So does it mean that I should have the addon itself as a dependency?

`'depends': [
        'base',
        'base_automation',
        'l10n_cl',
        'mob_sii_chile',  <-------
    ],
    'data': [
        'data/data.xml',
        'data/mob_data.xml',
        'views/caf_views.xml',
        'views/account_move_views.xml',
        'views/res_partner_views.xml'
    ],
    'assets': {
        'web.assets_backend': [
            'mob_sii_chile/...`

kmagusiak on (2025-01-23 20:34:11 UTC): Since you are using its assets, yes.

felipeang (Issue Creator) on (2025-01-23 20:43:13 UTC): But the assets are from the same addon. In this case mob_sii_chile is the addon that I am importing. So when I add its own dependency I get this error
 WARNING com odoo.http: Error importing the module ""mob_sii_chile"".

 Unknown module dependencies:
 - mob_sii_chile

kmagusiak on (2025-01-24 14:44:04 UTC): I did some testing and I could reproduce the issue only when the module folder was incorrectly named in the zip file. For example, if you compressed a wrong folder name which is a mistake. I couldn't reproduce it otherwise.

MobilizeTI on (2025-01-24 22:13:10 UTC): Yes, my mistake. I have an automation process that was creating the .zip incorrectly. I was able to solve it, thank you very much for your help

kmagusiak on (2025-01-25 09:26:46 UTC): No problem. Closing the PR.

"
2807674246,pull_request,closed,,[FW][FIX] sale_purchase: read service_to_purchase from the order's company,"Steps to reproduce:

1. Create two companies: Company A and Company B
2. Create a service product
3. Configure the product to be purchased on Company A and not on Company B
4. Create a sales order on Company B, while logged in Company A
5. Confirm the order

Expected result:

The service PO is created on Company B, even though it was configured not to.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194432
Forward-Port-Of: odoo/odoo#177659",fw-bot,2025-01-23 18:52:13+00:00,[],2025-02-07 15:44:13+00:00,2025-01-24 15:40:55+00:00,https://github.com/odoo/odoo/pull/194947,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610764899, 'issue_id': 2807674246, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194947.png)](https://mergebot.odoo.com/odoo/odoo/pull/194947)', 'created_at': datetime.datetime(2025, 1, 23, 18, 52, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610765138, 'issue_id': 2807674246, 'author': 'fw-bot', 'body': '@ivantodorovich @ticodoo cherrypicking of pull request odoo/odoo#177659 failed.\n\nstdout:\n```\nAuto-merging addons/sale_purchase/models/sale_order_line.py\nAuto-merging addons/sale_purchase/tests/test_sale_purchase.py\nCONFLICT (content): Merge conflict in addons/sale_purchase/tests/test_sale_purchase.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 52, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612166604, 'issue_id': 2807674246, 'author': 'ticodoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 17, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:52:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194947.png)](https://mergebot.odoo.com/odoo/odoo/pull/194947)

fw-bot (Issue Creator) on (2025-01-23 18:52:16 UTC): @ivantodorovich @ticodoo cherrypicking of pull request odoo/odoo#177659 failed.

stdout:
```
Auto-merging addons/sale_purchase/models/sale_order_line.py
Auto-merging addons/sale_purchase/tests/test_sale_purchase.py
CONFLICT (content): Merge conflict in addons/sale_purchase/tests/test_sale_purchase.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ticodoo on (2025-01-24 10:17:27 UTC): @robodoo r+

"
2807653737,pull_request,closed,,[FW][FIX] account_check_printing: print info on checks without entry,"**Steps to reproduce:**
- Install Accounting
- Configure a Check Layout in Accounting settings
- Go to Bank journal configuration
- Make sure that ""Checks"" payment mehtod doesn't have an Outstanding Payment account
- Create a bill
- Register a Check payment for the bill
- Print the check

**Issue:**
All the data about the bill are missing from the check.

**Cause:**
These data were retrieved from the journal entry linked to the check payment.
As there is no journal entry in this case, they cannot be computed.

**Solution:**
Compute these data from the amount of the check and the linked bills.

opw-4482589




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194404",fw-bot,2025-01-23 18:43:22+00:00,[],2025-02-07 04:30:59+00:00,2025-01-24 03:55:47+00:00,https://github.com/odoo/odoo/pull/194946,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610695737, 'issue_id': 2807653737, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194946.png)](https://mergebot.odoo.com/odoo/odoo/pull/194946)', 'created_at': datetime.datetime(2025, 1, 23, 18, 43, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610695865, 'issue_id': 2807653737, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 43, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:43:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194946.png)](https://mergebot.odoo.com/odoo/odoo/pull/194946)

fw-bot (Issue Creator) on (2025-01-23 18:43:24 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807652937,pull_request,closed,,[FW][IMP] spreadsheet_account: Add formula ODOO.RESIDUAL and ODOO.PARTNER.BALANCE,"Problem
---------
There is currently no formula to get the residual amount of accounts nor to get the balance of a partner in a given period of time in spreadsheets.

Objective
---------
Add the formula ODOO.RESIDUAL and ODOO.PARTNER.BALANCE that do just that

ODOO.RESIDUAL should take the following parameters:
- account_codes (mandatory)(can be more than one separate by ,): could be optional, in that case it could set the domain to all receivables/payables accounts
- due_date_range or expected_date (optional): date range referred to due dates (not AML date)
- offset (optional): adding the possibility of the offset to be not only “Year” but also, a specific date or other periods like Month, Quarter.
- company_id (optional)
- include_unposted (optional) (default: false)

ODOO.PARTNER.BALANCE should take the following paramters:
- partner_ids (mandatory) (can be more than one separate by ,)
- accound_codes (optional) (the prefix of the account(s))
- date_range (optional) (21/12/2022,Q1 2022, 12/2022, 2022)
- offset (optional) (default: 0)
- company_id (optional)
- include_unposted (optional) (default: false)

Solution
---------
1. Define the spreadsheet function with the correct parameters in `accounting_function.js`
2. Hook it to the data source so that it can perform server calls
3. Craft that server python function to returns the list a residual amounts for the given list of parameters.
4. Adds some tests.

Task-3679808

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194567",fw-bot,2025-01-23 18:43:05+00:00,[],2025-01-27 17:40:03+00:00,2025-01-27 17:40:03+00:00,https://github.com/odoo/odoo/pull/194945,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610693876, 'issue_id': 2807652937, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194945.png)](https://mergebot.odoo.com/odoo/odoo/pull/194945)', 'created_at': datetime.datetime(2025, 1, 23, 18, 43, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610693945, 'issue_id': 2807652937, 'author': 'fw-bot', 'body': '@aboo-odoo @william-andre cherrypicking of pull request odoo/odoo#194567 failed.\n\nstdout:\n```\nAuto-merging addons/spreadsheet_account/i18n/spreadsheet_account.pot\nCONFLICT (content): Merge conflict in addons/spreadsheet_account/i18n/spreadsheet_account.pot\nAuto-merging addons/spreadsheet_account/models/account.py\nAuto-merging addons/spreadsheet_account/static/src/accounting_functions.js\nAuto-merging addons/spreadsheet_account/static/src/index.js\nAuto-merging addons/spreadsheet_account/static/src/plugins/accounting_plugin.js\nAuto-merging addons/spreadsheet_account/static/src/utils.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 43, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722698, 'issue_id': 2807652937, 'author': 'fw-bot', 'body': '@aboo-odoo @william-andre this forward port of odoo/odoo#194567 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615914436, 'issue_id': 2807652937, 'author': 'aboo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 14, 29, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:43:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194945.png)](https://mergebot.odoo.com/odoo/odoo/pull/194945)

fw-bot (Issue Creator) on (2025-01-23 18:43:06 UTC): @aboo-odoo @william-andre cherrypicking of pull request odoo/odoo#194567 failed.

stdout:
```
Auto-merging addons/spreadsheet_account/i18n/spreadsheet_account.pot
CONFLICT (content): Merge conflict in addons/spreadsheet_account/i18n/spreadsheet_account.pot
Auto-merging addons/spreadsheet_account/models/account.py
Auto-merging addons/spreadsheet_account/static/src/accounting_functions.js
Auto-merging addons/spreadsheet_account/static/src/index.js
Auto-merging addons/spreadsheet_account/static/src/plugins/accounting_plugin.js
Auto-merging addons/spreadsheet_account/static/src/utils.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:01:47 UTC): @aboo-odoo @william-andre this forward port of odoo/odoo#194567 is awaiting action (not merged or closed).

aboo-odoo on (2025-01-27 14:29:36 UTC): @robodoo r+

"
2807652084,pull_request,closed,,"[FW][FIX] stock,product_expiry,point_of_sale: cron progress in scheduler","This commit makes use of the ir.cron.progress feature in the stock scheduler. The first approach is to simply count how many tasks have been completely done among the 5 currently available

* stock
    - trigger orderpoints
    - merge quant & delete 0 quant
    - reserve confirm stock move
* point_of_sale
    - close session
* product_expiry
    - make alerts on expired lots

They will be split in 5 different crons later to be able to count exactly the remaining records number to manage in each sub tasks.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#189708",fw-bot,2025-01-23 18:42:46+00:00,[],2025-02-07 12:48:56+00:00,2025-01-24 12:45:19+00:00,https://github.com/odoo/odoo/pull/194944,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610691386, 'issue_id': 2807652084, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194944.png)](https://mergebot.odoo.com/odoo/odoo/pull/194944)', 'created_at': datetime.datetime(2025, 1, 23, 18, 42, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610691501, 'issue_id': 2807652084, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 42, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:42:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194944.png)](https://mergebot.odoo.com/odoo/odoo/pull/194944)

fw-bot (Issue Creator) on (2025-01-23 18:42:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807617428,pull_request,closed,,[FW][I18N] point_of_sale: make receipt header fully translated,"Because 'Tax ID' was within the `t-esc` the term was never translated. This goes against some country's compliance requirements for receipts, so we make it translatable now.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194801",fw-bot,2025-01-23 18:24:28+00:00,[],2025-02-07 11:23:34+00:00,2025-01-24 11:16:24+00:00,https://github.com/odoo/odoo/pull/194943,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610640389, 'issue_id': 2807617428, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194943.png)](https://mergebot.odoo.com/odoo/odoo/pull/194943)', 'created_at': datetime.datetime(2025, 1, 23, 18, 24, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610640403, 'issue_id': 2807617428, 'author': 'fw-bot', 'body': '@ticodoo @oomsveta cherrypicking of pull request odoo/odoo#194801 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/i18n/point_of_sale.pot\nCONFLICT (content): Merge conflict in addons/point_of_sale/i18n/point_of_sale.pot\nAuto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 24, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611981882, 'issue_id': 2807617428, 'author': 'ticodoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 8, 48, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:24:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194943.png)](https://mergebot.odoo.com/odoo/odoo/pull/194943)

fw-bot (Issue Creator) on (2025-01-23 18:24:30 UTC): @ticodoo @oomsveta cherrypicking of pull request odoo/odoo#194801 failed.

stdout:
```
Auto-merging addons/point_of_sale/i18n/point_of_sale.pot
CONFLICT (content): Merge conflict in addons/point_of_sale/i18n/point_of_sale.pot
Auto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/receipt_screen/receipt/receipt_header/receipt_header.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ticodoo on (2025-01-24 08:48:06 UTC): @robodoo r+

"
2807616909,pull_request,closed,,[FW][FIX] base: merge partner with ir.property w/o company,"Scenario:

- have two res.partner with ir.property with res_id and without company_id (eg. by editing the ir.property and removing it)
- merge these partners => UniqueViolation error because of unicity of (fields_id, company_id, res_id) constraint of ir_property table

Why:

The query merging property doesn't take NULL into account for company_id when checking if the destination partner already has this property.

Also a savepoint was used, without ignoring the error so the import could not be done if an error happened.

Fix:

Take the case where both records have NULL company_id into account.

Also ignore error and log a warning when a legitimate error happens because of duplicate ir.property in source records.

Note:

This issue should only happen when:

- modifying ir.property directly
- after a migration with a res.partner field becoming company_dependent field, the partners without company would get an ir.property without company_id

Without the fix, the added test would fail because of an error at each _merge call.

opw-4300572
opw-4030442

Forward-Port-Of: odoo/odoo#188673",fw-bot,2025-01-23 18:24:10+00:00,[],2025-01-27 13:26:50+00:00,2025-01-27 13:26:50+00:00,https://github.com/odoo/odoo/pull/194942,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610639831, 'issue_id': 2807616909, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194942.png)](https://mergebot.odoo.com/odoo/odoo/pull/194942)', 'created_at': datetime.datetime(2025, 1, 23, 18, 24, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610639844, 'issue_id': 2807616909, 'author': 'fw-bot', 'body': '@nle-odoo @ryv-odoo cherrypicking of pull request odoo/odoo#188673 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/tests/test_res_partner.py\nCONFLICT (content): Merge conflict in odoo/addons/base/tests/test_res_partner.py\nAuto-merging odoo/addons/base/wizard/base_partner_merge.py\nCONFLICT (content): Merge conflict in odoo/addons/base/wizard/base_partner_merge.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 24, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723743, 'issue_id': 2807616909, 'author': 'fw-bot', 'body': '@nle-odoo @ryv-odoo this forward port of odoo/odoo#188673 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615343386, 'issue_id': 2807616909, 'author': 'nle-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 10, 15, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:24:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194942.png)](https://mergebot.odoo.com/odoo/odoo/pull/194942)

fw-bot (Issue Creator) on (2025-01-23 18:24:12 UTC): @nle-odoo @ryv-odoo cherrypicking of pull request odoo/odoo#188673 failed.

stdout:
```
Auto-merging odoo/addons/base/tests/test_res_partner.py
CONFLICT (content): Merge conflict in odoo/addons/base/tests/test_res_partner.py
Auto-merging odoo/addons/base/wizard/base_partner_merge.py
CONFLICT (content): Merge conflict in odoo/addons/base/wizard/base_partner_merge.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:49 UTC): @nle-odoo @ryv-odoo this forward port of odoo/odoo#188673 is awaiting action (not merged or closed).

nle-odoo on (2025-01-27 10:15:29 UTC): robodoo r+

"
2807599418,pull_request,closed,,[FW][FIX] web: handle field sorting should include id,"This commit makes the same fix as [1] but it does t for kanban views instead of list views.

We discovered in task [2] we were developing for the master branch that we needed this fix and that we wanted to fix it from 17.0

[1]: ecc0a38a1d3b04f854d761fd498b120a4dfef5ad
[2]: opw-4370092

Task: opw-4370092

Forward-Port-Of: odoo/odoo#194859",fw-bot,2025-01-23 18:14:01+00:00,[],2025-02-07 18:57:22+00:00,2025-01-24 18:55:48+00:00,https://github.com/odoo/odoo/pull/194941,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610620605, 'issue_id': 2807599418, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194941.png)](https://mergebot.odoo.com/odoo/odoo/pull/194941)', 'created_at': datetime.datetime(2025, 1, 23, 18, 14, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610620686, 'issue_id': 2807599418, 'author': 'fw-bot', 'body': '@brboi @kebeclibre cherrypicking of pull request odoo/odoo#194859 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/views/kanban/kanban_arch_parser.js\nCONFLICT (modify/delete): addons/web/static/tests/views/fields/one2many_field_tests.js deleted in 278ce01fe1882ea424032dcf97c4d345816be96e and modified in 42f06a25ada368c880219739f020d5f3687846a4.  Version 42f06a25ada368c880219739f020d5f3687846a4 of addons/web/static/tests/views/fields/one2many_field_tests.js left in tree.\nCONFLICT (modify/delete): addons/web/static/tests/views/kanban/kanban_view_tests.js deleted in 278ce01fe1882ea424032dcf97c4d345816be96e and modified in 42f06a25ada368c880219739f020d5f3687846a4.  Version 42f06a25ada368c880219739f020d5f3687846a4 of addons/web/static/tests/views/kanban/kanban_view_tests.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 14, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612921893, 'issue_id': 2807599418, 'author': 'brboi', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 16, 25, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:14:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194941.png)](https://mergebot.odoo.com/odoo/odoo/pull/194941)

fw-bot (Issue Creator) on (2025-01-23 18:14:05 UTC): @brboi @kebeclibre cherrypicking of pull request odoo/odoo#194859 failed.

stdout:
```
Auto-merging addons/web/static/src/views/kanban/kanban_arch_parser.js
CONFLICT (modify/delete): addons/web/static/tests/views/fields/one2many_field_tests.js deleted in 278ce01fe1882ea424032dcf97c4d345816be96e and modified in 42f06a25ada368c880219739f020d5f3687846a4.  Version 42f06a25ada368c880219739f020d5f3687846a4 of addons/web/static/tests/views/fields/one2many_field_tests.js left in tree.
CONFLICT (modify/delete): addons/web/static/tests/views/kanban/kanban_view_tests.js deleted in 278ce01fe1882ea424032dcf97c4d345816be96e and modified in 42f06a25ada368c880219739f020d5f3687846a4.  Version 42f06a25ada368c880219739f020d5f3687846a4 of addons/web/static/tests/views/kanban/kanban_view_tests.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

brboi on (2025-01-24 16:25:49 UTC): @robodoo r+

"
2807597423,pull_request,closed,,[FW][FIX] pos_loyalty: correctly save loyalty.card in IndexedDB,"Before this commit, the condition to check the loyalty card to be saved in IndexedDB only kept the loyalty cards related to the finalized orders that were synced. It should keep the items that are not synced or finalized.

opw-4257389

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193551
Forward-Port-Of: odoo/odoo#188968",fw-bot,2025-01-23 18:13:11+00:00,[],2025-02-07 13:59:01+00:00,2025-01-24 13:57:41+00:00,https://github.com/odoo/odoo/pull/194940,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610618836, 'issue_id': 2807597423, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194940.png)](https://mergebot.odoo.com/odoo/odoo/pull/194940)', 'created_at': datetime.datetime(2025, 1, 23, 18, 13, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610618847, 'issue_id': 2807597423, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 13, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612308396, 'issue_id': 2807597423, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 33, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:13:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194940.png)](https://mergebot.odoo.com/odoo/odoo/pull/194940)

fw-bot (Issue Creator) on (2025-01-23 18:13:13 UTC): @pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 11:33:56 UTC): @robodoo r+

"
2807596616,pull_request,closed,,[FW][FIX] web: uniformize width of buttons in control panel,"On smaller screen, the ControlPanel's buttons for CogMenu, Buttonbox,
Knowledge, Search don't have a consistent width.

This commit fixes it by giving those buttons' icon a fixed width,
independently of the character's size and adjusting the horizontal
padding for this use case.

task-4492690

Forward-Port-Of: odoo/odoo#194616
Forward-Port-Of: odoo/odoo#194336",fw-bot,2025-01-23 18:12:52+00:00,[],2025-02-07 11:08:53+00:00,2025-01-24 11:09:21+00:00,https://github.com/odoo/odoo/pull/194939,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610618226, 'issue_id': 2807596616, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194939.png)](https://mergebot.odoo.com/odoo/odoo/pull/194939)', 'created_at': datetime.datetime(2025, 1, 23, 18, 12, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610618280, 'issue_id': 2807596616, 'author': 'fw-bot', 'body': '@pparidans @rfr-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 12, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611096113, 'issue_id': 2807596616, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 21, 54, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611237786, 'issue_id': 2807596616, 'author': 'robodoo', 'body': '@pparidans @rfr-odoo staging failed: ci/runbot (view more at https://runbot.odoo.com/runbot/build/73876226)', 'created_at': datetime.datetime(2025, 1, 23, 23, 43, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611747916, 'issue_id': 2807596616, 'author': 'pparidans', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 24, 7, 6, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:12:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194939.png)](https://mergebot.odoo.com/odoo/odoo/pull/194939)

fw-bot (Issue Creator) on (2025-01-23 18:12:55 UTC): @pparidans @rfr-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-23 21:54:31 UTC): @robodoo r+

robodoo on (2025-01-23 23:43:26 UTC): @pparidans @rfr-odoo staging failed: ci/runbot (view more at https://runbot.odoo.com/runbot/build/73876226)

pparidans on (2025-01-24 07:06:35 UTC): @robodoo retry

"
2807591185,pull_request,closed,,[FW][FIX] hr: fix singleton record error,"### Description of the issue/feature this PR addresses:
- Similar error: https://github.com/odoo/odoo/pull/194338
- In `_compute_plan_available_ids()` with `self` there can be multiple records but still use `self.department_id` in `for scheduler in todo`.

### Current behavior before PR:
- The error ValueError: Expected singleton: mail.activity.schedule(1, 2) occurred

Desired behavior after PR is merged:
- The problem has been fixed.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194650",fw-bot,2025-01-23 18:10:46+00:00,[],2025-01-30 12:41:52+00:00,2025-01-30 12:41:52+00:00,https://github.com/odoo/odoo/pull/194938,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610614116, 'issue_id': 2807591185, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194938.png)](https://mergebot.odoo.com/odoo/odoo/pull/194938)', 'created_at': datetime.datetime(2025, 1, 23, 18, 10, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610614136, 'issue_id': 2807591185, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 10, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610736742, 'issue_id': 2807591185, 'author': 'fw-bot', 'body': '@JocelynVN @Bertrand2 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 18, 48, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722606, 'issue_id': 2807591185, 'author': 'fw-bot', 'body': '@JocelynVN @Bertrand2 this forward port of odoo/odoo#194650 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617540129, 'issue_id': 2807591185, 'author': 'fw-bot', 'body': '@JocelynVN @Bertrand2 this forward port of odoo/odoo#194650 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:10:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194938.png)](https://mergebot.odoo.com/odoo/odoo/pull/194938)

fw-bot (Issue Creator) on (2025-01-23 18:10:48 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 18:48:36 UTC): @JocelynVN @Bertrand2 ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-27 02:01:41 UTC): @JocelynVN @Bertrand2 this forward port of odoo/odoo#194650 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:08 UTC): @JocelynVN @Bertrand2 this forward port of odoo/odoo#194650 is awaiting action (not merged or closed).

"
2807573244,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194822
Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-23 18:01:10+00:00,[],2025-02-06 23:31:29+00:00,2025-01-23 23:30:05+00:00,https://github.com/odoo/odoo/pull/194937,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610593846, 'issue_id': 2807573244, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194937.png)](https://mergebot.odoo.com/odoo/odoo/pull/194937)', 'created_at': datetime.datetime(2025, 1, 23, 18, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610593887, 'issue_id': 2807573244, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610601050, 'issue_id': 2807573244, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 18, 4, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610861024, 'issue_id': 2807573244, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 19, 38, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610861625, 'issue_id': 2807573244, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 19, 38, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 18:01:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194937.png)](https://mergebot.odoo.com/odoo/odoo/pull/194937)

fw-bot (Issue Creator) on (2025-01-23 18:01:14 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 18:04:17 UTC): @Williambraecky @Julien00859 ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 19:38:14 UTC): @Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.

Williambraecky on (2025-01-23 19:38:35 UTC): @robodoo r+

"
2807568992,pull_request,closed,,[FIX] sale_loyalty: update coupon partner after login,"Versions
--------
- saas-17.4+

Steps
-----
1. Create a `next_order_coupons` loyalty program;
2. go to eCommerce as Public User;
3. add products to cart so that the program gets applied;
4. on checkout, log in as Portal User during delivery step;
5. finalize payment.

Issue
-----
Two coupons were created: one for Public User with 0 points, one with no partner and 1 point.

There should only be one coupon, and it should be linked to the logged in user.

Cause
-----
PR https://github.com/odoo/odoo/pull/163545 changed `next_order_coupons` programs to set a partner when created. Issue is when they get created as Public user, the next call to `_update_programs_and_rewards` when logged in will remove the point entries for that coupon, as it's linked to partner that doesn't match the sale order's: https://github.com/odoo/odoo/blob/278ce01fe1882ea424032dcf97c4d345816be96e/addons/sale_loyalty/models/sale_order.py#L867-L870

Solution
--------
Before checking whether to unlink the point entries, update the coupon's `partner_id` if it was created for Public User and the sale order itself is no longer linked to Public User.

Also when generating new coupons in `_update_programs_and_rewards`, link `next_order_coupons` to the customer to make it behave identical to coupons created via `__try_apply_program` (relevant when changing the SO customer from a one specific partner to another specific partner).

opw-4397753",lvsz,2025-01-23 17:59:11+00:00,[],2025-01-31 08:35:23+00:00,2025-01-30 23:14:37+00:00,https://github.com/odoo/odoo/pull/194936,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610589187, 'issue_id': 2807568992, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194936.png)](https://mergebot.odoo.com/odoo/odoo/pull/194936)', 'created_at': datetime.datetime(2025, 1, 23, 17, 59, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612586200, 'issue_id': 2807568992, 'author': 'lvsz', 'body': ""Noticed there was still a quirk when creating a next order coupon for a sales order via Sales, then changing the customer: the initial 0 point coupon remains in existence, and a 1 point coupon with no partner is created (like in the eCommerce flow).\r\n\r\nNot sure if it's a good idea to change the `coupon.partner_id` for non-public users as well, so instead I modified `_update_programs_and_rewards` to add the `partner_id` when creating `next_order_coupons`, similar to how it's done for coupons created via `__try_apply_reward`. The 0 point coupon does remain however."", 'created_at': datetime.datetime(2025, 1, 24, 13, 54, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2625071318, 'issue_id': 2807568992, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 17, 4, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:59:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194936.png)](https://mergebot.odoo.com/odoo/odoo/pull/194936)

lvsz (Issue Creator) on (2025-01-24 13:54:28 UTC): Noticed there was still a quirk when creating a next order coupon for a sales order via Sales, then changing the customer: the initial 0 point coupon remains in existence, and a 1 point coupon with no partner is created (like in the eCommerce flow).

Not sure if it's a good idea to change the `coupon.partner_id` for non-public users as well, so instead I modified `_update_programs_and_rewards` to add the `partner_id` when creating `next_order_coupons`, similar to how it's done for coupons created via `__try_apply_reward`. The 0 point coupon does remain however.

lvsz (Issue Creator) on (2025-01-30 17:04:13 UTC): robodoo r+

"
2807554399,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#194672
Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-23 17:53:44+00:00,[],2025-02-07 12:38:50+00:00,2025-01-24 12:29:08+00:00,https://github.com/odoo/odoo/pull/194935,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610572558, 'issue_id': 2807554399, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194935.png)](https://mergebot.odoo.com/odoo/odoo/pull/194935)', 'created_at': datetime.datetime(2025, 1, 23, 17, 53, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610572668, 'issue_id': 2807554399, 'author': 'fw-bot', 'body': '@mcm-odoo @juliusc2066 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194924\n* odoo/odoo#194904\n* odoo/odoo#194880\n* odoo/odoo#194848\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 53, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612078178, 'issue_id': 2807554399, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 38, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:53:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194935.png)](https://mergebot.odoo.com/odoo/odoo/pull/194935)

fw-bot (Issue Creator) on (2025-01-23 17:53:45 UTC): @mcm-odoo @juliusc2066 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194924
* odoo/odoo#194904
* odoo/odoo#194880
* odoo/odoo#194848

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mcm-odoo on (2025-01-24 09:38:29 UTC): @robodoo r+

"
2807534042,pull_request,closed,,[FW][FIX] sale_purchase: read service_to_purchase from the order's company,"Steps to reproduce:

1. Create two companies: Company A and Company B
2. Create a service product
3. Configure the product to be purchased on Company A and not on Company B
4. Create a sales order on Company B, while logged in Company A
5. Confirm the order

Expected result:

The service PO is created on Company B, even though it was configured not to.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194432
Forward-Port-Of: odoo/odoo#177659",fw-bot,2025-01-23 17:44:00+00:00,[],2025-02-07 11:40:32+00:00,2025-01-24 11:28:11+00:00,https://github.com/odoo/odoo/pull/194934,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610550291, 'issue_id': 2807534042, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194934.png)](https://mergebot.odoo.com/odoo/odoo/pull/194934)', 'created_at': datetime.datetime(2025, 1, 23, 17, 44, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610550313, 'issue_id': 2807534042, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 44, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610764977, 'issue_id': 2807534042, 'author': 'fw-bot', 'body': '@ivantodorovich @ticodoo the next pull request (odoo/odoo#194947) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 52, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612049731, 'issue_id': 2807534042, 'author': 'ticodoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 23, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:44:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194934.png)](https://mergebot.odoo.com/odoo/odoo/pull/194934)

fw-bot (Issue Creator) on (2025-01-23 17:44:02 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 18:52:15 UTC): @ivantodorovich @ticodoo the next pull request (odoo/odoo#194947) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ticodoo on (2025-01-24 09:23:41 UTC): @robodoo r+

"
2807524156,pull_request,open,,[ADD] base: i18n command to import/export files,[WIP],lordkrandel,2025-01-23 17:38:27+00:00,[],2025-01-31 13:30:04+00:00,,https://github.com/odoo/odoo/pull/194933,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610539244, 'issue_id': 2807524156, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194933.png)](https://mergebot.odoo.com/odoo/odoo/pull/194933)', 'created_at': datetime.datetime(2025, 1, 23, 17, 38, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:38:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194933.png)](https://mergebot.odoo.com/odoo/odoo/pull/194933)

"
2807523084,pull_request,closed,,"[FIX] point_of_sale, pos_restaurant, pos_event: sync with write date","Prior to this change, some customers had problems with the synchronization of certain orders. Sometimes, some of them were not synchronized correctly.

This was due to the fact that we were sending ids to be retrieved by other devices each time we synchronized them.

Now, every time a synchronization request is received, we send all local orders write_date to the server for updates.

",davidmonnom,2025-01-23 17:37:52+00:00,[],2025-01-25 10:16:54+00:00,2025-01-25 10:16:54+00:00,https://github.com/odoo/odoo/pull/194932,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610538085, 'issue_id': 2807523084, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194932.png)](https://mergebot.odoo.com/odoo/odoo/pull/194932)', 'created_at': datetime.datetime(2025, 1, 23, 17, 37, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:37:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194932.png)](https://mergebot.odoo.com/odoo/odoo/pull/194932)

"
2807495441,pull_request,closed,,[FW][FIX] im_livechat: pass avatar token to cors route,"Follow up of https://github.com/odoo/odoo/pull/187799

The livechat override needs to be adapted as well to provide the token.

- Login with Mitchell Admin to a database with im_livechat installed
- Open support page as guest
- The operator picture is missing

opw-4489740

Forward-Port-Of: odoo/odoo#194414",fw-bot,2025-01-23 17:25:13+00:00,[],2025-01-27 16:15:38+00:00,2025-01-23 20:25:29+00:00,https://github.com/odoo/odoo/pull/194931,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610487501, 'issue_id': 2807495441, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194931.png)](https://mergebot.odoo.com/odoo/odoo/pull/194931)', 'created_at': datetime.datetime(2025, 1, 23, 17, 25, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610487550, 'issue_id': 2807495441, 'author': 'fw-bot', 'body': '@seb-odoo @tsm-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194667\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 25, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:25:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194931.png)](https://mergebot.odoo.com/odoo/odoo/pull/194931)

fw-bot (Issue Creator) on (2025-01-23 17:25:15 UTC): @seb-odoo @tsm-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194667

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807489654,pull_request,closed,,[FW][FIX] web_editor: delete backward on lists,"Current behavior before PR:

When multiple types of lists were selected and the deleteBackward operation was performed, the list type remained unchanged.

Desired behavior after PR is merged:

When deleteBackward is pressed with multiple types of lists selected, and all selected content is removed, if the anchor node's list item is empty, that list item type will change to match the type of the list where the deleteBackward operation started.

task:4187739

Forward-Port-Of: odoo/odoo#192446
Forward-Port-Of: odoo/odoo#180687",fw-bot,2025-01-23 17:22:36+00:00,[],2025-02-07 12:38:47+00:00,2025-01-24 12:28:48+00:00,https://github.com/odoo/odoo/pull/194930,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610480362, 'issue_id': 2807489654, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194930.png)](https://mergebot.odoo.com/odoo/odoo/pull/194930)', 'created_at': datetime.datetime(2025, 1, 23, 17, 22, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610480388, 'issue_id': 2807489654, 'author': 'fw-bot', 'body': '@dhba-odoo @dmo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194916\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 22, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612016836, 'issue_id': 2807489654, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 7, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:22:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194930.png)](https://mergebot.odoo.com/odoo/odoo/pull/194930)

fw-bot (Issue Creator) on (2025-01-23 17:22:38 UTC): @dhba-odoo @dmo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194916

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dmo-odoo on (2025-01-24 09:07:14 UTC): @robodoo r+

"
2807480706,pull_request,closed,,[FW][FIX] base_vat: add a method to validate Moroccan VAT numbers,"### Steps to reproduce:
- Create a new Contact
- Set the country to Morocco
- Add ""52258521"" as a VAT number
- Try to validate -> Error

### Cause:
Only occurs after saas-17.4 because it is related to the library `stdnum`. The version of this library change when the Python version is >3.11.  As the SaaS version use Python3.12 since saas-17.4 and Python3.10 before, the bug only appears in saas-17.4, but this change targets 17.0 because 17.0 supports Python > 3.10.

The cause of the bug is the new version of the library which implements a verification method that corresponds to Moroccan ICE numbers and not VAT numbers.

### Solution:
Create the method to check the Moroccan VAT numbers. The format is just a number with 8 digits.

opw-4447478

Forward-Port-Of: odoo/odoo#194592",fw-bot,2025-01-23 17:18:11+00:00,[],2025-01-29 13:49:48+00:00,2025-01-29 13:49:48+00:00,https://github.com/odoo/odoo/pull/194929,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610471135, 'issue_id': 2807480706, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194929.png)](https://mergebot.odoo.com/odoo/odoo/pull/194929)', 'created_at': datetime.datetime(2025, 1, 23, 17, 18, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610471151, 'issue_id': 2807480706, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194914\n* odoo/odoo#194879\n* odoo/odoo#194846\n* odoo/odoo#194818\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 18, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611747424, 'issue_id': 2807480706, 'author': 'mathcoutant', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 7, 6, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612089977, 'issue_id': 2807480706, 'author': 'mathcoutant', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 9, 44, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612090179, 'issue_id': 2807480706, 'author': 'robodoo', 'body': 'Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.', 'created_at': datetime.datetime(2025, 1, 24, 9, 44, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722654, 'issue_id': 2807480706, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617540352, 'issue_id': 2807480706, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620471213, 'issue_id': 2807480706, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 0, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:18:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194929.png)](https://mergebot.odoo.com/odoo/odoo/pull/194929)

fw-bot (Issue Creator) on (2025-01-23 17:18:13 UTC): @mathcoutant @FlorianGilbert this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194914
* odoo/odoo#194879
* odoo/odoo#194846
* odoo/odoo#194818

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mathcoutant on (2025-01-24 07:06:21 UTC): @robodoo r+

mathcoutant on (2025-01-24 09:44:37 UTC): @robodoo r-

robodoo on (2025-01-24 09:44:40 UTC): Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.

fw-bot (Issue Creator) on (2025-01-27 02:01:44 UTC): @mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:11 UTC): @mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 02:00:56 UTC): @mathcoutant @FlorianGilbert this forward port of odoo/odoo#194592 is awaiting action (not merged or closed).

"
2807461428,pull_request,closed,,[FW][FIX] loyalty: fix expiration date condition,"Steps:
- Install sale app.
- Enable Loyalty settings.
- Try to create a card on a loyalty.

Issue:
- Giving validation error.

Casue:
- In [PR] forgot to check expiration_date set or not before raise an error.

Fix:
- Added condition to check if expiration_date set or not on card before raising an error.

[PR]: https://github.com/odoo/odoo/pull/171453

opw-4492179
opw-4490587
opw-4504188
opw-4495530

Forward-Port-Of: odoo/odoo#194836
Forward-Port-Of: odoo/odoo#194785",fw-bot,2025-01-23 17:09:38+00:00,[],2025-01-27 07:44:53+00:00,2025-01-27 07:44:53+00:00,https://github.com/odoo/odoo/pull/194928,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610448139, 'issue_id': 2807461428, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194928.png)](https://mergebot.odoo.com/odoo/odoo/pull/194928)', 'created_at': datetime.datetime(2025, 1, 23, 17, 9, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610448175, 'issue_id': 2807461428, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 9, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610455883, 'issue_id': 2807461428, 'author': 'fw-bot', 'body': '@kcv-odoo @Demesmaeker ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 17, 13, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722558, 'issue_id': 2807461428, 'author': 'fw-bot', 'body': '@kcv-odoo @Demesmaeker this forward port of odoo/odoo#194785 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614868993, 'issue_id': 2807461428, 'author': 'fw-bot', 'body': '@kcv-odoo @Demesmaeker this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 27, 5, 19, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614870931, 'issue_id': 2807461428, 'author': 'kcv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 5, 21, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614887376, 'issue_id': 2807461428, 'author': 'robodoo', 'body': ""@kcv-odoo @Demesmaeker 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 27, 5, 39, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:09:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194928.png)](https://mergebot.odoo.com/odoo/odoo/pull/194928)

fw-bot (Issue Creator) on (2025-01-23 17:09:39 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 17:13:03 UTC): @kcv-odoo @Demesmaeker ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-27 02:01:38 UTC): @kcv-odoo @Demesmaeker this forward port of odoo/odoo#194785 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 05:19:33 UTC): @kcv-odoo @Demesmaeker this PR was modified / updated and has become a normal PR. It must be merged directly.

kcv-odoo on (2025-01-27 05:21:46 UTC): @robodoo r+

robodoo on (2025-01-27 05:39:27 UTC): @kcv-odoo @Demesmaeker 'ci/runbot' failed on this reviewed PR.

"
2807460702,pull_request,closed,,[FW][FIX] web: handle field sorting should include id,"This commit makes the same fix as [1] but it does t for kanban views instead of list views.

We discovered in task [2] we were developing for the master branch that we needed this fix and that we wanted to fix it from 17.0

[1]: ecc0a38a1d3b04f854d761fd498b120a4dfef5ad
[2]: opw-4370092

Task: opw-4370092

Forward-Port-Of: odoo/odoo#194859",fw-bot,2025-01-23 17:09:19+00:00,[],2025-02-07 10:07:55+00:00,2025-01-24 10:01:04+00:00,https://github.com/odoo/odoo/pull/194927,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610447383, 'issue_id': 2807460702, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194927.png)](https://mergebot.odoo.com/odoo/odoo/pull/194927)', 'created_at': datetime.datetime(2025, 1, 23, 17, 9, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610447413, 'issue_id': 2807460702, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 17, 9, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610620629, 'issue_id': 2807460702, 'author': 'fw-bot', 'body': '@brboi @kebeclibre the next pull request (odoo/odoo#194941) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 18, 14, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611738002, 'issue_id': 2807460702, 'author': 'kebeclibre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 7, 1, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 17:09:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194927.png)](https://mergebot.odoo.com/odoo/odoo/pull/194927)

fw-bot (Issue Creator) on (2025-01-23 17:09:24 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 18:14:03 UTC): @brboi @kebeclibre the next pull request (odoo/odoo#194941) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kebeclibre on (2025-01-24 07:01:19 UTC): @robodoo r+

"
2807437856,pull_request,closed,,[FW][FIX] hr: fix singleton record error,"### Description of the issue/feature this PR addresses:
- Similar error: https://github.com/odoo/odoo/pull/194338
- In `_compute_plan_available_ids()` with `self` there can be multiple records but still use `self.department_id` in `for scheduler in todo`.

### Current behavior before PR:
- The error ValueError: Expected singleton: mail.activity.schedule(1, 2) occurred

Desired behavior after PR is merged:
- The problem has been fixed.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194650",fw-bot,2025-01-23 16:58:53+00:00,[],2025-01-30 11:03:57+00:00,2025-01-30 11:03:57+00:00,https://github.com/odoo/odoo/pull/194926,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610423015, 'issue_id': 2807437856, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194926.png)](https://mergebot.odoo.com/odoo/odoo/pull/194926)', 'created_at': datetime.datetime(2025, 1, 23, 16, 58, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610423038, 'issue_id': 2807437856, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 58, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:58:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194926.png)](https://mergebot.odoo.com/odoo/odoo/pull/194926)

fw-bot (Issue Creator) on (2025-01-23 16:58:55 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807416685,pull_request,closed,,[FW][FIX] account: Account Journal Late Bills Count,"**[FIX] account: Account Journal Late Bills Count**

This fix mitigates an issue when a line of a Bill is paid but appears in the late Bills count in the dashboard.

**Steps to reproduce:**

1. Create a payment term to pay in installemts.
2. Create a bill an X amount back in the past to have one installment as late. 3 - Pay the late installment

**Issue**: The paid installment will still be counted as late in the dashboard.

**Fix**: filter out line with residual amount different than zero.

_opw-4327227_


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191600",fw-bot,2025-01-23 16:48:44+00:00,[],2025-02-03 11:34:03+00:00,2025-02-03 11:34:03+00:00,https://github.com/odoo/odoo/pull/194925,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610400119, 'issue_id': 2807416685, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194925.png)](https://mergebot.odoo.com/odoo/odoo/pull/194925)', 'created_at': datetime.datetime(2025, 1, 23, 16, 48, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610400150, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre cherrypicking of pull request odoo/odoo#191600 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_journal_dashboard.py\nCONFLICT (content): Merge conflict in addons/account/models/account_journal_dashboard.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 48, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723448, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542889, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620471694, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623354550, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 30, 2, 2, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626137064, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 31, 2, 2, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2628685390, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 1, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629201927, 'issue_id': 2807416685, 'author': 'fw-bot', 'body': '@assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 2, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630693441, 'issue_id': 2807416685, 'author': 'william-andre', 'body': ""We don't check the date per line but per move since 5e0ae1711d2ce82ef2e3fb615a179ce7b25bfc51\r\n\r\nSo this doesn't really make sense anymore in that context. I'm not sure if the change was done in that commit is 100% legit though..."", 'created_at': datetime.datetime(2025, 2, 3, 11, 34, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:48:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194925.png)](https://mergebot.odoo.com/odoo/odoo/pull/194925)

fw-bot (Issue Creator) on (2025-01-23 16:48:46 UTC): @assellalou @william-andre cherrypicking of pull request odoo/odoo#191600 failed.

stdout:
```
Auto-merging addons/account/models/account_journal_dashboard.py
CONFLICT (content): Merge conflict in addons/account/models/account_journal_dashboard.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:31 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:50 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 02:01:21 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-30 02:02:11 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-31 02:02:05 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-01 02:01:38 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-02 02:01:50 UTC): @assellalou @william-andre this forward port of odoo/odoo#191600 is awaiting action (not merged or closed).

william-andre on (2025-02-03 11:34:03 UTC): We don't check the date per line but per move since 5e0ae1711d2ce82ef2e3fb615a179ce7b25bfc51

So this doesn't really make sense anymore in that context. I'm not sure if the change was done in that commit is 100% legit though...

"
2807411236,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#194672
Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-23 16:46:16+00:00,[],2025-02-07 12:48:56+00:00,2025-01-24 12:45:15+00:00,https://github.com/odoo/odoo/pull/194924,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610393835, 'issue_id': 2807411236, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194924.png)](https://mergebot.odoo.com/odoo/odoo/pull/194924)', 'created_at': datetime.datetime(2025, 1, 23, 16, 46, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610393860, 'issue_id': 2807411236, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 46, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:46:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194924.png)](https://mergebot.odoo.com/odoo/odoo/pull/194924)

fw-bot (Issue Creator) on (2025-01-23 16:46:18 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807393676,pull_request,closed,,[FW][FIX] portal: invoice layout issue,"This PR addresses the layout issue in the sidebar of the portal, where a preview of the customer's invoice is displayed.

Before this PR, users encountered a broken layout for large invoice amounts, making it difficult to read the total.

This issue is resolved in this PR by adding a rules for the `h2` and `span` fields ensuring proper wrapping for better readability.


Steps to reproduce:

- Login as admin.
- Go to Website app.
- Navigate to ""My account"" at my/home url.
- Click on ""My invoices"" or navigate to my/invoices url.
- Click on one invoice in order to see its preview.
- Via the browser tools, edit the amount of on the left sidebar and insert a very big number.

task-4435472

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194277
Forward-Port-Of: odoo/odoo#192769",fw-bot,2025-01-23 16:39:28+00:00,[],2025-01-31 08:04:49+00:00,2025-01-30 17:37:05+00:00,https://github.com/odoo/odoo/pull/194923,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610353156, 'issue_id': 2807393676, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194923.png)](https://mergebot.odoo.com/odoo/odoo/pull/194923)', 'created_at': datetime.datetime(2025, 1, 23, 16, 39, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610353199, 'issue_id': 2807393676, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 39, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610481844, 'issue_id': 2807393676, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 17, 23, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385726, 'issue_id': 2807393676, 'author': 'fw-bot', 'body': '@fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:39:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194923.png)](https://mergebot.odoo.com/odoo/odoo/pull/194923)

fw-bot (Issue Creator) on (2025-01-23 16:39:30 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 17:23:21 UTC): @fres-sudo @qsm-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 02:01:17 UTC): @fres-sudo @qsm-odoo this forward port of odoo/odoo#192769 is awaiting action (not merged or closed).

"
2807379736,pull_request,closed,,[FW][FIX] stock: prioritize routes by sequence in extract_rule,"### Description of the issue/feature this PR addresses:
When a product is configured with both buy and manufacture routes, the manufacture route is always prioritized, regardless of the sequence defined in the routes.

### Current behavior before PR:
The method extract_rule stops evaluating routes once it finds a valid rule, even if other rules with a lower sequence exist. This leads to the manufacture route being prioritized over buy, which is not the intended behavior.

### Desired behavior after PR is merged:
The routes are now evaluated based on their sequence, ensuring that rules associated with routes of lower sequence are considered first.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
cc @ForgeFlow

Forward-Port-Of: odoo/odoo#194706
Forward-Port-Of: odoo/odoo#188846",fw-bot,2025-01-23 16:33:16+00:00,[],2025-02-07 11:40:30+00:00,2025-01-24 11:28:02+00:00,https://github.com/odoo/odoo/pull/194922,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610333730, 'issue_id': 2807379736, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194922.png)](https://mergebot.odoo.com/odoo/odoo/pull/194922)', 'created_at': datetime.datetime(2025, 1, 23, 16, 33, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610333756, 'issue_id': 2807379736, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 33, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610405758, 'issue_id': 2807379736, 'author': 'fw-bot', 'body': '@RicardCForgeFlow @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 16, 51, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611886904, 'issue_id': 2807379736, 'author': 'fw-bot', 'body': '@RicardCForgeFlow @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 7, 55, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611889875, 'issue_id': 2807379736, 'author': 'Whenrow', 'body': 'robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 1, 24, 7, 57, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611889934, 'issue_id': 2807379736, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 24, 7, 57, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:33:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194922.png)](https://mergebot.odoo.com/odoo/odoo/pull/194922)

fw-bot (Issue Creator) on (2025-01-23 16:33:18 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 16:51:13 UTC): @RicardCForgeFlow @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 07:55:42 UTC): @RicardCForgeFlow @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.

Whenrow on (2025-01-24 07:57:51 UTC): robodoo r+ rebase-ff

robodoo on (2025-01-24 07:57:53 UTC): Merge method set to rebase and fast-forward.

"
2807368965,pull_request,closed,,"[FW][FIX] mail,im_livechat: chat window focus followup","This PR changes the default value of the chat window focus. It's safer to ask for
the focus every time you need it.
It also adds a test to the feature.

task-4452938

Forward-Port-Of: odoo/odoo#192522",fw-bot,2025-01-23 16:28:43+00:00,[],2025-02-06 19:17:34+00:00,2025-01-23 19:17:23+00:00,https://github.com/odoo/odoo/pull/194921,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610321944, 'issue_id': 2807368965, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194921.png)](https://mergebot.odoo.com/odoo/odoo/pull/194921)', 'created_at': datetime.datetime(2025, 1, 23, 16, 28, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610321960, 'issue_id': 2807368965, 'author': 'fw-bot', 'body': '@phenix-factory @seb-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 28, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610408533, 'issue_id': 2807368965, 'author': 'robodoo', 'body': ""@phenix-factory @seb-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 16, 52, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:28:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194921.png)](https://mergebot.odoo.com/odoo/odoo/pull/194921)

fw-bot (Issue Creator) on (2025-01-23 16:28:45 UTC): @phenix-factory @seb-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-23 16:52:24 UTC): @phenix-factory @seb-odoo 'ci/runbot' failed on this reviewed PR.

"
2807368255,pull_request,closed,,[FW][PERF] pos_self_order: prevent loading product images in load,"Before this commit, product images were unnecessarily loaded along with the POS data. This was redundant since the images are loaded separately. Additionally, loading the images caused excessive memory usage, leading to memory errors in certain scenarios.

opw-4494712

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194517
Forward-Port-Of: odoo/odoo#194409",fw-bot,2025-01-23 16:28:25+00:00,[],2025-02-07 13:59:01+00:00,2025-01-24 13:57:37+00:00,https://github.com/odoo/odoo/pull/194920,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610320969, 'issue_id': 2807368255, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194920.png)](https://mergebot.odoo.com/odoo/odoo/pull/194920)', 'created_at': datetime.datetime(2025, 1, 23, 16, 28, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610321010, 'issue_id': 2807368255, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 28, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612308080, 'issue_id': 2807368255, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 33, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:28:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194920.png)](https://mergebot.odoo.com/odoo/odoo/pull/194920)

fw-bot (Issue Creator) on (2025-01-23 16:28:27 UTC): @pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 11:33:46 UTC): @robodoo r+

"
2807320247,pull_request,closed,,[FW][FIX] sale_loyalty: traceback when coupon applied on so,"Steps to reproduce:
- Create SO and add a product.
- Apply  discount coupon to SO.

Issue:
- Traceback occurs when the delivery module is not installed.

Cause:
- The line.is_delivery attribute is not accessible when the delivery module is not installed, leading to an error.

Fix:
- Use the line._is_delivery() method to correctly check for delivery lines.

opw-4509360

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194839",fw-bot,2025-01-23 16:09:42+00:00,[],2025-02-07 12:48:50+00:00,2025-01-24 12:44:48+00:00,https://github.com/odoo/odoo/pull/194919,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610249847, 'issue_id': 2807320247, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194919.png)](https://mergebot.odoo.com/odoo/odoo/pull/194919)', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610249880, 'issue_id': 2807320247, 'author': 'fw-bot', 'body': '@shrm-odoo @Feyensv cherrypicking of pull request odoo/odoo#194839 failed.\n\nstdout:\n```\nAuto-merging addons/sale_loyalty/models/sale_order.py\nCONFLICT (content): Merge conflict in addons/sale_loyalty/models/sale_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611645738, 'issue_id': 2807320247, 'author': 'shrm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 40, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:09:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194919.png)](https://mergebot.odoo.com/odoo/odoo/pull/194919)

fw-bot (Issue Creator) on (2025-01-23 16:09:44 UTC): @shrm-odoo @Feyensv cherrypicking of pull request odoo/odoo#194839 failed.

stdout:
```
Auto-merging addons/sale_loyalty/models/sale_order.py
CONFLICT (content): Merge conflict in addons/sale_loyalty/models/sale_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

shrm-odoo on (2025-01-24 05:40:12 UTC): @robodoo r+

"
2807319583,pull_request,closed,,[FW][FIX] mail: ensure selection updates correctly after mention insertion,"**Problem**:
When typing `@` in a non-collapsed selection (`a[b]`) and selecting an item from the mention list, the selection state becomes stale. This happens because `handleObserverRecords` calls `updateHints`, which relies on `getSelectionData`. However, `this.activeSelection` retains the outdated selection due to conditions like `documentSelectionIsInEditable` and `!this.activeSelection.anchorNode.isConnected` being `false`.

As a result, `this.activeSelection` reflects `a[b]` while the DOM selection has already updated to `a[]`, leading to invalid offsets.

**Solution**:
Call `this.dependencies.selection.focusEditable();` during `onSelect` to ensure the selection is updated to reflect the editor state rather than the mention state.

**Steps to Reproduce**:
1. Open the chatter.
2. Add some text.
3. Select a portion of the text.
4. Type `@`.
5. Select an item (person) from the mention list.
6. Observe a traceback error.

opw-4498165

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194480",fw-bot,2025-01-23 16:09:24+00:00,[],2025-02-07 12:48:54+00:00,2025-01-24 12:45:04+00:00,https://github.com/odoo/odoo/pull/194918,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610249004, 'issue_id': 2807319583, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194918.png)](https://mergebot.odoo.com/odoo/odoo/pull/194918)', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610249033, 'issue_id': 2807319583, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610414816, 'issue_id': 2807319583, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 16, 55, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:09:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194918.png)](https://mergebot.odoo.com/odoo/odoo/pull/194918)

fw-bot (Issue Creator) on (2025-01-23 16:09:26 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 16:55:17 UTC): @walidsahli @dmo-odoo ci/runbot failed on this forward-port PR

"
2807318921,pull_request,closed,,[FW][FIX] account: no frequent accounts,"The name search on the account field (account.account on account move line) looks for frequently used accounts for the partner. When no search text is provided, the name search suggests accounts that were previously used. When there are no frequent accounts, the name search returns nothing.

To reproduce

- create a vendor bill
- select a partner that has never been billed
- add a line
- click the account many2one field dropdown

Since no account options are available, the dropdown flashes open and quickly disappears.

Forward-Port-Of: odoo/odoo#194303
Forward-Port-Of: odoo/odoo#193999",fw-bot,2025-01-23 16:09:06+00:00,[],2025-01-25 13:20:48+00:00,2025-01-25 13:20:48+00:00,https://github.com/odoo/odoo/pull/194917,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610248212, 'issue_id': 2807318921, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194917.png)](https://mergebot.odoo.com/odoo/odoo/pull/194917)', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610248246, 'issue_id': 2807318921, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 9, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610412528, 'issue_id': 2807318921, 'author': 'fw-bot', 'body': '@h4818 @william-andre ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 16, 54, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385134, 'issue_id': 2807318921, 'author': 'fw-bot', 'body': '@h4818 @william-andre this forward port of odoo/odoo#193999 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 0, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721736, 'issue_id': 2807318921, 'author': 'fw-bot', 'body': '@h4818 @william-andre this forward port of odoo/odoo#193999 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:09:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194917.png)](https://mergebot.odoo.com/odoo/odoo/pull/194917)

fw-bot (Issue Creator) on (2025-01-23 16:09:08 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 16:54:14 UTC): @h4818 @william-andre ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 02:00:52 UTC): @h4818 @william-andre this forward port of odoo/odoo#193999 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:05 UTC): @h4818 @william-andre this forward port of odoo/odoo#193999 is awaiting action (not merged or closed).

"
2807318290,pull_request,closed,,[FW][FIX] web_editor: delete backward on lists,"Current behavior before PR:

When multiple types of lists were selected and the deleteBackward operation was performed, the list type remained unchanged.

Desired behavior after PR is merged:

When deleteBackward is pressed with multiple types of lists selected, and all selected content is removed, if the anchor node's list item is empty, that list item type will change to match the type of the list where the deleteBackward operation started.

task:4187739

Forward-Port-Of: odoo/odoo#192446
Forward-Port-Of: odoo/odoo#180687",fw-bot,2025-01-23 16:08:48+00:00,[],2025-02-07 12:48:53+00:00,2025-01-24 12:45:00+00:00,https://github.com/odoo/odoo/pull/194916,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610247431, 'issue_id': 2807318290, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194916.png)](https://mergebot.odoo.com/odoo/odoo/pull/194916)', 'created_at': datetime.datetime(2025, 1, 23, 16, 8, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610247460, 'issue_id': 2807318290, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 8, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:08:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194916.png)](https://mergebot.odoo.com/odoo/odoo/pull/194916)

fw-bot (Issue Creator) on (2025-01-23 16:08:50 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807317488,pull_request,closed,,[FW][FIX] account: prevent setting wrong partner_id.payment_term,"Steps to reproduce:
- have two companies A and B
- create a new partner
- create a new payment term for Company A
- In Company A, set the customer's payment term the newly created one
- Configure aliases for invoice in company A and B
- Make sure the default company for OdooBot is COmpany A
- Send an email to company B

Issue:
Access Error

Cause:
payment_term is pre-compute and the company context is the one of OdooBot

opw-4103229

Forward-Port-Of: odoo/odoo#184482
Forward-Port-Of: odoo/odoo#178829",fw-bot,2025-01-23 16:08:28+00:00,[],2025-02-06 19:17:33+00:00,2025-01-23 19:17:16+00:00,https://github.com/odoo/odoo/pull/194915,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610246690, 'issue_id': 2807317488, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194915.png)](https://mergebot.odoo.com/odoo/odoo/pull/194915)', 'created_at': datetime.datetime(2025, 1, 23, 16, 8, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610246742, 'issue_id': 2807317488, 'author': 'fw-bot', 'body': '@yosa-odoo @epictete this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194895\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 8, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610260015, 'issue_id': 2807317488, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 16, 13, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:08:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194915.png)](https://mergebot.odoo.com/odoo/odoo/pull/194915)

fw-bot (Issue Creator) on (2025-01-23 16:08:34 UTC): @yosa-odoo @epictete this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194895

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-23 16:13:06 UTC): @robodoo r+

"
2807310196,pull_request,closed,,[FW][FIX] base_vat: add a method to validate Moroccan VAT numbers,"### Steps to reproduce:
- Create a new Contact
- Set the country to Morocco
- Add ""52258521"" as a VAT number
- Try to validate -> Error

### Cause:
Only occurs after saas-17.4 because it is related to the library `stdnum`. The version of this library change when the Python version is >3.11.  As the SaaS version use Python3.12 since saas-17.4 and Python3.10 before, the bug only appears in saas-17.4, but this change targets 17.0 because 17.0 supports Python > 3.10.

The cause of the bug is the new version of the library which implements a verification method that corresponds to Moroccan ICE numbers and not VAT numbers.

### Solution:
Create the method to check the Moroccan VAT numbers. The format is just a number with 8 digits.

opw-4447478

Forward-Port-Of: odoo/odoo#194592",fw-bot,2025-01-23 16:05:18+00:00,[],2025-01-29 13:40:40+00:00,2025-01-29 13:40:40+00:00,https://github.com/odoo/odoo/pull/194914,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610232466, 'issue_id': 2807310196, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194914.png)](https://mergebot.odoo.com/odoo/odoo/pull/194914)', 'created_at': datetime.datetime(2025, 1, 23, 16, 5, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610232598, 'issue_id': 2807310196, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 5, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612091224, 'issue_id': 2807310196, 'author': 'mathcoutant', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612091317, 'issue_id': 2807310196, 'author': 'robodoo', 'body': 'Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:05:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194914.png)](https://mergebot.odoo.com/odoo/odoo/pull/194914)

fw-bot (Issue Creator) on (2025-01-23 16:05:20 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mathcoutant on (2025-01-24 09:45:13 UTC): @robodoo r-

robodoo on (2025-01-24 09:45:16 UTC): Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.

"
2807297537,pull_request,closed,,[FW][FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194789",fw-bot,2025-01-23 16:00:43+00:00,[],2025-02-07 07:44:58+00:00,2025-01-24 07:18:50+00:00,https://github.com/odoo/odoo/pull/194913,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2610211171, 'issue_id': 2807297537, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194913.png)](https://mergebot.odoo.com/odoo/odoo/pull/194913)', 'created_at': datetime.datetime(2025, 1, 23, 16, 0, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610211205, 'issue_id': 2807297537, 'author': 'fw-bot', 'body': '@pipu-odoo @aab-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194891\n* odoo/odoo#194861\n* odoo/odoo#194831\n* odoo/odoo#194808\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 16, 0, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611669181, 'issue_id': 2807297537, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 6, 1, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 16:00:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194913.png)](https://mergebot.odoo.com/odoo/odoo/pull/194913)

fw-bot (Issue Creator) on (2025-01-23 16:00:45 UTC): @pipu-odoo @aab-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194891
* odoo/odoo#194861
* odoo/odoo#194831
* odoo/odoo#194808

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-24 06:01:19 UTC): @robodoo r+

"
2807293612,pull_request,closed,,[FW][IMP] l10n_mu: PDF invoice requirements,"This commit add few data on the report_invoice for Mauritius localization.

task-4379202

Forward-Port-Of: odoo/odoo#194590
Forward-Port-Of: odoo/odoo#190723",fw-bot,2025-01-23 15:59:13+00:00,[],2025-02-07 15:44:02+00:00,2025-01-24 15:20:50+00:00,https://github.com/odoo/odoo/pull/194912,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2610204816, 'issue_id': 2807293612, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194912.png)](https://mergebot.odoo.com/odoo/odoo/pull/194912)', 'created_at': datetime.datetime(2025, 1, 23, 15, 59, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610204921, 'issue_id': 2807293612, 'author': 'fw-bot', 'body': '@igbe-odoo @hupo-odoo cherrypicking of pull request odoo/odoo#190723 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_mu_account/views/report_invoice.xml\nCONFLICT (content): Merge conflict in addons/l10n_mu_account/views/report_invoice.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 59, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612534729, 'issue_id': 2807293612, 'author': 'igbe-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 29, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:59:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194912.png)](https://mergebot.odoo.com/odoo/odoo/pull/194912)

fw-bot (Issue Creator) on (2025-01-23 15:59:17 UTC): @igbe-odoo @hupo-odoo cherrypicking of pull request odoo/odoo#190723 failed.

stdout:
```
Auto-merging addons/l10n_mu_account/views/report_invoice.xml
CONFLICT (content): Merge conflict in addons/l10n_mu_account/views/report_invoice.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

igbe-odoo on (2025-01-24 13:29:29 UTC): @robodoo r+

"
2807281172,pull_request,closed,,[FIX] account: add is_invoice_report to account.report_invoice,"### Steps to reproduce:
- Install ""l10n_ch"" and switch to a Swiss company
- Create a new invoice with a Swiss customer
- Confirm
- In the actions, select ""PDF without payments""
- The generated PDF has a blank page at the end

### Cause:
The report ""account.report_invoice"" does not have a field `is_invoice_report` set to `True`. When generating an invoice with Swiss localization. It reads the field `is_invoice_report` to add or not the QR code.

The bug appears after this [commit](https://github.com/odoo/odoo/commit/bb60952c944db27d71d7fe32ead2dff05c3fe922#diff-b6e108b605fbefba066e3b20f8e030ea78881bbed816f8ac5cb38e745c542739R50) which modified the `_is_invoice_report` method to use the field, but only added the field in ""account_invoices"". 

### Solution:
Set the field to True for the report.

opw-4467250",mathcoutant,2025-01-23 15:54:21+00:00,[],2025-02-04 12:55:46+00:00,2025-02-03 11:42:21+00:00,https://github.com/odoo/odoo/pull/194911,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610190451, 'issue_id': 2807281172, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194911.png)](https://mergebot.odoo.com/odoo/odoo/pull/194911)', 'created_at': datetime.datetime(2025, 1, 23, 15, 54, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633778396, 'issue_id': 2807281172, 'author': 'RicGR98', 'body': '@mathcoutant \r\n\r\nThis fix seems to cause undesired behaviour in the Send&Print by allowing to choose the PDF without payment. @clbr-odoo is kindly working on the fix for this in 18.0. Could you then take care of the correct forward-port in [18.1+](https://github.com/odoo/odoo/pull/196171) ? Thanks !', 'created_at': datetime.datetime(2025, 2, 4, 12, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633827193, 'issue_id': 2807281172, 'author': 'clbr-odoo', 'body': ""Let's try that :slightly_smiling_face: \r\n:point_right: https://github.com/odoo/odoo/pull/196425"", 'created_at': datetime.datetime(2025, 2, 4, 12, 55, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:54:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194911.png)](https://mergebot.odoo.com/odoo/odoo/pull/194911)

RicGR98 on (2025-02-04 12:34:00 UTC): @mathcoutant 

This fix seems to cause undesired behaviour in the Send&Print by allowing to choose the PDF without payment. @clbr-odoo is kindly working on the fix for this in 18.0. Could you then take care of the correct forward-port in [18.1+](https://github.com/odoo/odoo/pull/196171) ? Thanks !

clbr-odoo on (2025-02-04 12:55:46 UTC): Let's try that :slightly_smiling_face: 
:point_right: https://github.com/odoo/odoo/pull/196425

"
2807274922,pull_request,closed,,[FW][FIX] hr: fix singleton record error,"### Description of the issue/feature this PR addresses:
- Similar error: https://github.com/odoo/odoo/pull/194338
- In `_compute_plan_available_ids()` with `self` there can be multiple records but still use `self.department_id` in `for scheduler in todo`.

### Current behavior before PR:
- The error ValueError: Expected singleton: mail.activity.schedule(1, 2) occurred

Desired behavior after PR is merged:
- The problem has been fixed.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194650",fw-bot,2025-01-23 15:51:36+00:00,[],2025-01-30 10:23:53+00:00,2025-01-30 10:23:53+00:00,https://github.com/odoo/odoo/pull/194910,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610182251, 'issue_id': 2807274922, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194910.png)](https://mergebot.odoo.com/odoo/odoo/pull/194910)', 'created_at': datetime.datetime(2025, 1, 23, 15, 51, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610182293, 'issue_id': 2807274922, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 51, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:51:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194910.png)](https://mergebot.odoo.com/odoo/odoo/pull/194910)

fw-bot (Issue Creator) on (2025-01-23 15:51:38 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807254062,pull_request,closed,,"[IMP] core, web: improve usability of hierarchy operators clientwise","First commit introduces the allow_hierachy_operators description on relational fields while second commit allows to use the hierarchical operators (child_of/parent_of) on these fields inside the domain selector while also allowing multiselection with these operators.

task-4492974",ryv-odoo,2025-01-23 15:43:26+00:00,[],2025-01-29 18:21:51+00:00,2025-01-29 18:21:51+00:00,https://github.com/odoo/odoo/pull/194909,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610156598, 'issue_id': 2807254062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194909.png)](https://mergebot.odoo.com/odoo/odoo/pull/194909)', 'created_at': datetime.datetime(2025, 1, 23, 15, 43, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621973917, 'issue_id': 2807254062, 'author': 'Polymorphe57', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 15, 29, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621974062, 'issue_id': 2807254062, 'author': 'robodoo', 'body': '@ryv-odoo @polymorphe57 because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 29, 15, 29, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621976521, 'issue_id': 2807254062, 'author': 'Polymorphe57', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 29, 15, 30, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621976629, 'issue_id': 2807254062, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 29, 15, 30, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:43:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194909.png)](https://mergebot.odoo.com/odoo/odoo/pull/194909)

Polymorphe57 on (2025-01-29 15:29:46 UTC): @robodoo r+

robodoo on (2025-01-29 15:29:50 UTC): @ryv-odoo @polymorphe57 because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

Polymorphe57 on (2025-01-29 15:30:50 UTC): @robodoo rebase-ff

robodoo on (2025-01-29 15:30:53 UTC): Merge method set to rebase and fast-forward.

"
2807252065,pull_request,closed,,[FW][FIX] website: fix unable to enter edit mode on old browsers,"Since commit [1], we added a selector using the "":has"" pseudo-class in the template that defines where ""inner content"" blocks can be dropped. It is no longer possible to enter edit mode (a traceback occurs) starting from Odoo version 18.0 and in browsers older than Chrome 112 or Firefox 121.

This bug happens because the same selector, used by jQuery, combines both the "":has"" pseudo-class and the "":is"" pseudo-class (this "":is"" pseudo-class was introduced into the same selector by commit [2] starting from Odoo version 18.0). This is not compatible with the older browsers mentioned above.

The bug only appears in version 18. However, we already fixed this in 16.0 in case potential customizations had added the "":is"" pseudo-class to the same selector.

[1]: https://github.com/odoo/odoo/commit/65a85009800dfa45526ebdc41d3a0a808b2e9f6d
[2]: https://github.com/odoo/odoo/commit/e0fc83760f991fa2fea39763bb2709d9e0182316

opw-4494945

Forward-Port-Of: odoo/odoo#194676",fw-bot,2025-01-23 15:42:36+00:00,[],2025-02-03 10:00:35+00:00,2025-01-24 13:48:15+00:00,https://github.com/odoo/odoo/pull/194908,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610154406, 'issue_id': 2807252065, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194908.png)](https://mergebot.odoo.com/odoo/odoo/pull/194908)', 'created_at': datetime.datetime(2025, 1, 23, 15, 42, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610154435, 'issue_id': 2807252065, 'author': 'fw-bot', 'body': '@bvr-odoo @qsm-odoo cherrypicking of pull request odoo/odoo#194676 failed.\n\nstdout:\n```\nAuto-merging addons/website/static/src/js/editor/snippets.editor.js\nCONFLICT (content): Merge conflict in addons/website/static/src/js/editor/snippets.editor.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 42, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612112745, 'issue_id': 2807252065, 'author': 'bvr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 9, 55, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:42:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194908.png)](https://mergebot.odoo.com/odoo/odoo/pull/194908)

fw-bot (Issue Creator) on (2025-01-23 15:42:38 UTC): @bvr-odoo @qsm-odoo cherrypicking of pull request odoo/odoo#194676 failed.

stdout:
```
Auto-merging addons/website/static/src/js/editor/snippets.editor.js
CONFLICT (content): Merge conflict in addons/website/static/src/js/editor/snippets.editor.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

bvr-odoo on (2025-01-24 09:55:33 UTC): @robodoo r+

"
2807247646,pull_request,closed,,[IMP] google_recaptcha: hide reCAPTCHA toggle once enabled,"The reCAPTCHA feature is currently controlled by the ""Module
Installation"" setting: `module_google_recaptcha`, which, due to
dependencies, caused the removal of many other modules when disabled.

The goal of this commit is to simply hide this option in stable to
prevent this misleading behaviour.

A user can still disable the reCAPTCHA checks by removing API keys
(Which was already mentioned on the setting block)

The feature behaviour will be updated in master to allow disabling
reCAPTCHA without uninstalling the modules.

task-3380702",xO-Tx,2025-01-23 15:40:49+00:00,[],2025-02-03 09:52:33+00:00,2025-01-29 13:26:46+00:00,https://github.com/odoo/odoo/pull/194907,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610150009, 'issue_id': 2807247646, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194907.png)](https://mergebot.odoo.com/odoo/odoo/pull/194907)', 'created_at': datetime.datetime(2025, 1, 23, 15, 40, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:40:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194907.png)](https://mergebot.odoo.com/odoo/odoo/pull/194907)

"
2807238094,pull_request,closed,,[FIX] sale: allow editing delivered quantity on combo item SOLs,"Previously, only the description and taxes could be edited on combo item SOLs. However, the delivered quantity should also be editable.

opw-4454205",ltinel,2025-01-23 15:36:49+00:00,[],2025-01-27 12:56:55+00:00,2025-01-27 12:56:55+00:00,https://github.com/odoo/odoo/pull/194906,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610139473, 'issue_id': 2807238094, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194906.png)](https://mergebot.odoo.com/odoo/odoo/pull/194906)', 'created_at': datetime.datetime(2025, 1, 23, 15, 36, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:36:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194906.png)](https://mergebot.odoo.com/odoo/odoo/pull/194906)

"
2807213346,pull_request,closed,,[FW][FIX] pos_loyalty: prevent access error in multi-company gift card use,"Before this commit, if a gift card was created in another company and the gift card program was not assigned to any company, using the gift card in another company resulted in an error.

opw-4422730

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192246",fw-bot,2025-01-23 15:29:11+00:00,[],2025-02-07 17:26:22+00:00,2025-01-24 17:14:50+00:00,https://github.com/odoo/odoo/pull/194905,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610118854, 'issue_id': 2807213346, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194905.png)](https://mergebot.odoo.com/odoo/odoo/pull/194905)', 'created_at': datetime.datetime(2025, 1, 23, 15, 29, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610118883, 'issue_id': 2807213346, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 29, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610213609, 'issue_id': 2807213346, 'author': 'fw-bot', 'body': '@pedrambiria @caburj ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 16, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612377931, 'issue_id': 2807213346, 'author': 'fw-bot', 'body': '@pedrambiria @caburj the next pull request (odoo/odoo#195021) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 24, 12, 10, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612614345, 'issue_id': 2807213346, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 6, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:29:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194905.png)](https://mergebot.odoo.com/odoo/odoo/pull/194905)

fw-bot (Issue Creator) on (2025-01-23 15:29:14 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 16:01:37 UTC): @pedrambiria @caburj ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 12:10:19 UTC): @pedrambiria @caburj the next pull request (odoo/odoo#195021) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 14:06:53 UTC): @robodoo r+

"
2807212415,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#194672
Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-23 15:28:53+00:00,[],2025-02-07 12:38:38+00:00,2025-01-24 12:25:20+00:00,https://github.com/odoo/odoo/pull/194904,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610118078, 'issue_id': 2807212415, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194904.png)](https://mergebot.odoo.com/odoo/odoo/pull/194904)', 'created_at': datetime.datetime(2025, 1, 23, 15, 28, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610118115, 'issue_id': 2807212415, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 28, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:28:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194904.png)](https://mergebot.odoo.com/odoo/odoo/pull/194904)

fw-bot (Issue Creator) on (2025-01-23 15:28:55 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807206469,pull_request,closed,,[FW][FIX] portal: invoice layout issue,"This PR addresses the layout issue in the sidebar of the portal, where a preview of the customer's invoice is displayed.

Before this PR, users encountered a broken layout for large invoice amounts, making it difficult to read the total.

This issue is resolved in this PR by adding a rules for the `h2` and `span` fields ensuring proper wrapping for better readability.


Steps to reproduce:

- Login as admin.
- Go to Website app.
- Navigate to ""My account"" at my/home url.
- Click on ""My invoices"" or navigate to my/invoices url.
- Click on one invoice in order to see its preview.
- Via the browser tools, edit the amount of on the left sidebar and insert a very big number.

task-4435472

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194277
Forward-Port-Of: odoo/odoo#192769",fw-bot,2025-01-23 15:26:59+00:00,[],2025-01-30 15:43:06+00:00,2025-01-30 15:43:06+00:00,https://github.com/odoo/odoo/pull/194903,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2610113018, 'issue_id': 2807206469, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194903.png)](https://mergebot.odoo.com/odoo/odoo/pull/194903)', 'created_at': datetime.datetime(2025, 1, 23, 15, 27, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610113043, 'issue_id': 2807206469, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 27, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:27:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194903.png)](https://mergebot.odoo.com/odoo/odoo/pull/194903)

fw-bot (Issue Creator) on (2025-01-23 15:27:01 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807200476,pull_request,closed,,[FIX] website: fix required fields conditionally hidden,"Steps to Reproduce:

- Go to the website editor.
- Add a form to the page.
- Select the form and change the default action from ""Send an email"" to ""Create an opportunity.""
- Select the ""Subject"" field.
- Set the visibility condition of the ""Subject"" field to ""visible only if the phone number is set.""
- Since this is a mandatory field, define a default value for the ""Subject"" field.
- Save the changes.
- Fill out the form but leave the phone number field empty so that the ""Subject"" field does not appear.
- Attempt to submit the form.
- Bug: the form is not sent and there is an error message.

The error occurs preventing the record from being created because all required fields are not present, we should use the default value as it has been provided.

This commit prevents adding the ""disabled"" attribute to inputs that are required for models.

opw-4447039",bvr-odoo,2025-01-23 15:24:45+00:00,[],2025-01-27 17:38:57+00:00,2025-01-27 17:38:57+00:00,https://github.com/odoo/odoo/pull/194902,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610107278, 'issue_id': 2807200476, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194902.png)](https://mergebot.odoo.com/odoo/odoo/pull/194902)', 'created_at': datetime.datetime(2025, 1, 23, 15, 24, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615866928, 'issue_id': 2807200476, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 14, 10, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:24:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194902.png)](https://mergebot.odoo.com/odoo/odoo/pull/194902)

SergeBayet on (2025-01-27 14:10:45 UTC): @robodoo r+

"
2807196345,pull_request,closed,,[FW][FIX] point_of_sale: handle inaccessible paid orders,"Before this commit, when a user without access to certain orders attempted to load paid orders, the process would fail and result in an error. This was particularly problematic if a POS order was linked to a sale order that the user did not have permission to access, causing the entire loading process to halt.

This commit addresses the issue by filtering out paid orders that the user cannot access.

opw-4108044

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193418
Forward-Port-Of: odoo/odoo#177592",fw-bot,2025-01-23 15:23:04+00:00,[],2025-01-28 10:20:13+00:00,2025-01-28 10:20:12+00:00,https://github.com/odoo/odoo/pull/194901,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2610102827, 'issue_id': 2807196345, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194901.png)](https://mergebot.odoo.com/odoo/odoo/pull/194901)', 'created_at': datetime.datetime(2025, 1, 23, 15, 23, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610102866, 'issue_id': 2807196345, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#177592 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_order.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_order.py\nAuto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 23, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723826, 'issue_id': 2807196345, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#177592 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618577440, 'issue_id': 2807196345, 'author': 'pedrambiria', 'body': 'implementation is different', 'created_at': datetime.datetime(2025, 1, 28, 10, 20, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:23:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194901.png)](https://mergebot.odoo.com/odoo/odoo/pull/194901)

fw-bot (Issue Creator) on (2025-01-23 15:23:06 UTC): @pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#177592 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_order.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_order.py
Auto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:55 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#177592 is awaiting action (not merged or closed).

pedrambiria on (2025-01-28 10:20:12 UTC): implementation is different

"
2807184691,pull_request,closed,,[FIX] point_of_sale: prevent showing archived products,"Before this commit, when a product used in a paid order was archived, loading the paid order would cause the product to appear on the product screen.

opw-4493666

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-23 15:18:26+00:00,[],2025-02-03 16:10:30+00:00,2025-02-03 16:10:30+00:00,https://github.com/odoo/odoo/pull/194900,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610091179, 'issue_id': 2807184691, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194900.png)](https://mergebot.odoo.com/odoo/odoo/pull/194900)', 'created_at': datetime.datetime(2025, 1, 23, 15, 18, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:18:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194900.png)](https://mergebot.odoo.com/odoo/odoo/pull/194900)

"
2807184273,pull_request,open,,[IMP] hr_holidays: Accrual UX,"Problem
----------
The current UI/UX of accrual plan configuration is not understandable.

Objective
----------
Improve the UI/UX to make it more readable and quickly understandable.

Solution
----------
Replace the previous custom kanban view with a special widget for accrual level records (milestones).

task-4395587
",lebm-odoo,2025-01-23 15:18:16+00:00,[],2025-02-05 14:03:53+00:00,,https://github.com/odoo/odoo/pull/194899,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610090738, 'issue_id': 2807184273, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194899.png)](https://mergebot.odoo.com/odoo/odoo/pull/194899)', 'created_at': datetime.datetime(2025, 1, 23, 15, 18, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:18:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194899.png)](https://mergebot.odoo.com/odoo/odoo/pull/194899)

"
2807166219,pull_request,closed,,[FIX] hr_attendance: add tests for multiple flexible attendance records,"This PR adds a test to ensure that negative overtime works properly and is recomputed as multiple attendance records are made on a single day. For employees who clock out to take breaks, this is necessary.

This ensures that the ""extra hours"" propagate to the most recent attendance record, while zeroing out those before it.

The PR that brought the notion of negative overtime to flexible working schedules is here:
https://github.com/odoo/odoo/pull/193523#pullrequestreview-2569240672",hahu-odoo,2025-01-23 15:11:07+00:00,[],2025-02-07 11:08:42+00:00,2025-01-24 11:04:14+00:00,https://github.com/odoo/odoo/pull/194898,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2610071840, 'issue_id': 2807166219, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194898.png)](https://mergebot.odoo.com/odoo/odoo/pull/194898)', 'created_at': datetime.datetime(2025, 1, 23, 15, 11, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 15:11:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194898.png)](https://mergebot.odoo.com/odoo/odoo/pull/194898)

"
2807107194,pull_request,open,,[FIX] purchase_stock: Unecessary redirect warning,"Usecase:
- Create a new company without warehouse
- Create a purchase.order with a dropship type

You got a redirect warning asking for a warehouse. But in this case it's not needed and force the user to create a warehouse. (which is not the purpose of commit 6516ab61927a63e3f2d804cf1b5baa43a151ca19)

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",amoyaux,2025-01-23 14:48:28+00:00,[],2025-01-24 16:12:22+00:00,,https://github.com/odoo/odoo/pull/194897,"[('RD', 'research & development, internal work')]","[{'comment_id': 2610009383, 'issue_id': 2807107194, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194897.png)](https://mergebot.odoo.com/odoo/odoo/pull/194897)', 'created_at': datetime.datetime(2025, 1, 23, 14, 48, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611736104, 'issue_id': 2807107194, 'author': 'bda-odoo', 'body': 'Hello @amoyaux \r\n\r\nThank you for your PR.\r\n\r\nI have one case to highlight: If the picking_type with the code ""incoming"" is inactive, a redirect warning appears. Could you address this scenario in the current PR? Your insights on this matter would be greatly appreciated.\r\n\r\n[reference](https://github.com/odoo/odoo/commit/6516ab61927a63e3f2d804cf1b5baa43a151ca19#diff-3b5852a47ab8103c30a3e35378044d7c41a294790a87ee30a80cd395783b2bd9R11)\r\n\r\nupg-2451095\r\n\r\nThank you.', 'created_at': datetime.datetime(2025, 1, 24, 6, 59, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:48:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194897.png)](https://mergebot.odoo.com/odoo/odoo/pull/194897)

bda-odoo on (2025-01-24 06:59:45 UTC): Hello @amoyaux 

Thank you for your PR.

I have one case to highlight: If the picking_type with the code ""incoming"" is inactive, a redirect warning appears. Could you address this scenario in the current PR? Your insights on this matter would be greatly appreciated.

[reference](https://github.com/odoo/odoo/commit/6516ab61927a63e3f2d804cf1b5baa43a151ca19#diff-3b5852a47ab8103c30a3e35378044d7c41a294790a87ee30a80cd395783b2bd9R11)

upg-2451095

Thank you.

"
2807097673,pull_request,closed,,"[FW][FIX] sale,website_sale: fix configurable products in combo configurator","The combo configurator works with `product.product` records, so previously, we
only allowed to configure `no_variant` PTALs. However, we should also allow to
configure the `product.product`'s custom PTAVs (which can be `always` or
`dynamic`).

Moreover, we always allowed to configure `no_variant` PTALs, even if they
weren't configurable (i.e. PTALs with a single, non-custom, non-multicheckbox
PTAV). However, such PTAVs should be preselected and non-configurable in the
combo configurator.

Forward-Port-Of: odoo/odoo#191130",fw-bot,2025-01-23 14:44:37+00:00,[],2025-02-07 04:30:52+00:00,2025-01-24 03:55:10+00:00,https://github.com/odoo/odoo/pull/194896,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609998980, 'issue_id': 2807097673, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194896.png)](https://mergebot.odoo.com/odoo/odoo/pull/194896)', 'created_at': datetime.datetime(2025, 1, 23, 14, 44, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609999026, 'issue_id': 2807097673, 'author': 'fw-bot', 'body': '@ltinel cherrypicking of pull request odoo/odoo#191130 failed.\n\nstdout:\n```\nAuto-merging addons/sale/controllers/combo_configurator.py\nAuto-merging addons/sale/static/src/js/combo_configurator_dialog/combo_configurator_dialog.js\nAuto-merging addons/sale/static/src/js/product/product.js\nAuto-merging addons/sale/static/src/js/sale_product_field.js\nCONFLICT (content): Merge conflict in addons/sale/static/src/js/sale_product_field.js\nAuto-merging addons/website_sale/static/src/js/website_sale_configurators.js\nCONFLICT (content): Merge conflict in addons/website_sale/static/src/js/website_sale_configurators.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 44, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610034034, 'issue_id': 2807097673, 'author': 'ltinel', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 57, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:44:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194896.png)](https://mergebot.odoo.com/odoo/odoo/pull/194896)

fw-bot (Issue Creator) on (2025-01-23 14:44:39 UTC): @ltinel cherrypicking of pull request odoo/odoo#191130 failed.

stdout:
```
Auto-merging addons/sale/controllers/combo_configurator.py
Auto-merging addons/sale/static/src/js/combo_configurator_dialog/combo_configurator_dialog.js
Auto-merging addons/sale/static/src/js/product/product.js
Auto-merging addons/sale/static/src/js/sale_product_field.js
CONFLICT (content): Merge conflict in addons/sale/static/src/js/sale_product_field.js
Auto-merging addons/website_sale/static/src/js/website_sale_configurators.js
CONFLICT (content): Merge conflict in addons/website_sale/static/src/js/website_sale_configurators.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

ltinel on (2025-01-23 14:57:25 UTC): @robodoo r+

"
2807096596,pull_request,closed,,[FW][FIX] account: prevent setting wrong partner_id.payment_term,"Steps to reproduce:
- have two companies A and B
- create a new partner
- create a new payment term for Company A
- In Company A, set the customer's payment term the newly created one
- Configure aliases for invoice in company A and B
- Make sure the default company for OdooBot is COmpany A
- Send an email to company B

Issue:
Access Error

Cause:
payment_term is pre-compute and the company context is the one of OdooBot

opw-4103229

Forward-Port-Of: odoo/odoo#184482
Forward-Port-Of: odoo/odoo#178829",fw-bot,2025-01-23 14:44:16+00:00,[],2025-02-07 04:30:53+00:00,2025-01-24 03:55:14+00:00,https://github.com/odoo/odoo/pull/194895,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609996846, 'issue_id': 2807096596, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194895.png)](https://mergebot.odoo.com/odoo/odoo/pull/194895)', 'created_at': datetime.datetime(2025, 1, 23, 14, 44, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609997091, 'issue_id': 2807096596, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 44, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:44:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194895.png)](https://mergebot.odoo.com/odoo/odoo/pull/194895)

fw-bot (Issue Creator) on (2025-01-23 14:44:21 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2807094333,pull_request,closed,,[FW][IMP] l10n_mu: PDF invoice requirements,"This commit add few data on the report_invoice for Mauritius localization.

task-4379202

Forward-Port-Of: odoo/odoo#194590
Forward-Port-Of: odoo/odoo#190723",fw-bot,2025-01-23 14:43:39+00:00,[],2025-02-07 12:48:59+00:00,2025-01-24 12:45:41+00:00,https://github.com/odoo/odoo/pull/194894,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609992978, 'issue_id': 2807094333, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194894.png)](https://mergebot.odoo.com/odoo/odoo/pull/194894)', 'created_at': datetime.datetime(2025, 1, 23, 14, 43, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609993013, 'issue_id': 2807094333, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 43, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610204847, 'issue_id': 2807094333, 'author': 'fw-bot', 'body': '@igbe-odoo @hupo-odoo the next pull request (odoo/odoo#194912) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 15, 59, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612173210, 'issue_id': 2807094333, 'author': 'igbe-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 21, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:43:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194894.png)](https://mergebot.odoo.com/odoo/odoo/pull/194894)

fw-bot (Issue Creator) on (2025-01-23 14:43:41 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 15:59:15 UTC): @igbe-odoo @hupo-odoo the next pull request (odoo/odoo#194912) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

igbe-odoo on (2025-01-24 10:21:01 UTC): @robodoo r+

"
2807093092,pull_request,closed,,[FW][FIX] mail: missing message formatting when creating a subchannel,"Before this commit, when a user accesses a sub-thread of channel made from a message for the 1st time, the format of the message body shows html as textcontent rather as inner html.

Steps to reproduce:
- Post a message as user A
- Create a thread from this message as user B
- User A accesses this sub-thread and posts a new message
-> User A sees 1st message with bad formatting

This happens because on sub-thread join, the data of sub-thread info are fetched, and since the sub-thread is created from a message, the channel info data also contains the message data. This data was inserted without `html: true`, leading to message body being inserted in a non-trusted way in JS models, causing this formatting issue.

This commit fixes the issue by flagging the insert with `html: true`, as this is from trusted origin and content is trusted, so the message body is inserted to be used properly in message component. Note that this behaviour applies to html fields, which message body is. The insert `html: true` is assessed for data on all targeted html fields.

task-4506489

Forward-Port-Of: odoo/odoo#194732",fw-bot,2025-01-23 14:43:20+00:00,[],2025-01-23 15:27:11+00:00,2025-01-23 15:27:05+00:00,https://github.com/odoo/odoo/pull/194893,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609991920, 'issue_id': 2807093092, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194893.png)](https://mergebot.odoo.com/odoo/odoo/pull/194893)', 'created_at': datetime.datetime(2025, 1, 23, 14, 43, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609992017, 'issue_id': 2807093092, 'author': 'fw-bot', 'body': '@maki-odoo @seb-odoo cherrypicking of pull request odoo/odoo#194732 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/discuss/core/common/thread_model_patch.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/discuss/core/common/thread_model_patch.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 43, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610113201, 'issue_id': 2807093092, 'author': 'maki-odoo', 'body': 'Already fixed in odoo/odoo#194402', 'created_at': datetime.datetime(2025, 1, 23, 15, 27, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:43:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194893.png)](https://mergebot.odoo.com/odoo/odoo/pull/194893)

fw-bot (Issue Creator) on (2025-01-23 14:43:29 UTC): @maki-odoo @seb-odoo cherrypicking of pull request odoo/odoo#194732 failed.

stdout:
```
Auto-merging addons/mail/static/src/discuss/core/common/thread_model_patch.js
CONFLICT (content): Merge conflict in addons/mail/static/src/discuss/core/common/thread_model_patch.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

maki-odoo on (2025-01-23 15:27:05 UTC): Already fixed in odoo/odoo#194402

"
2807088194,pull_request,closed,,"[16.0][FIX] web: Use absoulteURL for ""ir.actions.act_url""","Description of the issue/feature this PR addresses:
    Able to use absolute URLs while trying to open an external url using ""ir.actions.act_url""

Current behavior before PR:
    Whenever an external URL is provided as part of ""url"" key in ""ir.actions.act_url"", actionService changes URL to relative URL. Absolute URL cannot be used to open an external URL

Desired behavior after PR is merged:
    Absolute Url can also be used for opening an external URL by passing ""isAbsoluteUrl"" key set as ""True"".



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",anusriNPS,2025-01-23 14:41:24+00:00,[],2025-01-24 14:04:44+00:00,2025-01-24 14:04:44+00:00,https://github.com/odoo/odoo/pull/194892,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2609986798, 'issue_id': 2807088194, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194892.png)](https://mergebot.odoo.com/odoo/odoo/pull/194892)', 'created_at': datetime.datetime(2025, 1, 23, 14, 41, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612574746, 'issue_id': 2807088194, 'author': 'mart-e', 'body': 'Hello,\r\nCould you detail exactly your usecase?\r\nWe already check the url does not starts with `/`.\r\nAlso your CLA\u202fis from 2 years ago and the filename should be lowercase.', 'created_at': datetime.datetime(2025, 1, 24, 13, 49, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612599263, 'issue_id': 2807088194, 'author': 'anusriNPS', 'body': '> Hello, Could you detail exactly your usecase? We already check the url does not starts with `/`. Also your CLA\u202fis from 2 years ago and the filename should be lowercase.\r\n\r\nHi,\r\n\r\nI am trying to use ""ir.action.act_url"" to open an external url of anydesk applicaton. This url is provided with value  ""anydesk:<anydesk_id>"".  Here, it checks for ""url.startswith(""/""), if not started with ""/"" it converts to relative URL.\r\n\r\n![Screenshot from 2025-01-24 14-56-36](https://github.com/user-attachments/assets/4b203517-4e65-458f-812f-1d487dbca91c)', 'created_at': datetime.datetime(2025, 1, 24, 14, 0, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612609928, 'issue_id': 2807088194, 'author': 'mart-e', 'body': 'Ok I\u202fsee. Sorry but we do not want to allow this kind of behaviour as it could lead to security issues if you are able to interact with software on the local machine.\r\nAlso, it would be a vector for `javascript://` urls which we surely do not want.\r\nI am afraid, I\u202fhave to reject it, you will need to make a customisation in your module.', 'created_at': datetime.datetime(2025, 1, 24, 14, 4, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:41:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194892.png)](https://mergebot.odoo.com/odoo/odoo/pull/194892)

mart-e on (2025-01-24 13:49:13 UTC): Hello,
Could you detail exactly your usecase?
We already check the url does not starts with `/`.
Also your CLA is from 2 years ago and the filename should be lowercase.

anusriNPS (Issue Creator) on (2025-01-24 14:00:29 UTC): Hi,

I am trying to use ""ir.action.act_url"" to open an external url of anydesk applicaton. This url is provided with value  ""anydesk:<anydesk_id>"".  Here, it checks for ""url.startswith(""/""), if not started with ""/"" it converts to relative URL.

![Screenshot from 2025-01-24 14-56-36](https://github.com/user-attachments/assets/4b203517-4e65-458f-812f-1d487dbca91c)

mart-e on (2025-01-24 14:04:44 UTC): Ok I see. Sorry but we do not want to allow this kind of behaviour as it could lead to security issues if you are able to interact with software on the local machine.
Also, it would be a vector for `javascript://` urls which we surely do not want.
I am afraid, I have to reject it, you will need to make a customisation in your module.

"
2807087269,pull_request,closed,,[FW][FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194789",fw-bot,2025-01-23 14:41:03+00:00,[],2025-02-07 07:54:49+00:00,2025-01-24 07:47:00+00:00,https://github.com/odoo/odoo/pull/194891,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609985781, 'issue_id': 2807087269, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194891.png)](https://mergebot.odoo.com/odoo/odoo/pull/194891)', 'created_at': datetime.datetime(2025, 1, 23, 14, 41, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609985820, 'issue_id': 2807087269, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 41, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611668628, 'issue_id': 2807087269, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 6, 0, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:41:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194891.png)](https://mergebot.odoo.com/odoo/odoo/pull/194891)

fw-bot (Issue Creator) on (2025-01-23 14:41:05 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-24 06:00:50 UTC): @robodoo r+

"
2807086009,pull_request,open,,[CLA] Sign CLA poupaerta,"Description of the issue/feature this PR addresses: CLA for PR on ""documentation"" #11833
 
Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",poupaerta,2025-01-23 14:40:32+00:00,[],2025-01-24 10:26:51+00:00,,https://github.com/odoo/odoo/pull/194890,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2609984473, 'issue_id': 2807086009, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194890.png)](https://mergebot.odoo.com/odoo/odoo/pull/194890)', 'created_at': datetime.datetime(2025, 1, 23, 14, 40, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611944543, 'issue_id': 2807086009, 'author': 'mart-e', 'body': 'Hello,\r\n\r\nThank you for the CLA signature but it seems there is still an issue.\r\n\r\n- you are signing _using_ the address `59536518+poupaerta@users.noreply.github.com `\r\n- you are signing _for_ the address `a…t@gmail.com`\r\n\r\nThe email address in the CLA must be the same as for the signature for the verification to succeed.\r\nYou can either change the your [git configuration](https://help.github.com/articles/setting-your-commit-email-address-in-git/) or modify the email in the CLA signature.\r\n\r\nThanks', 'created_at': datetime.datetime(2025, 1, 24, 8, 29, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:40:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194890.png)](https://mergebot.odoo.com/odoo/odoo/pull/194890)

mart-e on (2025-01-24 08:29:41 UTC): Hello,

Thank you for the CLA signature but it seems there is still an issue.

- you are signing _using_ the address `59536518+poupaerta@users.noreply.github.com `
- you are signing _for_ the address `a…t@gmail.com`

The email address in the CLA must be the same as for the signature for the verification to succeed.
You can either change the your [git configuration](https://help.github.com/articles/setting-your-commit-email-address-in-git/) or modify the email in the CLA signature.

Thanks

"
2807051441,pull_request,closed,,[FIX] sale_loyalty: calculate proper discount amount when tax included,"If user had set to have tax included in their price and tried to apply
 discount code only the untaxed amount could be discounted even if discount
 code was higher than untaxed amount.

opw-4486030

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",anko-odoo,2025-01-23 14:26:20+00:00,[],2025-01-23 15:44:35+00:00,2025-01-23 15:44:35+00:00,https://github.com/odoo/odoo/pull/194889,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609949550, 'issue_id': 2807051441, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194889.png)](https://mergebot.odoo.com/odoo/odoo/pull/194889)', 'created_at': datetime.datetime(2025, 1, 23, 14, 26, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:26:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194889.png)](https://mergebot.odoo.com/odoo/odoo/pull/194889)

"
2807049660,pull_request,closed,,[FW][FIX] purchase: fix tour by providing appropriate class,"Before this commit:
===================
- The purchase tour was failing because the tour's JavaScript used
  an incorrect class selector (targeting 'partner_id'), which prevented
  it from locating the intended DOM element. Consequently,
  the sequence of actions was interrupted, causing the tour to break midway.

After this commit:
===================
- The issue has been resolved by updating the tour to use the correct and
  unique class selector. This ensures the tour accurately targets the
  intended element, allowing it to proceed without interruptions.
  As a result, the purchase tour runs successfully and achieves its intended purpose.

TaskId: 4268662

Forward-Port-Of: odoo/odoo#194780
Forward-Port-Of: odoo/odoo#184735",fw-bot,2025-01-23 14:25:36+00:00,[],2025-02-07 07:44:57+00:00,2025-01-24 07:18:39+00:00,https://github.com/odoo/odoo/pull/194888,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609947761, 'issue_id': 2807049660, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194888.png)](https://mergebot.odoo.com/odoo/odoo/pull/194888)', 'created_at': datetime.datetime(2025, 1, 23, 14, 25, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609947784, 'issue_id': 2807049660, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194854\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 25, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611386199, 'issue_id': 2807049660, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611614121, 'issue_id': 2807049660, 'author': 'dhha-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 11, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:25:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194888.png)](https://mergebot.odoo.com/odoo/odoo/pull/194888)

fw-bot (Issue Creator) on (2025-01-23 14:25:38 UTC): @dhha-odoo @amoyaux this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194854

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 02:01:37 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

dhha-odoo on (2025-01-24 05:11:08 UTC): robodoo r+

"
2807048850,pull_request,closed,,[FW][FIX] cli/*: fix script converting tree to list (regression),"since the pr https://github.com/odoo/odoo/pull/189883, the file updates made are not consistent:

'list<editable=""bottom"">'.

Forward-Port-Of: odoo/odoo#194319",fw-bot,2025-01-23 14:25:16+00:00,[],2025-01-28 13:03:13+00:00,2025-01-28 13:03:13+00:00,https://github.com/odoo/odoo/pull/194887,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609946915, 'issue_id': 2807048850, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194887.png)](https://mergebot.odoo.com/odoo/odoo/pull/194887)', 'created_at': datetime.datetime(2025, 1, 23, 14, 25, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609946949, 'issue_id': 2807048850, 'author': 'fw-bot', 'body': '@gorash @Julien00859 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194852\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 25, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722843, 'issue_id': 2807048850, 'author': 'fw-bot', 'body': '@gorash @Julien00859 this forward port of odoo/odoo#194319 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617540772, 'issue_id': 2807048850, 'author': 'fw-bot', 'body': '@gorash @Julien00859 this forward port of odoo/odoo#194319 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618229483, 'issue_id': 2807048850, 'author': 'Gorash', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 8, 26, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:25:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194887.png)](https://mergebot.odoo.com/odoo/odoo/pull/194887)

fw-bot (Issue Creator) on (2025-01-23 14:25:18 UTC): @gorash @Julien00859 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194852

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:01:56 UTC): @gorash @Julien00859 this forward port of odoo/odoo#194319 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:17 UTC): @gorash @Julien00859 this forward port of odoo/odoo#194319 is awaiting action (not merged or closed).

Gorash on (2025-01-28 08:26:22 UTC): @robodoo r+

"
2807043653,pull_request,closed,,[FIX] account: improve help attribute on credit limit,"Having a credit limit set to 0 means 'no limit', user
has to set it to 0.01 to have a minimum limit.
This can be confusing for the user, so add a little
help message to the fields in both partner and settings views.

A better solution should be to use the `ResPartner.use_partner_credit_limit`
field to be able to set 0$ limit to specifics partner, but this can't
be done in stable (computed, non stored field).

opw-4479163
",guva-odoo,2025-01-23 14:23:08+00:00,[],2025-02-03 17:34:15+00:00,2025-02-03 17:34:15+00:00,https://github.com/odoo/odoo/pull/194886,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609941822, 'issue_id': 2807043653, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194886.png)](https://mergebot.odoo.com/odoo/odoo/pull/194886)', 'created_at': datetime.datetime(2025, 1, 23, 14, 23, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623895299, 'issue_id': 2807043653, 'author': 'guva-odoo', 'body': 'hello @h4818 little up 🙂', 'created_at': datetime.datetime(2025, 1, 30, 9, 0, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626662045, 'issue_id': 2807043653, 'author': 'h4818', 'body': '@Laura-labe is this tooltip text ok for you?\n\nI was thinking something like\n""Set a value greater than 0.0 to activate a credit limit check""\n\n@guva-odoo please don\'t forget the .pot files', 'created_at': datetime.datetime(2025, 1, 31, 8, 43, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626693524, 'issue_id': 2807043653, 'author': 'guva-odoo', 'body': ""> please don't forget the .pot files\r\n\r\nright, thanks! I will wait for Laura's answer then I'll update the .pot"", 'created_at': datetime.datetime(2025, 1, 31, 9, 1, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626959437, 'issue_id': 2807043653, 'author': 'Laura-labe', 'body': 'Yes perfect, thanks @h4818 and @guva-odoo !', 'created_at': datetime.datetime(2025, 1, 31, 11, 14, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626966137, 'issue_id': 2807043653, 'author': 'guva-odoo', 'body': ""Hi @Laura-labe I'm confused, current help message is perfect, or the one proposed by @h4818 ? ^^"", 'created_at': datetime.datetime(2025, 1, 31, 11, 18, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627012394, 'issue_id': 2807043653, 'author': 'Laura-labe', 'body': ""Sorry I only read the one of Habib, let's apply this one :)"", 'created_at': datetime.datetime(2025, 1, 31, 11, 44, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627030528, 'issue_id': 2807043653, 'author': 'guva-odoo', 'body': '@h4818 changes done, thanks!', 'created_at': datetime.datetime(2025, 1, 31, 11, 54, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:23:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194886.png)](https://mergebot.odoo.com/odoo/odoo/pull/194886)

guva-odoo (Issue Creator) on (2025-01-30 09:00:20 UTC): hello @h4818 little up 🙂

h4818 on (2025-01-31 08:43:39 UTC): @Laura-labe is this tooltip text ok for you?

I was thinking something like
""Set a value greater than 0.0 to activate a credit limit check""

@guva-odoo please don't forget the .pot files

guva-odoo (Issue Creator) on (2025-01-31 09:01:02 UTC): right, thanks! I will wait for Laura's answer then I'll update the .pot

Laura-labe on (2025-01-31 11:14:43 UTC): Yes perfect, thanks @h4818 and @guva-odoo !

guva-odoo (Issue Creator) on (2025-01-31 11:18:19 UTC): Hi @Laura-labe I'm confused, current help message is perfect, or the one proposed by @h4818 ? ^^

Laura-labe on (2025-01-31 11:44:57 UTC): Sorry I only read the one of Habib, let's apply this one :)

guva-odoo (Issue Creator) on (2025-01-31 11:54:03 UTC): @h4818 changes done, thanks!

"
2807036300,pull_request,closed,,"[FIX] product, website_sale: fall back on geoip country for pricelists","Versions
--------
- 17.0+

Steps
-----
1. Ensure `geoip` works (or patch the `_get_geoip_country_code` method);
2. create two pricelists for the website;
3. first should be restricted to EU countries & use EUR;
4. second one shouldn't be restricted to any country & use USD;
5. log in as a Portal user without address details from a EU IP;
6. open the shop.

Issue
-----
The prices are displayed in USD.

Cause
-----
The geoip country is taken into account for public users, but not for partners. Instead it relies on the partner's country_id, which could be empty.

Solution
--------
When computing the `property_product_pricelist`, add the geoip country to the context. Use this value in the fallback for partners without specific pricelist property set, and without a `country_id`.

opw-4398543",lvsz,2025-01-23 14:20:06+00:00,[],2025-01-29 15:24:55+00:00,2025-01-29 15:24:55+00:00,https://github.com/odoo/odoo/pull/194885,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609932677, 'issue_id': 2807036300, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194885.png)](https://mergebot.odoo.com/odoo/odoo/pull/194885)', 'created_at': datetime.datetime(2025, 1, 23, 14, 20, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621547369, 'issue_id': 2807036300, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 12, 47, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:20:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194885.png)](https://mergebot.odoo.com/odoo/odoo/pull/194885)

lvsz (Issue Creator) on (2025-01-29 12:47:35 UTC): robodoo r+

"
2807029797,pull_request,closed,,[FW][IMP] mail: improve quote reply detection,"We update quote detection for gmail and outlook:
- gmail has simple wrapper divs with explicit classes
- outlook has a mix of div ids and simple pattern-based quoting (everything under ""<hr><div id=""divRplyFwdMsg""/> seems to be considered a quote)

Previously gmail just used blockquote, which still works but does not capture ""On xx:xx:xx X <X@gmail.com> wrote:"" headers, which are caught for outlook.

Previously outlook had a wrapper div around divRplyFwdMsg which would set data-o-mail-quote-container on it, and propagate to children. However it seems that outer div was either removed or is not always present, a heuristic is thus needed.

task-4381505

Forward-Port-Of: odoo/odoo#194722
Forward-Port-Of: odoo/odoo#192875",fw-bot,2025-01-23 14:17:28+00:00,[],2025-02-06 17:59:32+00:00,2025-01-23 17:57:56+00:00,https://github.com/odoo/odoo/pull/194884,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609925548, 'issue_id': 2807029797, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194884.png)](https://mergebot.odoo.com/odoo/odoo/pull/194884)', 'created_at': datetime.datetime(2025, 1, 23, 14, 17, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609925571, 'issue_id': 2807029797, 'author': 'fw-bot', 'body': '@reth-odoo @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194853\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 17, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609984310, 'issue_id': 2807029797, 'author': 'reth-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 40, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610064596, 'issue_id': 2807029797, 'author': 'robodoo', 'body': ""@reth-odoo @tde-banana-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 15, 8, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:17:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194884.png)](https://mergebot.odoo.com/odoo/odoo/pull/194884)

fw-bot (Issue Creator) on (2025-01-23 14:17:30 UTC): @reth-odoo @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194853

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

reth-odoo on (2025-01-23 14:40:32 UTC): @robodoo r+

robodoo on (2025-01-23 15:08:32 UTC): @reth-odoo @tde-banana-odoo 'ci/runbot' failed on this reviewed PR.

"
2807021067,pull_request,closed,,[IMP] spreadsheet_dashboard: manager can see all dashboards,"Steps to reproduce:

- Add the ""Dashboard / Admin"" group to Marc Demo
- Connect as Marc Demo
- Go to Dashboard configuration
- Change the group of a dashboard to ""Administration / Access Rights"" (or any group March Demo doesn't have)

=> Marc Demo is faced with an access error and lost the access to the Dashboard. There's no way he can get it back. Users in the other group can still see/read it, but they cannot edit it.

A user managing dashboards (with ""Dashboard / Admin"" group) should always see every dashboard. He was able to see it at one point anyway (to create and design it)

Note that being able to read a dashboard doesn't grant access to the underlying data/models used in the dashboard. Regular access rights apply there.

Task: 4458192

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",LucasLefevre,2025-01-23 14:14:10+00:00,[],2025-01-28 23:32:52+00:00,2025-01-28 23:32:52+00:00,https://github.com/odoo/odoo/pull/194883,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2609917166, 'issue_id': 2807021067, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194883.png)](https://mergebot.odoo.com/odoo/odoo/pull/194883)', 'created_at': datetime.datetime(2025, 1, 23, 14, 14, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:14:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194883.png)](https://mergebot.odoo.com/odoo/odoo/pull/194883)

"
2807019612,pull_request,closed,,[FW][FIX] web_editor: prevent adding empty `p` when deleting an image,"**Problem**:
When an image inside a `<p>` tag (e.g., `<p><img></p>`) is deleted using the toolbar delete button, the selection is not properly restored, leaving an empty `<p>` in the DOM and the selection in the editor root.

**Solution**:
Restore the selection to the correct position after deleting the image to avoid leaving an empty `<p>`.

**Steps to Reproduce**:
1. Open an empty editor and add an image.
2. Delete the image using the toolbar delete button.
3. Inspect the DOM:
   - An empty `<p>` remains, and the selection is in the editor root.

opw-4472173

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193396",fw-bot,2025-01-23 14:13:34+00:00,[],2025-02-07 10:07:56+00:00,2025-01-24 10:04:47+00:00,https://github.com/odoo/odoo/pull/194882,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609915670, 'issue_id': 2807019612, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194882.png)](https://mergebot.odoo.com/odoo/odoo/pull/194882)', 'created_at': datetime.datetime(2025, 1, 23, 14, 13, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609915765, 'issue_id': 2807019612, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo cherrypicking of pull request odoo/odoo#193396 failed.\n\nstdout:\n```\nAuto-merging addons/web_editor/static/src/js/wysiwyg/wysiwyg.js\nAuto-merging addons/web_editor/static/tests/html_field_tests.js\nCONFLICT (content): Merge conflict in addons/web_editor/static/tests/html_field_tests.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 13, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611906945, 'issue_id': 2807019612, 'author': 'walidsahli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 8, 8, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:13:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194882.png)](https://mergebot.odoo.com/odoo/odoo/pull/194882)

fw-bot (Issue Creator) on (2025-01-23 14:13:38 UTC): @walidsahli @dmo-odoo cherrypicking of pull request odoo/odoo#193396 failed.

stdout:
```
Auto-merging addons/web_editor/static/src/js/wysiwyg/wysiwyg.js
Auto-merging addons/web_editor/static/tests/html_field_tests.js
CONFLICT (content): Merge conflict in addons/web_editor/static/tests/html_field_tests.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

walidsahli on (2025-01-24 08:08:35 UTC): @robodoo r+

"
2807014431,pull_request,closed,,[FIX] account: fix access error for `tax_string` field in `product.template` model,"Repro steps:
- Add `Tax String` to `Product Page Extra Fields` for one of your websites
- Add taxes from a company that isn't linked to that website for one of your products
- Open that product's product page in eCommerce
- You get an access error

The issue is that we try to read the taxes for all companies when opening the product page. Instead, we should only read the taxes for the current company.

opw-4435721",ltinel,2025-01-23 14:11:22+00:00,[],2025-02-07 14:59:05+00:00,2025-02-07 14:59:05+00:00,https://github.com/odoo/odoo/pull/194881,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609910406, 'issue_id': 2807014431, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194881.png)](https://mergebot.odoo.com/odoo/odoo/pull/194881)', 'created_at': datetime.datetime(2025, 1, 23, 14, 11, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:11:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194881.png)](https://mergebot.odoo.com/odoo/odoo/pull/194881)

"
2807004606,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#194672
Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-23 14:07:15+00:00,[],2025-02-07 11:40:33+00:00,2025-01-24 11:28:20+00:00,https://github.com/odoo/odoo/pull/194880,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609900669, 'issue_id': 2807004606, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194880.png)](https://mergebot.odoo.com/odoo/odoo/pull/194880)', 'created_at': datetime.datetime(2025, 1, 23, 14, 7, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609900704, 'issue_id': 2807004606, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 7, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:07:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194880.png)](https://mergebot.odoo.com/odoo/odoo/pull/194880)

fw-bot (Issue Creator) on (2025-01-23 14:07:17 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806998676,pull_request,closed,,[FW][FIX] base_vat: add a method to validate Moroccan VAT numbers,"### Steps to reproduce:
- Create a new Contact
- Set the country to Morocco
- Add ""52258521"" as a VAT number
- Try to validate -> Error

### Cause:
Only occurs after saas-17.4 because it is related to the library `stdnum`. The version of this library change when the Python version is >3.11.  As the SaaS version use Python3.12 since saas-17.4 and Python3.10 before, the bug only appears in saas-17.4, but this change targets 17.0 because 17.0 supports Python > 3.10.

The cause of the bug is the new version of the library which implements a verification method that corresponds to Moroccan ICE numbers and not VAT numbers.

### Solution:
Create the method to check the Moroccan VAT numbers. The format is just a number with 8 digits.

opw-4447478

Forward-Port-Of: odoo/odoo#194592",fw-bot,2025-01-23 14:04:46+00:00,[],2025-01-29 13:43:38+00:00,2025-01-29 13:43:38+00:00,https://github.com/odoo/odoo/pull/194879,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609894524, 'issue_id': 2806998676, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194879.png)](https://mergebot.odoo.com/odoo/odoo/pull/194879)', 'created_at': datetime.datetime(2025, 1, 23, 14, 4, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609894556, 'issue_id': 2806998676, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 4, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610074369, 'issue_id': 2806998676, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 15, 11, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612091669, 'issue_id': 2806998676, 'author': 'mathcoutant', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612091713, 'issue_id': 2806998676, 'author': 'robodoo', 'body': 'Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:04:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194879.png)](https://mergebot.odoo.com/odoo/odoo/pull/194879)

fw-bot (Issue Creator) on (2025-01-23 14:04:48 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 15:11:52 UTC): @mathcoutant @FlorianGilbert ci/runbot failed on this forward-port PR

mathcoutant on (2025-01-24 09:45:27 UTC): @robodoo r-

robodoo on (2025-01-24 09:45:29 UTC): Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.

"
2806997477,pull_request,closed,,[FIX] test_lint: fix list comprehension issue when assigned,This commit add support for comprenhension expression on assign node,flvr-odoo,2025-01-23 14:04:16+00:00,[],2025-02-07 21:40:53+00:00,2025-01-24 21:34:43+00:00,https://github.com/odoo/odoo/pull/194878,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609893269, 'issue_id': 2806997477, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194878.png)](https://mergebot.odoo.com/odoo/odoo/pull/194878)', 'created_at': datetime.datetime(2025, 1, 23, 14, 4, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612641404, 'issue_id': 2806997477, 'author': 'flvr-odoo', 'body': 'can I self review? \r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 18, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621330326, 'issue_id': 2806997477, 'author': 'fw-bot', 'body': ""Forward-porting to 'saas-18.1' (from odoo/odoo#195486)."", 'created_at': datetime.datetime(2025, 1, 29, 11, 5, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623814444, 'issue_id': 2806997477, 'author': 'fw-bot', 'body': ""Forward-porting to 'master' (from odoo/odoo#195638)."", 'created_at': datetime.datetime(2025, 1, 30, 8, 17, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:04:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194878.png)](https://mergebot.odoo.com/odoo/odoo/pull/194878)

flvr-odoo (Issue Creator) on (2025-01-24 14:18:43 UTC): can I self review? 
robodoo r+

fw-bot on (2025-01-29 11:05:20 UTC): Forward-porting to 'saas-18.1' (from odoo/odoo#195486).

fw-bot on (2025-01-30 08:17:42 UTC): Forward-porting to 'master' (from odoo/odoo#195638).

"
2806989267,pull_request,closed,,[FW][FIX] pos_loyalty: prevent access error in multi-company gift card use,"Before this commit, if a gift card was created in another company and the gift card program was not assigned to any company, using the gift card in another company resulted in an error.

opw-4422730

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192246",fw-bot,2025-01-23 14:00:51+00:00,[],2025-02-07 15:44:10+00:00,2025-01-24 15:39:12+00:00,https://github.com/odoo/odoo/pull/194877,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609884904, 'issue_id': 2806989267, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194877.png)](https://mergebot.odoo.com/odoo/odoo/pull/194877)', 'created_at': datetime.datetime(2025, 1, 23, 14, 0, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609884934, 'issue_id': 2806989267, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 0, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:00:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194877.png)](https://mergebot.odoo.com/odoo/odoo/pull/194877)

fw-bot (Issue Creator) on (2025-01-23 14:00:53 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806987165,pull_request,closed,,[FIX] point_of_sale: fix closing session popup,"- The `login_number` can be a string so we need to use ""=="" to avoid unexpected behaviour.
- This fix an issue where each time you close a PoS session a popup appears with the message ""The session is being closed by another user. The page will be reloaded"". This was caused by the comparison of a string and an integer.

task-id: 4485659

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-23 13:59:59+00:00,[],2025-01-23 14:42:29+00:00,2025-01-23 14:42:28+00:00,https://github.com/odoo/odoo/pull/194876,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609882899, 'issue_id': 2806987165, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194876.png)](https://mergebot.odoo.com/odoo/odoo/pull/194876)', 'created_at': datetime.datetime(2025, 1, 23, 14, 0, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 14:00:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194876.png)](https://mergebot.odoo.com/odoo/odoo/pull/194876)

"
2806984352,pull_request,open,,[IMP] stock: handle main UoM change on different models,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",amoyaux,2025-01-23 13:58:51+00:00,[],2025-01-23 14:02:16+00:00,,https://github.com/odoo/odoo/pull/194875,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609880385, 'issue_id': 2806984352, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194875.png)](https://mergebot.odoo.com/odoo/odoo/pull/194875)', 'created_at': datetime.datetime(2025, 1, 23, 13, 58, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:58:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194875.png)](https://mergebot.odoo.com/odoo/odoo/pull/194875)

"
2806967939,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194747
Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-23 13:52:02+00:00,[],2025-02-06 17:59:30+00:00,2025-01-23 17:57:45+00:00,https://github.com/odoo/odoo/pull/194874,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609864243, 'issue_id': 2806967939, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194874.png)](https://mergebot.odoo.com/odoo/odoo/pull/194874)', 'created_at': datetime.datetime(2025, 1, 23, 13, 52, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609864278, 'issue_id': 2806967939, 'author': 'fw-bot', 'body': '@rmun-odoo @tivisse this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194840\n* odoo/odoo#194814\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 52, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609899914, 'issue_id': 2806967939, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 6, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:52:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194874.png)](https://mergebot.odoo.com/odoo/odoo/pull/194874)

fw-bot (Issue Creator) on (2025-01-23 13:52:04 UTC): @rmun-odoo @tivisse this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194840
* odoo/odoo#194814

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-23 14:06:58 UTC): @robodoo r+

"
2806951370,pull_request,open,,[FIX] report_pos_order: Using aggregation in view creation to prevent redundancy of records.,"Issue Description:
The customer has reported a discrepancy between pos_order and report_pos_order_data, where the report reflects a higher total amount and number of products than the actual orders.

Current Behavior:
Mismatch in total amount between pos_order and report_pos_order_data.
The number of products in the report exceeds the actual number in pos_order.

Expected Behavior After Fix:
The data in report_pos_order_data will accurately reflect pos_order without discrepancies.
The total amount and number of products will be consistent across both sources.

Fix Summary:
This PR addresses the inconsistency by ensuring proper data aggregation and alignment between pos_order and report_pos_order_data.

Support ticket: opw-4436072

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",arih-odoo,2025-01-23 13:44:56+00:00,[],2025-01-23 14:00:14+00:00,,https://github.com/odoo/odoo/pull/194873,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609848810, 'issue_id': 2806951370, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194873.png)](https://mergebot.odoo.com/odoo/odoo/pull/194873)', 'created_at': datetime.datetime(2025, 1, 23, 13, 44, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:44:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194873.png)](https://mergebot.odoo.com/odoo/odoo/pull/194873)

"
2806950164,pull_request,closed,,[FIX] web_editor: change inline editor root to block on save,"**Problem**:
When we have `<b t-field=""html"">`, it is rendered in the DOM as
`<b data-oe-attr=""...""><p>content</p></b>`. When this is converted to a string
and parsed in the backend, the `html.fromstring` method removes the `p` from
the `b` because `b` is an inline element and cannot contain block elements.
This results in:
`<b data-oe-attr=""...""></b><p>content</p>`.

Since this structure has two root elements, the parser wraps them in a block
element (`div`), generating:
`<div><b data-oe-attr=""...""></b><p>content</p></div>`.

This causes a traceback when trying to access `data-oe` attributes, as they
are expected to be in the root element.

**Solution**:
Convert any `b` elements used as HTML fields to `div` elements before saving.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",walidsahli,2025-01-23 13:44:25+00:00,[],2025-02-07 18:03:50+00:00,2025-01-24 17:59:47+00:00,https://github.com/odoo/odoo/pull/194872,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609847587, 'issue_id': 2806950164, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194872.png)](https://mergebot.odoo.com/odoo/odoo/pull/194872)', 'created_at': datetime.datetime(2025, 1, 23, 13, 44, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612225998, 'issue_id': 2806950164, 'author': 'dmo-odoo', 'body': '@walidsahli Thank you for the fix!\r\n@robodoo override=ci/security r+\r\nReason: The content was already in the dom to begin with.', 'created_at': datetime.datetime(2025, 1, 24, 10, 48, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612226783, 'issue_id': 2806950164, 'author': 'dmo-odoo', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 10, 48, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612227435, 'issue_id': 2806950164, 'author': 'dmo-odoo', 'body': ""@walidsahli It's missing task or opw id."", 'created_at': datetime.datetime(2025, 1, 24, 10, 48, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612229585, 'issue_id': 2806950164, 'author': 'walidsahli', 'body': ""> @walidsahli It's missing task or opw id.\r\n\r\n@dmo-odoo , hh actually i found this issue by testing trying to reproduce another bug, so there is not task for this. do you think we should create one ?"", 'created_at': datetime.datetime(2025, 1, 24, 10, 50, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612291146, 'issue_id': 2806950164, 'author': 'dmo-odoo', 'body': ""@walidsahli No it's ok then, I just thought it had been forgotten. Thanks!\r\n@robodoo r+"", 'created_at': datetime.datetime(2025, 1, 24, 11, 24, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:44:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194872.png)](https://mergebot.odoo.com/odoo/odoo/pull/194872)

dmo-odoo on (2025-01-24 10:48:11 UTC): @walidsahli Thank you for the fix!
@robodoo override=ci/security r+
Reason: The content was already in the dom to begin with.

dmo-odoo on (2025-01-24 10:48:35 UTC): @robodoo r-

dmo-odoo on (2025-01-24 10:48:55 UTC): @walidsahli It's missing task or opw id.

walidsahli (Issue Creator) on (2025-01-24 10:50:04 UTC): @dmo-odoo , hh actually i found this issue by testing trying to reproduce another bug, so there is not task for this. do you think we should create one ?

dmo-odoo on (2025-01-24 11:24:18 UTC): @walidsahli No it's ok then, I just thought it had been forgotten. Thanks!
@robodoo r+

"
2806947512,pull_request,closed,,[FIX] account_payment: display refundable amount correctly for all users,"## Versions:
17.0+
No fix needed in 16.0 as the field was not computed and this changes with https://github.com/odoo/odoo/commit/7e012dd5441e87ce3c2688f9280381b041b00b0d

## Issue:
A payment to be refunded is displayed as already refunded in the wizard for some users.

## Steps to reproduce:
Ensure the `Demo` payment provider is enabled in `Test Mode`. Ensure you are logged in as Admin user.
- Navigate to the `Invoicing` app:
    - Create a new customer invoice and confirm it;
- Navigate to the Portal using the invoice's `Preview` button:
    - Pay the invoice with the `Demo` provider with a `Successful` Payment status;
- Come back to edit mode:
    - At the bottom of the form, click the information icon in the totalization section;
    - Click the `View` button of the popover;
    - Click the `Refund` button and remember the data;
- Copy the URL;
- Log out and log back in as Demo user;
- Paste the URL to come back to the payment:
    - Click the `Refund` button: - See the `Refunded Amount` value equal to the `Payment Amount`; - See the `Maximum Refund Allowed` value set to 0;

## Cause:
The maximal refundable amount can't be computed for users who don't have `Payment Provider` model access rights.

## Fix:
Compute the amount in `sudo` mode to bypass user's `Payment Provider` model access rights.


opw-4396372",barracudapps,2025-01-23 13:43:17+00:00,[],2025-02-07 19:01:00+00:00,2025-02-07 19:01:00+00:00,https://github.com/odoo/odoo/pull/194871,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609845075, 'issue_id': 2806947512, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194871.png)](https://mergebot.odoo.com/odoo/odoo/pull/194871)', 'created_at': datetime.datetime(2025, 1, 23, 13, 43, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633256773, 'issue_id': 2806947512, 'author': 'lvsz', 'body': ""After trying to write a test myself, I also noticed the `support_refund` field isn't stored, but instead defined via overrides for each provider: https://github.com/odoo/odoo/blob/d8fc04f5875dbd3098e58f382d0cea3c7c7c38af/addons/payment/models/payment_provider.py#L277-L279\r\n\r\nWhich is why clearing the cache will always set its value back to `False`.\r\n\r\nAnd while you can patch the compute method, it doesn't seem to follow the same access semantics.\r\n\r\nSo I don't mind not adding a test for this one, as it'd be too complex compared to the simplicity of the fix."", 'created_at': datetime.datetime(2025, 2, 4, 8, 53, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633845417, 'issue_id': 2806947512, 'author': 'barracudapps', 'body': 'Thank you, @lvsz. As the test becomes increasingly complex, and considering the pros and cons we discussed about creating another test (since a full tour would indeed take too long), I removed the test as suggested.', 'created_at': datetime.datetime(2025, 2, 4, 13, 3, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643082197, 'issue_id': 2806947512, 'author': 'barracudapps', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 7, 14, 26, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:43:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194871.png)](https://mergebot.odoo.com/odoo/odoo/pull/194871)

lvsz on (2025-02-04 08:53:37 UTC): After trying to write a test myself, I also noticed the `support_refund` field isn't stored, but instead defined via overrides for each provider: https://github.com/odoo/odoo/blob/d8fc04f5875dbd3098e58f382d0cea3c7c7c38af/addons/payment/models/payment_provider.py#L277-L279

Which is why clearing the cache will always set its value back to `False`.

And while you can patch the compute method, it doesn't seem to follow the same access semantics.

So I don't mind not adding a test for this one, as it'd be too complex compared to the simplicity of the fix.

barracudapps (Issue Creator) on (2025-02-04 13:03:41 UTC): Thank you, @lvsz. As the test becomes increasingly complex, and considering the pros and cons we discussed about creating another test (since a full tour would indeed take too long), I removed the test as suggested.

barracudapps (Issue Creator) on (2025-02-07 14:26:32 UTC): @robodoo r+

"
2806944065,pull_request,open,,[FIX] account: auto save partner,"In this pr https://github.com/odoo/odoo/commit/0b8bd891fad1c84607fe147a32d705917341fed7 we improved the partner form but by doing that we removed the use of the auto_save_partner widget which was wrong since we need it in the following case:
- Create an invoice
- Create and edit a new partner
- Trying to add a bank account
- The account holder was empty since the partner was not saved

task-4507042




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",malb-odoo,2025-01-23 13:41:48+00:00,[],2025-02-05 12:36:28+00:00,,https://github.com/odoo/odoo/pull/194870,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609841618, 'issue_id': 2806944065, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194870.png)](https://mergebot.odoo.com/odoo/odoo/pull/194870)', 'created_at': datetime.datetime(2025, 1, 23, 13, 41, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:41:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194870.png)](https://mergebot.odoo.com/odoo/odoo/pull/194870)

"
2806900119,pull_request,closed,,[FIX] hr: fix error in `test_access_my_profile_toolbar`,"Before this commit the test `test_access_my_profile_toolbar` was failing because there was no `action` available to the user in the toolbar. This commit changes the test to adapt to this situation.

Error: https://runbot.odoo.com/odoo/action-573/111489


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",khah-odoo,2025-01-23 13:22:50+00:00,[],2025-01-29 10:13:06+00:00,2025-01-29 10:13:06+00:00,https://github.com/odoo/odoo/pull/194869,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609798519, 'issue_id': 2806900119, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194869.png)](https://mergebot.odoo.com/odoo/odoo/pull/194869)', 'created_at': datetime.datetime(2025, 1, 23, 13, 22, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621051411, 'issue_id': 2806900119, 'author': 'Bertrand2', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 29, 9, 5, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621051484, 'issue_id': 2806900119, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 29, 9, 5, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:22:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194869.png)](https://mergebot.odoo.com/odoo/odoo/pull/194869)

Bertrand2 on (2025-01-29 09:05:13 UTC): robodoo fw=no

robodoo on (2025-01-29 09:05:15 UTC): Disabled forward-porting.

"
2806894253,pull_request,open,,[FIX] l10n_in_hr_holidays: fix sandwich leave option visibility.,"Steps to Reproduce:
- Install the `l10n_in_hr_holidays` module.
- Ensure there is only one company, and its country is set to India.
- Sandwich leave feature is not available for common time-off types like Paid, Sick, etc.

Cause:
- Time off types for common categories (e.g., Paid, Sick) have `company_id` and `country_id` set to False.
- In a single-company setup, users cannot change the country in these time-off types due to the lack of multi-company access.

Fix:
- Adjusted the visibility condition for the sandwich leave feature. If the `country_id` for the time-off type is False or India then the sandwich leave feature will now be available.

task-4430006",rmun-odoo,2025-01-23 13:20:18+00:00,[],2025-02-06 07:00:42+00:00,,https://github.com/odoo/odoo/pull/194868,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609793226, 'issue_id': 2806894253, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194868.png)](https://mergebot.odoo.com/odoo/odoo/pull/194868)', 'created_at': datetime.datetime(2025, 1, 23, 13, 20, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:20:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194868.png)](https://mergebot.odoo.com/odoo/odoo/pull/194868)

"
2806892456,pull_request,open,,[FIX] pos_restaurant: cancel last order cause traceback,"We check that currentOrder exist before accessing its attribute inside the function `showUnbookButton`. This was causing a traceback when canceling the last order in restaurant. After this fix, deleting the last order redirect correctly to the floorplan.

Steps to reproduce :
- Open ""Restaurant""
- Go to ""Orders""
- Delete all orders
- For the last one (Direct sale), there is no ""Delete"" button in the ticket screen if the order is empty, so open it and then delete it with the action button ""Cancel order""

task-id: 4507062

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-23 13:19:30+00:00,[],2025-02-04 13:13:01+00:00,,https://github.com/odoo/odoo/pull/194867,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609791476, 'issue_id': 2806892456, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194867.png)](https://mergebot.odoo.com/odoo/odoo/pull/194867)', 'created_at': datetime.datetime(2025, 1, 23, 13, 19, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:19:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194867.png)](https://mergebot.odoo.com/odoo/odoo/pull/194867)

"
2806889590,pull_request,closed,,[FIX] account: error when downloading pdf of a draft invoice,"Steps to reproduce the error:
- Create a new invoice. Don't confirm it.
- Go to list view of invoices.
- Select that invoice > Download > PDF

Traceback: ""AttributeError: 'bool' object has no attribute 'replace'""

`_get_move_display_name` can be used instead as it already handles draft invoices.

sentry-6191644587
",alialfie,2025-01-23 13:18:15+00:00,[],2025-01-30 15:43:09+00:00,2025-01-30 15:43:09+00:00,https://github.com/odoo/odoo/pull/194866,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609788897, 'issue_id': 2806889590, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194866.png)](https://mergebot.odoo.com/odoo/odoo/pull/194866)', 'created_at': datetime.datetime(2025, 1, 23, 13, 18, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:18:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194866.png)](https://mergebot.odoo.com/odoo/odoo/pull/194866)

"
2806882567,pull_request,closed,,[FW][FIX] im_livechat: ignore leave when assigning livechat operator,"The spec is for operators to join/leave the live chat channel when they want to become available.

Leave status is now ignored, which removes confusion, especially with demo data when users are in leave and livechat appears to fail.

It also gives more control as the operator can always leave the channel when necessary (and also now choose to do support even during leaves).

Forward-Port-Of: odoo/odoo#194423",fw-bot,2025-01-23 13:15:07+00:00,[],2025-01-27 16:15:36+00:00,2025-01-23 17:57:07+00:00,https://github.com/odoo/odoo/pull/194865,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609782464, 'issue_id': 2806882567, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194865.png)](https://mergebot.odoo.com/odoo/odoo/pull/194865)', 'created_at': datetime.datetime(2025, 1, 23, 13, 15, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609782491, 'issue_id': 2806882567, 'author': 'fw-bot', 'body': '@seb-odoo @phenix-factory this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 15, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:15:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194865.png)](https://mergebot.odoo.com/odoo/odoo/pull/194865)

fw-bot (Issue Creator) on (2025-01-23 13:15:21 UTC): @seb-odoo @phenix-factory this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806881844,pull_request,closed,,[FW][FIX] point_of_sale: correctly sort products alphabetically,"Before this commit, products were sorted based on display_name, which included the internal reference, resulting in products being sorted by their internal references. This fix ensures that products are sorted alphabetically by their names.

opw-4456699

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193096",fw-bot,2025-01-23 13:14:48+00:00,[],2025-02-07 13:59:00+00:00,2025-01-24 13:57:32+00:00,https://github.com/odoo/odoo/pull/194864,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609782410, 'issue_id': 2806881844, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194864.png)](https://mergebot.odoo.com/odoo/odoo/pull/194864)', 'created_at': datetime.datetime(2025, 1, 23, 13, 15, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609782435, 'issue_id': 2806881844, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 15, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612294101, 'issue_id': 2806881844, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 25, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:15:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194864.png)](https://mergebot.odoo.com/odoo/odoo/pull/194864)

fw-bot (Issue Creator) on (2025-01-23 13:15:19 UTC): @pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 11:25:55 UTC): @robodoo r+

"
2806875747,pull_request,closed,,[FW][FIX] pos_self_order_stripe: fix Stripe payments,"Currently in v18 Stripe payments are broken and don't work anymore. This PR adjusts the code so that Stripe works again in self order mode. It fixes the error ""An error has occured"" seen when sending a payment to a Stripe terminal + it also fixes the response sent to PoS to confirm Stripe payments.

opw-4283413
opw-4358017

Forward-Port-Of: odoo/odoo#194691",fw-bot,2025-01-23 13:12:06+00:00,[],2025-02-06 17:59:24+00:00,2025-01-23 17:57:11+00:00,https://github.com/odoo/odoo/pull/194863,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609775730, 'issue_id': 2806875747, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194863.png)](https://mergebot.odoo.com/odoo/odoo/pull/194863)', 'created_at': datetime.datetime(2025, 1, 23, 13, 12, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609775746, 'issue_id': 2806875747, 'author': 'fw-bot', 'body': '@Ysoroko @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194823\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 12, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609826410, 'issue_id': 2806875747, 'author': 'Ysoroko', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:12:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194863.png)](https://mergebot.odoo.com/odoo/odoo/pull/194863)

fw-bot (Issue Creator) on (2025-01-23 13:12:08 UTC): @Ysoroko @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194823

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Ysoroko on (2025-01-23 13:35:00 UTC): @robodoo r+

"
2806868492,pull_request,open,,[IMP] base: archive bank,"This commit will do multiple thing:
- Override the unlink to archive instead
- Addings archived filter
- Adding a button in the form view to archive it and reload
- Adding the active field to the list view
- Change some optional show and hide

task-4507042




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",malb-odoo,2025-01-23 13:08:51+00:00,[],2025-02-05 12:35:58+00:00,,https://github.com/odoo/odoo/pull/194862,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609768793, 'issue_id': 2806868492, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194862.png)](https://mergebot.odoo.com/odoo/odoo/pull/194862)', 'created_at': datetime.datetime(2025, 1, 23, 13, 8, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:08:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194862.png)](https://mergebot.odoo.com/odoo/odoo/pull/194862)

"
2806867358,pull_request,closed,,[FW][FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194789",fw-bot,2025-01-23 13:08:20+00:00,[],2025-02-07 08:13:24+00:00,2025-01-24 08:07:07+00:00,https://github.com/odoo/odoo/pull/194861,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609767516, 'issue_id': 2806867358, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194861.png)](https://mergebot.odoo.com/odoo/odoo/pull/194861)', 'created_at': datetime.datetime(2025, 1, 23, 13, 8, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609767553, 'issue_id': 2806867358, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 8, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611667982, 'issue_id': 2806867358, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 6, 0, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:08:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194861.png)](https://mergebot.odoo.com/odoo/odoo/pull/194861)

fw-bot (Issue Creator) on (2025-01-23 13:08:22 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-24 06:00:15 UTC): @robodoo r+

"
2806862425,pull_request,closed,,[FIX] payment_xendit: fix rounding for PHP,"Steps to reproduce:
1) Configure Xendit provider
2) Try paying in PHP currency
3) Observe: 'Amount must be integer' error

Xendit does not allow decimal places for PHP.

opw-4415419
",vchu-odoo,2025-01-23 13:06:08+00:00,[],2025-02-07 14:22:47+00:00,2025-01-24 14:16:47+00:00,https://github.com/odoo/odoo/pull/194860,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609762784, 'issue_id': 2806862425, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194860.png)](https://mergebot.odoo.com/odoo/odoo/pull/194860)', 'created_at': datetime.datetime(2025, 1, 23, 13, 6, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:06:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194860.png)](https://mergebot.odoo.com/odoo/odoo/pull/194860)

"
2806858730,pull_request,closed,,[FIX] web: handle field sorting should include id,"This commit makes the same fix as [1] but it does t for kanban views instead of list views.

We discovered in task [2] we were developing for the master branch that we needed this fix and that we wanted to fix it from 17.0

[1]: ecc0a38a1d3b04f854d761fd498b120a4dfef5ad
[2]: opw-4370092

Task: opw-4370092",brboi,2025-01-23 13:04:23+00:00,[],2025-02-06 17:09:19+00:00,2025-01-23 17:09:08+00:00,https://github.com/odoo/odoo/pull/194859,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609759126, 'issue_id': 2806858730, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194859.png)](https://mergebot.odoo.com/odoo/odoo/pull/194859)', 'created_at': datetime.datetime(2025, 1, 23, 13, 4, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609765736, 'issue_id': 2806858730, 'author': 'kebeclibre', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 7, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:04:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194859.png)](https://mergebot.odoo.com/odoo/odoo/pull/194859)

kebeclibre on (2025-01-23 13:07:34 UTC): robodoo r+

"
2806857214,pull_request,closed,,[FW][ADD] l10n_ro_edi_etransport: send transport data to eTransport platform,"Romania requires its companies to send information of all transports of goods on Romanian territory to a specific web service on their eTransport platform.

This commit implements a way to gather all the necessary data needed to send the eTransport document and the actual sending of this document to the eTransport platform.

Authentication:
the authentication needed to interact with the eTransport platform is the same as (and was already implemented in) the l10n_ro_efactura module. see [eFactura PR](https://github.com/odoo/odoo/pull/144061)

eTransport flow:
- Add the necessary eTransport data to a delivery
- send the eTransport document to ANAF
- the document gets processed by ANAF
- Fetch the status of the document:
    - which can result in an error, in which case the flow starts again from the beginning with the corrected data
    - or in a success

 task-id: 3810735

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194724
Forward-Port-Of: odoo/odoo#170080",fw-bot,2025-01-23 13:03:42+00:00,[],2025-02-03 13:06:11+00:00,2025-02-03 13:06:11+00:00,https://github.com/odoo/odoo/pull/194858,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609757621, 'issue_id': 2806857214, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194858.png)](https://mergebot.odoo.com/odoo/odoo/pull/194858)', 'created_at': datetime.datetime(2025, 1, 23, 13, 3, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609757646, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 3, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609788705, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 13, 18, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610137290, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 15, 36, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172546, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723846, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617544327, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 2, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620472046, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 1, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623354820, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 30, 2, 2, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626138346, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 31, 2, 2, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2628685645, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 1, 2, 1, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629731152, 'issue_id': 2806857214, 'author': 'fw-bot', 'body': '@AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 3, 2, 3, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630221683, 'issue_id': 2806857214, 'author': 'AllePilli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 8, 2, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630221756, 'issue_id': 2806857214, 'author': 'robodoo', 'body': '@AllePilli you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 2, 3, 8, 2, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630230387, 'issue_id': 2806857214, 'author': 'AllePilli', 'body': '@odoo/rd-security Fw-port. Nothing changed regarding the security part', 'created_at': datetime.datetime(2025, 2, 3, 8, 7, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630319507, 'issue_id': 2806857214, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 2, 3, 8, 52, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:03:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194858.png)](https://mergebot.odoo.com/odoo/odoo/pull/194858)

fw-bot (Issue Creator) on (2025-01-23 13:03:44 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 13:18:12 UTC): @AllePilli @smetl ci/upgrade_enterprise failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 15:36:03 UTC): @AllePilli @smetl this PR was modified / updated and has become a normal PR. It must be merged directly.

fw-bot (Issue Creator) on (2025-01-26 02:02:08 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:57 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:02:12 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 02:01:42 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-30 02:02:24 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-31 02:02:22 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-01 02:01:53 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-03 02:03:26 UTC): @AllePilli @smetl this forward port of odoo/odoo#170080 is awaiting action (not merged or closed).

AllePilli on (2025-02-03 08:02:33 UTC): @robodoo r+

robodoo on (2025-02-03 08:02:35 UTC): @AllePilli you may want to rebuild or fix this PR as it has failed CI.

AllePilli on (2025-02-03 08:07:16 UTC): @odoo/rd-security Fw-port. Nothing changed regarding the security part

xmo-odoo on (2025-02-03 08:52:13 UTC): @robodoo override=ci/security

"
2806856660,pull_request,closed,,[IMP] sale: Hide taxes on portal preview when Avatax is enabled,"Adding a condition for Avatax not being enabled on the taxes column in portal view of sales orders. 
task: 4423974

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",nape-odoo,2025-01-23 13:03:27+00:00,[],2025-01-23 15:19:51+00:00,2025-01-23 15:19:40+00:00,https://github.com/odoo/odoo/pull/194857,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609757454, 'issue_id': 2806856660, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194857.png)](https://mergebot.odoo.com/odoo/odoo/pull/194857)', 'created_at': datetime.datetime(2025, 1, 23, 13, 3, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610094266, 'issue_id': 2806856660, 'author': 'nape-odoo', 'body': 'Closing this PR because the changes were moved to an Enterprise module instead.', 'created_at': datetime.datetime(2025, 1, 23, 15, 19, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:03:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194857.png)](https://mergebot.odoo.com/odoo/odoo/pull/194857)

nape-odoo (Issue Creator) on (2025-01-23 15:19:40 UTC): Closing this PR because the changes were moved to an Enterprise module instead.

"
2806851664,pull_request,closed,,[FW][FIX] l10n_latam_check: existing third party check outgoing payment method.,"**Description of the issue/feature this PR addresses**: 
1) It is necessay not to set ""Existing Third Party Checks"" outgoing payment method in all argentinean cash journals. It is only needed to be set on ""Third Party Checks"" and ""Rejected Third Party Checks"" Argentinean journals that are created when the module is installed or a new argentinean company is created. 
2) Also when a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back. This bug was introduced on this commit https://github.com/odoo/odoo/pull/188451/commits/0618fff9f9bb4716d22dc2ce8950cada824b90f4.

**Current behavior before PR**:
1) ""Existing Third Party Checks"" outgoing payment method is set in all argentinean cash journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back.

**Desired behavior after PR is merged**:
1) ""Existing Third Party Checks"" outgoing payment method is set only in ""Third Party Checks"" and ""Rejected Third Party Checks"" argentinean journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is able to add it back.

_Ticket Adhoc side_: 83443
_Task Latam side_: 1309



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194713",fw-bot,2025-01-23 13:01:09+00:00,[],2025-02-06 19:17:29+00:00,2025-01-23 19:17:09+00:00,https://github.com/odoo/odoo/pull/194856,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609752375, 'issue_id': 2806851664, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194856.png)](https://mergebot.odoo.com/odoo/odoo/pull/194856)', 'created_at': datetime.datetime(2025, 1, 23, 13, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609752399, 'issue_id': 2806851664, 'author': 'fw-bot', 'body': '@pablohmontenegro @antoine162 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194825\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 1, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610436291, 'issue_id': 2806851664, 'author': 'antoine162', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 17, 4, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619333051, 'issue_id': 2806851664, 'author': 'lk-eska', 'body': 'How do we transfer these checks to a bank if we cannot use these payment methods for outgoing?\r\n\r\nhttps://github.com/odoo/odoo/blob/5b7377c2c80a1e8efa345844a197ff5e5302827b/addons/l10n_latam_check/wizards/l10n_latam_payment_mass_transfer.py#L72\r\n\r\nSee the code above. It is searching for these methods and giving error if it cannot find it.\r\n\r\n@antoine162', 'created_at': datetime.datetime(2025, 1, 28, 15, 29, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:01:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194856.png)](https://mergebot.odoo.com/odoo/odoo/pull/194856)

fw-bot (Issue Creator) on (2025-01-23 13:01:11 UTC): @pablohmontenegro @antoine162 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194825

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

antoine162 on (2025-01-23 17:04:43 UTC): @robodoo r+

lk-eska on (2025-01-28 15:29:50 UTC): How do we transfer these checks to a bank if we cannot use these payment methods for outgoing?

https://github.com/odoo/odoo/blob/5b7377c2c80a1e8efa345844a197ff5e5302827b/addons/l10n_latam_check/wizards/l10n_latam_payment_mass_transfer.py#L72

See the code above. It is searching for these methods and giving error if it cannot find it.

@antoine162

"
2806849353,pull_request,closed,,[FW][FIX] stock_account: fix standard_price on _svl_replenish_stock,"## How to reproduce:
- Create product P, tracked by lot, cost_method = 'standard', standard_price = 1
- Create quant with lot L1, 10 units on hand
- Set L1 standard_price = 2
- Set lot_valuated to True => lot value_svl is $10 for 10 units (product.standard_price * quantity)
- Set L1 quantity to 0 => lot value_svl is $-10 for 0 units

## Issue
When the svl is replenished for the lot, the product.standard_price is used. However, the lot.standard_price is not updated; hence, when the stock is emptied, and the lot.standard_price is used, a discrepancy is created.

## Solution
When the svl is replenished, we u se the product.standard_price and update the lot.standard_price

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193770",fw-bot,2025-01-23 13:00:09+00:00,[],2025-02-06 17:59:21+00:00,2025-01-23 17:56:59+00:00,https://github.com/odoo/odoo/pull/194855,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609750111, 'issue_id': 2806849353, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194855.png)](https://mergebot.odoo.com/odoo/odoo/pull/194855)', 'created_at': datetime.datetime(2025, 1, 23, 13, 0, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609750132, 'issue_id': 2806849353, 'author': 'fw-bot', 'body': '@DavidFesquet @Whenrow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194830\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 13, 0, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609926831, 'issue_id': 2806849353, 'author': 'DavidFesquet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 18, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 13:00:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194855.png)](https://mergebot.odoo.com/odoo/odoo/pull/194855)

fw-bot (Issue Creator) on (2025-01-23 13:00:11 UTC): @DavidFesquet @Whenrow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194830

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

DavidFesquet on (2025-01-23 14:18:02 UTC): @robodoo r+

"
2806847876,pull_request,closed,,[FW][FIX] purchase: fix tour by providing appropriate class,"Before this commit:
===================
- The purchase tour was failing because the tour's JavaScript used
  an incorrect class selector (targeting 'partner_id'), which prevented
  it from locating the intended DOM element. Consequently,
  the sequence of actions was interrupted, causing the tour to break midway.

After this commit:
===================
- The issue has been resolved by updating the tour to use the correct and
  unique class selector. This ensures the tour accurately targets the
  intended element, allowing it to proceed without interruptions.
  As a result, the purchase tour runs successfully and achieves its intended purpose.

TaskId: 4268662

Forward-Port-Of: odoo/odoo#194780
Forward-Port-Of: odoo/odoo#184735",fw-bot,2025-01-23 12:59:26+00:00,[],2025-02-07 07:02:32+00:00,2025-01-24 06:32:21+00:00,https://github.com/odoo/odoo/pull/194854,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609748575, 'issue_id': 2806847876, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194854.png)](https://mergebot.odoo.com/odoo/odoo/pull/194854)', 'created_at': datetime.datetime(2025, 1, 23, 12, 59, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609748593, 'issue_id': 2806847876, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 59, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611613781, 'issue_id': 2806847876, 'author': 'dhha-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 10, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:59:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194854.png)](https://mergebot.odoo.com/odoo/odoo/pull/194854)

fw-bot (Issue Creator) on (2025-01-23 12:59:28 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dhha-odoo on (2025-01-24 05:10:55 UTC): robodoo r+

"
2806846885,pull_request,closed,,[FW][IMP] mail: improve quote reply detection,"We update quote detection for gmail and outlook:
- gmail has simple wrapper divs with explicit classes
- outlook has a mix of div ids and simple pattern-based quoting (everything under ""<hr><div id=""divRplyFwdMsg""/> seems to be considered a quote)

Previously gmail just used blockquote, which still works but does not capture ""On xx:xx:xx X <X@gmail.com> wrote:"" headers, which are caught for outlook.

Previously outlook had a wrapper div around divRplyFwdMsg which would set data-o-mail-quote-container on it, and propagate to children. However it seems that outer div was either removed or is not always present, a heuristic is thus needed.

task-4381505

Forward-Port-Of: odoo/odoo#194722
Forward-Port-Of: odoo/odoo#192875",fw-bot,2025-01-23 12:58:59+00:00,[],2025-02-07 02:36:18+00:00,2025-01-24 02:35:57+00:00,https://github.com/odoo/odoo/pull/194853,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609747638, 'issue_id': 2806846885, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194853.png)](https://mergebot.odoo.com/odoo/odoo/pull/194853)', 'created_at': datetime.datetime(2025, 1, 23, 12, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609747659, 'issue_id': 2806846885, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 59, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:59:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194853.png)](https://mergebot.odoo.com/odoo/odoo/pull/194853)

fw-bot (Issue Creator) on (2025-01-23 12:59:01 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806845805,pull_request,closed,,[FW][FIX] cli/*: fix script converting tree to list (regression),"since the pr https://github.com/odoo/odoo/pull/189883, the file updates made are not consistent:

'list<editable=""bottom"">'.

Forward-Port-Of: odoo/odoo#194319",fw-bot,2025-01-23 12:58:31+00:00,[],2025-01-28 12:08:38+00:00,2025-01-28 12:08:38+00:00,https://github.com/odoo/odoo/pull/194852,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609746786, 'issue_id': 2806845805, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194852.png)](https://mergebot.odoo.com/odoo/odoo/pull/194852)', 'created_at': datetime.datetime(2025, 1, 23, 12, 58, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609746812, 'issue_id': 2806845805, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 58, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:58:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194852.png)](https://mergebot.odoo.com/odoo/odoo/pull/194852)

fw-bot (Issue Creator) on (2025-01-23 12:58:35 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806843302,pull_request,closed,,[FW][FIX] loyalty: parse reward_product_domain as JSON,"Before this commit, `domain['reward_product_domain']` was being evaluated with `ast.literal_eval` while containing JSON-style booleans (`true/false`). That caused a `ValueError` because `true/false` are invalid in Python syntax.

With this commit, we now use `json.loads` to parse the domain string, which correctly handles JSON booleans without error.

opw-4458627

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193425",fw-bot,2025-01-23 12:57:24+00:00,[],2025-02-07 13:58:59+00:00,2025-01-24 13:57:28+00:00,https://github.com/odoo/odoo/pull/194851,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609744437, 'issue_id': 2806843302, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194851.png)](https://mergebot.odoo.com/odoo/odoo/pull/194851)', 'created_at': datetime.datetime(2025, 1, 23, 12, 57, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609744458, 'issue_id': 2806843302, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194829\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 57, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612293955, 'issue_id': 2806843302, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 25, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:57:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194851.png)](https://mergebot.odoo.com/odoo/odoo/pull/194851)

fw-bot (Issue Creator) on (2025-01-23 12:57:26 UTC): @pedrambiria @davidmonnom this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194829

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 11:25:50 UTC): @robodoo r+

"
2806834770,pull_request,closed,,[FW][FIX] hr_attendance: negative overtime for flexible employee,"Steps to reproduce:
1. Set a flexible working schedule with 40h / week and 8h / day for an employee
2. Record an attendance for the employee
3. Go to reporting, the expected hours is the same as the worked hours

Expected behavior:
The expected hours should be what was set in the schedule, which is 8 hours

Explanation:
The calculation of expected hours is based on the difference between overtime hours and worked hours. This is done to ensure the overtimes are always computed correctly. However if the overtime duration is negative, it is not taken into account in `_update_overtime`. This commit allows negative amounts for overtime hours.

opw-4388707


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193523",fw-bot,2025-01-23 12:53:29+00:00,[],2025-02-06 16:48:30+00:00,2025-01-23 16:42:32+00:00,https://github.com/odoo/odoo/pull/194850,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609736597, 'issue_id': 2806834770, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194850.png)](https://mergebot.odoo.com/odoo/odoo/pull/194850)', 'created_at': datetime.datetime(2025, 1, 23, 12, 53, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609736616, 'issue_id': 2806834770, 'author': 'fw-bot', 'body': '@khah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194824\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 53, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609833026, 'issue_id': 2806834770, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 37, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:53:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194850.png)](https://mergebot.odoo.com/odoo/odoo/pull/194850)

fw-bot (Issue Creator) on (2025-01-23 12:53:31 UTC): @khah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194824

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Bertrand2 on (2025-01-23 13:37:55 UTC): robodoo r+

"
2806827140,pull_request,closed,,[FW][FIX] web_editor: prevent adding empty `p` when deleting an image,"**Problem**:
When an image inside a `<p>` tag (e.g., `<p><img></p>`) is deleted using the toolbar delete button, the selection is not properly restored, leaving an empty `<p>` in the DOM and the selection in the editor root.

**Solution**:
Restore the selection to the correct position after deleting the image to avoid leaving an empty `<p>`.

**Steps to Reproduce**:
1. Open an empty editor and add an image.
2. Delete the image using the toolbar delete button.
3. Inspect the DOM:
   - An empty `<p>` remains, and the selection is in the editor root.

opw-4472173

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193396",fw-bot,2025-01-23 12:50:00+00:00,[],2025-02-06 16:48:16+00:00,2025-01-23 16:32:50+00:00,https://github.com/odoo/odoo/pull/194849,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609729740, 'issue_id': 2806827140, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194849.png)](https://mergebot.odoo.com/odoo/odoo/pull/194849)', 'created_at': datetime.datetime(2025, 1, 23, 12, 50, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609729769, 'issue_id': 2806827140, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 50, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609915707, 'issue_id': 2806827140, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo the next pull request (odoo/odoo#194882) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 14, 13, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609921701, 'issue_id': 2806827140, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 16, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:50:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194849.png)](https://mergebot.odoo.com/odoo/odoo/pull/194849)

fw-bot (Issue Creator) on (2025-01-23 12:50:02 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 14:13:36 UTC): @walidsahli @dmo-odoo the next pull request (odoo/odoo#194882) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dmo-odoo on (2025-01-23 14:16:04 UTC): @robodoo r+

"
2806826507,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#194672
Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-23 12:49:42+00:00,[],2025-02-07 11:23:35+00:00,2025-01-24 11:16:28+00:00,https://github.com/odoo/odoo/pull/194848,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609729079, 'issue_id': 2806826507, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194848.png)](https://mergebot.odoo.com/odoo/odoo/pull/194848)', 'created_at': datetime.datetime(2025, 1, 23, 12, 49, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609729110, 'issue_id': 2806826507, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 49, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:49:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194848.png)](https://mergebot.odoo.com/odoo/odoo/pull/194848)

fw-bot (Issue Creator) on (2025-01-23 12:49:44 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806825816,pull_request,closed,,[FW][FIX] mrp: bypass set_qty_producing on lot creation for MO,"### Steps to reproduce:

- Create a product tracked by LOT (not SN)
- Create a BOM for that product and a BOM line with a tracked product
- Put a an SN for your component in STOCK.
- Create an MO for 1 unit of your product and confirm.
> The SN should be set on your component line.
- Set an LOT on the finished product with the create option but without clicking on the [+]
#### > The quantity of the component line was updated to 0 and the SN of the comp was removed.

### Cause of the issue:

Changing the lot on the MO form will trigger the `_onchange_producing` which will in turn `_set_qty_producing`:
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L797-L799 In case the product is tracked by SN this `_set_qty_producing` will set a qty_producing of 1 and the move raws will reserve a quantity accordingly but if the product is tracked by lot or not tracked at all the quantities of the move raw will just be adapted to match the `qty_producing` (that was at 0 from the start):
https://github.com/odoo/odoo/blob/83445d91a588958417fef8a04d1187974d4b3d9a/addons/mrp/models/mrp_production.py#L1217-L1227

opw-4418809
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192932",fw-bot,2025-01-23 12:49:25+00:00,[],2025-02-06 21:59:43+00:00,2025-01-23 21:52:20+00:00,https://github.com/odoo/odoo/pull/194847,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609728446, 'issue_id': 2806825816, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194847.png)](https://mergebot.odoo.com/odoo/odoo/pull/194847)', 'created_at': datetime.datetime(2025, 1, 23, 12, 49, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609728474, 'issue_id': 2806825816, 'author': 'fw-bot', 'body': '@lase-odoo @svs-odoo cherrypicking of pull request odoo/odoo#192932 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_production.py\nCONFLICT (content): Merge conflict in addons/mrp/models/mrp_production.py\nAuto-merging addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 49, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610566969, 'issue_id': 2806825816, 'author': 'lase-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 17, 51, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:49:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194847.png)](https://mergebot.odoo.com/odoo/odoo/pull/194847)

fw-bot (Issue Creator) on (2025-01-23 12:49:27 UTC): @lase-odoo @svs-odoo cherrypicking of pull request odoo/odoo#192932 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_production.py
CONFLICT (content): Merge conflict in addons/mrp/models/mrp_production.py
Auto-merging addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lase-odoo on (2025-01-23 17:51:58 UTC): robodoo r+

"
2806816727,pull_request,closed,,[FW][FIX] base_vat: add a method to validate Moroccan VAT numbers,"### Steps to reproduce:
- Create a new Contact
- Set the country to Morocco
- Add ""52258521"" as a VAT number
- Try to validate -> Error

### Cause:
Only occurs after saas-17.4 because it is related to the library `stdnum`. The version of this library change when the Python version is >3.11.  As the SaaS version use Python3.12 since saas-17.4 and Python3.10 before, the bug only appears in saas-17.4, but this change targets 17.0 because 17.0 supports Python > 3.10.

The cause of the bug is the new version of the library which implements a verification method that corresponds to Moroccan ICE numbers and not VAT numbers.

### Solution:
Create the method to check the Moroccan VAT numbers. The format is just a number with 8 digits.

opw-4447478

Forward-Port-Of: odoo/odoo#194592",fw-bot,2025-01-23 12:45:17+00:00,[],2025-01-29 13:47:58+00:00,2025-01-29 13:47:58+00:00,https://github.com/odoo/odoo/pull/194846,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609719832, 'issue_id': 2806816727, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194846.png)](https://mergebot.odoo.com/odoo/odoo/pull/194846)', 'created_at': datetime.datetime(2025, 1, 23, 12, 45, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609719854, 'issue_id': 2806816727, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 45, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611992666, 'issue_id': 2806816727, 'author': 'robodoo', 'body': '@mathcoutant @FlorianGilbert staging failed: ci/l10n on 02dfbffb5bd7f16fee2c007ca64d2ad59378665f (view more at https://runbot.odoo.com/runbot/build/73882240)', 'created_at': datetime.datetime(2025, 1, 24, 8, 54, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612092114, 'issue_id': 2806816727, 'author': 'mathcoutant', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612092212, 'issue_id': 2806816727, 'author': 'robodoo', 'body': 'Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:45:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194846.png)](https://mergebot.odoo.com/odoo/odoo/pull/194846)

fw-bot (Issue Creator) on (2025-01-23 12:45:18 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-24 08:54:19 UTC): @mathcoutant @FlorianGilbert staging failed: ci/l10n on 02dfbffb5bd7f16fee2c007ca64d2ad59378665f (view more at https://runbot.odoo.com/runbot/build/73882240)

mathcoutant on (2025-01-24 09:45:42 UTC): @robodoo r-

robodoo on (2025-01-24 09:45:45 UTC): Note that only this forward-port has been unapproved, sibling forward ports may have to be unapproved individually.

"
2806809189,pull_request,closed,,[FIX] web: Many2OneAvatarField canOpen option,"The goal of this commit is to be able to use the option _no_open_ when displaying fields with the _many2one_avatar_user_ widget in a form view.

Prior to this commit, the _no_open_ option was ineffective for fields using the _many2one_avatar_user_ widget in form views if the field was not set as _readonly_. This was because the _no_open_ option was overridden, and the expression `!props.readonly` was always used, regardless of the specified value for _no_open_. As a result, the field's behavior could not be customized to prevent opening.

After this commit, the _no_open_ option is fully supported in this scenario. If the field is _readonly_, the `canOpen` expression will always evaluate to _False_, maintaining the expected behavior. For fields that are not _readonly_, you can now explicitly use the _no_open_ option to control whether the field can be opened

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",LauraCForgeFlow,2025-01-23 12:41:51+00:00,[],2025-01-24 07:11:58+00:00,2025-01-24 07:11:57+00:00,https://github.com/odoo/odoo/pull/194845,[],"[{'comment_id': 2609713142, 'issue_id': 2806809189, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194845.png)](https://mergebot.odoo.com/odoo/odoo/pull/194845)', 'created_at': datetime.datetime(2025, 1, 23, 12, 41, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611757173, 'issue_id': 2806809189, 'author': 'aab-odoo', 'body': ""Hello @LauraCForgeFlow \r\n\r\nWe can't change that in 16.0. That option was simply not supported, we won't make it work in stable as it will change the expected behavior of this widget. However, we'll take it as a feedback for master. Thanks."", 'created_at': datetime.datetime(2025, 1, 24, 7, 11, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:41:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194845.png)](https://mergebot.odoo.com/odoo/odoo/pull/194845)

aab-odoo on (2025-01-24 07:11:57 UTC): Hello @LauraCForgeFlow 

We can't change that in 16.0. That option was simply not supported, we won't make it work in stable as it will change the expected behavior of this widget. However, we'll take it as a feedback for master. Thanks.

"
2806806343,pull_request,closed,,[FW][FIX] pos_loyalty: prevent access error in multi-company gift card use,"Before this commit, if a gift card was created in another company and the gift card program was not assigned to any company, using the gift card in another company resulted in an error.

opw-4422730

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192246",fw-bot,2025-01-23 12:40:35+00:00,[],2025-02-07 16:47:43+00:00,2025-01-24 16:28:49+00:00,https://github.com/odoo/odoo/pull/194844,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609710481, 'issue_id': 2806806343, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194844.png)](https://mergebot.odoo.com/odoo/odoo/pull/194844)', 'created_at': datetime.datetime(2025, 1, 23, 12, 40, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609710500, 'issue_id': 2806806343, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 40, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:40:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194844.png)](https://mergebot.odoo.com/odoo/odoo/pull/194844)

fw-bot (Issue Creator) on (2025-01-23 12:40:37 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806800912,pull_request,closed,,[FIX] website: facebook snippet visibility on mobile,"Revert changes from [commit] due to `m.facebook.com` using 'X-Frame-Options' header set to 'deny', which prevented iframe embedding across domains. META has now fixed this issue, so this PR restores the snippet's visibility on mobile devices.

[commit]: https://github.com/odoo/odoo/commit/588f910da03d6284a57c2fab8fd042ef3169666f

task-4507102",shsa-odoo,2025-01-23 12:38:02+00:00,[],2025-01-30 15:53:27+00:00,2025-01-30 15:53:27+00:00,https://github.com/odoo/odoo/pull/194843,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609705280, 'issue_id': 2806800912, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194843.png)](https://mergebot.odoo.com/odoo/odoo/pull/194843)', 'created_at': datetime.datetime(2025, 1, 23, 12, 38, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624085323, 'issue_id': 2806800912, 'author': 'qsm-odoo', 'body': '@robodoo delegate=bvr-odoo \r\n@bvr-odoo', 'created_at': datetime.datetime(2025, 1, 30, 10, 23, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624582818, 'issue_id': 2806800912, 'author': 'bvr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 13, 54, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:38:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194843.png)](https://mergebot.odoo.com/odoo/odoo/pull/194843)

qsm-odoo on (2025-01-30 10:23:45 UTC): @robodoo delegate=bvr-odoo 
@bvr-odoo

bvr-odoo on (2025-01-30 13:54:45 UTC): @robodoo r+

"
2806786289,pull_request,open,,"[IMP] web_editor, website: enhance snippet previews in AddSnippetDialog","### Purpose  
This PR enhances the snippet preview in `AddSnippetDialog` by adding labels and making them interactive. These improvements make it easier for users to identify snippets based on their functionality and preview their behavior dynamically.  

### Changes  

#### 1. Add Labels to Snippet Previews - [Commit 1]
- Snippets now support a `label` attribute to help users quickly recognize their functionality.  
- Labels are also added to snippet keywords for better discoverability when searching.  

**Example Usage:**  
```xml
<t t-snippet=""website.s_carousel"" string=""Carousel"" label=""Carousel""/>
```  

**Added Labels:**  
- **Carousel:** `s_carousel`, `s_carousel_intro`, `s_image_gallery`, `s_quotes_carousel`, `s_quotes_carousel_minimal`  
- **Parallax:** `s_parallax`, `s_kickoff`  
- **Popup:** `s_popup`, `s_newsletter_subscribe_popup`  
- **Gallery:** `s_images_wall`  
- **Tab:** `s_tabs`, `s_table_of_content`  
<br/>

#### 2. Make Snippet Previews Interactive - [commit 2]  
- Snippets now feature interactive behavior in the `AddSnippetDialog`.  
- Example:  
  - **Carousel snippets**  
    - Auto-play on hover  
    - Pause auto-play and reset to the first slide on mouse leave  
<br/>
task-4444186",aans-odoo,2025-01-23 12:31:09+00:00,[],2025-01-29 12:10:48+00:00,,https://github.com/odoo/odoo/pull/194842,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609691539, 'issue_id': 2806786289, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194842.png)](https://mergebot.odoo.com/odoo/odoo/pull/194842)', 'created_at': datetime.datetime(2025, 1, 23, 12, 31, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:31:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194842.png)](https://mergebot.odoo.com/odoo/odoo/pull/194842)

"
2806783635,pull_request,open,,[WIP][REF] mrp : revamp workorder state,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",mama-odoo,2025-01-23 12:29:53+00:00,[],2025-02-06 13:22:41+00:00,,https://github.com/odoo/odoo/pull/194841,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609689042, 'issue_id': 2806783635, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194841.png)](https://mergebot.odoo.com/odoo/odoo/pull/194841)', 'created_at': datetime.datetime(2025, 1, 23, 12, 29, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:29:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194841.png)](https://mergebot.odoo.com/odoo/odoo/pull/194841)

"
2806779877,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194747
Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-23 12:28:07+00:00,[],2025-02-07 01:12:34+00:00,2025-01-24 01:10:33+00:00,https://github.com/odoo/odoo/pull/194840,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609685393, 'issue_id': 2806779877, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194840.png)](https://mergebot.odoo.com/odoo/odoo/pull/194840)', 'created_at': datetime.datetime(2025, 1, 23, 12, 28, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609685415, 'issue_id': 2806779877, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 28, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:28:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194840.png)](https://mergebot.odoo.com/odoo/odoo/pull/194840)

fw-bot (Issue Creator) on (2025-01-23 12:28:09 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806771655,pull_request,closed,,[FIX] sale_loyalty: traceback when coupon applied on so,"Steps to reproduce:
- Create SO and add a product.
- Apply  discount coupon to SO.

Issue:
- Traceback occurs when the delivery module is not installed.

Cause:
- The line.is_delivery attribute is not accessible when the delivery module is not installed, leading to an error.

Fix:
- Use the line._is_delivery() method to correctly check for delivery lines.

opw-4509360

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",shrm-odoo,2025-01-23 12:24:11+00:00,[],2025-02-06 16:31:03+00:00,2025-01-23 16:08:09+00:00,https://github.com/odoo/odoo/pull/194839,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609677308, 'issue_id': 2806771655, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194839.png)](https://mergebot.odoo.com/odoo/odoo/pull/194839)', 'created_at': datetime.datetime(2025, 1, 23, 12, 24, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:24:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194839.png)](https://mergebot.odoo.com/odoo/odoo/pull/194839)

"
2806770036,pull_request,closed,,[ADD] base: Add country states for Nigeria,"Description of the issue/feature this PR addresses:
Add Nigerian States

Current behavior before PR:
No State is available by default for Nigeria

Desired behavior after PR is merged:
Nigeria's 36 States and FCT are imported by default for Nigerians

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",Ewetoye,2025-01-23 12:23:26+00:00,[],2025-01-30 12:12:11+00:00,2025-01-30 11:54:39+00:00,https://github.com/odoo/odoo/pull/194838,[],"[{'comment_id': 2609675822, 'issue_id': 2806770036, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194838.png)](https://mergebot.odoo.com/odoo/odoo/pull/194838)', 'created_at': datetime.datetime(2025, 1, 23, 12, 23, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615164035, 'issue_id': 2806770036, 'author': 'hupo-odoo', 'body': 'Hello, thanks for the PR! It looks good to me, but you have to resolve conflicts first :smiley:', 'created_at': datetime.datetime(2025, 1, 27, 8, 53, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615307583, 'issue_id': 2806770036, 'author': 'Ewetoye', 'body': '@hupo-odoo, resolved', 'created_at': datetime.datetime(2025, 1, 27, 9, 59, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615465503, 'issue_id': 2806770036, 'author': 'hupo-odoo', 'body': ""I see you add these states in `base`. I'm just wondering if these states are used only for 'internal' user of the country or if someone using a database of another country might also need to specify this state ? If it's only used for internal purpose, this code could be moved to `l10n_ng` repository. If kept like it is now, all users, when creating a database, will install these data. For example, for Bangladesh, it was decided to only use it inside the localization package https://github.com/odoo/odoo/blob/18.0/addons/l10n_bd/data/res.country.state.csv. Both work fine for me, I just want to make sure it is done the best way."", 'created_at': datetime.datetime(2025, 1, 27, 11, 10, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615594267, 'issue_id': 2806770036, 'author': 'Ewetoye', 'body': '1. Other country databases will also need to specify this states when dealing with contacts from Nigeria. Just as Chinese, American, and Saudi Arabian states are automatically imported for Nigerians with the expectation that they may be needed for contacts and others.\r\n2. Adding it to a localization will render it unusable to Non Nigerian Businesses. Maybe even those operating in Nigeria but with another localization based on their need.', 'created_at': datetime.datetime(2025, 1, 27, 12, 11, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615674113, 'issue_id': 2806770036, 'author': 'hupo-odoo', 'body': ""> 1. Other country databases will also need to specify this states when dealing with contacts from Nigeria. Just as Chinese, American, and Saudi Arabian states are automatically imported for Nigerians with the expectation that they may be needed for contacts and others.\r\n> 2. Adding it to a localization will render it unusable to Non Nigerian Businesses. Maybe even those operating in Nigeria but with another localization based on their need.\r\n\r\nThanks for the explanation, it's fine for me then. Could you just squash the 2 commits that concern the states. You don't need to provide the `[MERGE] ...` commit"", 'created_at': datetime.datetime(2025, 1, 27, 12, 48, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624271073, 'issue_id': 2806770036, 'author': 'Ewetoye', 'body': 'Instead of devoting free-time to rearranging almost 100 commits interval, why not just raise the PR again???', 'created_at': datetime.datetime(2025, 1, 30, 11, 46, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624339116, 'issue_id': 2806770036, 'author': 'Ewetoye', 'body': 'Moved to #195759', 'created_at': datetime.datetime(2025, 1, 30, 12, 12, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:23:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194838.png)](https://mergebot.odoo.com/odoo/odoo/pull/194838)

hupo-odoo on (2025-01-27 08:53:39 UTC): Hello, thanks for the PR! It looks good to me, but you have to resolve conflicts first :smiley:

Ewetoye (Issue Creator) on (2025-01-27 09:59:41 UTC): @hupo-odoo, resolved

hupo-odoo on (2025-01-27 11:10:55 UTC): I see you add these states in `base`. I'm just wondering if these states are used only for 'internal' user of the country or if someone using a database of another country might also need to specify this state ? If it's only used for internal purpose, this code could be moved to `l10n_ng` repository. If kept like it is now, all users, when creating a database, will install these data. For example, for Bangladesh, it was decided to only use it inside the localization package https://github.com/odoo/odoo/blob/18.0/addons/l10n_bd/data/res.country.state.csv. Both work fine for me, I just want to make sure it is done the best way.

Ewetoye (Issue Creator) on (2025-01-27 12:11:46 UTC): 1. Other country databases will also need to specify this states when dealing with contacts from Nigeria. Just as Chinese, American, and Saudi Arabian states are automatically imported for Nigerians with the expectation that they may be needed for contacts and others.
2. Adding it to a localization will render it unusable to Non Nigerian Businesses. Maybe even those operating in Nigeria but with another localization based on their need.

hupo-odoo on (2025-01-27 12:48:29 UTC): Thanks for the explanation, it's fine for me then. Could you just squash the 2 commits that concern the states. You don't need to provide the `[MERGE] ...` commit

Ewetoye (Issue Creator) on (2025-01-30 11:46:55 UTC): Instead of devoting free-time to rearranging almost 100 commits interval, why not just raise the PR again???

Ewetoye (Issue Creator) on (2025-01-30 12:12:10 UTC): Moved to #195759

"
2806767397,pull_request,closed,,[FW][FIX] project_purchase: include negative bills in project profitability,"### Issue:

- The negative values in Vendor Bills are not being reflected in the Analytic Account linked to a project.
- the negative value does not reduce the project’s total cost in the Analytic Report cost calculations.

### Steps to reproduce:

1- Create a project and set an analytic account or use the ""Renovations"" project.
2- Create a vendor bill.
3- On the VB add two lines one with a positive Price and the other with a negative Price.
4- on `Analytic` of each line set the project to `Renovations` or the project you created.
5- Validate the vendor bill.
6- Go to the project app and click on the 3 dots of the project you choose and click on `Project Updates`.
7- Notice the total cost of the project is not reflecting the negative value of the vendor bill.

### Solution:

- The issue is caused by the condition ('price_subtotal', '>', 0) in the query for account.move.line.
- Removing this condition ensures both positive and negative price_subtotal values are included.

opw-[4416931](https://www.odoo.com/web#id=4416931&view_type=form&model=project.task)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194300",fw-bot,2025-01-23 12:22:14+00:00,[],2025-02-07 01:45:41+00:00,2025-01-24 01:26:48+00:00,https://github.com/odoo/odoo/pull/194837,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609673450, 'issue_id': 2806767397, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194837.png)](https://mergebot.odoo.com/odoo/odoo/pull/194837)', 'created_at': datetime.datetime(2025, 1, 23, 12, 22, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609673471, 'issue_id': 2806767397, 'author': 'fw-bot', 'body': '@kawkb @xavierbol cherrypicking of pull request odoo/odoo#194300 failed.\n\nstdout:\n```\nAuto-merging addons/project_purchase/models/project_project.py\nAuto-merging addons/project_purchase/tests/test_project_profitability.py\nCONFLICT (content): Merge conflict in addons/project_purchase/tests/test_project_profitability.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 22, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611201673, 'issue_id': 2806767397, 'author': 'kawkb', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 23, 11, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:22:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194837.png)](https://mergebot.odoo.com/odoo/odoo/pull/194837)

fw-bot (Issue Creator) on (2025-01-23 12:22:16 UTC): @kawkb @xavierbol cherrypicking of pull request odoo/odoo#194300 failed.

stdout:
```
Auto-merging addons/project_purchase/models/project_project.py
Auto-merging addons/project_purchase/tests/test_project_profitability.py
CONFLICT (content): Merge conflict in addons/project_purchase/tests/test_project_profitability.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kawkb on (2025-01-23 23:11:30 UTC): @robodoo r+

"
2806766678,pull_request,closed,,[FW][FIX] loyalty: fix expiration date condition,"Steps:
- Install sale app.
- Enable Loyalty settings.
- Try to create a card on a loyalty.

Issue:
- Giving validation error.

Casue:
- In [PR] forgot to check expiration_date set or not before raise an error.

Fix:
- Added condition to check if expiration_date set or not on card before raising an error.

[PR]: https://github.com/odoo/odoo/pull/171453

opw-4492179
opw-4490587
opw-4504188
opw-4495530

Forward-Port-Of: odoo/odoo#194785",fw-bot,2025-01-23 12:21:55+00:00,[],2025-02-06 17:09:19+00:00,2025-01-23 17:09:13+00:00,https://github.com/odoo/odoo/pull/194836,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609672836, 'issue_id': 2806766678, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194836.png)](https://mergebot.odoo.com/odoo/odoo/pull/194836)', 'created_at': datetime.datetime(2025, 1, 23, 12, 21, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609672855, 'issue_id': 2806766678, 'author': 'fw-bot', 'body': '@kcv-odoo @Demesmaeker cherrypicking of pull request odoo/odoo#194785 failed.\n\nstdout:\n```\nAuto-merging addons/loyalty/models/loyalty_card.py\nAuto-merging addons/pos_loyalty/models/pos_order.py\nCONFLICT (modify/delete): addons/pos_loyalty/static/src/js/PaymentScreen.js deleted in c965959e912c70ccd048482d9e24e661e0de8877 and modified in ce252eb9e57fa9bcbea8c6b18565b3e10cb7069a.  Version ce252eb9e57fa9bcbea8c6b18565b3e10cb7069a of addons/pos_loyalty/static/src/js/PaymentScreen.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 12, 21, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609828777, 'issue_id': 2806766678, 'author': 'kcv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 36, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:21:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194836.png)](https://mergebot.odoo.com/odoo/odoo/pull/194836)

fw-bot (Issue Creator) on (2025-01-23 12:21:57 UTC): @kcv-odoo @Demesmaeker cherrypicking of pull request odoo/odoo#194785 failed.

stdout:
```
Auto-merging addons/loyalty/models/loyalty_card.py
Auto-merging addons/pos_loyalty/models/pos_order.py
CONFLICT (modify/delete): addons/pos_loyalty/static/src/js/PaymentScreen.js deleted in c965959e912c70ccd048482d9e24e661e0de8877 and modified in ce252eb9e57fa9bcbea8c6b18565b3e10cb7069a.  Version ce252eb9e57fa9bcbea8c6b18565b3e10cb7069a of addons/pos_loyalty/static/src/js/PaymentScreen.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kcv-odoo on (2025-01-23 13:36:01 UTC): @robodoo r+

"
2806744818,pull_request,open,,[FIX] website_sale: add disclaimer for combo product VAT included,"**Issue:**

When the website is configured to display prices VAT included, combo products incorrectly show their prices VAT excluded.

**Steps to Reproduce:**

 - in website setting check tax included of `Display Product Prices`
 - Sales > Products > Products
 - Create a new product of type ""Combo"" and set a price
 - click on go to  website

The price displayed on the website is VAT excluded, even though VAT inclusion is configured.

To address this issue, a disclaimer has been added to inform users that while taxes are not displayed for combo products, they will be properly calculated during checkout.

opw-4454112
",st-yes,2025-01-23 12:11:25+00:00,[],2025-02-05 17:05:17+00:00,,https://github.com/odoo/odoo/pull/194835,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609652525, 'issue_id': 2806744818, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194835.png)](https://mergebot.odoo.com/odoo/odoo/pull/194835)', 'created_at': datetime.datetime(2025, 1, 23, 12, 11, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615507890, 'issue_id': 2806744818, 'author': 'ltinel', 'body': ""> @ltinel Any thoughts on what to do when wanting to display prices tax-included for combo products? Specifically in the case that a combo choice contains products with different tax values?\r\n\r\n@lvsz IMO, it's impossible to show the tax-included combo price (if the combo isn't configured yet). As you mentioned, the combo items can have different taxes, so you can only compute the taxes after configuring the combo.\r\n\r\nMaybe we should show some sort of disclaimer for combo products if the website is configured to show the tax-included price?\r\n\r\nOn the other hand, I guess that all combo items in the same combo choice will often have the same taxes. In that case, we can compute the tax-included price before configuring the combo. We could also use a heuristic to estimate the taxes (e.g. by taking the taxes of the first combo item of each combo choice). This might not be very accurate though, and I don't know if there are laws around displaying inaccurate prices :sweat_smile: \r\n\r\nEither way, I believe the proposed fix will, unfortunately, not yield correct results."", 'created_at': datetime.datetime(2025, 1, 27, 11, 30, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615791097, 'issue_id': 2806744818, 'author': 'st-yes', 'body': '@lvsz  I went with the disclaimer approach as suggested. could you please approve its application? or let me know if you think of a better solution. Once approved, I will proceed to add it to the .pot and .po files for translation.', 'created_at': datetime.datetime(2025, 1, 27, 13, 39, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2622075744, 'issue_id': 2806744818, 'author': 'lvsz', 'body': 'Also, can you mention the approach taken to tackle the issue (displaying a tax disclaimer on combo products) to the commit and PR messages, as well as update the titles?', 'created_at': datetime.datetime(2025, 1, 29, 16, 9, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:11:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194835.png)](https://mergebot.odoo.com/odoo/odoo/pull/194835)

ltinel on (2025-01-27 11:30:27 UTC): @lvsz IMO, it's impossible to show the tax-included combo price (if the combo isn't configured yet). As you mentioned, the combo items can have different taxes, so you can only compute the taxes after configuring the combo.

Maybe we should show some sort of disclaimer for combo products if the website is configured to show the tax-included price?

On the other hand, I guess that all combo items in the same combo choice will often have the same taxes. In that case, we can compute the tax-included price before configuring the combo. We could also use a heuristic to estimate the taxes (e.g. by taking the taxes of the first combo item of each combo choice). This might not be very accurate though, and I don't know if there are laws around displaying inaccurate prices :sweat_smile: 

Either way, I believe the proposed fix will, unfortunately, not yield correct results.

st-yes (Issue Creator) on (2025-01-27 13:39:44 UTC): @lvsz  I went with the disclaimer approach as suggested. could you please approve its application? or let me know if you think of a better solution. Once approved, I will proceed to add it to the .pot and .po files for translation.

lvsz on (2025-01-29 16:09:49 UTC): Also, can you mention the approach taken to tackle the issue (displaying a tax disclaimer on combo products) to the commit and PR messages, as well as update the titles?

"
2806744681,pull_request,open,,[IMP] im_livechat: Polish the live chat expertise config menu,"**Current behavior before PR:**

Prior to this PR, the `Live Chat > Configuration > Expertise` lacked features like filtering by current user's expertise, grouping by operators, and displaying operators' avatars in kanban and form views. The menu name was also unclear.

**Desired behavior after PR is merged:**

Now, 'operators' field uses the avatar widget in form and list views. a 'My Expertise' filter and group by 'operators' are added. A kanban view displays expertise names with operators' avatars, and the menu is renamed to 'Operator Expertise'.

task-4461597

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jayp-odoo,2025-01-23 12:11:21+00:00,[],2025-01-29 07:05:36+00:00,,https://github.com/odoo/odoo/pull/194834,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609652387, 'issue_id': 2806744681, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194834.png)](https://mergebot.odoo.com/odoo/odoo/pull/194834)', 'created_at': datetime.datetime(2025, 1, 23, 12, 11, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 12:11:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194834.png)](https://mergebot.odoo.com/odoo/odoo/pull/194834)

"
2806710690,pull_request,open,,[FIX] spreadsheet: drop sorting if field is not a measure,"Master companion for a fix in 18.0

Steps: Go to a pivot view with:

- either a predefined sort on the action/filter.
- sort by a measure then uncheck the measure.

We can't keep the sorting because the sorting is done client-side. If the field is not part of the measures, we don't have the data to sort...

In 18.0, the sorted column is ignored. Here in master, we drop it from the core definition

Task: 4467262


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",LucasLefevre,2025-01-23 11:54:56+00:00,[],2025-01-23 12:00:10+00:00,,https://github.com/odoo/odoo/pull/194833,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609619430, 'issue_id': 2806710690, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194833.png)](https://mergebot.odoo.com/odoo/odoo/pull/194833)', 'created_at': datetime.datetime(2025, 1, 23, 11, 54, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:54:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194833.png)](https://mergebot.odoo.com/odoo/odoo/pull/194833)

"
2806691710,pull_request,closed,,[FIX] web: remove useless test steps,"Commit https://github.com/odoo/odoo/commit/98218629f88b619ca9c8013ecbffaa221d82531c introduced a test with two non-related steps (these steps were certainly copy-pasted from another test, in spreadsheet).
This commit removes these steps.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pro-odoo,2025-01-23 11:45:19+00:00,[],2025-01-31 13:03:07+00:00,2025-01-31 13:03:07+00:00,https://github.com/odoo/odoo/pull/194832,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609601069, 'issue_id': 2806691710, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194832.png)](https://mergebot.odoo.com/odoo/odoo/pull/194832)', 'created_at': datetime.datetime(2025, 1, 23, 11, 45, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626405563, 'issue_id': 2806691710, 'author': 'hokolomopo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 31, 6, 27, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626567842, 'issue_id': 2806691710, 'author': 'robodoo', 'body': '@pro-odoo @hokolomopo staging failed: ci/runbot (view more at https://runbot.odoo.com/runbot/build/74263219)', 'created_at': datetime.datetime(2025, 1, 31, 8, 10, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626576481, 'issue_id': 2806691710, 'author': 'pro-odoo', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 31, 8, 12, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:45:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194832.png)](https://mergebot.odoo.com/odoo/odoo/pull/194832)

hokolomopo on (2025-01-31 06:27:44 UTC): @robodoo r+

robodoo on (2025-01-31 08:10:12 UTC): @pro-odoo @hokolomopo staging failed: ci/runbot (view more at https://runbot.odoo.com/runbot/build/74263219)

pro-odoo (Issue Creator) on (2025-01-31 08:12:33 UTC): robodoo retry

"
2806690140,pull_request,closed,,[FW][FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194789",fw-bot,2025-01-23 11:44:32+00:00,[],2025-02-07 08:13:24+00:00,2025-01-24 07:59:39+00:00,https://github.com/odoo/odoo/pull/194831,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609599513, 'issue_id': 2806690140, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194831.png)](https://mergebot.odoo.com/odoo/odoo/pull/194831)', 'created_at': datetime.datetime(2025, 1, 23, 11, 44, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609599534, 'issue_id': 2806690140, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 44, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611666044, 'issue_id': 2806690140, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 58, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:44:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194831.png)](https://mergebot.odoo.com/odoo/odoo/pull/194831)

fw-bot (Issue Creator) on (2025-01-23 11:44:34 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-24 05:58:21 UTC): @robodoo r+

"
2806688137,pull_request,closed,,[FW][FIX] stock_account: fix standard_price on _svl_replenish_stock,"## How to reproduce:
- Create product P, tracked by lot, cost_method = 'standard', standard_price = 1
- Create quant with lot L1, 10 units on hand
- Set L1 standard_price = 2
- Set lot_valuated to True => lot value_svl is $10 for 10 units (product.standard_price * quantity)
- Set L1 quantity to 0 => lot value_svl is $-10 for 0 units

## Issue
When the svl is replenished for the lot, the product.standard_price is used. However, the lot.standard_price is not updated; hence, when the stock is emptied, and the lot.standard_price is used, a discrepancy is created.

## Solution
When the svl is replenished, we u se the product.standard_price and update the lot.standard_price

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193770",fw-bot,2025-01-23 11:43:31+00:00,[],2025-02-07 01:12:35+00:00,2025-01-24 01:10:37+00:00,https://github.com/odoo/odoo/pull/194830,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609597656, 'issue_id': 2806688137, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194830.png)](https://mergebot.odoo.com/odoo/odoo/pull/194830)', 'created_at': datetime.datetime(2025, 1, 23, 11, 43, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609597670, 'issue_id': 2806688137, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 43, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:43:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194830.png)](https://mergebot.odoo.com/odoo/odoo/pull/194830)

fw-bot (Issue Creator) on (2025-01-23 11:43:33 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806687181,pull_request,closed,,[FW][FIX] loyalty: parse reward_product_domain as JSON,"Before this commit, `domain['reward_product_domain']` was being evaluated with `ast.literal_eval` while containing JSON-style booleans (`true/false`). That caused a `ValueError` because `true/false` are invalid in Python syntax.

With this commit, we now use `json.loads` to parse the domain string, which correctly handles JSON booleans without error.

opw-4458627

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193425",fw-bot,2025-01-23 11:43:03+00:00,[],2025-02-07 14:12:10+00:00,2025-01-24 14:05:54+00:00,https://github.com/odoo/odoo/pull/194829,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609596788, 'issue_id': 2806687181, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194829.png)](https://mergebot.odoo.com/odoo/odoo/pull/194829)', 'created_at': datetime.datetime(2025, 1, 23, 11, 43, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609596806, 'issue_id': 2806687181, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 43, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:43:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194829.png)](https://mergebot.odoo.com/odoo/odoo/pull/194829)

fw-bot (Issue Creator) on (2025-01-23 11:43:05 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806686619,pull_request,closed,,"[FW][FIX] pos_hr, point_of_sale: fix error when re-entering payment screen","Before this commit:
- Enable the ""Log in with employees""
- Log in as any employee, add a product, and go to the payment screen
- Lock the session
- Enter the session again

This sequence of actions would result in an error in the console.

opw-4435559

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193238",fw-bot,2025-01-23 11:42:45+00:00,[],2025-01-29 01:08:16+00:00,2025-01-29 01:08:16+00:00,https://github.com/odoo/odoo/pull/194828,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609596236, 'issue_id': 2806686619, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194828.png)](https://mergebot.odoo.com/odoo/odoo/pull/194828)', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609596258, 'issue_id': 2806686619, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#193238 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js\nAuto-merging addons/pos_hr/static/src/app/utils/select_cashier_mixin.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723155, 'issue_id': 2806686619, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#193238 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617541832, 'issue_id': 2806686619, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#193238 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619205913, 'issue_id': 2806686619, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 14, 43, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:42:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194828.png)](https://mergebot.odoo.com/odoo/odoo/pull/194828)

fw-bot (Issue Creator) on (2025-01-23 11:42:47 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#193238 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js
Auto-merging addons/pos_hr/static/src/app/utils/select_cashier_mixin.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:14 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#193238 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:34 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#193238 is awaiting action (not merged or closed).

pedrambiria on (2025-01-28 14:43:49 UTC): robodoo r+

"
2806685999,pull_request,closed,,[FW][FIX] point_of_sale: delete silently in localDeleteCascade,"Before this commit, cancelling an order would result in keeping the removed orderlines in the unlink command, causing issues in different cases when trying to sync a new order.

opw-4403100

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192118",fw-bot,2025-01-23 11:42:27+00:00,[],2025-01-28 19:09:41+00:00,2025-01-28 19:09:41+00:00,https://github.com/odoo/odoo/pull/194827,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609595613, 'issue_id': 2806685999, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194827.png)](https://mergebot.odoo.com/odoo/odoo/pull/194827)', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609595626, 'issue_id': 2806685999, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#192118 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/services/data_service.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js\nAuto-merging addons/point_of_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js\nAuto-merging addons/point_of_sale/static/src/app/utils/debug/debug_widget.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723342, 'issue_id': 2806685999, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#192118 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542311, 'issue_id': 2806685999, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#192118 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618884098, 'issue_id': 2806685999, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 12, 36, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:42:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194827.png)](https://mergebot.odoo.com/odoo/odoo/pull/194827)

fw-bot (Issue Creator) on (2025-01-23 11:42:29 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#192118 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/services/data_service.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js
Auto-merging addons/point_of_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js
Auto-merging addons/point_of_sale/static/src/app/utils/debug/debug_widget.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:25 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#192118 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:41 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#192118 is awaiting action (not merged or closed).

pedrambiria on (2025-01-28 12:36:01 UTC): robodoo r+

"
2806685410,pull_request,closed,,[FW][FIX] account_peppol: remove peppol registration migration button,"Peppol migration creates more issues than it solves. A lot of users issue migration requests to move to another SMP but later discover that the SMP they wanted to migrate to does not support migration keys. This creates a state that we need to handle manually. Most SMP do not support migrating away and force users to deregister and reregister again on another one.

This commit adds a fix in stable for that issue by removing the button from the res_config_settings_buttons and adding a deprecated warning when the user tries to call the `button_migrate_peppol_registration` method.

task-4394408

Forward-Port-Of: odoo/odoo#194524
Forward-Port-Of: odoo/odoo#193794",fw-bot,2025-01-23 11:42:09+00:00,[],2025-02-07 18:12:26+00:00,2025-01-24 18:11:10+00:00,https://github.com/odoo/odoo/pull/194826,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609595013, 'issue_id': 2806685410, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194826.png)](https://mergebot.odoo.com/odoo/odoo/pull/194826)', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609595044, 'issue_id': 2806685410, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.\n\nstdout:\n```\nAuto-merging addons/account_peppol/i18n/account_peppol.pot\nCONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot\nAuto-merging addons/account_peppol/models/res_config_settings.py\nCONFLICT (modify/delete): addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js deleted in 8bb4a5dce970407f05e719f2b3007fb86ad5d703 and modified in 15fa3246e4314944f597a051d33c7a2bcc46c1ab.  Version 15fa3246e4314944f597a051d33c7a2bcc46c1ab of addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js left in tree.\nCONFLICT (modify/delete): addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml deleted in 8bb4a5dce970407f05e719f2b3007fb86ad5d703 and modified in 15fa3246e4314944f597a051d33c7a2bcc46c1ab.  Version 15fa3246e4314944f597a051d33c7a2bcc46c1ab of addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml left in tree.\nAuto-merging addons/account_peppol/tests/test_peppol_participant.py\nCONFLICT (content): Merge conflict in addons/account_peppol/tests/test_peppol_participant.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385313, 'issue_id': 2806685410, 'author': 'fw-bot', 'body': '@antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612688859, 'issue_id': 2806685410, 'author': 'clbr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 39, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:42:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194826.png)](https://mergebot.odoo.com/odoo/odoo/pull/194826)

fw-bot (Issue Creator) on (2025-01-23 11:42:10 UTC): @antonrom1 @clbr-odoo cherrypicking of pull request odoo/odoo#193794 failed.

stdout:
```
Auto-merging addons/account_peppol/i18n/account_peppol.pot
CONFLICT (content): Merge conflict in addons/account_peppol/i18n/account_peppol.pot
Auto-merging addons/account_peppol/models/res_config_settings.py
CONFLICT (modify/delete): addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js deleted in 8bb4a5dce970407f05e719f2b3007fb86ad5d703 and modified in 15fa3246e4314944f597a051d33c7a2bcc46c1ab.  Version 15fa3246e4314944f597a051d33c7a2bcc46c1ab of addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.js left in tree.
CONFLICT (modify/delete): addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml deleted in 8bb4a5dce970407f05e719f2b3007fb86ad5d703 and modified in 15fa3246e4314944f597a051d33c7a2bcc46c1ab.  Version 15fa3246e4314944f597a051d33c7a2bcc46c1ab of addons/account_peppol/static/src/components/res_config_settings_buttons/res_config_settings_buttons.xml left in tree.
Auto-merging addons/account_peppol/tests/test_peppol_participant.py
CONFLICT (content): Merge conflict in addons/account_peppol/tests/test_peppol_participant.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 02:01:00 UTC): @antonrom1 @clbr-odoo this forward port of odoo/odoo#193794 is awaiting action (not merged or closed).

clbr-odoo on (2025-01-24 14:39:26 UTC): @robodoo r+

"
2806684832,pull_request,closed,,[FW][FIX] l10n_latam_check: existing third party check outgoing payment method.,"**Description of the issue/feature this PR addresses**: 
1) It is necessay not to set ""Existing Third Party Checks"" outgoing payment method in all argentinean cash journals. It is only needed to be set on ""Third Party Checks"" and ""Rejected Third Party Checks"" Argentinean journals that are created when the module is installed or a new argentinean company is created. 
2) Also when a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back. This bug was introduced on this commit https://github.com/odoo/odoo/pull/188451/commits/0618fff9f9bb4716d22dc2ce8950cada824b90f4.

**Current behavior before PR**:
1) ""Existing Third Party Checks"" outgoing payment method is set in all argentinean cash journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back.

**Desired behavior after PR is merged**:
1) ""Existing Third Party Checks"" outgoing payment method is set only in ""Third Party Checks"" and ""Rejected Third Party Checks"" argentinean journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is able to add it back.

_Ticket Adhoc side_: 83443
_Task Latam side_: 1309



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194713",fw-bot,2025-01-23 11:41:50+00:00,[],2025-02-07 04:30:55+00:00,2025-01-24 03:55:27+00:00,https://github.com/odoo/odoo/pull/194825,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609594376, 'issue_id': 2806684832, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194825.png)](https://mergebot.odoo.com/odoo/odoo/pull/194825)', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609594399, 'issue_id': 2806684832, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:41:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194825.png)](https://mergebot.odoo.com/odoo/odoo/pull/194825)

fw-bot (Issue Creator) on (2025-01-23 11:41:52 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806683972,pull_request,closed,,[FW][FIX] hr_attendance: negative overtime for flexible employee,"Steps to reproduce:
1. Set a flexible working schedule with 40h / week and 8h / day for an employee
2. Record an attendance for the employee
3. Go to reporting, the expected hours is the same as the worked hours

Expected behavior:
The expected hours should be what was set in the schedule, which is 8 hours

Explanation:
The calculation of expected hours is based on the difference between overtime hours and worked hours. This is done to ensure the overtimes are always computed correctly. However if the overtime duration is negative, it is not taken into account in `_update_overtime`. This commit allows negative amounts for overtime hours.

opw-4388707


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193523",fw-bot,2025-01-23 11:41:23+00:00,[],2025-02-07 01:12:36+00:00,2025-01-24 01:10:44+00:00,https://github.com/odoo/odoo/pull/194824,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609593699, 'issue_id': 2806683972, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194824.png)](https://mergebot.odoo.com/odoo/odoo/pull/194824)', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609593721, 'issue_id': 2806683972, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:41:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194824.png)](https://mergebot.odoo.com/odoo/odoo/pull/194824)

fw-bot (Issue Creator) on (2025-01-23 11:41:30 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806683418,pull_request,closed,,[FW][FIX] pos_self_order_stripe: fix Stripe payments,"Currently in v18 Stripe payments are broken and don't work anymore. This PR adjusts the code so that Stripe works again in self order mode. It fixes the error ""An error has occured"" seen when sending a payment to a Stripe terminal + it also fixes the response sent to PoS to confirm Stripe payments.

opw-4283413
opw-4358017

Forward-Port-Of: odoo/odoo#194691",fw-bot,2025-01-23 11:41:06+00:00,[],2025-02-07 01:12:37+00:00,2025-01-24 01:10:48+00:00,https://github.com/odoo/odoo/pull/194823,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609593654, 'issue_id': 2806683418, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194823.png)](https://mergebot.odoo.com/odoo/odoo/pull/194823)', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609593673, 'issue_id': 2806683418, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 41, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:41:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194823.png)](https://mergebot.odoo.com/odoo/odoo/pull/194823)

fw-bot (Issue Creator) on (2025-01-23 11:41:28 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806682779,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194742
Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-23 11:40:45+00:00,[],2025-02-06 18:03:41+00:00,2025-01-23 18:00:48+00:00,https://github.com/odoo/odoo/pull/194822,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609592402, 'issue_id': 2806682779, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194822.png)](https://mergebot.odoo.com/odoo/odoo/pull/194822)', 'created_at': datetime.datetime(2025, 1, 23, 11, 40, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609592452, 'issue_id': 2806682779, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 40, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609603451, 'issue_id': 2806682779, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 11, 46, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609614881, 'issue_id': 2806682779, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 11, 52, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610286662, 'issue_id': 2806682779, 'author': 'Williambraecky', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 16, 19, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:40:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194822.png)](https://mergebot.odoo.com/odoo/odoo/pull/194822)

fw-bot (Issue Creator) on (2025-01-23 11:40:50 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 11:46:35 UTC): @Williambraecky @Julien00859 ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 11:52:30 UTC): @Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.

Williambraecky on (2025-01-23 16:19:42 UTC): robodoo r+

"
2806679328,pull_request,closed,,[FW][FIX] crm: add translation for ringover settings,"[1] adds a settings entry in CRM for ringover

As this was done in stable the .pot file should have been updated

[1] f2a384dd3b8ac2d358a9d8ea3fcec577b3e86859

Forward-Port-Of: odoo/odoo#194786",fw-bot,2025-01-23 11:39:27+00:00,[],2025-02-06 16:48:19+00:00,2025-01-23 16:41:27+00:00,https://github.com/odoo/odoo/pull/194821,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609589151, 'issue_id': 2806679328, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194821.png)](https://mergebot.odoo.com/odoo/odoo/pull/194821)', 'created_at': datetime.datetime(2025, 1, 23, 11, 39, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609589179, 'issue_id': 2806679328, 'author': 'fw-bot', 'body': '@reth-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194810\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 39, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609596315, 'issue_id': 2806679328, 'author': 'reth-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 11, 42, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:39:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194821.png)](https://mergebot.odoo.com/odoo/odoo/pull/194821)

fw-bot (Issue Creator) on (2025-01-23 11:39:29 UTC): @reth-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194810

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

reth-odoo on (2025-01-23 11:42:49 UTC): @robodoo r+

"
2806666806,pull_request,closed,,[FW][FIX] point_of_sale: ensure sufficient products are shown in search,"Before this commit, the search functionality might not retrieve the desired number of products due to the loop condition. This fix ensures that the search retrieves up to the specified limit of products if there are enough available.

opw-4426797

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191501",fw-bot,2025-01-23 11:33:38+00:00,[],2025-01-28 09:55:02+00:00,2025-01-28 09:55:02+00:00,https://github.com/odoo/odoo/pull/194820,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609577331, 'issue_id': 2806666806, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194820.png)](https://mergebot.odoo.com/odoo/odoo/pull/194820)', 'created_at': datetime.datetime(2025, 1, 23, 11, 33, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609577354, 'issue_id': 2806666806, 'author': 'fw-bot', 'body': '@pedrambiria @caburj cherrypicking of pull request odoo/odoo#191501 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/store/db.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/db.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 33, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723516, 'issue_id': 2806666806, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#191501 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542978, 'issue_id': 2806666806, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#191501 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618477266, 'issue_id': 2806666806, 'author': 'pedrambiria', 'body': ""It's not an issue in this version"", 'created_at': datetime.datetime(2025, 1, 28, 9, 55, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:33:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194820.png)](https://mergebot.odoo.com/odoo/odoo/pull/194820)

fw-bot (Issue Creator) on (2025-01-23 11:33:39 UTC): @pedrambiria @caburj cherrypicking of pull request odoo/odoo#191501 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/store/db.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/db.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:02:35 UTC): @pedrambiria @caburj this forward port of odoo/odoo#191501 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:52 UTC): @pedrambiria @caburj this forward port of odoo/odoo#191501 is awaiting action (not merged or closed).

pedrambiria on (2025-01-28 09:55:02 UTC): It's not an issue in this version

"
2806666230,pull_request,closed,,[FW][FIX] point_of_sale: correctly load products when searching,"Before this commit, the domain containing the limited category information was not used correctly, causing products from other categories to be loaded.

opw-4451297

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192653",fw-bot,2025-01-23 11:33:20+00:00,[],2025-01-24 11:23:41+00:00,2025-01-24 11:23:40+00:00,https://github.com/odoo/odoo/pull/194819,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609576742, 'issue_id': 2806666230, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194819.png)](https://mergebot.odoo.com/odoo/odoo/pull/194819)', 'created_at': datetime.datetime(2025, 1, 23, 11, 33, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609576767, 'issue_id': 2806666230, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#192653 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/point_of_sale/static/src/app/screens/product_screen/product_list/product_list.js deleted in 85b335d9c3664e027ba067f6a16106096273918c and modified in 6ffdfade26f0cb6c475421f7514c690697aa7335.  Version 6ffdfade26f0cb6c475421f7514c690697aa7335 of addons/point_of_sale/static/src/app/screens/product_screen/product_list/product_list.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 33, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612289972, 'issue_id': 2806666230, 'author': 'pedrambiria', 'body': ""It's not an issue in this version"", 'created_at': datetime.datetime(2025, 1, 24, 11, 23, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:33:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194819.png)](https://mergebot.odoo.com/odoo/odoo/pull/194819)

fw-bot (Issue Creator) on (2025-01-23 11:33:22 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#192653 failed.

stdout:
```
CONFLICT (modify/delete): addons/point_of_sale/static/src/app/screens/product_screen/product_list/product_list.js deleted in 85b335d9c3664e027ba067f6a16106096273918c and modified in 6ffdfade26f0cb6c475421f7514c690697aa7335.  Version 6ffdfade26f0cb6c475421f7514c690697aa7335 of addons/point_of_sale/static/src/app/screens/product_screen/product_list/product_list.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-24 11:23:40 UTC): It's not an issue in this version

"
2806665333,pull_request,closed,,[FW][FIX] base_vat: add a method to validate Moroccan VAT numbers,"### Steps to reproduce:
- Create a new Contact
- Set the country to Morocco
- Add ""52258521"" as a VAT number
- Try to validate -> Error

### Cause:
Only occurs after saas-17.4 because it is related to the library `stdnum`. The version of this library change when the Python version is >3.11.  As the SaaS version use Python3.12 since saas-17.4 and Python3.10 before, the bug only appears in saas-17.4, but this change targets 17.0 because 17.0 supports Python > 3.10.

The cause of the bug is the new version of the library which implements a verification method that corresponds to Moroccan ICE numbers and not VAT numbers.

### Solution:
Create the method to check the Moroccan VAT numbers. The format is just a number with 8 digits.

opw-4447478

Forward-Port-Of: odoo/odoo#194592",fw-bot,2025-01-23 11:32:51+00:00,[],2025-01-29 13:37:32+00:00,2025-01-29 13:37:32+00:00,https://github.com/odoo/odoo/pull/194818,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609575796, 'issue_id': 2806665333, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194818.png)](https://mergebot.odoo.com/odoo/odoo/pull/194818)', 'created_at': datetime.datetime(2025, 1, 23, 11, 32, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609575821, 'issue_id': 2806665333, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 32, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612092612, 'issue_id': 2806665333, 'author': 'mathcoutant', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 24, 9, 45, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615983544, 'issue_id': 2806665333, 'author': 'fw-bot', 'body': '@mathcoutant @FlorianGilbert this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 27, 14, 55, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:32:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194818.png)](https://mergebot.odoo.com/odoo/odoo/pull/194818)

fw-bot (Issue Creator) on (2025-01-23 11:32:53 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mathcoutant on (2025-01-24 09:45:58 UTC): @robodoo r-

fw-bot (Issue Creator) on (2025-01-27 14:55:54 UTC): @mathcoutant @FlorianGilbert this PR was modified / updated and has become a normal PR. It must be merged directly.

"
2806664751,pull_request,closed,,[FW][FIX] hr_attendance: kiosk images out of box,"Issue:
When using the kiosk in versions 17.0 & 17.2, 2 visual issues arise:
- when trying to identify manually, the ""Go back"" arrow is cropped out of its' container
- when identified, the user's profile picture is cropped out of the greeting container

Steps to reproduce:
- Install the attendance module
- Go to Kiosk Mode
- Identify Manually

Cause:
For the ""Go back arrow"", its' position in the container is set to the top left corner (absolute 0;0). The problem is that these coordinates are set for the center of the button and not its' top-left end. For the profile pictures, there is some V16 styling still present that wrongly sets the image's absolute position.

Notes:
I also changed the back button on the PIN screen since it had the same problem. It isn't pretty but everything is visible now...
![image](https://github.com/user-attachments/assets/6eee3958-e12c-44a8-bd8c-42d2f36119f6)


Ticket:
opw-4366047

Forward-Port-Of: odoo/odoo#191234",fw-bot,2025-01-23 11:32:34+00:00,[],2025-02-06 15:33:40+00:00,2025-01-23 15:22:51+00:00,https://github.com/odoo/odoo/pull/194817,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609575479, 'issue_id': 2806664751, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194817.png)](https://mergebot.odoo.com/odoo/odoo/pull/194817)', 'created_at': datetime.datetime(2025, 1, 23, 11, 32, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609575496, 'issue_id': 2806664751, 'author': 'fw-bot', 'body': '@vandroogenbd @Bertrand2 this PR targets saas-17.2 and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 32, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609873624, 'issue_id': 2806664751, 'author': 'vandroogenbd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 56, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:32:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194817.png)](https://mergebot.odoo.com/odoo/odoo/pull/194817)

fw-bot (Issue Creator) on (2025-01-23 11:32:44 UTC): @vandroogenbd @Bertrand2 this PR targets saas-17.2 and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vandroogenbd on (2025-01-23 13:56:10 UTC): @robodoo r+

"
2806632748,pull_request,closed,,[FW][FIX] core: inherit translations better when upgrade,"Before:
The typofix feature treats terms in the old and new values with similar text content as the same term, migrating the translations of the old term to the new term.

For example

The old value has the mapping:
'Draft': 'Brouillon'

The new value contains the term:
'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'

Since the old term and the new term share the same text content, 'Draft', after `write`, the new term reuses the old translation of 'Draft'. However, the translation 'Brouillon' is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the en_US value and is responsible for verifying translations afterward. However, it is problematic during upgrades because users cannot easily identify which records have changed and need to be rechecked.

After:
The translation inheritance behavior can be described as below Translations can be inherited after `write` from old terms to new terms which share the very close text contents
1. when `write` in production mode, text contents for translation terms are more important than the HTML/XML structures of them, and the old term translations should be remained as much as possible. Because
    * the writing user is responsible to recheck all translations after `write`.
    * it is easier for the writing user to copy technical HTML/XML structures than translate text contents for a language they may not know.
    * the feature can also be used as typofix when the only small diff is the text content
2. when `write` in upgrade time, the HTML/XML structure is more important than the text content, and the new term structure should be remained as much as possible. Because
    * HTML/XML structures might be changed a lot after upgrade, which may contain behavior relevant diff (e.g. `invisible`), even if text contents are not changed.
    * users have no idea which records' values are changed during upgrade and are hard to recheck their translations.
    * new terms are highly likely to be correctly translated in the latest po files which will be imported during upgrade.
    * the typofix feature can still be remained when the only small diff is the text content

Based on the above feature analysis, we use the below new strategy
1. translations can be inherited only if the old source term and the new source term share the same HTML/XML structure
2. translations can be inherited only if the old translation term and the new source term share the same HTML/XML structure
3. when translations are inherited, MODIFIER_ATTRS will be synchronized with the new source term, other attributes will be copied from the source term if available.

Forward-Port-Of: #194181

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",HydrionBurst,2025-01-23 11:18:31+00:00,[],2025-02-07 12:38:44+00:00,2025-01-24 12:28:15+00:00,https://github.com/odoo/odoo/pull/194816,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609544197, 'issue_id': 2806632748, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194816.png)](https://mergebot.odoo.com/odoo/odoo/pull/194816)', 'created_at': datetime.datetime(2025, 1, 23, 11, 18, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:18:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194816.png)](https://mergebot.odoo.com/odoo/odoo/pull/194816)

"
2806632471,pull_request,closed,,[FW][FIX] pos_loyalty: prevent access error in multi-company gift card use,"Before this commit, if a gift card was created in another company and the gift card program was not assigned to any company, using the gift card in another company resulted in an error.

opw-4422730

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192246",fw-bot,2025-01-23 11:18:24+00:00,[],2025-02-07 21:40:54+00:00,2025-01-24 21:34:48+00:00,https://github.com/odoo/odoo/pull/194815,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609543924, 'issue_id': 2806632471, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194815.png)](https://mergebot.odoo.com/odoo/odoo/pull/194815)', 'created_at': datetime.datetime(2025, 1, 23, 11, 18, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609543939, 'issue_id': 2806632471, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 18, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:18:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194815.png)](https://mergebot.odoo.com/odoo/odoo/pull/194815)

fw-bot (Issue Creator) on (2025-01-23 11:18:26 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806617188,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194747
Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-23 11:11:16+00:00,[],2025-02-06 16:31:03+00:00,2025-01-23 16:08:09+00:00,https://github.com/odoo/odoo/pull/194814,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609529606, 'issue_id': 2806617188, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194814.png)](https://mergebot.odoo.com/odoo/odoo/pull/194814)', 'created_at': datetime.datetime(2025, 1, 23, 11, 11, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609529640, 'issue_id': 2806617188, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 11, 11, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:11:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194814.png)](https://mergebot.odoo.com/odoo/odoo/pull/194814)

fw-bot (Issue Creator) on (2025-01-23 11:11:19 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806599062,pull_request,closed,,[FIX] l10n_jo_edi: Fixed problems in exported XML precision,"There were problems reported on some invoices caused by rounding errors.
This PR solves these problems, and adds more test cases to the precision unit tests.

task-4464702
task-4509607




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",hsal-odoo,2025-01-23 11:03:30+00:00,[],2025-01-29 16:43:32+00:00,2025-01-29 16:43:32+00:00,https://github.com/odoo/odoo/pull/194813,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609513893, 'issue_id': 2806599062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194813.png)](https://mergebot.odoo.com/odoo/odoo/pull/194813)', 'created_at': datetime.datetime(2025, 1, 23, 11, 3, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621580467, 'issue_id': 2806599062, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 13, 3, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 11:03:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194813.png)](https://mergebot.odoo.com/odoo/odoo/pull/194813)

jco-odoo on (2025-01-29 13:03:07 UTC): @robodoo r+

"
2806576981,pull_request,open,,[FIX] l10n_nz: change GST Only Imports tags,"Current set up under the tax concerned is ""BOX 11""which is incorrect as according to the IRD GST report, BOX 11 excludes the amount of imported goods. The tax in consideration is used when the NZ Customs bills the user only for the GST amount based on the purchase value of the goods. Therefore, the tax grids for this tax need to changed to ""BOX 13"".

task-392615
",proose,2025-01-23 10:53:23+00:00,[],2025-01-23 13:18:00+00:00,,https://github.com/odoo/odoo/pull/194812,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609493210, 'issue_id': 2806576981, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194812.png)](https://mergebot.odoo.com/odoo/odoo/pull/194812)', 'created_at': datetime.datetime(2025, 1, 23, 10, 53, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609494694, 'issue_id': 2806576981, 'author': 'proose', 'body': 'Backport of https://github.com/odoo/odoo/pull/169672', 'created_at': datetime.datetime(2025, 1, 23, 10, 54, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:53:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194812.png)](https://mergebot.odoo.com/odoo/odoo/pull/194812)

proose (Issue Creator) on (2025-01-23 10:54:07 UTC): Backport of https://github.com/odoo/odoo/pull/169672

"
2806507355,pull_request,closed,,[FIX] mrp: correct date of late filter,"Steps to reproduce:
----

- Go to manufacturing
- Planning by production
- Add late filter

Issue:
----
The late filter ""does not work"", the filter is based on the day. But the late order should be based on a much more precise datetime.

Fix:
---
Changed the filter from current_date to datetime.now to have more precision in the time, and so it filters more accurately.

opw-4493678

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jaeschwa,2025-01-23 10:23:15+00:00,[],2025-02-07 12:38:40+00:00,2025-01-24 12:25:21+00:00,https://github.com/odoo/odoo/pull/194811,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2609427075, 'issue_id': 2806507355, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194811.png)](https://mergebot.odoo.com/odoo/odoo/pull/194811)', 'created_at': datetime.datetime(2025, 1, 23, 10, 23, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611970588, 'issue_id': 2806507355, 'author': 'adwid', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 8, 41, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:23:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194811.png)](https://mergebot.odoo.com/odoo/odoo/pull/194811)

adwid on (2025-01-24 08:41:41 UTC): robodoo r+

"
2806492778,pull_request,closed,,[FW][FIX] crm: add translation for ringover settings,"[1] adds a settings entry in CRM for ringover

As this was done in stable the .pot file should have been updated

[1] f2a384dd3b8ac2d358a9d8ea3fcec577b3e86859

Forward-Port-Of: odoo/odoo#194786",fw-bot,2025-01-23 10:17:10+00:00,[],2025-02-06 19:37:22+00:00,2025-01-23 19:25:46+00:00,https://github.com/odoo/odoo/pull/194810,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609413338, 'issue_id': 2806492778, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194810.png)](https://mergebot.odoo.com/odoo/odoo/pull/194810)', 'created_at': datetime.datetime(2025, 1, 23, 10, 17, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609413354, 'issue_id': 2806492778, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 17, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:17:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194810.png)](https://mergebot.odoo.com/odoo/odoo/pull/194810)

fw-bot (Issue Creator) on (2025-01-23 10:17:13 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806491883,pull_request,closed,,[FW][FIX] mass_mailing_event: recompute mass mailing domain,"When creating a new mass mailing from an event, the default domain
retrieved when switching mailing type is missing the event id filter

Steps to reproduce (mass_mailing_sms required):
- Open an event with attendees
- Click 'Contact Attendees'
- Take note of the mailing domain
- Switch Mailing Type from Email to SMS

Issue: Domain is missing the event_id
This does not occur when opening the form view because the default
mailing domain is given via context

opw-4337256

Forward-Port-Of: odoo/odoo#190684
Forward-Port-Of: odoo/odoo#189317",fw-bot,2025-01-23 10:16:47+00:00,[],2025-02-07 15:10:12+00:00,2025-01-24 15:06:52+00:00,https://github.com/odoo/odoo/pull/194809,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609412448, 'issue_id': 2806491883, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194809.png)](https://mergebot.odoo.com/odoo/odoo/pull/194809)', 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609412476, 'issue_id': 2806491883, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609468486, 'issue_id': 2806491883, 'author': 'fw-bot', 'body': '@agr-odoo @abd-msyukyu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 10, 42, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612170626, 'issue_id': 2806491883, 'author': 'fw-bot', 'body': '@agr-odoo @abd-msyukyu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 10, 19, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612501784, 'issue_id': 2806491883, 'author': 'abd-msyukyu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 12, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:16:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194809.png)](https://mergebot.odoo.com/odoo/odoo/pull/194809)

fw-bot (Issue Creator) on (2025-01-23 10:16:49 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 10:42:18 UTC): @agr-odoo @abd-msyukyu-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 10:19:30 UTC): @agr-odoo @abd-msyukyu-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

abd-msyukyu-odoo on (2025-01-24 13:12:41 UTC): @robodoo r+

"
2806491239,pull_request,closed,,[FW][FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194789",fw-bot,2025-01-23 10:16:29+00:00,[],2025-02-07 07:44:59+00:00,2025-01-24 07:39:06+00:00,https://github.com/odoo/odoo/pull/194808,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609412066, 'issue_id': 2806491239, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194808.png)](https://mergebot.odoo.com/odoo/odoo/pull/194808)', 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609412094, 'issue_id': 2806491239, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611665510, 'issue_id': 2806491239, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 57, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:16:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194808.png)](https://mergebot.odoo.com/odoo/odoo/pull/194808)

fw-bot (Issue Creator) on (2025-01-23 10:16:39 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-24 05:57:50 UTC): @robodoo r+

"
2806486581,pull_request,closed,,[FIX] account: Show partner limit currency,"The credit limit in the partner form view was missing a currency symbol, leading to ambiguity about whether the limit was in the customer's currency or the company's currency.

Displayed the partner limit in the company currency to avoid confusion.

task-4507336


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",seifgneedy,2025-01-23 10:14:29+00:00,[],2025-01-27 16:30:52+00:00,2025-01-27 16:30:52+00:00,https://github.com/odoo/odoo/pull/194807,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609407429, 'issue_id': 2806486581, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194807.png)](https://mergebot.odoo.com/odoo/odoo/pull/194807)', 'created_at': datetime.datetime(2025, 1, 23, 10, 14, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615741374, 'issue_id': 2806486581, 'author': 'hupo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 13, 17, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:14:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194807.png)](https://mergebot.odoo.com/odoo/odoo/pull/194807)

hupo-odoo on (2025-01-27 13:17:56 UTC): @robodoo r+

"
2806463297,pull_request,closed,,[FW][FIX] point_of_sale: set default nb_print value for offline orders,"Currently, an exception is generated in the log when the users create a POS order as follows:
- Install ``pos_restaurant`` module.
- Open the register for the restaurant.
- Stay connected to Wi-Fi but disconnect from the internet (Inspect > Network > Go Offline). connection (Inspect > Network > Go offline)
- Make two or more orders in offline mode and use ``Print Full Receipt``.
- Reconnect to the internet, make one order, and ``Print Full Receipt``.
- Close the register (Traceback appears in the terminal).

``error: `invalid literal for int() with base 10: 'null'``

Before commit :
---
- ``nb_print`` is initialized in Python with fields.Integer(default=0)
- When syncing data between the server and the client, nb_print is being sent as ``null`` instead of an integer.
- The Python side is trying to convert ``null`` into an integer, which causes the error. 

 After commit :
---
- Added ``this.nb_print = vals.nb_print || 0;`` in ``pos_order.js`` to ensure it initializes to 0 for offline orders, aligning with the server-side default.

sentry-6055024846

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194527",fw-bot,2025-01-23 10:04:16+00:00,[],2025-02-07 06:15:49+00:00,2025-01-24 06:13:12+00:00,https://github.com/odoo/odoo/pull/194806,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2609384302, 'issue_id': 2806463297, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194806.png)](https://mergebot.odoo.com/odoo/odoo/pull/194806)', 'created_at': datetime.datetime(2025, 1, 23, 10, 4, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609384373, 'issue_id': 2806463297, 'author': 'fw-bot', 'body': '@shka-odoo @caburj cherrypicking of pull request odoo/odoo#194527 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/models/pos_order.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/pos_order.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 4, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611572610, 'issue_id': 2806463297, 'author': 'shka-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 4, 45, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:04:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194806.png)](https://mergebot.odoo.com/odoo/odoo/pull/194806)

fw-bot (Issue Creator) on (2025-01-23 10:04:19 UTC): @shka-odoo @caburj cherrypicking of pull request odoo/odoo#194527 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/models/pos_order.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/pos_order.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

shka-odoo on (2025-01-24 04:45:33 UTC): @robodoo r+

"
2806460619,pull_request,closed,,[FW][FIX] account: fix autopost of bills,"In b1046c8156ee3d3699d5b229720134cc3b2532d4, we introduced a new feature to allow autoposting of bills. When a user does not modify the imported bill for 3 consecutive times, we ask the user if he wants to activate the feature.

To detect whether the user has modified the imported bill or not, we use a new field `is_manually_modified` which is always set to `True` when the bill is edited except for automatic flows (OCR, CRON, email).

test_autopost_bills will fail when the l10n_eg_edi_eta module is installed. This is due to fact that calling import_facturx will end up calling _extend_with_attachments, which in turn changes the value of l10n_eg_eta_json_doc_id.raw which triggers the computes that depend on it. This is why we add the context key before calling _extend_with_attachments. Moreover, in the same function, a savepoint is created, triggering a flush that triggers the recomputes. A savepoint is created without the context, therefore we flush right before we create the savepoint.

runbot-110629

Forward-Port-Of: odoo/odoo#194595",fw-bot,2025-01-23 10:03:07+00:00,[],2025-02-06 15:33:50+00:00,2025-01-23 15:24:07+00:00,https://github.com/odoo/odoo/pull/194805,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609381694, 'issue_id': 2806460619, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194805.png)](https://mergebot.odoo.com/odoo/odoo/pull/194805)', 'created_at': datetime.datetime(2025, 1, 23, 10, 3, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609381718, 'issue_id': 2806460619, 'author': 'fw-bot', 'body': '@alialfie @RicGR98 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194794\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 3, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609399847, 'issue_id': 2806460619, 'author': 'alialfie', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 11, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 10:03:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194805.png)](https://mergebot.odoo.com/odoo/odoo/pull/194805)

fw-bot (Issue Creator) on (2025-01-23 10:03:09 UTC): @alialfie @RicGR98 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194794

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alialfie on (2025-01-23 10:11:13 UTC): @robodoo r+

"
2806447532,pull_request,closed,,[IMP] hr_recruitment: change some demo emails,"Change questionable emails for 2 users.

Make new demo CV for them as well because we only had the
binary pdfs.
Raw latex can be found at (google drive):
* https://drive.google.com/file/d/1AyRguPcTRrt_7ySXAYE3L9TP4mHnwMNs/view?usp=drive_link
* https://drive.google.com/file/d/1e-2JlO3hEbaf6haFTF5TdCy6kx73xOgX/view?usp=drive_link

task-4507003

",naja628,2025-01-23 09:57:29+00:00,[],2025-02-03 16:05:48+00:00,2025-02-03 15:20:50+00:00,https://github.com/odoo/odoo/pull/194804,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609368619, 'issue_id': 2806447532, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194804.png)](https://mergebot.odoo.com/odoo/odoo/pull/194804)', 'created_at': datetime.datetime(2025, 1, 23, 9, 57, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630763717, 'issue_id': 2806447532, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 12, 7, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:57:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194804.png)](https://mergebot.odoo.com/odoo/odoo/pull/194804)

tivisse on (2025-02-03 12:07:09 UTC): @robodoo r+

"
2806444199,pull_request,closed,,[FIX] iot_box_image: restore image auto version,"The forwardport PR #194085 accidentally removed the automatic IoT Box versionning added in the PR #193505.

This PR restores it as it was in #193505.
",Ysoroko,2025-01-23 09:56:00+00:00,[],2025-02-06 21:12:21+00:00,2025-01-23 21:07:40+00:00,https://github.com/odoo/odoo/pull/194803,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609365458, 'issue_id': 2806444199, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194803.png)](https://mergebot.odoo.com/odoo/odoo/pull/194803)', 'created_at': datetime.datetime(2025, 1, 23, 9, 56, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:56:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194803.png)](https://mergebot.odoo.com/odoo/odoo/pull/194803)

"
2806420779,pull_request,closed,,[IMP] web: add sortableDragAndDrop,"Add the DragAndDropSortable from nest_sortable to hoot dom helper

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",bastien-ipb,2025-01-23 09:45:37+00:00,[],2025-02-04 16:43:12+00:00,2025-02-04 16:43:12+00:00,https://github.com/odoo/odoo/pull/194802,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2609342273, 'issue_id': 2806420779, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194802.png)](https://mergebot.odoo.com/odoo/odoo/pull/194802)', 'created_at': datetime.datetime(2025, 1, 23, 9, 45, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633237804, 'issue_id': 2806420779, 'author': 'kebeclibre', 'body': '@jum-odoo I let you r+ that one\r\nrobodoo rebase-ff', 'created_at': datetime.datetime(2025, 2, 4, 8, 45, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633237875, 'issue_id': 2806420779, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 4, 8, 45, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633288131, 'issue_id': 2806420779, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 4, 9, 7, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633323917, 'issue_id': 2806420779, 'author': 'robodoo', 'body': ""@bastien-ipb @jum-odoo 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 4, 9, 23, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633330569, 'issue_id': 2806420779, 'author': 'robodoo', 'body': ""@bastien-ipb @jum-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 4, 9, 25, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633495885, 'issue_id': 2806420779, 'author': 'robodoo', 'body': ""@bastien-ipb @jum-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 4, 10, 31, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:45:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194802.png)](https://mergebot.odoo.com/odoo/odoo/pull/194802)

kebeclibre on (2025-02-04 08:45:01 UTC): @jum-odoo I let you r+ that one
robodoo rebase-ff

robodoo on (2025-02-04 08:45:03 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-02-04 09:07:26 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-02-04 09:23:04 UTC): @bastien-ipb @jum-odoo 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-02-04 09:25:55 UTC): @bastien-ipb @jum-odoo 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-02-04 10:31:25 UTC): @bastien-ipb @jum-odoo 'ci/runbot' failed on this reviewed PR.

"
2806376628,pull_request,closed,,[I18N] point_of_sale: make receipt header fully translated,"Because 'Tax ID' was within the `t-esc` the term was never translated. This goes against some country's compliance requirements for receipts, so we make it translatable now.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ticodoo,2025-01-23 09:26:59+00:00,[],2025-02-06 18:26:06+00:00,2025-01-23 18:24:01+00:00,https://github.com/odoo/odoo/pull/194801,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609299220, 'issue_id': 2806376628, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194801.png)](https://mergebot.odoo.com/odoo/odoo/pull/194801)', 'created_at': datetime.datetime(2025, 1, 23, 9, 27, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:27:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194801.png)](https://mergebot.odoo.com/odoo/odoo/pull/194801)

"
2806375896,pull_request,closed,,[FW][FIX] l10n_cl: translate VAT in invoice tax total,"Problem: When printing an invoice with l10n_cl installed, the tax total will display the lavel as 'VAT.' The user expects 'VAT' to be translated to maybe 'IVA.' It is hardcoded into the view, thus the .pot file needs to be updated.

Note: Starting from v17, there are missing translations
for strings ""Net Amount"", ""Total"", ""Exempt Amount"" in the
.pot file for the view l10n_cl.tax_totals_widget. However,
these are present for v16. Will probably need to modify
the fw-ports to include these strings in the file.

Purpose: Updating the .pot file to include the hardcoded VAT string will ensure there are translations for that label.

Steps to Reproduce on Runbot:
1. Install l10n_cl and Accounting
2. Add Spanish as a language
3. Switch to the CL company
4. Create an invoice for a customer whose language is Spanish
5. Print the invoice and notice 'VAT' is not translated

opw-4383092




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#190605",fw-bot,2025-01-23 09:26:40+00:00,[],2025-02-07 01:03:28+00:00,2025-01-23 23:55:39+00:00,https://github.com/odoo/odoo/pull/194800,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609298434, 'issue_id': 2806375896, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194800.png)](https://mergebot.odoo.com/odoo/odoo/pull/194800)', 'created_at': datetime.datetime(2025, 1, 23, 9, 26, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609298448, 'issue_id': 2806375896, 'author': 'fw-bot', 'body': '@myhy-odoo @antoine162 cherrypicking of pull request odoo/odoo#190605 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/l10n_cl/i18n/es.po deleted in d233a1d863b9144f23784ced5ed6a7ae3941d78c and modified in 9b905adfcbefeec2a9d61b9c6a3c43e96c9d624c.  Version 9b905adfcbefeec2a9d61b9c6a3c43e96c9d624c of addons/l10n_cl/i18n/es.po left in tree.\nAuto-merging addons/l10n_cl/i18n/l10n_cl.pot\nCONFLICT (content): Merge conflict in addons/l10n_cl/i18n/l10n_cl.pot\nAuto-merging addons/l10n_cl/views/report_invoice.xml\nCONFLICT (content): Merge conflict in addons/l10n_cl/views/report_invoice.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 9, 26, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611010841, 'issue_id': 2806375896, 'author': 'myhy-odoo', 'body': 'Hello @antoine162 ! In v16, es.po existed but in v17, only es_419.po exists. Do you think it is correct for me to remove the es.po file from the merge conflict?', 'created_at': datetime.datetime(2025, 1, 23, 21, 2, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611065436, 'issue_id': 2806375896, 'author': 'antoine162', 'body': 'Hi @myhy-odoo yes, that would be totally appropriate! `es_419` refers to Spanish (Latin America) :smile:', 'created_at': datetime.datetime(2025, 1, 23, 21, 35, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611143905, 'issue_id': 2806375896, 'author': 'myhy-odoo', 'body': '@robodoo  r+', 'created_at': datetime.datetime(2025, 1, 23, 22, 27, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:26:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194800.png)](https://mergebot.odoo.com/odoo/odoo/pull/194800)

fw-bot (Issue Creator) on (2025-01-23 09:26:42 UTC): @myhy-odoo @antoine162 cherrypicking of pull request odoo/odoo#190605 failed.

stdout:
```
CONFLICT (modify/delete): addons/l10n_cl/i18n/es.po deleted in d233a1d863b9144f23784ced5ed6a7ae3941d78c and modified in 9b905adfcbefeec2a9d61b9c6a3c43e96c9d624c.  Version 9b905adfcbefeec2a9d61b9c6a3c43e96c9d624c of addons/l10n_cl/i18n/es.po left in tree.
Auto-merging addons/l10n_cl/i18n/l10n_cl.pot
CONFLICT (content): Merge conflict in addons/l10n_cl/i18n/l10n_cl.pot
Auto-merging addons/l10n_cl/views/report_invoice.xml
CONFLICT (content): Merge conflict in addons/l10n_cl/views/report_invoice.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

myhy-odoo on (2025-01-23 21:02:37 UTC): Hello @antoine162 ! In v16, es.po existed but in v17, only es_419.po exists. Do you think it is correct for me to remove the es.po file from the merge conflict?

antoine162 on (2025-01-23 21:35:32 UTC): Hi @myhy-odoo yes, that would be totally appropriate! `es_419` refers to Spanish (Latin America) :smile:

myhy-odoo on (2025-01-23 22:27:32 UTC): @robodoo  r+

"
2806351417,pull_request,open,,[FIX] account: check country_id before loading chart,"When installing a l10n module the data often include a `try_loading` for the chart template. The chart should not be applied to the current env.company if the country id does not match the template.

When the CI installs modules via commandline with demo, the env company does not match the l10n most of the times, yet the chart is being applied to it.
This leads to incorrect data and some tests failing, like applying edi format validations on unrelated companies. We previously had patches in tests to disable some edi validations but the root cause is a wrong fiscal country id on the env company.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jjmaksoud,2025-01-23 09:16:29+00:00,[],2025-02-04 16:05:39+00:00,,https://github.com/odoo/odoo/pull/194799,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609267071, 'issue_id': 2806351417, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194799.png)](https://mergebot.odoo.com/odoo/odoo/pull/194799)', 'created_at': datetime.datetime(2025, 1, 23, 9, 16, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609297717, 'issue_id': 2806351417, 'author': 'jjmaksoud', 'body': '@fw-bot disable', 'created_at': datetime.datetime(2025, 1, 23, 9, 26, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621916106, 'issue_id': 2806351417, 'author': 'jjmaksoud', 'body': 'hello @william-andre , are you aware of cases where this would break the loading of a coa?', 'created_at': datetime.datetime(2025, 1, 29, 15, 6, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2622036011, 'issue_id': 2806351417, 'author': 'jjmaksoud', 'body': '> Why is the forward port disabled?\r\n\r\nThe behavior in `17.0` is different, the company is required in `try_loading` so we would not mistakenly apply it to the `env.company`\r\n\r\n> Do you have examples of where it fails?\r\n\r\n try to start a db in `16.0` with demo using `-i l10n_it`, you will end up with with 2 companies in different countries with the italian chart\r\n```\r\n+-------------+---------------+-------------------+---------------------------+----------------+\r\n| name        | country       | chart_template_id | account_fiscal_country_id | fiscal_country |\r\n|-------------+---------------+-------------------+---------------------------+----------------|\r\n| YourCompany | United States | 1                 | 109                       | Italy          |\r\n| IT Company  | Italy         | 1                 | 109                       | Italy          |\r\n+-------------+---------------+-------------------+---------------------------+----------------+\r\n```\r\nAnd the error caught in the nightly upgrade [build](https://runbot.odoo.com/runbot/build/74115220) is caused by this chart mismatch', 'created_at': datetime.datetime(2025, 1, 29, 15, 54, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:16:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194799.png)](https://mergebot.odoo.com/odoo/odoo/pull/194799)

jjmaksoud (Issue Creator) on (2025-01-23 09:26:24 UTC): @fw-bot disable

jjmaksoud (Issue Creator) on (2025-01-29 15:06:56 UTC): hello @william-andre , are you aware of cases where this would break the loading of a coa?

jjmaksoud (Issue Creator) on (2025-01-29 15:54:40 UTC): The behavior in `17.0` is different, the company is required in `try_loading` so we would not mistakenly apply it to the `env.company`


 try to start a db in `16.0` with demo using `-i l10n_it`, you will end up with with 2 companies in different countries with the italian chart
```
+-------------+---------------+-------------------+---------------------------+----------------+
| name        | country       | chart_template_id | account_fiscal_country_id | fiscal_country |
|-------------+---------------+-------------------+---------------------------+----------------|
| YourCompany | United States | 1                 | 109                       | Italy          |
| IT Company  | Italy         | 1                 | 109                       | Italy          |
+-------------+---------------+-------------------+---------------------------+----------------+
```
And the error caught in the nightly upgrade [build](https://runbot.odoo.com/runbot/build/74115220) is caused by this chart mismatch

"
2806338531,pull_request,open,,[IMP] project_sale: improve project creation on the fly from SO,"
In this commit, we made the following improvements:
- set the default sale customer as the project customer.
- if the sale order is confirmed:
  - set the default sale order in the project.
  - set the default lowest serviceable sale order line in the project.

task-4461649



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",dhna-odoo,2025-01-23 09:10:57+00:00,[],2025-02-05 13:10:50+00:00,,https://github.com/odoo/odoo/pull/194798,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609242420, 'issue_id': 2806338531, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194798.png)](https://mergebot.odoo.com/odoo/odoo/pull/194798)', 'created_at': datetime.datetime(2025, 1, 23, 9, 10, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617955557, 'issue_id': 2806338531, 'author': 'ppr-odoo', 'body': '@dhna-odoo, thanks for the work. I have left some comments. Please take a look at them when you have time. Please add a test case for this feature.', 'created_at': datetime.datetime(2025, 1, 28, 5, 57, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 09:10:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194798.png)](https://mergebot.odoo.com/odoo/odoo/pull/194798)

ppr-odoo on (2025-01-28 05:57:02 UTC): @dhna-odoo, thanks for the work. I have left some comments. Please take a look at them when you have time. Please add a test case for this feature.

"
2806281350,pull_request,closed,,[FW][FIX] pos_sale: separate downpayment for fixed tax,"When a product has a fixed tax, there should be a separate downpayment line for the fixed tax amount.

Steps to reproduce:
-------------------
* Create a fixed tax of 1€
* Assign this tax to any product
* Create a sale order with this product
* Open PoS and make a downpayment of 10%
> Observation: There is only one downpayment line with the total amount
  of the product and the fixed tax combined.

opw-4252104

Forward-Port-Of: odoo/odoo#194031
Forward-Port-Of: odoo/odoo#192208",fw-bot,2025-01-23 08:45:38+00:00,[],2025-02-07 18:12:26+00:00,2025-01-24 18:11:14+00:00,https://github.com/odoo/odoo/pull/194797,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609183510, 'issue_id': 2806281350, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194797.png)](https://mergebot.odoo.com/odoo/odoo/pull/194797)', 'created_at': datetime.datetime(2025, 1, 23, 8, 45, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609183537, 'issue_id': 2806281350, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.\n\nstdout:\n```\nAuto-merging addons/pos_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/pos_sale/static/src/app/services/pos_store.js\nAuto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js\nCONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js\nAuto-merging addons/pos_sale/tests/test_pos_sale_flow.py\nCONFLICT (content): Merge conflict in addons/pos_sale/tests/test_pos_sale_flow.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 8, 45, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612875173, 'issue_id': 2806281350, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 16, 3, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:45:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194797.png)](https://mergebot.odoo.com/odoo/odoo/pull/194797)

fw-bot (Issue Creator) on (2025-01-23 08:45:40 UTC): @robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.

stdout:
```
Auto-merging addons/pos_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/pos_sale/static/src/app/services/pos_store.js
Auto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js
CONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js
Auto-merging addons/pos_sale/tests/test_pos_sale_flow.py
CONFLICT (content): Merge conflict in addons/pos_sale/tests/test_pos_sale_flow.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robinengels on (2025-01-24 16:03:33 UTC): @robodoo r+

"
2806280446,pull_request,closed,,[FW][FIX] point_of_sale: set default nb_print value for offline orders,"Currently, an exception is generated in the log when the users create a POS order as follows:
- Install ``pos_restaurant`` module.
- Open the register for the restaurant.
- Stay connected to Wi-Fi but disconnect from the internet (Inspect > Network > Go Offline). connection (Inspect > Network > Go offline)
- Make two or more orders in offline mode and use ``Print Full Receipt``.
- Reconnect to the internet, make one order, and ``Print Full Receipt``.
- Close the register (Traceback appears in the terminal).

``error: `invalid literal for int() with base 10: 'null'``

Before commit :
---
- ``nb_print`` is initialized in Python with fields.Integer(default=0)
- When syncing data between the server and the client, nb_print is being sent as ``null`` instead of an integer.
- The Python side is trying to convert ``null`` into an integer, which causes the error. 

 After commit :
---
- Added ``this.nb_print = vals.nb_print || 0;`` in ``pos_order.js`` to ensure it initializes to 0 for offline orders, aligning with the server-side default.

sentry-6055024846

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194527",fw-bot,2025-01-23 08:45:10+00:00,[],2025-01-27 12:28:50+00:00,2025-01-27 12:28:50+00:00,https://github.com/odoo/odoo/pull/194796,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609182606, 'issue_id': 2806280446, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194796.png)](https://mergebot.odoo.com/odoo/odoo/pull/194796)', 'created_at': datetime.datetime(2025, 1, 23, 8, 45, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609182622, 'issue_id': 2806280446, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 8, 45, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609384323, 'issue_id': 2806280446, 'author': 'fw-bot', 'body': '@shka-odoo @caburj the next pull request (odoo/odoo#194806) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 10, 4, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614722720, 'issue_id': 2806280446, 'author': 'fw-bot', 'body': '@shka-odoo @caburj this forward port of odoo/odoo#194527 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 1, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614856125, 'issue_id': 2806280446, 'author': 'shka-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 5, 4, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614862068, 'issue_id': 2806280446, 'author': 'robodoo', 'body': '@shka-odoo @caburj staging failed: ci/runbot on 28545c87850381abb7599f3429eb3f7875c0bcfa (view more at https://runbot.odoo.com/runbot/build/73974607)', 'created_at': datetime.datetime(2025, 1, 27, 5, 11, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615406761, 'issue_id': 2806280446, 'author': 'shka-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 27, 10, 44, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:45:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194796.png)](https://mergebot.odoo.com/odoo/odoo/pull/194796)

fw-bot (Issue Creator) on (2025-01-23 08:45:12 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 10:04:18 UTC): @shka-odoo @caburj the next pull request (odoo/odoo#194806) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-27 02:01:49 UTC): @shka-odoo @caburj this forward port of odoo/odoo#194527 is awaiting action (not merged or closed).

shka-odoo on (2025-01-27 05:04:52 UTC): @robodoo r+

robodoo on (2025-01-27 05:11:34 UTC): @shka-odoo @caburj staging failed: ci/runbot on 28545c87850381abb7599f3429eb3f7875c0bcfa (view more at https://runbot.odoo.com/runbot/build/73974607)

shka-odoo on (2025-01-27 10:44:15 UTC): @robodoo retry

"
2806280427,pull_request,closed,,[FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pipu-odoo,2025-01-23 08:45:10+00:00,[],2025-02-06 13:26:45+00:00,2025-01-23 13:23:02+00:00,https://github.com/odoo/odoo/pull/194795,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609182645, 'issue_id': 2806280427, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194795.png)](https://mergebot.odoo.com/odoo/odoo/pull/194795)', 'created_at': datetime.datetime(2025, 1, 23, 8, 45, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609602733, 'issue_id': 2806280427, 'author': 'aab-odoo', 'body': 'robodoo ?', 'created_at': datetime.datetime(2025, 1, 23, 11, 46, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609602838, 'issue_id': 2806280427, 'author': 'robodoo', 'body': ""@aab-odoo unknown command '?'.\n\nFor your own safety I've ignored *everything in your entire comment*.\n\nCurrently available commands:\n\n|command||\n|-|-|\n|`help`|displays this help|\n|`r(eview)-`|removes approval of a previously approved PR, if the PR is staged the staging will be cancelled|\n|`fw=no`|does not forward-port this PR|\n|`fw=default`|forward-ports this PR normally|\n|`fw=skipci`|does not wait for a forward-port's statuses to succeed before creating the next one|\n|`up to <branch>`|only ports this PR forward to the specified branch (included)|\n|`merge`|integrate the PR with a simple merge commit, using the PR description as message|\n|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|\n|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|\n|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|\n|`delegate+`|grants approval rights to the PR author|\n|`delegate=<...>`|grants approval rights on this PR to the specified github users|\n|`default`|stages the PR normally|\n|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|\n|`alone`|stages this PR only with other PRs of the same priority|\n|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|\n|`override=<...>`|marks overridable statuses as successful|\n|`check`|fetches or refreshes PR metadata, resets mergebot state|\n\nNote: this help text is dynamic and will change with the state of the PR."", 'created_at': datetime.datetime(2025, 1, 23, 11, 46, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609603460, 'issue_id': 2806280427, 'author': 'aab-odoo', 'body': ""robodoo fw=no\r\n\r\nit's a backport from 17.0"", 'created_at': datetime.datetime(2025, 1, 23, 11, 46, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609603548, 'issue_id': 2806280427, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 23, 11, 46, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:45:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194795.png)](https://mergebot.odoo.com/odoo/odoo/pull/194795)

aab-odoo on (2025-01-23 11:46:13 UTC): robodoo ?

robodoo on (2025-01-23 11:46:16 UTC): @aab-odoo unknown command '?'.

For your own safety I've ignored *everything in your entire comment*.

Currently available commands:

|command||
|-|-|
|`help`|displays this help|
|`r(eview)-`|removes approval of a previously approved PR, if the PR is staged the staging will be cancelled|
|`fw=no`|does not forward-port this PR|
|`fw=default`|forward-ports this PR normally|
|`fw=skipci`|does not wait for a forward-port's statuses to succeed before creating the next one|
|`up to <branch>`|only ports this PR forward to the specified branch (included)|
|`merge`|integrate the PR with a simple merge commit, using the PR description as message|
|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|
|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|
|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|
|`delegate+`|grants approval rights to the PR author|
|`delegate=<...>`|grants approval rights on this PR to the specified github users|
|`default`|stages the PR normally|
|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|
|`alone`|stages this PR only with other PRs of the same priority|
|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|
|`override=<...>`|marks overridable statuses as successful|
|`check`|fetches or refreshes PR metadata, resets mergebot state|

Note: this help text is dynamic and will change with the state of the PR.

aab-odoo on (2025-01-23 11:46:35 UTC): robodoo fw=no

it's a backport from 17.0

robodoo on (2025-01-23 11:46:38 UTC): Disabled forward-porting.

"
2806278790,pull_request,closed,,[FW][FIX] account: fix autopost of bills,"In b1046c8156ee3d3699d5b229720134cc3b2532d4, we introduced a new feature to allow autoposting of bills. When a user does not modify the imported bill for 3 consecutive times, we ask the user if he wants to activate the feature.

To detect whether the user has modified the imported bill or not, we use a new field `is_manually_modified` which is always set to `True` when the bill is edited except for automatic flows (OCR, CRON, email).

test_autopost_bills will fail when the l10n_eg_edi_eta module is installed. This is due to fact that calling import_facturx will end up calling _extend_with_attachments, which in turn changes the value of l10n_eg_eta_json_doc_id.raw which triggers the computes that depend on it. This is why we add the context key before calling _extend_with_attachments. Moreover, in the same function, a savepoint is created, triggering a flush that triggers the recomputes. A savepoint is created without the context, therefore we flush right before we create the savepoint.

runbot-110629

Forward-Port-Of: odoo/odoo#194595",fw-bot,2025-01-23 08:44:19+00:00,[],2025-02-06 13:26:44+00:00,2025-01-23 13:15:14+00:00,https://github.com/odoo/odoo/pull/194794,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2609181603, 'issue_id': 2806278790, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194794.png)](https://mergebot.odoo.com/odoo/odoo/pull/194794)', 'created_at': datetime.datetime(2025, 1, 23, 8, 44, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609181632, 'issue_id': 2806278790, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 8, 44, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:44:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194794.png)](https://mergebot.odoo.com/odoo/odoo/pull/194794)

fw-bot (Issue Creator) on (2025-01-23 08:44:42 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806247075,pull_request,closed,,[IMP] stock_account: Hide valuation data on lots,"If a ProductProduct is not lot_valuated, then the StockLot avg_cost/total_value/standard_price fields are not relevant. To prevent any confusion for the user, we can hide those fields in the StockLot form view.

### Without LOT_VALUATED
![image](https://github.com/user-attachments/assets/bbc614d7-69bd-45a5-afc9-21d3c81e4336)
![image](https://github.com/user-attachments/assets/284b30be-1c02-4d40-8fac-7d67dd627a45)


### With LOT_VALUATED
![image](https://github.com/user-attachments/assets/5beeee13-1cbb-4166-a5bb-34322f95a6fd)
![image](https://github.com/user-attachments/assets/38febf6a-1f1d-4ce1-886f-84c05ab6f32f)
",DavidFesquet,2025-01-23 08:28:13+00:00,[],2025-02-06 17:59:31+00:00,2025-01-23 17:57:52+00:00,https://github.com/odoo/odoo/pull/194793,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2609149087, 'issue_id': 2806247075, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194793.png)](https://mergebot.odoo.com/odoo/odoo/pull/194793)', 'created_at': datetime.datetime(2025, 1, 23, 8, 28, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610031149, 'issue_id': 2806247075, 'author': 'Whenrow', 'body': 'robodoo r+\r\nthank you', 'created_at': datetime.datetime(2025, 1, 23, 14, 56, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:28:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194793.png)](https://mergebot.odoo.com/odoo/odoo/pull/194793)

Whenrow on (2025-01-23 14:56:26 UTC): robodoo r+
thank you

"
2806238300,pull_request,open,,[IMP] hr: add Employee Type as Group By option and hidden column in list view,"The purpose of this change is to allow users to group employees by their 'Employee Type' and improve the visibility of employee categorization in the employee list view.

This PR includes the following changes:

- Added 'Employee Type' as a Group By option in the search view for employees.
- Added 'Employee Type' as a hidden column in the employee list view.

Task - 4504301

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:
",rame-odoo,2025-01-23 08:23:39+00:00,[],2025-01-28 08:09:31+00:00,,https://github.com/odoo/odoo/pull/194792,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609140091, 'issue_id': 2806238300, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194792.png)](https://mergebot.odoo.com/odoo/odoo/pull/194792)', 'created_at': datetime.datetime(2025, 1, 23, 8, 23, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:23:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194792.png)](https://mergebot.odoo.com/odoo/odoo/pull/194792)

"
2806222369,pull_request,open,,[ADD] l10n_id_efaktur_coretax: coretax,"As of January 2025, E-Faktur submission is on a new system called Coretax, which requires different file format and content. This commit backports the refactor we did for `l10n_id_efaktur` on 18.0.

4416314

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",nni-odoo,2025-01-23 08:15:16+00:00,[],2025-02-06 10:01:46+00:00,,https://github.com/odoo/odoo/pull/194791,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609124087, 'issue_id': 2806222369, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194791.png)](https://mergebot.odoo.com/odoo/odoo/pull/194791)', 'created_at': datetime.datetime(2025, 1, 23, 8, 15, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612339861, 'issue_id': 2806222369, 'author': 'nni-odoo', 'body': ""@vin-odoo thank you for the reviews! I've pushed the changes per your feedback"", 'created_at': datetime.datetime(2025, 1, 24, 11, 49, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2638911113, 'issue_id': 2806222369, 'author': 'vin-odoo', 'body': '@odoo/rd-security Hello, could I have one of you please check this pr?\r\nzipfile.ZipFile is only used to download attachments as a ZIP if multiple of them are downloaded simultaneously.\r\n\r\nThanks a lot!', 'created_at': datetime.datetime(2025, 2, 6, 5, 58, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639354069, 'issue_id': 2806222369, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 2, 6, 10, 0, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639356880, 'issue_id': 2806222369, 'author': 'flvr-odoo', 'body': 'checked usage of zipfile lib\r\nrobodoo override=ci/security', 'created_at': datetime.datetime(2025, 2, 6, 10, 1, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:15:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194791.png)](https://mergebot.odoo.com/odoo/odoo/pull/194791)

nni-odoo (Issue Creator) on (2025-01-24 11:49:32 UTC): @vin-odoo thank you for the reviews! I've pushed the changes per your feedback

vin-odoo on (2025-02-06 05:58:30 UTC): @odoo/rd-security Hello, could I have one of you please check this pr?
zipfile.ZipFile is only used to download attachments as a ZIP if multiple of them are downloaded simultaneously.

Thanks a lot!

xmo-odoo on (2025-02-06 10:00:19 UTC): @robodoo override=ci/security

flvr-odoo on (2025-02-06 10:01:44 UTC): checked usage of zipfile lib
robodoo override=ci/security

"
2806202895,pull_request,open,,"[IMP] im_livechat, *: revamp livechat integration instructions","*=website_livechat

Purpose of this Commit:
Revamp the integration to enable Live Chat functionality on custom websites and Odoo websites.

task-3751548




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",maad-odoo,2025-01-23 08:04:46+00:00,[],2025-01-23 11:35:16+00:00,,https://github.com/odoo/odoo/pull/194790,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609105046, 'issue_id': 2806202895, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194790.png)](https://mergebot.odoo.com/odoo/odoo/pull/194790)', 'created_at': datetime.datetime(2025, 1, 23, 8, 4, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 08:04:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194790.png)](https://mergebot.odoo.com/odoo/odoo/pull/194790)

"
2806165864,pull_request,closed,,[FIX] web: Add preventDefault for Chrome 132 compatibility,"In error_service, event.preventDefault() is required to prevent uncaught error message due to latest Chrome version (132) compatibility.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pipu-odoo,2025-01-23 07:43:09+00:00,[],2025-02-06 10:31:57+00:00,2025-01-23 10:16:17+00:00,https://github.com/odoo/odoo/pull/194789,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609069498, 'issue_id': 2806165864, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194789.png)](https://mergebot.odoo.com/odoo/odoo/pull/194789)', 'created_at': datetime.datetime(2025, 1, 23, 7, 43, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612392560, 'issue_id': 2806165864, 'author': 'rfr-odoo', 'body': 'For info: related Chrome issue => https://issues.chromium.org/issues/391393420\r\nCommit: https://chromium.googlesource.com/chromium/src/+/18cd9effcba79aea3d11169444c27279aec43b84', 'created_at': datetime.datetime(2025, 1, 24, 12, 17, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 07:43:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194789.png)](https://mergebot.odoo.com/odoo/odoo/pull/194789)

rfr-odoo on (2025-01-24 12:17:58 UTC): For info: related Chrome issue => https://issues.chromium.org/issues/391393420
Commit: https://chromium.googlesource.com/chromium/src/+/18cd9effcba79aea3d11169444c27279aec43b84

"
2806146804,pull_request,closed,,[FW][IMP] l10n_mx_hr_payroll: add mexican localisation,"This is a rework of the mexican localisation to make it compliant with the local
 authorities. In our case, it will be a working system only for the full-time
 jobs. The other cases will be coming separately.

Task: 3673251

Forward-Port-Of: odoo/odoo#189466",fw-bot,2025-01-23 07:31:43+00:00,[],2025-02-07 02:36:19+00:00,2025-01-24 02:36:08+00:00,https://github.com/odoo/odoo/pull/194788,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2609052023, 'issue_id': 2806146804, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194788.png)](https://mergebot.odoo.com/odoo/odoo/pull/194788)', 'created_at': datetime.datetime(2025, 1, 23, 7, 31, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609052055, 'issue_id': 2806146804, 'author': 'fw-bot', 'body': '@arpi-odoo @tivisse while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77628) did not succeed. You will need to fix it before this can be merged.\n\nBoth this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 7, 31, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609139351, 'issue_id': 2806146804, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 23, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609175371, 'issue_id': 2806146804, 'author': 'robodoo', 'body': ""@arpi-odoo @tivisse 'ci/template' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 8, 41, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609191739, 'issue_id': 2806146804, 'author': 'robodoo', 'body': ""@arpi-odoo @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 8, 49, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609460635, 'issue_id': 2806146804, 'author': 'robodoo', 'body': ""@arpi-odoo @tivisse 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 10, 38, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609464779, 'issue_id': 2806146804, 'author': 'robodoo', 'body': ""@arpi-odoo @tivisse 'ci/template' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 10, 40, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609465481, 'issue_id': 2806146804, 'author': 'robodoo', 'body': ""@arpi-odoo @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 10, 40, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609750285, 'issue_id': 2806146804, 'author': 'robodoo', 'body': '@arpi-odoo @tivisse linked pull request(s) odoo/enterprise#77628 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 23, 13, 0, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 07:31:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194788.png)](https://mergebot.odoo.com/odoo/odoo/pull/194788)

fw-bot (Issue Creator) on (2025-01-23 07:31:46 UTC): @arpi-odoo @tivisse while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77628) did not succeed. You will need to fix it before this can be merged.

Both this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-23 08:23:16 UTC): @robodoo r+

robodoo on (2025-01-23 08:41:32 UTC): @arpi-odoo @tivisse 'ci/template' failed on this reviewed PR.

robodoo on (2025-01-23 08:49:32 UTC): @arpi-odoo @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-01-23 10:38:42 UTC): @arpi-odoo @tivisse 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-01-23 10:40:36 UTC): @arpi-odoo @tivisse 'ci/template' failed on this reviewed PR.

robodoo on (2025-01-23 10:40:55 UTC): @arpi-odoo @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-01-23 13:00:15 UTC): @arpi-odoo @tivisse linked pull request(s) odoo/enterprise#77628 not ready. Linked PRs are not staged until all of them are ready.

"
2806146080,pull_request,closed,,[FW][FIX] l10n_in: hide QR if upi id is not set,"**Steps to reproduce:**
1) Select the QR Codes option in settings (IN Company)
2) Do not enter an upi id in the company profile.
3) Go to invoice and preview/print the invoice.
4) Show that QR code without upi id and upi logos visible.

**Cause:**
- The condition of the upi id is not properly set to hide the block if upi is not set.

**Fix:**
- With this PR, the upi QR code and upi logos will not be visible if the upi id is not set.

**task**-4426634

Forward-Port-Of: odoo/odoo#192068",fw-bot,2025-01-23 07:31:16+00:00,[],2025-02-06 13:55:29+00:00,2025-01-23 13:46:06+00:00,https://github.com/odoo/odoo/pull/194787,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2609051344, 'issue_id': 2806146080, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194787.png)](https://mergebot.odoo.com/odoo/odoo/pull/194787)', 'created_at': datetime.datetime(2025, 1, 23, 7, 31, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609051363, 'issue_id': 2806146080, 'author': 'fw-bot', 'body': '@nash-odoo @h4818 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194784\n* odoo/odoo#194778\n* odoo/odoo#194772\n* odoo/odoo#194767\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 7, 31, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609141772, 'issue_id': 2806146080, 'author': 'nash-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 24, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 07:31:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194787.png)](https://mergebot.odoo.com/odoo/odoo/pull/194787)

fw-bot (Issue Creator) on (2025-01-23 07:31:20 UTC): @nash-odoo @h4818 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194784
* odoo/odoo#194778
* odoo/odoo#194772
* odoo/odoo#194767

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

nash-odoo on (2025-01-23 08:24:32 UTC): @robodoo r+

"
2806110068,pull_request,closed,,[FIX] crm: add translation for ringover settings,"[1] adds a settings entry in CRM for ringover

As this was done in stable the .pot file should have been updated

[1] f2a384dd3b8ac2d358a9d8ea3fcec577b3e86859
",reth-odoo,2025-01-23 07:09:24+00:00,[],2025-02-06 10:31:59+00:00,2025-01-23 10:16:10+00:00,https://github.com/odoo/odoo/pull/194786,"[('RD', 'research & development, internal work')]","[{'comment_id': 2609019589, 'issue_id': 2806110068, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194786.png)](https://mergebot.odoo.com/odoo/odoo/pull/194786)', 'created_at': datetime.datetime(2025, 1, 23, 7, 9, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609022670, 'issue_id': 2806110068, 'author': 'reth-odoo', 'body': ""@jeh-odoo :wave: am a silly person and forgot to update .pot for this so here's a separate PR just for that :man_facepalming: \r\n\r\nIf you'd do me the honors again"", 'created_at': datetime.datetime(2025, 1, 23, 7, 11, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609148924, 'issue_id': 2806110068, 'author': 'jeh-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 28, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609151339, 'issue_id': 2806110068, 'author': 'jeh-odoo', 'body': 'I forgot as well so also my bad :man_facepalming:', 'created_at': datetime.datetime(2025, 1, 23, 8, 29, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609240658, 'issue_id': 2806110068, 'author': 'reth-odoo', 'body': 'Thanks!\r\n\r\nOriginal PR for tracability\r\nhttps://github.com/odoo/odoo/pull/194678', 'created_at': datetime.datetime(2025, 1, 23, 9, 10, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 07:09:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194786.png)](https://mergebot.odoo.com/odoo/odoo/pull/194786)

reth-odoo (Issue Creator) on (2025-01-23 07:11:37 UTC): @jeh-odoo :wave: am a silly person and forgot to update .pot for this so here's a separate PR just for that :man_facepalming: 

If you'd do me the honors again

jeh-odoo on (2025-01-23 08:28:10 UTC): @robodoo r+

jeh-odoo on (2025-01-23 08:29:28 UTC): I forgot as well so also my bad :man_facepalming:

reth-odoo (Issue Creator) on (2025-01-23 09:10:36 UTC): Thanks!

Original PR for tracability
https://github.com/odoo/odoo/pull/194678

"
2806067770,pull_request,closed,,[FIX] loyalty: fix expiration date condition,"Steps:
- Install sale app.
- Enable Loyalty settings.
- Try to create a card on a loyalty.

Issue:
- Giving validation error.

Casue:
- In [PR] forgot to check expiration_date set or not before raise an error.

Fix:
- Added condition to check if expiration_date set or not on card before raising an error.

[PR]: https://github.com/odoo/odoo/pull/171453

opw-4492179
opw-4490587
opw-4504188
opw-4495530
",kcv-odoo,2025-01-23 06:46:55+00:00,[],2025-02-06 12:24:58+00:00,2025-01-23 12:21:39+00:00,https://github.com/odoo/odoo/pull/194785,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2608989718, 'issue_id': 2806067770, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194785.png)](https://mergebot.odoo.com/odoo/odoo/pull/194785)', 'created_at': datetime.datetime(2025, 1, 23, 6, 46, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 06:46:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194785.png)](https://mergebot.odoo.com/odoo/odoo/pull/194785)

"
2806034623,pull_request,closed,,[FW][FIX] l10n_in: hide QR if upi id is not set,"**Steps to reproduce:**
1) Select the QR Codes option in settings (IN Company)
2) Do not enter an upi id in the company profile.
3) Go to invoice and preview/print the invoice.
4) Show that QR code without upi id and upi logos visible.

**Cause:**
- The condition of the upi id is not properly set to hide the block if upi is not set.

**Fix:**
- With this PR, the upi QR code and upi logos will not be visible if the upi id is not set.

**task**-4426634

Forward-Port-Of: odoo/odoo#192068",fw-bot,2025-01-23 06:25:54+00:00,[],2025-02-06 13:26:37+00:00,2025-01-23 13:14:30+00:00,https://github.com/odoo/odoo/pull/194784,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608962006, 'issue_id': 2806034623, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194784.png)](https://mergebot.odoo.com/odoo/odoo/pull/194784)', 'created_at': datetime.datetime(2025, 1, 23, 6, 25, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608962022, 'issue_id': 2806034623, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 6, 25, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 06:25:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194784.png)](https://mergebot.odoo.com/odoo/odoo/pull/194784)

fw-bot (Issue Creator) on (2025-01-23 06:25:56 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2806026576,pull_request,closed,,[IMP] auth_ldap: Add function to test LDAP connection in LDAP Server configuration model,"Description of the issue/feature this PR addresses:
Currently, administrators do not have a straightforward way to test LDAP server configurations within Odoo. This can lead to difficulties in diagnosing connection issues or invalid credentials, resulting in a time-consuming setup process.

Current behavior before PR:
- No built-in function to test LDAP server connectivity and authentication in the LDAP server configuration model.
- Administrators have to rely on external tools or guesswork to verify their LDAP configurations.

Desired behavior after PR is merged:
- A new function test_ldap_connection is added to the res.company.ldap model.
- Administrators can easily test LDAP server connectivity and authentication directly from the Odoo interface.
- The function provides clear and informative notifications about the success or failure of the connection test, including specific error messages for common issues like invalid credentials or server down.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",fasilwdr,2025-01-23 06:20:00+00:00,[],2025-01-24 09:13:59+00:00,2025-01-23 13:45:59+00:00,https://github.com/odoo/odoo/pull/194783,"[('CLA', 'Contributor License Agreement'), ('18.2', None)]","[{'comment_id': 2608955018, 'issue_id': 2806026576, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194783.png)](https://mergebot.odoo.com/odoo/odoo/pull/194783)', 'created_at': datetime.datetime(2025, 1, 23, 6, 20, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608999072, 'issue_id': 2806026576, 'author': 'xmo-odoo', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 23, 6, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608999150, 'issue_id': 2806026576, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 23, 6, 54, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609032063, 'issue_id': 2806026576, 'author': 'robodoo', 'body': ""@fasilwdr @xmo-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 7, 18, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 06:20:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194783.png)](https://mergebot.odoo.com/odoo/odoo/pull/194783)

xmo-odoo on (2025-01-23 06:54:00 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-23 06:54:03 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-23 07:18:04 UTC): @fasilwdr @xmo-odoo 'ci/runbot' failed on this reviewed PR.

"
2806009965,pull_request,closed,,[FW][FIX] sale: prevent error when clicking on Sales Orders in kanban view,"When a user clicks on the view Sales Orders button in Kanban view of customers,
a traceback will appear.

Steps to reproduce the error:
- Go to Sales > Orders > Customers >
- In kanban view, Click on ``Sales Orders ($ button)``

Traceback:
```
AttributeError:
The method 'action_view_sale_order' does not exist on the model 'res.partner'
```

``action_view_sale_order`` is removed in this commit: 81c9fc1fb5b67781ff22062d4cc776f90bbfbb0e but it is still used here, https://github.com/odoo/odoo/blob/4c0487008aac63937e10883a62dfdf15abca3c42/addons/sale/views/res_partner_views.xml#L30

sentry-6232318595

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194519",fw-bot,2025-01-23 06:08:19+00:00,[],2025-02-06 13:55:25+00:00,2025-01-23 13:45:42+00:00,https://github.com/odoo/odoo/pull/194782,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608940585, 'issue_id': 2806009965, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194782.png)](https://mergebot.odoo.com/odoo/odoo/pull/194782)', 'created_at': datetime.datetime(2025, 1, 23, 6, 8, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608940604, 'issue_id': 2806009965, 'author': 'fw-bot', 'body': '@reka-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 6, 8, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608983225, 'issue_id': 2806009965, 'author': 'reka-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 6, 43, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 06:08:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194782.png)](https://mergebot.odoo.com/odoo/odoo/pull/194782)

fw-bot (Issue Creator) on (2025-01-23 06:08:21 UTC): @reka-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

reka-odoo on (2025-01-23 06:43:05 UTC): @robodoo r+

"
2805974150,pull_request,closed,,[FIX] l10n_in_ewaybill_irn: prevent error when generating E-Way bill,"Currently, an error occurs when attempting to access `EWayBillApi.DEFAULT_HELP_MESSAGE` - [1]. This happens because `LazyGettext` objects do not support direct string formatting operations.

`TypeError: unsupported operand type(s) for %: 'LazyGettext' and 'str'.`

[1] - https://github.com/odoo/odoo/blob/3b5ab38e473ca0f59b2c157bf0231a0b24163d16/addons/l10n_in_ewaybill_irn/models/l10n_in_ewaybill.py#L128

The issue is resolved by converting the result of
`EWayBillApi.DEFAULT_HELP_MESSAGE` to a string using `str()`.

sentry-6234363097

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adip-odoo,2025-01-23 05:44:07+00:00,[],2025-01-28 06:35:17+00:00,2025-01-23 09:08:41+00:00,https://github.com/odoo/odoo/pull/194781,"[('RD', 'research & development, internal work')]","[{'comment_id': 2608910985, 'issue_id': 2805974150, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194781.png)](https://mergebot.odoo.com/odoo/odoo/pull/194781)', 'created_at': datetime.datetime(2025, 1, 23, 5, 44, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609233064, 'issue_id': 2805974150, 'author': 'adip-odoo', 'body': 'Fixed here: b7b987c4077c064fdfdb6b956379455cbdd93de3', 'created_at': datetime.datetime(2025, 1, 23, 9, 8, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 05:44:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194781.png)](https://mergebot.odoo.com/odoo/odoo/pull/194781)

adip-odoo (Issue Creator) on (2025-01-23 09:08:41 UTC): Fixed here: b7b987c4077c064fdfdb6b956379455cbdd93de3

"
2805970276,pull_request,closed,,[FW][FIX] purchase: fix tour by providing appropriate class,"Before this commit:
===================
- The purchase tour was failing because the tour's JavaScript used
  an incorrect class selector (targeting 'partner_id'), which prevented
  it from locating the intended DOM element. Consequently,
  the sequence of actions was interrupted, causing the tour to break midway.

After this commit:
===================
- The issue has been resolved by updating the tour to use the correct and
  unique class selector. This ensures the tour accurately targets the
  intended element, allowing it to proceed without interruptions.
  As a result, the purchase tour runs successfully and achieves its intended purpose.

TaskId: 4268662

Forward-Port-Of: odoo/odoo#194681
Forward-Port-Of: odoo/odoo#184735",fw-bot,2025-01-23 05:40:54+00:00,[],2025-02-06 13:08:27+00:00,2025-01-23 12:58:13+00:00,https://github.com/odoo/odoo/pull/194780,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2608907591, 'issue_id': 2805970276, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194780.png)](https://mergebot.odoo.com/odoo/odoo/pull/194780)', 'created_at': datetime.datetime(2025, 1, 23, 5, 40, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608907604, 'issue_id': 2805970276, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.\n\nstdout:\n```\nAuto-merging addons/purchase/static/src/js/tours/purchase.js\nCONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 5, 40, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609582933, 'issue_id': 2805970276, 'author': 'dhha-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 11, 36, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 05:40:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194780.png)](https://mergebot.odoo.com/odoo/odoo/pull/194780)

fw-bot (Issue Creator) on (2025-01-23 05:40:56 UTC): @dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.

stdout:
```
Auto-merging addons/purchase/static/src/js/tours/purchase.js
CONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dhha-odoo on (2025-01-23 11:36:35 UTC): robodoo r+

"
2805955206,pull_request,closed,,[FW][FIX] mail: correctly restart scheduled message cron,"Before this commit, `mail.ir_cron_post_scheduled_message` fails with a traceback when there are a lot of scheduled messages to be sent.

Steps to reproduce
-----
1. Create a scheduled message from the chatter full composer
2. Duplicate it 50+ times
3. Run the scheduled action ""Mail: Post scheduled messages""
4. Traceback occurs
```
File ""/home/odoo/src/odoo/odoo/api.py"", line 553, in __new__
assert isinstance(cr, BaseCursor)
^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
```

Cause
-----
This commit (df18d5257cef737f3e1d245a8b85769e1fe1a032) introduced this cron which posts past-due scheduled messages with a default `limit=50`. If there are more messages than the limit, the cron is triggered again. However, there is a typo when restarting the cron that incorrectly calls `env`.

Solution
-----
Change the line to use `env.ref()` to correctly access the xml_id and restart the cron.

opw-4474171

Forward-Port-Of: odoo/odoo#194233",fw-bot,2025-01-23 05:29:12+00:00,[],2025-02-06 16:48:30+00:00,2025-01-23 16:42:37+00:00,https://github.com/odoo/odoo/pull/194779,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608893192, 'issue_id': 2805955206, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194779.png)](https://mergebot.odoo.com/odoo/odoo/pull/194779)', 'created_at': datetime.datetime(2025, 1, 23, 5, 29, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608893221, 'issue_id': 2805955206, 'author': 'fw-bot', 'body': '@juwu-odoo @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194776\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 5, 29, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609923968, 'issue_id': 2805955206, 'author': 'juwu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 14, 16, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 05:29:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194779.png)](https://mergebot.odoo.com/odoo/odoo/pull/194779)

fw-bot (Issue Creator) on (2025-01-23 05:29:14 UTC): @juwu-odoo @tde-banana-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194776

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

juwu-odoo on (2025-01-23 14:16:51 UTC): @robodoo r+

"
2805904546,pull_request,closed,,[FW][FIX] l10n_in: hide QR if upi id is not set,"**Steps to reproduce:**
1) Select the QR Codes option in settings (IN Company)
2) Do not enter an upi id in the company profile.
3) Go to invoice and preview/print the invoice.
4) Show that QR code without upi id and upi logos visible.

**Cause:**
- The condition of the upi id is not properly set to hide the block if upi is not set.

**Fix:**
- With this PR, the upi QR code and upi logos will not be visible if the upi id is not set.

**task**-4426634

Forward-Port-Of: odoo/odoo#192068",fw-bot,2025-01-23 04:46:22+00:00,[],2025-02-06 10:31:58+00:00,2025-01-23 10:16:09+00:00,https://github.com/odoo/odoo/pull/194778,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608847102, 'issue_id': 2805904546, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194778.png)](https://mergebot.odoo.com/odoo/odoo/pull/194778)', 'created_at': datetime.datetime(2025, 1, 23, 4, 46, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608847118, 'issue_id': 2805904546, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 4, 46, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608911432, 'issue_id': 2805904546, 'author': 'fw-bot', 'body': '@nash-odoo @h4818 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 5, 44, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:46:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194778.png)](https://mergebot.odoo.com/odoo/odoo/pull/194778)

fw-bot (Issue Creator) on (2025-01-23 04:46:23 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 05:44:37 UTC): @nash-odoo @h4818 ci/runbot failed on this forward-port PR

"
2805879407,pull_request,open,,[IMP] pos_self_order: automatically enable preset in self demo data,"Before this commit:
===
- there was preset demo data was not enabled for self order

After this commit:
===
- updated preset demo data to default enabled in pos self order

Task: 4501570",djip-odoo,2025-01-23 04:25:16+00:00,[],2025-01-29 10:17:26+00:00,,https://github.com/odoo/odoo/pull/194777,"[('RD', 'research & development, internal work')]","[{'comment_id': 2608825709, 'issue_id': 2805879407, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194777.png)](https://mergebot.odoo.com/odoo/odoo/pull/194777)', 'created_at': datetime.datetime(2025, 1, 23, 4, 25, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621190114, 'issue_id': 2805879407, 'author': 'paso-odoo', 'body': ""> Seems Ok but can you check why the method `load_onboarding_restaurant_scenario` in pos_self_order didn't works ?\r\n> \r\n> Normally it should do the same thing as your changes\r\n\r\n@davidmonnom \r\nYes, you’re right. The `load_onboarding_restaurant_scenario` method didn’t work in `pos_self_order` initially because, at the time it was called by the restaurant module, `pos_self_order` was not yet installed but was still in the installation queue.\r\n\r\nWe could fix this by calling the function within `pos_self_order`'s data file, but I wouldn’t recommend it. This approach would trigger the function every time a new POS is created, continuously updating the predefined presets - which is incorrect, in my opinion.\r\nSo, we can remove the `load_onboarding_restaurant_scenario` method from the `pos_self_order`\r\nWhat do you suggest? \r\n\r\ncc - @djip-odoo"", 'created_at': datetime.datetime(2025, 1, 29, 10, 4, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:25:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194777.png)](https://mergebot.odoo.com/odoo/odoo/pull/194777)

paso-odoo on (2025-01-29 10:04:58 UTC): @davidmonnom 
Yes, you’re right. The `load_onboarding_restaurant_scenario` method didn’t work in `pos_self_order` initially because, at the time it was called by the restaurant module, `pos_self_order` was not yet installed but was still in the installation queue.

We could fix this by calling the function within `pos_self_order`'s data file, but I wouldn’t recommend it. This approach would trigger the function every time a new POS is created, continuously updating the predefined presets - which is incorrect, in my opinion.
So, we can remove the `load_onboarding_restaurant_scenario` method from the `pos_self_order`
What do you suggest? 

cc - @djip-odoo

"
2805879259,pull_request,closed,,[FW][FIX] mail: correctly restart scheduled message cron,"Before this commit, `mail.ir_cron_post_scheduled_message` fails with a traceback when there are a lot of scheduled messages to be sent.

Steps to reproduce
-----
1. Create a scheduled message from the chatter full composer
2. Duplicate it 50+ times
3. Run the scheduled action ""Mail: Post scheduled messages""
4. Traceback occurs
```
File ""/home/odoo/src/odoo/odoo/api.py"", line 553, in __new__
assert isinstance(cr, BaseCursor)
^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
```

Cause
-----
This commit (df18d5257cef737f3e1d245a8b85769e1fe1a032) introduced this cron which posts past-due scheduled messages with a default `limit=50`. If there are more messages than the limit, the cron is triggered again. However, there is a typo when restarting the cron that incorrectly calls `env`.

Solution
-----
Change the line to use `env.ref()` to correctly access the xml_id and restart the cron.

opw-4474171

Forward-Port-Of: odoo/odoo#194233",fw-bot,2025-01-23 04:25:07+00:00,[],2025-02-07 01:12:37+00:00,2025-01-24 01:10:55+00:00,https://github.com/odoo/odoo/pull/194776,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608825543, 'issue_id': 2805879259, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194776.png)](https://mergebot.odoo.com/odoo/odoo/pull/194776)', 'created_at': datetime.datetime(2025, 1, 23, 4, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608825551, 'issue_id': 2805879259, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 4, 25, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:25:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194776.png)](https://mergebot.odoo.com/odoo/odoo/pull/194776)

fw-bot (Issue Creator) on (2025-01-23 04:25:08 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805878918,pull_request,closed,,"[FW][IMP] point_of_sale, bus: ensure websocket connection","This commit ensures that the websocket connection is established when receiving a connect or initialized event.

This can happen in multitab use of Odoo.

Forward-Port-Of: odoo/odoo#194487
Forward-Port-Of: odoo/odoo#194343",fw-bot,2025-01-23 04:24:48+00:00,[],2025-02-07 04:30:56+00:00,2025-01-24 03:55:36+00:00,https://github.com/odoo/odoo/pull/194775,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2608825269, 'issue_id': 2805878918, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194775.png)](https://mergebot.odoo.com/odoo/odoo/pull/194775)', 'created_at': datetime.datetime(2025, 1, 23, 4, 24, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608825287, 'issue_id': 2805878918, 'author': 'fw-bot', 'body': '@davidmonnom @caburj cherrypicking of pull request odoo/odoo#194343 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/services/data_service.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js\nAuto-merging addons/point_of_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js\nAuto-merging addons/pos_adyen/static/src/app/services/pos_store.js\nAuto-merging addons/pos_event/static/src/app/services/pos_store.js\nAuto-merging addons/pos_mercado_pago/static/src/app/services/pos_store.js\nAuto-merging addons/pos_online_payment/static/src/app/services/pos_store.js\nAuto-merging addons/pos_viva_wallet/static/src/app/services/pos_store.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 4, 24, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610548358, 'issue_id': 2805878918, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 17, 43, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:24:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194775.png)](https://mergebot.odoo.com/odoo/odoo/pull/194775)

fw-bot (Issue Creator) on (2025-01-23 04:24:51 UTC): @davidmonnom @caburj cherrypicking of pull request odoo/odoo#194343 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/services/data_service.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/data_service.js
Auto-merging addons/point_of_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js
Auto-merging addons/pos_adyen/static/src/app/services/pos_store.js
Auto-merging addons/pos_event/static/src/app/services/pos_store.js
Auto-merging addons/pos_mercado_pago/static/src/app/services/pos_store.js
Auto-merging addons/pos_online_payment/static/src/app/services/pos_store.js
Auto-merging addons/pos_viva_wallet/static/src/app/services/pos_store.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

davidmonnom on (2025-01-23 17:43:06 UTC): @robodoo r+

"
2805867849,pull_request,closed,,[FW][FIX] pos_viva_wallet: mark endpoint as read/write,"Since #584a172, controller endpoints can specify `readonly=False` if they are expected to write to the DB. The webhook endpoint for Viva Wallet was previously not specified this way, which leads to a warning being logged.

This commit simply adds `readonly=False` to the webhook endpoint to prevent the warning.

task-4472274

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193371",fw-bot,2025-01-23 04:14:10+00:00,[],2025-02-06 16:48:28+00:00,2025-01-23 16:42:20+00:00,https://github.com/odoo/odoo/pull/194774,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608816452, 'issue_id': 2805867849, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194774.png)](https://mergebot.odoo.com/odoo/odoo/pull/194774)', 'created_at': datetime.datetime(2025, 1, 23, 4, 14, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608816459, 'issue_id': 2805867849, 'author': 'fw-bot', 'body': '@maxthewhale @Ysoroko this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194770\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 4, 14, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608844267, 'issue_id': 2805867849, 'author': 'fw-bot', 'body': '@maxthewhale @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 4, 43, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609857191, 'issue_id': 2805867849, 'author': 'MaxTheWhale', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 48, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:14:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194774.png)](https://mergebot.odoo.com/odoo/odoo/pull/194774)

fw-bot (Issue Creator) on (2025-01-23 04:14:12 UTC): @maxthewhale @Ysoroko this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194770

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 04:43:26 UTC): @maxthewhale @Ysoroko ci/runbot failed on this forward-port PR

MaxTheWhale on (2025-01-23 13:48:46 UTC): @robodoo r+

"
2805863969,pull_request,closed,,[FW][FIX] payment_worldline: make API request not depend on locale variable,"Versions
--------
- 18.0+

Steps
-----
1. Set locale variable `LC_TIME` to `be_FR.UTF-8` via command line;
2. do the same for `LC_ALL`;
3. start Odoo server;
4. attempt to make a payment via Worldline.

Example updating locale for a single shell session:
```bash
$ export LC_TIME=be_FR.UTF-8
$ export LC_ALL=$LC_TIME
$ ./odoo-bin
```

Issue
-----
Invalid API request: ACCESS_TO_MERCHANT_NOT_ALLOWED

Cause
-----
The date string sent to the Worldline API is formatted via the `datetime.strftime` method to be RFC 1123 compliant. The issue is that the result of this method is locale-dependent. If it's not set to `en_US.UTF-8`, it no longer adheres to the format expected by Worldline.

Solution
--------
Use the `format_date_time` method from the Python's standard `wsgiref` library. This method will always return a RFC 1123 compliant date string, regardless of locale setting.

opw-4472440

Forward-Port-Of: odoo/odoo#194004",fw-bot,2025-01-23 04:10:20+00:00,[],2025-02-06 15:33:43+00:00,2025-01-23 15:23:30+00:00,https://github.com/odoo/odoo/pull/194773,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608813427, 'issue_id': 2805863969, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194773.png)](https://mergebot.odoo.com/odoo/odoo/pull/194773)', 'created_at': datetime.datetime(2025, 1, 23, 4, 10, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608813438, 'issue_id': 2805863969, 'author': 'fw-bot', 'body': '@lvsz this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194769\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 4, 10, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609318047, 'issue_id': 2805863969, 'author': 'lvsz', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 9, 34, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 04:10:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194773.png)](https://mergebot.odoo.com/odoo/odoo/pull/194773)

fw-bot (Issue Creator) on (2025-01-23 04:10:21 UTC): @lvsz this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194769

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-23 09:34:32 UTC): @robodoo r+

"
2805827763,pull_request,closed,,[FW][FIX] l10n_in: hide QR if upi id is not set,"**Steps to reproduce:**
1) Select the QR Codes option in settings (IN Company)
2) Do not enter an upi id in the company profile.
3) Go to invoice and preview/print the invoice.
4) Show that QR code without upi id and upi logos visible.

**Cause:**
- The condition of the upi id is not properly set to hide the block if upi is not set.

**Fix:**
- With this PR, the upi QR code and upi logos will not be visible if the upi id is not set.

**task**-4426634

Forward-Port-Of: odoo/odoo#192068",fw-bot,2025-01-23 03:41:07+00:00,[],2025-02-06 10:31:55+00:00,2025-01-23 09:54:41+00:00,https://github.com/odoo/odoo/pull/194772,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608781427, 'issue_id': 2805827763, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194772.png)](https://mergebot.odoo.com/odoo/odoo/pull/194772)', 'created_at': datetime.datetime(2025, 1, 23, 3, 41, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608781433, 'issue_id': 2805827763, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 3, 41, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 03:41:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194772.png)](https://mergebot.odoo.com/odoo/odoo/pull/194772)

fw-bot (Issue Creator) on (2025-01-23 03:41:08 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805813052,pull_request,closed,,[FW][FIX] hw_drivers: detect Star printers again,"Our ""supported"" method filtering detected printers had a condition introduced in v17 which was too strict and filtering out the STAR printers, so they were never detected anymore.

This PR fixes this issue
related PR: #174436

Forward-Port-Of: odoo/odoo#190367",fw-bot,2025-01-23 03:26:07+00:00,[],2025-02-06 13:55:24+00:00,2025-01-23 13:45:32+00:00,https://github.com/odoo/odoo/pull/194771,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608768833, 'issue_id': 2805813052, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194771.png)](https://mergebot.odoo.com/odoo/odoo/pull/194771)', 'created_at': datetime.datetime(2025, 1, 23, 3, 26, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608768841, 'issue_id': 2805813052, 'author': 'fw-bot', 'body': '@Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194766\n* odoo/odoo#194763\n* odoo/odoo#194762\n* odoo/odoo#194754\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 3, 26, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608921584, 'issue_id': 2805813052, 'author': 'qle-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 5, 53, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 03:26:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194771.png)](https://mergebot.odoo.com/odoo/odoo/pull/194771)

fw-bot (Issue Creator) on (2025-01-23 03:26:09 UTC): @Ysoroko @qle-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194766
* odoo/odoo#194763
* odoo/odoo#194762
* odoo/odoo#194754

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

qle-odoo on (2025-01-23 05:53:39 UTC): @robodoo r+

"
2805784056,pull_request,closed,,[FW][FIX] pos_viva_wallet: mark endpoint as read/write,"Since #584a172, controller endpoints can specify `readonly=False` if they are expected to write to the DB. The webhook endpoint for Viva Wallet was previously not specified this way, which leads to a warning being logged.

This commit simply adds `readonly=False` to the webhook endpoint to prevent the warning.

task-4472274

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193371",fw-bot,2025-01-23 02:58:30+00:00,[],2025-02-07 01:12:38+00:00,2025-01-24 01:10:59+00:00,https://github.com/odoo/odoo/pull/194770,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608742967, 'issue_id': 2805784056, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194770.png)](https://mergebot.odoo.com/odoo/odoo/pull/194770)', 'created_at': datetime.datetime(2025, 1, 23, 2, 58, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608742976, 'issue_id': 2805784056, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 2, 58, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 02:58:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194770.png)](https://mergebot.odoo.com/odoo/odoo/pull/194770)

fw-bot (Issue Creator) on (2025-01-23 02:58:32 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805783758,pull_request,closed,,[FW][FIX] payment_worldline: make API request not depend on locale variable,"Versions
--------
- 18.0+

Steps
-----
1. Set locale variable `LC_TIME` to `be_FR.UTF-8` via command line;
2. do the same for `LC_ALL`;
3. start Odoo server;
4. attempt to make a payment via Worldline.

Example updating locale for a single shell session:
```bash
$ export LC_TIME=be_FR.UTF-8
$ export LC_ALL=$LC_TIME
$ ./odoo-bin
```

Issue
-----
Invalid API request: ACCESS_TO_MERCHANT_NOT_ALLOWED

Cause
-----
The date string sent to the Worldline API is formatted via the `datetime.strftime` method to be RFC 1123 compliant. The issue is that the result of this method is locale-dependent. If it's not set to `en_US.UTF-8`, it no longer adheres to the format expected by Worldline.

Solution
--------
Use the `format_date_time` method from the Python's standard `wsgiref` library. This method will always return a RFC 1123 compliant date string, regardless of locale setting.

opw-4472440

Forward-Port-Of: odoo/odoo#194004",fw-bot,2025-01-23 02:58:13+00:00,[],2025-02-06 13:26:41+00:00,2025-01-23 13:14:58+00:00,https://github.com/odoo/odoo/pull/194769,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608742701, 'issue_id': 2805783758, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194769.png)](https://mergebot.odoo.com/odoo/odoo/pull/194769)', 'created_at': datetime.datetime(2025, 1, 23, 2, 58, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608742712, 'issue_id': 2805783758, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 2, 58, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 02:58:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194769.png)](https://mergebot.odoo.com/odoo/odoo/pull/194769)

fw-bot (Issue Creator) on (2025-01-23 02:58:15 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805771093,pull_request,closed,,[FW][IMP] crm: add link to Ringover in settings,"We now partner with Ringover to provide VOIP capabilities using a browser extension for integration.

We add a link to that extension in the ""integrations"".

This is done in CRM because this is the most relevant app for VOIP usage.

task-4488082

Forward-Port-Of: odoo/odoo#194678",fw-bot,2025-01-23 02:45:35+00:00,[],2025-02-06 13:55:25+00:00,2025-01-23 13:45:37+00:00,https://github.com/odoo/odoo/pull/194768,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608731295, 'issue_id': 2805771093, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194768.png)](https://mergebot.odoo.com/odoo/odoo/pull/194768)', 'created_at': datetime.datetime(2025, 1, 23, 2, 45, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608731303, 'issue_id': 2805771093, 'author': 'fw-bot', 'body': '@reth-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194764\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 2, 45, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609008810, 'issue_id': 2805771093, 'author': 'reth-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 7, 1, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 02:45:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194768.png)](https://mergebot.odoo.com/odoo/odoo/pull/194768)

fw-bot (Issue Creator) on (2025-01-23 02:45:37 UTC): @reth-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194764

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

reth-odoo on (2025-01-23 07:01:39 UTC): @robodoo r+

"
2805756102,pull_request,closed,,[FW][FIX] l10n_in: hide QR if upi id is not set,"**Steps to reproduce:**
1) Select the QR Codes option in settings (IN Company)
2) Do not enter an upi id in the company profile.
3) Go to invoice and preview/print the invoice.
4) Show that QR code without upi id and upi logos visible.

**Cause:**
- The condition of the upi id is not properly set to hide the block if upi is not set.

**Fix:**
- With this PR, the upi QR code and upi logos will not be visible if the upi id is not set.

**task**-4426634

Forward-Port-Of: odoo/odoo#192068",fw-bot,2025-01-23 02:30:18+00:00,[],2025-02-06 10:31:53+00:00,2025-01-23 09:53:34+00:00,https://github.com/odoo/odoo/pull/194767,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608717439, 'issue_id': 2805756102, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194767.png)](https://mergebot.odoo.com/odoo/odoo/pull/194767)', 'created_at': datetime.datetime(2025, 1, 23, 2, 30, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608717458, 'issue_id': 2805756102, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 2, 30, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 02:30:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194767.png)](https://mergebot.odoo.com/odoo/odoo/pull/194767)

fw-bot (Issue Creator) on (2025-01-23 02:30:20 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805733847,pull_request,closed,,[FW][FIX] hw_drivers: detect Star printers again,"Our ""supported"" method filtering detected printers had a condition introduced in v17 which was too strict and filtering out the STAR printers, so they were never detected anymore.

This PR fixes this issue
related PR: #174436

Forward-Port-Of: odoo/odoo#190367",fw-bot,2025-01-23 02:08:03+00:00,[],2025-02-06 13:26:34+00:00,2025-01-23 13:14:14+00:00,https://github.com/odoo/odoo/pull/194766,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608696716, 'issue_id': 2805733847, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194766.png)](https://mergebot.odoo.com/odoo/odoo/pull/194766)', 'created_at': datetime.datetime(2025, 1, 23, 2, 8, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608696726, 'issue_id': 2805733847, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 2, 8, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 02:08:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194766.png)](https://mergebot.odoo.com/odoo/odoo/pull/194766)

fw-bot (Issue Creator) on (2025-01-23 02:08:05 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805688936,pull_request,open,,[IMP] l10n_cn: Chart Templates improvement,"Improve both chart templates by reworking them to
better follow the ASBE and ASSBE account lists.

task-3386893

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",vin-odoo,2025-01-23 01:31:50+00:00,[],2025-02-04 05:44:52+00:00,,https://github.com/odoo/odoo/pull/194765,"[('RD', 'research & development, internal work')]","[{'comment_id': 2608653316, 'issue_id': 2805688936, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194765.png)](https://mergebot.odoo.com/odoo/odoo/pull/194765)', 'created_at': datetime.datetime(2025, 1, 23, 1, 31, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608653535, 'issue_id': 2805688936, 'author': 'vin-odoo', 'body': 'Note: missing translations will be added shortly', 'created_at': datetime.datetime(2025, 1, 23, 1, 32, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 01:31:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194765.png)](https://mergebot.odoo.com/odoo/odoo/pull/194765)

vin-odoo (Issue Creator) on (2025-01-23 01:32:07 UTC): Note: missing translations will be added shortly

"
2805686413,pull_request,closed,,[FW][IMP] crm: add link to Ringover in settings,"We now partner with Ringover to provide VOIP capabilities using a browser extension for integration.

We add a link to that extension in the ""integrations"".

This is done in CRM because this is the most relevant app for VOIP usage.

task-4488082

Forward-Port-Of: odoo/odoo#194678",fw-bot,2025-01-23 01:29:18+00:00,[],2025-02-06 13:26:35+00:00,2025-01-23 13:14:18+00:00,https://github.com/odoo/odoo/pull/194764,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608650773, 'issue_id': 2805686413, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194764.png)](https://mergebot.odoo.com/odoo/odoo/pull/194764)', 'created_at': datetime.datetime(2025, 1, 23, 1, 29, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608650783, 'issue_id': 2805686413, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 1, 29, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 01:29:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194764.png)](https://mergebot.odoo.com/odoo/odoo/pull/194764)

fw-bot (Issue Creator) on (2025-01-23 01:29:20 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805650285,pull_request,closed,,[FW][FIX] hw_drivers: detect Star printers again,"Our ""supported"" method filtering detected printers had a condition introduced in v17 which was too strict and filtering out the STAR printers, so they were never detected anymore.

This PR fixes this issue
related PR: #174436

Forward-Port-Of: odoo/odoo#190367",fw-bot,2025-01-23 00:55:00+00:00,[],2025-02-06 09:00:32+00:00,2025-01-23 08:44:02+00:00,https://github.com/odoo/odoo/pull/194763,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608606793, 'issue_id': 2805650285, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194763.png)](https://mergebot.odoo.com/odoo/odoo/pull/194763)', 'created_at': datetime.datetime(2025, 1, 23, 0, 55, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608606808, 'issue_id': 2805650285, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 23, 0, 55, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-23 00:55:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194763.png)](https://mergebot.odoo.com/odoo/odoo/pull/194763)

fw-bot (Issue Creator) on (2025-01-23 00:55:03 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805547520,pull_request,closed,,[FW][FIX] hw_drivers: detect Star printers again,"Our ""supported"" method filtering detected printers had a condition introduced in v17 which was too strict and filtering out the STAR printers, so they were never detected anymore.

This PR fixes this issue
related PR: #174436

Forward-Port-Of: odoo/odoo#190367",fw-bot,2025-01-22 23:30:12+00:00,[],2025-02-06 07:23:42+00:00,2025-01-23 07:11:04+00:00,https://github.com/odoo/odoo/pull/194762,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608478671, 'issue_id': 2805547520, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194762.png)](https://mergebot.odoo.com/odoo/odoo/pull/194762)', 'created_at': datetime.datetime(2025, 1, 22, 23, 30, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608478680, 'issue_id': 2805547520, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 30, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:30:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194762.png)](https://mergebot.odoo.com/odoo/odoo/pull/194762)

fw-bot (Issue Creator) on (2025-01-22 23:30:14 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805518758,pull_request,closed,,[FW][FIX] l10n_in_ewaybill: LazyGettext traceback and missing response,"on generating ewaybill through irn following traceback is produced
```py
Traceback (most recent call last):
  File ""/home/odoo/src/odoo/saas-18.1/odoo/http.py"", line 1997, in _transactioning
    return service_model.retrying(func, env=self.env)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/service/model.py"", line 137, in retrying
    result = func()
             ^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/http.py"", line 1964, in _serve_ir_http
    response = self.dispatcher.dispatch(rule.endpoint, args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/http.py"", line 2214, in dispatch
    result = self.request.registry['ir.http']._dispatch(endpoint)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/addons/base/models/ir_http.py"", line 334, in _dispatch
    result = endpoint(**request.params)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/http.py"", line 733, in route_wrapper
    result = endpoint(self, *args, **params_ok)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/addons/web/controllers/dataset.py"", line 36, in call_button
    action = call_kw(request.env[model], method, args, kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/odoo/service/model.py"", line 62, in call_kw
    result = getattr(recs, name)(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/addons/l10n_in_ewaybill_irn/models/l10n_in_ewaybill.py"", line 49, in action_generate_ewaybill
    ewaybill._generate_ewaybill_by_irn()
  File ""/home/odoo/src/odoo/saas-18.1/addons/l10n_in_ewaybill_irn/models/l10n_in_ewaybill.py"", line 56, in _generate_ewaybill_by_irn
    response = self._ewaybill_generate_by_irn(self._ewaybill_generate_irn_json())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/home/odoo/src/odoo/saas-18.1/addons/l10n_in_ewaybill_irn/models/l10n_in_ewaybill.py"", line 128, in _ewaybill_generate_by_irn
    'message': EWayBillApi.DEFAULT_HELP_MESSAGE % 'generated',
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for %: 'LazyGettext' and 'str'
```
In this commit, we fix the above traceback and also fixes a line where the response was not overriden on the next request



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194546",fw-bot,2025-01-22 23:05:44+00:00,[],2025-02-06 13:55:23+00:00,2025-01-23 13:45:27+00:00,https://github.com/odoo/odoo/pull/194761,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608446744, 'issue_id': 2805518758, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194761.png)](https://mergebot.odoo.com/odoo/odoo/pull/194761)', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608446754, 'issue_id': 2805518758, 'author': 'fw-bot', 'body': '@hamo-odoo @jco-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608498519, 'issue_id': 2805518758, 'author': 'fw-bot', 'body': '@hamo-odoo @jco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 23, 49, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608885645, 'issue_id': 2805518758, 'author': 'robodoo', 'body': '@hamo-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 23, 5, 24, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:05:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194761.png)](https://mergebot.odoo.com/odoo/odoo/pull/194761)

fw-bot (Issue Creator) on (2025-01-22 23:05:46 UTC): @hamo-odoo @jco-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 23:49:39 UTC): @hamo-odoo @jco-odoo ci/runbot failed on this forward-port PR

robodoo on (2025-01-23 05:24:25 UTC): @hamo-odoo you may want to rebuild or fix this PR as it has failed CI.

"
2805518300,pull_request,closed,,[FW][FIX] account_peppol: key was never sent right so remove its use,"`accounting_supplier_party` was never sent right from IAP, it was always 'None'.
So, we could never log it.
But the information was in fact always useless. 
This information is already in the UBL file.




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194410
Forward-Port-Of: odoo/odoo#192740",fw-bot,2025-01-22 23:05:18+00:00,[],2025-02-06 15:33:47+00:00,2025-01-23 15:23:49+00:00,https://github.com/odoo/odoo/pull/194760,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608446202, 'issue_id': 2805518300, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194760.png)](https://mergebot.odoo.com/odoo/odoo/pull/194760)', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608446216, 'issue_id': 2805518300, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608526099, 'issue_id': 2805518300, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 0, 6, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689540, 'issue_id': 2805518300, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609471248, 'issue_id': 2805518300, 'author': 'gawa-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 43, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:05:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194760.png)](https://mergebot.odoo.com/odoo/odoo/pull/194760)

fw-bot (Issue Creator) on (2025-01-22 23:05:20 UTC): @gawa-odoo @clbr-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 00:06:20 UTC): @gawa-odoo @clbr-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 02:01:28 UTC): @gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).

gawa-odoo on (2025-01-23 10:43:34 UTC): @robodoo r+

"
2805517998,pull_request,closed,,[FW][FIX] base_import: stop importing when everything has been imported,"Versions
--------
- 17.0+

Steps
-----
1. Create a pricelist with 200 price rules;
2. export pricelist to xlsx;
3. delete original pricelist;
4. import pricelist, setting batch size to 100.

Test files ready for import:
- [200_products.xlsx](https://github.com/user-attachments/files/17848187/200_products.xlsx)
- [200_pricelist_rules.xlsx](https://github.com/user-attachments/files/17848188/200_pricelist_rules.xlsx)

Issue
-----
Pricelist is imported with 400 price rules.

Cause
-----
The back-end signals there's nothing left to import by having `nextrow` be falsy[^1]. The front-end ignores this, and continues looping until it's taken as many steps as it initially planned.

The upfront `totalSteps` calculation is too high when an imported record has a number of nested relational records that's larger than the batch size.

Solution
--------
If the ORM returns a falsy `nextrow` value, call `stopImport`.

opw-4164056

[^1]: see note on f58368210c9c

Forward-Port-Of: odoo/odoo#194047
Forward-Port-Of: odoo/odoo#188092",fw-bot,2025-01-22 23:05:00+00:00,[],2025-02-06 16:48:25+00:00,2025-01-23 16:42:04+00:00,https://github.com/odoo/odoo/pull/194759,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608445864, 'issue_id': 2805517998, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194759.png)](https://mergebot.odoo.com/odoo/odoo/pull/194759)', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608445877, 'issue_id': 2805517998, 'author': 'fw-bot', 'body': '@lvsz @iucapad this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 5, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608497788, 'issue_id': 2805517998, 'author': 'fw-bot', 'body': '@lvsz @iucapad ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 23, 48, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689721, 'issue_id': 2805517998, 'author': 'fw-bot', 'body': '@lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609829476, 'issue_id': 2805517998, 'author': 'lvsz', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 36, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:05:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194759.png)](https://mergebot.odoo.com/odoo/odoo/pull/194759)

fw-bot (Issue Creator) on (2025-01-22 23:05:02 UTC): @lvsz @iucapad this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 23:48:49 UTC): @lvsz @iucapad ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 02:01:40 UTC): @lvsz @iucapad this forward port of odoo/odoo#188092 is awaiting action (not merged or closed).

lvsz on (2025-01-23 13:36:20 UTC): @robodoo r+

"
2805517679,pull_request,closed,,[FW][FIX] hr_holidays: fix the allocation approval,"- fix the `hr_leave_allocation_rule_employee_update` rule to include `('manager','both') in validation_type` instead of `hr` as those are the types where the emoployee's manager should be able to update
- fix `_check_approval_update` function to match the designed access rules where TOO only approve `hr` and validate `both` and manager approvre `manager, both`

Task: 4432503



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194554
Forward-Port-Of: odoo/odoo#191808",fw-bot,2025-01-22 23:04:43+00:00,[],2025-02-06 16:48:18+00:00,2025-01-23 16:41:23+00:00,https://github.com/odoo/odoo/pull/194758,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608445721, 'issue_id': 2805517679, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194758.png)](https://mergebot.odoo.com/odoo/odoo/pull/194758)', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608445731, 'issue_id': 2805517679, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608519718, 'issue_id': 2805517679, 'author': 'fw-bot', 'body': '@amah-odoo @Bertrand2 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 23, 0, 1, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609696703, 'issue_id': 2805517679, 'author': 'amah-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 12, 33, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:04:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194758.png)](https://mergebot.odoo.com/odoo/odoo/pull/194758)

fw-bot (Issue Creator) on (2025-01-22 23:04:54 UTC): @amah-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 00:01:33 UTC): @amah-odoo @Bertrand2 ci/runbot failed on this forward-port PR

amah-odoo on (2025-01-23 12:33:46 UTC): @robodoo r+

"
2805517398,pull_request,closed,,[FW][IMP] point_of_sale: partner list infinite scroll,"Fix multiple issues with partner list :
- The list was not updated when scrolling down
- When searching customers, the partner list could contains duplicate (because before this commit a `Set` structure was used to store objects. This wasn't working as expecting because in JS a Set use references of objects to compare them (now we use a set to store unique IDs).
- Traceback occured when following these steps :
   - Open ""Customer"" popup
   - Type ""ss""
   - Press ""enter"" => Traceback

Here is how it works now:
- When reaching 80% (scroll) of the partner list, we fetch 100 more partners and add them to the list
- When typing in search bar: search inside the fetched partner list
- Press enter in search bar: fetch new customer matching the search from database

task-id: 4489331

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194710",fw-bot,2025-01-22 23:04:26+00:00,[],2025-02-06 15:33:51+00:00,2025-01-23 15:24:14+00:00,https://github.com/odoo/odoo/pull/194757,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2608445685, 'issue_id': 2805517398, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194757.png)](https://mergebot.odoo.com/odoo/odoo/pull/194757)', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608445701, 'issue_id': 2805517398, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom cherrypicking of pull request odoo/odoo#194710 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/res_partner.py\nAuto-merging addons/point_of_sale/static/src/app/screens/partner_list/partner_list.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/partner_list/partner_list.js\nAuto-merging addons/point_of_sale/static/src/app/screens/partner_list/partner_list.xml\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/partner_list/partner_list.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609598215, 'issue_id': 2805517398, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 11, 43, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:04:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194757.png)](https://mergebot.odoo.com/odoo/odoo/pull/194757)

fw-bot (Issue Creator) on (2025-01-22 23:04:52 UTC): @manv-afk @davidmonnom cherrypicking of pull request odoo/odoo#194710 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/res_partner.py
Auto-merging addons/point_of_sale/static/src/app/screens/partner_list/partner_list.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/partner_list/partner_list.js
Auto-merging addons/point_of_sale/static/src/app/screens/partner_list/partner_list.xml
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/partner_list/partner_list.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-23 11:43:51 UTC): @robodoo r+

"
2805516898,pull_request,closed,,[FW][FIX] website_slides: adjust quiz question spacing layout,"This commit resolves an issue with the quiz question section:
- Excessive white space when creating a new record.
- Overly wide layout in existing records, requiring horizontal scrolling.

**Technical**:
In grid groups, the layout enforces two columns:
- A smaller left column (max 150px).
- A right column that occupies the remaining space. 

When adding an element with nolabel=""1"", it occupies only one part of the grid.
To span the full width, colspan=""2"" must be explicitly set.

Ref - https://github.com/odoo/odoo/commit/8df2049f170a739c535f6a18aa1fa5775289d972

Task-4435075

Forward-Port-Of: odoo/odoo#192014",fw-bot,2025-01-22 23:03:59+00:00,[],2025-02-06 13:55:23+00:00,2025-01-23 13:45:23+00:00,https://github.com/odoo/odoo/pull/194756,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2608445623, 'issue_id': 2805516898, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194756.png)](https://mergebot.odoo.com/odoo/odoo/pull/194756)', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608445634, 'issue_id': 2805516898, 'author': 'fw-bot', 'body': '@yagp-odoo @flch-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 23, 4, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608501436, 'issue_id': 2805516898, 'author': 'fw-bot', 'body': '@yagp-odoo @flch-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 23, 52, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608908975, 'issue_id': 2805516898, 'author': 'yagp-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 5, 42, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 23:04:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194756.png)](https://mergebot.odoo.com/odoo/odoo/pull/194756)

fw-bot (Issue Creator) on (2025-01-22 23:04:50 UTC): @yagp-odoo @flch-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 23:52:23 UTC): @yagp-odoo @flch-odoo ci/runbot failed on this forward-port PR

yagp-odoo on (2025-01-23 05:42:10 UTC): @robodoo r+

"
2805463371,pull_request,closed,,[FIX] mail: msg post in group chat with mention shows blue bubble,"Before this commit, when posting a message with a `@` mention in group chat, the message had blue bubble instead of green bubble. This color means that the message is not recognized as a self message.

Steps to reproduce:
- make group chat
- post a message with `@` mention
=> the message bubble is blue rather than green

This problem is a consequence of https://github.com/odoo/odoo/pull/176758 In this PR, when mentioning from any channel, the `groups_id` of partners from mention suggestions could be returned. If the users are in the group of group_public of channel, this means these partners could be invited in the channel. This is useful to make them elligible for `@` mention even when they are not member. This partial knowledge of the group id of partner is provided to client code so that the suggestions are shown too, since the list results in the JS modeling.

This PR however introduced a silent crash in JS code from this LOC: https://github.com/odoo/odoo/pull/176758/files#diff-515b5eba2d7fbff9826774f16c701063cfd9c95967287eaec36b16db66ef8c48R102

The server data may send `[ADD, null]` for partner `groups_id`, which is the case in group chat. The internal code of JS models does not expect this kind of command data: it crashes because `ADD` command assumes the other part is genuine data or record(s). However `null` means nothingness, so internally the `target` is missing thus it leads to a crash in the internal code of JS models.

Why is the crash not bubbled then? Well, this is silently ignored in business code by the fetch mention function, in `fetchSuggestions`.

The silent crash is suspicious, but not necessarily the primary cause of the problem... No no no. Internal code of JS models has made a bigger sin: the silent crash aborts the pending update cycle, thus not flushing it. This is a huge problem, because the implementation of update cycle is made in a way that its integrity depends on no crash during the update cycle. That's because the synchronous processing of update cycle defines layers of update cycle with a
global counter that is incremented and decremented. The 1st update cycle layer manages the flush, while the other layers do the operations without flush.

If there's a crash during the update cycle, the update cycle is aborted but its counter is preserved. Let's say the counter is 4: that means the update queues are never flushed, because the only way to change this value is through `MAKE_UPDATE`, and this function only preserves its value or temporarily increases it.

So what's the deal with the green bubble being blue? Well, there's a computed field `isSelfAuthored` that was never computed because of the silent crash. Thus it had the default value `false` rather than `true` for self messages.

While the symptoms show blue bubble instead of green bubble, which feels cute but not a big deal... This was actually a side-effect of a much much bigger issue that compromises the overall modeling of JS. Yes, that's like having an eye tickling, thinking that we're just tired but it's actually a symptom of final stage cancer.

Do not worry though: this commit doesn't cure cancer, but it fixes this problem as follow: `fetchSuggestions` in business code should not silently catch non-abort errors, and bubble it.",alexkuhn,2025-01-22 22:18:33+00:00,[],2025-01-25 11:45:08+00:00,2025-01-24 22:09:53+00:00,https://github.com/odoo/odoo/pull/194755,"[('RD', 'research & development, internal work')]","[{'comment_id': 2608386165, 'issue_id': 2805463371, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194755.png)](https://mergebot.odoo.com/odoo/odoo/pull/194755)', 'created_at': datetime.datetime(2025, 1, 22, 22, 18, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609327706, 'issue_id': 2805463371, 'author': 'seb-odoo', 'body': ""I'm not sure we need to add these checks. It feels like useless complexity and more risks of breaking stuff.\r\nWe are expecting correct data. If nulls are not supposed to happen, we should crash immediately when receiving them.\r\ncatch in `fetchSuggestions` is bad and should be adapted to re-throw except in the specific case it was meant to handle."", 'created_at': datetime.datetime(2025, 1, 23, 9, 39, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 22:18:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194755.png)](https://mergebot.odoo.com/odoo/odoo/pull/194755)

seb-odoo on (2025-01-23 09:39:01 UTC): I'm not sure we need to add these checks. It feels like useless complexity and more risks of breaking stuff.
We are expecting correct data. If nulls are not supposed to happen, we should crash immediately when receiving them.
catch in `fetchSuggestions` is bad and should be adapted to re-throw except in the specific case it was meant to handle.

"
2805439888,pull_request,closed,,[FW][FIX] hw_drivers: detect Star printers again,"Our ""supported"" method filtering detected printers had a condition introduced in v17 which was too strict and filtering out the STAR printers, so they were never detected anymore.

This PR fixes this issue
related PR: #174436

Forward-Port-Of: odoo/odoo#190367",fw-bot,2025-01-22 22:01:00+00:00,[],2025-02-06 07:23:41+00:00,2025-01-23 07:08:52+00:00,https://github.com/odoo/odoo/pull/194754,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2608360062, 'issue_id': 2805439888, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194754.png)](https://mergebot.odoo.com/odoo/odoo/pull/194754)', 'created_at': datetime.datetime(2025, 1, 22, 22, 1, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608360079, 'issue_id': 2805439888, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 22, 1, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 22:01:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194754.png)](https://mergebot.odoo.com/odoo/odoo/pull/194754)

fw-bot (Issue Creator) on (2025-01-22 22:01:02 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805425668,pull_request,closed,,[FW][FIX] point_of_sale: add additional field in product loader,"Issue -->

Using the 'product.product.name' field in loyalty.reward.discount_product_domain that is not added via the `_loader_params_product_product` loader causes an error in the matchCondition function
https://github.com/odoo/odoo/blob/9b0f528aa02743372934df8e64d1cc0ad74903b6/addons/web/static/src/core/domain.js#L331 where variable fieldValue is undefined if the field is not available.

Solution -->

Adding the `name` field search parameters in the `_loader_params_product_product` similar to https://github.com/odoo/odoo/pull/186804

opw-4410460

Forward-Port-Of: odoo/odoo#194688
Forward-Port-Of: odoo/odoo#194637",fw-bot,2025-01-22 21:53:36+00:00,[],2025-01-22 22:52:44+00:00,2025-01-22 22:52:20+00:00,https://github.com/odoo/odoo/pull/194753,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2608348539, 'issue_id': 2805425668, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194753.png)](https://mergebot.odoo.com/odoo/odoo/pull/194753)', 'created_at': datetime.datetime(2025, 1, 22, 21, 53, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608348557, 'issue_id': 2805425668, 'author': 'fw-bot', 'body': '@adda-odoo @davidmonnom cherrypicking of pull request odoo/odoo#194637 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_session.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 21, 53, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608430838, 'issue_id': 2805425668, 'author': 'adda-odoo', 'body': '`name` is available in this version and higher here -->\r\nhttps://github.com/odoo/odoo/blob/8c3f4b9dff215260033795617edda3ac718d3fdb/addons/point_of_sale/models/product.py#L110', 'created_at': datetime.datetime(2025, 1, 22, 22, 52, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 21:53:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194753.png)](https://mergebot.odoo.com/odoo/odoo/pull/194753)

fw-bot (Issue Creator) on (2025-01-22 21:53:38 UTC): @adda-odoo @davidmonnom cherrypicking of pull request odoo/odoo#194637 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_session.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adda-odoo on (2025-01-22 22:52:43 UTC): `name` is available in this version and higher here -->
https://github.com/odoo/odoo/blob/8c3f4b9dff215260033795617edda3ac718d3fdb/addons/point_of_sale/models/product.py#L110

"
2805345667,pull_request,closed,,"[FIX] point_of_sale, pos_sale: fix lots selection in POS","Lots selection in POS was not working properly. It was not takin into account lot quantity when selecting it.


",davidmonnom,2025-01-22 21:06:17+00:00,[],2025-01-23 09:20:41+00:00,2025-01-23 09:20:41+00:00,https://github.com/odoo/odoo/pull/194752,"[('RD', 'research & development, internal work')]","[{'comment_id': 2608269889, 'issue_id': 2805345667, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194752.png)](https://mergebot.odoo.com/odoo/odoo/pull/194752)', 'created_at': datetime.datetime(2025, 1, 22, 21, 6, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609129244, 'issue_id': 2805345667, 'author': 'caburj', 'body': 'This is a full revamp, kindly do this in master. Here in stable, just patch the specific issue.', 'created_at': datetime.datetime(2025, 1, 23, 8, 18, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 21:06:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194752.png)](https://mergebot.odoo.com/odoo/odoo/pull/194752)

caburj on (2025-01-23 08:18:01 UTC): This is a full revamp, kindly do this in master. Here in stable, just patch the specific issue.

"
2805288694,pull_request,closed,,[FW][17.0][FIX] mail: Render message actions correctly with callComponent,"**Description of the issue/feature this PR addresses:**
When a custom module (e.g., [OCA/social#1536](https://github.com/OCA/social/pull/1536)) adds a new message action using `callComponent`, it is not invoked in certain scenarios.

**Current behavior before PR:**

Odoo only invokes `callComponent` for `quick actions` (2 or 3 actions). For remaining actions rendered as `DropdownItem`, the `callComponent` is not invoked.

**Desired behavior after PR is merged:**

This commit ensures consistent rendering behavior, invoking the `callComponent` for all actions, whether quick actions or dropdown items.

Complementary to: https://github.com/odoo/odoo/pull/131426


@phenix-factory @alexkuhn coud you please review this?

CC @pedrobaeza @chienandalu 

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194643",fw-bot,2025-01-22 20:31:48+00:00,[],2025-01-25 20:13:52+00:00,2025-01-25 19:47:52+00:00,https://github.com/odoo/odoo/pull/194751,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2608205973, 'issue_id': 2805288694, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194751.png)](https://mergebot.odoo.com/odoo/odoo/pull/194751)', 'created_at': datetime.datetime(2025, 1, 22, 20, 31, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608205990, 'issue_id': 2805288694, 'author': 'fw-bot', 'body': '@celm1990 @alexkuhn cherrypicking of pull request odoo/odoo#194643 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/core/common/message.xml\nCONFLICT (content): Merge conflict in addons/mail/static/src/core/common/message.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 20, 31, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614041050, 'issue_id': 2805288694, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 25, 17, 34, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 20:31:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194751.png)](https://mergebot.odoo.com/odoo/odoo/pull/194751)

fw-bot (Issue Creator) on (2025-01-22 20:31:55 UTC): @celm1990 @alexkuhn cherrypicking of pull request odoo/odoo#194643 failed.

stdout:
```
Auto-merging addons/mail/static/src/core/common/message.xml
CONFLICT (content): Merge conflict in addons/mail/static/src/core/common/message.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-25 17:34:35 UTC): @robodoo r+

"
2805209551,pull_request,closed,,[FW][FIX] web: hide tooltip on html fields in calendar popover,"To reproduce:
=============
- create an event on calendar with description containing html
- on calendar view, click on the event to open the popover and hover on the description field
-> the tooltip is displayed with raw html content

Fix:
====
hide the tooltip on html fields in calendar popover as it's not needed

opw-4356581
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194605
Forward-Port-Of: odoo/odoo#192104",fw-bot,2025-01-22 19:44:51+00:00,[],2025-02-07 22:34:16+00:00,2025-01-24 22:03:16+00:00,https://github.com/odoo/odoo/pull/194750,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2608121978, 'issue_id': 2805209551, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194750.png)](https://mergebot.odoo.com/odoo/odoo/pull/194750)', 'created_at': datetime.datetime(2025, 1, 22, 19, 44, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608122066, 'issue_id': 2805209551, 'author': 'fw-bot', 'body': '@abla001 @aab-odoo cherrypicking of pull request odoo/odoo#192104 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/web/static/tests/views/calendar/calendar_view_tests.js deleted in 396da4ebf723d96ff069075aee4819c8895fc290 and modified in 2ffe9869ed27d186b5057639fc85bf9be36f7030.  Version 2ffe9869ed27d186b5057639fc85bf9be36f7030 of addons/web/static/tests/views/calendar/calendar_view_tests.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 19, 44, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613339038, 'issue_id': 2805209551, 'author': 'abla001', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 20, 37, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 19:44:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194750.png)](https://mergebot.odoo.com/odoo/odoo/pull/194750)

fw-bot (Issue Creator) on (2025-01-22 19:44:55 UTC): @abla001 @aab-odoo cherrypicking of pull request odoo/odoo#192104 failed.

stdout:
```
CONFLICT (modify/delete): addons/web/static/tests/views/calendar/calendar_view_tests.js deleted in 396da4ebf723d96ff069075aee4819c8895fc290 and modified in 2ffe9869ed27d186b5057639fc85bf9be36f7030.  Version 2ffe9869ed27d186b5057639fc85bf9be36f7030 of addons/web/static/tests/views/calendar/calendar_view_tests.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

abla001 on (2025-01-24 20:37:28 UTC): @robodoo r+

"
2805077393,pull_request,closed,,[FW][FIX] web: hide tooltip on html fields in calendar popover,"To reproduce:
=============
- create an event on calendar with description containing html
- on calendar view, click on the event to open the popover and hover on the description field
-> the tooltip is displayed with raw html content

Fix:
====
hide the tooltip on html fields in calendar popover as it's not needed

opw-4356581
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194605
Forward-Port-Of: odoo/odoo#192104",fw-bot,2025-01-22 18:29:18+00:00,[],2025-02-06 10:31:52+00:00,2025-01-23 09:53:25+00:00,https://github.com/odoo/odoo/pull/194749,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607977263, 'issue_id': 2805077393, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194749.png)](https://mergebot.odoo.com/odoo/odoo/pull/194749)', 'created_at': datetime.datetime(2025, 1, 22, 18, 29, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607977288, 'issue_id': 2805077393, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 18, 29, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608122002, 'issue_id': 2805077393, 'author': 'fw-bot', 'body': '@abla001 @aab-odoo the next pull request (odoo/odoo#194750) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 19, 44, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 18:29:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194749.png)](https://mergebot.odoo.com/odoo/odoo/pull/194749)

fw-bot (Issue Creator) on (2025-01-22 18:29:20 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 19:44:54 UTC): @abla001 @aab-odoo the next pull request (odoo/odoo#194750) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2805066218,pull_request,open,,18.0 hide location selector if one location shrm vcr,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",chevalierv,2025-01-22 18:25:22+00:00,[],2025-01-22 19:00:11+00:00,,https://github.com/odoo/odoo/pull/194748,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607960790, 'issue_id': 2805066218, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194748.png)](https://mergebot.odoo.com/odoo/odoo/pull/194748)', 'created_at': datetime.datetime(2025, 1, 22, 18, 25, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 18:25:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194748.png)](https://mergebot.odoo.com/odoo/odoo/pull/194748)

"
2805062126,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194718
Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-22 18:23:03+00:00,[],2025-01-23 11:39:40+00:00,2025-01-23 11:11:09+00:00,https://github.com/odoo/odoo/pull/194747,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607956593, 'issue_id': 2805062126, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194747.png)](https://mergebot.odoo.com/odoo/odoo/pull/194747)', 'created_at': datetime.datetime(2025, 1, 22, 18, 23, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607956666, 'issue_id': 2805062126, 'author': 'fw-bot', 'body': '@rmun-odoo @tivisse cherrypicking of pull request odoo/odoo#190944 failed.\n\nstdout:\n```\nAuto-merging addons/hr_holidays/models/hr_leave.py\nAuto-merging addons/hr_holidays/tests/test_leave_requests.py\nCONFLICT (content): Merge conflict in addons/hr_holidays/tests/test_leave_requests.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 18, 23, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609113803, 'issue_id': 2805062126, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 9, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 18:23:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194747.png)](https://mergebot.odoo.com/odoo/odoo/pull/194747)

fw-bot (Issue Creator) on (2025-01-22 18:23:06 UTC): @rmun-odoo @tivisse cherrypicking of pull request odoo/odoo#190944 failed.

stdout:
```
Auto-merging addons/hr_holidays/models/hr_leave.py
Auto-merging addons/hr_holidays/tests/test_leave_requests.py
CONFLICT (content): Merge conflict in addons/hr_holidays/tests/test_leave_requests.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-23 08:09:32 UTC): @robodoo r+

"
2804962339,pull_request,open,,[FW][FIX] purchase_stock: handle view replacement in action_add_from_catalog,"Description of the issue/feature this PR addresses:
The method action_add_from_catalog in purchase_stock replaces the product's kanban view with a purchase-specific one. This method directly replaces the first view in the list, which could be wrong if another module changes the default view of the catalog.

This commit updates the method to replace only the kanban view, ensuring that other view types are preserved correctly.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#182918
Forward-Port-Of: odoo/odoo#175438",fw-bot,2025-01-22 17:29:38+00:00,[],2025-01-22 18:17:18+00:00,,https://github.com/odoo/odoo/pull/194745,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607847310, 'issue_id': 2804962339, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194745.png)](https://mergebot.odoo.com/odoo/odoo/pull/194745)', 'created_at': datetime.datetime(2025, 1, 22, 17, 29, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607847335, 'issue_id': 2804962339, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 17, 29, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607944703, 'issue_id': 2804962339, 'author': 'fw-bot', 'body': '@Bruno-Zanotti @amoyaux ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 18, 17, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:29:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194745.png)](https://mergebot.odoo.com/odoo/odoo/pull/194745)

fw-bot (Issue Creator) on (2025-01-22 17:29:40 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 18:17:17 UTC): @Bruno-Zanotti @amoyaux ci/runbot failed on this forward-port PR

"
2804928445,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194718
Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-22 17:13:09+00:00,[],2025-02-06 10:31:53+00:00,2025-01-23 09:53:30+00:00,https://github.com/odoo/odoo/pull/194744,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607811610, 'issue_id': 2804928445, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194744.png)](https://mergebot.odoo.com/odoo/odoo/pull/194744)', 'created_at': datetime.datetime(2025, 1, 22, 17, 13, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607811638, 'issue_id': 2804928445, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 17, 13, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607956609, 'issue_id': 2804928445, 'author': 'fw-bot', 'body': '@rmun-odoo @tivisse the next pull request (odoo/odoo#194747) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 18, 23, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609106306, 'issue_id': 2804928445, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 5, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:13:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194744.png)](https://mergebot.odoo.com/odoo/odoo/pull/194744)

fw-bot (Issue Creator) on (2025-01-22 17:13:11 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 18:23:05 UTC): @rmun-odoo @tivisse the next pull request (odoo/odoo#194747) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-23 08:05:33 UTC): @robodoo r+

"
2804927870,pull_request,open,,"[FW][FIX] stock{,_barcode}: trigger quality check on picking validation","### Issues:

Creating and validating a picking from the barcode app does not behave correctly with respect to quality check trigger and creation. Depending on your flow, you might end up with QC created twice or with QC not being triggered before validation.

### Cause of the issues:

The quality checks are created during the ""_action_confirm"" of moves: https://github.com/odoo/enterprise/blob/dd4a1ec4aaa7cbb95d6e40a8bb6ab1d6c88fc7b7/quality_control/models/stock_move.py#L12-L15 
However, depending on where you click in the barcode app, the moves might end up being assigned and hence skip the ""_action_confirm"" of the picking (which is computed to be assigned) prior to the `_pre_action_done_hook` of the `button_validate` of the picking wich is suppose to return already created quality check:
https://github.com/odoo/odoo/blob/08f0c6481a190349369ead5ab9328886392ddbeb/addons/stock/models/stock_picking.py#L1145-L1147 
In which case, the quality check is not triggered (Issue 1). Furthermore, since  the `_action_confirm` of moves can also be applied to extra moves created to update the demand and to be merged to the initial move during the validation, the quality check creation might be called twice on a move once during its own `action_confirm` and once during the `_action_confirm` of its extra move (Issue2).

### Issue 1:

1. Create a storable product P with a barcode: XXX
2. Go to Quality > Quality Control > Quality Points > New
3. Create a new quality point for your product:
    - Control per: ""Operation""
    - Operations: ""Receipts""
4. Go to the barcode app > Operations > Receipts > New
5. Scan your product
6. Click on the pencil (key step)
7. Either edit the quantity from the digipad and confirm or go back to the picking and edit it from there.
8. Validate the receipt

#### > Even thought a quality check was created using your quality point for your receipt, it was not triggered before validation.

### Cause of the Issue:

Clicking on the pencil will trigger a call of the `save_barcode_data` which will in turn create a stock move line related to the picking during the write performed on the picking:
https://github.com/odoo/enterprise/blob/dd4a1ec4aaa7cbb95d6e40a8bb6ab1d6c88fc7b7/stock_barcode/controllers/stock_barcode.py#L68-L74 
After this edition of the quantity of the picking will write on the `qty_done` dummy field of that move line which will in turn trigger a call of its inverse method and modify its quantity: https://github.com/odoo/enterprise/blob/dd4a1ec4aaa7cbb95d6e40a8bb6ab1d6c88fc7b7/stock_barcode/models/stock_move_line.py#L58-L61 
Changing the quantity of the ml will then update the state of the move to ""assigned"" because of these lines:
https://github.com/odoo/odoo/blob/a74684777c27e26639b75b0668bb15afadb78c4f/addons/stock/models/stock_move_line.py#L487-L488 https://github.com/odoo/odoo/blob/a74684777c27e26639b75b0668bb15afadb78c4f/addons/stock/models/stock_move_line.py#L530-L531 https://github.com/odoo/odoo/blob/08f0c6481a190349369ead5ab9328886392ddbeb/addons/stock/models/stock_move.py#L2022-L2023 In turns, the state compute method of the picking will determine that the picking is assigned and the picking will not be confirmed during its `button_validate` prior to the `_pre_action_done_hook` of the `button_validate` as it is not in draft anymore.

### Fix:

The state of the move should stay as draft just as if we didn't created the move line through the pencil if we were to edit the qty_done via the barcode app.

### Note:

The inverse method of the ""qty_done"" computed field was introduced in 17.0+ by commit: 4f19668c51a90e8c12e57b6353bbe5194f83ca10 during the quantity refactoring so that the issue is not reproducible prior to that version.

### Issue 2:

Same steps 1 -> 5.
6'. click on the +1 button.
7'. Validate > this opens the quality check
8'. Pass the quality check > Validate again
9'. Go to Quality > Quality Control > Quality check

#### > Two quality checks were created isntead of one for your receipt

### Cause of the issue:

At some later point in the button validate of the picking, an `_action_done` is called to put the pickings and its move in done state: https://github.com/odoo/odoo/blob/a74684777c27e26639b75b0668bb15afadb78c4f/addons/stock/models/stock_picking.py#L1157

However, during the `_action_done` of the moves if the quantity of the move exceeds its `product_uom_qty`, extra moves will be created, confirmed and merged back to the move in order to update its `product_uom_qty`:
https://github.com/odoo/odoo/blob/607d63fd4d9c07bac9cb68b2d31d86551e93d5b1/addons/stock/models/stock_move.py#L1885-L1890 https://github.com/odoo/odoo/blob/607d63fd4d9c07bac9cb68b2d31d86551e93d5b1/addons/stock/models/stock_move.py#L1823-L1832 However, the action confirm of this extra move will trigger the same override of the `_action_confirm` that creates a quality check and it will even be called on the original move that was already confirmed and already created its QC since the extra move was merged into it: https://github.com/odoo/enterprise/blob/dd4a1ec4aaa7cbb95d6e40a8bb6ab1d6c88fc7b7/quality_control/models/stock_move.py#L12-L15 
As a result we end up with an extra quality check creation.

### Fix:

We avoid quality check creation during extra move confirmation.

Enterprise: https://github.com/odoo/enterprise/pull/76301

opw-4266053
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192034",fw-bot,2025-01-22 17:12:50+00:00,[],2025-02-03 02:02:55+00:00,,https://github.com/odoo/odoo/pull/194743,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607811035, 'issue_id': 2804927870, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194743.png)](https://mergebot.odoo.com/odoo/odoo/pull/194743)', 'created_at': datetime.datetime(2025, 1, 22, 17, 12, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607811084, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 17, 12, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607858172, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 17, 34, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172337, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723419, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617542712, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618972214, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 28, 13, 16, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619255899, 'issue_id': 2804927870, 'author': 'lase-odoo', 'body': 'The fix only work with receipt. Waiting for this fix to be merge to continue: https://github.com/odoo/enterprise/pull/77777', 'created_at': datetime.datetime(2025, 1, 28, 15, 1, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620471662, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623354508, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 30, 2, 2, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626136997, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 31, 2, 2, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2628685361, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 1, 2, 1, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629730701, 'issue_id': 2804927870, 'author': 'fw-bot', 'body': '@lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 3, 2, 2, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:12:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194743.png)](https://mergebot.odoo.com/odoo/odoo/pull/194743)

fw-bot (Issue Creator) on (2025-01-22 17:12:54 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 17:34:44 UTC): @lase-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-26 02:01:52 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:30 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:47 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 13:16:30 UTC): @lase-odoo ci/runbot failed on this forward-port PR

lase-odoo on (2025-01-28 15:01:39 UTC): The fix only work with receipt. Waiting for this fix to be merge to continue: https://github.com/odoo/enterprise/pull/77777

fw-bot (Issue Creator) on (2025-01-29 02:01:20 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-30 02:02:09 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-31 02:02:04 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-01 02:01:36 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-03 02:02:54 UTC): @lase-odoo this forward port of odoo/odoo#192034 is awaiting action (not merged or closed).

"
2804926950,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194705
Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-22 17:12:23+00:00,[],2025-02-06 11:46:48+00:00,2025-01-23 11:40:28+00:00,https://github.com/odoo/odoo/pull/194742,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607810048, 'issue_id': 2804926950, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194742.png)](https://mergebot.odoo.com/odoo/odoo/pull/194742)', 'created_at': datetime.datetime(2025, 1, 22, 17, 12, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607810089, 'issue_id': 2804926950, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 17, 12, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607818124, 'issue_id': 2804926950, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 17, 16, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609132246, 'issue_id': 2804926950, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 8, 19, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609417171, 'issue_id': 2804926950, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 18, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:12:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194742.png)](https://mergebot.odoo.com/odoo/odoo/pull/194742)

fw-bot (Issue Creator) on (2025-01-22 17:12:27 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 17:16:06 UTC): @Williambraecky @Julien00859 ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 08:19:41 UTC): @Williambraecky @Julien00859 this PR was modified / updated and has become a normal PR. It must be merged directly.

Williambraecky on (2025-01-23 10:18:52 UTC): @robodoo r+

"
2804917144,pull_request,closed,,[FW][FIX] point_of_sale: ios: download invoice on other tab,"Check commits for description.

OPW: 4348541

Forward-Port-Of: odoo/odoo#194406
Forward-Port-Of: odoo/odoo#194203",fw-bot,2025-01-22 17:07:40+00:00,[],2025-02-07 16:54:19+00:00,2025-01-24 16:49:00+00:00,https://github.com/odoo/odoo/pull/194741,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607799314, 'issue_id': 2804917144, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194741.png)](https://mergebot.odoo.com/odoo/odoo/pull/194741)', 'created_at': datetime.datetime(2025, 1, 22, 17, 7, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607799337, 'issue_id': 2804917144, 'author': 'fw-bot', 'body': '@caburj @davidmonnom this PR targets saas-17.4 and is the last of the forward-port chain containing:\n* odoo/odoo#194733\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 17, 7, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385056, 'issue_id': 2804917144, 'author': 'fw-bot', 'body': '@caburj @davidmonnom this forward port of odoo/odoo#194203 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 0, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612741053, 'issue_id': 2804917144, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 15, 1, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:07:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194741.png)](https://mergebot.odoo.com/odoo/odoo/pull/194741)

fw-bot (Issue Creator) on (2025-01-22 17:07:42 UTC): @caburj @davidmonnom this PR targets saas-17.4 and is the last of the forward-port chain containing:
* odoo/odoo#194733

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 02:00:48 UTC): @caburj @davidmonnom this forward port of odoo/odoo#194203 is awaiting action (not merged or closed).

caburj on (2025-01-24 15:01:28 UTC): robodoo r+

"
2804917088,pull_request,closed,,[IMP] mail: Mailbox Interface 📬,"When a user sends a message via the chatter, the system automatically sends an email to several recipients: those involved in the last message, recipients specified by the current record, followers of the current record, and users mentioned in the message. However, the current design only allows users to select or deselect suggested recipients and does not provide an option to add new ones, which can be restrictive in certain use cases.

This PR simplifies the chatter interface and gives users greater control over the recipient list. The suggested recipient checkboxes have been replaced with a more intuitive ""To"" field that lists all recipients, excluding the followers of the current record. Each recipient is displayed as a pill within the ""To"" field. Users can easily manage recipients: they can remove a recipient by clicking the cross icon on the pill or add a new recipient by typing into the accompanying text input. As the user types, the system suggests partners or email addresses, and selecting a suggestion automatically creates a new pill.

These changes make it easier for users to clearly see and manage who will receive the email, addressing the ambiguity that previously existed for most users.

Task-4496350

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",julien-banken,2025-01-22 17:07:39+00:00,[],2025-02-03 15:11:28+00:00,2025-02-03 15:11:27+00:00,https://github.com/odoo/odoo/pull/194740,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607799359, 'issue_id': 2804917088, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194740.png)](https://mergebot.odoo.com/odoo/odoo/pull/194740)', 'created_at': datetime.datetime(2025, 1, 22, 17, 7, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631283003, 'issue_id': 2804917088, 'author': 'julien-banken', 'body': 'The code has been moved there to keep the references: https://github.com/odoo/odoo/pull/188642', 'created_at': datetime.datetime(2025, 2, 3, 15, 11, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 17:07:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194740.png)](https://mergebot.odoo.com/odoo/odoo/pull/194740)

julien-banken (Issue Creator) on (2025-02-03 15:11:27 UTC): The code has been moved there to keep the references: https://github.com/odoo/odoo/pull/188642

"
2804881943,pull_request,closed,,[FW][FIX] point_of_sale: synchronisation latence with connected printers,"Previously, when some printers were connected to the PoS, the synchronisation of the order was slow because we were waiting for the response of each printer.

Now we don't wait for the response of the printer, we just send the order to the printer and we continue the process.

Forward-Port-Of: odoo/odoo#194690",fw-bot,2025-01-22 16:51:01+00:00,[],2025-01-23 10:05:35+00:00,2025-01-23 10:05:35+00:00,https://github.com/odoo/odoo/pull/194739,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607760802, 'issue_id': 2804881943, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194739.png)](https://mergebot.odoo.com/odoo/odoo/pull/194739)', 'created_at': datetime.datetime(2025, 1, 22, 16, 51, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607760835, 'issue_id': 2804881943, 'author': 'fw-bot', 'body': '@davidmonnom @caburj cherrypicking of pull request odoo/odoo#194690 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/models/pos_order.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/pos_order.js\nAuto-merging addons/point_of_sale/static/src/app/store/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/pos_store.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 16, 51, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:51:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194739.png)](https://mergebot.odoo.com/odoo/odoo/pull/194739)

fw-bot (Issue Creator) on (2025-01-22 16:51:03 UTC): @davidmonnom @caburj cherrypicking of pull request odoo/odoo#194690 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/models/pos_order.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/pos_order.js
Auto-merging addons/point_of_sale/static/src/app/store/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/pos_store.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804868600,pull_request,closed,,[CLN] sale_pdf_quote_builder: remove dead code,,Demesmaeker,2025-01-22 16:44:41+00:00,[],2025-01-29 13:48:58+00:00,2025-01-29 13:48:58+00:00,https://github.com/odoo/odoo/pull/194738,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607746105, 'issue_id': 2804868600, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194738.png)](https://mergebot.odoo.com/odoo/odoo/pull/194738)', 'created_at': datetime.datetime(2025, 1, 22, 16, 44, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607754572, 'issue_id': 2804868600, 'author': 'Demesmaeker', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 16, 48, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607850657, 'issue_id': 2804868600, 'author': 'robodoo', 'body': ""@Demesmaeker 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 22, 17, 31, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621045543, 'issue_id': 2804868600, 'author': 'Demesmaeker', 'body': '@robodoo r+\r\n\r\n(Rebased for the unrelated constantly failing test)', 'created_at': datetime.datetime(2025, 1, 29, 9, 2, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:44:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194738.png)](https://mergebot.odoo.com/odoo/odoo/pull/194738)

Demesmaeker (Issue Creator) on (2025-01-22 16:48:24 UTC): @robodoo r+

robodoo on (2025-01-22 17:31:15 UTC): @Demesmaeker 'ci/runbot' failed on this reviewed PR.

Demesmaeker (Issue Creator) on (2025-01-29 09:02:30 UTC): @robodoo r+

(Rebased for the unrelated constantly failing test)

"
2804851938,pull_request,closed,,[IMP] cron: small improvements,"Description of the issue/feature this PR addresses:
Prepartion for https://github.com/odoo/odoo/pull/193740

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-22 16:37:34+00:00,[],2025-01-27 10:41:32+00:00,2025-01-27 09:56:55+00:00,https://github.com/odoo/odoo/pull/194737,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607728359, 'issue_id': 2804851938, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194737.png)](https://mergebot.odoo.com/odoo/odoo/pull/194737)', 'created_at': datetime.datetime(2025, 1, 22, 16, 37, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613380757, 'issue_id': 2804851938, 'author': 'robodoo', 'body': '@kmagusiak @Julien00859 because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 24, 21, 7, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614135624, 'issue_id': 2804851938, 'author': 'kmagusiak', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 25, 23, 35, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614135631, 'issue_id': 2804851938, 'author': 'robodoo', 'body': ""@kmagusiak you can't rebase-ff."", 'created_at': datetime.datetime(2025, 1, 25, 23, 35, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614643942, 'issue_id': 2804851938, 'author': 'Julien00859', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 27, 0, 3, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614643960, 'issue_id': 2804851938, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 27, 0, 3, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614643980, 'issue_id': 2804851938, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 27, 0, 3, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614668448, 'issue_id': 2804851938, 'author': 'robodoo', 'body': '@kmagusiak @Julien00859 staging failed: ci/runbot on b212a82911cc62f91073cead076fc99d31866799 (view more at https://runbot.odoo.com/runbot/build/73974095)', 'created_at': datetime.datetime(2025, 1, 27, 0, 43, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615065669, 'issue_id': 2804851938, 'author': 'kmagusiak', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 27, 8, 3, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:37:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194737.png)](https://mergebot.odoo.com/odoo/odoo/pull/194737)

robodoo on (2025-01-24 21:07:30 UTC): @kmagusiak @Julien00859 because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

kmagusiak (Issue Creator) on (2025-01-25 23:35:38 UTC): @robodoo rebase-ff

robodoo on (2025-01-25 23:35:40 UTC): @kmagusiak you can't rebase-ff.

Julien00859 on (2025-01-27 00:03:48 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-27 00:03:50 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-27 00:03:52 UTC): This PR is already reviewed, reviewing it again is useless.

robodoo on (2025-01-27 00:43:55 UTC): @kmagusiak @Julien00859 staging failed: ci/runbot on b212a82911cc62f91073cead076fc99d31866799 (view more at https://runbot.odoo.com/runbot/build/73974095)

kmagusiak (Issue Creator) on (2025-01-27 08:03:04 UTC): @robodoo retry

"
2804814902,pull_request,open,,[FW][FIX] purchase_stock: handle view replacement in action_add_from_catalog,"Description of the issue/feature this PR addresses:
The method action_add_from_catalog in purchase_stock replaces the product's kanban view with a purchase-specific one. This method directly replaces the first view in the list, which could be wrong if another module changes the default view of the catalog.

This commit updates the method to replace only the kanban view, ensuring that other view types are preserved correctly.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#182918
Forward-Port-Of: odoo/odoo#175438",fw-bot,2025-01-22 16:21:05+00:00,[],2025-01-22 17:00:15+00:00,,https://github.com/odoo/odoo/pull/194736,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607687620, 'issue_id': 2804814902, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194736.png)](https://mergebot.odoo.com/odoo/odoo/pull/194736)', 'created_at': datetime.datetime(2025, 1, 22, 16, 21, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607687644, 'issue_id': 2804814902, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 16, 21, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:21:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194736.png)](https://mergebot.odoo.com/odoo/odoo/pull/194736)

fw-bot (Issue Creator) on (2025-01-22 16:21:07 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804814029,pull_request,closed,,[IMP] orm: keep indexes without comments,"Description of the issue/feature this PR addresses:
When upgrading, the team would like to keep existing modified indexes. Therefore, we will not re-create indexes that already exist and have no comments. We create the index only when the comment does not match or when the index does not exist.

Current behavior before PR:
If there is no comment, drop and re-create the index during the upgrade.

Desired behavior after PR is merged:
Keep the indexes during the upgrade.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-22 16:20:39+00:00,[],2025-01-24 07:52:35+00:00,2025-01-24 03:55:05+00:00,https://github.com/odoo/odoo/pull/194735,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607686620, 'issue_id': 2804814029, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194735.png)](https://mergebot.odoo.com/odoo/odoo/pull/194735)', 'created_at': datetime.datetime(2025, 1, 22, 16, 20, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610175639, 'issue_id': 2804814029, 'author': 'ryv-odoo', 'body': '@robodoo r+\r\nThx @kmagusiak', 'created_at': datetime.datetime(2025, 1, 23, 15, 50, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:20:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194735.png)](https://mergebot.odoo.com/odoo/odoo/pull/194735)

ryv-odoo on (2025-01-23 15:50:21 UTC): @robodoo r+
Thx @kmagusiak

"
2804770471,pull_request,closed,,[FW][IMP] l10n_es_edi_sii: add cancellation,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194426
Forward-Port-Of: odoo/odoo#192048",fw-bot,2025-01-22 16:01:19+00:00,[],2025-01-27 12:56:53+00:00,2025-01-27 12:56:53+00:00,https://github.com/odoo/odoo/pull/194734,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607637234, 'issue_id': 2804770471, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194734.png)](https://mergebot.odoo.com/odoo/odoo/pull/194734)', 'created_at': datetime.datetime(2025, 1, 22, 16, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607637353, 'issue_id': 2804770471, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 cherrypicking of pull request odoo/odoo#192048 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_es_edi_sii/models/account_edi_format.py\nAuto-merging addons/l10n_es_edi_sii/models/account_move.py\nCONFLICT (content): Merge conflict in addons/l10n_es_edi_sii/models/account_move.py\nAuto-merging addons/l10n_es_edi_sii/tests/test_edi_xml.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 16, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385801, 'issue_id': 2804770471, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613055825, 'issue_id': 2804770471, 'author': 'jco-odoo', 'body': '@xmo-odoo Fw-port of the same.', 'created_at': datetime.datetime(2025, 1, 24, 17, 33, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613721920, 'issue_id': 2804770471, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172315, 'issue_id': 2804770471, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723385, 'issue_id': 2804770471, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615074912, 'issue_id': 2804770471, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 27, 8, 7, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615270640, 'issue_id': 2804770471, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 9, 43, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 16:01:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194734.png)](https://mergebot.odoo.com/odoo/odoo/pull/194734)

fw-bot (Issue Creator) on (2025-01-22 16:01:23 UTC): @jco-odoo @RicGR98 cherrypicking of pull request odoo/odoo#192048 failed.

stdout:
```
Auto-merging addons/l10n_es_edi_sii/models/account_edi_format.py
Auto-merging addons/l10n_es_edi_sii/models/account_move.py
CONFLICT (content): Merge conflict in addons/l10n_es_edi_sii/models/account_move.py
Auto-merging addons/l10n_es_edi_sii/tests/test_edi_xml.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-24 02:01:20 UTC): @jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).

jco-odoo on (2025-01-24 17:33:59 UTC): @xmo-odoo Fw-port of the same.

fw-bot (Issue Creator) on (2025-01-25 02:01:33 UTC): @jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:50 UTC): @jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:29 UTC): @jco-odoo @RicGR98 this forward port of odoo/odoo#192048 is awaiting action (not merged or closed).

xmo-odoo on (2025-01-27 08:07:54 UTC): @robodoo override=ci/security

jco-odoo on (2025-01-27 09:43:06 UTC): @robodoo r+

"
2804763328,pull_request,closed,,[FW][FIX] point_of_sale: ios: download invoice on other tab,"Check commits for description.

OPW: 4348541

Forward-Port-Of: odoo/odoo#194406
Forward-Port-Of: odoo/odoo#194203",fw-bot,2025-01-22 15:58:17+00:00,[],2025-02-07 16:47:45+00:00,2025-01-24 16:28:56+00:00,https://github.com/odoo/odoo/pull/194733,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607629478, 'issue_id': 2804763328, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194733.png)](https://mergebot.odoo.com/odoo/odoo/pull/194733)', 'created_at': datetime.datetime(2025, 1, 22, 15, 58, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607629510, 'issue_id': 2804763328, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 15, 58, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612740573, 'issue_id': 2804763328, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 15, 1, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:58:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194733.png)](https://mergebot.odoo.com/odoo/odoo/pull/194733)

fw-bot (Issue Creator) on (2025-01-22 15:58:22 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

caburj on (2025-01-24 15:01:16 UTC): robodoo r+

"
2804753032,pull_request,closed,,[FIX] mail: missing message formatting when creating a subchannel,"Before this commit, when a user accesses a sub-thread of channel made from a message for the 1st time, the format of the message body shows html as textcontent rather as inner html.

Steps to reproduce:
- Post a message as user A
- Create a thread from this message as user B
- User A accesses this sub-thread and posts a new message
-> User A sees 1st message with bad formatting

This happens because on sub-thread join, the data of sub-thread info are fetched, and since the sub-thread is created from a message, the channel info data also contains the message data. This data was inserted without `html: true`, leading to message body being inserted in a non-trusted way in JS models, causing this formatting issue.

This commit fixes the issue by flagging the insert with `html: true`, as this is from trusted origin and content is trusted, so the message body is inserted to be used properly in message component. Note that this behaviour applies to html fields, which message body is. The insert `html: true` is assessed for data on all targeted html fields.

task-4506489

",maki-odoo,2025-01-22 15:54:04+00:00,[],2025-01-23 15:27:58+00:00,2025-01-23 14:43:01+00:00,https://github.com/odoo/odoo/pull/194732,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607618552, 'issue_id': 2804753032, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194732.png)](https://mergebot.odoo.com/odoo/odoo/pull/194732)', 'created_at': datetime.datetime(2025, 1, 22, 15, 54, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607710413, 'issue_id': 2804753032, 'author': 'robodoo', 'body': '@alexkuhn you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 22, 16, 30, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607816350, 'issue_id': 2804753032, 'author': 'robodoo', 'body': ""@maki-odoo @alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 22, 17, 15, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:54:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194732.png)](https://mergebot.odoo.com/odoo/odoo/pull/194732)

robodoo on (2025-01-22 16:30:25 UTC): @alexkuhn you may want to rebuild or fix this PR as it has failed CI.

robodoo on (2025-01-22 17:15:20 UTC): @maki-odoo @alexkuhn 'ci/runbot' failed on this reviewed PR.

"
2804733544,pull_request,closed,,[FIX] hr: suppress warning on optimized domains,"If the domain is already optimized for another model, the optimize function logs a warning.
While the domain could probably be used as is without requiring the domain to be optimized again (due to the nature of the hr.employee models), we reset the domain completely if the domain has been optimized for another model.

",Williambraecky,2025-01-22 15:45:47+00:00,[],2025-02-07 12:48:54+00:00,2025-01-24 12:45:08+00:00,https://github.com/odoo/odoo/pull/194731,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607597714, 'issue_id': 2804733544, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194731.png)](https://mergebot.odoo.com/odoo/odoo/pull/194731)', 'created_at': datetime.datetime(2025, 1, 22, 15, 45, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607599938, 'issue_id': 2804733544, 'author': 'Williambraecky', 'body': ""@Bertrand2 heyo\r\nTrying to suppress those warnings: https://runbot.odoo.com/runbot/build/73743027, it's a bit crappy but I don't see how we can do otherwise."", 'created_at': datetime.datetime(2025, 1, 22, 15, 46, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611911626, 'issue_id': 2804733544, 'author': 'robodoo', 'body': '@Bertrand2 you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 24, 8, 11, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:45:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194731.png)](https://mergebot.odoo.com/odoo/odoo/pull/194731)

Williambraecky (Issue Creator) on (2025-01-22 15:46:44 UTC): @Bertrand2 heyo
Trying to suppress those warnings: https://runbot.odoo.com/runbot/build/73743027, it's a bit crappy but I don't see how we can do otherwise.

robodoo on (2025-01-24 08:11:49 UTC): @Bertrand2 you may want to rebuild or fix this PR as it has failed CI.

"
2804695130,pull_request,closed,,[FW][FIX] web_editor: position buttons under cropper,"**Problem**:
The cropper buttons are positioned at the end of the page instead of directly under the image being cropped.

**Solution**:
Remove `position: fixed` from the buttons container, allowing it to be positioned just below the image being cropped/edited.

**Steps to Reproduce**:
1. Navigate to Email Marketing > Start from scratch.
2. Add ""Blocks"" > ""Body"" > ""Columns"".
3. Open the cropping tool on the first image.
4. Observe that the cropping buttons appear at the end of the page, requiring scrolling to access them.

opw-4461565

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193016",fw-bot,2025-01-22 15:29:28+00:00,[],2025-01-29 16:55:47+00:00,2025-01-29 16:55:47+00:00,https://github.com/odoo/odoo/pull/194730,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607556560, 'issue_id': 2804695130, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194730.png)](https://mergebot.odoo.com/odoo/odoo/pull/194730)', 'created_at': datetime.datetime(2025, 1, 22, 15, 29, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607556600, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 15, 29, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607663846, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 16, 11, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612176253, 'issue_id': 2804695130, 'author': 'dmo-odoo', 'body': 'Same question here.', 'created_at': datetime.datetime(2025, 1, 24, 10, 22, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612497383, 'issue_id': 2804695130, 'author': 'walidsahli', 'body': '@dmo-odoo here the UI changed, we show the image cropping in a modal with cropping buttons just below which is fine.\r\n![image](https://github.com/user-attachments/assets/e6bb9aa8-4315-473f-9fc1-c7f6a6aa4ca8)', 'created_at': datetime.datetime(2025, 1, 24, 13, 10, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612532521, 'issue_id': 2804695130, 'author': 'dmo-odoo', 'body': '@walidsahli Thanks! I was going to r+ the PR but it looks to be red on runbot.', 'created_at': datetime.datetime(2025, 1, 24, 13, 28, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612552700, 'issue_id': 2804695130, 'author': 'walidsahli', 'body': '@dmo-odoo, its not related to the PR, i rerun the test.', 'created_at': datetime.datetime(2025, 1, 24, 13, 38, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172265, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614723179, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 27, 2, 2, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2617541918, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 28, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620471552, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 29, 2, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621070685, 'issue_id': 2804695130, 'author': 'dmo-odoo', 'body': '@walidsahli Still looks to be red', 'created_at': datetime.datetime(2025, 1, 29, 9, 11, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621394982, 'issue_id': 2804695130, 'author': 'fw-bot', 'body': '@walidsahli @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 29, 11, 33, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621395659, 'issue_id': 2804695130, 'author': 'walidsahli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 11, 33, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621468611, 'issue_id': 2804695130, 'author': 'robodoo', 'body': ""@walidsahli @dmo-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 29, 12, 9, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:29:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194730.png)](https://mergebot.odoo.com/odoo/odoo/pull/194730)

fw-bot (Issue Creator) on (2025-01-22 15:29:31 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 16:11:35 UTC): @walidsahli @dmo-odoo ci/runbot failed on this forward-port PR

dmo-odoo on (2025-01-24 10:22:32 UTC): Same question here.

walidsahli on (2025-01-24 13:10:16 UTC): @dmo-odoo here the UI changed, we show the image cropping in a modal with cropping buttons just below which is fine.
![image](https://github.com/user-attachments/assets/e6bb9aa8-4315-473f-9fc1-c7f6a6aa4ca8)

dmo-odoo on (2025-01-24 13:28:26 UTC): @walidsahli Thanks! I was going to r+ the PR but it looks to be red on runbot.

walidsahli on (2025-01-24 13:38:19 UTC): @dmo-odoo, its not related to the PR, i rerun the test.

fw-bot (Issue Creator) on (2025-01-26 02:01:46 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-27 02:02:16 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-28 02:01:35 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-29 02:01:14 UTC): @walidsahli @dmo-odoo this forward port of odoo/odoo#193016 is awaiting action (not merged or closed).

dmo-odoo on (2025-01-29 09:11:59 UTC): @walidsahli Still looks to be red

fw-bot (Issue Creator) on (2025-01-29 11:33:14 UTC): @walidsahli @dmo-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

walidsahli on (2025-01-29 11:33:35 UTC): @robodoo r+

robodoo on (2025-01-29 12:09:21 UTC): @walidsahli @dmo-odoo 'ci/runbot' failed on this reviewed PR.

"
2804646834,pull_request,closed,,"[IMP] l10n_it_edi, l10n_it_edi_ndd: merge module","This commit will merge the two modules.

task-4497665





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",malb-odoo,2025-01-22 15:09:38+00:00,[],2025-02-04 09:04:28+00:00,2025-02-04 09:04:28+00:00,https://github.com/odoo/odoo/pull/194729,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607504942, 'issue_id': 2804646834, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194729.png)](https://mergebot.odoo.com/odoo/odoo/pull/194729)', 'created_at': datetime.datetime(2025, 1, 22, 15, 9, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:09:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194729.png)](https://mergebot.odoo.com/odoo/odoo/pull/194729)

"
2804631560,pull_request,closed,,[FW][FIX] l10n_ch: print Swiss Qrcodes when the transaction is possible,"### Steps to reproduce:
- Install ""l10n_ch"" and switch to a Swiss company
- Create an invoice for a Swiss partner
- Send it
- The QR code appears in the generated PDF

### Cause:
The bank eligibility is not checked when printing the QR code.

### Solution:
After a discussion with the PO (THB) the Qr codes should appear on all Swiss transaction. But if the fiscal country of the user's company is not Switzerland, it must still be printed if its bank account is eligible to receive payments via QRcodes.

So the solution is to add a check if the fiscal_country is not Switzerland, then we check the account validity. A valid account is an IBAN account of this type CHXX 3000 0XXX XXXX with the number in the middle being between 30000 and 31999.

opw-4380520

Forward-Port-Of: odoo/odoo#194563
Forward-Port-Of: odoo/odoo#194421",fw-bot,2025-01-22 15:03:38+00:00,[],2025-02-07 15:44:05+00:00,2025-01-24 15:33:35+00:00,https://github.com/odoo/odoo/pull/194728,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607489278, 'issue_id': 2804631560, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194728.png)](https://mergebot.odoo.com/odoo/odoo/pull/194728)', 'created_at': datetime.datetime(2025, 1, 22, 15, 3, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607489310, 'issue_id': 2804631560, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 15, 3, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607605453, 'issue_id': 2804631560, 'author': 'fw-bot', 'body': '@mathcoutant @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 15, 48, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612327355, 'issue_id': 2804631560, 'author': 'fw-bot', 'body': '@mathcoutant @jbw-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 11, 42, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612357458, 'issue_id': 2804631560, 'author': 'mathcoutant', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612435666, 'issue_id': 2804631560, 'author': 'robodoo', 'body': ""@mathcoutant @jbw-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 24, 12, 38, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 15:03:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194728.png)](https://mergebot.odoo.com/odoo/odoo/pull/194728)

fw-bot (Issue Creator) on (2025-01-22 15:03:40 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 15:48:53 UTC): @mathcoutant @jbw-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-24 11:42:53 UTC): @mathcoutant @jbw-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

mathcoutant on (2025-01-24 11:59:00 UTC): @robodoo r+

robodoo on (2025-01-24 12:38:12 UTC): @mathcoutant @jbw-odoo 'ci/runbot' failed on this reviewed PR.

"
2804571897,pull_request,closed,,[FW][FIX] BillScreen: fix printing receipt when request takes long time,"Before this commit:
when printing request to ePOS printer is in process, if user moves to home screen in POS the currentOrder becomes null and throws exception.

after this commit:
currentOrder is stored before processing the request to avoid the exception.

opw-3859174

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#177364
Forward-Port-Of: odoo/odoo#165333",fw-bot,2025-01-22 14:40:48+00:00,[],2025-02-06 13:45:02+00:00,2025-02-06 13:45:02+00:00,https://github.com/odoo/odoo/pull/194726,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607428803, 'issue_id': 2804571897, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194726.png)](https://mergebot.odoo.com/odoo/odoo/pull/194726)', 'created_at': datetime.datetime(2025, 1, 22, 14, 40, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607428838, 'issue_id': 2804571897, 'author': 'fw-bot', 'body': '@baar-odoo @adgu-odoo cherrypicking of pull request odoo/odoo#165333 failed.\n\nstdout:\n```\nAuto-merging addons/pos_restaurant/static/src/app/bill_screen/bill_screen.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/bill_screen/bill_screen.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 40, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2628685664, 'issue_id': 2804571897, 'author': 'fw-bot', 'body': '@baar-odoo @adgu-odoo this forward port of odoo/odoo#165333 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 1, 2, 1, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639333287, 'issue_id': 2804571897, 'author': 'adgu-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 9, 52, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:40:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194726.png)](https://mergebot.odoo.com/odoo/odoo/pull/194726)

fw-bot (Issue Creator) on (2025-01-22 14:40:50 UTC): @baar-odoo @adgu-odoo cherrypicking of pull request odoo/odoo#165333 failed.

stdout:
```
Auto-merging addons/pos_restaurant/static/src/app/bill_screen/bill_screen.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/bill_screen/bill_screen.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-02-01 02:01:54 UTC): @baar-odoo @adgu-odoo this forward port of odoo/odoo#165333 is awaiting action (not merged or closed).

adgu-odoo on (2025-02-06 09:52:32 UTC): robodoo r+

"
2804570673,pull_request,closed,,"[FW][IMP] l10n_sa, l10n_sa_edi: Improved Report Spacing","Description of the issue/feature this PR addresses:
Task ID: 4342267

Current behavior before PR:
-Error When printing draft invoice due to unset invoice_date.

-Report spacing between header & body in second page overlaps due to paperformat spacing.
Due to the long address format of saudi arabia, the default paperformat header spacing and margin top are not enough to show the full address without overlapping the second and onward pages.

-English labels on the exchange rate table in l10n_sa_edi are translated and not shown together with the arabic labels.

-Remove unnecessary spans in xpaths

Desired behavior after PR is merged:
-Fix printing draft invoice with invoice_date as today's date

-Fix report spacing header by adding a new A4 paperformat for l10n_sa which is set as the saudi arabia companies default paper format.

-Fix exchange rate table to show both arabic and english labels and remove unnecessary translations (no longer used)

-Remove unnecessary spans in xpath.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193364
Forward-Port-Of: odoo/odoo#190172",fw-bot,2025-01-22 14:40:17+00:00,[],2025-02-07 12:38:45+00:00,2025-01-24 12:28:22+00:00,https://github.com/odoo/odoo/pull/194725,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607427484, 'issue_id': 2804570673, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194725.png)](https://mergebot.odoo.com/odoo/odoo/pull/194725)', 'created_at': datetime.datetime(2025, 1, 22, 14, 40, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607427536, 'issue_id': 2804570673, 'author': 'fw-bot', 'body': '@alny-odoo @gawa-odoo cherrypicking of pull request odoo/odoo#190172 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_sa/__manifest__.py\nAuto-merging addons/l10n_sa/demo/demo_company.xml\nCONFLICT (content): Merge conflict in addons/l10n_sa/demo/demo_company.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 40, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689672, 'issue_id': 2804570673, 'author': 'fw-bot', 'body': '@alny-odoo @gawa-odoo this forward port of odoo/odoo#190172 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612189248, 'issue_id': 2804570673, 'author': 'alny-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 10, 28, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:40:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194725.png)](https://mergebot.odoo.com/odoo/odoo/pull/194725)

fw-bot (Issue Creator) on (2025-01-22 14:40:20 UTC): @alny-odoo @gawa-odoo cherrypicking of pull request odoo/odoo#190172 failed.

stdout:
```
Auto-merging addons/l10n_sa/__manifest__.py
Auto-merging addons/l10n_sa/demo/demo_company.xml
CONFLICT (content): Merge conflict in addons/l10n_sa/demo/demo_company.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 02:01:37 UTC): @alny-odoo @gawa-odoo this forward port of odoo/odoo#190172 is awaiting action (not merged or closed).

alny-odoo on (2025-01-24 10:28:43 UTC): @robodoo r+

"
2804569338,pull_request,closed,,[FW][ADD] l10n_ro_edi_etransport: send transport data to eTransport platform,"Romania requires its companies to send information of all transports of goods on Romanian territory to a specific web service on their eTransport platform.

This commit implements a way to gather all the necessary data needed to send the eTransport document and the actual sending of this document to the eTransport platform.

Authentication:
the authentication needed to interact with the eTransport platform is the same as (and was already implemented in) the l10n_ro_efactura module. see [eFactura PR](https://github.com/odoo/odoo/pull/144061)

eTransport flow:
- Add the necessary eTransport data to a delivery
- send the eTransport document to ANAF
- the document gets processed by ANAF
- Fetch the status of the document:
    - which can result in an error, in which case the flow starts again from the beginning with the corrected data
    - or in a success

 task-id: 3810735

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#170080",fw-bot,2025-01-22 14:39:44+00:00,[],2025-02-06 13:08:28+00:00,2025-01-23 13:03:36+00:00,https://github.com/odoo/odoo/pull/194724,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607426137, 'issue_id': 2804569338, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194724.png)](https://mergebot.odoo.com/odoo/odoo/pull/194724)', 'created_at': datetime.datetime(2025, 1, 22, 14, 39, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607426175, 'issue_id': 2804569338, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 39, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607438646, 'issue_id': 2804569338, 'author': 'fw-bot', 'body': '@AllePilli @smetl ci/style failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 14, 44, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609076565, 'issue_id': 2804569338, 'author': 'fw-bot', 'body': '@AllePilli @smetl this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 7, 47, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609292850, 'issue_id': 2804569338, 'author': 'AllePilli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 9, 24, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609292933, 'issue_id': 2804569338, 'author': 'robodoo', 'body': '@AllePilli you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 23, 9, 24, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609310020, 'issue_id': 2804569338, 'author': 'smetl', 'body': '@odoo/rd-security Fw-port. Nothing changed regarding the security part', 'created_at': datetime.datetime(2025, 1, 23, 9, 31, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609447434, 'issue_id': 2804569338, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 23, 10, 32, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:39:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194724.png)](https://mergebot.odoo.com/odoo/odoo/pull/194724)

fw-bot (Issue Creator) on (2025-01-22 14:39:50 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 14:44:42 UTC): @AllePilli @smetl ci/style failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 07:47:40 UTC): @AllePilli @smetl this PR was modified / updated and has become a normal PR. It must be merged directly.

AllePilli on (2025-01-23 09:24:27 UTC): @robodoo r+

robodoo on (2025-01-23 09:24:29 UTC): @AllePilli you may want to rebuild or fix this PR as it has failed CI.

smetl on (2025-01-23 09:31:35 UTC): @odoo/rd-security Fw-port. Nothing changed regarding the security part

xmo-odoo on (2025-01-23 10:32:33 UTC): @robodoo override=ci/security

"
2804566696,pull_request,closed,,[FW][IMP] l10n_es_edi_sii: add cancellation,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194426
Forward-Port-Of: odoo/odoo#192048",fw-bot,2025-01-22 14:38:38+00:00,[],2025-02-05 17:58:13+00:00,2025-01-22 17:57:32+00:00,https://github.com/odoo/odoo/pull/194723,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607423218, 'issue_id': 2804566696, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194723.png)](https://mergebot.odoo.com/odoo/odoo/pull/194723)', 'created_at': datetime.datetime(2025, 1, 22, 14, 38, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607423253, 'issue_id': 2804566696, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 38, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607637274, 'issue_id': 2804566696, 'author': 'fw-bot', 'body': '@jco-odoo @RicGR98 the next pull request (odoo/odoo#194734) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 16, 1, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607679273, 'issue_id': 2804566696, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 16, 17, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:38:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194723.png)](https://mergebot.odoo.com/odoo/odoo/pull/194723)

fw-bot (Issue Creator) on (2025-01-22 14:38:40 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 16:01:21 UTC): @jco-odoo @RicGR98 the next pull request (odoo/odoo#194734) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

jco-odoo on (2025-01-22 16:17:43 UTC): @robodoo r+

"
2804562809,pull_request,closed,,[FW][IMP] mail: improve quote reply detection,"We update quote detection for gmail and outlook:
- gmail has simple wrapper divs with explicit classes
- outlook has a mix of div ids and simple pattern-based quoting (everything under ""<hr><div id=""divRplyFwdMsg""/> seems to be considered a quote)

Previously gmail just used blockquote, which still works but does not capture ""On xx:xx:xx X <X@gmail.com> wrote:"" headers, which are caught for outlook.

Previously outlook had a wrapper div around divRplyFwdMsg which would set data-o-mail-quote-container on it, and propagate to children. However it seems that outer div was either removed or is not always present, a heuristic is thus needed.

task-4381505

Forward-Port-Of: odoo/odoo#194615
Forward-Port-Of: odoo/odoo#192875",fw-bot,2025-01-22 14:37:00+00:00,[],2025-02-06 13:08:26+00:00,2025-01-23 12:58:12+00:00,https://github.com/odoo/odoo/pull/194722,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607419090, 'issue_id': 2804562809, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194722.png)](https://mergebot.odoo.com/odoo/odoo/pull/194722)', 'created_at': datetime.datetime(2025, 1, 22, 14, 37, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607419122, 'issue_id': 2804562809, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 37, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607505730, 'issue_id': 2804562809, 'author': 'fw-bot', 'body': '@reth-odoo @tde-banana-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 15, 9, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609007862, 'issue_id': 2804562809, 'author': 'fw-bot', 'body': '@reth-odoo @tde-banana-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 7, 0, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609273813, 'issue_id': 2804562809, 'author': 'reth-odoo', 'body': ""rebasing for unrelated test failure + including commits from mentionned PR above as they're related."", 'created_at': datetime.datetime(2025, 1, 23, 9, 18, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609424923, 'issue_id': 2804562809, 'author': 'reth-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 22, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:37:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194722.png)](https://mergebot.odoo.com/odoo/odoo/pull/194722)

fw-bot (Issue Creator) on (2025-01-22 14:37:02 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 15:09:59 UTC): @reth-odoo @tde-banana-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 07:00:57 UTC): @reth-odoo @tde-banana-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

reth-odoo on (2025-01-23 09:18:02 UTC): rebasing for unrelated test failure + including commits from mentionned PR above as they're related.

reth-odoo on (2025-01-23 10:22:17 UTC): @robodoo r+

"
2804557384,pull_request,open,,[IMP] spreadsheet scorecard: translate of key/baseline description,"related : odoo/o-spreadsheet#5496

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",fdamhaut,2025-01-22 14:34:44+00:00,[],2025-01-22 15:42:51+00:00,,https://github.com/odoo/odoo/pull/194721,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607413491, 'issue_id': 2804557384, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194721.png)](https://mergebot.odoo.com/odoo/odoo/pull/194721)', 'created_at': datetime.datetime(2025, 1, 22, 14, 34, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:34:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194721.png)](https://mergebot.odoo.com/odoo/odoo/pull/194721)

"
2804547329,pull_request,closed,,Master lazy config res,"This PR introduces a new mechanism that allows pieces of code to fetch data at webclient startup, in a single rpc.
There introduced python method `lazy_session_info` is called when the webclient is mounted. It returns an object. That method can be overridden to add keys inside that object, and the values can then be accessed in the webclient, by the pieces of code needed it. It works similarly to `session_info`, which is computed when rendering the page, and whose values are directly inserted in the page.

This PR uses that new mechanism to remove an rpc done in hr_attendance at webclient startup.

task-4341388
",res-odoo,2025-01-22 14:30:33+00:00,['res-odoo'],2025-01-31 16:30:05+00:00,2025-01-31 16:30:05+00:00,https://github.com/odoo/odoo/pull/194720,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607402343, 'issue_id': 2804547329, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194720.png)](https://mergebot.odoo.com/odoo/odoo/pull/194720)', 'created_at': datetime.datetime(2025, 1, 22, 14, 30, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621415199, 'issue_id': 2804547329, 'author': 'aab-odoo', 'body': 'robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 29, 11, 43, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621415284, 'issue_id': 2804547329, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 29, 11, 43, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627450337, 'issue_id': 2804547329, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 31, 14, 12, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:30:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194720.png)](https://mergebot.odoo.com/odoo/odoo/pull/194720)

aab-odoo on (2025-01-29 11:43:28 UTC): robodoo rebase-ff

robodoo on (2025-01-29 11:43:31 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-31 14:12:19 UTC): Merge method set to rebase and fast-forward.

"
2804545368,pull_request,closed,,[IMP] mail: indicated thread on message,"Before this PR, messages with threads where not properly displayed in the message
list, only a notification was created.
This PR introduces a card for the subthread below the message.

task-",phenix-factory,2025-01-22 14:29:43+00:00,[],2025-01-23 13:59:14+00:00,2025-01-23 13:59:14+00:00,https://github.com/odoo/odoo/pull/194719,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607400223, 'issue_id': 2804545368, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194719.png)](https://mergebot.odoo.com/odoo/odoo/pull/194719)', 'created_at': datetime.datetime(2025, 1, 22, 14, 29, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:29:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194719.png)](https://mergebot.odoo.com/odoo/odoo/pull/194719)

"
2804527073,pull_request,closed,,[FW][FIX] hr_holidays: allow date modification for unapproved time off requests,"Steps to Reproduce:
• Install the Time Off app.
• Create a new user and corresponding employee without any group in Time Off. 
• Create a new time off request with a start date < today's date. 
• Attempt to change the date, which results in a validation error.

Issue:
- Users are unable to modify time off requests, even if they are not yet approved.

Fix:
- Added a check to ensure that modifications are allowed for time off requests that are not in an approved state.

task-4236572

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#190944",fw-bot,2025-01-22 14:22:10+00:00,[],2025-02-05 17:20:24+00:00,2025-01-22 17:12:17+00:00,https://github.com/odoo/odoo/pull/194718,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607381047, 'issue_id': 2804527073, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194718.png)](https://mergebot.odoo.com/odoo/odoo/pull/194718)', 'created_at': datetime.datetime(2025, 1, 22, 14, 22, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607381069, 'issue_id': 2804527073, 'author': 'fw-bot', 'body': '@rmun-odoo @tivisse cherrypicking of pull request odoo/odoo#190944 failed.\n\nstdout:\n```\nAuto-merging addons/hr_holidays/models/hr_leave.py\nAuto-merging addons/hr_holidays/tests/test_leave_requests.py\nCONFLICT (content): Merge conflict in addons/hr_holidays/tests/test_leave_requests.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 22, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607391399, 'issue_id': 2804527073, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 14, 26, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:22:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194718.png)](https://mergebot.odoo.com/odoo/odoo/pull/194718)

fw-bot (Issue Creator) on (2025-01-22 14:22:12 UTC): @rmun-odoo @tivisse cherrypicking of pull request odoo/odoo#190944 failed.

stdout:
```
Auto-merging addons/hr_holidays/models/hr_leave.py
Auto-merging addons/hr_holidays/tests/test_leave_requests.py
CONFLICT (content): Merge conflict in addons/hr_holidays/tests/test_leave_requests.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tivisse on (2025-01-22 14:26:24 UTC): @robodoo r+

"
2804497349,pull_request,closed,,[FW][FIX] crm: onboarding tour bubble fix,"Tour bubble points to every New button in kanban.
Fixed it to only point at New button in crm lead kanban view.

Task-4377574

Forward-Port-Of: odoo/odoo#190937",fw-bot,2025-01-22 14:09:47+00:00,[],2025-02-07 17:01:15+00:00,2025-01-24 16:58:12+00:00,https://github.com/odoo/odoo/pull/194717,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607350458, 'issue_id': 2804497349, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194717.png)](https://mergebot.odoo.com/odoo/odoo/pull/194717)', 'created_at': datetime.datetime(2025, 1, 22, 14, 9, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607350485, 'issue_id': 2804497349, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 9, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607479189, 'issue_id': 2804497349, 'author': 'fw-bot', 'body': '@nihp-odoo @tde-banana-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 15, 0, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689651, 'issue_id': 2804497349, 'author': 'fw-bot', 'body': '@nihp-odoo @tde-banana-odoo this forward port of odoo/odoo#190937 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612450031, 'issue_id': 2804497349, 'author': 'tde-banana-odoo', 'body': '@nihp-odoo could you rebase this one ? Seems stuck', 'created_at': datetime.datetime(2025, 1, 24, 12, 45, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612467480, 'issue_id': 2804497349, 'author': 'fw-bot', 'body': '@nihp-odoo @tde-banana-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 24, 12, 54, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612481987, 'issue_id': 2804497349, 'author': 'nihp-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 13, 2, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:09:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194717.png)](https://mergebot.odoo.com/odoo/odoo/pull/194717)

fw-bot (Issue Creator) on (2025-01-22 14:09:51 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 15:00:03 UTC): @nihp-odoo @tde-banana-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-23 02:01:35 UTC): @nihp-odoo @tde-banana-odoo this forward port of odoo/odoo#190937 is awaiting action (not merged or closed).

tde-banana-odoo on (2025-01-24 12:45:59 UTC): @nihp-odoo could you rebase this one ? Seems stuck

fw-bot (Issue Creator) on (2025-01-24 12:54:33 UTC): @nihp-odoo @tde-banana-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

nihp-odoo on (2025-01-24 13:02:19 UTC): @robodoo r+

"
2804478678,pull_request,closed,,[FW][FIX] web_editor: position buttons under cropper,"**Problem**:
The cropper buttons are positioned at the end of the page instead of directly under the image being cropped.

**Solution**:
Remove `position: fixed` from the buttons container, allowing it to be positioned just below the image being cropped/edited.

**Steps to Reproduce**:
1. Navigate to Email Marketing > Start from scratch.
2. Add ""Blocks"" > ""Body"" > ""Columns"".
3. Open the cropping tool on the first image.
4. Observe that the cropping buttons appear at the end of the page, requiring scrolling to access them.

opw-4461565

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193016",fw-bot,2025-01-22 14:02:11+00:00,[],2025-01-29 13:47:54+00:00,2025-01-29 13:47:54+00:00,https://github.com/odoo/odoo/pull/194716,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607331209, 'issue_id': 2804478678, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194716.png)](https://mergebot.odoo.com/odoo/odoo/pull/194716)', 'created_at': datetime.datetime(2025, 1, 22, 14, 2, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607331251, 'issue_id': 2804478678, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 14, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620861154, 'issue_id': 2804478678, 'author': 'walidsahli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 29, 7, 6, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2620921741, 'issue_id': 2804478678, 'author': 'robodoo', 'body': '@walidsahli @dmo-odoo staging failed: ci/runbot on 0765533dc8a3061c5bfb65c857debac182373b72 (view more at https://runbot.odoo.com/runbot/build/74131914)', 'created_at': datetime.datetime(2025, 1, 29, 7, 53, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621389668, 'issue_id': 2804478678, 'author': 'walidsahli', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 29, 11, 30, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621395044, 'issue_id': 2804478678, 'author': 'fw-bot', 'body': ""@walidsahli @dmo-odoo child PR odoo/odoo#194730 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 29, 11, 33, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 14:02:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194716.png)](https://mergebot.odoo.com/odoo/odoo/pull/194716)

fw-bot (Issue Creator) on (2025-01-22 14:02:14 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

walidsahli on (2025-01-29 07:06:36 UTC): @robodoo r+

robodoo on (2025-01-29 07:53:30 UTC): @walidsahli @dmo-odoo staging failed: ci/runbot on 0765533dc8a3061c5bfb65c857debac182373b72 (view more at https://runbot.odoo.com/runbot/build/74131914)

walidsahli on (2025-01-29 11:30:45 UTC): @robodoo retry

fw-bot (Issue Creator) on (2025-01-29 11:33:15 UTC): @walidsahli @dmo-odoo child PR odoo/odoo#194730 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2804460415,pull_request,open,,[Imp] html_editor: allow dynamic title on toolbar buttons,"Change the title props of the toolbar's button to allow a dynamic content.

The props can now either be,
Static : A hard coded translated String.
Or dynamic : A getter function that return a translated String.

This function will receive some selection context to be able to change the title accordingly.

task-4463559



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",sebgeelen,2025-01-22 13:54:50+00:00,[],2025-01-23 09:57:58+00:00,,https://github.com/odoo/odoo/pull/194715,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607313272, 'issue_id': 2804460415, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194715.png)](https://mergebot.odoo.com/odoo/odoo/pull/194715)', 'created_at': datetime.datetime(2025, 1, 22, 13, 54, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:54:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194715.png)](https://mergebot.odoo.com/odoo/odoo/pull/194715)

"
2804438758,pull_request,closed,,[FIX] l10n_es_edi_tbai: the number sent in vendor bills should be the…,"… ref, not the name

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jco-odoo,2025-01-22 13:45:56+00:00,[],2025-01-30 20:32:41+00:00,2025-01-30 20:32:41+00:00,https://github.com/odoo/odoo/pull/194714,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607292690, 'issue_id': 2804438758, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194714.png)](https://mergebot.odoo.com/odoo/odoo/pull/194714)', 'created_at': datetime.datetime(2025, 1, 22, 13, 45, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607297667, 'issue_id': 2804438758, 'author': 'jco-odoo', 'body': '@yajo i still need to test, but this should give an idea.  In 16.0, it will be slightly different, but the principle is the same.', 'created_at': datetime.datetime(2025, 1, 22, 13, 48, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609171687, 'issue_id': 2804438758, 'author': 'Gelojr', 'body': ""Hello,\r\nI have tested the PR and I see the following.\r\n- It takes the invoice data from the supplier. OK\r\n- But depending on how the supplier supplies the data I don't know if the  <SerieFactura> and <NumFactura> fields are correct or are upside down. See image\r\n![image](https://github.com/user-attachments/assets/41cb1f91-3fb5-4d5a-8985-5a7da4082fa9)\r\n\r\n- The <DescripcionOperacion> field should contain a description of the invoice. I do not know if it is correct to enter the invoice number or if it would be better to concatenate the information of the descriptions from the invoice lines.\r\n![image](https://github.com/user-attachments/assets/e53b7508-7daf-44a1-b742-ca4f9caa09ff)\r\n\r\nWhat do you think?"", 'created_at': datetime.datetime(2025, 1, 23, 8, 39, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609991943, 'issue_id': 2804438758, 'author': 'Arnaud-Sibille', 'body': ""I may not understand fully the issue, but if the name for the edi document should be the ref instead of the bill name,\r\nI would just change this line https://github.com/odoo/odoo/blob/3930328a9b15f5eb58238bf68eb00b1284909918/addons/l10n_es_edi_tbai/models/account_move.py#L154\r\nto something like:\r\n           ` 'name': self.name if self.is_sale_document() else self.ref,`\r\n           \r\n and a check that the ref is set before sending"", 'created_at': datetime.datetime(2025, 1, 23, 14, 43, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612115266, 'issue_id': 2804438758, 'author': 'jco-odoo', 'body': '@Arnaud-Sibille I do not think it is a good idea as we do not have the partner on the Tbai Document and it would be difficult to distinguish between both.  (on the other hand, it could be done as a compute field)  Not sure as well how many people look at that document.  On the other hand, we should have the name in the Descripcionoperacion then.', 'created_at': datetime.datetime(2025, 1, 24, 9, 56, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612199207, 'issue_id': 2804438758, 'author': 'Arnaud-Sibille', 'body': ""@jco-odoo\r\nFor me, the tbai_document is not meant to be checked by the user (there's no menu/views related to it)\r\nThe data that are useful to the user on the document, are accessed through related fields in account.move and pos.order\r\n\r\nSo I don't think it is bad if we make it a little harder to distinguish between them."", 'created_at': datetime.datetime(2025, 1, 24, 10, 34, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612462197, 'issue_id': 2804438758, 'author': 'jco-odoo', 'body': '@rugo-odoo', 'created_at': datetime.datetime(2025, 1, 24, 12, 52, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615684621, 'issue_id': 2804438758, 'author': 'jco-odoo', 'body': '@Gelojr @yajo Indeed simpler if we can skip the series logic.  For the descripcion operacion, it is the most practical to have a ref - invoice name link.  Providing an information based on the invoice lines is not straightforward.  (and it might quickly become too long)', 'created_at': datetime.datetime(2025, 1, 27, 12, 53, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624496767, 'issue_id': 2804438758, 'author': 'jco-odoo', 'body': '@rugo-odoo This one is green as well.', 'created_at': datetime.datetime(2025, 1, 30, 13, 18, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:45:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194714.png)](https://mergebot.odoo.com/odoo/odoo/pull/194714)

jco-odoo (Issue Creator) on (2025-01-22 13:48:11 UTC): @yajo i still need to test, but this should give an idea.  In 16.0, it will be slightly different, but the principle is the same.

Gelojr on (2025-01-23 08:39:44 UTC): Hello,
I have tested the PR and I see the following.
- It takes the invoice data from the supplier. OK
- But depending on how the supplier supplies the data I don't know if the  <SerieFactura> and <NumFactura> fields are correct or are upside down. See image
![image](https://github.com/user-attachments/assets/41cb1f91-3fb5-4d5a-8985-5a7da4082fa9)

- The <DescripcionOperacion> field should contain a description of the invoice. I do not know if it is correct to enter the invoice number or if it would be better to concatenate the information of the descriptions from the invoice lines.
![image](https://github.com/user-attachments/assets/e53b7508-7daf-44a1-b742-ca4f9caa09ff)

What do you think?

Arnaud-Sibille on (2025-01-23 14:43:28 UTC): I may not understand fully the issue, but if the name for the edi document should be the ref instead of the bill name,
I would just change this line https://github.com/odoo/odoo/blob/3930328a9b15f5eb58238bf68eb00b1284909918/addons/l10n_es_edi_tbai/models/account_move.py#L154
to something like:
           ` 'name': self.name if self.is_sale_document() else self.ref,`
           
 and a check that the ref is set before sending

jco-odoo (Issue Creator) on (2025-01-24 09:56:49 UTC): @Arnaud-Sibille I do not think it is a good idea as we do not have the partner on the Tbai Document and it would be difficult to distinguish between both.  (on the other hand, it could be done as a compute field)  Not sure as well how many people look at that document.  On the other hand, we should have the name in the Descripcionoperacion then.

Arnaud-Sibille on (2025-01-24 10:34:04 UTC): @jco-odoo
For me, the tbai_document is not meant to be checked by the user (there's no menu/views related to it)
The data that are useful to the user on the document, are accessed through related fields in account.move and pos.order

So I don't think it is bad if we make it a little harder to distinguish between them.

jco-odoo (Issue Creator) on (2025-01-24 12:52:26 UTC): @rugo-odoo

jco-odoo (Issue Creator) on (2025-01-27 12:53:07 UTC): @Gelojr @yajo Indeed simpler if we can skip the series logic.  For the descripcion operacion, it is the most practical to have a ref - invoice name link.  Providing an information based on the invoice lines is not straightforward.  (and it might quickly become too long)

jco-odoo (Issue Creator) on (2025-01-30 13:18:46 UTC): @rugo-odoo This one is green as well.

"
2804428941,pull_request,closed,,[FIX] l10n_latam_check: existing third party check outgoing payment method.,"**Description of the issue/feature this PR addresses**: 
1) It is necessay not to set ""Existing Third Party Checks"" outgoing payment method in all argentinean cash journals. It is only needed to be set on ""Third Party Checks"" and ""Rejected Third Party Checks"" Argentinean journals that are created when the module is installed or a new argentinean company is created. 
2) Also when a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back. This bug was introduced on this commit https://github.com/odoo/odoo/pull/188451/commits/0618fff9f9bb4716d22dc2ce8950cada824b90f4.

**Current behavior before PR**:
1) ""Existing Third Party Checks"" outgoing payment method is set in all argentinean cash journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is not able to add it back.

**Desired behavior after PR is merged**:
1) ""Existing Third Party Checks"" outgoing payment method is set only in ""Third Party Checks"" and ""Rejected Third Party Checks"" argentinean journals.
2) When a user mistakenly remove the 'Existing Third Party Checks' payment method from the 'Third Party Checks' journal then is able to add it back.

_Ticket Adhoc side_: 83443
_Task Latam side_: 1309



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pablohmontenegro,2025-01-22 13:41:46+00:00,[],2025-02-04 13:29:58+00:00,2025-01-23 11:40:45+00:00,https://github.com/odoo/odoo/pull/194713,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2607283261, 'issue_id': 2804428941, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194713.png)](https://mergebot.odoo.com/odoo/odoo/pull/194713)', 'created_at': datetime.datetime(2025, 1, 22, 13, 41, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607779251, 'issue_id': 2804428941, 'author': 'vbe-odoo', 'body': ""@antoine162 I've tested this, and now the problem raised with the previous PR is resolved here while maintaining the previous FIX for Cash journals created with the master data.\r\n![image](https://github.com/user-attachments/assets/00b91e8c-d3a3-4be2-9429-af1c9e6ca000)\r\n![image](https://github.com/user-attachments/assets/de860476-9cdb-4ed9-a7bc-7058bb53c2da)\r\n\r\ncc' @pablohmontenegro"", 'created_at': datetime.datetime(2025, 1, 22, 16, 58, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2619334797, 'issue_id': 2804428941, 'author': 'lk-eska', 'body': 'How do we transfer these checks to a bank if we cannot use these payment methods for outgoing?\r\n\r\nhttps://github.com/odoo/odoo/blob/5b7377c2c80a1e8efa345844a197ff5e5302827b/addons/l10n_latam_check/wizards/l10n_latam_payment_mass_transfer.py#L72\r\n\r\nSee the code above. It is searching for these methods and giving error if it cannot find it.\r\n\r\n@pablohmontenegro', 'created_at': datetime.datetime(2025, 1, 28, 15, 30, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2622105253, 'issue_id': 2804428941, 'author': 'pablohmontenegro', 'body': '@lk-eska sorry but I don´t undertand exactly what you mean. Can you give me an example? a video with an example may help me. Why you can`t use those payment methods for outgoing?.', 'created_at': datetime.datetime(2025, 1, 29, 16, 21, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623584525, 'issue_id': 2804428941, 'author': 'lk-eska', 'body': '@pablohmontenegro \r\n\r\nWhen you want to make an outgoing it is searching for a payment method called \'out_third_party_checks\' or \'return_third_party_checks\' if it is not there then it throws a ""Please define a payment method line on your payment."" error.  Please see the code line that I sent to see how it is determined.\r\n\r\nSince there is no way to select this payment method on an outgoing payment method (after this PR), now we cannot transfer check to a bank.\r\n\r\nWhat you want is to prevent unnecessary check payment methods on every cash journal but now, we cannot select it if we create them manually.\r\n\r\nI hope this clarifies it. If not I will send you more proof.', 'created_at': datetime.datetime(2025, 1, 30, 5, 59, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623586344, 'issue_id': 2804428941, 'author': 'lk-eska', 'body': 'In other words, if you are in Argentina, you got your checks journal created properly otherwise there is no way to create a proper check journal with these payment methods.', 'created_at': datetime.datetime(2025, 1, 30, 6, 0, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633929027, 'issue_id': 2804428941, 'author': 'pablohmontenegro', 'body': '@lk-eska sorry, I don´t understand, this pr allows you to select \'out_third_party_checks\' or \'\'return_third_party_checks\' payment methods. Please see ""Description of the issue/feature this PR addresses"" of this pr (item 2).', 'created_at': datetime.datetime(2025, 2, 4, 13, 28, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:41:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194713.png)](https://mergebot.odoo.com/odoo/odoo/pull/194713)

vbe-odoo on (2025-01-22 16:58:49 UTC): @antoine162 I've tested this, and now the problem raised with the previous PR is resolved here while maintaining the previous FIX for Cash journals created with the master data.
![image](https://github.com/user-attachments/assets/00b91e8c-d3a3-4be2-9429-af1c9e6ca000)
![image](https://github.com/user-attachments/assets/de860476-9cdb-4ed9-a7bc-7058bb53c2da)

cc' @pablohmontenegro

lk-eska on (2025-01-28 15:30:31 UTC): How do we transfer these checks to a bank if we cannot use these payment methods for outgoing?

https://github.com/odoo/odoo/blob/5b7377c2c80a1e8efa345844a197ff5e5302827b/addons/l10n_latam_check/wizards/l10n_latam_payment_mass_transfer.py#L72

See the code above. It is searching for these methods and giving error if it cannot find it.

@pablohmontenegro

pablohmontenegro (Issue Creator) on (2025-01-29 16:21:02 UTC): @lk-eska sorry but I don´t undertand exactly what you mean. Can you give me an example? a video with an example may help me. Why you can`t use those payment methods for outgoing?.

lk-eska on (2025-01-30 05:59:03 UTC): @pablohmontenegro 

When you want to make an outgoing it is searching for a payment method called 'out_third_party_checks' or 'return_third_party_checks' if it is not there then it throws a ""Please define a payment method line on your payment."" error.  Please see the code line that I sent to see how it is determined.

Since there is no way to select this payment method on an outgoing payment method (after this PR), now we cannot transfer check to a bank.

What you want is to prevent unnecessary check payment methods on every cash journal but now, we cannot select it if we create them manually.

I hope this clarifies it. If not I will send you more proof.

lk-eska on (2025-01-30 06:00:34 UTC): In other words, if you are in Argentina, you got your checks journal created properly otherwise there is no way to create a proper check journal with these payment methods.

pablohmontenegro (Issue Creator) on (2025-02-04 13:28:01 UTC): @lk-eska sorry, I don´t understand, this pr allows you to select 'out_third_party_checks' or ''return_third_party_checks' payment methods. Please see ""Description of the issue/feature this PR addresses"" of this pr (item 2).

"
2804425459,pull_request,closed,,[FIX] website_sale: allow browser history navigation on product pages,"Versions
--------
- saas-17.4+

Steps
-----
1. Go eCommerce products page;
2. click on a product;
3. use browser's ""Go back"" button to go back.

Issue
-----
There's no going back.

Cause
-----
PR https://github.com/odoo/odoo/pull/157412 modified the `_setUrlHash` method used to manage product attributes. One of the changes it made is modified the current URL using `window.location.hash` instead of `window.location.replace`.

While both methods can make identical changes to the URL, a key side-effect of `Location:replace()` is that the URL being replaced won't get saved in the session's `History`[^1].

As this method is called the moment the page loads, modifying the URL via `location.hash` will store the initial product page URL without attribute hashes in the session history. Then when trying to navigate back, the method will be called again immediately to apply attribute hashes, again modifying the session history, making it virtually impossible to leave the page without clicking a new URL.

Solution
--------
Use `history.replaceState`[^2] to update the current state, and not create any new entries.

Also re-introduce early return when there are no product attributes to avoid polluting URLs, originally added in https://github.com/odoo/odoo/pull/159474 but removed via https://github.com/odoo/odoo/pull/157412.

opw-4416701

[^1]: https://developer.mozilla.org/en-US/docs/Web/API/Location/replace
[^2]: https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState",lvsz,2025-01-22 13:40:15+00:00,[],2025-02-06 16:51:52+00:00,2025-02-06 16:51:52+00:00,https://github.com/odoo/odoo/pull/194712,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2607279941, 'issue_id': 2804425459, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194712.png)](https://mergebot.odoo.com/odoo/odoo/pull/194712)', 'created_at': datetime.datetime(2025, 1, 22, 13, 40, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2633289448, 'issue_id': 2804425459, 'author': 'lvsz', 'body': '> I was a bit confused at first since the left arrow button in chrome was still working for me in 17.4, but the back button in the contextual menu was indeed broken.\r\n\r\nWeird, both behave identical in Chrome for me (both broken that is).', 'created_at': datetime.datetime(2025, 2, 4, 9, 8, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639728408, 'issue_id': 2804425459, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 12, 44, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:40:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194712.png)](https://mergebot.odoo.com/odoo/odoo/pull/194712)

lvsz (Issue Creator) on (2025-02-04 09:08:01 UTC): Weird, both behave identical in Chrome for me (both broken that is).

lvsz (Issue Creator) on (2025-02-06 12:44:19 UTC): robodoo r+

"
2804419747,pull_request,closed,,[FW][FIX] web: tooltip: do no show it when you click on a button,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194658",fw-bot,2025-01-22 13:38:17+00:00,[],2025-01-23 06:54:47+00:00,2025-01-23 03:26:00+00:00,https://github.com/odoo/odoo/pull/194711,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607274914, 'issue_id': 2804419747, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194711.png)](https://mergebot.odoo.com/odoo/odoo/pull/194711)', 'created_at': datetime.datetime(2025, 1, 22, 13, 38, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607274934, 'issue_id': 2804419747, 'author': 'fw-bot', 'body': '@adr-odoo @res-odoo this PR targets saas-18.1 and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 38, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608088357, 'issue_id': 2804419747, 'author': 'adr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 19, 26, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:38:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194711.png)](https://mergebot.odoo.com/odoo/odoo/pull/194711)

fw-bot (Issue Creator) on (2025-01-22 13:38:19 UTC): @adr-odoo @res-odoo this PR targets saas-18.1 and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adr-odoo on (2025-01-22 19:26:20 UTC): @robodoo r+

"
2804409699,pull_request,closed,,[IMP] point_of_sale: partner list infinite scroll,"Fix multiple issues with partner list :
- The list was not updated when scrolling down
- When searching customers, the partner list could contains duplicate (because before this commit a `Set` structure was used to store objects. This wasn't working as expecting because in JS a Set use references of objects to compare them (now we use a set to store unique IDs).
- Traceback occured when following these steps :
   - Open ""Customer"" popup
   - Type ""ss""
   - Press ""enter"" => Traceback

Here is how it works now:
- When reaching 80% (scroll) of the partner list, we fetch 100 more partners and add them to the list
- When typing in search bar: search inside the fetched partner list
- Press enter in search bar: fetch new customer matching the search from database

task-id: 4489331

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-22 13:33:55+00:00,[],2025-02-05 23:11:15+00:00,2025-01-22 23:04:08+00:00,https://github.com/odoo/odoo/pull/194710,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607264633, 'issue_id': 2804409699, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194710.png)](https://mergebot.odoo.com/odoo/odoo/pull/194710)', 'created_at': datetime.datetime(2025, 1, 22, 13, 33, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:33:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194710.png)](https://mergebot.odoo.com/odoo/odoo/pull/194710)

"
2804409677,pull_request,closed,,[FW][FIX] rpc: re-raise exceptions for http.py,"For my friends at tech support

Exceptions in RPC are handled and a Response is returned directly. It is a different behaviour than jsonrpc where the exception is raised and the dispatcher wraps it is a Response after logging the exception. The xmlrpc code should also raise an exception so that it can be handled in http.py. Adding here a way to detect if a Response was already generated for an exception in the exception handler of HTTP.

Related: #193208

Forward-Port-Of: odoo/odoo#194467
Forward-Port-Of: odoo/odoo#193421",fw-bot,2025-01-22 13:33:55+00:00,[],2025-02-04 04:10:08+00:00,2025-02-04 04:10:08+00:00,https://github.com/odoo/odoo/pull/194709,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607264517, 'issue_id': 2804409677, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194709.png)](https://mergebot.odoo.com/odoo/odoo/pull/194709)', 'created_at': datetime.datetime(2025, 1, 22, 13, 33, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607264602, 'issue_id': 2804409677, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193421 failed.\n\nstdout:\n```\nAuto-merging addons/auth_totp/tests/test_totp.py\nAuto-merging addons/rpc/controllers.py\nCONFLICT (content): Merge conflict in addons/rpc/controllers.py\nAuto-merging odoo/addons/test_rpc/tests/test_error.py\nCONFLICT (content): Merge conflict in odoo/addons/test_rpc/tests/test_error.py\nAuto-merging odoo/http.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 33, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689321, 'issue_id': 2804409677, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385532, 'issue_id': 2804409677, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172185, 'issue_id': 2804409677, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629730586, 'issue_id': 2804409677, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 3, 2, 2, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630635445, 'issue_id': 2804409677, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 11, 7, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630726437, 'issue_id': 2804409677, 'author': 'robodoo', 'body': ""@Julien00859 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 3, 11, 49, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:33:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194709.png)](https://mergebot.odoo.com/odoo/odoo/pull/194709)

fw-bot (Issue Creator) on (2025-01-22 13:33:58 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193421 failed.

stdout:
```
Auto-merging addons/auth_totp/tests/test_totp.py
Auto-merging addons/rpc/controllers.py
CONFLICT (content): Merge conflict in addons/rpc/controllers.py
Auto-merging odoo/addons/test_rpc/tests/test_error.py
CONFLICT (content): Merge conflict in odoo/addons/test_rpc/tests/test_error.py
Auto-merging odoo/http.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 02:01:18 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:10 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:40 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-03 02:02:47 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

Julien00859 on (2025-02-03 11:07:33 UTC): @robodoo r+

robodoo on (2025-02-03 11:49:31 UTC): @Julien00859 'ci/runbot' failed on this reviewed PR.

"
2804399319,pull_request,closed,,[FIX] l10n_eg_edi_eta: withholding tax amount declaration,"Steps to reproduce:
- With an EG Company setup
- Create an invoice with a '3% WH' tax
- Confirm invoice and send for validation

Issue: Validation will fail with error
```
{'code': '2', 'message': 'Validation Error', 'target': 'INV/2025/00001', 'propertyPath': None, 'details': [{'code': None, 'message': 'ArrayItemNotValid', 'target': '[0]', 'propertyPath': '#/invoiceLines[0]', 'details': None}, {'code': None, 'message': 'ArrayItemNotValid', 'target': '[1]', 'propertyPath': '#/taxTotals[1]', 'details': None}]}
```
This is caused by the withholding tax amount being reported as negative, while it should be reported as positive

opw-4453002

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",agr-odoo,2025-01-22 13:29:24+00:00,[],2025-02-07 12:38:38+00:00,2025-01-24 12:25:19+00:00,https://github.com/odoo/odoo/pull/194708,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2607254479, 'issue_id': 2804399319, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194708.png)](https://mergebot.odoo.com/odoo/odoo/pull/194708)', 'created_at': datetime.datetime(2025, 1, 22, 13, 29, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607262936, 'issue_id': 2804399319, 'author': 'agr-odoo', 'body': '@smetl \r\n`abs` was removed from [several lines](https://github.com/odoo/odoo/commit/d0e7be7832672d476f1b289af52d3a425990d719#diff-9f344af59ad383237995c468948772716770a6d092aafc98008bc0e0d9a35dfbL232), but we may just need these', 'created_at': datetime.datetime(2025, 1, 22, 13, 33, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:29:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194708.png)](https://mergebot.odoo.com/odoo/odoo/pull/194708)

agr-odoo (Issue Creator) on (2025-01-22 13:33:13 UTC): @smetl 
`abs` was removed from [several lines](https://github.com/odoo/odoo/commit/d0e7be7832672d476f1b289af52d3a425990d719#diff-9f344af59ad383237995c468948772716770a6d092aafc98008bc0e0d9a35dfbL232), but we may just need these

"
2804394520,pull_request,closed,,[FW][IMP] l10n_es_edi_sii: add cancellation,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194426
Forward-Port-Of: odoo/odoo#192048",fw-bot,2025-01-22 13:27:19+00:00,[],2025-02-05 17:38:49+00:00,2025-01-22 17:29:58+00:00,https://github.com/odoo/odoo/pull/194707,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607249712, 'issue_id': 2804394520, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194707.png)](https://mergebot.odoo.com/odoo/odoo/pull/194707)', 'created_at': datetime.datetime(2025, 1, 22, 13, 27, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607249738, 'issue_id': 2804394520, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 27, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:27:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194707.png)](https://mergebot.odoo.com/odoo/odoo/pull/194707)

fw-bot (Issue Creator) on (2025-01-22 13:27:21 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804393743,pull_request,closed,,[FW][FIX] stock: prioritize routes by sequence in extract_rule,"### Description of the issue/feature this PR addresses:
When a product is configured with both buy and manufacture routes, the manufacture route is always prioritized, regardless of the sequence defined in the routes.

### Current behavior before PR:
The method extract_rule stops evaluating routes once it finds a valid rule, even if other rules with a lower sequence exist. This leads to the manufacture route being prioritized over buy, which is not the intended behavior.

### Desired behavior after PR is merged:
The routes are now evaluated based on their sequence, ensuring that rules associated with routes of lower sequence are considered first.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
cc @ForgeFlow

Forward-Port-Of: odoo/odoo#188846",fw-bot,2025-01-22 13:26:59+00:00,[],2025-02-06 16:48:16+00:00,2025-01-23 16:32:57+00:00,https://github.com/odoo/odoo/pull/194706,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607249021, 'issue_id': 2804393743, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194706.png)](https://mergebot.odoo.com/odoo/odoo/pull/194706)', 'created_at': datetime.datetime(2025, 1, 22, 13, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607249043, 'issue_id': 2804393743, 'author': 'fw-bot', 'body': '@RicardCForgeFlow @Whenrow cherrypicking of pull request odoo/odoo#188846 failed.\n\n* aab453ab21345db50b203435abc7217cbd449920\n* 20fabc376301febd815ba36319f32d4b2640abb6 <- on this commit\n\nstdout:\n```\nAuto-merging doc/cla/corporate/forgeflow.md\nCONFLICT (content): Merge conflict in doc/cla/corporate/forgeflow.md\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 27, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609816659, 'issue_id': 2804393743, 'author': 'Whenrow', 'body': 'robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 1, 23, 13, 31, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609816758, 'issue_id': 2804393743, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 23, 13, 31, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:27:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194706.png)](https://mergebot.odoo.com/odoo/odoo/pull/194706)

fw-bot (Issue Creator) on (2025-01-22 13:27:01 UTC): @RicardCForgeFlow @Whenrow cherrypicking of pull request odoo/odoo#188846 failed.

* aab453ab21345db50b203435abc7217cbd449920
* 20fabc376301febd815ba36319f32d4b2640abb6 <- on this commit

stdout:
```
Auto-merging doc/cla/corporate/forgeflow.md
CONFLICT (content): Merge conflict in doc/cla/corporate/forgeflow.md

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Whenrow on (2025-01-23 13:31:10 UTC): robodoo r+ rebase-ff

robodoo on (2025-01-23 13:31:13 UTC): Merge method set to rebase and fast-forward.

"
2804386227,pull_request,closed,,[FW][IMP] odoo: add config for cron connection time,"Adds a configuration that can be used to mitigate PostgreSQL
transactional errors with long-living connections and the
`LISTEN/NOTIFY`[^1] functionality by re-establishing the database
connection periodically.

In the case that a connection outlives the transaction wraparound[^2]
mechanism of postgres, the `LISTEN/NOTIFY` internal queue might contain
references to transactions that have already been deleted by the
system's (or a manual) `VACUUM`[^3] as it has its own transaction
validity mechanisms (roughly comparing transaction ids).

This can be reproduced by:
 - Triggering a wraparound _AND_ cleaning of pg_xact between the cron's
   `LISTEN` + `COMMIT` and its recyling.
 - Having done at least one `NOTIFY` during that time period (?).
 - Try to `LISTEN` to the same channel on the same database (transcation
   id must be < than the first connection's transaction id).

The following is an example error message:
```
ERROR database odoo.service.server: Worker (3194772) Exception occurred, exiting...
Traceback (most recent call last):
  File ""/home/user/odoo/service/server.py"", line 1089, in run
    self.start()
  File ""/home/user/odoo/service/server.py"", line 1235, in start
    self.dbcursor.commit()
  File ""/home/user/odoo/sql_db.py"", line 480, in commit
    result = self._cnx.commit()
             ^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFile: could not access status of transaction 1194816979
DETAIL:  Could not open file ""pg_xact/0473"": No such file or directory.
```

[LISTEN/NOTIFY code](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c)

[Connection being kept](https://github.com/postgres/postgres/blob/REL_16_STABLE/src/backend/commands/async.c#L2167-L2191)

[See more](https://www.postgresql.org/message-id/flat/VE1PR03MB531295B1BDCFE422441B15FD92499%40VE1PR03MB5312.eurprd03.prod.outlook.com#7e36d1fdca921b5292e92c7017984ffa)

[^1]: https://www.postgresql.org/docs/current/sql-notify.html
[^2]: https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND
[^3]: https://www.postgresql.org/docs/17/sql-vacuum.html

Forward-Port-Of: odoo/odoo#194141",fw-bot,2025-01-22 13:23:41+00:00,[],2025-02-05 17:20:22+00:00,2025-01-22 17:12:02+00:00,https://github.com/odoo/odoo/pull/194705,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607241836, 'issue_id': 2804386227, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194705.png)](https://mergebot.odoo.com/odoo/odoo/pull/194705)', 'created_at': datetime.datetime(2025, 1, 22, 13, 23, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607241884, 'issue_id': 2804386227, 'author': 'fw-bot', 'body': '@Williambraecky @Julien00859 cherrypicking of pull request odoo/odoo#194141 failed.\n\nstdout:\n```\nAuto-merging odoo/service/server.py\nAuto-merging odoo/tools/config.py\nCONFLICT (content): Merge conflict in odoo/tools/config.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 23, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607259299, 'issue_id': 2804386227, 'author': 'Williambraecky', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 13, 31, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607479137, 'issue_id': 2804386227, 'author': 'robodoo', 'body': '@Williambraecky @Julien00859 linked pull request(s) odoo/documentation#11822 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 22, 15, 0, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:23:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194705.png)](https://mergebot.odoo.com/odoo/odoo/pull/194705)

fw-bot (Issue Creator) on (2025-01-22 13:23:44 UTC): @Williambraecky @Julien00859 cherrypicking of pull request odoo/odoo#194141 failed.

stdout:
```
Auto-merging odoo/service/server.py
Auto-merging odoo/tools/config.py
CONFLICT (content): Merge conflict in odoo/tools/config.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Williambraecky on (2025-01-22 13:31:36 UTC): @robodoo r+

robodoo on (2025-01-22 15:00:01 UTC): @Williambraecky @Julien00859 linked pull request(s) odoo/documentation#11822 not ready. Linked PRs are not staged until all of them are ready.

"
2804385361,pull_request,closed,,[FW][IMP] mail: improve quote reply detection,"We update quote detection for gmail and outlook:
- gmail has simple wrapper divs with explicit classes
- outlook has a mix of div ids and simple pattern-based quoting (everything under ""<hr><div id=""divRplyFwdMsg""/> seems to be considered a quote)

Previously gmail just used blockquote, which still works but does not capture ""On xx:xx:xx X <X@gmail.com> wrote:"" headers, which are caught for outlook.

Previously outlook had a wrapper div around divRplyFwdMsg which would set data-o-mail-quote-container on it, and propagate to children. However it seems that outer div was either removed or is not always present, a heuristic is thus needed.

task-4381505

Forward-Port-Of: odoo/odoo#194615
Forward-Port-Of: odoo/odoo#192875",fw-bot,2025-01-22 13:23:18+00:00,[],2025-02-06 10:31:54+00:00,2025-01-23 09:54:34+00:00,https://github.com/odoo/odoo/pull/194704,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607240980, 'issue_id': 2804385361, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194704.png)](https://mergebot.odoo.com/odoo/odoo/pull/194704)', 'created_at': datetime.datetime(2025, 1, 22, 13, 23, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607241007, 'issue_id': 2804385361, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 23, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609007897, 'issue_id': 2804385361, 'author': 'fw-bot', 'body': ""@reth-odoo @tde-banana-odoo child PR odoo/odoo#194722 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 23, 7, 0, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609035274, 'issue_id': 2804385361, 'author': 'reth-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 7, 20, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:23:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194704.png)](https://mergebot.odoo.com/odoo/odoo/pull/194704)

fw-bot (Issue Creator) on (2025-01-22 13:23:20 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 07:00:59 UTC): @reth-odoo @tde-banana-odoo child PR odoo/odoo#194722 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

reth-odoo on (2025-01-23 07:20:24 UTC): @robodoo r+

"
2804376127,pull_request,closed,,[FW][FIX] l10n_ch: print Swiss Qrcodes when the transaction is possible,"### Steps to reproduce:
- Install ""l10n_ch"" and switch to a Swiss company
- Create an invoice for a Swiss partner
- Send it
- The QR code appears in the generated PDF

### Cause:
The bank eligibility is not checked when printing the QR code.

### Solution:
After a discussion with the PO (THB) the Qr codes should appear on all Swiss transaction. But if the fiscal country of the user's company is not Switzerland, it must still be printed if its bank account is eligible to receive payments via QRcodes.

So the solution is to add a check if the fiscal_country is not Switzerland, then we check the account validity. A valid account is an IBAN account of this type CHXX 3000 0XXX XXXX with the number in the middle being between 30000 and 31999.

opw-4380520

Forward-Port-Of: odoo/odoo#194563
Forward-Port-Of: odoo/odoo#194421",fw-bot,2025-01-22 13:19:13+00:00,[],2025-02-07 15:44:14+00:00,2025-01-24 15:40:55+00:00,https://github.com/odoo/odoo/pull/194703,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607231771, 'issue_id': 2804376127, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194703.png)](https://mergebot.odoo.com/odoo/odoo/pull/194703)', 'created_at': datetime.datetime(2025, 1, 22, 13, 19, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607231807, 'issue_id': 2804376127, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 19, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607344086, 'issue_id': 2804376127, 'author': 'fw-bot', 'body': '@mathcoutant @jbw-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 14, 7, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612263794, 'issue_id': 2804376127, 'author': 'mathcoutant', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 11, 8, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612327524, 'issue_id': 2804376127, 'author': 'fw-bot', 'body': ""@mathcoutant @jbw-odoo child PR odoo/odoo#194728 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 24, 11, 42, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:19:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194703.png)](https://mergebot.odoo.com/odoo/odoo/pull/194703)

fw-bot (Issue Creator) on (2025-01-22 13:19:15 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 14:07:22 UTC): @mathcoutant @jbw-odoo ci/runbot failed on this forward-port PR

mathcoutant on (2025-01-24 11:08:34 UTC): @robodoo r+

fw-bot (Issue Creator) on (2025-01-24 11:42:54 UTC): @mathcoutant @jbw-odoo child PR odoo/odoo#194728 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2804372925,pull_request,open,,[FIX] stock: ensure company field is required for scrap orders,"Issue Before This Commit:
------------------------------
The 'company' field was required but not validated in relevant triggers for scrap orders. This allowed operations to proceed even when the 'company' field was unset, leading to unexpected issues and inconsistent behavior.

Steps to reproduce:
------------------------------
1. Enable multi-step routes.
2. Create a new scrap order and add a product.
3. Remove the company from the company field.

With This Commit:
------------------------------
- Added a check for 'company' in relevant triggers to ensure that operations only proceed if a company is set.
- This fix guarantees that the 'company' field is always set (required), preventing errors and maintaining consistent behavior in scrap orders.

task-4497387",srap-odoo,2025-01-22 13:17:49+00:00,[],2025-01-22 14:00:26+00:00,,https://github.com/odoo/odoo/pull/194702,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607228727, 'issue_id': 2804372925, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194702.png)](https://mergebot.odoo.com/odoo/odoo/pull/194702)', 'created_at': datetime.datetime(2025, 1, 22, 13, 17, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:17:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194702.png)](https://mergebot.odoo.com/odoo/odoo/pull/194702)

"
2804359112,pull_request,closed,,[FIX] sale_project: fixed a test_cost_invoicing test case,"It was failing in single module builds /locally and the reason was due to the fact that project not having a analytic account.

task-4500108
",kthe-odoo,2025-01-22 13:11:44+00:00,['kthe-odoo'],2025-02-07 12:38:39+00:00,2025-01-24 12:25:20+00:00,https://github.com/odoo/odoo/pull/194701,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607214659, 'issue_id': 2804359112, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194701.png)](https://mergebot.odoo.com/odoo/odoo/pull/194701)', 'created_at': datetime.datetime(2025, 1, 22, 13, 11, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 13:11:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194701.png)](https://mergebot.odoo.com/odoo/odoo/pull/194701)

"
2804312022,pull_request,closed,,[FIX] mail: update systray counter on discard of native notification,"**Current behavior before PR:**

Since [1](https://github.com/odoo/odoo/pull/192336) when a user discarded the `Turn on notifications` option from the 
messaging menu,  the systray notification counter was not updated. 
This issue occurred due to an incorrectly written condition.

**Desired behavior after PR is merged:**

The issue is resolved, and the systray notification counter is correctly 
updated when the user discards the native notification prompt.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ramh-odoo,2025-01-22 12:51:19+00:00,[],2025-01-25 11:43:59+00:00,2025-01-24 19:58:43+00:00,https://github.com/odoo/odoo/pull/194700,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607168001, 'issue_id': 2804312022, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194700.png)](https://mergebot.odoo.com/odoo/odoo/pull/194700)', 'created_at': datetime.datetime(2025, 1, 22, 12, 51, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:51:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194700.png)](https://mergebot.odoo.com/odoo/odoo/pull/194700)

"
2804289158,pull_request,closed,,"[IMP] project,website_project: move ""email_from"" field to project","This PR moves the field ""email_from"" on tasks from website_project to project in preparation of further features preventing infinite email loops.

Task-4461572
",MissingNoShiny,2025-01-22 12:41:10+00:00,[],2025-02-07 17:59:23+00:00,2025-01-24 17:59:18+00:00,https://github.com/odoo/odoo/pull/194699,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607146773, 'issue_id': 2804289158, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194699.png)](https://mergebot.odoo.com/odoo/odoo/pull/194699)', 'created_at': datetime.datetime(2025, 1, 22, 12, 41, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612630039, 'issue_id': 2804289158, 'author': 'xavierbol', 'body': 'robodoo r+ delegate+\r\n\r\nI give you the r+ rights in the case you have to r+ again this PR next week. 🙂', 'created_at': datetime.datetime(2025, 1, 24, 14, 13, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612738479, 'issue_id': 2804289158, 'author': 'robodoo', 'body': '@MissingNoShiny @xavierbol linked pull request(s) odoo/upgrade#7106 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 24, 15, 0, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:41:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194699.png)](https://mergebot.odoo.com/odoo/odoo/pull/194699)

xavierbol on (2025-01-24 14:13:41 UTC): robodoo r+ delegate+

I give you the r+ rights in the case you have to r+ again this PR next week. 🙂

robodoo on (2025-01-24 15:00:20 UTC): @MissingNoShiny @xavierbol linked pull request(s) odoo/upgrade#7106 not ready. Linked PRs are not staged until all of them are ready.

"
2804277876,pull_request,open,,[ADD] tools: implementation of PdfSigner for signing pdf documents,"## Purpose

Currently, there is no way to add a digital signature to a document.

## Specification

The main goal of this PR is to provide an easy way to add signature fields to pdf such that any subsequent modification to the document can be seen in a pdf viewer (i.e. Okular, Adobe Acrobat, ...). The implementation is based on the [PyHanko](https://pyhanko.readthedocs.io) library, to which it extracts the signature feature only.

## Design choice

**Why not using PyHanko since it already implements the desired behaviour?**

The choice not to use the library was made because
1. The library is still experimental so not suited for production use,
2. It has a lot of features that are not useful for our use case.

## Known limitations

- Signing a pdf which is already signed will break the first signature. This part could probably be solved using the incremental mode but this feature is not available in the current supported version of PyPDF,
- The signature mechanism currently only supports SHA256-RSA private key.

Task 4331729

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",Deimort,2025-01-22 12:35:53+00:00,[],2025-02-06 08:19:42+00:00,,https://github.com/odoo/odoo/pull/194698,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607135356, 'issue_id': 2804277876, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194698.png)](https://mergebot.odoo.com/odoo/odoo/pull/194698)', 'created_at': datetime.datetime(2025, 1, 22, 12, 35, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:35:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194698.png)](https://mergebot.odoo.com/odoo/odoo/pull/194698)

"
2804276734,pull_request,closed,,[FW][FIX] web_editor: position buttons under cropper,"**Problem**:
The cropper buttons are positioned at the end of the page instead of directly under the image being cropped.

**Solution**:
Remove `position: fixed` from the buttons container, allowing it to be positioned just below the image being cropped/edited.

**Steps to Reproduce**:
1. Navigate to Email Marketing > Start from scratch.
2. Add ""Blocks"" > ""Body"" > ""Columns"".
3. Open the cropping tool on the first image.
4. Observe that the cropping buttons appear at the end of the page, requiring scrolling to access them.

opw-4461565

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193016",fw-bot,2025-01-22 12:35:21+00:00,[],2025-01-29 08:14:07+00:00,2025-01-29 08:14:07+00:00,https://github.com/odoo/odoo/pull/194697,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607134222, 'issue_id': 2804276734, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194697.png)](https://mergebot.odoo.com/odoo/odoo/pull/194697)', 'created_at': datetime.datetime(2025, 1, 22, 12, 35, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607134242, 'issue_id': 2804276734, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 12, 35, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:35:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194697.png)](https://mergebot.odoo.com/odoo/odoo/pull/194697)

fw-bot (Issue Creator) on (2025-01-22 12:35:23 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804264547,pull_request,closed,,[FW][FIX] website: do not observe mutations making s_popup visible,"Description of the issue this PR addresses:

Pressing enter in the `s_popup` snippet after making it visible via the right panel would hide the popup. This occurred because the mutation observer detected changes which shows the modal and rolled them back during the `insertLineBreak` operation. This commit ensures that those mutations are not observed.

task-4255083

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194613
Forward-Port-Of: odoo/odoo#191810",fw-bot,2025-01-22 12:29:46+00:00,[],2025-02-07 11:40:31+00:00,2025-01-24 11:28:06+00:00,https://github.com/odoo/odoo/pull/194696,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607122985, 'issue_id': 2804264547, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194696.png)](https://mergebot.odoo.com/odoo/odoo/pull/194696)', 'created_at': datetime.datetime(2025, 1, 22, 12, 29, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607123012, 'issue_id': 2804264547, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo cherrypicking of pull request odoo/odoo#191810 failed.\n\nstdout:\n```\nAuto-merging addons/website/static/tests/tours/snippet_popup_add_remove.js\nCONFLICT (content): Merge conflict in addons/website/static/tests/tours/snippet_popup_add_remove.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 12, 29, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689555, 'issue_id': 2804264547, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385884, 'issue_id': 2804264547, 'author': 'fw-bot', 'body': '@deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611608193, 'issue_id': 2804264547, 'author': 'deso-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 5, 5, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611648993, 'issue_id': 2804264547, 'author': 'robodoo', 'body': '@deso-odoo @dmo-odoo staging failed: ci/runbot on e8c199e642ef284b41eaa73398076ffd37b3d3fd (view more at https://runbot.odoo.com/runbot/build/73879504)', 'created_at': datetime.datetime(2025, 1, 24, 5, 42, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612032198, 'issue_id': 2804264547, 'author': 'dmo-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 24, 9, 14, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:29:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194696.png)](https://mergebot.odoo.com/odoo/odoo/pull/194696)

fw-bot (Issue Creator) on (2025-01-22 12:29:48 UTC): @deso-odoo @dmo-odoo cherrypicking of pull request odoo/odoo#191810 failed.

stdout:
```
Auto-merging addons/website/static/tests/tours/snippet_popup_add_remove.js
CONFLICT (content): Merge conflict in addons/website/static/tests/tours/snippet_popup_add_remove.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 02:01:30 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:24 UTC): @deso-odoo @dmo-odoo this forward port of odoo/odoo#191810 is awaiting action (not merged or closed).

deso-odoo on (2025-01-24 05:05:12 UTC): @robodoo r+

robodoo on (2025-01-24 05:42:52 UTC): @deso-odoo @dmo-odoo staging failed: ci/runbot on e8c199e642ef284b41eaa73398076ffd37b3d3fd (view more at https://runbot.odoo.com/runbot/build/73879504)

dmo-odoo on (2025-01-24 09:14:35 UTC): @robodoo retry

"
2804262628,pull_request,closed,,[IMP] project: sort tasks by ID in the portal,"In the task list view of the portal, we can filter tickets by create date.
However, this doesn't work as intended when tasks are created at the same time.
This PR makes it so we sort by ID instead, since this is what we actually want to see.

Task-4438387
",MissingNoShiny,2025-01-22 12:28:54+00:00,[],2025-02-06 16:54:45+00:00,2025-02-06 16:54:45+00:00,https://github.com/odoo/odoo/pull/194695,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2607121236, 'issue_id': 2804262628, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194695.png)](https://mergebot.odoo.com/odoo/odoo/pull/194695)', 'created_at': datetime.datetime(2025, 1, 22, 12, 28, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:28:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194695.png)](https://mergebot.odoo.com/odoo/odoo/pull/194695)

"
2804243986,pull_request,closed,,[FIX] point_of_sale: handle offline POS traceback,"Steps to Reproduce:
===================
- Open a POS session and go offline.
- Create orders and print receipts at the receipt screen.
- Restore the internet connection and bring the POS online.
- A traceback occurs during synchronization.

Before this commit:
=====================
A traceback occurred when making a POS order, printing a receipt in offline
mode, and later going online.
The issue arose because the nb_print field was updated via a backend write call
to restrict payment method edits. However, during offline mode, the order_id
was a string, causing the traceback.

After this commit:
===================
- The backend write call for nb_print is bypassed in offline mode. Instead, the
 `nb_print` count is updated on the frontend. When the order syncs after going
  online, the increased `nb_print` value prevents payment method edits as
  expected.
- Removed the nb_print validation constrains from payment lines. Validation is
  already handled in the write method of pos.order. This change avoids
  validation errors when syncing orders from offline to online, where
  nb_print = 1 and payment lines exist. The write method ensures proper handling
  during order creation.
- A `Connection Lost` error message is displayed when attempting to send
  orders to the kitchen while in offline mode.

Task-4504625",jipr-odoo,2025-01-22 12:20:16+00:00,[],2025-01-31 17:45:41+00:00,2025-01-31 17:45:41+00:00,https://github.com/odoo/odoo/pull/194694,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607103493, 'issue_id': 2804243986, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194694.png)](https://mergebot.odoo.com/odoo/odoo/pull/194694)', 'created_at': datetime.datetime(2025, 1, 22, 12, 20, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615318696, 'issue_id': 2804243986, 'author': 'jipr-odoo', 'body': '> All of this is already done in data_service.js\r\n\r\nyes but in offline the id pos order is string at start and when it goes for sync the string id gets an traceback \r\nso that to convert string id to integer we call syncAllOrder method and then send it to syncdata', 'created_at': datetime.datetime(2025, 1, 27, 10, 4, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:20:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194694.png)](https://mergebot.odoo.com/odoo/odoo/pull/194694)

jipr-odoo (Issue Creator) on (2025-01-27 10:04:34 UTC): yes but in offline the id pos order is string at start and when it goes for sync the string id gets an traceback 
so that to convert string id to integer we call syncAllOrder method and then send it to syncdata

"
2804242252,pull_request,closed,,[FW][FIX] rpc: re-raise exceptions for http.py,"For my friends at tech support

Exceptions in RPC are handled and a Response is returned directly. It is a different behaviour than jsonrpc where the exception is raised and the dispatcher wraps it is a Response after logging the exception. The xmlrpc code should also raise an exception so that it can be handled in http.py. Adding here a way to detect if a Response was already generated for an exception in the exception handler of HTTP.

Related: #193208

Forward-Port-Of: odoo/odoo#194467
Forward-Port-Of: odoo/odoo#193421",fw-bot,2025-01-22 12:19:26+00:00,[],2025-02-03 13:08:46+00:00,2025-02-03 13:08:46+00:00,https://github.com/odoo/odoo/pull/194693,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607101756, 'issue_id': 2804242252, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194693.png)](https://mergebot.odoo.com/odoo/odoo/pull/194693)', 'created_at': datetime.datetime(2025, 1, 22, 12, 19, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607101776, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 12, 19, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607264543, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': '@Julien00859 the next pull request (odoo/odoo#194709) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 13, 33, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689357, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611385596, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 24, 2, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614172204, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 26, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2629730552, 'issue_id': 2804242252, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 2, 3, 2, 2, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630499248, 'issue_id': 2804242252, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 10, 9, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:19:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194693.png)](https://mergebot.odoo.com/odoo/odoo/pull/194693)

fw-bot (Issue Creator) on (2025-01-22 12:19:28 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 13:33:57 UTC): @Julien00859 the next pull request (odoo/odoo#194709) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 02:01:19 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-24 02:01:12 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-26 02:01:41 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-02-03 02:02:45 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

Julien00859 on (2025-02-03 10:09:04 UTC): @robodoo r+

"
2804238576,pull_request,open,,[IMP] product: calculating domain in compute,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",mash-odoo,2025-01-22 12:17:39+00:00,[],2025-01-22 13:00:21+00:00,,https://github.com/odoo/odoo/pull/194692,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607098100, 'issue_id': 2804238576, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194692.png)](https://mergebot.odoo.com/odoo/odoo/pull/194692)', 'created_at': datetime.datetime(2025, 1, 22, 12, 17, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:17:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194692.png)](https://mergebot.odoo.com/odoo/odoo/pull/194692)

"
2804226431,pull_request,closed,,[FIX] pos_self_order_stripe: fix Stripe payments,"Currently in v18 Stripe payments are broken and don't work anymore. This PR adjusts the code so that Stripe works again in self order mode. It fixes the error ""An error has occured"" seen when sending a payment to a Stripe terminal + it also fixes the response sent to PoS to confirm Stripe payments.

opw-4283413
opw-4358017
",Ysoroko,2025-01-22 12:12:07+00:00,[],2025-02-06 11:46:49+00:00,2025-01-23 11:40:44+00:00,https://github.com/odoo/odoo/pull/194691,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2607084997, 'issue_id': 2804226431, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194691.png)](https://mergebot.odoo.com/odoo/odoo/pull/194691)', 'created_at': datetime.datetime(2025, 1, 22, 12, 12, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609204550, 'issue_id': 2804226431, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 8, 55, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:12:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194691.png)](https://mergebot.odoo.com/odoo/odoo/pull/194691)

caburj on (2025-01-23 08:55:44 UTC): robodoo r+

"
2804207221,pull_request,closed,,[FIX] point_of_sale: synchronisation latence with connected printers,"Previously, when some printers were connected to the PoS, the synchronisation of the order was slow because we were waiting for the response of each printer.

Now we don't wait for the response of the printer, we just send the order to the printer and we continue the process.
",davidmonnom,2025-01-22 12:03:20+00:00,[],2025-02-05 17:20:20+00:00,2025-01-22 16:50:51+00:00,https://github.com/odoo/odoo/pull/194690,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607065079, 'issue_id': 2804207221, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194690.png)](https://mergebot.odoo.com/odoo/odoo/pull/194690)', 'created_at': datetime.datetime(2025, 1, 22, 12, 3, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607472136, 'issue_id': 2804207221, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 14, 57, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:03:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194690.png)](https://mergebot.odoo.com/odoo/odoo/pull/194690)

caburj on (2025-01-22 14:57:30 UTC): robodoo r+

"
2804204819,pull_request,closed,,[FW][IMP] mail: improve quote reply detection,"We update quote detection for gmail and outlook:
- gmail has simple wrapper divs with explicit classes
- outlook has a mix of div ids and simple pattern-based quoting (everything under ""<hr><div id=""divRplyFwdMsg""/> seems to be considered a quote)

Previously gmail just used blockquote, which still works but does not capture ""On xx:xx:xx X <X@gmail.com> wrote:"" headers, which are caught for outlook.

Previously outlook had a wrapper div around divRplyFwdMsg which would set data-o-mail-quote-container on it, and propagate to children. However it seems that outer div was either removed or is not always present, a heuristic is thus needed.

task-4381505

Forward-Port-Of: odoo/odoo#194615
Forward-Port-Of: odoo/odoo#192875",fw-bot,2025-01-22 12:02:10+00:00,[],2025-02-06 10:31:51+00:00,2025-01-23 09:53:18+00:00,https://github.com/odoo/odoo/pull/194689,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607062422, 'issue_id': 2804204819, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194689.png)](https://mergebot.odoo.com/odoo/odoo/pull/194689)', 'created_at': datetime.datetime(2025, 1, 22, 12, 2, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607062439, 'issue_id': 2804204819, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 12, 2, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:02:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194689.png)](https://mergebot.odoo.com/odoo/odoo/pull/194689)

fw-bot (Issue Creator) on (2025-01-22 12:02:12 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804204109,pull_request,closed,,[FW][FIX] point_of_sale: add additional field in product loader,"Issue -->

Using the 'product.product.name' field in loyalty.reward.discount_product_domain that is not added via the `_loader_params_product_product` loader causes an error in the matchCondition function
https://github.com/odoo/odoo/blob/9b0f528aa02743372934df8e64d1cc0ad74903b6/addons/web/static/src/core/domain.js#L331 where variable fieldValue is undefined if the field is not available.

Solution -->

Adding the `name` field search parameters in the `_loader_params_product_product` similar to https://github.com/odoo/odoo/pull/186804

opw-4410460

Forward-Port-Of: odoo/odoo#194637",fw-bot,2025-01-22 12:01:50+00:00,[],2025-02-05 21:57:10+00:00,2025-01-22 21:53:21+00:00,https://github.com/odoo/odoo/pull/194688,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2607061663, 'issue_id': 2804204109, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194688.png)](https://mergebot.odoo.com/odoo/odoo/pull/194688)', 'created_at': datetime.datetime(2025, 1, 22, 12, 1, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607061694, 'issue_id': 2804204109, 'author': 'fw-bot', 'body': '@adda-odoo @davidmonnom cherrypicking of pull request odoo/odoo#194637 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_session.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 12, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608209514, 'issue_id': 2804204109, 'author': 'adda-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 20, 34, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 12:01:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194688.png)](https://mergebot.odoo.com/odoo/odoo/pull/194688)

fw-bot (Issue Creator) on (2025-01-22 12:01:52 UTC): @adda-odoo @davidmonnom cherrypicking of pull request odoo/odoo#194637 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_session.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_session.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adda-odoo on (2025-01-22 20:34:02 UTC): @robodoo r+

"
2804195242,pull_request,closed,,[FW][FIX] l10n_ch: print Swiss Qrcodes when the transaction is possible,"### Steps to reproduce:
- Install ""l10n_ch"" and switch to a Swiss company
- Create an invoice for a Swiss partner
- Send it
- The QR code appears in the generated PDF

### Cause:
The bank eligibility is not checked when printing the QR code.

### Solution:
After a discussion with the PO (THB) the Qr codes should appear on all Swiss transaction. But if the fiscal country of the user's company is not Switzerland, it must still be printed if its bank account is eligible to receive payments via QRcodes.

So the solution is to add a check if the fiscal_country is not Switzerland, then we check the account validity. A valid account is an IBAN account of this type CHXX 3000 0XXX XXXX with the number in the middle being between 30000 and 31999.

opw-4380520

Forward-Port-Of: odoo/odoo#194563
Forward-Port-Of: odoo/odoo#194421",fw-bot,2025-01-22 11:57:44+00:00,[],2025-02-07 12:48:49+00:00,2025-01-24 12:43:34+00:00,https://github.com/odoo/odoo/pull/194687,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2607052652, 'issue_id': 2804195242, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194687.png)](https://mergebot.odoo.com/odoo/odoo/pull/194687)', 'created_at': datetime.datetime(2025, 1, 22, 11, 57, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607052671, 'issue_id': 2804195242, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 11, 57, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:57:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194687.png)](https://mergebot.odoo.com/odoo/odoo/pull/194687)

fw-bot (Issue Creator) on (2025-01-22 11:57:46 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804179709,pull_request,closed,,[IMP] l10n_sk: new VAT rates for 2025,"Since 1 January 2025, the VAT rates in Slovakia have increased from 20% to 23% and from 10% to 19%. This commit adds the new taxes and updates the fiscal position accordingly.

task-4502344",alialfie,2025-01-22 11:50:10+00:00,[],2025-02-07 18:03:57+00:00,2025-02-07 18:03:57+00:00,https://github.com/odoo/odoo/pull/194686,"[('RD', 'research & development, internal work')]","[{'comment_id': 2607036742, 'issue_id': 2804179709, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194686.png)](https://mergebot.odoo.com/odoo/odoo/pull/194686)', 'created_at': datetime.datetime(2025, 1, 22, 11, 50, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618584173, 'issue_id': 2804179709, 'author': 'alialfie', 'body': ""@SaddemAmine Thanks for the review!\r\nAs the whole module lacks an i18n, I think it would be a better idea to add it in another task. I'll check with a PO about this and if so make a task for it. What do you think?"", 'created_at': datetime.datetime(2025, 1, 28, 10, 23, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618634402, 'issue_id': 2804179709, 'author': 'SaddemAmine', 'body': 'Ayo eng @alialfie\r\nThat sounds good to me!', 'created_at': datetime.datetime(2025, 1, 28, 10, 45, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643389873, 'issue_id': 2804179709, 'author': 'gawa-odoo', 'body': ""@robodoo r+\r\n\r\nThe translations are not needed in 16.0 as everything was in Slovakian (as en_EN) so there was no place to translate it to English.\r\nIn 17.0+ you would need to add translations, as the base language was changed to English, to leave space for translations (but they will mainly be in the csv's for this PR)"", 'created_at': datetime.datetime(2025, 2, 7, 16, 20, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:50:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194686.png)](https://mergebot.odoo.com/odoo/odoo/pull/194686)

alialfie (Issue Creator) on (2025-01-28 10:23:12 UTC): @SaddemAmine Thanks for the review!
As the whole module lacks an i18n, I think it would be a better idea to add it in another task. I'll check with a PO about this and if so make a task for it. What do you think?

SaddemAmine on (2025-01-28 10:45:21 UTC): Ayo eng @alialfie
That sounds good to me!

gawa-odoo on (2025-02-07 16:20:55 UTC): @robodoo r+

The translations are not needed in 16.0 as everything was in Slovakian (as en_EN) so there was no place to translate it to English.
In 17.0+ you would need to add translations, as the base language was changed to English, to leave space for translations (but they will mainly be in the csv's for this PR)

"
2804132025,pull_request,closed,,[FW][IMP] event: clarify the Timezone field name and tooltips,"### Issue:

The current descriptions and naming of the `Date` fields (`date_begin`, `date_end`) and the `Timezone` field (`date_tz`) can be confusing in the form view of the event model. Specifically:

The timezone used for converting the form dates to the database is determined by the context and not by the `Timezone` field present on the form. However, this `Timezone` field determines the timezone used for displaying the event's date/time on the website. This change tries to clarify the situation.

opw-4323142
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193587
Forward-Port-Of: odoo/odoo#190867",fw-bot,2025-01-22 11:27:38+00:00,[],2025-02-06 16:48:29+00:00,2025-01-23 16:42:24+00:00,https://github.com/odoo/odoo/pull/194685,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2606987777, 'issue_id': 2804132025, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194685.png)](https://mergebot.odoo.com/odoo/odoo/pull/194685)', 'created_at': datetime.datetime(2025, 1, 22, 11, 27, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606987824, 'issue_id': 2804132025, 'author': 'fw-bot', 'body': '@lase-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194671\n* odoo/odoo#194354\n* odoo/odoo#194339\n* odoo/odoo#194326\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 11, 27, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607185468, 'issue_id': 2804132025, 'author': 'jeh-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 12, 59, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607187280, 'issue_id': 2804132025, 'author': 'robodoo', 'body': '@lase-odoo @jeh-odoo linked pull request(s) odoo/documentation#11820 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 22, 13, 0, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609267271, 'issue_id': 2804132025, 'author': 'robodoo', 'body': '@lase-odoo @jeh-odoo staging failed: ci/runbot on 0c27642dc7c9dc7c1fb77fe4e9ab02c2099b76df (view more at https://runbot.odoo.com/runbot/build/73820449)', 'created_at': datetime.datetime(2025, 1, 23, 9, 16, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609900093, 'issue_id': 2804132025, 'author': 'lase-odoo', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 23, 14, 7, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:27:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194685.png)](https://mergebot.odoo.com/odoo/odoo/pull/194685)

fw-bot (Issue Creator) on (2025-01-22 11:27:41 UTC): @lase-odoo @jeh-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194671
* odoo/odoo#194354
* odoo/odoo#194339
* odoo/odoo#194326

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

jeh-odoo on (2025-01-22 12:59:22 UTC): @robodoo r+

robodoo on (2025-01-22 13:00:14 UTC): @lase-odoo @jeh-odoo linked pull request(s) odoo/documentation#11820 not ready. Linked PRs are not staged until all of them are ready.

robodoo on (2025-01-23 09:16:36 UTC): @lase-odoo @jeh-odoo staging failed: ci/runbot on 0c27642dc7c9dc7c1fb77fe4e9ab02c2099b76df (view more at https://runbot.odoo.com/runbot/build/73820449)

lase-odoo on (2025-01-23 14:07:02 UTC): robodoo retry

"
2804123095,pull_request,closed,,"[FIX] mail, im_livechat: prevent renaming livechat channels","Before this commit it was possible to rename livechat channels in the front-end interface even though it would not be allowed server-side.
This commit removes the action button to rename a livechat channel and disables the AutoresizeInput of the thread name.
",Atovange,2025-01-22 11:23:16+00:00,[],2025-01-22 12:41:57+00:00,2025-01-22 12:41:57+00:00,https://github.com/odoo/odoo/pull/194684,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606978695, 'issue_id': 2804123095, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194684.png)](https://mergebot.odoo.com/odoo/odoo/pull/194684)', 'created_at': datetime.datetime(2025, 1, 22, 11, 23, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:23:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194684.png)](https://mergebot.odoo.com/odoo/odoo/pull/194684)

"
2804114539,pull_request,closed,,[FW][FIX] web_editor: position buttons under cropper,"**Problem**:
The cropper buttons are positioned at the end of the page instead of directly under the image being cropped.

**Solution**:
Remove `position: fixed` from the buttons container, allowing it to be positioned just below the image being cropped/edited.

**Steps to Reproduce**:
1. Navigate to Email Marketing > Start from scratch.
2. Add ""Blocks"" > ""Body"" > ""Columns"".
3. Open the cropping tool on the first image.
4. Observe that the cropping buttons appear at the end of the page, requiring scrolling to access them.

opw-4461565

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193016",fw-bot,2025-01-22 11:19:13+00:00,[],2025-01-29 08:19:27+00:00,2025-01-29 08:19:27+00:00,https://github.com/odoo/odoo/pull/194683,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606970136, 'issue_id': 2804114539, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194683.png)](https://mergebot.odoo.com/odoo/odoo/pull/194683)', 'created_at': datetime.datetime(2025, 1, 22, 11, 19, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606970153, 'issue_id': 2804114539, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 11, 19, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:19:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194683.png)](https://mergebot.odoo.com/odoo/odoo/pull/194683)

fw-bot (Issue Creator) on (2025-01-22 11:19:14 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804094690,pull_request,closed,,[FW][FIX] rpc: re-raise exceptions for http.py,"For my friends at tech support

Exceptions in RPC are handled and a Response is returned directly. It is a different behaviour than jsonrpc where the exception is raised and the dispatcher wraps it is a Response after logging the exception. The xmlrpc code should also raise an exception so that it can be handled in http.py. Adding here a way to detect if a Response was already generated for an exception in the exception handler of HTTP.

Related: #193208

Forward-Port-Of: odoo/odoo#194467
Forward-Port-Of: odoo/odoo#193421",fw-bot,2025-01-22 11:10:01+00:00,[],2025-02-03 13:06:27+00:00,2025-02-03 13:06:27+00:00,https://github.com/odoo/odoo/pull/194682,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606950204, 'issue_id': 2804094690, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194682.png)](https://mergebot.odoo.com/odoo/odoo/pull/194682)', 'created_at': datetime.datetime(2025, 1, 22, 11, 10, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606950226, 'issue_id': 2804094690, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 11, 10, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:10:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194682.png)](https://mergebot.odoo.com/odoo/odoo/pull/194682)

fw-bot (Issue Creator) on (2025-01-22 11:10:04 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804094003,pull_request,closed,,[FW][FIX] purchase: fix tour by providing appropriate class,"Before this commit:
===================
- The purchase tour was failing because the tour's JavaScript used
  an incorrect class selector (targeting 'partner_id'), which prevented
  it from locating the intended DOM element. Consequently,
  the sequence of actions was interrupted, causing the tour to break midway.

After this commit:
===================
- The issue has been resolved by updating the tour to use the correct and
  unique class selector. This ensures the tour accurately targets the
  intended element, allowing it to proceed without interruptions.
  As a result, the purchase tour runs successfully and achieves its intended purpose.

TaskId: 4268662

Forward-Port-Of: odoo/odoo#194562
Forward-Port-Of: odoo/odoo#184735",fw-bot,2025-01-22 11:09:41+00:00,[],2025-02-06 05:47:13+00:00,2025-01-23 05:40:41+00:00,https://github.com/odoo/odoo/pull/194681,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2606949548, 'issue_id': 2804094003, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194681.png)](https://mergebot.odoo.com/odoo/odoo/pull/194681)', 'created_at': datetime.datetime(2025, 1, 22, 11, 9, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606949579, 'issue_id': 2804094003, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.\n\nstdout:\n```\nAuto-merging addons/purchase/static/src/js/tours/purchase.js\nCONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 11, 9, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689787, 'issue_id': 2804094003, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608827261, 'issue_id': 2804094003, 'author': 'dhha-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 4, 27, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 11:09:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194681.png)](https://mergebot.odoo.com/odoo/odoo/pull/194681)

fw-bot (Issue Creator) on (2025-01-22 11:09:45 UTC): @dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.

stdout:
```
Auto-merging addons/purchase/static/src/js/tours/purchase.js
CONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-23 02:01:43 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

dhha-odoo on (2025-01-23 04:27:02 UTC): robodoo r+

"
2804063801,pull_request,closed,,[FW][FIX] account: prevent tax application on discount,"Minimal Configuration:
- Create an account (49999 Great Account) that has a default tax (15%)
- Settings > Accounting: define ""Separate discount accounts on invoices"" > Customer invoices with an account (e.g. 443000 Cash Discount Loss)

Steps to reproduce:
- Create an invoice with an invoice line that has ""Great Account"", a discount (10%) and a price (100) and a tax (15%)
- Confirm -> amount = 108.9
- Duplicate the invoice (in the ticket: Create a Credit Note)

Issue:
=> The credit note is not of the same amount = 106.80. That is, MINUS discount * tax_amount <-> 108.90 MINUS 10% * 21= 106.80

Cause:
When there is a ""Separate discount accounts on invoices"" that is set, discount line appear on the journal items of the document; moves between the default account for such transaction to the chosen move in the settings.
When iterating through those discount lines, the condition was not strict enough to filter them out and would put a tax on them (as my dear colleague Andrea said: the bomb has been planted)

Therefore, when creating a credit/duplicating,  we copy the data  wrongly (but in a correct a way for a standard flow) which gives incoherent results

opw-4166601

Forward-Port-Of: odoo/odoo#193483
Forward-Port-Of: odoo/odoo#187565",fw-bot,2025-01-22 10:56:45+00:00,[],2025-02-06 10:43:49+00:00,2025-01-23 10:42:39+00:00,https://github.com/odoo/odoo/pull/194680,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2606920490, 'issue_id': 2804063801, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194680.png)](https://mergebot.odoo.com/odoo/odoo/pull/194680)', 'created_at': datetime.datetime(2025, 1, 22, 10, 56, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606920512, 'issue_id': 2804063801, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#194665\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 10, 56, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607007156, 'issue_id': 2804063801, 'author': 'yosa-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 11, 36, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:56:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194680.png)](https://mergebot.odoo.com/odoo/odoo/pull/194680)

fw-bot (Issue Creator) on (2025-01-22 10:56:47 UTC): @yosa-odoo @smetl this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#194665

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

yosa-odoo on (2025-01-22 11:36:39 UTC): robodoo r+

"
2804035089,pull_request,closed,,[IMP] crm: add link to Ringover in settings,"We now partner with Ringover to provide VOIP capabilities using a browser extension for integration.

We add a link to that extension in the ""integrations"".

This is done in CRM because this is the most relevant app for VOIP usage.

task-4488082
",reth-odoo,2025-01-22 10:44:14+00:00,[],2025-02-06 01:30:19+00:00,2025-01-23 01:28:59+00:00,https://github.com/odoo/odoo/pull/194678,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606891361, 'issue_id': 2804035089, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194678.png)](https://mergebot.odoo.com/odoo/odoo/pull/194678)', 'created_at': datetime.datetime(2025, 1, 22, 10, 44, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:44:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194678.png)](https://mergebot.odoo.com/odoo/odoo/pull/194678)

"
2804029825,pull_request,closed,,[FW][FIX] l10n_ch: print Swiss Qrcodes when the transaction is possible,"### Steps to reproduce:
- Install ""l10n_ch"" and switch to a Swiss company
- Create an invoice for a Swiss partner
- Send it
- The QR code appears in the generated PDF

### Cause:
The bank eligibility is not checked when printing the QR code.

### Solution:
After a discussion with the PO (THB) the Qr codes should appear on all Swiss transaction. But if the fiscal country of the user's company is not Switzerland, it must still be printed if its bank account is eligible to receive payments via QRcodes.

So the solution is to add a check if the fiscal_country is not Switzerland, then we check the account validity. A valid account is an IBAN account of this type CHXX 3000 0XXX XXXX with the number in the middle being between 30000 and 31999.

opw-4380520

Forward-Port-Of: odoo/odoo#194563
Forward-Port-Of: odoo/odoo#194421",fw-bot,2025-01-22 10:42:17+00:00,[],2025-02-07 12:38:46+00:00,2025-01-24 12:28:30+00:00,https://github.com/odoo/odoo/pull/194677,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606885816, 'issue_id': 2804029825, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194677.png)](https://mergebot.odoo.com/odoo/odoo/pull/194677)', 'created_at': datetime.datetime(2025, 1, 22, 10, 42, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606885853, 'issue_id': 2804029825, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 10, 42, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:42:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194677.png)](https://mergebot.odoo.com/odoo/odoo/pull/194677)

fw-bot (Issue Creator) on (2025-01-22 10:42:20 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2804006289,pull_request,closed,,[FIX] website: fix unable to enter edit mode on old browsers,"Since commit [1], we added a selector using the "":has"" pseudo-class in the template that defines where ""inner content"" blocks can be dropped. It is no longer possible to enter edit mode (a traceback occurs) starting from Odoo version 18.0 and in browsers older than Chrome 112 or Firefox 121.

This bug happens because the same selector, used by jQuery, combines both the "":has"" pseudo-class and the "":is"" pseudo-class (this "":is"" pseudo-class was introduced into the same selector by commit [2] starting from Odoo version 18.0). This is not compatible with the older browsers mentioned above.

The bug only appears in version 18. However, we already fixed this in 16.0 in case potential customizations had added the "":is"" pseudo-class to the same selector.

[1]: https://github.com/odoo/odoo/commit/65a85009800dfa45526ebdc41d3a0a808b2e9f6d
[2]: https://github.com/odoo/odoo/commit/e0fc83760f991fa2fea39763bb2709d9e0182316

opw-4494945",bvr-odoo,2025-01-22 10:31:50+00:00,[],2025-01-24 10:38:12+00:00,2025-01-23 15:42:25+00:00,https://github.com/odoo/odoo/pull/194676,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2606863230, 'issue_id': 2804006289, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194676.png)](https://mergebot.odoo.com/odoo/odoo/pull/194676)', 'created_at': datetime.datetime(2025, 1, 22, 10, 31, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607103663, 'issue_id': 2804006289, 'author': 'bvr-odoo', 'body': '@qsm-odoo Could you review this PR please ? (I tested it on V18.0 and on old browsers with Browserstack, it works)', 'created_at': datetime.datetime(2025, 1, 22, 12, 20, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:31:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194676.png)](https://mergebot.odoo.com/odoo/odoo/pull/194676)

bvr-odoo (Issue Creator) on (2025-01-22 12:20:24 UTC): @qsm-odoo Could you review this PR please ? (I tested it on V18.0 and on old browsers with Browserstack, it works)

"
2804004879,pull_request,open,,[FIX] l10n_ar_withholding: prevent error when clicking on create payment button,"When working with the `(AR) Monotributista` company and handling taxes, an error may occur during the payment registration process for confirmed invoices.

Steps to produce:
- Install the `l10n_ar_withholding` module.
- Switch to `(AR) Monotributista` company.
- Navigate to Invoicing > Configuration > Accounting > Taxes
- Create a new tax TEST > set `Tax Type = 'None'`, `Argentinean Withholding type = 'Customer'` and `Tax Computation = 'Group of Taxes​'`
- Create and confirm an invoice.
- Click on the `Register Payment` button, select tax TEST in the `tax` field, and fill in the `number` field.
- Click on `Create Payment` button.
- Observed the error.

error: `IndexError: list index out of range`

Currently, an error occurs when attempting to access the first element of `taxes_res['taxes']` without verifying if the list is empty. This happens in cases where `taxes_res['taxes']` contains no elements - [1].

This commit resolves the issue by adding a check to ensure the list is not empty before accessing its elements. If the list is empty, appropriate values are passed for further processing to avoid errors.

[1] - https://github.com/odoo/odoo/blob/d0677fc342e92cc64a9d83106b6f84810dc1569e/addons/l10n_ar_withholding/wizards/l10n_ar_payment_register_withholding.py#L38

Sentry-6220922322

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adip-odoo,2025-01-22 10:31:11+00:00,[],2025-02-07 10:54:02+00:00,,https://github.com/odoo/odoo/pull/194675,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606861797, 'issue_id': 2804004879, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194675.png)](https://mergebot.odoo.com/odoo/odoo/pull/194675)', 'created_at': datetime.datetime(2025, 1, 22, 10, 31, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:31:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194675.png)](https://mergebot.odoo.com/odoo/odoo/pull/194675)

"
2804001777,pull_request,open,,[IMP] web: Datetime picker improved time picker,"This PR adds a new TimePicker component which replaces the DateTimePicker time selects for an improved UX which:
- Allows directly typing the wanted time
- Parses varied time input styles into a proper formatted time
- Provide time suggestions

Task: [4337754](https://www.odoo.com/odoo/project/133/tasks/4337754/project.task/4337759)
Enterprise: https://github.com/odoo/enterprise/pull/77836

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",BastienFafchamps,2025-01-22 10:29:56+00:00,[],2025-02-06 08:46:19+00:00,,https://github.com/odoo/odoo/pull/194674,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606858679, 'issue_id': 2804001777, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194674.png)](https://mergebot.odoo.com/odoo/odoo/pull/194674)', 'created_at': datetime.datetime(2025, 1, 22, 10, 29, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:29:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194674.png)](https://mergebot.odoo.com/odoo/odoo/pull/194674)

"
2803994103,pull_request,closed,,[IMP] expression: deprecate internal methods,"task-4280707


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-22 10:26:34+00:00,[],2025-01-24 13:50:28+00:00,2025-01-24 11:09:09+00:00,https://github.com/odoo/odoo/pull/194673,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2606851128, 'issue_id': 2803994103, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194673.png)](https://mergebot.odoo.com/odoo/odoo/pull/194673)', 'created_at': datetime.datetime(2025, 1, 22, 10, 26, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611901295, 'issue_id': 2803994103, 'author': 'ryv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 8, 5, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611901379, 'issue_id': 2803994103, 'author': 'robodoo', 'body': '@kmagusiak @ryv-odoo because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 24, 8, 5, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611904499, 'issue_id': 2803994103, 'author': 'ryv-odoo', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 24, 8, 7, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2611904544, 'issue_id': 2803994103, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 24, 8, 7, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:26:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194673.png)](https://mergebot.odoo.com/odoo/odoo/pull/194673)

ryv-odoo on (2025-01-24 08:05:02 UTC): @robodoo r+

robodoo on (2025-01-24 08:05:06 UTC): @kmagusiak @ryv-odoo because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

ryv-odoo on (2025-01-24 08:07:05 UTC): @robodoo rebase-ff

robodoo on (2025-01-24 08:07:08 UTC): Merge method set to rebase and fast-forward.

"
2803986674,pull_request,closed,,[FW][FIX] web: prevent autocomplete crash on selection,"Before this commit, it could happen that the autocomplete does not find the option to select. Now, we give the option to select so we're sure that the option exists when we select it.

runbot errors: 5759, 102534, 111418

Forward-Port-Of: odoo/odoo#124584",fw-bot,2025-01-22 10:23:23+00:00,[],2025-02-06 12:52:05+00:00,2025-01-23 12:49:19+00:00,https://github.com/odoo/odoo/pull/194672,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2606843679, 'issue_id': 2803986674, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194672.png)](https://mergebot.odoo.com/odoo/odoo/pull/194672)', 'created_at': datetime.datetime(2025, 1, 22, 10, 23, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606843701, 'issue_id': 2803986674, 'author': 'fw-bot', 'body': '@mcm-odoo @juliusc2066 cherrypicking of pull request odoo/odoo#124584 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/core/autocomplete/autocomplete.js\nCONFLICT (content): Merge conflict in addons/web/static/src/core/autocomplete/autocomplete.js\nAuto-merging addons/web/static/src/core/autocomplete/autocomplete.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 10, 23, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606977203, 'issue_id': 2803986674, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 11, 22, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607057817, 'issue_id': 2803986674, 'author': 'robodoo', 'body': ""@mcm-odoo @juliusc2066 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 22, 12, 0, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609471671, 'issue_id': 2803986674, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 43, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:23:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194672.png)](https://mergebot.odoo.com/odoo/odoo/pull/194672)

fw-bot (Issue Creator) on (2025-01-22 10:23:25 UTC): @mcm-odoo @juliusc2066 cherrypicking of pull request odoo/odoo#124584 failed.

stdout:
```
Auto-merging addons/web/static/src/core/autocomplete/autocomplete.js
CONFLICT (content): Merge conflict in addons/web/static/src/core/autocomplete/autocomplete.js
Auto-merging addons/web/static/src/core/autocomplete/autocomplete.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mcm-odoo on (2025-01-22 11:22:35 UTC): @robodoo r+

robodoo on (2025-01-22 12:00:13 UTC): @mcm-odoo @juliusc2066 'ci/runbot' failed on this reviewed PR.

mcm-odoo on (2025-01-23 10:43:46 UTC): @robodoo r+

"
2803963885,pull_request,closed,,[FW][IMP] event: clarify the Timezone field name and tooltips,"### Issue:

The current descriptions and naming of the `Date` fields (`date_begin`, `date_end`) and the `Timezone` field (`date_tz`) can be confusing in the form view of the event model. Specifically:

The timezone used for converting the form dates to the database is determined by the context and not by the `Timezone` field present on the form. However, this `Timezone` field determines the timezone used for displaying the event's date/time on the website. This change tries to clarify the situation.

opw-4323142
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193587
Forward-Port-Of: odoo/odoo#190867",fw-bot,2025-01-22 10:13:35+00:00,[],2025-02-05 23:11:18+00:00,2025-01-22 23:04:25+00:00,https://github.com/odoo/odoo/pull/194671,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606820952, 'issue_id': 2803963885, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194671.png)](https://mergebot.odoo.com/odoo/odoo/pull/194671)', 'created_at': datetime.datetime(2025, 1, 22, 10, 13, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606821013, 'issue_id': 2803963885, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 10, 13, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607187516, 'issue_id': 2803963885, 'author': 'robodoo', 'body': '@lase-odoo @jeh-odoo linked pull request(s) odoo/documentation#11815 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 22, 13, 0, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:13:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194671.png)](https://mergebot.odoo.com/odoo/odoo/pull/194671)

fw-bot (Issue Creator) on (2025-01-22 10:13:39 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-22 13:00:20 UTC): @lase-odoo @jeh-odoo linked pull request(s) odoo/documentation#11815 not ready. Linked PRs are not staged until all of them are ready.

"
2803941599,pull_request,closed,,[FIX] l10n_es: missing country_id in tax group,"**Description of the issue/feature this PR addresses:**

Not sure if the `country_id` was removed by error in https://github.com/odoo/odoo/pull/166499. Could someone check?




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr",MiquelRForgeFlow,2025-01-22 10:03:51+00:00,[],2025-01-22 12:30:53+00:00,2025-01-22 12:21:52+00:00,https://github.com/odoo/odoo/pull/194670,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2606798142, 'issue_id': 2803941599, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194670.png)](https://mergebot.odoo.com/odoo/odoo/pull/194670)', 'created_at': datetime.datetime(2025, 1, 22, 10, 3, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606832963, 'issue_id': 2803941599, 'author': 'MiquelRForgeFlow', 'body': 'ping @jco-odoo', 'created_at': datetime.datetime(2025, 1, 22, 10, 18, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606938620, 'issue_id': 2803941599, 'author': 'jco-odoo', 'body': 'Thanks @MiquelRForgeFlow !', 'created_at': datetime.datetime(2025, 1, 22, 11, 4, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606940452, 'issue_id': 2803941599, 'author': 'jco-odoo', 'body': 'The diff added it for the new one, but removed it from the old one.', 'created_at': datetime.datetime(2025, 1, 22, 11, 5, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606940885, 'issue_id': 2803941599, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 11, 5, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606941183, 'issue_id': 2803941599, 'author': 'jco-odoo', 'body': '@robodoo up to 16.0', 'created_at': datetime.datetime(2025, 1, 22, 11, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606941271, 'issue_id': 2803941599, 'author': 'robodoo', 'body': 'Forward-port disabled (via limit).', 'created_at': datetime.datetime(2025, 1, 22, 11, 6, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:03:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194670.png)](https://mergebot.odoo.com/odoo/odoo/pull/194670)

MiquelRForgeFlow (Issue Creator) on (2025-01-22 10:18:45 UTC): ping @jco-odoo

jco-odoo on (2025-01-22 11:04:51 UTC): Thanks @MiquelRForgeFlow !

jco-odoo on (2025-01-22 11:05:39 UTC): The diff added it for the new one, but removed it from the old one.

jco-odoo on (2025-01-22 11:05:52 UTC): @robodoo r+

jco-odoo on (2025-01-22 11:06:00 UTC): @robodoo up to 16.0

robodoo on (2025-01-22 11:06:03 UTC): Forward-port disabled (via limit).

"
2803941315,pull_request,closed,,[IMP] auth_ldap: Add function to test LDAP connection in LDAP Server configuration model,"Description of the issue/feature this PR addresses:
Currently, administrators do not have a straightforward way to test LDAP server configurations within Odoo. This can lead to difficulties in diagnosing connection issues or invalid credentials, resulting in a time-consuming setup process.

Current behavior before PR:
- No built-in function to test LDAP server connectivity and authentication in the LDAP server configuration model.
- Administrators have to rely on external tools or guesswork to verify their LDAP configurations.

Desired behavior after PR is merged:
- A new function test_ldap_connection is added to the res.company.ldap model.
- Administrators can easily test LDAP server connectivity and authentication directly from the Odoo interface.
- The function provides clear and informative notifications about the success or failure of the connection test, including specific error messages for common issues like invalid credentials or server down.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",fasilwdr,2025-01-22 10:03:43+00:00,[],2025-01-26 12:25:05+00:00,2025-01-23 06:20:21+00:00,https://github.com/odoo/odoo/pull/194669,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2606797840, 'issue_id': 2803941315, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194669.png)](https://mergebot.odoo.com/odoo/odoo/pull/194669)', 'created_at': datetime.datetime(2025, 1, 22, 10, 3, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607391324, 'issue_id': 2803941315, 'author': 'fasilwdr', 'body': ""@xmo-odoo  I have updated the code based on your review:\r\n\r\n1. Moved bind_dn and bind_passwd assignments outside the try block and simplified the empty string fallback using 'or' operator\r\n2. Removed the logger.info statements since the notification is sufficient for user feedback\r\n3. Removed explicit str() conversion in error message formatting\r\n\r\nPlease let me know if any further changes are needed."", 'created_at': datetime.datetime(2025, 1, 22, 14, 26, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 10:03:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194669.png)](https://mergebot.odoo.com/odoo/odoo/pull/194669)

fasilwdr (Issue Creator) on (2025-01-22 14:26:22 UTC): @xmo-odoo  I have updated the code based on your review:

1. Moved bind_dn and bind_passwd assignments outside the try block and simplified the empty string fallback using 'or' operator
2. Removed the logger.info statements since the notification is sufficient for user feedback
3. Removed explicit str() conversion in error message formatting

Please let me know if any further changes are needed.

"
2803892748,pull_request,closed,,[FW][FIX] im_livechat: pass avatar token to cors route,"Follow up of https://github.com/odoo/odoo/pull/187799

The livechat override needs to be adapted as well to provide the token.

- Login with Mitchell Admin to a database with im_livechat installed
- Open support page as guest
- The operator picture is missing

opw-4489740

Forward-Port-Of: odoo/odoo#194414",fw-bot,2025-01-22 09:43:42+00:00,[],2025-01-27 16:15:29+00:00,2025-01-24 03:55:32+00:00,https://github.com/odoo/odoo/pull/194667,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606746156, 'issue_id': 2803892748, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194667.png)](https://mergebot.odoo.com/odoo/odoo/pull/194667)', 'created_at': datetime.datetime(2025, 1, 22, 9, 43, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606746180, 'issue_id': 2803892748, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 9, 43, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606887673, 'issue_id': 2803892748, 'author': 'fw-bot', 'body': '@seb-odoo @tsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 22, 10, 43, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610438344, 'issue_id': 2803892748, 'author': 'robodoo', 'body': '@seb-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 23, 17, 5, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:43:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194667.png)](https://mergebot.odoo.com/odoo/odoo/pull/194667)

fw-bot (Issue Creator) on (2025-01-22 09:43:44 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 10:43:13 UTC): @seb-odoo @tsm-odoo ci/runbot failed on this forward-port PR

robodoo on (2025-01-23 17:05:33 UTC): @seb-odoo you may want to rebuild or fix this PR as it has failed CI.

"
2803891992,pull_request,open,,[FIX] point_of_sale: start order tracking number at 1,"Currently, when you make a os order, close the session an then re-open it without going through the backend, the starting tracking number is related to the previous session.

Steps to reproduce:
-------------------
* Open pos shop
* Make an order and pay it
* Select **New order**
* Close the session, do not go in the backend
* Re-open the session
> Observation: The tracking number is like `X03`. If we make an order,
the tracking number will then be `(X+1)01`.

Why the fix:
------------
When closing the register the current order is marked as cancelled and a reloading of the page is done. When reloading, the `onMounted` of the product screen is triggered which creates a new order.

We will condition the effect of the `onMounted` in a `useEffect` so that we don't create new orders when we are closing the session.

opw-4435140",sbel-odoo,2025-01-22 09:43:22+00:00,[],2025-02-04 12:40:01+00:00,,https://github.com/odoo/odoo/pull/194666,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2606745587, 'issue_id': 2803891992, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194666.png)](https://mergebot.odoo.com/odoo/odoo/pull/194666)', 'created_at': datetime.datetime(2025, 1, 22, 9, 43, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:43:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194666.png)](https://mergebot.odoo.com/odoo/odoo/pull/194666)

"
2803891991,pull_request,closed,,[FW][FIX] account: prevent tax application on discount,"Minimal Configuration:
- Create an account (49999 Great Account) that has a default tax (15%)
- Settings > Accounting: define ""Separate discount accounts on invoices"" > Customer invoices with an account (e.g. 443000 Cash Discount Loss)

Steps to reproduce:
- Create an invoice with an invoice line that has ""Great Account"", a discount (10%) and a price (100) and a tax (15%)
- Confirm -> amount = 108.9
- Duplicate the invoice (in the ticket: Create a Credit Note)

Issue:
=> The credit note is not of the same amount = 106.80. That is, MINUS discount * tax_amount <-> 108.90 MINUS 10% * 21= 106.80

Cause:
When there is a ""Separate discount accounts on invoices"" that is set, discount line appear on the journal items of the document; moves between the default account for such transaction to the chosen move in the settings.
When iterating through those discount lines, the condition was not strict enough to filter them out and would put a tax on them (as my dear colleague Andrea said: the bomb has been planted)

Therefore, when creating a credit/duplicating,  we copy the data  wrongly (but in a correct a way for a standard flow) which gives incoherent results

opw-4166601

Forward-Port-Of: odoo/odoo#193483
Forward-Port-Of: odoo/odoo#187565",fw-bot,2025-01-22 09:43:22+00:00,[],2025-02-05 23:11:17+00:00,2025-01-22 23:04:21+00:00,https://github.com/odoo/odoo/pull/194665,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606745535, 'issue_id': 2803891991, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194665.png)](https://mergebot.odoo.com/odoo/odoo/pull/194665)', 'created_at': datetime.datetime(2025, 1, 22, 9, 43, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606745553, 'issue_id': 2803891991, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 9, 43, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:43:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194665.png)](https://mergebot.odoo.com/odoo/odoo/pull/194665)

fw-bot (Issue Creator) on (2025-01-22 09:43:27 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2803887656,pull_request,closed,,"[FW][FIX] {hr,sale}_timesheet: enforce consistent no timesheets message","Previous PR: https://github.com/odoo/enterprise/pull/23284 updated the help message for when there are no timesheets in the view, but forgot to update the community message to be consistent. This inconsistency between the community Timesheet app and the enterprise one was both incorrect + causes an issue with translations since the action is overriden in enterprise, but the action is stored under a community module. This made it so the ent. help was never exported to the .pot file and therefore never translated.

To fix this, we make the messages consistent + re-export the pot file.

Additionally, the `sale_timesheet` action appeared to also be using the old help message, so we also update this.

---
Forward ports of this PR will address other translation fixes that occur in later versions.




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#153226
Forward-Port-Of: odoo/odoo#150618",fw-bot,2025-01-22 09:41:32+00:00,[],2025-01-22 12:03:33+00:00,2025-01-22 12:03:33+00:00,https://github.com/odoo/odoo/pull/194664,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2606741395, 'issue_id': 2803887656, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194664.png)](https://mergebot.odoo.com/odoo/odoo/pull/194664)', 'created_at': datetime.datetime(2025, 1, 22, 9, 41, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606741429, 'issue_id': 2803887656, 'author': 'fw-bot', 'body': '@ticodoo cherrypicking of pull request odoo/odoo#150618 failed.\n\nstdout:\n```\nAuto-merging addons/hr_timesheet/i18n/hr_timesheet.pot\nCONFLICT (content): Merge conflict in addons/hr_timesheet/i18n/hr_timesheet.pot\nAuto-merging addons/hr_timesheet/views/hr_timesheet_views.xml\nAuto-merging addons/sale_timesheet/i18n/sale_timesheet.pot\nCONFLICT (content): Merge conflict in addons/sale_timesheet/i18n/sale_timesheet.pot\nAuto-merging addons/sale_timesheet/views/hr_timesheet_views.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 9, 41, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:41:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194664.png)](https://mergebot.odoo.com/odoo/odoo/pull/194664)

fw-bot (Issue Creator) on (2025-01-22 09:41:36 UTC): @ticodoo cherrypicking of pull request odoo/odoo#150618 failed.

stdout:
```
Auto-merging addons/hr_timesheet/i18n/hr_timesheet.pot
CONFLICT (content): Merge conflict in addons/hr_timesheet/i18n/hr_timesheet.pot
Auto-merging addons/hr_timesheet/views/hr_timesheet_views.xml
Auto-merging addons/sale_timesheet/i18n/sale_timesheet.pot
CONFLICT (content): Merge conflict in addons/sale_timesheet/i18n/sale_timesheet.pot
Auto-merging addons/sale_timesheet/views/hr_timesheet_views.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2803860399,pull_request,closed,,[FIX] web_hierarchy: fix the view icon rendering,"This PR aims to fix an issue about the icon related to the hierarchy view not being rotated anymore.

| 18.0 and above | This PR |
|--------|--------|
| <img width=""529"" alt=""image"" src=""https://github.com/user-attachments/assets/11289aa4-948d-4725-b8d5-e91bf5d601fc"" /> | <img width=""531"" alt=""image"" src=""https://github.com/user-attachments/assets/bc74ef4e-6e74-47d1-ac06-6bde1d6ed933"" /> | 

To render the icon of the hierarchy view, we use a little trick by rotating the `fa-share-alt` icon so that it looks like a tree diagram one.

Unfortunately, this does not work anymore in `18.0` and above. It seems the CSS won't be loaded until you entered the module, which leads to the icon being rendered to `fa-share-alt` by default and then rotated correctly once you click on it.

To fix this issue, we actually make use of available utility classes `fa-rotate-90`to handle the icon rotation and `align-text-top` to handle the vertical alignment when the icon is rendered within a node.

task-4501317


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",chgo-odoo,2025-01-22 09:29:21+00:00,[],2025-01-30 14:06:13+00:00,2025-01-30 14:06:13+00:00,https://github.com/odoo/odoo/pull/194663,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606713802, 'issue_id': 2803860399, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194663.png)](https://mergebot.odoo.com/odoo/odoo/pull/194663)', 'created_at': datetime.datetime(2025, 1, 22, 9, 29, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607204854, 'issue_id': 2803860399, 'author': 'chgo-odoo', 'body': ""Hello @Bertrand2 👋 \r\n\r\nSpotted this small issue while switching between views 🙂 I think the change causing this issue is not related to files from `**/hr/**` but since we remove the CSS for Bootstrap classes I think it's best if you can have a look, especially for all the occurrences we change within tests.\r\n\r\nThanks !"", 'created_at': datetime.datetime(2025, 1, 22, 13, 7, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621104298, 'issue_id': 2803860399, 'author': 'chgo-odoo', 'body': 'Hello @xavierbol, just realised I already ping BEDO on this one, sorry 😅 \r\n\r\nBut since this fix is quite small, could you maybe have a look at it so we can move forward?\r\n\r\nThanks !', 'created_at': datetime.datetime(2025, 1, 29, 9, 25, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:29:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194663.png)](https://mergebot.odoo.com/odoo/odoo/pull/194663)

chgo-odoo (Issue Creator) on (2025-01-22 13:07:42 UTC): Hello @Bertrand2 👋 

Spotted this small issue while switching between views 🙂 I think the change causing this issue is not related to files from `**/hr/**` but since we remove the CSS for Bootstrap classes I think it's best if you can have a look, especially for all the occurrences we change within tests.

Thanks !

chgo-odoo (Issue Creator) on (2025-01-29 09:25:08 UTC): Hello @xavierbol, just realised I already ping BEDO on this one, sorry 😅 

But since this fix is quite small, could you maybe have a look at it so we can move forward?

Thanks !

"
2803832582,pull_request,open,,18.0 axo master,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ebr-metrum,2025-01-22 09:17:28+00:00,[],2025-01-22 09:17:32+00:00,,https://github.com/odoo/odoo/pull/194662,[],"[{'comment_id': 2606686369, 'issue_id': 2803832582, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194662.png)](https://mergebot.odoo.com/odoo/odoo/pull/194662)', 'created_at': datetime.datetime(2025, 1, 22, 9, 17, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:17:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194662.png)](https://mergebot.odoo.com/odoo/odoo/pull/194662)

"
2803808027,pull_request,closed,,[IMP] hr_holidays: improve report by type graph views,"- Removed the line and pie graph views of the time off report by type report as they do not convey useful information
- Fix the bar chart colors. Before this commit, the 'balance' bar was the same color as the 'allocation' bar which could be confusing. After this commit, each bar has a different color.
- Before this PR, the two columns indicating the number of days and hours were by default truncated, which was causing confusion as only ""Number of"" was shown. This is fixed by this PR which expand the column name by default.

task-4488987
",romaincarlier4,2025-01-22 09:07:22+00:00,[],2025-02-04 08:47:09+00:00,2025-02-04 06:27:12+00:00,https://github.com/odoo/odoo/pull/194661,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2606664291, 'issue_id': 2803808027, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194661.png)](https://mergebot.odoo.com/odoo/odoo/pull/194661)', 'created_at': datetime.datetime(2025, 1, 22, 9, 7, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630800998, 'issue_id': 2803808027, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 12, 23, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630801118, 'issue_id': 2803808027, 'author': 'robodoo', 'body': '@romaincarlier4 @tivisse because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 2, 3, 12, 23, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630801320, 'issue_id': 2803808027, 'author': 'tivisse', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 2, 3, 12, 23, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630801436, 'issue_id': 2803808027, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 3, 12, 23, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:07:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194661.png)](https://mergebot.odoo.com/odoo/odoo/pull/194661)

tivisse on (2025-02-03 12:23:43 UTC): @robodoo r+

robodoo on (2025-02-03 12:23:46 UTC): @romaincarlier4 @tivisse because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

tivisse on (2025-02-03 12:23:51 UTC): @robodoo rebase-ff

robodoo on (2025-02-03 12:23:54 UTC): Merge method set to rebase and fast-forward.

"
2803806810,pull_request,open,,Master mrp mo backward scheduling ajf,"Implement backward scheduling

Allow to schedule workorders 'backward': the last workorders in chain must finish at a specific datetime.
However if any of the first workorders should have been started in the past scheduling is done 'forward' from now on

task: 4504976

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ajf-odoo,2025-01-22 09:06:49+00:00,[],2025-01-29 14:05:36+00:00,,https://github.com/odoo/odoo/pull/194660,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606662985, 'issue_id': 2803806810, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194660.png)](https://mergebot.odoo.com/odoo/odoo/pull/194660)', 'created_at': datetime.datetime(2025, 1, 22, 9, 6, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 09:06:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194660.png)](https://mergebot.odoo.com/odoo/odoo/pull/194660)

"
2803736591,pull_request,closed,,[FW][FIX] web: burger menu memory leak,"The event listeners are never removed when the component is unmounted which means to global `env.bus` always keeps a reference to this component and everything that goes with it, including its (child)env.

In version 18.0, the spreadsheet client action instantiates its own `BurgerMenu` component and also adds the spreadsheet `model` in the action child env (which can be expensive memory-wise)



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194587
Forward-Port-Of: odoo/odoo#194485",fw-bot,2025-01-22 08:36:01+00:00,[],2025-02-05 14:13:28+00:00,2025-01-22 14:10:01+00:00,https://github.com/odoo/odoo/pull/194659,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2606598775, 'issue_id': 2803736591, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194659.png)](https://mergebot.odoo.com/odoo/odoo/pull/194659)', 'created_at': datetime.datetime(2025, 1, 22, 8, 36, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606598864, 'issue_id': 2803736591, 'author': 'fw-bot', 'body': '@LucasLefevre @aab-odoo cherrypicking of pull request odoo/odoo#194485 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/webclient/burger_menu/burger_menu.js\nCONFLICT (content): Merge conflict in addons/web/static/src/webclient/burger_menu/burger_menu.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 8, 36, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606744434, 'issue_id': 2803736591, 'author': 'LucasLefevre', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 9, 42, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 08:36:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194659.png)](https://mergebot.odoo.com/odoo/odoo/pull/194659)

fw-bot (Issue Creator) on (2025-01-22 08:36:05 UTC): @LucasLefevre @aab-odoo cherrypicking of pull request odoo/odoo#194485 failed.

stdout:
```
Auto-merging addons/web/static/src/webclient/burger_menu/burger_menu.js
CONFLICT (content): Merge conflict in addons/web/static/src/webclient/burger_menu/burger_menu.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LucasLefevre on (2025-01-22 09:42:59 UTC): robodoo r+

"
2803653747,pull_request,closed,,[FIX] web: tooltip: do no show it when you click on a button,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adr-odoo,2025-01-22 07:53:00+00:00,['adr-odoo'],2025-01-23 06:54:41+00:00,2025-01-22 13:37:57+00:00,https://github.com/odoo/odoo/pull/194658,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606520963, 'issue_id': 2803653747, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194658.png)](https://mergebot.odoo.com/odoo/odoo/pull/194658)', 'created_at': datetime.datetime(2025, 1, 22, 7, 53, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606524395, 'issue_id': 2803653747, 'author': 'adr-odoo', 'body': '@robodoo rebase-ff up to saas-18.1', 'created_at': datetime.datetime(2025, 1, 22, 7, 55, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606524477, 'issue_id': 2803653747, 'author': 'robodoo', 'body': ""@adr-odoo you can't rebase-ff.\n\nFor your own safety I've ignored everything in your comment."", 'created_at': datetime.datetime(2025, 1, 22, 7, 55, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606525410, 'issue_id': 2803653747, 'author': 'adr-odoo', 'body': '@robodoo up to saas-18.1', 'created_at': datetime.datetime(2025, 1, 22, 7, 55, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606525467, 'issue_id': 2803653747, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-18.1'."", 'created_at': datetime.datetime(2025, 1, 22, 7, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606791189, 'issue_id': 2803653747, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 22, 10, 1, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 07:53:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194658.png)](https://mergebot.odoo.com/odoo/odoo/pull/194658)

adr-odoo (Issue Creator) on (2025-01-22 07:55:19 UTC): @robodoo rebase-ff up to saas-18.1

robodoo on (2025-01-22 07:55:22 UTC): @adr-odoo you can't rebase-ff.

For your own safety I've ignored everything in your comment.

adr-odoo (Issue Creator) on (2025-01-22 07:55:57 UTC): @robodoo up to saas-18.1

robodoo on (2025-01-22 07:56:00 UTC): Forward-porting to 'saas-18.1'.

robodoo on (2025-01-22 10:01:05 UTC): Merge method set to rebase and fast-forward.

"
2803617995,pull_request,closed,,[FIX] survey: disable embedded components in survey editor,"**Problem**:
Embedded components do not render when the `html` field content is displayed outside the editor, as their mechanism relies on the editor plugin.

**Solution**:
Disable embedded components for the survey.

**Steps to Reproduce**:
1. In a survey, add a section.
2. Add a ""View"" button. (Debug mode ON)
3. Use the `/` command box and add the ""Video link"" option.
4. Save and test the survey.
5. The video does not display.

opw-4487027

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",walidsahli,2025-01-22 07:33:06+00:00,[],2025-01-30 14:06:12+00:00,2025-01-30 14:06:12+00:00,https://github.com/odoo/odoo/pull/194657,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2606490196, 'issue_id': 2803617995, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194657.png)](https://mergebot.odoo.com/odoo/odoo/pull/194657)', 'created_at': datetime.datetime(2025, 1, 22, 7, 33, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624016052, 'issue_id': 2803617995, 'author': 'abd-msyukyu-odoo', 'body': ""Note that embedded components could be used for surveys if they are rendered through the `HtmlViewer` component which can be made available as a `frontend` asset (like for `website_knowledge`). But I guess it can be added as an improvement for later since it'd probably need a bit of refactoring."", 'created_at': datetime.datetime(2025, 1, 30, 9, 53, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624020982, 'issue_id': 2803617995, 'author': 'abd-msyukyu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 9, 56, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 07:33:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194657.png)](https://mergebot.odoo.com/odoo/odoo/pull/194657)

abd-msyukyu-odoo on (2025-01-30 09:53:50 UTC): Note that embedded components could be used for surveys if they are rendered through the `HtmlViewer` component which can be made available as a `frontend` asset (like for `website_knowledge`). But I guess it can be added as an improvement for later since it'd probably need a bit of refactoring.

abd-msyukyu-odoo on (2025-01-30 09:56:05 UTC): @robodoo r+

"
2803605884,pull_request,closed,,[FW][FIX] web: burger menu memory leak,"The event listeners are never removed when the component is unmounted which means to global `env.bus` always keeps a reference to this component and everything that goes with it, including its (child)env.

In version 18.0, the spreadsheet client action instantiates its own `BurgerMenu` component and also adds the spreadsheet `model` in the action child env (which can be expensive memory-wise)



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#194587
Forward-Port-Of: odoo/odoo#194485",fw-bot,2025-01-22 07:26:19+00:00,[],2025-02-06 04:11:40+00:00,2025-01-23 03:26:04+00:00,https://github.com/odoo/odoo/pull/194656,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2606479478, 'issue_id': 2803605884, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194656.png)](https://mergebot.odoo.com/odoo/odoo/pull/194656)', 'created_at': datetime.datetime(2025, 1, 22, 7, 26, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606479500, 'issue_id': 2803605884, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 7, 26, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606598798, 'issue_id': 2803605884, 'author': 'fw-bot', 'body': '@LucasLefevre @aab-odoo the next pull request (odoo/odoo#194659) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 22, 8, 36, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606635065, 'issue_id': 2803605884, 'author': 'LucasLefevre', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 8, 54, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 07:26:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194656.png)](https://mergebot.odoo.com/odoo/odoo/pull/194656)

fw-bot (Issue Creator) on (2025-01-22 07:26:22 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-22 08:36:03 UTC): @LucasLefevre @aab-odoo the next pull request (odoo/odoo#194659) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LucasLefevre on (2025-01-22 08:54:10 UTC): robodoo r+

"
2803603043,pull_request,closed,,[IMP] web: support negated within/between,"It is sometimes useful to look for every record that was NOT created in a given time period. The same can be said of the ""within"" operator which can effectively be used to find every record ""older than X days""

Although this can be achieved with negative operators, the domain widget currently displays ""between 1 and 2"", even if the result would be ""is not between 1 and 2"".

task-4240689
",reth-odoo,2025-01-22 07:24:51+00:00,[],2025-01-22 09:20:56+00:00,2025-01-22 09:20:36+00:00,https://github.com/odoo/odoo/pull/194655,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606477344, 'issue_id': 2803603043, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194655.png)](https://mergebot.odoo.com/odoo/odoo/pull/194655)', 'created_at': datetime.datetime(2025, 1, 22, 7, 24, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606479608, 'issue_id': 2803603043, 'author': 'reth-odoo', 'body': 'Split from https://github.com/odoo/odoo/pull/184830', 'created_at': datetime.datetime(2025, 1, 22, 7, 26, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 07:24:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194655.png)](https://mergebot.odoo.com/odoo/odoo/pull/194655)

reth-odoo (Issue Creator) on (2025-01-22 07:26:26 UTC): Split from https://github.com/odoo/odoo/pull/184830

"
2803597762,pull_request,open,,[MERGE] crm: apply won/lost heuristics everywhere,"BEFORE:

LOST:     0% and not active
WON:    100% and active


NOW:  

LOST:     0% and not active
WON:    stage won and 100% proba (!this should be implied!)



Purpose
=======
Ribbons and buttons display + PLS won/lost frequency rules should be aligned.
 --> Redefine Won / Lost heuristic and apply it everywhere.

Specification
=============

""New heuristic"":
Lost: Proba = 0 AND archived (and not in won stage)
Won: won stage AND 100% (was previously: won stage and active)
	(Won stage implies 100%.)

That means that even if a lead is archived, it is still considered as won if
he is in won stage. That also mean that we should block the edition of
probability in won stage as it should always be 100%.
In the same way, we should block edition on probability if the lead is lost.

Won / lost ribbons display rules should be aligned.

That also implies to change a bit the rules to handle won/lost frequencies

- Set to Won Stage (>WS) : Reach Won
	If probability was 0 and active was False: Leave Lost
- Move out from Won stage (<WS) : Leave Won
	If active was False and Proba = 0 -> This should never happen
- Archive: If set proba=0 or proba was 0: Reach Lost
- Restore: Leave Lost

Special cases :
- Out of WS (Won Stage) + Archive : ""Leave Won""
	Later, if set P = 0% -> trigger ""Reach Lost"".
- In WS + Archive : Reach Won
	If proba set to 0 -> Should never happen
- Out of WS + Restore: Leave Won
- In WS + Restore: Reach Won
	If proba was 0 : Leave Lost

This commit adds two fields on crm.lead to ease domains to display/hide 
fields, buttons and ribbons:
- is_lost: computed on active=False AND proba = 0. Tracking enbaled to follow
	the state of the lead in the chatter. (when it was lost or restored)
- is_won: related to the stage_id.won_stage. Used to know if the lead is won.
	As won = in won stage.

Review the Restore vs Unarchive:
- Unarchive = set active=True
- Restore = Unarchive + force automated probability (and it's recomputation).
Restore button is displayed only on lost leads.

Probabilty is set to readonly mode when the lead is won or lost. This is to
avoid inconsistencies between the state of the lead and it's probability.

Why oh why ?
============

Before this change, the old won/lost rules where the following:
Lost: Proba = 0 OR archived
Won: won stage AND active

Which means that both rules could have coexisted. If the lead were in won stage,
active but probability = 0%. (that should not happens but was still allowed).
The objective with the new rules is to use the probability as a necessary
but not sufficient criteriat. Probability makes it impossible to be both
lost and won. But probability is not sufficient to classify a lead as won or
lost.
0% does not mean it's lost, it must also be archived.
100% does not mean it's won, it must also be in won stage.

That will avoid having automatically lost or won leads.
If Predictive lead scoring computes 0% or 100% chance of winning, the lead will
not be flagged yet as lost or won and the user will still need to take action to
correctly classify the lead.

Task-2654916",tde-banana-odoo,2025-01-22 07:21:45+00:00,[],2025-02-03 12:39:13+00:00,,https://github.com/odoo/odoo/pull/194654,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606473055, 'issue_id': 2803597762, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194654.png)](https://mergebot.odoo.com/odoo/odoo/pull/194654)', 'created_at': datetime.datetime(2025, 1, 22, 7, 21, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 07:21:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194654.png)](https://mergebot.odoo.com/odoo/odoo/pull/194654)

"
2803465268,pull_request,open,,[IMP] mail: link documents to chatter,"- adding the widget to the view.

refer the related ENTERPRISE PR for more details.

Task-4237088",shut-odoo,2025-01-22 06:01:45+00:00,[],2025-02-07 13:53:45+00:00,,https://github.com/odoo/odoo/pull/194653,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606367279, 'issue_id': 2803465268, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194653.png)](https://mergebot.odoo.com/odoo/odoo/pull/194653)', 'created_at': datetime.datetime(2025, 1, 22, 6, 1, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 06:01:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194653.png)](https://mergebot.odoo.com/odoo/odoo/pull/194653)

"
2803387357,pull_request,open,,[IMP] payment: hide payment successful message after one hour,"Before this update, on portal it was showing a ""successful payment"" message even after a new subscription period started. At the same time, it would also show a message asking the user to pay for the next period, which could confuse users about whether they had already paid or needed to pay again.

With this update, the ""successful payment"" message will disappear in one hour after the payment is made. This ensures only the message prompting payment for the new period is displayed, avoiding confusion.

task-4420352





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pash-odoo,2025-01-22 05:01:56+00:00,[],2025-02-05 05:02:51+00:00,,https://github.com/odoo/odoo/pull/194652,"[('RD', 'research & development, internal work')]","[{'comment_id': 2606301781, 'issue_id': 2803387357, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194652.png)](https://mergebot.odoo.com/odoo/odoo/pull/194652)', 'created_at': datetime.datetime(2025, 1, 22, 5, 1, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-22 05:01:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/194652.png)](https://mergebot.odoo.com/odoo/odoo/pull/194652)

"
