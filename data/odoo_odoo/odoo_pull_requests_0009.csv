id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2790512466,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 18:08:26+00:00,[],2025-01-16 08:42:28+00:00,2025-01-16 08:42:28+00:00,https://github.com/odoo/odoo/pull/193833,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593622282, 'issue_id': 2790512466, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193833.png)](https://mergebot.odoo.com/odoo/odoo/pull/193833)', 'created_at': datetime.datetime(2025, 1, 15, 18, 8, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593622586, 'issue_id': 2790512466, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193510 failed.\n\nstdout:\n```\nAuto-merging addons/hw_drivers/driver.py\nCONFLICT (content): Merge conflict in addons/hw_drivers/driver.py\nAuto-merging addons/hw_drivers/interface.py\nCONFLICT (content): Merge conflict in addons/hw_drivers/interface.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 8, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594878237, 'issue_id': 2790512466, 'author': 'loouis-t', 'body': 'This commit is useless since odoo/odoo#113461 as `Driver` and `Interface` parent classes are not registered since the logic has been moved from metaclasses to `__init_subclass__`.', 'created_at': datetime.datetime(2025, 1, 16, 8, 42, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:08:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193833.png)](https://mergebot.odoo.com/odoo/odoo/pull/193833)

fw-bot (Issue Creator) on (2025-01-15 18:08:29 UTC): @loouis-t @Ysoroko cherrypicking of pull request odoo/odoo#193510 failed.

stdout:
```
Auto-merging addons/hw_drivers/driver.py
CONFLICT (content): Merge conflict in addons/hw_drivers/driver.py
Auto-merging addons/hw_drivers/interface.py
CONFLICT (content): Merge conflict in addons/hw_drivers/interface.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-16 08:42:28 UTC): This commit is useless since odoo/odoo#113461 as `Driver` and `Interface` parent classes are not registered since the logic has been moved from metaclasses to `__init_subclass__`.

"
2790503247,pull_request,closed,,[FW][FIX] test_http: call new_test_user in setUpClass,Forward-Port-Of: odoo/odoo#193775,fw-bot,2025-01-15 18:04:06+00:00,[],2025-01-30 19:01:03+00:00,2025-01-16 18:57:43+00:00,https://github.com/odoo/odoo/pull/193832,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593611525, 'issue_id': 2790503247, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193832.png)](https://mergebot.odoo.com/odoo/odoo/pull/193832)', 'created_at': datetime.datetime(2025, 1, 15, 18, 4, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593611591, 'issue_id': 2790503247, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193775 failed.\n\n* 30a625668e1c9eb725d90cd9e53214511735e256\n* d6db5f877eef48cf780b1c5129a632868ae57ca9 <- on this commit\n\nstdout:\n```\nAuto-merging odoo/addons/test_http/tests/test_error.py\nAuto-merging odoo/addons/test_http/tests/test_session.py\nCONFLICT (content): Merge conflict in odoo/addons/test_http/tests/test_session.py\nAuto-merging odoo/addons/test_http/tests/test_static.py\nAuto-merging odoo/addons/test_http/tests/test_web_server.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 4, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596048477, 'issue_id': 2790503247, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 15, 35, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:04:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193832.png)](https://mergebot.odoo.com/odoo/odoo/pull/193832)

fw-bot (Issue Creator) on (2025-01-15 18:04:10 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193775 failed.

* 30a625668e1c9eb725d90cd9e53214511735e256
* d6db5f877eef48cf780b1c5129a632868ae57ca9 <- on this commit

stdout:
```
Auto-merging odoo/addons/test_http/tests/test_error.py
Auto-merging odoo/addons/test_http/tests/test_session.py
CONFLICT (content): Merge conflict in odoo/addons/test_http/tests/test_session.py
Auto-merging odoo/addons/test_http/tests/test_static.py
Auto-merging odoo/addons/test_http/tests/test_web_server.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Julien00859 on (2025-01-16 15:35:36 UTC): @robodoo r+

"
2790499808,pull_request,closed,,[FIX] website_sale_collect: Fix qty check for CnC,"Fix quantity check for Click and Collect.

The 'Add to Cart' flow was revamped in b8d0ab4, but a method to skip the quantity check in the product configurator for Click and Collect was omitted.

This commit reinstates the missing functionality, ensuring the product configurator properly skips the quantity check when Click and Collect is used.

",chevalierv,2025-01-15 18:02:06+00:00,[],2025-02-03 16:01:27+00:00,2025-01-20 15:31:14+00:00,https://github.com/odoo/odoo/pull/193831,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2593607912, 'issue_id': 2790499808, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193831.png)](https://mergebot.odoo.com/odoo/odoo/pull/193831)', 'created_at': datetime.datetime(2025, 1, 15, 18, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593608480, 'issue_id': 2790499808, 'author': 'chevalierv', 'body': 'robodoo delegate=vchu-odoo', 'created_at': datetime.datetime(2025, 1, 15, 18, 2, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601949072, 'issue_id': 2790499808, 'author': 'vchu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 9, 59, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 18:02:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193831.png)](https://mergebot.odoo.com/odoo/odoo/pull/193831)

chevalierv (Issue Creator) on (2025-01-15 18:02:27 UTC): robodoo delegate=vchu-odoo

vchu-odoo on (2025-01-20 09:59:58 UTC): @robodoo r+

"
2790479369,pull_request,closed,,[FW][FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193531",fw-bot,2025-01-15 17:52:16+00:00,[],2025-01-30 12:41:20+00:00,2025-01-16 12:04:43+00:00,https://github.com/odoo/odoo/pull/193830,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593587292, 'issue_id': 2790479369, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193830.png)](https://mergebot.odoo.com/odoo/odoo/pull/193830)', 'created_at': datetime.datetime(2025, 1, 15, 17, 52, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593587307, 'issue_id': 2790479369, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 52, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:52:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193830.png)](https://mergebot.odoo.com/odoo/odoo/pull/193830)

fw-bot (Issue Creator) on (2025-01-15 17:52:18 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790474027,pull_request,closed,,[FW][FIX] mrp: find all child MO,"Steps to reproduce the bug:
- Create a storable product “C1”:
     - MTO + Manufacture
     - BoM:
        - Component: 1 unit of C2
- Create a storable product “P1”
    - Component: 1 unit of C1

- Create a MO to produce one unit of P1:
    - Confirm
- A child MO with one unit of C1 is created
- Update the qty producing of P1 to 2
- A new MO to produce one unit of C1 is created

Problem:
The MO of P1 is linked only to the last MO of C1.
This occurs because the “created_production_id” field in the stock move of C1 (associated with the MO of P1) is updated to reference the most recent MO of C1. Additionally, since the following fix:
https://github.com/odoo/odoo/commit/c5b3f41fbd442def9e97acb023a00862e7d03eb3#diff-6d86bc8c3e9aa22586656b702849c5bbbb00c9b97ffd08bc0842e0e68f8948f9R74
Each new MO has its own procurement group.
As a result, when using the _get_children method:
- The method retrieves stock moves linked to the current procurement group.
- It uses their created_production_id to fetch the associated procurement group and then retrieves the related production_id.
However, since the two child MOs of C1 belong to different procurement groups, only the latest MO is returned.

opw-4450210

Forward-Port-Of: odoo/odoo#192952",fw-bot,2025-01-15 17:49:15+00:00,[],2025-01-30 12:53:44+00:00,2025-01-16 12:52:07+00:00,https://github.com/odoo/odoo/pull/193829,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593581716, 'issue_id': 2790474027, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193829.png)](https://mergebot.odoo.com/odoo/odoo/pull/193829)', 'created_at': datetime.datetime(2025, 1, 15, 17, 49, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593581747, 'issue_id': 2790474027, 'author': 'fw-bot', 'body': '@DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_production.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 49, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594777333, 'issue_id': 2790474027, 'author': 'DjamelTouati', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 7, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:49:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193829.png)](https://mergebot.odoo.com/odoo/odoo/pull/193829)

fw-bot (Issue Creator) on (2025-01-15 17:49:18 UTC): @DjamelTouati @Whenrow cherrypicking of pull request odoo/odoo#192952 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_production.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

DjamelTouati on (2025-01-16 08:07:33 UTC): robodoo r+

"
2790470568,pull_request,closed,,"[FW][FIX] mrp{,_subcontracting_purchase}: make MO date set consistent","**Current behavior:**
Having some product with a subcontract BoM and using the unarchived 'Subcontract' picking type and creating a purchase order to the subcontractor for that product: changing the `scheduled_date` of the generated receipt will improperly set the start/end date on the subcontracting MO which was generated alongside the receipt.

Specifically, the `scheduled_date` of the receipt should correspond to the `date_finished` of the MO- however currently it is incorrectly modifying the MO `date_start` instead.

**Expected behavior:**
Modifying `scheduled_date` on the receipt will in turn modify the `date_finished` of the MO.

**Steps to reproduce:**
*Unarchive the Subcontract picking type operation*
1. Create a final product with a subcontract type BoM, on the BoM set some positive value for Manuf. Lead Time (in miscellaneous tab)

2. Create a purchase order to the subcontractor for that product

3. Confirm the PO -> observe that on creation, the scheduled date of the receipt matches the end date of the MO

4. Change the scheduled date of the receipt (for example, 10 days in the future) -> observe that after saving, the MO date correspondence is inverted (end date = scheduled date + lead time) instead of the start date being set with respect to the end time (like on creation), the end date gets set with respect to the start date

**Cause of the issue:**
It's an inconsistency with how the fields (start, end) are calculated and when.

**Fix:**
Make this case behave the same as the creation does- that is, end date is informed by the receipt's scheduled date and the start date of the MO is set by subtracting the lead time from there.

opw-4231548

Forward-Port-Of: odoo/odoo#188389",fw-bot,2025-01-15 17:47:26+00:00,[],2025-01-31 15:10:39+00:00,2025-01-17 15:07:51+00:00,https://github.com/odoo/odoo/pull/193828,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593577912, 'issue_id': 2790470568, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193828.png)](https://mergebot.odoo.com/odoo/odoo/pull/193828)', 'created_at': datetime.datetime(2025, 1, 15, 17, 47, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593577931, 'issue_id': 2790470568, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 47, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:47:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193828.png)](https://mergebot.odoo.com/odoo/odoo/pull/193828)

fw-bot (Issue Creator) on (2025-01-15 17:47:28 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790469880,pull_request,closed,,"[FW][FIX] sale, sale_expense: prevent creation of tax line","Steps to reproduce:
[l10n_dk]
- create and confirm a sale order
- create an expense for a new employee and use a product set with reinvoice at cost and a tax with multiple repartition lines
- confirm and process the expense
- post journal entries

Issue:
Missing required fields on accountable sale order line.

Cause:
We want to reinvoice the tax line that no product on it

opw-4378714

Forward-Port-Of: odoo/odoo#193036
Forward-Port-Of: odoo/odoo#191163",fw-bot,2025-01-15 17:47:09+00:00,[],2025-01-31 20:32:13+00:00,2025-01-17 20:31:54+00:00,https://github.com/odoo/odoo/pull/193827,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593577299, 'issue_id': 2790469880, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193827.png)](https://mergebot.odoo.com/odoo/odoo/pull/193827)', 'created_at': datetime.datetime(2025, 1, 15, 17, 47, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593577325, 'issue_id': 2790469880, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 47, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593730132, 'issue_id': 2790469880, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo the next pull request (odoo/odoo#193853) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 19, 5, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313565, 'issue_id': 2790469880, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278394, 'issue_id': 2790469880, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598794615, 'issue_id': 2790469880, 'author': 'oco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 17, 0, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598798868, 'issue_id': 2790469880, 'author': 'oco-odoo', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 17, 17, 3, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598869301, 'issue_id': 2790469880, 'author': 'fw-bot', 'body': '@yosa-odoo @oco-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 17, 17, 39, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598869538, 'issue_id': 2790469880, 'author': 'oco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 17, 39, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:47:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193827.png)](https://mergebot.odoo.com/odoo/odoo/pull/193827)

fw-bot (Issue Creator) on (2025-01-15 17:47:10 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 19:05:40 UTC): @yosa-odoo @oco-odoo the next pull request (odoo/odoo#193853) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:28 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:01:19 UTC): @yosa-odoo @oco-odoo this forward port of odoo/odoo#191163 is awaiting action (not merged or closed).

oco-odoo on (2025-01-17 17:00:42 UTC): @robodoo r+

oco-odoo on (2025-01-17 17:03:04 UTC): @robodoo r-

fw-bot (Issue Creator) on (2025-01-17 17:39:25 UTC): @yosa-odoo @oco-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

oco-odoo on (2025-01-17 17:39:34 UTC): @robodoo r+

"
2790449963,pull_request,closed,,"[FW][FIX] repair,sale_stock,stock_account: repair with auto FIFO component","When using an auto fifo product as part of the repair, the COGS
won't be based on the used product

To reproduce the issue:
1. Setup auto fifo product
2. Receive 1@10 and 1@20
3. Process a RO:
   - Invoice method: After repair
   - Parts:
     - Add 1 x fifo product
4. Create and post the invoice
5. Open its journal items

Error: Cogs are $20 instead of $10

When posting the invoice, we generate the COGS:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L47-L48
We therefore compute the ""anglo saxon unit price"":
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L133
However, there isn't any override to handle the RO case, so it leads
to the default mechanism, i.e. the standard price of the product:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/7cd7563f6708331bb6baf0e06d07a9f9ee329e38/addons/stock_account/models/product.py#L753-L757

And, since the first product is out, its standard price is now based
on the next candidate: $20

About the `sudo`: an accountman has not any access to `repair`, so
posting such an invoice would raise an error. Since this diff is
specific to Odoo 16, the idea is not to impact any security rules
and rather minimize the changes.

Note: Indeed, `repair` does not depend on `stock_account`, so this
commit could lead to a traceback if the bridge is removed. I delegate
this issue to the error of dependencies. Anyway, removing the bridge
would lead to other bugs. Hopefully, this has been fixed on master [1].

[1] https://github.com/odoo/odoo/commit/f7dbdec11b74f8c7d969763d8c5cf09542a47f86

OPW-4166570

Forward-Port-Of: odoo/odoo#193588
Forward-Port-Of: odoo/odoo#193076",fw-bot,2025-01-15 17:36:39+00:00,[],2025-01-30 12:41:27+00:00,2025-01-16 12:07:57+00:00,https://github.com/odoo/odoo/pull/193826,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593556593, 'issue_id': 2790449963, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193826.png)](https://mergebot.odoo.com/odoo/odoo/pull/193826)', 'created_at': datetime.datetime(2025, 1, 15, 17, 36, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593556619, 'issue_id': 2790449963, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 36, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593656962, 'issue_id': 2790449963, 'author': 'fw-bot', 'body': '@adwid @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 18, 24, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594770006, 'issue_id': 2790449963, 'author': 'fw-bot', 'body': '@adwid @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 16, 8, 3, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594771303, 'issue_id': 2790449963, 'author': 'adwid', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 4, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:36:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193826.png)](https://mergebot.odoo.com/odoo/odoo/pull/193826)

fw-bot (Issue Creator) on (2025-01-15 17:36:41 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:24:40 UTC): @adwid @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 08:03:16 UTC): @adwid @Whenrow this PR was modified / updated and has become a normal PR. It must be merged directly.

adwid on (2025-01-16 08:04:05 UTC): robodoo r+

"
2790445442,pull_request,closed,,[FIX] web: remove error notification when loading an image,"There is already a placeholder image displayed when an image fails to load.

opw-4419565",hubvd,2025-01-15 17:34:26+00:00,[],2025-01-30 17:01:24+00:00,2025-01-16 16:43:57+00:00,https://github.com/odoo/odoo/pull/193825,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593552097, 'issue_id': 2790445442, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193825.png)](https://mergebot.odoo.com/odoo/odoo/pull/193825)', 'created_at': datetime.datetime(2025, 1, 15, 17, 34, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595549765, 'issue_id': 2790445442, 'author': 'robodoo', 'body': ""@hubvd @aab-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 12, 53, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595946584, 'issue_id': 2790445442, 'author': 'aab-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 56, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:34:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193825.png)](https://mergebot.odoo.com/odoo/odoo/pull/193825)

robodoo on (2025-01-16 12:53:51 UTC): @hubvd @aab-odoo 'ci/runbot' failed on this reviewed PR.

aab-odoo on (2025-01-16 14:56:01 UTC): robodoo r+

"
2790429084,pull_request,closed,,[FW][FIX] website_sale_loyalty: validate rewards before payment,"Versions
--------
- 16.0+

Steps
-----
1. Have a payment provider like Demo published;
2. create a discount program that expired yesterday;
3. change time of PC to yesterday;
4. go to eCommerce, add product to cart, go to checkout;
5. follow steps until you get to the ""Pay Now"" button;
6. change time of PC to today;
7. finalize payment.

Issue
-----
The payment transaction proceeds, but doesn't cover the entire amount, as the promotion was removed afterwards.

Cause
-----
When initiating payment, there's check on whether the applied rewards are still valid.

Solution
--------
Add an override for `_validate_transaction_for_order`, which compares the order amount before and after updating programs & rewards.

If they don't match, raise a `ValidationError`, forcing the user reload the order without expired programs & rewards.

opw-4304241

Forward-Port-Of: odoo/odoo#193603
Forward-Port-Of: odoo/odoo#191256",fw-bot,2025-01-15 17:25:48+00:00,[],2025-01-30 19:33:23+00:00,2025-01-16 19:29:32+00:00,https://github.com/odoo/odoo/pull/193824,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593534758, 'issue_id': 2790429084, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193824.png)](https://mergebot.odoo.com/odoo/odoo/pull/193824)', 'created_at': datetime.datetime(2025, 1, 15, 17, 25, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593534773, 'issue_id': 2790429084, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 25, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593628477, 'issue_id': 2790429084, 'author': 'fw-bot', 'body': '@lvsz ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 18, 9, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313449, 'issue_id': 2790429084, 'author': 'fw-bot', 'body': '@lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595251812, 'issue_id': 2790429084, 'author': 'fw-bot', 'body': '@lvsz this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 16, 11, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595256095, 'issue_id': 2790429084, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 20, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595317833, 'issue_id': 2790429084, 'author': 'robodoo', 'body': ""@lvsz 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 11, 52, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:25:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193824.png)](https://mergebot.odoo.com/odoo/odoo/pull/193824)

fw-bot (Issue Creator) on (2025-01-15 17:25:58 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:09:58 UTC): @lvsz ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 02:01:23 UTC): @lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 11:18:00 UTC): @lvsz this PR was modified / updated and has become a normal PR. It must be merged directly.

lvsz on (2025-01-16 11:20:15 UTC): robodoo r+

robodoo on (2025-01-16 11:52:10 UTC): @lvsz 'ci/runbot' failed on this reviewed PR.

"
2790396009,pull_request,closed,,"[FW][REV] website,_*: revert set task partner from form email","_* = website_crm, website_project, website_hr_recruitment


- This commit reverts [#128964 ](https://github.com/odoo/odoo/pull/128964)because the feature has been made in generic instead of doing it in project and helpdesk which is caused some issues in other models using website form feature. Also, the feature adds more complexity to just add a warning in the task description and in a message linked to the task generated to notify the user the task has been generated from an external submission (when the email set in the website form is not the one set on the user who submits the form) since the feature used the email set to search the partner to set on the task.

task-4295363

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192322",fw-bot,2025-01-15 17:13:12+00:00,[],2025-01-30 19:33:25+00:00,2025-01-16 19:29:37+00:00,https://github.com/odoo/odoo/pull/193823,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593497555, 'issue_id': 2790396009, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193823.png)](https://mergebot.odoo.com/odoo/odoo/pull/193823)', 'created_at': datetime.datetime(2025, 1, 15, 17, 13, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593497626, 'issue_id': 2790396009, 'author': 'fw-bot', 'body': '@mjvi-odoo @xavierbol cherrypicking of pull request odoo/odoo#192322 failed.\n\nstdout:\n```\nAuto-merging addons/website/controllers/form.py\nAuto-merging addons/website/i18n/website.pot\nCONFLICT (content): Merge conflict in addons/website/i18n/website.pot\nAuto-merging addons/website_hr_recruitment/controllers/main.py\nCONFLICT (content): Merge conflict in addons/website_hr_recruitment/controllers/main.py\nAuto-merging addons/website_project/controllers/main.py\nCONFLICT (content): Merge conflict in addons/website_project/controllers/main.py\nAuto-merging addons/website_project/i18n/website_project.pot\nCONFLICT (modify/delete): addons/website_project/tests/test_website_project.py deleted in 4ea9ddc9312e044c7c48c976934719bb8911ebe9 and modified in 893b253644159a70d1916e3eaf25d1c8af4e92c3.  Version 893b253644159a70d1916e3eaf25d1c8af4e92c3 of addons/website_project/tests/test_website_project.py left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 13, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:13:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193823.png)](https://mergebot.odoo.com/odoo/odoo/pull/193823)

fw-bot (Issue Creator) on (2025-01-15 17:13:16 UTC): @mjvi-odoo @xavierbol cherrypicking of pull request odoo/odoo#192322 failed.

stdout:
```
Auto-merging addons/website/controllers/form.py
Auto-merging addons/website/i18n/website.pot
CONFLICT (content): Merge conflict in addons/website/i18n/website.pot
Auto-merging addons/website_hr_recruitment/controllers/main.py
CONFLICT (content): Merge conflict in addons/website_hr_recruitment/controllers/main.py
Auto-merging addons/website_project/controllers/main.py
CONFLICT (content): Merge conflict in addons/website_project/controllers/main.py
Auto-merging addons/website_project/i18n/website_project.pot
CONFLICT (modify/delete): addons/website_project/tests/test_website_project.py deleted in 4ea9ddc9312e044c7c48c976934719bb8911ebe9 and modified in 893b253644159a70d1916e3eaf25d1c8af4e92c3.  Version 893b253644159a70d1916e3eaf25d1c8af4e92c3 of addons/website_project/tests/test_website_project.py left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790379304,pull_request,closed,,[FW][FIX] auth_ldap: add email on new res.partner,"Before this commit, when a new res.user is created after signing in with auth_ldap, there was no email on the linked res.partner, which may cause issues in modules such as helpdesk, where partner email is used to find related tickets.

res.users created through the form view will trigger the onchange which sets the 'email' = 'login', which does not happen when creating a user directly through the ORM.

This commit adds 'email' as a key which is returned by the method _map_ldap_attributes, which is used to create new partners with the correct email associated with the res.user login.

opw-4378487



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193495",fw-bot,2025-01-15 17:04:30+00:00,[],2025-02-06 19:17:25+00:00,2025-01-23 19:10:06+00:00,https://github.com/odoo/odoo/pull/193822,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593478447, 'issue_id': 2790379304, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193822.png)](https://mergebot.odoo.com/odoo/odoo/pull/193822)', 'created_at': datetime.datetime(2025, 1, 15, 17, 4, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593478518, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 17, 4, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593636974, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo the next pull request (odoo/odoo#193835) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 14, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600463831, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173328, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476119, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119347, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689261, 'issue_id': 2790379304, 'author': 'fw-bot', 'body': '@jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610546622, 'issue_id': 2790379304, 'author': 'jelu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 17, 42, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 17:04:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193822.png)](https://mergebot.odoo.com/odoo/odoo/pull/193822)

fw-bot (Issue Creator) on (2025-01-15 17:04:33 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:14:01 UTC): @jelu-odoo @flvr-odoo the next pull request (odoo/odoo#193835) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-19 02:01:40 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:37 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:20 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:34 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:15 UTC): @jelu-odoo @flvr-odoo this forward port of odoo/odoo#193495 is awaiting action (not merged or closed).

jelu-odoo on (2025-01-23 17:42:16 UTC): @robodoo r+

"
2790367614,pull_request,open,,[FIX] html_editor: delete backward on Android Chrome,"On Android Chrome, for some obscure reason (bug?) the beforeinput event of type deleteContentBackward cannot be default prevented. This leads to unpredictable behavior when deleting content, considering the editor handles the delete operation and assumes the default behavior is prevented.

The steps below illustrate one of the possible issues.

Steps 1:

a. Have the following html:
```
<h1><span style=""font-size: 36px;"">Welcome to the To-do app! </span></h1>
<p>
    <span style=""font-size: 14px;"">
        Use it to manage your work</span>
</p>
```

b. On Android Chrome, place the cursor at the beginning of the paragraph and press backspace on the device's virtual keyboard.

As a result, the paragraph is merged with the heading, but the characters ""Use it to"" disappear:
```
<h1>
    <span style=""font-size: 36px;"">Welcome to the To-do app!</span>
    <span style=""font-size: 14px;"">&nbsp;manage your work</span>
</h1>
```

This example was taken from the ""Welcome Mitchell Admin"" task in the To-do app, so it's easily testable.

Steps 2:

a. On Android Chrome, have two paragraphs with some text, and place the cursor at the beginning of the second paragraph. E.g.:
```
    <p>abc</p>
    <p>[]def</p>
```

b. Press backspace on the device's virtual keyboard.

As a result, the paragraphs are merged (as expected), but the cursor is placed in the wrong position, e.g.: `<p>abcd[]ef</p>`, whilst `<p>abc[]def</p>` was expected.

Since the default behavior cannot be prevented, this commit makes sure that eventual DOM mutations and selection changes occurred after the beforeinput event are reverted, aiming to achieve the same effect as preventing default.

task-4243933
",cammarosano,2025-01-15 16:59:35+00:00,[],2025-01-31 23:35:52+00:00,,https://github.com/odoo/odoo/pull/193821,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593464581, 'issue_id': 2790367614, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193821.png)](https://mergebot.odoo.com/odoo/odoo/pull/193821)', 'created_at': datetime.datetime(2025, 1, 15, 16, 59, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:59:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193821.png)](https://mergebot.odoo.com/odoo/odoo/pull/193821)

"
2790348875,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 16:52:44+00:00,[],2025-01-29 23:03:47+00:00,2025-01-15 22:41:07+00:00,https://github.com/odoo/odoo/pull/193820,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593443440, 'issue_id': 2790348875, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193820.png)](https://mergebot.odoo.com/odoo/odoo/pull/193820)', 'created_at': datetime.datetime(2025, 1, 15, 16, 52, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593443465, 'issue_id': 2790348875, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 52, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593622336, 'issue_id': 2790348875, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko the next pull request (odoo/odoo#193833) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 8, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593630073, 'issue_id': 2790348875, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 18, 10, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:52:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193820.png)](https://mergebot.odoo.com/odoo/odoo/pull/193820)

fw-bot (Issue Creator) on (2025-01-15 16:52:46 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:08:27 UTC): @loouis-t @Ysoroko the next pull request (odoo/odoo#193833) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-15 18:10:34 UTC): @robodoo r+

"
2790345892,pull_request,closed,,16.0 fix cannot drop search block in dutch bvr,"Since the class `s_searchbar_input` was translated into Dutch by a
translator on Transifex.
<sub>See screenshot of the Website `nl.po` file </sub>↓
<kbd>![image](https://github.com/user-attachments/assets/053f084b-30cf-42d3-9c13-7387b777b88f)</kbd>

It is no longer possible to drop the searchbar
block onto a webpage when Odoo's language is set to Dutch.

In this PR, we add `t-translation=""off""` in the xpath that adds
this class to the list of droppable element selectors, so it won't be
translated anymore. We also do the same for other xpath-ed classes that
don’t have `t-translation=""off""`, to prevent the same issue elsewhere.

Since the class is already translated in the existing databases, in
stable versions, we add the class a second time to the list of droppable
element selectors. This second class won't be translated, which will fix
the issue for Dutch users.

[opw-4461785](https://www.odoo.com/web#id=4461785&cids=1&menu_id=4720&action=333&active_id=1695&model=project.task&view_type=form)

-----------
Note: This PR also fix 2 minor bugs:
- The text on the button to install a block overflows when translated into certain languages that make it longer.
<kbd>![image](https://github.com/user-attachments/assets/0532c186-c081-4e95-a853-1873e50005ff)</kbd>
- The `Embed code` block ""Click on Edit..."" message is not visible on dark background.
<kbd>![image](https://github.com/user-attachments/assets/16510ffb-7a2e-4eaa-b5f7-40f0e9d9a943)</kbd>",bvr-odoo,2025-01-15 16:51:39+00:00,[],2025-01-30 16:34:20+00:00,2025-01-30 15:53:32+00:00,https://github.com/odoo/odoo/pull/193819,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593440101, 'issue_id': 2790345892, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193819.png)](https://mergebot.odoo.com/odoo/odoo/pull/193819)', 'created_at': datetime.datetime(2025, 1, 15, 16, 51, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624237629, 'issue_id': 2790345892, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 30, 11, 30, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624403578, 'issue_id': 2790345892, 'author': 'robodoo', 'body': '@bvr-odoo @qsm-odoo unable to stage: merge conflict', 'created_at': datetime.datetime(2025, 1, 30, 12, 41, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:51:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193819.png)](https://mergebot.odoo.com/odoo/odoo/pull/193819)

robodoo on (2025-01-30 11:30:21 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-01-30 12:41:51 UTC): @bvr-odoo @qsm-odoo unable to stage: merge conflict

"
2790344150,pull_request,open,,[IMP] stock_landed_costs: test landed costs are added to fifo products,"# Leaving test out of original commit

[IMP] stock_landed_costs: test landed costs are added to fifo products

This Adding test that ensures that landed costs are correctly applied
to FIFO products, updating their cost appropriately, based on (ref.1)

(ref.1)
[IMP] stock_account: Set the AVCO value as standard price on product form
9cd316f038dc95051814ede9474f8f15f7d165df

Stems from a bug in the previous versions:
Reproduce
---
- Create a PRODUCT_CATEGORY with First In First Out (FIFO) and Automated Inventory Valuation
- Create a storable PRODUCT in the PRODUCT_CATEGORY
- Create storable COMPONENT with a vendor (ex. cost set to $5)
- Create a MO, manufacture the PRODUCT consuming the COMPONENT
- (Open the PRODUCT, observe: the cost is set to COMPONENT's cost OK (ex. $5))
- Add LANDED_COST (ex. $2 equally split) to the MO
BUG: In PRODUCT, cost isn't updated with LANDED_COST (ex. still $5 instead of $7)

opw-4370005


# legacy commit

Landed costs weren't being added to products using FIFO costing method, unlike products using average cost (AVCO). This fix ensures that landed costs are correctly applied to FIFO products, updating their cost appropriately, based on (ref.1).

Reproduce
---
- Create a PRODUCT_CATEGORY with First In First Out (FIFO) and Automated Inventory Valuation
- Create a storable PRODUCT in the PRODUCT_CATEGORY
- Create storable COMPONENT with a vendor (ex. cost set to $5)
- Create a MO, manufacture the PRODUCT consuming the COMPONENT
- (Open the PRODUCT, observe: the cost is set to COMPONENT's cost OK (ex. $5))
- Add LANDED_COST (ex. $2 equally split) to the MO BUG: In PRODUCT, cost isn't updated with LANDED_COST (ex. still $5 instead of $7)

References
---
(ref.1)
[IMP] stock_account: Set the AVCO value as standard price on product form https://github.com/odoo/odoo/commit/9cd316f038dc95051814ede9474f8f15f7d165df

opw-4370005
",nd-dew,2025-01-15 16:50:58+00:00,[],2025-01-22 16:26:25+00:00,,https://github.com/odoo/odoo/pull/193818,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593438061, 'issue_id': 2790344150, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193818.png)](https://mergebot.odoo.com/odoo/odoo/pull/193818)', 'created_at': datetime.datetime(2025, 1, 15, 16, 51, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595151662, 'issue_id': 2790344150, 'author': 'nd-dew', 'body': 'No need to fix in 17.0, tho maybe wise to keep fw-ports just for the test', 'created_at': datetime.datetime(2025, 1, 16, 10, 32, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595162721, 'issue_id': 2790344150, 'author': 'nd-dew', 'body': 'https://github.com/odoo/odoo/pull/108468', 'created_at': datetime.datetime(2025, 1, 16, 10, 37, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606697021, 'issue_id': 2790344150, 'author': 'Whenrow', 'body': 'Hello. The PR you are quoting was added in 16.1, so I would not make this change in 16.0. You can still adapt the test in 17.0 :) thank you', 'created_at': datetime.datetime(2025, 1, 22, 9, 22, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606973753, 'issue_id': 2790344150, 'author': 'nd-dew', 'body': 'thanks for the feedback, sorry to hear that :cry: \r\n\r\nremoving fix, leaving test, re-targeting to 17.0', 'created_at': datetime.datetime(2025, 1, 22, 11, 20, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607698949, 'issue_id': 2790344150, 'author': 'nd-dew', 'body': 'unrealated fails, rebasing...', 'created_at': datetime.datetime(2025, 1, 22, 16, 25, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:51:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193818.png)](https://mergebot.odoo.com/odoo/odoo/pull/193818)

nd-dew (Issue Creator) on (2025-01-16 10:32:06 UTC): No need to fix in 17.0, tho maybe wise to keep fw-ports just for the test

nd-dew (Issue Creator) on (2025-01-16 10:37:08 UTC): https://github.com/odoo/odoo/pull/108468

Whenrow on (2025-01-22 09:22:06 UTC): Hello. The PR you are quoting was added in 16.1, so I would not make this change in 16.0. You can still adapt the test in 17.0 :) thank you

nd-dew (Issue Creator) on (2025-01-22 11:20:58 UTC): thanks for the feedback, sorry to hear that :cry: 

removing fix, leaving test, re-targeting to 17.0

nd-dew (Issue Creator) on (2025-01-22 16:25:41 UTC): unrealated fails, rebasing...

"
2790341165,pull_request,closed,,[FW][FIX] base_import: stop importing when everything has been imported,"Versions
--------
- 17.0+

Steps
-----
1. Create a pricelist with 200 price rules;
2. export pricelist to xlsx;
3. delete original pricelist;
4. import pricelist, setting batch size to 100.

Test files ready for import:
- [200_products.xlsx](https://github.com/user-attachments/files/17848187/200_products.xlsx)
- [200_pricelist_rules.xlsx](https://github.com/user-attachments/files/17848188/200_pricelist_rules.xlsx)

Issue
-----
Pricelist is imported with 400 price rules.

Cause
-----
The back-end signals there's nothing left to import by having `nextrow` be falsy[^1]. The front-end ignores this, and continues looping until it's taken as many steps as it initially planned.

The upfront `totalSteps` calculation is too high when an imported record has a number of nested relational records that's larger than the batch size.

Solution
--------
If the ORM returns a falsy `nextrow` value, call `stopImport`.

opw-4164056

[^1]: see note on f58368210c9c

Forward-Port-Of: odoo/odoo#188092",fw-bot,2025-01-15 16:49:46+00:00,[],2025-01-30 15:24:42+00:00,2025-01-16 14:54:11+00:00,https://github.com/odoo/odoo/pull/193817,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593435191, 'issue_id': 2790341165, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193817.png)](https://mergebot.odoo.com/odoo/odoo/pull/193817)', 'created_at': datetime.datetime(2025, 1, 15, 16, 49, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593435216, 'issue_id': 2790341165, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 49, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593505194, 'issue_id': 2790341165, 'author': 'fw-bot', 'body': '@lvsz @iucapad ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 17, 15, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595282700, 'issue_id': 2790341165, 'author': 'fw-bot', 'body': '@lvsz @iucapad this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 16, 11, 33, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595282751, 'issue_id': 2790341165, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 33, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:49:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193817.png)](https://mergebot.odoo.com/odoo/odoo/pull/193817)

fw-bot (Issue Creator) on (2025-01-15 16:49:48 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 17:15:22 UTC): @lvsz @iucapad ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 11:33:58 UTC): @lvsz @iucapad this PR was modified / updated and has become a normal PR. It must be merged directly.

lvsz on (2025-01-16 11:33:59 UTC): robodoo r+

"
2790330426,pull_request,closed,,[FW][FIX] test_http: call new_test_user in setUpClass,Forward-Port-Of: odoo/odoo#193775,fw-bot,2025-01-15 16:44:37+00:00,[],2025-01-30 17:46:39+00:00,2025-01-16 17:38:38+00:00,https://github.com/odoo/odoo/pull/193816,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593423918, 'issue_id': 2790330426, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193816.png)](https://mergebot.odoo.com/odoo/odoo/pull/193816)', 'created_at': datetime.datetime(2025, 1, 15, 16, 44, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593423943, 'issue_id': 2790330426, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 44, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593611543, 'issue_id': 2790330426, 'author': 'fw-bot', 'body': '@Julien00859 the next pull request (odoo/odoo#193832) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 18, 4, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595940386, 'issue_id': 2790330426, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 53, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:44:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193816.png)](https://mergebot.odoo.com/odoo/odoo/pull/193816)

fw-bot (Issue Creator) on (2025-01-15 16:44:39 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 18:04:08 UTC): @Julien00859 the next pull request (odoo/odoo#193832) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Julien00859 on (2025-01-16 14:53:32 UTC): @robodoo r+

"
2790321361,pull_request,closed,,[FIX] stock: correct uom write comparison,"Currently the write will check if uom.relative_uom_id != int, which will throw a UserWarning:

unsupported operand type(s) for ""=="": 'uom.uom()' == '8'

whenever `relative_uom_id` was written to. Although this error is only show via the log, it's best to not have it at all + we should probably properly enforce the check.

Also, remove `category_id` from the `keys_to_protect` since it was deleted anyways.

Followup to task: 4252043


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ticodoo,2025-01-15 16:40:14+00:00,[],2025-01-31 10:24:53+00:00,2025-01-17 10:20:50+00:00,https://github.com/odoo/odoo/pull/193815,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593414730, 'issue_id': 2790321361, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193815.png)](https://mergebot.odoo.com/odoo/odoo/pull/193815)', 'created_at': datetime.datetime(2025, 1, 15, 16, 40, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597690814, 'issue_id': 2790321361, 'author': 'svs-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 29, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:40:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193815.png)](https://mergebot.odoo.com/odoo/odoo/pull/193815)

svs-odoo on (2025-01-17 08:29:43 UTC): robodoo r+

"
2790321149,pull_request,closed,,[FW][FIX] web: graph: prevent rendering too many datasets,"Chart.js can be really slow when rendering a large number of datasets.
So this commit limits the amount of datasets displayed by default on the graph.
However a button is present to display all datasets even if it can take a moment to render them.

task-4351783

Forward-Port-Of: odoo/odoo#192892",fw-bot,2025-01-15 16:40:08+00:00,[],2025-01-30 12:53:46+00:00,2025-01-16 12:52:19+00:00,https://github.com/odoo/odoo/pull/193814,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593414450, 'issue_id': 2790321149, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193814.png)](https://mergebot.odoo.com/odoo/odoo/pull/193814)', 'created_at': datetime.datetime(2025, 1, 15, 16, 40, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593414477, 'issue_id': 2790321149, 'author': 'fw-bot', 'body': '@mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.\n\nstdout:\n```\nAuto-merging addons/web/static/src/views/graph/graph_controller.js\nCONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_controller.js\nAuto-merging addons/web/static/src/views/graph/graph_controller.xml\nCONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_controller.xml\nAuto-merging addons/web/static/src/views/graph/graph_model.js\nCONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_model.js\nAuto-merging addons/web/static/tests/views/graph_view_tests.js\nCONFLICT (content): Merge conflict in addons/web/static/tests/views/graph_view_tests.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 40, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594870172, 'issue_id': 2790321149, 'author': 'mcm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 40, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:40:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193814.png)](https://mergebot.odoo.com/odoo/odoo/pull/193814)

fw-bot (Issue Creator) on (2025-01-15 16:40:11 UTC): @mcm-odoo @polymorphe57 cherrypicking of pull request odoo/odoo#192892 failed.

stdout:
```
Auto-merging addons/web/static/src/views/graph/graph_controller.js
CONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_controller.js
Auto-merging addons/web/static/src/views/graph/graph_controller.xml
CONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_controller.xml
Auto-merging addons/web/static/src/views/graph/graph_model.js
CONFLICT (content): Merge conflict in addons/web/static/src/views/graph/graph_model.js
Auto-merging addons/web/static/tests/views/graph_view_tests.js
CONFLICT (content): Merge conflict in addons/web/static/tests/views/graph_view_tests.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mcm-odoo on (2025-01-16 08:40:29 UTC): @robodoo r+

"
2790313517,pull_request,closed,,[FW][FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193531",fw-bot,2025-01-15 16:36:18+00:00,[],2025-01-30 13:08:03+00:00,2025-01-16 12:58:06+00:00,https://github.com/odoo/odoo/pull/193813,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593405787, 'issue_id': 2790313517, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193813.png)](https://mergebot.odoo.com/odoo/odoo/pull/193813)', 'created_at': datetime.datetime(2025, 1, 15, 16, 36, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593405820, 'issue_id': 2790313517, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 36, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:36:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193813.png)](https://mergebot.odoo.com/odoo/odoo/pull/193813)

fw-bot (Issue Creator) on (2025-01-15 16:36:20 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790302217,pull_request,closed,,[FW][FIX] base_import_module: fix ir_model_data xmlid for cloc_exclude,"The cloc_exclude entry of the manifest was activated for data modules*, and it works for records with a new id. But it fails for records with external ids from another module, as it tries to lookup for a record with an xmlid like `new_module.external_module.id`, which is not a valid xmlid.

This commit fixes the issue by first checking if the record to exclude from cloc is from another module or not, before creating the ir_model_data entry.

*https://github.com/odoo/odoo/commit/a47de680de149a60dd479c4c0b14f2c1bf5afcbe

opw-4472893

Forward-Port-Of: odoo/odoo#193592",fw-bot,2025-01-15 16:30:50+00:00,[],2025-01-30 05:46:40+00:00,2025-01-16 04:39:56+00:00,https://github.com/odoo/odoo/pull/193812,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593393135, 'issue_id': 2790302217, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193812.png)](https://mergebot.odoo.com/odoo/odoo/pull/193812)', 'created_at': datetime.datetime(2025, 1, 15, 16, 30, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593393160, 'issue_id': 2790302217, 'author': 'fw-bot', 'body': '@vava-odoo @tfr-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193793\n* odoo/odoo#193748\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 30, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593451749, 'issue_id': 2790302217, 'author': 'vava-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 16, 55, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:30:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193812.png)](https://mergebot.odoo.com/odoo/odoo/pull/193812)

fw-bot (Issue Creator) on (2025-01-15 16:30:52 UTC): @vava-odoo @tfr-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193793
* odoo/odoo#193748

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vava-odoo on (2025-01-15 16:55:40 UTC): @robodoo r+

"
2790297436,pull_request,closed,,[FW][IMP] hw_drivers: add devtools to disable features,"While developing, we often disable features like the db checkout and the IoT handlers download to save some time.

Now, instead of going in the code and comment the lines we want to remove, we can just type:

- `devtools disable general`: to disable general features (checkout, handlers download),
- `devtools disable actions <optional action name>`: to disable a device action (printing for example).

**Note:** by default, if you don't specify `<action name>`, it will disable all actions.

Task: 4291487

Forward-Port-Of: odoo/odoo#193078",fw-bot,2025-01-15 16:28:34+00:00,[],2025-01-30 01:00:11+00:00,2025-01-16 00:46:24+00:00,https://github.com/odoo/odoo/pull/193811,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593387643, 'issue_id': 2790297436, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193811.png)](https://mergebot.odoo.com/odoo/odoo/pull/193811)', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593387684, 'issue_id': 2790297436, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593405672, 'issue_id': 2790297436, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 16, 36, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:28:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193811.png)](https://mergebot.odoo.com/odoo/odoo/pull/193811)

fw-bot (Issue Creator) on (2025-01-15 16:28:36 UTC): @loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-15 16:36:16 UTC): @robodoo r+

"
2790296413,pull_request,closed,,[FW][FIX] base: fix access error to currencies when in child company,"Steps to reproduce (db with Accounting installed):
- create a child company
- give a user (e.g. Marc Demo) access to the child company, set
their ""Accounting"" rights to ""Accountant"" and ""Administration"" to None.
- log as this user and select only the child company in the company
selector.
- try to access ""Accounting/Configuration/Accounting/Currencies""
-> Access Error

It is happening as in the `res.currency` model, several methods try to
access the root company, but there's only the child company in
`allowed_company_ids` from the context.

The fix here is to:
1) When accessing the root company in order the get its currency, just
access the currency of the child company, as it is the same.
2) Use sudo when accessing other fields from the root company.

opw-4352595

Forward-Port-Of: odoo/odoo#193627
Forward-Port-Of: odoo/odoo#192632",fw-bot,2025-01-15 16:28:10+00:00,[],2025-01-30 19:01:03+00:00,2025-01-16 18:54:22+00:00,https://github.com/odoo/odoo/pull/193810,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593387078, 'issue_id': 2790296413, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193810.png)](https://mergebot.odoo.com/odoo/odoo/pull/193810)', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593387103, 'issue_id': 2790296413, 'author': 'fw-bot', 'body': '@Arnaud-Sibille @william-andre this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313153, 'issue_id': 2790296413, 'author': 'fw-bot', 'body': '@Arnaud-Sibille @william-andre this forward port of odoo/odoo#192632 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595232045, 'issue_id': 2790296413, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 8, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:28:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193810.png)](https://mergebot.odoo.com/odoo/odoo/pull/193810)

fw-bot (Issue Creator) on (2025-01-15 16:28:21 UTC): @Arnaud-Sibille @william-andre this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:08 UTC): @Arnaud-Sibille @william-andre this forward port of odoo/odoo#192632 is awaiting action (not merged or closed).

william-andre on (2025-01-16 11:08:16 UTC): @robodoo r+

"
2790295872,pull_request,closed,,[FW][IMP] orm: allow again for the Id to be non integer,"Bring back the possibility to define view that have non-integer Id fields. Add a test case for that usage.
Note that many features of the ORM do not support anything else than integer as the identifier of a record, but it may be helpful for SQL views that have composite ids.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193227",fw-bot,2025-01-15 16:27:54+00:00,[],2025-01-16 08:03:16+00:00,2025-01-16 06:11:37+00:00,https://github.com/odoo/odoo/pull/193809,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593387015, 'issue_id': 2790295872, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193809.png)](https://mergebot.odoo.com/odoo/odoo/pull/193809)', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593387042, 'issue_id': 2790295872, 'author': 'fw-bot', 'body': '@kmagusiak @rco-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593594154, 'issue_id': 2790295872, 'author': 'kmagusiak', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 17, 55, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:28:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193809.png)](https://mergebot.odoo.com/odoo/odoo/pull/193809)

fw-bot (Issue Creator) on (2025-01-15 16:28:20 UTC): @kmagusiak @rco-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

kmagusiak on (2025-01-15 17:55:01 UTC): @robodoo r+

"
2790295220,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193680
Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-15 16:27:36+00:00,[],2025-01-30 11:01:05+00:00,2025-01-16 10:39:44+00:00,https://github.com/odoo/odoo/pull/193808,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593386952, 'issue_id': 2790295220, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193808.png)](https://mergebot.odoo.com/odoo/odoo/pull/193808)', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593386971, 'issue_id': 2790295220, 'author': 'fw-bot', 'body': '@HydrionBurst @rco-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594734737, 'issue_id': 2790295220, 'author': 'HydrionBurst', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 40, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:28:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193808.png)](https://mergebot.odoo.com/odoo/odoo/pull/193808)

fw-bot (Issue Creator) on (2025-01-15 16:28:18 UTC): @HydrionBurst @rco-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

HydrionBurst on (2025-01-16 07:40:59 UTC): @robodoo r+

"
2790294696,pull_request,closed,,[FW][IMP] iot_box_image: set version number automatically,"Before this PR, the IoT box version (e.g 25.01
for an image built in January 2025) was changed
manually whenever a new image was released.
After this PR, the version string is generated
automatically based on the date at build time.
Also, an unused `VERSION` variable was removed
from the build script.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193505",fw-bot,2025-01-15 16:27:20+00:00,[],2025-01-30 11:01:04+00:00,2025-01-16 10:39:34+00:00,https://github.com/odoo/odoo/pull/193807,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593386884, 'issue_id': 2790294696, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193807.png)](https://mergebot.odoo.com/odoo/odoo/pull/193807)', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593386908, 'issue_id': 2790294696, 'author': 'fw-bot', 'body': '@maxthewhale @Ysoroko this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 28, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594724642, 'issue_id': 2790294696, 'author': 'MaxTheWhale', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 34, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:28:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193807.png)](https://mergebot.odoo.com/odoo/odoo/pull/193807)

fw-bot (Issue Creator) on (2025-01-15 16:28:16 UTC): @maxthewhale @Ysoroko this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

MaxTheWhale on (2025-01-16 07:34:20 UTC): @robodoo r+

"
2790290278,pull_request,closed,,"[FW][FIX] repair,sale_stock,stock_account: repair with auto FIFO component","When using an auto fifo product as part of the repair, the COGS
won't be based on the used product

To reproduce the issue:
1. Setup auto fifo product
2. Receive 1@10 and 1@20
3. Process a RO:
   - Invoice method: After repair
   - Parts:
     - Add 1 x fifo product
4. Create and post the invoice
5. Open its journal items

Error: Cogs are $20 instead of $10

When posting the invoice, we generate the COGS:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L47-L48
We therefore compute the ""anglo saxon unit price"":
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L133
However, there isn't any override to handle the RO case, so it leads
to the default mechanism, i.e. the standard price of the product:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/7cd7563f6708331bb6baf0e06d07a9f9ee329e38/addons/stock_account/models/product.py#L753-L757

And, since the first product is out, its standard price is now based
on the next candidate: $20

About the `sudo`: an accountman has not any access to `repair`, so
posting such an invoice would raise an error. Since this diff is
specific to Odoo 16, the idea is not to impact any security rules
and rather minimize the changes.

Note: Indeed, `repair` does not depend on `stock_account`, so this
commit could lead to a traceback if the bridge is removed. I delegate
this issue to the error of dependencies. Anyway, removing the bridge
would lead to other bugs. Hopefully, this has been fixed on master [1].

[1] https://github.com/odoo/odoo/commit/f7dbdec11b74f8c7d969763d8c5cf09542a47f86

OPW-4166570

Forward-Port-Of: odoo/odoo#193588
Forward-Port-Of: odoo/odoo#193076",fw-bot,2025-01-15 16:25:13+00:00,[],2025-01-30 10:23:51+00:00,2025-01-16 10:17:40+00:00,https://github.com/odoo/odoo/pull/193806,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593379871, 'issue_id': 2790290278, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193806.png)](https://mergebot.odoo.com/odoo/odoo/pull/193806)', 'created_at': datetime.datetime(2025, 1, 15, 16, 25, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593379900, 'issue_id': 2790290278, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 25, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594761545, 'issue_id': 2790290278, 'author': 'adwid', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 58, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594770047, 'issue_id': 2790290278, 'author': 'fw-bot', 'body': ""@adwid @Whenrow child PR odoo/odoo#193826 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 16, 8, 3, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:25:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193806.png)](https://mergebot.odoo.com/odoo/odoo/pull/193806)

fw-bot (Issue Creator) on (2025-01-15 16:25:15 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adwid on (2025-01-16 07:58:16 UTC): robodoo r+

fw-bot (Issue Creator) on (2025-01-16 08:03:18 UTC): @adwid @Whenrow child PR odoo/odoo#193826 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2790281396,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193571
Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-15 16:20:59+00:00,[],2025-01-30 11:01:05+00:00,2025-01-16 10:39:39+00:00,https://github.com/odoo/odoo/pull/193805,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593369735, 'issue_id': 2790281396, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193805.png)](https://mergebot.odoo.com/odoo/odoo/pull/193805)', 'created_at': datetime.datetime(2025, 1, 15, 16, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593369753, 'issue_id': 2790281396, 'author': 'fw-bot', 'body': '@maxthewhale @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193787\n* odoo/odoo#193750\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 16, 21, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594728911, 'issue_id': 2790281396, 'author': 'MaxTheWhale', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 37, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:21:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193805.png)](https://mergebot.odoo.com/odoo/odoo/pull/193805)

fw-bot (Issue Creator) on (2025-01-15 16:21:01 UTC): @maxthewhale @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193787
* odoo/odoo#193750

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

MaxTheWhale on (2025-01-16 07:37:21 UTC): @robodoo r+

"
2790263684,pull_request,open,,[IMP] account_peppol: map errors from IAP by code ,"Previously, we only disable the account move send wizard checkbox for
peppol if the partner of the move have an invalid peppol address.
However, this approach misses the case when the partner does not have a
peppol address at all.

This commit fixes that behavior by also disabling if the partner peppol
verification state is in both case (invalid/not verified).

---

This commit changes the behavior to how we process error from IAP in the database, by using the received code to fetch the appropriate message, which will also enable us to translate the messages.

The new peppol error message will have the following format:

```
Peppol Error [code=<error_code_here>]: <error_subject_here>
<error_message_here>
```

---

task-id: 4345477",yosuanicolaus,2025-01-15 16:12:54+00:00,['yosuanicolaus'],2025-02-04 13:12:15+00:00,,https://github.com/odoo/odoo/pull/193804,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593350396, 'issue_id': 2790263684, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193804.png)](https://mergebot.odoo.com/odoo/odoo/pull/193804)', 'created_at': datetime.datetime(2025, 1, 15, 16, 12, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 16:12:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193804.png)](https://mergebot.odoo.com/odoo/odoo/pull/193804)

"
2790226354,pull_request,closed,,[FW][FIX] project: project grouped by stages now respects the pagination,"Steps to reproduce
==================

- Open any project
- Create many project stages (80+)
- Switch to the list view
- Group by stage
- Switch to to next page => The pager keeps increasing

Cause of the issue
==================

`stage_id` has a group_expand: `_read_group_stage_ids`

This method is used to include empty stages in the result for the kanban view, so that we can drag tasks to an empty stage.

Solution
========

Add a context key `project_kanban` and only add empty stages in that case.

opw-4408061

Forward-Port-Of: odoo/odoo#193488
Forward-Port-Of: odoo/odoo#192492",fw-bot,2025-01-15 15:57:00+00:00,[],2025-01-29 23:03:41+00:00,2025-01-15 22:15:04+00:00,https://github.com/odoo/odoo/pull/193803,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2593311230, 'issue_id': 2790226354, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193803.png)](https://mergebot.odoo.com/odoo/odoo/pull/193803)', 'created_at': datetime.datetime(2025, 1, 15, 15, 57, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593311255, 'issue_id': 2790226354, 'author': 'fw-bot', 'body': '@hubvd @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193783\n* odoo/odoo#193759\n* odoo/odoo#193731\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 57, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593526253, 'issue_id': 2790226354, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 17, 21, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:57:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193803.png)](https://mergebot.odoo.com/odoo/odoo/pull/193803)

fw-bot (Issue Creator) on (2025-01-15 15:57:02 UTC): @hubvd @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193783
* odoo/odoo#193759
* odoo/odoo#193731

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

hubvd on (2025-01-15 17:21:50 UTC): @robodoo r+

"
2790225342,pull_request,closed,,[FW][FIX] pos_restaurant: split orders preparation changes,"Before this commit, when splitting an order, the preparation changes were not correctly applied to the new order and modified on the original one.

This commit fix the issue.

Forward-Port-Of: odoo/odoo#193734",fw-bot,2025-01-15 15:56:33+00:00,[],2025-01-16 09:29:56+00:00,2025-01-16 09:29:55+00:00,https://github.com/odoo/odoo/pull/193802,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593310049, 'issue_id': 2790225342, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193802.png)](https://mergebot.odoo.com/odoo/odoo/pull/193802)', 'created_at': datetime.datetime(2025, 1, 15, 15, 56, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593310085, 'issue_id': 2790225342, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193734 failed.\n\nstdout:\n```\nAuto-merging addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 56, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595002151, 'issue_id': 2790225342, 'author': 'davidmonnom', 'body': 'Handle here https://github.com/odoo/odoo/pull/193604', 'created_at': datetime.datetime(2025, 1, 16, 9, 29, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:56:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193802.png)](https://mergebot.odoo.com/odoo/odoo/pull/193802)

fw-bot (Issue Creator) on (2025-01-15 15:56:35 UTC): @davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193734 failed.

stdout:
```
Auto-merging addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

davidmonnom on (2025-01-16 09:29:55 UTC): Handle here https://github.com/odoo/odoo/pull/193604

"
2790215038,pull_request,closed,,[FW][FIX] pos_restaurant: split decimal orderline,"Fixes an issue where splitting an order line with a decimal quantity (e.g., 2.5) would cause indefinite increments in the split bill screen. This adds a check to ensure the split quantity does not exceed the original order line quantity.

task-id: 4461861

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193514",fw-bot,2025-01-15 15:52:14+00:00,[],2025-01-31 12:11:58+00:00,2025-01-17 12:07:06+00:00,https://github.com/odoo/odoo/pull/193801,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593299089, 'issue_id': 2790215038, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193801.png)](https://mergebot.odoo.com/odoo/odoo/pull/193801)', 'created_at': datetime.datetime(2025, 1, 15, 15, 52, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593299196, 'issue_id': 2790215038, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom cherrypicking of pull request odoo/odoo#193514 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js deleted in 1b5dc48ea7264be2bd5436bf6b37a7f42761b24c and modified in b7a819eae48fd67cacd3791b2d4f46155d237c1a.  Version b7a819eae48fd67cacd3791b2d4f46155d237c1a of addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 52, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597778718, 'issue_id': 2790215038, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 17, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:52:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193801.png)](https://mergebot.odoo.com/odoo/odoo/pull/193801)

fw-bot (Issue Creator) on (2025-01-15 15:52:18 UTC): @manv-afk @davidmonnom cherrypicking of pull request odoo/odoo#193514 failed.

stdout:
```
CONFLICT (modify/delete): addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js deleted in 1b5dc48ea7264be2bd5436bf6b37a7f42761b24c and modified in b7a819eae48fd67cacd3791b2d4f46155d237c1a.  Version b7a819eae48fd67cacd3791b2d4f46155d237c1a of addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-17 09:17:47 UTC): @robodoo r+

"
2790213451,pull_request,closed,,[FW][FIX] auth_ldap: add email on new res.partner,"Before this commit, when a new res.user is created after signing in with auth_ldap, there was no email on the linked res.partner, which may cause issues in modules such as helpdesk, where partner email is used to find related tickets.

res.users created through the form view will trigger the onchange which sets the 'email' = 'login', which does not happen when creating a user directly through the ORM.

This commit adds 'email' as a key which is returned by the method _map_ldap_attributes, which is used to create new partners with the correct email associated with the res.user login.

opw-4378487



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193495",fw-bot,2025-01-15 15:51:30+00:00,[],2025-02-06 21:02:07+00:00,2025-01-23 20:35:50+00:00,https://github.com/odoo/odoo/pull/193800,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593297240, 'issue_id': 2790213451, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193800.png)](https://mergebot.odoo.com/odoo/odoo/pull/193800)', 'created_at': datetime.datetime(2025, 1, 15, 15, 51, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593297275, 'issue_id': 2790213451, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 51, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:51:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193800.png)](https://mergebot.odoo.com/odoo/odoo/pull/193800)

fw-bot (Issue Creator) on (2025-01-15 15:51:32 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790174080,pull_request,closed,,[FW][FIX] test_http: call new_test_user in setUpClass,Forward-Port-Of: odoo/odoo#193775,fw-bot,2025-01-15 15:35:54+00:00,[],2025-01-30 17:36:16+00:00,2025-01-16 17:28:49+00:00,https://github.com/odoo/odoo/pull/193799,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593242030, 'issue_id': 2790174080, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193799.png)](https://mergebot.odoo.com/odoo/odoo/pull/193799)', 'created_at': datetime.datetime(2025, 1, 15, 15, 35, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593242074, 'issue_id': 2790174080, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 35, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:35:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193799.png)](https://mergebot.odoo.com/odoo/odoo/pull/193799)

fw-bot (Issue Creator) on (2025-01-15 15:35:56 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790168457,pull_request,closed,,[FIX] mail: fix call on embed livechat,"__Current behavior before commit:__
Since [`9592bd1`][1] when the livechat is integrated on a third-party website, a visitor can not answer the call of an operator. This is because the script `selfie_segmentation.js` is being fetched from the third-party website domain instead of the Odoo database domain; resulting in the following error:
`AssetsLoadingError: The loading of
/mail/static/lib/selfie_segmentation/selfie_segmentation.js failed`

__Description of the fix:__
Use of the `url` function to prepend the correct domain name.

opw-4417974

[1]: https://github.com/odoo/odoo/commit/9592bd1",Dj0ulo,2025-01-15 15:33:26+00:00,[],2025-01-16 10:07:58+00:00,2025-01-16 06:19:22+00:00,https://github.com/odoo/odoo/pull/193798,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593230672, 'issue_id': 2790168457, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193798.png)](https://mergebot.odoo.com/odoo/odoo/pull/193798)', 'created_at': datetime.datetime(2025, 1, 15, 15, 33, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:33:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193798.png)](https://mergebot.odoo.com/odoo/odoo/pull/193798)

"
2790145979,pull_request,closed,,[FIX] hr_*: allow editing unapproved allocation requests,"The base.group_user did not have the access right to read overtime_id, which is necessary for filtering allocations that do not have a null overtime_id. The access right was granted to base.group_user only when the allocation state is either draft or confirm.

task-4452360

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ataha1,2025-01-15 15:24:19+00:00,[],2025-02-04 05:29:17+00:00,2025-02-03 22:24:58+00:00,https://github.com/odoo/odoo/pull/193797,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593187836, 'issue_id': 2790145979, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193797.png)](https://mergebot.odoo.com/odoo/odoo/pull/193797)', 'created_at': datetime.datetime(2025, 1, 15, 15, 24, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631969924, 'issue_id': 2790145979, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 20, 11, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:24:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193797.png)](https://mergebot.odoo.com/odoo/odoo/pull/193797)

tivisse on (2025-02-03 20:11:20 UTC): @robodoo r+

"
2790136032,pull_request,open,,[FIX] base: Test compute field before saving,"Code:
```
for record in self:
  record.x_a = ""Hello""
```

Steps:
- try to create a server action with the provided code
    - Fail as expected as code must use ""write"" instead of ""=""
- try to create a field with a compute using the provided code
    - New field, so compute seems triggered directly
    - Fail as expected as code must use ""write"" instead of ""=""
- try to create a field without the compute just the depends
    - Succeed
- update your new field to use the provided code
    - Succeed --> SHOULD FAIL
- open a record for the new field's model and change its depends field
    - Error

If nothing is specified, default value are used, so the new field is stored

Actual result:
- ValueError: forbidden opcode(s) in 'for record in self:\n  record.x_a = ""Hello""': STORE_ATTR

Expected result:
- Error is provided when updating the compute as a ValidationError
- I cannot use invalid code in compute field (on create and on update)





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",GaetanVandenBergh,2025-01-15 15:20:02+00:00,[],2025-01-16 09:33:20+00:00,,https://github.com/odoo/odoo/pull/193796,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593168353, 'issue_id': 2790136032, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193796.png)](https://mergebot.odoo.com/odoo/odoo/pull/193796)', 'created_at': datetime.datetime(2025, 1, 15, 15, 20, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:20:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193796.png)](https://mergebot.odoo.com/odoo/odoo/pull/193796)

"
2790130724,pull_request,closed,,[FW][FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193531",fw-bot,2025-01-15 15:17:46+00:00,[],2025-01-30 12:41:28+00:00,2025-01-16 12:08:01+00:00,https://github.com/odoo/odoo/pull/193795,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593158206, 'issue_id': 2790130724, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193795.png)](https://mergebot.odoo.com/odoo/odoo/pull/193795)', 'created_at': datetime.datetime(2025, 1, 15, 15, 17, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593158274, 'issue_id': 2790130724, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 17, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:17:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193795.png)](https://mergebot.odoo.com/odoo/odoo/pull/193795)

fw-bot (Issue Creator) on (2025-01-15 15:17:49 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790130391,pull_request,closed,,[FIX] account_peppol: remove peppol registration migration button,"Peppol migration creates more issues than it solves. A lot of users issue migration requests to move to another SMP but later discover that the SMP they wanted to migrate to does not support migration keys. This creates a state that we need to handle manually. Most SMP do not support migrating away and force users to deregister and reregister again on another one.

This commit adds a fix in stable for that issue by removing the button from the res_config_settings_buttons and adding a deprecated warning when the user tries to call the `button_migrate_peppol_registration` method.

task-4394408",antonrom1,2025-01-15 15:17:37+00:00,[],2025-01-30 12:53:47+00:00,2025-01-16 12:52:27+00:00,https://github.com/odoo/odoo/pull/193794,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593157660, 'issue_id': 2790130391, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193794.png)](https://mergebot.odoo.com/odoo/odoo/pull/193794)', 'created_at': datetime.datetime(2025, 1, 15, 15, 17, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594709721, 'issue_id': 2790130391, 'author': 'robodoo', 'body': '@clbr-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 7, 23, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594710656, 'issue_id': 2790130391, 'author': 'clbr-odoo', 'body': ""@robodoo r- \r\nDidn't see the CI failing, there are tests you'll need to modify (most likely remove) :p"", 'created_at': datetime.datetime(2025, 1, 16, 7, 24, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594999493, 'issue_id': 2790130391, 'author': 'clbr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 28, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:17:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193794.png)](https://mergebot.odoo.com/odoo/odoo/pull/193794)

robodoo on (2025-01-16 07:23:57 UTC): @clbr-odoo you may want to rebuild or fix this PR as it has failed CI.

clbr-odoo on (2025-01-16 07:24:37 UTC): @robodoo r- 
Didn't see the CI failing, there are tests you'll need to modify (most likely remove) :p

clbr-odoo on (2025-01-16 09:28:40 UTC): @robodoo r+

"
2790128402,pull_request,closed,,[FW][FIX] base_import_module: fix ir_model_data xmlid for cloc_exclude,"The cloc_exclude entry of the manifest was activated for data modules*, and it works for records with a new id. But it fails for records with external ids from another module, as it tries to lookup for a record with an xmlid like `new_module.external_module.id`, which is not a valid xmlid.

This commit fixes the issue by first checking if the record to exclude from cloc is from another module or not, before creating the ir_model_data entry.

*https://github.com/odoo/odoo/commit/a47de680de149a60dd479c4c0b14f2c1bf5afcbe

opw-4472893

Forward-Port-Of: odoo/odoo#193592",fw-bot,2025-01-15 15:16:47+00:00,[],2025-01-29 23:03:45+00:00,2025-01-15 22:40:52+00:00,https://github.com/odoo/odoo/pull/193793,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593153791, 'issue_id': 2790128402, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193793.png)](https://mergebot.odoo.com/odoo/odoo/pull/193793)', 'created_at': datetime.datetime(2025, 1, 15, 15, 16, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593153851, 'issue_id': 2790128402, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 16, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:16:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193793.png)](https://mergebot.odoo.com/odoo/odoo/pull/193793)

fw-bot (Issue Creator) on (2025-01-15 15:16:49 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790127608,pull_request,closed,,[FIX] website: add missing run methods in media dialog tour,"This PR adds the missing run methods in the media dialog tour steps **merged** in [commit](https://github.com/odoo/odoo/commit/bee295f). The run methods are necessary to execute the tour steps Without these methods, the tour steps were not executed properly, and the functionality was not tested as intended.

task-4246644",shsa-odoo,2025-01-15 15:16:26+00:00,[],2025-01-31 21:53:22+00:00,2025-01-17 21:29:21+00:00,https://github.com/odoo/odoo/pull/193792,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593152346, 'issue_id': 2790127608, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193792.png)](https://mergebot.odoo.com/odoo/odoo/pull/193792)', 'created_at': datetime.datetime(2025, 1, 15, 15, 16, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594954530, 'issue_id': 2790127608, 'author': 'shsa-odoo', 'body': 'Hello @qsm-odoo all the changes has been adapted, The PR is ready for review. Thanks!', 'created_at': datetime.datetime(2025, 1, 16, 9, 8, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598670275, 'issue_id': 2790127608, 'author': 'robodoo', 'body': 'Forward-port disabled (via limit).', 'created_at': datetime.datetime(2025, 1, 17, 15, 58, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:16:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193792.png)](https://mergebot.odoo.com/odoo/odoo/pull/193792)

shsa-odoo (Issue Creator) on (2025-01-16 09:08:11 UTC): Hello @qsm-odoo all the changes has been adapted, The PR is ready for review. Thanks!

robodoo on (2025-01-17 15:58:01 UTC): Forward-port disabled (via limit).

"
2790127013,pull_request,open,,[FIX] Compute accrual days on allocations with multiple employees,"Steps to reproduce Bug 1:
  1. Create an accrual plan.
  2. Check the box `Based on worked time`.
  3. Create a milestone. The configuration of the milestone is arbitrary. For example accrue 10 days yearly.
  4. Create an allocation.
  5. Set allocation start date 1 year before.
  6. Select accrual allocation.
  7. Choose the accrual plan defined above.
  8.  Set multiple employees on the allocation
  9. the number of allocated days will be 0.

Steps to reproduce Bug 2:
  1. Create an accrual plan and milestone identical to the above but don't check the box `Based on worked time`.
  2. Create an allocation.
  3. Set allocation start date 1 year before.
  4. Select accrual allocation.
  5. Choose the accrual plan defined above
  6. Set a single employee on the allocation
  7. the number of allocated days will be 10.
  8. Set 2 employees on the allocation instead of 1.
  9. the number of allocated days will still be 10.

Required Behavior:
  1. If the accrual plan isn't `based on worked time`, then the number of allocated days should be computed normally on the allocation with multiple employees. 
  2. If the accrual plan `is based on worked time`, then the number of allocated days is different for each employee and it should be set to 0 on the allocation with multiple employees.

task-4481698
",abdelrahmankhaledg,2025-01-15 15:16:11+00:00,[],2025-01-29 09:08:23+00:00,,https://github.com/odoo/odoo/pull/193791,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593151780, 'issue_id': 2790127013, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193791.png)](https://mergebot.odoo.com/odoo/odoo/pull/193791)', 'created_at': datetime.datetime(2025, 1, 15, 15, 16, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:16:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193791.png)](https://mergebot.odoo.com/odoo/odoo/pull/193791)

"
2790123205,pull_request,closed,,[FW][17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193522",fw-bot,2025-01-15 15:14:39+00:00,[],2025-01-31 06:42:36+00:00,2025-01-17 06:24:38+00:00,https://github.com/odoo/odoo/pull/193790,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593143959, 'issue_id': 2790123205, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193790.png)](https://mergebot.odoo.com/odoo/odoo/pull/193790)', 'created_at': datetime.datetime(2025, 1, 15, 15, 14, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593144432, 'issue_id': 2790123205, 'author': 'fw-bot', 'body': '@yostashiro @jco-odoo cherrypicking of pull request odoo/odoo#193522 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_jp/models/template_jp.py\nCONFLICT (content): Merge conflict in addons/l10n_jp/models/template_jp.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 14, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594655537, 'issue_id': 2790123205, 'author': 'vin-odoo', 'body': '@yostashiro Hello :smile: \r\nWould you like to solve this minor conflict yourself, or should I force push to resolve it?\r\nPlease let me know which solution you prefer; thank you!', 'created_at': datetime.datetime(2025, 1, 16, 6, 44, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597186042, 'issue_id': 2790123205, 'author': 'yostashiro', 'body': ""@vin-odoo Can you please handle this on your end? I'm not sure I'm supposed to be able to resolve this conflict myself without creating a new PR."", 'created_at': datetime.datetime(2025, 1, 17, 0, 32, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597227179, 'issue_id': 2790123205, 'author': 'vin-odoo', 'body': '@yostashiro I though that you could force push on this forward port to resolve it :thinking: \r\nI will handle it during the day, thank you for the reply :)', 'created_at': datetime.datetime(2025, 1, 17, 1, 12, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597260099, 'issue_id': 2790123205, 'author': 'vin-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 1, 44, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597268089, 'issue_id': 2790123205, 'author': 'robodoo', 'body': ""@yostashiro @jco-odoo @vin-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 1, 52, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:14:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193790.png)](https://mergebot.odoo.com/odoo/odoo/pull/193790)

fw-bot (Issue Creator) on (2025-01-15 15:14:47 UTC): @yostashiro @jco-odoo cherrypicking of pull request odoo/odoo#193522 failed.

stdout:
```
Auto-merging addons/l10n_jp/models/template_jp.py
CONFLICT (content): Merge conflict in addons/l10n_jp/models/template_jp.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vin-odoo on (2025-01-16 06:44:41 UTC): @yostashiro Hello :smile: 
Would you like to solve this minor conflict yourself, or should I force push to resolve it?
Please let me know which solution you prefer; thank you!

yostashiro on (2025-01-17 00:32:24 UTC): @vin-odoo Can you please handle this on your end? I'm not sure I'm supposed to be able to resolve this conflict myself without creating a new PR.

vin-odoo on (2025-01-17 01:12:19 UTC): @yostashiro I though that you could force push on this forward port to resolve it :thinking: 
I will handle it during the day, thank you for the reply :)

vin-odoo on (2025-01-17 01:44:29 UTC): @robodoo r+

robodoo on (2025-01-17 01:52:52 UTC): @yostashiro @jco-odoo @vin-odoo 'ci/runbot' failed on this reviewed PR.

"
2790099704,pull_request,open,,[FIX] point_of_sale: respect PoS note order,"Before this commit, the PoS notes were not displayed in the correct order in the PoS interface, despite the existence of a `sequence` field that allowed users to define their desired order.

opw-4473463

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-15 15:05:52+00:00,[],2025-01-15 16:00:28+00:00,,https://github.com/odoo/odoo/pull/193789,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593108452, 'issue_id': 2790099704, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193789.png)](https://mergebot.odoo.com/odoo/odoo/pull/193789)', 'created_at': datetime.datetime(2025, 1, 15, 15, 5, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:05:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193789.png)](https://mergebot.odoo.com/odoo/odoo/pull/193789)

"
2790095921,pull_request,open,,[FIX] web: handle sign buttons disability with loaded draw signatures,"Before this commit, although there is a signature loaded in the draw mode, the signature's isSignatureEmpty flag is true, which affects the logic that handles the sign buttons [enable/disable] state.
After this commit, the isSignatureEmpty is handled correctly and the sign buttons' disability logic is clear.

task-4466854
Related: https://github.com/odoo/enterprise/pull/77120

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",AbdelrahmanFawzy1,2025-01-15 15:04:45+00:00,[],2025-02-06 15:07:30+00:00,,https://github.com/odoo/odoo/pull/193788,"[('RD', 'research & development, internal work')]","[{'comment_id': 2593105642, 'issue_id': 2790095921, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193788.png)](https://mergebot.odoo.com/odoo/odoo/pull/193788)', 'created_at': datetime.datetime(2025, 1, 15, 15, 4, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:04:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193788.png)](https://mergebot.odoo.com/odoo/odoo/pull/193788)

"
2790091645,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193571
Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-15 15:03:40+00:00,[],2025-01-30 10:23:42+00:00,2025-01-16 10:12:22+00:00,https://github.com/odoo/odoo/pull/193787,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593102448, 'issue_id': 2790091645, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193787.png)](https://mergebot.odoo.com/odoo/odoo/pull/193787)', 'created_at': datetime.datetime(2025, 1, 15, 15, 3, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593102480, 'issue_id': 2790091645, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 3, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 15:03:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193787.png)](https://mergebot.odoo.com/odoo/odoo/pull/193787)

fw-bot (Issue Creator) on (2025-01-15 15:03:42 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790077415,pull_request,closed,,[FIX] account_edi_ubl_cii: retrieve product wrong company,"When receiving an ubl file by mail, we need to ensure
that the company from where we retrieve the product is the same as
the invoice company, otherwise we end up with an UserError (""Incompatible companies on records"").

Steps:

- Have 2 company (X being id == 1 and Y being id == 2)
- Create a product ""Locations et leasing opérationnel"" with X setas
  company_id
- Create an alias on company Y vendor bills journals
- Sent the `bis3_bill_example.xml` located in `addons/account_edi_ubl_cii/tests/test_files/`
  to the email alias
- Open the created bill
-> Error in the chatter: ""Error importing attachment ... as invoice
   (decoder=_import_invoice_ubl_cii)

opw-4444747
",guva-odoo,2025-01-15 14:58:28+00:00,[],2025-01-30 12:53:45+00:00,2025-01-16 12:52:15+00:00,https://github.com/odoo/odoo/pull/193786,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593088984, 'issue_id': 2790077415, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193786.png)](https://mergebot.odoo.com/odoo/odoo/pull/193786)', 'created_at': datetime.datetime(2025, 1, 15, 14, 58, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:58:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193786.png)](https://mergebot.odoo.com/odoo/odoo/pull/193786)

"
2790077117,pull_request,open,,"[FIX] stock: no backorder when quality failed
","
Scenario:

- have 3 steps incoming shipments
- create a quality control check for one product
- create and confirm a PO for that product and another one
- fail the quality check, then validate the picking

Result: a backorder will be created for product that was not failed
Expected: no backorder is created

Why: when we fail a quantity, we set the move as ""picked"", then when
validating the picking, because of this move all move will be set as
picked.

Fix: add a new condition so a move that is picked and has a failed
quality check is not taken into account when deciding if we set all
moves as picked when the picking is validated.

Note: this commit only extract code from _traverse_path in another
method so it can be overrideable.

opw-4363773
",nle-odoo,2025-01-15 14:58:21+00:00,[],2025-01-27 13:12:39+00:00,,https://github.com/odoo/odoo/pull/193785,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593088637, 'issue_id': 2790077117, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193785.png)](https://mergebot.odoo.com/odoo/odoo/pull/193785)', 'created_at': datetime.datetime(2025, 1, 15, 14, 58, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:58:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193785.png)](https://mergebot.odoo.com/odoo/odoo/pull/193785)

"
2790072090,pull_request,closed,,[FIX] pos_mercado_pago: wrong attribute was chosen,"Before this commit:
Nothing would happen after a mercado pago webhook notification received.

Since 17.4, `payment_method` attribute have been changed to `payment_method_id`. Thus it was returning `undefined` and silently fail to update the line

After this commit:
Call `handleMercadoPagoWebhook` on notification received as intended

opw-4349957",lse-odoo,2025-01-15 14:56:14+00:00,[],2025-01-30 12:41:30+00:00,2025-01-16 12:08:15+00:00,https://github.com/odoo/odoo/pull/193784,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2593083260, 'issue_id': 2790072090, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193784.png)](https://mergebot.odoo.com/odoo/odoo/pull/193784)', 'created_at': datetime.datetime(2025, 1, 15, 14, 56, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:56:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193784.png)](https://mergebot.odoo.com/odoo/odoo/pull/193784)

"
2790038569,pull_request,closed,,[FW][FIX] project: project grouped by stages now respects the pagination,"Steps to reproduce
==================

- Open any project
- Create many project stages (80+)
- Switch to the list view
- Group by stage
- Switch to to next page => The pager keeps increasing

Cause of the issue
==================

`stage_id` has a group_expand: `_read_group_stage_ids`

This method is used to include empty stages in the result for the kanban view, so that we can drag tasks to an empty stage.

Solution
========

Add a context key `project_kanban` and only add empty stages in that case.

opw-4408061

Forward-Port-Of: odoo/odoo#193488
Forward-Port-Of: odoo/odoo#192492",fw-bot,2025-01-15 14:43:41+00:00,[],2025-01-29 23:03:45+00:00,2025-01-15 22:40:56+00:00,https://github.com/odoo/odoo/pull/193783,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593049669, 'issue_id': 2790038569, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193783.png)](https://mergebot.odoo.com/odoo/odoo/pull/193783)', 'created_at': datetime.datetime(2025, 1, 15, 14, 43, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593049696, 'issue_id': 2790038569, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 43, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:43:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193783.png)](https://mergebot.odoo.com/odoo/odoo/pull/193783)

fw-bot (Issue Creator) on (2025-01-15 14:43:43 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790015605,pull_request,closed,,[FW][FIX] pos_restaurant: split decimal orderline,"Fixes an issue where splitting an order line with a decimal quantity (e.g., 2.5) would cause indefinite increments in the split bill screen. This adds a check to ensure the split quantity does not exceed the original order line quantity.

task-id: 4461861

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193514",fw-bot,2025-01-15 14:34:43+00:00,[],2025-01-30 06:26:36+00:00,2025-01-16 06:19:20+00:00,https://github.com/odoo/odoo/pull/193782,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593026624, 'issue_id': 2790015605, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193782.png)](https://mergebot.odoo.com/odoo/odoo/pull/193782)', 'created_at': datetime.datetime(2025, 1, 15, 14, 34, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593026653, 'issue_id': 2790015605, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 34, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593299135, 'issue_id': 2790015605, 'author': 'fw-bot', 'body': '@manv-afk @davidmonnom the next pull request (odoo/odoo#193801) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 52, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593396884, 'issue_id': 2790015605, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 16, 32, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:34:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193782.png)](https://mergebot.odoo.com/odoo/odoo/pull/193782)

fw-bot (Issue Creator) on (2025-01-15 14:34:45 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 15:52:16 UTC): @manv-afk @davidmonnom the next pull request (odoo/odoo#193801) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

manv-afk on (2025-01-15 16:32:27 UTC): @robodoo r+

"
2790014172,pull_request,closed,,[FW][FIX] web: make resequence work after a resequence crash,"Steps to reproduce:
- Go to a form view with a one2many with a handle widget
- Move a line in the one2many that make Odoo crash with the onchange

To generate a faulty view, create a form view with a one2many and add an automation ""On UI change"" to make the resequence crash.

Current behaviour
-----------------
After the error being thrown, the user will not be able to resequence this line again.

Expected Behaviour
------------------
After the error, the user will still be able to resequence this line

Forward-Port-Of: odoo/odoo#190318
Forward-Port-Of: odoo/odoo#157539",fw-bot,2025-01-15 14:34:05+00:00,[],2025-01-30 06:26:39+00:00,2025-01-16 06:19:22+00:00,https://github.com/odoo/odoo/pull/193781,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593025087, 'issue_id': 2790014172, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193781.png)](https://mergebot.odoo.com/odoo/odoo/pull/193781)', 'created_at': datetime.datetime(2025, 1, 15, 14, 34, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593025115, 'issue_id': 2790014172, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 34, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593055403, 'issue_id': 2790014172, 'author': 'fw-bot', 'body': '@fdardenne @SimonGenin this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 14, 45, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593068804, 'issue_id': 2790014172, 'author': 'fdardenne', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 50, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593160422, 'issue_id': 2790014172, 'author': 'robodoo', 'body': ""@fdardenne @SimonGenin 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 15, 18, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594065614, 'issue_id': 2790014172, 'author': 'fdardenne', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 22, 27, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594781085, 'issue_id': 2790014172, 'author': 'fdardenne', 'body': 'Accidentally created an empty file ... PR to fix this https://github.com/odoo/odoo/pull/193907', 'created_at': datetime.datetime(2025, 1, 16, 8, 9, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:34:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193781.png)](https://mergebot.odoo.com/odoo/odoo/pull/193781)

fw-bot (Issue Creator) on (2025-01-15 14:34:08 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 14:45:52 UTC): @fdardenne @SimonGenin this PR was modified / updated and has become a normal PR. It must be merged directly.

fdardenne on (2025-01-15 14:50:57 UTC): @robodoo r+

robodoo on (2025-01-15 15:18:18 UTC): @fdardenne @SimonGenin 'ci/runbot' failed on this reviewed PR.

fdardenne on (2025-01-15 22:27:18 UTC): @robodoo r+

fdardenne on (2025-01-16 08:09:36 UTC): Accidentally created an empty file ... PR to fix this https://github.com/odoo/odoo/pull/193907

"
2790012173,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193571
Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-15 14:33:17+00:00,[],2025-01-15 14:33:25+00:00,2025-01-15 14:33:22+00:00,https://github.com/odoo/odoo/pull/193780,[],"[{'comment_id': 2593023113, 'issue_id': 2790012173, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193780.png)](https://mergebot.odoo.com/odoo/odoo/pull/193780)', 'created_at': datetime.datetime(2025, 1, 15, 14, 33, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:33:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193780.png)](https://mergebot.odoo.com/odoo/odoo/pull/193780)

"
2790007091,pull_request,closed,,[FW][FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride

Forward-Port-Of: odoo/odoo#193696",fw-bot,2025-01-15 14:31:16+00:00,[],2025-01-29 19:07:59+00:00,2025-01-15 18:55:54+00:00,https://github.com/odoo/odoo/pull/193779,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593017611, 'issue_id': 2790007091, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193779.png)](https://mergebot.odoo.com/odoo/odoo/pull/193779)', 'created_at': datetime.datetime(2025, 1, 15, 14, 31, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593017628, 'issue_id': 2790007091, 'author': 'fw-bot', 'body': '@pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.\n\nstdout:\n```\nAuto-merging odoo/tests/common.py\nCONFLICT (content): Merge conflict in odoo/tests/common.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 31, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593100863, 'issue_id': 2790007091, 'author': 'pparidans', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 15, 3, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:31:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193779.png)](https://mergebot.odoo.com/odoo/odoo/pull/193779)

fw-bot (Issue Creator) on (2025-01-15 14:31:17 UTC): @pparidans @xmo-odoo cherrypicking of pull request odoo/odoo#193696 failed.

stdout:
```
Auto-merging odoo/tests/common.py
CONFLICT (content): Merge conflict in odoo/tests/common.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pparidans on (2025-01-15 15:03:03 UTC): @robodoo r+

"
2790006426,pull_request,closed,,[FW][FIX] auth_ldap: add email on new res.partner,"Before this commit, when a new res.user is created after signing in with auth_ldap, there was no email on the linked res.partner, which may cause issues in modules such as helpdesk, where partner email is used to find related tickets.

res.users created through the form view will trigger the onchange which sets the 'email' = 'login', which does not happen when creating a user directly through the ORM.

This commit adds 'email' as a key which is returned by the method _map_ldap_attributes, which is used to create new partners with the correct email associated with the res.user login.

opw-4378487



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193495",fw-bot,2025-01-15 14:31:00+00:00,[],2025-02-06 19:42:57+00:00,2025-01-23 19:38:41+00:00,https://github.com/odoo/odoo/pull/193778,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2593016946, 'issue_id': 2790006426, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193778.png)](https://mergebot.odoo.com/odoo/odoo/pull/193778)', 'created_at': datetime.datetime(2025, 1, 15, 14, 31, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593016972, 'issue_id': 2790006426, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 31, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:31:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193778.png)](https://mergebot.odoo.com/odoo/odoo/pull/193778)

fw-bot (Issue Creator) on (2025-01-15 14:31:02 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2790005756,pull_request,closed,,[FW][FIX] mrp: unbuild uses incorrect move quantities,"Steps to reproduce:
Not reproducible in V16. However, in older versions, it was possible to have multiple finished_moves with different quantities (see https://github.com/odoo/odoo/pull/46718).

This fix ensures such issues are avoided in the future and also addresses potential problems for clients migrating from older versions.

Example:
Two finished_moves with different quantities.
Before the fix, both moves would be updated based
on the unbuild quantity, resulting in incorrect quantities. After the fix, the moves for unbuild will use only the move's quantity.

opw-4379204

Forward-Port-Of: odoo/odoo#191908",fw-bot,2025-01-15 14:30:43+00:00,[],2025-01-29 19:07:59+00:00,2025-01-15 18:55:58+00:00,https://github.com/odoo/odoo/pull/193777,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2593016320, 'issue_id': 2790005756, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193777.png)](https://mergebot.odoo.com/odoo/odoo/pull/193777)', 'created_at': datetime.datetime(2025, 1, 15, 14, 30, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593016345, 'issue_id': 2790005756, 'author': 'fw-bot', 'body': '@LouisGobert @clesgow cherrypicking of pull request odoo/odoo#191908 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_unbuild.py\nCONFLICT (content): Merge conflict in addons/mrp/models/mrp_unbuild.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 30, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593373993, 'issue_id': 2790005756, 'author': 'LouisGobert', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 16, 22, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:30:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193777.png)](https://mergebot.odoo.com/odoo/odoo/pull/193777)

fw-bot (Issue Creator) on (2025-01-15 14:30:45 UTC): @LouisGobert @clesgow cherrypicking of pull request odoo/odoo#191908 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_unbuild.py
CONFLICT (content): Merge conflict in addons/mrp/models/mrp_unbuild.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

LouisGobert on (2025-01-15 16:22:45 UTC): @robodoo r+

"
2789977541,pull_request,closed,,[FIX] point_of_sale: fix preparation receipt,"Product variant with creation type ""always"" would not be printer on the preparation receipt.

Steps to reproduce:
-------------------
* Create a product and add a variant with creation type ""always""
* Add a preparation printer to the point of sale
* Create a new order and add the product with the variant
* Validate the order and check the preparation receipt
> Observation: the product variant is not printed on the receipt

Why the fix:
------------
The product variant was not printed on the preparation receipt because the variant is added to the display name of the product and doesn't appear in the attribute list.

This fix also add the first test for the preparation receipt. This should be improved in the future to cover more cases.

opw-4450217",robinengels,2025-01-15 14:20:08+00:00,[],2025-02-04 17:05:12+00:00,2025-01-21 16:57:12+00:00,https://github.com/odoo/odoo/pull/193776,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2592982543, 'issue_id': 2789977541, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193776.png)](https://mergebot.odoo.com/odoo/odoo/pull/193776)', 'created_at': datetime.datetime(2025, 1, 15, 14, 20, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592996100, 'issue_id': 2789977541, 'author': 'robinengels', 'body': 'Before:\r\n![image](https://github.com/user-attachments/assets/d77e4257-ab2b-4474-a5f5-a02174d03f08)\r\nAfter:\r\n![after](https://github.com/user-attachments/assets/a41ee4e4-663d-4ba8-a754-be6c58b7dbb1)', 'created_at': datetime.datetime(2025, 1, 15, 14, 23, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604885656, 'issue_id': 2789977541, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 14, 27, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:20:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193776.png)](https://mergebot.odoo.com/odoo/odoo/pull/193776)

robinengels (Issue Creator) on (2025-01-15 14:23:18 UTC): Before:
![image](https://github.com/user-attachments/assets/d77e4257-ab2b-4474-a5f5-a02174d03f08)
After:
![after](https://github.com/user-attachments/assets/a41ee4e4-663d-4ba8-a754-be6c58b7dbb1)

caburj on (2025-01-21 14:27:30 UTC): robodoo r+

"
2789955156,pull_request,closed,,[FIX] test_http: call new_test_user in setUpClass,,Julien00859,2025-01-15 14:11:09+00:00,[],2025-01-29 15:42:31+00:00,2025-01-15 15:35:39+00:00,https://github.com/odoo/odoo/pull/193775,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592958963, 'issue_id': 2789955156, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193775.png)](https://mergebot.odoo.com/odoo/odoo/pull/193775)', 'created_at': datetime.datetime(2025, 1, 15, 14, 11, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592959517, 'issue_id': 2789955156, 'author': 'Julien00859', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 11, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592959618, 'issue_id': 2789955156, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 15, 14, 11, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:11:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193775.png)](https://mergebot.odoo.com/odoo/odoo/pull/193775)

Julien00859 (Issue Creator) on (2025-01-15 14:11:26 UTC): @robodoo rebase-ff r+

robodoo on (2025-01-15 14:11:29 UTC): Merge method set to rebase and fast-forward.

"
2789948285,pull_request,closed,,[FIX] website_payment: remove demo dependency,"The previous fix to make the test work without demo was broken. Using write directly seems to fix the issue, also set an email on the company as it is required by the test.

Runbot Error: 108437
",Williambraecky,2025-01-15 14:08:13+00:00,[],2025-02-03 13:39:15+00:00,2025-01-20 13:19:42+00:00,https://github.com/odoo/odoo/pull/193774,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592951971, 'issue_id': 2789948285, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193774.png)](https://mergebot.odoo.com/odoo/odoo/pull/193774)', 'created_at': datetime.datetime(2025, 1, 15, 14, 8, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:08:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193774.png)](https://mergebot.odoo.com/odoo/odoo/pull/193774)

"
2789942793,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 14:05:51+00:00,[],2025-01-30 06:26:38+00:00,2025-01-16 06:19:21+00:00,https://github.com/odoo/odoo/pull/193773,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592946416, 'issue_id': 2789942793, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193773.png)](https://mergebot.odoo.com/odoo/odoo/pull/193773)', 'created_at': datetime.datetime(2025, 1, 15, 14, 5, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592946439, 'issue_id': 2789942793, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 14, 5, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593046979, 'issue_id': 2789942793, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 14, 42, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 14:05:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193773.png)](https://mergebot.odoo.com/odoo/odoo/pull/193773)

fw-bot (Issue Creator) on (2025-01-15 14:05:53 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 14:42:49 UTC): @loouis-t @Ysoroko ci/runbot failed on this forward-port PR

"
2789923367,pull_request,closed,,[IMP] purchase_stock: show dropship address field even w/o locations,"'Deliver To' and 'Dropship Address' fields on the PO form are normally visible only if storage locations are enabled, which isn't really necessary. This commit removes that dependency.

Task ID: [4366974](https://www.odoo.com/odoo/project/966/tasks/4366974)
",lugr-odoo,2025-01-15 13:57:41+00:00,[],2025-02-06 19:38:58+00:00,2025-02-06 19:38:20+00:00,https://github.com/odoo/odoo/pull/193772,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2592926785, 'issue_id': 2789923367, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193772.png)](https://mergebot.odoo.com/odoo/odoo/pull/193772)', 'created_at': datetime.datetime(2025, 1, 15, 13, 57, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609405247, 'issue_id': 2789923367, 'author': 'amoyaux', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 13, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609412265, 'issue_id': 2789923367, 'author': 'amoyaux', 'body': 'robodoo r- I will wait for the test. Why did you remove the invisible condition?', 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609412392, 'issue_id': 2789923367, 'author': 'robodoo', 'body': ""@amoyaux unknown command 'I'.\n\nFor your own safety I've ignored *everything in your entire comment*.\n\nCurrently available commands:\n\n|command||\n|-|-|\n|`help`|displays this help|\n|`r(eview)-`|removes approval of a previously approved PR, if the PR is staged the staging will be cancelled|\n|`fw=no`|does not forward-port this PR|\n|`fw=default`|forward-ports this PR normally|\n|`fw=skipci`|does not wait for a forward-port's statuses to succeed before creating the next one|\n|`up to <branch>`|only ports this PR forward to the specified branch (included)|\n|`merge`|integrate the PR with a simple merge commit, using the PR description as message|\n|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|\n|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|\n|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|\n|`delegate+`|grants approval rights to the PR author|\n|`delegate=<...>`|grants approval rights on this PR to the specified github users|\n|`default`|stages the PR normally|\n|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|\n|`alone`|stages this PR only with other PRs of the same priority|\n|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|\n|`override=<...>`|marks overridable statuses as successful|\n|`check`|fetches or refreshes PR metadata, resets mergebot state|\n\nNote: this help text is dynamic and will change with the state of the PR."", 'created_at': datetime.datetime(2025, 1, 23, 10, 16, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609494047, 'issue_id': 2789923367, 'author': 'robodoo', 'body': ""@lugr-odoo @amoyaux 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 23, 10, 53, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609712408, 'issue_id': 2789923367, 'author': 'lugr-odoo', 'body': ""My understanding is that `default_location_dest_id_usage` doesn't make sense in absence of storage locations, so it will stay invisible indefinitely if that group is toggled off. I left the required field in because it's still relevant with storage locations. Unless I'm misunderstanding something."", 'created_at': datetime.datetime(2025, 1, 23, 12, 41, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2623873499, 'issue_id': 2789923367, 'author': 'lugr-odoo', 'body': 'I put it back in and upon further testing, it appears to work fine.', 'created_at': datetime.datetime(2025, 1, 30, 8, 49, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637304672, 'issue_id': 2789923367, 'author': 'clesgow', 'body': 'Hello, can you rebase your branch? The `ci/upgrade_enterprise` is most probably failing due to that. Thanks!', 'created_at': datetime.datetime(2025, 2, 5, 15, 49, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639648883, 'issue_id': 2789923367, 'author': 'lugr-odoo', 'body': 'I just did so. Thanks for pointing it out.', 'created_at': datetime.datetime(2025, 2, 6, 12, 9, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640318698, 'issue_id': 2789923367, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 16, 23, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:57:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193772.png)](https://mergebot.odoo.com/odoo/odoo/pull/193772)

amoyaux on (2025-01-23 10:13:33 UTC): robodoo r+

amoyaux on (2025-01-23 10:16:43 UTC): robodoo r- I will wait for the test. Why did you remove the invisible condition?

robodoo on (2025-01-23 10:16:47 UTC): @amoyaux unknown command 'I'.

For your own safety I've ignored *everything in your entire comment*.

Currently available commands:

|command||
|-|-|
|`help`|displays this help|
|`r(eview)-`|removes approval of a previously approved PR, if the PR is staged the staging will be cancelled|
|`fw=no`|does not forward-port this PR|
|`fw=default`|forward-ports this PR normally|
|`fw=skipci`|does not wait for a forward-port's statuses to succeed before creating the next one|
|`up to <branch>`|only ports this PR forward to the specified branch (included)|
|`merge`|integrate the PR with a simple merge commit, using the PR description as message|
|`rebase-merge`|rebases the PR on top of the target branch the integrates with a merge commit, using the PR description as message|
|`rebase-ff`|rebases the PR on top of the target branch, then fast-forwards|
|`squash`|squashes the PR as a single commit on the target branch, using the PR description as message|
|`delegate+`|grants approval rights to the PR author|
|`delegate=<...>`|grants approval rights on this PR to the specified github users|
|`default`|stages the PR normally|
|`priority`|tries to stage this PR first, then adds `default` PRs if the staging has room|
|`alone`|stages this PR only with other PRs of the same priority|
|`cancel=staging`|automatically cancels the current staging when this PR becomes ready|
|`override=<...>`|marks overridable statuses as successful|
|`check`|fetches or refreshes PR metadata, resets mergebot state|

Note: this help text is dynamic and will change with the state of the PR.

robodoo on (2025-01-23 10:53:51 UTC): @lugr-odoo @amoyaux 'ci/upgrade_enterprise' failed on this reviewed PR.

lugr-odoo (Issue Creator) on (2025-01-23 12:41:32 UTC): My understanding is that `default_location_dest_id_usage` doesn't make sense in absence of storage locations, so it will stay invisible indefinitely if that group is toggled off. I left the required field in because it's still relevant with storage locations. Unless I'm misunderstanding something.

lugr-odoo (Issue Creator) on (2025-01-30 08:49:51 UTC): I put it back in and upon further testing, it appears to work fine.

clesgow on (2025-02-05 15:49:21 UTC): Hello, can you rebase your branch? The `ci/upgrade_enterprise` is most probably failing due to that. Thanks!

lugr-odoo (Issue Creator) on (2025-02-06 12:09:16 UTC): I just did so. Thanks for pointing it out.

Whenrow on (2025-02-06 16:23:01 UTC): robodoo r+

"
2789914952,pull_request,closed,,[FW][FIX] purchase_stock: report incoterm layout,"Since the [document layout redesign](odoo/odoo@e19efd2f54014425b14defd6015b9a71c1142385), the incoterms in rfq are wrongly displayed.

This is due to the dynamic title which breaks the xpath, xpathing the incoterms in the `<h2>` instead of after it.

This commit fixes the xpath to properly display the incoterms.

opw-4380886
task-4453695 

<h3>Steps to reproduce</h3>

- Choose any document layout
- Have purchase & Inventory installed
- Create a request for quotation
    - In the ""other information"" tab, choose an incoterm
- Print the RFQ

| Issue | Fix |
|--------|--------|
| ![image](https://github.com/user-attachments/assets/4883af55-3a9a-43a5-88ba-be86cf19bb45) | ![image](https://github.com/user-attachments/assets/f8b9e22e-55cd-4341-9db4-2394cfc8f1e5) | 


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192503",fw-bot,2025-01-15 13:54:25+00:00,[],2025-01-29 23:03:32+00:00,2025-01-15 22:14:18+00:00,https://github.com/odoo/odoo/pull/193771,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592919107, 'issue_id': 2789914952, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193771.png)](https://mergebot.odoo.com/odoo/odoo/pull/193771)', 'created_at': datetime.datetime(2025, 1, 15, 13, 54, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592919136, 'issue_id': 2789914952, 'author': 'fw-bot', 'body': '@mano-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193742\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 54, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592936955, 'issue_id': 2789914952, 'author': 'clesgow', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 1, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593046821, 'issue_id': 2789914952, 'author': 'robodoo', 'body': ""@mano-odoo @clesgow 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 14, 42, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:54:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193771.png)](https://mergebot.odoo.com/odoo/odoo/pull/193771)

fw-bot (Issue Creator) on (2025-01-15 13:54:27 UTC): @mano-odoo @clesgow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193742

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

clesgow on (2025-01-15 14:01:57 UTC): @robodoo r+

robodoo on (2025-01-15 14:42:46 UTC): @mano-odoo @clesgow 'ci/runbot' failed on this reviewed PR.

"
2789913801,pull_request,closed,,[FIX] stock_account: fix standard_price on _svl_replenish_stock,"## How to reproduce:
- Create product P, tracked by lot, cost_method = 'standard', standard_price = 1
- Create quant with lot L1, 10 units on hand
- Set L1 standard_price = 2
- Set lot_valuated to True => lot value_svl is $10 for 10 units (product.standard_price * quantity)
- Set L1 quantity to 0 => lot value_svl is $-10 for 0 units

## Issue
When the svl is replenished for the lot, the product.standard_price is used. However, the lot.standard_price is not updated; hence, when the stock is emptied, and the lot.standard_price is used, a discrepancy is created.

## Solution
When the svl is replenished, we u se the product.standard_price and update the lot.standard_price

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",DavidFesquet,2025-01-15 13:53:53+00:00,[],2025-02-06 11:46:54+00:00,2025-01-23 11:40:47+00:00,https://github.com/odoo/odoo/pull/193770,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592917954, 'issue_id': 2789913801, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193770.png)](https://mergebot.odoo.com/odoo/odoo/pull/193770)', 'created_at': datetime.datetime(2025, 1, 15, 13, 53, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606920167, 'issue_id': 2789913801, 'author': 'DavidFesquet', 'body': ""@Whenrow Thank you for your review !\r\n\r\nI have made the required modifications.\r\nI extracted the logic to a new method I called `_update_lots_standard_price`, and this method is called in the `write`, not in `_svl_replenish_stock`.\r\n\r\nI made this change because, after some thoughts, the lot.standard_price should be updated even if we do not currently have a quant for it.\r\nFor example, if we are in standard cost method, and there is a newly created lot on a Receipt, and just before the receipt is validated, we enable the lot valuation, then the lot standard_price would have been used, but it would be 0.\r\n\r\nSo I had to update all the product's lots, not just the one on hands, so I needed to search them.\r\nWith this new behavior, I didn't feel that `_svl_replenish_stock` was a correct context to update the standard_price, hence the new method."", 'created_at': datetime.datetime(2025, 1, 22, 10, 56, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609158340, 'issue_id': 2789913801, 'author': 'DavidFesquet', 'body': ""@Whenrow \r\nI have created another PR in master to hide the valuation fields on lots if lot_valuated is False: https://github.com/odoo/odoo/pull/194793\r\n\r\nIdeally, I would have like to create it in this PR, it would have prevented users to set a standard_price on lots before using lot_valuated, but I can't access the value of product_id.lot_valuated from the StockLot form view... I had to create a related field, hence, I did it in master"", 'created_at': datetime.datetime(2025, 1, 23, 8, 33, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609349883, 'issue_id': 2789913801, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 9, 49, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:53:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193770.png)](https://mergebot.odoo.com/odoo/odoo/pull/193770)

DavidFesquet (Issue Creator) on (2025-01-22 10:56:38 UTC): @Whenrow Thank you for your review !

I have made the required modifications.
I extracted the logic to a new method I called `_update_lots_standard_price`, and this method is called in the `write`, not in `_svl_replenish_stock`.

I made this change because, after some thoughts, the lot.standard_price should be updated even if we do not currently have a quant for it.
For example, if we are in standard cost method, and there is a newly created lot on a Receipt, and just before the receipt is validated, we enable the lot valuation, then the lot standard_price would have been used, but it would be 0.

So I had to update all the product's lots, not just the one on hands, so I needed to search them.
With this new behavior, I didn't feel that `_svl_replenish_stock` was a correct context to update the standard_price, hence the new method.

DavidFesquet (Issue Creator) on (2025-01-23 08:33:08 UTC): @Whenrow 
I have created another PR in master to hide the valuation fields on lots if lot_valuated is False: https://github.com/odoo/odoo/pull/194793

Ideally, I would have like to create it in this PR, it would have prevented users to set a standard_price on lots before using lot_valuated, but I can't access the value of product_id.lot_valuated from the StockLot form view... I had to create a related field, hence, I did it in master

Whenrow on (2025-01-23 09:49:05 UTC): robodoo r+

"
2789907221,pull_request,closed,,[FIX] hr_recruitment: fix candidate/application link and constraint,"Before this commit, the creation of an applicant though `message_new`, It would check for existing candidates but not for the company; however, if the company is different, an error would be raised upon applicant creation and prevent it.

This commit adds the company to the candidate check to avoid raising the constraint, and adjusts the said constraint so that it allows linking to candidates with no company set.",Bertrand2,2025-01-15 13:50:59+00:00,[],2025-01-30 13:08:03+00:00,2025-01-16 12:58:07+00:00,https://github.com/odoo/odoo/pull/193769,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592911423, 'issue_id': 2789907221, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193769.png)](https://mergebot.odoo.com/odoo/odoo/pull/193769)', 'created_at': datetime.datetime(2025, 1, 15, 13, 51, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595039471, 'issue_id': 2789907221, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 46, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:51:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193769.png)](https://mergebot.odoo.com/odoo/odoo/pull/193769)

tivisse on (2025-01-16 09:46:51 UTC): @robodoo r+

"
2789906904,pull_request,closed,,[FW][FIX] base_import: stop importing when everything has been imported,"Versions
--------
- 17.0+

Steps
-----
1. Create a pricelist with 200 price rules;
2. export pricelist to xlsx;
3. delete original pricelist;
4. import pricelist, setting batch size to 100.

Test files ready for import:
- [200_products.xlsx](https://github.com/user-attachments/files/17848187/200_products.xlsx)
- [200_pricelist_rules.xlsx](https://github.com/user-attachments/files/17848188/200_pricelist_rules.xlsx)

Issue
-----
Pricelist is imported with 400 price rules.

Cause
-----
The back-end signals there's nothing left to import by having `nextrow` be falsy[^1]. The front-end ignores this, and continues looping until it's taken as many steps as it initially planned.

The upfront `totalSteps` calculation is too high when an imported record has a number of nested relational records that's larger than the batch size.

Solution
--------
If the ORM returns a falsy `nextrow` value, call `stopImport`.

opw-4164056

[^1]: see note on f58368210c9c

Forward-Port-Of: odoo/odoo#188092",fw-bot,2025-01-15 13:50:50+00:00,[],2025-01-30 13:45:51+00:00,2025-01-16 13:23:59+00:00,https://github.com/odoo/odoo/pull/193768,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592911051, 'issue_id': 2789906904, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193768.png)](https://mergebot.odoo.com/odoo/odoo/pull/193768)', 'created_at': datetime.datetime(2025, 1, 15, 13, 50, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592911077, 'issue_id': 2789906904, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 50, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592983766, 'issue_id': 2789906904, 'author': 'fw-bot', 'body': '@lvsz @iucapad ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 14, 20, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595282753, 'issue_id': 2789906904, 'author': 'fw-bot', 'body': ""@lvsz @iucapad child PR odoo/odoo#193817 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 16, 11, 33, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595283637, 'issue_id': 2789906904, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 34, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:50:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193768.png)](https://mergebot.odoo.com/odoo/odoo/pull/193768)

fw-bot (Issue Creator) on (2025-01-15 13:50:52 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 14:20:25 UTC): @lvsz @iucapad ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 11:33:59 UTC): @lvsz @iucapad child PR odoo/odoo#193817 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

lvsz on (2025-01-16 11:34:29 UTC): robodoo r+

"
2789906323,pull_request,closed,,[FW][FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193531",fw-bot,2025-01-15 13:50:34+00:00,[],2025-01-30 12:41:15+00:00,2025-01-16 11:55:43+00:00,https://github.com/odoo/odoo/pull/193767,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592910503, 'issue_id': 2789906323, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193767.png)](https://mergebot.odoo.com/odoo/odoo/pull/193767)', 'created_at': datetime.datetime(2025, 1, 15, 13, 50, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592910525, 'issue_id': 2789906323, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 50, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:50:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193767.png)](https://mergebot.odoo.com/odoo/odoo/pull/193767)

fw-bot (Issue Creator) on (2025-01-15 13:50:37 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789903595,pull_request,closed,,[IMP] hr_work_entry: make work entry type not updatable,"Work entry type data should not be updatable as it shoud not be erased at each migration/upgrade.

This commits fixes this by changing all work entry type data to noupdate true.

task-4479965
",romaincarlier4,2025-01-15 13:49:32+00:00,[],2025-02-04 08:53:41+00:00,2025-02-04 06:26:27+00:00,https://github.com/odoo/odoo/pull/193766,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2592908235, 'issue_id': 2789903595, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193766.png)](https://mergebot.odoo.com/odoo/odoo/pull/193766)', 'created_at': datetime.datetime(2025, 1, 15, 13, 49, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630382571, 'issue_id': 2789903595, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 9, 19, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630386638, 'issue_id': 2789903595, 'author': 'robodoo', 'body': ""@romaincarlier4 @tivisse 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 3, 9, 20, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630395031, 'issue_id': 2789903595, 'author': 'robodoo', 'body': ""@romaincarlier4 @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 3, 9, 24, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630438278, 'issue_id': 2789903595, 'author': 'robodoo', 'body': ""@romaincarlier4 @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 3, 9, 43, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630618411, 'issue_id': 2789903595, 'author': 'robodoo', 'body': '@romaincarlier4 @tivisse linked pull request(s) odoo/upgrade#7071 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 2, 3, 11, 0, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:49:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193766.png)](https://mergebot.odoo.com/odoo/odoo/pull/193766)

tivisse on (2025-02-03 09:19:13 UTC): @robodoo r+

robodoo on (2025-02-03 09:20:54 UTC): @romaincarlier4 @tivisse 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-02-03 09:24:33 UTC): @romaincarlier4 @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-02-03 09:43:20 UTC): @romaincarlier4 @tivisse 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-02-03 11:00:06 UTC): @romaincarlier4 @tivisse linked pull request(s) odoo/upgrade#7071 not ready. Linked PRs are not staged until all of them are ready.

"
2789868541,pull_request,open,,[IMP] purchase_requisition: do not mangle lines of confirmed PO,"The user could create a PO and forget to assign it to a blanket order. They can still do so after the fact, but doing so will mess with the existing lines of the order, which is undesirable if the order was confirmed.

This commit simply prevents the automatic creation of PO lines on change to the purchase agreement field unless the order is in draft status.

Task ID: [4461281](https://www.odoo.com/odoo/project/966/tasks/4461281)
",lugr-odoo,2025-01-15 13:34:42+00:00,[],2025-01-28 08:34:04+00:00,,https://github.com/odoo/odoo/pull/193765,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592874152, 'issue_id': 2789868541, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193765.png)](https://mergebot.odoo.com/odoo/odoo/pull/193765)', 'created_at': datetime.datetime(2025, 1, 15, 13, 34, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:34:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193765.png)](https://mergebot.odoo.com/odoo/odoo/pull/193765)

"
2789857560,pull_request,closed,,[FIX] web: Fix navigation test hotkeys issue,"Fixes test broken by: be23ed0

https://runbot.odoo.com/odoo/runbot.build.error/109595

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",BastienFafchamps,2025-01-15 13:29:58+00:00,[],2025-01-30 13:45:50+00:00,2025-01-16 13:23:55+00:00,https://github.com/odoo/odoo/pull/193764,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592863155, 'issue_id': 2789857560, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193764.png)](https://mergebot.odoo.com/odoo/odoo/pull/193764)', 'created_at': datetime.datetime(2025, 1, 15, 13, 30, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595132814, 'issue_id': 2789857560, 'author': 'aab-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 10, 23, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:30:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193764.png)](https://mergebot.odoo.com/odoo/odoo/pull/193764)

aab-odoo on (2025-01-16 10:23:28 UTC): robodoo r+

"
2789857043,pull_request,open,,[REF] pos_viva_com: adapt from Viva Wallet to Viva.com,"As requested by Viva.com teams, we adapted Viva Wallet references to Viva.com to comply to their new branding.

Task: 4484901
",loouis-t,2025-01-15 13:29:43+00:00,[],2025-01-17 12:15:51+00:00,,https://github.com/odoo/odoo/pull/193763,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592862658, 'issue_id': 2789857043, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193763.png)](https://mergebot.odoo.com/odoo/odoo/pull/193763)', 'created_at': datetime.datetime(2025, 1, 15, 13, 29, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594718599, 'issue_id': 2789857043, 'author': 'qle-odoo', 'body': ""Maybe it's not needed to change the technical fields or classname.\r\nFor example to avoid to create upgrade script and somes bugs."", 'created_at': datetime.datetime(2025, 1, 16, 7, 30, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594721663, 'issue_id': 2789857043, 'author': 'qle-odoo', 'body': ""And it this case it's better to create separate commit.\r\nFor translation, business code and string description.\r\nThink that in the future if you blame the commit to find a change in the business code you have to go through a diff ~1500 lines"", 'created_at': datetime.datetime(2025, 1, 16, 7, 32, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594730280, 'issue_id': 2789857043, 'author': 'qle-odoo', 'body': '...\r\nwhy translation in master ?', 'created_at': datetime.datetime(2025, 1, 16, 7, 38, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594787126, 'issue_id': 2789857043, 'author': 'loouis-t', 'body': ""> Maybe it's not needed to change the technical fields or classname. For example to avoid to create upgrade script and somes bugs.\r\n\r\nAs I already wrote the upgrade script, I guess it's better for the future that everything is harmonized."", 'created_at': datetime.datetime(2025, 1, 16, 8, 13, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595177720, 'issue_id': 2789857043, 'author': 'loouis-t', 'body': ""Hello, @odoo/rd-security, could you override this PR as it's only module/methods/variables renaming from Viva Wallet to Viva.com please?"", 'created_at': datetime.datetime(2025, 1, 16, 10, 43, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595211126, 'issue_id': 2789857043, 'author': 'ticodoo', 'body': ""> ... why translation in master ?\r\n\r\nIndeed, since Russian is now activated on Transifex, all of the changes you've done to the ru.po files will be overridden (i.e. any translation improvements need to be done within Transifex). The pots files are all re-exported during the freeze as well, so your base.pot file change is also not necessary (but it is good that you renamed the old one since we don't auto-delete obsolete pot files)\r\n\r\ncc: @Ysoroko"", 'created_at': datetime.datetime(2025, 1, 16, 10, 58, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:29:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193763.png)](https://mergebot.odoo.com/odoo/odoo/pull/193763)

qle-odoo on (2025-01-16 07:30:14 UTC): Maybe it's not needed to change the technical fields or classname.
For example to avoid to create upgrade script and somes bugs.

qle-odoo on (2025-01-16 07:32:26 UTC): And it this case it's better to create separate commit.
For translation, business code and string description.
Think that in the future if you blame the commit to find a change in the business code you have to go through a diff ~1500 lines

qle-odoo on (2025-01-16 07:38:16 UTC): ...
why translation in master ?

loouis-t (Issue Creator) on (2025-01-16 08:13:14 UTC): As I already wrote the upgrade script, I guess it's better for the future that everything is harmonized.

loouis-t (Issue Creator) on (2025-01-16 10:43:17 UTC): Hello, @odoo/rd-security, could you override this PR as it's only module/methods/variables renaming from Viva Wallet to Viva.com please?

ticodoo on (2025-01-16 10:58:07 UTC): Indeed, since Russian is now activated on Transifex, all of the changes you've done to the ru.po files will be overridden (i.e. any translation improvements need to be done within Transifex). The pots files are all re-exported during the freeze as well, so your base.pot file change is also not necessary (but it is good that you renamed the old one since we don't auto-delete obsolete pot files)

cc: @Ysoroko

"
2789844347,pull_request,closed,,"[FIX] mail: redirect to record ""nice"" url from mail","Commit c63d14a0485a553b74a8457aee158384e9ae6d3f introduced new nicer urls to get to Odoo. Commit 5776b574b3aba190c54b2e4974ce514d9b0bec2a adapted the /mail/view controller for it, allowing people clicking on a link to a record in a mail to be redirected to a nice new URL.

Although one case was missing: when the model doesn't contain dots, the string is considered an action's path. So, when opening a record from a mail, there was a crash in odoo because the action could not be found.

After this commit, there is no crash, and the record is opened correctly with a nice url.

see router.js: heuristics to discrimate a model name from an action path is the presence of dots, or the prefix m- for models

opw-4475237

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kebeclibre,2025-01-15 13:24:09+00:00,[],2025-01-30 05:46:41+00:00,2025-01-16 05:03:08+00:00,https://github.com/odoo/odoo/pull/193762,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2592850429, 'issue_id': 2789844347, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193762.png)](https://mergebot.odoo.com/odoo/odoo/pull/193762)', 'created_at': datetime.datetime(2025, 1, 15, 13, 24, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:24:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193762.png)](https://mergebot.odoo.com/odoo/odoo/pull/193762)

"
2789834214,pull_request,closed,,[FIX] web: Fix navigation test hotkeys issue,"Fixes test broken by: be23ed0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",BastienFafchamps,2025-01-15 13:19:44+00:00,[],2025-01-15 13:30:02+00:00,2025-01-15 13:30:02+00:00,https://github.com/odoo/odoo/pull/193761,[],"[{'comment_id': 2592840304, 'issue_id': 2789834214, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193761.png)](https://mergebot.odoo.com/odoo/odoo/pull/193761)', 'created_at': datetime.datetime(2025, 1, 15, 13, 19, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:19:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193761.png)](https://mergebot.odoo.com/odoo/odoo/pull/193761)

"
2789830511,pull_request,closed,,[FIX] account: correct get fields from company,"We can only attempt to get fields from `res.company` model.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",aj-fuentes,2025-01-15 13:18:00+00:00,[],2025-01-30 06:26:35+00:00,2025-01-16 06:19:19+00:00,https://github.com/odoo/odoo/pull/193760,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592836616, 'issue_id': 2789830511, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193760.png)](https://mergebot.odoo.com/odoo/odoo/pull/193760)', 'created_at': datetime.datetime(2025, 1, 15, 13, 18, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592977141, 'issue_id': 2789830511, 'author': 'william-andre', 'body': 'Sorry, I forgot to reraise when reverting manually the fix :facepalm: \r\n\r\nI believe that just ignoring the value is fine (`values[fname] = False`) then instead of reraising, as long as an error/warning is logged', 'created_at': datetime.datetime(2025, 1, 15, 14, 18, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593056646, 'issue_id': 2789830511, 'author': 'william-andre', 'body': 'I started the l10n build too to avoid having issues during the staging', 'created_at': datetime.datetime(2025, 1, 15, 14, 46, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:18:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193760.png)](https://mergebot.odoo.com/odoo/odoo/pull/193760)

william-andre on (2025-01-15 14:18:32 UTC): Sorry, I forgot to reraise when reverting manually the fix :facepalm: 

I believe that just ignoring the value is fine (`values[fname] = False`) then instead of reraising, as long as an error/warning is logged

william-andre on (2025-01-15 14:46:21 UTC): I started the l10n build too to avoid having issues during the staging

"
2789828740,pull_request,closed,,[FW][FIX] project: project grouped by stages now respects the pagination,"Steps to reproduce
==================

- Open any project
- Create many project stages (80+)
- Switch to the list view
- Group by stage
- Switch to to next page => The pager keeps increasing

Cause of the issue
==================

`stage_id` has a group_expand: `_read_group_stage_ids`

This method is used to include empty stages in the result for the kanban view, so that we can drag tasks to an empty stage.

Solution
========

Add a context key `project_kanban` and only add empty stages in that case.

opw-4408061

Forward-Port-Of: odoo/odoo#193488
Forward-Port-Of: odoo/odoo#192492",fw-bot,2025-01-15 13:17:10+00:00,[],2025-01-30 06:26:37+00:00,2025-01-16 06:19:21+00:00,https://github.com/odoo/odoo/pull/193759,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592834775, 'issue_id': 2789828740, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193759.png)](https://mergebot.odoo.com/odoo/odoo/pull/193759)', 'created_at': datetime.datetime(2025, 1, 15, 13, 17, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592834799, 'issue_id': 2789828740, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 17, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:17:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193759.png)](https://mergebot.odoo.com/odoo/odoo/pull/193759)

fw-bot (Issue Creator) on (2025-01-15 13:17:12 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789828179,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:16:54+00:00,[],2025-01-30 01:00:12+00:00,2025-01-16 00:46:28+00:00,https://github.com/odoo/odoo/pull/193758,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592834187, 'issue_id': 2789828179, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193758.png)](https://mergebot.odoo.com/odoo/odoo/pull/193758)', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592834211, 'issue_id': 2789828179, 'author': 'fw-bot', 'body': '@rfr-odoo @polymorphe57 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193757\n* odoo/odoo#193756\n* odoo/odoo#193755\n* odoo/odoo#193754\n* odoo/odoo#193753\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592857802, 'issue_id': 2789828179, 'author': 'Polymorphe57', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 13, 27, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:16:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193758.png)](https://mergebot.odoo.com/odoo/odoo/pull/193758)

fw-bot (Issue Creator) on (2025-01-15 13:16:56 UTC): @rfr-odoo @polymorphe57 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193757
* odoo/odoo#193756
* odoo/odoo#193755
* odoo/odoo#193754
* odoo/odoo#193753

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Polymorphe57 on (2025-01-15 13:27:27 UTC): @robodoo r+

"
2789827615,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:16:38+00:00,[],2025-01-29 18:21:53+00:00,2025-01-15 18:18:01+00:00,https://github.com/odoo/odoo/pull/193757,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592833610, 'issue_id': 2789827615, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193757.png)](https://mergebot.odoo.com/odoo/odoo/pull/193757)', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592833636, 'issue_id': 2789827615, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592936959, 'issue_id': 2789827615, 'author': 'robodoo', 'body': ""@rfr-odoo @polymorphe57 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 14, 1, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:16:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193757.png)](https://mergebot.odoo.com/odoo/odoo/pull/193757)

fw-bot (Issue Creator) on (2025-01-15 13:16:40 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-15 14:01:57 UTC): @rfr-odoo @polymorphe57 'ci/runbot' failed on this reviewed PR.

"
2789827057,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:16:22+00:00,[],2025-01-30 03:30:07+00:00,2025-01-16 03:25:36+00:00,https://github.com/odoo/odoo/pull/193756,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592833008, 'issue_id': 2789827057, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193756.png)](https://mergebot.odoo.com/odoo/odoo/pull/193756)', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592833041, 'issue_id': 2789827057, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:16:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193756.png)](https://mergebot.odoo.com/odoo/odoo/pull/193756)

fw-bot (Issue Creator) on (2025-01-15 13:16:24 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789826521,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:16:07+00:00,[],2025-01-29 17:35:52+00:00,2025-01-15 17:12:52+00:00,https://github.com/odoo/odoo/pull/193755,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592832444, 'issue_id': 2789826521, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193755.png)](https://mergebot.odoo.com/odoo/odoo/pull/193755)', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592832471, 'issue_id': 2789826521, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 16, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:16:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193755.png)](https://mergebot.odoo.com/odoo/odoo/pull/193755)

fw-bot (Issue Creator) on (2025-01-15 13:16:09 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789825932,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:15:51+00:00,[],2025-01-29 17:35:58+00:00,2025-01-15 17:25:47+00:00,https://github.com/odoo/odoo/pull/193754,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592831847, 'issue_id': 2789825932, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193754.png)](https://mergebot.odoo.com/odoo/odoo/pull/193754)', 'created_at': datetime.datetime(2025, 1, 15, 13, 15, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592831871, 'issue_id': 2789825932, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 15, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:15:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193754.png)](https://mergebot.odoo.com/odoo/odoo/pull/193754)

fw-bot (Issue Creator) on (2025-01-15 13:15:53 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789825334,pull_request,closed,,[FW][IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193722",fw-bot,2025-01-15 13:15:35+00:00,[],2025-01-29 19:07:57+00:00,2025-01-15 18:55:40+00:00,https://github.com/odoo/odoo/pull/193753,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592831290, 'issue_id': 2789825334, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193753.png)](https://mergebot.odoo.com/odoo/odoo/pull/193753)', 'created_at': datetime.datetime(2025, 1, 15, 13, 15, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592831307, 'issue_id': 2789825334, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 15, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:15:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193753.png)](https://mergebot.odoo.com/odoo/odoo/pull/193753)

fw-bot (Issue Creator) on (2025-01-15 13:15:37 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789816987,pull_request,closed,,[IMP] cli: allow to bypass obfuscate confirmation (for scripts),"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lade-odoo,2025-01-15 13:11:35+00:00,[],2025-01-31 13:22:50+00:00,2025-01-17 13:08:38+00:00,https://github.com/odoo/odoo/pull/193752,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592823069, 'issue_id': 2789816987, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193752.png)](https://mergebot.odoo.com/odoo/odoo/pull/193752)', 'created_at': datetime.datetime(2025, 1, 15, 13, 11, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598055397, 'issue_id': 2789816987, 'author': 'amigrave', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 56, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:11:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193752.png)](https://mergebot.odoo.com/odoo/odoo/pull/193752)

amigrave on (2025-01-17 10:56:48 UTC): @robodoo r+

"
2789815196,pull_request,closed,,[FW][FIX] website_sale: adapt checkout if delivery address is disabled,"Steps to reproduce:
1) Go to website settings and disable 'Shipping address'
2) Add to cart deliverable product and go to checkout
3) See the broken UI

This PR adapts UI to the setting of disabling delivery address.

opw-4367079

Forward-Port-Of: odoo/odoo#191180",fw-bot,2025-01-15 13:10:46+00:00,[],2025-01-30 12:41:40+00:00,2025-01-16 12:29:34+00:00,https://github.com/odoo/odoo/pull/193751,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2592821054, 'issue_id': 2789815196, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193751.png)](https://mergebot.odoo.com/odoo/odoo/pull/193751)', 'created_at': datetime.datetime(2025, 1, 15, 13, 10, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592821142, 'issue_id': 2789815196, 'author': 'fw-bot', 'body': '@vchu-odoo cherrypicking of pull request odoo/odoo#191180 failed.\n\nstdout:\n```\nAuto-merging addons/website_sale/views/templates.xml\nCONFLICT (content): Merge conflict in addons/website_sale/views/templates.xml\nAuto-merging addons/website_sale_mondialrelay/static/src/js/checkout.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 10, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595098503, 'issue_id': 2789815196, 'author': 'vchu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 10, 7, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:10:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193751.png)](https://mergebot.odoo.com/odoo/odoo/pull/193751)

fw-bot (Issue Creator) on (2025-01-15 13:10:49 UTC): @vchu-odoo cherrypicking of pull request odoo/odoo#191180 failed.

stdout:
```
Auto-merging addons/website_sale/views/templates.xml
CONFLICT (content): Merge conflict in addons/website_sale/views/templates.xml
Auto-merging addons/website_sale_mondialrelay/static/src/js/checkout.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vchu-odoo on (2025-01-16 10:07:53 UTC): @robodoo r+

"
2789810712,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193571
Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-15 13:08:50+00:00,[],2025-01-31 10:24:46+00:00,2025-01-17 10:03:19+00:00,https://github.com/odoo/odoo/pull/193750,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592816689, 'issue_id': 2789810712, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193750.png)](https://mergebot.odoo.com/odoo/odoo/pull/193750)', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592816777, 'issue_id': 2789810712, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595150314, 'issue_id': 2789810712, 'author': 'robodoo', 'body': '@maxthewhale @caburj staging failed: ci/runbot on 2748fbab2954977f54cfdddf1c1e5814d73d198d (view more at https://runbot.odoo.com/runbot/build/73447537)', 'created_at': datetime.datetime(2025, 1, 16, 10, 31, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597277784, 'issue_id': 2789810712, 'author': 'fw-bot', 'body': '@maxthewhale @caburj this forward port of odoo/odoo#193358 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 0, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597698582, 'issue_id': 2789810712, 'author': 'MaxTheWhale', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 8, 34, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:08:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193750.png)](https://mergebot.odoo.com/odoo/odoo/pull/193750)

fw-bot (Issue Creator) on (2025-01-15 13:08:54 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-16 10:31:30 UTC): @maxthewhale @caburj staging failed: ci/runbot on 2748fbab2954977f54cfdddf1c1e5814d73d198d (view more at https://runbot.odoo.com/runbot/build/73447537)

fw-bot (Issue Creator) on (2025-01-17 02:00:46 UTC): @maxthewhale @caburj this forward port of odoo/odoo#193358 is awaiting action (not merged or closed).

MaxTheWhale on (2025-01-17 08:34:15 UTC): @robodoo retry

"
2789809864,pull_request,closed,,[FW][FIX] spreadsheet_dashboard_purchase*: wrong scoreboard data,"* = stock

* PROPBLEM: when viewing purchase or vendor dashboard (under logistic section) , viewing the scoreboard for purchased or order it calculate all record from purchase.report but when clicking on it, redirect to view of 'purchase order' only which is wrong compare to the number display on the scoreboard
* SOLUTION: This commit fix by edit the domain of related pivot which the scoreboard use to display data to the domain having state in either Purchase or Done

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193640
Forward-Port-Of: odoo/odoo#191985",fw-bot,2025-01-15 13:08:25+00:00,[],2025-01-17 08:31:54+00:00,2025-01-17 08:31:07+00:00,https://github.com/odoo/odoo/pull/193749,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2592816205, 'issue_id': 2789809864, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193749.png)](https://mergebot.odoo.com/odoo/odoo/pull/193749)', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592816222, 'issue_id': 2789809864, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow cherrypicking of pull request odoo/odoo#191985 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json deleted in 893b253644159a70d1916e3eaf25d1c8af4e92c3 and modified in 053e212a084189dfcd0a47d2620ac67adad586c4.  Version 053e212a084189dfcd0a47d2620ac67adad586c4 of addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json left in tree.\nCONFLICT (modify/delete): addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json deleted in 893b253644159a70d1916e3eaf25d1c8af4e92c3 and modified in 053e212a084189dfcd0a47d2620ac67adad586c4.  Version 053e212a084189dfcd0a47d2620ac67adad586c4 of addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313321, 'issue_id': 2789809864, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278203, 'issue_id': 2789809864, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597693123, 'issue_id': 2789809864, 'author': 'Whenrow', 'body': 'The fw-port chain continues on Enterprise repo here : https://github.com/odoo/enterprise/pull/77322', 'created_at': datetime.datetime(2025, 1, 17, 8, 31, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:08:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193749.png)](https://mergebot.odoo.com/odoo/odoo/pull/193749)

fw-bot (Issue Creator) on (2025-01-15 13:08:39 UTC): @duong77476-viindoo @Whenrow cherrypicking of pull request odoo/odoo#191985 failed.

stdout:
```
CONFLICT (modify/delete): addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json deleted in 893b253644159a70d1916e3eaf25d1c8af4e92c3 and modified in 053e212a084189dfcd0a47d2620ac67adad586c4.  Version 053e212a084189dfcd0a47d2620ac67adad586c4 of addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json left in tree.
CONFLICT (modify/delete): addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json deleted in 893b253644159a70d1916e3eaf25d1c8af4e92c3 and modified in 053e212a084189dfcd0a47d2620ac67adad586c4.  Version 053e212a084189dfcd0a47d2620ac67adad586c4 of addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:16 UTC): @duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:01:08 UTC): @duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).

Whenrow on (2025-01-17 08:31:07 UTC): The fw-port chain continues on Enterprise repo here : https://github.com/odoo/enterprise/pull/77322

"
2789809181,pull_request,closed,,[FW][FIX] base_import_module: fix ir_model_data xmlid for cloc_exclude,"The cloc_exclude entry of the manifest was activated for data modules*, and it works for records with a new id. But it fails for records with external ids from another module, as it tries to lookup for a record with an xmlid like `new_module.external_module.id`, which is not a valid xmlid.

This commit fixes the issue by first checking if the record to exclude from cloc is from another module or not, before creating the ir_model_data entry.

*https://github.com/odoo/odoo/commit/a47de680de149a60dd479c4c0b14f2c1bf5afcbe

opw-4472893

Forward-Port-Of: odoo/odoo#193592",fw-bot,2025-01-15 13:08:05+00:00,[],2025-01-30 06:26:37+00:00,2025-01-16 06:19:20+00:00,https://github.com/odoo/odoo/pull/193748,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592816146, 'issue_id': 2789809181, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193748.png)](https://mergebot.odoo.com/odoo/odoo/pull/193748)', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592816171, 'issue_id': 2789809181, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592898409, 'issue_id': 2789809181, 'author': 'fw-bot', 'body': '@vava-odoo @tfr-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 13, 45, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:08:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193748.png)](https://mergebot.odoo.com/odoo/odoo/pull/193748)

fw-bot (Issue Creator) on (2025-01-15 13:08:37 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 13:45:24 UTC): @vava-odoo @tfr-odoo ci/runbot failed on this forward-port PR

"
2789808494,pull_request,closed,,[FIX] sale_pdf_quote_builder: multi compute,"This fix addresses a minor issue with the
`_compute_available_product_document_ids` method of `sale.order`, which doesn't fully support multi-compute.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lipiraux,2025-01-15 13:07:46+00:00,[],2025-01-30 18:09:12+00:00,2025-01-30 18:09:12+00:00,https://github.com/odoo/odoo/pull/193747,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592816075, 'issue_id': 2789808494, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193747.png)](https://mergebot.odoo.com/odoo/odoo/pull/193747)', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618981688, 'issue_id': 2789808494, 'author': 'Feyensv', 'body': 'Seems like you have to rebase your branch for the red ci :eyes:', 'created_at': datetime.datetime(2025, 1, 28, 13, 20, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624833868, 'issue_id': 2789808494, 'author': 'Feyensv', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 30, 15, 36, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 13:08:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193747.png)](https://mergebot.odoo.com/odoo/odoo/pull/193747)

Feyensv on (2025-01-28 13:20:44 UTC): Seems like you have to rebase your branch for the red ci :eyes:

Feyensv on (2025-01-30 15:36:07 UTC): @robodoo r+

"
2789788842,pull_request,open,,Master 301 302 redirects menu visibility and validation,"This PR introduces a validation step for 301 and 302 redirects and 
modifies the visibility of the 'Redirects' menu item under website 
'Configuration'.

301 and 302 redirects from dynamic pages don't work, and that is normal.
Here is the way urls are served at the moment:
            1. Controllers
            2. Pages
            3. Redirection

However, before this commit, nothing informed the user from setting a
dynamic page as the 'URL from' of a 301/302 redirect, which resulted in
no effect on the redirect.

After this commit,a warning is displayed in such cases.
Instead of raising a ValidationError that would prevent the user from
saving the record, we chose to display a warning in the form and
highlight ineffective records in the tree view.

The computed field also handles the following edge case: When the user
creates a redirect with a 'from URL' that points to a controller view of
a module that isn't installed, the redirect will initially work.
However, once the module is installed, the redirect will no longer
function properly. In this case, a warning will still appear after
installation, which would not have happened with a validation error as
we do for other redirects.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",CorentinVermeulen,2025-01-15 12:59:20+00:00,[],2025-01-22 10:07:12+00:00,,https://github.com/odoo/odoo/pull/193746,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592795681, 'issue_id': 2789788842, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193746.png)](https://mergebot.odoo.com/odoo/odoo/pull/193746)', 'created_at': datetime.datetime(2025, 1, 15, 12, 59, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:59:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193746.png)](https://mergebot.odoo.com/odoo/odoo/pull/193746)

"
2789783049,pull_request,closed,,[FIX] stock: wrong result_package_id,"When forcefully unreserving then reserving products coming from a same package for multiple pickings, the source package is wrongly propagated as destination package on the multiple pickings.

To reproduce:
 - `-i sale_stock,sale_management`
 - Create a storable product (I) with 30 qty on hand
 - Create and confirm an internal transfer to put the product I in a pack (P)
 - Create and confirm two SO :
   - Sell 10 I
   - Sell 20 I
 - Check the 2 SO delivery pickings (D):
   - Each are reserved from pack P
   - They don't have any 'Destination Package' [Expected]
 - From the picking list view, by selecting the 2 pickings D :
   - 'Unreserve' them both
   - 'Check Availability' them both
 - Check the pickings D:
   - Each are reserved from pack P
   - Each have 'Destination Package' P [Faulty]

opw-4272573
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",mama-odoo,2025-01-15 12:56:40+00:00,[],2025-02-05 17:21:02+00:00,2025-02-05 17:21:02+00:00,https://github.com/odoo/odoo/pull/193745,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2592790317, 'issue_id': 2789783049, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193745.png)](https://mergebot.odoo.com/odoo/odoo/pull/193745)', 'created_at': datetime.datetime(2025, 1, 15, 12, 56, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637033399, 'issue_id': 2789783049, 'author': 'svs-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 2, 5, 14, 38, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:56:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193745.png)](https://mergebot.odoo.com/odoo/odoo/pull/193745)

svs-odoo on (2025-02-05 14:38:21 UTC): robodoo r+

"
2789755459,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 12:45:50+00:00,[],2025-01-29 19:59:32+00:00,2025-01-15 19:56:04+00:00,https://github.com/odoo/odoo/pull/193743,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592751642, 'issue_id': 2789755459, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193743.png)](https://mergebot.odoo.com/odoo/odoo/pull/193743)', 'created_at': datetime.datetime(2025, 1, 15, 12, 45, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592751683, 'issue_id': 2789755459, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 12, 45, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:45:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193743.png)](https://mergebot.odoo.com/odoo/odoo/pull/193743)

fw-bot (Issue Creator) on (2025-01-15 12:45:52 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789710604,pull_request,closed,,[FW][FIX] purchase_stock: report incoterm layout,"Since the [document layout redesign](odoo/odoo@e19efd2f54014425b14defd6015b9a71c1142385), the incoterms in rfq are wrongly displayed.

This is due to the dynamic title which breaks the xpath, xpathing the incoterms in the `<h2>` instead of after it.

This commit fixes the xpath to properly display the incoterms.

opw-4380886
task-4453695 

<h3>Steps to reproduce</h3>

- Choose any document layout
- Have purchase & Inventory installed
- Create a request for quotation
    - In the ""other information"" tab, choose an incoterm
- Print the RFQ

| Issue | Fix |
|--------|--------|
| ![image](https://github.com/user-attachments/assets/4883af55-3a9a-43a5-88ba-be86cf19bb45) | ![image](https://github.com/user-attachments/assets/f8b9e22e-55cd-4341-9db4-2394cfc8f1e5) | 


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192503",fw-bot,2025-01-15 12:31:18+00:00,[],2025-01-29 19:34:59+00:00,2025-01-15 19:32:16+00:00,https://github.com/odoo/odoo/pull/193742,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592691358, 'issue_id': 2789710604, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193742.png)](https://mergebot.odoo.com/odoo/odoo/pull/193742)', 'created_at': datetime.datetime(2025, 1, 15, 12, 31, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592691402, 'issue_id': 2789710604, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 12, 31, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:31:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193742.png)](https://mergebot.odoo.com/odoo/odoo/pull/193742)

fw-bot (Issue Creator) on (2025-01-15 12:31:25 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789676065,pull_request,closed,,[FW][FIX] web_editor: fix video option in media dialog,"After merging of this PR [1], video tab will not be visible in media dialog in report as `allowCommandVideo` is false. But this will override `noVideos` option from `params` to false if `allowCommandVideo` is true and video tab will be visible even if `noVideos` is `true`.

This PR makes sure that `noVideos` property from `params` should be checked if `allowCommandVideo` is true.

[1]: 187251



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192838",fw-bot,2025-01-15 12:19:22+00:00,[],2025-02-06 06:57:53+00:00,2025-01-23 06:15:57+00:00,https://github.com/odoo/odoo/pull/193741,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592649907, 'issue_id': 2789676065, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193741.png)](https://mergebot.odoo.com/odoo/odoo/pull/193741)', 'created_at': datetime.datetime(2025, 1, 15, 12, 19, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592649945, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 12, 19, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592799113, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 13, 0, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595254633, 'issue_id': 2789676065, 'author': 'robodoo', 'body': '@adsa-odoo @dmo-odoo staging failed: ci/runbot on a07e013e9117e675d6f490f1e16158724d81e00b (view more at https://runbot.odoo.com/runbot/build/73449701)', 'created_at': datetime.datetime(2025, 1, 16, 11, 19, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600465789, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173861, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476437, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119661, 'issue_id': 2789676065, 'author': 'fw-bot', 'body': '@adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606291704, 'issue_id': 2789676065, 'author': 'adsa-odoo', 'body': '@dmo-odoo ping!', 'created_at': datetime.datetime(2025, 1, 22, 4, 51, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607007101, 'issue_id': 2789676065, 'author': 'dmo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 11, 36, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607007181, 'issue_id': 2789676065, 'author': 'robodoo', 'body': ""This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate)."", 'created_at': datetime.datetime(2025, 1, 22, 11, 36, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2607008147, 'issue_id': 2789676065, 'author': 'dmo-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 22, 11, 37, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:19:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193741.png)](https://mergebot.odoo.com/odoo/odoo/pull/193741)

fw-bot (Issue Creator) on (2025-01-15 12:19:24 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 13:00:59 UTC): @adsa-odoo @dmo-odoo ci/runbot failed on this forward-port PR

robodoo on (2025-01-16 11:19:28 UTC): @adsa-odoo @dmo-odoo staging failed: ci/runbot on a07e013e9117e675d6f490f1e16158724d81e00b (view more at https://runbot.odoo.com/runbot/build/73449701)

fw-bot (Issue Creator) on (2025-01-19 02:01:58 UTC): @adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:02 UTC): @adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:37 UTC): @adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:48 UTC): @adsa-odoo @dmo-odoo this forward port of odoo/odoo#192838 is awaiting action (not merged or closed).

adsa-odoo on (2025-01-22 04:51:39 UTC): @dmo-odoo ping!

dmo-odoo on (2025-01-22 11:36:37 UTC): @robodoo r+

robodoo on (2025-01-22 11:36:40 UTC): This PR is already reviewed, it's in error, you might want to `retry` it instead (if you have already confirmed the error is not legitimate).

dmo-odoo on (2025-01-22 11:37:08 UTC): @robodoo retry

"
2789648666,pull_request,closed,,[IMP] cron scheduling review,"All details in the task and in commit messages,

task-4433571
odoo/enterprise#77172


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-15 12:09:15+00:00,[],2025-02-07 23:01:08+00:00,2025-02-07 22:35:50+00:00,https://github.com/odoo/odoo/pull/193740,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2592610428, 'issue_id': 2789648666, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193740.png)](https://mergebot.odoo.com/odoo/odoo/pull/193740)', 'created_at': datetime.datetime(2025, 1, 15, 12, 9, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593750954, 'issue_id': 2789648666, 'author': 'Julien00859', 'body': ""It definitely deserves another review pass but the code looks pretty good already. I did review commit per commit, you made it very simple and clear, thank you! I should read and review the final result too. There are some bits here and there that are a bit (too) complicated. Always with crons, that I consider to be a critical system with less scrutiny, I'm more inclined to make it simple when possible.\r\n\r\nI'm a bit uneasy with the changes done on `method_direct_trigger` as it is often the go-to function of support teams. I am not too sure that it is an improvement due to the very long time-limit. Do you think it would be possible to send a message on the bus every time we loop in `_run_job`? To notify the user about the cron progression, only if the run is running via a http worker. Maybe for another PR."", 'created_at': datetime.datetime(2025, 1, 15, 19, 18, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2624734081, 'issue_id': 2789648666, 'author': 'kmagusiak', 'body': 'Removed soft-limit and SJF from the PR.', 'created_at': datetime.datetime(2025, 1, 30, 15, 0, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626888906, 'issue_id': 2789648666, 'author': 'Icallhimtest', 'body': ""From the Odoo.sh platform perspective this doesn't affect us much.\r\n\r\n- Shortest Job First would've been an Odoo policy decision. (I agree with @nim-odoo's points on this)\r\n- Soft limit is like a cough sirup, it doesn't solve the issue.\r\n- Everything linked to choice of DB is mostly for Odoo Online as SH & most on-premise are single DB servers.\r\n\r\nAs I already mentioned, I'm sad to see we change the doc' on the `limit_time_real_cron` instead of changing the code to match the doc'. From my experience:\r\n\r\n- Devs want to have a deterministic timeout for cronjobs rather than for a batch of random cronjobs.\r\n- Platforms operating multiple DBs want to have a time limit per DB for fair ressource allocation.\r\n\r\nIdeally we'd have both and then the soft limit concept would actually be useful to guarantee we give the requested time.\r\n\r\nRemoving cron autocommits to force people to use the cron progress mechanism adds overhead but looks clean. But I don't think you can erradicate it as some cases will still need it:\r\n- for everything making calls to the outside world, we want to commit asap to reduce risk of being interrupted and replaying call to the outside world.\r\n- when the overhead is too big, I've seen some cases (including from our PS tech) where pre-computation takes up to a minute before being able to handle data.\r\n\r\nEdit: I reviewed the PR yesterday morning, before some changes were discarded."", 'created_at': datetime.datetime(2025, 1, 31, 10, 38, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627385162, 'issue_id': 2789648666, 'author': 'kmagusiak', 'body': '@nim-odoo I have added some comments in the commit messages. I have already sent you a patch file by e-mail with changes to be applied to internal.\r\n\r\n@Icallhimtest See below.\r\nAbout removing the need for commits, I have a spec that goes in a direction that handles cases you have given. :)\r\nFunctions that commit today fail to handle race conditions properly and sometimes handle exceptions improperly.\r\nPOC on branch: master-cron-api-improvement-krma - as of now, not ready, not tested, etc. Hint: instead of commit, give back control to the scheduler (it is its job to handle the transaction, commit and interrupt processes if they are running for too long).\r\n\r\n\r\n*After discussion on 30/01*: I removed soft-limit and SJF scheduling from this PR.\r\n\r\n*soft limit* was split evenly between remaining ready jobs of a database and the scheduler looped until it did not reach that limit. It is a fair way to share allocated time. Having a setting at cron-level means that you can timeout if you have too many jobs and you use only a small amout of time if you have few jobs. We still keep the hard limit at the DB-level so that if jobs are misbehaving we kill the process.\r\n\r\nToday, we order by priority and when API progress is implemented correctly, the scheduler runs the cron job 10 times and up to 10 seconds.\r\nSJF is the best algorithm to order the cron jobs in a way that minimizes the likelihood that a job executed sooner starves unprocessed jobs and does not need manual intervention when a job starts starving other ones. It does not prevent starvation in all cases, but these are much more rare than using priority-based scheduling.', 'created_at': datetime.datetime(2025, 1, 31, 13, 42, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643496797, 'issue_id': 2789648666, 'author': 'rco-odoo', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 2, 7, 17, 4, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643496896, 'issue_id': 2789648666, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 7, 17, 4, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:09:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193740.png)](https://mergebot.odoo.com/odoo/odoo/pull/193740)

Julien00859 on (2025-01-15 19:18:21 UTC): It definitely deserves another review pass but the code looks pretty good already. I did review commit per commit, you made it very simple and clear, thank you! I should read and review the final result too. There are some bits here and there that are a bit (too) complicated. Always with crons, that I consider to be a critical system with less scrutiny, I'm more inclined to make it simple when possible.

I'm a bit uneasy with the changes done on `method_direct_trigger` as it is often the go-to function of support teams. I am not too sure that it is an improvement due to the very long time-limit. Do you think it would be possible to send a message on the bus every time we loop in `_run_job`? To notify the user about the cron progression, only if the run is running via a http worker. Maybe for another PR.

kmagusiak (Issue Creator) on (2025-01-30 15:00:08 UTC): Removed soft-limit and SJF from the PR.

Icallhimtest on (2025-01-31 10:38:35 UTC): From the Odoo.sh platform perspective this doesn't affect us much.

- Shortest Job First would've been an Odoo policy decision. (I agree with @nim-odoo's points on this)
- Soft limit is like a cough sirup, it doesn't solve the issue.
- Everything linked to choice of DB is mostly for Odoo Online as SH & most on-premise are single DB servers.

As I already mentioned, I'm sad to see we change the doc' on the `limit_time_real_cron` instead of changing the code to match the doc'. From my experience:

- Devs want to have a deterministic timeout for cronjobs rather than for a batch of random cronjobs.
- Platforms operating multiple DBs want to have a time limit per DB for fair ressource allocation.

Ideally we'd have both and then the soft limit concept would actually be useful to guarantee we give the requested time.

Removing cron autocommits to force people to use the cron progress mechanism adds overhead but looks clean. But I don't think you can erradicate it as some cases will still need it:
- for everything making calls to the outside world, we want to commit asap to reduce risk of being interrupted and replaying call to the outside world.
- when the overhead is too big, I've seen some cases (including from our PS tech) where pre-computation takes up to a minute before being able to handle data.

Edit: I reviewed the PR yesterday morning, before some changes were discarded.

kmagusiak (Issue Creator) on (2025-01-31 13:42:48 UTC): @nim-odoo I have added some comments in the commit messages. I have already sent you a patch file by e-mail with changes to be applied to internal.

@Icallhimtest See below.
About removing the need for commits, I have a spec that goes in a direction that handles cases you have given. :)
Functions that commit today fail to handle race conditions properly and sometimes handle exceptions improperly.
POC on branch: master-cron-api-improvement-krma - as of now, not ready, not tested, etc. Hint: instead of commit, give back control to the scheduler (it is its job to handle the transaction, commit and interrupt processes if they are running for too long).


*After discussion on 30/01*: I removed soft-limit and SJF scheduling from this PR.

*soft limit* was split evenly between remaining ready jobs of a database and the scheduler looped until it did not reach that limit. It is a fair way to share allocated time. Having a setting at cron-level means that you can timeout if you have too many jobs and you use only a small amout of time if you have few jobs. We still keep the hard limit at the DB-level so that if jobs are misbehaving we kill the process.

Today, we order by priority and when API progress is implemented correctly, the scheduler runs the cron job 10 times and up to 10 seconds.
SJF is the best algorithm to order the cron jobs in a way that minimizes the likelihood that a job executed sooner starves unprocessed jobs and does not need manual intervention when a job starts starving other ones. It does not prevent starvation in all cases, but these are much more rare than using priority-based scheduling.

rco-odoo on (2025-02-07 17:04:40 UTC): @robodoo rebase-ff r+

robodoo on (2025-02-07 17:04:42 UTC): Merge method set to rebase and fast-forward.

"
2789646766,pull_request,open,,[FIX] spreadsheet_edition: drop sorting if field is not a measure,"Steps: Go to a pivot view with:

- either a predefined sort on the action/filter.
- sort by a measure then uncheck the measure.

We can't keep the sorting because the sorting is done client-side. If the field is not part of the measures, we don't have the data to sort...

Task: 4467262

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",LucasLefevre,2025-01-15 12:08:36+00:00,[],2025-01-23 11:47:38+00:00,,https://github.com/odoo/odoo/pull/193739,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592607673, 'issue_id': 2789646766, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193739.png)](https://mergebot.odoo.com/odoo/odoo/pull/193739)', 'created_at': datetime.datetime(2025, 1, 15, 12, 8, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:08:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193739.png)](https://mergebot.odoo.com/odoo/odoo/pull/193739)

"
2789641898,pull_request,closed,,[FW][FIX] project : Portal project's task access limitation,"### Steps to reproduce:
	- Create a project with a few tasks -> add a portal user as a follower
	- Go to the user's portal -> the user sees the project, but no tasks
	- Give user access to another project so that he has multiple projects in his portal.
	- Open the first project with 0 visible task and use arrows to navigate between the projects.
	- Go back to the first project all tasks are visible

### Cause:
This is happening because when fetching tasks that will be shown we are passing the SU parameter as true if we have access token https://github.com/odoo/odoo/blob/0b315ded0928372d2349b25699f440f4bf969814/addons/project/controllers/portal.py#L38 which leads that we will not create a domain for fetching tasks as SU will by default has access to all tasks.
https://github.com/odoo/odoo/blob/0b315ded0928372d2349b25699f440f4bf969814/addons/project/controllers/portal.py#L372-L373

### Fix:
We are gonna pass the parameter of SU as true only if the env of the request is SU env only.

opw-4410717

Forward-Port-Of: odoo/odoo#192552",fw-bot,2025-01-15 12:06:49+00:00,[],2025-01-30 11:01:06+00:00,2025-01-16 10:39:51+00:00,https://github.com/odoo/odoo/pull/193738,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592599239, 'issue_id': 2789641898, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193738.png)](https://mergebot.odoo.com/odoo/odoo/pull/193738)', 'created_at': datetime.datetime(2025, 1, 15, 12, 6, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592599282, 'issue_id': 2789641898, 'author': 'fw-bot', 'body': '@yoba-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193721\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 12, 6, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592716160, 'issue_id': 2789641898, 'author': 'yoba-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 36, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592718708, 'issue_id': 2789641898, 'author': 'robodoo', 'body': ""@yoba-odoo @xavierbol 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 12, 36, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593049218, 'issue_id': 2789641898, 'author': 'fw-bot', 'body': '@yoba-odoo @xavierbol this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 14, 43, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:06:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193738.png)](https://mergebot.odoo.com/odoo/odoo/pull/193738)

fw-bot (Issue Creator) on (2025-01-15 12:06:51 UTC): @yoba-odoo @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193721

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

yoba-odoo on (2025-01-15 12:36:24 UTC): @robodoo r+

robodoo on (2025-01-15 12:36:45 UTC): @yoba-odoo @xavierbol 'ci/runbot' failed on this reviewed PR.

fw-bot (Issue Creator) on (2025-01-15 14:43:32 UTC): @yoba-odoo @xavierbol this PR was modified / updated and has become a normal PR. It must be merged directly.

"
2789624515,pull_request,open,,[WIP][FIX] *: add aggregator for color field,"Description of the issue/feature this PR addresses:

 -  following this commit odoo/odoo@5ef08123,  from this [line](https://github.com/odoo/odoo/commit/5ef08123#diff-50c2c0143f95bd9826d9c06cef493589092f92c6bf47eb22d3500991157ab349R669) , now kanban view calls `webReadGroup` with explicit aggregator field, this causes issue when we apply groupby on `color index` field in kanban mode.
 -   As default aggregator of Interger field is 'sum' and when `color` field goes for aggregation, it return a sum of color index, which when converted into domain, fetches 0 result, as color value is evaluated against aggregated value which exceeds limit of 11.
 - example of damain formed `domain : [[""color"", ""="", 33]]` ( here there are 3 records with color index 11)

Current behavior before PR:
- If aggreagted values becomes > 11, no result is shown in UI (kanban mode)
![image](https://github.com/user-attachments/assets/7aab8e99-7254-4f60-b31f-563bf4639ab0)

Desired behavior after PR is merged:
- records are properly grouped 
![image](https://github.com/user-attachments/assets/49e43a84-a7cb-4e91-97e6-3ba6946d68bb)

**STEPS TO REPRODUCE THE ISSUE:**

-> Go to project 
-> Then select same color for two or three project with higher color index
-> Group by ""Color Index""

opw-4425778
co-author: hink

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",aksi-odoo,2025-01-15 12:00:27+00:00,[],2025-01-17 06:51:02+00:00,,https://github.com/odoo/odoo/pull/193736,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2592562428, 'issue_id': 2789624515, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193736.png)](https://mergebot.odoo.com/odoo/odoo/pull/193736)', 'created_at': datetime.datetime(2025, 1, 15, 12, 0, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592578258, 'issue_id': 2789624515, 'author': 'aksi-odoo', 'body': 'this fix has to be applied in few more models, hence WIP', 'created_at': datetime.datetime(2025, 1, 15, 12, 3, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 12:00:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193736.png)](https://mergebot.odoo.com/odoo/odoo/pull/193736)

aksi-odoo (Issue Creator) on (2025-01-15 12:03:10 UTC): this fix has to be applied in few more models, hence WIP

"
2789613240,pull_request,closed,,"[FW][IMP] iot_box_image: nano, vim update files using odoo user","In order to ensure file ownership does not change, we updated `nano` and `vim` aliases to force perform as `odoo` user.

Forward-Port-Of: odoo/odoo#193353",fw-bot,2025-01-15 11:56:14+00:00,[],2025-01-29 23:03:40+00:00,2025-01-15 22:15:00+00:00,https://github.com/odoo/odoo/pull/193735,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592538157, 'issue_id': 2789613240, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193735.png)](https://mergebot.odoo.com/odoo/odoo/pull/193735)', 'created_at': datetime.datetime(2025, 1, 15, 11, 56, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592538228, 'issue_id': 2789613240, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 56, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592631927, 'issue_id': 2789613240, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 14, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:56:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193735.png)](https://mergebot.odoo.com/odoo/odoo/pull/193735)

fw-bot (Issue Creator) on (2025-01-15 11:56:16 UTC): @loouis-t @Ysoroko this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-15 12:14:39 UTC): @robodoo r+

"
2789610286,pull_request,closed,,[FIX] pos_restaurant: split orders preparation changes,"Before this commit, when splitting an order, the preparation changes were not correctly applied to the new order and modified on the original one.

This commit fix the issue.


",davidmonnom,2025-01-15 11:55:09+00:00,[],2025-01-29 16:28:19+00:00,2025-01-15 15:56:20+00:00,https://github.com/odoo/odoo/pull/193734,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592530730, 'issue_id': 2789610286, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193734.png)](https://mergebot.odoo.com/odoo/odoo/pull/193734)', 'created_at': datetime.datetime(2025, 1, 15, 11, 55, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592828458, 'issue_id': 2789610286, 'author': 'adgu-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 13, 14, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:55:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193734.png)](https://mergebot.odoo.com/odoo/odoo/pull/193734)

adgu-odoo on (2025-01-15 13:14:12 UTC): robodoo r+

"
2789609329,pull_request,closed,,"[FW][FIX] core: http.route ""methods"" accepts any Iterable","The docstring of `@route` states that it accepts any iterable for the `methods` argument, but several places in the source code wrongly expected a list, and break if it is a tuple.

Forward-Port-Of: odoo/odoo#193621",fw-bot,2025-01-15 11:54:50+00:00,[],2025-01-29 19:07:57+00:00,2025-01-15 18:55:49+00:00,https://github.com/odoo/odoo/pull/193733,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2592528286, 'issue_id': 2789609329, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193733.png)](https://mergebot.odoo.com/odoo/odoo/pull/193733)', 'created_at': datetime.datetime(2025, 1, 15, 11, 54, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592528308, 'issue_id': 2789609329, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193621 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/models/ir_http.py\nCONFLICT (content): Merge conflict in odoo/addons/base/models/ir_http.py\nAuto-merging odoo/addons/test_http/controllers.py\nAuto-merging odoo/http.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 54, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592973836, 'issue_id': 2789609329, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 17, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592983817, 'issue_id': 2789609329, 'author': 'robodoo', 'body': ""@Julien00859 'ci/security' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 14, 20, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593075685, 'issue_id': 2789609329, 'author': 'xmo-odoo', 'body': '@robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 15, 14, 53, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:54:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193733.png)](https://mergebot.odoo.com/odoo/odoo/pull/193733)

fw-bot (Issue Creator) on (2025-01-15 11:54:51 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193621 failed.

stdout:
```
Auto-merging odoo/addons/base/models/ir_http.py
CONFLICT (content): Merge conflict in odoo/addons/base/models/ir_http.py
Auto-merging odoo/addons/test_http/controllers.py
Auto-merging odoo/http.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Julien00859 on (2025-01-15 14:17:24 UTC): @robodoo r+

robodoo on (2025-01-15 14:20:26 UTC): @Julien00859 'ci/security' failed on this reviewed PR.

xmo-odoo on (2025-01-15 14:53:40 UTC): @robodoo override=ci/security

"
2789606356,pull_request,closed,,[FW][FIX] pos_sale: separate downpayment for fixed tax,"When a product has a fixed tax, there should be a separate downpayment line for the fixed tax amount.

Steps to reproduce:
-------------------
* Create a fixed tax of 1€
* Assign this tax to any product
* Create a sale order with this product
* Open PoS and make a downpayment of 10%
> Observation: There is only one downpayment line with the total amount
  of the product and the fixed tax combined.

opw-4252104

Forward-Port-Of: odoo/odoo#193269
Forward-Port-Of: odoo/odoo#192208",fw-bot,2025-01-15 11:53:43+00:00,[],2025-01-30 19:01:04+00:00,2025-01-16 18:57:48+00:00,https://github.com/odoo/odoo/pull/193732,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2592520835, 'issue_id': 2789606356, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193732.png)](https://mergebot.odoo.com/odoo/odoo/pull/193732)', 'created_at': datetime.datetime(2025, 1, 15, 11, 53, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592520925, 'issue_id': 2789606356, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/pos_sale/static/src/app/order_management_screen/sale_order_management_screen/sale_order_management_screen.js deleted in 30173a29155102959f655a6cf0debb3e7b39e9ff and modified in 68aa8c50e48dede665d891996c4cf74a6d0e7153.  Version 68aa8c50e48dede665d891996c4cf74a6d0e7153 of addons/pos_sale/static/src/app/order_management_screen/sale_order_management_screen/sale_order_management_screen.js left in tree.\nAuto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js\nCONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js\nAuto-merging addons/pos_sale/tests/test_pos_sale_flow.py\nCONFLICT (content): Merge conflict in addons/pos_sale/tests/test_pos_sale_flow.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 53, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313285, 'issue_id': 2789606356, 'author': 'fw-bot', 'body': '@robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596293707, 'issue_id': 2789606356, 'author': 'robinengels', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 17, 21, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:53:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193732.png)](https://mergebot.odoo.com/odoo/odoo/pull/193732)

fw-bot (Issue Creator) on (2025-01-15 11:53:45 UTC): @robinengels @adgu-odoo cherrypicking of pull request odoo/odoo#192208 failed.

stdout:
```
CONFLICT (modify/delete): addons/pos_sale/static/src/app/order_management_screen/sale_order_management_screen/sale_order_management_screen.js deleted in 30173a29155102959f655a6cf0debb3e7b39e9ff and modified in 68aa8c50e48dede665d891996c4cf74a6d0e7153.  Version 68aa8c50e48dede665d891996c4cf74a6d0e7153 of addons/pos_sale/static/src/app/order_management_screen/sale_order_management_screen/sale_order_management_screen.js left in tree.
Auto-merging addons/pos_sale/static/tests/tours/pos_sale_tour.js
CONFLICT (content): Merge conflict in addons/pos_sale/static/tests/tours/pos_sale_tour.js
Auto-merging addons/pos_sale/tests/test_pos_sale_flow.py
CONFLICT (content): Merge conflict in addons/pos_sale/tests/test_pos_sale_flow.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:15 UTC): @robinengels @adgu-odoo this forward port of odoo/odoo#192208 is awaiting action (not merged or closed).

robinengels on (2025-01-16 17:21:08 UTC): @robodoo r+

"
2789605517,pull_request,closed,,[FW][FIX] project: project grouped by stages now respects the pagination,"Steps to reproduce
==================

- Open any project
- Create many project stages (80+)
- Switch to the list view
- Group by stage
- Switch to to next page => The pager keeps increasing

Cause of the issue
==================

`stage_id` has a group_expand: `_read_group_stage_ids`

This method is used to include empty stages in the result for the kanban view, so that we can drag tasks to an empty stage.

Solution
========

Add a context key `project_kanban` and only add empty stages in that case.

opw-4408061

Forward-Port-Of: odoo/odoo#193488
Forward-Port-Of: odoo/odoo#192492",fw-bot,2025-01-15 11:53:26+00:00,[],2025-01-29 18:46:23+00:00,2025-01-15 18:37:52+00:00,https://github.com/odoo/odoo/pull/193731,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592519731, 'issue_id': 2789605517, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193731.png)](https://mergebot.odoo.com/odoo/odoo/pull/193731)', 'created_at': datetime.datetime(2025, 1, 15, 11, 53, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592519783, 'issue_id': 2789605517, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 53, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:53:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193731.png)](https://mergebot.odoo.com/odoo/odoo/pull/193731)

fw-bot (Issue Creator) on (2025-01-15 11:53:30 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789568856,pull_request,open,,"[REF] web, *: deprecate current_company_id and allowed_company_ids","This commit deprecates current_company_id and allowed_company_ids from
the evaluation context.
Note that, this commit also adds a migration code to automatically
change these deprecation keys and use the new `companies` evaluation
context key, introduced in [1].
",jpp-odoo,2025-01-15 11:38:26+00:00,[],2025-02-06 15:06:57+00:00,,https://github.com/odoo/odoo/pull/193730,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592472052, 'issue_id': 2789568856, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193730.png)](https://mergebot.odoo.com/odoo/odoo/pull/193730)', 'created_at': datetime.datetime(2025, 1, 15, 11, 38, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621904965, 'issue_id': 2789568856, 'author': 'jpp-odoo', 'body': 'Hi @odoo/rd-security , in the commit [1], In the upgrade code mechanism, I added a `print` to print a warning with the files that are not Unicode. Note that, the other warnings and errors in the `upgrade_code.py` files are printed using the `print` function. Could you please review ? Thanks\r\n[1] https://github.com/odoo/odoo/pull/193730/commits/32a067e156826ffde14adffb5cfec3aa4ec6e435', 'created_at': datetime.datetime(2025, 1, 29, 15, 3, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:38:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193730.png)](https://mergebot.odoo.com/odoo/odoo/pull/193730)

jpp-odoo (Issue Creator) on (2025-01-29 15:03:04 UTC): Hi @odoo/rd-security , in the commit [1], In the upgrade code mechanism, I added a `print` to print a warning with the files that are not Unicode. Note that, the other warnings and errors in the `upgrade_code.py` files are printed using the `print` function. Could you please review ? Thanks
[1] https://github.com/odoo/odoo/pull/193730/commits/32a067e156826ffde14adffb5cfec3aa4ec6e435

"
2789558995,pull_request,closed,,[FW][FIX] account: translate tax tags,"The tax tags are translatable but never translated automatically because they are generated dynamically from the tax report.

This commit aims at improving this by translating automatically the tags that match exactly the name of the tax report line, for instance in Israel.

Forward-Port-Of: odoo/odoo#192233",fw-bot,2025-01-15 11:33:54+00:00,[],2025-01-29 23:03:40+00:00,2025-01-15 22:14:55+00:00,https://github.com/odoo/odoo/pull/193729,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592461760, 'issue_id': 2789558995, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193729.png)](https://mergebot.odoo.com/odoo/odoo/pull/193729)', 'created_at': datetime.datetime(2025, 1, 15, 11, 33, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592461787, 'issue_id': 2789558995, 'author': 'fw-bot', 'body': '@william-andre @oco-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193712\n* odoo/odoo#193651\n* odoo/odoo#193633\n* odoo/odoo#193611\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 33, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592604032, 'issue_id': 2789558995, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 7, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:33:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193729.png)](https://mergebot.odoo.com/odoo/odoo/pull/193729)

fw-bot (Issue Creator) on (2025-01-15 11:33:56 UTC): @william-andre @oco-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193712
* odoo/odoo#193651
* odoo/odoo#193633
* odoo/odoo#193611

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-15 12:07:49 UTC): @robodoo r+

"
2789526764,pull_request,closed,,[FIX] core: falsy evaluation of db_replica_host,"Following the configuration refactor[1], the falsy evaluation of db_replica_host was wrong. The default is now an empty string.

This lead to situations where a readonly cursor was wrongfully used.

[1] https://github.com/odoo/odoo/commit/b1f7be518e2075c546bcedc0f4ba6dd62dff3c8f




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",johandem,2025-01-15 11:18:13+00:00,[],2025-02-03 13:39:12+00:00,2025-01-20 13:19:27+00:00,https://github.com/odoo/odoo/pull/193728,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592421953, 'issue_id': 2789526764, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193728.png)](https://mergebot.odoo.com/odoo/odoo/pull/193728)', 'created_at': datetime.datetime(2025, 1, 15, 11, 18, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601762247, 'issue_id': 2789526764, 'author': 'nim-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 41, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602331206, 'issue_id': 2789526764, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 20, 12, 42, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615244158, 'issue_id': 2789526764, 'author': 'Xavier-Do', 'body': 'What was the issue? It was intended to be able to test readonly behaviour without a real replica locally. It is stated in the comment of one of the line you modified:\r\n\r\n> by default, only use readonly pool if we have a db_replica_host defined. **Allows to have an empty replica host for testing**\r\n\r\nIt looks more like a problem in the config refactor rater than this feature', 'created_at': datetime.datetime(2025, 1, 27, 9, 30, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615265367, 'issue_id': 2789526764, 'author': 'johandem', 'body': ""> What was the issue? It was intended to be able to test readonly behaviour without a real replica locally. It is stated in the comment of one of the line you modified:\r\n> \r\n> > by default, only use readonly pool if we have a db_replica_host defined. **Allows to have an empty replica host for testing**\r\n> \r\n> It looks more like a problem in the config refactor rater than this feature\r\n\r\nThe default value of `db_replica_host` was changed to empty string. We had read-only connections opened on the SaaS where there is no read-only replica because of that. You can find the commit to blame in the PR description.\r\n\r\nFeel free to adapt for the testing part but I thought it would still work thanks to the second part of the condition: `or config['test_enable']`."", 'created_at': datetime.datetime(2025, 1, 27, 9, 40, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615296071, 'issue_id': 2789526764, 'author': 'Xavier-Do', 'body': ""It will work for automated testing but not for manual testing. The goal was to be able to start a server locally giving `--db_replica_host=` locally to have a behavior similar to production for devs without the need for a complex replica setup and without adding a new config parameter only for testing. The difference between an empty string and False was used to have the switch of behaviour.  False mean we don't use a replica, empty means use the local host (websocket) as replica."", 'created_at': datetime.datetime(2025, 1, 27, 9, 54, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615345528, 'issue_id': 2789526764, 'author': 'Julien00859', 'body': ""Indeed that's a problem, we should revert this commit. And add a test to specify the behavior of the empty string."", 'created_at': datetime.datetime(2025, 1, 27, 10, 16, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615389772, 'issue_id': 2789526764, 'author': 'julienlegros', 'body': ""> The goal was to be able to start a server locally giving `--db_replica_host=` locally to have a behavior similar to production for devs without the need for a complex replica setup and without adding a new config parameter only for testing.\r\n\r\nI don't think that's a fair statement. A readonly replica is not a common setup. To lever such a setup, you have to really mean it. By default, users shouldn't have to care about readonly configurations and connections. As Johan pointed out, the reverse was introduced in 18.1: a redundant readonly connection to the primary cluster. This is a non starter and a clear regression for us. If you want that behavior in manual testing, that's fine, but it should be an option, not the default."", 'created_at': datetime.datetime(2025, 1, 27, 10, 36, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615461829, 'issue_id': 2789526764, 'author': 'nim-odoo', 'body': ""A useless readonly connection for the sole purpose of manual testing is not acceptable. It should be opt-in, not opt-out. It's easy to introduce a specific keyword for `--db_replica_host=` for testing purpose."", 'created_at': datetime.datetime(2025, 1, 27, 11, 9, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:18:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193728.png)](https://mergebot.odoo.com/odoo/odoo/pull/193728)

nim-odoo on (2025-01-20 08:41:09 UTC): robodoo r+

robodoo on (2025-01-20 12:42:48 UTC): This PR is already reviewed, reviewing it again is useless.

Xavier-Do on (2025-01-27 09:30:50 UTC): What was the issue? It was intended to be able to test readonly behaviour without a real replica locally. It is stated in the comment of one of the line you modified:


It looks more like a problem in the config refactor rater than this feature

johandem (Issue Creator) on (2025-01-27 09:40:44 UTC): The default value of `db_replica_host` was changed to empty string. We had read-only connections opened on the SaaS where there is no read-only replica because of that. You can find the commit to blame in the PR description.

Feel free to adapt for the testing part but I thought it would still work thanks to the second part of the condition: `or config['test_enable']`.

Xavier-Do on (2025-01-27 09:54:40 UTC): It will work for automated testing but not for manual testing. The goal was to be able to start a server locally giving `--db_replica_host=` locally to have a behavior similar to production for devs without the need for a complex replica setup and without adding a new config parameter only for testing. The difference between an empty string and False was used to have the switch of behaviour.  False mean we don't use a replica, empty means use the local host (websocket) as replica.

Julien00859 on (2025-01-27 10:16:27 UTC): Indeed that's a problem, we should revert this commit. And add a test to specify the behavior of the empty string.

julienlegros on (2025-01-27 10:36:30 UTC): I don't think that's a fair statement. A readonly replica is not a common setup. To lever such a setup, you have to really mean it. By default, users shouldn't have to care about readonly configurations and connections. As Johan pointed out, the reverse was introduced in 18.1: a redundant readonly connection to the primary cluster. This is a non starter and a clear regression for us. If you want that behavior in manual testing, that's fine, but it should be an option, not the default.

nim-odoo on (2025-01-27 11:09:13 UTC): A useless readonly connection for the sole purpose of manual testing is not acceptable. It should be opt-in, not opt-out. It's easy to introduce a specific keyword for `--db_replica_host=` for testing purpose.

"
2789517480,pull_request,closed,,[IMP] hr_work_entry: add country field to work entry type list view,"Added country field to work entry type list view.

task-4476649

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr",rmun-odoo,2025-01-15 11:13:41+00:00,[],2025-01-23 16:45:28+00:00,2025-01-23 16:42:12+00:00,https://github.com/odoo/odoo/pull/193727,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2592402343, 'issue_id': 2789517480, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193727.png)](https://mergebot.odoo.com/odoo/odoo/pull/193727)', 'created_at': datetime.datetime(2025, 1, 15, 11, 13, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609643207, 'issue_id': 2789517480, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 12, 6, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:13:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193727.png)](https://mergebot.odoo.com/odoo/odoo/pull/193727)

tivisse on (2025-01-23 12:06:48 UTC): @robodoo r+

"
2789516597,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 11:13:18+00:00,[],2025-01-29 20:26:19+00:00,2025-01-15 20:10:05+00:00,https://github.com/odoo/odoo/pull/193726,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592400553, 'issue_id': 2789516597, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193726.png)](https://mergebot.odoo.com/odoo/odoo/pull/193726)', 'created_at': datetime.datetime(2025, 1, 15, 11, 13, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592400597, 'issue_id': 2789516597, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 13, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592493717, 'issue_id': 2789516597, 'author': 'fw-bot', 'body': '@loouis-t @Ysoroko ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 11, 48, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:13:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193726.png)](https://mergebot.odoo.com/odoo/odoo/pull/193726)

fw-bot (Issue Creator) on (2025-01-15 11:13:20 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 11:48:02 UTC): @loouis-t @Ysoroko ci/runbot failed on this forward-port PR

"
2789498593,pull_request,open,,[FIX] web: close confirmation dialog on confirm inside button-called action view,"**Description**
Before this commit, when calling an action from a button inside e.g. a form view header and this action contained a dialog confirmation button, after confirming, the dialog would not close when the confirm action opens a view in `current` window.

After this commit, when opening the confirmation dialog from such action, the view opens and the dialog is closed properly after confirming.

Impacted versions: 16.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",sanderlienaerts,2025-01-15 11:04:58+00:00,[],2025-01-15 11:07:12+00:00,,https://github.com/odoo/odoo/pull/193725,[],"[{'comment_id': 2592362639, 'issue_id': 2789498593, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193725.png)](https://mergebot.odoo.com/odoo/odoo/pull/193725)', 'created_at': datetime.datetime(2025, 1, 15, 11, 5, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:05:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193725.png)](https://mergebot.odoo.com/odoo/odoo/pull/193725)

"
2789497814,pull_request,closed,,[FW][FIX] web_editor: fix video option in media dialog,"After merging of this PR [1], video tab will not be visible in media dialog in report as `allowCommandVideo` is false. But this will override `noVideos` option from `params` to false if `allowCommandVideo` is true and video tab will be visible even if `noVideos` is `true`.

This PR makes sure that `noVideos` property from `params` should be checked if `allowCommandVideo` is true.

[1]: 187251



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192838",fw-bot,2025-01-15 11:04:36+00:00,[],2025-01-30 09:03:18+00:00,2025-01-16 09:01:28+00:00,https://github.com/odoo/odoo/pull/193724,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592360810, 'issue_id': 2789497814, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193724.png)](https://mergebot.odoo.com/odoo/odoo/pull/193724)', 'created_at': datetime.datetime(2025, 1, 15, 11, 4, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592360851, 'issue_id': 2789497814, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 11, 4, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:04:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193724.png)](https://mergebot.odoo.com/odoo/odoo/pull/193724)

fw-bot (Issue Creator) on (2025-01-15 11:04:38 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789496181,pull_request,open,,[IMP] stock_account: stock valuation description mentions scrapping,"When a scrap is created from a stock move, the description of the valuation layer omits any mention of scrapping. This is unlike the behaviour of creation of scrap from scratch, whose valuation layer directly points at the reference of the scrap.

This commit adds a mention of the scrap reference to the description for such cases.

Task ID: [4457325](https://www.odoo.com/odoo/project/966/tasks/4457325)
",lugr-odoo,2025-01-15 11:03:48+00:00,[],2025-01-31 10:22:33+00:00,,https://github.com/odoo/odoo/pull/193723,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592356989, 'issue_id': 2789496181, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193723.png)](https://mergebot.odoo.com/odoo/odoo/pull/193723)', 'created_at': datetime.datetime(2025, 1, 15, 11, 3, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 11:03:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193723.png)](https://mergebot.odoo.com/odoo/odoo/pull/193723)

"
2789481464,pull_request,closed,,[IMP] web: update owl to 2.6.0,"Update the OWL lib.

Release notes:
https://github.com/odoo/owl/releases/tag/v2.6.0

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",rfr-odoo,2025-01-15 10:57:13+00:00,['rfr-odoo'],2025-01-15 14:00:01+00:00,2025-01-15 13:15:23+00:00,https://github.com/odoo/odoo/pull/193722,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592327812, 'issue_id': 2789481464, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193722.png)](https://mergebot.odoo.com/odoo/odoo/pull/193722)', 'created_at': datetime.datetime(2025, 1, 15, 10, 57, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592447868, 'issue_id': 2789481464, 'author': 'Polymorphe57', 'body': '@robodoo fw=skipci', 'created_at': datetime.datetime(2025, 1, 15, 11, 27, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592605599, 'issue_id': 2789481464, 'author': 'Polymorphe57', 'body': '@robodoo fw=skipci r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 8, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592605751, 'issue_id': 2789481464, 'author': 'robodoo', 'body': 'Not waiting for CI to create followup forward-ports.', 'created_at': datetime.datetime(2025, 1, 15, 12, 8, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:57:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193722.png)](https://mergebot.odoo.com/odoo/odoo/pull/193722)

Polymorphe57 on (2025-01-15 11:27:03 UTC): @robodoo fw=skipci

Polymorphe57 on (2025-01-15 12:08:09 UTC): @robodoo fw=skipci r+

robodoo on (2025-01-15 12:08:12 UTC): Not waiting for CI to create followup forward-ports.

"
2789470488,pull_request,closed,,[FW][FIX] project : Portal project's task access limitation,"### Steps to reproduce:
	- Create a project with a few tasks -> add a portal user as a follower
	- Go to the user's portal -> the user sees the project, but no tasks
	- Give user access to another project so that he has multiple projects in his portal.
	- Open the first project with 0 visible task and use arrows to navigate between the projects.
	- Go back to the first project all tasks are visible

### Cause:
This is happening because when fetching tasks that will be shown we are passing the SU parameter as true if we have access token https://github.com/odoo/odoo/blob/0b315ded0928372d2349b25699f440f4bf969814/addons/project/controllers/portal.py#L38 which leads that we will not create a domain for fetching tasks as SU will by default has access to all tasks.
https://github.com/odoo/odoo/blob/0b315ded0928372d2349b25699f440f4bf969814/addons/project/controllers/portal.py#L372-L373

### Fix:
We are gonna pass the parameter of SU as true only if the env of the request is SU env only.

opw-4410717

Forward-Port-Of: odoo/odoo#192552",fw-bot,2025-01-15 10:52:29+00:00,[],2025-01-29 16:28:29+00:00,2025-01-15 16:27:57+00:00,https://github.com/odoo/odoo/pull/193721,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592308832, 'issue_id': 2789470488, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193721.png)](https://mergebot.odoo.com/odoo/odoo/pull/193721)', 'created_at': datetime.datetime(2025, 1, 15, 10, 52, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592308865, 'issue_id': 2789470488, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 10, 52, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593049290, 'issue_id': 2789470488, 'author': 'fw-bot', 'body': ""@yoba-odoo @xavierbol child PR odoo/odoo#193738 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 15, 14, 43, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:52:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193721.png)](https://mergebot.odoo.com/odoo/odoo/pull/193721)

fw-bot (Issue Creator) on (2025-01-15 10:52:31 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 14:43:33 UTC): @yoba-odoo @xavierbol child PR odoo/odoo#193738 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2789458432,pull_request,open,,[FIX] mrp: filter move_finished_ids by done state,"Description of the issue/feature this PR addresses:
The qty_produced field in the mrp.production model calculates the produced quantity by summing up the quantities in move_finished_ids. Previously, the calculation included moves that were not in the 'done' state, but instead, any moves that were not in the 'cancel' state.

Current behavior before PR:
The computation of qty_produced considers non-canceled moves in move_finished_ids, even if they are not yet in the 'done' state. This can result in incorrect quantities being reflected as produced.

Desired behavior after PR is merged:
The computation of qty_produced now only considers move_finished_ids that are in the 'done' state, ensuring the produced quantity of the done moves is well reflected.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",AndreuOForgeFlow,2025-01-15 10:48:19+00:00,[],2025-02-04 11:19:32+00:00,,https://github.com/odoo/odoo/pull/193720,"[('CLA', 'Contributor License Agreement'), ('Logistics', 'about stock, mrp, delivery, purchase')]","[{'comment_id': 2592299352, 'issue_id': 2789458432, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193720.png)](https://mergebot.odoo.com/odoo/odoo/pull/193720)', 'created_at': datetime.datetime(2025, 1, 15, 10, 48, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:48:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193720.png)](https://mergebot.odoo.com/odoo/odoo/pull/193720)

"
2789438958,pull_request,closed,,[FW][FIX] website: fix image link alignment in the image gallery,"Steps to reproduce the issue:

- In Website edit mode, drag and drop an ""Image Gallery"" block onto the page.
- Select ""Full"" as the ""Content Width"" option for the ""Image Gallery"" block.
- Click on the image.
- Add a link to the image.
- Zoom the page to 50% using the browser tool.
- Bug: the image is aligned to the left instead of being centered.
- Remove the link: the image is correctly centered.

opw-4458747

Forward-Port-Of: odoo/odoo#193585",fw-bot,2025-01-15 10:40:07+00:00,[],2025-01-29 23:03:42+00:00,2025-01-15 22:15:13+00:00,https://github.com/odoo/odoo/pull/193719,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592281129, 'issue_id': 2789438958, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193719.png)](https://mergebot.odoo.com/odoo/odoo/pull/193719)', 'created_at': datetime.datetime(2025, 1, 15, 10, 40, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592281155, 'issue_id': 2789438958, 'author': 'fw-bot', 'body': '@bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193700\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 10, 40, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592306027, 'issue_id': 2789438958, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 51, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:40:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193719.png)](https://mergebot.odoo.com/odoo/odoo/pull/193719)

fw-bot (Issue Creator) on (2025-01-15 10:40:09 UTC): @bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193700

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

SergeBayet on (2025-01-15 10:51:16 UTC): @robodoo r+

"
2789434072,pull_request,closed,,[FW][FIX] stock: prevent crash in mobile stock move line view,"Steps to reproduce
==================

- Use a mobile viewport
- Go to Inventory > Delivery Orders
- Open any record
- Click on a product
- Click on add

=> TypeError: ml.data.quant_id is undefined

Cause of the issue
==================

On mobile, the quant_id field is not present in the view

opw-4288556

Forward-Port-Of: odoo/odoo#193452
Forward-Port-Of: odoo/odoo#192732",fw-bot,2025-01-15 10:37:46+00:00,[],2025-01-30 12:41:37+00:00,2025-01-16 12:29:18+00:00,https://github.com/odoo/odoo/pull/193718,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2592276312, 'issue_id': 2789434072, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193718.png)](https://mergebot.odoo.com/odoo/odoo/pull/193718)', 'created_at': datetime.datetime(2025, 1, 15, 10, 37, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592276328, 'issue_id': 2789434072, 'author': 'fw-bot', 'body': '@hubvd @Whenrow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193601\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 10, 37, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313075, 'issue_id': 2789434072, 'author': 'fw-bot', 'body': '@hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595013347, 'issue_id': 2789434072, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 35, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:37:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193718.png)](https://mergebot.odoo.com/odoo/odoo/pull/193718)

fw-bot (Issue Creator) on (2025-01-15 10:37:48 UTC): @hubvd @Whenrow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193601

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 02:01:05 UTC): @hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).

hubvd on (2025-01-16 09:35:03 UTC): @robodoo r+

"
2789432996,pull_request,open,,[FIX] pos_mrp: line cost bom sharing product,"When creating nested BoMs that share some common component, the cost of
the product was being calculated incorrectly

Steps to reproduce:
-------------------
* Set `All` category to use the costing method `AVCO` in the settings.
* Create a product Comp1 and set its cost to 100.
* Create Product P1 with a BoM that consumes 1 Comp1.
* Create Product P2 with a BoM that consumes 1 Comp1.
* Create Product P3 with a BoM that consumes 1 P1.
* Create a POS order with 1 P2, and 1 P3.
* Close the session and check the cost of the products in the order
> Observation: The cost for P3 is incorrect, it should be 100 but it is 200.

Why the fix:
------------
When selecting the stock moves line to consider for the cost of the PoS
order, we need to select the stock moves that are related to the
BoM lines of the original product. In the previous code we were only
relying on the product id, and this was causing the issue because some
products can have the same product id but used in different BoM lines.

opw-4201935",robinengels,2025-01-15 10:37:16+00:00,[],2025-01-17 11:10:34+00:00,,https://github.com/odoo/odoo/pull/193717,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2592275233, 'issue_id': 2789432996, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193717.png)](https://mergebot.odoo.com/odoo/odoo/pull/193717)', 'created_at': datetime.datetime(2025, 1, 15, 10, 37, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:37:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193717.png)](https://mergebot.odoo.com/odoo/odoo/pull/193717)

"
2789415334,pull_request,closed,,[FIX] base: no-demo for TestQwebFieldContact,"'TestQwebFieldContact' used a demo partner to work, but we want to test independent of demo data.
",ryv-odoo,2025-01-15 10:29:15+00:00,[],2025-01-30 13:45:50+00:00,2025-01-16 13:18:46+00:00,https://github.com/odoo/odoo/pull/193716,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592258074, 'issue_id': 2789415334, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193716.png)](https://mergebot.odoo.com/odoo/odoo/pull/193716)', 'created_at': datetime.datetime(2025, 1, 15, 10, 29, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595289072, 'issue_id': 2789415334, 'author': 'ryv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 37, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:29:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193716.png)](https://mergebot.odoo.com/odoo/odoo/pull/193716)

ryv-odoo (Issue Creator) on (2025-01-16 11:37:20 UTC): @robodoo r+

"
2789399668,pull_request,closed,,[FIX] resource: fix duration days of working schedules,"When creating a new working schedule, the duration (days) was not computed correctly. This was due to a missing field in the depends of the compute method.

This commits fixes the issue by adding the hours per day in the depens of the duration days compute method. That way, the duration days will be computed after that the hours per day are computed.

task-4457200
",romaincarlier4,2025-01-15 10:21:59+00:00,[],2025-01-20 20:18:51+00:00,2025-01-20 17:30:51+00:00,https://github.com/odoo/odoo/pull/193715,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592242385, 'issue_id': 2789399668, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193715.png)](https://mergebot.odoo.com/odoo/odoo/pull/193715)', 'created_at': datetime.datetime(2025, 1, 15, 10, 22, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602674030, 'issue_id': 2789399668, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 15, 12, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:22:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193715.png)](https://mergebot.odoo.com/odoo/odoo/pull/193715)

tivisse on (2025-01-20 15:12:58 UTC): @robodoo r+

"
2789386635,pull_request,closed,,"[IMP] account_edi_ubl_cii,account_peppol: Peppol First amendments","- Improvements of message of Peppol/BIS3 related warnings of the Print & Send wizards.
- Wording improvements for clarity.
- Make the ""What is Peppol"" modal more present. Change its flow: the ""activate"" buttons
now leads to the Peppol registration wizard if the company is not registered yet.

task-4478365",clbr-odoo,2025-01-15 10:16:05+00:00,[],2025-01-21 04:54:14+00:00,2025-01-21 04:54:14+00:00,https://github.com/odoo/odoo/pull/193714,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592228993, 'issue_id': 2789386635, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193714.png)](https://mergebot.odoo.com/odoo/odoo/pull/193714)', 'created_at': datetime.datetime(2025, 1, 15, 10, 16, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592234894, 'issue_id': 2789386635, 'author': 'clbr-odoo', 'body': 'TODO export .pot, waiting for PMAX review to do it', 'created_at': datetime.datetime(2025, 1, 15, 10, 18, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603002736, 'issue_id': 2789386635, 'author': 'antoine162', 'body': '@robodoo delegate+', 'created_at': datetime.datetime(2025, 1, 20, 18, 0, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603003464, 'issue_id': 2789386635, 'author': 'antoine162', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 18, 1, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603003570, 'issue_id': 2789386635, 'author': 'robodoo', 'body': '@antoine162 you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 20, 18, 1, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603003589, 'issue_id': 2789386635, 'author': 'robodoo', 'body': '@clbr-odoo @antoine162 because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 20, 18, 1, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603003915, 'issue_id': 2789386635, 'author': 'antoine162', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 20, 18, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603003980, 'issue_id': 2789386635, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 20, 18, 1, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:16:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193714.png)](https://mergebot.odoo.com/odoo/odoo/pull/193714)

clbr-odoo (Issue Creator) on (2025-01-15 10:18:42 UTC): TODO export .pot, waiting for PMAX review to do it

antoine162 on (2025-01-20 18:00:27 UTC): @robodoo delegate+

antoine162 on (2025-01-20 18:01:01 UTC): @robodoo r+

robodoo on (2025-01-20 18:01:05 UTC): @antoine162 you may want to rebuild or fix this PR as it has failed CI.

robodoo on (2025-01-20 18:01:07 UTC): @clbr-odoo @antoine162 because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

antoine162 on (2025-01-20 18:01:20 UTC): @robodoo rebase-ff

robodoo on (2025-01-20 18:01:22 UTC): Merge method set to rebase and fast-forward.

"
2789385555,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193672
Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-15 10:15:36+00:00,[],2025-01-30 18:09:13+00:00,2025-01-16 17:49:33+00:00,https://github.com/odoo/odoo/pull/193713,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592227665, 'issue_id': 2789385555, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193713.png)](https://mergebot.odoo.com/odoo/odoo/pull/193713)', 'created_at': datetime.datetime(2025, 1, 15, 10, 15, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592227698, 'issue_id': 2789385555, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 10, 15, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592293052, 'issue_id': 2789385555, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 10, 45, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592736336, 'issue_id': 2789385555, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 41, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592736423, 'issue_id': 2789385555, 'author': 'robodoo', 'body': '@asno-odoo you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 15, 12, 41, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593049455, 'issue_id': 2789385555, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 14, 43, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595524082, 'issue_id': 2789385555, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 12, 46, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:15:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193713.png)](https://mergebot.odoo.com/odoo/odoo/pull/193713)

fw-bot (Issue Creator) on (2025-01-15 10:15:37 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 10:45:37 UTC): @asno-odoo @jugj-odoo ci/runbot failed on this forward-port PR

asno-odoo on (2025-01-15 12:41:02 UTC): robodoo r+

robodoo on (2025-01-15 12:41:04 UTC): @asno-odoo you may want to rebuild or fix this PR as it has failed CI.

fw-bot (Issue Creator) on (2025-01-15 14:43:37 UTC): @asno-odoo @jugj-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

asno-odoo on (2025-01-16 12:46:16 UTC): robodoo r+

"
2789384514,pull_request,closed,,[FW][FIX] account: translate tax tags,"The tax tags are translatable but never translated automatically because they are generated dynamically from the tax report.

This commit aims at improving this by translating automatically the tags that match exactly the name of the tax report line, for instance in Israel.

Forward-Port-Of: odoo/odoo#192233",fw-bot,2025-01-15 10:15:12+00:00,[],2025-01-29 16:28:28+00:00,2025-01-15 16:27:52+00:00,https://github.com/odoo/odoo/pull/193712,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592226688, 'issue_id': 2789384514, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193712.png)](https://mergebot.odoo.com/odoo/odoo/pull/193712)', 'created_at': datetime.datetime(2025, 1, 15, 10, 15, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592226708, 'issue_id': 2789384514, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 10, 15, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:15:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193712.png)](https://mergebot.odoo.com/odoo/odoo/pull/193712)

fw-bot (Issue Creator) on (2025-01-15 10:15:14 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789381399,pull_request,closed,,[IMP] product: Add tracking to field uom_id,"Following this PR: https://github.com/odoo/odoo/pull/184131

It is now possible for users to change the UoM of the product.
This change has a lot of impact on the product data, hence tracking any modification of the UoM will help any potential investigation.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",DavidFesquet,2025-01-15 10:13:45+00:00,[],2025-01-15 10:41:43+00:00,2025-01-15 10:41:39+00:00,https://github.com/odoo/odoo/pull/193711,[],"[{'comment_id': 2592223534, 'issue_id': 2789381399, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193711.png)](https://mergebot.odoo.com/odoo/odoo/pull/193711)', 'created_at': datetime.datetime(2025, 1, 15, 10, 13, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:13:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193711.png)](https://mergebot.odoo.com/odoo/odoo/pull/193711)

"
2789357092,pull_request,open,,[IMP] hr_contract: improve constraints on running contracts,"This PR refines the contract constraints by allowing multiple contracts to be in a running state simultaneously. An employee can have multiple active contracts only if the contracts are not flexible, planning-based, or attendance-based.

task-4374321

",ravb-odoo,2025-01-15 10:03:57+00:00,[],2025-02-07 08:52:48+00:00,,https://github.com/odoo/odoo/pull/193710,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592196986, 'issue_id': 2789357092, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193710.png)](https://mergebot.odoo.com/odoo/odoo/pull/193710)', 'created_at': datetime.datetime(2025, 1, 15, 10, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 10:04:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193710.png)](https://mergebot.odoo.com/odoo/odoo/pull/193710)

"
2789321079,pull_request,closed,,[FIX] test_discuss_full: remove implicit dependency on whatsapp,"Removes the implicit dependency on whatsapp.
We instead override the method in `test_discuss_full_enterprise` such that the tests passes both with community only and community + enterprise.

Runbot Error:
 - 109621
 - 109622
 - 111962
 - 111963
 - 111964
 - 111965

Related to: https://github.com/odoo/enterprise/pull/77157",Williambraecky,2025-01-15 09:47:47+00:00,[],2025-01-30 18:09:14+00:00,2025-01-16 17:49:38+00:00,https://github.com/odoo/odoo/pull/193709,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592154735, 'issue_id': 2789321079, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193709.png)](https://mergebot.odoo.com/odoo/odoo/pull/193709)', 'created_at': datetime.datetime(2025, 1, 15, 9, 47, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595309097, 'issue_id': 2789321079, 'author': 'Williambraecky', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 47, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595309202, 'issue_id': 2789321079, 'author': 'robodoo', 'body': '@Williambraecky you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 16, 11, 47, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:47:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193709.png)](https://mergebot.odoo.com/odoo/odoo/pull/193709)

Williambraecky (Issue Creator) on (2025-01-16 11:47:46 UTC): robodoo r+

robodoo on (2025-01-16 11:47:49 UTC): @Williambraecky you may want to rebuild or fix this PR as it has failed CI.

"
2789312530,pull_request,open,,[FIX] core: disable typofix translations when upgrade,"[FIX] core: disable typofix translations when upgrade

Before:
The typofix feature treats terms in the old and new values with similar text
content as the same term, migrating the translations of the old term to the new
term.

For example

The old value has the mapping:
`'Draft': 'Brouillon'`

The new value contains the term:
`'<span invisible=""name or name_placeholder or quick_edit_mode"">Draft</span>'`

Since the old term and the new has the same text content `'Draft'`, after write,
the new term will reuse the old translation of `'Draft'`. However, the translation
`'Brouillon'` is always visible unlike its en_US term

Since the old term and the new term share the same text content, `'Draft'`, after
`write`, the new term reuses the old translation of `'Draft'`. However, the
translation `'Brouillon'` is always visible, unlike its en_US counterpart.

This behavior is acceptable in non-upgrade mode because the user writes the
en_US value and is responsible for verifying translations afterward. However, it
is problematic during upgrades because users cannot easily identify which
records have changed and need to be rechecked.

After:
1. Revert 7cd56fc as it is no longer needed.
2. Disable typofix translations during upgrades.
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",HydrionBurst,2025-01-15 09:43:50+00:00,[],2025-01-16 11:40:13+00:00,,https://github.com/odoo/odoo/pull/193708,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592145784, 'issue_id': 2789312530, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193708.png)](https://mergebot.odoo.com/odoo/odoo/pull/193708)', 'created_at': datetime.datetime(2025, 1, 15, 9, 43, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592151571, 'issue_id': 2789312530, 'author': 'HydrionBurst', 'body': 'Note:\r\nThis PR should only affect the upgrade/install and be safe for stable versions\r\nIf it improves the upgrade with no/acceptble side-effects, we will backport it to 16.0', 'created_at': datetime.datetime(2025, 1, 15, 9, 46, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:43:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193708.png)](https://mergebot.odoo.com/odoo/odoo/pull/193708)

HydrionBurst (Issue Creator) on (2025-01-15 09:46:27 UTC): Note:
This PR should only affect the upgrade/install and be safe for stable versions
If it improves the upgrade with no/acceptble side-effects, we will backport it to 16.0

"
2789309190,pull_request,closed,,[FW][IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.

Forward-Port-Of: odoo/odoo#193510",fw-bot,2025-01-15 09:42:17+00:00,[],2025-01-29 20:26:20+00:00,2025-01-15 20:15:23+00:00,https://github.com/odoo/odoo/pull/193707,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592141957, 'issue_id': 2789309190, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193707.png)](https://mergebot.odoo.com/odoo/odoo/pull/193707)', 'created_at': datetime.datetime(2025, 1, 15, 9, 42, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592141987, 'issue_id': 2789309190, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 42, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:42:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193707.png)](https://mergebot.odoo.com/odoo/odoo/pull/193707)

fw-bot (Issue Creator) on (2025-01-15 09:42:19 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789307634,pull_request,closed,,[FW][FIX] web_editor: fix video option in media dialog,"After merging of this PR [1], video tab will not be visible in media dialog in report as `allowCommandVideo` is false. But this will override `noVideos` option from `params` to false if `allowCommandVideo` is true and video tab will be visible even if `noVideos` is `true`.

This PR makes sure that `noVideos` property from `params` should be checked if `allowCommandVideo` is true.

[1]: 187251



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192838",fw-bot,2025-01-15 09:41:38+00:00,[],2025-01-30 09:03:17+00:00,2025-01-16 08:57:11+00:00,https://github.com/odoo/odoo/pull/193706,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592140562, 'issue_id': 2789307634, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193706.png)](https://mergebot.odoo.com/odoo/odoo/pull/193706)', 'created_at': datetime.datetime(2025, 1, 15, 9, 41, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592140638, 'issue_id': 2789307634, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 41, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:41:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193706.png)](https://mergebot.odoo.com/odoo/odoo/pull/193706)

fw-bot (Issue Creator) on (2025-01-15 09:41:40 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789307023,pull_request,closed,,[FW][FIX] mrp: finished date of unplanned work order,"Problem: When a manufacturing order with a work order that was not planned is completed, a resource.calendar.leave is created for the work order. During this process the work order’s date_finished field is recalculated. This means that this work order reserves a slot in the work center to be finished in the future even though it has already been completed.

Purpose: If the work order already has a date_finished value, then that value should be used instead of it being recalculated based on the availability of the work center. This will help ensure that completed work orders are not reserving time in a work center when it has already been completed.

Steps to Reproduce on Runbot:

1. Create a new storable product.
2. Create a BoM for this product and navigate to the Operations tab and add an operation.
3. Create a manufacturing order, confirm it, and then produce all without planning it.
4. Navigate to the completed work order and observe the finished date is in the future.
5. Navigate to the work centers working hours’ time off and find the record associated with the work order.
6. Observe that the end date is in the future.

opw-4393301

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192393",fw-bot,2025-01-15 09:41:22+00:00,[],2025-01-31 16:56:31+00:00,2025-01-17 16:37:20+00:00,https://github.com/odoo/odoo/pull/193705,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2592140017, 'issue_id': 2789307023, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193705.png)](https://mergebot.odoo.com/odoo/odoo/pull/193705)', 'created_at': datetime.datetime(2025, 1, 15, 9, 41, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592140047, 'issue_id': 2789307023, 'author': 'fw-bot', 'body': '@prri-odoo @Whenrow cherrypicking of pull request odoo/odoo#192393 failed.\n\nstdout:\n```\nAuto-merging addons/mrp/models/mrp_workorder.py\nAuto-merging addons/mrp/tests/test_order.py\nCONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 41, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596327473, 'issue_id': 2789307023, 'author': 'prri-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 17, 37, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596538059, 'issue_id': 2789307023, 'author': 'robodoo', 'body': '@prri-odoo @Whenrow unable to stage: merge conflict', 'created_at': datetime.datetime(2025, 1, 16, 19, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598390227, 'issue_id': 2789307023, 'author': 'prri-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 39, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:41:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193705.png)](https://mergebot.odoo.com/odoo/odoo/pull/193705)

fw-bot (Issue Creator) on (2025-01-15 09:41:24 UTC): @prri-odoo @Whenrow cherrypicking of pull request odoo/odoo#192393 failed.

stdout:
```
Auto-merging addons/mrp/models/mrp_workorder.py
Auto-merging addons/mrp/tests/test_order.py
CONFLICT (content): Merge conflict in addons/mrp/tests/test_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

prri-odoo on (2025-01-16 17:37:04 UTC): robodoo r+

robodoo on (2025-01-16 19:01:23 UTC): @prri-odoo @Whenrow unable to stage: merge conflict

prri-odoo on (2025-01-17 13:39:31 UTC): robodoo r+

"
2789272170,pull_request,open,,[FIX] l10n_in_pos: tax visibilty in reciept,"Before this commit:
- Previously, only the tax type was displayed on receipts and the tax percentage was missing for Indian localisation.

Following this commit:
- The tax percentage is now displayed alongside the tax type on receipts, improving transparency and accuracy.

task-4464136
",shag-odoo,2025-01-15 09:25:06+00:00,[],2025-01-29 12:29:50+00:00,,https://github.com/odoo/odoo/pull/193704,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592101762, 'issue_id': 2789272170, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193704.png)](https://mergebot.odoo.com/odoo/odoo/pull/193704)', 'created_at': datetime.datetime(2025, 1, 15, 9, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618462376, 'issue_id': 2789272170, 'author': 'shag-odoo', 'body': 'Hello @paso-odoo \r\nChanges are done\r\n\r\nThanks, and have a wonderful day ahead, innocent:', 'created_at': datetime.datetime(2025, 1, 28, 9, 50, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:25:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193704.png)](https://mergebot.odoo.com/odoo/odoo/pull/193704)

shag-odoo (Issue Creator) on (2025-01-28 09:50:41 UTC): Hello @paso-odoo 
Changes are done

Thanks, and have a wonderful day ahead, innocent:

"
2789268287,pull_request,open,,[FIX] website: blog tags do not get removed on refresh or search,"Before the change in the blog page of a website every tag but one disappears when opening the editor or when the search bar is used.

Steps to reproduce:

Log in Odoo with a user that can access the website editor Open the Website
Install the blog app if it is not already present
Open the blog app
Click on two or more tags to add them to the filter Open the Website editor or use the search bar
Every tag but one will be removed

After the change all the tags will be kept when opening the editor or using the searchbar.

task-4216129
Fixes #164577
",dabo-odoo,2025-01-15 09:23:19+00:00,[],2025-01-28 13:40:36+00:00,,https://github.com/odoo/odoo/pull/193703,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592097743, 'issue_id': 2789268287, 'author': 'robodoo', 'body': 'This PR targets the un-managed branch odoo/odoo:staging.16.0, it needs to be retargeted before it can be merged.', 'created_at': datetime.datetime(2025, 1, 15, 9, 23, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592113381, 'issue_id': 2789268287, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193703.png)](https://mergebot.odoo.com/odoo/odoo/pull/193703)', 'created_at': datetime.datetime(2025, 1, 15, 9, 30, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:23:21 UTC): This PR targets the un-managed branch odoo/odoo:staging.16.0, it needs to be retargeted before it can be merged.

robodoo on (2025-01-15 09:30:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193703.png)](https://mergebot.odoo.com/odoo/odoo/pull/193703)

"
2789267548,pull_request,closed,,[IMP] point_of_sale: improve price clarity in cards,"- Improve product price inside `product_info_popup` and `prodcut_info_banner`.

task-id: 4477205

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-15 09:22:58+00:00,[],2025-02-01 04:46:36+00:00,2025-01-18 02:24:54+00:00,https://github.com/odoo/odoo/pull/193702,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592097007, 'issue_id': 2789267548, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193702.png)](https://mergebot.odoo.com/odoo/odoo/pull/193702)', 'created_at': datetime.datetime(2025, 1, 15, 9, 23, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598413592, 'issue_id': 2789267548, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 13, 51, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:23:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193702.png)](https://mergebot.odoo.com/odoo/odoo/pull/193702)

caburj on (2025-01-17 13:51:55 UTC): robodoo r+

"
2789258011,pull_request,open,,[FIX] mail: prevent IndexError when data is empty,"Currently, an exception is raised when `_read_format`,  returned an empty list due to MissingError encountered - [1]. This issue was caused by attempting to access the first element `(data[0])` without checking if the list was empty.

error:  `IndexError: list index out of range.`

This commit resolves the issue by properly handling empty lists and skipping further processing in such cases.

[1] - https://github.com/odoo/odoo/blob/2a79d7d06d77d808cab00440bdac3c1e05c7bc1b/odoo/models.py#L4033
[2] - https://github.com/odoo/odoo/blob/2a79d7d06d77d808cab00440bdac3c1e05c7bc1b/addons/mail/models/mail_followers.py#L527

sentry-6021917973

",adip-odoo,2025-01-15 09:18:46+00:00,[],2025-02-07 10:50:41+00:00,,https://github.com/odoo/odoo/pull/193701,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592074117, 'issue_id': 2789258011, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193701.png)](https://mergebot.odoo.com/odoo/odoo/pull/193701)', 'created_at': datetime.datetime(2025, 1, 15, 9, 18, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:18:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193701.png)](https://mergebot.odoo.com/odoo/odoo/pull/193701)

"
2789253824,pull_request,closed,,[FW][FIX] website: fix image link alignment in the image gallery,"Steps to reproduce the issue:

- In Website edit mode, drag and drop an ""Image Gallery"" block onto the page.
- Select ""Full"" as the ""Content Width"" option for the ""Image Gallery"" block.
- Click on the image.
- Add a link to the image.
- Zoom the page to 50% using the browser tool.
- Bug: the image is aligned to the left instead of being centered.
- Remove the link: the image is correctly centered.

opw-4458747

Forward-Port-Of: odoo/odoo#193585",fw-bot,2025-01-15 09:17:02+00:00,[],2025-01-29 16:28:27+00:00,2025-01-15 16:27:43+00:00,https://github.com/odoo/odoo/pull/193700,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592067261, 'issue_id': 2789253824, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193700.png)](https://mergebot.odoo.com/odoo/odoo/pull/193700)', 'created_at': datetime.datetime(2025, 1, 15, 9, 17, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592067288, 'issue_id': 2789253824, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 17, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:17:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193700.png)](https://mergebot.odoo.com/odoo/odoo/pull/193700)

fw-bot (Issue Creator) on (2025-01-15 09:17:04 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2789253231,pull_request,closed,,[FW][FIX] website_sale: adapt checkout if delivery address is disabled,"Steps to reproduce:
1) Go to website settings and disable 'Shipping address'
2) Add to cart deliverable product and go to checkout
3) See the broken UI

This PR adapts UI to the setting of disabling delivery address.

opw-4367079

Forward-Port-Of: odoo/odoo#191180",fw-bot,2025-01-15 09:16:46+00:00,[],2025-01-30 10:23:43+00:00,2025-01-16 10:12:27+00:00,https://github.com/odoo/odoo/pull/193699,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592066628, 'issue_id': 2789253231, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193699.png)](https://mergebot.odoo.com/odoo/odoo/pull/193699)', 'created_at': datetime.datetime(2025, 1, 15, 9, 16, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592066650, 'issue_id': 2789253231, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 16, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592171348, 'issue_id': 2789253231, 'author': 'fw-bot', 'body': '@vchu-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 9, 54, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592821081, 'issue_id': 2789253231, 'author': 'fw-bot', 'body': '@vchu-odoo the next pull request (odoo/odoo#193751) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 13, 10, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594729154, 'issue_id': 2789253231, 'author': 'vchu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 37, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:16:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193699.png)](https://mergebot.odoo.com/odoo/odoo/pull/193699)

fw-bot (Issue Creator) on (2025-01-15 09:16:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 09:54:57 UTC): @vchu-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 13:10:48 UTC): @vchu-odoo the next pull request (odoo/odoo#193751) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vchu-odoo on (2025-01-16 07:37:30 UTC): @robodoo r+

"
2789252687,pull_request,closed,,[FW][FIX] web_editor: UI stuck when image crop denied,"Steps to produce:
- Drop 'Text - Image' block
- Replace image by illustration
- Try to crop image
- A notification is displayed
- Try saving

The issue is ImageCrop is still not opened and we are trying to wait for image_cropper_destroyed to trigger,
so here we check if ImageCrop is not opened.

task-4246644

Forward-Port-Of: odoo/odoo#193679
Forward-Port-Of: odoo/odoo#188577",fw-bot,2025-01-15 09:16:29+00:00,[],2025-01-20 15:35:50+00:00,2025-01-18 19:04:14+00:00,https://github.com/odoo/odoo/pull/193698,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2592066253, 'issue_id': 2789252687, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193698.png)](https://mergebot.odoo.com/odoo/odoo/pull/193698)', 'created_at': datetime.datetime(2025, 1, 15, 9, 16, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592066288, 'issue_id': 2789252687, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 9, 16, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592154005, 'issue_id': 2789252687, 'author': 'fw-bot', 'body': '@shsa-odoo @qsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 15, 9, 47, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592786333, 'issue_id': 2789252687, 'author': 'fw-bot', 'body': '@shsa-odoo @qsm-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 12, 54, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592817713, 'issue_id': 2789252687, 'author': 'qsm-odoo', 'body': '@shsa-odoo What did you push-forced here?', 'created_at': datetime.datetime(2025, 1, 15, 13, 9, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592830481, 'issue_id': 2789252687, 'author': 'shsa-odoo', 'body': '@qsm-odoo simply rebased and pushed it.Known error was there from the tour `planning_split_shift_week` which was unrelated to our changes.', 'created_at': datetime.datetime(2025, 1, 15, 13, 15, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592849435, 'issue_id': 2789252687, 'author': 'qsm-odoo', 'body': ""@shsa-odoo But rebasing would not fix that. Push-forcing for no reason just makes the merge process slower and also slows down the runbot. What you have to do is just rebuild the sub-built that failed via the pull request dashboard.\r\n\r\nAnyways, 18.0 is wrong so you'll have to push-force here anyway now :grimacing:"", 'created_at': datetime.datetime(2025, 1, 15, 13, 23, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598768795, 'issue_id': 2789252687, 'author': 'robodoo', 'body': ""@shsa-odoo @qsm-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 16, 46, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:16:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193698.png)](https://mergebot.odoo.com/odoo/odoo/pull/193698)

fw-bot (Issue Creator) on (2025-01-15 09:16:38 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 09:47:29 UTC): @shsa-odoo @qsm-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 12:54:48 UTC): @shsa-odoo @qsm-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

qsm-odoo on (2025-01-15 13:09:19 UTC): @shsa-odoo What did you push-forced here?

shsa-odoo on (2025-01-15 13:15:12 UTC): @qsm-odoo simply rebased and pushed it.Known error was there from the tour `planning_split_shift_week` which was unrelated to our changes.

qsm-odoo on (2025-01-15 13:23:46 UTC): @shsa-odoo But rebasing would not fix that. Push-forcing for no reason just makes the merge process slower and also slows down the runbot. What you have to do is just rebuild the sub-built that failed via the pull request dashboard.

Anyways, 18.0 is wrong so you'll have to push-force here anyway now :grimacing:

robodoo on (2025-01-17 16:46:26 UTC): @shsa-odoo @qsm-odoo 'ci/runbot' failed on this reviewed PR.

"
2789235970,pull_request,closed,,[FIX] tests: use devtools emulated devices for Chrome viewport size,"To run tours or unit tests, we instrument Chrome and run it headlessly.
One of the arguments passed while doing so is the ""window size"" it needs
to use to emulate desktop-like or mobile-like screen sizes.

Newer versions of Chrome sometimes introduce slight variation between
the Chrome's window size and its viewport size (due to changes in the
interface layout...). While often not a deal-breaker, Chrome 128 forces
a min-width for the window greater than the breakpoint we use for
smaller/mobile-like testing (e.g. 375px, which matches a small
smartphone).

This commit changes the way we instrument Chrome to use a specific size
by using the DevTools' Emulated Device (aka. ""responsive mode""). It
allows to apply a very specific viewport's size independently of the
actual Chrome's window size, which makes it way more predictable than
before.

Note: this change is part of the preparation to support the ""new""
headless mode, which becomes the default starting with Chrome 128.

Reference:
- https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride",pparidans,2025-01-15 09:08:31+00:00,['pparidans'],2025-01-29 14:31:55+00:00,2025-01-15 14:30:40+00:00,https://github.com/odoo/odoo/pull/193696,"[('RD', 'research & development, internal work')]","[{'comment_id': 2592045497, 'issue_id': 2789235970, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193696.png)](https://mergebot.odoo.com/odoo/odoo/pull/193696)', 'created_at': datetime.datetime(2025, 1, 15, 9, 8, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592765838, 'issue_id': 2789235970, 'author': 'xmo-odoo', 'body': '@robodoo r+ fw=skipci', 'created_at': datetime.datetime(2025, 1, 15, 12, 48, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592766051, 'issue_id': 2789235970, 'author': 'robodoo', 'body': 'Not waiting for CI to create followup forward-ports.', 'created_at': datetime.datetime(2025, 1, 15, 12, 48, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 09:08:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193696.png)](https://mergebot.odoo.com/odoo/odoo/pull/193696)

xmo-odoo on (2025-01-15 12:48:57 UTC): @robodoo r+ fw=skipci

robodoo on (2025-01-15 12:48:59 UTC): Not waiting for CI to create followup forward-ports.

"
2789179399,pull_request,closed,,[IMP] hr_holidays: parallelize some rpcs,"Loading data sequentially is much slower than doing it in parallel, if thecalls are independant. This commit make the time off dashboard loading faster. This is only a simple change, but it already helps. Ideally, we would want to batch the requests together, but this would require more work.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ged-odoo,2025-01-15 08:46:17+00:00,[],2025-01-17 08:57:30+00:00,2025-01-16 20:13:13+00:00,https://github.com/odoo/odoo/pull/193694,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2591963314, 'issue_id': 2789179399, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193694.png)](https://mergebot.odoo.com/odoo/odoo/pull/193694)', 'created_at': datetime.datetime(2025, 1, 15, 8, 46, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595992582, 'issue_id': 2789179399, 'author': 'tivisse', 'body': ""@robodoo r+\r\n\r\nThanks for the fix, we're investigating to make a followup. :)"", 'created_at': datetime.datetime(2025, 1, 16, 15, 14, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 08:46:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193694.png)](https://mergebot.odoo.com/odoo/odoo/pull/193694)

tivisse on (2025-01-16 15:14:02 UTC): @robodoo r+

Thanks for the fix, we're investigating to make a followup. :)

"
2789149463,pull_request,closed,,[IMP] im_livechat: add continue button when chat bot is done,"
When the chat bot is completed, the visitor is in a dead-end. He
can either restart the script, or close the chat window. This PR
adds a continue button to reach the feedback panel.

task-4433028",tsm-odoo,2025-01-15 08:32:39+00:00,[],2025-01-15 18:49:40+00:00,2025-01-15 18:18:05+00:00,https://github.com/odoo/odoo/pull/193693,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591933588, 'issue_id': 2789149463, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193693.png)](https://mergebot.odoo.com/odoo/odoo/pull/193693)', 'created_at': datetime.datetime(2025, 1, 15, 8, 32, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592670374, 'issue_id': 2789149463, 'author': 'robodoo', 'body': ""@tsm-odoo @alexkuhn 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 12, 25, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592846814, 'issue_id': 2789149463, 'author': 'robodoo', 'body': ""@tsm-odoo 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 13, 22, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592859813, 'issue_id': 2789149463, 'author': 'tsm-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 13, 28, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 08:32:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193693.png)](https://mergebot.odoo.com/odoo/odoo/pull/193693)

robodoo on (2025-01-15 12:25:08 UTC): @tsm-odoo @alexkuhn 'ci/upgrade_enterprise' failed on this reviewed PR.

robodoo on (2025-01-15 13:22:36 UTC): @tsm-odoo 'ci/upgrade_enterprise' failed on this reviewed PR.

tsm-odoo (Issue Creator) on (2025-01-15 13:28:24 UTC): @robodoo r+

"
2789147404,pull_request,closed,,[FIX] point_of_sale: avoid duplicate prep card for split orders,"- Avoid duplicating ticket in preparation display when paying a split order.
- Don't call `this.pos.sendOrderInPreparation` after paying an order if this order is splitted or is a split from an other order.
- Inside  `pos_preparation_display.sync_from_ui` only call `process_order` if it the order is not splitted/splitting.

Steps to Reproduce:
- Add items to the cart and confirm an order.
- A preparation is created in the PD (correct behavior).
- Go back to the table, split the order, and pay for some lines.
- Previously, a duplicate preparation card was created for split lines in the PD (incorrect behavior).

enterprise PR: https://github.com/odoo/enterprise/pull/77150

task-id: 4476871

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-15 08:31:31+00:00,[],2025-01-20 14:16:29+00:00,2025-01-20 13:17:36+00:00,https://github.com/odoo/odoo/pull/193692,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591931517, 'issue_id': 2789147404, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193692.png)](https://mergebot.odoo.com/odoo/odoo/pull/193692)', 'created_at': datetime.datetime(2025, 1, 15, 8, 31, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 08:31:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193692.png)](https://mergebot.odoo.com/odoo/odoo/pull/193692)

"
2789112188,pull_request,closed,,[IMP] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/4f96c47e6 [REL] 18.2.0-alpha.2 Task: 0
https://github.com/odoo/o-spreadsheet/commit/a686de062 [REV] collaborative: always trigger collaborative event received Task: 0
https://github.com/odoo/o-spreadsheet/commit/702f816bc [REL] 18.2.0-alpha.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/f963b92dc [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/8c0c0b0aa [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/8c464c169 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/6efae30e4 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/caa05cb75 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/abb81f0ac [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/59606e635 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/b63c922e1 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/ea553ef6e [REF] charts: rename copyForSheetId method Task: 4447450
https://github.com/odoo/o-spreadsheet/commit/5482a2101 [REF] pivot, clickable cells: iterate over visible positions Task: 4461339
https://github.com/odoo/o-spreadsheet/commit/45998ae18 [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/77a3e0462 [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/37b8e0402 [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/a7552fd96 [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/5f27a7e96 [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/a8cc48497 [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/df4cb384e [IMP] chart: add custom tooltip for charts Task: 4351271
https://github.com/odoo/o-spreadsheet/commit/c6fc50f92 [FIX] chart: labels should not be truncated in tooltip Task: 4351338
https://github.com/odoo/o-spreadsheet/commit/4467b4f24 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/278c04747 [FIX] charts: disable waterfall legend onClick Task: 4413802
https://github.com/odoo/o-spreadsheet/commit/812b04a3c [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/621cc11b6 [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/adbd25b6b [IMP] CoreViewPlugin: Remove access to dispatch Task: 4241403
https://github.com/odoo/o-spreadsheet/commit/3bfd3d15b [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/37f2328a8 [REF] helpers: introduce getUniqueText Task: 4440233
https://github.com/odoo/o-spreadsheet/commit/e8c979c30 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/7114f281c [IMP] data: bump version to 25 Task: 0
https://github.com/odoo/o-spreadsheet/commit/0ed70d279 [IMP] demo: Allow access to the session/transporservice on local network Task: 0
https://github.com/odoo/o-spreadsheet/commit/0f4591583 [REL] Bump master version to 18.2.0-alpha.0 Task: 0
https://github.com/odoo/o-spreadsheet/commit/f0077151b [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-15 08:12:07+00:00,[],2025-01-30 09:03:15+00:00,2025-01-16 08:49:22+00:00,https://github.com/odoo/odoo/pull/193691,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2591896183, 'issue_id': 2789112188, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 15, 8, 12, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591896226, 'issue_id': 2789112188, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193691.png)](https://mergebot.odoo.com/odoo/odoo/pull/193691)', 'created_at': datetime.datetime(2025, 1, 15, 8, 12, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591896276, 'issue_id': 2789112188, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 15, 8, 12, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594624481, 'issue_id': 2789112188, 'author': 'pro-odoo', 'body': 'robodoo rebase-merge r+', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594624561, 'issue_id': 2789112188, 'author': 'robodoo', 'body': 'Merge method set to rebase and merge, using the PR as merge commit message.', 'created_at': datetime.datetime(2025, 1, 16, 6, 19, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594675363, 'issue_id': 2789112188, 'author': 'robodoo', 'body': '@rrahir @pro-odoo linked pull request(s) odoo/enterprise#77171 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 1, 16, 7, 0, 19, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-15 08:12:09 UTC): robodoo fw=no

robodoo on (2025-01-15 08:12:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193691.png)](https://mergebot.odoo.com/odoo/odoo/pull/193691)

robodoo on (2025-01-15 08:12:12 UTC): Disabled forward-porting.

pro-odoo on (2025-01-16 06:19:47 UTC): robodoo rebase-merge r+

robodoo on (2025-01-16 06:19:51 UTC): Merge method set to rebase and merge, using the PR as merge commit message.

robodoo on (2025-01-16 07:00:19 UTC): @rrahir @pro-odoo linked pull request(s) odoo/enterprise#77171 not ready. Linked PRs are not staged until all of them are ready.

"
2789111340,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/002aa4a33 [REL] 18.1.2 Task: 0
https://github.com/odoo/o-spreadsheet/commit/290f6fc1a [REV] collaborative: always trigger collaborative event received Task: 0
https://github.com/odoo/o-spreadsheet/commit/d0fa5de3d [REL] 18.1.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/3989a9226 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/93c32a1f4 [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/afb3737f8 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/bfaeffa36 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/453ea4bd9 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/7b120ef35 [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/dbe130468 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/80c784083 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/92b29c1da [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/0b78315a8 [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/4cf2a608d [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/206826a2d [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/8fcd63b73 [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/207b1c42d [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/a071ee0f5 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/d2de6798d [FIX] charts: disable waterfall legend onClick Task: 4413802
https://github.com/odoo/o-spreadsheet/commit/f8d83530b [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/8a217288b [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/948abaa5d [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/8688f938e [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/089ee4f48 [IMP] data: bump version to 25 Task: 0
https://github.com/odoo/o-spreadsheet/commit/c520e896c [REL] version 18.1.0
https://github.com/odoo/o-spreadsheet/commit/f0077151b [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-15 08:11:38+00:00,[],2025-01-30 08:45:17+00:00,2025-01-16 08:42:47+00:00,https://github.com/odoo/odoo/pull/193690,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591895353, 'issue_id': 2789111340, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591895376, 'issue_id': 2789111340, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193690.png)](https://mergebot.odoo.com/odoo/odoo/pull/193690)', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591895494, 'issue_id': 2789111340, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594619107, 'issue_id': 2789111340, 'author': 'pro-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 6, 15, 18, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-15 08:11:39 UTC): robodoo fw=no

robodoo on (2025-01-15 08:11:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193690.png)](https://mergebot.odoo.com/odoo/odoo/pull/193690)

robodoo on (2025-01-15 08:11:44 UTC): Disabled forward-porting.

pro-odoo on (2025-01-16 06:15:18 UTC): robodoo r+

"
2789111056,pull_request,closed,,[FIX] web: tooltip: do no show it when you click on a button,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adr-odoo,2025-01-15 08:11:28+00:00,['adr-odoo'],2025-01-22 07:20:11+00:00,2025-01-21 18:54:28+00:00,https://github.com/odoo/odoo/pull/193689,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2591895149, 'issue_id': 2789111056, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193689.png)](https://mergebot.odoo.com/odoo/odoo/pull/193689)', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604720102, 'issue_id': 2789111056, 'author': 'robodoo', 'body': '@adr-odoo @res-odoo because this PR has multiple commits, I need to know how to merge it:\n\n* `merge` to merge directly, using the PR as merge commit message\n* `rebase-merge` to rebase and merge, using the PR as merge commit message\n* `rebase-ff` to rebase and fast-forward', 'created_at': datetime.datetime(2025, 1, 21, 13, 20, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604722546, 'issue_id': 2789111056, 'author': 'res-odoo', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 1, 21, 13, 21, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604722630, 'issue_id': 2789111056, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 21, 13, 22, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 08:11:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193689.png)](https://mergebot.odoo.com/odoo/odoo/pull/193689)

robodoo on (2025-01-21 13:20:54 UTC): @adr-odoo @res-odoo because this PR has multiple commits, I need to know how to merge it:

* `merge` to merge directly, using the PR as merge commit message
* `rebase-merge` to rebase and merge, using the PR as merge commit message
* `rebase-ff` to rebase and fast-forward

res-odoo on (2025-01-21 13:21:58 UTC): @robodoo rebase-ff

robodoo on (2025-01-21 13:22:01 UTC): Merge method set to rebase and fast-forward.

"
2789110454,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/94c45c7c3 [REL] 18.0.10 Task: 0
https://github.com/odoo/o-spreadsheet/commit/e1d850152 [REV] collaborative: always trigger collaborative event received Task: 0
https://github.com/odoo/o-spreadsheet/commit/0c5220e86 [REL] 18.0.9 Task: 0
https://github.com/odoo/o-spreadsheet/commit/883dc0ae4 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/57aa8a7c7 [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/d71d23f97 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/de1268b08 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/d926ab9e3 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/4eb819fa8 [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/fa35e56dc [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/5ae37ce00 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/bef5abccc [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/226fa6ad5 [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/85aaab61d [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/aebd38c9d [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/93eb716fc [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/3d0c96bd3 [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/3627052ae [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/61d79cd1e [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/707d19875 [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/2687f536a [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/144842902 [FIX] package: 18.0 is no longer the latest version Task: 0
https://github.com/odoo/o-spreadsheet/commit/66f0c66f8 [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/a59494344 [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-15 08:11:08+00:00,[],2025-01-30 05:46:42+00:00,2025-01-16 05:03:09+00:00,https://github.com/odoo/odoo/pull/193688,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591894515, 'issue_id': 2789110454, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591894629, 'issue_id': 2789110454, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193688.png)](https://mergebot.odoo.com/odoo/odoo/pull/193688)', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591894656, 'issue_id': 2789110454, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 15, 8, 11, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593090206, 'issue_id': 2789110454, 'author': 'VincentSchippefilt', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 59, 1, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-15 08:11:09 UTC): robodoo fw=no

robodoo on (2025-01-15 08:11:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193688.png)](https://mergebot.odoo.com/odoo/odoo/pull/193688)

robodoo on (2025-01-15 08:11:14 UTC): Disabled forward-porting.

VincentSchippefilt on (2025-01-15 14:59:01 UTC): robodoo r+

"
2789109502,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/9e0f399eb [REL] 17.4.18 Task: 0
https://github.com/odoo/o-spreadsheet/commit/bab32998e [REV] collaborative: always trigger collaborative event received Task: 0
https://github.com/odoo/o-spreadsheet/commit/fd2a7abc6 [REL] 17.4.17 Task: 0
https://github.com/odoo/o-spreadsheet/commit/786c545e4 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/05706d48f [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/20bae6b47 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/558a37892 [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/cb63a66c2 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/752a02078 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/ab456e6a3 [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/443f9f7a2 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/cad0d9d2e [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/1f2714533 [FIX] xlsx: import new lines in sharedStrings Task: 4044862

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-15 08:10:35+00:00,[],2025-01-29 13:26:34+00:00,2025-01-15 13:08:22+00:00,https://github.com/odoo/odoo/pull/193687,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591893632, 'issue_id': 2789109502, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591893669, 'issue_id': 2789109502, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193687.png)](https://mergebot.odoo.com/odoo/odoo/pull/193687)', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591893708, 'issue_id': 2789109502, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592462527, 'issue_id': 2789109502, 'author': 'VincentSchippefilt', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 11, 34, 19, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-15 08:10:37 UTC): robodoo fw=no

robodoo on (2025-01-15 08:10:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193687.png)](https://mergebot.odoo.com/odoo/odoo/pull/193687)

robodoo on (2025-01-15 08:10:40 UTC): Disabled forward-porting.

VincentSchippefilt on (2025-01-15 11:34:19 UTC): robodoo r+

"
2789108479,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/e12286d42 [REL] 17.2.32 Task: 0
https://github.com/odoo/o-spreadsheet/commit/5c945f62c [REV] collaborative: always trigger collaborative event received Task: 0
https://github.com/odoo/o-spreadsheet/commit/306dbf74b [REL] 17.2.31 Task: 0
https://github.com/odoo/o-spreadsheet/commit/5a43cc452 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/f1319ba01 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/61c7ac5da [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/30e1e3758 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/d8f81f1e6 [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/a036569e6 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/eb99bab02 [FIX] charts: translate gauge chart titles Task: 4421055

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-15 08:10:02+00:00,[],2025-01-29 13:26:37+00:00,2025-01-15 13:13:19+00:00,https://github.com/odoo/odoo/pull/193686,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591892766, 'issue_id': 2789108479, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591892780, 'issue_id': 2789108479, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193686.png)](https://mergebot.odoo.com/odoo/odoo/pull/193686)', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591892839, 'issue_id': 2789108479, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 15, 8, 10, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592461624, 'issue_id': 2789108479, 'author': 'VincentSchippefilt', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 11, 33, 52, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-15 08:10:04 UTC): robodoo fw=no

robodoo on (2025-01-15 08:10:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193686.png)](https://mergebot.odoo.com/odoo/odoo/pull/193686)

robodoo on (2025-01-15 08:10:06 UTC): Disabled forward-porting.

VincentSchippefilt on (2025-01-15 11:33:52 UTC): robodoo r+

"
2789107213,pull_request,open,,[IMP]Improve ux,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",mepe-odoo,2025-01-15 08:09:20+00:00,[],2025-02-06 16:24:23+00:00,,https://github.com/odoo/odoo/pull/193685,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591891665, 'issue_id': 2789107213, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193685.png)](https://mergebot.odoo.com/odoo/odoo/pull/193685)', 'created_at': datetime.datetime(2025, 1, 15, 8, 9, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 08:09:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193685.png)](https://mergebot.odoo.com/odoo/odoo/pull/193685)

"
2789054057,pull_request,closed,,[FW][FIX] point_of_sale: disable payment method,"Steps to reproduce:
--------------------------
- Install the point_of_sale module.
- Set up any payment terminal.
- Attempt payment using the terminal.
- Cancel the transaction request.

Issue:
--------
- Payment method button remains in progress mode after canceling the transaction.
- In mobile view, the payment status message lacks a visible background.

Cause:
---------
- Transaction progress state is not reset after a successful cancellation.
- Missing responsive classes for mobile view.

Fix:
----
- Reset the payment method progress state after a successful cancellation.
- Add appropriate classes to ensure the payment status background is visible across all views.

Task: 4427387

Forward-Port-Of: odoo/odoo#193409
Forward-Port-Of: odoo/odoo#191618",fw-bot,2025-01-15 07:40:03+00:00,[],2025-01-29 11:06:41+00:00,2025-01-15 10:45:36+00:00,https://github.com/odoo/odoo/pull/193684,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2591842689, 'issue_id': 2789054057, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193684.png)](https://mergebot.odoo.com/odoo/odoo/pull/193684)', 'created_at': datetime.datetime(2025, 1, 15, 7, 40, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591842707, 'issue_id': 2789054057, 'author': 'fw-bot', 'body': '@sjai-odoo @caburj this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 7, 40, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592053534, 'issue_id': 2789054057, 'author': 'sjai-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 11, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 07:40:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193684.png)](https://mergebot.odoo.com/odoo/odoo/pull/193684)

fw-bot (Issue Creator) on (2025-01-15 07:40:06 UTC): @sjai-odoo @caburj this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

sjai-odoo on (2025-01-15 09:11:18 UTC): @robodoo r+

"
2789021873,pull_request,open,,[IMP] l10n_in: cleanup unnecessary fields,"this commits removes the `l10n_in_journal_type` field because when the field was introduced in previous versions where orm didn't support the related fields in views. But now it does it's no longer required in the model

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",hamo-odoo,2025-01-15 07:19:29+00:00,[],2025-01-15 08:00:13+00:00,,https://github.com/odoo/odoo/pull/193683,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591813684, 'issue_id': 2789021873, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193683.png)](https://mergebot.odoo.com/odoo/odoo/pull/193683)', 'created_at': datetime.datetime(2025, 1, 15, 7, 19, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 07:19:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193683.png)](https://mergebot.odoo.com/odoo/odoo/pull/193683)

"
2789006739,pull_request,closed,,[FIX] l10n_it_edi: remove_signature dependencies fix,"There's an AttributeError issue with `cryptography==42.0.8` and `pyopenssl==24.1.0`, where `PKCS7_NOVERIFY` flag no longer exists in the cryptography module.

This PR backports and optimizes (2x) some homemade code introduced in `saas-17.3` as a fallback for PyOpenSSL.
See: PR #137572

We can investigate fixing the calls to `cryptography.hazmat.bindings._rust.test_support.pkcs7_verify` but it currently doesn't support the `PKCS7_NO_VERIFY` flag. The pyca team has a PR to re-introduce it in Rust, but at the moment it is not available.
See: pyca/cryptography#12116

NO_VERIFY is useful because sometimes certificates are not valid, and yet we still have to read the invoice which is badly signed. We cannot take for granted that the Tax Agency checks valid certificates, since it doesn't even properly check the ASN1 structure.

References:

- PyOpenSSL doesn't support load_pkcs7_data anymore. pyca/pyopenssl@0fe822d
- Cryptography has removed PKCS7_NOVERIFY: pyca/cryptography@615967b
  and is migrating PKCS7_verify to Rust: https://github.com/pyca/cryptography/blob/43.0.x/src/rust/src/types.rs#L333
- `asn1` library is pure Python and MIT licensed, but is slower than our homemade solution https://github.com/andrivet/python-asn1/blob/master/src/asn1.py",lordkrandel,2025-01-15 07:09:29+00:00,[],2025-01-16 14:14:13+00:00,2025-01-16 14:14:13+00:00,https://github.com/odoo/odoo/pull/193682,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591799737, 'issue_id': 2789006739, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193682.png)](https://mergebot.odoo.com/odoo/odoo/pull/193682)', 'created_at': datetime.datetime(2025, 1, 15, 7, 9, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595839877, 'issue_id': 2789006739, 'author': 'lordkrandel', 'body': 'In favour of https://github.com/odoo/odoo/pull/193950', 'created_at': datetime.datetime(2025, 1, 16, 14, 14, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 07:09:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193682.png)](https://mergebot.odoo.com/odoo/odoo/pull/193682)

lordkrandel (Issue Creator) on (2025-01-16 14:14:13 UTC): In favour of https://github.com/odoo/odoo/pull/193950

"
2788978320,pull_request,closed,,[FIX] l10n_it_edi: remove_signature dependencies fix,"There's an AttributeError issue with `cryptography==42.0.8` and `pyopenssl==24.1.0`, where PKCS7_NOVERIFY flag no longer exists in the cryptography module.

This PR backports and optimizes (2x) some homemade code introduced in `saas-17.3` as a fallback for PyOpenSSL.
See: PR odoo/odoo#137572

We can investigate fixing the calls to `cryptography.hazmat.bindings._rust.test_support.pkcs7_verify` but it currently doesn't support the PKCS7_NO_VERIFY flag. The `pyca` team has a PR to re-introduce it in Rust, but at the moment it is not available. 
See: https://github.com/pyca/cryptography/pull/12116

`NO_VERIFY` is useful because sometimes certificates are not valid, and yet we still have to read the invoice which is badly signed. We cannot take for granted that the Tax Agency checks valid certificates, since it doesn't even properly check the ASN1 structure.

References:

- PyOpenSSL doesn't support ``load_pkcs7_data`` anymore. https://github.com/pyca/pyopenssl/commit/0fe822dc8d6610b8ec9ebaff626d6bf23e0a7ad3
- Cryptography has removed PKCS7_NOVERIFY: https://github.com/pyca/cryptography/commit/615967bfab5b49e470fe7d0df44649c69fb9a847 and is migrating PKCS7_verify to Rust: https://github.com/pyca/cryptography/pull/8332 https://github.com/pyca/cryptography/blob/43.0.x/src/rust/src/types.rs#L333
- ``asn1`` library is pure Python and MIT licensed, but is slower than our homemade solution https://github.com/andrivet/python-asn1/blob/master/src/asn1.py
",lordkrandel,2025-01-15 06:50:19+00:00,[],2025-01-16 14:13:45+00:00,2025-01-16 14:13:45+00:00,https://github.com/odoo/odoo/pull/193681,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591775144, 'issue_id': 2788978320, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193681.png)](https://mergebot.odoo.com/odoo/odoo/pull/193681)', 'created_at': datetime.datetime(2025, 1, 15, 6, 50, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591820359, 'issue_id': 2788978320, 'author': 'lordkrandel', 'body': 'Here is some profiling result. Please test.\r\nWe already have some, but please have a broad look.\r\n\r\n![immagine](https://github.com/user-attachments/assets/16cbb5e8-69bc-427e-8fdf-1dfe6e011f0b)', 'created_at': datetime.datetime(2025, 1, 15, 7, 24, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591829369, 'issue_id': 2788978320, 'author': 'lordkrandel', 'body': ""P.S. I know PKCS7_NOVERIFY is just a constant value, and we could hardcode it, but I wouldn't count on `cryptography` again for now. If this Python version works, The `rust` version of the `cffi` is changing too much and too fast for what we need here at the moment. (unless we'll need to verify the certificates ourselves, then we'll need to use it again)."", 'created_at': datetime.datetime(2025, 1, 15, 7, 30, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595838407, 'issue_id': 2788978320, 'author': 'lordkrandel', 'body': 'In favour of https://github.com/odoo/odoo/pull/193950', 'created_at': datetime.datetime(2025, 1, 16, 14, 13, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 06:50:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193681.png)](https://mergebot.odoo.com/odoo/odoo/pull/193681)

lordkrandel (Issue Creator) on (2025-01-15 07:24:22 UTC): Here is some profiling result. Please test.
We already have some, but please have a broad look.

![immagine](https://github.com/user-attachments/assets/16cbb5e8-69bc-427e-8fdf-1dfe6e011f0b)

lordkrandel (Issue Creator) on (2025-01-15 07:30:57 UTC): P.S. I know PKCS7_NOVERIFY is just a constant value, and we could hardcode it, but I wouldn't count on `cryptography` again for now. If this Python version works, The `rust` version of the `cffi` is changing too much and too fast for what we need here at the moment. (unless we'll need to verify the certificates ourselves, then we'll need to use it again).

lordkrandel (Issue Creator) on (2025-01-16 14:13:42 UTC): In favour of https://github.com/odoo/odoo/pull/193950

"
2788526967,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-15 00:12:49+00:00,[],2025-01-29 16:28:24+00:00,2025-01-15 16:27:26+00:00,https://github.com/odoo/odoo/pull/193680,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2591358750, 'issue_id': 2788526967, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193680.png)](https://mergebot.odoo.com/odoo/odoo/pull/193680)', 'created_at': datetime.datetime(2025, 1, 15, 0, 12, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591358791, 'issue_id': 2788526967, 'author': 'fw-bot', 'body': '@HydrionBurst @rco-odoo cherrypicking of pull request odoo/odoo#193574 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/tests/test_translate.py\nCONFLICT (modify/delete): odoo/fields.py deleted in 365b4b310c69167962d3958c37df6287909ae371 and modified in 92dee61a25c9648f4dee930395c7a524b27e0946.  Version 92dee61a25c9648f4dee930395c7a524b27e0946 of odoo/fields.py left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 0, 12, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592169469, 'issue_id': 2788526967, 'author': 'HydrionBurst', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 54, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-15 00:12:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193680.png)](https://mergebot.odoo.com/odoo/odoo/pull/193680)

fw-bot (Issue Creator) on (2025-01-15 00:12:54 UTC): @HydrionBurst @rco-odoo cherrypicking of pull request odoo/odoo#193574 failed.

stdout:
```
Auto-merging odoo/addons/base/tests/test_translate.py
CONFLICT (modify/delete): odoo/fields.py deleted in 365b4b310c69167962d3958c37df6287909ae371 and modified in 92dee61a25c9648f4dee930395c7a524b27e0946.  Version 92dee61a25c9648f4dee930395c7a524b27e0946 of odoo/fields.py left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

HydrionBurst on (2025-01-15 09:54:20 UTC): @robodoo r+

"
2788425611,pull_request,closed,,[FW][FIX] web_editor: UI stuck when image crop denied,"Steps to produce:
- Drop 'Text - Image' block
- Replace image by illustration
- Try to crop image
- A notification is displayed
- Try saving

The issue is ImageCrop is still not opened and we are trying to wait for image_cropper_destroyed to trigger,
so here we check if ImageCrop is not opened.

task-4246644

Forward-Port-Of: odoo/odoo#188577",fw-bot,2025-01-14 22:47:31+00:00,[],2025-01-29 09:25:14+00:00,2025-01-15 09:16:11+00:00,https://github.com/odoo/odoo/pull/193679,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591264347, 'issue_id': 2788425611, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193679.png)](https://mergebot.odoo.com/odoo/odoo/pull/193679)', 'created_at': datetime.datetime(2025, 1, 14, 22, 47, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591264359, 'issue_id': 2788425611, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 22, 47, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591267958, 'issue_id': 2788425611, 'author': 'fw-bot', 'body': '@shsa-odoo @qsm-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 22, 50, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591660780, 'issue_id': 2788425611, 'author': 'fw-bot', 'body': '@shsa-odoo @qsm-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 5, 5, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591782689, 'issue_id': 2788425611, 'author': 'shsa-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 6, 56, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592815219, 'issue_id': 2788425611, 'author': 'qsm-odoo', 'body': '@shsa-odoo \r\n\r\nHow can what you merged here be right? \r\n![image](https://github.com/user-attachments/assets/5f73a74d-20aa-45ff-a7e1-e5cc79c04078)\r\n\r\nYou removed the ""is a check"" part of the last step but did not adapted the others? In 18.0, does not this mean that you don\'t click on anything? How can this work?', 'created_at': datetime.datetime(2025, 1, 15, 13, 8, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592842505, 'issue_id': 2788425611, 'author': 'qsm-odoo', 'body': ""@shsa-odoo I just confirmed... your test does not pass at all... you'll have to open a new PR to fix it. Then adapt the 18.1 version before merging it :/"", 'created_at': datetime.datetime(2025, 1, 15, 13, 20, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592878429, 'issue_id': 2788425611, 'author': 'shsa-odoo', 'body': '@qsm-odoo My bad , I totally missed that part when it becomes mandatory for other steps to be defined a run method. Should I reopen this PR and adapt the changes or should I make a new PR and ping you there.', 'created_at': datetime.datetime(2025, 1, 15, 13, 36, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593189665, 'issue_id': 2788425611, 'author': 'qsm-odoo', 'body': ""@shsa-odoo you'll have to open a new PR to fix it. Then adapt the 18.1 version before merging it"", 'created_at': datetime.datetime(2025, 1, 15, 15, 24, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593241161, 'issue_id': 2788425611, 'author': 'shsa-odoo', 'body': '@qsm-odoo here, I made one. Thanks.\r\n\r\nhttps://github.com/odoo/odoo/pull/193792/files\r\n\r\nPlease look into it.', 'created_at': datetime.datetime(2025, 1, 15, 15, 35, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 22:47:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193679.png)](https://mergebot.odoo.com/odoo/odoo/pull/193679)

fw-bot (Issue Creator) on (2025-01-14 22:47:33 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 22:50:30 UTC): @shsa-odoo @qsm-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 05:05:34 UTC): @shsa-odoo @qsm-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

shsa-odoo on (2025-01-15 06:56:26 UTC): @robodoo r+

qsm-odoo on (2025-01-15 13:08:11 UTC): @shsa-odoo 

How can what you merged here be right? 
![image](https://github.com/user-attachments/assets/5f73a74d-20aa-45ff-a7e1-e5cc79c04078)

You removed the ""is a check"" part of the last step but did not adapted the others? In 18.0, does not this mean that you don't click on anything? How can this work?

qsm-odoo on (2025-01-15 13:20:52 UTC): @shsa-odoo I just confirmed... your test does not pass at all... you'll have to open a new PR to fix it. Then adapt the 18.1 version before merging it :/

shsa-odoo on (2025-01-15 13:36:38 UTC): @qsm-odoo My bad , I totally missed that part when it becomes mandatory for other steps to be defined a run method. Should I reopen this PR and adapt the changes or should I make a new PR and ping you there.

qsm-odoo on (2025-01-15 15:24:46 UTC): @shsa-odoo you'll have to open a new PR to fix it. Then adapt the 18.1 version before merging it

shsa-odoo on (2025-01-15 15:35:44 UTC): @qsm-odoo here, I made one. Thanks.

https://github.com/odoo/odoo/pull/193792/files

Please look into it.

"
2788423542,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-14 22:45:39+00:00,[],2025-01-29 13:26:25+00:00,2025-01-15 12:30:51+00:00,https://github.com/odoo/odoo/pull/193678,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591261877, 'issue_id': 2788423542, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193678.png)](https://mergebot.odoo.com/odoo/odoo/pull/193678)', 'created_at': datetime.datetime(2025, 1, 14, 22, 45, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591261894, 'issue_id': 2788423542, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 22, 45, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591358763, 'issue_id': 2788423542, 'author': 'fw-bot', 'body': '@HydrionBurst @rco-odoo the next pull request (odoo/odoo#193680) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 0, 12, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592167939, 'issue_id': 2788423542, 'author': 'HydrionBurst', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 53, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 22:45:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193678.png)](https://mergebot.odoo.com/odoo/odoo/pull/193678)

fw-bot (Issue Creator) on (2025-01-14 22:45:41 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 00:12:52 UTC): @HydrionBurst @rco-odoo the next pull request (odoo/odoo#193680) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

HydrionBurst on (2025-01-15 09:53:41 UTC): @robodoo r+

"
2788366525,pull_request,closed,,[FIX] purchase: Fix taxes in the purchase order portal view,"From saas-17.4, the ""description"" field on ""account.tax"" has been changed from Char to Html. However, the portal view for the purchase order does not correctly render HTML fields in the taxes column.

As a result, the taxes are displayed using only the ""name"" field in the portal purchase order view.

opw-4439126

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jrbr-odoo,2025-01-14 22:05:38+00:00,[],2025-01-31 23:33:26+00:00,2025-01-17 23:15:40+00:00,https://github.com/odoo/odoo/pull/193677,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2591198566, 'issue_id': 2788366525, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193677.png)](https://mergebot.odoo.com/odoo/odoo/pull/193677)', 'created_at': datetime.datetime(2025, 1, 14, 22, 5, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598785807, 'issue_id': 2788366525, 'author': 'clesgow', 'body': 'LGTM, thanks!\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 55, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 22:05:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193677.png)](https://mergebot.odoo.com/odoo/odoo/pull/193677)

clesgow on (2025-01-17 16:55:45 UTC): LGTM, thanks!
@robodoo r+

"
2788342259,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-14 21:48:20+00:00,[],2025-01-29 13:26:28+00:00,2025-01-15 12:30:53+00:00,https://github.com/odoo/odoo/pull/193676,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591173805, 'issue_id': 2788342259, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193676.png)](https://mergebot.odoo.com/odoo/odoo/pull/193676)', 'created_at': datetime.datetime(2025, 1, 14, 21, 48, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591173826, 'issue_id': 2788342259, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 21, 48, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591242651, 'issue_id': 2788342259, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 22, 31, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592270854, 'issue_id': 2788342259, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 35, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 21:48:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193676.png)](https://mergebot.odoo.com/odoo/odoo/pull/193676)

fw-bot (Issue Creator) on (2025-01-14 21:48:22 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 22:31:42 UTC): @asno-odoo @jugj-odoo ci/runbot failed on this forward-port PR

asno-odoo on (2025-01-15 10:35:10 UTC): robodoo r+

"
2788308869,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-14 21:26:20+00:00,[],2025-01-29 13:26:30+00:00,2025-01-15 13:07:56+00:00,https://github.com/odoo/odoo/pull/193675,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591132957, 'issue_id': 2788308869, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193675.png)](https://mergebot.odoo.com/odoo/odoo/pull/193675)', 'created_at': datetime.datetime(2025, 1, 14, 21, 26, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591132970, 'issue_id': 2788308869, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 21, 26, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 21:26:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193675.png)](https://mergebot.odoo.com/odoo/odoo/pull/193675)

fw-bot (Issue Creator) on (2025-01-14 21:26:22 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788304932,pull_request,closed,,[FW][FIX] web_editor: UI stuck when image crop denied,"Steps to produce:
- Drop 'Text - Image' block
- Replace image by illustration
- Try to crop image
- A notification is displayed
- Try saving

The issue is ImageCrop is still not opened and we are trying to wait for image_cropper_destroyed to trigger,
so here we check if ImageCrop is not opened.

task-4246644

Forward-Port-Of: odoo/odoo#188577",fw-bot,2025-01-14 21:23:41+00:00,[],2025-01-20 15:35:38+00:00,2025-01-17 18:47:39+00:00,https://github.com/odoo/odoo/pull/193674,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591128996, 'issue_id': 2788304932, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193674.png)](https://mergebot.odoo.com/odoo/odoo/pull/193674)', 'created_at': datetime.datetime(2025, 1, 14, 21, 23, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591129016, 'issue_id': 2788304932, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 21, 23, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591660800, 'issue_id': 2788304932, 'author': 'fw-bot', 'body': ""@shsa-odoo @qsm-odoo child PR odoo/odoo#193679 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 15, 5, 5, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 21:23:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193674.png)](https://mergebot.odoo.com/odoo/odoo/pull/193674)

fw-bot (Issue Creator) on (2025-01-14 21:23:43 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 05:05:36 UTC): @shsa-odoo @qsm-odoo child PR odoo/odoo#193679 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

"
2788295016,pull_request,closed,,[IMP] website: warn when custom js not loaded,"Alternative/supplement of https://github.com/odoo/upgrade/pull/6137

Display a proper warning to the editors of `website` and on the login page instead of an error that removes all content from the webpage and prevents users from accessing settings where they could possibly address the erroneous JavaScript.
![image](https://github.com/user-attachments/assets/26d9f0d7-210b-48ee-a824-13be6429356f)

Example of invalid JS code that locks you out:
```
var core = require('web.core');
```

The custom JS editor checks for simple syntax errors, but doesn't check for invalid imports (and possibly some other potential errors). This means that saving the above code will present all users that attempt to load `user_custom_javascript` with a blank page displaying errors:
![image](https://github.com/user-attachments/assets/7017554a-b3c8-4ce4-b107-d94fbfab93e0)


There is nothing else there, because the `document` is cleared in its entirety with `document.body.childNodes[0].remove();`. This effectively locks out admins from accessing the backend or even logging in. 

This issue was first observed post-upgrade, because the contents of the file with the code are not updated (for that, see the PR in `odoo/upgrade`. Upon closer investigation, it turned out that it's possible to reproduce it in standard too, by simply making the code import an unavailable library.

The design and implementation in general is obviously just a draft, mostly to showcase the idea. Moreover, the codebase in 16, 17 and 18 varies greatly and it is not possible to forward port this specific solution. My hope with this PR is that the relevant teams (looking at you @odoo/rd-framework-js :D) will share their expertise.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",diagnoza,2025-01-14 21:16:46+00:00,[],2025-01-16 09:06:09+00:00,2025-01-16 09:06:08+00:00,https://github.com/odoo/odoo/pull/193673,"[('RD', 'research & development, internal work')]","[{'comment_id': 2591118517, 'issue_id': 2788295016, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193673.png)](https://mergebot.odoo.com/odoo/odoo/pull/193673)', 'created_at': datetime.datetime(2025, 1, 14, 21, 16, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592091959, 'issue_id': 2788295016, 'author': 'bastien-ipb', 'body': ""I'm not very confortable with the fact that the `module_loader` is changed in the web module due to website behaviour. You could override the module_loader in website through `odoo.loader`.\r\nAnd, I don't know if there another ways to add js in the `user_custom_javascript.js` file than with the website code editor. But if not, then you could check if there are errors beforehand. Like when the user wants to save the script by using `findErrors()`."", 'created_at': datetime.datetime(2025, 1, 15, 9, 20, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594950105, 'issue_id': 2788295016, 'author': 'diagnoza', 'body': 'Handled with https://github.com/odoo/odoo/pull/193912', 'created_at': datetime.datetime(2025, 1, 16, 9, 6, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 21:16:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193673.png)](https://mergebot.odoo.com/odoo/odoo/pull/193673)

bastien-ipb on (2025-01-15 09:20:55 UTC): I'm not very confortable with the fact that the `module_loader` is changed in the web module due to website behaviour. You could override the module_loader in website through `odoo.loader`.
And, I don't know if there another ways to add js in the `user_custom_javascript.js` file than with the website code editor. But if not, then you could check if there are errors beforehand. Like when the user wants to save the script by using `findErrors()`.

diagnoza (Issue Creator) on (2025-01-16 09:06:08 UTC): Handled with https://github.com/odoo/odoo/pull/193912

"
2788213056,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-14 20:23:46+00:00,[],2025-01-29 13:26:32+00:00,2025-01-15 13:08:10+00:00,https://github.com/odoo/odoo/pull/193672,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591032784, 'issue_id': 2788213056, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193672.png)](https://mergebot.odoo.com/odoo/odoo/pull/193672)', 'created_at': datetime.datetime(2025, 1, 14, 20, 23, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591032801, 'issue_id': 2788213056, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 20, 23, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592026470, 'issue_id': 2788213056, 'author': 'fw-bot', 'body': '@asno-odoo @jugj-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 9, 5, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592735552, 'issue_id': 2788213056, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 40, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592735715, 'issue_id': 2788213056, 'author': 'robodoo', 'body': 'This PR is already reviewed, reviewing it again is useless.', 'created_at': datetime.datetime(2025, 1, 15, 12, 40, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 20:23:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193672.png)](https://mergebot.odoo.com/odoo/odoo/pull/193672)

fw-bot (Issue Creator) on (2025-01-14 20:23:48 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 09:05:42 UTC): @asno-odoo @jugj-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

asno-odoo on (2025-01-15 12:40:44 UTC): robodoo r+

robodoo on (2025-01-15 12:40:47 UTC): This PR is already reviewed, reviewing it again is useless.

"
2788209249,pull_request,closed,,[FW][FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435

Forward-Port-Of: odoo/odoo#193450",fw-bot,2025-01-14 20:21:22+00:00,[],2025-01-29 09:25:12+00:00,2025-01-15 09:13:47+00:00,https://github.com/odoo/odoo/pull/193671,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2591028835, 'issue_id': 2788209249, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193671.png)](https://mergebot.odoo.com/odoo/odoo/pull/193671)', 'created_at': datetime.datetime(2025, 1, 14, 20, 21, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591028857, 'issue_id': 2788209249, 'author': 'fw-bot', 'body': '@sbel-odoo @davidmonnom this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193663\n* odoo/odoo#193649\n* odoo/odoo#193630\n* odoo/odoo#193612\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 20, 21, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591817242, 'issue_id': 2788209249, 'author': 'sbel-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 22, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 20:21:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193671.png)](https://mergebot.odoo.com/odoo/odoo/pull/193671)

fw-bot (Issue Creator) on (2025-01-14 20:21:24 UTC): @sbel-odoo @davidmonnom this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193663
* odoo/odoo#193649
* odoo/odoo#193630
* odoo/odoo#193612

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

sbel-odoo on (2025-01-15 07:22:03 UTC): @robodoo r+

"
2788193508,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-14 20:11:39+00:00,[],2025-01-29 11:56:55+00:00,2025-01-15 11:53:12+00:00,https://github.com/odoo/odoo/pull/193670,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591013021, 'issue_id': 2788193508, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193670.png)](https://mergebot.odoo.com/odoo/odoo/pull/193670)', 'created_at': datetime.datetime(2025, 1, 14, 20, 11, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591013042, 'issue_id': 2788193508, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 20, 11, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 20:11:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193670.png)](https://mergebot.odoo.com/odoo/odoo/pull/193670)

fw-bot (Issue Creator) on (2025-01-14 20:11:42 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788185639,pull_request,closed,,[FW][FIX] web_editor: UI stuck when image crop denied,"Steps to produce:
- Drop 'Text - Image' block
- Replace image by illustration
- Try to crop image
- A notification is displayed
- Try saving

The issue is ImageCrop is still not opened and we are trying to wait for image_cropper_destroyed to trigger,
so here we check if ImageCrop is not opened.

task-4246644

Forward-Port-Of: odoo/odoo#188577",fw-bot,2025-01-14 20:06:41+00:00,[],2025-01-31 18:00:44+00:00,2025-01-17 17:56:41+00:00,https://github.com/odoo/odoo/pull/193669,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2591004728, 'issue_id': 2788185639, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193669.png)](https://mergebot.odoo.com/odoo/odoo/pull/193669)', 'created_at': datetime.datetime(2025, 1, 14, 20, 6, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591004751, 'issue_id': 2788185639, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 20, 6, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 20:06:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193669.png)](https://mergebot.odoo.com/odoo/odoo/pull/193669)

fw-bot (Issue Creator) on (2025-01-14 20:06:43 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788148940,pull_request,closed,,[FW][FIX] l10n_ro_eFactura: Invoice content error detection,"### Before
-When the eFactura status was fetched and there was an invoice content error it was not displayed. This issue was due to both the overlooking of:
-  ​the 'nok' status (sent back by the Romanian authorities regarding the presence of errors in the invoice content) 
-  the file provided in the zip that would contain the errors

-The error message shown would also only contain the first error even if many were present.

### Now

-If the status fetched contains 'nok' and is therefore signaling the presence of invoice content errors, then the apposite error file is chosen instead of the file with the electronic signature. This allows for following logic to account for errors, to retrieve the error message and to provide the error file as the downloadable document. 

-The pop up shows all the errors with an increased width to account for more content.

task-4306506

Forward-Port-Of: odoo/odoo#190618",fw-bot,2025-01-14 19:44:13+00:00,[],2025-01-30 03:30:08+00:00,2025-01-16 03:25:37+00:00,https://github.com/odoo/odoo/pull/193668,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590965989, 'issue_id': 2788148940, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193668.png)](https://mergebot.odoo.com/odoo/odoo/pull/193668)', 'created_at': datetime.datetime(2025, 1, 14, 19, 44, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590966036, 'issue_id': 2788148940, 'author': 'fw-bot', 'body': '@aizu-odoo @qdp-odoo cherrypicking of pull request odoo/odoo#190618 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_ro_edi/models/account_move.py\nCONFLICT (content): Merge conflict in addons/l10n_ro_edi/models/account_move.py\nAuto-merging addons/l10n_ro_edi/models/ciusro_document.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 44, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592871789, 'issue_id': 2788148940, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 13, 33, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:44:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193668.png)](https://mergebot.odoo.com/odoo/odoo/pull/193668)

fw-bot (Issue Creator) on (2025-01-14 19:44:16 UTC): @aizu-odoo @qdp-odoo cherrypicking of pull request odoo/odoo#190618 failed.

stdout:
```
Auto-merging addons/l10n_ro_edi/models/account_move.py
CONFLICT (content): Merge conflict in addons/l10n_ro_edi/models/account_move.py
Auto-merging addons/l10n_ro_edi/models/ciusro_document.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-15 13:33:45 UTC): @robodoo r+

"
2788143112,pull_request,closed,,[FW][IMP] project: move and improve mail related tests,"Just some cleaning / update before going further in email changes.
This is done in 18.1 so that we can compare tests in 18.1 and 18.2+
in order to highlight changes.

Improve some push tests as they may be impacted by recipients
management change.

Add a ticket-like basic tests in test_mail, with acknowledgement
email based on template. This requires a new test model to avoid
messing with existing tests, notably performance.

Related to Task-4464566: [mail] Cover project/helpdesk gateway features
Prepares Task-4273479: [mail] Stop autofollow madness !
Prepares Task-4273479: [mail] Email-like recipients

Forward-Port-Of: odoo/odoo#193583",fw-bot,2025-01-14 19:40:35+00:00,[],2025-01-28 23:32:24+00:00,2025-01-14 23:01:06+00:00,https://github.com/odoo/odoo/pull/193667,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2590959987, 'issue_id': 2788143112, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193667.png)](https://mergebot.odoo.com/odoo/odoo/pull/193667)', 'created_at': datetime.datetime(2025, 1, 14, 19, 40, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590960026, 'issue_id': 2788143112, 'author': 'fw-bot', 'body': '@tde-banana-odoo cherrypicking of pull request odoo/odoo#193583 failed.\n\n* 71098c4d72dcdd08b4d22b366dadc003be2f87e0 <- on this commit\n* b46a4191065391ae1c285014339cc71f63cc2e4d\n\nstdout:\n```\nAuto-merging addons/mail/tests/common.py\nAuto-merging addons/project/tests/test_project_base.py\nAuto-merging addons/project/tests/test_project_mail_features.py\nCONFLICT (add/add): Merge conflict in addons/project/tests/test_project_mail_features.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 40, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590981423, 'issue_id': 2788143112, 'author': 'tde-banana-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 19, 53, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:40:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193667.png)](https://mergebot.odoo.com/odoo/odoo/pull/193667)

fw-bot (Issue Creator) on (2025-01-14 19:40:38 UTC): @tde-banana-odoo cherrypicking of pull request odoo/odoo#193583 failed.

* 71098c4d72dcdd08b4d22b366dadc003be2f87e0 <- on this commit
* b46a4191065391ae1c285014339cc71f63cc2e4d

stdout:
```
Auto-merging addons/mail/tests/common.py
Auto-merging addons/project/tests/test_project_base.py
Auto-merging addons/project/tests/test_project_mail_features.py
CONFLICT (add/add): Merge conflict in addons/project/tests/test_project_mail_features.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

tde-banana-odoo on (2025-01-14 19:53:22 UTC): @robodoo r+

"
2788142391,pull_request,closed,,[FW][FIX] mail: broken live call participant badge,"Before this commit the `LIVE` badge on the minimized call participant card had some styling issues. This was caused by missing padding on the related div tag and non-transparent background on the parent tag. This commit fixes the issue by introducing some padding and removing the css class that adds background opacity.

Before:
![Pasted image 20250113125543](https://github.com/user-attachments/assets/37573b8b-2ec1-4004-8171-3ff35655edc2)
![Pasted image 20250113152305](https://github.com/user-attachments/assets/2c7bda9c-23ec-4f09-b5ba-0afb9907e3ad)



After:
![image](https://github.com/user-attachments/assets/b2f6c159-7713-46d9-990a-817c6d4ec317)
![image](https://github.com/user-attachments/assets/f03e9072-85a1-4a11-bf4a-78aca68342c7)

Forward-Port-Of: odoo/odoo#193598
Forward-Port-Of: odoo/odoo#193516",fw-bot,2025-01-14 19:40:10+00:00,[],2025-01-15 22:34:38+00:00,2025-01-15 19:08:56+00:00,https://github.com/odoo/odoo/pull/193666,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590959289, 'issue_id': 2788142391, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193666.png)](https://mergebot.odoo.com/odoo/odoo/pull/193666)', 'created_at': datetime.datetime(2025, 1, 14, 19, 40, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590959317, 'issue_id': 2788142391, 'author': 'fw-bot', 'body': '@Atovange @alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 40, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592969340, 'issue_id': 2788142391, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 14, 15, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:40:11 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193666.png)](https://mergebot.odoo.com/odoo/odoo/pull/193666)

fw-bot (Issue Creator) on (2025-01-14 19:40:12 UTC): @Atovange @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-15 14:15:36 UTC): @robodoo r+

"
2788141870,pull_request,closed,,[FW][FIX] account: hide validate button on payment without oustanding,"This button is only useful for marking payments as paid when the matching doesn't do it automatically, which can only happen if there is no reconciliation being done, which only happens when there is no outstanding account used.

opw-4445889

Forward-Port-Of: odoo/odoo#193599
Forward-Port-Of: odoo/odoo#192563",fw-bot,2025-01-14 19:39:51+00:00,[],2025-01-29 01:01:56+00:00,2025-01-15 00:43:31+00:00,https://github.com/odoo/odoo/pull/193665,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590958799, 'issue_id': 2788141870, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193665.png)](https://mergebot.odoo.com/odoo/odoo/pull/193665)', 'created_at': datetime.datetime(2025, 1, 14, 19, 39, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590958818, 'issue_id': 2788141870, 'author': 'fw-bot', 'body': '@william-andre @rugo-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 39, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591117044, 'issue_id': 2788141870, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 21, 15, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:39:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193665.png)](https://mergebot.odoo.com/odoo/odoo/pull/193665)

fw-bot (Issue Creator) on (2025-01-14 19:39:53 UTC): @william-andre @rugo-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-14 21:15:52 UTC): @robodoo r+

"
2788090059,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-14 19:11:45+00:00,[],2025-01-29 11:06:35+00:00,2025-01-15 10:32:38+00:00,https://github.com/odoo/odoo/pull/193664,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590907551, 'issue_id': 2788090059, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193664.png)](https://mergebot.odoo.com/odoo/odoo/pull/193664)', 'created_at': datetime.datetime(2025, 1, 14, 19, 11, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590907566, 'issue_id': 2788090059, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 11, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592026806, 'issue_id': 2788090059, 'author': 'fw-bot', 'body': ""@asno-odoo @jugj-odoo child PR odoo/odoo#193672 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 15, 9, 5, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592044291, 'issue_id': 2788090059, 'author': 'asno-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 8, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:11:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193664.png)](https://mergebot.odoo.com/odoo/odoo/pull/193664)

fw-bot (Issue Creator) on (2025-01-14 19:11:47 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 09:05:43 UTC): @asno-odoo @jugj-odoo child PR odoo/odoo#193672 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

asno-odoo on (2025-01-15 09:08:17 UTC): robodoo r+

"
2788084418,pull_request,closed,,[FW][FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435

Forward-Port-Of: odoo/odoo#193450",fw-bot,2025-01-14 19:08:19+00:00,[],2025-01-29 09:25:08+00:00,2025-01-15 08:56:30+00:00,https://github.com/odoo/odoo/pull/193663,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590901639, 'issue_id': 2788084418, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193663.png)](https://mergebot.odoo.com/odoo/odoo/pull/193663)', 'created_at': datetime.datetime(2025, 1, 14, 19, 8, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590901707, 'issue_id': 2788084418, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 8, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:08:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193663.png)](https://mergebot.odoo.com/odoo/odoo/pull/193663)

fw-bot (Issue Creator) on (2025-01-14 19:08:23 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788077847,pull_request,closed,,[FW][IMP] l10n_it: Split Periodic & Annual Tax Reports,"Description of the issue this commit addresses:

The Italian tax report lacks clarity and can be improved both in readabilty and
usability by splitting the monthly and the annual reports.

---

Desired behavior after this commit is merged:

The Italian tax report is now split in a monthly and an annual report.
The report uses the sections mechanism to be split in the different parts it is
made from and clean the UI by not having everything on the same sreen.

---

Enterprise PR: https://github.com/odoo/enterprise/pull/62405
Task-3479785

---

I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193558
Forward-Port-Of: odoo/odoo#164064",fw-bot,2025-01-14 19:04:21+00:00,[],2025-01-29 19:08:02+00:00,2025-01-15 18:56:51+00:00,https://github.com/odoo/odoo/pull/193662,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590894027, 'issue_id': 2788077847, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193662.png)](https://mergebot.odoo.com/odoo/odoo/pull/193662)', 'created_at': datetime.datetime(2025, 1, 14, 19, 4, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590894070, 'issue_id': 2788077847, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 4, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590922003, 'issue_id': 2788077847, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 19, 19, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591479122, 'issue_id': 2788077847, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre this forward port of odoo/odoo#164064 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592266476, 'issue_id': 2788077847, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 10, 33, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592657021, 'issue_id': 2788077847, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 21, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 19:04:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193662.png)](https://mergebot.odoo.com/odoo/odoo/pull/193662)

fw-bot (Issue Creator) on (2025-01-14 19:04:25 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 19:19:46 UTC): @muab-odoo @william-andre ci/upgrade_enterprise failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 02:02:14 UTC): @muab-odoo @william-andre this forward port of odoo/odoo#164064 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-15 10:33:04 UTC): @muab-odoo @william-andre this PR was modified / updated and has become a normal PR. It must be merged directly.

william-andre on (2025-01-15 12:21:24 UTC): @robodoo r+

"
2788063964,pull_request,closed,,[FW][CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193539",fw-bot,2025-01-14 18:56:25+00:00,[],2025-01-15 07:36:20+00:00,2025-01-15 07:36:20+00:00,https://github.com/odoo/odoo/pull/193661,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590879136, 'issue_id': 2788063964, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193661.png)](https://mergebot.odoo.com/odoo/odoo/pull/193661)', 'created_at': datetime.datetime(2025, 1, 14, 18, 56, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590879207, 'issue_id': 2788063964, 'author': 'fw-bot', 'body': '@OSevangelist @mart-e cherrypicking of pull request odoo/odoo#193539 failed.\n\nstdout:\n```\nYou are currently cherry-picking commit 2aac3308515667940fe7172297db05b8d27691da.\n```\n\nstderr:\n```\nThe previous cherry-pick is now empty, possibly due to conflict resolution.\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 56, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:56:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193661.png)](https://mergebot.odoo.com/odoo/odoo/pull/193661)

fw-bot (Issue Creator) on (2025-01-14 18:56:29 UTC): @OSevangelist @mart-e cherrypicking of pull request odoo/odoo#193539 failed.

stdout:
```
You are currently cherry-picking commit 2aac3308515667940fe7172297db05b8d27691da.
```

stderr:
```
The previous cherry-pick is now empty, possibly due to conflict resolution.
```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788059979,pull_request,closed,,[FW][FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193574",fw-bot,2025-01-14 18:53:56+00:00,[],2025-01-29 13:53:06+00:00,2025-01-15 13:50:22+00:00,https://github.com/odoo/odoo/pull/193660,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590874702, 'issue_id': 2788059979, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193660.png)](https://mergebot.odoo.com/odoo/odoo/pull/193660)', 'created_at': datetime.datetime(2025, 1, 14, 18, 53, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590874721, 'issue_id': 2788059979, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 53, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:53:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193660.png)](https://mergebot.odoo.com/odoo/odoo/pull/193660)

fw-bot (Issue Creator) on (2025-01-14 18:53:57 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2788059536,pull_request,closed,,[FW][FIX] rpc: re-raise exceptions for http.py,"For my friends at tech support

Exceptions in RPC are handled and a Response is returned directly. It is a different behaviour than jsonrpc where the exception is raised and the dispatcher wraps it is a Response after logging the exception. The xmlrpc code should also raise an exception so that it can be handled in http.py. Adding here a way to detect if a Response was already generated for an exception in the exception handler of HTTP.

Related: #193208

Forward-Port-Of: odoo/odoo#193421",fw-bot,2025-01-14 18:53:39+00:00,[],2025-01-21 08:12:12+00:00,2025-01-21 07:45:38+00:00,https://github.com/odoo/odoo/pull/193659,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590874200, 'issue_id': 2788059536, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193659.png)](https://mergebot.odoo.com/odoo/odoo/pull/193659)', 'created_at': datetime.datetime(2025, 1, 14, 18, 53, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590874226, 'issue_id': 2788059536, 'author': 'fw-bot', 'body': '@Julien00859 cherrypicking of pull request odoo/odoo#193421 failed.\n\nstdout:\n```\nAuto-merging addons/auth_totp/tests/test_totp.py\nCONFLICT (content): Merge conflict in addons/auth_totp/tests/test_totp.py\nAuto-merging odoo/addons/test_rpc/tests/test_error.py\nAuto-merging odoo/http.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 53, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468629, 'issue_id': 2788059536, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 0, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600464033, 'issue_id': 2788059536, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173354, 'issue_id': 2788059536, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476185, 'issue_id': 2788059536, 'author': 'fw-bot', 'body': '@Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603716413, 'issue_id': 2788059536, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 5, 50, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:53:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193659.png)](https://mergebot.odoo.com/odoo/odoo/pull/193659)

fw-bot (Issue Creator) on (2025-01-14 18:53:41 UTC): @Julien00859 cherrypicking of pull request odoo/odoo#193421 failed.

stdout:
```
Auto-merging addons/auth_totp/tests/test_totp.py
CONFLICT (content): Merge conflict in addons/auth_totp/tests/test_totp.py
Auto-merging odoo/addons/test_rpc/tests/test_error.py
Auto-merging odoo/http.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-18 02:00:53 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:41 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:39 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:01:23 UTC): @Julien00859 this forward port of odoo/odoo#193421 is awaiting action (not merged or closed).

Julien00859 on (2025-01-21 05:50:55 UTC): @robodoo r+

"
2788016000,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 18:33:07+00:00,[],2025-01-29 09:25:12+00:00,2025-01-15 09:13:42+00:00,https://github.com/odoo/odoo/pull/193658,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590825475, 'issue_id': 2788016000, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193658.png)](https://mergebot.odoo.com/odoo/odoo/pull/193658)', 'created_at': datetime.datetime(2025, 1, 14, 18, 33, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590825497, 'issue_id': 2788016000, 'author': 'fw-bot', 'body': '@proose @clbr-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193637\n* odoo/odoo#193620\n* odoo/odoo#193582\n* odoo/odoo#193564\n* odoo/odoo#193550\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 33, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591795338, 'issue_id': 2788016000, 'author': 'clbr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 6, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:33:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193658.png)](https://mergebot.odoo.com/odoo/odoo/pull/193658)

fw-bot (Issue Creator) on (2025-01-14 18:33:09 UTC): @proose @clbr-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193637
* odoo/odoo#193620
* odoo/odoo#193582
* odoo/odoo#193564
* odoo/odoo#193550

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

clbr-odoo on (2025-01-15 07:06:13 UTC): @robodoo r+

"
2788006191,pull_request,closed,,[FW][FIX] l10n_ro_eFactura: Invoice content error detection,"### Before
-When the eFactura status was fetched and there was an invoice content error it was not displayed. This issue was due to both the overlooking of:
-  ​the 'nok' status (sent back by the Romanian authorities regarding the presence of errors in the invoice content) 
-  the file provided in the zip that would contain the errors

-The error message shown would also only contain the first error even if many were present.

### Now

-If the status fetched contains 'nok' and is therefore signaling the presence of invoice content errors, then the apposite error file is chosen instead of the file with the electronic signature. This allows for following logic to account for errors, to retrieve the error message and to provide the error file as the downloadable document. 

-The pop up shows all the errors with an increased width to account for more content.

task-4306506

Forward-Port-Of: odoo/odoo#190618",fw-bot,2025-01-14 18:28:42+00:00,[],2025-01-31 11:14:20+00:00,2025-01-17 11:02:09+00:00,https://github.com/odoo/odoo/pull/193657,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590811934, 'issue_id': 2788006191, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193657.png)](https://mergebot.odoo.com/odoo/odoo/pull/193657)', 'created_at': datetime.datetime(2025, 1, 14, 18, 28, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590811963, 'issue_id': 2788006191, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 28, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590966006, 'issue_id': 2788006191, 'author': 'fw-bot', 'body': '@aizu-odoo @qdp-odoo the next pull request (odoo/odoo#193668) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 19, 44, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597813809, 'issue_id': 2788006191, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 35, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:28:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193657.png)](https://mergebot.odoo.com/odoo/odoo/pull/193657)

fw-bot (Issue Creator) on (2025-01-14 18:28:44 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 19:44:15 UTC): @aizu-odoo @qdp-odoo the next pull request (odoo/odoo#193668) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-17 09:35:15 UTC): @robodoo r+

"
2788004384,pull_request,closed,,[FIX] account: check for leap year when creating placeholder,"### Description of the issue/feature this PR addresses:

If the customer sets their last fiscal day and month to February 29th, a ValueError may be raised when creating a placeholder name for account.move records if their dates are not in a leap year.

More precisely, a ValueError is thrown when creating the starting sequence of the placeholder name, as a new date object is created using the company's last fiscal day and month and the year of the account.move.

This commit adjusts the day of the created date to February 28th if the last fiscal day and month is set to February 29th and if the account.move year is not a leap year. This date was chosen since that's 365 days after February 29th.

### Current behaviour before PR:

If the company's last fiscal day and month is set to February 29th, creating a placeholder name for account.move records whose date is not in a leap year raises a ValueError.

Steps to reproduce:
1. Set the last fiscal day to February 29th.
2. Go to Accounting > Journal Entries (account.move).
3. Trigger the computation of the placeholder name for account.move() (edit journal_id, create record, edit date field...)
4. A ValueError exception is raised.

### Desired behaviour after PR is merged:

The placeholder name for account.move records is successful and less prone to errors.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lare-odoo,2025-01-14 18:28:00+00:00,[],2025-01-20 13:31:38+00:00,2025-01-20 13:31:38+00:00,https://github.com/odoo/odoo/pull/193656,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590808236, 'issue_id': 2788004384, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193656.png)](https://mergebot.odoo.com/odoo/odoo/pull/193656)', 'created_at': datetime.datetime(2025, 1, 14, 18, 28, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593561911, 'issue_id': 2788004384, 'author': 'lare-odoo', 'body': 'Hello, @alialfie ^u^\r\n\r\nI\'d like to make a clarification from my PR description. This issue can be reproduced by triggering the method `get_starting_sequence()` from account_move, which can be done by, among other actions, creating a record. I have updated the PR description to include this clarification. \r\n\r\nI\'ve created [this video with different ways to trigger the ValueError](https://drive.google.com/file/d/1VJwLEeBdnkfwDv5a89LJzMT_PBhpXJgh/view?usp=drive_link) in both a clean database and in Runbot.\r\n\r\nThis issue was found in the traceback of a failed upgrade request. [A ticket was created to handle said traceback](https://www.odoo.com/odoo/project/70/tasks/4481260), but no other ticket has been created for this issue afaik.\r\n\r\nAs for the ""signed-off-by"" section, thanks for letting me know Cx To remove it, is it okay if I amend this commit so that it won\'t show later?\r\n\r\nPlease let me know if there are any problems reproducing the video, and if there\'s anything more I can do to help ^u^', 'created_at': datetime.datetime(2025, 1, 15, 17, 39, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598365322, 'issue_id': 2788004384, 'author': 'lare-odoo', 'body': '@alialfie \r\n\r\nDone, the commits have been squashed into one and all links have been removed from it ^u^', 'created_at': datetime.datetime(2025, 1, 17, 13, 25, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598530190, 'issue_id': 2788004384, 'author': 'lare-odoo', 'body': '@alialfie \r\n\r\nDone! Corrected the commit to only include one and simplified the comment based on your suggestion ^u^', 'created_at': datetime.datetime(2025, 1, 17, 14, 48, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601742840, 'issue_id': 2788004384, 'author': 'alialfie', 'body': 'Hey @lare-odoo , I just noticed that there it says that the branch has a conflict. Could you please take care of it and rebase? Thanks!', 'created_at': datetime.datetime(2025, 1, 20, 8, 32, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602437435, 'issue_id': 2788004384, 'author': 'alialfie', 'body': 'Closing the PR as the issue was fixed in https://github.com/odoo/odoo/pull/193924', 'created_at': datetime.datetime(2025, 1, 20, 13, 31, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:28:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193656.png)](https://mergebot.odoo.com/odoo/odoo/pull/193656)

lare-odoo (Issue Creator) on (2025-01-15 17:39:21 UTC): Hello, @alialfie ^u^

I'd like to make a clarification from my PR description. This issue can be reproduced by triggering the method `get_starting_sequence()` from account_move, which can be done by, among other actions, creating a record. I have updated the PR description to include this clarification. 

I've created [this video with different ways to trigger the ValueError](https://drive.google.com/file/d/1VJwLEeBdnkfwDv5a89LJzMT_PBhpXJgh/view?usp=drive_link) in both a clean database and in Runbot.

This issue was found in the traceback of a failed upgrade request. [A ticket was created to handle said traceback](https://www.odoo.com/odoo/project/70/tasks/4481260), but no other ticket has been created for this issue afaik.

As for the ""signed-off-by"" section, thanks for letting me know Cx To remove it, is it okay if I amend this commit so that it won't show later?

Please let me know if there are any problems reproducing the video, and if there's anything more I can do to help ^u^

lare-odoo (Issue Creator) on (2025-01-17 13:25:45 UTC): @alialfie 

Done, the commits have been squashed into one and all links have been removed from it ^u^

lare-odoo (Issue Creator) on (2025-01-17 14:48:13 UTC): @alialfie 

Done! Corrected the commit to only include one and simplified the comment based on your suggestion ^u^

alialfie on (2025-01-20 08:32:25 UTC): Hey @lare-odoo , I just noticed that there it says that the branch has a conflict. Could you please take care of it and rebase? Thanks!

alialfie on (2025-01-20 13:31:38 UTC): Closing the PR as the issue was fixed in https://github.com/odoo/odoo/pull/193924

"
2787991904,pull_request,closed,,[FW][IMP] im_livechat: cleanup RTC session before we find an operator,"Before this PR, operators could be stuck inside a ""ghost call,"" meaning that they had incorrectly closed RTC sessions. This is an issue with the fact that ""in call"" operators cannot be assigned a new live chat.

This PR cleanup rtc session before trying to find an operator

task-4440897, task-4453597

Forward-Port-Of: odoo/odoo#193597
Forward-Port-Of: odoo/odoo#193535",fw-bot,2025-01-14 18:23:00+00:00,[],2025-01-15 14:07:41+00:00,2025-01-15 13:39:39+00:00,https://github.com/odoo/odoo/pull/193655,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590787792, 'issue_id': 2787991904, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193655.png)](https://mergebot.odoo.com/odoo/odoo/pull/193655)', 'created_at': datetime.datetime(2025, 1, 14, 18, 23, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590787807, 'issue_id': 2787991904, 'author': 'fw-bot', 'body': '@phenix-factory @alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 23, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592204023, 'issue_id': 2787991904, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 6, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:23:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193655.png)](https://mergebot.odoo.com/odoo/odoo/pull/193655)

fw-bot (Issue Creator) on (2025-01-14 18:23:01 UTC): @phenix-factory @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-15 10:06:11 UTC): @robodoo r+

"
2787991425,pull_request,closed,,"[FW][IMP] {website,im}livechat: end multi line step if there is no new input","task-4433289

Forward-Port-Of: odoo/odoo#193014",fw-bot,2025-01-14 18:22:43+00:00,[],2025-01-15 11:31:38+00:00,2025-01-15 10:45:22+00:00,https://github.com/odoo/odoo/pull/193654,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590787340, 'issue_id': 2787991425, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193654.png)](https://mergebot.odoo.com/odoo/odoo/pull/193654)', 'created_at': datetime.datetime(2025, 1, 14, 18, 22, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590787361, 'issue_id': 2787991425, 'author': 'fw-bot', 'body': '@maki-odoo @alexkuhn this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 22, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591890011, 'issue_id': 2787991425, 'author': 'maki-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 8, 8, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:22:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193654.png)](https://mergebot.odoo.com/odoo/odoo/pull/193654)

fw-bot (Issue Creator) on (2025-01-14 18:22:45 UTC): @maki-odoo @alexkuhn this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

maki-odoo on (2025-01-15 08:08:24 UTC): @robodoo r+

"
2787990626,pull_request,closed,,[FW][FIX] web_tour: advance directly when macro step has no trigger,"In the macro class, for each step, we wait 50ms to see if a mutation occurs and then look for the trigger of the step in the DOM. So, if a step of the macro does not have a trigger, we do not look for a trigger and we only do an action, there is no reason to wait for a mutation to occur in the DOM. So, we can continue the macro directly.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193552
Forward-Port-Of: odoo/odoo#192015",fw-bot,2025-01-14 18:22:26+00:00,[],2025-01-29 11:06:35+00:00,2025-01-15 10:45:01+00:00,https://github.com/odoo/odoo/pull/193653,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590786630, 'issue_id': 2787990626, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193653.png)](https://mergebot.odoo.com/odoo/odoo/pull/193653)', 'created_at': datetime.datetime(2025, 1, 14, 18, 22, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590786651, 'issue_id': 2787990626, 'author': 'fw-bot', 'body': '@pipu-odoo @bastien-ipb this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 22, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591855505, 'issue_id': 2787990626, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 48, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:22:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193653.png)](https://mergebot.odoo.com/odoo/odoo/pull/193653)

fw-bot (Issue Creator) on (2025-01-14 18:22:31 UTC): @pipu-odoo @bastien-ipb this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-15 07:48:54 UTC): @robodoo r+

"
2787954477,pull_request,closed,,[FW][17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193522",fw-bot,2025-01-14 18:05:19+00:00,[],2025-01-31 07:31:57+00:00,2025-01-17 07:27:46+00:00,https://github.com/odoo/odoo/pull/193652,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590749245, 'issue_id': 2787954477, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193652.png)](https://mergebot.odoo.com/odoo/odoo/pull/193652)', 'created_at': datetime.datetime(2025, 1, 14, 18, 5, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590749343, 'issue_id': 2787954477, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 5, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590884398, 'issue_id': 2787954477, 'author': 'fw-bot', 'body': '@yostashiro @jco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 18, 59, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593144166, 'issue_id': 2787954477, 'author': 'fw-bot', 'body': '@yostashiro @jco-odoo the next pull request (odoo/odoo#193790) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 15, 15, 14, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597259975, 'issue_id': 2787954477, 'author': 'vin-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 1, 44, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597298757, 'issue_id': 2787954477, 'author': 'robodoo', 'body': '@yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 61355b5658658a5e184dae4ff9faf8c0d2eda87a (view more at https://runbot.odoo.com/runbot/build/73500775)', 'created_at': datetime.datetime(2025, 1, 17, 2, 23, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597305576, 'issue_id': 2787954477, 'author': 'vin-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 2, 30, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597343098, 'issue_id': 2787954477, 'author': 'robodoo', 'body': '@yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 0bfdf6f07d5c274d358f28256447a10b61a97447 (view more at https://runbot.odoo.com/runbot/build/73501407)', 'created_at': datetime.datetime(2025, 1, 17, 3, 10, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597506768, 'issue_id': 2787954477, 'author': 'vin-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 6, 8, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:05:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193652.png)](https://mergebot.odoo.com/odoo/odoo/pull/193652)

fw-bot (Issue Creator) on (2025-01-14 18:05:21 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 18:59:21 UTC): @yostashiro @jco-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 15:14:43 UTC): @yostashiro @jco-odoo the next pull request (odoo/odoo#193790) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

vin-odoo on (2025-01-17 01:44:21 UTC): @robodoo r+

robodoo on (2025-01-17 02:23:30 UTC): @yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 61355b5658658a5e184dae4ff9faf8c0d2eda87a (view more at https://runbot.odoo.com/runbot/build/73500775)

vin-odoo on (2025-01-17 02:30:30 UTC): @robodoo retry

robodoo on (2025-01-17 03:10:15 UTC): @yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 0bfdf6f07d5c274d358f28256447a10b61a97447 (view more at https://runbot.odoo.com/runbot/build/73501407)

vin-odoo on (2025-01-17 06:08:56 UTC): @robodoo retry

"
2787948262,pull_request,closed,,[FW][FIX] account: translate tax tags,"The tax tags are translatable but never translated automatically because they are generated dynamically from the tax report.

This commit aims at improving this by translating automatically the tags that match exactly the name of the tax report line, for instance in Israel.

Forward-Port-Of: odoo/odoo#192233",fw-bot,2025-01-14 18:02:46+00:00,[],2025-01-29 17:35:56+00:00,2025-01-15 17:25:15+00:00,https://github.com/odoo/odoo/pull/193651,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590742759, 'issue_id': 2787948262, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193651.png)](https://mergebot.odoo.com/odoo/odoo/pull/193651)', 'created_at': datetime.datetime(2025, 1, 14, 18, 2, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590742782, 'issue_id': 2787948262, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 2, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590885086, 'issue_id': 2787948262, 'author': 'fw-bot', 'body': '@william-andre @oco-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 18, 59, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:02:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193651.png)](https://mergebot.odoo.com/odoo/odoo/pull/193651)

fw-bot (Issue Creator) on (2025-01-14 18:02:48 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 18:59:41 UTC): @william-andre @oco-odoo ci/runbot failed on this forward-port PR

"
2787947375,pull_request,closed,,[FW][FIX] account: prevent double currency column when multiple active currencies exist,"Description of the issue/feature this PR addresses:
This PR addresses the issue where the currency column repeats in view_move_line_payment_tree view when there are multiple active currencies. This can lead to confusion and clutter in the user interface.

Current behavior before PR:
Before this PR, when multiple active currencies are set up, the currency column is duplicated in view_move_line_payment_tree view, displaying the same information multiple times.

Desired behavior after PR is merged:
After merging this PR, the currency column will appear only once when the optional hide setting is enabled, even with multiple active currencies, resulting in a cleaner and more readable report.

[Video](https://drive.google.com/file/d/1bL8L88y81HomX6Q9MkErmOGVDWHdE4_r/view)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193189
Forward-Port-Of: odoo/odoo#192784",fw-bot,2025-01-14 18:02:29+00:00,[],2025-01-30 11:01:07+00:00,2025-01-16 10:39:56+00:00,https://github.com/odoo/odoo/pull/193650,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590741846, 'issue_id': 2787947375, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193650.png)](https://mergebot.odoo.com/odoo/odoo/pull/193650)', 'created_at': datetime.datetime(2025, 1, 14, 18, 2, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590741887, 'issue_id': 2787947375, 'author': 'fw-bot', 'body': '@rov-adhoc @rugo-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193631\n* odoo/odoo#193606\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 2, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478180, 'issue_id': 2787947375, 'author': 'fw-bot', 'body': '@rov-adhoc @rugo-odoo this forward port of odoo/odoo#192784 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313049, 'issue_id': 2787947375, 'author': 'fw-bot', 'body': '@rov-adhoc @rugo-odoo this forward port of odoo/odoo#192784 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594745591, 'issue_id': 2787947375, 'author': 'rugo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 7, 48, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:02:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193650.png)](https://mergebot.odoo.com/odoo/odoo/pull/193650)

fw-bot (Issue Creator) on (2025-01-14 18:02:31 UTC): @rov-adhoc @rugo-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193631
* odoo/odoo#193606

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:24 UTC): @rov-adhoc @rugo-odoo this forward port of odoo/odoo#192784 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 02:01:04 UTC): @rov-adhoc @rugo-odoo this forward port of odoo/odoo#192784 is awaiting action (not merged or closed).

rugo-odoo on (2025-01-16 07:48:01 UTC): @robodoo r+

"
2787942528,pull_request,closed,,[FW][FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435

Forward-Port-Of: odoo/odoo#193450",fw-bot,2025-01-14 18:00:41+00:00,[],2025-01-29 09:25:16+00:00,2025-01-15 09:16:13+00:00,https://github.com/odoo/odoo/pull/193649,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590736883, 'issue_id': 2787942528, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193649.png)](https://mergebot.odoo.com/odoo/odoo/pull/193649)', 'created_at': datetime.datetime(2025, 1, 14, 18, 0, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590736909, 'issue_id': 2787942528, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 0, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 18:00:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193649.png)](https://mergebot.odoo.com/odoo/odoo/pull/193649)

fw-bot (Issue Creator) on (2025-01-14 18:00:43 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787931307,pull_request,closed,,[FW][IMP] website: allow to bypass the website domain redirection,"When we go to the website preview in the Odoo backend, if the current domain used (to access the backend) is not the same as the one of the previewed website, we redirect the user, and he might have to reconnect. The same is done when using the website switcher.
Note: in the first case, the user is warned. We should probably do the same for the second case (?).

This is a problem for the Odoo support team. When they connect to a customer database upon user request, the <customer_db_name>.odoo.com address is used. But as soon as they are using the website app, they are redirected to the real website domains... where they are disconnected and cannot connect themselves.
To fix this issue, we allow setting up a session info parameter to bypass those website redirections. This is not to be done by real users: this will come with bugs (for the support team). Indeed, we are normally redirecting for a reason: many flows rely on using the right domain when visiting a specific website. Depending on what users have in their page, this could also simply make the website preview iframe crash.

task-4069779

Forward-Port-Of: odoo/odoo#193122",fw-bot,2025-01-14 17:56:47+00:00,[],2025-01-29 19:07:55+00:00,2025-01-15 18:55:28+00:00,https://github.com/odoo/odoo/pull/193648,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590726143, 'issue_id': 2787931307, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193648.png)](https://mergebot.odoo.com/odoo/odoo/pull/193648)', 'created_at': datetime.datetime(2025, 1, 14, 17, 56, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590726164, 'issue_id': 2787931307, 'author': 'fw-bot', 'body': '@qsm-odoo cherrypicking of pull request odoo/odoo#193122 failed.\n\nstdout:\n```\nAuto-merging addons/website/static/src/client_actions/website_preview/website_preview.js\nCONFLICT (content): Merge conflict in addons/website/static/src/client_actions/website_preview/website_preview.js\nAuto-merging addons/website/static/src/systray_items/website_switcher.js\nCONFLICT (content): Merge conflict in addons/website/static/src/systray_items/website_switcher.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 56, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590905899, 'issue_id': 2787931307, 'author': 'robodoo', 'body': ""@qsm-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 14, 19, 10, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:56:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193648.png)](https://mergebot.odoo.com/odoo/odoo/pull/193648)

fw-bot (Issue Creator) on (2025-01-14 17:56:49 UTC): @qsm-odoo cherrypicking of pull request odoo/odoo#193122 failed.

stdout:
```
Auto-merging addons/website/static/src/client_actions/website_preview/website_preview.js
CONFLICT (content): Merge conflict in addons/website/static/src/client_actions/website_preview/website_preview.js
Auto-merging addons/website/static/src/systray_items/website_switcher.js
CONFLICT (content): Merge conflict in addons/website/static/src/systray_items/website_switcher.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-14 19:10:46 UTC): @qsm-odoo 'ci/runbot' failed on this reviewed PR.

"
2787930016,pull_request,closed,,[FW][FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193568",fw-bot,2025-01-14 17:56:28+00:00,[],2025-01-29 11:14:49+00:00,2025-01-15 11:11:19+00:00,https://github.com/odoo/odoo/pull/193647,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590725252, 'issue_id': 2787930016, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193647.png)](https://mergebot.odoo.com/odoo/odoo/pull/193647)', 'created_at': datetime.datetime(2025, 1, 14, 17, 56, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590725266, 'issue_id': 2787930016, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 56, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:56:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193647.png)](https://mergebot.odoo.com/odoo/odoo/pull/193647)

fw-bot (Issue Creator) on (2025-01-14 17:56:30 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787922716,pull_request,closed,,[FW][FIX] stock: sync SM's dest loc with picking's dest loc,"When changing the destination location of a picking, the destination
location of the stock moves are not updated and the user may not
even notice it.

To reproduce the issue:
1. In Settings, enable ""Storage Locations""
2. Inventory > Operations > Receipt, New
   - Add an operation
   - Change the destination location of the picking
3. Save
4. Mark as Todo
5. Open the created move

Error: the destination location of the stock move is still the
initial one

On the picking model, there are two fields that contain the stock moves:
https://github.com/odoo/odoo/blob/17a63a6cda41a44e3d4ff8b5a9042e93ba956bc8/addons/stock/models/stock_picking.py#L612-L614
Where `move_ids_without_packages` is a subset of `move_ids`

When editing the operations of a picking, we are actually dealing
with the field `move_ids_without_packages`. So, when changing the
destination location of the picking, the webclient sends the SMs via
the field `move_ids_without_packages`, i.e.: the web client does not
provide any value for `move_ids`.

Server side, when creating a `new` record based on the provided
values, we will handle the inverse of `move_ids_without_packages`,
i.e.: we will make sure that the stock moves have the field
`picking_id` correctly defined:
https://github.com/odoo/odoo/blob/a4c2f66700dd98487ac6bb8f0f25fdc4abffd0bf/odoo/models.py#L6366-L6374
**But** we don't define any value for the siblings of the field. It
means that we don't set any value for the field `move_ids`.

This will lead to the bug: later on in the onchange, we flag all
fields that will have to be recomputed:
https://github.com/odoo/odoo/blob/b794f0f332f473deb2c04eba60baf4761db3b508/addons/web/models/models.py#L983
And here we would hope that the field `location_dest_id` of the
stock moves will be flagged, as mentioned in the dependencies:
https://github.com/odoo/odoo/blob/68ae97bd27fbdc874922e03f52f8b0c7953df801/addons/stock/models/stock_move.py#L206-L207
But... In `_modified_triggers`, at some point, we are here
https://github.com/odoo/odoo/blob/a4c2f66700dd98487ac6bb8f0f25fdc4abffd0bf/odoo/models.py#L7200-L7203
Where `field` is `stock.move.picking_id`. So, we iterate on the
inverse field of `field`, i.e.: `move_ids` and
`move_ids_without_packages`. However, as explicitly mentioned in the
comment, we ""use an inverse of field without domain"", i.e.:
`move_ids`. We therefore read the value of this field on the picking
which is, because of the bug explained in the previous paragraph, an
empty record. As a result, the ORM considers that it does not have
to recompute any `location_dest_id`.

The ORM team is aware of the issue. They have tried to write a generic
solution (cf PR [191318](https://github.com/odoo/odoo/pull/191318)) but it led to a lot of other errors. So, the
issue has been considered as a limitation and added to a todo list
on their side.

In the meantime, it is possible to patch the issue with a
stock-specific fix.

Note: the issue will also happen when editing an existing picking.
Suppose a picking with one move SM01. The user adds a second move
SM02, does not save and edits the destination location of the
picking: for the same reasons, the ORM will only see SM01 and,
therefore, will call the compute method for SM01 only.

OPW-4379509

Forward-Port-Of: odoo/odoo#191934",fw-bot,2025-01-14 17:53:38+00:00,[],2025-01-29 11:06:41+00:00,2025-01-15 10:45:29+00:00,https://github.com/odoo/odoo/pull/193646,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590718491, 'issue_id': 2787922716, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193646.png)](https://mergebot.odoo.com/odoo/odoo/pull/193646)', 'created_at': datetime.datetime(2025, 1, 14, 17, 53, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590718512, 'issue_id': 2787922716, 'author': 'fw-bot', 'body': '@adwid @Whenrow this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193626\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 53, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591990231, 'issue_id': 2787922716, 'author': 'adwid', 'body': '@Whenrow \r\nhttps://github.com/odoo/odoo/pull/191934#issuecomment-2590173532\r\nMy pleasure, of course !\r\nIndeed it was the perfect place: 0 conflict in the FW\r\nAs always, thanks for your so-relevant advice\r\nLooking forward to working together on a future PR\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 8, 56, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:53:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193646.png)](https://mergebot.odoo.com/odoo/odoo/pull/193646)

fw-bot (Issue Creator) on (2025-01-14 17:53:40 UTC): @adwid @Whenrow this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193626

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adwid on (2025-01-15 08:56:31 UTC): @Whenrow 
https://github.com/odoo/odoo/pull/191934#issuecomment-2590173532
My pleasure, of course !
Indeed it was the perfect place: 0 conflict in the FW
As always, thanks for your so-relevant advice
Looking forward to working together on a future PR
robodoo r+

"
2787922117,pull_request,closed,,[FW][FIX] hr: added domain to show activity plans by selected company or globally,"Steps:
- Go to the 'Activity Plans' section.
- Select a company in the company widget.
- Activity plans were not filtered based on the selected company.

Issues:
- Activity plans were not filtered correctly by the selected company, showing plans from unrelated companies.

Fix:
- Added domain to display activity plans assigned to the selected company.
- Added domain to display global activity plans when no company is selected.

Task - 4441838

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:

Forward-Port-Of: odoo/odoo#192171",fw-bot,2025-01-14 17:53:21+00:00,[],2025-01-29 23:03:41+00:00,2025-01-15 22:15:09+00:00,https://github.com/odoo/odoo/pull/193645,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590718009, 'issue_id': 2787922117, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193645.png)](https://mergebot.odoo.com/odoo/odoo/pull/193645)', 'created_at': datetime.datetime(2025, 1, 14, 17, 53, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590718035, 'issue_id': 2787922117, 'author': 'fw-bot', 'body': '@rame-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193625\n* odoo/odoo#193590\n* odoo/odoo#193572\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 53, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592874185, 'issue_id': 2787922117, 'author': 'Bertrand2', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 13, 34, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:53:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193645.png)](https://mergebot.odoo.com/odoo/odoo/pull/193645)

fw-bot (Issue Creator) on (2025-01-14 17:53:23 UTC): @rame-odoo @Bertrand2 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193625
* odoo/odoo#193590
* odoo/odoo#193572

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Bertrand2 on (2025-01-15 13:34:46 UTC): robodoo r+

"
2787913659,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

In master version, in mobile view, we replaced the breadcrumb with a
<kbd>**<** Category</kbd>  button to return to the blog's category, similar to what is
done in ""website_sale"" and ""website_event"".

**BEFORE:**
<kbd>![image](https://github.com/user-attachments/assets/8e0962e5-dad2-4da5-9c12-40609baf6bd8)</kbd>

**AFTER in Master:**
<kbd>![image](https://github.com/user-attachments/assets/a3f37fce-45d2-40b4-a1dd-1a2d2fb5ab9a)</kbd>

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 17:48:22+00:00,[],2025-01-29 21:35:34+00:00,2025-01-15 20:28:44+00:00,https://github.com/odoo/odoo/pull/193644,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590708956, 'issue_id': 2787913659, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193644.png)](https://mergebot.odoo.com/odoo/odoo/pull/193644)', 'created_at': datetime.datetime(2025, 1, 14, 17, 48, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590708981, 'issue_id': 2787913659, 'author': 'fw-bot', 'body': '@bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193624\n* odoo/odoo#193589\n* odoo/odoo#193569\n* odoo/odoo#193557\n* odoo/odoo#193537\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 48, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591846962, 'issue_id': 2787913659, 'author': 'SergeBayet', 'body': '@bvr-odoo As a reminder, you can adapt this master FW-port before the merge.', 'created_at': datetime.datetime(2025, 1, 15, 7, 43, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592205483, 'issue_id': 2787913659, 'author': 'fw-bot', 'body': '@bvr-odoo @SergeBayet this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 15, 10, 6, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592266106, 'issue_id': 2787913659, 'author': 'bvr-odoo', 'body': '@SergeBayet I made the adaptation', 'created_at': datetime.datetime(2025, 1, 15, 10, 32, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593131166, 'issue_id': 2787913659, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 15, 12, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:48:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193644.png)](https://mergebot.odoo.com/odoo/odoo/pull/193644)

fw-bot (Issue Creator) on (2025-01-14 17:48:24 UTC): @bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193624
* odoo/odoo#193589
* odoo/odoo#193569
* odoo/odoo#193557
* odoo/odoo#193537

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

SergeBayet on (2025-01-15 07:43:09 UTC): @bvr-odoo As a reminder, you can adapt this master FW-port before the merge.

fw-bot (Issue Creator) on (2025-01-15 10:06:42 UTC): @bvr-odoo @SergeBayet this PR was modified / updated and has become a normal PR. It must be merged directly.

bvr-odoo on (2025-01-15 10:32:53 UTC): @SergeBayet I made the adaptation

SergeBayet on (2025-01-15 15:12:04 UTC): @robodoo r+

"
2787912325,pull_request,closed,,[IMP] core: speedup new_test_user and authenticate in tests,"The /test_http test suite makes a heavy usage of both `new_test_user` and `authenticate`. Those two functions hash the password using very slow and computing intensive hash algorithms, which can take up to 1 full second on a slow laptop, everytime.

Those `new_test_user` are never commited, and will never be. They solely exist within the transaction of the test and are discarded once the test finished running. Also the cleartext version of the password is visible in the source code so there is no point strengenthing those.

In this work we patch the `CryptContext` instance for `res.users` to inject a very weak but very fast hash algorithm in front of the secure ones. This makes creating and authenticating new users much faster, which makes running the tests much faster too.

Running the `/test_http` test suite takes half the time with this patch.

Without this patch:

    Executed in   48,89 secs    fish           external
       usr time   31,23 secs  600,00 micros   31,23 secs
       sys time    0,83 secs  312,00 micros    0,83 secs

With this patch:

    Executed in   26,78 secs    fish           external
       usr time    8,15 secs   21,08 millis    8,13 secs
       sys time    0,89 secs    4,38 millis    0,89 secs",Julien00859,2025-01-14 17:47:39+00:00,[],2025-01-15 12:56:44+00:00,2025-01-15 12:56:44+00:00,https://github.com/odoo/odoo/pull/193643,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590707830, 'issue_id': 2787912325, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193643.png)](https://mergebot.odoo.com/odoo/odoo/pull/193643)', 'created_at': datetime.datetime(2025, 1, 14, 17, 47, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592789564, 'issue_id': 2787912325, 'author': 'Julien00859', 'body': 'exists in 17.2 at odoo/odoo#152378', 'created_at': datetime.datetime(2025, 1, 15, 12, 56, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:47:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193643.png)](https://mergebot.odoo.com/odoo/odoo/pull/193643)

Julien00859 (Issue Creator) on (2025-01-15 12:56:22 UTC): exists in 17.2 at odoo/odoo#152378

"
2787893130,pull_request,closed,,[FW][CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193539",fw-bot,2025-01-14 17:40:57+00:00,[],2025-01-29 09:25:16+00:00,2025-01-15 09:16:13+00:00,https://github.com/odoo/odoo/pull/193642,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590683876, 'issue_id': 2787893130, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193642.png)](https://mergebot.odoo.com/odoo/odoo/pull/193642)', 'created_at': datetime.datetime(2025, 1, 14, 17, 40, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590683903, 'issue_id': 2787893130, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 40, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590879152, 'issue_id': 2787893130, 'author': 'fw-bot', 'body': '@OSevangelist @mart-e the next pull request (odoo/odoo#193661) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 18, 56, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591837135, 'issue_id': 2787893130, 'author': 'mart-e', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 36, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:40:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193642.png)](https://mergebot.odoo.com/odoo/odoo/pull/193642)

fw-bot (Issue Creator) on (2025-01-14 17:40:59 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 18:56:27 UTC): @OSevangelist @mart-e the next pull request (odoo/odoo#193661) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mart-e on (2025-01-15 07:36:11 UTC): @robodoo r+

"
2787868958,pull_request,open,,[FIX] mail: properly truncate payload for push notifications,"Steps to reproduce:

1. Activate desktop notifications.
2. Fastest way will be to send to an account A (with activated notis), a message through discuss from an account B.
3. Additionally this affects the current flow too: 3.1 When we try to notify a user following a heldesk team. 3.2 We create an alias and set this to that current team. 3.3 We simulate an email to that heldesk team, eg vip-support@test.com

**Issue:**

The _truncate_payload method does not work as expected because it does not account for the post-encryption size increase in push_to_end_point. The encryption process adds extra bytes to the payload header:

salt (16)
record_size (4)
sender_public_key.len (1)
sender_public_key (sender_public_key.len) usually around 65 bytes

This results in the payload exceeding the 4096-byte limit. 

**Solution:**

To address this, we now reserve approximately 106 bytes for encryption overhead and truncate the payload accordingly to ensure it remains within the limit.

Additionally, the calculation of body_max_length was incorrect, as it allowed for negative values, which sometimes resulted in an empty body.

The correct calculation is:
`3990 - payload_length``, which determines how many bytes need to be removed to fit within the limit. Since this calculation can yield a negative number, we adjust it by adding the `body_length`` to determine the actual number of bytes that can remain in the body.

This approach ensures the payload remains within the 4096-byte limit while preserving as much of the content as possible.

opw-3939019
",Ephoniz,2025-01-14 17:32:33+00:00,[],2025-01-21 13:54:38+00:00,,https://github.com/odoo/odoo/pull/193641,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590652258, 'issue_id': 2787868958, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193641.png)](https://mergebot.odoo.com/odoo/odoo/pull/193641)', 'created_at': datetime.datetime(2025, 1, 14, 17, 32, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590671157, 'issue_id': 2787868958, 'author': 'Ephoniz', 'body': 'closes #191266', 'created_at': datetime.datetime(2025, 1, 14, 17, 36, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:32:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193641.png)](https://mergebot.odoo.com/odoo/odoo/pull/193641)

Ephoniz (Issue Creator) on (2025-01-14 17:36:58 UTC): closes #191266

"
2787866297,pull_request,closed,,[FW][FIX] spreadsheet_dashboard_purchase*: wrong scoreboard data,"* = stock

* PROPBLEM: when viewing purchase or vendor dashboard (under logistic section) , viewing the scoreboard for purchased or order it calculate all record from purchase.report but when clicking on it, redirect to view of 'purchase order' only which is wrong compare to the number display on the scoreboard
* SOLUTION: This commit fix by edit the domain of related pivot which the scoreboard use to display data to the domain having state in either Purchase or Done

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191985",fw-bot,2025-01-14 17:31:40+00:00,[],2025-01-29 13:26:33+00:00,2025-01-15 13:08:17+00:00,https://github.com/odoo/odoo/pull/193640,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590649160, 'issue_id': 2787866297, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193640.png)](https://mergebot.odoo.com/odoo/odoo/pull/193640)', 'created_at': datetime.datetime(2025, 1, 14, 17, 31, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590649239, 'issue_id': 2787866297, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow cherrypicking of pull request odoo/odoo#191985 failed.\n\nstdout:\n```\nAuto-merging addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json\nCONFLICT (content): Merge conflict in addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json\nAuto-merging addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 31, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478548, 'issue_id': 2787866297, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592156371, 'issue_id': 2787866297, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 48, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:31:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193640.png)](https://mergebot.odoo.com/odoo/odoo/pull/193640)

fw-bot (Issue Creator) on (2025-01-14 17:31:44 UTC): @duong77476-viindoo @Whenrow cherrypicking of pull request odoo/odoo#191985 failed.

stdout:
```
Auto-merging addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json
CONFLICT (content): Merge conflict in addons/spreadsheet_dashboard_purchase/data/files/vendors_dashboard.json
Auto-merging addons/spreadsheet_dashboard_purchase_stock/data/files/purchase_dashboard.json

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:41 UTC): @duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).

Whenrow on (2025-01-15 09:48:33 UTC): robodoo r+

"
2787822942,pull_request,closed,,[FW][IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.

Forward-Port-Of: odoo/odoo#193501",fw-bot,2025-01-14 17:17:31+00:00,[],2025-01-29 13:40:20+00:00,2025-01-15 13:39:44+00:00,https://github.com/odoo/odoo/pull/193639,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590613383, 'issue_id': 2787822942, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193639.png)](https://mergebot.odoo.com/odoo/odoo/pull/193639)', 'created_at': datetime.datetime(2025, 1, 14, 17, 17, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590613409, 'issue_id': 2787822942, 'author': 'fw-bot', 'body': '@alialfie @beledouxdenis this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193619\n* odoo/odoo#193584\n* odoo/odoo#193560\n* odoo/odoo#193540\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 17, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592216841, 'issue_id': 2787822942, 'author': 'alialfie', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 11, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:17:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193639.png)](https://mergebot.odoo.com/odoo/odoo/pull/193639)

fw-bot (Issue Creator) on (2025-01-14 17:17:33 UTC): @alialfie @beledouxdenis this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193619
* odoo/odoo#193584
* odoo/odoo#193560
* odoo/odoo#193540

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alialfie on (2025-01-15 10:11:06 UTC): @robodoo r+

"
2787819451,pull_request,closed,,[FW][FIX] l10n_ro_eFactura: Invoice content error detection,"### Before
-When the eFactura status was fetched and there was an invoice content error it was not displayed. This issue was due to both the overlooking of:
-  ​the 'nok' status (sent back by the Romanian authorities regarding the presence of errors in the invoice content) 
-  the file provided in the zip that would contain the errors

-The error message shown would also only contain the first error even if many were present.

### Now

-If the status fetched contains 'nok' and is therefore signaling the presence of invoice content errors, then the apposite error file is chosen instead of the file with the electronic signature. This allows for following logic to account for errors, to retrieve the error message and to provide the error file as the downloadable document. 

-The pop up shows all the errors with an increased width to account for more content.

task-4306506

Forward-Port-Of: odoo/odoo#190618",fw-bot,2025-01-14 17:16:17+00:00,[],2025-01-31 13:42:30+00:00,2025-01-17 13:30:31+00:00,https://github.com/odoo/odoo/pull/193638,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590610732, 'issue_id': 2787819451, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193638.png)](https://mergebot.odoo.com/odoo/odoo/pull/193638)', 'created_at': datetime.datetime(2025, 1, 14, 17, 16, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590610756, 'issue_id': 2787819451, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 16, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597813507, 'issue_id': 2787819451, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 9, 35, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:16:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193638.png)](https://mergebot.odoo.com/odoo/odoo/pull/193638)

fw-bot (Issue Creator) on (2025-01-14 17:16:19 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-17 09:35:05 UTC): @robodoo r+

"
2787818517,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 17:16:00+00:00,[],2025-01-29 09:25:07+00:00,2025-01-15 08:56:25+00:00,https://github.com/odoo/odoo/pull/193637,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590610177, 'issue_id': 2787818517, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193637.png)](https://mergebot.odoo.com/odoo/odoo/pull/193637)', 'created_at': datetime.datetime(2025, 1, 14, 17, 16, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590610202, 'issue_id': 2787818517, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 16, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:16:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193637.png)](https://mergebot.odoo.com/odoo/odoo/pull/193637)

fw-bot (Issue Creator) on (2025-01-14 17:16:02 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787786876,pull_request,open,,[IMP] core: deprecate pre-12.0 properties on Model,"Description of the issue/feature this PR addresses:
- `self._cr -> self.env.cr`
- `self._uid -> self.env.uid`
- `self._context -> self.env.context`


odoo/enterprise#77138
odoo/upgrade#7066

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-14 17:03:45+00:00,[],2025-01-21 09:11:07+00:00,,https://github.com/odoo/odoo/pull/193636,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590581874, 'issue_id': 2787786876, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193636.png)](https://mergebot.odoo.com/odoo/odoo/pull/193636)', 'created_at': datetime.datetime(2025, 1, 14, 17, 3, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:03:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193636.png)](https://mergebot.odoo.com/odoo/odoo/pull/193636)

"
2787784543,pull_request,closed,,[FW][FIX] sale_loyalty: handle adding order & specific discounts,"Versions
--------
- 18.0+

Steps
-----
1. Create a promotion to apply a fixed discount to an order;
2. create a promotion to apply a fixed discount to a specific product;
3. create a order with a taxed product eligible for the 2nd discount;
4. apply the first promotion;
5. apply the second promotion.

Issue
-----
Traceback:
> KeyError: account.tax(1,)

Cause
-----
Commit db12319e8b3b changed the way taxes get handled for discounts on the order total. They no longer automatically get a tax applied to them.

This causes a problem in the `_discountable_specific` method, which builds a `dict` using taxes of discount lines as keys to calculate discountable amounts.

Because the existing reward doesn't have a tax, this dict only has an `account.tax()` key, leading to a `KeyError` when trying to get discountable amount associated with the product-specific reward's taxes.

Solution
--------
Change the `dict` to a `defaultdict` which returns `0` for non-existing keys.

opw-4419764

Forward-Port-Of: odoo/odoo#193554
Forward-Port-Of: odoo/odoo#193401",fw-bot,2025-01-14 17:02:41+00:00,[],2025-01-29 05:27:42+00:00,2025-01-15 04:50:41+00:00,https://github.com/odoo/odoo/pull/193635,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590579311, 'issue_id': 2787784543, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193635.png)](https://mergebot.odoo.com/odoo/odoo/pull/193635)', 'created_at': datetime.datetime(2025, 1, 14, 17, 2, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590579338, 'issue_id': 2787784543, 'author': 'fw-bot', 'body': '@lvsz this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 2, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591575237, 'issue_id': 2787784543, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 3, 38, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 17:02:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193635.png)](https://mergebot.odoo.com/odoo/odoo/pull/193635)

fw-bot (Issue Creator) on (2025-01-14 17:02:43 UTC): @lvsz this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-15 03:38:20 UTC): robodoo r+

"
2787767721,pull_request,closed,,[FIX] mrp: only show current company calendar in workcenter,"Steps to reproduce the bug:
- Create a workcenter:

Problem:
All the resource calendar from all the companies are displayed.

opw-4478393",DjamelTouati,2025-01-14 16:55:58+00:00,[],2025-02-05 15:20:32+00:00,2025-01-16 10:31:55+00:00,https://github.com/odoo/odoo/pull/193634,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590563171, 'issue_id': 2787767721, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193634.png)](https://mergebot.odoo.com/odoo/odoo/pull/193634)', 'created_at': datetime.datetime(2025, 1, 14, 16, 56, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594829886, 'issue_id': 2787767721, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 8, 33, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626544138, 'issue_id': 2787767721, 'author': 'Williambraecky', 'body': '@DjamelTouati @Whenrow \r\nHi, the test is [failing without demo data](https://runbot.odoo.com/odoo/runbot.build.error/112213) could you take a look?\r\nThanks.', 'created_at': datetime.datetime(2025, 1, 31, 8, 3, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637223886, 'issue_id': 2787767721, 'author': 'DjamelTouati', 'body': '@Williambraecky indeed, thanks for the info ;) https://github.com/odoo/odoo/pull/196656/files', 'created_at': datetime.datetime(2025, 2, 5, 15, 20, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:56:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193634.png)](https://mergebot.odoo.com/odoo/odoo/pull/193634)

Whenrow on (2025-01-16 08:33:17 UTC): robodoo r+

Williambraecky on (2025-01-31 08:03:45 UTC): @DjamelTouati @Whenrow 
Hi, the test is [failing without demo data](https://runbot.odoo.com/odoo/runbot.build.error/112213) could you take a look?
Thanks.

DjamelTouati (Issue Creator) on (2025-02-05 15:20:30 UTC): @Williambraecky indeed, thanks for the info ;) https://github.com/odoo/odoo/pull/196656/files

"
2787766161,pull_request,closed,,[FW][FIX] account: translate tax tags,"The tax tags are translatable but never translated automatically because they are generated dynamically from the tax report.

This commit aims at improving this by translating automatically the tags that match exactly the name of the tax report line, for instance in Israel.

Forward-Port-Of: odoo/odoo#192233",fw-bot,2025-01-14 16:55:25+00:00,[],2025-01-29 15:01:30+00:00,2025-01-15 14:33:57+00:00,https://github.com/odoo/odoo/pull/193633,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590561483, 'issue_id': 2787766161, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193633.png)](https://mergebot.odoo.com/odoo/odoo/pull/193633)', 'created_at': datetime.datetime(2025, 1, 14, 16, 55, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590561509, 'issue_id': 2787766161, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 55, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:55:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193633.png)](https://mergebot.odoo.com/odoo/odoo/pull/193633)

fw-bot (Issue Creator) on (2025-01-14 16:55:27 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787746704,pull_request,closed,,[FW][17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193522",fw-bot,2025-01-14 16:48:55+00:00,[],2025-01-31 04:26:21+00:00,2025-01-17 03:45:30+00:00,https://github.com/odoo/odoo/pull/193632,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590528324, 'issue_id': 2787746704, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193632.png)](https://mergebot.odoo.com/odoo/odoo/pull/193632)', 'created_at': datetime.datetime(2025, 1, 14, 16, 48, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590528352, 'issue_id': 2787746704, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 48, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597299190, 'issue_id': 2787746704, 'author': 'robodoo', 'body': '@yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 217431eca6f77a183a3be8b25c3c0364dac3eee6 (view more at https://runbot.odoo.com/runbot/build/73500801)', 'created_at': datetime.datetime(2025, 1, 17, 2, 23, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597305504, 'issue_id': 2787746704, 'author': 'vin-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 17, 2, 30, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:48:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193632.png)](https://mergebot.odoo.com/odoo/odoo/pull/193632)

fw-bot (Issue Creator) on (2025-01-14 16:48:57 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-17 02:23:56 UTC): @yostashiro @jco-odoo @vin-odoo staging failed: ci/runbot on 217431eca6f77a183a3be8b25c3c0364dac3eee6 (view more at https://runbot.odoo.com/runbot/build/73500801)

vin-odoo on (2025-01-17 02:30:26 UTC): @robodoo retry

"
2787738814,pull_request,closed,,[FW][FIX] account: prevent double currency column when multiple active currencies exist,"Description of the issue/feature this PR addresses:
This PR addresses the issue where the currency column repeats in view_move_line_payment_tree view when there are multiple active currencies. This can lead to confusion and clutter in the user interface.

Current behavior before PR:
Before this PR, when multiple active currencies are set up, the currency column is duplicated in view_move_line_payment_tree view, displaying the same information multiple times.

Desired behavior after PR is merged:
After merging this PR, the currency column will appear only once when the optional hide setting is enabled, even with multiple active currencies, resulting in a cleaner and more readable report.

[Video](https://drive.google.com/file/d/1bL8L88y81HomX6Q9MkErmOGVDWHdE4_r/view)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193189
Forward-Port-Of: odoo/odoo#192784",fw-bot,2025-01-14 16:46:33+00:00,[],2025-01-30 10:23:44+00:00,2025-01-16 10:12:37+00:00,https://github.com/odoo/odoo/pull/193631,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590522197, 'issue_id': 2787738814, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193631.png)](https://mergebot.odoo.com/odoo/odoo/pull/193631)', 'created_at': datetime.datetime(2025, 1, 14, 16, 46, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590522224, 'issue_id': 2787738814, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 46, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:46:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193631.png)](https://mergebot.odoo.com/odoo/odoo/pull/193631)

fw-bot (Issue Creator) on (2025-01-14 16:46:35 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787737939,pull_request,closed,,[FW][FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435

Forward-Port-Of: odoo/odoo#193450",fw-bot,2025-01-14 16:46:16+00:00,[],2025-01-29 09:25:10+00:00,2025-01-15 09:07:27+00:00,https://github.com/odoo/odoo/pull/193630,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590521467, 'issue_id': 2787737939, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193630.png)](https://mergebot.odoo.com/odoo/odoo/pull/193630)', 'created_at': datetime.datetime(2025, 1, 14, 16, 46, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590521499, 'issue_id': 2787737939, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 46, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:46:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193630.png)](https://mergebot.odoo.com/odoo/odoo/pull/193630)

fw-bot (Issue Creator) on (2025-01-14 16:46:18 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787735462,pull_request,closed,,[FW][FIX] account: draft bill entries in partner ledger,"### Before
When creating a new vendor bill through Vendors > 'Example Vendor 1'> Vendor Bills (magic button), if the vendor was changed to 'Example Vendor 2' and the draft saved then it would show up under the 'Example Vendor 1' in the Partner Ledger instead of under the correct 'Example Vendor 2'. 

This is due to the partner_id being defined in the context when going through the 'Example Vendor 1' view. 

### Now
During the creation of the account move lines we use a context without the default_partner_id.

The Partner Ledger now shows the draft bill entry under the right vendor.

opw-4407709

Forward-Port-Of: odoo/odoo#192567",fw-bot,2025-01-14 16:45:34+00:00,[],2025-01-29 19:07:54+00:00,2025-01-15 18:55:19+00:00,https://github.com/odoo/odoo/pull/193629,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590519659, 'issue_id': 2787735462, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193629.png)](https://mergebot.odoo.com/odoo/odoo/pull/193629)', 'created_at': datetime.datetime(2025, 1, 14, 16, 45, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590519681, 'issue_id': 2787735462, 'author': 'fw-bot', 'body': '@aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_move.py\nCONFLICT (content): Merge conflict in addons/account/models/account_move.py\nAuto-merging addons/account/tests/test_account_move_out_invoice.py\nCONFLICT (content): Merge conflict in addons/account/tests/test_account_move_out_invoice.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 45, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592689979, 'issue_id': 2787735462, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 12, 31, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:45:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193629.png)](https://mergebot.odoo.com/odoo/odoo/pull/193629)

fw-bot (Issue Creator) on (2025-01-14 16:45:36 UTC): @aizu-odoo @william-andre cherrypicking of pull request odoo/odoo#192567 failed.

stdout:
```
Auto-merging addons/account/models/account_move.py
CONFLICT (content): Merge conflict in addons/account/models/account_move.py
Auto-merging addons/account/tests/test_account_move_out_invoice.py
CONFLICT (content): Merge conflict in addons/account/tests/test_account_move_out_invoice.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

aizu-odoo on (2025-01-15 12:31:01 UTC): @robodoo r+

"
2787734779,pull_request,closed,,[FW][FIX] 16.0 l10n_es_edi_tbai prevent ZeroDivisionError,"[FIX] l10n_es_edi_tbai prevent ZeroDivisionError when invoice line quantity is zero

Current behavior before PR:

If any invoice line quantity is zero, ZeroDivisionError: float division by zero is raised when trying to post the account edi document to the tax agency.

Desired behavior after PR is merged:

No error is raised and the account edi document related to the invoice is sent to the tax agency.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193500",fw-bot,2025-01-14 16:45:16+00:00,[],2025-01-16 10:48:02+00:00,2025-01-16 10:47:51+00:00,https://github.com/odoo/odoo/pull/193628,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590518880, 'issue_id': 2787734779, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193628.png)](https://mergebot.odoo.com/odoo/odoo/pull/193628)', 'created_at': datetime.datetime(2025, 1, 14, 16, 45, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590518919, 'issue_id': 2787734779, 'author': 'fw-bot', 'body': '@uolaizola @rugo-odoo cherrypicking of pull request odoo/odoo#193500 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_es_edi_tbai/models/account_edi_format.py\nCONFLICT (content): Merge conflict in addons/l10n_es_edi_tbai/models/account_edi_format.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 45, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595188551, 'issue_id': 2787734779, 'author': 'rugo-odoo', 'body': 'Changes are already present (it was a back-port).', 'created_at': datetime.datetime(2025, 1, 16, 10, 47, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:45:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193628.png)](https://mergebot.odoo.com/odoo/odoo/pull/193628)

fw-bot (Issue Creator) on (2025-01-14 16:45:18 UTC): @uolaizola @rugo-odoo cherrypicking of pull request odoo/odoo#193500 failed.

stdout:
```
Auto-merging addons/l10n_es_edi_tbai/models/account_edi_format.py
CONFLICT (content): Merge conflict in addons/l10n_es_edi_tbai/models/account_edi_format.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

rugo-odoo on (2025-01-16 10:47:44 UTC): Changes are already present (it was a back-port).

"
2787722590,pull_request,closed,,[FW][FIX] base: fix access error to currencies when in child company,"Steps to reproduce (db with Accounting installed):
- create a child company
- give a user (e.g. Marc Demo) access to the child company, set
their ""Accounting"" rights to ""Accountant"" and ""Administration"" to None.
- log as this user and select only the child company in the company
selector.
- try to access ""Accounting/Configuration/Accounting/Currencies""
-> Access Error

It is happening as in the `res.currency` model, several methods try to
access the root company, but there's only the child company in
`allowed_company_ids` from the context.

The fix here is to:
1) When accessing the root company in order the get its currency, just
access the currency of the child company, as it is the same.
2) Use sudo when accessing other fields from the root company.

opw-4352595

Forward-Port-Of: odoo/odoo#192982
Forward-Port-Of: odoo/odoo#192632",fw-bot,2025-01-14 16:41:58+00:00,[],2025-01-29 16:28:28+00:00,2025-01-15 16:27:48+00:00,https://github.com/odoo/odoo/pull/193627,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590507662, 'issue_id': 2787722590, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193627.png)](https://mergebot.odoo.com/odoo/odoo/pull/193627)', 'created_at': datetime.datetime(2025, 1, 14, 16, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590507696, 'issue_id': 2787722590, 'author': 'fw-bot', 'body': '@Arnaud-Sibille @william-andre cherrypicking of pull request odoo/odoo#192632 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/models/res_currency.py\nCONFLICT (content): Merge conflict in odoo/addons/base/models/res_currency.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590803795, 'issue_id': 2787722590, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 18, 26, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591354345, 'issue_id': 2787722590, 'author': 'robodoo', 'body': '@Arnaud-Sibille @william-andre staging failed: ci/runbot on 0baaad9e1f5dc990236b4adbb0e9b0f9ae52765c (view more at https://runbot.odoo.com/runbot/build/73373914)', 'created_at': datetime.datetime(2025, 1, 15, 0, 9, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478265, 'issue_id': 2787722590, 'author': 'fw-bot', 'body': '@Arnaud-Sibille @william-andre this forward port of odoo/odoo#192632 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592331202, 'issue_id': 2787722590, 'author': 'william-andre', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 15, 10, 58, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:42:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193627.png)](https://mergebot.odoo.com/odoo/odoo/pull/193627)

fw-bot (Issue Creator) on (2025-01-14 16:42:00 UTC): @Arnaud-Sibille @william-andre cherrypicking of pull request odoo/odoo#192632 failed.

stdout:
```
Auto-merging odoo/addons/base/models/res_currency.py
CONFLICT (content): Merge conflict in odoo/addons/base/models/res_currency.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-14 18:26:57 UTC): @robodoo r+

robodoo on (2025-01-15 00:09:14 UTC): @Arnaud-Sibille @william-andre staging failed: ci/runbot on 0baaad9e1f5dc990236b4adbb0e9b0f9ae52765c (view more at https://runbot.odoo.com/runbot/build/73373914)

fw-bot (Issue Creator) on (2025-01-15 02:01:28 UTC): @Arnaud-Sibille @william-andre this forward port of odoo/odoo#192632 is awaiting action (not merged or closed).

william-andre on (2025-01-15 10:58:03 UTC): @robodoo retry

"
2787721837,pull_request,closed,,[FW][FIX] stock: sync SM's dest loc with picking's dest loc,"When changing the destination location of a picking, the destination
location of the stock moves are not updated and the user may not
even notice it.

To reproduce the issue:
1. In Settings, enable ""Storage Locations""
2. Inventory > Operations > Receipt, New
   - Add an operation
   - Change the destination location of the picking
3. Save
4. Mark as Todo
5. Open the created move

Error: the destination location of the stock move is still the
initial one

On the picking model, there are two fields that contain the stock moves:
https://github.com/odoo/odoo/blob/17a63a6cda41a44e3d4ff8b5a9042e93ba956bc8/addons/stock/models/stock_picking.py#L612-L614
Where `move_ids_without_packages` is a subset of `move_ids`

When editing the operations of a picking, we are actually dealing
with the field `move_ids_without_packages`. So, when changing the
destination location of the picking, the webclient sends the SMs via
the field `move_ids_without_packages`, i.e.: the web client does not
provide any value for `move_ids`.

Server side, when creating a `new` record based on the provided
values, we will handle the inverse of `move_ids_without_packages`,
i.e.: we will make sure that the stock moves have the field
`picking_id` correctly defined:
https://github.com/odoo/odoo/blob/a4c2f66700dd98487ac6bb8f0f25fdc4abffd0bf/odoo/models.py#L6366-L6374
**But** we don't define any value for the siblings of the field. It
means that we don't set any value for the field `move_ids`.

This will lead to the bug: later on in the onchange, we flag all
fields that will have to be recomputed:
https://github.com/odoo/odoo/blob/b794f0f332f473deb2c04eba60baf4761db3b508/addons/web/models/models.py#L983
And here we would hope that the field `location_dest_id` of the
stock moves will be flagged, as mentioned in the dependencies:
https://github.com/odoo/odoo/blob/68ae97bd27fbdc874922e03f52f8b0c7953df801/addons/stock/models/stock_move.py#L206-L207
But... In `_modified_triggers`, at some point, we are here
https://github.com/odoo/odoo/blob/a4c2f66700dd98487ac6bb8f0f25fdc4abffd0bf/odoo/models.py#L7200-L7203
Where `field` is `stock.move.picking_id`. So, we iterate on the
inverse field of `field`, i.e.: `move_ids` and
`move_ids_without_packages`. However, as explicitly mentioned in the
comment, we ""use an inverse of field without domain"", i.e.:
`move_ids`. We therefore read the value of this field on the picking
which is, because of the bug explained in the previous paragraph, an
empty record. As a result, the ORM considers that it does not have
to recompute any `location_dest_id`.

The ORM team is aware of the issue. They have tried to write a generic
solution (cf PR [191318](https://github.com/odoo/odoo/pull/191318)) but it led to a lot of other errors. So, the
issue has been considered as a limitation and added to a todo list
on their side.

In the meantime, it is possible to patch the issue with a
stock-specific fix.

Note: the issue will also happen when editing an existing picking.
Suppose a picking with one move SM01. The user adds a second move
SM02, does not save and edits the destination location of the
picking: for the same reasons, the ORM will only see SM01 and,
therefore, will call the compute method for SM01 only.

OPW-4379509

Forward-Port-Of: odoo/odoo#191934",fw-bot,2025-01-14 16:41:42+00:00,[],2025-01-29 16:28:22+00:00,2025-01-15 16:27:08+00:00,https://github.com/odoo/odoo/pull/193626,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590506902, 'issue_id': 2787721837, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193626.png)](https://mergebot.odoo.com/odoo/odoo/pull/193626)', 'created_at': datetime.datetime(2025, 1, 14, 16, 41, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590506958, 'issue_id': 2787721837, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 41, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:41:48 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193626.png)](https://mergebot.odoo.com/odoo/odoo/pull/193626)

fw-bot (Issue Creator) on (2025-01-14 16:41:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787688668,pull_request,closed,,[FW][FIX] hr: added domain to show activity plans by selected company or globally,"Steps:
- Go to the 'Activity Plans' section.
- Select a company in the company widget.
- Activity plans were not filtered based on the selected company.

Issues:
- Activity plans were not filtered correctly by the selected company, showing plans from unrelated companies.

Fix:
- Added domain to display activity plans assigned to the selected company.
- Added domain to display global activity plans when no company is selected.

Task - 4441838

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:

Forward-Port-Of: odoo/odoo#192171",fw-bot,2025-01-14 16:29:22+00:00,[],2025-01-29 16:28:30+00:00,2025-01-15 16:28:06+00:00,https://github.com/odoo/odoo/pull/193625,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590466266, 'issue_id': 2787688668, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193625.png)](https://mergebot.odoo.com/odoo/odoo/pull/193625)', 'created_at': datetime.datetime(2025, 1, 14, 16, 29, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590466285, 'issue_id': 2787688668, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 29, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:29:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193625.png)](https://mergebot.odoo.com/odoo/odoo/pull/193625)

fw-bot (Issue Creator) on (2025-01-14 16:29:24 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787685373,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 16:28:26+00:00,[],2025-01-29 18:21:55+00:00,2025-01-15 18:18:10+00:00,https://github.com/odoo/odoo/pull/193624,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590463421, 'issue_id': 2787685373, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193624.png)](https://mergebot.odoo.com/odoo/odoo/pull/193624)', 'created_at': datetime.datetime(2025, 1, 14, 16, 28, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590463444, 'issue_id': 2787685373, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 28, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592205537, 'issue_id': 2787685373, 'author': 'fw-bot', 'body': ""@bvr-odoo @SergeBayet child PR odoo/odoo#193644 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross."", 'created_at': datetime.datetime(2025, 1, 15, 10, 6, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593130007, 'issue_id': 2787685373, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 15, 11, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:28:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193624.png)](https://mergebot.odoo.com/odoo/odoo/pull/193624)

fw-bot (Issue Creator) on (2025-01-14 16:28:28 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 10:06:43 UTC): @bvr-odoo @SergeBayet child PR odoo/odoo#193644 was modified / updated and has become a normal PR. This PR (and any of its parents) will need to be merged independently as approvals won't cross.

SergeBayet on (2025-01-15 15:11:49 UTC): @robodoo r+

"
2787680569,pull_request,closed,,[FW][CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193539",fw-bot,2025-01-14 16:26:53+00:00,[],2025-01-29 09:25:10+00:00,2025-01-15 09:07:31+00:00,https://github.com/odoo/odoo/pull/193623,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590456446, 'issue_id': 2787680569, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193623.png)](https://mergebot.odoo.com/odoo/odoo/pull/193623)', 'created_at': datetime.datetime(2025, 1, 14, 16, 26, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590456490, 'issue_id': 2787680569, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 26, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:26:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193623.png)](https://mergebot.odoo.com/odoo/odoo/pull/193623)

fw-bot (Issue Creator) on (2025-01-14 16:26:55 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787627301,pull_request,closed,,[FW][FIX] spreadsheet_dashboard_purchase*: wrong scoreboard data,"* = stock

* PROPBLEM: when viewing purchase or vendor dashboard (under logistic section) , viewing the scoreboard for purchased or order it calculate all record from purchase.report but when clicking on it, redirect to view of 'purchase order' only which is wrong compare to the number display on the scoreboard
* SOLUTION: This commit fix by edit the domain of related pivot which the scoreboard use to display data to the domain having state in either Purchase or Done

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191985",fw-bot,2025-01-14 16:12:17+00:00,[],2025-01-29 09:25:20+00:00,2025-01-15 09:20:18+00:00,https://github.com/odoo/odoo/pull/193622,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590390846, 'issue_id': 2787627301, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193622.png)](https://mergebot.odoo.com/odoo/odoo/pull/193622)', 'created_at': datetime.datetime(2025, 1, 14, 16, 12, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590390871, 'issue_id': 2787627301, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 12, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590649182, 'issue_id': 2787627301, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow the next pull request (odoo/odoo#193640) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 17, 31, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478517, 'issue_id': 2787627301, 'author': 'fw-bot', 'body': '@duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591869520, 'issue_id': 2787627301, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 56, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:12:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193622.png)](https://mergebot.odoo.com/odoo/odoo/pull/193622)

fw-bot (Issue Creator) on (2025-01-14 16:12:19 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 17:31:42 UTC): @duong77476-viindoo @Whenrow the next pull request (odoo/odoo#193640) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:39 UTC): @duong77476-viindoo @Whenrow this forward port of odoo/odoo#191985 is awaiting action (not merged or closed).

Whenrow on (2025-01-15 07:56:52 UTC): robodoo r+

"
2787607920,pull_request,closed,,"[FIX] core: http.route ""methods"" accepts any Iterable","The docstring of `@route` states that it accepts any iterable for the `methods` argument, but several places in the source code wrongly expected a list, and break if it is a tuple.
",Julien00859,2025-01-14 16:06:52+00:00,[],2025-01-29 11:56:58+00:00,2025-01-15 11:54:37+00:00,https://github.com/odoo/odoo/pull/193621,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590366692, 'issue_id': 2787607920, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193621.png)](https://mergebot.odoo.com/odoo/odoo/pull/193621)', 'created_at': datetime.datetime(2025, 1, 14, 16, 6, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590381245, 'issue_id': 2787607920, 'author': 'robodoo', 'body': ""@Julien00859 'ci/security' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 14, 16, 10, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590403418, 'issue_id': 2787607920, 'author': 'Julien00859', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 1, 14, 16, 15, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590465689, 'issue_id': 2787607920, 'author': 'mart-e', 'body': '@robodoo override=ci/security\r\nReason: test route', 'created_at': datetime.datetime(2025, 1, 14, 16, 29, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592151935, 'issue_id': 2787607920, 'author': 'Julien00859', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 46, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:06:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193621.png)](https://mergebot.odoo.com/odoo/odoo/pull/193621)

robodoo on (2025-01-14 16:10:03 UTC): @Julien00859 'ci/security' failed on this reviewed PR.

Julien00859 (Issue Creator) on (2025-01-14 16:15:38 UTC): @robodoo r-

mart-e on (2025-01-14 16:29:12 UTC): @robodoo override=ci/security
Reason: test route

Julien00859 (Issue Creator) on (2025-01-15 09:46:35 UTC): @robodoo r+

"
2787587383,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 16:00:28+00:00,[],2025-01-29 09:25:15+00:00,2025-01-15 09:16:12+00:00,https://github.com/odoo/odoo/pull/193620,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590336597, 'issue_id': 2787587383, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193620.png)](https://mergebot.odoo.com/odoo/odoo/pull/193620)', 'created_at': datetime.datetime(2025, 1, 14, 16, 0, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590336631, 'issue_id': 2787587383, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 16, 0, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 16:00:30 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193620.png)](https://mergebot.odoo.com/odoo/odoo/pull/193620)

fw-bot (Issue Creator) on (2025-01-14 16:00:30 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787572010,pull_request,closed,,[FW][IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.

Forward-Port-Of: odoo/odoo#193501",fw-bot,2025-01-14 15:55:18+00:00,[],2025-01-29 16:28:24+00:00,2025-01-15 16:27:30+00:00,https://github.com/odoo/odoo/pull/193619,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590322836, 'issue_id': 2787572010, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193619.png)](https://mergebot.odoo.com/odoo/odoo/pull/193619)', 'created_at': datetime.datetime(2025, 1, 14, 15, 55, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590322881, 'issue_id': 2787572010, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 55, 20, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:55:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193619.png)](https://mergebot.odoo.com/odoo/odoo/pull/193619)

fw-bot (Issue Creator) on (2025-01-14 15:55:20 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787571367,pull_request,closed,,[FIX] social:pushing notifications with wrong url,"When users post a post from social it post with a wrong url



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",elhayyany,2025-01-14 15:55:03+00:00,[],2025-01-20 09:28:23+00:00,2025-01-20 09:28:22+00:00,https://github.com/odoo/odoo/pull/193618,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590321963, 'issue_id': 2787571367, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193618.png)](https://mergebot.odoo.com/odoo/odoo/pull/193618)', 'created_at': datetime.datetime(2025, 1, 14, 15, 55, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601871516, 'issue_id': 2787571367, 'author': 'elhayyany', 'body': 'This was a demo PR.', 'created_at': datetime.datetime(2025, 1, 20, 9, 28, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:55:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193618.png)](https://mergebot.odoo.com/odoo/odoo/pull/193618)

elhayyany (Issue Creator) on (2025-01-20 09:28:23 UTC): This was a demo PR.

"
2787556515,pull_request,open,,[IMP] mail: new message separator when all messages are new,"Before this commit, new message separator was displayed even if all the messages
 in a conversation were new. This commit changes that behavior.

 task-4448873
",maki-odoo,2025-01-14 15:49:13+00:00,[],2025-01-14 16:00:14+00:00,,https://github.com/odoo/odoo/pull/193617,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590306590, 'issue_id': 2787556515, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193617.png)](https://mergebot.odoo.com/odoo/odoo/pull/193617)', 'created_at': datetime.datetime(2025, 1, 14, 15, 49, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:49:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193617.png)](https://mergebot.odoo.com/odoo/odoo/pull/193617)

"
2787510172,pull_request,closed,,[FIX] point_of_sale: correctly connect loaded many2one fields,"Before this commit, if a many2one field was loaded with its data, it would not get connected. For example, in the Chilean localization, the account_move is loaded when capturing an order, but it would not get linked, causing an error.

opw-4479284

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-14 15:32:51+00:00,[],2025-02-07 15:10:24+00:00,2025-02-07 15:10:23+00:00,https://github.com/odoo/odoo/pull/193616,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590258997, 'issue_id': 2787510172, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193616.png)](https://mergebot.odoo.com/odoo/odoo/pull/193616)', 'created_at': datetime.datetime(2025, 1, 14, 15, 32, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597634227, 'issue_id': 2787510172, 'author': 'pedrambiria', 'body': ""@davidmonnom it's green now"", 'created_at': datetime.datetime(2025, 1, 17, 7, 53, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2621987846, 'issue_id': 2787510172, 'author': 'pedrambiria', 'body': '@caburj Could you please review this?', 'created_at': datetime.datetime(2025, 1, 29, 15, 35, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2626642042, 'issue_id': 2787510172, 'author': 'caburj', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 31, 8, 32, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2627407903, 'issue_id': 2787510172, 'author': 'robodoo', 'body': '@pedrambiria @caburj staging failed: ci/l10n on 55bb40caf9bb8dc0ad344a91062d1a96e561a4eb (view more at https://runbot.odoo.com/runbot/build/74277713)', 'created_at': datetime.datetime(2025, 1, 31, 13, 53, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636904664, 'issue_id': 2787510172, 'author': 'sbel-odoo', 'body': ""Hello @agr-odoo @pedrambiria ,\r\n\r\nI'm not 100% sure but isn't this similar to your other pr AGR https://github.com/odoo/odoo/pull/194993 ?"", 'created_at': datetime.datetime(2025, 2, 5, 13, 48, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637340214, 'issue_id': 2787510172, 'author': 'pedrambiria', 'body': '@sbel-odoo Hello,\r\nYes, both PRs aim to solve the same issue, but I believe this one offers better performance.\r\ncc @agr-odoo', 'created_at': datetime.datetime(2025, 2, 5, 15, 58, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639137937, 'issue_id': 2787510172, 'author': 'agr-odoo', 'body': ""@pedrambiria \r\nYes, this will solve the same problem and it's more complete\r\nHowever it's affected by the same issue: you rely on `_raw` to always point to `baseData[model][record.id]`, however it seems not the case in a specific flow where `_raw.account_move` is not updated in the `update`:\r\n```\r\n- Open pos restaurant\r\n- Click on a table\r\n- Put something in the order\r\n- Click Order button\r\n- Go to payment\r\n- Invoice\r\n- Validate\r\n```\r\nI'm not sure why this occurs, the only solution I found is to re-establish the link by setting again `_raw` after retrieving `oldRecord` https://github.com/odoo/odoo/blob/6b364ff9b54acd8e97cdbff04ef059afe81cb9c5/addons/point_of_sale/static/src/app/models/related_models.js#L919"", 'created_at': datetime.datetime(2025, 2, 6, 8, 25, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639383776, 'issue_id': 2787510172, 'author': 'pedrambiria', 'body': '@agr-odoo Thanks for the explanation.\r\nI found a solution for it. Could you please check if it solves the issue?', 'created_at': datetime.datetime(2025, 2, 6, 10, 12, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639453935, 'issue_id': 2787510172, 'author': 'agr-odoo', 'body': '@pedrambiria \r\nNice idea, I tested locally and seems to work as expected (I manually started the l10n tests to be sure)', 'created_at': datetime.datetime(2025, 2, 6, 10, 42, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640272303, 'issue_id': 2787510172, 'author': 'agr-odoo', 'body': '@davidmonnom \r\nTests are ok, it seems this is ready for final review', 'created_at': datetime.datetime(2025, 2, 6, 16, 8, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2642963982, 'issue_id': 2787510172, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 7, 13, 35, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:32:55 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193616.png)](https://mergebot.odoo.com/odoo/odoo/pull/193616)

pedrambiria (Issue Creator) on (2025-01-17 07:53:40 UTC): @davidmonnom it's green now

pedrambiria (Issue Creator) on (2025-01-29 15:35:20 UTC): @caburj Could you please review this?

caburj on (2025-01-31 08:32:17 UTC): robodoo r+

robodoo on (2025-01-31 13:53:03 UTC): @pedrambiria @caburj staging failed: ci/l10n on 55bb40caf9bb8dc0ad344a91062d1a96e561a4eb (view more at https://runbot.odoo.com/runbot/build/74277713)

sbel-odoo on (2025-02-05 13:48:55 UTC): Hello @agr-odoo @pedrambiria ,

I'm not 100% sure but isn't this similar to your other pr AGR https://github.com/odoo/odoo/pull/194993 ?

pedrambiria (Issue Creator) on (2025-02-05 15:58:51 UTC): @sbel-odoo Hello,
Yes, both PRs aim to solve the same issue, but I believe this one offers better performance.
cc @agr-odoo

agr-odoo on (2025-02-06 08:25:37 UTC): @pedrambiria 
Yes, this will solve the same problem and it's more complete
However it's affected by the same issue: you rely on `_raw` to always point to `baseData[model][record.id]`, however it seems not the case in a specific flow where `_raw.account_move` is not updated in the `update`:
```
- Open pos restaurant
- Click on a table
- Put something in the order
- Click Order button
- Go to payment
- Invoice
- Validate
```
I'm not sure why this occurs, the only solution I found is to re-establish the link by setting again `_raw` after retrieving `oldRecord` https://github.com/odoo/odoo/blob/6b364ff9b54acd8e97cdbff04ef059afe81cb9c5/addons/point_of_sale/static/src/app/models/related_models.js#L919

pedrambiria (Issue Creator) on (2025-02-06 10:12:25 UTC): @agr-odoo Thanks for the explanation.
I found a solution for it. Could you please check if it solves the issue?

agr-odoo on (2025-02-06 10:42:07 UTC): @pedrambiria 
Nice idea, I tested locally and seems to work as expected (I manually started the l10n tests to be sure)

agr-odoo on (2025-02-06 16:08:57 UTC): @davidmonnom 
Tests are ok, it seems this is ready for final review

davidmonnom on (2025-02-07 13:35:05 UTC): @robodoo r+

"
2787509732,pull_request,closed,,[FW][IMP] web_editor: allow to search snippets by technical name / classes,"With the increasing number of snippets and their potential option classes, it became even more important to be able to search for them quickly while reviewing / testing features (... we really would like to restore the search for inner snippets too if it was accepted ...).

This commit improves the snippet search. If the search starts by 's_', it will:
- Also match any snippet whose root or child nodes have a class that begins by the search term.
- For those extra matches, sort them by:
    - Exact XMLID match first
    - Exact class match on the root node first
    - Partial class match on the root node first

Forward-Port-Of: odoo/odoo#193198
Forward-Port-Of: odoo/odoo#191829",fw-bot,2025-01-14 15:32:39+00:00,[],2025-01-15 13:00:54+00:00,2025-01-14 19:36:14+00:00,https://github.com/odoo/odoo/pull/193615,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590257938, 'issue_id': 2787509732, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193615.png)](https://mergebot.odoo.com/odoo/odoo/pull/193615)', 'created_at': datetime.datetime(2025, 1, 14, 15, 32, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590257996, 'issue_id': 2787509732, 'author': 'fw-bot', 'body': '@qsm-odoo @bvr-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 32, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590306839, 'issue_id': 2787509732, 'author': 'fw-bot', 'body': '@qsm-odoo @bvr-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 14, 15, 49, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590313674, 'issue_id': 2787509732, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 14, 15, 52, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:32:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193615.png)](https://mergebot.odoo.com/odoo/odoo/pull/193615)

fw-bot (Issue Creator) on (2025-01-14 15:32:41 UTC): @qsm-odoo @bvr-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 15:49:21 UTC): @qsm-odoo @bvr-odoo this PR was modified / updated and has become a normal PR. It must be merged directly.

robodoo on (2025-01-14 15:52:04 UTC): Merge method set to rebase and fast-forward.

"
2787508763,pull_request,closed,,[FW][FIX] point_of_sale: prevent category labels from being cut,"With Commit[1] we aimed to apply a fix to prevent an horizontal scroll on the screen when the list of category is extremely long. While this solved the issue, it introduces a new one on category labels which were sometimes cut due to the size of the grid elements.

| saas-18.1 | This PR |
|--------|--------|
| <img alt=""image"" src=""https://github.com/user-attachments/assets/d471ef51-502d-496c-8b84-7ec1e19d01af"" /> | <img alt=""image"" src=""https://github.com/user-attachments/assets/9870287e-17d1-47b3-a92c-8165f811a0e3"" /> | 

It was also setting the same class twice inside a conditional, which was not useful.

With this commit, we apply a `d-flex flex-wrap` to solve both issues.

Commit[1]: df97b2966436cd104bd806cb66786824f66fa567

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193458",fw-bot,2025-01-14 15:32:22+00:00,[],2025-01-28 18:24:50+00:00,2025-01-14 18:15:52+00:00,https://github.com/odoo/odoo/pull/193614,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2590257556, 'issue_id': 2787508763, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193614.png)](https://mergebot.odoo.com/odoo/odoo/pull/193614)', 'created_at': datetime.datetime(2025, 1, 14, 15, 32, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590257633, 'issue_id': 2787508763, 'author': 'fw-bot', 'body': '@chgo-odoo @adgu-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 32, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590287597, 'issue_id': 2787508763, 'author': 'chgo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 42, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:32:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193614.png)](https://mergebot.odoo.com/odoo/odoo/pull/193614)

fw-bot (Issue Creator) on (2025-01-14 15:32:37 UTC): @chgo-odoo @adgu-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

chgo-odoo on (2025-01-14 15:42:15 UTC): @robodoo r+

"
2787498815,pull_request,closed,,[FW][17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193522",fw-bot,2025-01-14 15:29:06+00:00,[],2025-01-31 03:16:08+00:00,2025-01-17 03:10:13+00:00,https://github.com/odoo/odoo/pull/193613,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590247124, 'issue_id': 2787498815, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193613.png)](https://mergebot.odoo.com/odoo/odoo/pull/193613)', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590247165, 'issue_id': 2787498815, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:29:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193613.png)](https://mergebot.odoo.com/odoo/odoo/pull/193613)

fw-bot (Issue Creator) on (2025-01-14 15:29:08 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787497987,pull_request,closed,,[FW][FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435

Forward-Port-Of: odoo/odoo#193450",fw-bot,2025-01-14 15:28:50+00:00,[],2025-01-29 09:25:18+00:00,2025-01-15 09:20:09+00:00,https://github.com/odoo/odoo/pull/193612,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590247013, 'issue_id': 2787497987, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193612.png)](https://mergebot.odoo.com/odoo/odoo/pull/193612)', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590247029, 'issue_id': 2787497987, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:29:04 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193612.png)](https://mergebot.odoo.com/odoo/odoo/pull/193612)

fw-bot (Issue Creator) on (2025-01-14 15:29:05 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787497067,pull_request,closed,,[FW][FIX] account: translate tax tags,"The tax tags are translatable but never translated automatically because they are generated dynamically from the tax report.

This commit aims at improving this by translating automatically the tags that match exactly the name of the tax report line, for instance in Israel.

Forward-Port-Of: odoo/odoo#192233",fw-bot,2025-01-14 15:28:33+00:00,[],2025-01-29 15:01:32+00:00,2025-01-15 14:40:26+00:00,https://github.com/odoo/odoo/pull/193611,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590246944, 'issue_id': 2787497067, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193611.png)](https://mergebot.odoo.com/odoo/odoo/pull/193611)', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590246969, 'issue_id': 2787497067, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:29:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193611.png)](https://mergebot.odoo.com/odoo/odoo/pull/193611)

fw-bot (Issue Creator) on (2025-01-14 15:29:03 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787496042,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#193469
Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-14 15:28:16+00:00,[],2025-01-29 19:07:52+00:00,2025-01-15 18:47:23+00:00,https://github.com/odoo/odoo/pull/193610,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590246863, 'issue_id': 2787496042, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193610.png)](https://mergebot.odoo.com/odoo/odoo/pull/193610)', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590246905, 'issue_id': 2787496042, 'author': 'fw-bot', 'body': '@lvsz @ryv-odoo cherrypicking of pull request odoo/odoo#190047 failed.\n\nstdout:\n```\nAuto-merging addons/test_base_automation/tests/test_flow.py\nAuto-merging odoo/addons/base/i18n/base.pot\nCONFLICT (content): Merge conflict in odoo/addons/base/i18n/base.pot\nAuto-merging odoo/addons/base/models/ir_actions.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 29, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593339128, 'issue_id': 2787496042, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 16, 8, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:29:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193610.png)](https://mergebot.odoo.com/odoo/odoo/pull/193610)

fw-bot (Issue Creator) on (2025-01-14 15:29:02 UTC): @lvsz @ryv-odoo cherrypicking of pull request odoo/odoo#190047 failed.

stdout:
```
Auto-merging addons/test_base_automation/tests/test_flow.py
Auto-merging odoo/addons/base/i18n/base.pot
CONFLICT (content): Merge conflict in odoo/addons/base/i18n/base.pot
Auto-merging odoo/addons/base/models/ir_actions.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-15 16:08:17 UTC): robodoo r+

"
2787489255,pull_request,closed,,[FW][FIX] hr_timesheet: make default measures translatable,"In the Tasks' and Tasks Analysis' chart and pivot views, some default measures were not translatable after [this commit]. The [previous fix] only solved one case.

We make them translatable again here so they can be localized.

[this commit]: https://github.com/odoo/odoo/commit/e82567f9d5842bd95fe01ba3b9f54a65437e313f
[previous fix]: https://github.com/odoo/odoo/commit/e7381c3a09014567a8bdb0802c6964cc35ffddd2

[opw-4421055](https://www.odoo.com/odoo/project.task/4421055)

Forward-Port-Of: odoo/odoo#193517",fw-bot,2025-01-14 15:25:48+00:00,[],2025-02-06 15:04:56+00:00,2025-01-23 14:43:02+00:00,https://github.com/odoo/odoo/pull/193609,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590237978, 'issue_id': 2787489255, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193609.png)](https://mergebot.odoo.com/odoo/odoo/pull/193609)', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590238003, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this PR targets 18.0 and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590514739, 'issue_id': 2787489255, 'author': 'dylankiss', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 16, 43, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590837589, 'issue_id': 2787489255, 'author': 'robodoo', 'body': '@dylankiss @MissingNoShiny staging failed: ci/runbot on bd6e9467cbf36e6b5e3a86ad0549c6601b4ee8be (view more at https://runbot.odoo.com/runbot/build/73344945)', 'created_at': datetime.datetime(2025, 1, 14, 18, 38, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468613, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 0, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600463150, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173241, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601755817, 'issue_id': 2787489255, 'author': 'dylankiss', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 20, 8, 37, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603048153, 'issue_id': 2787489255, 'author': 'robodoo', 'body': '@dylankiss @MissingNoShiny staging failed: ci/runbot on 9472ab2f0e4322964dcd0c412d0a41ec88bad361 (view more at https://runbot.odoo.com/runbot/build/73657858)', 'created_at': datetime.datetime(2025, 1, 20, 18, 34, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476099, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 1, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119303, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689216, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609489148, 'issue_id': 2787489255, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 23, 10, 51, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609489567, 'issue_id': 2787489255, 'author': 'dylankiss', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 51, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:25:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193609.png)](https://mergebot.odoo.com/odoo/odoo/pull/193609)

fw-bot (Issue Creator) on (2025-01-14 15:25:50 UTC): @dylankiss @MissingNoShiny this PR targets 18.0 and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dylankiss on (2025-01-14 16:43:51 UTC): @robodoo r+

robodoo on (2025-01-14 18:38:15 UTC): @dylankiss @MissingNoShiny staging failed: ci/runbot on bd6e9467cbf36e6b5e3a86ad0549c6601b4ee8be (view more at https://runbot.odoo.com/runbot/build/73344945)

fw-bot (Issue Creator) on (2025-01-18 02:00:51 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:35 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:32 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

dylankiss on (2025-01-20 08:37:57 UTC): @robodoo retry

robodoo on (2025-01-20 18:34:23 UTC): @dylankiss @MissingNoShiny staging failed: ci/runbot on 9472ab2f0e4322964dcd0c412d0a41ec88bad361 (view more at https://runbot.odoo.com/runbot/build/73657858)

fw-bot (Issue Creator) on (2025-01-21 02:01:18 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:32 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:13 UTC): @dylankiss @MissingNoShiny this forward port of odoo/odoo#193517 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 10:51:32 UTC): @dylankiss @MissingNoShiny this PR was modified / updated and has become a normal PR. It must be merged directly.

dylankiss on (2025-01-23 10:51:45 UTC): @robodoo r+

"
2787488601,pull_request,closed,,[FW][FIX] point_of_sale: order might be undefined on pending payment,"Using a payment method which rely on websocket (viva wallet, adyen, mercado pago, etc.) trigger a callback on all browser session of a given PoS session. If a browser session happen to not have any current session, a JS traceback will pop:
```js
TypeError: Cannot read properties of undefined (reading 'payment_ids')
```
due to the webscoket listener checking if there is on-going order using the payment method

opw-4374450

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193474",fw-bot,2025-01-14 15:25:31+00:00,[],2025-01-15 06:41:11+00:00,2025-01-15 06:41:11+00:00,https://github.com/odoo/odoo/pull/193608,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590237259, 'issue_id': 2787488601, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193608.png)](https://mergebot.odoo.com/odoo/odoo/pull/193608)', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590237283, 'issue_id': 2787488601, 'author': 'fw-bot', 'body': '@lse-odoo @davidmonnom cherrypicking of pull request odoo/odoo#193474 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/store/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/pos_store.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591763910, 'issue_id': 2787488601, 'author': 'lse-odoo', 'body': ""(won't happen in 18.0)"", 'created_at': datetime.datetime(2025, 1, 15, 6, 41, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:25:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193608.png)](https://mergebot.odoo.com/odoo/odoo/pull/193608)

fw-bot (Issue Creator) on (2025-01-14 15:25:33 UTC): @lse-odoo @davidmonnom cherrypicking of pull request odoo/odoo#193474 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/store/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/store/pos_store.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lse-odoo on (2025-01-15 06:41:11 UTC): (won't happen in 18.0)

"
2787487346,pull_request,closed,,[FW][IMP] account: unified the labelling of account.move.line,"In list view and reports, the accounting entries were displayed in different manners. Sometimes in a stupid way (name of the move repeated twice).

This commit aims to give a single and unified way to display them.

ticket-4440711




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193305
Forward-Port-Of: odoo/odoo#192463",fw-bot,2025-01-14 15:25:00+00:00,[],2025-01-31 15:52:52+00:00,2025-01-17 15:40:37+00:00,https://github.com/odoo/odoo/pull/193607,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590236087, 'issue_id': 2787487346, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193607.png)](https://mergebot.odoo.com/odoo/odoo/pull/193607)', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590236161, 'issue_id': 2787487346, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77130) did not succeed. You will need to fix it before this can be merged.\n\nBoth this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 25, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478370, 'issue_id': 2787487346, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313212, 'issue_id': 2787487346, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278112, 'issue_id': 2787487346, 'author': 'fw-bot', 'body': '@qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598234496, 'issue_id': 2787487346, 'author': 'qdp-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 12, 13, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:25:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193607.png)](https://mergebot.odoo.com/odoo/odoo/pull/193607)

fw-bot (Issue Creator) on (2025-01-14 15:25:07 UTC): @qdp-odoo @oco-odoo while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77130) did not succeed. You will need to fix it before this can be merged.

Both this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:33 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 02:01:12 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:01:03 UTC): @qdp-odoo @oco-odoo this forward port of odoo/odoo#192463 is awaiting action (not merged or closed).

qdp-odoo on (2025-01-17 12:13:06 UTC): @robodoo r+

"
2787486448,pull_request,closed,,[FW][FIX] account: prevent double currency column when multiple active currencies exist,"Description of the issue/feature this PR addresses:
This PR addresses the issue where the currency column repeats in view_move_line_payment_tree view when there are multiple active currencies. This can lead to confusion and clutter in the user interface.

Current behavior before PR:
Before this PR, when multiple active currencies are set up, the currency column is duplicated in view_move_line_payment_tree view, displaying the same information multiple times.

Desired behavior after PR is merged:
After merging this PR, the currency column will appear only once when the optional hide setting is enabled, even with multiple active currencies, resulting in a cleaner and more readable report.

[Video](https://drive.google.com/file/d/1bL8L88y81HomX6Q9MkErmOGVDWHdE4_r/view)
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193189
Forward-Port-Of: odoo/odoo#192784",fw-bot,2025-01-14 15:24:35+00:00,[],2025-01-30 13:07:58+00:00,2025-01-16 12:58:03+00:00,https://github.com/odoo/odoo/pull/193606,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590234862, 'issue_id': 2787486448, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193606.png)](https://mergebot.odoo.com/odoo/odoo/pull/193606)', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590234882, 'issue_id': 2787486448, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 38, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:24:37 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193606.png)](https://mergebot.odoo.com/odoo/odoo/pull/193606)

fw-bot (Issue Creator) on (2025-01-14 15:24:38 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787485790,pull_request,closed,,[FW][FIX] point_of_sale: handle custom one2many fields,"Before this commit, if there was a custom one2many field with the same related field as an existing one, it would cause issues in PoS when capturing an order. For example, if there was a custom field in pos.order with a related field of order_id, adding products to the order would not show them in the order summary.

opw-4462991

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193041",fw-bot,2025-01-14 15:24:19+00:00,[],2025-01-30 19:33:33+00:00,2025-01-16 19:29:40+00:00,https://github.com/odoo/odoo/pull/193605,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590234634, 'issue_id': 2787485790, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193605.png)](https://mergebot.odoo.com/odoo/odoo/pull/193605)', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590234681, 'issue_id': 2787485790, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590377555, 'issue_id': 2787485790, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 16, 9, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595580354, 'issue_id': 2787485790, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom the next pull request (odoo/odoo#193966) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 16, 13, 3, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596049328, 'issue_id': 2787485790, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 15, 35, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:24:31 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193605.png)](https://mergebot.odoo.com/odoo/odoo/pull/193605)

fw-bot (Issue Creator) on (2025-01-14 15:24:33 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 16:09:18 UTC): @pedrambiria @davidmonnom ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-16 13:03:15 UTC): @pedrambiria @davidmonnom the next pull request (odoo/odoo#193966) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-16 15:35:57 UTC): @robodoo r+

"
2787485075,pull_request,closed,,[FW][FIX] pos_restaurant: fix split order and release table,"Fonctionnal changes:
- Add a `Clear cache` button in debug mode to allow Android and IOS
devices to clear the cache easily.
- Ensure that the splitting and transferring of orders works correctly
when the order is sent to the server.

Technical changes:
- Ensure that change quantities are numbers (technical change).
- Do not send items that wasn't sent to the preparation display when
reaching the receipt screen.
- When deleting all orderlines with backspace on the product_screen and
clicking on release table, cancel the order if it was sent to the server

Forward-Port-Of: odoo/odoo#193024",fw-bot,2025-01-14 15:24:01+00:00,[],2025-01-30 13:08:07+00:00,2025-01-16 12:58:09+00:00,https://github.com/odoo/odoo/pull/193604,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590234495, 'issue_id': 2787485075, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193604.png)](https://mergebot.odoo.com/odoo/odoo/pull/193604)', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590234519, 'issue_id': 2787485075, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193024 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/models/utils/order_change.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/utils/order_change.js\nAuto-merging addons/point_of_sale/static/src/app/navbar/navbar.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/navbar/navbar.js\nAuto-merging addons/point_of_sale/static/src/app/navbar/navbar.xml\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/navbar/navbar.xml\nAuto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js\nAuto-merging addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js\nAuto-merging addons/pos_restaurant/static/src/overrides/models/pos_store.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/overrides/models/pos_store.js\nAuto-merging addons/pos_restaurant/static/tests/tours/floor_screen_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/refund_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js\nCONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js\nAuto-merging addons/pos_restaurant/static/tests/tours/tip_screen_tour.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595230525, 'issue_id': 2787485075, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 11, 7, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:24:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193604.png)](https://mergebot.odoo.com/odoo/odoo/pull/193604)

fw-bot (Issue Creator) on (2025-01-14 15:24:28 UTC): @davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#193024 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/models/utils/order_change.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/utils/order_change.js
Auto-merging addons/point_of_sale/static/src/app/navbar/navbar.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/navbar/navbar.js
Auto-merging addons/point_of_sale/static/src/app/navbar/navbar.xml
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/navbar/navbar.xml
Auto-merging addons/point_of_sale/static/src/app/screens/receipt_screen/receipt_screen.js
Auto-merging addons/pos_restaurant/static/src/app/split_bill_screen/split_bill_screen.js
Auto-merging addons/pos_restaurant/static/src/overrides/models/pos_store.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/src/overrides/models/pos_store.js
Auto-merging addons/pos_restaurant/static/tests/tours/floor_screen_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/pos_restaurant_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/refund_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js
CONFLICT (content): Merge conflict in addons/pos_restaurant/static/tests/tours/split_bill_screen_tour.js
Auto-merging addons/pos_restaurant/static/tests/tours/tip_screen_tour.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

davidmonnom on (2025-01-16 11:07:35 UTC): @robodoo r+

"
2787483741,pull_request,closed,,[FW][FIX] website_sale_loyalty: validate rewards before payment,"Versions
--------
- 16.0+

Steps
-----
1. Have a payment provider like Demo published;
2. create a discount program that expired yesterday;
3. change time of PC to yesterday;
4. go to eCommerce, add product to cart, go to checkout;
5. follow steps until you get to the ""Pay Now"" button;
6. change time of PC to today;
7. finalize payment.

Issue
-----
The payment transaction proceeds, but doesn't cover the entire amount, as the promotion was removed afterwards.

Cause
-----
When initiating payment, there's check on whether the applied rewards are still valid.

Solution
--------
Add an override for `_validate_transaction_for_order`, which compares the order amount before and after updating programs & rewards.

If they don't match, raise a `ValidationError`, forcing the user reload the order without expired programs & rewards.

opw-4304241

Forward-Port-Of: odoo/odoo#193485
Forward-Port-Of: odoo/odoo#191256",fw-bot,2025-01-14 15:23:44+00:00,[],2025-01-29 17:35:56+00:00,2025-01-15 17:25:16+00:00,https://github.com/odoo/odoo/pull/193603,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590234449, 'issue_id': 2787483741, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193603.png)](https://mergebot.odoo.com/odoo/odoo/pull/193603)', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590234467, 'issue_id': 2787483741, 'author': 'fw-bot', 'body': '@lvsz cherrypicking of pull request odoo/odoo#191256 failed.\n\nstdout:\n```\nAuto-merging addons/website_sale_loyalty/i18n/website_sale_loyalty.pot\nCONFLICT (content): Merge conflict in addons/website_sale_loyalty/i18n/website_sale_loyalty.pot\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 24, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478713, 'issue_id': 2787483741, 'author': 'fw-bot', 'body': '@lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592050843, 'issue_id': 2787483741, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 10, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592157598, 'issue_id': 2787483741, 'author': 'robodoo', 'body': ""@lvsz 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 9, 49, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592265636, 'issue_id': 2787483741, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 32, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:24:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193603.png)](https://mergebot.odoo.com/odoo/odoo/pull/193603)

fw-bot (Issue Creator) on (2025-01-14 15:24:27 UTC): @lvsz cherrypicking of pull request odoo/odoo#191256 failed.

stdout:
```
Auto-merging addons/website_sale_loyalty/i18n/website_sale_loyalty.pot
CONFLICT (content): Merge conflict in addons/website_sale_loyalty/i18n/website_sale_loyalty.pot

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:50 UTC): @lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).

lvsz on (2025-01-15 09:10:15 UTC): robodoo r+

robodoo on (2025-01-15 09:49:06 UTC): @lvsz 'ci/runbot' failed on this reviewed PR.

lvsz on (2025-01-15 10:32:39 UTC): robodoo r+

"
2787459961,pull_request,closed,,[FIX] hw_posbox_homepage: duplicate Wi-Fi interface and Wi-Fi stability,"- Sometimes, an issue could occur displaying twice the connected Wi-Fi network, but one with the IP address of the access point (fictive 10.11.12.1).
- Once we unplugged the ethernet cable, when no Wi-Fi network was configured, there was no reconnection process (start access point mode).

Task: 4403568",loouis-t,2025-01-14 15:16:11+00:00,[],2025-02-01 19:34:19+00:00,2025-01-18 19:03:56+00:00,https://github.com/odoo/odoo/pull/193602,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590206102, 'issue_id': 2787459961, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193602.png)](https://mergebot.odoo.com/odoo/odoo/pull/193602)', 'created_at': datetime.datetime(2025, 1, 14, 15, 16, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592182864, 'issue_id': 2787459961, 'author': 'loouis-t', 'body': '@odoo/rd-security could you have a look at this please?\r\n\r\n## Context\r\n\r\nWe need to ensure access point is up when IoT Box has no internet.  \r\n\r\n### Solution proposed\r\n\r\nWe added a recurrent reconnect attempt (method will directly return if it already has internet).\r\n\r\n## Security issues\r\n\r\n- `with writable(), open(\'/etc/hostapd/hostapd.conf\', \'w\', encoding=\'utf-8\') as f:`\r\n  - **Reason for the use:** optimized -> avoid using `writable()` when `on=False`\r\n  - **Safe because:** security issue comes from path inside `open(`, which is hardcoded.\r\n- `[\'sudo\', \'ip\', \'address\', mode, \'10.11.12.1/24\', \'dev\', \'wlan0\'], check=False, stderr=subprocess.DEVNULL`\r\n  - **Reason for the use:** only added `stderr=subprocess.DEVNULL` to avoid pollutiong logs removing ""10.11.12.1"" when it doesn\'t exist.\r\n  - **Safe because:** command is still hardcoded.', 'created_at': datetime.datetime(2025, 1, 15, 9, 59, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598739825, 'issue_id': 2787459961, 'author': 'Ysoroko', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 16, 33, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:16:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193602.png)](https://mergebot.odoo.com/odoo/odoo/pull/193602)

loouis-t (Issue Creator) on (2025-01-15 09:59:55 UTC): @odoo/rd-security could you have a look at this please?

## Context

We need to ensure access point is up when IoT Box has no internet.  

### Solution proposed

We added a recurrent reconnect attempt (method will directly return if it already has internet).

## Security issues

- `with writable(), open('/etc/hostapd/hostapd.conf', 'w', encoding='utf-8') as f:`
  - **Reason for the use:** optimized -> avoid using `writable()` when `on=False`
  - **Safe because:** security issue comes from path inside `open(`, which is hardcoded.
- `['sudo', 'ip', 'address', mode, '10.11.12.1/24', 'dev', 'wlan0'], check=False, stderr=subprocess.DEVNULL`
  - **Reason for the use:** only added `stderr=subprocess.DEVNULL` to avoid pollutiong logs removing ""10.11.12.1"" when it doesn't exist.
  - **Safe because:** command is still hardcoded.

Ysoroko on (2025-01-17 16:33:08 UTC): @robodoo r+

"
2787455528,pull_request,closed,,[FW][FIX] stock: prevent crash in mobile stock move line view,"Steps to reproduce
==================

- Use a mobile viewport
- Go to Inventory > Delivery Orders
- Open any record
- Click on a product
- Click on add

=> TypeError: ml.data.quant_id is undefined

Cause of the issue
==================

On mobile, the quant_id field is not present in the view

opw-4288556

Forward-Port-Of: odoo/odoo#193452
Forward-Port-Of: odoo/odoo#192732",fw-bot,2025-01-14 15:15:06+00:00,[],2025-01-29 16:28:26+00:00,2025-01-15 16:27:39+00:00,https://github.com/odoo/odoo/pull/193601,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590200195, 'issue_id': 2787455528, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193601.png)](https://mergebot.odoo.com/odoo/odoo/pull/193601)', 'created_at': datetime.datetime(2025, 1, 14, 15, 15, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590200235, 'issue_id': 2787455528, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 15, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590408625, 'issue_id': 2787455528, 'author': 'fw-bot', 'body': '@hubvd @Whenrow ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 16, 17, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478211, 'issue_id': 2787455528, 'author': 'fw-bot', 'body': '@hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592295948, 'issue_id': 2787455528, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 46, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:15:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193601.png)](https://mergebot.odoo.com/odoo/odoo/pull/193601)

fw-bot (Issue Creator) on (2025-01-14 15:15:08 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 16:17:40 UTC): @hubvd @Whenrow ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-15 02:01:25 UTC): @hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).

hubvd on (2025-01-15 10:46:55 UTC): @robodoo r+

"
2787453913,pull_request,closed,,[FW][FIX] mail: error on mention click by guest,"Purpose of this commit:
When an operator mentions someone in an ongoing live chat conversation and the guest clicks on it, a traceback error is raised. This occurs because clicking on the mention attempts to execute an action to open the mentioned partner's record. Since the guest user lacks access to the action services in the services registry, the error is triggered. This commit resolves the issue.

task-4459050





---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192834",fw-bot,2025-01-14 15:14:44+00:00,[],2025-01-16 09:06:44+00:00,2025-01-15 18:18:14+00:00,https://github.com/odoo/odoo/pull/193600,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590198541, 'issue_id': 2787453913, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193600.png)](https://mergebot.odoo.com/odoo/odoo/pull/193600)', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590198623, 'issue_id': 2787453913, 'author': 'fw-bot', 'body': '@maad-odoo @alexkuhn cherrypicking of pull request odoo/odoo#192834 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/core/common/store_service.js\nAuto-merging addons/mail/static/src/core/web/store_service_patch.js\nAuto-merging addons/mail/static/src/discuss/core/common/store_service_patch.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/discuss/core/common/store_service_patch.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593294877, 'issue_id': 2787453913, 'author': 'maad-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 15, 50, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:14:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193600.png)](https://mergebot.odoo.com/odoo/odoo/pull/193600)

fw-bot (Issue Creator) on (2025-01-14 15:14:46 UTC): @maad-odoo @alexkuhn cherrypicking of pull request odoo/odoo#192834 failed.

stdout:
```
Auto-merging addons/mail/static/src/core/common/store_service.js
Auto-merging addons/mail/static/src/core/web/store_service_patch.js
Auto-merging addons/mail/static/src/discuss/core/common/store_service_patch.js
CONFLICT (content): Merge conflict in addons/mail/static/src/discuss/core/common/store_service_patch.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

maad-odoo on (2025-01-15 15:50:34 UTC): @robodoo r+

"
2787452702,pull_request,closed,,[FW][FIX] account: hide validate button on payment without oustanding,"This button is only useful for marking payments as paid when the matching doesn't do it automatically, which can only happen if there is no reconciliation being done, which only happens when there is no outstanding account used.

opw-4445889

Forward-Port-Of: odoo/odoo#192563",fw-bot,2025-01-14 15:14:28+00:00,[],2025-01-28 20:12:02+00:00,2025-01-14 19:39:35+00:00,https://github.com/odoo/odoo/pull/193599,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590197610, 'issue_id': 2787452702, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193599.png)](https://mergebot.odoo.com/odoo/odoo/pull/193599)', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590197651, 'issue_id': 2787452702, 'author': 'fw-bot', 'body': '@william-andre @rugo-odoo cherrypicking of pull request odoo/odoo#192563 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_payment.py\nAuto-merging addons/account/views/account_payment_view.xml\nCONFLICT (content): Merge conflict in addons/account/views/account_payment_view.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590302058, 'issue_id': 2787452702, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 47, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:14:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193599.png)](https://mergebot.odoo.com/odoo/odoo/pull/193599)

fw-bot (Issue Creator) on (2025-01-14 15:14:30 UTC): @william-andre @rugo-odoo cherrypicking of pull request odoo/odoo#192563 failed.

stdout:
```
Auto-merging addons/account/models/account_payment.py
Auto-merging addons/account/views/account_payment_view.xml
CONFLICT (content): Merge conflict in addons/account/views/account_payment_view.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

william-andre on (2025-01-14 15:47:32 UTC): @robodoo r+

"
2787451409,pull_request,closed,,[FW][FIX] mail: broken live call participant badge,"Before this commit the `LIVE` badge on the minimized call participant card had some styling issues. This was caused by missing padding on the related div tag and non-transparent background on the parent tag. This commit fixes the issue by introducing some padding and removing the css class that adds background opacity.

Before:
![Pasted image 20250113125543](https://github.com/user-attachments/assets/37573b8b-2ec1-4004-8171-3ff35655edc2)
![Pasted image 20250113152305](https://github.com/user-attachments/assets/2c7bda9c-23ec-4f09-b5ba-0afb9907e3ad)



After:
![image](https://github.com/user-attachments/assets/b2f6c159-7713-46d9-990a-817c6d4ec317)
![image](https://github.com/user-attachments/assets/f03e9072-85a1-4a11-bf4a-78aca68342c7)

Forward-Port-Of: odoo/odoo#193516",fw-bot,2025-01-14 15:14:11+00:00,[],2025-01-15 10:06:48+00:00,2025-01-14 19:39:40+00:00,https://github.com/odoo/odoo/pull/193598,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590196379, 'issue_id': 2787451409, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193598.png)](https://mergebot.odoo.com/odoo/odoo/pull/193598)', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590196431, 'issue_id': 2787451409, 'author': 'fw-bot', 'body': '@Atovange @alexkuhn cherrypicking of pull request odoo/odoo#193516 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/discuss/call/common/call_participant_card.xml\nCONFLICT (content): Merge conflict in addons/mail/static/src/discuss/call/common/call_participant_card.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590320891, 'issue_id': 2787451409, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 54, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:14:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193598.png)](https://mergebot.odoo.com/odoo/odoo/pull/193598)

fw-bot (Issue Creator) on (2025-01-14 15:14:14 UTC): @Atovange @alexkuhn cherrypicking of pull request odoo/odoo#193516 failed.

stdout:
```
Auto-merging addons/mail/static/src/discuss/call/common/call_participant_card.xml
CONFLICT (content): Merge conflict in addons/mail/static/src/discuss/call/common/call_participant_card.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-14 15:54:51 UTC): @robodoo r+

"
2787450315,pull_request,closed,,[FW][IMP] im_livechat: cleanup RTC session before we find an operator,"Before this PR, operators could be stuck inside a ""ghost call,"" meaning that they had incorrectly closed RTC sessions. This is an issue with the fact that ""in call"" operators cannot be assigned a new live chat.

This PR cleanup rtc session before trying to find an operator

task-4440897, task-4453597

Forward-Port-Of: odoo/odoo#193535",fw-bot,2025-01-14 15:13:55+00:00,[],2025-01-15 10:05:59+00:00,2025-01-14 18:22:29+00:00,https://github.com/odoo/odoo/pull/193597,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590196041, 'issue_id': 2787450315, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193597.png)](https://mergebot.odoo.com/odoo/odoo/pull/193597)', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590196108, 'issue_id': 2787450315, 'author': 'fw-bot', 'body': '@phenix-factory @alexkuhn cherrypicking of pull request odoo/odoo#193535 failed.\n\nstdout:\n```\nAuto-merging addons/im_livechat/models/im_livechat_channel.py\nCONFLICT (content): Merge conflict in addons/im_livechat/models/im_livechat_channel.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590572168, 'issue_id': 2787450315, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 16, 59, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:14:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193597.png)](https://mergebot.odoo.com/odoo/odoo/pull/193597)

fw-bot (Issue Creator) on (2025-01-14 15:14:09 UTC): @phenix-factory @alexkuhn cherrypicking of pull request odoo/odoo#193535 failed.

stdout:
```
Auto-merging addons/im_livechat/models/im_livechat_channel.py
CONFLICT (content): Merge conflict in addons/im_livechat/models/im_livechat_channel.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-14 16:59:53 UTC): @robodoo r+

"
2787448795,pull_request,closed,,[FW][FIX] point_of_sale: correctly apply multiple pricelist rules,"Before this commit, if there were multiple pricelist rules applicable to a product but they had minimum quantity conditions, PoS did not compute the price with the correct applicable pricelist rules if the top pricelist rule's minimum quantity was not satisfied.

opw-4407515

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193272
Forward-Port-Of: odoo/odoo#193202",fw-bot,2025-01-14 15:13:39+00:00,[],2025-01-23 10:30:08+00:00,2025-01-23 10:30:08+00:00,https://github.com/odoo/odoo/pull/193596,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590195917, 'issue_id': 2787448795, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193596.png)](https://mergebot.odoo.com/odoo/odoo/pull/193596)', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590195962, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj cherrypicking of pull request odoo/odoo#193202 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/models/product_product.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/product_product.js\nAuto-merging addons/point_of_sale/static/tests/pos/tours/product_screen_tour.js\nAuto-merging addons/point_of_sale/tests/test_frontend.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 14, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478052, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594312883, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 0, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597277886, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 0, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468659, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 0, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600464594, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 1, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173436, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606119571, 'issue_id': 2787448795, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609441857, 'issue_id': 2787448795, 'author': 'pedrambiria', 'body': 'It has been fixed here', 'created_at': datetime.datetime(2025, 1, 23, 10, 30, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:14:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193596.png)](https://mergebot.odoo.com/odoo/odoo/pull/193596)

fw-bot (Issue Creator) on (2025-01-14 15:14:07 UTC): @pedrambiria @caburj cherrypicking of pull request odoo/odoo#193202 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/models/product_product.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/models/product_product.js
Auto-merging addons/point_of_sale/static/tests/pos/tours/product_screen_tour.js
Auto-merging addons/point_of_sale/tests/test_frontend.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:17 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 02:00:56 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:00:52 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:00:57 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:01:46 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:01:43 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:01:43 UTC): @pedrambiria @caburj this forward port of odoo/odoo#193202 is awaiting action (not merged or closed).

pedrambiria on (2025-01-23 10:30:08 UTC): It has been fixed here

"
2787446024,pull_request,closed,,[FW][FIX] point_of_sale: keep manually set price,"After modifying the price of an order line, going to floorplans, selecting the previous table and setting a customer now keep the price previously manually set.

As the attribute `order_line.price_manually_set` is not saved in backend, when loading an order from the backend its value is always False. Now we recompute this attribute by comparing the default price of the product and the unit price of the orderline.

opw: 4393328

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193390
Forward-Port-Of: odoo/odoo#191053",fw-bot,2025-01-14 15:12:58+00:00,[],2025-01-15 09:26:32+00:00,2025-01-15 09:26:31+00:00,https://github.com/odoo/odoo/pull/193595,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590192777, 'issue_id': 2787446024, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193595.png)](https://mergebot.odoo.com/odoo/odoo/pull/193595)', 'created_at': datetime.datetime(2025, 1, 14, 15, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590192811, 'issue_id': 2787446024, 'author': 'fw-bot', 'body': '@manv-afk @adgu-odoo cherrypicking of pull request odoo/odoo#191053 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/point_of_sale/static/src/app/store/models.js deleted in 9fb1a87425d1fce1da313b08a0ad691dc35dbb87 and modified in 0b1c4cb21df2e0a56aea193b9bfe834f584dd75d.  Version 0b1c4cb21df2e0a56aea193b9bfe834f584dd75d of addons/point_of_sale/static/src/app/store/models.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478838, 'issue_id': 2787446024, 'author': 'fw-bot', 'body': '@manv-afk @adgu-odoo this forward port of odoo/odoo#191053 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:13:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193595.png)](https://mergebot.odoo.com/odoo/odoo/pull/193595)

fw-bot (Issue Creator) on (2025-01-14 15:13:00 UTC): @manv-afk @adgu-odoo cherrypicking of pull request odoo/odoo#191053 failed.

stdout:
```
CONFLICT (modify/delete): addons/point_of_sale/static/src/app/store/models.js deleted in 9fb1a87425d1fce1da313b08a0ad691dc35dbb87 and modified in 0b1c4cb21df2e0a56aea193b9bfe834f584dd75d.  Version 0b1c4cb21df2e0a56aea193b9bfe834f584dd75d of addons/point_of_sale/static/src/app/store/models.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:57 UTC): @manv-afk @adgu-odoo this forward port of odoo/odoo#191053 is awaiting action (not merged or closed).

"
2787438770,pull_request,closed,,"[FIX] mail, *: better avatar card style in dark theme","- im status background was white in all themes, this is now the card color in all themes.
- avatar card color was too grey in dark theme, which made reading text content in card hard. This is now darker for better contrast.
- border is darker in dark theme too, so it's less harsh.
- borders in corners of avatar card were cut due to lack of rounded of card container. This commit adds `.rounded` to not cut corners.

Style in white theme is essentially unchanged.

Before / After
![Screenshot 2025-01-14 at 16 05 19](https://github.com/user-attachments/assets/8aa64798-afe6-4139-8a62-df7ded153b06) ![Screenshot 2025-01-14 at 16 05 31](https://github.com/user-attachments/assets/5feb590f-1a86-435c-a6dc-9cb1a53db708)
",alexkuhn,2025-01-14 15:10:53+00:00,[],2025-01-15 22:34:58+00:00,2025-01-15 20:49:37+00:00,https://github.com/odoo/odoo/pull/193594,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590187097, 'issue_id': 2787438770, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193594.png)](https://mergebot.odoo.com/odoo/odoo/pull/193594)', 'created_at': datetime.datetime(2025, 1, 14, 15, 10, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592212852, 'issue_id': 2787438770, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 9, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:10:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193594.png)](https://mergebot.odoo.com/odoo/odoo/pull/193594)

alexkuhn (Issue Creator) on (2025-01-15 10:09:27 UTC): @robodoo r+

"
2787430070,pull_request,closed,,[FIX] account: fallback on the currency_rate when calculating the rate,"### Steps to reproduce:
- In Accounting create a new tax like this: -Tax computation: percentage of price tax included -Amount: 100% -Included in Price: Ticked
- Create a new Customer Invoice in another currency
- Use the 100% tax
- Go in the tab ""Journal Entries""
- The amounts were not converted

### Cause:
The rate is calculated like this : `rate = line.amount_currency / line.balance if line.balance else 1` But with this specific tax `amount_currency` and `balance` are 0 so the rate defaults to 1 thus not converting.

### Solution:
Fallback on the rate of the line.

opw-4443522",mathcoutant,2025-01-14 15:08:29+00:00,[],2025-02-03 12:14:14+00:00,2025-01-20 12:13:23+00:00,https://github.com/odoo/odoo/pull/193593,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590179881, 'issue_id': 2787430070, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193593.png)](https://mergebot.odoo.com/odoo/odoo/pull/193593)', 'created_at': datetime.datetime(2025, 1, 14, 15, 8, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590203763, 'issue_id': 2787430070, 'author': 'mathcoutant', 'body': '@robodoo up to saas-17.4', 'created_at': datetime.datetime(2025, 1, 14, 15, 15, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590204011, 'issue_id': 2787430070, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-17.4'."", 'created_at': datetime.datetime(2025, 1, 14, 15, 15, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594959639, 'issue_id': 2787430070, 'author': 'jbw-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 9, 10, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594973276, 'issue_id': 2787430070, 'author': 'robodoo', 'body': ""@mathcoutant @jbw-odoo 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 9, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594973301, 'issue_id': 2787430070, 'author': 'robodoo', 'body': ""@mathcoutant @jbw-odoo 'ci/template' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 9, 17, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601839254, 'issue_id': 2787430070, 'author': 'kitan191', 'body': '@robodoo delegate+', 'created_at': datetime.datetime(2025, 1, 20, 9, 14, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602087728, 'issue_id': 2787430070, 'author': 'mathcoutant', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 10, 52, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603993219, 'issue_id': 2787430070, 'author': 'fw-bot', 'body': ""Forward-porting to 'saas-17.4' (from odoo/odoo#194395)."", 'created_at': datetime.datetime(2025, 1, 21, 8, 44, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:08:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193593.png)](https://mergebot.odoo.com/odoo/odoo/pull/193593)

mathcoutant (Issue Creator) on (2025-01-14 15:15:51 UTC): @robodoo up to saas-17.4

robodoo on (2025-01-14 15:15:54 UTC): Forward-porting to 'saas-17.4'.

jbw-odoo on (2025-01-16 09:10:36 UTC): robodoo r+

robodoo on (2025-01-16 09:17:00 UTC): @mathcoutant @jbw-odoo 'ci/runbot' failed on this reviewed PR.

robodoo on (2025-01-16 09:17:01 UTC): @mathcoutant @jbw-odoo 'ci/template' failed on this reviewed PR.

kitan191 on (2025-01-20 09:14:13 UTC): @robodoo delegate+

mathcoutant (Issue Creator) on (2025-01-20 10:52:04 UTC): @robodoo r+

fw-bot on (2025-01-21 08:44:19 UTC): Forward-porting to 'saas-17.4' (from odoo/odoo#194395).

"
2787427466,pull_request,closed,,[FIX] base_import_module: fix ir_model_data xmlid for cloc_exclude,"The cloc_exclude entry of the manifest was activated for data modules*, and it works for records with a new id. But it fails for records with external ids from another module, as it tries to lookup for a record with an xmlid like `new_module.external_module.id`, which is not a valid xmlid.

This commit fixes the issue by first checking if the record to exclude from cloc is from another module or not, before creating the ir_model_data entry.

*https://github.com/odoo/odoo/commit/a47de680de149a60dd479c4c0b14f2c1bf5afcbe

opw-4472893",vava-odoo,2025-01-14 15:07:38+00:00,[],2025-01-29 13:26:30+00:00,2025-01-15 13:08:01+00:00,https://github.com/odoo/odoo/pull/193592,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590177410, 'issue_id': 2787427466, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193592.png)](https://mergebot.odoo.com/odoo/odoo/pull/193592)', 'created_at': datetime.datetime(2025, 1, 14, 15, 7, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592177819, 'issue_id': 2787427466, 'author': 'tfr-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 57, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:07:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193592.png)](https://mergebot.odoo.com/odoo/odoo/pull/193592)

tfr-odoo on (2025-01-15 09:57:50 UTC): @robodoo r+

"
2787427301,pull_request,closed,,[FW][CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193539",fw-bot,2025-01-14 15:07:33+00:00,[],2025-01-29 09:25:19+00:00,2025-01-15 09:20:14+00:00,https://github.com/odoo/odoo/pull/193591,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590177079, 'issue_id': 2787427301, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193591.png)](https://mergebot.odoo.com/odoo/odoo/pull/193591)', 'created_at': datetime.datetime(2025, 1, 14, 15, 7, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590177123, 'issue_id': 2787427301, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 7, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:07:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193591.png)](https://mergebot.odoo.com/odoo/odoo/pull/193591)

fw-bot (Issue Creator) on (2025-01-14 15:07:36 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787426394,pull_request,closed,,[FW][FIX] hr: added domain to show activity plans by selected company or globally,"Steps:
- Go to the 'Activity Plans' section.
- Select a company in the company widget.
- Activity plans were not filtered based on the selected company.

Issues:
- Activity plans were not filtered correctly by the selected company, showing plans from unrelated companies.

Fix:
- Added domain to display activity plans assigned to the selected company.
- Added domain to display global activity plans when no company is selected.

Task - 4441838

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:

Forward-Port-Of: odoo/odoo#192171",fw-bot,2025-01-14 15:07:17+00:00,[],2025-01-30 03:30:08+00:00,2025-01-16 03:25:38+00:00,https://github.com/odoo/odoo/pull/193590,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590176365, 'issue_id': 2787426394, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193590.png)](https://mergebot.odoo.com/odoo/odoo/pull/193590)', 'created_at': datetime.datetime(2025, 1, 14, 15, 7, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590176394, 'issue_id': 2787426394, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 7, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:07:19 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193590.png)](https://mergebot.odoo.com/odoo/odoo/pull/193590)

fw-bot (Issue Creator) on (2025-01-14 15:07:19 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787419171,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 15:05:04+00:00,[],2025-01-30 05:46:43+00:00,2025-01-16 05:03:09+00:00,https://github.com/odoo/odoo/pull/193589,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590170218, 'issue_id': 2787419171, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193589.png)](https://mergebot.odoo.com/odoo/odoo/pull/193589)', 'created_at': datetime.datetime(2025, 1, 14, 15, 5, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590170260, 'issue_id': 2787419171, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 15, 5, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 15:05:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193589.png)](https://mergebot.odoo.com/odoo/odoo/pull/193589)

fw-bot (Issue Creator) on (2025-01-14 15:05:06 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787401431,pull_request,closed,,"[FW][FIX] repair,sale_stock,stock_account: repair with auto FIFO component","When using an auto fifo product as part of the repair, the COGS
won't be based on the used product

To reproduce the issue:
1. Setup auto fifo product
2. Receive 1@10 and 1@20
3. Process a RO:
   - Invoice method: After repair
   - Parts:
     - Add 1 x fifo product
4. Create and post the invoice
5. Open its journal items

Error: Cogs are $20 instead of $10

When posting the invoice, we generate the COGS:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L47-L48
We therefore compute the ""anglo saxon unit price"":
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L133
However, there isn't any override to handle the RO case, so it leads
to the default mechanism, i.e. the standard price of the product:
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/4df156164cf1d2764ba23682beee588777457fd6/addons/stock_account/models/account_move.py#L294-L295
https://github.com/odoo/odoo/blob/7cd7563f6708331bb6baf0e06d07a9f9ee329e38/addons/stock_account/models/product.py#L753-L757

And, since the first product is out, its standard price is now based
on the next candidate: $20

About the `sudo`: an accountman has not any access to `repair`, so
posting such an invoice would raise an error. Since this diff is
specific to Odoo 16, the idea is not to impact any security rules
and rather minimize the changes.

Note: Indeed, `repair` does not depend on `stock_account`, so this
commit could lead to a traceback if the bridge is removed. I delegate
this issue to the error of dependencies. Anyway, removing the bridge
would lead to other bugs. Hopefully, this has been fixed on master [1].

[1] https://github.com/odoo/odoo/commit/f7dbdec11b74f8c7d969763d8c5cf09542a47f86

OPW-4166570

Forward-Port-Of: odoo/odoo#193076",fw-bot,2025-01-14 14:58:45+00:00,[],2025-01-29 16:28:20+00:00,2025-01-15 16:24:57+00:00,https://github.com/odoo/odoo/pull/193588,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590152765, 'issue_id': 2787401431, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193588.png)](https://mergebot.odoo.com/odoo/odoo/pull/193588)', 'created_at': datetime.datetime(2025, 1, 14, 14, 58, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590152811, 'issue_id': 2787401431, 'author': 'fw-bot', 'body': '@adwid @Whenrow cherrypicking of pull request odoo/odoo#193076 failed.\n\nstdout:\n```\nCONFLICT (modify/delete): addons/repair/models/account_move.py deleted in 2007e69ef7798b2e32daa0ed64ec76f2e5c0d4e1 and modified in 2a86fc98d53ffa7570b17e4bc56fc1149de58ad0.  Version 2a86fc98d53ffa7570b17e4bc56fc1149de58ad0 of addons/repair/models/account_move.py left in tree.\nAuto-merging addons/sale_stock/models/account_move.py\nAuto-merging addons/stock_account/models/account_move.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 58, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591953954, 'issue_id': 2787401431, 'author': 'adwid', 'body': 'The commit is now a simple IMP for the added test\r\ncf https://github.com/odoo/odoo/pull/193076#issuecomment-2580363273\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 8, 42, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592147919, 'issue_id': 2787401431, 'author': 'robodoo', 'body': ""@adwid @Whenrow 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 15, 9, 44, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:58:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193588.png)](https://mergebot.odoo.com/odoo/odoo/pull/193588)

fw-bot (Issue Creator) on (2025-01-14 14:58:48 UTC): @adwid @Whenrow cherrypicking of pull request odoo/odoo#193076 failed.

stdout:
```
CONFLICT (modify/delete): addons/repair/models/account_move.py deleted in 2007e69ef7798b2e32daa0ed64ec76f2e5c0d4e1 and modified in 2a86fc98d53ffa7570b17e4bc56fc1149de58ad0.  Version 2a86fc98d53ffa7570b17e4bc56fc1149de58ad0 of addons/repair/models/account_move.py left in tree.
Auto-merging addons/sale_stock/models/account_move.py
Auto-merging addons/stock_account/models/account_move.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

adwid on (2025-01-15 08:42:18 UTC): The commit is now a simple IMP for the added test
cf https://github.com/odoo/odoo/pull/193076#issuecomment-2580363273
robodoo r+

robodoo on (2025-01-15 09:44:48 UTC): @adwid @Whenrow 'ci/runbot' failed on this reviewed PR.

"
2787400349,pull_request,closed,,[FW][IMP] event: clarify the Timezone field name and tooltips,"### Issue:

The current descriptions and naming of the `Date` fields (`date_begin`, `date_end`) and the `Timezone` field (`date_tz`) can be confusing in the form view of the event model. Specifically:

The timezone used for converting the form dates to the database is determined by the context and not by the `Timezone` field present on the form. However, this `Timezone` field determines the timezone used for displaying the event's date/time on the website. This change tries to clarify the situation.

opw-4323142
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#190867",fw-bot,2025-01-14 14:58:26+00:00,[],2025-02-03 08:53:21+00:00,2025-01-20 08:52:40+00:00,https://github.com/odoo/odoo/pull/193587,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590151889, 'issue_id': 2787400349, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193587.png)](https://mergebot.odoo.com/odoo/odoo/pull/193587)', 'created_at': datetime.datetime(2025, 1, 14, 14, 58, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590151964, 'issue_id': 2787400349, 'author': 'fw-bot', 'body': '@lase-odoo @jeh-odoo cherrypicking of pull request odoo/odoo#190867 failed.\n\nstdout:\n```\nAuto-merging addons/event/i18n/event.pot\nCONFLICT (content): Merge conflict in addons/event/i18n/event.pot\nAuto-merging addons/event/models/event_event.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 58, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468913, 'issue_id': 2787400349, 'author': 'fw-bot', 'body': '@lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600468810, 'issue_id': 2787400349, 'author': 'fw-bot', 'body': '@lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174291, 'issue_id': 2787400349, 'author': 'fw-bot', 'body': '@lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601611148, 'issue_id': 2787400349, 'author': 'lase-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 7, 25, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:58:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193587.png)](https://mergebot.odoo.com/odoo/odoo/pull/193587)

fw-bot (Issue Creator) on (2025-01-14 14:58:30 UTC): @lase-odoo @jeh-odoo cherrypicking of pull request odoo/odoo#190867 failed.

stdout:
```
Auto-merging addons/event/i18n/event.pot
CONFLICT (content): Merge conflict in addons/event/i18n/event.pot
Auto-merging addons/event/models/event_event.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-18 02:01:29 UTC): @lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:17 UTC): @lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:22 UTC): @lase-odoo @jeh-odoo this forward port of odoo/odoo#190867 is awaiting action (not merged or closed).

lase-odoo on (2025-01-20 07:25:03 UTC): robodoo r+

"
2787368214,pull_request,closed,,[FIX] website: fix image link alignment in the image gallery,"Steps to reproduce the issue:

- In Website edit mode, drag and drop an ""Image Gallery"" block onto the page.
- Select ""Full"" as the ""Content Width"" option for the ""Image Gallery"" block.
- Click on the image.
- Add a link to the image.
- Zoom the page to 50% using the browser tool.
- Bug: the image is aligned to the left instead of being centered.
- Remove the link: the image is correctly centered.

opw-4458747",bvr-odoo,2025-01-14 14:47:35+00:00,[],2025-01-29 09:25:17+00:00,2025-01-15 09:16:14+00:00,https://github.com/odoo/odoo/pull/193585,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2590122954, 'issue_id': 2787368214, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193585.png)](https://mergebot.odoo.com/odoo/odoo/pull/193585)', 'created_at': datetime.datetime(2025, 1, 14, 14, 47, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590126756, 'issue_id': 2787368214, 'author': 'bvr-odoo', 'body': ""Hello @Brieuc-brd, 👋🏼\r\n\r\nCan you take a look at this to make sure I didn't break anything? Thanks."", 'created_at': datetime.datetime(2025, 1, 14, 14, 49, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590300303, 'issue_id': 2787368214, 'author': 'qsm-odoo', 'body': '@robodoo delegate=SergeBayet \r\n@SergeBayet', 'created_at': datetime.datetime(2025, 1, 14, 15, 46, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591861614, 'issue_id': 2787368214, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 7, 51, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:47:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193585.png)](https://mergebot.odoo.com/odoo/odoo/pull/193585)

bvr-odoo (Issue Creator) on (2025-01-14 14:49:08 UTC): Hello @Brieuc-brd, 👋🏼

Can you take a look at this to make sure I didn't break anything? Thanks.

qsm-odoo on (2025-01-14 15:46:49 UTC): @robodoo delegate=SergeBayet 
@SergeBayet

SergeBayet on (2025-01-15 07:51:48 UTC): @robodoo r+

"
2787334900,pull_request,closed,,[FW][IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.

Forward-Port-Of: odoo/odoo#193501",fw-bot,2025-01-14 14:37:34+00:00,[],2025-01-29 13:26:26+00:00,2025-01-15 12:30:52+00:00,https://github.com/odoo/odoo/pull/193584,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590096859, 'issue_id': 2787334900, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193584.png)](https://mergebot.odoo.com/odoo/odoo/pull/193584)', 'created_at': datetime.datetime(2025, 1, 14, 14, 37, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590096894, 'issue_id': 2787334900, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 37, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:37:35 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193584.png)](https://mergebot.odoo.com/odoo/odoo/pull/193584)

fw-bot (Issue Creator) on (2025-01-14 14:37:36 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787325504,pull_request,closed,,[IMP] project: move and improve mail related tests,"Purpose is to have mail-gateway and notifications related tests into a specific file, easing future changes and checks.

New tests are taken from 'flow' tests, and improved using mail helpers. This allows more in-depth check on the content of generated emails, notably for acknowledgement emails. A more complete email flow is added, including CC emails, replies, ...

Some tests are also merged, as they were mainly duplicate tests with some changes that are integrated into bigger tests.

Backport of odoo/odoo@50ce674b0f8f389189586d08ed9d676791df2d16 so that tests are also added in a stable version where they won't be modified by new features.

Related to Task-4464566: [mail] Cover project/helpdesk gateway features
Prepares Task-4273479: [mail] Stop autofollow madness !
Prepares Task-4273479: [mail] Email-like recipients
",tde-banana-odoo,2025-01-14 14:34:58+00:00,[],2025-01-28 20:12:04+00:00,2025-01-14 19:39:44+00:00,https://github.com/odoo/odoo/pull/193583,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590090140, 'issue_id': 2787325504, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193583.png)](https://mergebot.odoo.com/odoo/odoo/pull/193583)', 'created_at': datetime.datetime(2025, 1, 14, 14, 35, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590587977, 'issue_id': 2787325504, 'author': 'tde-banana-odoo', 'body': '@robodoo r+ rebase-ff', 'created_at': datetime.datetime(2025, 1, 14, 17, 6, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590588150, 'issue_id': 2787325504, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 1, 14, 17, 6, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:35:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193583.png)](https://mergebot.odoo.com/odoo/odoo/pull/193583)

tde-banana-odoo (Issue Creator) on (2025-01-14 17:06:28 UTC): @robodoo r+ rebase-ff

robodoo on (2025-01-14 17:06:32 UTC): Merge method set to rebase and fast-forward.

"
2787324056,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 14:34:31+00:00,[],2025-01-29 09:25:09+00:00,2025-01-15 09:07:22+00:00,https://github.com/odoo/odoo/pull/193582,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2590088776, 'issue_id': 2787324056, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193582.png)](https://mergebot.odoo.com/odoo/odoo/pull/193582)', 'created_at': datetime.datetime(2025, 1, 14, 14, 34, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590088810, 'issue_id': 2787324056, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 34, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:34:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193582.png)](https://mergebot.odoo.com/odoo/odoo/pull/193582)

fw-bot (Issue Creator) on (2025-01-14 14:34:33 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787296600,pull_request,open,,[IMP] account: Made account journal dashboard extensible,"This commit applies the necessary changes to make the json_activity_data field of account.journal extensible. The field computation needed to be extended in account_reports to make dashboard activities styling more dynamic. More details can be found in the enterprise PR: https://github.com/odoo/enterprise/pull/75871

task-4370133


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",hsal-odoo,2025-01-14 14:27:06+00:00,[],2025-01-15 15:28:47+00:00,,https://github.com/odoo/odoo/pull/193581,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590064752, 'issue_id': 2787296600, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193581.png)](https://mergebot.odoo.com/odoo/odoo/pull/193581)', 'created_at': datetime.datetime(2025, 1, 14, 14, 27, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:27:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193581.png)](https://mergebot.odoo.com/odoo/odoo/pull/193581)

"
2787282836,pull_request,closed,,[FW][PERF] product: Speed-up `product.template._name_search`,"## Description
Following ef90c22efda8a1d56d41eb0739d94733fb574f41, the delegated `_name_search` on `product.product` executed when performing a `name_search` on `product.template` is always unbounded (no limit). For non-selective domains on large databases, this can lead to manipulating extremely large lists of IDs, which are re-injected into other queries, resulting in performance regressions and excessive Postgres memory consumption.

We introduce an upper bound on the delegated `_name_search`. To avoid excessive iterations when there is no limit, the bound is set large enough but not so large that it causes blocking regressions. Each iteration becomes more selective than the previous one, as already found templates are excluded from the search scope.

## Benchmark
On a database with over half-million active products, a non-selective `name_search` that matches 1/3 of the products (For ex: `name='d', args=[('sale_ok', '=', True)]`, which happens during via dropdown of products on a `sale.order`):

|               | Before           | After |
|---------------|------------------|-------|
| Timings (hot) | 15min+ (timeout) | 50ms  |

## Reference
opw-4448182

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193448
Forward-Port-Of: odoo/odoo#193293",fw-bot,2025-01-14 14:23:42+00:00,[],2025-01-28 19:09:21+00:00,2025-01-14 19:03:58+00:00,https://github.com/odoo/odoo/pull/193580,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2590055905, 'issue_id': 2787282836, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193580.png)](https://mergebot.odoo.com/odoo/odoo/pull/193580)', 'created_at': datetime.datetime(2025, 1, 14, 14, 23, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590055992, 'issue_id': 2787282836, 'author': 'fw-bot', 'body': '@pivi-odoo cherrypicking of pull request odoo/odoo#193293 failed.\n\nstdout:\n```\nAuto-merging addons/product/models/product_template.py\nCONFLICT (content): Merge conflict in addons/product/models/product_template.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 23, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590179775, 'issue_id': 2787282836, 'author': 'pivi-odoo', 'body': 'Conflict was due to renaming of `domain` -> `product_domain`.\r\nPatch remains the same in nature.\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 8, 30, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:23:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193580.png)](https://mergebot.odoo.com/odoo/odoo/pull/193580)

fw-bot (Issue Creator) on (2025-01-14 14:23:45 UTC): @pivi-odoo cherrypicking of pull request odoo/odoo#193293 failed.

stdout:
```
Auto-merging addons/product/models/product_template.py
CONFLICT (content): Merge conflict in addons/product/models/product_template.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pivi-odoo on (2025-01-14 15:08:30 UTC): Conflict was due to renaming of `domain` -> `product_domain`.
Patch remains the same in nature.

@robodoo r+

"
2787269456,pull_request,open,,[IMP] l10n_latam_check: Add checks table inside payment report,"Description of the issue/feature this PR addresses:
This PR aims to improve PDF payments receipt report. Following the example of withholdings table, we added a new table with the information of the checks used to pay, such as check number, issuer VAT, payment date and check amount.
Fix xpath expresion for witholding table into receipt PDF to avoid to conflict with the new table.
 
Current behavior before PR:
The PDF report contains only the amount paid and a table showing the withholdings related to the payment.
Desired behavior after PR is merged:
The payment receipt PDF includes additional payment information including the checks table.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",maq-adhoc,2025-01-14 14:19:49+00:00,[],2025-02-07 15:40:08+00:00,,https://github.com/odoo/odoo/pull/193579,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2590046485, 'issue_id': 2787269456, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193579.png)](https://mergebot.odoo.com/odoo/odoo/pull/193579)', 'created_at': datetime.datetime(2025, 1, 14, 14, 19, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2593982057, 'issue_id': 2787269456, 'author': 'vbe-odoo', 'body': 'Hello @maq-adhoc thanks for the PR.\r\n\r\nSome feedback:\r\n1. When no checks are added to the payment, but only WTHs are there, the WTH table is not shown/built on the PDF\r\n2. What if we add the word ""Check"" to the 1st column ""Number""? Then, will it be clearer if the table refers to checks?\r\n\r\nImage from feedback 1\r\n![image](https://github.com/user-attachments/assets/75b4c0b2-adc7-4f99-aed4-f65b1c445bdd)\r\n\r\nImage from feedback 2\r\n![image](https://github.com/user-attachments/assets/3cb75f33-1616-4c8a-91ed-8ffadc66db14)\r\n\r\nInvoice on the runbot DB where I created the payments: https://73404575-master-all.runbot127.odoo.com/odoo/vendor-bills/260?debug=1\r\n\r\nThanks!', 'created_at': datetime.datetime(2025, 1, 15, 21, 33, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613044815, 'issue_id': 2787269456, 'author': 'maq-adhoc', 'body': '@vbe-odoo Fix withholding table.', 'created_at': datetime.datetime(2025, 1, 24, 17, 27, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613429244, 'issue_id': 2787269456, 'author': 'vbe-odoo', 'body': ""@maq-adhoc thanks for the changes!\r\nI've tested and it LGTM, @smetl this is ready for technical review.\r\nThanks"", 'created_at': datetime.datetime(2025, 1, 24, 21, 43, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2643274987, 'issue_id': 2787269456, 'author': 'vbe-odoo', 'body': '@smetl changes requested are done, can you help us with the review/merge?\r\nThanks', 'created_at': datetime.datetime(2025, 2, 7, 15, 40, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:19:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193579.png)](https://mergebot.odoo.com/odoo/odoo/pull/193579)

vbe-odoo on (2025-01-15 21:33:48 UTC): Hello @maq-adhoc thanks for the PR.

Some feedback:
1. When no checks are added to the payment, but only WTHs are there, the WTH table is not shown/built on the PDF
2. What if we add the word ""Check"" to the 1st column ""Number""? Then, will it be clearer if the table refers to checks?

Image from feedback 1
![image](https://github.com/user-attachments/assets/75b4c0b2-adc7-4f99-aed4-f65b1c445bdd)

Image from feedback 2
![image](https://github.com/user-attachments/assets/3cb75f33-1616-4c8a-91ed-8ffadc66db14)

Invoice on the runbot DB where I created the payments: https://73404575-master-all.runbot127.odoo.com/odoo/vendor-bills/260?debug=1

Thanks!

maq-adhoc (Issue Creator) on (2025-01-24 17:27:57 UTC): @vbe-odoo Fix withholding table.

vbe-odoo on (2025-01-24 21:43:48 UTC): @maq-adhoc thanks for the changes!
I've tested and it LGTM, @smetl this is ready for technical review.
Thanks

vbe-odoo on (2025-02-07 15:40:06 UTC): @smetl changes requested are done, can you help us with the review/merge?
Thanks

"
2787252012,pull_request,closed,,[IMP] l10n_latam_check: Add checks table inside payment report,"Description of the issue/feature this PR addresses:
This PR aims to improve PDF payments receipt report. Following the example of withholdings table, we added a new table with the information of the checks used to pay, such as check number, issuer VAT, payment date and check amount.
Current behavior before PR:
The PDF report contains only the amount paid and a table showing the withholdings related to the payment.
Desired behavior after PR is merged:
The payment receipt PDF includes additional payment information including the checks table.


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",maq-adhoc,2025-01-14 14:13:55+00:00,[],2025-01-24 17:04:39+00:00,2025-01-24 17:04:39+00:00,https://github.com/odoo/odoo/pull/193578,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2590031170, 'issue_id': 2787252012, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193578.png)](https://mergebot.odoo.com/odoo/odoo/pull/193578)', 'created_at': datetime.datetime(2025, 1, 14, 14, 13, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613000392, 'issue_id': 2787252012, 'author': 'maq-adhoc', 'body': 'move to master https://github.com/odoo/odoo/pull/193579', 'created_at': datetime.datetime(2025, 1, 24, 17, 4, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:13:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193578.png)](https://mergebot.odoo.com/odoo/odoo/pull/193578)

maq-adhoc (Issue Creator) on (2025-01-24 17:04:39 UTC): move to master https://github.com/odoo/odoo/pull/193579

"
2787238302,pull_request,closed,,[IMP] mail: better call context menu,"This commit fixes various issues with the context menu on the call participant:

- Before this commit it wasn't possible to set the volume of a user to 0 due to the use of the `||` operator in the getVolume function. This commit fixes the issue by using the correct `??` operator.
- Before this commit the volume slider in dark mode had the same background as the popover menu, making it difficult to see. This commit fixes the issue by making the slider darker than the background.
- A volume icon was added to better indicate the slider purpose.
- A volume percentage tooltip was added for more accurate use.
- A chevron button was added to the participant card for  better discoverability of the context menu.
",Atovange,2025-01-14 14:10:02+00:00,[],2025-01-17 14:13:09+00:00,2025-01-17 13:37:09+00:00,https://github.com/odoo/odoo/pull/193577,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590021054, 'issue_id': 2787238302, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193577.png)](https://mergebot.odoo.com/odoo/odoo/pull/193577)', 'created_at': datetime.datetime(2025, 1, 14, 14, 10, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590024233, 'issue_id': 2787238302, 'author': 'Atovange', 'body': 'Previous conversation (targeting 17.0): https://github.com/odoo/odoo/pull/193374', 'created_at': datetime.datetime(2025, 1, 14, 14, 11, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596093397, 'issue_id': 2787238302, 'author': 'alexkuhn', 'body': 'I moved the context menu to the chevron as anchor, and also made the following small changes:\r\n- bg color of context menu is much better in dark theme (and slightly grey in white theme, barely different)\r\n- less harsh border colors especially in dark theme\r\n- no arrow on the context menu popover (with chevron this was too many arrows-like shapes)\r\n- chevron icon is slightly smaller\r\n- chevron icon stays when the context menu is open\r\n\r\n<img width=""336"" alt=""Screenshot 2025-01-16 at 16 54 57"" src=""https://github.com/user-attachments/assets/82eed4c3-b806-4538-ac50-7e898e386a91"" />', 'created_at': datetime.datetime(2025, 1, 16, 15, 54, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598042810, 'issue_id': 2787238302, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 10, 53, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:10:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193577.png)](https://mergebot.odoo.com/odoo/odoo/pull/193577)

Atovange (Issue Creator) on (2025-01-14 14:11:24 UTC): Previous conversation (targeting 17.0): https://github.com/odoo/odoo/pull/193374

alexkuhn on (2025-01-16 15:54:21 UTC): I moved the context menu to the chevron as anchor, and also made the following small changes:
- bg color of context menu is much better in dark theme (and slightly grey in white theme, barely different)
- less harsh border colors especially in dark theme
- no arrow on the context menu popover (with chevron this was too many arrows-like shapes)
- chevron icon is slightly smaller
- chevron icon stays when the context menu is open

<img width=""336"" alt=""Screenshot 2025-01-16 at 16 54 57"" src=""https://github.com/user-attachments/assets/82eed4c3-b806-4538-ac50-7e898e386a91"" />

alexkuhn on (2025-01-17 10:53:36 UTC): @robodoo r+

"
2787227482,pull_request,closed,,[FIX] {test_}base_automation: compute trigger_field_ids from default_filter_domain,"Before this commit, 'trigger_field_ids' were already computed from the
filter_domain, but using a default_filter_domain didn't work due to the
'_onchange_trigger' method emptying 'trigger_field_ids' in the case of
on_create_or_write.

After this commit, we made '_onchange_trigger' take into account
the filter_domain for this case.

This addition fixes a window action from Documents to Automation Rules.

see odoo/odoo#193206
see odoo/enterprise#75719
task-4481308
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lm4649,2025-01-14 14:06:08+00:00,[],2025-02-03 20:55:57+00:00,2025-01-20 20:07:21+00:00,https://github.com/odoo/odoo/pull/193576,"[('RD', 'research & development, internal work')]","[{'comment_id': 2590011068, 'issue_id': 2787227482, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193576.png)](https://mergebot.odoo.com/odoo/odoo/pull/193576)', 'created_at': datetime.datetime(2025, 1, 14, 14, 6, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598377905, 'issue_id': 2787227482, 'author': 'brboi', 'body': 'For future readers of this PR:\r\n\r\nI initially shared a diff that I thought was right but it was a mistake to take into account the `on_change` trigger type as it never uses the filter_domain value.\r\nhttps://github.com/odoo/odoo/pull/193576#discussion_r1919812100\r\n\r\nHence the review I submitted right above ☝️\r\n\r\nI was misled by the fact the `filter_domain` field is visible in the form view for `on_change` trigger type.\r\n\r\nWe will fix this in stable and see what to do in future releases. Follow-up task id: opw-4492554', 'created_at': datetime.datetime(2025, 1, 17, 13, 32, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601798679, 'issue_id': 2787227482, 'author': 'kebeclibre', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 8, 56, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:06:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193576.png)](https://mergebot.odoo.com/odoo/odoo/pull/193576)

brboi on (2025-01-17 13:32:42 UTC): For future readers of this PR:

I initially shared a diff that I thought was right but it was a mistake to take into account the `on_change` trigger type as it never uses the filter_domain value.
https://github.com/odoo/odoo/pull/193576#discussion_r1919812100

Hence the review I submitted right above ☝️

I was misled by the fact the `filter_domain` field is visible in the form view for `on_change` trigger type.

We will fix this in stable and see what to do in future releases. Follow-up task id: opw-4492554

kebeclibre on (2025-01-20 08:56:44 UTC): robodoo r+

"
2787210032,pull_request,open,,[PERF] Performence issue on 20M+ account.move.line,"Issue on toggling reconcile to false on account.account

Context:

The query generated by searching for partial reconciliations when disabling reconciliation on an accounting account never completes its execution. As a result, it is not possible to disable reconciliation for certain accounts.

Description:

The various examples below were executed on a PostgreSQL 16.6 server with the following specific configuration:


# DB Version: 16
     # OS Type: linux
     # DB Type: oltp
     # Total Memory (RAM): 8 GB
     # CPUs num: 4
     # Connections num: 200
     # Data Storage: ssd
     max_connections: ""200""
     shared_buffers: ""2GB""
     effective_cache_size: ""6GB""
     maintenance_work_mem: ""512MB""
     checkpoint_completion_target: ""0.9""
     wal_buffers: ""16MB""
     default_statistics_target: ""100""
     random_page_cost: ""1.1""
     effective_io_concurrency: ""200""
     work_mem: ""50MB""
     huge_pages: ""off""
     min_wal_size: ""2GB""
     max_wal_size: ""8GB""
     max_worker_processes: ""4""
     max_parallel_workers_per_gather: ""2""
     max_parallel_workers: ""4""
     max_parallel_maintenance_workers: ""2""


The query executions were stopped after 15 minutes without results. Therefore, an explain analyze is not an option.

Query : 

EXPLAIN
SELECT COUNT(*)
FROM   ""account_move_line""
WHERE  ( ( ( ""account_move_line"".""account_id"" IN ( 33480 ) )
          AND ""account_move_line"".""full_reconcile_id"" IS NULL )
        AND ( ( ""account_move_line"".""id"" IN (SELECT ""credit_move_id""
                                             FROM   ""account_partial_reconcile""
                                             WHERE
                ""credit_move_id"" IS NOT NULL) )
               OR ( ""account_move_line"".""id"" IN (SELECT ""debit_move_id""
                                                 FROM
                    ""account_partial_reconcile""
                                                 WHERE
                    ""debit_move_id"" IS NOT NULL) )
            ) )
      AND ( ""account_move_line"".""company_id"" IS NULL
             OR ( ""account_move_line"".""company_id"" IN ( 12 ) ) )


Step 1: Execution AS IS

Aggregate  (cost=9218451.42..9218451.43 rows=1 width=8)
  ->  Bitmap Heap Scan on account_move_line  (cost=10.03..9218451.36 rows=21 width=0)
        Recheck Cond: (((account_id = 33480) AND (company_id IS NULL) AND (full_reconcile_id IS NULL)) OR ((account_id = 33480) AND (company_id = 12) AND (full_reconcile_id IS NULL)))
        Filter: ((SubPlan 1) OR (SubPlan 2))
        ->  BitmapOr  (cost=9.16..9.16 rows=27 width=0)
              ->  Bitmap Index Scan on account_move_line_account_id_company_id_not_fully_reconciled  (cost=0.00..4.44 rows=1 width=0)
                    Index Cond: ((account_id = 33480) AND (company_id IS NULL))
              ->  Bitmap Index Scan on account_move_line_account_id_company_id_not_fully_reconciled  (cost=0.00..4.70 rows=27 width=0)
                    Index Cond: ((account_id = 33480) AND (company_id = 12))
        SubPlan 1
          ->  Materialize  (cost=0.43..320731.66 rows=9644892 width=4)
                ->  Index Only Scan using account_partial_reconcile_credit_move_id_not_null on account_partial_reconcile  (cost=0.43..234831.20 rows=9644892 width=4)
        SubPlan 2
          ->  Materialize  (cost=0.43..313884.25 rows=9644892 width=4)
                ->  Index Only Scan using account_partial_reconcile_debit_move_id_not_null on account_partial_reconcile account_partial_reconcile_1  (cost=0.43..227983.79 rows=9644892 width=4)
JIT:
  Functions: 11
  Options: Inlining true, Optimization true, Expressions true, Deforming true

Step 2) Removal of non-standard PostgreSQL indexes

Aggregate  (cost=26678529.81..26678529.82 rows=1 width=8)
  ->  Bitmap Heap Scan on account_move_line  (cost=9.64..26678529.75 rows=21 width=0)
        Recheck Cond: ((company_id IS NULL) OR ((account_id = 33480) AND (company_id = 12)))
        Filter: ((full_reconcile_id IS NULL) AND (account_id = 33480) AND ((SubPlan 1) OR (SubPlan 2)))
        ->  BitmapOr  (cost=9.64..9.64 rows=75 width=0)
              ->  Bitmap Index Scan on account_move_line_company_id_index  (cost=0.00..4.45 rows=1 width=0)
                    Index Cond: (company_id IS NULL)
              ->  Bitmap Index Scan on account_move_line_company_id_account_id_index  (cost=0.00..5.19 rows=75 width=0)
                    Index Cond: ((account_id = 33480) AND (company_id = 12))
        SubPlan 1
          ->  Materialize  (cost=0.00..331597.38 rows=9644892 width=4)
                ->  Seq Scan on account_partial_reconcile  (cost=0.00..245696.92 rows=9644892 width=4)
                      Filter: (credit_move_id IS NOT NULL)
        SubPlan 2
          ->  Materialize  (cost=0.00..331597.38 rows=9644892 width=4)
                ->  Seq Scan on account_partial_reconcile account_partial_reconcile_1  (cost=0.00..245696.92 rows=9644892 width=4)
                      Filter: (debit_move_id IS NOT NULL)
JIT:
  Functions: 19
  Options: Inlining true, Optimization true, Expressions true, Deforming true

Step 3 : in 2 queries after code update : 

Aggregate  (cost=325.10..325.11 rows=1 width=8) (actual time=2.969..2.971 rows=1 loops=1)
  ->  Nested Loop Semi Join  (cost=10.08..325.09 rows=1 width=0) (actual time=2.967..2.968 rows=0 loops=1)
        ->  Bitmap Heap Scan on account_move_line  (cost=9.65..308.63 rows=27 width=4) (actual time=0.148..1.409 rows=1865 loops=1)
              Recheck Cond: ((company_id IS NULL) OR ((account_id = 33480) AND (company_id = 12)))
              Filter: ((full_reconcile_id IS NULL) AND (account_id = 33480))
              Rows Removed by Filter: 133
              Heap Blocks: exact=656
              ->  BitmapOr  (cost=9.65..9.65 rows=75 width=0) (actual time=0.093..0.093 rows=0 loops=1)
                    ->  Bitmap Index Scan on account_move_line_company_id_index  (cost=0.00..4.45 rows=1 width=0) (actual time=0.005..0.006 rows=0 loops=1)
                          Index Cond: (company_id IS NULL)
                    ->  Bitmap Index Scan on account_move_line_company_id_account_id_index  (cost=0.00..5.19 rows=75 width=0) (actual time=0.087..0.087 rows=1998 loops=1)
                          Index Cond: ((account_id = 33480) AND (company_id = 12))
        ->  Index Only Scan using account_partial_reconcile_credit_move_id_index on account_partial_reconcile  (cost=0.43..5.16 rows=29 width=4) (actual time=0.001..0.001 rows=0 loops=1865)
              Index Cond: ((credit_move_id = account_move_line.id) AND (credit_move_id IS NOT NULL))
              Heap Fetches: 0
Planning Time: 2.150 ms
Execution Time: 3.035 ms

Aggregate  (cost=322.66..322.67 rows=1 width=8) (actual time=3.580..3.582 rows=1 loops=1)
  ->  Nested Loop Semi Join  (cost=10.08..322.65 rows=1 width=0) (actual time=3.577..3.578 rows=0 loops=1)
        ->  Bitmap Heap Scan on account_move_line  (cost=9.65..308.63 rows=27 width=4) (actual time=0.154..1.389 rows=1865 loops=1)
              Recheck Cond: ((company_id IS NULL) OR ((account_id = 33480) AND (company_id = 12)))
              Filter: ((full_reconcile_id IS NULL) AND (account_id = 33480))
              Rows Removed by Filter: 133
              Heap Blocks: exact=656
              ->  BitmapOr  (cost=9.65..9.65 rows=75 width=0) (actual time=0.098..0.099 rows=0 loops=1)
                    ->  Bitmap Index Scan on account_move_line_company_id_index  (cost=0.00..4.45 rows=1 width=0) (actual time=0.008..0.008 rows=0 loops=1)
                          Index Cond: (company_id IS NULL)
                    ->  Bitmap Index Scan on account_move_line_company_id_account_id_index  (cost=0.00..5.19 rows=75 width=0) (actual time=0.090..0.090 rows=1998 loops=1)
                          Index Cond: ((account_id = 33480) AND (company_id = 12))
        ->  Index Only Scan using account_partial_reconcile_debit_move_id_desc_not_null on account_partial_reconcile  (cost=0.43..5.77 rows=68 width=4) (actual time=0.001..0.001 rows=0 loops=1865)
              Index Cond: (debit_move_id = account_move_line.id)
              Heap Fetches: 0
Planning Time: 2.351 ms
Execution Time: 3.682 ms

Reference:
opw-4487119

Current Behavior:

It is therefore not possible to perform this simple operation on an accounting account.

Desired Behavior:

Complete this operation in less than one second.


",adrienpeiffer,2025-01-14 14:00:13+00:00,[],2025-02-07 12:01:04+00:00,,https://github.com/odoo/odoo/pull/193575,"[('Accounting', '')]","[{'comment_id': 2589996350, 'issue_id': 2787210032, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193575.png)](https://mergebot.odoo.com/odoo/odoo/pull/193575)', 'created_at': datetime.datetime(2025, 1, 14, 14, 0, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592758121, 'issue_id': 2787210032, 'author': 'MiquelRForgeFlow', 'body': 'Commit title should be adjusted, see [guidelines](https://www.odoo.com/documentation/16.0/contributing/development/git_guidelines.html#tag-and-module-name).', 'created_at': datetime.datetime(2025, 1, 15, 12, 47, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603810314, 'issue_id': 2787210032, 'author': 'adrienpeiffer', 'body': ""@pivi-odoo Thanks for reply. I'll put more info/details on this issue by EOW."", 'created_at': datetime.datetime(2025, 1, 21, 7, 2, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612075719, 'issue_id': 2787210032, 'author': 'adrienpeiffer', 'body': '@pivi-odoo Description was update', 'created_at': datetime.datetime(2025, 1, 24, 9, 37, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612078151, 'issue_id': 2787210032, 'author': 'adrienpeiffer', 'body': '@antonylesuisse As you mentioned during the last keynote that you are available for performance issues, if you have another idea, I’m all ears.', 'created_at': datetime.datetime(2025, 1, 24, 9, 38, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612109268, 'issue_id': 2787210032, 'author': 'pivi-odoo', 'body': 'Ticket reference: 4487119 (also added it on PR description)\r\n\r\n@adrienpeiffer I will contact you on the ticket, so we can reproduce and validate the patch on our side :)', 'created_at': datetime.datetime(2025, 1, 24, 9, 53, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612121172, 'issue_id': 2787210032, 'author': 'adrienpeiffer', 'body': ""Thanks for that. I'll rename the commit on the same Time.\r\n\r\nLe ven. 24 janv. 2025, 10:54, Victor Piryns ***@***.***> a\r\nécrit :\r\n\r\n> Ticket reference: 4487119 (also added it on PR description)\r\n>\r\n> @adrienpeiffer <https://github.com/adrienpeiffer> I will contact you on\r\n> the ticket, so we can reproduce and validate the patch on our side :)\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/odoo/odoo/pull/193575#issuecomment-2612109268>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AB5J3UKOYSCA5BFR7Y3EFGT2MIEUFAVCNFSM6AAAAABVE6WI5CVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDMMJSGEYDSMRWHA>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>"", 'created_at': datetime.datetime(2025, 1, 24, 9, 59, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 14:00:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193575.png)](https://mergebot.odoo.com/odoo/odoo/pull/193575)

MiquelRForgeFlow on (2025-01-15 12:47:18 UTC): Commit title should be adjusted, see [guidelines](https://www.odoo.com/documentation/16.0/contributing/development/git_guidelines.html#tag-and-module-name).

adrienpeiffer (Issue Creator) on (2025-01-21 07:02:21 UTC): @pivi-odoo Thanks for reply. I'll put more info/details on this issue by EOW.

adrienpeiffer (Issue Creator) on (2025-01-24 09:37:08 UTC): @pivi-odoo Description was update

adrienpeiffer (Issue Creator) on (2025-01-24 09:38:28 UTC): @antonylesuisse As you mentioned during the last keynote that you are available for performance issues, if you have another idea, I’m all ears.

pivi-odoo on (2025-01-24 09:53:47 UTC): Ticket reference: 4487119 (also added it on PR description)

@adrienpeiffer I will contact you on the ticket, so we can reproduce and validate the patch on our side :)

adrienpeiffer (Issue Creator) on (2025-01-24 09:59:47 UTC): Thanks for that. I'll rename the commit on the same Time.

Le ven. 24 janv. 2025, 10:54, Victor Piryns ***@***.***> a
écrit :

"
2787186054,pull_request,closed,,[FIX] core: fix typofix translation,"The get_text_content is not powerful enough to extract translated attributes. As a result, get_text_content will return empty string '' for terms whose translated contents are only in attributes. When the result is used to build the mapping text2terms, users will get strange result after write.

opw-4147913

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",HydrionBurst,2025-01-14 13:50:14+00:00,[],2025-01-28 19:00:14+00:00,2025-01-14 18:53:30+00:00,https://github.com/odoo/odoo/pull/193574,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589972860, 'issue_id': 2787186054, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193574.png)](https://mergebot.odoo.com/odoo/odoo/pull/193574)', 'created_at': datetime.datetime(2025, 1, 14, 13, 50, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:50:16 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193574.png)](https://mergebot.odoo.com/odoo/odoo/pull/193574)

"
2787185041,pull_request,closed,,[FW][CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193539",fw-bot,2025-01-14 13:49:46+00:00,[],2025-01-29 09:47:09+00:00,2025-01-15 09:41:08+00:00,https://github.com/odoo/odoo/pull/193573,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589971227, 'issue_id': 2787185041, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193573.png)](https://mergebot.odoo.com/odoo/odoo/pull/193573)', 'created_at': datetime.datetime(2025, 1, 14, 13, 49, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589971282, 'issue_id': 2787185041, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 49, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:49:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193573.png)](https://mergebot.odoo.com/odoo/odoo/pull/193573)

fw-bot (Issue Creator) on (2025-01-14 13:49:48 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787183501,pull_request,closed,,[FW][FIX] hr: added domain to show activity plans by selected company or globally,"Steps:
- Go to the 'Activity Plans' section.
- Select a company in the company widget.
- Activity plans were not filtered based on the selected company.

Issues:
- Activity plans were not filtered correctly by the selected company, showing plans from unrelated companies.

Fix:
- Added domain to display activity plans assigned to the selected company.
- Added domain to display global activity plans when no company is selected.

Task - 4441838

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:

Forward-Port-Of: odoo/odoo#192171",fw-bot,2025-01-14 13:49:11+00:00,[],2025-01-29 16:28:19+00:00,2025-01-15 15:56:25+00:00,https://github.com/odoo/odoo/pull/193572,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589966714, 'issue_id': 2787183501, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193572.png)](https://mergebot.odoo.com/odoo/odoo/pull/193572)', 'created_at': datetime.datetime(2025, 1, 14, 13, 49, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589966784, 'issue_id': 2787183501, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 49, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:49:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193572.png)](https://mergebot.odoo.com/odoo/odoo/pull/193572)

fw-bot (Issue Creator) on (2025-01-14 13:49:12 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787182898,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193464
Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-14 13:48:53+00:00,[],2025-01-29 13:26:36+00:00,2025-01-15 13:08:33+00:00,https://github.com/odoo/odoo/pull/193571,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589964508, 'issue_id': 2787182898, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193571.png)](https://mergebot.odoo.com/odoo/odoo/pull/193571)', 'created_at': datetime.datetime(2025, 1, 14, 13, 48, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589964706, 'issue_id': 2787182898, 'author': 'fw-bot', 'body': '@maxthewhale @caburj cherrypicking of pull request odoo/odoo#193358 failed.\n\nstdout:\n```\nAuto-merging addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js\nCONFLICT (content): Merge conflict in addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 48, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591911344, 'issue_id': 2787182898, 'author': 'MaxTheWhale', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 8, 20, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:48:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193571.png)](https://mergebot.odoo.com/odoo/odoo/pull/193571)

fw-bot (Issue Creator) on (2025-01-14 13:48:59 UTC): @maxthewhale @caburj cherrypicking of pull request odoo/odoo#193358 failed.

stdout:
```
Auto-merging addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js
CONFLICT (content): Merge conflict in addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

MaxTheWhale on (2025-01-15 08:20:36 UTC): @robodoo r+

"
2787178773,pull_request,open,,[PERF] stock: writing the same value shouldn't be considered an update,"Writing on a stock.move.line can be costly operation as several things are performed during in the write method.

This commits filters the updates that are not ""real"", meaning they are re-writing the same value.

opw-4027721

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",nda-odoo,2025-01-14 13:47:42+00:00,[],2025-01-14 15:37:54+00:00,,https://github.com/odoo/odoo/pull/193570,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589956905, 'issue_id': 2787178773, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193570.png)](https://mergebot.odoo.com/odoo/odoo/pull/193570)', 'created_at': datetime.datetime(2025, 1, 14, 13, 47, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590275856, 'issue_id': 2787178773, 'author': 'nda-odoo', 'body': '@amoyaux the PR we discussed', 'created_at': datetime.datetime(2025, 1, 14, 15, 37, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:47:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193570.png)](https://mergebot.odoo.com/odoo/odoo/pull/193570)

nda-odoo (Issue Creator) on (2025-01-14 15:37:52 UTC): @amoyaux the PR we discussed

"
2787172490,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 13:45:34+00:00,[],2025-01-29 17:35:52+00:00,2025-01-15 17:12:56+00:00,https://github.com/odoo/odoo/pull/193569,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589950671, 'issue_id': 2787172490, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193569.png)](https://mergebot.odoo.com/odoo/odoo/pull/193569)', 'created_at': datetime.datetime(2025, 1, 14, 13, 45, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589950711, 'issue_id': 2787172490, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 45, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:45:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193569.png)](https://mergebot.odoo.com/odoo/odoo/pull/193569)

fw-bot (Issue Creator) on (2025-01-14 13:45:37 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787146263,pull_request,closed,,[FIX] hr_holidays: fix ambiguous column,"Use fully qualified names as columns in related table can have a same name and this query could raise an error.

Like the one below error below was shown in 18.0
```
psycopg2.errors.AmbiguousColumn: column reference ""state"" is ambiguous
LINE 3:                             AND state = 'validate'
```
Note: error occured in 18.0 will be fixed in forward port, using fully qualified names was the purpose so made sense to start from 16.0 and fix for all versions after
Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",asno-odoo,2025-01-14 13:35:17+00:00,[],2025-01-28 17:59:26+00:00,2025-01-14 17:56:15+00:00,https://github.com/odoo/odoo/pull/193568,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589927424, 'issue_id': 2787146263, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193568.png)](https://mergebot.odoo.com/odoo/odoo/pull/193568)', 'created_at': datetime.datetime(2025, 1, 14, 13, 35, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589935797, 'issue_id': 2787146263, 'author': 'jugj-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 39, 16, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:35:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193568.png)](https://mergebot.odoo.com/odoo/odoo/pull/193568)

jugj-odoo on (2025-01-14 13:39:16 UTC): @robodoo r+

"
2787144200,pull_request,closed,,[FIX] web: don't apply domain to subfields in export dialog,"**Steps to reproduce**
1. Have Stock and Sales installed.
2. Go to the Sales list view of products, have more than 1 page of products.
3. Select all the products on the current page by checking the checkbox
on the first line. After that, click on ""Select all"" to select all
products.
4. Actions > Export
5. Select ""Products"" (`product_variant_ids`) and then ""Products/Stock Quant""
(`stock_quant_ids`).
`ValueError: Invalid field stock.quant.sale_ok in leaf ('sale_ok', '=', True)`

**Change**
Only use the domain of the list view to filter fields when the export dialog
is opened. The domain should only be used for that and not when `getExportFields`
is called when clicking on one of the children fields of the root model.

opw-4408457",taqu-odoo,2025-01-14 13:34:17+00:00,[],2025-02-03 14:44:31+00:00,2025-02-03 14:44:31+00:00,https://github.com/odoo/odoo/pull/193567,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589925316, 'issue_id': 2787144200, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193567.png)](https://mergebot.odoo.com/odoo/odoo/pull/193567)', 'created_at': datetime.datetime(2025, 1, 14, 13, 34, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:34:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193567.png)](https://mergebot.odoo.com/odoo/odoo/pull/193567)

"
2787110733,pull_request,closed,,[FW][FIX] point_of_sale: no caba move during reconciliation,"The reconciliation of move lines creates a cash basis (caba) move under some conditions. This can i.e. happen for the PoS move during the closing of a session.

But the PoS move does not use the transition account of any used caba taxes but the ""real"" account directly (see commit a011dcc0bdbe892b0a505a6a4169c5168bd018f6). So there is no need for a caba move.
Further an exchange difference move for the tax amount may be created. The issue is that the tax amounts from the cash basis are not being matched correctly with the tax amounts from the PoS move (since we only look for the transition account on the PoS move).

Reproduce on runbot for l10n_mx
1. Install l10n_mx
2. Set the 'IVA 16% VENTAS' tax as Customer Taxes on a product. Set the Sales Price to 100.
3. Create a payment method and journal for the PoS 
    * Payment method: Cash on journal CSH1
    * Journal: POS
5. Create a PoS using the payment method and journal from the previous step.
6. Start a PoS session
7. Sell the product from step 2 via the Cash payment method.
8. Close the Session
9. The following journal entries will be created: (All the tax lines use the same tax account; the ""final"" and not the caba transition account) 
```
* 1 entry in the POS journal (order)
       base:       | - 100.0 $
       tax:        | -  16.0 $
       receivable: | + 116.0 $
     * 1 entry in the CSH1 journal (cash / payment)
       cash:       | + 116.0 $
       receivable: | - 116.0 $
     * 1 entry in the CBMX journal (caba)
       base:       | - 100.0 $
       base:       | + 100.0 $
       tax:        | -  16.0 $
       tax:        | +  16.0 $
     * 1 entry in the EXCH journal (exchange difference)
       for the cash basis rounding difference
       tax:        | -  16.0 $
       tax:        | +  16.0 $
```

This commit fixes the issue by just skipping the creation of caba moves during the reconciliation of the PoS move lines. Further we make sure no exchange difference entry is created for the (not even created) cash basis entries.

opw-4355124

Forward-Port-Of: odoo/odoo#193492
Forward-Port-Of: odoo/odoo#193195",fw-bot,2025-01-14 13:19:23+00:00,[],2025-01-29 01:01:56+00:00,2025-01-15 00:43:35+00:00,https://github.com/odoo/odoo/pull/193566,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589892737, 'issue_id': 2787110733, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193566.png)](https://mergebot.odoo.com/odoo/odoo/pull/193566)', 'created_at': datetime.datetime(2025, 1, 14, 13, 19, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589892763, 'issue_id': 2787110733, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193555\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 19, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591127870, 'issue_id': 2787110733, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 21, 22, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:19:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193566.png)](https://mergebot.odoo.com/odoo/odoo/pull/193566)

fw-bot (Issue Creator) on (2025-01-14 13:19:24 UTC): @svfu-odoo @RicGR98 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193555

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

svfu-odoo on (2025-01-14 21:22:59 UTC): @robodoo r+

"
2787096246,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-14 13:12:12+00:00,[],2025-01-28 17:05:30+00:00,2025-01-14 16:55:37+00:00,https://github.com/odoo/odoo/pull/193565,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589877993, 'issue_id': 2787096246, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193565.png)](https://mergebot.odoo.com/odoo/odoo/pull/193565)', 'created_at': datetime.datetime(2025, 1, 14, 13, 12, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589878009, 'issue_id': 2787096246, 'author': 'fw-bot', 'body': '@ryce-odoo @Demesmaeker this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193543\n* odoo/odoo#193532\n* odoo/odoo#193515\n* odoo/odoo#193496\n* odoo/odoo#193486\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 12, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589881054, 'issue_id': 2787096246, 'author': 'Demesmaeker', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 13, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:12:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193565.png)](https://mergebot.odoo.com/odoo/odoo/pull/193565)

fw-bot (Issue Creator) on (2025-01-14 13:12:16 UTC): @ryce-odoo @Demesmaeker this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193543
* odoo/odoo#193532
* odoo/odoo#193515
* odoo/odoo#193496
* odoo/odoo#193486

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

Demesmaeker on (2025-01-14 13:13:42 UTC): @robodoo r+

"
2787088584,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 13:08:15+00:00,[],2025-01-29 09:25:18+00:00,2025-01-15 09:20:04+00:00,https://github.com/odoo/odoo/pull/193564,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589869925, 'issue_id': 2787088584, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193564.png)](https://mergebot.odoo.com/odoo/odoo/pull/193564)', 'created_at': datetime.datetime(2025, 1, 14, 13, 8, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589869947, 'issue_id': 2787088584, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 13, 8, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:08:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193564.png)](https://mergebot.odoo.com/odoo/odoo/pull/193564)

fw-bot (Issue Creator) on (2025-01-14 13:08:17 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2787079505,pull_request,open,,[WIP] l10n_ar: iibb,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pablohmontenegro,2025-01-14 13:03:37+00:00,[],2025-01-27 16:09:58+00:00,,https://github.com/odoo/odoo/pull/193563,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2589860117, 'issue_id': 2787079505, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193563.png)](https://mergebot.odoo.com/odoo/odoo/pull/193563)', 'created_at': datetime.datetime(2025, 1, 14, 13, 3, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 13:03:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193563.png)](https://mergebot.odoo.com/odoo/odoo/pull/193563)

"
2787071250,pull_request,closed,,[FW][PERF] product: Speed-up `product.template._name_search`,"## Description
Following ef90c22efda8a1d56d41eb0739d94733fb574f41, the delegated `_name_search` on `product.product` executed when performing a `name_search` on `product.template` is always unbounded (no limit). For non-selective domains on large databases, this can lead to manipulating extremely large lists of IDs, which are re-injected into other queries, resulting in performance regressions and excessive Postgres memory consumption.

We introduce an upper bound on the delegated `_name_search`. To avoid excessive iterations when there is no limit, the bound is set large enough but not so large that it causes blocking regressions. Each iteration becomes more selective than the previous one, as already found templates are excluded from the search scope.

## Benchmark
On a database with over half-million active products, a non-selective `name_search` that matches 1/3 of the products (For ex: `name='d', args=[('sale_ok', '=', True)]`, which happens during via dropdown of products on a `sale.order`):

|               | Before           | After |
|---------------|------------------|-------|
| Timings (hot) | 15min+ (timeout) | 50ms  |

## Reference
opw-4448182

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193448
Forward-Port-Of: odoo/odoo#193293",fw-bot,2025-01-14 12:59:26+00:00,[],2025-01-28 17:05:29+00:00,2025-01-14 16:41:46+00:00,https://github.com/odoo/odoo/pull/193562,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589851393, 'issue_id': 2787071250, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193562.png)](https://mergebot.odoo.com/odoo/odoo/pull/193562)', 'created_at': datetime.datetime(2025, 1, 14, 12, 59, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589851419, 'issue_id': 2787071250, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 59, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589919322, 'issue_id': 2787071250, 'author': 'fw-bot', 'body': '@pivi-odoo ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 13, 31, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590055924, 'issue_id': 2787071250, 'author': 'fw-bot', 'body': '@pivi-odoo the next pull request (odoo/odoo#193580) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 14, 23, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590169153, 'issue_id': 2787071250, 'author': 'pivi-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 4, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:59:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193562.png)](https://mergebot.odoo.com/odoo/odoo/pull/193562)

fw-bot (Issue Creator) on (2025-01-14 12:59:28 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 13:31:55 UTC): @pivi-odoo ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-14 14:23:44 UTC): @pivi-odoo the next pull request (odoo/odoo#193580) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pivi-odoo on (2025-01-14 15:04:45 UTC): @robodoo r+

"
2787049265,pull_request,closed,,[REF] web_tour: decrease default checkDelay to 100ms,"Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pipu-odoo,2025-01-14 12:47:46+00:00,[],2025-01-28 14:28:59+00:00,2025-01-28 14:28:59+00:00,https://github.com/odoo/odoo/pull/193561,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589827638, 'issue_id': 2787049265, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193561.png)](https://mergebot.odoo.com/odoo/odoo/pull/193561)', 'created_at': datetime.datetime(2025, 1, 14, 12, 47, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:47:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193561.png)](https://mergebot.odoo.com/odoo/odoo/pull/193561)

"
2787047051,pull_request,closed,,[FW][IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.

Forward-Port-Of: odoo/odoo#193501",fw-bot,2025-01-14 12:46:39+00:00,[],2025-01-29 13:26:31+00:00,2025-01-15 13:08:05+00:00,https://github.com/odoo/odoo/pull/193560,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589825305, 'issue_id': 2787047051, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193560.png)](https://mergebot.odoo.com/odoo/odoo/pull/193560)', 'created_at': datetime.datetime(2025, 1, 14, 12, 46, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589825324, 'issue_id': 2787047051, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 46, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589887003, 'issue_id': 2787047051, 'author': 'fw-bot', 'body': '@alialfie @beledouxdenis ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 13, 16, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:46:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193560.png)](https://mergebot.odoo.com/odoo/odoo/pull/193560)

fw-bot (Issue Creator) on (2025-01-14 12:46:40 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 13:16:39 UTC): @alialfie @beledouxdenis ci/upgrade_enterprise failed on this forward-port PR

"
2787011174,pull_request,closed,,[REF] core: move building model methods to a separate file,"Move all the complex methods that build a model's class for the registry and set it up to a separate file odoo/orm/model_classes.py.  The purpose is to localize all that complexity in a single place, and to lighten up class `BaseModel`.  Some model class attributes have also been renamed, to avoid potential conflicts with regular business code.

task-3596931",thle-odoo,2025-01-14 12:28:02+00:00,[],2025-02-07 14:51:58+00:00,2025-02-06 18:08:03+00:00,https://github.com/odoo/odoo/pull/193559,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2589786265, 'issue_id': 2787011174, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193559.png)](https://mergebot.odoo.com/odoo/odoo/pull/193559)', 'created_at': datetime.datetime(2025, 1, 14, 12, 28, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639726489, 'issue_id': 2787011174, 'author': 'rco-odoo', 'body': '@robodoo rebase-ff', 'created_at': datetime.datetime(2025, 2, 6, 12, 43, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639726580, 'issue_id': 2787011174, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 6, 12, 43, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639907466, 'issue_id': 2787011174, 'author': 'rco-odoo', 'body': ""@robodoo override=ci/security\r\n\r\nAll the flagged code was simply moved, and wasn't problematic from a security point of view."", 'created_at': datetime.datetime(2025, 2, 6, 13, 59, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639907815, 'issue_id': 2787011174, 'author': 'rco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 13, 59, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639909594, 'issue_id': 2787011174, 'author': 'robodoo', 'body': '@thle-odoo @rco-odoo linked pull request(s) odoo/upgrade-util#207 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 2, 6, 14, 0, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640030994, 'issue_id': 2787011174, 'author': 'robodoo', 'body': ""@thle-odoo @rco-odoo 'ci/upgrade_enterprise' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 2, 6, 14, 46, 8, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:28:06 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193559.png)](https://mergebot.odoo.com/odoo/odoo/pull/193559)

rco-odoo on (2025-02-06 12:43:27 UTC): @robodoo rebase-ff

robodoo on (2025-02-06 12:43:29 UTC): Merge method set to rebase and fast-forward.

rco-odoo on (2025-02-06 13:59:14 UTC): @robodoo override=ci/security

All the flagged code was simply moved, and wasn't problematic from a security point of view.

rco-odoo on (2025-02-06 13:59:22 UTC): @robodoo r+

robodoo on (2025-02-06 14:00:03 UTC): @thle-odoo @rco-odoo linked pull request(s) odoo/upgrade-util#207 not ready. Linked PRs are not staged until all of them are ready.

robodoo on (2025-02-06 14:46:08 UTC): @thle-odoo @rco-odoo 'ci/upgrade_enterprise' failed on this reviewed PR.

"
2787007222,pull_request,closed,,[FW][IMP] l10n_it: Split Periodic & Annual Tax Reports,"Description of the issue this commit addresses:

The Italian tax report lacks clarity and can be improved both in readabilty and
usability by splitting the monthly and the annual reports.

---

Desired behavior after this commit is merged:

The Italian tax report is now split in a monthly and an annual report.
The report uses the sections mechanism to be split in the different parts it is
made from and clean the UI by not having everything on the same sreen.

---

Enterprise PR: https://github.com/odoo/enterprise/pull/62405
Task-3479785

---

I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192969
Forward-Port-Of: odoo/odoo#164064",fw-bot,2025-01-14 12:25:54+00:00,[],2025-01-28 19:09:21+00:00,2025-01-14 19:04:03+00:00,https://github.com/odoo/odoo/pull/193558,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589782068, 'issue_id': 2787007222, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193558.png)](https://mergebot.odoo.com/odoo/odoo/pull/193558)', 'created_at': datetime.datetime(2025, 1, 14, 12, 25, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589782108, 'issue_id': 2787007222, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 25, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589846459, 'issue_id': 2787007222, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 12, 57, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589886819, 'issue_id': 2787007222, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 14, 13, 16, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589987439, 'issue_id': 2787007222, 'author': 'fw-bot', 'body': '@muab-odoo @william-andre this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 14, 13, 56, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589988024, 'issue_id': 2787007222, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 56, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:25:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193558.png)](https://mergebot.odoo.com/odoo/odoo/pull/193558)

fw-bot (Issue Creator) on (2025-01-14 12:25:58 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 12:57:03 UTC): @muab-odoo @william-andre ci/upgrade_enterprise failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-14 13:16:34 UTC): @muab-odoo @william-andre ci/runbot failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-14 13:56:23 UTC): @muab-odoo @william-andre this PR was modified / updated and has become a normal PR. It must be merged directly.

william-andre on (2025-01-14 13:56:41 UTC): @robodoo r+

"
2787004788,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 12:24:38+00:00,[],2025-01-29 17:35:58+00:00,2025-01-15 17:25:51+00:00,https://github.com/odoo/odoo/pull/193557,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589779626, 'issue_id': 2787004788, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193557.png)](https://mergebot.odoo.com/odoo/odoo/pull/193557)', 'created_at': datetime.datetime(2025, 1, 14, 12, 24, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589779644, 'issue_id': 2787004788, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 24, 40, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:24:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193557.png)](https://mergebot.odoo.com/odoo/odoo/pull/193557)

fw-bot (Issue Creator) on (2025-01-14 12:24:40 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786965884,pull_request,closed,,[FW][FIX] base: website is not shown in the contact qweb widget,"**Affects**
16.0+

**Steps to reproduce:**

- Render the Contact qweb widget with fields [""phone"", ""website""]

```py
Contact = self.env[""ir.qweb.field.contact""]
partner = self.env[""res.partner""].create(
    {
        ""name"": ""Test Partner"",
        ""phone"": ""1234567890"",
        ""website"": ""https://www.example.com"",
    }
)
result = Contact.value_to_html(partner, {""fields"": [""phone"", ""website""]})
```

**Result:**

- The website is not shown

---

This is a regression introduced in 9e53aea9, in combination with some buggy behavior in the qweb compilation.

Somehow the `t-elif` condition is applying on the next element instead on itself, hiding the website item. I did not investigate this further.


ping @lvsz @ryv-odoo

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193461
Forward-Port-Of: odoo/odoo#191201",fw-bot,2025-01-14 12:04:31+00:00,[],2025-01-29 16:55:50+00:00,2025-01-15 16:51:16+00:00,https://github.com/odoo/odoo/pull/193556,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589738564, 'issue_id': 2786965884, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193556.png)](https://mergebot.odoo.com/odoo/odoo/pull/193556)', 'created_at': datetime.datetime(2025, 1, 14, 12, 4, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589738582, 'issue_id': 2786965884, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193533\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 4, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478751, 'issue_id': 2786965884, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592132887, 'issue_id': 2786965884, 'author': 'ryv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 38, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:04:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193556.png)](https://mergebot.odoo.com/odoo/odoo/pull/193556)

fw-bot (Issue Creator) on (2025-01-14 12:04:33 UTC): @ivantodorovich @ryv-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193533

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:01:53 UTC): @ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).

ryv-odoo on (2025-01-15 09:38:12 UTC): @robodoo r+

"
2786962468,pull_request,closed,,[FW][FIX] point_of_sale: no caba move during reconciliation,"The reconciliation of move lines creates a cash basis (caba) move under some conditions. This can i.e. happen for the PoS move during the closing of a session.

But the PoS move does not use the transition account of any used caba taxes but the ""real"" account directly (see commit a011dcc0bdbe892b0a505a6a4169c5168bd018f6). So there is no need for a caba move.
Further an exchange difference move for the tax amount may be created. The issue is that the tax amounts from the cash basis are not being matched correctly with the tax amounts from the PoS move (since we only look for the transition account on the PoS move).

Reproduce on runbot for l10n_mx
1. Install l10n_mx
2. Set the 'IVA 16% VENTAS' tax as Customer Taxes on a product. Set the Sales Price to 100.
3. Create a payment method and journal for the PoS 
    * Payment method: Cash on journal CSH1
    * Journal: POS
5. Create a PoS using the payment method and journal from the previous step.
6. Start a PoS session
7. Sell the product from step 2 via the Cash payment method.
8. Close the Session
9. The following journal entries will be created: (All the tax lines use the same tax account; the ""final"" and not the caba transition account) 
```
* 1 entry in the POS journal (order)
       base:       | - 100.0 $
       tax:        | -  16.0 $
       receivable: | + 116.0 $
     * 1 entry in the CSH1 journal (cash / payment)
       cash:       | + 116.0 $
       receivable: | - 116.0 $
     * 1 entry in the CBMX journal (caba)
       base:       | - 100.0 $
       base:       | + 100.0 $
       tax:        | -  16.0 $
       tax:        | +  16.0 $
     * 1 entry in the EXCH journal (exchange difference)
       for the cash basis rounding difference
       tax:        | -  16.0 $
       tax:        | +  16.0 $
```

This commit fixes the issue by just skipping the creation of caba moves during the reconciliation of the PoS move lines. Further we make sure no exchange difference entry is created for the (not even created) cash basis entries.

opw-4355124

Forward-Port-Of: odoo/odoo#193492
Forward-Port-Of: odoo/odoo#193195",fw-bot,2025-01-14 12:02:32+00:00,[],2025-01-29 13:26:39+00:00,2025-01-15 13:21:30+00:00,https://github.com/odoo/odoo/pull/193555,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589734862, 'issue_id': 2786962468, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193555.png)](https://mergebot.odoo.com/odoo/odoo/pull/193555)', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589734879, 'issue_id': 2786962468, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591414779, 'issue_id': 2786962468, 'author': 'robodoo', 'body': '@svfu-odoo @RicGR98 staging failed: ci/runbot on bb36298e0660a7ec1db7db0d8e1c4435d91e30f7 (view more at https://runbot.odoo.com/runbot/build/73374331)', 'created_at': datetime.datetime(2025, 1, 15, 1, 0, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591883196, 'issue_id': 2786962468, 'author': 'svfu-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 15, 8, 4, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:02:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193555.png)](https://mergebot.odoo.com/odoo/odoo/pull/193555)

fw-bot (Issue Creator) on (2025-01-14 12:02:34 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

robodoo on (2025-01-15 01:00:22 UTC): @svfu-odoo @RicGR98 staging failed: ci/runbot on bb36298e0660a7ec1db7db0d8e1c4435d91e30f7 (view more at https://runbot.odoo.com/runbot/build/73374331)

svfu-odoo on (2025-01-15 08:04:29 UTC): @robodoo retry

"
2786961701,pull_request,closed,,[FW][FIX] sale_loyalty: handle adding order & specific discounts,"Versions
--------
- 18.0+

Steps
-----
1. Create a promotion to apply a fixed discount to an order;
2. create a promotion to apply a fixed discount to a specific product;
3. create a order with a taxed product eligible for the 2nd discount;
4. apply the first promotion;
5. apply the second promotion.

Issue
-----
Traceback:
> KeyError: account.tax(1,)

Cause
-----
Commit db12319e8b3b changed the way taxes get handled for discounts on the order total. They no longer automatically get a tax applied to them.

This causes a problem in the `_discountable_specific` method, which builds a `dict` using taxes of discount lines as keys to calculate discountable amounts.

Because the existing reward doesn't have a tax, this dict only has an `account.tax()` key, leading to a `KeyError` when trying to get discountable amount associated with the product-specific reward's taxes.

Solution
--------
Change the `dict` to a `defaultdict` which returns `0` for non-existing keys.

opw-4419764

Forward-Port-Of: odoo/odoo#193401",fw-bot,2025-01-14 12:02:06+00:00,[],2025-01-28 17:05:33+00:00,2025-01-14 17:02:28+00:00,https://github.com/odoo/odoo/pull/193554,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589734017, 'issue_id': 2786961701, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193554.png)](https://mergebot.odoo.com/odoo/odoo/pull/193554)', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589734047, 'issue_id': 2786961701, 'author': 'fw-bot', 'body': '@lvsz cherrypicking of pull request odoo/odoo#193401 failed.\n\nstdout:\n```\nAuto-merging addons/sale_loyalty/models/sale_order.py\nCONFLICT (content): Merge conflict in addons/sale_loyalty/models/sale_order.py\nAuto-merging addons/sale_loyalty/tests/test_program_numbers.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589740994, 'issue_id': 2786961701, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 5, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589802227, 'issue_id': 2786961701, 'author': 'robodoo', 'body': ""@lvsz 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 14, 12, 35, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589893673, 'issue_id': 2786961701, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 19, 53, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:02:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193554.png)](https://mergebot.odoo.com/odoo/odoo/pull/193554)

fw-bot (Issue Creator) on (2025-01-14 12:02:09 UTC): @lvsz cherrypicking of pull request odoo/odoo#193401 failed.

stdout:
```
Auto-merging addons/sale_loyalty/models/sale_order.py
CONFLICT (content): Merge conflict in addons/sale_loyalty/models/sale_order.py
Auto-merging addons/sale_loyalty/tests/test_program_numbers.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-14 12:05:43 UTC): robodoo r+

robodoo on (2025-01-14 12:35:47 UTC): @lvsz 'ci/runbot' failed on this reviewed PR.

lvsz on (2025-01-14 13:19:53 UTC): robodoo r+

"
2786961502,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/d0fa5de3d [REL] 18.1.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/3989a9226 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/93c32a1f4 [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/afb3737f8 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/bfaeffa36 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/453ea4bd9 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/7b120ef35 [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/dbe130468 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/80c784083 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/92b29c1da [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/0b78315a8 [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/4cf2a608d [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/206826a2d [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/8fcd63b73 [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/207b1c42d [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/a071ee0f5 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/d2de6798d [FIX] charts: disable waterfall legend onClick Task: 4413802
https://github.com/odoo/o-spreadsheet/commit/f8d83530b [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/8a217288b [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/948abaa5d [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/8688f938e [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/089ee4f48 [IMP] data: bump version to 25 Task: 0
https://github.com/odoo/o-spreadsheet/commit/c520e896c [REL] version 18.1.0
https://github.com/odoo/o-spreadsheet/commit/f0077151b [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 12:02:00+00:00,[],2025-01-15 08:08:33+00:00,2025-01-15 08:08:33+00:00,https://github.com/odoo/odoo/pull/193553,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589733790, 'issue_id': 2786961502, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589733829, 'issue_id': 2786961502, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193553.png)](https://mergebot.odoo.com/odoo/odoo/pull/193553)', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589733908, 'issue_id': 2786961502, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 12, 2, 5, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 12:02:02 UTC): robodoo fw=no

robodoo on (2025-01-14 12:02:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193553.png)](https://mergebot.odoo.com/odoo/odoo/pull/193553)

robodoo on (2025-01-14 12:02:05 UTC): Disabled forward-porting.

"
2786961174,pull_request,closed,,[FW][FIX] web_tour: advance directly when macro step has no trigger,"In the macro class, for each step, we wait 50ms to see if a mutation occurs and then look for the trigger of the step in the DOM. So, if a step of the macro does not have a trigger, we do not look for a trigger and we only do an action, there is no reason to wait for a mutation to occur in the DOM. So, we can continue the macro directly.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192015",fw-bot,2025-01-14 12:01:48+00:00,[],2025-01-28 18:24:51+00:00,2025-01-14 18:22:13+00:00,https://github.com/odoo/odoo/pull/193552,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589733429, 'issue_id': 2786961174, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193552.png)](https://mergebot.odoo.com/odoo/odoo/pull/193552)', 'created_at': datetime.datetime(2025, 1, 14, 12, 1, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589733484, 'issue_id': 2786961174, 'author': 'fw-bot', 'body': '@pipu-odoo @bastien-ipb while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77111) did not succeed. You will need to fix it before this can be merged.\n\nBoth this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 1, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590272431, 'issue_id': 2786961174, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 15, 36, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:01:51 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193552.png)](https://mergebot.odoo.com/odoo/odoo/pull/193552)

fw-bot (Issue Creator) on (2025-01-14 12:01:52 UTC): @pipu-odoo @bastien-ipb while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77111) did not succeed. You will need to fix it before this can be merged.

Both this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-14 15:36:42 UTC): @robodoo r+

"
2786960469,pull_request,closed,,[FW][FIX] pos_loyalty: correctly save loyalty.card in IndexedDB,"Before this commit, the condition to check the loyalty card to be saved in IndexedDB only kept the loyalty cards related to the finalized orders that were synced. It should keep the items that are not synced or finalized.

opw-4257389

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193026
Forward-Port-Of: odoo/odoo#188968",fw-bot,2025-01-14 12:01:24+00:00,[],2025-02-06 18:21:35+00:00,2025-01-23 18:12:28+00:00,https://github.com/odoo/odoo/pull/193551,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589732617, 'issue_id': 2786960469, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193551.png)](https://mergebot.odoo.com/odoo/odoo/pull/193551)', 'created_at': datetime.datetime(2025, 1, 14, 12, 1, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589732658, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#188968 failed.\n\nstdout:\n```\nAuto-merging addons/pos_loyalty/static/src/app/models/data_service_options.js\nCONFLICT (content): Merge conflict in addons/pos_loyalty/static/src/app/models/data_service_options.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 12, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478948, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 2, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313745, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278605, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468973, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600469256, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603476944, 'issue_id': 2786960469, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609438880, 'issue_id': 2786960469, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 10, 28, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 12:01:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193551.png)](https://mergebot.odoo.com/odoo/odoo/pull/193551)

fw-bot (Issue Creator) on (2025-01-14 12:01:30 UTC): @pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#188968 failed.

stdout:
```
Auto-merging addons/pos_loyalty/static/src/app/models/data_service_options.js
CONFLICT (content): Merge conflict in addons/pos_loyalty/static/src/app/models/data_service_options.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-15 02:02:04 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 02:01:35 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-17 02:01:33 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:01:37 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:22 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:08 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188968 is awaiting action (not merged or closed).

pedrambiria on (2025-01-23 10:28:43 UTC): robodoo r+

"
2786946663,pull_request,closed,,[FW][FIX] account_edi_ubl_cii: allow the use of IBANID,"Due to an error in the condition, `ProprietaryID` was always used, even if IBANID should be used instead. That lead to customers missing information (`ProprietaryID` is not always picked up by other software, while IBANID is).

Ticket link: https://odoo.com/odoo/69/tasks/4414985
opw-4414985

Forward-Port-Of: odoo/odoo#192519",fw-bot,2025-01-14 11:53:45+00:00,[],2025-01-29 08:29:11+00:00,2025-01-15 08:19:29+00:00,https://github.com/odoo/odoo/pull/193550,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589718246, 'issue_id': 2786946663, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193550.png)](https://mergebot.odoo.com/odoo/odoo/pull/193550)', 'created_at': datetime.datetime(2025, 1, 14, 11, 53, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589718261, 'issue_id': 2786946663, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 53, 47, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:53:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193550.png)](https://mergebot.odoo.com/odoo/odoo/pull/193550)

fw-bot (Issue Creator) on (2025-01-14 11:53:47 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786944243,pull_request,closed,,[IMP] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/702f816bc [REL] 18.2.0-alpha.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/f963b92dc [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/8c0c0b0aa [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/8c464c169 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/6efae30e4 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/caa05cb75 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/abb81f0ac [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/59606e635 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/b63c922e1 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/ea553ef6e [REF] charts: rename copyForSheetId method Task: 4447450
https://github.com/odoo/o-spreadsheet/commit/5482a2101 [REF] pivot, clickable cells: iterate over visible positions Task: 4461339
https://github.com/odoo/o-spreadsheet/commit/45998ae18 [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/77a3e0462 [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/37b8e0402 [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/a7552fd96 [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/5f27a7e96 [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/a8cc48497 [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/df4cb384e [IMP] chart: add custom tooltip for charts Task: 4351271
https://github.com/odoo/o-spreadsheet/commit/c6fc50f92 [FIX] chart: labels should not be truncated in tooltip Task: 4351338
https://github.com/odoo/o-spreadsheet/commit/4467b4f24 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/278c04747 [FIX] charts: disable waterfall legend onClick Task: 4413802
https://github.com/odoo/o-spreadsheet/commit/812b04a3c [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/621cc11b6 [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/adbd25b6b [IMP] CoreViewPlugin: Remove access to dispatch Task: 4241403
https://github.com/odoo/o-spreadsheet/commit/3bfd3d15b [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/37f2328a8 [REF] helpers: introduce getUniqueText Task: 4440233
https://github.com/odoo/o-spreadsheet/commit/e8c979c30 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/7114f281c [IMP] data: bump version to 25 Task: 0
https://github.com/odoo/o-spreadsheet/commit/0ed70d279 [IMP] demo: Allow access to the session/transporservice on local network Task: 0
https://github.com/odoo/o-spreadsheet/commit/0f4591583 [REL] Bump master version to 18.2.0-alpha.0 Task: 0
https://github.com/odoo/o-spreadsheet/commit/f0077151b [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:52:21+00:00,[],2025-01-15 08:08:31+00:00,2025-01-15 08:08:31+00:00,https://github.com/odoo/odoo/pull/193549,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589715784, 'issue_id': 2786944243, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 52, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589715799, 'issue_id': 2786944243, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193549.png)](https://mergebot.odoo.com/odoo/odoo/pull/193549)', 'created_at': datetime.datetime(2025, 1, 14, 11, 52, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589715864, 'issue_id': 2786944243, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 52, 26, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:52:23 UTC): robodoo fw=no

robodoo on (2025-01-14 11:52:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193549.png)](https://mergebot.odoo.com/odoo/odoo/pull/193549)

robodoo on (2025-01-14 11:52:26 UTC): Disabled forward-porting.

"
2786942048,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/0c5220e86 [REL] 18.0.9 Task: 0
https://github.com/odoo/o-spreadsheet/commit/883dc0ae4 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/57aa8a7c7 [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/d71d23f97 [FIX] charts: Account for correct locale when filtering empty datasets Task: 4465324
https://github.com/odoo/o-spreadsheet/commit/de1268b08 [FIX] pivot: notify only with static formulas Task: 4453844
https://github.com/odoo/o-spreadsheet/commit/d926ab9e3 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/4eb819fa8 [IMP] model: create snapshot when loading xlsx file Task: 4080514
https://github.com/odoo/o-spreadsheet/commit/fa35e56dc [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/5ae37ce00 [FIX] chart: fix trend line axis alignment Task: 0
https://github.com/odoo/o-spreadsheet/commit/bef5abccc [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/226fa6ad5 [FIX] pivot: ensure correct format status in menu Task: 4373606
https://github.com/odoo/o-spreadsheet/commit/85aaab61d [FIX] pivot: mouse events do not work in pivot text input Task: 4350439
https://github.com/odoo/o-spreadsheet/commit/aebd38c9d [FIX] chart: fix misalignment with trend line axis Task: 4251695
https://github.com/odoo/o-spreadsheet/commit/93eb716fc [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/3d0c96bd3 [FIX] xlsx: import new lines in sharedStrings Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/3627052ae [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/61d79cd1e [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/707d19875 [FIX] pivot: prevent duplicating pivot in error Task: 4361353
https://github.com/odoo/o-spreadsheet/commit/2687f536a [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/144842902 [FIX] package: 18.0 is no longer the latest version Task: 0
https://github.com/odoo/o-spreadsheet/commit/66f0c66f8 [FIX] chart: trend line tooltip for scatter/line charts Task: 4279972
https://github.com/odoo/o-spreadsheet/commit/a59494344 [FIX] custom currency: panel on very long currency code Task: 4402647

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:51:06+00:00,[],2025-01-15 08:08:29+00:00,2025-01-15 08:08:29+00:00,https://github.com/odoo/odoo/pull/193548,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589713416, 'issue_id': 2786942048, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 51, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589713442, 'issue_id': 2786942048, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193548.png)](https://mergebot.odoo.com/odoo/odoo/pull/193548)', 'created_at': datetime.datetime(2025, 1, 14, 11, 51, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589713495, 'issue_id': 2786942048, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 51, 11, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:51:08 UTC): robodoo fw=no

robodoo on (2025-01-14 11:51:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193548.png)](https://mergebot.odoo.com/odoo/odoo/pull/193548)

robodoo on (2025-01-14 11:51:11 UTC): Disabled forward-porting.

"
2786940513,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/fd2a7abc6 [REL] 17.4.17 Task: 0
https://github.com/odoo/o-spreadsheet/commit/786c545e4 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/05706d48f [IMP] functions: add VALUE function Task: 4373019
https://github.com/odoo/o-spreadsheet/commit/20bae6b47 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/558a37892 [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/cb63a66c2 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/752a02078 [FIX] charts: translate gauge chart titles Task: 4421055
https://github.com/odoo/o-spreadsheet/commit/ab456e6a3 [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/443f9f7a2 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/cad0d9d2e [FIX] xlsx: preserve leading whitespace at export Task: 4044862
https://github.com/odoo/o-spreadsheet/commit/1f2714533 [FIX] xlsx: import new lines in sharedStrings Task: 4044862

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:50:31+00:00,[],2025-01-15 08:08:25+00:00,2025-01-15 08:08:25+00:00,https://github.com/odoo/odoo/pull/193547,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589712024, 'issue_id': 2786940513, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589712032, 'issue_id': 2786940513, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193547.png)](https://mergebot.odoo.com/odoo/odoo/pull/193547)', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589712129, 'issue_id': 2786940513, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, 36, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:50:33 UTC): robodoo fw=no

robodoo on (2025-01-14 11:50:33 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193547.png)](https://mergebot.odoo.com/odoo/odoo/pull/193547)

robodoo on (2025-01-14 11:50:36 UTC): Disabled forward-porting.

"
2786939231,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/306dbf74b [REL] 17.2.31 Task: 0
https://github.com/odoo/o-spreadsheet/commit/5a43cc452 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/f1319ba01 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/61c7ac5da [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/30e1e3758 [FIX] spreadsheet: avoid parasitic renders Task: 4373054
https://github.com/odoo/o-spreadsheet/commit/d8f81f1e6 [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/a036569e6 [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840
https://github.com/odoo/o-spreadsheet/commit/eb99bab02 [FIX] charts: translate gauge chart titles Task: 4421055

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:49:58+00:00,[],2025-01-15 08:08:22+00:00,2025-01-15 08:08:22+00:00,https://github.com/odoo/odoo/pull/193546,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589710932, 'issue_id': 2786939231, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589710987, 'issue_id': 2786939231, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193546.png)](https://mergebot.odoo.com/odoo/odoo/pull/193546)', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589711037, 'issue_id': 2786939231, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 50, 3, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:50:00 UTC): robodoo fw=no

robodoo on (2025-01-14 11:50:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193546.png)](https://mergebot.odoo.com/odoo/odoo/pull/193546)

robodoo on (2025-01-14 11:50:03 UTC): Disabled forward-porting.

"
2786937683,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/94f8ef936 [REL] 17.0.45 Task: 0
https://github.com/odoo/o-spreadsheet/commit/6571aa6b4 [FIX] borders: fix border on column/row deletion Task: 4089281
https://github.com/odoo/o-spreadsheet/commit/8a8b4b138 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/fedb34407 [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/0277eb90d [FIX] index: export isNumber/isDateTime helper Task: 0
https://github.com/odoo/o-spreadsheet/commit/54c59cabf [FIX] bottom_bar: ensure active sheet is scrolled into view Task: 4377840

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:49:25+00:00,[],2025-01-28 15:37:27+00:00,2025-01-14 15:28:41+00:00,https://github.com/odoo/odoo/pull/193545,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589709973, 'issue_id': 2786937683, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 49, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589710011, 'issue_id': 2786937683, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193545.png)](https://mergebot.odoo.com/odoo/odoo/pull/193545)', 'created_at': datetime.datetime(2025, 1, 14, 11, 49, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589710043, 'issue_id': 2786937683, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 49, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589943274, 'issue_id': 2786937683, 'author': 'VincentSchippefilt', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 42, 34, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:49:27 UTC): robodoo fw=no

robodoo on (2025-01-14 11:49:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193545.png)](https://mergebot.odoo.com/odoo/odoo/pull/193545)

robodoo on (2025-01-14 11:49:29 UTC): Disabled forward-porting.

VincentSchippefilt on (2025-01-14 13:42:34 UTC): robodoo r+

"
2786935966,pull_request,closed,,[FIX] spreadsheet: update o_spreadsheet to latest version,"### Contains the following commits:

https://github.com/odoo/o-spreadsheet/commit/5c7bf6edd [REL] 16.0.57 Task: 0
https://github.com/odoo/o-spreadsheet/commit/45b761b90 [FIX] Package: update owl to 2.5.1 Task: 0
https://github.com/odoo/o-spreadsheet/commit/9037b622f [FIX] xlsx: ignore charts without data set Task: 4460515
https://github.com/odoo/o-spreadsheet/commit/1f808875d [FIX] borders: fix border on column/row deletion Task: 4089281

Co-authored-by: Anthony Hendrickx (anhe) <anhe@odoo.com>
Co-authored-by: Alexis Lacroix (laa) <laa@odoo.com>
Co-authored-by: Lucas Lefèvre (lul) <lul@odoo.com>
Co-authored-by: Dhrutik Patel (dhrp) <dhrp@odoo.com>
Co-authored-by: Adrien Minne (adrm) <adrm@odoo.com>
Co-authored-by: Mehdi Rachico (mera) <mera@odoo.com>
Co-authored-by: Florian Damhaut (flda) <flda@odoo.com>
Co-authored-by: Rémi Rahir (rar) <rar@odoo.com>
Co-authored-by: Pierre Rousseau (pro) <pro@odoo.com>
Co-authored-by: Vincent Schippefilt (vsc) <vsc@odoo.com>
",rrahir,2025-01-14 11:48:47+00:00,[],2025-01-28 15:05:09+00:00,2025-01-14 14:58:22+00:00,https://github.com/odoo/odoo/pull/193544,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589708694, 'issue_id': 2786935966, 'author': 'rrahir', 'body': 'robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 14, 11, 48, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589708742, 'issue_id': 2786935966, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193544.png)](https://mergebot.odoo.com/odoo/odoo/pull/193544)', 'created_at': datetime.datetime(2025, 1, 14, 11, 48, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589708803, 'issue_id': 2786935966, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 14, 11, 48, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589942335, 'issue_id': 2786935966, 'author': 'VincentSchippefilt', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 42, 8, tzinfo=datetime.timezone.utc)}]","rrahir (Issue Creator) on (2025-01-14 11:48:49 UTC): robodoo fw=no

robodoo on (2025-01-14 11:48:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193544.png)](https://mergebot.odoo.com/odoo/odoo/pull/193544)

robodoo on (2025-01-14 11:48:52 UTC): Disabled forward-porting.

VincentSchippefilt on (2025-01-14 13:42:08 UTC): robodoo r+

"
2786933794,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-14 11:47:33+00:00,[],2025-01-28 15:37:33+00:00,2025-01-14 15:32:30+00:00,https://github.com/odoo/odoo/pull/193543,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589706345, 'issue_id': 2786933794, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193543.png)](https://mergebot.odoo.com/odoo/odoo/pull/193543)', 'created_at': datetime.datetime(2025, 1, 14, 11, 47, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589706366, 'issue_id': 2786933794, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 47, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:47:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193543.png)](https://mergebot.odoo.com/odoo/odoo/pull/193543)

fw-bot (Issue Creator) on (2025-01-14 11:47:35 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786920943,pull_request,closed,,[FW][FIX] point_of_sale: ensure invoice is paid when invoicing,"Before this commit, if a payment method requiring customer identification was used for an order in Point of Sale but the order was not immediately invoiced, closing the session and later invoicing the order in a new session would result in the invoice being marked as unpaid.

opw-4292231

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#187759",fw-bot,2025-01-14 11:40:24+00:00,[],2025-01-28 15:37:20+00:00,2025-01-14 15:27:57+00:00,https://github.com/odoo/odoo/pull/193542,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589692074, 'issue_id': 2786920943, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193542.png)](https://mergebot.odoo.com/odoo/odoo/pull/193542)', 'created_at': datetime.datetime(2025, 1, 14, 11, 40, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589692082, 'issue_id': 2786920943, 'author': 'fw-bot', 'body': '@pedrambiria @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193526\n* odoo/odoo#192795\n* odoo/odoo#192779\n* odoo/odoo#192765\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 40, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589761674, 'issue_id': 2786920943, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 15, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:40:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193542.png)](https://mergebot.odoo.com/odoo/odoo/pull/193542)

fw-bot (Issue Creator) on (2025-01-14 11:40:26 UTC): @pedrambiria @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193526
* odoo/odoo#192795
* odoo/odoo#192779
* odoo/odoo#192765

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pedrambiria on (2025-01-14 12:15:39 UTC): @robodoo r+

"
2786913330,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-14 11:36:04+00:00,[],2025-01-28 15:37:20+00:00,2025-01-14 15:28:02+00:00,https://github.com/odoo/odoo/pull/193541,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589683976, 'issue_id': 2786913330, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193541.png)](https://mergebot.odoo.com/odoo/odoo/pull/193541)', 'created_at': datetime.datetime(2025, 1, 14, 11, 36, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589683992, 'issue_id': 2786913330, 'author': 'fw-bot', 'body': '@bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193527\n* odoo/odoo#193512\n* odoo/odoo#193476\n* odoo/odoo#193468\n* odoo/odoo#193449\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 36, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589754047, 'issue_id': 2786913330, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:36:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193541.png)](https://mergebot.odoo.com/odoo/odoo/pull/193541)

fw-bot (Issue Creator) on (2025-01-14 11:36:06 UTC): @bvr-odoo @SergeBayet this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193527
* odoo/odoo#193512
* odoo/odoo#193476
* odoo/odoo#193468
* odoo/odoo#193449

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

SergeBayet on (2025-01-14 12:12:00 UTC): @robodoo r+

"
2786912827,pull_request,closed,,[FW][IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.

Forward-Port-Of: odoo/odoo#193501",fw-bot,2025-01-14 11:35:48+00:00,[],2025-01-29 11:56:57+00:00,2025-01-15 11:53:25+00:00,https://github.com/odoo/odoo/pull/193540,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589683501, 'issue_id': 2786912827, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193540.png)](https://mergebot.odoo.com/odoo/odoo/pull/193540)', 'created_at': datetime.datetime(2025, 1, 14, 11, 35, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589683522, 'issue_id': 2786912827, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 35, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:35:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193540.png)](https://mergebot.odoo.com/odoo/odoo/pull/193540)

fw-bot (Issue Creator) on (2025-01-14 11:35:50 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786890687,pull_request,closed,,[CLA] added additional resource,"CLA change. Added new resource to corporate CLA file

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",OSevangelist,2025-01-14 11:24:35+00:00,[],2025-01-14 13:49:34+00:00,2025-01-14 13:49:34+00:00,https://github.com/odoo/odoo/pull/193539,"[('CLA', 'Contributor License Agreement')]","[{'comment_id': 2589662194, 'issue_id': 2786890687, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193539.png)](https://mergebot.odoo.com/odoo/odoo/pull/193539)', 'created_at': datetime.datetime(2025, 1, 14, 11, 24, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589821689, 'issue_id': 2786890687, 'author': 'mart-e', 'body': ""Hello,\r\n\r\nThank you for the signature, it will soon be integrated into Odoo.\r\nFuture pull requests made on odoo will be validated by the runbot.\r\nIf you have existing PRs that are awaiting for CLA validation, don't forget to rebase your code as soon as this is merged.\r\n\r\nRegards\r\n\r\n@robodoo review+"", 'created_at': datetime.datetime(2025, 1, 14, 12, 45, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:24:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193539.png)](https://mergebot.odoo.com/odoo/odoo/pull/193539)

mart-e on (2025-01-14 12:45:04 UTC): Hello,

Thank you for the signature, it will soon be integrated into Odoo.
Future pull requests made on odoo will be validated by the runbot.
If you have existing PRs that are awaiting for CLA validation, don't forget to rebase your code as soon as this is merged.

Regards

@robodoo review+

"
2786864626,pull_request,closed,,[FW][FIX] account: Fix round globally with reverse charge tax,"Before, the rounding was made by counting twice the same base amount that was leading to an extra ""delta_base_amount_currency"".

See the test in the commit.

opw-4425380

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193454
Forward-Port-Of: odoo/odoo#192484",fw-bot,2025-01-14 11:10:36+00:00,[],2025-01-28 15:37:20+00:00,2025-01-14 15:27:53+00:00,https://github.com/odoo/odoo/pull/193538,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589636504, 'issue_id': 2786864626, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193538.png)](https://mergebot.odoo.com/odoo/odoo/pull/193538)', 'created_at': datetime.datetime(2025, 1, 14, 11, 10, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589636535, 'issue_id': 2786864626, 'author': 'fw-bot', 'body': '@smetl @clbr-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 11, 10, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589816356, 'issue_id': 2786864626, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 42, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 11:10:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193538.png)](https://mergebot.odoo.com/odoo/odoo/pull/193538)

fw-bot (Issue Creator) on (2025-01-14 11:10:38 UTC): @smetl @clbr-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-14 12:42:34 UTC): @robodoo r+

"
2786840915,pull_request,closed,,[FW][FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408

Forward-Port-Of: odoo/odoo#193508",fw-bot,2025-01-14 10:58:23+00:00,[],2025-01-29 19:07:57+00:00,2025-01-15 18:55:44+00:00,https://github.com/odoo/odoo/pull/193537,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589611165, 'issue_id': 2786840915, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193537.png)](https://mergebot.odoo.com/odoo/odoo/pull/193537)', 'created_at': datetime.datetime(2025, 1, 14, 10, 58, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589611182, 'issue_id': 2786840915, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 58, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:58:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193537.png)](https://mergebot.odoo.com/odoo/odoo/pull/193537)

fw-bot (Issue Creator) on (2025-01-14 10:58:26 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786840180,pull_request,closed,,[FW][FIX] purchase: fix tour by providing appropriate class,"Before this commit:
===================
- The purchase tour was failing because the tour's JavaScript used
  an incorrect class selector (targeting 'partner_id'), which prevented
  it from locating the intended DOM element. Consequently,
  the sequence of actions was interrupted, causing the tour to break midway.

After this commit:
===================
- The issue has been resolved by updating the tour to use the correct and
  unique class selector. This ensures the tour accurately targets the
  intended element, allowing it to proceed without interruptions.
  As a result, the purchase tour runs successfully and achieves its intended purpose.

TaskId: 4268662

Forward-Port-Of: odoo/odoo#184735",fw-bot,2025-01-14 10:58:06+00:00,[],2025-02-04 15:06:25+00:00,2025-01-21 14:44:50+00:00,https://github.com/odoo/odoo/pull/193536,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589610351, 'issue_id': 2786840180, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193536.png)](https://mergebot.odoo.com/odoo/odoo/pull/193536)', 'created_at': datetime.datetime(2025, 1, 14, 10, 58, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589610377, 'issue_id': 2786840180, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.\n\nstdout:\n```\nAuto-merging addons/purchase/static/src/js/tours/purchase.js\nCONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 58, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591742522, 'issue_id': 2786840180, 'author': 'dhha-odoo', 'body': 'Hello @amoyaux,\r\n\r\nI have resolved the conflict. Thank you!', 'created_at': datetime.datetime(2025, 1, 15, 6, 22, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595469487, 'issue_id': 2786840180, 'author': 'dhha-odoo', 'body': 'Hello @amoyaux, \r\n\r\nI have resolved the conflict. Could you please redo the r+, when you get a chance?\r\n\r\nThank you.', 'created_at': datetime.datetime(2025, 1, 16, 12, 31, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599469011, 'issue_id': 2786840180, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600472029, 'issue_id': 2786840180, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174764, 'issue_id': 2786840180, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477116, 'issue_id': 2786840180, 'author': 'fw-bot', 'body': '@dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604535144, 'issue_id': 2786840180, 'author': 'dhha-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 12, 1, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:58:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193536.png)](https://mergebot.odoo.com/odoo/odoo/pull/193536)

fw-bot (Issue Creator) on (2025-01-14 10:58:08 UTC): @dhha-odoo @amoyaux cherrypicking of pull request odoo/odoo#184735 failed.

stdout:
```
Auto-merging addons/purchase/static/src/js/tours/purchase.js
CONFLICT (content): Merge conflict in addons/purchase/static/src/js/tours/purchase.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dhha-odoo on (2025-01-15 06:22:32 UTC): Hello @amoyaux,

I have resolved the conflict. Thank you!

dhha-odoo on (2025-01-16 12:31:28 UTC): Hello @amoyaux, 

I have resolved the conflict. Could you please redo the r+, when you get a chance?

Thank you.

fw-bot (Issue Creator) on (2025-01-18 02:01:42 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:36 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:46 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:19 UTC): @dhha-odoo @amoyaux this forward port of odoo/odoo#184735 is awaiting action (not merged or closed).

dhha-odoo on (2025-01-21 12:01:19 UTC): robodoo r+

"
2786838408,pull_request,closed,,[IMP] im_livechat: cleanup RTC session before we find an operator,"Before this PR, operators could be stuck inside a ""ghost call,"" meaning that they had incorrectly closed RTC sessions. This is an issue with the fact that ""in call"" operators cannot be assigned a new live chat.

This PR cleanup rtc session before trying to find an operator

task-4440897, task-4453597

",phenix-factory,2025-01-14 10:57:16+00:00,[],2025-01-14 15:19:01+00:00,2025-01-14 15:13:13+00:00,https://github.com/odoo/odoo/pull/193535,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589608409, 'issue_id': 2786838408, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193535.png)](https://mergebot.odoo.com/odoo/odoo/pull/193535)', 'created_at': datetime.datetime(2025, 1, 14, 10, 57, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:57:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193535.png)](https://mergebot.odoo.com/odoo/odoo/pull/193535)

"
2786819590,pull_request,closed,,[FW][IMP] point_of_sale: screen saver,"- Added a new ScreenSaver component that displays the brand image.
- The screensaver disappears when clicked.
- Automatically activates and becomes visible after 5 minutes of user
inactivity.

task- 4374221

Forward-Port-Of: odoo/odoo#191392",fw-bot,2025-01-14 10:47:42+00:00,[],2025-01-30 13:45:54+00:00,2025-01-16 13:37:56+00:00,https://github.com/odoo/odoo/pull/193534,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589588458, 'issue_id': 2786819590, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193534.png)](https://mergebot.odoo.com/odoo/odoo/pull/193534)', 'created_at': datetime.datetime(2025, 1, 14, 10, 47, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589588479, 'issue_id': 2786819590, 'author': 'fw-bot', 'body': '@davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#191392 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/pos_app.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/pos_app.js\nAuto-merging addons/point_of_sale/static/src/app/services/pos_store.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js\nAuto-merging addons/pos_hr/static/src/app/services/pos_store.js\nCONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/components/navbar/navbar.js deleted in e8ee3a106e5e65c77345e7f5759ad7525ada22b2 and modified in 03549eff29ac8b8a3ae196cc36fabb599ad88fc9.  Version 03549eff29ac8b8a3ae196cc36fabb599ad88fc9 of addons/pos_restaurant/static/src/overrides/components/navbar/navbar.js left in tree.\nCONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in e8ee3a106e5e65c77345e7f5759ad7525ada22b2 and modified in 03549eff29ac8b8a3ae196cc36fabb599ad88fc9.  Version 03549eff29ac8b8a3ae196cc36fabb599ad88fc9 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 47, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595182487, 'issue_id': 2786819590, 'author': 'davidmonnom', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 10, 45, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:47:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193534.png)](https://mergebot.odoo.com/odoo/odoo/pull/193534)

fw-bot (Issue Creator) on (2025-01-14 10:47:44 UTC): @davidmonnom @adgu-odoo cherrypicking of pull request odoo/odoo#191392 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/pos_app.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/pos_app.js
Auto-merging addons/point_of_sale/static/src/app/services/pos_store.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/services/pos_store.js
Auto-merging addons/pos_hr/static/src/app/services/pos_store.js
CONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/components/navbar/navbar.js deleted in e8ee3a106e5e65c77345e7f5759ad7525ada22b2 and modified in 03549eff29ac8b8a3ae196cc36fabb599ad88fc9.  Version 03549eff29ac8b8a3ae196cc36fabb599ad88fc9 of addons/pos_restaurant/static/src/overrides/components/navbar/navbar.js left in tree.
CONFLICT (modify/delete): addons/pos_restaurant/static/src/overrides/models/pos_store.js deleted in e8ee3a106e5e65c77345e7f5759ad7525ada22b2 and modified in 03549eff29ac8b8a3ae196cc36fabb599ad88fc9.  Version 03549eff29ac8b8a3ae196cc36fabb599ad88fc9 of addons/pos_restaurant/static/src/overrides/models/pos_store.js left in tree.

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

davidmonnom on (2025-01-16 10:45:19 UTC): @robodoo r+

"
2786818864,pull_request,closed,,[FW][FIX] base: website is not shown in the contact qweb widget,"**Affects**
16.0+

**Steps to reproduce:**

- Render the Contact qweb widget with fields [""phone"", ""website""]

```py
Contact = self.env[""ir.qweb.field.contact""]
partner = self.env[""res.partner""].create(
    {
        ""name"": ""Test Partner"",
        ""phone"": ""1234567890"",
        ""website"": ""https://www.example.com"",
    }
)
result = Contact.value_to_html(partner, {""fields"": [""phone"", ""website""]})
```

**Result:**

- The website is not shown

---

This is a regression introduced in 9e53aea9, in combination with some buggy behavior in the qweb compilation.

Somehow the `t-elif` condition is applying on the next element instead on itself, hiding the website item. I did not investigate this further.


ping @lvsz @ryv-odoo

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193461
Forward-Port-Of: odoo/odoo#191201",fw-bot,2025-01-14 10:47:25+00:00,[],2025-01-29 16:28:22+00:00,2025-01-15 16:27:12+00:00,https://github.com/odoo/odoo/pull/193533,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589587663, 'issue_id': 2786818864, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193533.png)](https://mergebot.odoo.com/odoo/odoo/pull/193533)', 'created_at': datetime.datetime(2025, 1, 14, 10, 47, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589587703, 'issue_id': 2786818864, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 47, 27, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:47:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193533.png)](https://mergebot.odoo.com/odoo/odoo/pull/193533)

fw-bot (Issue Creator) on (2025-01-14 10:47:27 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786791238,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-14 10:33:39+00:00,[],2025-01-28 15:37:03+00:00,2025-01-14 15:13:16+00:00,https://github.com/odoo/odoo/pull/193532,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589559432, 'issue_id': 2786791238, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193532.png)](https://mergebot.odoo.com/odoo/odoo/pull/193532)', 'created_at': datetime.datetime(2025, 1, 14, 10, 33, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589559444, 'issue_id': 2786791238, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 33, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596571806, 'issue_id': 2786791238, 'author': 'i350', 'body': '@ryce-odoo There is an bug currently in production, due to this change, when I try to create loyalty card for a new loyalty program.\r\nThe validation error appears immediately after pressing ""New""\r\n\r\n![image](https://github.com/user-attachments/assets/fa256362-a60c-43fe-91b2-874aa738e88f)', 'created_at': datetime.datetime(2025, 1, 16, 19, 8, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597058686, 'issue_id': 2786791238, 'author': 'ryce-odoo', 'body': 'Hey @i350 \r\nThis is strange as the original version I implemented this change on (16.0) does not allow you to create loyalty cards manually nor do I think customers should be creating them manually, but this could be fixed in another PR by limiting when the error is thrown.', 'created_at': datetime.datetime(2025, 1, 16, 22, 45, 22, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:33:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193532.png)](https://mergebot.odoo.com/odoo/odoo/pull/193532)

fw-bot (Issue Creator) on (2025-01-14 10:33:40 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

i350 on (2025-01-16 19:08:55 UTC): @ryce-odoo There is an bug currently in production, due to this change, when I try to create loyalty card for a new loyalty program.
The validation error appears immediately after pressing ""New""

![image](https://github.com/user-attachments/assets/fa256362-a60c-43fe-91b2-874aa738e88f)

ryce-odoo on (2025-01-16 22:45:22 UTC): Hey @i350 
This is strange as the original version I implemented this change on (16.0) does not allow you to create loyalty cards manually nor do I think customers should be creating them manually, but this could be fixed in another PR by limiting when the error is thrown.

"
2786785264,pull_request,closed,,[FIX] stock: placeholder in count sheet,"Since commit 567b8d676b3b6dc747df4d9bf10e7a91b4cb61bb It used to insert a placeholder when the data is not there but we won't on real report

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",amoyaux,2025-01-14 10:30:29+00:00,[],2025-01-29 13:53:07+00:00,2025-01-15 13:50:26+00:00,https://github.com/odoo/odoo/pull/193531,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589553054, 'issue_id': 2786785264, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193531.png)](https://mergebot.odoo.com/odoo/odoo/pull/193531)', 'created_at': datetime.datetime(2025, 1, 14, 10, 30, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592205653, 'issue_id': 2786785264, 'author': 'Whenrow', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 10, 6, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:30:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193531.png)](https://mergebot.odoo.com/odoo/odoo/pull/193531)

Whenrow on (2025-01-15 10:06:46 UTC): robodoo r+

"
2786781243,pull_request,closed,,"[IMP] account,*: add path for the actions in the menu of Accounting","Added path for the main actions of Accounting (linked to menu mainly)

Cleaned a bit the product list view.
Made a sale and a purchase one to add/hide fields for the more specific flows

task-4427096




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",gawa-odoo,2025-01-14 10:28:36+00:00,[],2025-02-06 12:07:29+00:00,2025-01-23 12:03:01+00:00,https://github.com/odoo/odoo/pull/193530,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2589548699, 'issue_id': 2786781243, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193530.png)](https://mergebot.odoo.com/odoo/odoo/pull/193530)', 'created_at': datetime.datetime(2025, 1, 14, 10, 28, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:28:39 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193530.png)](https://mergebot.odoo.com/odoo/odoo/pull/193530)

"
2786772999,pull_request,open,,[FIX] l10n_fr_account: line 26 can't be a tag,"When we ask for a reimbursement for the VAT that is due from the state, we close the period, then we send the declarations, with the amount that is asked as reimbursement.
The issue is that we need this amount to be registered in the report of this period. 
But it is closed, so we can't post moves with the tag in it.
Let's transform it into an external value.

task-4328721




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",gawa-odoo,2025-01-14 10:24:55+00:00,[],2025-02-07 15:03:48+00:00,,https://github.com/odoo/odoo/pull/193529,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589542868, 'issue_id': 2786772999, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193529.png)](https://mergebot.odoo.com/odoo/odoo/pull/193529)', 'created_at': datetime.datetime(2025, 1, 14, 10, 25, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:25:50 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193529.png)](https://mergebot.odoo.com/odoo/odoo/pull/193529)

"
2786772279,pull_request,closed,,[FIX] account: avoid ORM hacks,,william-andre,2025-01-14 10:24:44+00:00,[],2025-02-06 14:31:08+00:00,2025-02-06 14:31:08+00:00,https://github.com/odoo/odoo/pull/193528,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589540196, 'issue_id': 2786772279, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193528.png)](https://mergebot.odoo.com/odoo/odoo/pull/193528)', 'created_at': datetime.datetime(2025, 1, 14, 10, 24, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631547469, 'issue_id': 2786772279, 'author': 'william-andre', 'body': '@kmagusiak All green!', 'created_at': datetime.datetime(2025, 2, 3, 16, 53, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636678549, 'issue_id': 2786772279, 'author': 'rco-odoo', 'body': '@robodoo rebase-ff r+', 'created_at': datetime.datetime(2025, 2, 5, 12, 40, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636678703, 'issue_id': 2786772279, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 5, 12, 40, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2636800060, 'issue_id': 2786772279, 'author': 'robodoo', 'body': '@william-andre @rco-odoo staging failed: ci/l10n on 301d2c6c7dec88774e4751e7c3a8660def32b229 (view more at https://runbot.odoo.com/runbot/build/74533919)', 'created_at': datetime.datetime(2025, 2, 5, 13, 2, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639738900, 'issue_id': 2786772279, 'author': 'rco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 12, 48, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:24:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193528.png)](https://mergebot.odoo.com/odoo/odoo/pull/193528)

william-andre (Issue Creator) on (2025-02-03 16:53:20 UTC): @kmagusiak All green!

rco-odoo on (2025-02-05 12:40:13 UTC): @robodoo rebase-ff r+

robodoo on (2025-02-05 12:40:15 UTC): Merge method set to rebase and fast-forward.

robodoo on (2025-02-05 13:02:35 UTC): @william-andre @rco-odoo staging failed: ci/l10n on 301d2c6c7dec88774e4751e7c3a8660def32b229 (view more at https://runbot.odoo.com/runbot/build/74533919)

rco-odoo on (2025-02-06 12:48:56 UTC): @robodoo r+

"
2786770183,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-14 10:23:40+00:00,[],2025-01-28 13:59:15+00:00,2025-01-14 13:59:07+00:00,https://github.com/odoo/odoo/pull/193527,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589537909, 'issue_id': 2786770183, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193527.png)](https://mergebot.odoo.com/odoo/odoo/pull/193527)', 'created_at': datetime.datetime(2025, 1, 14, 10, 23, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589537938, 'issue_id': 2786770183, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 23, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:23:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193527.png)](https://mergebot.odoo.com/odoo/odoo/pull/193527)

fw-bot (Issue Creator) on (2025-01-14 10:23:42 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786764607,pull_request,closed,,[FW][FIX] point_of_sale: ensure invoice is paid when invoicing,"Before this commit, if a payment method requiring customer identification was used for an order in Point of Sale but the order was not immediately invoiced, closing the session and later invoicing the order in a new session would result in the invoice being marked as unpaid.

opw-4292231

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#187759",fw-bot,2025-01-14 10:21:11+00:00,[],2025-01-28 13:59:15+00:00,2025-01-14 13:59:11+00:00,https://github.com/odoo/odoo/pull/193526,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589532046, 'issue_id': 2786764607, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193526.png)](https://mergebot.odoo.com/odoo/odoo/pull/193526)', 'created_at': datetime.datetime(2025, 1, 14, 10, 21, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589532083, 'issue_id': 2786764607, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 10, 21, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:21:13 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193526.png)](https://mergebot.odoo.com/odoo/odoo/pull/193526)

fw-bot (Issue Creator) on (2025-01-14 10:21:14 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786764109,pull_request,open,,[IMP] web_editor: apply bg-color on connection shape,"The purpose of this commit is to apply a bg-color on 'connection' shape based on the next snippet bg-color to have a smooth transition.
When the connection is flipped the bg-color will be determined by the previous snippet instead of the next.
The shape bg-color is recomputed when it's related snippet bg-color changes.
A test that check the different situations is also added.

task-4280426",dery-odoo,2025-01-14 10:20:56+00:00,[],2025-02-07 11:31:03+00:00,,https://github.com/odoo/odoo/pull/193525,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589531484, 'issue_id': 2786764109, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193525.png)](https://mergebot.odoo.com/odoo/odoo/pull/193525)', 'created_at': datetime.datetime(2025, 1, 14, 10, 20, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:20:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193525.png)](https://mergebot.odoo.com/odoo/odoo/pull/193525)

"
2786756314,pull_request,closed,,[FIX] account: ignore account type constraint on imports,"The constraint on account types is too rigid when importing moves from an outside source. These moves represent historical data and should not prevent users from importing it into Odoo.

The solution is to ignore the constraint when a dedicated context key is present.

task-4465663

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",epictete,2025-01-14 10:17:06+00:00,[],2025-02-05 14:38:20+00:00,2025-02-05 14:37:23+00:00,https://github.com/odoo/odoo/pull/193524,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589523532, 'issue_id': 2786756314, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193524.png)](https://mergebot.odoo.com/odoo/odoo/pull/193524)', 'created_at': datetime.datetime(2025, 1, 14, 10, 17, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2637030064, 'issue_id': 2786756314, 'author': 'epictete', 'body': 'Ignoring the constraint was redundant with the changes done in Enterprise.\r\nClosing this PR.', 'created_at': datetime.datetime(2025, 2, 5, 14, 37, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:17:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193524.png)](https://mergebot.odoo.com/odoo/odoo/pull/193524)

epictete (Issue Creator) on (2025-02-05 14:37:23 UTC): Ignoring the constraint was redundant with the changes done in Enterprise.
Closing this PR.

"
2786754749,pull_request,closed,,[FIX] hr_attendance: negative overtime for flexible employee,"Steps to reproduce:
1. Set a flexible working schedule with 40h / week and 8h / day for an employee
2. Record an attendance for the employee
3. Go to reporting, the expected hours is the same as the worked hours

Expected behavior:
The expected hours should be what was set in the schedule, which is 8 hours

Explanation:
The calculation of expected hours is based on the difference between overtime hours and worked hours. This is done to ensure the overtimes are always computed correctly. However if the overtime duration is negative, it is not taken into account in `_update_overtime`. This commit allows negative amounts for overtime hours.

opw-4388707


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",khah-odoo,2025-01-14 10:16:20+00:00,[],2025-02-06 11:46:50+00:00,2025-01-23 11:40:44+00:00,https://github.com/odoo/odoo/pull/193523,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589521751, 'issue_id': 2786754749, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193523.png)](https://mergebot.odoo.com/odoo/odoo/pull/193523)', 'created_at': datetime.datetime(2025, 1, 14, 10, 16, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:16:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193523.png)](https://mergebot.odoo.com/odoo/odoo/pull/193523)

"
2786753466,pull_request,closed,,[17.0][IMP] l10n_jp: Set 'round_globally' as the default tax rounding method,"Under Japan’s Qualified Invoice System, which took effect in October 2023, the consumption tax amount should be calculated and rounded based on the total invoice amount for each tax rate, rather than on an item-by-item basis.

See https://www.pwc.com/jp/en/taxnews/pdf/jtu-20221111-en.pdf

@qrtl

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",yostashiro,2025-01-14 10:15:42+00:00,[],2025-01-14 15:28:59+00:00,2025-01-14 15:28:59+00:00,https://github.com/odoo/odoo/pull/193522,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2589520415, 'issue_id': 2786753466, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193522.png)](https://mergebot.odoo.com/odoo/odoo/pull/193522)', 'created_at': datetime.datetime(2025, 1, 14, 10, 15, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589723609, 'issue_id': 2786753466, 'author': 'jco-odoo', 'body': 'I suppose you refer to :\r\n\r\nTotal consumption tax amount by tax\r\nrate (the JCT amount must be rounded on\r\nthe total invoice JCT amount per tax rate,\r\nnot item-by-item', 'created_at': datetime.datetime(2025, 1, 14, 11, 56, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589723777, 'issue_id': 2786753466, 'author': 'jco-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 11, 56, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589724025, 'issue_id': 2786753466, 'author': 'jco-odoo', 'body': 'cc @vin-odoo', 'created_at': datetime.datetime(2025, 1, 14, 11, 56, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:15:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193522.png)](https://mergebot.odoo.com/odoo/odoo/pull/193522)

jco-odoo on (2025-01-14 11:56:43 UTC): I suppose you refer to :

Total consumption tax amount by tax
rate (the JCT amount must be rounded on
the total invoice JCT amount per tax rate,
not item-by-item

jco-odoo on (2025-01-14 11:56:48 UTC): @robodoo r+

jco-odoo on (2025-01-14 11:56:58 UTC): cc @vin-odoo

"
2786739736,pull_request,closed,,[FIX] html_editor: powerbox scroll and hover when document in iframe,"Have the edited document in an iframe.
Spawn the Powerbox, Scroll the powerbox.

Without letting the mouse out of the powerbox, try to hover a command

Before this commit, this did not work. It was because of a piece of code that prevents selection of commands during scrolling, probably to avoid re-renders.

After this commit, this use case works as expected.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kebeclibre,2025-01-14 10:08:49+00:00,[],2025-02-01 17:47:24+00:00,2025-01-18 16:15:59+00:00,https://github.com/odoo/odoo/pull/193521,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589506064, 'issue_id': 2786739736, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193521.png)](https://mergebot.odoo.com/odoo/odoo/pull/193521)', 'created_at': datetime.datetime(2025, 1, 14, 10, 8, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599743790, 'issue_id': 2786739736, 'author': 'FrancoisGe', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 18, 14, 40, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:08:53 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193521.png)](https://mergebot.odoo.com/odoo/odoo/pull/193521)

FrancoisGe on (2025-01-18 14:40:23 UTC): @robodoo r+

"
2786734810,pull_request,closed,,[IMP] mail: move activity model to common,,phenix-factory,2025-01-14 10:06:25+00:00,[],2025-01-16 10:00:32+00:00,2025-01-16 10:00:32+00:00,https://github.com/odoo/odoo/pull/193520,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589500924, 'issue_id': 2786734810, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193520.png)](https://mergebot.odoo.com/odoo/odoo/pull/193520)', 'created_at': datetime.datetime(2025, 1, 14, 10, 6, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 10:06:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193520.png)](https://mergebot.odoo.com/odoo/odoo/pull/193520)

"
2786714451,pull_request,closed,,[FW][FIX] stock: reset `final_barcode` template variable,"**Problem**:
When `lot['lot_record'].product_id.valid_ean` is `False`, the `final_barcode` variable retains the value from the previous iteration. This leads to incorrect concatenation with the current `lot['name']` when `lot['lot_record'].product_id.tracking == 'lot'`.

**Solution**:
Reset the `final_barcode` variable at the start of each iteration.

**Steps to Reproduce**:
1. Go to Inventory > Settings and enable ""Print GS1 Barcodes for Lots & Serial Numbers"".
2. Navigate to Inventory > Products > Lots/Serial Numbers.
3. Select all records and click Print > Lot/Serial Number (ZPL).
4. Observe that some barcodes incorrectly include the previous barcode as a prefix.

opw-4437745

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192651",fw-bot,2025-01-14 09:56:24+00:00,[],2025-01-31 11:44:11+00:00,2025-01-17 11:15:04+00:00,https://github.com/odoo/odoo/pull/193519,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2589479536, 'issue_id': 2786714451, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193519.png)](https://mergebot.odoo.com/odoo/odoo/pull/193519)', 'created_at': datetime.datetime(2025, 1, 14, 9, 56, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589479560, 'issue_id': 2786714451, 'author': 'fw-bot', 'body': '@walidsahli @Whenrow cherrypicking of pull request odoo/odoo#192651 failed.\n\nstdout:\n```\nAuto-merging addons/stock/report/product_templates.xml\nCONFLICT (content): Merge conflict in addons/stock/report/product_templates.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 9, 56, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595886565, 'issue_id': 2786714451, 'author': 'walidsahli', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 14, 32, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2596085517, 'issue_id': 2786714451, 'author': 'robodoo', 'body': ""@walidsahli @Whenrow 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 16, 15, 51, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:56:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193519.png)](https://mergebot.odoo.com/odoo/odoo/pull/193519)

fw-bot (Issue Creator) on (2025-01-14 09:56:26 UTC): @walidsahli @Whenrow cherrypicking of pull request odoo/odoo#192651 failed.

stdout:
```
Auto-merging addons/stock/report/product_templates.xml
CONFLICT (content): Merge conflict in addons/stock/report/product_templates.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

walidsahli on (2025-01-16 14:32:02 UTC): @robodoo r+

robodoo on (2025-01-16 15:51:10 UTC): @walidsahli @Whenrow 'ci/runbot' failed on this reviewed PR.

"
2786712262,pull_request,closed,,[FW][FIX] web_tour: checkForUndeterminisms must throw error,"The function checkForUndeterminisms in the TourStepAutomatic class throws an error in the case where an indeterminism is found. However, in the TourAutomatic class, we used this.throwError which throws the error but does not stop the macro (Does not go through the stop method of the Macro class). As a result, the observable is not disconnected and the macro is not stopped properly.
In this commit, we make sure that the macro is stopped properly.

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193405
Forward-Port-Of: odoo/odoo#192895",fw-bot,2025-01-14 09:55:21+00:00,[],2025-01-28 15:37:15+00:00,2025-01-14 15:27:29+00:00,https://github.com/odoo/odoo/pull/193518,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2589477389, 'issue_id': 2786712262, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193518.png)](https://mergebot.odoo.com/odoo/odoo/pull/193518)', 'created_at': datetime.datetime(2025, 1, 14, 9, 55, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589477409, 'issue_id': 2786712262, 'author': 'fw-bot', 'body': '@pipu-odoo @BastienFafchamps this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 9, 55, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589517356, 'issue_id': 2786712262, 'author': 'pipu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 10, 14, 17, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:55:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193518.png)](https://mergebot.odoo.com/odoo/odoo/pull/193518)

fw-bot (Issue Creator) on (2025-01-14 09:55:23 UTC): @pipu-odoo @BastienFafchamps this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pipu-odoo on (2025-01-14 10:14:17 UTC): @robodoo r+

"
2786680703,pull_request,closed,,[FIX] hr_timesheet: make default measures translatable,"In the Tasks' and Tasks Analysis' chart and pivot views, some default measures were not translatable after [this commit]. The [previous fix] only solved one case.

We make them translatable again here so they can be localized.

[this commit]: https://github.com/odoo/odoo/commit/e82567f9d5842bd95fe01ba3b9f54a65437e313f
[previous fix]: https://github.com/odoo/odoo/commit/e7381c3a09014567a8bdb0802c6964cc35ffddd2

[opw-4421055](https://www.odoo.com/odoo/project.task/4421055)",dylankiss,2025-01-14 09:39:58+00:00,[],2025-01-28 15:37:14+00:00,2025-01-14 15:24:25+00:00,https://github.com/odoo/odoo/pull/193517,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589445319, 'issue_id': 2786680703, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193517.png)](https://mergebot.odoo.com/odoo/odoo/pull/193517)', 'created_at': datetime.datetime(2025, 1, 14, 9, 40, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589447681, 'issue_id': 2786680703, 'author': 'dylankiss', 'body': '@robodoo up to 18.0', 'created_at': datetime.datetime(2025, 1, 14, 9, 41, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589447792, 'issue_id': 2786680703, 'author': 'robodoo', 'body': ""Forward-porting to '18.0'."", 'created_at': datetime.datetime(2025, 1, 14, 9, 41, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589459055, 'issue_id': 2786680703, 'author': 'MissingNoShiny', 'body': 'LGTM, thanks for the fix!\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 46, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:40:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193517.png)](https://mergebot.odoo.com/odoo/odoo/pull/193517)

dylankiss (Issue Creator) on (2025-01-14 09:41:11 UTC): @robodoo up to 18.0

robodoo on (2025-01-14 09:41:13 UTC): Forward-porting to '18.0'.

MissingNoShiny on (2025-01-14 09:46:32 UTC): LGTM, thanks for the fix!
robodoo r+

"
2786657458,pull_request,closed,,[FIX] mail: broken live call participant badge,"Before this commit the `LIVE` badge on the minimized call participant card had some styling issues. This was caused by missing padding on the related div tag and non-transparent background on the parent tag. This commit fixes the issue by introducing some padding and removing the css class that adds background opacity.

Before:
![Pasted image 20250113125543](https://github.com/user-attachments/assets/37573b8b-2ec1-4004-8171-3ff35655edc2)
![Pasted image 20250113152305](https://github.com/user-attachments/assets/2c7bda9c-23ec-4f09-b5ba-0afb9907e3ad)



After:
![image](https://github.com/user-attachments/assets/b2f6c159-7713-46d9-990a-817c6d4ec317)
![image](https://github.com/user-attachments/assets/f03e9072-85a1-4a11-bf4a-78aca68342c7)
",Atovange,2025-01-14 09:28:13+00:00,[],2025-01-14 15:19:06+00:00,2025-01-14 15:13:14+00:00,https://github.com/odoo/odoo/pull/193516,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589421202, 'issue_id': 2786657458, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193516.png)](https://mergebot.odoo.com/odoo/odoo/pull/193516)', 'created_at': datetime.datetime(2025, 1, 14, 9, 28, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589650770, 'issue_id': 2786657458, 'author': 'robodoo', 'body': '@alexkuhn draft PRs can not be approved.', 'created_at': datetime.datetime(2025, 1, 14, 11, 18, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589671620, 'issue_id': 2786657458, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 11, 29, 36, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:28:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193516.png)](https://mergebot.odoo.com/odoo/odoo/pull/193516)

robodoo on (2025-01-14 11:18:22 UTC): @alexkuhn draft PRs can not be approved.

alexkuhn on (2025-01-14 11:29:36 UTC): @robodoo r+

"
2786627586,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-14 09:13:42+00:00,[],2025-01-28 15:37:05+00:00,2025-01-14 15:23:30+00:00,https://github.com/odoo/odoo/pull/193515,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589390444, 'issue_id': 2786627586, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193515.png)](https://mergebot.odoo.com/odoo/odoo/pull/193515)', 'created_at': datetime.datetime(2025, 1, 14, 9, 13, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589390465, 'issue_id': 2786627586, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 9, 13, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:13:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193515.png)](https://mergebot.odoo.com/odoo/odoo/pull/193515)

fw-bot (Issue Creator) on (2025-01-14 09:13:44 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786626259,pull_request,closed,,[FIX] pos_restaurant: split decimal orderline,"Fixes an issue where splitting an order line with a decimal quantity (e.g., 2.5) would cause indefinite increments in the split bill screen. This adds a check to ensure the split quantity does not exceed the original order line quantity.

task-id: 4461861

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",manv-afk,2025-01-14 09:12:59+00:00,[],2025-01-29 15:01:31+00:00,2025-01-15 14:34:02+00:00,https://github.com/odoo/odoo/pull/193514,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589389142, 'issue_id': 2786626259, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193514.png)](https://mergebot.odoo.com/odoo/odoo/pull/193514)', 'created_at': datetime.datetime(2025, 1, 14, 9, 13, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:13:02 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193514.png)](https://mergebot.odoo.com/odoo/odoo/pull/193514)

"
2786615746,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-14 09:07:24+00:00,[],2025-01-28 15:36:55+00:00,2025-01-14 15:13:11+00:00,https://github.com/odoo/odoo/pull/193512,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2589377758, 'issue_id': 2786615746, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193512.png)](https://mergebot.odoo.com/odoo/odoo/pull/193512)', 'created_at': datetime.datetime(2025, 1, 14, 9, 7, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589377790, 'issue_id': 2786615746, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 14, 9, 7, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 09:07:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193512.png)](https://mergebot.odoo.com/odoo/odoo/pull/193512)

fw-bot (Issue Creator) on (2025-01-14 09:07:26 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2786590718,pull_request,closed,,[ADD] website_hr_recruitment_livechat: recruitment chatbot,"This commit adds a new module which contains a demo chatbot for the recruitment process. It is meant for salesman to demonstrate what the chatbot can do, with predefined answers.

task-3977869",romaincarlier4,2025-01-14 08:54:27+00:00,[],2025-02-04 08:45:40+00:00,2025-02-04 07:43:15+00:00,https://github.com/odoo/odoo/pull/193511,"[('RD', 'research & development, internal work'), ('18.2', None)]","[{'comment_id': 2589351626, 'issue_id': 2786590718, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193511.png)](https://mergebot.odoo.com/odoo/odoo/pull/193511)', 'created_at': datetime.datetime(2025, 1, 14, 8, 54, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2631216280, 'issue_id': 2786590718, 'author': 'tivisse', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 3, 14, 49, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:54:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193511.png)](https://mergebot.odoo.com/odoo/odoo/pull/193511)

tivisse on (2025-02-03 14:49:42 UTC): @robodoo r+

"
2786589549,pull_request,closed,,[IMP] hw_drivers: avoid handlers parent class registering,"Interfaces/Drivers inherit from an `Interface`/`Driver` class. These parent classes should not be registered as an actual interface/driver.
This is now filterered at instanciation in order to avoid looping over useless elements later.
",loouis-t,2025-01-14 08:53:52+00:00,[],2025-01-29 09:47:11+00:00,2025-01-15 09:42:04+00:00,https://github.com/odoo/odoo/pull/193510,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589350454, 'issue_id': 2786589549, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193510.png)](https://mergebot.odoo.com/odoo/odoo/pull/193510)', 'created_at': datetime.datetime(2025, 1, 14, 8, 53, 54, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:53:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193510.png)](https://mergebot.odoo.com/odoo/odoo/pull/193510)

"
2786574738,pull_request,closed,,[FIX] l10n_eg_edi_eta: remove rate for fixed taxes,"To comply with Egyptian tax law, we need to remove rate for fixed taxes when sending data to ETA.

Official docs say: ""if Channel = “ERP” OR Channel = “POS” and itemData[*].taxableItems[*].subType is fixed,
itemData[*].taxableItems[*].rate should be zero or omitted""

Source (point 36): https://sdk.invoicing.eta.gov.eg/main-calculations/

This fix ensure no values are sent for fixed tax type. Currently using null, which is invalid.

opw-4457780

",LouisGobert,2025-01-14 08:47:05+00:00,[],2025-02-07 17:26:23+00:00,2025-01-24 17:14:51+00:00,https://github.com/odoo/odoo/pull/193509,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589334375, 'issue_id': 2786574738, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193509.png)](https://mergebot.odoo.com/odoo/odoo/pull/193509)', 'created_at': datetime.datetime(2025, 1, 14, 8, 47, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612439070, 'issue_id': 2786574738, 'author': 'gawa-odoo', 'body': 'I think you need to rebase to avoid upgrade issues', 'created_at': datetime.datetime(2025, 1, 24, 12, 40, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612653790, 'issue_id': 2786574738, 'author': 'gawa-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 24, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:47:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193509.png)](https://mergebot.odoo.com/odoo/odoo/pull/193509)

gawa-odoo on (2025-01-24 12:40:08 UTC): I think you need to rebase to avoid upgrade issues

gawa-odoo on (2025-01-24 14:24:15 UTC): @robodoo r+

"
2786572062,pull_request,closed,,[FIX] website_blog: fix blog page breadcrumb with long text,"Steps to reproduce:

- Go to the ""/blog/astronomy-2/what-if-they-let-you-run-the-hubble-5"" page.
- Click on the ""Mobile Preview"" button.
- Bug: The breadcrumb is broken.

In stable versions, we fixed this in the least intrusive way possible to avoid making significant layout changes to existing databases.

**BEFORE:**
<kbd>![2025-01-14_09-44](https://github.com/user-attachments/assets/ee8ef4f9-eac4-48fd-857f-e28ccc58ae75)</kbd>

**AFTER:**
<kbd>![2025-01-14_09-53](https://github.com/user-attachments/assets/66ae36f9-2149-43ce-99d5-5d49a6605853)</kbd>

In master version, in mobile view, we replaced the breadcrumb with a ""< All Blogs"" button to return to the blogs list, similar to what is done in ""website_sale"" and ""website_event"".

opw-4457408
",bvr-odoo,2025-01-14 08:45:55+00:00,[],2025-01-28 11:10:13+00:00,2025-01-14 10:57:57+00:00,https://github.com/odoo/odoo/pull/193508,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589331768, 'issue_id': 2786572062, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193508.png)](https://mergebot.odoo.com/odoo/odoo/pull/193508)', 'created_at': datetime.datetime(2025, 1, 14, 8, 45, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589458200, 'issue_id': 2786572062, 'author': 'sobo-odoo', 'body': '@robodoo delegate=SergeBayet', 'created_at': datetime.datetime(2025, 1, 14, 9, 46, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589462101, 'issue_id': 2786572062, 'author': 'SergeBayet', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 47, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:45:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193508.png)](https://mergebot.odoo.com/odoo/odoo/pull/193508)

sobo-odoo on (2025-01-14 09:46:08 UTC): @robodoo delegate=SergeBayet

SergeBayet on (2025-01-14 09:47:55 UTC): @robodoo r+

"
2786570034,pull_request,closed,,[FIX] hr: fix archive banner z-index,"if an employee get archived the banner will appear behind the employee picture

Issue: the `--Ribbon-z-index: 1` var is removed from web/static because it overlap with something else

- move the widget after the div to have a higher z-index

Task: 4452394


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",amah-odoo,2025-01-14 08:44:53+00:00,[],2025-01-30 12:41:26+00:00,2025-01-16 12:05:08+00:00,https://github.com/odoo/odoo/pull/193507,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589329875, 'issue_id': 2786570034, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193507.png)](https://mergebot.odoo.com/odoo/odoo/pull/193507)', 'created_at': datetime.datetime(2025, 1, 14, 8, 44, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:44:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193507.png)](https://mergebot.odoo.com/odoo/odoo/pull/193507)

"
2786555804,pull_request,open,,[FIX] pos_loyalty: fix issue with loyalty points,"Lines from SO are taken into account when computing loyalty points leading to rewards being granted two times when importing an SO.

Taxes on discount rewards were also badly taken into account.

opw-4381890

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adgu-odoo,2025-01-14 08:37:12+00:00,[],2025-02-07 12:31:13+00:00,,https://github.com/odoo/odoo/pull/193506,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589315612, 'issue_id': 2786555804, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193506.png)](https://mergebot.odoo.com/odoo/odoo/pull/193506)', 'created_at': datetime.datetime(2025, 1, 14, 8, 37, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:37:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193506.png)](https://mergebot.odoo.com/odoo/odoo/pull/193506)

"
2786553111,pull_request,closed,,[IMP] iot_box_image: set version number automatically,"Before this PR, the IoT box version (e.g 25.01
for an image built in January 2025) was changed
manually whenever a new image was released.
After this PR, the version string is generated
automatically based on the date at build time.
Also, an unused `VERSION` variable was removed
from the build script.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",MaxTheWhale,2025-01-14 08:35:41+00:00,[],2025-01-29 16:28:23+00:00,2025-01-15 16:27:21+00:00,https://github.com/odoo/odoo/pull/193505,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589312761, 'issue_id': 2786553111, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193505.png)](https://mergebot.odoo.com/odoo/odoo/pull/193505)', 'created_at': datetime.datetime(2025, 1, 14, 8, 35, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589324475, 'issue_id': 2786553111, 'author': 'lse-odoo', 'body': '@MaxTheWhale \r\nWhy not automate this value with like `<current year % 2000>.<current month nbr>` ? Is there a good reason to hardcode it every single time ?', 'created_at': datetime.datetime(2025, 1, 14, 8, 42, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589362450, 'issue_id': 2786553111, 'author': 'MaxTheWhale', 'body': ""> @MaxTheWhale Why not automate this value with like `<current year % 2000>.<current month nbr>` ? Is there a good reason to hardcode it every single time ?\r\n\r\nGood idea, I'll do that instead"", 'created_at': datetime.datetime(2025, 1, 14, 8, 59, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:35:44 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193505.png)](https://mergebot.odoo.com/odoo/odoo/pull/193505)

lse-odoo on (2025-01-14 08:42:05 UTC): @MaxTheWhale 
Why not automate this value with like `<current year % 2000>.<current month nbr>` ? Is there a good reason to hardcode it every single time ?

MaxTheWhale (Issue Creator) on (2025-01-14 08:59:58 UTC): Good idea, I'll do that instead

"
2786531436,pull_request,open,,[FIX] bunch of fix after fp feedback,"This commit consists of:

Preset form
    - realingment
    - add tip in case of return mode without pricelist
    - add placeholder on pricelist and fp
    - Rename timing to time slots

Preset selection popup
    - reduce modal size

Slot selection popup
    - reput css rule to make slot button red if full, green if still available and future and secondary if past.

When clicking on a preset which is a return preset, the quantities already in the cart becomes negatives

Change bg-color and opacity of the quantity in cart span on the product_cards

Add time slot in the ticket screen:
    - white if future preset
    - orange if current preset
    - red if past preset

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",adgu-odoo,2025-01-14 08:23:21+00:00,[],2025-01-14 09:51:23+00:00,,https://github.com/odoo/odoo/pull/193504,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589290201, 'issue_id': 2786531436, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193504.png)](https://mergebot.odoo.com/odoo/odoo/pull/193504)', 'created_at': datetime.datetime(2025, 1, 14, 8, 23, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:23:25 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193504.png)](https://mergebot.odoo.com/odoo/odoo/pull/193504)

"
2786528676,pull_request,closed,,[FIX] point_of_sale: restore category filtering when searching,"Before this commit, it wasn't possible to filter products by category when searching. This functionality was available in previous versions but was removed during refactoring.

opw-4439314

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",pedrambiria,2025-01-14 08:21:43+00:00,[],2025-02-06 19:17:25+00:00,2025-02-06 19:17:25+00:00,https://github.com/odoo/odoo/pull/193503,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589287207, 'issue_id': 2786528676, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193503.png)](https://mergebot.odoo.com/odoo/odoo/pull/193503)', 'created_at': datetime.datetime(2025, 1, 14, 8, 21, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:21:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193503.png)](https://mergebot.odoo.com/odoo/odoo/pull/193503)

"
2786527335,pull_request,closed,,[FIX] repair: show recycle lines in repair order report,"Description of the issue/feature this PR addresses:
The ""Recycle"" repair type wasn't integrated properly into the report template
Current behavior before PR:
Repair lines with ""Recycle"" type create empty lines on the repair order report
![grafik](https://github.com/user-attachments/assets/20ffc739-d14d-4f3b-adfe-73b36fa42938)
![grafik](https://github.com/user-attachments/assets/157bd99f-e1ff-4c3b-a89d-7b67284e336b)
Desired behavior after PR is merged:
Repair lines with ""Recycle"" type have their product description printed on the report


---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",AlienAtSystem,2025-01-14 08:20:55+00:00,[],2025-01-27 16:30:30+00:00,2025-01-27 16:30:30+00:00,https://github.com/odoo/odoo/pull/193502,[],"[{'comment_id': 2589285853, 'issue_id': 2786527335, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193502.png)](https://mergebot.odoo.com/odoo/odoo/pull/193502)', 'created_at': datetime.datetime(2025, 1, 14, 8, 20, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615852823, 'issue_id': 2786527335, 'author': 'ticodoo', 'body': 'Thanks!\r\n\r\n@robodoo squash r+', 'created_at': datetime.datetime(2025, 1, 27, 14, 5, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615852972, 'issue_id': 2786527335, 'author': 'robodoo', 'body': 'Merge method set to squash.', 'created_at': datetime.datetime(2025, 1, 27, 14, 5, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:20:58 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193502.png)](https://mergebot.odoo.com/odoo/odoo/pull/193502)

ticodoo on (2025-01-27 14:05:06 UTC): Thanks!

@robodoo squash r+

robodoo on (2025-01-27 14:05:09 UTC): Merge method set to squash.

"
2786517558,pull_request,closed,,[IMP] l10n_tr_nilvera: security improvement,"Renaming session to __session leverages Python's name mangling and ensures the attribute is treated as a private to the class.
",alialfie,2025-01-14 08:15:04+00:00,[],2025-01-28 11:46:39+00:00,2025-01-14 11:35:35+00:00,https://github.com/odoo/odoo/pull/193501,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589275919, 'issue_id': 2786517558, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193501.png)](https://mergebot.odoo.com/odoo/odoo/pull/193501)', 'created_at': datetime.datetime(2025, 1, 14, 8, 15, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589443271, 'issue_id': 2786517558, 'author': 'robodoo', 'body': '@beledouxdenis you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 14, 9, 39, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589445633, 'issue_id': 2786517558, 'author': 'beledouxdenis', 'body': 'robodoo override=ci/security', 'created_at': datetime.datetime(2025, 1, 14, 9, 40, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:15:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193501.png)](https://mergebot.odoo.com/odoo/odoo/pull/193501)

robodoo on (2025-01-14 09:39:02 UTC): @beledouxdenis you may want to rebuild or fix this PR as it has failed CI.

beledouxdenis on (2025-01-14 09:40:11 UTC): robodoo override=ci/security

"
2786499565,pull_request,closed,,[FIX] 16.0 l10n_es_edi_tbai prevent ZeroDivisionError,"[FIX] l10n_es_edi_tbai prevent ZeroDivisionError when invoice line quantity is zero

Current behavior before PR:

If any invoice line quantity is zero, ZeroDivisionError: float division by zero is raised when trying to post the account edi document to the tax agency.

Desired behavior after PR is merged:

No error is raised and the account edi document related to the invoice is sent to the tax agency.

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",uolaizola,2025-01-14 08:04:18+00:00,[],2025-01-29 10:23:05+00:00,2025-01-14 16:45:04+00:00,https://github.com/odoo/odoo/pull/193500,"[('Localization', 'about adapting the content to a specify country (usually chart of accounts)')]","[{'comment_id': 2589257370, 'issue_id': 2786499565, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193500.png)](https://mergebot.odoo.com/odoo/odoo/pull/193500)', 'created_at': datetime.datetime(2025, 1, 14, 8, 4, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589973790, 'issue_id': 2786499565, 'author': 'rugo-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 50, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595186563, 'issue_id': 2786499565, 'author': 'rugo-odoo', 'body': '@robodoo fw=no', 'created_at': datetime.datetime(2025, 1, 16, 10, 46, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595186670, 'issue_id': 2786499565, 'author': 'robodoo', 'body': 'Disabled forward-porting.', 'created_at': datetime.datetime(2025, 1, 16, 10, 46, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 08:04:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193500.png)](https://mergebot.odoo.com/odoo/odoo/pull/193500)

rugo-odoo on (2025-01-14 13:50:38 UTC): @robodoo r+

rugo-odoo on (2025-01-16 10:46:48 UTC): @robodoo fw=no

robodoo on (2025-01-16 10:46:51 UTC): Disabled forward-porting.

"
2786467329,pull_request,closed,,[FIX] core: add_index needs a savepoint,"When there is a failure when adding an index, the ORM supposes a rollback is done in `add_index`, so the next SQL statement will fail because the current transaction is aborted.



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kmagusiak,2025-01-14 07:42:54+00:00,[],2025-01-16 12:37:50+00:00,2025-01-16 12:04:39+00:00,https://github.com/odoo/odoo/pull/193499,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589225694, 'issue_id': 2786467329, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193499.png)](https://mergebot.odoo.com/odoo/odoo/pull/193499)', 'created_at': datetime.datetime(2025, 1, 14, 7, 42, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594974733, 'issue_id': 2786467329, 'author': 'ryv-odoo', 'body': '@robodoo r+\r\nThx @kmagusiak', 'created_at': datetime.datetime(2025, 1, 16, 9, 17, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 07:42:57 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193499.png)](https://mergebot.odoo.com/odoo/odoo/pull/193499)

ryv-odoo on (2025-01-16 09:17:43 UTC): @robodoo r+
Thx @kmagusiak

"
2786427354,pull_request,open,,[FIX] html_editor: scroll to selection if needed,"**Problem**:
When the selection moves out of the viewport while typing, the user cannot see what they are typing.

**Solution**:
Automatically scroll to the selection if it moves out of the viewport.

**Steps to Reproduce**:
1. Open the editor.
2. Keep adding paragraphs by pressing Enter repeatedly.
3. When the selection goes out of the viewport, type some text.
   - The typed content is not visible.

opw-4356668

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",walidsahli,2025-01-14 07:15:26+00:00,[],2025-01-20 11:59:29+00:00,,https://github.com/odoo/odoo/pull/193498,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2589188044, 'issue_id': 2786427354, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193498.png)](https://mergebot.odoo.com/odoo/odoo/pull/193498)', 'created_at': datetime.datetime(2025, 1, 14, 7, 15, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 07:15:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193498.png)](https://mergebot.odoo.com/odoo/odoo/pull/193498)

"
2786346750,pull_request,closed,,[IMP] l10n_my_edi: Various improvements,"Brings various needed improvements to the module, either in place or
via a new extended module.

- Neutralization resets to pre-production
- Better handling of errors when generating the file by using the commercial partner
as expected.
- Align all the flows which update the invoice status to ensure that the data is
consistent.
- Improve validation for some special cases (lines without products, tax exemption)
- Add a new field for Malaysian TIN, mostly for foreign entities.
Will be used by default in all flows for MyInvois, with fallback on the Tax ID if empty.
- Classification code on invoice line, making the use of products optional.
- Rework the views for all fields related to ID on res.partner to align with other similar
fields. They will be Readonly on res.partner with a parent id, but displays the value of
the commercial partner.
- Industrial classification on the partner.
- ""Full"" support of self billing.
- Reworked flow to send to MyInvois BEFORE send & print. Which adds support for the
QR code generation, and new field to store the QR code long ID.
- Send & Print can no longer be used to send invoices to MyInvois after the new
module is installed

Task-4363294

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",vin-odoo,2025-01-14 06:11:21+00:00,[],2025-02-07 22:59:09+00:00,2025-01-24 22:53:53+00:00,https://github.com/odoo/odoo/pull/193497,"[('RD', 'research & development, internal work')]","[{'comment_id': 2589114406, 'issue_id': 2786346750, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193497.png)](https://mergebot.odoo.com/odoo/odoo/pull/193497)', 'created_at': datetime.datetime(2025, 1, 14, 6, 11, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612489730, 'issue_id': 2786346750, 'author': 'vin-odoo', 'body': ""@william-andre Thanks a lot for the review :star_struck: \r\nI have applied/replied to your comments.\r\n\r\nBefore pushing, I made sure that all my tests were green, and I also manually tested a few invoices/self-billed.\r\n\r\nPlease note that when you think this PR is ready to be merged, there is [one on IAP](https://github.com/odoo/iap-apps/pull/967) that also needs to be merged into production (it was already approved and has been on the test server for a week, so it's ready for prod)."", 'created_at': datetime.datetime(2025, 1, 24, 13, 6, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612551898, 'issue_id': 2786346750, 'author': 'Williambraecky', 'body': 'Upgrade exception [#484](https://runbot.odoo.com/odoo/runbot.upgrade.exception/484?menu_id=405) added.\r\n\r\nWaiting the forward-port of this pr, the exception will be applied on all builds, and create an inconsistent state for migrations.\r\n**Please forward port this asap up to master without change.** Exception should be forward-ported before the end of the week.\r\n\r\nPRs adding fields/models should be merged at the beginning of the week and all the forward ports should be merged in the same week.\r\n\r\nIf you need to apply any change before it reaches master, please notify runbot team.\r\n\r\nDetails:\r\n```\r\nmodule:l10n_my_edi_extended\r\n```\r\ncc @KangOl @nseinlet @aj-fuentes', 'created_at': datetime.datetime(2025, 1, 24, 13, 37, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612616596, 'issue_id': 2786346750, 'author': 'william-andre', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 14, 7, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612616718, 'issue_id': 2786346750, 'author': 'robodoo', 'body': '@william-andre you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 24, 14, 8, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612629495, 'issue_id': 2786346750, 'author': 'robodoo', 'body': ""@vin-odoo @william-andre 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 24, 14, 13, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612632684, 'issue_id': 2786346750, 'author': 'william-andre', 'body': '@robodoo r- delegate+\r\n\r\nWaiting for someone from IAP to merge on their side, otherwise potential :boom:', 'created_at': datetime.datetime(2025, 1, 24, 14, 14, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612675354, 'issue_id': 2786346750, 'author': 'william-andre', 'body': '@robodoo r+\r\n\r\nNot a high risk if IAP is not ready immediately, but would make it easier to merge the module on our side', 'created_at': datetime.datetime(2025, 1, 24, 14, 33, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2612675446, 'issue_id': 2786346750, 'author': 'robodoo', 'body': '@william-andre you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 1, 24, 14, 34, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-14 06:11:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193497.png)](https://mergebot.odoo.com/odoo/odoo/pull/193497)

vin-odoo (Issue Creator) on (2025-01-24 13:06:10 UTC): @william-andre Thanks a lot for the review :star_struck: 
I have applied/replied to your comments.

Before pushing, I made sure that all my tests were green, and I also manually tested a few invoices/self-billed.

Please note that when you think this PR is ready to be merged, there is [one on IAP](https://github.com/odoo/iap-apps/pull/967) that also needs to be merged into production (it was already approved and has been on the test server for a week, so it's ready for prod).

Williambraecky on (2025-01-24 13:37:54 UTC): Upgrade exception [#484](https://runbot.odoo.com/odoo/runbot.upgrade.exception/484?menu_id=405) added.

Waiting the forward-port of this pr, the exception will be applied on all builds, and create an inconsistent state for migrations.
**Please forward port this asap up to master without change.** Exception should be forward-ported before the end of the week.

PRs adding fields/models should be merged at the beginning of the week and all the forward ports should be merged in the same week.

If you need to apply any change before it reaches master, please notify runbot team.

Details:
```
module:l10n_my_edi_extended
```
cc @KangOl @nseinlet @aj-fuentes

william-andre on (2025-01-24 14:07:58 UTC): @robodoo r+

robodoo on (2025-01-24 14:08:01 UTC): @william-andre you may want to rebuild or fix this PR as it has failed CI.

robodoo on (2025-01-24 14:13:26 UTC): @vin-odoo @william-andre 'ci/runbot' failed on this reviewed PR.

william-andre on (2025-01-24 14:14:50 UTC): @robodoo r- delegate+

Waiting for someone from IAP to merge on their side, otherwise potential :boom:

william-andre on (2025-01-24 14:33:59 UTC): @robodoo r+

Not a high risk if IAP is not ready immediately, but would make it easier to merge the module on our side

robodoo on (2025-01-24 14:34:01 UTC): @william-andre you may want to rebuild or fix this PR as it has failed CI.

"
2785736895,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-13 23:33:23+00:00,[],2025-01-28 15:12:48+00:00,2025-01-14 15:12:51+00:00,https://github.com/odoo/odoo/pull/193496,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2588459001, 'issue_id': 2785736895, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193496.png)](https://mergebot.odoo.com/odoo/odoo/pull/193496)', 'created_at': datetime.datetime(2025, 1, 13, 23, 33, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588459018, 'issue_id': 2785736895, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 23, 33, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588476777, 'issue_id': 2785736895, 'author': 'fw-bot', 'body': '@ryce-odoo @Demesmaeker ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 13, 23, 56, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 23:33:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193496.png)](https://mergebot.odoo.com/odoo/odoo/pull/193496)

fw-bot (Issue Creator) on (2025-01-13 23:33:25 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 23:56:18 UTC): @ryce-odoo @Demesmaeker ci/runbot failed on this forward-port PR

"
2785623560,pull_request,closed,,[FIX] auth_ldap: add email on new res.partner,"Before this commit, when a new res.user is created after signing in with auth_ldap, there was no email on the linked res.partner, which may cause issues in modules such as helpdesk, where partner email is used to find related tickets.

res.users created through the form view will trigger the onchange which sets the 'email' = 'login', which does not happen when creating a user directly through the ORM.

This commit adds 'email' as a key which is returned by the method _map_ldap_attributes, which is used to create new partners with the correct email associated with the res.user login.

opw-4378487



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",jelu-odoo,2025-01-13 22:38:42+00:00,[],2025-01-29 14:31:55+00:00,2025-01-15 14:30:36+00:00,https://github.com/odoo/odoo/pull/193495,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2588373067, 'issue_id': 2785623560, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193495.png)](https://mergebot.odoo.com/odoo/odoo/pull/193495)', 'created_at': datetime.datetime(2025, 1, 13, 22, 38, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589298805, 'issue_id': 2785623560, 'author': 'flvr-odoo', 'body': ""I'm not familiar with the ldap module, are we 100% sure that all login are going to be a valid emails ? \r\nThe onchange in res_users has an explicit check that is not re-written here."", 'created_at': datetime.datetime(2025, 1, 14, 8, 28, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590771986, 'issue_id': 2785623560, 'author': 'jelu-odoo', 'body': ""@flvr-odoo Good point--not all logins from LDAP would be emails necessarily. I've kept the original dictionary in the updated commit, but added the same email regex check from the res.users onchange for the login. Let me know what you think, thanks!"", 'created_at': datetime.datetime(2025, 1, 14, 18, 16, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 22:38:45 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193495.png)](https://mergebot.odoo.com/odoo/odoo/pull/193495)

flvr-odoo on (2025-01-14 08:28:05 UTC): I'm not familiar with the ldap module, are we 100% sure that all login are going to be a valid emails ? 
The onchange in res_users has an explicit check that is not re-written here.

jelu-odoo (Issue Creator) on (2025-01-14 18:16:23 UTC): @flvr-odoo Good point--not all logins from LDAP would be emails necessarily. I've kept the original dictionary in the updated commit, but added the same email regex check from the res.users onchange for the login. Let me know what you think, thanks!

"
2785561445,pull_request,closed,,[FIX] hr_holidays: linked requests should use parent start/end hours,"steps to reproduce:
    
- create a leave with several employees and select 'custom hours'
- validate leave
- check linked leaves (one per employee)
    
 issue:
    
 - linked leaves do not use the parent start/date hours
    
note: 8bfd00e9325ffc490d1b470cecb38c75800b8a86 fixed the issue in 16.0 and the feature has been removed in 260b999922766668713c92418bf7431d465b532e in 17.4.
    
opw-4355770
",nda-odoo,2025-01-13 22:09:19+00:00,[],2025-02-04 10:30:25+00:00,2025-01-21 10:28:20+00:00,https://github.com/odoo/odoo/pull/193494,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2588325866, 'issue_id': 2785561445, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193494.png)](https://mergebot.odoo.com/odoo/odoo/pull/193494)', 'created_at': datetime.datetime(2025, 1, 13, 22, 9, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602507509, 'issue_id': 2785561445, 'author': 'Bertrand2', 'body': 'robodoo up to saas-17.2', 'created_at': datetime.datetime(2025, 1, 20, 14, 2, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2602507619, 'issue_id': 2785561445, 'author': 'robodoo', 'body': ""Forward-porting to 'saas-17.2'."", 'created_at': datetime.datetime(2025, 1, 20, 14, 2, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603011929, 'issue_id': 2785561445, 'author': 'nda-odoo', 'body': '@Bertrand2 Thanks for the review! It seems everything is OK, `work_days_data` is computed by employee.\r\n\r\nI tried the following:\r\n- set up a work schedule where Abigail only works on Friday morning from 8:00 to 12:00.\r\n- create a time off from 9:00 to 19:30 for Abigail and an other employee (Anita, 40h default schedule, from 8:00 to 17:00 with a one hour break)\r\n\r\n![2025-01-20_13-56_1](https://github.com/user-attachments/assets/7b591067-c2e9-44d3-8a86-e6bcabc33882)\r\n- checked the result, Abigail has a 3 hours time off and Anita a 7 hours time off and the start/end dates are the same as the original time-off.\r\n![2025-01-20_13-56](https://github.com/user-attachments/assets/c74a804e-f92a-4bca-9787-3b7d7d9e0be1)', 'created_at': datetime.datetime(2025, 1, 20, 18, 6, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603907818, 'issue_id': 2785561445, 'author': 'Bertrand2', 'body': 'Perfect! Thanks for checking\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 21, 8, 4, 46, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 22:09:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193494.png)](https://mergebot.odoo.com/odoo/odoo/pull/193494)

Bertrand2 on (2025-01-20 14:02:44 UTC): robodoo up to saas-17.2

robodoo on (2025-01-20 14:02:47 UTC): Forward-porting to 'saas-17.2'.

nda-odoo (Issue Creator) on (2025-01-20 18:06:58 UTC): @Bertrand2 Thanks for the review! It seems everything is OK, `work_days_data` is computed by employee.

I tried the following:
- set up a work schedule where Abigail only works on Friday morning from 8:00 to 12:00.
- create a time off from 9:00 to 19:30 for Abigail and an other employee (Anita, 40h default schedule, from 8:00 to 17:00 with a one hour break)

![2025-01-20_13-56_1](https://github.com/user-attachments/assets/7b591067-c2e9-44d3-8a86-e6bcabc33882)
- checked the result, Abigail has a 3 hours time off and Anita a 7 hours time off and the start/end dates are the same as the original time-off.
![2025-01-20_13-56](https://github.com/user-attachments/assets/c74a804e-f92a-4bca-9787-3b7d7d9e0be1)

Bertrand2 on (2025-01-21 08:04:46 UTC): Perfect! Thanks for checking
robodoo r+

"
2785515272,pull_request,closed,,"[FW][FIX] l10n_es_edi_{facturae,sii}: FechaOperacion / OperationDate","Currently the folllowing fields are not set / given in the SII / FaturaE XMLs respectively:
  * `FechaOperacion` (l10n_es_edi_sii)
  * `OperationDate` (l10n_es_edi_facturae)

After this commit they will give the delivery date in case the delivery date is different from the invoice date.

This is basically the same as it was done for TicketBat (l10n_es_edi_tbai) in commit 1451f589895f0867cd40add66e5e6bcbb5ba4a6e already.

opw-4367470

Enterprise PR: https://github.com/odoo/enterprise/pull/76523

Forward-Port-Of: odoo/odoo#193435
Forward-Port-Of: odoo/odoo#192467",fw-bot,2025-01-13 21:49:00+00:00,[],2025-01-28 15:37:18+00:00,2025-01-14 15:27:40+00:00,https://github.com/odoo/odoo/pull/193493,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2588291561, 'issue_id': 2785515272, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193493.png)](https://mergebot.odoo.com/odoo/odoo/pull/193493)', 'created_at': datetime.datetime(2025, 1, 13, 21, 49, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588291588, 'issue_id': 2785515272, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193487\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 21, 49, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588361005, 'issue_id': 2785515272, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 ci/upgrade_enterprise failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 13, 22, 31, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589590750, 'issue_id': 2785515272, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 this PR was modified / updated and has become a normal PR. It must be merged directly.', 'created_at': datetime.datetime(2025, 1, 14, 10, 48, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589759712, 'issue_id': 2785515272, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 14, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 21:49:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193493.png)](https://mergebot.odoo.com/odoo/odoo/pull/193493)

fw-bot (Issue Creator) on (2025-01-13 21:49:04 UTC): @svfu-odoo @RicGR98 this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193487

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 22:31:19 UTC): @svfu-odoo @RicGR98 ci/upgrade_enterprise failed on this forward-port PR

fw-bot (Issue Creator) on (2025-01-14 10:48:51 UTC): @svfu-odoo @RicGR98 this PR was modified / updated and has become a normal PR. It must be merged directly.

svfu-odoo on (2025-01-14 12:14:44 UTC): @robodoo r+

"
2785501143,pull_request,closed,,[FW][FIX] point_of_sale: no caba move during reconciliation,"The reconciliation of move lines creates a cash basis (caba) move under some conditions. This can i.e. happen for the PoS move during the closing of a session.

But the PoS move does not use the transition account of any used caba taxes but the ""real"" account directly (see commit a011dcc0bdbe892b0a505a6a4169c5168bd018f6). So there is no need for a caba move.
Further an exchange difference move for the tax amount may be created. The issue is that the tax amounts from the cash basis are not being matched correctly with the tax amounts from the PoS move (since we only look for the transition account on the PoS move).

Reproduce on runbot for l10n_mx
1. Install l10n_mx
2. Set the 'IVA 16% VENTAS' tax as Customer Taxes on a product. Set the Sales Price to 100.
3. Create a payment method and journal for the PoS 
    * Payment method: Cash on journal CSH1
    * Journal: POS
5. Create a PoS using the payment method and journal from the previous step.
6. Start a PoS session
7. Sell the product from step 2 via the Cash payment method.
8. Close the Session
9. The following journal entries will be created: (All the tax lines use the same tax account; the ""final"" and not the caba transition account) 
```
* 1 entry in the POS journal (order)
       base:       | - 100.0 $
       tax:        | -  16.0 $
       receivable: | + 116.0 $
     * 1 entry in the CSH1 journal (cash / payment)
       cash:       | + 116.0 $
       receivable: | - 116.0 $
     * 1 entry in the CBMX journal (caba)
       base:       | - 100.0 $
       base:       | + 100.0 $
       tax:        | -  16.0 $
       tax:        | +  16.0 $
     * 1 entry in the EXCH journal (exchange difference)
       for the cash basis rounding difference
       tax:        | -  16.0 $
       tax:        | +  16.0 $
```

This commit fixes the issue by just skipping the creation of caba moves during the reconciliation of the PoS move lines. Further we make sure no exchange difference entry is created for the (not even created) cash basis entries.

opw-4355124

Forward-Port-Of: odoo/odoo#193375
Forward-Port-Of: odoo/odoo#193195",fw-bot,2025-01-13 21:42:48+00:00,[],2025-01-28 12:07:50+00:00,2025-01-14 12:01:08+00:00,https://github.com/odoo/odoo/pull/193492,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2588280695, 'issue_id': 2785501143, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193492.png)](https://mergebot.odoo.com/odoo/odoo/pull/193492)', 'created_at': datetime.datetime(2025, 1, 13, 21, 42, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588280741, 'issue_id': 2785501143, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 cherrypicking of pull request odoo/odoo#193195 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_move_line.py\nCONFLICT (content): Merge conflict in addons/account/models/account_move_line.py\nAuto-merging addons/point_of_sale/models/pos_session.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 21, 42, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589575780, 'issue_id': 2785501143, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 10, 41, 33, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 21:42:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193492.png)](https://mergebot.odoo.com/odoo/odoo/pull/193492)

fw-bot (Issue Creator) on (2025-01-13 21:42:51 UTC): @svfu-odoo @RicGR98 cherrypicking of pull request odoo/odoo#193195 failed.

stdout:
```
Auto-merging addons/account/models/account_move_line.py
CONFLICT (content): Merge conflict in addons/account/models/account_move_line.py
Auto-merging addons/point_of_sale/models/pos_session.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

svfu-odoo on (2025-01-14 10:41:33 UTC): @robodoo r+

"
2785403127,pull_request,closed,,[FW][FIX] mail: correctly handle iOS push notifications,"iOS push notifications do not work on Safari: they only work in apps. The notifications are managed by the apps, whether with native mobile app or PWA.

With PWA, it should normally rely on `Notification.permission`, but somehow it doesn't work and always has value ""default"". Its showing has been limited to the PWA, but it keeps showing a persistent notification. Clicking on it the 1st time displays a prompt to either accept or deny the permissions. Afterwards, further clicks on the ""odoobot has a request"" automatically display ""granted"" or ""denied"" based on user initial choice.

iOS push permissions seem to necessarily rely on
`serviceWorker.getRegistration().pushManager`, which works only on HTTPS, hence why iOS push notifications do not work on HTTP. Also actual push permission state are correct there whereas on Notification.permission they are wrong.

This commit fixes the issue by computing the push notification permisssion state correctly on iOS, using
`serviceWorker.getRegistration().pushManager`.

opw-4391766

Backport of
https://github.com/odoo/odoo/pull/178057
https://github.com/odoo/odoo/pull/187038
https://github.com/odoo/odoo/pull/188258

Forward-Port-Of: odoo/odoo#193436
Forward-Port-Of: odoo/odoo#193257",fw-bot,2025-01-13 21:04:35+00:00,[],2025-01-13 21:05:46+00:00,2025-01-13 21:05:41+00:00,https://github.com/odoo/odoo/pull/193491,"[('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2588196437, 'issue_id': 2785403127, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193491.png)](https://mergebot.odoo.com/odoo/odoo/pull/193491)', 'created_at': datetime.datetime(2025, 1, 13, 21, 4, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588196459, 'issue_id': 2785403127, 'author': 'fw-bot', 'body': '@alexkuhn @zel-odoo cherrypicking of pull request odoo/odoo#193257 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/core/web/messaging_menu_patch.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/core/web/messaging_menu_patch.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 21, 4, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588198373, 'issue_id': 2785403127, 'author': 'alexkuhn', 'body': 'Already fixed in this version+', 'created_at': datetime.datetime(2025, 1, 13, 21, 5, 41, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 21:04:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193491.png)](https://mergebot.odoo.com/odoo/odoo/pull/193491)

fw-bot (Issue Creator) on (2025-01-13 21:04:37 UTC): @alexkuhn @zel-odoo cherrypicking of pull request odoo/odoo#193257 failed.

stdout:
```
Auto-merging addons/mail/static/src/core/web/messaging_menu_patch.js
CONFLICT (content): Merge conflict in addons/mail/static/src/core/web/messaging_menu_patch.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-13 21:05:41 UTC): Already fixed in this version+

"
2785377943,pull_request,closed,,[FW][IMP] *: remove uom categories and merge packaging into uom,"*: account, account_edi_ubl_cii, analytic, barcodes_gs1_nomenclature, delivery, event_product, hr_expense, hr_timesheet, l10n_ar, l10n_eg_edi_eta, l10n_es_edi_facturae, l10n_hu_edi, l10n_in, l10n_it_edi, l10n_it_stock_ddt, l10n_mx, l10n_us_account, mrp, mrp_subcontracting, mrp_subcontracting_account, mrp_subcontracting_dropshipping, point_of_sale, pos_discount, pos_loyalty, pos_restaurant, pos_sale, product, product_matrix, project_mrp_account, project_purchase, purchase, purchase_mrp, purchase_requisition, purchase_requisition_stock, purchase_stock, repair, sale, sale_expense, sale_management, sale_mrp, sale_project, sale_purchase, sale_stock, sale_timesheet, sale_timesheet_margin, stock, stock_account, stock_delivery, stock_dropshipping, stock_landed_costs, stock_picking_batch, uom, web, website_sale

This commit introduces major changes to units of measurement and product
packaging features:

### Removing UoM categories:
Previous to this commit, units were classified into categories such as
length, weight, etc. If the user defined a base unit for a product, any
movement on that product (stock move, order line, etc.) can be only done
in a unit in the same category of the base unit of the product. This
commit removes unit categories and the previously mentioned enforcement.
This is useful for some business cases that need more flexibility (for
example: buying from vendors in pieces and selling in kilograms, etc.).
To allow for some structure, a new field is added to `uom.uom` model to
define a reference unit for any unit. This will be explained further in
a later section.

### Merging `product.packaging` model into `uom.uom`:
Previous to this commit, users could activate packagings setting to be
able to define packagings for specific product. This caused some
confusion as there is no intrinsic difference between a packaging and a
unit. Another source of confusion is that `stock.move`,
`sale.order.line`, `purchase.order.line`, etc. had two different fields
for the unit and the packaging. They also had two different fields for
the quantity, one based on the unit of the line and the other based on
the packaging. This was confusing for some users and there was also some
technical complexity to mainatain the consistency between those fields.
This commit removes `product.packaging` model completely and all of its
related fields. If the user wants to define some packaging, they just
need to create a new unit and define its quantity (and optionally its
package type). Then, the user can make this packaging usable on some
product by adding it to the new many2many field ""Packagings"" `uom_ids`
on `product.template`. Users can also define one (or more) barcode for
the packaging of a specific product.

### Cleaning `uom.uom` model:
This commit removes some of the unnecessary fields on `uom.uom` model
after removing UoM categories. Category, type and color are no longer
needed. Ratio and inverse factor are also removed. Factors now are
defined a bit differently. Now, each unit can (optionally) have a
reference unit (`relative_uom_id`) on which the user-defined
factor (`relative_factor`) is based. Since the relative unit can have
another relative unit on its own, a hierarchy of units can be made.
Therefore, the absolute factor (`factor`) needs to be computed behind
the scenes to be used in quantity and conversion calculations. The
rounding field is also removed from `uom.uom` model because this
introduced some inconsistency with the decimal accuracy record ""Product
Unit of Measure"" defined on the system level. After this commit, all
conversions related to UoMs are rounded based on that value.

### Cleaning UoM data:
This commit makes some of the data units to be archived by default when
the `uom` module is installed, so that the list of units is not
cluttered with a lot of units that may not be needed by users.

### Misc. changes:
* This commit removes `uom_po_id` field from `product_template` and it
  should be replaced by the unit of the vendor on making a purchase
  order.
* `qty_multiple` field is removed from `stock.orderpoint` and replaced
  by `replenishment_uom_id`. The new field works in the same way, the
  generated replenishment should be in a multiple of the defined unit.
* Package types can now have its own routes.

Enterprise PR: odoo/enterprise#72206
Upgrade PR: odoo/upgrade#6629

Task-4252043

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#184131",fw-bot,2025-01-13 20:54:02+00:00,[],2025-01-28 10:30:31+00:00,2025-01-14 10:25:32+00:00,https://github.com/odoo/odoo/pull/193490,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2588177402, 'issue_id': 2785377943, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193490.png)](https://mergebot.odoo.com/odoo/odoo/pull/193490)', 'created_at': datetime.datetime(2025, 1, 13, 20, 54, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588177440, 'issue_id': 2785377943, 'author': 'fw-bot', 'body': '@mohammadhossam @amoyaux cherrypicking of pull request odoo/odoo#184131 failed.\n\n* 2f92dcc00a41f1cabb9e08b999573cf5dc5346b1 <- on this commit\n* 947d18a643424f6ac81fa69bfe154554a7601db6\n* 9439c7db9719e01a1eb1a84a24dd289c76df7ef9\n* 0259005d28bc257997df47a49a29c01d123fbabc\n* 31d251fcffc78e8846dbdeb0c127a73f2264094f\n* e36a5a4fc9cb259bd7783175ab98723119ecf4d5\n* e8f34044e1f768cc2eceabfe8cf61908ce4fdd70\n\nstdout:\n```\nAuto-merging addons/account/models/account_move_line.py\nAuto-merging addons/l10n_cl/data/uom_data.xml\nCONFLICT (content): Merge conflict in addons/l10n_cl/data/uom_data.xml\nAuto-merging addons/point_of_sale/models/pos_session.py\nAuto-merging addons/point_of_sale/views/product_view.xml\nAuto-merging addons/pos_sale/tests/test_pos_sale_flow.py\nAuto-merging addons/purchase_stock/models/purchase_order_line.py\nAuto-merging addons/sale_project/tests/test_sale_project_dashboard.py\nCONFLICT (content): Merge conflict in addons/sale_project/tests/test_sale_project_dashboard.py\nAuto-merging addons/sale_timesheet/models/product_template.py\nAuto-merging addons/sale_timesheet/tests/test_sale_timesheet_dashboard.py\nCONFLICT (content): Merge conflict in addons/sale_timesheet/tests/test_sale_timesheet_dashboard.py\nAuto-merging addons/uom/models/uom_uom.py\nCONFLICT (content): Merge conflict in addons/uom/models/uom_uom.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 20, 54, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589303646, 'issue_id': 2785377943, 'author': 'mohammadhossam', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 30, 44, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 20:54:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193490.png)](https://mergebot.odoo.com/odoo/odoo/pull/193490)

fw-bot (Issue Creator) on (2025-01-13 20:54:07 UTC): @mohammadhossam @amoyaux cherrypicking of pull request odoo/odoo#184131 failed.

* 2f92dcc00a41f1cabb9e08b999573cf5dc5346b1 <- on this commit
* 947d18a643424f6ac81fa69bfe154554a7601db6
* 9439c7db9719e01a1eb1a84a24dd289c76df7ef9
* 0259005d28bc257997df47a49a29c01d123fbabc
* 31d251fcffc78e8846dbdeb0c127a73f2264094f
* e36a5a4fc9cb259bd7783175ab98723119ecf4d5
* e8f34044e1f768cc2eceabfe8cf61908ce4fdd70

stdout:
```
Auto-merging addons/account/models/account_move_line.py
Auto-merging addons/l10n_cl/data/uom_data.xml
CONFLICT (content): Merge conflict in addons/l10n_cl/data/uom_data.xml
Auto-merging addons/point_of_sale/models/pos_session.py
Auto-merging addons/point_of_sale/views/product_view.xml
Auto-merging addons/pos_sale/tests/test_pos_sale_flow.py
Auto-merging addons/purchase_stock/models/purchase_order_line.py
Auto-merging addons/sale_project/tests/test_sale_project_dashboard.py
CONFLICT (content): Merge conflict in addons/sale_project/tests/test_sale_project_dashboard.py
Auto-merging addons/sale_timesheet/models/product_template.py
Auto-merging addons/sale_timesheet/tests/test_sale_timesheet_dashboard.py
CONFLICT (content): Merge conflict in addons/sale_timesheet/tests/test_sale_timesheet_dashboard.py
Auto-merging addons/uom/models/uom_uom.py
CONFLICT (content): Merge conflict in addons/uom/models/uom_uom.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

mohammadhossam on (2025-01-14 08:30:44 UTC): robodoo r+

"
2785302716,pull_request,closed,,[FW][FIX] point_of_sale: no caba move during reconciliation,"The reconciliation of move lines creates a cash basis (caba) move under some conditions. This can i.e. happen for the PoS move during the closing of a session.

But the PoS move does not use the transition account of any used caba taxes but the ""real"" account directly (see commit a011dcc0bdbe892b0a505a6a4169c5168bd018f6). So there is no need for a caba move.
Further an exchange difference move for the tax amount may be created. The issue is that the tax amounts from the cash basis are not being matched correctly with the tax amounts from the PoS move (since we only look for the transition account on the PoS move).

Reproduce on runbot for l10n_mx
1. Install l10n_mx
2. Set the 'IVA 16% VENTAS' tax as Customer Taxes on a product. Set the Sales Price to 100.
3. Create a payment method and journal for the PoS 
    * Payment method: Cash on journal CSH1
    * Journal: POS
5. Create a PoS using the payment method and journal from the previous step.
6. Start a PoS session
7. Sell the product from step 2 via the Cash payment method.
8. Close the Session
9. The following journal entries will be created: (All the tax lines use the same tax account; the ""final"" and not the caba transition account) 
```
* 1 entry in the POS journal (order)
       base:       | - 100.0 $
       tax:        | -  16.0 $
       receivable: | + 116.0 $
     * 1 entry in the CSH1 journal (cash / payment)
       cash:       | + 116.0 $
       receivable: | - 116.0 $
     * 1 entry in the CBMX journal (caba)
       base:       | - 100.0 $
       base:       | + 100.0 $
       tax:        | -  16.0 $
       tax:        | +  16.0 $
     * 1 entry in the EXCH journal (exchange difference)
       for the cash basis rounding difference
       tax:        | -  16.0 $
       tax:        | +  16.0 $
```

This commit fixes the issue by just skipping the creation of caba moves during the reconciliation of the PoS move lines. Further we make sure no exchange difference entry is created for the (not even created) cash basis entries.

opw-4355124

Forward-Port-Of: odoo/odoo#193375
Forward-Port-Of: odoo/odoo#193195",fw-bot,2025-01-13 20:23:26+00:00,[],2025-01-28 12:58:43+00:00,2025-01-14 12:37:52+00:00,https://github.com/odoo/odoo/pull/193489,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2588120336, 'issue_id': 2785302716, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193489.png)](https://mergebot.odoo.com/odoo/odoo/pull/193489)', 'created_at': datetime.datetime(2025, 1, 13, 20, 23, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588120353, 'issue_id': 2785302716, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 20, 23, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588280706, 'issue_id': 2785302716, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 the next pull request (odoo/odoo#193492) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 21, 42, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589276326, 'issue_id': 2785302716, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 15, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 20:23:27 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193489.png)](https://mergebot.odoo.com/odoo/odoo/pull/193489)

fw-bot (Issue Creator) on (2025-01-13 20:23:28 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 21:42:50 UTC): @svfu-odoo @RicGR98 the next pull request (odoo/odoo#193492) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

svfu-odoo on (2025-01-14 08:15:23 UTC): @robodoo r+

"
2785300661,pull_request,closed,,[FW][FIX] project: project grouped by stages now respects the pagination,"Steps to reproduce
==================

- Open any project
- Create many project stages (80+)
- Switch to the list view
- Group by stage
- Switch to to next page => The pager keeps increasing

Cause of the issue
==================

`stage_id` has a group_expand: `_read_group_stage_ids`

This method is used to include empty stages in the result for the kanban view, so that we can drag tasks to an empty stage.

Solution
========

Add a context key `project_kanban` and only add empty stages in that case.

opw-4408061

Forward-Port-Of: odoo/odoo#192955
Forward-Port-Of: odoo/odoo#192492",fw-bot,2025-01-13 20:22:38+00:00,[],2025-01-29 11:56:55+00:00,2025-01-15 11:53:16+00:00,https://github.com/odoo/odoo/pull/193488,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2588118932, 'issue_id': 2785300661, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193488.png)](https://mergebot.odoo.com/odoo/odoo/pull/193488)', 'created_at': datetime.datetime(2025, 1, 13, 20, 22, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588118952, 'issue_id': 2785300661, 'author': 'fw-bot', 'body': '@hubvd @xavierbol cherrypicking of pull request odoo/odoo#192492 failed.\n\nstdout:\n```\nAuto-merging addons/project/models/project_task.py\nAuto-merging addons/project/static/src/views/project_task_kanban/project_task_kanban_model.js\nCONFLICT (content): Merge conflict in addons/project/static/src/views/project_task_kanban/project_task_kanban_model.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 20, 22, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618740, 'issue_id': 2785300661, 'author': 'fw-bot', 'body': '@hubvd @xavierbol this forward port of odoo/odoo#192492 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591478330, 'issue_id': 2785300661, 'author': 'fw-bot', 'body': '@hubvd @xavierbol this forward port of odoo/odoo#192492 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2592173948, 'issue_id': 2785300661, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 9, 56, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 20:22:40 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193488.png)](https://mergebot.odoo.com/odoo/odoo/pull/193488)

fw-bot (Issue Creator) on (2025-01-13 20:22:40 UTC): @hubvd @xavierbol cherrypicking of pull request odoo/odoo#192492 failed.

stdout:
```
Auto-merging addons/project/models/project_task.py
Auto-merging addons/project/static/src/views/project_task_kanban/project_task_kanban_model.js
CONFLICT (content): Merge conflict in addons/project/static/src/views/project_task_kanban/project_task_kanban_model.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:19 UTC): @hubvd @xavierbol this forward port of odoo/odoo#192492 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-15 02:01:31 UTC): @hubvd @xavierbol this forward port of odoo/odoo#192492 is awaiting action (not merged or closed).

hubvd on (2025-01-15 09:56:05 UTC): @robodoo r+

"
2785296378,pull_request,closed,,"[FW][FIX] l10n_es_edi_{facturae,sii}: FechaOperacion / OperationDate","Currently the folllowing fields are not set / given in the SII / FaturaE XMLs respectively:
  * `FechaOperacion` (l10n_es_edi_sii)
  * `OperationDate` (l10n_es_edi_facturae)

After this commit they will give the delivery date in case the delivery date is different from the invoice date.

This is basically the same as it was done for TicketBat (l10n_es_edi_tbai) in commit 1451f589895f0867cd40add66e5e6bcbb5ba4a6e already.

opw-4367470

Enterprise PR: https://github.com/odoo/enterprise/pull/76523

Forward-Port-Of: odoo/odoo#193435
Forward-Port-Of: odoo/odoo#192467",fw-bot,2025-01-13 20:20:44+00:00,[],2025-01-28 10:13:53+00:00,2025-01-14 09:55:10+00:00,https://github.com/odoo/odoo/pull/193487,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2588115565, 'issue_id': 2785296378, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193487.png)](https://mergebot.odoo.com/odoo/odoo/pull/193487)', 'created_at': datetime.datetime(2025, 1, 13, 20, 20, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588115595, 'issue_id': 2785296378, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 20, 20, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589278182, 'issue_id': 2785296378, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 16, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 20:20:47 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193487.png)](https://mergebot.odoo.com/odoo/odoo/pull/193487)

fw-bot (Issue Creator) on (2025-01-13 20:20:48 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

svfu-odoo on (2025-01-14 08:16:28 UTC): @robodoo r+

"
2785291660,pull_request,closed,,[FW][FIX] loyalty: error when adding expiration date to loyalty card,"Expiration dates on loyalty cards are available to be used, but do notdo anything. Added a validation error when expiration dates are added to loyalty cards to warn about this.

opw-3997339

Forward-Port-Of: odoo/odoo#171453",fw-bot,2025-01-13 20:18:44+00:00,[],2025-01-28 15:37:25+00:00,2025-01-14 15:28:32+00:00,https://github.com/odoo/odoo/pull/193486,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2588112001, 'issue_id': 2785291660, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193486.png)](https://mergebot.odoo.com/odoo/odoo/pull/193486)', 'created_at': datetime.datetime(2025, 1, 13, 20, 18, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588112029, 'issue_id': 2785291660, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 20, 18, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588257904, 'issue_id': 2785291660, 'author': 'fw-bot', 'body': '@ryce-odoo @Demesmaeker ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 13, 21, 30, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 20:18:46 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193486.png)](https://mergebot.odoo.com/odoo/odoo/pull/193486)

fw-bot (Issue Creator) on (2025-01-13 20:18:47 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 21:30:26 UTC): @ryce-odoo @Demesmaeker ci/runbot failed on this forward-port PR

"
2785196346,pull_request,closed,,[FW][FIX] website_sale_loyalty: validate rewards before payment,"Versions
--------
- 16.0+

Steps
-----
1. Have a payment provider like Demo published;
2. create a discount program that expired yesterday;
3. change time of PC to yesterday;
4. go to eCommerce, add product to cart, go to checkout;
5. follow steps until you get to the ""Pay Now"" button;
6. change time of PC to today;
7. finalize payment.

Issue
-----
The payment transaction proceeds, but doesn't cover the entire amount, as the promotion was removed afterwards.

Cause
-----
When initiating payment, there's check on whether the applied rewards are still valid.

Solution
--------
Add an override for `_validate_transaction_for_order`, which compares the order amount before and after updating programs & rewards.

If they don't match, raise a `ValidationError`, forcing the user reload the order without expired programs & rewards.

opw-4304241

Forward-Port-Of: odoo/odoo#193415
Forward-Port-Of: odoo/odoo#191256",fw-bot,2025-01-13 19:49:02+00:00,[],2025-01-28 15:37:05+00:00,2025-01-14 15:23:34+00:00,https://github.com/odoo/odoo/pull/193485,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2588055275, 'issue_id': 2785196346, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193485.png)](https://mergebot.odoo.com/odoo/odoo/pull/193485)', 'created_at': datetime.datetime(2025, 1, 13, 19, 49, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588055294, 'issue_id': 2785196346, 'author': 'fw-bot', 'body': '@lvsz cherrypicking of pull request odoo/odoo#191256 failed.\n\nstdout:\n```\nAuto-merging addons/website_sale_loyalty/i18n/website_sale_loyalty.pot\nAuto-merging addons/website_sale_loyalty/tests/__init__.py\nCONFLICT (content): Merge conflict in addons/website_sale_loyalty/tests/__init__.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 19, 49, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588619357, 'issue_id': 2785196346, 'author': 'fw-bot', 'body': '@lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589714318, 'issue_id': 2785196346, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 11, 51, 37, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 19:49:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193485.png)](https://mergebot.odoo.com/odoo/odoo/pull/193485)

fw-bot (Issue Creator) on (2025-01-13 19:49:04 UTC): @lvsz cherrypicking of pull request odoo/odoo#191256 failed.

stdout:
```
Auto-merging addons/website_sale_loyalty/i18n/website_sale_loyalty.pot
Auto-merging addons/website_sale_loyalty/tests/__init__.py
CONFLICT (content): Merge conflict in addons/website_sale_loyalty/tests/__init__.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:50 UTC): @lvsz this forward port of odoo/odoo#191256 is awaiting action (not merged or closed).

lvsz on (2025-01-14 11:51:37 UTC): robodoo r+

"
2785032976,pull_request,closed,,[FW][FIX] point_of_sale: no caba move during reconciliation,"The reconciliation of move lines creates a cash basis (caba) move under some conditions. This can i.e. happen for the PoS move during the closing of a session.

But the PoS move does not use the transition account of any used caba taxes but the ""real"" account directly (see commit a011dcc0bdbe892b0a505a6a4169c5168bd018f6). So there is no need for a caba move.
Further an exchange difference move for the tax amount may be created. The issue is that the tax amounts from the cash basis are not being matched correctly with the tax amounts from the PoS move (since we only look for the transition account on the PoS move).

Reproduce on runbot for l10n_mx
1. Install l10n_mx
2. Set the 'IVA 16% VENTAS' tax as Customer Taxes on a product. Set the Sales Price to 100.
3. Create a payment method and journal for the PoS 
    * Payment method: Cash on journal CSH1
    * Journal: POS
5. Create a PoS using the payment method and journal from the previous step.
6. Start a PoS session
7. Sell the product from step 2 via the Cash payment method.
8. Close the Session
9. The following journal entries will be created: (All the tax lines use the same tax account; the ""final"" and not the caba transition account) 
```
* 1 entry in the POS journal (order)
       base:       | - 100.0 $
       tax:        | -  16.0 $
       receivable: | + 116.0 $
     * 1 entry in the CSH1 journal (cash / payment)
       cash:       | + 116.0 $
       receivable: | - 116.0 $
     * 1 entry in the CBMX journal (caba)
       base:       | - 100.0 $
       base:       | + 100.0 $
       tax:        | -  16.0 $
       tax:        | +  16.0 $
     * 1 entry in the EXCH journal (exchange difference)
       for the cash basis rounding difference
       tax:        | -  16.0 $
       tax:        | +  16.0 $
```

This commit fixes the issue by just skipping the creation of caba moves during the reconciliation of the PoS move lines. Further we make sure no exchange difference entry is created for the (not even created) cash basis entries.

opw-4355124

Forward-Port-Of: odoo/odoo#193375
Forward-Port-Of: odoo/odoo#193195",fw-bot,2025-01-13 19:01:16+00:00,[],2025-01-28 10:13:49+00:00,2025-01-14 09:43:11+00:00,https://github.com/odoo/odoo/pull/193484,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587959906, 'issue_id': 2785032976, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193484.png)](https://mergebot.odoo.com/odoo/odoo/pull/193484)', 'created_at': datetime.datetime(2025, 1, 13, 19, 1, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587959934, 'issue_id': 2785032976, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 19, 1, 19, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 19:01:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193484.png)](https://mergebot.odoo.com/odoo/odoo/pull/193484)

fw-bot (Issue Creator) on (2025-01-13 19:01:19 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2785024278,pull_request,closed,,[FW][FIX] account: prevent tax application on discount,"Minimal Configuration:
- Create an account (49999 Great Account) that has a default tax (15%)
- Settings > Accounting: define ""Separate discount accounts on invoices"" > Customer invoices with an account (e.g. 443000 Cash Discount Loss)

Steps to reproduce:
- Create an invoice with an invoice line that has ""Great Account"", a discount (10%) and a price (100) and a tax (15%)
- Confirm -> amount = 108.9
- Duplicate the invoice (in the ticket: Create a Credit Note)

Issue:
=> The credit note is not of the same amount = 106.80. That is, MINUS discount * tax_amount <-> 108.90 MINUS 10% * 21= 106.80

Cause:
When there is a ""Separate discount accounts on invoices"" that is set, discount line appear on the journal items of the document; moves between the default account for such transaction to the chosen move in the settings.
When iterating through those discount lines, the condition was not strict enough to filter them out and would put a tax on them (as my dear colleague Andrea said: the bomb has been planted)

Therefore, when creating a credit/duplicating,  we copy the data  wrongly (but in a correct a way for a standard flow) which gives incoherent results

opw-4166601

Forward-Port-Of: odoo/odoo#187565",fw-bot,2025-01-13 18:58:07+00:00,[],2025-02-05 09:44:01+00:00,2025-01-22 09:43:03+00:00,https://github.com/odoo/odoo/pull/193483,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587953737, 'issue_id': 2785024278, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193483.png)](https://mergebot.odoo.com/odoo/odoo/pull/193483)', 'created_at': datetime.datetime(2025, 1, 13, 18, 58, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587953815, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl cherrypicking of pull request odoo/odoo#187565 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_move_line.py\nCONFLICT (content): Merge conflict in addons/account/models/account_move_line.py\nAuto-merging addons/account/tests/test_account_move_in_invoice.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 58, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278685, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468983, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600471141, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174585, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477041, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606120144, 'issue_id': 2785024278, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 2, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606494268, 'issue_id': 2785024278, 'author': 'yosa-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 22, 7, 35, 52, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:58:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193483.png)](https://mergebot.odoo.com/odoo/odoo/pull/193483)

fw-bot (Issue Creator) on (2025-01-13 18:58:10 UTC): @yosa-odoo @smetl cherrypicking of pull request odoo/odoo#187565 failed.

stdout:
```
Auto-merging addons/account/models/account_move_line.py
CONFLICT (content): Merge conflict in addons/account/models/account_move_line.py
Auto-merging addons/account/tests/test_account_move_in_invoice.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:38 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:01:38 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:31 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:37 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:14 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:02:09 UTC): @yosa-odoo @smetl this forward port of odoo/odoo#187565 is awaiting action (not merged or closed).

yosa-odoo on (2025-01-22 07:35:52 UTC): robodoo r+

"
2784981420,pull_request,closed,,[FW][FIX] project: Use company id data not company record,"Steps:
- Install project_todo
- Create a second company
- Create a project
- Link the project to a company
- Setup a default value for task.project_id with your new project (1)
- Try to open project_todo

Actual result:
- Error due to company id
- can't adapt type 'res.company'

Expected result:
- No error
- Welcome task is created and project is opened

opw-4465277

Caused by https://github.com/odoo/odoo/pull/173625

Forward-Port-Of: odoo/odoo#193359",fw-bot,2025-01-13 18:45:28+00:00,[],2025-01-28 18:24:50+00:00,2025-01-14 18:15:47+00:00,https://github.com/odoo/odoo/pull/193482,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587929356, 'issue_id': 2784981420, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193482.png)](https://mergebot.odoo.com/odoo/odoo/pull/193482)', 'created_at': datetime.datetime(2025, 1, 13, 18, 45, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587929373, 'issue_id': 2784981420, 'author': 'fw-bot', 'body': '@GaetanVandenBergh @xavierbol this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193472\n* odoo/odoo#193460\n* odoo/odoo#193437\n* odoo/odoo#193419\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 45, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2590418579, 'issue_id': 2784981420, 'author': 'xavierbol', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 16, 20, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:45:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193482.png)](https://mergebot.odoo.com/odoo/odoo/pull/193482)

fw-bot (Issue Creator) on (2025-01-13 18:45:30 UTC): @GaetanVandenBergh @xavierbol this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193472
* odoo/odoo#193460
* odoo/odoo#193437
* odoo/odoo#193419

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

xavierbol on (2025-01-14 16:20:02 UTC): robodoo r+

"
2784843113,pull_request,closed,,[FW][FIX] hw_drivers: checkout script path,"Forward-porting [this PR](https://github.com/odoo/odoo/pull/191928) resulted in setting path for checkout script to old path.
The path is now set to the new location (in `iot_box_image` module).

Forward-Port-Of: odoo/odoo#193439",fw-bot,2025-01-13 18:08:16+00:00,[],2025-01-28 09:13:13+00:00,2025-01-14 09:03:24+00:00,https://github.com/odoo/odoo/pull/193481,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587846120, 'issue_id': 2784843113, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193481.png)](https://mergebot.odoo.com/odoo/odoo/pull/193481)', 'created_at': datetime.datetime(2025, 1, 13, 18, 8, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587846154, 'issue_id': 2784843113, 'author': 'fw-bot', 'body': '@loouis-t @qle-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 8, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589202232, 'issue_id': 2784843113, 'author': 'loouis-t', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 7, 25, 35, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:08:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193481.png)](https://mergebot.odoo.com/odoo/odoo/pull/193481)

fw-bot (Issue Creator) on (2025-01-13 18:08:18 UTC): @loouis-t @qle-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

loouis-t on (2025-01-14 07:25:35 UTC): @robodoo r+

"
2784841702,pull_request,closed,,[FW][FIX] l10n_be_pos_sale: activate default invoice only with intracom taxes,"Previously, settling a sale.order from the POS of a Belgian company
would auto check the invoice option before paying.

Steps to reproduce:
-------------------
* Install `l10n_be_pos_cert`
* Switch to the Beligian company
* Crete a quotation in **Sale** app
* Add any partner and any product, remove all taxes for the product line
* Save
* Open pos shop
* Settle the order
* Go to the payment screen
> Observation: The invoice button is already selected.

Why the fix:
------------
This invoice option was auto selected since this commit: https://github.com/odoo/odoo/commit/c760fbb1bd2e7725b5e759198684a07060612033

The following commit https://github.com/odoo/odoo/commit/3a5e22218708b4b6c9aedfa965d9f3c279edbd46
updates the previous one as the invoice enforcement is only needed when we have
intracom taxes on the SO. Thus when no intracom taxes apply we can still 
decide wether or not to invoice. We fallback on the default behavior which 
is to have the invoice button un-selected.

opw-4334095

Forward-Port-Of: odoo/odoo#193406
Forward-Port-Of: odoo/odoo#188400",fw-bot,2025-01-13 18:07:59+00:00,[],2025-01-28 10:30:25+00:00,2025-01-14 10:25:01+00:00,https://github.com/odoo/odoo/pull/193480,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587844843, 'issue_id': 2784841702, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193480.png)](https://mergebot.odoo.com/odoo/odoo/pull/193480)', 'created_at': datetime.datetime(2025, 1, 13, 18, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587844869, 'issue_id': 2784841702, 'author': 'fw-bot', 'body': '@sbel-odoo @caburj this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 8, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589223686, 'issue_id': 2784841702, 'author': 'sbel-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 7, 41, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:08:00 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193480.png)](https://mergebot.odoo.com/odoo/odoo/pull/193480)

fw-bot (Issue Creator) on (2025-01-13 18:08:01 UTC): @sbel-odoo @caburj this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

sbel-odoo on (2025-01-14 07:41:32 UTC): @robodoo r+

"
2784841069,pull_request,closed,,[FW][FIX] calendar: unwanted activity creation,"Some modules (i.e., Appointment) uses calendar.event, but they don't want to create an activity every time a user books a meeting.
This PR indroduce a helper function, which return a list of models, in which we don't want to create activities.

Task-4243603

Forward-Port-Of: odoo/odoo#193316
Forward-Port-Of: odoo/odoo#184272",fw-bot,2025-01-13 18:07:41+00:00,[],2025-01-28 10:30:27+00:00,2025-01-14 10:25:12+00:00,https://github.com/odoo/odoo/pull/193479,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587843933, 'issue_id': 2784841069, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193479.png)](https://mergebot.odoo.com/odoo/odoo/pull/193479)', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587844051, 'issue_id': 2784841069, 'author': 'fw-bot', 'body': '@yagp-odoo @awa-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588621152, 'issue_id': 2784841069, 'author': 'fw-bot', 'body': '@yagp-odoo @awa-odoo this forward port of odoo/odoo#184272 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 2, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589266619, 'issue_id': 2784841069, 'author': 'awa-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 9, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:07:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193479.png)](https://mergebot.odoo.com/odoo/odoo/pull/193479)

fw-bot (Issue Creator) on (2025-01-13 18:07:45 UTC): @yagp-odoo @awa-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:02:15 UTC): @yagp-odoo @awa-odoo this forward port of odoo/odoo#184272 is awaiting action (not merged or closed).

awa-odoo on (2025-01-14 08:09:34 UTC): @robodoo r+

"
2784839035,pull_request,closed,,"[FW][FIX] tools,spreadsheet_dashboard_*: export all spreadsheet translations","Currently, the extractor looking for terms to translate in spreadsheet files was specifically looking for files ending in ""_spreadsheet.json"". However, since this version there were new spreadsheets added that ended in ""_spreadsheet.osheet.json"". The translation extractor couldn't find these and the terms were never extracted, resulting in missing translations.

This commit searches for both filename patterns to export the terms.

We also make sure that file references are only extracted once per term per file.

Related to https://github.com/odoo/enterprise/pull/75605

Forward-Port-Of: odoo/odoo#193408
Forward-Port-Of: odoo/odoo#190598",fw-bot,2025-01-13 18:07:15+00:00,[],2025-01-28 10:30:33+00:00,2025-01-14 10:25:39+00:00,https://github.com/odoo/odoo/pull/193478,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587841757, 'issue_id': 2784839035, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193478.png)](https://mergebot.odoo.com/odoo/odoo/pull/193478)', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587841940, 'issue_id': 2784839035, 'author': 'fw-bot', 'body': '@dylankiss @rrahir this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589341567, 'issue_id': 2784839035, 'author': 'dylankiss', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 49, 11, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:07:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193478.png)](https://mergebot.odoo.com/odoo/odoo/pull/193478)

fw-bot (Issue Creator) on (2025-01-13 18:07:18 UTC): @dylankiss @rrahir this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dylankiss on (2025-01-14 08:49:11 UTC): @robodoo r+

"
2784837360,pull_request,closed,,[FW][FIX] point_of_sale: prevent loading non-included pricelists,"Before this commit, it was possible to load pricelists that were not available in the PoS.

opw-4423566

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192755
Forward-Port-Of: odoo/odoo#191560",fw-bot,2025-01-13 18:06:50+00:00,[],2025-01-28 12:58:41+00:00,2025-01-14 12:27:13+00:00,https://github.com/odoo/odoo/pull/193477,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587841025, 'issue_id': 2784837360, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193477.png)](https://mergebot.odoo.com/odoo/odoo/pull/193477)', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587841054, 'issue_id': 2784837360, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 7, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588619281, 'issue_id': 2784837360, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#191560 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589423197, 'issue_id': 2784837360, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 29, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:07:05 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193477.png)](https://mergebot.odoo.com/odoo/odoo/pull/193477)

fw-bot (Issue Creator) on (2025-01-13 18:07:06 UTC): @pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:45 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#191560 is awaiting action (not merged or closed).

pedrambiria on (2025-01-14 09:29:14 UTC): @robodoo r+

"
2784814576,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-13 18:01:33+00:00,[],2025-01-28 15:37:13+00:00,2025-01-14 15:24:21+00:00,https://github.com/odoo/odoo/pull/193476,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587809847, 'issue_id': 2784814576, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193476.png)](https://mergebot.odoo.com/odoo/odoo/pull/193476)', 'created_at': datetime.datetime(2025, 1, 13, 18, 1, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587809877, 'issue_id': 2784814576, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587918645, 'issue_id': 2784814576, 'author': 'fw-bot', 'body': '@bvr-odoo @SergeBayet ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 13, 18, 39, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 18:01:34 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193476.png)](https://mergebot.odoo.com/odoo/odoo/pull/193476)

fw-bot (Issue Creator) on (2025-01-13 18:01:35 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 18:39:42 UTC): @bvr-odoo @SergeBayet ci/runbot failed on this forward-port PR

"
2784764492,pull_request,closed,,[FW][FIX] account: prevent tax application on discount,"Minimal Configuration:
- Create an account (49999 Great Account) that has a default tax (15%)
- Settings > Accounting: define ""Separate discount accounts on invoices"" > Customer invoices with an account (e.g. 443000 Cash Discount Loss)

Steps to reproduce:
- Create an invoice with an invoice line that has ""Great Account"", a discount (10%) and a price (100) and a tax (15%)
- Confirm -> amount = 108.9
- Duplicate the invoice (in the ticket: Create a Credit Note)

Issue:
=> The credit note is not of the same amount = 106.80. That is, MINUS discount * tax_amount <-> 108.90 MINUS 10% * 21= 106.80

Cause:
When there is a ""Separate discount accounts on invoices"" that is set, discount line appear on the journal items of the document; moves between the default account for such transaction to the chosen move in the settings.
When iterating through those discount lines, the condition was not strict enough to filter them out and would put a tax on them (as my dear colleague Andrea said: the bomb has been planted)

Therefore, when creating a credit/duplicating,  we copy the data  wrongly (but in a correct a way for a standard flow) which gives incoherent results

opw-4166601

Forward-Port-Of: odoo/odoo#187565",fw-bot,2025-01-13 17:45:22+00:00,[],2025-01-28 15:37:13+00:00,2025-01-14 15:24:16+00:00,https://github.com/odoo/odoo/pull/193475,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587777065, 'issue_id': 2784764492, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193475.png)](https://mergebot.odoo.com/odoo/odoo/pull/193475)', 'created_at': datetime.datetime(2025, 1, 13, 17, 45, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587777086, 'issue_id': 2784764492, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 45, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587953757, 'issue_id': 2784764492, 'author': 'fw-bot', 'body': '@yosa-odoo @smetl the next pull request (odoo/odoo#193483) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 18, 58, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589483307, 'issue_id': 2784764492, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 58, 12, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:45:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193475.png)](https://mergebot.odoo.com/odoo/odoo/pull/193475)

fw-bot (Issue Creator) on (2025-01-13 17:45:24 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 18:58:09 UTC): @yosa-odoo @smetl the next pull request (odoo/odoo#193483) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-14 09:58:12 UTC): @robodoo r+

"
2784761716,pull_request,closed,,[FIX] point_of_sale: order might be undefined on pending payment,"Using a payment method which rely on websocket (viva wallet, adyen, mercado pago, etc.) trigger a callback on all browser session of a given PoS session. If a browser session happen to not have any current session, a JS traceback will pop:
```js
TypeError: Cannot read properties of undefined (reading 'payment_ids')
```
due to the webscoket listener checking if there is on-going order using the payment method

opw-4374450

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",lse-odoo,2025-01-13 17:44:24+00:00,[],2025-01-28 15:37:12+00:00,2025-01-14 15:24:12+00:00,https://github.com/odoo/odoo/pull/193474,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2587774766, 'issue_id': 2784761716, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193474.png)](https://mergebot.odoo.com/odoo/odoo/pull/193474)', 'created_at': datetime.datetime(2025, 1, 13, 17, 44, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:44:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193474.png)](https://mergebot.odoo.com/odoo/odoo/pull/193474)

"
2784724265,pull_request,closed,,[FW][FIX] web: prevent crash with empty calendar color attribute,"Steps to reproduce
==================

- Install industry_fsm,web_studio
- Go to Field Service
- Switch to the calendar view
- Open studio
- Unset the color

=> fields[fieldMapping.color] is undefined

Cause of the issue
==================

We have a field that has the color attribute with a value of color.

```xml
<field name=""worksheet_template_id"" attrs=""{'invisible': [('worksheet_template_id', '=', False)]}"" filters=""1"" color=""color""/>
```

`shouldFetchColor` checks if the filter color is the same one as the calendar record color.

Solution
========

Since it's possible to have a color filter without a record color, we should fetch the filter colors in that case.

opw-4443497

Forward-Port-Of: odoo/odoo#193370
Forward-Port-Of: odoo/odoo#192334",fw-bot,2025-01-13 17:30:34+00:00,[],2025-01-28 15:37:22+00:00,2025-01-14 15:28:07+00:00,https://github.com/odoo/odoo/pull/193473,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587745526, 'issue_id': 2784724265, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193473.png)](https://mergebot.odoo.com/odoo/odoo/pull/193473)', 'created_at': datetime.datetime(2025, 1, 13, 17, 30, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587745579, 'issue_id': 2784724265, 'author': 'fw-bot', 'body': '@hubvd @mcm-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193455\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 30, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618985, 'issue_id': 2784724265, 'author': 'fw-bot', 'body': '@hubvd @mcm-odoo this forward port of odoo/odoo#192334 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589849965, 'issue_id': 2784724265, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 58, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:30:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193473.png)](https://mergebot.odoo.com/odoo/odoo/pull/193473)

fw-bot (Issue Creator) on (2025-01-13 17:30:38 UTC): @hubvd @mcm-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193455

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:31 UTC): @hubvd @mcm-odoo this forward port of odoo/odoo#192334 is awaiting action (not merged or closed).

hubvd on (2025-01-14 12:58:43 UTC): @robodoo r+

"
2784709448,pull_request,closed,,[FW][FIX] project: Use company id data not company record,"Steps:
- Install project_todo
- Create a second company
- Create a project
- Link the project to a company
- Setup a default value for task.project_id with your new project (1)
- Try to open project_todo

Actual result:
- Error due to company id
- can't adapt type 'res.company'

Expected result:
- No error
- Welcome task is created and project is opened

opw-4465277

Caused by https://github.com/odoo/odoo/pull/173625

Forward-Port-Of: odoo/odoo#193359",fw-bot,2025-01-13 17:25:18+00:00,[],2025-01-28 18:24:52+00:00,2025-01-14 18:22:20+00:00,https://github.com/odoo/odoo/pull/193472,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587733849, 'issue_id': 2784709448, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193472.png)](https://mergebot.odoo.com/odoo/odoo/pull/193472)', 'created_at': datetime.datetime(2025, 1, 13, 17, 25, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587733869, 'issue_id': 2784709448, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 25, 21, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:25:20 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193472.png)](https://mergebot.odoo.com/odoo/odoo/pull/193472)

fw-bot (Issue Creator) on (2025-01-13 17:25:21 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784688411,pull_request,closed,,[FW][FIX] pos_loyalty: prevent traceback when applying discount code coupons,"Steps:
- Create a discount program with `Discount Code` as the program type.
- Add a coupon for the program using the stat button.
- Open the POS UI and add products to the cart.
- Apply the coupon to the cart.

Issue:
- A traceback error occurs when applying that coupon.

Fix:
- added a validation warning when a user attempts to apply a coupon code from a discount code program type (similar to sales)

Task - 4422507

Forward-Port-Of: odoo/odoo#191894",fw-bot,2025-01-13 17:18:25+00:00,[],2025-01-30 09:03:13+00:00,2025-01-16 08:49:13+00:00,https://github.com/odoo/odoo/pull/193471,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587717863, 'issue_id': 2784688411, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193471.png)](https://mergebot.odoo.com/odoo/odoo/pull/193471)', 'created_at': datetime.datetime(2025, 1, 13, 17, 18, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587717880, 'issue_id': 2784688411, 'author': 'fw-bot', 'body': '@parp-odoo @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193456\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 18, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594482501, 'issue_id': 2784688411, 'author': 'fw-bot', 'body': '@parp-odoo @caburj ci/runbot failed on this forward-port PR', 'created_at': datetime.datetime(2025, 1, 16, 4, 41, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594604225, 'issue_id': 2784688411, 'author': 'parp-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 16, 6, 3, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:18:26 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193471.png)](https://mergebot.odoo.com/odoo/odoo/pull/193471)

fw-bot (Issue Creator) on (2025-01-13 17:18:27 UTC): @parp-odoo @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193456

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-16 04:41:19 UTC): @parp-odoo @caburj ci/runbot failed on this forward-port PR

parp-odoo on (2025-01-16 06:03:07 UTC): @robodoo r+

"
2784678271,pull_request,closed,,[FW][FIX] point_of_sale: prevent error when splitting a bill with combo,"Before this commit, validating a split bill that contains a combo product would result in a key error.

opw-4416406

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192737
Forward-Port-Of: odoo/odoo#192384",fw-bot,2025-01-13 17:14:41+00:00,[],2025-01-28 15:37:18+00:00,2025-01-14 15:27:48+00:00,https://github.com/odoo/odoo/pull/193470,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR'), ('18.2', None)]","[{'comment_id': 2587710124, 'issue_id': 2784678271, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193470.png)](https://mergebot.odoo.com/odoo/odoo/pull/193470)', 'created_at': datetime.datetime(2025, 1, 13, 17, 14, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587710208, 'issue_id': 2784678271, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#192384 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/models/pos_order.py\nCONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_order.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 14, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618873, 'issue_id': 2784678271, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#192384 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589764493, 'issue_id': 2784678271, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 17, 2, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:14:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193470.png)](https://mergebot.odoo.com/odoo/odoo/pull/193470)

fw-bot (Issue Creator) on (2025-01-13 17:14:45 UTC): @pedrambiria @adgu-odoo cherrypicking of pull request odoo/odoo#192384 failed.

stdout:
```
Auto-merging addons/point_of_sale/models/pos_order.py
CONFLICT (content): Merge conflict in addons/point_of_sale/models/pos_order.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:25 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#192384 is awaiting action (not merged or closed).

pedrambiria on (2025-01-14 12:17:02 UTC): @robodoo r+

"
2784659500,pull_request,closed,,[FW][FIX] base: allow automated actions to link m2m fields,"Versions
--------
- 16.0 (fix issue)
- 17.0+ (skip useless constraint)

Commit 3871ae2c6c45 enabled automated m2m CRUD in 17.0+

Steps
-----
1. Create an automated action on a Model with tags (e.g. Contact);
2. set trigger to On Creation;
3. in data to write, have evaluation type to Value;
4. fill in the value (e.g. 1);
5. create a record that would trigger the automation.

Issue
-----
> ValueError: Wrong value for res.partner.category_id: 1

Cause
-----
In the `eval_value` method, the `many2many` type doesn't get covered.

Solution
--------
1. Have `eval_value` handle `many2many` values (linking them to relevant record, and existing as a single expression per column).
2. Undo 09a6df204f2a which disallowed writing by reference for many2many fields. This change makes writing by reference possible as well, and allows you to select the desired record, instead of having to manually fill in its ID.

opw-4054461

Forward-Port-Of: odoo/odoo#190047",fw-bot,2025-01-13 17:07:52+00:00,[],2025-01-28 15:37:26+00:00,2025-01-14 15:28:37+00:00,https://github.com/odoo/odoo/pull/193469,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587694544, 'issue_id': 2784659500, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193469.png)](https://mergebot.odoo.com/odoo/odoo/pull/193469)', 'created_at': datetime.datetime(2025, 1, 13, 17, 7, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587694566, 'issue_id': 2784659500, 'author': 'fw-bot', 'body': '@lvsz @ryv-odoo cherrypicking of pull request odoo/odoo#190047 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/i18n/base.pot\nAuto-merging odoo/addons/base/models/ir_actions.py\nCONFLICT (content): Merge conflict in odoo/addons/base/models/ir_actions.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 7, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589900165, 'issue_id': 2784659500, 'author': 'lvsz', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 23, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 17:07:54 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193469.png)](https://mergebot.odoo.com/odoo/odoo/pull/193469)

fw-bot (Issue Creator) on (2025-01-13 17:07:54 UTC): @lvsz @ryv-odoo cherrypicking of pull request odoo/odoo#190047 failed.

stdout:
```
Auto-merging odoo/addons/base/i18n/base.pot
Auto-merging odoo/addons/base/models/ir_actions.py
CONFLICT (content): Merge conflict in odoo/addons/base/models/ir_actions.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

lvsz on (2025-01-14 13:23:00 UTC): robodoo r+

"
2784606342,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-13 16:51:01+00:00,[],2025-01-28 13:52:06+00:00,2025-01-14 13:48:52+00:00,https://github.com/odoo/odoo/pull/193468,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587651870, 'issue_id': 2784606342, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193468.png)](https://mergebot.odoo.com/odoo/odoo/pull/193468)', 'created_at': datetime.datetime(2025, 1, 13, 16, 51, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587651895, 'issue_id': 2784606342, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 51, 4, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:51:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193468.png)](https://mergebot.odoo.com/odoo/odoo/pull/193468)

fw-bot (Issue Creator) on (2025-01-13 16:51:04 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784600680,pull_request,closed,,[FW][FIX] hr_timesheet: make overtime filter translatable,"In the Tasks Analysis, the field `overtime` can be used as a measure in the graph and pivot views. However, the field name was set as not translatable and thus always showing in English after [this commit].

We make it translatable again here so it can be localized.

[this commit]: https://github.com/odoo/odoo/commit/e82567f9d5842bd95fe01ba3b9f54a65437e313f

[opw-4421055](https://www.odoo.com/odoo/project.task/4421055)

Forward-Port-Of: odoo/odoo#193113
Forward-Port-Of: odoo/odoo#193058",fw-bot,2025-01-13 16:49:07+00:00,[],2025-01-27 22:33:26+00:00,2025-01-13 21:38:25+00:00,https://github.com/odoo/odoo/pull/193467,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587647490, 'issue_id': 2784600680, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193467.png)](https://mergebot.odoo.com/odoo/odoo/pull/193467)', 'created_at': datetime.datetime(2025, 1, 13, 16, 49, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587647523, 'issue_id': 2784600680, 'author': 'fw-bot', 'body': '@dylankiss @MissingNoShiny this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 49, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587677697, 'issue_id': 2784600680, 'author': 'dylankiss', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 17, 0, 49, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:49:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193467.png)](https://mergebot.odoo.com/odoo/odoo/pull/193467)

fw-bot (Issue Creator) on (2025-01-13 16:49:10 UTC): @dylankiss @MissingNoShiny this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

dylankiss on (2025-01-13 17:00:49 UTC): @robodoo r+

"
2784599696,pull_request,closed,,[FW][FIX] web: show selected option during keyboard navigation,"- Previously, navigating through dropdown options using the keyboard's up and down arrow keys would highlight the selected value in the dropdown. However, this functionality was inadvertently removed in this commit https://github.com/odoo/odoo/commit/6d77fb2d823688fcdd3085cd15c7a28771e783b6, 
resulting in the selected record not being visible during keyboard navigation.

- This fix restores the original behavior, ensuring that the selected option is properly highlighted and visible when navigating with the keyboard.

Task-4402580

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#191113",fw-bot,2025-01-13 16:48:49+00:00,[],2025-01-28 09:13:11+00:00,2025-01-14 09:03:20+00:00,https://github.com/odoo/odoo/pull/193466,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587647431, 'issue_id': 2784599696, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193466.png)](https://mergebot.odoo.com/odoo/odoo/pull/193466)', 'created_at': datetime.datetime(2025, 1, 13, 16, 49, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587647459, 'issue_id': 2784599696, 'author': 'fw-bot', 'body': '@omra-odoo @res-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 49, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588272057, 'issue_id': 2784599696, 'author': 'res-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 21, 37, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588463274, 'issue_id': 2784599696, 'author': 'robodoo', 'body': '@omra-odoo @res-odoo staging failed: ci/runbot on ac653db0ac904cd9a1b9159671c98ade77848265 (view more at https://runbot.odoo.com/runbot/build/73316660)', 'created_at': datetime.datetime(2025, 1, 13, 23, 37, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589194516, 'issue_id': 2784599696, 'author': 'res-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 14, 7, 20, 25, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:49:08 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193466.png)](https://mergebot.odoo.com/odoo/odoo/pull/193466)

fw-bot (Issue Creator) on (2025-01-13 16:49:09 UTC): @omra-odoo @res-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

res-odoo on (2025-01-13 21:37:42 UTC): @robodoo r+

robodoo on (2025-01-13 23:37:16 UTC): @omra-odoo @res-odoo staging failed: ci/runbot on ac653db0ac904cd9a1b9159671c98ade77848265 (view more at https://runbot.odoo.com/runbot/build/73316660)

res-odoo on (2025-01-14 07:20:25 UTC): @robodoo retry

"
2784547390,pull_request,open,,"[FIX] stock_barcode{,_mrp}: reconcile splitted move from barcode exit","### Issue:

Currently, leaving the barcode app will split moves/move lines in the backend in order to keep track of the changes made on the move lines to match the next time you go into the barcode app.

#### Use case 1 (split move):
- Create a storable product P tracked by lot
- Adjust the onHand quantity to put 2 quants in stock:
    - quant1: Location: WH/Stock, lot_id: LOT0001, quantity: 3.0
    - quant2: Location: WH/Stock, lot_id: LOT0002, quantity: 3.0
- Create and confirm a Delivery order for 3 x P
> The move of the delivery should have reserved 3 units form LOT0001
- Enter the barcode app, scan you DO-name
- Scan your product barcode then scan LOT002 three times
- Leave the barcode app and come back
#### > The barcode line 3/3 was updated to 3/6: 0/3 LOT001 and 3/3 LOT002.

#### Use case 2 (split move line):
- Create 2 storable products P and COMP.
- Adjust the onHand quantity to put 10 units of COMP in stock.
- Create a bill of material for P with one line: - 1 x COMP
- Create and confirm an MO for 10 units of P.
- Set the qty_producing to 5 units -> 5 units of comp are reserved
- Enter the barcode app, scan you MO-name
- The component line should be 5/5 since 5 units are reserved.
- Adjust the registration to 1/5.
- Leave the barcode app and come back
#### > The barcode line 1/5 was updated to 1/1 and 0/9 instead of 0/4.

### Cause of the Issue:

In both cases, the problem comes from the fact we leave the barcode with a different reservation than the initial one.

In the first use case, a new move will be created with a quantity of 3 in order to handle the new line created with LOT002 as soon as you have scanned your products. Therefore even though you entered the barcode app with a reservation demand of 3 units you leave it with 2 move lines with a cumulative quantity of 3 + 3 = 6:
- line1: quantity: 3, lot_id: LOT001, picked: False
- line2: quantity: 3, lot_id: LOT002, picked: True The next time you enter the app you will therefore see a reservation demand of 6 rather than 3.

In the second use case however, a move line is simply created by the `split_uncompleted_moves` when you exit the barcode app: https://github.com/odoo/enterprise/blob/0f4e8ce54be746db02e9f4a6974e387d90608a08/stock_barcode_mrp/models/stock_move.py#L18-L29 
And the quantity of the new move line is based on the `prodcut_uom_qty` of the move rather than the initial reservation demand (quantity when entering barcode). This explains why reservation demand changed from 5 to 10 when you left and came back.

Enterprise: https://github.com/odoo/enterprise/pull/77068

opw-4353884 and opw-4417870
---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr",lase-odoo,2025-01-13 16:32:37+00:00,[],2025-02-05 13:53:47+00:00,,https://github.com/odoo/odoo/pull/193465,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2587605905, 'issue_id': 2784547390, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193465.png)](https://mergebot.odoo.com/odoo/odoo/pull/193465)', 'created_at': datetime.datetime(2025, 1, 13, 16, 32, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:32:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193465.png)](https://mergebot.odoo.com/odoo/odoo/pull/193465)

"
2784536047,pull_request,closed,,[FW][FIX] pos_viva_wallet: traceback when cancelling payment,"Steps to reproduce:
- Start a Viva wallet payment
- Immediately cancel and remove the payment line
- After a few seconds, a traceback occurs

This commit fixes the issue by ensuring that the Viva Wallet status polling only runs if it is still the current payment line.

task-4472269

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193358",fw-bot,2025-01-13 16:28:57+00:00,[],2025-01-28 13:52:04+00:00,2025-01-14 13:48:40+00:00,https://github.com/odoo/odoo/pull/193464,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587595350, 'issue_id': 2784536047, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193464.png)](https://mergebot.odoo.com/odoo/odoo/pull/193464)', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587595372, 'issue_id': 2784536047, 'author': 'fw-bot', 'body': '@maxthewhale @caburj cherrypicking of pull request odoo/odoo#193358 failed.\n\nstdout:\n```\nAuto-merging addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js\nCONFLICT (content): Merge conflict in addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589667232, 'issue_id': 2784536047, 'author': 'MaxTheWhale', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 11, 27, 15, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:28:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193464.png)](https://mergebot.odoo.com/odoo/odoo/pull/193464)

fw-bot (Issue Creator) on (2025-01-13 16:28:59 UTC): @maxthewhale @caburj cherrypicking of pull request odoo/odoo#193358 failed.

stdout:
```
Auto-merging addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js
CONFLICT (content): Merge conflict in addons/pos_viva_wallet/static/src/app/payment_viva_wallet.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

MaxTheWhale on (2025-01-14 11:27:15 UTC): @robodoo r+

"
2784535123,pull_request,closed,,[FW][FIX] account: prevent tax application on discount,"Minimal Configuration:
- Create an account (49999 Great Account) that has a default tax (15%)
- Settings > Accounting: define ""Separate discount accounts on invoices"" > Customer invoices with an account (e.g. 443000 Cash Discount Loss)

Steps to reproduce:
- Create an invoice with an invoice line that has ""Great Account"", a discount (10%) and a price (100) and a tax (15%)
- Confirm -> amount = 108.9
- Duplicate the invoice (in the ticket: Create a Credit Note)

Issue:
=> The credit note is not of the same amount = 106.80. That is, MINUS discount * tax_amount <-> 108.90 MINUS 10% * 21= 106.80

Cause:
When there is a ""Separate discount accounts on invoices"" that is set, discount line appear on the journal items of the document; moves between the default account for such transaction to the chosen move in the settings.
When iterating through those discount lines, the condition was not strict enough to filter them out and would put a tax on them (as my dear colleague Andrea said: the bomb has been planted)

Therefore, when creating a credit/duplicating,  we copy the data  wrongly (but in a correct a way for a standard flow) which gives incoherent results

opw-4166601

Forward-Port-Of: odoo/odoo#187565",fw-bot,2025-01-13 16:28:41+00:00,[],2025-01-28 12:58:38+00:00,2025-01-14 12:25:32+00:00,https://github.com/odoo/odoo/pull/193463,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587594654, 'issue_id': 2784535123, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193463.png)](https://mergebot.odoo.com/odoo/odoo/pull/193463)', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587594672, 'issue_id': 2784535123, 'author': 'fw-bot', 'body': 'This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 43, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:28:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193463.png)](https://mergebot.odoo.com/odoo/odoo/pull/193463)

fw-bot (Issue Creator) on (2025-01-13 16:28:43 UTC): This PR targets saas-17.2 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784534176,pull_request,closed,,[FW][FIX] account_peppol: key was never sent right so remove its use,"`accounting_supplier_party` was never sent right from IAP, it was always 'None'.
So, we could never log it.
But the information was in fact always useless. 
This information is already in the UBL file.




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192740",fw-bot,2025-01-13 16:28:24+00:00,[],2025-02-03 13:39:19+00:00,2025-01-20 13:23:49+00:00,https://github.com/odoo/odoo/pull/193462,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587594378, 'issue_id': 2784534176, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193462.png)](https://mergebot.odoo.com/odoo/odoo/pull/193462)', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587594402, 'issue_id': 2784534176, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo cherrypicking of pull request odoo/odoo#192740 failed.\n\nstdout:\n```\nAuto-merging addons/account_peppol/models/account_edi_proxy_user.py\nCONFLICT (content): Merge conflict in addons/account_peppol/models/account_edi_proxy_user.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 28, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278063, 'issue_id': 2784534176, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599468754, 'issue_id': 2784534176, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600466067, 'issue_id': 2784534176, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601173900, 'issue_id': 2784534176, 'author': 'fw-bot', 'body': '@gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601844680, 'issue_id': 2784534176, 'author': 'gawa-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 20, 9, 16, 34, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:28:36 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193462.png)](https://mergebot.odoo.com/odoo/odoo/pull/193462)

fw-bot (Issue Creator) on (2025-01-13 16:28:37 UTC): @gawa-odoo @clbr-odoo cherrypicking of pull request odoo/odoo#192740 failed.

stdout:
```
Auto-merging addons/account_peppol/models/account_edi_proxy_user.py
CONFLICT (content): Merge conflict in addons/account_peppol/models/account_edi_proxy_user.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:00 UTC): @gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:01:09 UTC): @gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:00 UTC): @gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:03 UTC): @gawa-odoo @clbr-odoo this forward port of odoo/odoo#192740 is awaiting action (not merged or closed).

gawa-odoo on (2025-01-20 09:16:34 UTC): @robodoo r+

"
2784522357,pull_request,closed,,[FW][FIX] base: website is not shown in the contact qweb widget,"**Affects**
16.0+

**Steps to reproduce:**

- Render the Contact qweb widget with fields [""phone"", ""website""]

```py
Contact = self.env[""ir.qweb.field.contact""]
partner = self.env[""res.partner""].create(
    {
        ""name"": ""Test Partner"",
        ""phone"": ""1234567890"",
        ""website"": ""https://www.example.com"",
    }
)
result = Contact.value_to_html(partner, {""fields"": [""phone"", ""website""]})
```

**Result:**

- The website is not shown

---

This is a regression introduced in 9e53aea9, in combination with some buggy behavior in the qweb compilation.

Somehow the `t-elif` condition is applying on the next element instead on itself, hiding the website item. I did not investigate this further.


ping @lvsz @ryv-odoo

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192460
Forward-Port-Of: odoo/odoo#191201",fw-bot,2025-01-13 16:24:14+00:00,[],2025-01-28 10:54:06+00:00,2025-01-14 10:47:07+00:00,https://github.com/odoo/odoo/pull/193461,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587583885, 'issue_id': 2784522357, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193461.png)](https://mergebot.odoo.com/odoo/odoo/pull/193461)', 'created_at': datetime.datetime(2025, 1, 13, 16, 24, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587583980, 'issue_id': 2784522357, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo cherrypicking of pull request odoo/odoo#191201 failed.\n\nstdout:\n```\nAuto-merging odoo/addons/base/views/ir_qweb_widget_templates.xml\nCONFLICT (content): Merge conflict in odoo/addons/base/views/ir_qweb_widget_templates.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 24, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588619443, 'issue_id': 2784522357, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589207908, 'issue_id': 2784522357, 'author': 'ryv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 7, 29, 57, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:24:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193461.png)](https://mergebot.odoo.com/odoo/odoo/pull/193461)

fw-bot (Issue Creator) on (2025-01-13 16:24:18 UTC): @ivantodorovich @ryv-odoo cherrypicking of pull request odoo/odoo#191201 failed.

stdout:
```
Auto-merging odoo/addons/base/views/ir_qweb_widget_templates.xml
CONFLICT (content): Merge conflict in odoo/addons/base/views/ir_qweb_widget_templates.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:56 UTC): @ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).

ryv-odoo on (2025-01-14 07:29:57 UTC): @robodoo r+

"
2784473212,pull_request,closed,,[FW][FIX] project: Use company id data not company record,"Steps:
- Install project_todo
- Create a second company
- Create a project
- Link the project to a company
- Setup a default value for task.project_id with your new project (1)
- Try to open project_todo

Actual result:
- Error due to company id
- can't adapt type 'res.company'

Expected result:
- No error
- Welcome task is created and project is opened

opw-4465277

Caused by https://github.com/odoo/odoo/pull/173625

Forward-Port-Of: odoo/odoo#193359",fw-bot,2025-01-13 16:08:37+00:00,[],2025-01-28 18:24:48+00:00,2025-01-14 18:12:09+00:00,https://github.com/odoo/odoo/pull/193460,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587544144, 'issue_id': 2784473212, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193460.png)](https://mergebot.odoo.com/odoo/odoo/pull/193460)', 'created_at': datetime.datetime(2025, 1, 13, 16, 8, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587544177, 'issue_id': 2784473212, 'author': 'fw-bot', 'body': 'This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 8, 39, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:08:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193460.png)](https://mergebot.odoo.com/odoo/odoo/pull/193460)

fw-bot (Issue Creator) on (2025-01-13 16:08:39 UTC): This PR targets 18.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784461862,pull_request,closed,,[FW][FIX] l10n_es: missing lines for agricultural fiscal position,"Two lines that were missing from the ""REAGYP - Agricultura"" Fiscal Position Tax Mapping have been added.

task-4342206

Forward-Port-Of: odoo/odoo#193156
Forward-Port-Of: odoo/odoo#192359",fw-bot,2025-01-13 16:05:10+00:00,[],2025-01-28 10:30:34+00:00,2025-01-14 10:25:46+00:00,https://github.com/odoo/odoo/pull/193459,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587534433, 'issue_id': 2784461862, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193459.png)](https://mergebot.odoo.com/odoo/odoo/pull/193459)', 'created_at': datetime.datetime(2025, 1, 13, 16, 5, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587534558, 'issue_id': 2784461862, 'author': 'fw-bot', 'body': '@aizu-odoo @jco-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193433\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 5, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618930, 'issue_id': 2784461862, 'author': 'fw-bot', 'body': '@aizu-odoo @jco-odoo this forward port of odoo/odoo#192359 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589344719, 'issue_id': 2784461862, 'author': 'aizu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 50, 50, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:05:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193459.png)](https://mergebot.odoo.com/odoo/odoo/pull/193459)

fw-bot (Issue Creator) on (2025-01-13 16:05:14 UTC): @aizu-odoo @jco-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193433

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:28 UTC): @aizu-odoo @jco-odoo this forward port of odoo/odoo#192359 is awaiting action (not merged or closed).

aizu-odoo on (2025-01-14 08:50:50 UTC): @robodoo r+

"
2784445035,pull_request,closed,,[FIX] point_of_sale: prevent category labels from being cut,"With Commit[1] we aimed to apply a fix to prevent an horizontal scroll on the screen when the list of category is extremely long. While this solved the issue, it introduces a new one on category labels which were sometimes cut due to the size of the grid elements.

| saas-18.1 | This PR |
|--------|--------|
| <img alt=""image"" src=""https://github.com/user-attachments/assets/d471ef51-502d-496c-8b84-7ec1e19d01af"" /> | <img alt=""image"" src=""https://github.com/user-attachments/assets/9870287e-17d1-47b3-a92c-8165f811a0e3"" /> | 

It was also setting the same class twice inside a conditional, which was not useful.

With this commit, we apply a `d-flex flex-wrap` to solve both issues.

Commit[1]: df97b2966436cd104bd806cb66786824f66fa567

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",chgo-odoo,2025-01-13 16:00:08+00:00,[],2025-01-28 15:37:33+00:00,2025-01-14 15:32:26+00:00,https://github.com/odoo/odoo/pull/193458,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587520119, 'issue_id': 2784445035, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193458.png)](https://mergebot.odoo.com/odoo/odoo/pull/193458)', 'created_at': datetime.datetime(2025, 1, 13, 16, 0, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589856865, 'issue_id': 2784445035, 'author': 'adgu-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 13, 2, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 16:00:14 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193458.png)](https://mergebot.odoo.com/odoo/odoo/pull/193458)

adgu-odoo on (2025-01-14 13:02:09 UTC): robodoo r+

"
2784443473,pull_request,closed,,[ADD] sale_gelato: integrate with Gelato for Print-On-Demand,"This commit adds the possibility to fetch attributes of a template
configured on Gelato to automatically create the corresponding variants
in Odoo. When such variant is included in a sales order, the order is
forwarded to Gelato to trigger the printing and dropshipping of the
product.

task-3935688

See also:
- https://github.com/odoo/enterprise/pull/77839
- https://github.com/odoo/documentation/pull/11823",anko-odoo,2025-01-13 15:59:39+00:00,[],2025-02-06 21:12:19+00:00,2025-02-06 21:12:19+00:00,https://github.com/odoo/odoo/pull/193457,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587518668, 'issue_id': 2784443473, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193457.png)](https://mergebot.odoo.com/odoo/odoo/pull/193457)', 'created_at': datetime.datetime(2025, 1, 13, 15, 59, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639257455, 'issue_id': 2784443473, 'author': 'd-fence', 'body': 'Upgrade exception [#492](https://runbot.odoo.com/odoo/runbot.upgrade.exception/492?menu_id=405) added.\r\n\r\nWaiting the forward-port of this pr, the exception will be applied on all builds, and create an inconsistent state for migrations.\r\n**Please forward port this asap up to master without change.** Exception should be forward-ported before the end of the week.\r\n\r\nPRs adding fields/models should be merged at the beginning of the week and all the forward ports should be merged in the same week.\r\n\r\nIf you need to apply any change before it reaches master, please notify runbot team.\r\n\r\nDetails:\r\n```\r\nmodule:sale_gelato\r\nmodule:sale_gelato_stock\r\nmodule:website_sale_gelato\r\nfield:res.config.settings.module_sale_gelato\r\n```\r\ncc @KangOl @nseinlet @aj-fuentes', 'created_at': datetime.datetime(2025, 2, 6, 9, 24, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639284127, 'issue_id': 2784443473, 'author': 'AntoineVDV', 'body': '@robodoo r+ rebase-ff override=ci/security\r\nReason:\r\n- `route`: CSRF protection replaced by a shared secret check;\r\n- `hmac`: used to compare the shared secrets to prevent timing attacks (`odoo.tools.hmac` is not suitable because it relies on the database secret);\r\n- `requests`: one-shot requests made to a hard-coded domain with a small timeout.\r\n\r\nLink to ci/security build (18.0):\xa0https://runbot.odoo.com/runbot/build/74475260', 'created_at': datetime.datetime(2025, 2, 6, 9, 35, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639284377, 'issue_id': 2784443473, 'author': 'robodoo', 'body': '@AntoineVDV you may want to rebuild or fix this PR as it has failed CI.', 'created_at': datetime.datetime(2025, 2, 6, 9, 35, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639284532, 'issue_id': 2784443473, 'author': 'robodoo', 'body': 'Merge method set to rebase and fast-forward.', 'created_at': datetime.datetime(2025, 2, 6, 9, 35, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639304032, 'issue_id': 2784443473, 'author': 'KangOl', 'body': '@robodoo r- \r\nNo new stored fields in stable.', 'created_at': datetime.datetime(2025, 2, 6, 9, 41, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639863428, 'issue_id': 2784443473, 'author': 'AntoineVDV', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 13, 41, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2639907465, 'issue_id': 2784443473, 'author': 'anko-odoo', 'body': '@robodoo r-', 'created_at': datetime.datetime(2025, 2, 6, 13, 59, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640140103, 'issue_id': 2784443473, 'author': 'AntoineVDV', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 2, 6, 15, 26, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2640474489, 'issue_id': 2784443473, 'author': 'robodoo', 'body': '@anko-odoo @AntoineVDV linked pull request(s) odoo/enterprise#77839 not ready. Linked PRs are not staged until all of them are ready.', 'created_at': datetime.datetime(2025, 2, 6, 17, 0, 5, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:59:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193457.png)](https://mergebot.odoo.com/odoo/odoo/pull/193457)

d-fence on (2025-02-06 09:24:11 UTC): Upgrade exception [#492](https://runbot.odoo.com/odoo/runbot.upgrade.exception/492?menu_id=405) added.

Waiting the forward-port of this pr, the exception will be applied on all builds, and create an inconsistent state for migrations.
**Please forward port this asap up to master without change.** Exception should be forward-ported before the end of the week.

PRs adding fields/models should be merged at the beginning of the week and all the forward ports should be merged in the same week.

If you need to apply any change before it reaches master, please notify runbot team.

Details:
```
module:sale_gelato
module:sale_gelato_stock
module:website_sale_gelato
field:res.config.settings.module_sale_gelato
```
cc @KangOl @nseinlet @aj-fuentes

AntoineVDV on (2025-02-06 09:35:23 UTC): @robodoo r+ rebase-ff override=ci/security
Reason:
- `route`: CSRF protection replaced by a shared secret check;
- `hmac`: used to compare the shared secrets to prevent timing attacks (`odoo.tools.hmac` is not suitable because it relies on the database secret);
- `requests`: one-shot requests made to a hard-coded domain with a small timeout.

Link to ci/security build (18.0): https://runbot.odoo.com/runbot/build/74475260

robodoo on (2025-02-06 09:35:25 UTC): @AntoineVDV you may want to rebuild or fix this PR as it has failed CI.

robodoo on (2025-02-06 09:35:27 UTC): Merge method set to rebase and fast-forward.

KangOl on (2025-02-06 09:41:32 UTC): @robodoo r- 
No new stored fields in stable.

AntoineVDV on (2025-02-06 13:41:12 UTC): @robodoo r+

anko-odoo (Issue Creator) on (2025-02-06 13:59:14 UTC): @robodoo r-

AntoineVDV on (2025-02-06 15:26:33 UTC): @robodoo r+

robodoo on (2025-02-06 17:00:05 UTC): @anko-odoo @AntoineVDV linked pull request(s) odoo/enterprise#77839 not ready. Linked PRs are not staged until all of them are ready.

"
2784441270,pull_request,closed,,[FW][FIX] pos_loyalty: prevent traceback when applying discount code coupons,"Steps:
- Create a discount program with `Discount Code` as the program type.
- Add a coupon for the program using the stat button.
- Open the POS UI and add products to the cart.
- Apply the coupon to the cart.

Issue:
- A traceback error occurs when applying that coupon.

Fix:
- added a validation warning when a user attempts to apply a coupon code from a discount code program type (similar to sales)

Task - 4422507

Forward-Port-Of: odoo/odoo#191894",fw-bot,2025-01-13 15:58:58+00:00,[],2025-01-30 08:45:16+00:00,2025-01-16 08:42:42+00:00,https://github.com/odoo/odoo/pull/193456,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587516799, 'issue_id': 2784441270, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193456.png)](https://mergebot.odoo.com/odoo/odoo/pull/193456)', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587516832, 'issue_id': 2784441270, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 59, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:58:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193456.png)](https://mergebot.odoo.com/odoo/odoo/pull/193456)

fw-bot (Issue Creator) on (2025-01-13 15:59:00 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784440259,pull_request,closed,,[FW][FIX] web: prevent crash with empty calendar color attribute,"Steps to reproduce
==================

- Install industry_fsm,web_studio
- Go to Field Service
- Switch to the calendar view
- Open studio
- Unset the color

=> fields[fieldMapping.color] is undefined

Cause of the issue
==================

We have a field that has the color attribute with a value of color.

```xml
<field name=""worksheet_template_id"" attrs=""{'invisible': [('worksheet_template_id', '=', False)]}"" filters=""1"" color=""color""/>
```

`shouldFetchColor` checks if the filter color is the same one as the calendar record color.

Solution
========

Since it's possible to have a color filter without a record color, we should fetch the filter colors in that case.

opw-4443497

Forward-Port-Of: odoo/odoo#193370
Forward-Port-Of: odoo/odoo#192334",fw-bot,2025-01-13 15:58:41+00:00,[],2025-01-28 15:37:30+00:00,2025-01-14 15:32:14+00:00,https://github.com/odoo/odoo/pull/193455,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587516140, 'issue_id': 2784440259, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193455.png)](https://mergebot.odoo.com/odoo/odoo/pull/193455)', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587516199, 'issue_id': 2784440259, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 45, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:58:43 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193455.png)](https://mergebot.odoo.com/odoo/odoo/pull/193455)

fw-bot (Issue Creator) on (2025-01-13 15:58:45 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784439024,pull_request,closed,,[FW][FIX] account: Fix round globally with reverse charge tax,"Before, the rounding was made by counting twice the same base amount that was leading to an extra ""delta_base_amount_currency"".

See the test in the commit.

opw-4425380

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192484",fw-bot,2025-01-13 15:58:17+00:00,[],2025-01-28 11:17:29+00:00,2025-01-14 11:10:29+00:00,https://github.com/odoo/odoo/pull/193454,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587515027, 'issue_id': 2784439024, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193454.png)](https://mergebot.odoo.com/odoo/odoo/pull/193454)', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587515066, 'issue_id': 2784439024, 'author': 'fw-bot', 'body': '@smetl @clbr-odoo cherrypicking of pull request odoo/odoo#192484 failed.\n\nstdout:\n```\nAuto-merging addons/account/models/account_tax.py\nCONFLICT (content): Merge conflict in addons/account/models/account_tax.py\nAuto-merging addons/purchase/models/purchase_order_line.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589274866, 'issue_id': 2784439024, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 14, 31, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:58:18 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193454.png)](https://mergebot.odoo.com/odoo/odoo/pull/193454)

fw-bot (Issue Creator) on (2025-01-13 15:58:19 UTC): @smetl @clbr-odoo cherrypicking of pull request odoo/odoo#192484 failed.

stdout:
```
Auto-merging addons/account/models/account_tax.py
CONFLICT (content): Merge conflict in addons/account/models/account_tax.py
Auto-merging addons/purchase/models/purchase_order_line.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

smetl on (2025-01-14 08:14:31 UTC): @robodoo r+

"
2784437494,pull_request,closed,,[FW][FIX] point_of_sale: prevent error when splitting a bill with combo,"Before this commit, validating a split bill that contains a combo product would result in a key error.

opw-4416406

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192737
Forward-Port-Of: odoo/odoo#192384",fw-bot,2025-01-13 15:57:50+00:00,[],2025-01-28 11:17:29+00:00,2025-01-14 11:10:25+00:00,https://github.com/odoo/odoo/pull/193453,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587514710, 'issue_id': 2784437494, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193453.png)](https://mergebot.odoo.com/odoo/odoo/pull/193453)', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587514742, 'issue_id': 2784437494, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 58, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587710151, 'issue_id': 2784437494, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo the next pull request (odoo/odoo#193470) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 17, 14, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618846, 'issue_id': 2784437494, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#192384 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589407390, 'issue_id': 2784437494, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 22, 13, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:58:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193453.png)](https://mergebot.odoo.com/odoo/odoo/pull/193453)

fw-bot (Issue Creator) on (2025-01-13 15:58:11 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 17:14:43 UTC): @pedrambiria @adgu-odoo the next pull request (odoo/odoo#193470) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:23 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#192384 is awaiting action (not merged or closed).

pedrambiria on (2025-01-14 09:22:13 UTC): @robodoo r+

"
2784410097,pull_request,closed,,[FW][FIX] stock: prevent crash in mobile stock move line view,"Steps to reproduce
==================

- Use a mobile viewport
- Go to Inventory > Delivery Orders
- Open any record
- Click on a product
- Click on add

=> TypeError: ml.data.quant_id is undefined

Cause of the issue
==================

On mobile, the quant_id field is not present in the view

opw-4288556

Forward-Port-Of: odoo/odoo#192732",fw-bot,2025-01-13 15:49:20+00:00,[],2025-01-28 15:37:02+00:00,2025-01-14 15:13:16+00:00,https://github.com/odoo/odoo/pull/193452,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587491886, 'issue_id': 2784410097, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193452.png)](https://mergebot.odoo.com/odoo/odoo/pull/193452)', 'created_at': datetime.datetime(2025, 1, 13, 15, 49, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587491992, 'issue_id': 2784410097, 'author': 'fw-bot', 'body': '@hubvd @Whenrow cherrypicking of pull request odoo/odoo#192732 failed.\n\nstdout:\n```\nAuto-merging addons/stock/views/stock_move_line_views.xml\nCONFLICT (content): Merge conflict in addons/stock/views/stock_move_line_views.xml\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 49, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618624, 'issue_id': 2784410097, 'author': 'fw-bot', 'body': '@hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589847989, 'issue_id': 2784410097, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 12, 57, 48, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:49:21 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193452.png)](https://mergebot.odoo.com/odoo/odoo/pull/193452)

fw-bot (Issue Creator) on (2025-01-13 15:49:23 UTC): @hubvd @Whenrow cherrypicking of pull request odoo/odoo#192732 failed.

stdout:
```
Auto-merging addons/stock/views/stock_move_line_views.xml
CONFLICT (content): Merge conflict in addons/stock/views/stock_move_line_views.xml

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:13 UTC): @hubvd @Whenrow this forward port of odoo/odoo#192732 is awaiting action (not merged or closed).

hubvd on (2025-01-14 12:57:48 UTC): @robodoo r+

"
2784404292,pull_request,closed,,"[FIX] account: do not affect base of tax without ""is_base_affected""","**Steps to reproduce:**
- Install Accounting
- Create a first tax:
  * Tax Name: Tax1
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax1
  * Tax Group: Tax1
  * Affect Base of Subsequent Taxes: [Checked]
- Create a second tax:
  * Tax Name: Tax2
  * Tax Computation: Percentage of Price
  * Tax Type: Sales
  * Amount: 20%
  * Label on Invoices: Tax2
  * Tax Group: Tax2
  * Base Affected by Previous Taxes: [Not checked]
- Create an invoice
- Add an invoice line
- Add Tax1
- Add Tax2

**Issue:**
Base amount of Tax2 is affected by Tax1 when it should not.

opw-4450494




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",kitan191,2025-01-13 15:47:24+00:00,[],2025-02-06 19:37:23+00:00,2025-01-23 19:26:51+00:00,https://github.com/odoo/odoo/pull/193451,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2587486942, 'issue_id': 2784404292, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193451.png)](https://mergebot.odoo.com/odoo/odoo/pull/193451)', 'created_at': datetime.datetime(2025, 1, 13, 15, 47, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609752488, 'issue_id': 2784404292, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 13, 1, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2609896229, 'issue_id': 2784404292, 'author': 'robodoo', 'body': '@kitan191 @smetl staging failed: ci/l10n on 977fff407f1144035657dd95490c546129bff153 (view more at https://runbot.odoo.com/runbot/build/73834323)', 'created_at': datetime.datetime(2025, 1, 23, 14, 5, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2610189321, 'issue_id': 2784404292, 'author': 'smetl', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 23, 15, 53, 56, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:47:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193451.png)](https://mergebot.odoo.com/odoo/odoo/pull/193451)

smetl on (2025-01-23 13:01:14 UTC): @robodoo r+

robodoo on (2025-01-23 14:05:27 UTC): @kitan191 @smetl staging failed: ci/l10n on 977fff407f1144035657dd95490c546129bff153 (view more at https://runbot.odoo.com/runbot/build/73834323)

smetl on (2025-01-23 15:53:56 UTC): @robodoo r+

"
2784324665,pull_request,closed,,[FIX] point_of_sale: assign lot_id on quants when applicable,"Currently, when buying a product in pos and using a new lot id, the quantities do not reflect this lot id.

Steps to reproduce:
-------------------
* Create a product:
  * Storable
  * Available in POS
  * Tracked by lots
* Open shop session
* Select the product just created
* Enter anything as the lot number
* Finalize order
* Close session
* In the back-end, navigate to the product page
* Select the smart button **On hand**
> Observation: The lot is not reflected

Why the fix:
------------
When the session in closed, `stock.lot` are created but not reflected on the inventory quantity updates.

We can add the `lot_id` when creating move lines as where we mention it, it will always have a related existing lot as per: https://github.com/odoo/odoo/blob/ba21b59d1234d13b5d4460facd60c586648048b8/addons/point_of_sale/models/stock_picking.py#L290

opw-4359435",sbel-odoo,2025-01-13 15:23:26+00:00,[],2025-01-28 15:37:29+00:00,2025-01-14 15:28:55+00:00,https://github.com/odoo/odoo/pull/193450,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2587417038, 'issue_id': 2784324665, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193450.png)](https://mergebot.odoo.com/odoo/odoo/pull/193450)', 'created_at': datetime.datetime(2025, 1, 13, 15, 23, 29, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:23:29 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193450.png)](https://mergebot.odoo.com/odoo/odoo/pull/193450)

"
2784311439,pull_request,closed,,[FW][FIX] website: exclude technical content from search results,"Steps to reproduce:

- Enter website edit mode.
- Drag and drop a ""Products"" dynamic snippet onto the page.
- Drag and drop a ""Search"" snippet onto the page.
- Save the page.
- Perform a search for ""dynamic"" using the search input.
- Bug: The dynamic snippet alert message appears in the results.

The same issue occurs with the ""Embed code"" snippet, where text inside ""<script>"" elements appears in search results.

With this commit, elements like ""css_non_editable_mode_hidden"" and ""<script>"" are excluded from search results.

opw-4420622

Forward-Port-Of: odoo/odoo#192029",fw-bot,2025-01-13 15:20:22+00:00,[],2025-01-28 15:37:28+00:00,2025-01-14 15:28:50+00:00,https://github.com/odoo/odoo/pull/193449,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587402276, 'issue_id': 2784311439, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193449.png)](https://mergebot.odoo.com/odoo/odoo/pull/193449)', 'created_at': datetime.datetime(2025, 1, 13, 15, 20, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587402313, 'issue_id': 2784311439, 'author': 'fw-bot', 'body': 'This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 20, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:20:24 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193449.png)](https://mergebot.odoo.com/odoo/odoo/pull/193449)

fw-bot (Issue Creator) on (2025-01-13 15:20:24 UTC): This PR targets 17.0 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784310487,pull_request,closed,,[FW][PERF] product: Speed-up `product.template._name_search`,"## Description
Following ef90c22efda8a1d56d41eb0739d94733fb574f41, the delegated `_name_search` on `product.product` executed when performing a `name_search` on `product.template` is always unbounded (no limit). For non-selective domains on large databases, this can lead to manipulating extremely large lists of IDs, which are re-injected into other queries, resulting in performance regressions and excessive Postgres memory consumption.

We introduce an upper bound on the delegated `_name_search`. To avoid excessive iterations when there is no limit, the bound is set large enough but not so large that it causes blocking regressions. Each iteration becomes more selective than the previous one, as already found templates are excluded from the search scope.

## Benchmark
On a database with over half-million active products, a non-selective `name_search` that matches 1/3 of the products (For ex: `name='d', args=[('sale_ok', '=', True)]`, which happens during via dropdown of products on a `sale.order`):

|               | Before           | After |
|---------------|------------------|-------|
| Timings (hot) | 15min+ (timeout) | 50ms  |

## Reference
opw-4448182

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193293",fw-bot,2025-01-13 15:20:06+00:00,[],2025-01-28 13:02:57+00:00,2025-01-14 12:59:13+00:00,https://github.com/odoo/odoo/pull/193448,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587400832, 'issue_id': 2784310487, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193448.png)](https://mergebot.odoo.com/odoo/odoo/pull/193448)', 'created_at': datetime.datetime(2025, 1, 13, 15, 20, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587400871, 'issue_id': 2784310487, 'author': 'fw-bot', 'body': '@pivi-odoo cherrypicking of pull request odoo/odoo#193293 failed.\n\nstdout:\n```\nAuto-merging addons/product/models/product_template.py\nCONFLICT (content): Merge conflict in addons/product/models/product_template.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 20, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587548952, 'issue_id': 2784310487, 'author': 'pivi-odoo', 'body': 'Conflict was due to an import conflict and signature change of the `_name_search`.\r\nNature of the patch remains the same.\r\n\r\n@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 16, 10, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588268913, 'issue_id': 2784310487, 'author': 'robodoo', 'body': '@pivi-odoo staging failed: ci/runbot on d8d82ad2ed60f018377998c0c8a1d09d52383fcc (view more at https://runbot.odoo.com/runbot/build/73289937)', 'created_at': datetime.datetime(2025, 1, 13, 21, 35, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589136507, 'issue_id': 2784310487, 'author': 'pivi-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 14, 6, 31, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589217298, 'issue_id': 2784310487, 'author': 'robodoo', 'body': '@pivi-odoo staging failed: ci/runbot on c97649ffaf7080716b056935e533edbf8486a4be (view more at https://runbot.odoo.com/runbot/build/73319127)', 'created_at': datetime.datetime(2025, 1, 14, 7, 36, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589582895, 'issue_id': 2784310487, 'author': 'pivi-odoo', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 14, 10, 45, 6, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:20:07 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193448.png)](https://mergebot.odoo.com/odoo/odoo/pull/193448)

fw-bot (Issue Creator) on (2025-01-13 15:20:08 UTC): @pivi-odoo cherrypicking of pull request odoo/odoo#193293 failed.

stdout:
```
Auto-merging addons/product/models/product_template.py
CONFLICT (content): Merge conflict in addons/product/models/product_template.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

pivi-odoo on (2025-01-13 16:10:35 UTC): Conflict was due to an import conflict and signature change of the `_name_search`.
Nature of the patch remains the same.

@robodoo r+

robodoo on (2025-01-13 21:35:50 UTC): @pivi-odoo staging failed: ci/runbot on d8d82ad2ed60f018377998c0c8a1d09d52383fcc (view more at https://runbot.odoo.com/runbot/build/73289937)

pivi-odoo on (2025-01-14 06:31:34 UTC): @robodoo retry

robodoo on (2025-01-14 07:36:52 UTC): @pivi-odoo staging failed: ci/runbot on c97649ffaf7080716b056935e533edbf8486a4be (view more at https://runbot.odoo.com/runbot/build/73319127)

pivi-odoo on (2025-01-14 10:45:06 UTC): @robodoo retry

"
2784308511,pull_request,closed,,[FW][FIX] web_editor: prevent insertion of link on ctrl+k with video focused,"This PR addresses an issue where selecting a video and pressing Ctrl+K would introduce a link(anchor tag) on top of the video. The fix ensures that pressing Ctrl+K while a video is focused will no longer insert a link,  resolving the issue of an empty link being added.

task-2819776

Forward-Port-Of: odoo/odoo#162615",fw-bot,2025-01-13 15:19:48+00:00,[],2025-01-27 11:51:36+00:00,2025-01-27 11:51:36+00:00,https://github.com/odoo/odoo/pull/193447,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587399743, 'issue_id': 2784308511, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193447.png)](https://mergebot.odoo.com/odoo/odoo/pull/193447)', 'created_at': datetime.datetime(2025, 1, 13, 15, 19, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587399789, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej cherrypicking of pull request odoo/odoo#162615 failed.\n\nstdout:\n```\nAuto-merging addons/web_editor/static/src/js/wysiwyg/wysiwyg.js\nCONFLICT (content): Merge conflict in addons/web_editor/static/src/js/wysiwyg/wysiwyg.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 19, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278757, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2599469030, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 18, 2, 1, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2600472662, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 19, 2, 2, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2601174786, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 20, 2, 2, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603477164, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 21, 2, 2, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2606120335, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 22, 2, 2, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608689819, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 23, 2, 1, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613722114, 'issue_id': 2784308511, 'author': 'fw-bot', 'body': '@perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 25, 2, 1, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615358073, 'issue_id': 2784308511, 'author': 'robinlej', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 27, 10, 22, 1, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:19:49 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193447.png)](https://mergebot.odoo.com/odoo/odoo/pull/193447)

fw-bot (Issue Creator) on (2025-01-13 15:19:49 UTC): @perm-odoo @robinlej cherrypicking of pull request odoo/odoo#162615 failed.

stdout:
```
Auto-merging addons/web_editor/static/src/js/wysiwyg/wysiwyg.js
CONFLICT (content): Merge conflict in addons/web_editor/static/src/js/wysiwyg/wysiwyg.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:43 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-18 02:01:45 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-19 02:02:41 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-20 02:02:48 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-21 02:02:22 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-22 02:02:19 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-23 02:01:45 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-25 02:01:59 UTC): @perm-odoo @robinlej this forward port of odoo/odoo#162615 is awaiting action (not merged or closed).

robinlej on (2025-01-27 10:22:01 UTC): @robodoo r+

"
2784296214,pull_request,closed,,[FW][FIX] resource_mail: added wrench icon for many2one_avatar_resource,"Steps to reproduce:

- Open planning app and click on New.
- A form is opened and searched for a material resource in the Resource field ex. Crane
- An empty photo icon is displayed in the selection bar.

Issue:

- An empty photo icon is being displayed instead of a wrench.

Cause:

- Many2XAutocomplete which adds an image in the many2one selection field is not modified to display
- the wrench icon in the many2one_avatar_resource_field.

Solution:

- A similar modification is done in many2many_avatar_resource_field through class which extends Many2XAutocomplete which can be imported and added into components of many2one_avatar_resource_field.

fix the alignment between of icon and text in many2many_avatar_resource.

task-3801551

Forward-Port-Of: odoo/odoo#193083
Forward-Port-Of: odoo/odoo#157968",fw-bot,2025-01-13 15:16:11+00:00,[],2025-01-29 18:21:57+00:00,2025-01-15 18:18:18+00:00,https://github.com/odoo/odoo/pull/193446,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587390647, 'issue_id': 2784296214, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193446.png)](https://mergebot.odoo.com/odoo/odoo/pull/193446)', 'created_at': datetime.datetime(2025, 1, 13, 15, 16, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587390783, 'issue_id': 2784296214, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77058) did not succeed. You will need to fix it before this can be merged.\n\nBoth this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 16, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588621434, 'issue_id': 2784296214, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 2, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591479207, 'issue_id': 2784296214, 'author': 'fw-bot', 'body': '@kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 2, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:16:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193446.png)](https://mergebot.odoo.com/odoo/odoo/pull/193446)

fw-bot (Issue Creator) on (2025-01-13 15:16:18 UTC): @kthe-odoo @xavierbol while this was properly forward-ported, at least one co-dependent PR (odoo/enterprise#77058) did not succeed. You will need to fix it before this can be merged.

Both this PR and the others will need to be approved via `@robodoo r+` as they are all considered “in conflict”.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:02:25 UTC): @kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-15 02:02:18 UTC): @kthe-odoo @xavierbol this forward port of odoo/odoo#157968 is awaiting action (not merged or closed).

"
2784290017,pull_request,closed,,[FW][FIX] pos_self_order: prevent loading products not available,"Before this commit, if you made a product available in PoS but set it to not be available in self order, it would still appear in the kiosk or mobile menu with an ""out of stock"" tag, which is confusing and not the expected behavior.

opw-4200540

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192738
Forward-Port-Of: odoo/odoo#188663",fw-bot,2025-01-13 15:14:11+00:00,[],2025-01-30 20:32:47+00:00,2025-01-16 20:13:09+00:00,https://github.com/odoo/odoo/pull/193445,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587385529, 'issue_id': 2784290017, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193445.png)](https://mergebot.odoo.com/odoo/odoo/pull/193445)', 'created_at': datetime.datetime(2025, 1, 13, 15, 14, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587385575, 'issue_id': 2784290017, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 14, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588620661, 'issue_id': 2784290017, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 2, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589424131, 'issue_id': 2784290017, 'author': 'pedrambiria', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 9, 29, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589941945, 'issue_id': 2784290017, 'author': 'robodoo', 'body': '@pedrambiria @adgu-odoo staging failed: ci/runbot on 98e5f0eb58f0f450047c6a20072aaf49f79f5c82 (view more at https://runbot.odoo.com/runbot/build/73332313)', 'created_at': datetime.datetime(2025, 1, 14, 13, 41, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591479001, 'issue_id': 2784290017, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 15, 2, 2, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2594313847, 'issue_id': 2784290017, 'author': 'fw-bot', 'body': '@pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 16, 2, 1, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2595933791, 'issue_id': 2784290017, 'author': 'pedrambiria', 'body': '@robodoo retry', 'created_at': datetime.datetime(2025, 1, 16, 14, 50, 51, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:14:12 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193445.png)](https://mergebot.odoo.com/odoo/odoo/pull/193445)

fw-bot (Issue Creator) on (2025-01-13 15:14:13 UTC): @pedrambiria @adgu-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:02:10 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).

pedrambiria on (2025-01-14 09:29:41 UTC): @robodoo r+

robodoo on (2025-01-14 13:41:56 UTC): @pedrambiria @adgu-odoo staging failed: ci/runbot on 98e5f0eb58f0f450047c6a20072aaf49f79f5c82 (view more at https://runbot.odoo.com/runbot/build/73332313)

fw-bot (Issue Creator) on (2025-01-15 02:02:07 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).

fw-bot (Issue Creator) on (2025-01-16 02:01:40 UTC): @pedrambiria @adgu-odoo this forward port of odoo/odoo#188663 is awaiting action (not merged or closed).

pedrambiria on (2025-01-16 14:50:51 UTC): @robodoo retry

"
2784288758,pull_request,closed,,[FW][FIX] base: no properties in server action path,"Scenario: create a server action that updates a properties
Result: traceback error is raised

Issue: server action does not handle updating record properties Fix: ignore the error in _stringify_path method, so the more legible
     ValidationError from _traverse_path is raised instead.

Note: without the fix, the added test failed with ""KeyError: 'discussion_color_code'"", with the fix it doesn't fail (and there is a ""ValidationError: 'The path to the field to update contains a non-relational field (attributes) that is not the last field in …'"").

opw-4339633

Forward-Port-Of: odoo/odoo#193318
Forward-Port-Of: odoo/odoo#192483",fw-bot,2025-01-13 15:13:51+00:00,[],2025-01-28 10:30:27+00:00,2025-01-14 10:25:08+00:00,https://github.com/odoo/odoo/pull/193444,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587384580, 'issue_id': 2784288758, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193444.png)](https://mergebot.odoo.com/odoo/odoo/pull/193444)', 'created_at': datetime.datetime(2025, 1, 13, 15, 13, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587384606, 'issue_id': 2784288758, 'author': 'fw-bot', 'body': '@nle-odoo @ryv-odoo this PR targets master and is the last of the forward-port chain.\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 13, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588618769, 'issue_id': 2784288758, 'author': 'fw-bot', 'body': '@nle-odoo @ryv-odoo this forward port of odoo/odoo#192483 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589253998, 'issue_id': 2784288758, 'author': 'nle-odoo', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 8, 2, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:13:56 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193444.png)](https://mergebot.odoo.com/odoo/odoo/pull/193444)

fw-bot (Issue Creator) on (2025-01-13 15:13:57 UTC): @nle-odoo @ryv-odoo this PR targets master and is the last of the forward-port chain.

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:20 UTC): @nle-odoo @ryv-odoo this forward port of odoo/odoo#192483 is awaiting action (not merged or closed).

nle-odoo on (2025-01-14 08:02:18 UTC): robodoo r+

"
2784285872,pull_request,closed,,[FIX] mail: broken live call participant badge,"Before this commit the `LIVE` badge on the minimized call participant card had some styling issues.
This was caused by missing padding on the related div tag and non-transparent background on the parent tag.
This commit fixes the issue by introducing some padding and removing the css class that adds background opacity.
This commit also removes the now unused css class.

Before:
![Pasted image 20250113125543](https://github.com/user-attachments/assets/f5d36bb9-9b48-45a9-a170-6cb4323f9b9f)
![Pasted image 20250113152305](https://github.com/user-attachments/assets/3260d7a7-ef7c-40a0-9e80-3cb60a871cd1)

After:
![Pasted image 20250113160155](https://github.com/user-attachments/assets/a87bbc52-581e-47dc-838b-a144c8936329)
![Pasted image 20250113160208](https://github.com/user-attachments/assets/b65c022b-8223-4e84-9a06-17201f8680f0)
",Atovange,2025-01-13 15:12:56+00:00,[],2025-01-14 14:43:25+00:00,2025-01-14 14:16:03+00:00,https://github.com/odoo/odoo/pull/193443,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587382031, 'issue_id': 2784285872, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193443.png)](https://mergebot.odoo.com/odoo/odoo/pull/193443)', 'created_at': datetime.datetime(2025, 1, 13, 15, 12, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587572799, 'issue_id': 2784285872, 'author': 'alexkuhn', 'body': 'I would make the change in master (or earliest 18.1 / 18.0).\r\nAlso the style of live button looks best with barely any rounded: `.rounded` like in the discuss sidebar.\r\n<img width=""357"" alt=""Screenshot 2025-01-13 at 17 19 28"" src=""https://github.com/user-attachments/assets/7e509f8f-9102-48c5-a1c4-f1b2b805d440"" />', 'created_at': datetime.datetime(2025, 1, 13, 16, 19, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:12:59 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193443.png)](https://mergebot.odoo.com/odoo/odoo/pull/193443)

alexkuhn on (2025-01-13 16:19:42 UTC): I would make the change in master (or earliest 18.1 / 18.0).
Also the style of live button looks best with barely any rounded: `.rounded` like in the discuss sidebar.
<img width=""357"" alt=""Screenshot 2025-01-13 at 17 19 28"" src=""https://github.com/user-attachments/assets/7e509f8f-9102-48c5-a1c4-f1b2b805d440"" />

"
2784271583,pull_request,closed,,[IMP] mail: show call participants after stopping screen share,"With this commit after stopping screen share the focus ill not be on the card of the user that was precedently sharing the screen.

task-4448823",alexkuhn,2025-01-13 15:09:36+00:00,[],2025-01-25 11:48:24+00:00,2025-01-25 02:44:26+00:00,https://github.com/odoo/odoo/pull/193442,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587367356, 'issue_id': 2784271583, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193442.png)](https://mergebot.odoo.com/odoo/odoo/pull/193442)', 'created_at': datetime.datetime(2025, 1, 13, 15, 9, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587373493, 'issue_id': 2784271583, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 15, 11, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587544220, 'issue_id': 2784271583, 'author': 'robodoo', 'body': ""@alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 13, 16, 8, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598646967, 'issue_id': 2784271583, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 15, 46, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2598704001, 'issue_id': 2784271583, 'author': 'robodoo', 'body': ""@alexkuhn 'ci/runbot' failed on this reviewed PR."", 'created_at': datetime.datetime(2025, 1, 17, 16, 15, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2613118143, 'issue_id': 2784271583, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 24, 18, 11, 55, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:09:38 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193442.png)](https://mergebot.odoo.com/odoo/odoo/pull/193442)

alexkuhn (Issue Creator) on (2025-01-13 15:11:17 UTC): @robodoo r+

robodoo on (2025-01-13 16:08:40 UTC): @alexkuhn 'ci/runbot' failed on this reviewed PR.

alexkuhn (Issue Creator) on (2025-01-17 15:46:07 UTC): @robodoo r+

robodoo on (2025-01-17 16:15:06 UTC): @alexkuhn 'ci/runbot' failed on this reviewed PR.

alexkuhn (Issue Creator) on (2025-01-24 18:11:55 UTC): @robodoo r+

"
2784270438,pull_request,closed,,[FW][FIX] point_of_sale: prevent error when loading order,"Before this commit, selecting an order from the order list and attempting to load it would result in an error.

opw-4251717

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#184754",fw-bot,2025-01-13 15:09:14+00:00,[],2025-01-31 10:24:44+00:00,2025-01-17 10:03:17+00:00,https://github.com/odoo/odoo/pull/193441,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587366426, 'issue_id': 2784270438, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193441.png)](https://mergebot.odoo.com/odoo/odoo/pull/193441)', 'created_at': datetime.datetime(2025, 1, 13, 15, 9, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587366479, 'issue_id': 2784270438, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#184754 failed.\n\nstdout:\n```\nAuto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\nCONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 9, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597278705, 'issue_id': 2784270438, 'author': 'fw-bot', 'body': '@pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 1, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597636653, 'issue_id': 2784270438, 'author': 'pedrambiria', 'body': 'robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 7, 55, 24, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:09:15 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193441.png)](https://mergebot.odoo.com/odoo/odoo/pull/193441)

fw-bot (Issue Creator) on (2025-01-13 15:09:17 UTC): @pedrambiria @davidmonnom cherrypicking of pull request odoo/odoo#184754 failed.

stdout:
```
Auto-merging addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js
CONFLICT (content): Merge conflict in addons/point_of_sale/static/src/app/screens/ticket_screen/ticket_screen.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:01:39 UTC): @pedrambiria @davidmonnom this forward port of odoo/odoo#184754 is awaiting action (not merged or closed).

pedrambiria on (2025-01-17 07:55:24 UTC): robodoo r+

"
2784243845,pull_request,closed,,[FIX] product_margin: correct product margin report,"- Create a customer invoice with **Product A** priced at 1000 and a quantity of 2.

- Add a line with **Product A** at the same price but with a quantity of -1. Confirm the invoice.

In the product margin report, the `total_margin` for **Product A** is shown as 3000, even though we only sold for 1000 (as shown in the balance report). A similar issue occurs when a line on an invoice has a negative price, for instance, due to a discount on a sales order.

Similarly:

- Create a vendor bill with **Product B**, with a cost of 1000 and a quantity of 2.

- Add a line with **Product B**, with the same cost but a quantity of -1.

In the product margin report, the `total_cost` for **Product B** is shown as 3000, even though we only bought for 1000.

In `_compute_product_margin_fields_values`, the SQL query takes the absolute value of the balance of every account move line to compute `total`. This means negative values become positive and are added to the positive values instead of canceling each other out, creating the above issues. As a result, the product margin report does not align with the balance sheet.

The absolute value is used because `total` is used to compute statistics related to both `out_invoice` (e.g., turnover) and `in_invoice` (e.g., total cost), which both need to be positive. However, the same result can be achieved by inverting the sign for `out_invoice`.

opw-4342691



---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",gteboul,2025-01-13 15:01:07+00:00,[],2025-01-28 11:17:37+00:00,2025-01-28 11:17:37+00:00,https://github.com/odoo/odoo/pull/193440,"[('OE', 'the report is linked to a support ticket (opw-...)')]","[{'comment_id': 2587342250, 'issue_id': 2784243845, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193440.png)](https://mergebot.odoo.com/odoo/odoo/pull/193440)', 'created_at': datetime.datetime(2025, 1, 13, 15, 1, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615778934, 'issue_id': 2784243845, 'author': 'gteboul', 'body': 'Hello @Feyensv @jbw-odoo \r\nI completely changed the fix because I discovered a deeper issue beyond just discounts and down payments. The product margin report was wrong when there was an account move line with a negative price. The new fix and test should also resolve issues related to the different modules, as only product_margin is involved now.', 'created_at': datetime.datetime(2025, 1, 27, 13, 34, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618079363, 'issue_id': 2784243845, 'author': 'jbw-odoo', 'body': 'thx !\r\nrobodoo r+', 'created_at': datetime.datetime(2025, 1, 28, 7, 5, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618188976, 'issue_id': 2784243845, 'author': 'robodoo', 'body': '@gteboul @jbw-odoo staging failed: ci/runbot on 498f4188e62442fa7c1835bac6b6bf1cec3c3c0b (view more at https://runbot.odoo.com/runbot/build/74065511)', 'created_at': datetime.datetime(2025, 1, 28, 8, 16, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2618365917, 'issue_id': 2784243845, 'author': 'jbw-odoo', 'body': 'robodoo retry', 'created_at': datetime.datetime(2025, 1, 28, 9, 7, 10, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:01:10 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193440.png)](https://mergebot.odoo.com/odoo/odoo/pull/193440)

gteboul (Issue Creator) on (2025-01-27 13:34:33 UTC): Hello @Feyensv @jbw-odoo 
I completely changed the fix because I discovered a deeper issue beyond just discounts and down payments. The product margin report was wrong when there was an account move line with a negative price. The new fix and test should also resolve issues related to the different modules, as only product_margin is involved now.

jbw-odoo on (2025-01-28 07:05:19 UTC): thx !
robodoo r+

robodoo on (2025-01-28 08:16:08 UTC): @gteboul @jbw-odoo staging failed: ci/runbot on 498f4188e62442fa7c1835bac6b6bf1cec3c3c0b (view more at https://runbot.odoo.com/runbot/build/74065511)

jbw-odoo on (2025-01-28 09:07:10 UTC): robodoo retry

"
2784241973,pull_request,closed,,[FIX] hw_drivers: checkout script path,"Forward-porting [this PR](https://github.com/odoo/odoo/pull/191928) resulted in setting path for checkout script to old path.
The path is now set to the new location (in `iot_box_image` module).
",loouis-t,2025-01-13 15:00:39+00:00,[],2025-01-27 18:24:45+00:00,2025-01-13 18:07:04+00:00,https://github.com/odoo/odoo/pull/193439,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587340874, 'issue_id': 2784241973, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193439.png)](https://mergebot.odoo.com/odoo/odoo/pull/193439)', 'created_at': datetime.datetime(2025, 1, 13, 15, 0, 42, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 15:00:42 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193439.png)](https://mergebot.odoo.com/odoo/odoo/pull/193439)

"
2784229115,pull_request,closed,,[FW][FIX] base: website is not shown in the contact qweb widget,"**Affects**
16.0+

**Steps to reproduce:**

- Render the Contact qweb widget with fields [""phone"", ""website""]

```py
Contact = self.env[""ir.qweb.field.contact""]
partner = self.env[""res.partner""].create(
    {
        ""name"": ""Test Partner"",
        ""phone"": ""1234567890"",
        ""website"": ""https://www.example.com"",
    }
)
result = Contact.value_to_html(partner, {""fields"": [""phone"", ""website""]})
```

**Result:**

- The website is not shown

---

This is a regression introduced in 9e53aea9, in combination with some buggy behavior in the qweb compilation.

Somehow the `t-elif` condition is applying on the next element instead on itself, hiding the website item. I did not investigate this further.


ping @lvsz @ryv-odoo

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#192460
Forward-Port-Of: odoo/odoo#191201",fw-bot,2025-01-13 14:56:40+00:00,[],2025-01-28 10:30:35+00:00,2025-01-14 10:29:20+00:00,https://github.com/odoo/odoo/pull/193438,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587330224, 'issue_id': 2784229115, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193438.png)](https://mergebot.odoo.com/odoo/odoo/pull/193438)', 'created_at': datetime.datetime(2025, 1, 13, 14, 56, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587330253, 'issue_id': 2784229115, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 56, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587583917, 'issue_id': 2784229115, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo the next pull request (odoo/odoo#193461) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 16, 24, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588619422, 'issue_id': 2784229115, 'author': 'fw-bot', 'body': '@ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 14, 2, 1, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2589205482, 'issue_id': 2784229115, 'author': 'ryv-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 14, 7, 28, 7, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:56:41 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193438.png)](https://mergebot.odoo.com/odoo/odoo/pull/193438)

fw-bot (Issue Creator) on (2025-01-13 14:56:42 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 16:24:16 UTC): @ivantodorovich @ryv-odoo the next pull request (odoo/odoo#193461) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-14 02:01:54 UTC): @ivantodorovich @ryv-odoo this forward port of odoo/odoo#191201 is awaiting action (not merged or closed).

ryv-odoo on (2025-01-14 07:28:07 UTC): @robodoo r+

"
2784224680,pull_request,closed,,[FW][FIX] project: Use company id data not company record,"Steps:
- Install project_todo
- Create a second company
- Create a project
- Link the project to a company
- Setup a default value for task.project_id with your new project (1)
- Try to open project_todo

Actual result:
- Error due to company id
- can't adapt type 'res.company'

Expected result:
- No error
- Welcome task is created and project is opened

opw-4465277

Caused by https://github.com/odoo/odoo/pull/173625

Forward-Port-Of: odoo/odoo#193359",fw-bot,2025-01-13 14:55:16+00:00,[],2025-01-28 17:59:25+00:00,2025-01-14 17:48:54+00:00,https://github.com/odoo/odoo/pull/193437,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587326441, 'issue_id': 2784224680, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193437.png)](https://mergebot.odoo.com/odoo/odoo/pull/193437)', 'created_at': datetime.datetime(2025, 1, 13, 14, 55, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587326474, 'issue_id': 2784224680, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 55, 18, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:55:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193437.png)](https://mergebot.odoo.com/odoo/odoo/pull/193437)

fw-bot (Issue Creator) on (2025-01-13 14:55:18 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784214742,pull_request,closed,,[FW][FIX] mail: correctly handle iOS push notifications,"iOS push notifications do not work on Safari: they only work in apps. The notifications are managed by the apps, whether with native mobile app or PWA.

With PWA, it should normally rely on `Notification.permission`, but somehow it doesn't work and always has value ""default"". Its showing has been limited to the PWA, but it keeps showing a persistent notification. Clicking on it the 1st time displays a prompt to either accept or deny the permissions. Afterwards, further clicks on the ""odoobot has a request"" automatically display ""granted"" or ""denied"" based on user initial choice.

iOS push permissions seem to necessarily rely on
`serviceWorker.getRegistration().pushManager`, which works only on HTTPS, hence why iOS push notifications do not work on HTTP. Also actual push permission state are correct there whereas on Notification.permission they are wrong.

This commit fixes the issue by computing the push notification permisssion state correctly on iOS, using
`serviceWorker.getRegistration().pushManager`.

opw-4391766

Backport of
https://github.com/odoo/odoo/pull/178057
https://github.com/odoo/odoo/pull/187038
https://github.com/odoo/odoo/pull/188258

Forward-Port-Of: odoo/odoo#193257",fw-bot,2025-01-13 14:52:21+00:00,[],2025-01-13 21:05:25+00:00,2025-01-13 21:04:21+00:00,https://github.com/odoo/odoo/pull/193436,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587317960, 'issue_id': 2784214742, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193436.png)](https://mergebot.odoo.com/odoo/odoo/pull/193436)', 'created_at': datetime.datetime(2025, 1, 13, 14, 52, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587318051, 'issue_id': 2784214742, 'author': 'fw-bot', 'body': '@alexkuhn @zel-odoo cherrypicking of pull request odoo/odoo#193257 failed.\n\nstdout:\n```\nAuto-merging addons/mail/static/src/core/common/notification_permission_service.js\nAuto-merging addons/mail/static/src/core/web/messaging_menu.js\nCONFLICT (content): Merge conflict in addons/mail/static/src/core/web/messaging_menu.js\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 52, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2588040909, 'issue_id': 2784214742, 'author': 'alexkuhn', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 19, 42, 58, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:52:23 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193436.png)](https://mergebot.odoo.com/odoo/odoo/pull/193436)

fw-bot (Issue Creator) on (2025-01-13 14:52:25 UTC): @alexkuhn @zel-odoo cherrypicking of pull request odoo/odoo#193257 failed.

stdout:
```
Auto-merging addons/mail/static/src/core/common/notification_permission_service.js
Auto-merging addons/mail/static/src/core/web/messaging_menu.js
CONFLICT (content): Merge conflict in addons/mail/static/src/core/web/messaging_menu.js

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alexkuhn on (2025-01-13 19:42:58 UTC): @robodoo r+

"
2784175987,pull_request,closed,,"[FW][FIX] l10n_es_edi_{facturae,sii}: FechaOperacion / OperationDate","Currently the folllowing fields are not set / given in the SII / FaturaE XMLs respectively:
  * `FechaOperacion` (l10n_es_edi_sii)
  * `OperationDate` (l10n_es_edi_facturae)

After this commit they will give the delivery date in case the delivery date is different from the invoice date.

This is basically the same as it was done for TicketBat (l10n_es_edi_tbai) in commit 1451f589895f0867cd40add66e5e6bcbb5ba4a6e already.

opw-4367470

Enterprise PR: https://github.com/odoo/enterprise/pull/76523

Forward-Port-Of: odoo/odoo#192467",fw-bot,2025-01-13 14:40:59+00:00,[],2025-01-27 20:37:59+00:00,2025-01-13 20:20:20+00:00,https://github.com/odoo/odoo/pull/193435,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot'), ('conflict', 'There was an error while creating this forward-port PR')]","[{'comment_id': 2587286435, 'issue_id': 2784175987, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193435.png)](https://mergebot.odoo.com/odoo/odoo/pull/193435)', 'created_at': datetime.datetime(2025, 1, 13, 14, 41, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587286533, 'issue_id': 2784175987, 'author': 'fw-bot', 'body': '@svfu-odoo @RicGR98 cherrypicking of pull request odoo/odoo#192467 failed.\n\nstdout:\n```\nAuto-merging addons/l10n_es_edi_facturae/models/account_move.py\nCONFLICT (content): Merge conflict in addons/l10n_es_edi_facturae/models/account_move.py\nAuto-merging addons/l10n_es_edi_sii/models/account_edi_format.py\n\n```\n\nEither perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).\n\nIn the former case, you may want to edit this PR message as well.\n\n:warning: after resolving this conflict, you will need to merge it via @robodoo.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 41, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587787269, 'issue_id': 2784175987, 'author': 'svfu-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 17, 50, 32, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:41:01 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193435.png)](https://mergebot.odoo.com/odoo/odoo/pull/193435)

fw-bot (Issue Creator) on (2025-01-13 14:41:04 UTC): @svfu-odoo @RicGR98 cherrypicking of pull request odoo/odoo#192467 failed.

stdout:
```
Auto-merging addons/l10n_es_edi_facturae/models/account_move.py
CONFLICT (content): Merge conflict in addons/l10n_es_edi_facturae/models/account_move.py
Auto-merging addons/l10n_es_edi_sii/models/account_edi_format.py

```

Either perform the forward-port manually (and push to this branch, proceeding as usual) or close this PR (maybe?).

In the former case, you may want to edit this PR message as well.

:warning: after resolving this conflict, you will need to merge it via @robodoo.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

svfu-odoo on (2025-01-13 17:50:32 UTC): @robodoo r+

"
2784163313,pull_request,open,,[IMP] hw_drivers: minor syntax and readability improvements,"Description of the issue/feature this PR addresses:

- Interfaces/Drivers `daemon` variable was set to `True` in the `run()` method of the manager thread (`main.py`).
  As all Interfaces/Drivers are daemon threads, we directly defined it in the parent Interface/Driver class.
  In addition, Interface start exception handling has been moved to the interface class itself.
- Some Driver/Interface super calls were still using python2 syntax: `super(ClassName, self)`. 
  Those calls were updated to `super()` following the standard Python3 syntax.

Enterprise PR: [https://github.com/odoo/enterprise/pull/77049](https://github.com/odoo/enterprise/pull/77049)
Task: 4477917",loouis-t,2025-01-13 14:36:57+00:00,[],2025-01-15 09:38:24+00:00,,https://github.com/odoo/odoo/pull/193434,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587276277, 'issue_id': 2784163313, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193434.png)](https://mergebot.odoo.com/odoo/odoo/pull/193434)', 'created_at': datetime.datetime(2025, 1, 13, 14, 37, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:37:03 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193434.png)](https://mergebot.odoo.com/odoo/odoo/pull/193434)

"
2784161660,pull_request,closed,,[FW][FIX] l10n_es: missing lines for agricultural fiscal position,"Two lines that were missing from the ""REAGYP - Agricultura"" Fiscal Position Tax Mapping have been added.

task-4342206

Forward-Port-Of: odoo/odoo#193156
Forward-Port-Of: odoo/odoo#192359",fw-bot,2025-01-13 14:36:27+00:00,[],2025-01-28 11:17:28+00:00,2025-01-14 11:10:21+00:00,https://github.com/odoo/odoo/pull/193433,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587274660, 'issue_id': 2784161660, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193433.png)](https://mergebot.odoo.com/odoo/odoo/pull/193433)', 'created_at': datetime.datetime(2025, 1, 13, 14, 36, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587274686, 'issue_id': 2784161660, 'author': 'fw-bot', 'body': 'This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 36, 28, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:36:28 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193433.png)](https://mergebot.odoo.com/odoo/odoo/pull/193433)

fw-bot (Issue Creator) on (2025-01-13 14:36:28 UTC): This PR targets saas-18.1 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

"
2784154459,pull_request,closed,,[FW][FIX] point_of_sale: fix load onboarding scenario from company branch,"- `point_of_sale`: when creating cash payment methods, we now use the default cash account if it exists.
- `l10n_be_pos_restaurant`: filter taxes to create to avoid recreating same tax in sub company

Description of the issue/feature this PR addresses:

Current behavior before PR:

Desired behavior after PR is merged:




---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr

Forward-Port-Of: odoo/odoo#193275",fw-bot,2025-01-13 14:34:15+00:00,[],2025-01-31 12:44:19+00:00,2025-01-17 12:43:29+00:00,https://github.com/odoo/odoo/pull/193432,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587268741, 'issue_id': 2784154459, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193432.png)](https://mergebot.odoo.com/odoo/odoo/pull/193432)', 'created_at': datetime.datetime(2025, 1, 13, 14, 34, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587268775, 'issue_id': 2784154459, 'author': 'fw-bot', 'body': '@manv-afk @caburj this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193403\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 34, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597277837, 'issue_id': 2784154459, 'author': 'fw-bot', 'body': '@manv-afk @caburj this forward port of odoo/odoo#193275 is awaiting action (not merged or closed).', 'created_at': datetime.datetime(2025, 1, 17, 2, 0, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2597722922, 'issue_id': 2784154459, 'author': 'manv-afk', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 17, 8, 48, 26, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:34:17 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193432.png)](https://mergebot.odoo.com/odoo/odoo/pull/193432)

fw-bot (Issue Creator) on (2025-01-13 14:34:17 UTC): @manv-afk @caburj this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193403

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-17 02:00:49 UTC): @manv-afk @caburj this forward port of odoo/odoo#193275 is awaiting action (not merged or closed).

manv-afk on (2025-01-17 08:48:26 UTC): @robodoo r+

"
2784152317,pull_request,closed,,[FW][FIX] account_payment: fix traceback while generating account payment link,"Currently, a traceback occurs when the user tries to generate a payment link and tries to refresh it.

To reproduce this issue:

1) Install `Accounting`
2) Create a confirmed Customer Invoice
3) Generate a Payment link from `Actions`
4) Change the `Amount` and refresh the tab
5) You can see the error in the terminal

Error:- 
```
KeyError: 'installment_state'
```

This traceback occurs because when the user refreshes the tab, 
it executes the `default_get` method, with self as `payment.link.wizard`.

https://github.com/odoo/odoo/blob/be6b327c17435947fc3f10d30fc8c4730c182aed/odoo/models.py#L1897-L1899

In that `payment.link.wizard`, we have overridden the `default_get` and updated the values from the `_get_default_payment_link_values` method with the model as `account.move`.

https://github.com/odoo/odoo/blob/4787c91c434c7e22ca030bc7a62588482c24b2ab/addons/payment/wizards/payment_link_wizard.py#L21-L23

The method mentioned above will return a dict containing the `installment_state` key-value pair.

https://github.com/odoo/odoo/blob/be6b327c17435947fc3f10d30fc8c4730c182aed/addons/account_payment/models/account_move.py#L128-L132

But `installment_state` is not a field. It is just a variable 
that gets its value from the `_get_invoice_next_payment_values`. 

https://github.com/odoo/odoo/blob/be6b327c17435947fc3f10d30fc8c4730c182aed/addons/account_payment/models/account_move.py#L104

So eventually it leads to the above traceback from the below line. 

https://github.com/odoo/odoo/blob/be6b327c17435947fc3f10d30fc8c4730c182aed/odoo/models.py#L1897-L1899 

sentry-6058398917

Forward-Port-Of: odoo/odoo#191764",fw-bot,2025-01-13 14:33:31+00:00,[],2025-01-29 11:06:39+00:00,2025-01-15 10:45:17+00:00,https://github.com/odoo/odoo/pull/193431,"[('RD', 'research & development, internal work'), ('forwardport', 'This PR was created by @fw-bot'), ('18.2', None)]","[{'comment_id': 2587266957, 'issue_id': 2784152317, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193431.png)](https://mergebot.odoo.com/odoo/odoo/pull/193431)', 'created_at': datetime.datetime(2025, 1, 13, 14, 33, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587266999, 'issue_id': 2784152317, 'author': 'fw-bot', 'body': '@alsh-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:\n* odoo/odoo#193404\n\nTo merge the full chain, use\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 33, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2591884362, 'issue_id': 2784152317, 'author': 'alsh-odoo', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 15, 8, 5, 14, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:33:32 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193431.png)](https://mergebot.odoo.com/odoo/odoo/pull/193431)

fw-bot (Issue Creator) on (2025-01-13 14:33:33 UTC): @alsh-odoo @jbw-odoo this PR targets master and is the last of the forward-port chain containing:
* odoo/odoo#193404

To merge the full chain, use

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

alsh-odoo on (2025-01-15 08:05:14 UTC): @robodoo r+

"
2784138084,pull_request,closed,,[FIX] point_of_sale: fix `getPortalURL()`,"access the url through `order.session._base_url` rather than the `props`
",AH-Yussef,2025-01-13 14:29:18+00:00,['AH-Yussef'],2025-01-16 09:35:36+00:00,2025-01-16 09:34:01+00:00,https://github.com/odoo/odoo/pull/193430,"[('RD', 'research & development, internal work')]","[{'comment_id': 2587255875, 'issue_id': 2784138084, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193430.png)](https://mergebot.odoo.com/odoo/odoo/pull/193430)', 'created_at': datetime.datetime(2025, 1, 13, 14, 29, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587516982, 'issue_id': 2784138084, 'author': 'caburj', 'body': ""kindly resolve ci. looks like your base isn't saas-18.1"", 'created_at': datetime.datetime(2025, 1, 13, 15, 59, 3, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:29:22 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193430.png)](https://mergebot.odoo.com/odoo/odoo/pull/193430)

caburj on (2025-01-13 15:59:03 UTC): kindly resolve ci. looks like your base isn't saas-18.1

"
2784136567,pull_request,closed,,[FW][FIX] stock: prevent crash in mobile stock move line view,"Steps to reproduce
==================

- Use a mobile viewport
- Go to Inventory > Delivery Orders
- Open any record
- Click on a product
- Click on add

=> TypeError: ml.data.quant_id is undefined

Cause of the issue
==================

On mobile, the quant_id field is not present in the view

opw-4288556

Forward-Port-Of: odoo/odoo#192732",fw-bot,2025-01-13 14:28:51+00:00,[],2025-01-27 17:52:36+00:00,2025-01-13 17:52:29+00:00,https://github.com/odoo/odoo/pull/193429,"[('OE', 'the report is linked to a support ticket (opw-...)'), ('forwardport', 'This PR was created by @fw-bot')]","[{'comment_id': 2587254270, 'issue_id': 2784136567, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193429.png)](https://mergebot.odoo.com/odoo/odoo/pull/193429)', 'created_at': datetime.datetime(2025, 1, 13, 14, 28, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587254303, 'issue_id': 2784136567, 'author': 'fw-bot', 'body': 'This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 14, 28, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587491912, 'issue_id': 2784136567, 'author': 'fw-bot', 'body': '@hubvd @Whenrow the next pull request (odoo/odoo#193452) is in conflict. You can merge the chain up to here by saying\n> @robodoo r+\n\nMore info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port', 'created_at': datetime.datetime(2025, 1, 13, 15, 49, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2587522616, 'issue_id': 2784136567, 'author': 'hubvd', 'body': '@robodoo r+', 'created_at': datetime.datetime(2025, 1, 13, 16, 1, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:28:52 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193429.png)](https://mergebot.odoo.com/odoo/odoo/pull/193429)

fw-bot (Issue Creator) on (2025-01-13 14:28:53 UTC): This PR targets saas-17.4 and is part of the forward-port chain. Further PRs will be created up to master.

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

fw-bot (Issue Creator) on (2025-01-13 15:49:22 UTC): @hubvd @Whenrow the next pull request (odoo/odoo#193452) is in conflict. You can merge the chain up to here by saying

More info at https://github.com/odoo/odoo/wiki/Mergebot#forward-port

hubvd on (2025-01-13 16:01:09 UTC): @robodoo r+

"
2784127965,pull_request,open,,[FIX] stock_account: run fifo with standard price,"When a delivery transfer is made, a stock valuation row is created, the problem encountered is within the ‘_prepare_out_svl_vals’ method, even if the valuation method is set to ‘standard price’ it still starts the ‘_run_fifo’ method by scaling the remaining quantities from the unwanted stock valuation row. 

---
I confirm I have signed the CLA and read the PR guidelines at www.odoo.com/submit-pr
",ArcadioPinto,2025-01-13 14:26:07+00:00,[],2025-01-14 11:00:27+00:00,,https://github.com/odoo/odoo/pull/193428,"[('Logistics', 'about stock, mrp, delivery, purchase')]","[{'comment_id': 2587247295, 'issue_id': 2784127965, 'author': 'robodoo', 'body': '[![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193428.png)](https://mergebot.odoo.com/odoo/odoo/pull/193428)', 'created_at': datetime.datetime(2025, 1, 13, 14, 26, 9, tzinfo=datetime.timezone.utc)}]","robodoo on (2025-01-13 14:26:09 UTC): [![Pull request status dashboard](https://mergebot.odoo.com/odoo/odoo/pull/193428.png)](https://mergebot.odoo.com/odoo/odoo/pull/193428)

"
