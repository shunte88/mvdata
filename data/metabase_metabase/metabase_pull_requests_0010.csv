id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2566728544,pull_request,closed,,"🤖 backported ""fix incorrect handling of offset-based timezones""","  #48329
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-04 16:19:26+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-05 00:09:45+00:00,2024-10-05 00:09:43+00:00,https://github.com/metabase/metabase/pull/48359,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2394337996, 'issue_id': 2566728544, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1361676cd1ef71d7adf5a331eca34d3a531aa580...f8d2f585c53c120da52dd36a745b7e619610c793.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts |', 'created_at': datetime.datetime(2024, 10, 4, 18, 27, 55, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-04 18:27:55 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1361676cd1ef71d7adf5a331eca34d3a531aa580...f8d2f585c53c120da52dd36a745b7e619610c793.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts |

"
2566699800,pull_request,closed,,Update pre-release version nomenclature,"
Closes https://github.com/metabase/metabase/issues/48281

### Description

Updates release logic to allow new prerelease formats (though we currently only plan to use `-beta` )
- `v0.51.0-beta`
- `v0.51.0.1-beta`
- `v0.51.0.2-alpha`
- `v0.51.0.3-RC`

### Checklist

- [x] Unit test coverage
- [x] e2e [test in fork](https://github.com/iethree/metabase/actions/runs/11186828563)
",iethree,2024-10-04 16:01:33+00:00,['iethree'],2024-10-07 13:41:37+00:00,2024-10-07 13:41:35+00:00,https://github.com/metabase/metabase/pull/48357,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2566565145,pull_request,closed,,"🤖 backported ""docs: remove unnecessary hash links""",#48331,github-automation-metabase,2024-10-04 14:48:19+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-04 14:50:01+00:00,2024-10-04 14:50:00+00:00,https://github.com/metabase/metabase/pull/48350,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2566322642,pull_request,closed,,RC -> beta,"### Description
Copy update to change referenced to `release candidate` or `RC` to `beta`

### How to verify
1. Locally, Modify `version.properties` to include beta in the tag. eg: `v1.51.0-beta`
2. Start the BE
3. Navigate to admin -> settings and click the swag button. The modal should include a link to `https://metaba.se/51-beta-swag`

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-04 12:59:52+00:00,['npfitz'],2024-10-08 16:13:33+00:00,2024-10-04 15:15:26+00:00,https://github.com/metabase/metabase/pull/48346,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2566091689,pull_request,closed,,"🤖 backported ""Tiny edit to metric copy""","  #48328
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-04 11:00:34+00:00,"['rafpaf', 'github-automation-metabase']",2024-10-05 19:16:14+00:00,2024-10-05 19:16:09+00:00,https://github.com/metabase/metabase/pull/48343,[],[],
2565989092,pull_request,closed,,Further improved send pulse log,"I was not fully happy with the last interactions. Couple of changes:
- consistent format for channel with or without id
- Consistent use of format `[Pulse {{pulse-id}}]`

Success
```
2024-10-04 09:56:51,301 DEBUG metabase.pulse :: [Pulse 1] Rendered 1 messages for channel email
2024-10-04 09:56:51,301 DEBUG metabase.pulse :: [Pulse 1] Sending to channel :email
2024-10-04 09:56:51,428 DEBUG metabase.pulse :: [Pulse 1] Sent to channel email with 0 retires
```

With retry

```
2024-10-04 10:03:31,543 DEBUG metabase.pulse :: [Pulse 1] Rendered 1 messages for channel email
2024-10-04 10:03:31,543 DEBUG metabase.pulse :: [Pulse 1] Sending to channel :email
2024-10-04 10:03:31,679 WARN metabase.pulse :: [Pulse 1] Failed to send to channel email , retrying...
clojure.lang.ExceptionInfo: Fail {}
        at metabase.channel.email$eval191325$_AMPERSAND_f__191327.invoke(NO_SOURCE_FILE:60)
        at metabase.channel.email$eval191325$fn__191330.invoke(NO_SOURCE_FILE:51)
        at clojure.lang.MultiFn.invoke(MultiFn.java:234)
        at metabase.pulse$send_retrying_BANG_$send_BANG___191198.invoke(NO_SOURCE_FILE:298)
        at clojure.lang.AFn.applyToHelper(AFn.java:152)
...
2024-10-04 10:03:32,288 DEBUG metabase.pulse :: [Pulse 1] Sent to channel email with 1 retires
```",qnkhuat,2024-10-04 10:04:56+00:00,['qnkhuat'],2024-10-08 16:13:29+00:00,2024-10-07 04:05:43+00:00,https://github.com/metabase/metabase/pull/48342,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2565747431,pull_request,closed,,Use hooks for Public/embed API instead of actions,"Removes the old thunk actions from the public and embed settings code, and instead uses the matchers for the RTK query endpoints to make sure that redux is still populated with data. ",oisincoveney,2024-10-04 08:08:03+00:00,['oisincoveney'],2024-10-08 13:27:14+00:00,2024-10-08 13:27:14+00:00,https://github.com/metabase/metabase/pull/48337,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2393101438, 'issue_id': 2565747431, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0b7bf918c43e9f168195527de4b2f8aa69c260e1...96b9d447a9b756f30247d333102801c1447bb0a3.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 4, 8, 9, 41, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-04 08:09:41 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0b7bf918c43e9f168195527de4b2f8aa69c260e1...96b9d447a9b756f30247d333102801c1447bb0a3.

No notifications.

"
2565477576,pull_request,closed,,[Notification] Migrate slack token error email,Epic: https://github.com/metabase/metabase/issues/47438,qnkhuat,2024-10-04 05:27:33+00:00,['qnkhuat'],2024-10-07 11:22:21+00:00,2024-10-07 11:22:19+00:00,https://github.com/metabase/metabase/pull/48333,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2393174510, 'issue_id': 2565477576, 'author': 'crisptrutski', 'body': 'Fooled by the migration code owners again! Sorry for a premature review.', 'created_at': datetime.datetime(2024, 10, 4, 8, 47, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2396071870, 'issue_id': 2565477576, 'author': 'qnkhuat', 'body': ""> What do you think about having some kind of purely declarative representation, with a generic migration to synchronize?\r\n\r\nlet's discuss it here\r\nhttps://metaboat.slack.com/archives/C07318NQ5M2/p1728273551731969"", 'created_at': datetime.datetime(2024, 10, 7, 6, 59, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2396085992, 'issue_id': 2565477576, 'author': 'qnkhuat', 'body': ""@crisptrutski  it's ready for review now if you want to take another look"", 'created_at': datetime.datetime(2024, 10, 7, 7, 6, 27, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-10-04 08:47:46 UTC): Fooled by the migration code owners again! Sorry for a premature review.

qnkhuat (Issue Creator) on (2024-10-07 06:59:52 UTC): let's discuss it here
https://metaboat.slack.com/archives/C07318NQ5M2/p1728273551731969

qnkhuat (Issue Creator) on (2024-10-07 07:06:27 UTC): @crisptrutski  it's ready for review now if you want to take another look

"
2565335996,pull_request,closed,,docs: remove unnecessary hash links,For https://github.com/metabase/metabase.github.io/pull/3934,alexyarosh,2024-10-04 03:03:34+00:00,['alexyarosh'],2024-10-04 14:50:27+00:00,2024-10-04 14:47:24+00:00,https://github.com/metabase/metabase/pull/48331,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2565287500,pull_request,closed,,Do not clear http channels when sending pulse,"When sending pulses, we have a function that delete PulseChannels that has no ""recipients"",(e.g: no email addresses for email, no channel for slack).

The logic to check this doesn't take into account HTTP channels, and it mistakenly deleted all of them.

It's silly that it was not caught in the test, even though we had a flow test, but it does not use the `send-pulse` function in the `task` namespace. I updated the test, so it's more e2e now.

[thread](https://metaboat.slack.com/archives/C07318NQ5M2/p1727989441710569)",qnkhuat,2024-10-04 02:13:17+00:00,['qnkhuat'],2024-10-08 16:13:35+00:00,2024-10-04 09:46:20+00:00,https://github.com/metabase/metabase/pull/48330,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2565275897,pull_request,closed,,fix incorrect handling of offset-based timezones,"Closes https://github.com/metabase/metabase/issues/47835

### Description

This PR fixes incorrect data positioning on charts by modifying the way offset based timezones are handled. Now we adjust dates while including the timezone offset when timezone is represented by offsetMinutes. 

### How to verify

You can follow the original steps from the issue which requires running a SQL Server instance with Auckland timezone but the visual spec I added uses is based on the dataset produced by the steps and its `results_timezone` is `+13:00`. 

### Demo

Before
<img width=""553"" alt=""Screenshot 2024-10-03 at 9 54 50 PM"" src=""https://github.com/user-attachments/assets/d3214234-bc98-4498-b36d-a6b1bb1ccc3e"">

After
<img width=""556"" alt=""Screenshot 2024-10-03 at 9 55 15 PM"" src=""https://github.com/user-attachments/assets/b17a294b-75bd-4486-967d-6e63e8cb4cea"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-04 01:59:11+00:00,['alxnddr'],2024-10-04 16:18:38+00:00,2024-10-04 16:18:37+00:00,https://github.com/metabase/metabase/pull/48329,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2565271772,pull_request,closed,,Tiny edit to metric copy,its -> it's,rafpaf,2024-10-04 01:54:10+00:00,['rafpaf'],2024-10-08 16:13:35+00:00,2024-10-04 10:59:48+00:00,https://github.com/metabase/metabase/pull/48328,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2392639734, 'issue_id': 2565271772, 'author': 'rafpaf', 'body': '* **#48328** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48328?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 4, 1, 54, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2393434198, 'issue_id': 2565271772, 'author': 'rafpaf', 'body': '### Merge activity\n\n* **Oct 4, 6:59 AM EDT**: @rafpaf started a stack merge that includes this pull request via [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/48328).\n* **Oct 4, 6:59 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/48328).', 'created_at': datetime.datetime(2024, 10, 4, 10, 59, 19, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-04 01:54:26 UTC): * **#48328** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48328?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-04 10:59:19 UTC): ### Merge activity

* **Oct 4, 6:59 AM EDT**: @rafpaf started a stack merge that includes this pull request via [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/48328).
* **Oct 4, 6:59 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/48328).

"
2565120388,pull_request,closed,,Hide entity ids when an instance has serialization disabled,"

### Description

Entity ids are useless unless an instance has serialization enabled, so let's conditionally hide this component in question and dashboard sidebars based on the presence of that feature.

![Screen Shot 2024-10-03 at 4 50 18 PM](https://github.com/user-attachments/assets/e34ed59f-d00c-480c-ae67-bf5ff63adf4c)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-10-03 22:50:55+00:00,['iethree'],2024-10-08 16:13:28+00:00,2024-10-07 13:56:59+00:00,https://github.com/metabase/metabase/pull/48327,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('Bug:v51', 'bugs or regressions introduced in v51')]",[],
2564978226,pull_request,closed,,"🤖 backported ""docs - saml page edits and SLO""",#47261,github-automation-metabase,2024-10-03 20:48:45+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-03 20:50:29+00:00,2024-10-03 20:50:29+00:00,https://github.com/metabase/metabase/pull/48324,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2564953408,pull_request,closed,,"🤖 backported ""guard database create route""",#48308,github-automation-metabase,2024-10-03 20:32:42+00:00,"['npfitz', 'github-automation-metabase']",2024-10-04 13:59:26+00:00,2024-10-04 13:59:25+00:00,https://github.com/metabase/metabase/pull/48321,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2564930382,pull_request,closed,,add security-events: write to uberjar permissions,"### Description

The Trivy vulnerability scanner upload requires additional permissions. Since the ee-extra overrode the default permissions it is now failing.

### How to verify

1. Push to master
2. Check that docker image is created and pushed
",oreonl,2024-10-03 20:17:46+00:00,['oreonl'],2024-10-08 16:13:37+00:00,2024-10-03 20:21:02+00:00,https://github.com/metabase/metabase/pull/48320,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2564787770,pull_request,closed,,"🤖 backported ""tweak the copy of CC and BCC setting""",#48272,github-automation-metabase,2024-10-03 18:53:54+00:00,"['luizarakaki', 'github-automation-metabase']",2024-10-09 12:34:14+00:00,2024-10-09 12:34:13+00:00,https://github.com/metabase/metabase/pull/48318,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2564779641,pull_request,closed,,"🤖 backported ""Use context for field id computation while hydrating dashbaord""","  #47820
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-03 18:50:22+00:00,"['lbrdnk', 'github-automation-metabase']",2024-10-07 09:47:21+00:00,2024-10-07 09:47:19+00:00,https://github.com/metabase/metabase/pull/48317,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2564754815,pull_request,closed,,sunburst improvements,"Thread https://metaboat.slack.com/archives/C064QMXEV9N/p1727976022922249 

### Description

Making two improvements to the sunburst chart

1. Percentages on the chart and in the tooltip should be relative to the parent slices' total, not the overall total. These changes can be found in `echarts/pie/model/index.ts` and `visualizations/PieChart/use-chart-events.ts`

2. Dimension picker hover styles should match the pie slices widget style. Particularly, we should show the grab cursor when hovering over the dimension picker, and also apply brand color to the handle icon.

### How to verify

1. Create a sunburst chart
2. Enable percentages on chart, confirm values match expectations on chart and tooltip
3. Hover over the dimension picker for each ring, confirm styles are as expected

### Demo

![image](https://github.com/user-attachments/assets/72f60842-8e40-4996-bb12-bb8e937194ac)


https://github.com/user-attachments/assets/73b67f33-46fe-439b-9a53-8b10d072763c


https://github.com/user-attachments/assets/ea0997b5-77a1-47fa-b307-73ed925064ff

Confirming the component styles are correct on line chart as well

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-10-03 18:41:57+00:00,['EmmadUsmani'],2024-10-08 16:13:34+00:00,2024-10-04 14:41:02+00:00,https://github.com/metabase/metabase/pull/48316,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2392085411, 'issue_id': 2564754815, 'author': 'EmmadUsmani', 'body': '* **#48316** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48316?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 3, 18, 42, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392087804, 'issue_id': 2564754815, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff aee56f5892af8e34e76d8d3a2cd3616327ad6538...665e4235b6a3144997c0a871eb8764dc86221260.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.styled.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/DimensionsWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts |', 'created_at': datetime.datetime(2024, 10, 3, 18, 43, 28, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-10-03 18:42:14 UTC): * **#48316** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48316?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-10-03 18:43:28 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff aee56f5892af8e34e76d8d3a2cd3616327ad6538...665e4235b6a3144997c0a871eb8764dc86221260.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.styled.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/DimensionsWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts |

"
2564682580,pull_request,closed,,"In question sidesheet, improve the 'Based on' section","This PR improves the display of question details, collection information, and source data. Key changes:

1. Improved the ""Based on"" section to show more detailed source information, including database and table/model icons.
2. Harnessed an existing, well-tested utility for retrieving information about what a question is based on, rather than reinventing the utility
3. Improved accessibility and readability of the component by adjusting layout and typography.
4. Add context string for translation of 'Based on'

- [x] Tests have been added/updated to cover changes in this PR",rafpaf,2024-10-03 18:07:28+00:00,['rafpaf'],2024-11-05 02:14:53+00:00,2024-10-14 19:00:08+00:00,https://github.com/metabase/metabase/pull/48315,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2392020997, 'issue_id': 2564682580, 'author': 'rafpaf', 'body': '* **#48315** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48315?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 3, 18, 7, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397823042, 'issue_id': 2564682580, 'author': 'iethree', 'body': ""As discussed, \r\n1. use the approach in [this PR](https://github.com/metabase/metabase/pull/48415) to test a virtual table, and lets update unit tests to check the `href`s in the sidebar\r\n2. let's add a unit test to `getSourceDataParts` that tests the new data shape"", 'created_at': datetime.datetime(2024, 10, 7, 20, 24, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2398614784, 'issue_id': 2564682580, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/08/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 8, 2, 55, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2411947670, 'issue_id': 2564682580, 'author': 'iethree', 'body': ""For follow up (don't block this)\r\n\r\nthe model case is weird. Models always show up as based on themselves 😕 \r\n\r\n![Screen Shot 2024-10-14 at 12 17 24 PM](https://github.com/user-attachments/assets/af80bf1a-b7b6-4a55-b20c-f09853555d51)"", 'created_at': datetime.datetime(2024, 10, 14, 18, 18, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2454417657, 'issue_id': 2564682580, 'author': 'rafpaf', 'body': 'We need to backport this so we can fix the ""models based on themselves"" bug which also appears in v51:\r\n\r\n<img width=""663"" alt=""image"" src=""https://github.com/user-attachments/assets/c96b6479-ada4-472f-84f6-06a425e5e9f7"">', 'created_at': datetime.datetime(2024, 11, 4, 11, 3, 51, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-03 18:07:42 UTC): * **#48315** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48315?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

iethree on (2024-10-07 20:24:35 UTC): As discussed, 
1. use the approach in [this PR](https://github.com/metabase/metabase/pull/48415) to test a virtual table, and lets update unit tests to check the `href`s in the sidebar
2. let's add a unit test to `getSourceDataParts` that tests the new data shape

graphite-app[bot] on (2024-10-08 02:55:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/08/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

iethree on (2024-10-14 18:18:53 UTC): For follow up (don't block this)

the model case is weird. Models always show up as based on themselves 😕 

![Screen Shot 2024-10-14 at 12 17 24 PM](https://github.com/user-attachments/assets/af80bf1a-b7b6-4a55-b20c-f09853555d51)

rafpaf (Issue Creator) on (2024-11-04 11:03:51 UTC): We need to backport this so we can fix the ""models based on themselves"" bug which also appears in v51:

<img width=""663"" alt=""image"" src=""https://github.com/user-attachments/assets/c96b6479-ada4-472f-84f6-06a425e5e9f7"">

"
2564678955,pull_request,closed,,hide dashcard actions when editing iframe card content,"### Description

[We want](https://metaboat.slack.com/archives/C064QMXEV9N/p1727965605832939?thread_ts=1727486608.110099&cid=C064QMXEV9N) not to show the dashcard actions hover popup on iframe cards when editing their content. Also changes copy from `IFrame` to `Iframe` based on the thread.

### Demo (hovered state)

#### Before
<img width=""557"" alt=""Screenshot 2024-10-03 at 2 04 07 PM"" src=""https://github.com/user-attachments/assets/de337a91-f4d4-4899-ab10-ff3148c5dc17"">

#### After
<img width=""558"" alt=""Screenshot 2024-10-03 at 2 04 01 PM"" src=""https://github.com/user-attachments/assets/881c1389-d703-43c9-a7e7-807d2d9741eb"">

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-03 18:05:12+00:00,['alxnddr'],2024-10-08 16:13:31+00:00,2024-10-05 02:37:20+00:00,https://github.com/metabase/metabase/pull/48314,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2564668028,pull_request,closed,,Improve 'Saved in' section of question and dashboard sidesheets,"This PR updates the text for making a collection official from ""Make collection official"" to ""Make official"" across various components and tests.

It also introduces a new `CollectionAuthorityLevelDisplay` component and updates the `CollectionAuthorityLevelIcon` to support showing icons for regular collections.

### How to verify

1. Navigate to a collection that you have permission to make official.
2. Open the collection menu and verify that the option now reads ""Make official"" instead of ""Make collection official"".
3. Check the dashboard and question info sidebars to ensure the collection authority level is displayed correctly, including for regular collections.

- [x] Tests have been added/updated to cover changes in this PR",rafpaf,2024-10-03 17:59:05+00:00,['rafpaf'],2024-10-08 23:42:18+00:00,2024-10-08 23:42:16+00:00,https://github.com/metabase/metabase/pull/48313,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2392006009, 'issue_id': 2564668028, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#48313** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48385](https://github.com/metabase/metabase/pull/48385) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 3, 17, 59, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2394873610, 'issue_id': 2564668028, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/05/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 5, 2, 50, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399798668, 'issue_id': 2564668028, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e992ca2863e32d9153b500869b91233f88c431a2...fb67637ca3dbdc1957dbf80411daddaf831fa92e.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 8, 13, 7, 14, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-03 17:59:21 UTC): * **#48313** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48385](https://github.com/metabase/metabase/pull/48385) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-10-05 02:50:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/05/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

github-actions[bot] on (2024-10-08 13:07:14 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e992ca2863e32d9153b500869b91233f88c431a2...fb67637ca3dbdc1957dbf80411daddaf831fa92e.

No notifications.

"
2564666693,pull_request,closed,,Move dashboard bookmark toggle to dashboard overflow menu,"On master, dashboards are bookmarked/unbookmarked via a toggle in the header:

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/da4f032f-bb1a-4846-a314-d904fad9e0b6.png)

On this branch, you do those things via the dashboard actions menu:

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/64f27e62-d43c-4bc6-9cd7-efb67cfe9fb6.png)

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/f1aa1f41-0736-4155-9b21-f88cb45e2d6f.png)

",rafpaf,2024-10-03 17:58:22+00:00,['rafpaf'],2024-10-08 20:49:12+00:00,2024-10-08 20:49:11+00:00,https://github.com/metabase/metabase/pull/48312,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2398792948, 'issue_id': 2564666693, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#48312** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48385](https://github.com/metabase/metabase/pull/48385) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 4, 17, 50, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-08 04:17:50 UTC): * **#48312** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48385](https://github.com/metabase/metabase/pull/48385) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2564650546,pull_request,closed,,[Spike] Reusing E2E tests for the SDK,"Spike for #48219 

This spike tests the viability of reusing E2E tests for the SDK.

And the result is it's viable reuse test, but it doesn't mean it would be easy. I only test that we could execute certain set of steps in a test for the SDK, but it didn't finish the test. This gives us the signal that at least we can share some steps.
",WiNloSt,2024-10-03 17:48:29+00:00,['WiNloSt'],2024-10-22 15:37:40+00:00,2024-10-22 15:37:36+00:00,https://github.com/metabase/metabase/pull/48311,"[('.Team/Embedding', '')]","[{'comment_id': 2391987945, 'issue_id': 2564650546, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 3, 17, 48, 48, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-03 17:48:48 UTC): <!---conventional commit reminder comment ID-->
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2564608379,pull_request,closed,,guard database create route,"### Description
Adds a route guard to the `/admin/databases/create` page to only allow access if you are an admin. While we don't show a button to navigate to the page for non admins, previously you were able to navigate there by changing the URL. This would bring you to the DB create page, though attempting to create a DB would result in an API error

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Log in with a non admin user that has access to manage a database
2. Go to Admin -> Databases, and add `/create` to the end of the url and press enter
3. You should be taken to the unauthorized page

### Demo
![chrome_vlimIaEFa1](https://github.com/user-attachments/assets/f03a3e9f-0220-4acd-b08b-66de9576207c)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-03 17:31:40+00:00,['npfitz'],2024-10-04 13:59:53+00:00,2024-10-03 20:31:39+00:00,https://github.com/metabase/metabase/pull/48308,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2564475580,pull_request,closed,,Add snowflow events for embedding usage,,oisincoveney,2024-10-03 16:31:32+00:00,['oisincoveney'],2024-10-04 06:31:18+00:00,2024-10-03 20:47:03+00:00,https://github.com/metabase/metabase/pull/48305,"[('.Team/Embedding', '')]",[],
2564436287,pull_request,closed,,[SPIKE] testing Cypress chromeWebSecurity: true,"> [!caution]
> Do not merge this, this is only for testing #48219


Test that changing the default `chromeWebSecurity: true` would break any test or not.

It seems this didn't affect some test suits, but I want to make sure.
",WiNloSt,2024-10-03 16:10:00+00:00,['WiNloSt'],2024-10-22 15:37:54+00:00,2024-10-22 15:37:52+00:00,https://github.com/metabase/metabase/pull/48303,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2391805586, 'issue_id': 2564436287, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 3, 16, 10, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2391807928, 'issue_id': 2564436287, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 205f2239bd3286a9a5a0c29ffafa68d7bbeb3169...56fd533154ab4e60be9be2cdd652e7957a09b390.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/constants/style.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/register.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameVizSettings.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/index.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |\n| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx |', 'created_at': datetime.datetime(2024, 10, 3, 16, 11, 27, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-03 16:10:25 UTC): <!---conventional commit reminder comment ID-->
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-03 16:11:27 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 205f2239bd3286a9a5a0c29ffafa68d7bbeb3169...56fd533154ab4e60be9be2cdd652e7957a09b390.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/constants/style.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/register.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameVizSettings.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/index.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |
| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx |

"
2564307186,pull_request,closed,,"🤖 backported ""Tweak areas emphasis style when hovered""",#48282,github-automation-metabase,2024-10-03 15:06:27+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-03 23:25:06+00:00,2024-10-03 23:25:05+00:00,https://github.com/metabase/metabase/pull/48302,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2391667403, 'issue_id': 2564307186, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a1db95ef19c0bf6d1cb2cb89e5b53837fd537e20...b042a5ded7272df23aa3301491d5b1e6bda7d8f9.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/constants/style.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts |', 'created_at': datetime.datetime(2024, 10, 3, 15, 7, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-03 15:07:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a1db95ef19c0bf6d1cb2cb89e5b53837fd537e20...b042a5ded7272df23aa3301491d5b1e6bda7d8f9.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/constants/style.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts |

"
2564142658,pull_request,closed,,"🤖 backported ""Add isLoadingTabs prop to EntityPicker""","  #47447
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-03 13:57:46+00:00,"['npfitz', 'github-automation-metabase']",2024-10-07 15:10:29+00:00,2024-10-07 15:10:26+00:00,https://github.com/metabase/metabase/pull/48300,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2393888521, 'issue_id': 2564142658, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 124cfc733d512cf325b6f73a0882d700dd354bd2...c1216aa40d26373826304d59462b947eb7e7af6e.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Repeat.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/index.ts<br>frontend/src/metabase/ui/components/feedback/index.ts<br>frontend/src/metabase/ui/theme.ts |', 'created_at': datetime.datetime(2024, 10, 4, 14, 49, 27, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-04 14:49:27 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 124cfc733d512cf325b6f73a0882d700dd354bd2...c1216aa40d26373826304d59462b947eb7e7af6e.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Repeat.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/index.ts<br>frontend/src/metabase/ui/components/feedback/index.ts<br>frontend/src/metabase/ui/theme.ts |

"
2564062388,pull_request,closed,,"🤖 backported ""fix a warning about outdated meta tag""",#47915,github-automation-metabase,2024-10-03 13:24:05+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-03 14:16:46+00:00,2024-10-03 14:16:45+00:00,https://github.com/metabase/metabase/pull/48299,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2563800173,pull_request,closed,,[DO NOT MERGE] Old #47768 holding branch,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-10-03 11:23:15+00:00,['oisincoveney'],2024-10-08 12:48:51+00:00,2024-10-08 12:48:51+00:00,https://github.com/metabase/metabase/pull/48294,"[('.Team/Embedding', '')]","[{'comment_id': 2399756147, 'issue_id': 2563800173, 'author': 'oisincoveney', 'body': 'closing since #48069 is merged', 'created_at': datetime.datetime(2024, 10, 8, 12, 48, 51, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-10-08 12:48:51 UTC): closing since #48069 is merged

"
2563785136,pull_request,closed,,make tests pass on 46970-milestone-2,"We'll need to revert https://github.com/metabase/metabase/pull/48293/commits/0888589d373d694a715582da2c30f8bed2abb8cb before we merge the integration branch on master, but for now this should make make CI green, allowing us to focus on real failures

This should make ci green on https://github.com/metabase/metabase/pull/48069",npretto,2024-10-03 11:17:32+00:00,['npretto'],2024-10-03 16:05:50+00:00,2024-10-03 16:05:49+00:00,https://github.com/metabase/metabase/pull/48293,"[('.Team/Embedding', '')]","[{'comment_id': 2391161038, 'issue_id': 2563785136, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ffdaa4a1c862a28de5db542a23a497834f6dc773...2e15b064aad8f15427b344c833f278cef98a6170.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |', 'created_at': datetime.datetime(2024, 10, 3, 11, 18, 53, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-03 11:18:53 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ffdaa4a1c862a28de5db542a23a497834f6dc773...2e15b064aad8f15427b344c833f278cef98a6170.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |

"
2563721899,pull_request,closed,,[Notification] Migrate alert create email,Epic: https://github.com/metabase/metabase/issues/47438,qnkhuat,2024-10-03 10:46:01+00:00,['qnkhuat'],2024-10-07 09:15:16+00:00,2024-10-07 09:15:13+00:00,https://github.com/metabase/metabase/pull/48292,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2396054218, 'issue_id': 2563721899, 'author': 'qnkhuat', 'body': ""Let's discuss it [here](https://metaboat.slack.com/archives/CKZEMT1MJ/p1728283200544159). wdyt we handle this all-together on a feature branch where I migrate 3 emails? let's this PR about migration this email only."", 'created_at': datetime.datetime(2024, 10, 7, 6, 53, 8, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-10-07 06:53:08 UTC): Let's discuss it [here](https://metaboat.slack.com/archives/CKZEMT1MJ/p1728283200544159). wdyt we handle this all-together on a feature branch where I migrate 3 emails? let's this PR about migration this email only.

"
2563640096,pull_request,closed,,"🤖 backported ""Fix appending to models with existing non-ascii columns""",#48237,github-automation-metabase,2024-10-03 10:07:49+00:00,"['crisptrutski', 'github-automation-metabase']",2024-10-03 13:51:35+00:00,2024-10-03 13:51:33+00:00,https://github.com/metabase/metabase/pull/48291,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2563492251,pull_request,closed,,Add API endpoints for public + embedded entities,"Migrates the public links and embedding pages to RTK queries. I've added public and embedded tags for dashboards and cards, and a public tag for actions.

I've also migrated the Public Links and Embedding sections to use the RTK queries - the table has stayed the same for now, I just changed where the data comes from.",oisincoveney,2024-10-03 08:57:13+00:00,['oisincoveney'],2024-10-08 16:13:36+00:00,2024-10-04 07:30:21+00:00,https://github.com/metabase/metabase/pull/48290,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2563446725,pull_request,closed,,FE - e2e - Cover dashboard drills with tests,"Closes #47219

Epic: #46519
Testing plan: #46520

### Description

:arrow_right:  Use **hide whitespace** option when reviewing this PR ([image](https://github.com/user-attachments/assets/5c090510-72e5-419c-8b68-08780f91e8cd)).

PR adds tests for applying filters for various query stages in dashboards and drilling via dashcard header with the filters applied. It also adds missing FE-side parts for this very feature.

Many tests are skipped, many assertions are commented out. Every such case should have a link to a related GH issue.

Tests for combination of unit of time parameter + non-last-stage filter will come separately (#48445).



### How to verify

- Check if skipped tests and commented out assertions make sense conceptually.
- 2 CI failures are expected:
    - `markdown-link-check`
    - `e2e-tests-dashboard-filters-ee` 
        - I had to introduce a new group because tests were timing out due to 45min limit 
        - this group should succeed in #48610",kamilmielnik,2024-10-03 08:33:48+00:00,['kamilmielnik'],2024-10-17 08:07:59+00:00,2024-10-14 10:57:40+00:00,https://github.com/metabase/metabase/pull/48289,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2407549497, 'issue_id': 2563446725, 'author': 'kamilmielnik', 'body': '@uladzimirdev @romeovs I requested re-review because I added more fixes (some tests were failing when you reviewed the code first time).', 'created_at': datetime.datetime(2024, 10, 11, 14, 35, 8, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-11 14:35:08 UTC): @uladzimirdev @romeovs I requested re-review because I added more fixes (some tests were failing when you reviewed the code first time).

"
2563415197,pull_request,closed,,"🤖 backported ""Add more logging for sending pulse""","It's not actually a backport because the `metabase.pulse` namespace has been vastly improved in 51, so this is some custom logging for 50.

Success log

```
2024-10-04 09:28:53,297 DEBUG metabase.pulse :: Rendering Alert (1: clojure.core$name@a6bee39) via email
2024-10-04 09:28:53,300 DEBUG pulse.render :: Rendering pulse card with chart-type :table and render-type :attachment
2024-10-04 09:28:53,545 DEBUG metabase.pulse :: [Pulse 1] Sending 1 notifications
2024-10-04 09:28:53,546 DEBUG metabase.pulse :: [Pulse 1] Sending to email channel
```

Error with retry log

```
2024-10-04 09:28:55,124 DEBUG metabase.pulse :: Rendering Alert (1: clojure.core$name@a6bee39) via email
2024-10-04 09:28:55,131 DEBUG pulse.render :: Rendering pulse card with chart-type :table and render-type :attachment
2024-10-04 09:28:55,373 DEBUG metabase.pulse :: [Pulse 1] Sending 1 notifications
2024-10-04 09:28:55,373 DEBUG metabase.pulse :: [Pulse 1] Sending to email channel
2024-10-04 09:29:12,071 DEBUG metabase.pulse :: Rendering Alert (1: clojure.core$name@a6bee39) via email
2024-10-04 09:29:12,104 DEBUG pulse.render :: Rendering pulse card with chart-type :table and render-type :attachment
2024-10-04 09:29:12,381 DEBUG metabase.pulse :: [Pulse 1] Sending 1 notifications
2024-10-04 09:29:12,382 DEBUG metabase.pulse :: [Pulse 1] Sending to email channel
2024-10-04 09:29:12,512 WARN metabase.pulse :: [Pulse 1] Error sending to email channel. Retrying...
clojure.lang.ExceptionInfo: Error {}
        at metabase.pulse$send_notification_retrying_BANG_$f__188854.invoke(NO_SOURCE_FILE:541)
        at clojure.lang.AFn.applyToHelper(AFn.java:156)
        at clojure.lang.AFn.applyTo(AFn.java:144)
        at clojure.core$apply.invokeStatic(core.clj:667)
        at clojure.core$apply.invoke(core.clj:662)
        at metabase.util.retry$decorate$fn$reify__119668.call(retry.clj:77)
        at io.github.resilience4j.retry.Retry.lambda$decorateCallable$5(Retry.java:306)
        at metabase.util.retry$decorate$fn__119667.doInvoke(retry.clj:78)
        at clojure.lang.RestFn.applyTo(RestFn.java:137)
        at clojure.core$apply.invokeStatic(core.clj:667)
        at clojure.core$apply.invoke(core.clj:662)
        at metabase.pulse$send_notification_retrying_BANG_.invokeStatic(NO_SOURCE_FILE:545)
        at metabase.pulse$send_notification_retrying_BANG_.doInvoke(NO_SOURCE_FILE:533)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at metabase.pulse$send_notifications_BANG_$fn__188748.invoke(NO_SOURCE_FILE:551)
        at metabase.pulse$send_notifications_BANG_.invokeStatic(NO_SOURCE_FILE:550)
        at metabase.pulse$send_notifications_BANG_.invoke(NO_SOURCE_FILE:
```",github-automation-metabase,2024-10-03 08:17:18+00:00,"['qnkhuat', 'github-automation-metabase']",2024-10-09 13:15:14+00:00,2024-10-09 13:14:47+00:00,https://github.com/metabase/metabase/pull/48288,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2563269857,pull_request,closed,,Fix redundant `isSmallAppBar` prop warning,"### Description

Fixes this warning:

![image](https://github.com/user-attachments/assets/665139d7-056a-4d68-bc22-ccf6afe4b385)


### How to verify

Open app on the index page. There should be no warning in JS console.",kamilmielnik,2024-10-03 06:54:53+00:00,['kamilmielnik'],2024-10-08 16:13:43+00:00,2024-10-03 13:04:44+00:00,https://github.com/metabase/metabase/pull/48287,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2563101332,pull_request,closed,,Add more logging for sending pulse,To help debugging,qnkhuat,2024-10-03 04:33:34+00:00,['qnkhuat'],2024-10-08 16:13:43+00:00,2024-10-03 08:16:30+00:00,https://github.com/metabase/metabase/pull/48286,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2562835482,pull_request,closed,,"🤖 backported ""Add tests for exporting self-joined renamed columns""",#48244,github-automation-metabase,2024-10-02 23:54:14+00:00,"['appleby', 'github-automation-metabase']",2024-10-03 01:27:38+00:00,2024-10-03 01:27:37+00:00,https://github.com/metabase/metabase/pull/48284,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2562828088,pull_request,closed,,Add insights link (or tab) to question and dashboard sidesheets,"Closes #48100

In the dashboard and question sidebars, give EE admins a link to insights:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/1dd32139-0b87-4154-92d7-d2756309b1ce.png)

In the dashboard and question sidebars, give OSS admins a tab with an Insights upsell:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/b6e345a1-a348-4a68-adf0-3d0d01c09a5f.png)

",rafpaf,2024-10-02 23:45:30+00:00,['rafpaf'],2024-10-16 00:09:29+00:00,2024-10-16 00:09:27+00:00,https://github.com/metabase/metabase/pull/48283,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2389988792, 'issue_id': 2562828088, 'author': 'rafpaf', 'body': '* **#48283** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 2, 23, 45, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2390050319, 'issue_id': 2562828088, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/02/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 3, 0, 0, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2393869911, 'issue_id': 2562828088, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8e950e8c1c65c19bea658cc740788b0a086aed55...a9477628ac3f576a5b12ca91423cc0e5a8f2539c.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/gem.svg |', 'created_at': datetime.datetime(2024, 10, 4, 14, 40, 4, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-02 23:45:44 UTC): * **#48283** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-10-03 00:00:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/02/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

github-actions[bot] on (2024-10-04 14:40:04 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8e950e8c1c65c19bea658cc740788b0a086aed55...a9477628ac3f576a5b12ca91423cc0e5a8f2539c.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/gem.svg |

"
2562808823,pull_request,closed,,Tweak areas emphasis style when hovered,"Closes https://github.com/metabase/metabase/issues/48267

### Description

Emphasizes hovered areas a bit more.

### Demo

#### Stacked

Before
<img width=""1638"" alt=""Screenshot 2024-10-02 at 7 16 51 PM"" src=""https://github.com/user-attachments/assets/23b26d66-2eb4-41a0-89ac-0a7325f809b4"">

After
<img width=""1606"" alt=""Screenshot 2024-10-02 at 7 16 29 PM"" src=""https://github.com/user-attachments/assets/bc88ebae-3793-47f3-9893-b0aca7354527"">

#### Non-stacked

Before
<img width=""1322"" alt=""Screenshot 2024-10-02 at 7 18 28 PM"" src=""https://github.com/user-attachments/assets/ffda13d8-06a1-437f-9afe-a00947e2f88d"">

After
<img width=""1318"" alt=""Screenshot 2024-10-02 at 7 18 18 PM"" src=""https://github.com/user-attachments/assets/9b6df702-0fa4-48b2-a5b2-f8aa4c521d4b"">

",alxnddr,2024-10-02 23:20:27+00:00,['alxnddr'],2024-10-03 15:05:32+00:00,2024-10-03 15:05:29+00:00,https://github.com/metabase/metabase/pull/48282,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2562691451,pull_request,closed,,"🤖 backported ""fix: bigquery more resilient querying""","  #48175
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-02 21:47:37+00:00,"['snoe', 'github-automation-metabase']",2024-10-04 18:10:32+00:00,2024-10-04 18:10:30+00:00,https://github.com/metabase/metabase/pull/48279,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2562675802,pull_request,closed,,Bump instance-stats snowplow schema version,"Bumping version without modifying schema since an out-of-date schema was published in SnowcatCloud originally, so we need to upload the correct one with a new version number.

Context: https://metaboat.slack.com/archives/C04FZTRF457/p1727903879601079?thread_ts=1727193075.027819&cid=C04FZTRF457",noahmoss,2024-10-02 21:34:05+00:00,['noahmoss'],2024-10-03 13:17:32+00:00,2024-10-03 13:17:19+00:00,https://github.com/metabase/metabase/pull/48278,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2389734336, 'issue_id': 2562675802, 'author': 'noahmoss', 'body': '* **#48278** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48278?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 2, 21, 34, 20, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-02 21:34:20 UTC): * **#48278** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48278?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2562621325,pull_request,closed,,[MS 1.2] Better Onboarding via First-Time UX [WIP],,nemanjaglumac,2024-10-02 20:52:52+00:00,['nemanjaglumac'],2024-10-05 21:43:15+00:00,2024-10-05 21:43:12+00:00,https://github.com/metabase/metabase/pull/48275,[],"[{'comment_id': 2395205136, 'issue_id': 2562621325, 'author': 'nemanjaglumac', 'body': 'Change of plans.\r\nSuperseded by https://github.com/metabase/metabase/pull/48369', 'created_at': datetime.datetime(2024, 10, 5, 21, 43, 12, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Issue Creator) on (2024-10-05 21:43:12 UTC): Change of plans.
Superseded by https://github.com/metabase/metabase/pull/48369

"
2562597172,pull_request,closed,,docs - image updates,- Bushel full of image updates for 51.,jeff-bruemmer,2024-10-02 20:36:03+00:00,['jeff-bruemmer'],2024-10-08 16:13:34+00:00,2024-10-04 13:13:57+00:00,https://github.com/metabase/metabase/pull/48274,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2562541852,pull_request,closed,,Rename number of decimal places setting,"[Slack convo](https://metaboat.slack.com/archives/C01LQQ2UW03/p1727899018915509?thread_ts=1727883391.793229&cid=C01LQQ2UW03)

Renames ""Minimum number of decimal places"" columns formatting setting to ""Number of decimal places"" which is technically a more correct label",alxnddr,2024-10-02 20:06:24+00:00,['alxnddr'],2024-10-08 16:13:47+00:00,2024-10-02 20:46:10+00:00,https://github.com/metabase/metabase/pull/48273,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2562465786,pull_request,closed,,tweak the copy of CC and BCC setting,Clarify that this setting applies only to Alerts and Subscriptions,luizarakaki,2024-10-02 19:17:39+00:00,['luizarakaki'],2024-10-09 12:34:43+00:00,2024-10-03 18:53:08+00:00,https://github.com/metabase/metabase/pull/48272,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2402200010, 'issue_id': 2562465786, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 9, 12, 34, 41, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 12:34:41 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2562357943,pull_request,closed,,"🤖 backported ""Add v0.50.28 to the list of releases""",#48270,github-automation-metabase,2024-10-02 18:17:44+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-03 13:18:08+00:00,2024-10-03 13:18:08+00:00,https://github.com/metabase/metabase/pull/48271,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2562312761,pull_request,closed,,Add v0.50.28 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-10-02 17:59:35+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-03 13:18:35+00:00,2024-10-02 18:16:41+00:00,https://github.com/metabase/metabase/pull/48270,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2562285865,pull_request,closed,,docs: gauge chart,,alexyarosh,2024-10-02 17:45:55+00:00,['alexyarosh'],2024-10-08 16:58:46+00:00,2024-10-07 16:34:16+00:00,https://github.com/metabase/metabase/pull/48269,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2562276537,pull_request,closed,,Update SDK version to 0.1.37,Update Readme version references and published npm package version to 0.1.37,github-automation-metabase,2024-10-02 17:40:06+00:00,"['heypoom', 'github-automation-metabase']",2024-10-08 16:13:50+00:00,2024-10-02 17:44:21+00:00,https://github.com/metabase/metabase/pull/48268,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2389246801, 'issue_id': 2562276537, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 2, 17, 40, 32, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-02 17:40:32 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2562239688,pull_request,closed,,"Allow grouping bar chart series into ""Other"" category","Closes #41986, closes #11325
[Product doc](https://www.notion.so/metabase/Allow-for-grouping-large-category-counts-into-other-61660fc5206a48ed8ce12a19c2e6ef96)

Makes it possible to group a certain number of series into an ""Other"" series for bar charts

### To verify

1. New > Question > Orders > Count by Created At and User.State > Visualize > Make it a bar chart
2. Open the visualization settings sidebar and click on the ellipsis icon next to the ""User — State"" column
3. Click on the ""Enforce maximum number of series"" checkbox
4. Ensure some series are now grouped into ""Other""
5. Change the number below the checkbox and make sure the changes are reflected on the chart
6. Ensure you can move the columns in and out of the ""Other"" series using the viz settings sidebar
7. Ensure the ""Other"" series behaves like a regular series (you can toggle visibility, it gets highlighted on hover, etc.)

### Demo

https://github.com/user-attachments/assets/de6e5be7-fabb-4cb3-aa85-3e937e3fba08

",kulyk,2024-10-02 17:20:59+00:00,['kulyk'],2024-10-23 15:58:10+00:00,2024-10-23 15:58:08+00:00,https://github.com/metabase/metabase/pull/48265,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2429882743, 'issue_id': 2562239688, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f9e6dfc686b25a9a5aba103b60c3bbe96ce3ba65...41b839563040424e3095257db0e403831e3b853e.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorPicker/ChartSettingColorPicker.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingInputNumeric.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingMaxCategories.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/constants/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/guards.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/other-series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |', 'created_at': datetime.datetime(2024, 10, 22, 17, 42, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-22 17:42:00 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f9e6dfc686b25a9a5aba103b60c3bbe96ce3ba65...41b839563040424e3095257db0e403831e3b853e.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorPicker/ChartSettingColorPicker.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingInputNumeric.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingMaxCategories.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/constants/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/guards.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/other-series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |

"
2561984187,pull_request,closed,,Expose more basic table analysis from Macaw,"This is the glue to expose the new more conservative analysis being added to Macaw for table permission checking.

- [x] Bump Macaw
- [x] Use actual Macaw API
- [x] ~~Add a way to opt-in driver by driver~~
- [x] Put a hard restriction on the drivers we support, in a non-extensible way.",crisptrutski,2024-10-02 15:17:35+00:00,['crisptrutski'],2024-11-26 18:52:33+00:00,2024-10-16 15:20:09+00:00,https://github.com/metabase/metabase/pull/48264,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2388953747, 'issue_id': 2561984187, 'author': 'crisptrutski', 'body': '@noahmoss @tsmacdonald just added you both to get an early heads up of what the API will look like.\r\n\r\nNot ready for review.', 'created_at': datetime.datetime(2024, 10, 2, 15, 19, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2391010084, 'issue_id': 2561984187, 'author': 'crisptrutski', 'body': 'This is ready for discussion at least, perhaps even merging.', 'created_at': datetime.datetime(2024, 10, 3, 10, 2, 9, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-10-02 15:19:17 UTC): @noahmoss @tsmacdonald just added you both to get an early heads up of what the API will look like.

Not ready for review.

crisptrutski (Issue Creator) on (2024-10-03 10:02:09 UTC): This is ready for discussion at least, perhaps even merging.

"
2561862625,pull_request,closed,,Fix root collection links in sidebars,"Closes https://github.com/metabase/metabase/issues/48257

### Description

Ye olde root collection has a null id rears its ugly head again.

### How to verify

- Questions and Dashboards in the root collection now have links to `/collection/root` instead of `/collection/null` in their sidebars

![Screen Shot 2024-10-02 at 8 23 23 AM](https://github.com/user-attachments/assets/d9f43f10-08bc-41e9-bde8-0fadb2a02db9)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-10-02 14:38:09+00:00,['iethree'],2024-10-03 22:09:43+00:00,2024-10-03 22:09:42+00:00,https://github.com/metabase/metabase/pull/48263,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2390429337, 'issue_id': 2561862625, 'author': 'rafpaf', 'body': ""I'd recommend `Urls.collection` but otherwise looks good"", 'created_at': datetime.datetime(2024, 10, 3, 3, 22, 6, tzinfo=datetime.timezone.utc)}]","rafpaf on (2024-10-03 03:22:06 UTC): I'd recommend `Urls.collection` but otherwise looks good

"
2561820764,pull_request,open,,Verify minimum appdb version,"> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) 

_**Per above, please only provide feedback to this PR without merging as I am not yet able to agree to all terms of the *Contributor License Agreement.***_

Closes https://github.com/metabase/metabase/issues/36848

### Description

Adds a check in `verify-db-connection` for the default database version and fails with an error if the version is below the required version level depending on the default database type.

Version minimums ([source](https://www.metabase.com/docs/latest/installation-and-operation/migrating-from-h2#supported-databases-for-storing-your-metabase-application-data)):

- PostgreSQL: 12
- MariaDB: 10.4.0
- MySQL: 8.0.17

_Limitations_

H2 database version is not checked using this approach.

`verify-db-connection` only runs against the default database (pretty sure...), so a follow up task would be required for verifying all configured databases.

### How to verify

Start application with a MySQL or PostgreSQL default database that meets the minimum version requirements, and application startup _will not fail_ due to a minimum version error.

Start application with a MySQL or PostgreSQL default database that _does not_ meet the minimum version requirements, and application startup _will fail_ due to a minimum version error.

Per demo below, the version requirements can be edited to be above the default database's version to artificially produce the minimum version error.

### Demo

Example output below for unmet minimum version. An acceptable version of MySQL (9.0.1) was configured, but the required version was changed during testing too 10.0.17 to demonstrate the unmet version case. The error thrown halts the startup process.
  
![CleanShot 2024-09-28 at 12 45 41](https://github.com/user-attachments/assets/0c97a04f-1842-4842-86ed-7825d510b7b9)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",israelvicars,2024-10-02 14:19:53+00:00,['dpsutton'],2024-11-18 17:05:02+00:00,,https://github.com/metabase/metabase/pull/48262,[],"[{'comment_id': 2389586945, 'issue_id': 2561820764, 'author': 'dpsutton', 'body': '@israelvicars thanks for the contribution! I\'m gonna point out some helpful internal functions that could possibly make this easier for you.\r\n\r\nWe already have a way to get the db version which is probably easier to use.\r\nSee https://github.com/metabase/metabase/blob/master/src/metabase/sync/sync_metadata/dbms_version.clj#L20\r\n\r\nThis function expects a ""database"" object which the app-db doesn\'t actually satisfy, but there\'s some reusable parts there.\r\n\r\nYou can see in https://github.com/metabase/metabase/blob/master/src/metabase/driver/sql_jdbc/sync/dbms_version.clj#L14 there\'s a function that operates on a connection object which you have in the context here. Probably possible to extract that to some shared spot, or perhaps just in-line it into `db.setup`. \r\n\r\nBut this function uses `.getDatabaseMajorVersion` and similar to get the major and minor versions.\r\n\r\nThe method you are using returns a string which will have lots of extra junk. For me, with `.getDatabaseProductVersion` i\'m getting `""10.8.3-MariaDB-1:10.8.3+maria~jammy""`, `""8.3.0""`, and `""14.11 (Homebrew)""` for maria, mysql, and postgres respectively (ignoring h2 for the moment).\r\n\r\nAppropriately hooking up the existing version information we could instead have objects like\r\n\r\n```clojure\r\ndbms-version=> (version :maria)\r\n{:flavor ""MariaDB"",\r\n :version ""10.8.3-MariaDB-1:10.8.3+maria~jammy"",\r\n :semantic-version [10 8]}\r\ndbms-version=> (version :mysql)\r\n{:flavor ""MySQL"", :version ""8.3.0"", :semantic-version [8 3]}\r\ndbms-version=> (version :pg)\r\n{:flavor ""PostgreSQL"",\r\n :version ""14.11 (Homebrew)"",\r\n :semantic-version [14 11]}\r\n```\r\n\r\nYour parse function fails on 2 of 3 of these:\r\n\r\n```clojure\r\ndbms-version=> (parse-version ""10.8.3-MariaDB-1:10.8.3+maria~jammy"")\r\nExecution error (NumberFormatException) at java.lang.NumberFormatException/forInputString (NumberFormatException.java:67).\r\nFor input string: ""3-MariaDB-1:10""\r\ndbms-version=> (parse-version ""8.3.0"")\r\n[8 3 0]\r\ndbms-version=> (parse-version ""14.11 (Homebrew)"")\r\nExecution error (NumberFormatException) at java.lang.NumberFormatException/forInputString (NumberFormatException.java:67).\r\nFor input string: ""11 (Homebrew)""\r\n```\r\n\r\nAnother helpful internal function we have is https://github.com/metabase/metabase/blob/master/src/metabase/driver/util.clj#L283 which can easily help out with the tuples of `[major minor]` that are returned from the functions above.\r\n\r\n```clojure\r\nutil-test=> (driver.u/semantic-version-gte [5 0] [4 0])\r\ntrue\r\nutil-test=> (driver.u/semantic-version-gte [4 0] [5 0])\r\nfalse\r\nutil-test=> (driver.u/semantic-version-gte [5 1] [5 1])\r\ntrue\r\n```\r\n\r\nI think these do a lot of work for you, and you can assemble them tastefully to give a really helpful error message to people. It\'s really frustrating when migrations fail because of outdated db versions and this is a great first pass at it. But luckily you don\'t have to invent as much as you might have thought and we can land this easily!\r\n\r\nedit: we also need to handle h2. We can just blanket pass that no need to check since we control the version number. There is a file version format but the complexities of that are handled elsewhere and that\'s not a concern of this part of the code.', 'created_at': datetime.datetime(2024, 10, 2, 20, 10, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2423259328, 'issue_id': 2561820764, 'author': 'israelvicars', 'body': ""@dpsutton Thanks for the great feedback!!  I'm sorry I missed the notification for it. I wish I'd seen it sooner.\r\n\r\nI'm glad to know there are some existing functions that can be reused, thanks for surfacing those. Also, thanks for those additional test cases. I'll plan to refactor to use those major/minor version functions and test against those cases.\r\n\r\nAbout the MariaDB case, I wasn't checking it since it can't be set as `db-type`, but it looks like I could have found it using `getDabaseProductName`. So this can be improved to address that case too.\r\n\r\nI can look into those changes next week. Again, thanks for the feedback. I'll ping once updated."", 'created_at': datetime.datetime(2024, 10, 18, 21, 30, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2440550340, 'issue_id': 2561820764, 'author': 'israelvicars', 'body': ""@dpsutton Ok, I think we're closer now....\r\n\r\nWe're accessing the db flavor and major/minor versions in a better way ✅ \r\nWe have refactoring to make use of existing functions like `semantic-version-gte` ✅ \r\n\r\nI pulled `semantic-version-gte` and the version comparison helper functions into a new util namespace to address a cyclic dependency error. That made for some out of scope test updates, but they're just namespace changes. \r\n\r\nRunning `clj-kondo` via `./bin/kondo.sh` resulted in no errors, warnings. But when `clj-kondo` was ran via `husky`, the warnings on lines 844 and 877 here were blocking the commit: https://github.com/metabase/metabase/blob/master/test/metabase/query_processor_test/explicit_joins_test.clj#L844 It looks like there's a documented exception already: https://github.com/metabase/metabase/blob/master/.clj-kondo/config.edn#L1087 Maybe it's something with my local since the issue predates my changes and is ignored via `./bin/kondo.sh`? I committed with `--no-verify`, but I can revise if appropriate.\r\n\r\nOne design issue I'd appreciate feedback on is the skipping of `h2`. It's being done in the helper function: https://github.com/metabase/metabase/blob/012433c9ea4f9a4b7d0aca4b6e70833cf428ef33/src/metabase/util/version.clj#L42 Maybe that disqualifies `check-min-version` as a reusable util function so it should be moved to `db.setup`.\r\n\r\nAgain, sorry I missed your previous feedback. I was checking the wrong email address for notifications before, but I'll keep a closer eye on the PR for updates."", 'created_at': datetime.datetime(2024, 10, 28, 4, 53, 44, tzinfo=datetime.timezone.utc)}]","dpsutton (Assginee) on (2024-10-02 20:10:04 UTC): @israelvicars thanks for the contribution! I'm gonna point out some helpful internal functions that could possibly make this easier for you.

We already have a way to get the db version which is probably easier to use.
See https://github.com/metabase/metabase/blob/master/src/metabase/sync/sync_metadata/dbms_version.clj#L20

This function expects a ""database"" object which the app-db doesn't actually satisfy, but there's some reusable parts there.

You can see in https://github.com/metabase/metabase/blob/master/src/metabase/driver/sql_jdbc/sync/dbms_version.clj#L14 there's a function that operates on a connection object which you have in the context here. Probably possible to extract that to some shared spot, or perhaps just in-line it into `db.setup`. 

But this function uses `.getDatabaseMajorVersion` and similar to get the major and minor versions.

The method you are using returns a string which will have lots of extra junk. For me, with `.getDatabaseProductVersion` i'm getting `""10.8.3-MariaDB-1:10.8.3+maria~jammy""`, `""8.3.0""`, and `""14.11 (Homebrew)""` for maria, mysql, and postgres respectively (ignoring h2 for the moment).

Appropriately hooking up the existing version information we could instead have objects like

```clojure
dbms-version=> (version :maria)
{:flavor ""MariaDB"",
 :version ""10.8.3-MariaDB-1:10.8.3+maria~jammy"",
 :semantic-version [10 8]}
dbms-version=> (version :mysql)
{:flavor ""MySQL"", :version ""8.3.0"", :semantic-version [8 3]}
dbms-version=> (version :pg)
{:flavor ""PostgreSQL"",
 :version ""14.11 (Homebrew)"",
 :semantic-version [14 11]}
```

Your parse function fails on 2 of 3 of these:

```clojure
dbms-version=> (parse-version ""10.8.3-MariaDB-1:10.8.3+maria~jammy"")
Execution error (NumberFormatException) at java.lang.NumberFormatException/forInputString (NumberFormatException.java:67).
For input string: ""3-MariaDB-1:10""
dbms-version=> (parse-version ""8.3.0"")
[8 3 0]
dbms-version=> (parse-version ""14.11 (Homebrew)"")
Execution error (NumberFormatException) at java.lang.NumberFormatException/forInputString (NumberFormatException.java:67).
For input string: ""11 (Homebrew)""
```

Another helpful internal function we have is https://github.com/metabase/metabase/blob/master/src/metabase/driver/util.clj#L283 which can easily help out with the tuples of `[major minor]` that are returned from the functions above.

```clojure
util-test=> (driver.u/semantic-version-gte [5 0] [4 0])
true
util-test=> (driver.u/semantic-version-gte [4 0] [5 0])
false
util-test=> (driver.u/semantic-version-gte [5 1] [5 1])
true
```

I think these do a lot of work for you, and you can assemble them tastefully to give a really helpful error message to people. It's really frustrating when migrations fail because of outdated db versions and this is a great first pass at it. But luckily you don't have to invent as much as you might have thought and we can land this easily!

edit: we also need to handle h2. We can just blanket pass that no need to check since we control the version number. There is a file version format but the complexities of that are handled elsewhere and that's not a concern of this part of the code.

israelvicars (Issue Creator) on (2024-10-18 21:30:19 UTC): @dpsutton Thanks for the great feedback!!  I'm sorry I missed the notification for it. I wish I'd seen it sooner.

I'm glad to know there are some existing functions that can be reused, thanks for surfacing those. Also, thanks for those additional test cases. I'll plan to refactor to use those major/minor version functions and test against those cases.

About the MariaDB case, I wasn't checking it since it can't be set as `db-type`, but it looks like I could have found it using `getDabaseProductName`. So this can be improved to address that case too.

I can look into those changes next week. Again, thanks for the feedback. I'll ping once updated.

israelvicars (Issue Creator) on (2024-10-28 04:53:44 UTC): @dpsutton Ok, I think we're closer now....

We're accessing the db flavor and major/minor versions in a better way ✅ 
We have refactoring to make use of existing functions like `semantic-version-gte` ✅ 

I pulled `semantic-version-gte` and the version comparison helper functions into a new util namespace to address a cyclic dependency error. That made for some out of scope test updates, but they're just namespace changes. 

Running `clj-kondo` via `./bin/kondo.sh` resulted in no errors, warnings. But when `clj-kondo` was ran via `husky`, the warnings on lines 844 and 877 here were blocking the commit: https://github.com/metabase/metabase/blob/master/test/metabase/query_processor_test/explicit_joins_test.clj#L844 It looks like there's a documented exception already: https://github.com/metabase/metabase/blob/master/.clj-kondo/config.edn#L1087 Maybe it's something with my local since the issue predates my changes and is ignored via `./bin/kondo.sh`? I committed with `--no-verify`, but I can revise if appropriate.

One design issue I'd appreciate feedback on is the skipping of `h2`. It's being done in the helper function: https://github.com/metabase/metabase/blob/012433c9ea4f9a4b7d0aca4b6e70833cf428ef33/src/metabase/util/version.clj#L42 Maybe that disqualifies `check-min-version` as a reusable util function so it should be moved to `db.setup`.

Again, sorry I missed your previous feedback. I was checking the wrong email address for notifications before, but I'll keep a closer eye on the PR for updates.

"
2561783500,pull_request,closed,,"Distinguish multiple ""Summaries"" column groups in dashboard filter mapping","Closes #48260

Depends on #48254

### How to verify

1. Create a query with aggregations in at least 2 stages ([example](https://github.com/user-attachments/assets/d9d1be0a-7a60-40e0-b065-8148bfc3b180)) and add it to a dashboard
2. Columns from different summary stages should be distinguishable

CI won't be green - 1 test is failing because of #48258

### Demo

[before](https://github.com/user-attachments/assets/df163164-2768-4a53-8a42-03f1b917aa11) vs [after](https://github.com/user-attachments/assets/a51203e3-310f-460c-80a5-d99963189c51)


",kamilmielnik,2024-10-02 14:04:04+00:00,['kamilmielnik'],2024-10-03 13:15:01+00:00,2024-10-03 13:14:59+00:00,https://github.com/metabase/metabase/pull/48261,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2561674031,pull_request,closed,,(wip) Sidesheet followups,"(wip)
follow up work for sidesheets",rafpaf,2024-10-02 13:23:58+00:00,['rafpaf'],2025-02-04 17:33:18+00:00,2024-10-07 19:14:05+00:00,https://github.com/metabase/metabase/pull/48259,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2388638102, 'issue_id': 2561674031, 'author': 'rafpaf', 'body': '* **#48259** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48259?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 2, 13, 24, 13, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-02 13:24:13 UTC): * **#48259** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48259?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2561339905,pull_request,closed,,fix(sdk): fix zindex issues after switch to portals,"Fixes https://metaboat.slack.com/archives/C063Q3F1HPF/p1727862906441629 and similar issues

### Description

This is the ""minimum viable fix"" as handling z-index on an sdk is not an easy issue and we have other priorities at the moment.

Before this zindex change I tried to put `isolation:isolate` on the MetabaseProvide, on the Public component wrapper and on the Portal hoping it would work. It works for simple cases but it failed on shoppy where we use Mantine modals in the app, and they use a portal that renders below our portal, making popovers broken.

# Demo
<img width=""1452"" alt=""image"" src=""https://github.com/user-attachments/assets/a3b92305-5ed6-46b0-a855-89c7f3ec383f"">


",npretto,2024-10-02 11:33:58+00:00,['npretto'],2024-10-08 16:13:51+00:00,2024-10-02 13:55:32+00:00,https://github.com/metabase/metabase/pull/48256,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2561216200,pull_request,closed,,Removing nemanja from querying,As per title :) ,imrkd,2024-10-02 10:28:39+00:00,['imrkd'],2024-10-08 16:13:52+00:00,2024-10-02 10:46:42+00:00,https://github.com/metabase/metabase/pull/48255,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2561022551,pull_request,closed,,Allow filtering on columns from all stages in dashboards,"Closes #48253

### Description

The epic got changed because #47800 got merged in the meantime - we want dashboard filters to work the same as in filters modal in QB.

This PR:
- updates the stage indexes for which filters are available in dashboards
- updates tests after #47805
- updates tests after #47936
  - see https://github.com/metabase/metabase/issues/47184#issuecomment-2310056353

### How to verify

1. Create a multi-stage query (question or model) and add it to dashboard
2. It should be possible to map dashboard filters to every filter that is available in filter modal in query builder for a given entity

CI won't be green - 1 test is failing because of #48258",kamilmielnik,2024-10-02 09:03:08+00:00,['kamilmielnik'],2024-10-03 13:03:42+00:00,2024-10-03 13:03:39+00:00,https://github.com/metabase/metabase/pull/48254,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2560862076,pull_request,closed,,Bump HoneySQL to 2.6.1161 ,"This DRY's up all the quoting helpers, fixes one more spot that was hiding, and updates our dependency.

**Don't merge this until we've updated the Clickhouse driver**

### TODO

- [x] Merge https://github.com/ClickHouse/metabase-clickhouse-driver/pull/273
- [ ] Cut Clickhouse version release
- [ ] Update https://github.com/metabase/metabase-registry/blob/main/registry.yaml",crisptrutski,2024-10-02 07:36:40+00:00,['crisptrutski'],2024-11-26 18:52:28+00:00,2024-10-21 14:16:22+00:00,https://github.com/metabase/metabase/pull/48252,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2387823408, 'issue_id': 2560862076, 'author': 'crisptrutski', 'body': '@piranha what do you think about backporting this version bump?', 'created_at': datetime.datetime(2024, 10, 2, 7, 41, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2391424507, 'issue_id': 2560862076, 'author': 'piranha', 'body': '@crisptrutski I missed your message about backporting it, but I guess it makes sense if we want to make clickhouse driver work everywhere, right?', 'created_at': datetime.datetime(2024, 10, 3, 13, 28, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392620832, 'issue_id': 2560862076, 'author': 'qnkhuat', 'body': 'on backport: are we sure there are no breaking changes in the upgrade?\r\n\r\nhttps://github.com/seancorfield/honeysql/releases\r\n> Update Clojure versions (to 1.11.4 & 1.12.0-rc2).\r\n\r\nthis should not be an issue right?', 'created_at': datetime.datetime(2024, 10, 4, 1, 31, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392940332, 'issue_id': 2560862076, 'author': 'crisptrutski', 'body': ""> on backport: are we sure there are no breaking changes in the upgrade?\n\nWe believe we found and adjusted for all the breaking changes through our tests. We make *extensive* use of the library in our tests. I also didn't see anything else in the changelog that raised concerns.\n\n> > Update Clojure versions (to 1.11.4 & 1.12.0-rc2).\n\nThese are just the versions they test against, and since we're on a newer version there really shouldn't be a problem."", 'created_at': datetime.datetime(2024, 10, 4, 6, 43, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2426817068, 'issue_id': 2560862076, 'author': 'crisptrutski', 'body': 'Merging this without waiting on the Clickhouse driver, as it requires a new release to support 51 in any case.', 'created_at': datetime.datetime(2024, 10, 21, 14, 16, 18, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-10-02 07:41:19 UTC): @piranha what do you think about backporting this version bump?

piranha on (2024-10-03 13:28:29 UTC): @crisptrutski I missed your message about backporting it, but I guess it makes sense if we want to make clickhouse driver work everywhere, right?

qnkhuat on (2024-10-04 01:31:36 UTC): on backport: are we sure there are no breaking changes in the upgrade?

https://github.com/seancorfield/honeysql/releases

this should not be an issue right?

crisptrutski (Issue Creator) on (2024-10-04 06:43:20 UTC): We believe we found and adjusted for all the breaking changes through our tests. We make *extensive* use of the library in our tests. I also didn't see anything else in the changelog that raised concerns.


These are just the versions they test against, and since we're on a newer version there really shouldn't be a problem.

crisptrutski (Issue Creator) on (2024-10-21 14:16:18 UTC): Merging this without waiting on the Clickhouse driver, as it requires a new release to support 51 in any case.

"
2560381399,pull_request,closed,,Batch Add Milestones to new release branch,"Closes https://github.com/metabase/metabase/issues/47785

### Description

When we cut a new release branch, we want to automatically add milestones to all commits in that branch (or issues traceable to commits in that branch that don't already have a milestone.

How we do this:

1. find the commit where the last release branch forked off of master
2. get all commits between the head of the new release branch and that fork commit
3. feed those commit descriptions to the existing logic that sets milestones on individual commits when they merge to the release branch.

- [x] this [test run](https://github.com/iethree/metabase/actions/runs/11134949547/job/30944349197) is about as good as we can test without doing it live
- [x] I also ran a local test and it successfully parsed the whole release branch in my fork without hitting a github rate limit (5000 reqs/hr). It is likely that in the future we'll have to revisit this as the team grows and releases get bigger.

For posterity:

One way to deal with the github rate limit would be to split the job into:
1) find all the issues that need to be milestoned
2) write those issue numbers to a file 
3) set milestones on all those issues with a separate token.
",iethree,2024-10-01 23:29:24+00:00,['iethree'],2024-10-02 22:47:45+00:00,2024-10-02 22:47:43+00:00,https://github.com/metabase/metabase/pull/48250,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2560308599,pull_request,closed,,Add some more examples to db querying docstrings in dev.clj,"### Description

Add some small examples to the docstrings of `dev/query-jdbc-db` and `t2.connection/do-with-connection :model/Database` to demonstrate querying against the Sample Database.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-01 22:15:27+00:00,['appleby'],2024-10-09 20:59:50+00:00,2024-10-09 19:33:50+00:00,https://github.com/metabase/metabase/pull/48248,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2560288070,pull_request,closed,,Fix typo in devguide,"### Description

Fix typo in devguide `s/:mb-postgres-test/:mb-postgresql-test/`.

Stumbled on this when onboarding and setting values in my `.lein-env`

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-01 22:04:02+00:00,['appleby'],2024-11-26 18:52:52+00:00,2024-10-08 17:16:52+00:00,https://github.com/metabase/metabase/pull/48247,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2560281772,pull_request,closed,,Do not ignore-errors in pprint-native-query-with-best-strategy,"### Description

Do not ignore-errors in `pprint-native-query-with-best-strategy`. Return a description of the Exception that occurred instead. This is helpful for debugging if `query->raw-native-query` throws an exception.

Fwiw, this was helpful while working on #47584 as the query in question would not compile prior to fixing the bug.

### How to verify

This function is called by the macro `with-native-query-testing-context`. Run any test that uses that macro, and give it some query that fails to compile.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-01 21:58:25+00:00,['appleby'],2024-10-09 20:18:49+00:00,2024-10-09 19:34:12+00:00,https://github.com/metabase/metabase/pull/48246,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2560165024,pull_request,closed,,feat: move auth providers behind ee token,"Fixes #48235

Introduces new premium feature `database-auth-providers`. Moves fetch-auth behind defenterprise - oss will always return an empty map.
Add metabase.util.http to test outbound http requests.
",snoe,2024-10-01 20:36:01+00:00,['snoe'],2024-10-07 16:13:28+00:00,2024-10-07 16:13:26+00:00,https://github.com/metabase/metabase/pull/48245,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Drivers', '')]",[],
2559998868,pull_request,closed,,Add tests for exporting self-joined renamed columns,"### Description

Regression tests for #48046 to accompany the backport in #48243. This is a separate PR in order to keep the backport PR limited to backporting, and also to follow the standard merge flow of master > release branch.

### How to verify

Run the tests

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-01 19:13:47+00:00,['appleby'],2024-10-03 01:28:05+00:00,2024-10-02 23:53:20+00:00,https://github.com/metabase/metabase/pull/48244,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2559974655,pull_request,closed,,backport: Support both name & field ref-based column keys in viz settings on read and upgrade on write,"Fixes #48046

### Description

Manual backport of d3a515858a to fix customer escalation in #48046.

The changes here update viz settings to use column-name-based keys when possible, which resolves the ambiguity with the self-joined column in #48046 and fixes the column titles in the csv (and xlsx, json) exports.

Conflicts:
	- e2e/test/scenarios/dashboard-filters/temporal-unit-parameters.cy.spec.js
	- frontend/src/metabase/static-viz/lib/settings.ts
	- frontend/src/metabase/visualizations/lib/settings/column.js
	- frontend/src/metabase/visualizations/lib/utils.js
	- frontend/src/metabase/visualizations/shared/settings/column.ts
	- frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js
	- src/metabase/query_processor/streaming/xlsx.clj

### How to verify

Follow the repro steps from #48046. Tests are added in a separate PR #48244. That is a separate PR to keep this one focused on just backporting the changes from d3a515858a.


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-01 18:58:41+00:00,['appleby'],2024-10-02 15:26:07+00:00,2024-10-02 15:26:05+00:00,https://github.com/metabase/metabase/pull/48243,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2386786338, 'issue_id': 2559974655, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f061cfdb0759a8a3ce8fe219af2f0edf1c5f71f7...88ce9104195b786b9bfb04348d16bf72a3d67677.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/ColumnFormattingAction/ColumnFormattingAction.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingNestedSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/utils.ts<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsListColumns/ChartSettingsListColumns.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/util.ts<br>frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/lib/settings/nested.js<br>frontend/src/metabase/visualizations/lib/settings/nested.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |', 'created_at': datetime.datetime(2024, 10, 1, 19, 25, 21, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 19:25:21 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f061cfdb0759a8a3ce8fe219af2f0edf1c5f71f7...88ce9104195b786b9bfb04348d16bf72a3d67677.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/ColumnFormattingAction/ColumnFormattingAction.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingNestedSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/utils.ts<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsListColumns/ChartSettingsListColumns.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/util.ts<br>frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/lib/settings/nested.js<br>frontend/src/metabase/visualizations/lib/settings/nested.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |

"
2559928225,pull_request,closed,,"🤖 backported ""docs: JWT groups with environment variables""",#48240,github-automation-metabase,2024-10-01 18:31:44+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-08 18:00:34+00:00,2024-10-08 18:00:33+00:00,https://github.com/metabase/metabase/pull/48242,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2559922529,pull_request,closed,,docs - collection cleaning,Docs for collection cleaning feature.,jeff-bruemmer,2024-10-01 18:28:19+00:00,['jeff-bruemmer'],2024-10-11 21:40:04+00:00,2024-10-11 21:37:02+00:00,https://github.com/metabase/metabase/pull/48241,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2559910325,pull_request,closed,,docs: JWT groups with environment variables,Add a description of using env vars to set configure group mappings. Also some visual cleanup of the steps,alexyarosh,2024-10-01 18:21:10+00:00,['alexyarosh'],2024-10-08 18:01:03+00:00,2024-10-01 18:30:53+00:00,https://github.com/metabase/metabase/pull/48240,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2400495946, 'issue_id': 2559910325, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 8, 18, 1, 1, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 18:01:01 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2559851971,pull_request,closed,,docs - webhooks draft,"- Adds docs for webhooks
- Updates alerts page",jeff-bruemmer,2024-10-01 17:51:45+00:00,['jeff-bruemmer'],2024-10-08 16:13:47+00:00,2024-10-02 20:31:35+00:00,https://github.com/metabase/metabase/pull/48239,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2559842112,pull_request,closed,,Update running-metabase-on-docker.md,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",timuric,2024-10-01 17:45:45+00:00,[],2025-02-05 01:31:14+00:00,2025-02-05 01:31:13+00:00,https://github.com/metabase/metabase/pull/48238,"[('Stale', 'Stale PRs that will be auto-closed')]","[{'comment_id': 2603449612, 'issue_id': 2559842112, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2635502954, 'issue_id': 2559842112, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 5, 1, 31, 13, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:30:55 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-05 01:31:13 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2559821782,pull_request,closed,,Fix appending to models with existing non-ascii columns,"This seems to have always been broken, noticed it as part of my clickhouse testing.",crisptrutski,2024-10-01 17:34:08+00:00,['crisptrutski'],2024-10-03 13:52:02+00:00,2024-10-03 10:06:58+00:00,https://github.com/metabase/metabase/pull/48237,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2559767910,pull_request,closed,,"🤖 backported ""perf: Do fewer moderation_reviews queries when fetching recent views""",#48169,github-automation-metabase,2024-10-01 17:00:46+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-10-01 17:55:28+00:00,2024-10-01 17:55:27+00:00,https://github.com/metabase/metabase/pull/48236,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2559668808,pull_request,closed,,"🤖 backported ""Future-proof CSV uploads from next HoneySQL upgrade""","  #48220
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-01 16:06:12+00:00,"['crisptrutski', 'github-automation-metabase']",2024-10-01 23:45:49+00:00,2024-10-01 23:45:48+00:00,https://github.com/metabase/metabase/pull/48233,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2387121297, 'issue_id': 2559668808, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f061cfdb0759a8a3ce8fe219af2f0edf1c5f71f7...0df57161666e359c5f7e04d2ab0a5e702f6a6b6d.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |', 'created_at': datetime.datetime(2024, 10, 1, 21, 37, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387125613, 'issue_id': 2559668808, 'author': 'crisptrutski', 'body': 'Sorry for noise, I just rebased this on another backport that blocks it, to get the CI ball rolling.', 'created_at': datetime.datetime(2024, 10, 1, 21, 40, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387136095, 'issue_id': 2559668808, 'author': 'crisptrutski', 'body': ""Don't merge this until https://github.com/metabase/metabase/pull/48221 has merged"", 'created_at': datetime.datetime(2024, 10, 1, 21, 48, 4, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 21:37:41 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f061cfdb0759a8a3ce8fe219af2f0edf1c5f71f7...0df57161666e359c5f7e04d2ab0a5e702f6a6b6d.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |

crisptrutski (Assginee) on (2024-10-01 21:40:41 UTC): Sorry for noise, I just rebased this on another backport that blocks it, to get the CI ball rolling.

crisptrutski (Assginee) on (2024-10-01 21:48:04 UTC): Don't merge this until https://github.com/metabase/metabase/pull/48221 has merged

"
2559656870,pull_request,closed,,Native query drill,,ranquild,2024-10-01 16:01:02+00:00,"['bshepherdson', 'ranquild', 'uladzimirdev']",2024-10-08 14:50:01+00:00,2024-10-08 14:50:00+00:00,https://github.com/metabase/metabase/pull/48232,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2393110105, 'issue_id': 2559656870, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 4a6700f2ce49542bffe1d5318a96f0335b2bbaa7...e9891f0c9d4ff0496bca0da8d7cb2e42737f9bb4.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/click-actions/actions/CombineColumnsAction/CombineColumnsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/lib/timeseries.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |', 'created_at': datetime.datetime(2024, 10, 4, 8, 14, 25, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-04 08:14:25 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 4a6700f2ce49542bffe1d5318a96f0335b2bbaa7...e9891f0c9d4ff0496bca0da8d7cb2e42737f9bb4.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/click-actions/actions/CombineColumnsAction/CombineColumnsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/lib/timeseries.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |

"
2559599146,pull_request,closed,,Edit metric and model links,"Closes https://github.com/metabase/metabase/issues/44168
Closes https://github.com/metabase/metabase/issues/44211

### Description

Uses the model and metric editors when editing models and metrics, instead of the default notebook editor.",romeovs,2024-10-01 15:33:13+00:00,['romeovs'],2024-10-03 13:34:48+00:00,2024-10-03 13:34:47+00:00,https://github.com/metabase/metabase/pull/48231,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2559554261,pull_request,closed,,fix: allow aggregation removal from qb sidebar again,"Closes https://github.com/metabase/metabase/issues/48033

### Description

we need to check if it's a default aggregation (when we do not explicitly specify aggregation in notebook editor)
and if it is, we should not re-run query, but if it's not, we should run query and remove aggregation from the sidebar 

### Related PRs
- https://github.com/metabase/metabase/pull/45398
- https://github.com/metabase/metabase/pull/46573 - wasn't backported, so no-backport for this PR as well

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> Orders
2. add aggregation ""Count""
3. visualize
4. open Summarize and click ""x"" trying to remove Count aggregation 
5. aggregation should be removed

### Demo

https://github.com/user-attachments/assets/fa63b1be-3124-46de-bfc3-2695482b8313


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-10-01 15:16:33+00:00,['uladzimirdev'],2024-10-01 16:47:11+00:00,2024-10-01 16:47:08+00:00,https://github.com/metabase/metabase/pull/48230,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2559387302,pull_request,closed,,"🤖 backported ""fix: wrap `Filter by this value` in `t`""",#48226,github-automation-metabase,2024-10-01 14:16:22+00:00,"['npretto', 'github-automation-metabase']",2024-10-01 14:53:54+00:00,2024-10-01 14:53:53+00:00,https://github.com/metabase/metabase/pull/48229,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2386101086, 'issue_id': 2559387302, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 50bf12a632877e9a05409dd7d93494dc90c19018...4b3143293c4d2111ee4afe17cc227b0d4b5f8ead.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |', 'created_at': datetime.datetime(2024, 10, 1, 14, 17, 49, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 14:17:49 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 50bf12a632877e9a05409dd7d93494dc90c19018...4b3143293c4d2111ee4afe17cc227b0d4b5f8ead.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |

"
2559292198,pull_request,closed,,"🤖 backported ""fix: Don't show error page when command palette documentation link is clicked""","  #47862
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-01 13:42:49+00:00,"['rafpaf', 'github-automation-metabase']",2024-10-07 14:33:24+00:00,2024-10-07 14:33:22+00:00,https://github.com/metabase/metabase/pull/48228,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2559189402,pull_request,closed,,fix(sdk): Attempt to fix resize observer issues,"After solving [this issue](https://github.com/metabase/metabase/pull/48109), I ran into another error with the `ResizeObserver`, with the message of `ResizeObserver loop completed with undelivered notifications`. After pulling my hair trying to find the root cause, it turns out there is an issue with the `ExplicitSize` component in which calls in the resize observer in smaller components are causing the ResizeObserver for a parent component to be called before its able to finish running its own changes. 

Right now, that's a problem that will take a decent amount of time to deal with. For now, we can use the [@juggle/resize-observer](https://www.npmjs.com/package/@juggle/resize-observer) package, which is a ponyfill that will prevent any weird resize chaining by deferring unsent ""notifications"" to the next render loop.

_**Update**_
We'll be using @heypoom's and @npretto's fix which, for now, will serve as a bandaid. We'll need to still solve the problem of first-render dashboard cards not showing up as expected but this will get rid of the overlay errors from the resize observer.
",oisincoveney,2024-10-01 13:11:25+00:00,['oisincoveney'],2024-10-11 07:37:12+00:00,2024-10-09 08:40:30+00:00,https://github.com/metabase/metabase/pull/48227,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2385769895, 'issue_id': 2559189402, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 1, 13, 12, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385853806, 'issue_id': 2559189402, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5f27d495f911289c70ebc2a36557b388c8c2442...112a757fd80f1632e24f60ea7f9a2068ef26eca9.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 1, 13, 26, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399904248, 'issue_id': 2559189402, 'author': 'WiNloSt', 'body': 'This might also fix https://github.com/metabase/metabase/issues/43304', 'created_at': datetime.datetime(2024, 10, 8, 13, 49, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404968479, 'issue_id': 2559189402, 'author': 'oisincoveney', 'body': '@metabase-bot backport release-x.51.x', 'created_at': datetime.datetime(2024, 10, 10, 12, 34, 25, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 13:12:01 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-01 13:26:17 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5f27d495f911289c70ebc2a36557b388c8c2442...112a757fd80f1632e24f60ea7f9a2068ef26eca9.

No notifications.

WiNloSt on (2024-10-08 13:49:06 UTC): This might also fix https://github.com/metabase/metabase/issues/43304

oisincoveney (Issue Creator) on (2024-10-10 12:34:25 UTC): @metabase-bot backport release-x.51.x

"
2559170634,pull_request,closed,,fix: wrap `Filter by this value` in `t`,"
### Description

While testing allowing changing the locale for the sdk, I noticed this text didn't get translated

Before
<img width=""357"" alt=""image"" src=""https://github.com/user-attachments/assets/f4a4f67b-e0df-4e79-92bc-11b15fd4eb5a"">

After

<img width=""358"" alt=""image"" src=""https://github.com/user-attachments/assets/169c1e0f-193a-427c-bdd4-2689c6c29980"">
",npretto,2024-10-01 13:04:30+00:00,['npretto'],2024-10-01 14:54:28+00:00,2024-10-01 14:15:33+00:00,https://github.com/metabase/metabase/pull/48226,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2385746364, 'issue_id': 2559170634, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 424134263f6eef31a818faad95e5d080eae9753b...945f7d5f4538754f0924406ffafd7ef3b13fa760.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |', 'created_at': datetime.datetime(2024, 10, 1, 13, 5, 55, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 13:05:55 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 424134263f6eef31a818faad95e5d080eae9753b...945f7d5f4538754f0924406ffafd7ef3b13fa760.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/utils.ts |

"
2559164855,pull_request,closed,,"🤖 backported ""Sync DBs in a future when initializing MB from config file""",#48176,github-automation-metabase,2024-10-01 13:02:34+00:00,"['noahmoss', 'github-automation-metabase']",2024-10-02 17:31:31+00:00,2024-10-02 17:31:30+00:00,https://github.com/metabase/metabase/pull/48225,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2559112741,pull_request,closed,,"🤖 backported ""Fix timezone comparisons in failing execution stats test""",#48204,metabase-bot[bot],2024-10-01 12:42:18+00:00,['crisptrutski'],2024-10-01 16:36:57+00:00,2024-10-01 16:36:56+00:00,https://github.com/metabase/metabase/pull/48223,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2558802424,pull_request,closed,,"🤖 backported ""Upload test fixes for drivers without auto mb-id""","  #48194
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-01 10:19:31+00:00,"['crisptrutski', 'github-automation-metabase']",2024-10-01 22:49:34+00:00,2024-10-01 22:49:33+00:00,https://github.com/metabase/metabase/pull/48221,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2558794168,pull_request,closed,,Future-proof CSV uploads from next HoneySQL upgrade,"For some reason HoneySQL is about to get more easily confused between identifiers starting with % and function calls.

This also updates the commands to work with string based type signatures, which are used by Clickhouse.

One last small fix to the test suite for Clickhouse's numeric precision sneaks through as well.",crisptrutski,2024-10-01 10:15:30+00:00,['crisptrutski'],2024-10-01 23:46:14+00:00,2024-10-01 16:05:20+00:00,https://github.com/metabase/metabase/pull/48220,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2386414992, 'issue_id': 2558794168, 'author': 'crisptrutski', 'body': 'Merging for now to save a CI run, have at least one more PR in this area.', 'created_at': datetime.datetime(2024, 10, 1, 16, 5, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2386599034, 'issue_id': 2558794168, 'author': 'crisptrutski', 'body': ""For posterity, here's the HoneySQL change that broke us: https://github.com/seancorfield/honeysql/commit/a3ef21548520636168a970d780ff46a4be4fa002"", 'created_at': datetime.datetime(2024, 10, 1, 17, 44, 12, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-10-01 16:05:15 UTC): Merging for now to save a CI run, have at least one more PR in this area.

crisptrutski (Issue Creator) on (2024-10-01 17:44:12 UTC): For posterity, here's the HoneySQL change that broke us: https://github.com/seancorfield/honeysql/commit/a3ef21548520636168a970d780ff46a4be4fa002

"
2558660946,pull_request,closed,,Disable value column on Browse metrics page,"There are too many questions around the value column on the Browse metrics page, so let's disable it for now.",romeovs,2024-10-01 09:20:50+00:00,['romeovs'],2024-10-08 16:13:53+00:00,2024-10-02 07:11:41+00:00,https://github.com/metabase/metabase/pull/48217,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2558526656,pull_request,closed,,fix(sdk): modal pushing content below when opened,"
# Description
Fixes https://metaboat.slack.com/archives/C063Q3F1HPF/p1727704037169859?thread_ts=1727689147.114469&cid=C063Q3F1HPF

I think this was caused by https://github.com/metabase/metabase/pull/47764 , the modals are rendered inside the provider, pushing the other sdk content below. 

# Demo

## Before

https://github.com/user-attachments/assets/ae123d6b-de9d-46c8-900a-70c15ecff001



## After

https://github.com/user-attachments/assets/4bdb030d-131a-4ced-86fc-687929ede5c3

",npretto,2024-10-01 08:24:08+00:00,['npretto'],2024-10-08 16:14:00+00:00,2024-10-01 15:39:31+00:00,https://github.com/metabase/metabase/pull/48216,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2385237266, 'issue_id': 2558526656, 'author': 'npretto', 'body': ""> I found that you could fix this by moving the portal after user content, that way we don't need to have a special style.\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/1937582/372395657-595aea02-99bf-4c4b-99e6-5782215b588e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjc3NzQwMzgsIm5iZiI6MTcyNzc3MzczOCwicGF0aCI6Ii8xOTM3NTgyLzM3MjM5NTY1Ny01OTVhZWEwMi05OWJmLTRjNGItOTllNi01NzgyMjE1YjU4OGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MTAwMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDEwMDFUMDkwODU4WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2VjZTBjZDM4YzllYjU0ODk5YTdiOTQ1YmI4YjRkZjk1YTNiYzNjMDAzMThiN2FhNDk5NzQ0ZWU3Y2JkMDM2MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.xbHao5iBWqUQurwlGWB5sBYZM1Vs0kDBGb59RGSoBC0)\r\n> \r\n> I believe this is how most portals are rendered too, after user contents.\r\n\r\nAh that makes sense, i like that approach better, do you want me to update the PR with your approach or do you want to open a separate one?"", 'created_at': datetime.datetime(2024, 10, 1, 9, 10, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385242058, 'issue_id': 2558526656, 'author': 'WiNloSt', 'body': ""> > I found that you could fix this by moving the portal after user content, that way we don't need to have a special style.\r\n> > ![image](https://private-user-images.githubusercontent.com/1937582/372395657-595aea02-99bf-4c4b-99e6-5782215b588e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjc3NzQwMzgsIm5iZiI6MTcyNzc3MzczOCwicGF0aCI6Ii8xOTM3NTgyLzM3MjM5NTY1Ny01OTVhZWEwMi05OWJmLTRjNGItOTllNi01NzgyMjE1YjU4OGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MTAwMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDEwMDFUMDkwODU4WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2VjZTBjZDM4YzllYjU0ODk5YTdiOTQ1YmI4YjRkZjk1YTNiYzNjMDAzMThiN2FhNDk5NzQ0ZWU3Y2JkMDM2MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.xbHao5iBWqUQurwlGWB5sBYZM1Vs0kDBGb59RGSoBC0)\r\n> > I believe this is how most portals are rendered too, after user contents.\r\n> \r\n> Ah that makes sense, i like that approach better, do you want me to update the PR with your approach or do you want to open a separate one?\r\n\r\nI feel like it is ideal that you incorporate this into this PR. We don't need more PRs to do the same thing."", 'created_at': datetime.datetime(2024, 10, 1, 9, 12, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385250374, 'issue_id': 2558526656, 'author': 'WiNloSt', 'body': '@npretto And maybe giving me a `Co-authored-by: ` in your latest commit would be enough if you feel like I deserve some ice-cream.', 'created_at': datetime.datetime(2024, 10, 1, 9, 16, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385409466, 'issue_id': 2558526656, 'author': 'npretto', 'body': '> I found that you could fix this by moving the portal after user content, that way we don\'t need to have a special style.\r\n> \r\n> ![image](https://private-user-images.githubusercontent.com/1937582/372395657-595aea02-99bf-4c4b-99e6-5782215b588e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjc3NzQ5ODEsIm5iZiI6MTcyNzc3NDY4MSwicGF0aCI6Ii8xOTM3NTgyLzM3MjM5NTY1Ny01OTVhZWEwMi05OWJmLTRjNGItOTllNi01NzgyMjE1YjU4OGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MTAwMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDEwMDFUMDkyNDQxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDAyMjIzMTcyMmNhMzA5ZjliMjM3MGZkZDQ5OWM5MzE4NzhmYzM4OGJjMDM0Zjc5N2E5MDBmYzA3ZjZhMjVjMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.Glm2teGEoI2SkHsQXpcwQynXkZryFZMScLUIWPfgUOE)\r\n> \r\n> I believe this is how most portals are rendered too, after user contents.\r\n\r\nUhm it seems that doesn\'t work if the provider is rendered down the line, for example with a classic layout with a sidebar and the provider rendered in the main content:\r\n<img width=""1467"" alt=""image"" src=""https://github.com/user-attachments/assets/8b086753-da1e-4348-8e4b-9f45dead0dda"">\r\n\r\nMy solution didn\'t work either out of the box but I made a small adjustment and it now seems to work:\r\n<img width=""1476"" alt=""image"" src=""https://github.com/user-attachments/assets/58bc688b-e879-467d-a5c1-f451050c37ba"">\r\n\r\n\r\nI\'ll still render the portal after the content so that we won\'t need the hardcoded zindex though', 'created_at': datetime.datetime(2024, 10, 1, 10, 25, 41, tzinfo=datetime.timezone.utc)}]","npretto (Issue Creator) on (2024-10-01 09:10:47 UTC): Ah that makes sense, i like that approach better, do you want me to update the PR with your approach or do you want to open a separate one?

WiNloSt on (2024-10-01 09:12:47 UTC): I feel like it is ideal that you incorporate this into this PR. We don't need more PRs to do the same thing.

WiNloSt on (2024-10-01 09:16:29 UTC): @npretto And maybe giving me a `Co-authored-by: ` in your latest commit would be enough if you feel like I deserve some ice-cream.

npretto (Issue Creator) on (2024-10-01 10:25:41 UTC): Uhm it seems that doesn't work if the provider is rendered down the line, for example with a classic layout with a sidebar and the provider rendered in the main content:
<img width=""1467"" alt=""image"" src=""https://github.com/user-attachments/assets/8b086753-da1e-4348-8e4b-9f45dead0dda"">

My solution didn't work either out of the box but I made a small adjustment and it now seems to work:
<img width=""1476"" alt=""image"" src=""https://github.com/user-attachments/assets/58bc688b-e879-467d-a5c1-f451050c37ba"">


I'll still render the portal after the content so that we won't need the hardcoded zindex though

"
2558088829,pull_request,closed,,[Notification] Migrate user invited email,"Epic: https://github.com/metabase/metabase/issues/47438
Migrate the ""you're invited"" email to the new notification system.

### Result
**Before**

Invite sent from setup page
![Screenshot 2024-10-02 at 14 04 04](https://github.com/user-attachments/assets/c9ba2811-3b9a-4db5-a3fd-14544847a6c1)
Invite sent from admin page
![Screenshot 2024-10-02 at 14 05 11](https://github.com/user-attachments/assets/a9fc160c-089e-427e-865e-f96a2b9a41c8)


**After**

Invite sent from setup page
![Screenshot 2024-10-02 at 17 07 32](https://github.com/user-attachments/assets/67234f6d-05dd-4371-adea-09c5e13d7bcb)


Invite sent 
![Screenshot 2024-10-02 at 17 08 57](https://github.com/user-attachments/assets/a5bd16a8-1866-4560-b4e8-f6a39787dbe6)
from admin page


Emails are zipped here

[emails.zip](https://github.com/user-attachments/files/17227902/emails.zip)",qnkhuat,2024-10-01 03:28:05+00:00,[],2024-10-07 06:25:42+00:00,2024-10-07 06:25:39+00:00,https://github.com/metabase/metabase/pull/48215,[],"[{'comment_id': 2385153284, 'issue_id': 2558088829, 'author': 'qnkhuat', 'body': ""it's still WIP so some of your concerns are being addressed locally Chris hehe."", 'created_at': datetime.datetime(2024, 10, 1, 8, 42, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385154373, 'issue_id': 2558088829, 'author': 'qnkhuat', 'body': 'oh it has a request for reviews bc I updated the migration file 🤦', 'created_at': datetime.datetime(2024, 10, 1, 8, 42, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385288421, 'issue_id': 2558088829, 'author': 'crisptrutski', 'body': ""not the first time that's gotten me 😥"", 'created_at': datetime.datetime(2024, 10, 1, 9, 33, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2391316302, 'issue_id': 2558088829, 'author': 'crisptrutski', 'body': 'LGTM - just need to fix the tests re: `:recipient-type` and sort out the serialization stuff.', 'created_at': datetime.datetime(2024, 10, 3, 12, 38, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2396008340, 'issue_id': 2558088829, 'author': 'qnkhuat', 'body': ""There are some concerns about how we insert this data, do we want to use migration or something else. but I'll merge this now and we can revisit that on the feature branch for all 3 emails"", 'created_at': datetime.datetime(2024, 10, 7, 6, 25, 31, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-10-01 08:42:26 UTC): it's still WIP so some of your concerns are being addressed locally Chris hehe.

qnkhuat (Issue Creator) on (2024-10-01 08:42:56 UTC): oh it has a request for reviews bc I updated the migration file 🤦

crisptrutski on (2024-10-01 09:33:11 UTC): not the first time that's gotten me 😥

crisptrutski on (2024-10-03 12:38:59 UTC): LGTM - just need to fix the tests re: `:recipient-type` and sort out the serialization stuff.

qnkhuat (Issue Creator) on (2024-10-07 06:25:31 UTC): There are some concerns about how we insert this data, do we want to use migration or something else. but I'll merge this now and we can revisit that on the feature branch for all 3 emails

"
2557707186,pull_request,closed,,Add GreptimeDB to the list of community drivers,,perivamsi,2024-09-30 21:51:13+00:00,['perivamsi'],2024-10-08 16:14:09+00:00,2024-09-30 21:54:57+00:00,https://github.com/metabase/metabase/pull/48214,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2384222779, 'issue_id': 2557707186, 'author': 'perivamsi', 'body': 'Internal version of https://github.com/metabase/metabase/pull/47753', 'created_at': datetime.datetime(2024, 9, 30, 21, 51, 24, tzinfo=datetime.timezone.utc)}]","perivamsi (Issue Creator) on (2024-09-30 21:51:24 UTC): Internal version of https://github.com/metabase/metabase/pull/47753

"
2557663057,pull_request,closed,,"🤖 backported ""Do not cache all token check failures""","* Do not cache all token check failures

We want to cache token checks to avoid an issue where we repeatedly ask
the store ""hey, is this token valid?? is this token valid?? is this
token valid??"" for the same token.

However, transient errors can also occur. For example, maybe a network
issue causes the HTTP request to fail entirely. In this case, if we
cache the result, the user needs to restart metabase (or wait 5 minutes
until the cache is cleared) before they can attempt to validate their
token again.

This PR moves the cache logic deeper into the stack. We want to cache
""successful"" responses from the store API - cases where the store has
told us categorically that the token is or is not valid. We don't want
or need to cache other things that might happen. Maybe your token isn't
the right length - we can recalculate that, it's ok. Maybe you get a 503
error from the Store - we should let you retry. Maybe your network is
having issues and you can't contact the Store at all - again, we should
let you retry.

The one potential issue I see here is that if the store goes down, we'll
massively increase the number of requests we send to the store,
potentially making it harder to recover. If this is a concern, I can add
a circuit breaker: if we repeatedly get errors back from the store, back
off and stop making requests for a while.

* Add a circuit breaker to store API requests

In the pathological case where the store goes down for >5 minutes, the
cache will expire and all instances everywhere will start repeatedly
making requests for token validation at once. This might make recovering
from an outage more difficult.

This adds a circuit breaker around the API request. If the call
repeatedly throws (5XX errors, socket timeouts, etc.) then we'll pause
for 1 minute, during which time all calls to token validation will
immediately fail without making any request to the API.

After one minute, we'll allow one request through to the API. If it
succeeds, we'll go back to normal operation. Otherwise, we'll wait
another minute.
",github-automation-metabase,2024-09-30 21:23:13+00:00,"['johnswanson', 'github-automation-metabase']",2024-10-10 11:18:23+00:00,2024-10-10 11:17:51+00:00,https://github.com/metabase/metabase/pull/48213,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2557588880,pull_request,closed,,fix pie chart e2e test flake,"### Description

This test was flaking due to a legend item randomly being hovered, causing the color of the `Woodget` slice to be faded, making the assertion fail.

We fix this by explicitly hovering hover the `Woodget` legend item to ensure it has the right color on the chart.

### Demo

https://github.com/user-attachments/assets/82a0accd-76c8-498c-9f03-0a64585b4aae

### Checklist

- [x] Tests have been added/updated to cover changes in this PR


Stress test ✅ https://github.com/metabase/metabase/actions/runs/11113866453/job/30879129907",EmmadUsmani,2024-09-30 20:34:24+00:00,['EmmadUsmani'],2024-10-08 16:13:56+00:00,2024-10-01 19:45:18+00:00,https://github.com/metabase/metabase/pull/48212,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2384097501, 'issue_id': 2557588880, 'author': 'EmmadUsmani', 'body': '* **#48212** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48212?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 30, 20, 34, 40, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-09-30 20:34:40 UTC): * **#48212** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48212?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2557571558,pull_request,closed,,webhooks - fix typo,Like it says on the tin.,jeff-bruemmer,2024-09-30 20:24:02+00:00,['jeff-bruemmer'],2024-10-08 16:14:07+00:00,2024-10-01 01:27:01+00:00,https://github.com/metabase/metabase/pull/48211,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2557437148,pull_request,closed,,fix aggressive legend truncation,"Closes https://github.com/metabase/metabase/issues/48125

### Description

Legend titles on pie chart were being truncated very aggressively, specifically when turning the percentage setting on (see before demo). This PR fixes this issue by correcting the `legendTitles` prop supplied by `PieChart.tsx` to the legend component.

### How to verify

1. Create a pie chart question (e.g. count of orders by product category)
2. Turn the percentage in legend setting off, then refresh the page
3. Turn it back on, the legend titles should not be truncated

### Demo

https://github.com/user-attachments/assets/e4ca000a-ce13-498b-9bb3-b3a1360fa30c

Before

https://github.com/user-attachments/assets/b13fe867-3325-4dc9-8967-370a71d1f1ea

After

https://github.com/user-attachments/assets/c448f8b2-024b-485d-9869-d0cae6e0c332

https://github.com/user-attachments/assets/e8047853-e34d-4168-a483-557360638b3d

Confirmed legend still resizes nicely

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-09-30 19:02:49+00:00,['EmmadUsmani'],2024-10-02 20:19:24+00:00,2024-10-02 20:19:23+00:00,https://github.com/metabase/metabase/pull/48207,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2383948251, 'issue_id': 2557437148, 'author': 'EmmadUsmani', 'body': '* **#48207** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48207?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 30, 19, 3, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2384030258, 'issue_id': 2557437148, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b85167704d33755da88c9d9fa8325dc3bd2c006f...2c968ba2278f007ef8c6d0d30ebd24521a8674f7.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx |', 'created_at': datetime.datetime(2024, 9, 30, 19, 52, 13, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-09-30 19:03:03 UTC): * **#48207** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48207?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-09-30 19:52:13 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b85167704d33755da88c9d9fa8325dc3bd2c006f...2c968ba2278f007ef8c6d0d30ebd24521a8674f7.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx |

"
2557432801,pull_request,closed,,add eslint plugin for storybook,"Add eslint plugin for storybook and fix warnings/errors:
- if the story name is the same as exported object name, we should omit this name",uladzimirdev,2024-09-30 19:00:13+00:00,['uladzimirdev'],2024-10-08 16:14:01+00:00,2024-10-01 13:16:02+00:00,https://github.com/metabase/metabase/pull/48206,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2383943965, 'issue_id': 2557432801, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 30, 19, 0, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383945952, 'issue_id': 2557432801, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b28aa417bea88cbfea9ce3b8174ebba8becfd3d1...2a79dda30f0998ab965f184deff18c2d396d1f25.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/List/List.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx |', 'created_at': datetime.datetime(2024, 9, 30, 19, 1, 38, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-30 19:00:33 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-30 19:01:38 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b28aa417bea88cbfea9ce3b8174ebba8becfd3d1...2a79dda30f0998ab965f184deff18c2d396d1f25.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/List/List.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx |

"
2557408251,pull_request,closed,,Fix shape of metadata in Snowplow stats ping to conform to new schema,"Fixes the shape of the metadata we send in the new Snowplow stats ping. The schema changed last minute and I forgot to update the code accordingly. 

I'm still investigating why e2e tests didn't catch this, since it results in a failed event send which should have been detected. But I've validated that an event can be sent successfully locally. We might want to get this fix on stats to verify it there, while I continue to look into the Cypress issue.",noahmoss,2024-09-30 18:45:17+00:00,['noahmoss'],2024-10-08 16:14:08+00:00,2024-10-01 00:22:16+00:00,https://github.com/metabase/metabase/pull/48205,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2383918597, 'issue_id': 2557408251, 'author': 'noahmoss', 'body': '* **#48205** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48205?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 30, 18, 45, 31, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-30 18:45:31 UTC): * **#48205** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48205?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2557345128,pull_request,closed,,Fix timezone comparisons in failing execution stats test,"`execution-metrics-started-at-test` started failing on Postgres after New Zealand transitioned to Daylight Saving Time yesterday (Sep 29).

The reason for this, as far as I can tell, is that Postgres automatically adjusts for DST when performing time calculations on `TIMESTAMP WITH TIME ZONE`. This means that subtracting 30 days from a timestamp in the `Pacific/Auckland` timezone will account for the DST change, and result in a timestamp an hour off from the equivalent UTC time.

I've fixed this by ensuring we do these computations explicitly on UTC timestamps in the `execution-metrics-sql` query when running on Postgres. This behavior seems to be specific to Postgres, which is why it didn't fail on H2 or MySQL/MariaDB.",noahmoss,2024-09-30 18:10:54+00:00,['noahmoss'],2024-10-01 16:37:24+00:00,2024-09-30 20:52:16+00:00,https://github.com/metabase/metabase/pull/48204,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2383860983, 'issue_id': 2557345128, 'author': 'noahmoss', 'body': '* **#48204** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48204?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 30, 18, 11, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2385677192, 'issue_id': 2557345128, 'author': 'crisptrutski', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 1, 12, 41, 25, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-30 18:11:09 UTC): * **#48204** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48204?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

crisptrutski on (2024-10-01 12:41:25 UTC): @metabase-bot backport release-x.50.x

"
2557157256,pull_request,closed,,[MS 1.1] Better Onboarding via First-Time UX,"### What does this PR accomplish?
- Adds visual elements from the MS 1.1 of #48163
- Switches from the default export to the named export [^1]

### What it *doesn't* do?
- Doesn't remove the ""Add your own data"" button (scope of MS 1.2)
- Doesn't remove the ""Upload CSVs"" sidebar link (scope of MS 1.2)
- Doesn't care about permissions or business logic (scope of MS 1.2)
- Doesn't care about analytics (scope of MS 1.3)
- It doesn't add any tests (scope of MS 1.4)
- It is not pixel perfect (scope of MS 1.5)

> [!Important]
> This PR is not targeting the `master` branch. It goes to the `better-onboarding-ux-ms1` feature branch. This allows for the more granular development, and for easier reviews.
>
> One more thing:
> Safely ignore/skip all Cypress tests changes. I only replaced unscoped icon selectors `cy.icon(""add_data"")` with the proper semantic `cy.findByLabelText(""Custom column"")`

### How to best review this PR?
- Look for the code style inconsistencies with the rest of the application, and especially wrt Mantine building blocks usage

## Demo
https://github.com/user-attachments/assets/9c30121b-ae9e-4ef4-b2af-da7360f8b8e5

### What should happen *at this stage of development*
- How to use Metabase takes you to https://www.metabase.com/learn/
- Clicking on ""Add data"" should open a menu with two options:
    1. Add database (clicking takes you to admin add database section)
    2. Upload spreadsheet (clicking takes you to admin upload settings section)

#### 1. Admin still hasn't added their own database
- The sidebar section is in [the initial state](https://www.figma.com/design/1QmQUlWK7jACc1oxOfIzxE/Better-onboarding?node-id=6297-33703&t=3UgD5lB5fURXrWt9-1)
    - No border at the top
    - CTA copy is present

#### 2. Admin has added their own database
- The sidebar section is in [the default state](https://www.figma.com/design/1QmQUlWK7jACc1oxOfIzxE/Better-onboarding?node-id=6297-33748&t=3UgD5lB5fURXrWt9-1)
    - Border is present at the top [^2]
    - CTA copy disappears

(you can check the logic diagram [here](https://www.figma.com/design/1QmQUlWK7jACc1oxOfIzxE/Better-onboarding?node-id=6298-34410&t=3UgD5lB5fURXrWt9-1))

[^1]: This was out of scope of this project, but the change was so simple and small that it felt wrong not to remove the tech debt.    
[^2]: There is an open question for @romnitt should this be a shadow or a border. The current design iteration has it defined as the shadow of 1px without any blur, which makes it no different than the border.",nemanjaglumac,2024-09-30 16:35:49+00:00,['nemanjaglumac'],2024-10-03 19:32:01+00:00,2024-10-03 19:31:59+00:00,https://github.com/metabase/metabase/pull/48202,"[('First Experience/Onboarding', ''), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2386541272, 'issue_id': 2557157256, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 015d6521cdf5dfcb4fc94e8db369fcd2b8847dd0...4667137f8e803901cf6411803429ad24d1a67b48.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |', 'created_at': datetime.datetime(2024, 10, 1, 17, 10, 4, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-01 17:10:04 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 015d6521cdf5dfcb4fc94e8db369fcd2b8847dd0...4667137f8e803901cf6411803429ad24d1a67b48.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |

"
2557052370,pull_request,closed,,"Show ""New metric"" command panel","Closes https://github.com/metabase/metabase/issues/44134

### Description

Adds the ""New metric"" item to the command palette.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Press <key>⌘</key>+<key>K</key> or click the search bar
2. Type ""Me""
3. ""New metric"" should show up as an option
4. Click the option, you should taken to the New metric page

### Demo

<img width=""1474"" alt=""Screenshot 2024-09-30 at 17 43 01"" src=""https://github.com/user-attachments/assets/c8bc4220-66f2-4c11-a474-7ea2c1cb1828"">
",romeovs,2024-09-30 15:46:37+00:00,['romeovs'],2024-10-01 09:22:01+00:00,2024-10-01 09:21:58+00:00,https://github.com/metabase/metabase/pull/48201,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2557037691,pull_request,closed,,[Notification] Send asynchronously,"Our event system is synchronous, and we dont' want sending notifications that subscribed to an event to block the execution of the main thread. This PR creates a pooled executor to send noti asynchronously

Epic: https://github.com/metabase/metabase/issues/47438",qnkhuat,2024-09-30 15:40:12+00:00,['qnkhuat'],2024-10-07 04:17:40+00:00,2024-10-04 03:39:06+00:00,https://github.com/metabase/metabase/pull/48200,"[('.Team/Workflows', 'aka BEC')]",[],
2557032602,pull_request,closed,,feat(api-openapi): favors Scalar for open api documentation,"### Description

this first PR is a proposal to favor the open api client open source project [Scalar](https://github.com/scalar/scalar) for the great work on api documentation made by @piranha.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. run `yarn dev`
2. visit `/api/docs`

### Demo

**before**
<img width=""1469"" alt=""image"" src=""https://github.com/user-attachments/assets/8f7f7780-e40d-4c51-8004-826bc5697740"">

**after**
<img width=""1469"" alt=""image"" src=""https://github.com/user-attachments/assets/be4c53d8-c725-4a34-aafb-79dd771c87e4"">

*this one just introduces a first stepping stone but some comments remain within the openapi.clj file, to be updated according to the path taken :). ",antlio,2024-09-30 15:37:51+00:00,[],2024-11-26 18:52:18+00:00,2024-10-24 08:57:39+00:00,https://github.com/metabase/metabase/pull/48199,[],"[{'comment_id': 2434693704, 'issue_id': 2557032602, 'author': 'piranha', 'body': '@antlio thanks for that, Scalar looks much nicer! And sorry for the delay, had a fix for openapi stuff in the pipeline, then got distracted... eh, you know. 😁', 'created_at': datetime.datetime(2024, 10, 24, 8, 58, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2434776868, 'issue_id': 2557032602, 'author': 'antlio', 'body': ""thanks for the review, super happy to hear! and don't be i know for sure 😄! pretty happy to contribute to that great product!"", 'created_at': datetime.datetime(2024, 10, 24, 9, 34, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2456713752, 'issue_id': 2557032602, 'author': 'antlio', 'body': '@piranha feel free to let me know if I can help further about any of this + forgot to share but feel free to [join the discord](https://discord.gg/scalar) if you feel like it too!', 'created_at': datetime.datetime(2024, 11, 5, 9, 50, 26, tzinfo=datetime.timezone.utc)}]","piranha on (2024-10-24 08:58:11 UTC): @antlio thanks for that, Scalar looks much nicer! And sorry for the delay, had a fix for openapi stuff in the pipeline, then got distracted... eh, you know. 😁

antlio (Issue Creator) on (2024-10-24 09:34:07 UTC): thanks for the review, super happy to hear! and don't be i know for sure 😄! pretty happy to contribute to that great product!

antlio (Issue Creator) on (2024-11-05 09:50:26 UTC): @piranha feel free to let me know if I can help further about any of this + forgot to share but feel free to [join the discord](https://discord.gg/scalar) if you feel like it too!

"
2556990051,pull_request,closed,,Backport TableInteractive rendering perf fixes to  49,"Fixes https://github.com/metabase/metabase/issues/47834
Backports https://github.com/metabase/metabase/pull/42639",ranquild,2024-09-30 15:19:50+00:00,['ranquild'],2024-10-02 15:03:50+00:00,2024-10-02 15:03:49+00:00,https://github.com/metabase/metabase/pull/48197,"[('visual', 'Run Percy visual testing'), ('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2383508980, 'issue_id': 2556990051, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0c028c41f4841241b3dd9d3ab704a8c394b92ada...bdae6f7724808f20eee8554c70d5517cd946b2e7.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/visualizations/Table.tsx |', 'created_at': datetime.datetime(2024, 9, 30, 15, 21, 10, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-30 15:21:10 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0c028c41f4841241b3dd9d3ab704a8c394b92ada...bdae6f7724808f20eee8554c70d5517cd946b2e7.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/visualizations/Table.tsx |

"
2556986588,pull_request,closed,,"🤖 backported ""updateSetting e2e typed helper""","Manual backport of   #48161 after conflicts
",github-automation-metabase,2024-09-30 15:18:19+00:00,"['npretto', 'github-automation-metabase']",2024-10-01 13:08:57+00:00,2024-10-01 13:08:55+00:00,https://github.com/metabase/metabase/pull/48196,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2556901381,pull_request,closed,,docs - metabase analytics to usage analytics,Following: https://github.com/metabase/metabase/pull/48151,jeff-bruemmer,2024-09-30 14:43:40+00:00,['jeff-bruemmer'],2024-10-23 22:13:39+00:00,2024-10-23 17:33:42+00:00,https://github.com/metabase/metabase/pull/48195,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2556893953,pull_request,closed,,Upload test fixes for drivers without auto mb-id,"### Description

Since all the built-in drivers supporting uploads also support auto-incrementing IDs, we weren't exercising both test paths correctly every time.

These changes came as part of getting the Clickhouse driver (partially) running on our test suite.",crisptrutski,2024-09-30 14:40:50+00:00,['crisptrutski'],2024-10-01 22:49:59+00:00,2024-10-01 10:18:42+00:00,https://github.com/metabase/metabase/pull/48194,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2385310237, 'issue_id': 2556893953, 'author': 'crisptrutski', 'body': '* **#48194** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48194?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 1, 9, 42, 39, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-10-01 09:42:39 UTC): * **#48194** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48194?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2556696698,pull_request,closed,,fix(sdk): decrease specificity of css reset in embedding sdk,"### Description

Context: in [first iteration to scope sdk styles to our components (+161 −198)](https://github.com/metabase/metabase/pull/47764) I added a ""scoped"" css reset to fix a bunch of issue, it created another issue though, as the scoped css reset was overriding some of our code.
Let's take the button reset, its selector was `.{emotion-class} button` which had [specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity) `(0,1,1)`.

Most of our styles have specificity `(0,1,0)` though, which means that the reset will win over it and that's why some buttons didn't have background-color even if it was set.

This PR addresses the issue hopefully for good.
There reason why it works is in a comment in the code, if that explanation is not good enough please tell me so we can update it



Issues that *should* be fixed with this, or are already fixed but this should make it official, please verify it when reviewing it 🙏 

Closes https://github.com/metabase/metabase/issues/47344
Closes https://github.com/metabase/metabase/issues/47561


Note: this has no tests because it's not currently easy to test for visual changes, today or tomorrow I'll share with the team a small document where I'll propose something about it",npretto,2024-09-30 13:31:27+00:00,['npretto'],2024-10-01 07:46:36+00:00,2024-10-01 07:46:34+00:00,https://github.com/metabase/metabase/pull/48193,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2383205273, 'issue_id': 2556696698, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 30, 13, 31, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-30 13:31:50 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2556431316,pull_request,closed,,List metrics in native editor data reference ,"Closes https://github.com/metabase/metabase/issues/48190

### Description

Adds a section with all the metrics defined on the table to the Data Reference sidebar in the native query editor.

### How to verify

1. Define a metric on the Orders table
2. New -> SQL Query
3. Open the data reference by clicking on the small book incon
4. Click the ORDERS table
5. There should be a section listing your metric

### Demo

<img width=""346"" alt=""Screenshot 2024-09-30 at 13 56 42"" src=""https://github.com/user-attachments/assets/fca2275e-11c7-4de7-9f18-7238899754f9"">



### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",romeovs,2024-09-30 11:57:08+00:00,['romeovs'],2024-10-01 16:20:44+00:00,2024-10-01 16:20:43+00:00,https://github.com/metabase/metabase/pull/48191,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2556226222,pull_request,closed,,Fix - metrics do not work with offset in custom expressions,"Closes #47854
Closes #47855

### How to verify

Follow repro steps from the issue.
CI is green.
",kamilmielnik,2024-09-30 10:30:03+00:00,['kamilmielnik'],2024-10-01 05:35:38+00:00,2024-10-01 05:35:36+00:00,https://github.com/metabase/metabase/pull/48188,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2383279880, 'issue_id': 2556226222, 'author': 'romeovs', 'body': 'Code looks good!', 'created_at': datetime.datetime(2024, 9, 30, 13, 58, 57, tzinfo=datetime.timezone.utc)}]","romeovs on (2024-09-30 13:58:57 UTC): Code looks good!

"
2556121420,pull_request,closed,,Fix search test flake,"The order is non-deterministic now, since we disabled ranking for the `minimal*` engines.",crisptrutski,2024-09-30 09:44:06+00:00,['crisptrutski'],2024-10-08 16:14:06+00:00,2024-10-01 06:07:08+00:00,https://github.com/metabase/metabase/pull/48187,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2555394172,pull_request,closed,,added three gray colors to the color picker;  split accent colors into two groups (core and optional),"Closes https://github.com/metabase/metabase/issues/38256

### Description

- Added three new gray colors to the color picker.
- Split the accent colors into a `core` and `optional` group, with gray as the only member of `optional`.
   -  A data series continues to be colored using only the `core` group as the default mapping.  (This preserves the existing colors for all visuals)
   - The color picker now includes both accent color groups.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Load any visual and access the color picker for a given data series.
2. Change to gray
3. Confirm color change takes.

### Demo

<img width=""200"" alt=""image"" src=""https://github.com/user-attachments/assets/91d0a6a7-79af-493e-afc1-533cdc4bcf45"">
<br>
<img width=""400"" alt=""image"" src=""https://github.com/user-attachments/assets/0d6efe1d-cb9b-409f-bfbc-403132d19911"">


### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",aaronfi,2024-09-30 02:35:50+00:00,[],2024-10-17 02:50:01+00:00,2024-10-17 02:50:01+00:00,https://github.com/metabase/metabase/pull/48185,[],[],
2554184868,pull_request,closed,,Await dashcard query when editing to fix flake,"Fixes flake by splitting up the test into two separate cases.

[Stress test](https://github.com/metabase/metabase/actions/runs/11107562138/job/30858439453)",romeovs,2024-09-28 12:00:06+00:00,['romeovs'],2024-10-08 16:14:05+00:00,2024-10-01 06:34:01+00:00,https://github.com/metabase/metabase/pull/48181,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2384912861, 'issue_id': 2554184868, 'author': 'romeovs', 'body': ""@uladzimirdev That's what I initially though too and I tried everything from reloading the page to waiting for query requests, but nothing proved stable enough to survive the stress test.\r\n\r\nAnother issue is that users' last used parameter settings do not get cleared when calling `restore`, which is also only apparent in the stress tests. Breaking it up was the way to go!"", 'created_at': datetime.datetime(2024, 10, 1, 6, 33, 55, tzinfo=datetime.timezone.utc)}]","romeovs (Issue Creator) on (2024-10-01 06:33:55 UTC): @uladzimirdev That's what I initially though too and I tried everything from reloading the page to waiting for query requests, but nothing proved stable enough to survive the stress test.

Another issue is that users' last used parameter settings do not get cleared when calling `restore`, which is also only apparent in the stress tests. Breaking it up was the way to go!

"
2553838992,pull_request,closed,,fix uncentered pie chart,"Closes https://github.com/metabase/metabase/issues/48123

### Description

Fixes the pie chart being uncentered by applying the same css to the legend and legend spacer elements in `ChartWithLegend.jsx`.

### How to verify

1. Create a pie chart (e.g. count orders by product category)
2. Chart should seem centered (can compare flanking element sizes using browser inspect)

### Demo


https://github.com/user-attachments/assets/3b16e2dd-918f-4cad-887e-d31fdc4269ed

Both flanking elements have same width

https://github.com/user-attachments/assets/38cff7ea-abb8-47fb-9ac5-e1a6f06f9f7e

Stays centered when resizing in query builder

https://github.com/user-attachments/assets/e77a75cd-af63-4187-ab18-dfef3c4ae80c

As well as in a dashcard

https://github.com/user-attachments/assets/2a6aa22e-d916-4b38-aacc-ce85ed4fdd9b

Choropleth map, which also uses `ChartWithLegend`, is also centered

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-09-27 22:35:24+00:00,['EmmadUsmani'],2024-10-01 16:29:32+00:00,2024-10-01 16:29:29+00:00,https://github.com/metabase/metabase/pull/48179,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2380237065, 'issue_id': 2553838992, 'author': 'EmmadUsmani', 'body': '* **#48179** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48179?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 27, 22, 35, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2380241913, 'issue_id': 2553838992, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e12e36044e588761a3fb9aed10900a9d506d7fd6...de7d75aad648c4d5a06432d59f147b29dea0f75e.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartWithLegend.jsx<br>frontend/src/metabase/visualizations/components/ChartWithLegend.module.css |', 'created_at': datetime.datetime(2024, 9, 27, 22, 42, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383696674, 'issue_id': 2553838992, 'author': 'EmmadUsmani', 'body': ""@alxnddr Thanks for the quick review! Yeah I initially tried to use our existing dynamic pie chart stories. The problem is that the chart renders after the legend, so Loki will take a snapshot only of the legend, see below (or at https://storybook.metabase.com/?path=/story/viz-piechart--embedded-question)\r\n\r\n![image](https://github.com/user-attachments/assets/8f503331-862b-4a82-b20b-83f4cdd92bc9)\r\n\r\nI don't think there's an easy way to fix this. Loki doesn't have any options to delay taking the snapshot, only `--chromeLoadTimeout` but that's for waiting for the initial page load. Getting the chart to render instantly isn't really feasible either since it takes time for the chart model and other computations to run on initial load."", 'created_at': datetime.datetime(2024, 9, 30, 16, 47, 27, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-09-27 22:35:40 UTC): * **#48179** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48179?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-09-27 22:42:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e12e36044e588761a3fb9aed10900a9d506d7fd6...de7d75aad648c4d5a06432d59f147b29dea0f75e.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartWithLegend.jsx<br>frontend/src/metabase/visualizations/components/ChartWithLegend.module.css |

EmmadUsmani (Issue Creator) on (2024-09-30 16:47:27 UTC): @alxnddr Thanks for the quick review! Yeah I initially tried to use our existing dynamic pie chart stories. The problem is that the chart renders after the legend, so Loki will take a snapshot only of the legend, see below (or at https://storybook.metabase.com/?path=/story/viz-piechart--embedded-question)

![image](https://github.com/user-attachments/assets/8f503331-862b-4a82-b20b-83f4cdd92bc9)

I don't think there's an easy way to fix this. Loki doesn't have any options to delay taking the snapshot, only `--chromeLoadTimeout` but that's for waiting for the initial page load. Getting the chart to render instantly isn't really feasible either since it takes time for the chart model and other computations to run on initial load.

"
2553657924,pull_request,closed,,Sync DBs in a future when initializing MB from config file,"Resolves #46548

* Syncs DBs off-thread using a future when starting up Metabase with databases defined in a config file
* Updates some t2 model references to be keywords

Open question: should we provide a way to opt-in to the previous blocking behavior? Most likely nobody is relying on it but who knows.",noahmoss,2024-09-27 20:08:27+00:00,['noahmoss'],2024-10-01 13:01:47+00:00,2024-10-01 13:01:45+00:00,https://github.com/metabase/metabase/pull/48176,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2379977600, 'issue_id': 2553657924, 'author': 'noahmoss', 'body': '* **#48176** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48176?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 27, 20, 8, 43, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-27 20:08:43 UTC): * **#48176** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48176?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2553562445,pull_request,closed,,fix: bigquery more resilient querying,"Fixes #47990

Inline some function calls to make it easier to track what's happening.

Make sure that cancellation during the initial query and subsequent page fetches are handled properly. Explicitly throw when cancelled.

Only retry queries if bigquery says they are retryable.

Try to cancel the BigQuery job if an exception or cancellation occurs.
",snoe,2024-09-27 19:04:23+00:00,['snoe'],2024-10-02 21:46:50+00:00,2024-10-02 21:46:49+00:00,https://github.com/metabase/metabase/pull/48175,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]",[],
2553426888,pull_request,closed,,"🤖 backported ""[QP] Don't attach `:temporal-unit :default` to every temporal clause""","  #48085
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-27 17:38:54+00:00,"['bshepherdson', 'github-automation-metabase']",2024-10-01 22:14:28+00:00,2024-10-01 22:14:27+00:00,https://github.com/metabase/metabase/pull/48172,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2553406340,pull_request,closed,,Backport: Require `:encryption` for string settings (#48067),"Backport of #48067

For settings that are not typed as JSON, CSV, or strings, encryption now defaults to `:no` rather than `:when-encryption-key-set` (except if you have explicitly marked your setting as `:sensitive?` - these will default to `:when-encryption-key-set`).

I went through all our settings and provided what I think are reasonable values here. I tried to be conservative - when I wasn't sure whether a stored setting was sensitive, I kept it as encrypted. For example, the ldap-port setting is probably non-sensitive but theoretically someone could be using a weird port for security-by-obscurity, so I kept that encrypted.

Fixes https://github.com/metabase/metabase/issues/47101",johnswanson,2024-09-27 17:24:45+00:00,['johnswanson'],2024-10-01 12:49:09+00:00,2024-10-01 12:49:08+00:00,https://github.com/metabase/metabase/pull/48171,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2553257048,pull_request,closed,,perf: Do fewer moderation_reviews queries when fetching recent views,This saves up to 2 requests to the DB by performing batch hydration of :moderation_reviews for all items at once (not for each group separately).,alexander-yakushev,2024-09-27 15:52:35+00:00,['alexander-yakushev'],2024-10-01 17:55:59+00:00,2024-10-01 16:59:59+00:00,https://github.com/metabase/metabase/pull/48169,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2553244967,pull_request,closed,,Manual backport of update used cards nanotime fix,"Pulled from #41384 on master
",snoe,2024-09-27 15:46:52+00:00,['snoe'],2024-10-15 20:27:46+00:00,2024-10-15 20:27:44+00:00,https://github.com/metabase/metabase/pull/48168,[],[],
2553208387,pull_request,closed,,Fix non-bool value in CSV upload availability check for stats ping,"We should return `false` instead of `nil` if for some reason the current MB build doesn't have version information available, so that we're still compliant with the Snowplow schema. Slack context: https://metaboat.slack.com/archives/C064EB1UE5P/p1727449849928259

Also added a unit test for this helper function.",noahmoss,2024-09-27 15:26:47+00:00,['noahmoss'],2024-10-08 16:14:12+00:00,2024-09-27 19:38:05+00:00,https://github.com/metabase/metabase/pull/48167,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2379545310, 'issue_id': 2553208387, 'author': 'noahmoss', 'body': '* **#48167** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48167?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 27, 15, 27, 4, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-27 15:27:04 UTC): * **#48167** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48167?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2553133172,pull_request,closed,,"🤖 backported ""Reset the dashboard parameter when setting the default value""",#48089,github-automation-metabase,2024-09-27 14:52:07+00:00,"['romeovs', 'github-automation-metabase']",2024-09-27 15:25:02+00:00,2024-09-27 15:25:01+00:00,https://github.com/metabase/metabase/pull/48165,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2553107995,pull_request,closed,,"🤖 backported ""Pivot Options are Properly Calculated for Questions based on Models with Joins""",#47830,github-automation-metabase,2024-09-27 14:39:48+00:00,"['bshepherdson', 'github-automation-metabase']",2024-10-01 21:56:07+00:00,2024-10-01 21:56:06+00:00,https://github.com/metabase/metabase/pull/48164,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2552778876,pull_request,closed,,add a workaround for a flaky test,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-09-27 12:15:44+00:00,['uladzimirdev'],2024-09-30 20:15:24+00:00,2024-09-30 20:15:22+00:00,https://github.com/metabase/metabase/pull/48162,"[('.Team/Querying', '')]",[],
2552669680,pull_request,closed,,updateSetting e2e typed helper,"Note: The first commit has the actual function, the second commit changes all the E2Es to use it.

# Description 
I wasted at least half an hour today debugging a e2e test, not realizing the the BE was returning 204 even though i was not sending the correct values to the endpoint.
(I was updating `application-font-files` and sending the array of fonts directly in the body instead of wrapping it in an object like `{value: []}`.

This PR adds a putSetting helper which is typed and should not only make it impossible to do such mistake, but it also have autocompletion so it should make us bit more happy when working with E2Es.

<img width=""704"" alt=""image"" src=""https://github.com/user-attachments/assets/b28accc2-0eec-4552-a33c-99cd6fc83289"">

Next possible step would be to make a `putSettings` that accepts multiple settings and just calls PUT `/api/setting`
",npretto,2024-09-27 11:16:30+00:00,['npretto'],2024-10-01 13:09:25+00:00,2024-09-30 15:17:29+00:00,https://github.com/metabase/metabase/pull/48161,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2382477316, 'issue_id': 2552669680, 'author': 'npretto', 'body': '> Awesome 👍\r\n\r\n`updateSetting` it is then :)', 'created_at': datetime.datetime(2024, 9, 30, 8, 41, 58, tzinfo=datetime.timezone.utc)}]","npretto (Issue Creator) on (2024-09-30 08:41:58 UTC): `updateSetting` it is then :)

"
2552589613,pull_request,closed,,"test(sdk): test that ""Custom"" fonts work with the sdk","closes https://github.com/metabase/metabase/pull/48160

# Description

This tests that if a customer has a ""Custom"" font set on their instance it will be used.
They can either pass ""Custom"" by hand to fontFamily or let it work by default as the `getFont` selector will return ""Custom"".
",npretto,2024-09-27 10:33:48+00:00,['npretto'],2024-10-08 16:14:13+00:00,2024-09-27 15:08:20+00:00,https://github.com/metabase/metabase/pull/48160,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2378970624, 'issue_id': 2552589613, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 27, 10, 34, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-27 10:34:11 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2552553795,pull_request,closed,,Pass credentials to nightly build tag workflow,"### Description

Update the automatic nightly release tag workflow call to inherit secrets from the parent job.
",iethree,2024-09-27 10:15:06+00:00,['iethree'],2024-10-08 16:14:15+00:00,2024-09-27 12:21:34+00:00,https://github.com/metabase/metabase/pull/48159,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2552218921,pull_request,closed,,"🤖 backported ""Fix edge cases where uploads munged display names""",#48149,github-automation-metabase,2024-09-27 07:31:22+00:00,"['crisptrutski', 'github-automation-metabase']",2024-09-27 09:08:01+00:00,2024-09-27 09:07:59+00:00,https://github.com/metabase/metabase/pull/48157,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2551670615,pull_request,closed,,adding swag button,"Closes https://github.com/metabase/metabase/issues/48208

### Description
Adding a button in the admin section that should only show if the following is true:
- The version is a release candidate
- The date is before November 1st

Clicking it should open a modal that helps navigate you to the swag form.

### How to verify

Describe the steps to verify that the changes are working as expected.
1. Edit your `version.properties` folder to have version v0.51.3-rc
2. Start the BE, and navigate to the admin app
3. Witness the shiny button. Click it. You know you want to
4. A modal should appear with a link at the bottom. Clicking it should take you to a form, and navigating back to the app the modal should be gone and the button should be less shiny.

### Demo
![chrome_4sdhB7prng](https://github.com/user-attachments/assets/f8a47729-9b1a-46b3-addc-1774f117fcd5)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-09-26 23:05:12+00:00,['npfitz'],2024-10-02 17:45:06+00:00,2024-10-02 17:45:04+00:00,https://github.com/metabase/metabase/pull/48155,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2383831968, 'issue_id': 2551670615, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff dcc33cebdfcd406f2a9bfb7359fcbe76f1446f7a...ab7a608b84739ad753326a1bc80722dc342446f9.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/t-shirt.svg |', 'created_at': datetime.datetime(2024, 9, 30, 17, 54, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-30 17:54:54 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff dcc33cebdfcd406f2a9bfb7359fcbe76f1446f7a...ab7a608b84739ad753326a1bc80722dc342446f9.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/t-shirt.svg |

"
2551659997,pull_request,closed,,feat(sdk): adds granular embedding settings,"resolves #47524, #47527, and #47906

# Changes made:

- [x] [Remove `enable-embedding` and introduce `enable-embedding-static` and `enable-embedding-interactive`](https://github.com/metabase/metabase/pull/47524)

I actually made the `enable-embedding` setting deprecated so we show warnings when it gets set via env.

- [x] [Rename `embedding-app-origin` to `embedding-app-origins-interactive`](https://github.com/metabase/metabase/pull/47527)

I made `embedding-app-origin` depricated so we show warnings when it gets set, too.

- [x] [Propigate the replaced settings + error out when incompatible settings are provided](https://github.com/metabase/metabase/pull/47906)

This does 2 things:

1. copies over setting values on app startup, if none of the new settings are set
    - [x] if all env vars for the new config vars are missing, the value of `MB_ENABLE_EMBEDDING` is applied to `enable-embedding-static`, `enable-embedding-interactive` and `enable-embedding-sdk` settings
3. stops the app from running if you put in one of the deprecated settings And it's corresponding new setting.
    - [x] on startup, check for conflicting settings from environemnt, and crash app if:
        - `MB_ENABLE_EMBEDDING` OR any combo of:
            - `MB_ENABLE_EMBEDDING_SDK` `MB_ENABLE_EMBEDDING_INTERACTIVE` `MB_ENABLE_EMBEDDING_STATIC` are set
        - `MB_EMBEDDING_APP_ORIGIN` OR any combo of:
            - `MB_EMBEDDING_APP_ORIGINS_SDK` `MB_EMBEDDING_APP_ORIGINS_INTERACTIVE` are set

### Migrations

- [x] add migration for enable-embedding -> enable-embedding-{static,interactive}
- [x] add migration for embedding-app-origin -> embedding-app-origins-interactive
- [x] update migrations to work with maria/mysql
- [x] update migrations to work with h2
- [x] add tests for migrations
- [x] add tests for migrations with encrypted settings values



",escherize,2024-09-26 22:52:41+00:00,['escherize'],2024-10-07 17:36:19+00:00,2024-10-07 17:36:17+00:00,https://github.com/metabase/metabase/pull/48154,"[('Embedding/', 'Use this label when unsure which flavor of embedding is impacted'), ('.Backend', ''), ('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2378083963, 'issue_id': 2551659997, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@escherize You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 26, 22, 53, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392288919, 'issue_id': 2551659997, 'author': 'escherize', 'body': 'I did an experiemnt to ensure it will work:\r\n\r\n1. run the 49 jar with encryption\r\n(notice the log line `... Saved credentials encryption is ENABLED for this Metabase instance. 🔐`)\r\n```shell\r\nMB_ENCRYPTION_SECRET_KEY=123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz MB_CONFIG_FILE_PATH=/Users/bcm/dv/mb/config.yml MB_DB_CONNECTION_URI=postgres://bcm:password@localhost:5432/metabase MB_DB_TYPE=postgres MB_DIR=/Users/bcm/dv/mb/metabase MB_EDITION=ee MB_PREMIUM_EMBEDDING_TOKEN=f325eca45593921f844e9f0f913a651bc3465a85b8369be1dcadc20d5524d01a java -jar metabase_1_49_25.jar\r\n```\r\n2. setup embedding-enabled `true` and embedding-app-origin = `http://example.com:1234 http://a.com:33`.\r\n\r\n3. select on db, to ensure it happened:\r\n```sql\r\nmetabase=# select * from setting where key like \'%embedding%\';\r\n         key          |                                                                                    value\r\n----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n enable-embedding     | DXGR4v/2RG3woAE0NGmglRyioslDAXoAnHu0ZIl5vK8Zi0v0A+a8cdoIvN3YoqyTEbODnEgpLuYr97AM8A+U8Q==\r\n embedding-secret-key | Z7FnHwNW03zQeYyYqA4V/VTr2We0dbPzpMyHiTlrykWwGFcxuO4q+4Vn/TSQSHpVaYv0qYdLFqsDCSzDCzyTXvPw7maueH4xHwKbLbELWd3OZF3Q1t4UpLFPqzhX3yvF2towZS5dLKaEtU4xG7Bb5nvEnrH+46HpWP5fJDrxdiw=\r\n embedding-app-origin | vPqOn1/JhulWxtnGvKQ4cE6G52g4JdNND5FmxnWXzt3cZohHR5LuUuOlKg3kvlpNLtDDBKDl1PVqV0TuSHsPeFz9ZtNQXPBw8YIOODXlPLkZ/VAOkVoqUb/Z9r78gCtO\r\n(3 rows)\r\n```\r\n\r\n4. run this branch with the same encryption key:\r\n(notice the log line `... Saved credentials encryption is ENABLED for this Metabase instance. 🔐`)\r\n```shell\r\nMB_ENCRYPTION_SECRET_KEY=123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz MB_CONFIG_FILE_PATH=/Users/bcm/dv/mb/config.yml MB_DB_CONNECTION_URI=postgres://bcm:password@localhost:5432/metabase MB_DB_TYPE=postgres MB_DIR=/Users/bcm/dv/mb/metabase MB_EDITION=ee MB_PREMIUM_EMBEDDING_TOKEN=f325eca45593921f844e9f0f913a651bc3465a85b8369be1dcadc20d5524d01a clj -M:dev:ee:ee-dev:drivers:drivers-dev:cider/nrepl:escherize/tools\r\n```\r\n\r\n5. see if the app can read the new settings (they\'re not set via env var, so we know ) it didn\'t happen from `embed.settings/check-and-sync-settings-on-startup!`.\r\n\r\n```clojure\r\n(embedding-app-origins-interactive)\r\n;; => ""http://example.com:1234 http://a.com:33""\r\n```\r\n\r\n6. rerun sql query:\r\n```sql\r\nmetabase=# select * from setting where key like \'%embedding%\';\r\n                key                |                                                                                    value\r\n-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n embedding-secret-key              | Z7FnHwNW03zQeYyYqA4V/VTr2We0dbPzpMyHiTlrykWwGFcxuO4q+4Vn/TSQSHpVaYv0qYdLFqsDCSzDCzyTXvPw7maueH4xHwKbLbELWd3OZF3Q1t4UpLFPqzhX3yvF2towZS5dLKaEtU4xG7Bb5nvEnrH+46HpWP5fJDrxdiw=\r\n enable-embedding                  | true\r\n embedding-app-origin              | http://example.com:1234 http://a.com:33\r\n enable-embedding-interactive      | true\r\n enable-embedding-static           | true\r\n enable-embedding-sdk              | true\r\n embedding-app-origins-interactive | http://example.com:1234 http://a.com:33\r\n embedding-app-origins-sdk         | http://example.com:1234 http://a.com:33\r\n```\r\n\r\nI was surprised to see them decrypted here, but I think it\'s because the settings have `:encryption :no` config.\r\n\r\nBut, now we know that it will work.', 'created_at': datetime.datetime(2024, 10, 3, 20, 37, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392588803, 'issue_id': 2551659997, 'author': 'qnkhuat', 'body': '@escherize The settings are decrypted because we call `settings/migrate-encrypted-settings!` on startup.', 'created_at': datetime.datetime(2024, 10, 4, 1, 4, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2392618979, 'issue_id': 2551659997, 'author': 'qnkhuat', 'body': ""Could you help me understand:\r\n1. why do we need the migration and we have sync code on start up? can we use one or the other\r\n2. why it's important to crash the app if old EVN are set? I don't see any reference to the old setting in the code so it should be fine? Can this be a warning?"", 'created_at': datetime.datetime(2024, 10, 4, 1, 29, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2393976213, 'issue_id': 2551659997, 'author': 'escherize', 'body': 'Most of this comes down to ""better ux when setting up embedding"".\r\n\r\n> why do we need the migration and we have sync code on start up? can we use one or the other\r\n\r\nThe migration affects the values in the settings table, and the sync code only syncs values from environment variables.\r\n\r\nThe reason we care about env variables separately is when setting things up using embedding if you are not up to date on the docs, and do `MB_ENABLE_EMBEDDING=true`, we (print a depreciation warning), and gracefully forward your intentions into the 3 new embedding-enabled settings.\r\n\r\n> why it\'s important to crash the app if old EVN are set? I don\'t see any reference to the old setting in the code so it should be fine? Can this be a warning?\r\n\r\nWe want to crash the app if old and new ENV vars are set so that it\'s more straightforward to know what\'s happening with the app. Warnings are really easy to ignore, but we can give the impression that your embedding settings are not what you expected. More info here: https://www.notion.so/metabase/Feature-flag-and-settings-for-SDK-8ed424c776194528b6332c5fc2510a0c?pvs=4#7f51881e125a482e931997308c17cbf6', 'created_at': datetime.datetime(2024, 10, 4, 15, 36, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2393993355, 'issue_id': 2551659997, 'author': 'albertoperdomo', 'body': "">why it's important to crash the app if old EVN are set?\r\n\r\nWe don't want to crash the app if an old ENV VAR is set. We want to crash it if old and new ENV var are set simultaneously, because the behavior might be unclear and unexpected for the user."", 'created_at': datetime.datetime(2024, 10, 4, 15, 46, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395763297, 'issue_id': 2551659997, 'author': 'qnkhuat', 'body': ""> We don't want to crash the app if an old ENV VAR is set. We want to crash it if old and new ENV var are set simultaneously, because the behavior might be unclear and unexpected for the user.\r\n\r\nok that makes sense, just make sure that cloud people know about this and we should add a note in the changelog about this so people are not surprised.\r\n\r\n\r\nOne more question: should we worry about rollback? Let's say someone has embedding enabled in 50, upgraded to 51, turn turn off embedding, downgrade to 50: should we write rollback so that embedding is disabled on 50?"", 'created_at': datetime.datetime(2024, 10, 7, 2, 23, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397322027, 'issue_id': 2551659997, 'author': 'escherize', 'body': ""> Should we worry about rollback? Let's say someone has embedding enabled in 50, upgraded to 51, turn turn off embedding, downgrade to 50: should we write rollback so that embedding is disabled on 50?\r\n\r\nI think in that case there is not an issue: The settings that get modified from the up migration aren't used in 50, only `embedding_enabled` and `embedding-app-origin` are. So rolling back those settings won't change any behaviors in 50."", 'created_at': datetime.datetime(2024, 10, 7, 15, 59, 59, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-26 22:53:01 UTC): <!---conventional commit reminder comment ID-->
@escherize You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

escherize (Issue Creator) on (2024-10-03 20:37:36 UTC): I did an experiemnt to ensure it will work:

1. run the 49 jar with encryption
(notice the log line `... Saved credentials encryption is ENABLED for this Metabase instance. 🔐`)
```shell
MB_ENCRYPTION_SECRET_KEY=123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz MB_CONFIG_FILE_PATH=/Users/bcm/dv/mb/config.yml MB_DB_CONNECTION_URI=postgres://bcm:password@localhost:5432/metabase MB_DB_TYPE=postgres MB_DIR=/Users/bcm/dv/mb/metabase MB_EDITION=ee MB_PREMIUM_EMBEDDING_TOKEN=f325eca45593921f844e9f0f913a651bc3465a85b8369be1dcadc20d5524d01a java -jar metabase_1_49_25.jar
```
2. setup embedding-enabled `true` and embedding-app-origin = `http://example.com:1234 http://a.com:33`.

3. select on db, to ensure it happened:
```sql
metabase=# select * from setting where key like '%embedding%';
         key          |                                                                                    value
----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 enable-embedding     | DXGR4v/2RG3woAE0NGmglRyioslDAXoAnHu0ZIl5vK8Zi0v0A+a8cdoIvN3YoqyTEbODnEgpLuYr97AM8A+U8Q==
 embedding-secret-key | Z7FnHwNW03zQeYyYqA4V/VTr2We0dbPzpMyHiTlrykWwGFcxuO4q+4Vn/TSQSHpVaYv0qYdLFqsDCSzDCzyTXvPw7maueH4xHwKbLbELWd3OZF3Q1t4UpLFPqzhX3yvF2towZS5dLKaEtU4xG7Bb5nvEnrH+46HpWP5fJDrxdiw=
 embedding-app-origin | vPqOn1/JhulWxtnGvKQ4cE6G52g4JdNND5FmxnWXzt3cZohHR5LuUuOlKg3kvlpNLtDDBKDl1PVqV0TuSHsPeFz9ZtNQXPBw8YIOODXlPLkZ/VAOkVoqUb/Z9r78gCtO
(3 rows)
```

4. run this branch with the same encryption key:
(notice the log line `... Saved credentials encryption is ENABLED for this Metabase instance. 🔐`)
```shell
MB_ENCRYPTION_SECRET_KEY=123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz MB_CONFIG_FILE_PATH=/Users/bcm/dv/mb/config.yml MB_DB_CONNECTION_URI=postgres://bcm:password@localhost:5432/metabase MB_DB_TYPE=postgres MB_DIR=/Users/bcm/dv/mb/metabase MB_EDITION=ee MB_PREMIUM_EMBEDDING_TOKEN=f325eca45593921f844e9f0f913a651bc3465a85b8369be1dcadc20d5524d01a clj -M:dev:ee:ee-dev:drivers:drivers-dev:cider/nrepl:escherize/tools
```

5. see if the app can read the new settings (they're not set via env var, so we know ) it didn't happen from `embed.settings/check-and-sync-settings-on-startup!`.

```clojure
(embedding-app-origins-interactive)
;; => ""http://example.com:1234 http://a.com:33""
```

6. rerun sql query:
```sql
metabase=# select * from setting where key like '%embedding%';
                key                |                                                                                    value
-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 embedding-secret-key              | Z7FnHwNW03zQeYyYqA4V/VTr2We0dbPzpMyHiTlrykWwGFcxuO4q+4Vn/TSQSHpVaYv0qYdLFqsDCSzDCzyTXvPw7maueH4xHwKbLbELWd3OZF3Q1t4UpLFPqzhX3yvF2towZS5dLKaEtU4xG7Bb5nvEnrH+46HpWP5fJDrxdiw=
 enable-embedding                  | true
 embedding-app-origin              | http://example.com:1234 http://a.com:33
 enable-embedding-interactive      | true
 enable-embedding-static           | true
 enable-embedding-sdk              | true
 embedding-app-origins-interactive | http://example.com:1234 http://a.com:33
 embedding-app-origins-sdk         | http://example.com:1234 http://a.com:33
```

I was surprised to see them decrypted here, but I think it's because the settings have `:encryption :no` config.

But, now we know that it will work.

qnkhuat on (2024-10-04 01:04:40 UTC): @escherize The settings are decrypted because we call `settings/migrate-encrypted-settings!` on startup.

qnkhuat on (2024-10-04 01:29:14 UTC): Could you help me understand:
1. why do we need the migration and we have sync code on start up? can we use one or the other
2. why it's important to crash the app if old EVN are set? I don't see any reference to the old setting in the code so it should be fine? Can this be a warning?

escherize (Issue Creator) on (2024-10-04 15:36:17 UTC): Most of this comes down to ""better ux when setting up embedding"".


The migration affects the values in the settings table, and the sync code only syncs values from environment variables.

The reason we care about env variables separately is when setting things up using embedding if you are not up to date on the docs, and do `MB_ENABLE_EMBEDDING=true`, we (print a depreciation warning), and gracefully forward your intentions into the 3 new embedding-enabled settings.


We want to crash the app if old and new ENV vars are set so that it's more straightforward to know what's happening with the app. Warnings are really easy to ignore, but we can give the impression that your embedding settings are not what you expected. More info here: https://www.notion.so/metabase/Feature-flag-and-settings-for-SDK-8ed424c776194528b6332c5fc2510a0c?pvs=4#7f51881e125a482e931997308c17cbf6

albertoperdomo on (2024-10-04 15:46:13 UTC): We don't want to crash the app if an old ENV VAR is set. We want to crash it if old and new ENV var are set simultaneously, because the behavior might be unclear and unexpected for the user.

qnkhuat on (2024-10-07 02:23:36 UTC): ok that makes sense, just make sure that cloud people know about this and we should add a note in the changelog about this so people are not surprised.


One more question: should we worry about rollback? Let's say someone has embedding enabled in 50, upgraded to 51, turn turn off embedding, downgrade to 50: should we write rollback so that embedding is disabled on 50?

escherize (Issue Creator) on (2024-10-07 15:59:59 UTC): I think in that case there is not an issue: The settings that get modified from the up migration aren't used in 50, only `embedding_enabled` and `embedding-app-origin` are. So rolling back those settings won't change any behaviors in 50.

"
2551607744,pull_request,closed,,Add alternative release channel info to version-info.json,"part of #48121

### Description

Updates version-info.json tagging logic to update `nightly` and `beta` keys.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
- [x] test in my fork: [success](https://github.com/iethree/metabase/actions/runs/11129028677)
",iethree,2024-09-26 22:09:25+00:00,['iethree'],2024-10-08 16:13:53+00:00,2024-10-01 23:40:24+00:00,https://github.com/metabase/metabase/pull/48153,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2551517034,pull_request,closed,,🏳️  Realign description inputs,"
### Description

Realigns description inputs in question and dashboard sidesheets to align for the consumption, rather than editing experience.

![Screen Shot 2024-09-26 at 2 55 24 PM](https://github.com/user-attachments/assets/08a2182d-96ba-4d42-b727-63ce9fe1b236)
",iethree,2024-09-26 20:56:00+00:00,['iethree'],2024-10-08 16:14:16+00:00,2024-09-27 09:38:08+00:00,https://github.com/metabase/metabase/pull/48152,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2551475237,pull_request,closed,,Rename `Metabase analytics` to `Usage analytics` and other small fixes,fixes #46256,luizarakaki,2024-09-26 20:27:01+00:00,"['iethree', 'luizarakaki']",2024-09-30 14:25:26+00:00,2024-09-30 14:25:24+00:00,https://github.com/metabase/metabase/pull/48151,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2551366102,pull_request,closed,,make query builder UI controls more predictable,"implementation of ML1 of https://github.com/metabase/metabase/issues/47911

### How to verify

all steps from the first iteration of [product doc](https://www.notion.so/metabase/Make-query-builder-UI-controls-more-predictable-6fd99a110a954c2fb3fba8d8a8c24ae5) are implemented
",uladzimirdev,2024-09-26 19:20:35+00:00,['uladzimirdev'],2025-01-10 09:15:36+00:00,2025-01-10 09:15:14+00:00,https://github.com/metabase/metabase/pull/48150,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2401859562, 'issue_id': 2551366102, 'author': 'uladzimirdev', 'body': ""@romeovs it's WIP and not ready for review, sorry"", 'created_at': datetime.datetime(2024, 10, 9, 9, 50, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2468943488, 'issue_id': 2551366102, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/50643_tests-80d5f5a4-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/5-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>issue 16914 should recover visualization settings after a failed query (metabase\\#16914)</code> | The expected content \'/hidden/i\' was not found within the element <aside.emotion-1mzrabc.emzg3k00> after 4000ms. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=b2172a19-67d1-5e8a-b5b8-0933eb7970bf) |\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>scenarios > visualizations > waterfall scenarios > visualizations > waterfall settings should allow toggling of value labels</code> | The test timed out while trying to find an element with data-testid ""chart-container"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=e00d777d-8660-5f87-9ed1-86ff1b98f9f2) |\n| <code>issue 30039 should not trigger object detail navigation after the modal was closed (metabase\\#30039)</code> | The test timed out while trying to find an element with data-testid ""detail-shortcut"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=04c77ed1-443b-5e04-b6c9-fcbd1bc830c2) |\n| <code>issue 8490 static embeddings should respect \\`\\#locale\\` hash parameter (metabase\\#8490, metabase\\#50182)</code> | Unable to find an element with the text ""11월 2023"" after 4000ms, possibly due to broken text being split by multiple elements. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=baf1a598-8717-539e-84e0-fe198bf1d711) |\n| <code>scenarios > filters > sql filters > field filter > Date when set as the default value for a required filter</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=8750959a-f5e6-506f-9a47-da8891054857) |\n\n[... and 1 more](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE)\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 11, 20, 9, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2582140072, 'issue_id': 2551366102, 'author': 'uladzimirdev', 'body': ""It's reimplemented in different PRs"", 'created_at': datetime.datetime(2025, 1, 10, 9, 15, 35, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-10-09 09:50:55 UTC): @romeovs it's WIP and not ready for review, sorry

trunk-io[bot] on (2024-11-11 20:09:47 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/50643_tests-80d5f5a4-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/5-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>issue 16914 should recover visualization settings after a failed query (metabase\#16914)</code> | The expected content '/hidden/i' was not found within the element <aside.emotion-1mzrabc.emzg3k00> after 4000ms. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=b2172a19-67d1-5e8a-b5b8-0933eb7970bf) |
| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>scenarios > visualizations > waterfall scenarios > visualizations > waterfall settings should allow toggling of value labels</code> | The test timed out while trying to find an element with data-testid ""chart-container"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=e00d777d-8660-5f87-9ed1-86ff1b98f9f2) |
| <code>issue 30039 should not trigger object detail navigation after the modal was closed (metabase\#30039)</code> | The test timed out while trying to find an element with data-testid ""detail-shortcut"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=04c77ed1-443b-5e04-b6c9-fcbd1bc830c2) |
| <code>issue 8490 static embeddings should respect \`\#locale\` hash parameter (metabase\#8490, metabase\#50182)</code> | Unable to find an element with the text ""11월 2023"" after 4000ms, possibly due to broken text being split by multiple elements. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=baf1a598-8717-539e-84e0-fe198bf1d711) |
| <code>scenarios > filters > sql filters > field filter > Date when set as the default value for a required filter</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE&runId=8750959a-f5e6-506f-9a47-da8891054857) |

[... and 1 more](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment&runConclusion=FAILURE)
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48150?repo=metabase/metabase&commitHash=80d5f5a4b1590e1c456462774e112d09efeb1470&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

uladzimirdev (Issue Creator) on (2025-01-10 09:15:35 UTC): It's reimplemented in different PRs

"
2551363264,pull_request,closed,,Fix edge cases where uploads munged display names,"Fixes https://github.com/metabase/metabase/issues/48135

This fixes some scenarios where we would not preserve the exact display name from the source CSV, due to the relationship between the humanization of the munged form involved more than just capitalization.

This bug affected any column with non-ascii characters and a space.",crisptrutski,2024-09-26 19:18:49+00:00,['crisptrutski'],2024-09-27 08:19:55+00:00,2024-09-27 07:30:36+00:00,https://github.com/metabase/metabase/pull/48149,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2378721150, 'issue_id': 2551363264, 'author': 'crisptrutski', 'body': ""> do you think this will fix a problem in #46309?\r\n\r\nUnfortunately I don't think it's related.\r\n\r\nI'll take a look at that next though."", 'created_at': datetime.datetime(2024, 9, 27, 8, 19, 54, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-27 08:19:54 UTC): Unfortunately I don't think it's related.

I'll take a look at that next though.

"
2551326116,pull_request,closed,,[Databricks] Temporarily fix hive-like dependency,"Databricks depends on `hive-like` that resides in sparksql drivers dir. In development that's not a problem because of `:drivers` alias I assume. When using uberjar artefact the dependency is missing.

As temporary workaround (to enable driver testing) I've copied hive like sources to Databricks' dir. Tested locally, built uberjar contains the driver -- visible in admin UI.

As a followup, proper way of depending on `hive-like` must be found.",lbrdnk,2024-09-26 18:56:55+00:00,['lbrdnk'],2024-10-08 16:14:15+00:00,2024-09-27 11:46:08+00:00,https://github.com/metabase/metabase/pull/48148,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2377765389, 'issue_id': 2551326116, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit f984a4dcff7c5e21f1c21f34e1fbe046d5b4a635.\n✅ Preview:\n    https://pr48148.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 26, 19, 27, 18, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-26 19:27:18 UTC): 👋 Deploying a preview environment for commit f984a4dcff7c5e21f1c21f34e1fbe046d5b4a635.
✅ Preview:
    https://pr48148.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2551197613,pull_request,closed,,Do not cache all token check failures,"We want to cache token checks to avoid an issue where we repeatedly ask the store ""hey, is this token valid?? is this token valid?? is this token valid??"" for the same token.

However, transient errors can also occur. For example, maybe a network issue causes the HTTP request to fail entirely. In this case, if we cache the result, the user needs to restart metabase (or wait 5 minutes until the cache is cleared) before they can attempt to validate their token again.

This PR moves the cache logic deeper into the stack. We want to cache ""successful"" responses from the store API - cases where the store has told us categorically that the token is or is not valid. We don't want or need to cache other things that might happen. Maybe your token isn't the right length - we can recalculate that, it's ok. Maybe you get a 503 error from the Store - we should let you retry. Maybe your network is having issues and you can't contact the Store at all - again, we should let you retry.

~The one potential issue I see here is that if the store goes down temporarily, we'll massively increase the number of requests we send to the store, potentially making it harder to recover from an outage. If this is a concern, I can add a circuit breaker: if we repeatedly get errors back from the store, back off and stop making requests for a while.~

Edit: I added the following:

In the pathological case where the store goes down for >5 minutes, the
cache will expire and all instances everywhere will start repeatedly
making requests for token validation at once. This might make recovering
from an outage more difficult.

This adds a circuit breaker around the API request. If the call
repeatedly throws (5XX errors, socket timeouts, etc.) then we'll pause
for 30 seconds, during which time all calls to token validation will
immediately fail without making any request to the API.

After 30 seconds, we'll allow one request through to the API. If it
succeeds, we'll go back to normal operation. Otherwise, we'll wait
another 30 seconds.


Fixes #41654 ",johnswanson,2024-09-26 17:46:46+00:00,['johnswanson'],2024-09-30 21:22:14+00:00,2024-09-30 21:22:13+00:00,https://github.com/metabase/metabase/pull/48147,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2550552942,pull_request,closed,,🚧 pass token to be tests,"[context](https://metaboat.slack.com/archives/CKZEMT1MJ/p1725639934071359)

related to https://github.com/metabase/metabase/issues/47941

### Description

pass premium token to be tests",uladzimirdev,2024-09-26 13:11:47+00:00,['uladzimirdev'],2025-02-03 11:28:16+00:00,2025-02-03 11:28:16+00:00,https://github.com/metabase/metabase/pull/48139,"[('backport', 'Automatically create PR on current release branch on merge'), ('Stale', 'Stale PRs that will be auto-closed'), ('.Team/Querying', '')]","[{'comment_id': 2603449640, 'issue_id': 2550552942, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 57, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:30:57 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

"
2550312688,pull_request,closed,,Periodically recreate the search index,"# Description

1. Adds periodic reindexing.
2. When the API is called, it triggers the job. This avoids concurrent re-indexing.",crisptrutski,2024-09-26 11:32:20+00:00,['crisptrutski'],2024-10-08 16:14:17+00:00,2024-09-27 05:15:19+00:00,https://github.com/metabase/metabase/pull/48137,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2377931019, 'issue_id': 2550312688, 'author': 'crisptrutski', 'body': '* **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#48137** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48137?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 26, 21, 1, 59, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-26 21:01:59 UTC): * **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#48137** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48137?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2550277983,pull_request,closed,,Browse cleanup,"Some clean up for the `metabase/browse` folder, by splitting up the components according to domain (eg. Models, Metrics, Databases, etc.).

This makes it code of different domains is not mixed in common utils files.",romeovs,2024-09-26 11:15:28+00:00,['romeovs'],2024-10-08 16:14:03+00:00,2024-10-01 09:15:02+00:00,https://github.com/metabase/metabase/pull/48136,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2550235285,pull_request,closed,,"Disable ""Compare to the past"" UI components","[From Slack](https://metaboat.slack.com/archives/C0645JP1W81/p1727103108387389): there are too many issues with the offset functionality, so we don't want to expose the ""Compare to the past"" UI just yet.

This PR disables the components (without removing their code), and also disables the corresponding tests.

",romeovs,2024-09-26 10:54:15+00:00,['romeovs'],2024-10-08 16:14:10+00:00,2024-09-30 14:35:06+00:00,https://github.com/metabase/metabase/pull/48134,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2550220759,pull_request,closed,,Require explicit flag to calculate available_models for search,"It's a lot of work to calculate the `available_models`, and in most cases we do not use this data. This PR makes the calculation opt-in.

TODO 
- [x] Send through the new flag where appropriate from the frontend",crisptrutski,2024-09-26 10:47:35+00:00,"['crisptrutski', 'npfitz']",2024-11-26 18:52:52+00:00,2024-10-08 16:46:04+00:00,https://github.com/metabase/metabase/pull/48133,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2376599988, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': '* **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48137** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48137?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 26, 10, 47, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2376661299, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': '> It contains traces of previous PR though\r\n\r\nWish Github was a bit smarter about squashing. Fixed.', 'created_at': datetime.datetime(2024, 9, 26, 11, 19, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377907917, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': 'Test failures are just some tests needing to be updated.', 'created_at': datetime.datetime(2024, 9, 26, 20, 47, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2382515868, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': ""@npfitz Is this g2g?\r\n\r\nThe two CI failures don't seem to relate to this branch, I've pinged the backend CI channel about them. Curiously they passed in master on Thursday, failed on our branch on Friday, and fail on master for me locally today."", 'created_at': datetime.datetime(2024, 9, 30, 8, 53, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387148932, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': 'Decided to wait on 51 release branch getting cut before merging this.', 'created_at': datetime.datetime(2024, 10, 1, 21, 58, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400361825, 'issue_id': 2550220759, 'author': 'crisptrutski', 'body': '51 is cut, tally ho!', 'created_at': datetime.datetime(2024, 10, 8, 16, 45, 55, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-26 10:47:47 UTC): * **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48137** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48137?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

crisptrutski (Issue Creator) on (2024-09-26 11:19:05 UTC): Wish Github was a bit smarter about squashing. Fixed.

crisptrutski (Issue Creator) on (2024-09-26 20:47:28 UTC): Test failures are just some tests needing to be updated.

crisptrutski (Issue Creator) on (2024-09-30 08:53:30 UTC): @npfitz Is this g2g?

The two CI failures don't seem to relate to this branch, I've pinged the backend CI channel about them. Curiously they passed in master on Thursday, failed on our branch on Friday, and fail on master for me locally today.

crisptrutski (Issue Creator) on (2024-10-01 21:58:08 UTC): Decided to wait on 51 release branch getting cut before merging this.

crisptrutski (Issue Creator) on (2024-10-08 16:45:55 UTC): 51 is cut, tally ho!

"
2550012492,pull_request,closed,,"🤖 backported ""perf: Improve the performance of /api/collection/tree when there are many collections""","  #48026
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-26 09:20:21+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-09-26 20:28:09+00:00,2024-09-26 20:27:36+00:00,https://github.com/metabase/metabase/pull/48132,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2550011499,pull_request,closed,,"🤖 backported ""perf: Use vectors to iterate over all user permissions""",#48025,github-automation-metabase,2024-09-26 09:19:53+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-09-26 10:13:28+00:00,2024-09-26 10:13:27+00:00,https://github.com/metabase/metabase/pull/48131,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2549127775,pull_request,closed,,Add Release Channel selection in-product,"part of https://github.com/metabase/metabase/issues/48121

### Description

Adds a new setting: `update-channel` in admin settings and shows appropriate release notes for it

![Screen Shot 2024-09-25 at 1 55 04 PM](https://github.com/user-attachments/assets/39a23086-146e-4b89-8937-3ebdd14dd272)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-25 22:49:46+00:00,['iethree'],2024-10-15 16:55:06+00:00,2024-10-04 22:02:32+00:00,https://github.com/metabase/metabase/pull/48126,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2414543048, 'issue_id': 2549127775, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 15, 16, 55, 5, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 16:55:05 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2548972246,pull_request,closed,,Add e2e tests for local search in the entity picker,"Epic https://github.com/metabase/metabase/issues/47281
Testing plan https://github.com/metabase/metabase/issues/47282

Adds tests for all cases from the testing plan. Fixes found bugs.

How to verify:
- New -> Question
- ""Tables"" -> Enter search text -> See that there are 2 tabs, with your database being selected by default
- ""Saved questions"" -> Enter search text -> See that there are 2 tabs, with your collection being selected by default",ranquild,2024-09-25 20:47:56+00:00,['ranquild'],2024-09-30 19:54:14+00:00,2024-09-30 19:54:12+00:00,https://github.com/metabase/metabase/pull/48122,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2548546547,pull_request,closed,,invalidate channels html as well,"Another little follow up to https://github.com/metabase/metabase/pull/47868

### Description

Invalidate the cloudfront cache for `channels.html` so the page updates faster
",iethree,2024-09-25 17:14:31+00:00,['iethree'],2024-10-08 16:14:21+00:00,2024-09-25 19:28:07+00:00,https://github.com/metabase/metabase/pull/48120,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2548524735,pull_request,closed,,"🤖 backported ""Pre fill non-sensitive user information during setup for hosted instances""",#48019,github-automation-metabase,2024-09-25 17:03:56+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-09-25 17:41:12+00:00,2024-09-25 17:41:12+00:00,https://github.com/metabase/metabase/pull/48119,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2374661295, 'issue_id': 2548524735, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 108a2aa0c05d6eccf9e934a748d85a618576555a...b96c305433421ab8af9c7f5b1c5d638f65d22be7.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.unit.spec.tsx<br>frontend/src/metabase/setup/reducers.ts |', 'created_at': datetime.datetime(2024, 9, 25, 17, 5, 20, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-25 17:05:20 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 108a2aa0c05d6eccf9e934a748d85a618576555a...b96c305433421ab8af9c7f5b1c5d638f65d22be7.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.unit.spec.tsx<br>frontend/src/metabase/setup/reducers.ts |

"
2548431490,pull_request,closed,,"🤖 backported ""[Permissions] PR Feedback for 47630""",#48116,github-automation-metabase,2024-09-25 16:24:06+00:00,"['sloansparger', 'github-automation-metabase']",2024-09-25 16:57:38+00:00,2024-09-25 16:57:37+00:00,https://github.com/metabase/metabase/pull/48117,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2548257208,pull_request,closed,,[Permissions] PR Feedback for 47630,"### Description

I forgot to push some PR feedback to #47630 😬 

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",sloansparger,2024-09-25 15:04:36+00:00,['sloansparger'],2024-09-25 16:58:05+00:00,2024-09-25 16:23:11+00:00,https://github.com/metabase/metabase/pull/48116,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2548241151,pull_request,closed,,"🤖 backported ""Add v0.50.27 to the list of releases""",#48102,github-automation-metabase,2024-09-25 14:58:12+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-25 15:02:02+00:00,2024-09-25 15:02:00+00:00,https://github.com/metabase/metabase/pull/48115,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2548237795,pull_request,closed,,"🤖 backported ""docs - update notice for community drivers""",#48111,github-automation-metabase,2024-09-25 14:56:50+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-25 15:01:56+00:00,2024-09-25 15:01:55+00:00,https://github.com/metabase/metabase/pull/48114,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2548235168,pull_request,closed,,"🤖 backported ""[Permissions] Warn group can’t view native queries w/ Blocked schema/table access""",#47630,github-automation-metabase,2024-09-25 14:55:46+00:00,"['sloansparger', 'github-automation-metabase']",2024-09-25 15:42:28+00:00,2024-09-25 15:42:27+00:00,https://github.com/metabase/metabase/pull/48113,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2548113153,pull_request,closed,,show small Join and CC icons for aggregation without breakout,"[Epic](https://github.com/metabase/metabase/issues/47911)

Add `join` and `custom column` small icons after summarize step if there is aggregation without a breakout


https://github.com/user-attachments/assets/71d1b6c0-60f2-43df-a20d-79aaa549d8f4

",uladzimirdev,2024-09-25 14:10:53+00:00,['uladzimirdev'],2024-09-27 20:46:11+00:00,2024-09-27 20:46:09+00:00,https://github.com/metabase/metabase/pull/48112,"[('.Team/Querying', '')]",[],
2548106676,pull_request,closed,,docs - update notice for community drivers,Like it says on the tin.,jeff-bruemmer,2024-09-25 14:08:16+00:00,['jeff-bruemmer'],2024-09-25 15:02:26+00:00,2024-09-25 14:55:42+00:00,https://github.com/metabase/metabase/pull/48111,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2548095866,pull_request,closed,,fix(sdk): fix React 17 compatibility with Table visualization,"**_Problem_**

For a client using the Embedding SDK with React 17, they were running into an error where `metabase/lib/react-compat`'s `isReact17OrEarlier` was failing. The check was running 
```
export const isReact17OrEarlier = () => !(""useSyncExternalStore"" in React);
```

However, in `embedding-sdk/lib/polyfill-use-sync-external-store.ts` we've already polyfilled `useSyncExternalStore`, so the check would always return false.


_**Fix**_

I've changed the check to use `React.version`, which should tell us the react version more reliably than checking for a key within the `React` object. I've also added unit tests for this function.

```
export const isReactVersionLessThanOrEqualTo17 = (version: string) => {
  const versionParts = version.split(""."").map(Number);
  return versionParts[0] < 17 || versionParts[0] === 17;
};
```

_**How to reproduce**_

* Pull this repo into your local instance, and create a question with a table visualization. Use the 'info' button to open the sidesheet, and copy the Entity ID.
* Use [this repro](https://github.com/oisincoveney/repro-lifesight) to instantiate a Metabase Embedding SDK app with React 17 and `craco`
* Ensure that the reference to `@metabase/embedding-sdk-react` is pointed to your repo, and you've added your API key in the `Provider` component
* Run the React app. The table should appear without errors.",oisincoveney,2024-09-25 14:04:01+00:00,['oisincoveney'],2024-10-01 13:52:14+00:00,2024-10-01 13:52:12+00:00,https://github.com/metabase/metabase/pull/48109,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2374192189, 'issue_id': 2548095866, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b28aa417bea88cbfea9ce3b8174ebba8becfd3d1...e8756d9d9dea19e9306f3d7ba6e8915bafa12a97.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 9, 25, 14, 5, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2374390790, 'issue_id': 2548095866, 'author': 'oisincoveney', 'body': ""Hey @metabase/core-frontend-dashviz! @npretto suggested that I should share this PR with you guys since there's a change to the resize observer that y'all will be interested in. \r\n\r\nIn terms of core app functionality, nothing should change on your side besides the fact that `@juggle/resize-observer`. The main selling point of the page is that it should not change the behavior of the `ResizeObserver`, but rather act as a nice polyfill for behaviors like the one we're experiencing with the SDK that a client needs the fix for. I used this package since it has quite a lot of usage and doesn't change any existing behavior.\r\n\r\nLet me know what you think 😄"", 'created_at': datetime.datetime(2024, 9, 25, 15, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383162318, 'issue_id': 2548095866, 'author': 'heypoom', 'body': 'Note: the use of `@juggle/resize-observer` causes the same regression on first render as [in this fix](https://github.com/metabase/metabase/pull/47606).', 'created_at': datetime.datetime(2024, 9, 30, 13, 15, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-25 14:05:37 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b28aa417bea88cbfea9ce3b8174ebba8becfd3d1...e8756d9d9dea19e9306f3d7ba6e8915bafa12a97.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

oisincoveney (Issue Creator) on (2024-09-25 15:17:00 UTC): Hey @metabase/core-frontend-dashviz! @npretto suggested that I should share this PR with you guys since there's a change to the resize observer that y'all will be interested in. 

In terms of core app functionality, nothing should change on your side besides the fact that `@juggle/resize-observer`. The main selling point of the page is that it should not change the behavior of the `ResizeObserver`, but rather act as a nice polyfill for behaviors like the one we're experiencing with the SDK that a client needs the fix for. I used this package since it has quite a lot of usage and doesn't change any existing behavior.

Let me know what you think 😄

heypoom on (2024-09-30 13:15:06 UTC): Note: the use of `@juggle/resize-observer` causes the same regression on first render as [in this fix](https://github.com/metabase/metabase/pull/47606).

"
2548041777,pull_request,closed,,Reorganize search namespaces to isolate legacy code,"Moving things around, and replacing lots of manual wiring with multimethods.
",crisptrutski,2024-09-25 13:43:04+00:00,['crisptrutski'],2024-10-08 16:14:19+00:00,2024-09-26 10:50:26+00:00,https://github.com/metabase/metabase/pull/48108,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2376599949, 'issue_id': 2548041777, 'author': 'crisptrutski', 'body': '* **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#48108** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48108?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 26, 10, 47, 46, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-26 10:47:46 UTC): * **#48133** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48133?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#48108** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48108?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2547561478,pull_request,closed,,SDK launch in core app,"This pr will contain the changes that we want to merge into the main app when we launch the SDK.

Some of the projects/prs
-  [adds reference to embedding sdk on the embedding homepage (+51 −0)](https://github.com/metabase/metabase/pull/47975)
-  [47840 - surface sdk in share modal (+386 −607)](https://github.com/metabase/metabase/pull/47967)
-  [[Epic] Feature flag and settings for SDK](https://github.com/metabase/metabase/issues/46970)",npretto,2024-09-25 10:11:27+00:00,['npretto'],2024-10-08 16:13:18+00:00,2024-10-08 12:40:42+00:00,https://github.com/metabase/metabase/pull/48107,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2399449878, 'issue_id': 2547561478, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 8, 10, 19, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399452580, 'issue_id': 2547561478, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 724958737dd0e68d8942dbb652e1dd25c988e660...de357c7eb190f7990ae32956c85664f501ae17b6.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |', 'created_at': datetime.datetime(2024, 10, 8, 10, 20, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 10:19:11 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-08 10:20:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 724958737dd0e68d8942dbb652e1dd25c988e660...de357c7eb190f7990ae32956c85664f501ae17b6.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |

"
2546466583,pull_request,closed,,Add v0.50.27 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-09-24 21:57:34+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-25 15:02:31+00:00,2024-09-25 14:57:19+00:00,https://github.com/metabase/metabase/pull/48102,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2546418396,pull_request,closed,,Automatically tag automatic releases as `nightly`,"follow up to: https://github.com/metabase/metabase/pull/47868

### Description

Now that the release ""tag"" for any given release is separate from the release process, this re-automates tagging, but only automates adding the `nightly` tag to our automatic nightly patch releases. This simply automatically invokes the existing github action with the correct parameters.


",iethree,2024-09-24 21:22:06+00:00,['iethree'],2024-10-08 16:14:25+00:00,2024-09-25 16:44:35+00:00,https://github.com/metabase/metabase/pull/48101,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2546272121,pull_request,closed,,Cleanup entity picker search types,"Epic https://github.com/metabase/metabase/issues/47281

Renames `ResultItemType` to `SearchItem`. Moves this type to top-level `EntityPicker` types and uses it in places where we expect local search results.",ranquild,2024-09-24 20:01:39+00:00,['ranquild'],2024-09-25 20:46:29+00:00,2024-09-25 20:46:27+00:00,https://github.com/metabase/metabase/pull/48098,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2546271813,pull_request,closed,,Table-level native query perms,"Feature branch & core implementation of https://github.com/metabase/metabase/issues/48080

**BE**
* Removes prior restrictions around setting `query-builder-and-native` at the table-level
* Updates permission-checking middleware to try to parse native queries to determine the table IDs to use for permission checking. If this fails, it falls back to requiring full native perms.
* Updates some sandboxing logic to correctly handle table-level native perms (particularly around `merge-perms` which wasn't handling this properly before)
* Adds some tests, and removes a number of tests that are now invalid
* Applies table-level perms to downloads of native queries",noahmoss,2024-09-24 20:01:28+00:00,"['sloansparger', 'noahmoss']",2024-11-08 19:28:40+00:00,2024-11-08 19:28:26+00:00,https://github.com/metabase/metabase/pull/48097,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2445187126, 'issue_id': 2546271813, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 7e61995a2c20ef4e5d0fc35d5c9107335a5f8e2b.\n✅ Preview:\n    https://pr48097.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 29, 19, 45, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2465597357, 'issue_id': 2546271813, 'author': 'noahmoss', 'body': 'Closed per https://metaboat.slack.com/archives/C064EB1UE5P/p1731094071227579?thread_ts=1731092987.873299&cid=C064EB1UE5P', 'created_at': datetime.datetime(2024, 11, 8, 19, 28, 38, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-29 19:45:25 UTC): 👋 Deploying a preview environment for commit 7e61995a2c20ef4e5d0fc35d5c9107335a5f8e2b.
✅ Preview:
    https://pr48097.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

noahmoss (Issue Creator) on (2024-11-08 19:28:38 UTC): Closed per https://metaboat.slack.com/archives/C064EB1UE5P/p1731094071227579?thread_ts=1731092987.873299&cid=C064EB1UE5P

"
2546154276,pull_request,closed,,Only update version info for latest tag (for now),"follow up to #47868 

The tag update job [failed](https://github.com/metabase/metabase/actions/runs/11018767926) when I tagged the latest nightly release as nightly because it (correctly) couldn't find the patch release information in version-info.json. Historically we don't store information about patches, or prompt users to upgrade to patch releases.

### Description

This just skips version-info.json manipulation for patch releases in the new release tag script.
",iethree,2024-09-24 19:05:16+00:00,['iethree'],2024-10-08 16:14:25+00:00,2024-09-25 16:45:07+00:00,https://github.com/metabase/metabase/pull/48096,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2546115231,pull_request,closed,,"🤖 backported ""Bump redshift driver""",#47957,github-automation-metabase,2024-09-24 18:47:38+00:00,"['snoe', 'github-automation-metabase']",2024-09-25 22:11:00+00:00,2024-09-25 22:10:59+00:00,https://github.com/metabase/metabase/pull/48095,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2546079865,pull_request,closed,,Query Validator e2e updates,"Closes https://github.com/metabase/metabase/issues/48092

### Description
Adds a couple e2e tests that leverage the `CYPRESS_NO_FEATURES_TOKEN` to ensure that ee customers without the feature get the correct experience, as well as handling the case where the feature is enabled, but `query_analysis_enabled` is false.

### How to verify
1. Set your metabase instance to use a token without the feature and ensure the link is not visible (probably easiest to do in cypress)
2. With the feature enabled, disable the `query_analysis_enabled` setting. Now when you navigate to the query validation, you should see a message with a link directing you to the setting to enable.

### Demo
![chrome_M53Q0QtaoD](https://github.com/user-attachments/assets/82fd3e6f-dd0e-4062-89a8-05702435cb12)

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-09-24 18:29:17+00:00,['npfitz'],2024-09-25 18:46:58+00:00,2024-09-25 18:46:56+00:00,https://github.com/metabase/metabase/pull/48093,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2546000075,pull_request,closed,,Fix release log generation 😅 ,"Follow up to #47868

### Description

When I added unit tests to #47868 , I failed to update how we run that script (namely piping console output to a file) so it just produces empty files now. 🤦 


- add a new `release-log-run.ts` file that calls the correct function and outputs the release log html for the success team.
",iethree,2024-09-24 17:47:03+00:00,['iethree'],2024-10-08 16:14:26+00:00,2024-09-25 16:44:17+00:00,https://github.com/metabase/metabase/pull/48091,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2545850308,pull_request,closed,,"🤖 backported ""Reset filters in dashboard click action""",#48075,github-automation-metabase,2024-09-24 16:25:48+00:00,"['romeovs', 'github-automation-metabase']",2024-09-25 16:51:02+00:00,2024-09-25 16:51:01+00:00,https://github.com/metabase/metabase/pull/48090,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2545846800,pull_request,closed,,Reset the dashboard parameter when setting the default value,"Closes https://github.com/metabase/metabase/issues/48084

## Description

When editing the default value the value of the filter does not change. This leads to confusing results and repetitive work.

This PR makes it so that when a users edits the default value of a filter, the filter value is also set to that value.

## To verify

1. Create a new dashboard (or use an existing one) with at least one filter
2. Edit dashboard -> select the filter -> edit the default value
3. Verify that the filter value changes to the new default in the url
4. Save the dashboard
5. Verify that the filter widget contains the new default value",romeovs,2024-09-24 16:23:52+00:00,['romeovs'],2024-09-27 14:51:19+00:00,2024-09-27 14:51:18+00:00,https://github.com/metabase/metabase/pull/48089,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2545845961,pull_request,closed,,Additional tooltip metrics for waterfall and scatter charts,"Followup on #47700
Closes #5176, closes #4748

Adds an ability to include other dataset columns in tooltips for waterfall and scatter charts (in addition to cartesian ones).
Done primarily by switching waterfall and scatter's tooltip type to ""series_comparison"". Waterfall charts also needed [some preparation](https://github.com/metabase/metabase/commit/12a7da1c2a3f179cd818b36b65865b7df164643e) as they had a hard limit on a number of dataset metrics. The PR reworks them so instead of showing an error, we'd invalidate `graph.metrics` on a need and use `defaultMetrics.slice(0, 1)` by default (it's possible to change the metric column in viz settings)

### To verify

**Scatter**

1. New > Question > Orders > Visualize > Change display to ""scatter""
2. Open viz settings, change ""Subtotal"" for x-axis and ""Tax"" for y-axis
3. Hover any bubble and ensure the tooltip only shows subtotal and tax info
4. Open the ""Display"" tab in viz settings and add more columns via ""Additional tooltip metrics"" setting
5. Hover any bubble again and ensure you can see selected metrics

**Waterfall**

<details>
<summary>SQL query for testing</summary>

```sql
select 'Apples' as product, 200 as metric, 10 as profit
union all
select 'Bananas' as product, 110 as metric, -4 as profit
union all
select 'Oranges' as product, 140 as metric, 15 as profit
union all
select 'Peaches' as product, 80 as metric, -7 as profit
union all
select 'Mangos' as product, 120 as metric, 2 as profit
```

</details>

1. New > SQL query > Paste the SQL above > Run > Change display to ""waterfall""
2. Hover any segment and ensure the tooltip only shows info for two columns
4. Open the ""Display"" tab in viz settings and add more columns via ""Additional tooltip metrics"" setting
5. Hover any segment again and ensure you can see selected metrics

### Demo

![scatter](https://github.com/user-attachments/assets/641428c5-3208-41ca-b42a-063f8b496524)

![waterfall](https://github.com/user-attachments/assets/753f5174-c9ad-4ed5-91cf-e8fb2307e749)
",kulyk,2024-09-24 16:23:23+00:00,['kulyk'],2024-09-25 16:50:27+00:00,2024-09-25 16:50:26+00:00,https://github.com/metabase/metabase/pull/48088,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2371763771, 'issue_id': 2545845961, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0857356df9e515fa3488e3c049458d4b0cf2097a...514efd7afa4ff77bafb4752fd1126c7b2b29acda.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/option/tooltip.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.tsx<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/CartesianChart.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/use-models-and-option.ts |', 'created_at': datetime.datetime(2024, 9, 24, 16, 24, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2372455914, 'issue_id': 2545845961, 'author': 'cdeweyx', 'body': 'Can close https://github.com/metabase/metabase/issues/5176 and https://github.com/metabase/metabase/issues/4748 once we merge this', 'created_at': datetime.datetime(2024, 9, 24, 21, 54, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2373725527, 'issue_id': 2545845961, 'author': 'kulyk', 'body': '> Looks great for the most part! I think the circle color inside the tooltip should match the bar color of the waterfall chart\r\n\r\nThanks @EmmadUsmani! Please take another look, should be done in [`514efd7`](https://github.com/metabase/metabase/pull/48088/commits/514efd7afa4ff77bafb4752fd1126c7b2b29acda)', 'created_at': datetime.datetime(2024, 9, 25, 10, 42, 16, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-24 16:24:47 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0857356df9e515fa3488e3c049458d4b0cf2097a...514efd7afa4ff77bafb4752fd1126c7b2b29acda.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/option/tooltip.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.tsx<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/CartesianChart.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/use-models-and-option.ts |

cdeweyx on (2024-09-24 21:54:25 UTC): Can close https://github.com/metabase/metabase/issues/5176 and https://github.com/metabase/metabase/issues/4748 once we merge this

kulyk (Issue Creator) on (2024-09-25 10:42:16 UTC): Thanks @EmmadUsmani! Please take another look, should be done in [`514efd7`](https://github.com/metabase/metabase/pull/48088/commits/514efd7afa4ff77bafb4752fd1126c7b2b29acda)

"
2545790011,pull_request,closed,,[Do not merge] Debugging/deps bump no next jdbc,Trying to figure out why Liquibase is failing on #46309,tsmacdonald,2024-09-24 15:55:41+00:00,['tsmacdonald'],2024-09-24 17:50:13+00:00,2024-09-24 17:50:13+00:00,https://github.com/metabase/metabase/pull/48087,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2371934982, 'issue_id': 2545790011, 'author': 'tsmacdonald', 'body': ""That wasn't it :("", 'created_at': datetime.datetime(2024, 9, 24, 17, 50, 13, tzinfo=datetime.timezone.utc)}]","tsmacdonald (Issue Creator) on (2024-09-24 17:50:13 UTC): That wasn't it :(

"
2545777235,pull_request,closed,,Make select all/none search-aware,"Fixes https://github.com/metabase/metabase/issues/48070

Changes:
1. `Select all` in dashboard & QB filters will now select only visible (e.g. filtered) items and not every item
2. `Select none` will now deselect only visible items; other selected items are retained

Unfortunately the changes should be implemented twice because of the current state of dashboard filter widgets.

Demo https://www.loom.com/share/33a7d5e72aa24eb192b7334bb85cfc7e",ranquild,2024-09-24 15:51:01+00:00,['ranquild'],2024-09-24 20:43:47+00:00,2024-09-24 20:43:46+00:00,https://github.com/metabase/metabase/pull/48086,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2545729199,pull_request,closed,,[QP] Don't attach `:temporal-unit :default` to every temporal clause,"Closes https://github.com/metabase/metabase/issues/47341

### Description

Stop adding `:temporal-unit :default` to every ref to a temporal column.

This was old logic to support certain drivers (eg. pre-JDBC Druid) and
isn't required for most. It's perfectly sound to filter or even break
out on a datetime column without bucketing.

### How to verify

You can break out by a temporal column and choose `Don't bin` and it really won't be binned.

Likewise for expressions.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",bshepherdson,2024-09-24 15:28:13+00:00,['bshepherdson'],2024-09-27 17:38:07+00:00,2024-09-27 17:38:06+00:00,https://github.com/metabase/metabase/pull/48085,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2371636390, 'issue_id': 2545729199, 'author': 'bshepherdson', 'body': '* **#48085** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48085?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @bshepherdson and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 24, 15, 28, 29, tzinfo=datetime.timezone.utc)}]","bshepherdson (Issue Creator) on (2024-09-24 15:28:29 UTC): * **#48085** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48085?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @bshepherdson and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2545671492,pull_request,closed,,Collection sidesheets,"part of https://github.com/metabase/metabase/issues/48099

Adds a sidesheet to the collection page

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/3d86b170-c44c-47ef-bff0-7a71ddb67eec.png)



",rafpaf,2024-09-24 15:04:13+00:00,['rafpaf'],2024-10-08 16:13:29+00:00,2024-10-05 21:12:23+00:00,https://github.com/metabase/metabase/pull/48082,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2371573900, 'issue_id': 2545671492, 'author': 'rafpaf', 'body': '* **#48082** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48082?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 24, 15, 4, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2371579797, 'issue_id': 2545671492, 'author': 'rafpaf', 'body': 'Needs some tests', 'created_at': datetime.datetime(2024, 9, 24, 15, 6, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2372337505, 'issue_id': 2545671492, 'author': 'iethree', 'body': 'are you planning to do description + official status in this PR or in a follow-up?', 'created_at': datetime.datetime(2024, 9, 24, 20, 36, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377724583, 'issue_id': 2545671492, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55a42c7e800587d6302d3461a93d805b38552bb3...62ecc728f835499ddcca0e72e90e8f60de3bf39d.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/official_collection.svg |', 'created_at': datetime.datetime(2024, 9, 26, 19, 6, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377731089, 'issue_id': 2545671492, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (09/26/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 9, 26, 19, 10, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387047923, 'issue_id': 2545671492, 'author': 'luizarakaki', 'body': ""> This adheres to the designs and all, but given that we only really have description and entity ID in here, it feels a bit underwhelming as a surface area, especially since we don't store revision history or last-edited-by or insights, etc. Don't get me wrong — I like that it gives us a place to put additional things in the future, and I like that it makes collections feel a bit more like other entities. I just almost wonder if we should show collection descriptions here _instead of_ on the collection page (rather than in addition to), both to give the sidebar more of a _raison d'être_ and to clean up collection pages. Curious if @vbenedetti has thoughts on this, but he's out until next Monday. Maybe @luizarakaki has thoughts.\r\n\r\nI don't have a strong opinion about description only in the sidesheet or both. I'd keep it in both places as I don't think the description is a problem there and we are revisiting the collection page soon."", 'created_at': datetime.datetime(2024, 10, 1, 20, 49, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2390337049, 'issue_id': 2545671492, 'author': 'rafpaf', 'body': ""@mazameli I've removed the new SVG from this PR. Let's spruce up the SVG and we can ship it in a follow-up PR."", 'created_at': datetime.datetime(2024, 10, 3, 1, 49, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2390352881, 'issue_id': 2545671492, 'author': 'mazameli', 'body': ""> @mazameli I've removed the new SVG from this PR. Let's spruce up the SVG and we can ship it in a follow-up PR.\r\n\r\nsounds good"", 'created_at': datetime.datetime(2024, 10, 3, 2, 3, 39, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-09-24 15:04:31 UTC): * **#48082** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48082?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-09-24 15:06:54 UTC): Needs some tests

iethree on (2024-09-24 20:36:58 UTC): are you planning to do description + official status in this PR or in a follow-up?

github-actions[bot] on (2024-09-26 19:06:23 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55a42c7e800587d6302d3461a93d805b38552bb3...62ecc728f835499ddcca0e72e90e8f60de3bf39d.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/official_collection.svg |

graphite-app[bot] on (2024-09-26 19:10:11 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (09/26/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

luizarakaki on (2024-10-01 20:49:13 UTC): I don't have a strong opinion about description only in the sidesheet or both. I'd keep it in both places as I don't think the description is a problem there and we are revisiting the collection page soon.

rafpaf (Issue Creator) on (2024-10-03 01:49:02 UTC): @mazameli I've removed the new SVG from this PR. Let's spruce up the SVG and we can ship it in a follow-up PR.

mazameli on (2024-10-03 02:03:39 UTC): sounds good

"
2545650929,pull_request,closed,,Fix cancelling of editing of a metric,"Fixes https://github.com/metabase/metabase/issues/48024

How to verify:
- New -> Metric -> Orders
- Click Cancel -> Discard changes
- You should be redirected to the home page",ranquild,2024-09-24 14:56:45+00:00,['ranquild'],2024-09-24 16:45:11+00:00,2024-09-24 16:45:10+00:00,https://github.com/metabase/metabase/pull/48081,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2545602497,pull_request,closed,,update storybook to v8,,uladzimirdev,2024-09-24 14:37:54+00:00,['uladzimirdev'],2025-01-10 13:53:19+00:00,2025-01-10 13:53:19+00:00,https://github.com/metabase/metabase/pull/48079,"[('.Team/Querying', '')]","[{'comment_id': 2372314957, 'issue_id': 2545602497, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 9b2f974ca97a50af933d3b9ae2fce904c34612f0...f92b32fdc22ccd650324a80ae542e935bed0ee6c.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx |', 'created_at': datetime.datetime(2024, 9, 24, 20, 29, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2582761381, 'issue_id': 2545602497, 'author': 'uladzimirdev', 'body': 'https://github.com/metabase/metabase/pull/51699', 'created_at': datetime.datetime(2025, 1, 10, 13, 53, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-24 20:29:25 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 9b2f974ca97a50af933d3b9ae2fce904c34612f0...f92b32fdc22ccd650324a80ae542e935bed0ee6c.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx |

uladzimirdev (Issue Creator) on (2025-01-10 13:53:19 UTC): https://github.com/metabase/metabase/pull/51699

"
2545571168,pull_request,closed,,Add additional dashboard info to sidesheet,"Reopens #47932

Closes https://github.com/metabase/metabase/issues/47919

### Description

Adds additional metadata to dashboard info sidesheet

![Screen Shot 2024-09-13 at 11 01 40 AM](https://github.com/user-attachments/assets/9f7b5f6c-2e50-46b6-b2c3-6a8e30049be2)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-24 14:27:45+00:00,['iethree'],2024-09-26 15:09:35+00:00,2024-09-26 15:09:32+00:00,https://github.com/metabase/metabase/pull/48078,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2545557749,pull_request,closed,,update storybook to v7,,uladzimirdev,2024-09-24 14:22:33+00:00,['uladzimirdev'],2025-01-10 13:53:14+00:00,2025-01-10 13:53:14+00:00,https://github.com/metabase/metabase/pull/48077,"[('.Team/Querying', '')]","[{'comment_id': 2371453518, 'issue_id': 2545557749, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5377880e49ca32b03ba89c86a05136c10f7b41d...abd399f19a94f29e3b47318f24e1368bcaf2b2d5.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/register.js |', 'created_at': datetime.datetime(2024, 9, 24, 14, 24, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383713457, 'issue_id': 2545557749, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 30, 16, 56, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2582761219, 'issue_id': 2545557749, 'author': 'uladzimirdev', 'body': 'https://github.com/metabase/metabase/pull/51699', 'created_at': datetime.datetime(2025, 1, 10, 13, 53, 14, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-24 14:24:05 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5377880e49ca32b03ba89c86a05136c10f7b41d...abd399f19a94f29e3b47318f24e1368bcaf2b2d5.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/register.js |

github-actions[bot] on (2024-09-30 16:56:42 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

uladzimirdev (Issue Creator) on (2025-01-10 13:53:14 UTC): https://github.com/metabase/metabase/pull/51699

"
2545494404,pull_request,closed,,Reset filters in dashboard click action,"Closes https://github.com/metabase/metabase/issues/48074

### Description

When opening a dashboard from a click action, currently all parameters not set by the click action itself are set to the users' last value for that parameter. This leads to unwanted results where the dashboard returns no results due to the filter values not being correct/compatible.

This PR fixes that by resetting all parameters (other than the ones specified by the click-action) to their default value.

### How to verify


1. Create a dashboard with two parameters mapped to a question, eg.
  A. New dashboard -> ""Foo""
  B. Add questions -> Orders with People
  C. Add parameter -> Text -> Product: Vendor -> set name to ""Vendor""
  D. Add parameter -> Text -> Product: Category -> set name to ""Category""
    - Add default value: Gizmo
  E. Save dashboard
2. Set the Vendor filter to any value
3. Create another dashboard, eg.
  A. New dashboard -> ""Bar""
  B. Add questions -> Total orders by category
  C. Add click action -> Go to a custom destination -> Dashboard -> Foo -> Link ""Category"" parameter to ""Product -> Category"" -> Done
  D. Save
4. Click on of the categories
5. Verify that in the target dashboard:
   - The ""Category"" parameter is set to the clicked category
   - The ""Vendor"" parameter is empty (and not what you set before)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",romeovs,2024-09-24 13:56:59+00:00,['romeovs'],2024-09-24 16:24:02+00:00,2024-09-24 16:24:00+00:00,https://github.com/metabase/metabase/pull/48075,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2545090593,pull_request,closed,,Backport 49: Downgrade gh runner image release (#48060),#48060,lbrdnk,2024-09-24 11:10:01+00:00,['lbrdnk'],2024-09-24 11:57:34+00:00,2024-09-24 11:57:33+00:00,https://github.com/metabase/metabase/pull/48072,"[('.CI & Tests', ''), ('.Team/Querying', ''), ('was-backported', 'apply this to PRs that are themselves backports'), ('.Team/Drivers', '')]",[],
2544970532,pull_request,closed,,fix(sdk): remove ts limitation on custom fonts + some minimal e2e tests for the fonts,"Implementes some tests for https://github.com/metabase/metabase/issues/47624 + some fixes of things I was writing the tests for but didn't actually work 😅 

## Changes:

- the redux store is now not a singleton, read comments on the files for the reason
- fix to use Lato as default when we can't connect to metabase
- fix/product change to allow any font to be passed to theme.fontFamily (this is pending [this slack conversation](https://metaboat.slack.com/archives/C063Q3F1HPF/p1727340304714819)

## How to verify:
- on one terminal run `IS_EMBEDDING_SDK=true yarn storybook`
- on another run cypress with yarn `test-cypress-open-sdk` and run `metabase-sdk-styles-tests.cy.spec.ts`",npretto,2024-09-24 10:13:40+00:00,['npretto'],2024-10-08 16:14:18+00:00,2024-09-26 16:53:00+00:00,https://github.com/metabase/metabase/pull/48071,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2370854587, 'issue_id': 2544970532, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 24, 10, 14, 4, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-24 10:14:04 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2544770617,pull_request,closed,,[WIP] #46970 Milestone 2,,oisincoveney,2024-09-24 08:50:51+00:00,['oisincoveney'],2024-10-08 10:18:54+00:00,2024-10-08 10:18:50+00:00,https://github.com/metabase/metabase/pull/48069,"[('.Team/Embedding', '')]","[{'comment_id': 2370664445, 'issue_id': 2544770617, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 24, 8, 51, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2370973203, 'issue_id': 2544770617, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 82b2812e7203263fdc19c5565e8a70d868e5f361...57633c49e87cb6c2a197880cd9b0da0906d4a90c.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |', 'created_at': datetime.datetime(2024, 9, 24, 11, 17, 36, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-24 08:51:20 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-24 11:17:36 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 82b2812e7203263fdc19c5565e8a70d868e5f361...57633c49e87cb6c2a197880cd9b0da0906d4a90c.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx |
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx |

"
2543937204,pull_request,closed,,Require `:encryption` for string settings,"For settings that are not typed as JSON, CSV, or strings, encryption now defaults to `:never` rather than `:maybe` (*except* if you have explicitly marked your setting as `:sensitive?` - these will default to `:maybe`).

I went through all our settings and provided what I think are reasonable values here. I tried to be conservative - when I wasn't sure whether a stored setting was sensitive, I kept it as encrypted. For example, the `ldap-port` setting is probably non-sensitive but theoretically someone could be using a weird port for security-by-obscurity, so I kept that encrypted.

Fixes #47101 ",johnswanson,2024-09-23 23:29:16+00:00,['johnswanson'],2024-09-25 19:26:22+00:00,2024-09-25 19:26:21+00:00,https://github.com/metabase/metabase/pull/48067,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2543863145,pull_request,closed,,Sdk embedding settings part one merged master,,escherize,2024-09-23 22:48:25+00:00,[],2024-09-23 22:51:53+00:00,2024-09-23 22:51:32+00:00,https://github.com/metabase/metabase/pull/48065,[],[],
2543748763,pull_request,closed,,bump for ci,"Seeing a serialization test failing on another branch, want to check if it's failing on master",escherize,2024-09-23 21:44:35+00:00,['escherize'],2025-02-04 18:14:12+00:00,2024-09-23 22:43:01+00:00,https://github.com/metabase/metabase/pull/48064,"[('do not merge', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2543729817,pull_request,closed,,Remove CLJS_SRC_PATH_DEV from ignored watch dirs,"Shadow cljs live reload is broken. This change makes the page reload always, when the compiled cljs changes.

Before this PR shadow's live reload worked when file was saved. On page reload however the stale compiled cljs was used.",lbrdnk,2024-09-23 21:37:59+00:00,['lbrdnk'],2024-10-08 16:14:27+00:00,2024-09-25 06:50:42+00:00,https://github.com/metabase/metabase/pull/48063,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2543701807,pull_request,closed,,"🤖 backported ""[E2E] Remove the `default-ee` spec""","  #47162
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-23 21:28:46+00:00,"['sloansparger', 'github-automation-metabase']",2024-09-25 14:09:08+00:00,2024-09-25 14:09:06+00:00,https://github.com/metabase/metabase/pull/48062,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2543653596,pull_request,closed,,"🤖 backported ""Downgrade gh runner image for sqlserver 2017 job""",#48060,github-automation-metabase,2024-09-23 21:01:46+00:00,"['lbrdnk', 'github-automation-metabase']",2024-09-24 09:56:02+00:00,2024-09-24 09:56:01+00:00,https://github.com/metabase/metabase/pull/48061,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2370698419, 'issue_id': 2543653596, 'author': 'crisptrutski', 'body': 'Folded in the serialization flake fixes', 'created_at': datetime.datetime(2024, 9, 24, 9, 4, 57, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-09-24 09:04:57 UTC): Folded in the serialization flake fixes

"
2543548738,pull_request,closed,,Downgrade gh runner image for sqlserver 2017 job,"More context in [this slack thread](https://metaboat.slack.com/archives/C5XHN8GLW/p1727077788250889).

This PR is an attempt to solve constantly failing sqlserver 2017 job (as eg. in [this job](https://github.com/metabase/metabase/actions/runs/10959961882/job/30436377720)).

Adding the diagnostic step to the job I've found out, that sqlserver container crashes very soon after it is started.

Researching the issue I've found out that there is a difference between runner's kernel version in the linked job and last passed sqlserver 2017 job (last passed job's log can be found [here](https://github.com/metabase/metabase/actions/runs/10925786668/job/30332674507)).

The `ubuntu-20.04` image is the only way I'm aware of to downgrade the kernel. I've confirmed that with this change in place the sqlserver 2017 container does not crash after a few seconds and `test-data` is correctly loaded.",lbrdnk,2024-09-23 20:04:01+00:00,['lbrdnk'],2024-09-24 11:58:03+00:00,2024-09-23 21:00:51+00:00,https://github.com/metabase/metabase/pull/48060,"[('.CI & Tests', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', ''), ('.Team/Drivers', '')]","[{'comment_id': 2370918060, 'issue_id': 2543548738, 'author': 'lbrdnk', 'body': '@metabase-bot backport release-x.49.x', 'created_at': datetime.datetime(2024, 9, 24, 10, 48, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2370920262, 'issue_id': 2543548738, 'author': 'github-actions[bot]', 'body': '@lbrdnk something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11012218528)', 'created_at': datetime.datetime(2024, 9, 24, 10, 49, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2371058913, 'issue_id': 2543548738, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.50.27](https://github.com/metabase/metabase/milestone/272)', 'created_at': datetime.datetime(2024, 9, 24, 11, 58, 3, tzinfo=datetime.timezone.utc)}]","lbrdnk (Issue Creator) on (2024-09-24 10:48:11 UTC): @metabase-bot backport release-x.49.x

github-actions[bot] on (2024-09-24 10:49:18 UTC): @lbrdnk something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11012218528)

github-actions[bot] on (2024-09-24 11:58:03 UTC): 🚀 This should also be released by [v0.50.27](https://github.com/metabase/metabase/milestone/272)

"
2542854298,pull_request,closed,,Remove unused var `card-or-throw`,"This var was completely unused.
Aka not referenced anywhere.",nemanjaglumac,2024-09-23 14:31:16+00:00,['nemanjaglumac'],2024-10-08 16:14:34+00:00,2024-09-23 16:12:00+00:00,https://github.com/metabase/metabase/pull/48057,"[('Type:Tech Debt', 'or Refactoring'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2542610435,pull_request,closed,,refactor: rework stories from MDX to MDX + CSF,"### Description

new versions of storybook do not support MDX1 format of stories that we use, so I reworked them to MDX2-3 + CSF
https://storybook.js.org/docs/api/csf

in this PR we 
- applied codemods from https://storybook.js.org/docs/migration-guide#storiesmdx-to-mdxcsf 
- manually deleted dead code
- cleaned up render functions in stories to avoid naming collisions
- converted stories to tsx

### How to verify

- run storybook locally - it should work as before
- CI is green",uladzimirdev,2024-09-23 13:15:21+00:00,['uladzimirdev'],2024-10-08 16:14:12+00:00,2024-09-30 12:25:07+00:00,https://github.com/metabase/metabase/pull/48054,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2368209050, 'issue_id': 2542610435, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 23, 13, 15, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2368212013, 'issue_id': 2542610435, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e12e36044e588761a3fb9aed10900a9d506d7fd6...d917e129a370aad6ae9c35ec3398e28591b3d853.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/StaticSkeleton/StaticSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/BarChart/BarChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.stories.tsx |\n| @kdoh | frontend/src/metabase/ui/Intro.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/List/List.mdx<br>frontend/src/metabase/ui/components/typography/List/List.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx |\n| @ranquild | frontend/src/metabase/status/components/DownloadsStatusLarge/DownloadsStatusLarge.stories.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.stories.tsx<br>frontend/src/metabase/timelines/common/components/TimelinePicker/TimelinePicker.stories.tsx |', 'created_at': datetime.datetime(2024, 9, 23, 13, 16, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2382420864, 'issue_id': 2542610435, 'author': 'uladzimirdev', 'body': '@ranquild stories were cleaned up (`StoryName_` -> `StoryName`, removed `.bind({})` etc) and converted to tsx', 'created_at': datetime.datetime(2024, 9, 30, 8, 17, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-23 13:15:44 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-23 13:16:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e12e36044e588761a3fb9aed10900a9d506d7fd6...d917e129a370aad6ae9c35ec3398e28591b3d853.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/StaticSkeleton/StaticSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/BarChart/BarChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.stories.tsx |
| @kdoh | frontend/src/metabase/ui/Intro.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/List/List.mdx<br>frontend/src/metabase/ui/components/typography/List/List.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx |
| @ranquild | frontend/src/metabase/status/components/DownloadsStatusLarge/DownloadsStatusLarge.stories.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.stories.tsx<br>frontend/src/metabase/timelines/common/components/TimelinePicker/TimelinePicker.stories.tsx |

uladzimirdev (Issue Creator) on (2024-09-30 08:17:06 UTC): @ranquild stories were cleaned up (`StoryName_` -> `StoryName`, removed `.bind({})` etc) and converted to tsx

"
2542488040,pull_request,closed,,Speed up minimal Postgres fulltext search ,"- Replace `query-model-set` with something faster.
- Disable ranking.
- Add a new `minimal-with-perms` strategy.
",crisptrutski,2024-09-23 12:31:12+00:00,['crisptrutski'],2024-10-08 16:14:31+00:00,2024-09-24 13:49:21+00:00,https://github.com/metabase/metabase/pull/48053,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2368077927, 'issue_id': 2542488040, 'author': 'crisptrutski', 'body': '* **#48053** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48053?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48052** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48052?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 23, 12, 31, 21, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-23 12:31:21 UTC): * **#48053** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48053?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48052** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48052?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2542216723,pull_request,closed,,Another fix to avoid dynamic scope in search,"### Description

These things can hide quite far down the stack 😭 

While here I also changed some functions from checking whether a dynamic var was set, to setting it themselves.",crisptrutski,2024-09-23 10:30:28+00:00,['crisptrutski'],2024-10-08 16:14:32+00:00,2024-09-24 09:25:07+00:00,https://github.com/metabase/metabase/pull/48052,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2368077903, 'issue_id': 2542216723, 'author': 'crisptrutski', 'body': '* **#48053** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48053?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#48052** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48052?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 23, 12, 31, 21, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-23 12:31:21 UTC): * **#48053** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48053?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#48052** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48052?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2540774670,pull_request,closed,,`Nsa portal` :: dashboard,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",marzuk16,2024-09-22 07:47:31+00:00,[],2024-09-22 07:50:30+00:00,2024-09-22 07:50:27+00:00,https://github.com/metabase/metabase/pull/48051,[],[],
2539186500,pull_request,closed,,"🤖 backported ""[E2E] Improve + Fix tests that use sandboxing""","  #46465
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-20 16:17:34+00:00,"['sloansparger', 'github-automation-metabase']",2024-09-22 08:32:14+00:00,2024-09-22 08:32:12+00:00,https://github.com/metabase/metabase/pull/48045,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2364179071, 'issue_id': 2539186500, 'author': 'sloansparger', 'body': ""just needed to remove the file `e2e/test/scenarios/question/notebook-link-to-data-source.cy.spec.ts`, which doesn't exist in the 50 branch, to make this backport work"", 'created_at': datetime.datetime(2024, 9, 20, 17, 21, 13, tzinfo=datetime.timezone.utc)}]","sloansparger (Assginee) on (2024-09-20 17:21:13 UTC): just needed to remove the file `e2e/test/scenarios/question/notebook-link-to-data-source.cy.spec.ts`, which doesn't exist in the 50 branch, to make this backport work

"
2538942333,pull_request,closed,,make `expectGoodSnowplowEvent` output an informative error,"
### Description

Debugging e2e tests that deal with snowplow has always been painful to me, I had this little code stashed away which helped me a lot and hopefully will help you too

Before: ""Something went wrong"", no info on what

<img width=""786"" alt=""image"" src=""https://github.com/user-attachments/assets/692eda17-6759-4efb-b296-132885145935"">


After: ""We expected event X, last event was Y""

<img width=""750"" alt=""image"" src=""https://github.com/user-attachments/assets/07acf4a8-0040-4a4b-b52b-1f381743e39f"">



I recommend also using [MB_LOG_ANALYTICS](https://github.com/metabase/metabase/pull/37915) in case you don't already to see events in the browser console:
<img width=""856"" alt=""image"" src=""https://github.com/user-attachments/assets/77a3a239-25d7-4ce3-832f-df49e21e16b7"">
",npretto,2024-09-20 14:15:14+00:00,['npretto'],2024-10-08 16:14:35+00:00,2024-09-23 07:49:03+00:00,https://github.com/metabase/metabase/pull/48044,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2538873102,pull_request,closed,,reduce logs in cypress tests by checking before removing folder,"
This should make cypress logs a bit more readable as before this change this was the output:

<img width=""1988"" alt=""image"" src=""https://github.com/user-attachments/assets/cc810c5d-2578-42f3-9c3a-65aba7bb35cf"">

We run deleteDownloadsFolder in beforeEach, it can happen that the folder doesn't exist on first run or if we don't download anything in that specific test (maybe because it stops for a failure before the download)",npretto,2024-09-20 13:45:09+00:00,['npretto'],2024-10-08 16:14:35+00:00,2024-09-23 07:47:56+00:00,https://github.com/metabase/metabase/pull/48043,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2538804680,pull_request,closed,,"🤖 backported ""Tweak some sheet around CSV uploads""",Automatic backport of #48000 with the manual merge conflict resolution.,github-automation-metabase,2024-09-20 13:15:53+00:00,"['crisptrutski', 'nemanjaglumac', 'github-automation-metabase']",2024-09-24 10:47:27+00:00,2024-09-24 10:47:26+00:00,https://github.com/metabase/metabase/pull/48042,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2538506959,pull_request,closed,,"🤖 backported ""Add snowplow to e2e docs""",#47765,github-automation-metabase,2024-09-20 10:51:35+00:00,"['filiphric', 'github-automation-metabase']",2024-09-20 10:53:18+00:00,2024-09-20 10:53:17+00:00,https://github.com/metabase/metabase/pull/48039,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2538274353,pull_request,closed,,"Add missing ""Dashboard"" model to the assertion","### What does this PR accomplish?
This PR attempts to fix a failing backend test by adding a missing ""Dashboard"" model to the assertion.

> [!Important]
> I am not sure if the actual serialization is broken or did @piranha accidentally omit this model from the assertion. Other tests in this suite have this assertion and I didn't see any part that removes dashboards from the export. So this is my half-blind stab at the fix with an assumption that the assertion is wrong.
>
> No idea why it passes/fails intermittently!

The test is failing in `master`
https://github.com/metabase/metabase/actions/runs/10925786668/job/30332668548#step:3:742

It is failing badly in the `release-x.50.x` branch
https://github.com/metabase/metabase/actions/runs/10948918535/job/30404298358

It seems to be exacerbated in some cases (see the release branch run). One such example is when we bumped Snowflake driver in #47997 where basically all driver CI jobs failed.

The actual diff from the failing logs:
```
ERROR /api/ee/serialization/import 3 header lines, then cards+database+collection, then the error
expected: #{""Card"" ""Collection"" ""Database""}
  actual: #{""Card"" ""Collection"" ""Dashboard"" ""Database""}
    diff: + #{""Dashboard""}
```",nemanjaglumac,2024-09-20 09:01:14+00:00,['nemanjaglumac'],2024-09-20 11:12:49+00:00,2024-09-20 11:12:46+00:00,https://github.com/metabase/metabase/pull/48037,"[('.CI & Tests', ''), ('.Backend', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2363471499, 'issue_id': 2538274353, 'author': 'nemanjaglumac', 'body': 'Superseded by #48000', 'created_at': datetime.datetime(2024, 9, 20, 11, 12, 46, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Issue Creator) on (2024-09-20 11:12:46 UTC): Superseded by #48000

"
2538145775,pull_request,closed,,Try snowflake 3.19.0 [CI TEST],"Just trying out v3.19.0 in CI out of curiosity.
https://github.com/metabase/metabase/pull/47997#discussion_r1767103603",nemanjaglumac,2024-09-20 07:57:05+00:00,['nemanjaglumac'],2024-10-17 18:38:26+00:00,2024-09-20 16:26:12+00:00,https://github.com/metabase/metabase/pull/48035,"[('do not merge', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2420227647, 'issue_id': 2538145775, 'author': 'camsaul', 'body': 'The test failures for drivers other than Snowflake and SQL Server are related to `java.time` classes having higher resolution in Java 21 than they did in 11 and are easy fixes', 'created_at': datetime.datetime(2024, 10, 17, 18, 16, 42, tzinfo=datetime.timezone.utc)}]","camsaul on (2024-10-17 18:16:42 UTC): The test failures for drivers other than Snowflake and SQL Server are related to `java.time` classes having higher resolution in Java 21 than they did in 11 and are easy fixes

"
2537367882,pull_request,closed,,"🤖 backported ""Admin webapp owns the ui lib now""",#48030,github-automation-metabase,2024-09-19 21:05:20+00:00,"['iethree', 'github-automation-metabase']",2024-09-19 21:06:58+00:00,2024-09-19 21:06:58+00:00,https://github.com/metabase/metabase/pull/48031,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2537349823,pull_request,closed,,Admin webapp owns the ui lib now,"

### Description

Admin Webapp Frontend team should own any changes in the metabase/ui directory

### How to verify

I talked to @camsaul  cuz he was sitting right there an he said ""ok cool man""

",iethree,2024-09-19 20:55:53+00:00,['iethree'],2024-09-19 21:07:24+00:00,2024-09-19 21:04:34+00:00,https://github.com/metabase/metabase/pull/48030,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2537334484,pull_request,closed,,Use current user api instead of search to check for models,"### Description

In several places, but most importantly in the new item menu (on every page load) we call the heavy search API to check if the user has access to any models. We also have this information in the much faster current user API, so we should get it from there.

Before 
```ts
Search.loadList({
    query: { models: [""dataset""], limit: 1 },
    loadingAndErrorWrapper: false,
    listName: ""models"",
  }),
```

After
```ts
const hasModels = useHasModel();
```

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-19 20:46:12+00:00,['iethree'],2025-01-24 23:07:15+00:00,2025-01-24 23:07:15+00:00,https://github.com/metabase/metabase/pull/48029,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2362144449, 'issue_id': 2537334484, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...3ca810a923660bfc0e822943bb8eea7f471d6d4f.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/HomePage/HomePage.tsx |', 'created_at': datetime.datetime(2024, 9, 19, 20, 47, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2371706815, 'issue_id': 2537334484, 'author': 'npfitz', 'body': ""Is there a reason we're refetching with RTK Query instead of just using `getUser(state).has_models`? We already have mechanisms for getting the current user and storing it in state"", 'created_at': datetime.datetime(2024, 9, 24, 15, 58, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449660, 'issue_id': 2537334484, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 59, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-19 20:47:35 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...3ca810a923660bfc0e822943bb8eea7f471d6d4f.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/HomePage/HomePage.tsx |

npfitz on (2024-09-24 15:58:39 UTC): Is there a reason we're refetching with RTK Query instead of just using `getUser(state).has_models`? We already have mechanisms for getting the current user and storing it in state

github-actions[bot] on (2025-01-21 01:30:59 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

"
2537289798,pull_request,closed,,Implement better partitioning and sorting in window functions,"### Description

Implements [Better partition and sorting in window functions](https://www.notion.so/metabase/Better-partition-and-sorting-in-window-functions-398bac0debb34be3a1040cabc052de54).

The columns in the `order by` clause of the generated SQL query have to differ from the standard order depending on the time units in the breakout clause. To achieve this, if the query has windowing functions, the breakouts are not added to the order by clause by the standard middleware: it's the responsibility of the compiler function to decide how that clause should look like.

The implementation is tricky, because the presence of windowing functions implies that the query gets nested (so that the windowing function only needs to deal with simple named columns), and when this happens, the columns lose the temporal unit information. The property `original-temporal-unit` is introduced to track the ""lost"" temporal unit. This property is called `metabase.lib.field/original-temporal-unit` in pMBQL, and `original-temporal-unit` in legacy-MQBL. This is both a lot of complexity, as well as potentially dangerous. Can you suggest better ways?

The behavior should not change for queries not using window functions, in particular it should not change the ordering of rows.

### How to verify

The queries in the product doc above should work as specified. Check if the new tests conform to the project spec and pass.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-09-19 20:16:54+00:00,['metamben'],2024-10-08 16:13:24+00:00,2024-10-07 18:36:58+00:00,https://github.com/metabase/metabase/pull/48028,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2397077208, 'issue_id': 2537289798, 'author': 'metamben', 'body': ""> I'm seeing for Examples 3-5 in the PR-Env that GitHub created don't quite match the Expected Result screenshots in the product doc. Will take a closer look on Monday in case I got the queries wrong.\r\n\r\nThey are indeed different. I think the implementation is OK though. Asked @mngr to confirm anyway."", 'created_at': datetime.datetime(2024, 10, 7, 14, 22, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397299517, 'issue_id': 2537289798, 'author': 'appleby', 'body': '> LGTM assuming @mngr approves query results\r\n\r\nConfirmed they match the updated product doc', 'created_at': datetime.datetime(2024, 10, 7, 15, 49, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397524240, 'issue_id': 2537289798, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit c9411baeec8040f69ce40d53da3492fbe967e3dc.\n✅ Preview:\n    https://pr48028.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 7, 17, 41, 51, tzinfo=datetime.timezone.utc)}]","metamben (Issue Creator) on (2024-10-07 14:22:37 UTC): They are indeed different. I think the implementation is OK though. Asked @mngr to confirm anyway.

appleby on (2024-10-07 15:49:51 UTC): Confirmed they match the updated product doc

github-actions[bot] on (2024-10-07 17:41:51 UTC): 👋 Deploying a preview environment for commit c9411baeec8040f69ce40d53da3492fbe967e3dc.
✅ Preview:
    https://pr48028.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2537279180,pull_request,closed,,feat: BigQuery Faster Sync,"Replaces the O(n-tables) `describe database` and `describe-tables` with O(datasets) versions that query `INFORMATION_SCHEMA`

Fixes #48094 ",snoe,2024-09-19 20:10:02+00:00,['snoe'],2024-09-24 18:47:30+00:00,2024-09-24 18:45:53+00:00,https://github.com/metabase/metabase/pull/48027,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Drivers', '')]",[],
2537000557,pull_request,closed,,perf: Improve the performance of /api/collection/tree when there are many collections,"This PR is a kitchen sink of small changes I figured out when investigating whether it is possible to improve https://github.com/metabase/metabase/issues/46695 further (`/api/collection/tree` still took ~1.5 seconds for 5000 collections). While the benchmark may be artificial, it actually highlighted a few lower-level issues, fixing which will influence other endpoints too.

Anyway:
1. `is-trash?` almost always did additional transforms even if the collection instance contained `:type` (but was nil).
2. Improved `annotate-collections` and `collections->tree`.",alexander-yakushev,2024-09-19 17:41:02+00:00,['alexander-yakushev'],2024-10-08 16:14:20+00:00,2024-09-26 09:19:26+00:00,https://github.com/metabase/metabase/pull/48026,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2536963444,pull_request,closed,,perf: Use vectors to iterate over all user permissions,"Doing a follow-up on https://github.com/metabase/metabase/issues/46695, I've noticed that if the user has a lot of collections (and, possibly, other objects – I'm not sure what else can grant unique path-like permissions for the user), iterating through the hashset of those permissions is not very efficient. Because of how Clojure is implemented, iterating over a PersistentHashSet produces allocations and is significantly slower.

```clj
  (let [coll (vec (range 100))]
    (time+ (reduce (fn [acc _] (inc acc)) 0 coll)))

  ;; Time per call: 501 ns   Alloc per call: 16b

  (let [coll (set (range 100))]
    (time+ (reduce (fn [acc _] (inc acc)) 0 coll)))

  ;; Time per call: 2.21 us   Alloc per call: 1,040b
```

Given that `set-has-full-permissions-for-set?` is basically O(n*m), this is worth improving.

The proposed PR is a bandaid of sorts. We can't simply make the `permissions-set` a vector – it is also used to look up permissions in it associatively. So the patch instead attaches the vector version to the set metadata, and the relevant functions are taught to look for a vector first.",alexander-yakushev,2024-09-19 17:19:47+00:00,['alexander-yakushev'],2024-09-26 10:13:57+00:00,2024-09-26 09:19:04+00:00,https://github.com/metabase/metabase/pull/48025,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2536752849,pull_request,closed,,storybook 7,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-09-19 15:54:18+00:00,['uladzimirdev'],2024-09-24 20:29:03+00:00,2024-09-24 20:29:01+00:00,https://github.com/metabase/metabase/pull/48023,"[('.Team/Querying', '')]","[{'comment_id': 2361406617, 'issue_id': 2536752849, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...dd858f5683c4609e068a039e92a21b60db09f17f.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/StaticSkeleton/StaticSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/BarChart/BarChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.stories.tsx |\n| @kdoh | frontend/src/metabase/ui/Intro.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.js<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.js<br>frontend/src/metabase/ui/components/data-display/Card/Card.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.js<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.js<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.js<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.js<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.js<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.js<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.js<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.js<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.js<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.js<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.js<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.js<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.js<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.js<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.js<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.js<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.js<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.js<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.js<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.js<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.js<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.js<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.js<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.js<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.js<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.mdx<br>frontend/src/metabase/ui/components/typography/List/List.mdx<br>frontend/src/metabase/ui/components/typography/List/List.stories.js<br>frontend/src/metabase/ui/components/typography/Text/Text.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.js<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.js<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.js<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.js |\n| @ranquild | frontend/src/metabase/status/components/DownloadsStatusLarge/DownloadsStatusLarge.stories.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.stories.tsx<br>frontend/src/metabase/timelines/common/components/TimelinePicker/TimelinePicker.stories.tsx |', 'created_at': datetime.datetime(2024, 9, 19, 15, 55, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2363315154, 'issue_id': 2536752849, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 20, 9, 46, 44, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-19 15:55:49 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...dd858f5683c4609e068a039e92a21b60db09f17f.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/components/skeletons/StaticSkeleton/StaticSkeleton.stories.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/BarChart/BarChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.stories.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.stories.tsx |
| @kdoh | frontend/src/metabase/ui/Intro.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.mdx<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.js<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.mdx<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.stories.js<br>frontend/src/metabase/ui/components/data-display/Card/Card.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.mdx<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Image/Image.mdx<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.js<br>frontend/src/metabase/ui/components/data-display/Image/Image.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.mdx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.stories.js<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.mdx<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.js<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.mdx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.js<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.stories.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.mdx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.js<br>frontend/src/metabase/ui/components/icons/Icon/Icon.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.js<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.mdx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.js<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.mdx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.js<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.mdx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.js<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.js<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.mdx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.js<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.stories.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.mdx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.js<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.mdx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.js<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.js<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.mdx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.js<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.mdx<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.js<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.mdx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.js<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.mdx<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.js<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.stories.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.mdx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.js<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.mdx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.mdx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.js<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.mdx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.js<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.mdx<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.js<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.stories.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.mdx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.js<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.mdx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.js<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.stories.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.mdx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.js<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.mdx<br>frontend/src/metabase/ui/components/typography/List/List.mdx<br>frontend/src/metabase/ui/components/typography/List/List.stories.js<br>frontend/src/metabase/ui/components/typography/Text/Text.mdx<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.js<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.mdx<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.js<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.mdx<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.js<br>frontend/src/metabase/ui/components/utils/Divider/Divider.stories.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.mdx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.js |
| @ranquild | frontend/src/metabase/status/components/DownloadsStatusLarge/DownloadsStatusLarge.stories.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.stories.tsx<br>frontend/src/metabase/timelines/common/components/TimelinePicker/TimelinePicker.stories.tsx |

github-actions[bot] on (2024-09-20 09:46:44 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2536208807,pull_request,closed,,Mbql drill 2,"Native drill down

<img width=""1567"" alt=""image"" src=""https://github.com/user-attachments/assets/a8b0d665-6bb1-46ce-aba8-8bd9f91b00f4"">
",dpsutton,2024-09-19 12:31:43+00:00,['dpsutton'],2025-02-04 14:52:36+00:00,2025-02-04 01:31:15+00:00,https://github.com/metabase/metabase/pull/48020,"[('Stale', 'Stale PRs that will be auto-closed'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2360900944, 'issue_id': 2536208807, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...4677a35a03b111ea4be7a8da5fd2bc543b876ecf.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CombineColumnsAction/CombineColumnsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/lib/timeseries.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |', 'created_at': datetime.datetime(2024, 9, 19, 12, 49, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2360917173, 'issue_id': 2536208807, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 4677a35a03b111ea4be7a8da5fd2bc543b876ecf.\n✅ Preview:\n    https://pr48020.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 19, 12, 57, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2361757595, 'issue_id': 2536208807, 'author': 'dpsutton', 'body': 'Known issues:\r\n- binning by numbers\r\n- pivots\r\n- we still include a hard-coded card__1000 which prevents us from saving', 'created_at': datetime.datetime(2024, 9, 19, 17, 17, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449687, 'issue_id': 2536208807, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557445, 'issue_id': 2536208807, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 15, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-19 12:49:59 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...4677a35a03b111ea4be7a8da5fd2bc543b876ecf.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CombineColumnsAction/CombineColumnsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/lib/timeseries.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |

github-actions[bot] on (2024-09-19 12:57:26 UTC): 👋 Deploying a preview environment for commit 4677a35a03b111ea4be7a8da5fd2bc543b876ecf.
✅ Preview:
    https://pr48020.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

dpsutton (Issue Creator) on (2024-09-19 17:17:23 UTC): Known issues:
- binning by numbers
- pivots
- we still include a hard-coded card__1000 which prevents us from saving

github-actions[bot] on (2025-01-21 01:31:01 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:15 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2535611701,pull_request,closed,,Pre fill non-sensitive user information during setup for hosted instances,"### What does this PR accomplish?
This PR prepares the main Metabase app to accept the parameterized non-sensitive user information that is to be used during the initial setup. Once the cloud instance is created, it will redirect to the Metabase setup. We already have the necessary user information - no need to force them to type all that again.

See https://github.com/metabase/infra-frontend/issues/1109 for more information.

### Testing
Result of a complementary E2E test:
<img width=""1993"" alt=""image"" src=""https://github.com/user-attachments/assets/5e2b5446-5657-4e73-89f0-106c06c9140e"">
",nemanjaglumac,2024-09-19 08:11:23+00:00,['nemanjaglumac'],2024-09-25 17:41:41+00:00,2024-09-25 17:03:09+00:00,https://github.com/metabase/metabase/pull/48019,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2362299829, 'issue_id': 2535611701, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2e2e99d7a9f2b090318aaf2f510504c68f0bdf08...ca345ba6369023b3748ddbaff4e0e6d7346e374b.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.unit.spec.tsx<br>frontend/src/metabase/setup/reducers.ts |', 'created_at': datetime.datetime(2024, 9, 19, 22, 19, 23, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-19 22:19:23 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2e2e99d7a9f2b090318aaf2f510504c68f0bdf08...ca345ba6369023b3748ddbaff4e0e6d7346e374b.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.tsx<br>frontend/src/metabase/setup/components/UserStep/UserStep.unit.spec.tsx<br>frontend/src/metabase/setup/reducers.ts |

"
2534931833,pull_request,closed,,Bulk JS -> TS refactor,"### Description

This is my meager contribution to the hackathon whilst half-sick.
I picked files that were unchanged in v50 and `master` so these changes could backport without conflict.
As a result I was able to get to convert ~25% of the remaining JS files in our `frontend` folder and ~14% of the remaining JS files in our repo.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
not need
also failling e2e tests are flaking for me in `master` as well, so they can safely be ignored for this PR
",sloansparger,2024-09-18 23:16:00+00:00,['sloansparger'],2024-11-21 13:58:18+00:00,2024-11-21 13:58:18+00:00,https://github.com/metabase/metabase/pull/48017,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2359612142, 'issue_id': 2534931833, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1869c83f3942427b03e6f30eacedd4251a760f1d...c9a56d6b60b9d836657984c7dc3ca1110f5d5512.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/account/app/components/AccountLayout/index.js<br>frontend/src/metabase/account/app/components/AccountLayout/index.ts<br>frontend/src/metabase/account/app/containers/AccountApp/index.js<br>frontend/src/metabase/account/app/containers/AccountApp/index.ts<br>frontend/src/metabase/account/login-history/components/LoginHistory/index.js<br>frontend/src/metabase/account/login-history/components/LoginHistory/index.ts<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/LoginHistoryApp.tsx<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/index.js<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/index.ts<br>frontend/src/metabase/account/notifications/components/ArchiveModal/index.js<br>frontend/src/metabase/account/notifications/components/ArchiveModal/index.ts<br>frontend/src/metabase/account/notifications/components/HelpModal/index.js<br>frontend/src/metabase/account/notifications/components/HelpModal/index.ts<br>frontend/src/metabase/account/notifications/components/NotificationCard/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/index.ts<br>frontend/src/metabase/account/notifications/components/NotificationList/index.js<br>frontend/src/metabase/account/notifications/components/NotificationList/index.ts<br>frontend/src/metabase/account/notifications/components/UnsubscribeModal/index.js<br>frontend/src/metabase/account/notifications/components/UnsubscribeModal/index.ts<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/ArchiveAlertModal.tsx<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/index.js<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/index.ts<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/ArchivePulseModal.tsx<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/index.js<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/index.ts<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/index.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/index.ts<br>frontend/src/metabase/account/notifications/containers/UnsubscribeAlertModal/index.js<br>frontend/src/metabase/account/notifications/containers/UnsubscribeAlertModal/index.ts<br>frontend/src/metabase/account/notifications/containers/UnsubscribePulseModal/index.js<br>frontend/src/metabase/account/notifications/containers/UnsubscribePulseModal/index.ts<br>frontend/src/metabase/account/notifications/routes.tsx |', 'created_at': datetime.datetime(2024, 9, 18, 23, 17, 32, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 23:17:32 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1869c83f3942427b03e6f30eacedd4251a760f1d...c9a56d6b60b9d836657984c7dc3ca1110f5d5512.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/account/app/components/AccountLayout/index.js<br>frontend/src/metabase/account/app/components/AccountLayout/index.ts<br>frontend/src/metabase/account/app/containers/AccountApp/index.js<br>frontend/src/metabase/account/app/containers/AccountApp/index.ts<br>frontend/src/metabase/account/login-history/components/LoginHistory/index.js<br>frontend/src/metabase/account/login-history/components/LoginHistory/index.ts<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/LoginHistoryApp.tsx<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/index.js<br>frontend/src/metabase/account/login-history/containers/LoginHistoryApp/index.ts<br>frontend/src/metabase/account/notifications/components/ArchiveModal/index.js<br>frontend/src/metabase/account/notifications/components/ArchiveModal/index.ts<br>frontend/src/metabase/account/notifications/components/HelpModal/index.js<br>frontend/src/metabase/account/notifications/components/HelpModal/index.ts<br>frontend/src/metabase/account/notifications/components/NotificationCard/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/index.ts<br>frontend/src/metabase/account/notifications/components/NotificationList/index.js<br>frontend/src/metabase/account/notifications/components/NotificationList/index.ts<br>frontend/src/metabase/account/notifications/components/UnsubscribeModal/index.js<br>frontend/src/metabase/account/notifications/components/UnsubscribeModal/index.ts<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/ArchiveAlertModal.tsx<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/index.js<br>frontend/src/metabase/account/notifications/containers/ArchiveAlertModal/index.ts<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/ArchivePulseModal.tsx<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/index.js<br>frontend/src/metabase/account/notifications/containers/ArchivePulseModal/index.ts<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/index.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/index.ts<br>frontend/src/metabase/account/notifications/containers/UnsubscribeAlertModal/index.js<br>frontend/src/metabase/account/notifications/containers/UnsubscribeAlertModal/index.ts<br>frontend/src/metabase/account/notifications/containers/UnsubscribePulseModal/index.js<br>frontend/src/metabase/account/notifications/containers/UnsubscribePulseModal/index.ts<br>frontend/src/metabase/account/notifications/routes.tsx |

"
2534774469,pull_request,closed,,This may or may not add reply reactions,,tsmacdonald,2024-09-18 21:27:34+00:00,['tsmacdonald'],2024-09-18 21:28:05+00:00,2024-09-18 21:28:03+00:00,https://github.com/metabase/metabase/pull/48014,"[('.Team/Workflows', 'aka BEC')]",[],
2534751245,pull_request,closed,,Tweak da email,,tsmacdonald,2024-09-18 21:16:39+00:00,['tsmacdonald'],2024-09-18 21:18:19+00:00,2024-09-18 21:18:17+00:00,https://github.com/metabase/metabase/pull/48013,"[('.Team/Workflows', 'aka BEC')]",[],
2534733470,pull_request,closed,,"if request comes with an API key, it is CORS-safe",,piranha,2024-09-18 21:06:48+00:00,['piranha'],2025-02-05 11:40:05+00:00,2024-09-27 10:43:43+00:00,https://github.com/metabase/metabase/pull/48012,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2360378828, 'issue_id': 2534733470, 'author': 'npretto', 'body': ""I think this could collide with a project we're working on in the embedding team, let me ask on our team channel"", 'created_at': datetime.datetime(2024, 9, 19, 8, 40, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377437777, 'issue_id': 2534733470, 'author': 'escherize', 'body': ""Is there a product doc or similar for this bit of work? I'd like to review it to make sure it'll work when we land https://github.com/metabase/metabase/issues/46970."", 'created_at': datetime.datetime(2024, 9, 26, 16, 34, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377456040, 'issue_id': 2534733470, 'author': 'npretto', 'body': ""> Is there a product doc or similar for this bit of work? I'd like to review it to make sure it'll work when we land #46970.\r\n\r\n@escherize  sorry I didn't link the slack discussion here before, it's currently being discussed here: https://metaboat.slack.com/archives/C063Q3F1HPF/p1726735292342709"", 'created_at': datetime.datetime(2024, 9, 26, 16, 44, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2378959809, 'issue_id': 2534733470, 'author': 'romeovs', 'body': ""I haven't tested it, but I'm not sure this will actually work for the use case we wanted to use this for (the Google Sheets hackaton project).\r\n\r\nTo test whether or not a request is allowed for CORS the browser sends a preflight request to probe the server. The preflight request does _not_ contain the actual `X-API-Key` header.\r\n\r\nThis means that Metabase will not see the `X-API-Key` header and will this deny the CORS request (ie. not return the current origin as being allowed)."", 'created_at': datetime.datetime(2024, 9, 27, 10, 27, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2378986019, 'issue_id': 2534733470, 'author': 'piranha', 'body': ""Doesn't make sense in the current form then :("", 'created_at': datetime.datetime(2024, 9, 27, 10, 43, 43, tzinfo=datetime.timezone.utc)}]","npretto on (2024-09-19 08:40:30 UTC): I think this could collide with a project we're working on in the embedding team, let me ask on our team channel

escherize on (2024-09-26 16:34:27 UTC): Is there a product doc or similar for this bit of work? I'd like to review it to make sure it'll work when we land https://github.com/metabase/metabase/issues/46970.

npretto on (2024-09-26 16:44:39 UTC): @escherize  sorry I didn't link the slack discussion here before, it's currently being discussed here: https://metaboat.slack.com/archives/C063Q3F1HPF/p1726735292342709

romeovs on (2024-09-27 10:27:45 UTC): I haven't tested it, but I'm not sure this will actually work for the use case we wanted to use this for (the Google Sheets hackaton project).

To test whether or not a request is allowed for CORS the browser sends a preflight request to probe the server. The preflight request does _not_ contain the actual `X-API-Key` header.

This means that Metabase will not see the `X-API-Key` header and will this deny the CORS request (ie. not return the current origin as being allowed).

piranha (Issue Creator) on (2024-09-27 10:43:43 UTC): Doesn't make sense in the current form then :(

"
2534732055,pull_request,closed,,Add Resolved By,,tsmacdonald,2024-09-18 21:05:51+00:00,['tsmacdonald'],2024-09-18 21:06:22+00:00,2024-09-18 21:06:20+00:00,https://github.com/metabase/metabase/pull/48011,"[('.Team/Workflows', 'aka BEC')]",[],
2534705203,pull_request,closed,,EMAIL NOTIFICATIONS,,tsmacdonald,2024-09-18 20:51:16+00:00,['tsmacdonald'],2024-09-18 20:51:59+00:00,2024-09-18 20:51:57+00:00,https://github.com/metabase/metabase/pull/48009,"[('.Team/Workflows', 'aka BEC')]",[],
2534544040,pull_request,closed,,I hope this solves all of Ryan's earthly problems,,tsmacdonald,2024-09-18 19:40:53+00:00,['tsmacdonald'],2024-09-18 19:42:24+00:00,2024-09-18 19:42:22+00:00,https://github.com/metabase/metabase/pull/48007,"[('.Team/Workflows', 'aka BEC')]",[],
2534517580,pull_request,closed,,Replies!!!!!,,tsmacdonald,2024-09-18 19:26:27+00:00,['tsmacdonald'],2024-09-18 19:34:06+00:00,2024-09-18 19:34:05+00:00,https://github.com/metabase/metabase/pull/48006,"[('.Team/Workflows', 'aka BEC')]",[],
2534503181,pull_request,closed,,"This is for you, Ryan (USER NOTIFICATIONS!!!!)",,tsmacdonald,2024-09-18 19:19:31+00:00,['tsmacdonald'],2024-09-18 19:25:51+00:00,2024-09-18 19:25:50+00:00,https://github.com/metabase/metabase/pull/48005,"[('.Team/Workflows', 'aka BEC')]",[],
2534450250,pull_request,closed,,"This might be it for avatars, Kelvin",,tsmacdonald,2024-09-18 18:52:37+00:00,['tsmacdonald'],2024-09-18 18:54:32+00:00,2024-09-18 18:54:31+00:00,https://github.com/metabase/metabase/pull/48004,"[('.Team/Workflows', 'aka BEC')]",[],
2534442723,pull_request,closed,,EMOJI REACTIONS EMOJI REACTIONS EMOJI REACTIONS,,tsmacdonald,2024-09-18 18:48:36+00:00,['tsmacdonald'],2024-09-18 18:54:56+00:00,2024-09-18 18:54:54+00:00,https://github.com/metabase/metabase/pull/48003,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2359181979, 'issue_id': 2534442723, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...a687a9a982fcebaf4ae77bb005e1a81224be2f97.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/comment.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/index.ts |\n| @ranquild | frontend/src/metabase/home/components/HomeRecentSection/HomeRecentSection.tsx |', 'created_at': datetime.datetime(2024, 9, 18, 18, 50, 7, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 18:50:07 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...a687a9a982fcebaf4ae77bb005e1a81224be2f97.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/comment.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/index.ts |
| @ranquild | frontend/src/metabase/home/components/HomeRecentSection/HomeRecentSection.tsx |

"
2534254328,pull_request,closed,,This may or may not be enough for user avatars,,tsmacdonald,2024-09-18 17:05:45+00:00,['tsmacdonald'],2024-09-18 17:11:56+00:00,2024-09-18 17:11:55+00:00,https://github.com/metabase/metabase/pull/48002,"[('.Team/Workflows', 'aka BEC')]",[],
2534237121,pull_request,closed,,Tweak some sheet around CSV uploads,"- Add support for google sheets exported date format.
- Return the newly created table id corresponding to a CSV upload.
- Fix Serialization flakes.
- Parse serialized dates in minimal search implementation.",crisptrutski,2024-09-18 16:55:33+00:00,['crisptrutski'],2024-09-24 10:47:54+00:00,2024-09-20 13:15:04+00:00,https://github.com/metabase/metabase/pull/48000,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2359676189, 'issue_id': 2534237121, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit f557b5ed8109d56506f7eeccc720dadc966ee319.\n✅ Preview:\n    https://pr48000.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 19, 0, 33, 33, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-19 00:33:33 UTC): 👋 Deploying a preview environment for commit f557b5ed8109d56506f7eeccc720dadc966ee319.
✅ Preview:
    https://pr48000.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2534222715,pull_request,closed,,Comment resolution and editing,,tsmacdonald,2024-09-18 16:47:05+00:00,[],2024-09-18 17:06:25+00:00,2024-09-18 17:06:22+00:00,https://github.com/metabase/metabase/pull/47999,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2534193093,pull_request,closed,,[Hackathon] Frequently Used Columns Suggestion,,qnkhuat,2024-09-18 16:31:28+00:00,['qnkhuat'],2024-09-30 16:10:59+00:00,2024-09-30 16:10:59+00:00,https://github.com/metabase/metabase/pull/47998,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2359135213, 'issue_id': 2534193093, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...009ce70f9226328b876cfaf6313fa998530d24f5.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx |\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/sparkles.svg |', 'created_at': datetime.datetime(2024, 9, 18, 18, 23, 28, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 18:23:28 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...009ce70f9226328b876cfaf6313fa998530d24f5.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx |
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/sparkles.svg |

"
2534186342,pull_request,closed,,bump snowflake driver version,bump snowflake,dpsutton,2024-09-18 16:27:53+00:00,['dpsutton'],2024-11-11 14:02:35+00:00,2024-11-01 15:44:15+00:00,https://github.com/metabase/metabase/pull/47997,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2391980961, 'issue_id': 2534186342, 'author': 'paoliniluis', 'body': 'Running with Java 21 will not let you add the DB. We need to consider the snowflake comments in the future\r\n![image](https://github.com/user-attachments/assets/bb9eece9-2ff7-4e79-b5d1-557a6386a5f1)', 'created_at': datetime.datetime(2024, 10, 3, 17, 44, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2420218694, 'issue_id': 2534186342, 'author': 'camsaul', 'body': 'The changelog seems to suggest that 3.17.0+ supports Java 21 but I guess that might or might not be true\r\n\r\nhttps://docs.snowflake.com/en/release-notes/clients-drivers/jdbc-2024\r\n\r\n> Added support for Java version 21.', 'created_at': datetime.datetime(2024, 10, 17, 18, 11, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2449986518, 'issue_id': 2534186342, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 56ace05ac47656ffab98dd7ea4eaecaf23cf509e.\n✅ Preview:\n    https://pr47997.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 31, 14, 18, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2451113319, 'issue_id': 2534186342, 'author': 'trunk-io[bot]', 'body': ""<!-- Trunk Test Analytics -->\n\n\n**101242 tests** were run on `6f97e62c`. ❌ **1 Failed**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47997?repo=metabase/metabase&commitHash=6f97e62c9520d77b728d3fa45ed1d6223f46350c&utm_source=gh-comment)\n\n\n<details>\n<summary>❌ 1 Failed</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| `scenarios > question > native query drill dashboard brush filters timeseries filter` | cy.wait() timed out waiting for the first request to the route 'dataset' and no request ever occurred. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47997?repo=metabase/metabase&commitHash=6f97e62c9520d77b728d3fa45ed1d6223f46350c&utm_source=gh-comment&runConclusion=FAILURE&runId=9225020d-b3d5-5e3d-8dcf-944997b808f3) |\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo/#flaky-tests?repo=metabase/metabase&utm_source=gh-comment)\n\n</sub>"", 'created_at': datetime.datetime(2024, 11, 1, 1, 15, 36, tzinfo=datetime.timezone.utc)}]","paoliniluis on (2024-10-03 17:44:54 UTC): Running with Java 21 will not let you add the DB. We need to consider the snowflake comments in the future
![image](https://github.com/user-attachments/assets/bb9eece9-2ff7-4e79-b5d1-557a6386a5f1)

camsaul on (2024-10-17 18:11:51 UTC): The changelog seems to suggest that 3.17.0+ supports Java 21 but I guess that might or might not be true

https://docs.snowflake.com/en/release-notes/clients-drivers/jdbc-2024

github-actions[bot] on (2024-10-31 14:18:37 UTC): 👋 Deploying a preview environment for commit 56ace05ac47656ffab98dd7ea4eaecaf23cf509e.
✅ Preview:
    https://pr47997.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

trunk-io[bot] on (2024-11-01 01:15:36 UTC): <!-- Trunk Test Analytics -->


**101242 tests** were run on `6f97e62c`. ❌ **1 Failed**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47997?repo=metabase/metabase&commitHash=6f97e62c9520d77b728d3fa45ed1d6223f46350c&utm_source=gh-comment)


<details>
<summary>❌ 1 Failed</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| `scenarios > question > native query drill dashboard brush filters timeseries filter` | cy.wait() timed out waiting for the first request to the route 'dataset' and no request ever occurred. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47997?repo=metabase/metabase&commitHash=6f97e62c9520d77b728d3fa45ed1d6223f46350c&utm_source=gh-comment&runConclusion=FAILURE&runId=9225020d-b3d5-5e3d-8dcf-944997b808f3) |
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo/#flaky-tests?repo=metabase/metabase&utm_source=gh-comment)

</sub>

"
2534162415,pull_request,closed,,Basic Comment API,,tsmacdonald,2024-09-18 16:16:30+00:00,['tsmacdonald'],2024-09-18 16:28:48+00:00,2024-09-18 16:28:46+00:00,https://github.com/metabase/metabase/pull/47996,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2534096495,pull_request,closed,,allow embedding external content on dashboards,"Closes https://github.com/metabase/metabase/issues/7297

⚠️ We've decided to [rename](https://metaboat.slack.com/archives/C064QMXEV9N/p1727719919363839) ""embeds"" to ""iframes"" which also happened in the code so if you created some content on the old version of this branch and now it is broken, you need to recreate it from scratch.

## Description

Adds the embed dashcard type to dashboards.

## How to verify

Try adding embed dashcards to a dashboard with various content:
- just embeddable links like ""https://example.com/""
- iframes `<iframe src=""https://example.com/"" />`
- shareable video links from youtube, vimeo, loom (they are transformed to embeddable links before wrapping into an iframe)
- malicious content

⚠️ Review the security aspect of the code

## Test plan

### Dimensions
- [x] IFrame input types
    - [x] urls
    - [x] urls without protocols
    - [x] iFrame html
    - [x] Sharing (not embedding) links to certain services
- [x] Dashcard state
    - [x] Preview
    - [x] Edit
- [x] Dashboard state
    - [x] View
    - [x] Edit
- [x] Unsafe attributes

### Unit tests
- [x] URL transformation
    - [x] YouTube watch link to embed link
    - [x] YouTube short link to embed link
    - [x] YouTube playlist link to embed link
    - [x] YouTube link with both video ID and playlist ID
    - [x] Loom share link to embed link
    - [x] Vimeo link to embed link
- [x] URL handling
    - [x] Https url handling
    - [x] Http url handling
    - [x] Whitespace trimming
    - [x] Protocol addition for urls without one
- [x] IFrame handling
    - [x] Extracting url from iframe
    - [x] Handling iframe without src
- [x] Security
    - [x] Ignoring existing onload handlers
    - [x] Handling of unsafe urls
    - [x] Handling of data urls
    - [x] Adds sandbox attribute 
- [x] Edge cases
    - [x] Handling undefined input
    - [x] Handling empty string input
    - [x] Handling HTML without an iframe

### E2e tests
- [x] Adding an iframe card
    - [x] Verify ability to add an iframe card while editing a dashboard
    - [x] Confirm iframe persists after saving the dashboard
- [x] Url handling and transformations
    - [x] Test various input formats in the dashboard context

## Demo

**Editing**
<img width=""1093"" alt=""Screenshot 2024-09-27 at 9 10 45 PM"" src=""https://github.com/user-attachments/assets/dd1ec8ae-8138-4d49-9276-065588f9ad13"">

**Viewing**
<img width=""1115"" alt=""Screenshot 2024-09-27 at 9 10 33 PM"" src=""https://github.com/user-attachments/assets/8fba3290-2fad-4795-8229-05893704e1d1"">
",luizarakaki,2024-09-18 15:44:43+00:00,['alxnddr'],2024-10-03 16:09:45+00:00,2024-10-03 16:09:44+00:00,https://github.com/metabase/metabase/pull/47994,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2358829549, 'issue_id': 2534096495, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff fd615bf20ad78fb88decd6af3ae99529fc337108...59939d7ea60a29d4ffd712e16f5bbc62121524fd.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/register.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameVizSettings.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/index.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |', 'created_at': datetime.datetime(2024, 9, 18, 15, 46, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2382869667, 'issue_id': 2534096495, 'author': 'NevRA', 'body': '@alxnddr please, dont forget about testing plans!', 'created_at': datetime.datetime(2024, 9, 30, 11, 1, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383298173, 'issue_id': 2534096495, 'author': 'alxnddr', 'body': ""@kamilmielnik thanks for the review, it is incredibly valuable! I'll address the issues"", 'created_at': datetime.datetime(2024, 9, 30, 14, 2, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2384657796, 'issue_id': 2534096495, 'author': 'alxnddr', 'body': '@kamilmielnik @kdoh thanks for your feedback, I updated the PR, could you please have a look? Regarding the library to transform sharing to embedding URLs, I did not find anything so I believe we have to do this by ourselves', 'created_at': datetime.datetime(2024, 10, 1, 2, 30, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2384860716, 'issue_id': 2534096495, 'author': 'kamilmielnik', 'body': '> Regarding the library to transform sharing to embedding URLs, I did not find anything so I believe we have to do this by ourselves\r\n\r\n- https://github.com/radiovisual/get-video-id\r\n- https://github.com/Zod-/jsVideoUrlParser\r\n- https://github.com/gfscott/eleventy-plugin-embed-everything\r\n\r\nI got these by searching for ""vimeo"" in npm and github topics.\r\n\r\nGenerating embed URL once we have video id is trivial, so we can do this part ourselves.\r\nBut extracting the video id is tricky so I strongly suggest to use a library.\r\n\r\n> * The youtube and loom ""just embed this"" both worked well, but I echo @kamilmielnik that this feels like something that could be worth seeing if there\'s a library out there for. I\'m ok if we do that as a follow on but I\'d defer to him and others on that specific detail.\r\n\r\nYeah, we can improve it later.\r\n\r\n----\r\n\r\n@alxnddr I won\'t be able to properly re-review this PR today so I dismissed my review to not block this PR.', 'created_at': datetime.datetime(2024, 10, 1, 5, 52, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2386675269, 'issue_id': 2534096495, 'author': 'alxnddr', 'body': ""@kamilmielnik thanks for the suggestion, I looked at these libraries. In general they still do not prevent us from writing a url transform code per service. \r\n\r\n1) https://github.com/radiovisual/get-video-id — ignores playlist id, we would still need to parse it manually\r\n2) https://github.com/Zod-/jsVideoUrlParser — unmaintained library. When creating embedded links for loom it does omits the protocol, for youtube links it does not. The amount of code is greater.\r\n3) https://github.com/gfscott/eleventy-plugin-embed-everything — it is an eleventy plugin.\r\nI believe the existing solution is sufficient so I don't have high confidence there will be cases when users paste links for these services so they won't get properly embedded"", 'created_at': datetime.datetime(2024, 10, 1, 18, 21, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2391573827, 'issue_id': 2534096495, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 59939d7ea60a29d4ffd712e16f5bbc62121524fd.\n✅ Preview:\n    https://pr47994.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 3, 14, 30, 8, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 15:46:14 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff fd615bf20ad78fb88decd6af3ae99529fc337108...59939d7ea60a29d4ffd712e16f5bbc62121524fd.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/register.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameVizSettings.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/index.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |

NevRA on (2024-09-30 11:01:51 UTC): @alxnddr please, dont forget about testing plans!

alxnddr (Assginee) on (2024-09-30 14:02:48 UTC): @kamilmielnik thanks for the review, it is incredibly valuable! I'll address the issues

alxnddr (Assginee) on (2024-10-01 02:30:08 UTC): @kamilmielnik @kdoh thanks for your feedback, I updated the PR, could you please have a look? Regarding the library to transform sharing to embedding URLs, I did not find anything so I believe we have to do this by ourselves

kamilmielnik on (2024-10-01 05:52:59 UTC): - https://github.com/radiovisual/get-video-id
- https://github.com/Zod-/jsVideoUrlParser
- https://github.com/gfscott/eleventy-plugin-embed-everything

I got these by searching for ""vimeo"" in npm and github topics.

Generating embed URL once we have video id is trivial, so we can do this part ourselves.
But extracting the video id is tricky so I strongly suggest to use a library.


Yeah, we can improve it later.

----

@alxnddr I won't be able to properly re-review this PR today so I dismissed my review to not block this PR.

alxnddr (Assginee) on (2024-10-01 18:21:11 UTC): @kamilmielnik thanks for the suggestion, I looked at these libraries. In general they still do not prevent us from writing a url transform code per service. 

1) https://github.com/radiovisual/get-video-id — ignores playlist id, we would still need to parse it manually
2) https://github.com/Zod-/jsVideoUrlParser — unmaintained library. When creating embedded links for loom it does omits the protocol, for youtube links it does not. The amount of code is greater.
3) https://github.com/gfscott/eleventy-plugin-embed-everything — it is an eleventy plugin.
I believe the existing solution is sufficient so I don't have high confidence there will be cases when users paste links for these services so they won't get properly embedded

github-actions[bot] on (2024-10-03 14:30:08 UTC): 👋 Deploying a preview environment for commit 59939d7ea60a29d4ffd712e16f5bbc62121524fd.
✅ Preview:
    https://pr47994.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2533947879,pull_request,closed,,[Hackathon] Agent,"Hackathon Project. Not for production, obviously.",heypoom,2024-09-18 14:44:35+00:00,[],2024-12-17 10:53:29+00:00,2024-12-17 10:53:29+00:00,https://github.com/metabase/metabase/pull/47993,[],[],
2533912027,pull_request,closed,,render notebook step actions in the natural order,"[Epic](https://github.com/metabase/metabase/issues/47911)

Changes order of the action buttons to the more natural

<img width=""1339"" alt=""Screenshot 2024-09-25 at 00 11 36"" src=""https://github.com/user-attachments/assets/0c0c6276-c508-4ddf-b441-2863d30f4159"">
<img width=""1320"" alt=""Screenshot 2024-09-25 at 00 11 47"" src=""https://github.com/user-attachments/assets/aca636d9-432d-464a-b56c-72d6dd6f21a1"">

<img width=""1411"" alt=""Screenshot 2024-09-25 at 00 12 02"" src=""https://github.com/user-attachments/assets/46938f82-3382-4cf6-bbf6-812e3c03f50c"">
<img width=""1335"" alt=""Screenshot 2024-09-25 at 00 12 23"" src=""https://github.com/user-attachments/assets/186e25e2-26eb-4f59-ae9b-ff798b1345b9"">
<img width=""1283"" alt=""Screenshot 2024-09-25 at 00 12 48"" src=""https://github.com/user-attachments/assets/8a3a6127-5da4-4a37-a6d6-285422649ed4"">
",uladzimirdev,2024-09-18 14:29:23+00:00,['uladzimirdev'],2024-09-25 16:17:38+00:00,2024-09-25 16:17:36+00:00,https://github.com/metabase/metabase/pull/47992,"[('.Team/Querying', '')]","[{'comment_id': 2374400987, 'issue_id': 2533912027, 'author': 'uladzimirdev', 'body': '@ranquild fixed tests, please take a look', 'created_at': datetime.datetime(2024, 9, 25, 15, 20, 58, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-09-25 15:20:58 UTC): @ranquild fixed tests, please take a look

"
2533148627,pull_request,closed,,"🤖 backported ""update jspdf""","  #47969
",github-automation-metabase,2024-09-18 09:05:59+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-09-18 11:02:45+00:00,2024-09-18 11:02:44+00:00,https://github.com/metabase/metabase/pull/47987,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2533136203,pull_request,closed,,Some polish around experiment search,"### Description

Fixes two typos and simplifies the mechanism for switching out engines.",crisptrutski,2024-09-18 09:00:09+00:00,['crisptrutski'],2024-10-08 16:14:36+00:00,2024-09-18 15:56:15+00:00,https://github.com/metabase/metabase/pull/47986,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2533067482,pull_request,closed,,change the visual style of the buttons so that they all look active,"[Epic](https://github.com/metabase/metabase/issues/47911)

Remove transparency from the buttons

<img width=""1396"" alt=""image"" src=""https://github.com/user-attachments/assets/19e1169f-b9f3-4fd5-ac0d-aa86c84530fb"">

",uladzimirdev,2024-09-18 08:27:42+00:00,['uladzimirdev'],2024-09-24 20:28:46+00:00,2024-09-24 20:28:44+00:00,https://github.com/metabase/metabase/pull/47985,"[('.Team/Querying', '')]",[],
2532303321,pull_request,closed,,[hackathon] Commenting,"Notes:
- avatars are cool, but base64 encoding them is a nightmare and makes payloads enormous
- `@mentions` are harder than we thought
- we really need a better connection model than polling to handle comments. They rely on being fresh. Some sort of websocket or long-polling support on the backend will be essential for this to work.
",iethree,2024-09-17 22:43:55+00:00,"['brunobergher', 'tsmacdonald', 'WiNloSt', 'oisincoveney', 'iethree']",2024-09-23 21:38:38+00:00,2024-09-23 21:38:38+00:00,https://github.com/metabase/metabase/pull/47984,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2357206177, 'issue_id': 2532303321, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...597c28501f87557cdba3d3aebb1fd52c6628027b.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/data-display/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/icons/Icon/icons/comment.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/index.ts<br>src/metabase/email/comment_notification.mustache<br>src/metabase/email/comment_reply.mustache<br>src/metabase/email/messages.clj |\n| @ranquild | frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.module.css<br>frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.styled.tsx<br>frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeRecentSection/HomeRecentSection.tsx |', 'created_at': datetime.datetime(2024, 9, 17, 23, 38, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2359619801, 'issue_id': 2532303321, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 597c28501f87557cdba3d3aebb1fd52c6628027b.\n✅ Preview:\n    https://pr47984.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 18, 23, 26, 37, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-17 23:38:38 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...597c28501f87557cdba3d3aebb1fd52c6628027b.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/data-display/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/icons/Icon/icons/comment.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/index.ts<br>src/metabase/email/comment_notification.mustache<br>src/metabase/email/comment_reply.mustache<br>src/metabase/email/messages.clj |
| @ranquild | frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.module.css<br>frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.styled.tsx<br>frontend/src/metabase/account/app/components/AccountHeader/AccountHeader.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeRecentSection/HomeRecentSection.tsx |

github-actions[bot] on (2024-09-18 23:26:37 UTC): 👋 Deploying a preview environment for commit 597c28501f87557cdba3d3aebb1fd52c6628027b.
✅ Preview:
    https://pr47984.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2532296597,pull_request,closed,,Remove props from View.jsx,"### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-09-17 22:37:35+00:00,['oisincoveney'],2024-09-24 11:29:06+00:00,2024-09-24 11:29:06+00:00,https://github.com/metabase/metabase/pull/47983,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2532282033,pull_request,closed,,Treemap chart hackathon,Boilerplate for the treemap chart,alxnddr,2024-09-17 22:25:08+00:00,['alxnddr'],2025-02-04 01:31:17+00:00,2025-02-04 01:31:17+00:00,https://github.com/metabase/metabase/pull/47982,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2358895322, 'issue_id': 2532282033, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...1618472de1654107abf8e3625b7aea3f4f71a623.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/treemap.svg |', 'created_at': datetime.datetime(2024, 9, 18, 16, 17, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449707, 'issue_id': 2532282033, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557476, 'issue_id': 2532282033, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 16, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 16:17:05 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 775d9c941d938d4aa78f54f16c88da4806f89937...1618472de1654107abf8e3625b7aea3f4f71a623.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/treemap.svg |

github-actions[bot] on (2025-01-21 01:31:02 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:16 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2532079311,pull_request,closed,,echarts viz ergonomic tweaks,"### Description

- Removes duplicated chart containers that set 100% height for charts built with ECharts
- Makes onResize prop of the echarts renderer optional

### How to verify

CI should be green 
",alxnddr,2024-09-17 20:23:28+00:00,['alxnddr'],2024-10-08 16:14:37+00:00,2024-09-17 21:10:22+00:00,https://github.com/metabase/metabase/pull/47980,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2531934160,pull_request,closed,,"🤖 backported ""Pivot Exports/Downloads Should Not include pivot-grouping or 'Extra' Rows""","  #47832
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-17 19:27:21+00:00,"['adam-james-v', 'github-automation-metabase']",2024-09-24 12:08:18+00:00,2024-09-24 12:08:17+00:00,https://github.com/metabase/metabase/pull/47979,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2531834592,pull_request,closed,,🍒 Fix text alignment for dashboard text card (#47540),"Manual backport of the external PR:
https://github.com/metabase/metabase/pull/47540",nemanjaglumac,2024-09-17 18:37:05+00:00,['nemanjaglumac'],2024-09-17 19:20:48+00:00,2024-09-17 19:20:21+00:00,https://github.com/metabase/metabase/pull/47978,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2356638352, 'issue_id': 2531834592, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2380076341f38ae1605568b56cfef8c49b33a93b...282559699db4320cee92952ec2201707af0eaf63.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/Text/Text.jsx |', 'created_at': datetime.datetime(2024, 9, 17, 18, 38, 29, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-17 18:38:29 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2380076341f38ae1605568b56cfef8c49b33a93b...282559699db4320cee92952ec2201707af0eaf63.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/Text/Text.jsx |

"
2531799194,pull_request,closed,,Fix text alignment for dashboard text card,Running CI for external contribution #47540 ,adam-james-v,2024-09-17 18:16:52+00:00,['adam-james-v'],2024-09-17 18:33:07+00:00,2024-09-17 18:33:03+00:00,https://github.com/metabase/metabase/pull/47977,"[('do not merge', ''), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2356605178, 'issue_id': 2531799194, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e4bd821058473fd8483a8c57340fe50595eb984d...fb45bda867fef046df8418156d03357ff5d1ff5a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/Text/Text.jsx |', 'created_at': datetime.datetime(2024, 9, 17, 18, 18, 15, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-17 18:18:15 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e4bd821058473fd8483a8c57340fe50595eb984d...fb45bda867fef046df8418156d03357ff5d1ff5a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/Text/Text.jsx |

"
2531566727,pull_request,closed,,adds reference to embedding sdk on the embedding homepage,"
Closes https://github.com/metabase/metabase/issues/47841

### Description

<img width=""1732"" alt=""image"" src=""https://github.com/user-attachments/assets/e4bb98f8-dd28-462b-8504-37bd9548bcfa"">
",npretto,2024-09-17 16:16:37+00:00,['npretto'],2024-09-25 10:45:13+00:00,2024-09-25 10:45:11+00:00,https://github.com/metabase/metabase/pull/47975,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2358681227, 'issue_id': 2531566727, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e4bd821058473fd8483a8c57340fe50595eb984d...1ea4d22b7ed890c896a7ad47cbd6bcf66febe9e7.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx |', 'created_at': datetime.datetime(2024, 9, 18, 14, 47, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2370431894, 'issue_id': 2531566727, 'author': 'npretto', 'body': '> The UTM link looks good. I guess no longer auto-enabling embedding is part of the feature flag project and this is why it is still there. Correct?\r\n\r\nYes', 'created_at': datetime.datetime(2024, 9, 24, 7, 37, 36, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-18 14:47:08 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e4bd821058473fd8483a8c57340fe50595eb984d...1ea4d22b7ed890c896a7ad47cbd6bcf66febe9e7.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx |

npretto (Issue Creator) on (2024-09-24 07:37:36 UTC): Yes

"
2531542672,pull_request,closed,,"🤖 backported ""Add v0.50.26 to the list of releases""",#47970,github-automation-metabase,2024-09-17 16:04:22+00:00,"['alexyarosh', 'github-automation-metabase']",2024-09-17 16:05:53+00:00,2024-09-17 16:05:52+00:00,https://github.com/metabase/metabase/pull/47974,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2531536292,pull_request,closed,,"🤖 backported ""docs: make password resetting instructions more prominent""",#47958,github-automation-metabase,2024-09-17 16:01:39+00:00,"['paoliniluis', 'github-automation-metabase']",2024-09-17 16:03:17+00:00,2024-09-17 16:03:16+00:00,https://github.com/metabase/metabase/pull/47973,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2531333517,pull_request,closed,,add texts to the visualization and results icons,"[Epic](https://github.com/metabase/metabase/issues/47911)


https://github.com/user-attachments/assets/751aeffa-2d1e-4f0a-a5d5-f3fc3c0bd126

",uladzimirdev,2024-09-17 14:32:51+00:00,['uladzimirdev'],2024-09-18 07:07:36+00:00,2024-09-18 07:07:35+00:00,https://github.com/metabase/metabase/pull/47971,"[('.Team/Querying', '')]",[],
2531302254,pull_request,closed,,Add v0.50.26 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-09-17 14:20:16+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-17 16:06:20+00:00,2024-09-17 16:03:32+00:00,https://github.com/metabase/metabase/pull/47970,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2531230212,pull_request,closed,,update jspdf,fixes https://github.com/metabase/metabase/security/dependabot/166,uladzimirdev,2024-09-17 13:51:56+00:00,['uladzimirdev'],2024-09-18 11:03:14+00:00,2024-09-18 09:05:09+00:00,https://github.com/metabase/metabase/pull/47969,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2531110779,pull_request,closed,,47840 - surface sdk in share modal,"closes https://github.com/metabase/metabase/pull/47967

Implements design from https://www.figma.com/design/W1TfzdrR8ldzp4vdjP1z36/SDK-Embedding%3A-admin-settings-%2B-embed-flow?node-id=10661-18909&t=kpqk0sC9UKhiOj9j-4

The original project was https://www.notion.so/metabase/Surface-SDK-in-the-share-embed-flow-52bca48f81d94b40b841eeace50378e0?pvs=4 but a lot has changed since the initial project

![image](https://github.com/user-attachments/assets/8e630e8b-0654-4c54-9714-3438cd442f0e)

",npretto,2024-09-17 13:03:06+00:00,['npretto'],2024-10-04 07:12:03+00:00,2024-10-03 17:28:44+00:00,https://github.com/metabase/metabase/pull/47967,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2379345910, 'issue_id': 2531110779, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5d5129716e485b88ed815709d7f6fda02c42045...515499541d5f279ebf27387192ac968822da3a8c.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts |', 'created_at': datetime.datetime(2024, 9, 27, 13, 55, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-27 13:55:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5d5129716e485b88ed815709d7f6fda02c42045...515499541d5f279ebf27387192ac968822da3a8c.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts |

"
2531051244,pull_request,closed,,"🤖 backported ""bypass race condition to avoid flakiness in click behaviour test""","  #47917
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-17 12:37:30+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-09-18 10:16:40+00:00,2024-09-18 10:16:37+00:00,https://github.com/metabase/metabase/pull/47966,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2358078468, 'issue_id': 2531051244, 'author': 'uladzimirdev', 'body': ""temporal-unit wasn't backported to v50, closing"", 'created_at': datetime.datetime(2024, 9, 18, 10, 16, 38, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Assginee) on (2024-09-18 10:16:38 UTC): temporal-unit wasn't backported to v50, closing

"
2529694133,pull_request,closed,,isomorphic viz settings computation,"### Description

In the initial release of the migration to ECharts for isomorphic charts, we reused most of the code between client-side and GraalJS SSR. However, we still partially duplicated the visualization settings computation for static visualizations. This was because importing getComputedSettingsForSeries introduced frontend code that relied on browser APIs, causing runtime failures.

This PR enables static visualizations to fully reuse the settings computation logic, eliminating potential inconsistencies between client-side and static charts related to visualization settings. It also improves developer ergonomics by removing the need to write separate settings computations for static visualizations.

The same principle applies to the formatValue function, which we can now use directly in static visualizations instead of having a duplicated formatStaticValue. This eliminates the need to include formatValue in the rendering context.

### How to verify

- All visual Loki tests should be green
- BE specs that verify static-viz rendering with real data in GraalVM should be green
- Verify manually static viz rendering in dashboard subscriptions & question alerts works

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-09-16 23:57:46+00:00,['alxnddr'],2024-11-26 18:52:48+00:00,2024-10-08 20:29:18+00:00,https://github.com/metabase/metabase/pull/47963,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2529626308,pull_request,closed,,build ee-extra docker image,"### Description

This builds ee-extra docker image on push to master that includes partner drivers

### How to verify

1. Push to master
2. Check that docker image is created and pushed
",oreonl,2024-09-16 22:46:09+00:00,['oreonl'],2024-10-08 16:13:49+00:00,2024-10-02 17:55:40+00:00,https://github.com/metabase/metabase/pull/47960,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2529577406,pull_request,closed,,"🤖 backported ""fix: snowflake compile day trunc to timestamp_ltz""",#47874,github-automation-metabase,2024-09-16 22:04:41+00:00,"['snoe', 'github-automation-metabase']",2024-09-17 14:16:56+00:00,2024-09-17 14:16:55+00:00,https://github.com/metabase/metabase/pull/47959,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2529526254,pull_request,closed,,docs: make password resetting instructions more prominent,[slack thread](https://metaboat.slack.com/archives/C01R1JY03J4/p1726498514942169),alexyarosh,2024-09-16 21:25:44+00:00,['alexyarosh'],2024-09-17 16:03:46+00:00,2024-09-17 16:00:49+00:00,https://github.com/metabase/metabase/pull/47958,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2529243466,pull_request,closed,,Bump redshift driver,"Part of looking at #45910.

[This commit](https://github.com/aws/amazon-redshift-jdbc-driver/commit/d9af8f1c3004872e5455c7fe668f81d83cebec0c) made changes to src/main/java/com/amazon/redshift/core/v3/RedshiftRowsBlockingQueue.java which was flagged in in #45910 as a possible issue with some queries getting stuck.
",snoe,2024-09-16 19:00:57+00:00,['snoe'],2024-09-25 22:11:27+00:00,2024-09-24 18:46:45+00:00,https://github.com/metabase/metabase/pull/47957,"[('Database/Redshift', None), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]",[],
2529021292,pull_request,closed,,update viz and settings buttons,"[Epic](https://github.com/metabase/metabase/issues/47911)

update visualization settings button text

https://github.com/user-attachments/assets/d2c1bee3-94ea-4254-b617-c2a6139f7735



",uladzimirdev,2024-09-16 17:14:46+00:00,['uladzimirdev'],2024-09-17 14:19:48+00:00,2024-09-17 14:19:46+00:00,https://github.com/metabase/metabase/pull/47956,"[('.Team/Querying', '')]",[],
2528788822,pull_request,closed,,[Notification] Event hydration,"Last bullet point of milestone 1 of https://github.com/metabase/metabase/issues/47438

Add the mechanism for:
- decorating hydration info for event schemas
- hydrating the info

See this [part](https://www.notion.so/metabase/Simple-text-notification-74beda71982e4d2cab62efeb5b7f3734?pvs=4#fe3110c74cf84b649ae7f5ad7ef83e70) of tech doc for more info",qnkhuat,2024-09-16 15:28:09+00:00,['qnkhuat'],2024-09-30 09:10:52+00:00,2024-09-30 09:10:49+00:00,https://github.com/metabase/metabase/pull/47953,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2361654744, 'issue_id': 2528788822, 'author': 'qnkhuat', 'body': ""The CI errors are flaky and should be fixed by one of Chris's PRs"", 'created_at': datetime.datetime(2024, 9, 19, 16, 57, 53, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-09-19 16:57:53 UTC): The CI errors are flaky and should be fixed by one of Chris's PRs

"
2528642674,pull_request,closed,,update preview sql button,"[Epic](https://github.com/metabase/metabase/issues/47911)

<img width=""755"" alt=""image"" src=""https://github.com/user-attachments/assets/20dc26b2-1143-4fa3-8764-a71acffb2964"">



### Demo

https://github.com/user-attachments/assets/7c79e664-6b58-41d8-8b9f-1927f5847b5b





",uladzimirdev,2024-09-16 14:27:26+00:00,['uladzimirdev'],2024-09-17 14:20:17+00:00,2024-09-17 14:20:15+00:00,https://github.com/metabase/metabase/pull/47952,"[('.Team/Querying', '')]",[],
2527605145,pull_request,closed,,add ExportPdf route,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",ivnvMkhl,2024-09-16 06:25:13+00:00,[],2024-09-16 06:25:40+00:00,2024-09-16 06:25:40+00:00,https://github.com/metabase/metabase/pull/47947,[],[],
2527529352,pull_request,closed,,Color palette wip,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",ivnvMkhl,2024-09-16 05:25:05+00:00,[],2024-09-16 06:25:53+00:00,2024-09-16 06:25:53+00:00,https://github.com/metabase/metabase/pull/47946,[],[],
2525842204,pull_request,closed,,"🤖 backported ""Fix ordering by the accumulated column""",#47875,github-automation-metabase,2024-09-13 23:16:01+00:00,"['metamben', 'github-automation-metabase']",2024-09-16 16:09:44+00:00,2024-09-16 16:09:43+00:00,https://github.com/metabase/metabase/pull/47943,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525777883,pull_request,closed,,"🤖 backported ""Ensure :effective-type for columns from an aggregation in a card""","  #47936
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-13 22:16:20+00:00,"['metamben', 'github-automation-metabase']",2024-09-16 16:15:46+00:00,2024-09-16 16:15:44+00:00,https://github.com/metabase/metabase/pull/47942,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525605347,pull_request,closed,,Ensure :effective-type for columns from an aggregation in a card,"Fixes #47184

### Description

Ensure `:effective-type` is set.

### How to verify

Describe the steps to verify that the changes are working as expected.

Try the repro steps from #47184.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-09-13 20:07:54+00:00,['metamben'],2024-09-13 22:15:34+00:00,2024-09-13 22:15:32+00:00,https://github.com/metabase/metabase/pull/47936,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2525493272,pull_request,closed,,Sidesheet Polish 🇵🇱 ,"Closes https://github.com/metabase/metabase/issues/47904

### Description

When there's multiline  info, icons top-align and don't shrink

![Screen Shot 2024-09-13 at 1 05 21 PM](https://github.com/user-attachments/assets/c56b9eba-4ce6-4b63-a81c-9cbbed954a8d)

![Screen Shot 2024-09-13 at 2 29 20 PM](https://github.com/user-attachments/assets/213b1d4f-cdc7-4a8b-9bfa-265a1f00a1c1)


Fixed size of question info sidebar to match dashboard info sidebar and fixed padding on both (should be 32px, was actually 24px when using tabs)

![Screen Shot 2024-09-13 at 1 04 25 PM](https://github.com/user-attachments/assets/4162ab0c-7f30-4983-a493-92e38d94f8dc)

Linkified collection names and question source info

![Screen Shot 2024-09-13 at 1 04 36 PM](https://github.com/user-attachments/assets/c9862140-11f4-4017-9848-7d612fab4759)

Reorderded and added dividers to question overflow menu

![Screen Shot 2024-09-13 at 1 05 39 PM](https://github.com/user-attachments/assets/7ff24a17-0fde-4235-95fe-b40ffca96528)

Hide settings menu items for instance analytics questions

![Screen Shot 2024-09-13 at 1 45 49 PM](https://github.com/user-attachments/assets/da076f43-5682-454e-9ef3-0b8bb1d5cc68)

hide (empty) history section for instance analytics questions and dashboards

![Screen Shot 2024-09-13 at 1 45 41 PM](https://github.com/user-attachments/assets/29b7fce2-ca94-4d4c-91a8-1f1f49127dd9)


",iethree,2024-09-13 19:09:44+00:00,['iethree'],2024-09-24 04:04:43+00:00,2024-09-24 04:04:42+00:00,https://github.com/metabase/metabase/pull/47935,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2525476209,pull_request,closed,,"🤖 backported ""Revert to non-truncating mbql.u/unique-name-generator in annotate-native-cols""","Closes #47584

 #47866
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-13 18:59:01+00:00,"['appleby', 'github-automation-metabase']",2024-09-13 22:09:41+00:00,2024-09-13 22:09:40+00:00,https://github.com/metabase/metabase/pull/47934,"[('.Team/Querying', ''), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525428312,pull_request,closed,,Feature flag and settings for SDK part one,"Resolves: #47521, #47522, #47525, #47526, and #47528

## Summary

Basically we want to split out 2 settings:

1. `enable-embedding` is split into:
  - `enable-embedding-interactive`
  - `enable-embedding-sdk`
  - `enable-embedding-static`
2. `embedding-app-origin` will be split into `embedding-app-origins-sdk` and `embedding-app-origins-interactive`. This bit adds `embedding-app-origins-sdk`, and we will rename `embedding-app-origin`to be `embedding-app-origins-interactive` in the next PR.

More context: Previously `embedding-app-origin` controlled *both* CORS (used by SDK) and Frame Ancestors (used by interactive embedding). But we want to allow people to use the SDK on localhost for free, without letting them use interactive embedding for free.

Now this setting is getting split so that:

`embedding-app-origins-sdk` controls CORS
`embedding-app-origin`[^1] controls Frame Ancestors

[^1]: In the next bit of work, we're going to replace the `embedding-app-origin` setting with `embedding-app-origins-interactive`.

-----
## Tasks:
- Adds a new boolean setting `enable-embedding-sdk`
- Adds a new string setting `embedding-app-origins-sdk`
- Adds a new boolean setting `enable-embedding-static`
- Adds a new boolean setting `enable-embedding-interactive`
- Deprecates `enable-embedding`
- Also hooks up localhost behaviors for embedding-app-origins-sdk
- Sets up embedding toggle analytics for all enable-embedding settings (even the deprecated one)
- Hooks up the embedding-app-origin, and embedding-app-origins-sdk in `server.middleware/security`
- Does a bit of cleanup in `server.middleware/security`",escherize,2024-09-13 18:29:52+00:00,['escherize'],2024-09-27 15:59:44+00:00,2024-09-27 10:42:33+00:00,https://github.com/metabase/metabase/pull/47933,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2525370351,pull_request,closed,,Add dashboard details to info sidesheet,"
Closes https://github.com/metabase/metabase/issues/47919

### Description

Adds additional metadata to dashboard info sidesheet

![Screen Shot 2024-09-13 at 11 01 40 AM](https://github.com/user-attachments/assets/9f7b5f6c-2e50-46b6-b2c3-6a8e30049be2)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-13 17:56:01+00:00,['iethree'],2024-09-24 14:26:46+00:00,2024-09-24 04:03:34+00:00,https://github.com/metabase/metabase/pull/47932,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2525289306,pull_request,closed,,docs - add time grouping,Adds docs for time grouping parameter.,jeff-bruemmer,2024-09-13 17:06:00+00:00,['jeff-bruemmer'],2024-10-09 21:18:36+00:00,2024-10-09 21:15:39+00:00,https://github.com/metabase/metabase/pull/47930,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2525264550,pull_request,closed,,Handle settings set via environment variables,"Closes https://github.com/metabase/metabase/issues/47768

### Description

Handle all settings in embedding settings pages when they're set by environment variables.

Here's the walkthrough of this PR. Given we don't know how Backend is going to be implemented.
https://www.loom.com/share/d235d32c722945a7ad760e854e998bf3

### How to verify

Set each new setting by the environment variable, you can do so by converting the settings name to `MB_SETTING_NAME_IN_CAPITAL_CASE` e.g. `MB_ENABLE_EMBEDDING_STATIC=true`
- enable-embedding (old setting)
- enable-embedding-static
- enable-embedding-sdk
- enable-embedding-interactive
- embedding-app-origin (old setting)
- embedding-app-origins-sdk
- embedding-app-origins-interactive

### Demo
![Screenshot 2024-09-13 at 10 06 14 PM](https://github.com/user-attachments/assets/465053c8-f049-4eb5-b392-b4e80cf5e433)
![image](https://github.com/user-attachments/assets/24225348-71e7-4c57-8edb-b8eee7f56a95)


### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-13 16:50:13+00:00,"['WiNloSt', 'oisincoveney']",2024-10-04 15:53:55+00:00,2024-10-04 15:53:53+00:00,https://github.com/metabase/metabase/pull/47929,"[('.Team/Embedding', '')]","[{'comment_id': 2376604824, 'issue_id': 2525264550, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6f0f5a6001e6a5b23c073b49af3a888bbaa3dce4...e83f1d57229a3e2273ecbac434b2a0c24965409e.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 9, 26, 10, 50, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2387147708, 'issue_id': 2525264550, 'author': 'heypoom', 'body': 'The card looks good\r\n\r\n![CleanShot 2567-10-02 at 04 55 32@2x](https://github.com/user-attachments/assets/d81b95d3-e03d-4399-95e9-485b5fc45c68)\r\n\r\nFor the switch settings inside of the settings page, it says ""Set via environment variable"" without context though, which could be confusing on which setting that refers to.\r\n\r\n![CleanShot 2567-10-02 at 04 55 42@2x](https://github.com/user-attachments/assets/f275f52c-5739-41d7-ae66-f9255325e1b8)', 'created_at': datetime.datetime(2024, 10, 1, 21, 57, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2393509513, 'issue_id': 2525264550, 'author': 'oisincoveney', 'body': ""@WiNloSt feel free to take another look - I'm just cleaning up the tests for the unit tests. I think everything else should be good to go. I'm guessing you can't approve anything since you're the author of the branch but feel free to leave an informal one if you feel like it's good"", 'created_at': datetime.datetime(2024, 10, 4, 11, 40, 49, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-26 10:50:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6f0f5a6001e6a5b23c073b49af3a888bbaa3dce4...e83f1d57229a3e2273ecbac434b2a0c24965409e.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx |

heypoom on (2024-10-01 21:57:04 UTC): The card looks good

![CleanShot 2567-10-02 at 04 55 32@2x](https://github.com/user-attachments/assets/d81b95d3-e03d-4399-95e9-485b5fc45c68)

For the switch settings inside of the settings page, it says ""Set via environment variable"" without context though, which could be confusing on which setting that refers to.

![CleanShot 2567-10-02 at 04 55 42@2x](https://github.com/user-attachments/assets/f275f52c-5739-41d7-ae66-f9255325e1b8)

oisincoveney (Assginee) on (2024-10-04 11:40:49 UTC): @WiNloSt feel free to take another look - I'm just cleaning up the tests for the unit tests. I think everything else should be good to go. I'm guessing you can't approve anything since you're the author of the branch but feel free to leave an informal one if you feel like it's good

"
2525170590,pull_request,closed,,"🤖 backported ""docs: multiline export""",#47925,github-automation-metabase,2024-09-13 16:03:26+00:00,"['alexyarosh', 'github-automation-metabase']",2024-09-13 16:05:08+00:00,2024-09-13 16:05:07+00:00,https://github.com/metabase/metabase/pull/47928,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525161848,pull_request,closed,,"🤖 backported ""docs: progress bar docs""",#47792,github-automation-metabase,2024-09-13 15:58:12+00:00,"['alexyarosh', 'github-automation-metabase']",2024-09-13 15:59:51+00:00,2024-09-13 15:59:50+00:00,https://github.com/metabase/metabase/pull/47927,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525109433,pull_request,closed,,docs: multiline export,"[Slack thread #1](https://metaboat.slack.com/archives/C05MPF0TM3L/p1720836912475329)
[Slack thread #2](https://metaboat.slack.com/archives/C05MPF0TM3L/p1726233917827039)",alexyarosh,2024-09-13 15:28:39+00:00,['alexyarosh'],2024-09-13 16:05:36+00:00,2024-09-13 16:02:37+00:00,https://github.com/metabase/metabase/pull/47925,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2525101865,pull_request,closed,,"🤖 backported ""correctly parse collection id, update path state on handleNewDashboard""",#47318,github-automation-metabase,2024-09-13 15:25:11+00:00,"['iethree', 'github-automation-metabase']",2024-09-13 15:57:33+00:00,2024-09-13 15:57:32+00:00,https://github.com/metabase/metabase/pull/47924,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525051369,pull_request,closed,,"🤖 backported ""Controlled upgrades""","  #47877

✅  conflicts resolved manually",github-automation-metabase,2024-09-13 14:59:25+00:00,"['iethree', 'github-automation-metabase']",2024-09-13 20:21:47+00:00,2024-09-13 20:21:45+00:00,https://github.com/metabase/metabase/pull/47923,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2525014168,pull_request,closed,,Cover scoped search in Entity Picker with e2e tests,"Closes #47294

### Description

Implements the testing plan: #47282
",kamilmielnik,2024-09-13 14:42:41+00:00,['kamilmielnik'],2024-10-02 13:11:39+00:00,2024-10-02 13:11:36+00:00,https://github.com/metabase/metabase/pull/47922,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2388610149, 'issue_id': 2525014168, 'author': 'kamilmielnik', 'body': 'Superseded by #48122', 'created_at': datetime.datetime(2024, 10, 2, 13, 11, 36, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-02 13:11:36 UTC): Superseded by #48122

"
2524924181,pull_request,closed,,"🤖 backported ""fix broken test about resizing column by readonly user""",  #47916,github-automation-metabase,2024-09-13 13:59:25+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-09-18 10:59:45+00:00,2024-09-18 10:59:44+00:00,https://github.com/metabase/metabase/pull/47921,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2524758450,pull_request,closed,,use eye icon for previewing step results,"[Epic](https://github.com/metabase/metabase/issues/47911)

<img width=""1146"" alt=""Screenshot 2024-09-13 at 15 43 35"" src=""https://github.com/user-attachments/assets/47c486a2-ac3c-4c83-9319-4296def98013"">
",uladzimirdev,2024-09-13 12:44:40+00:00,['uladzimirdev'],2024-09-14 07:44:13+00:00,2024-09-14 07:44:11+00:00,https://github.com/metabase/metabase/pull/47920,"[('.Team/Querying', '')]",[],
2524648482,pull_request,closed,,Minimal search using only index,"### Description

Faster prototype search, with stale data and no permissions checks.

There is still in-memory ranking, as that step does some transformations.

A lot of stuff to be cleaned up still, but champing at the bit slightly to see this running in stats 😄 
",crisptrutski,2024-09-13 11:53:07+00:00,['crisptrutski'],2024-10-08 16:14:37+00:00,2024-09-17 23:46:17+00:00,https://github.com/metabase/metabase/pull/47918,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2348984700, 'issue_id': 2524648482, 'author': 'piranha', 'body': 'ehhh tests\r\n\r\n```\r\n consistent results between both hybrid implementations collection\r\nexpected: ()\r\n  actual: (nil nil nil nil nil nil nil nil nil)\r\n```', 'created_at': datetime.datetime(2024, 9, 13, 13, 37, 37, tzinfo=datetime.timezone.utc)}]","piranha on (2024-09-13 13:37:37 UTC): ehhh tests

```
 consistent results between both hybrid implementations collection
expected: ()
  actual: (nil nil nil nil nil nil nil nil nil)
```

"
2524560400,pull_request,closed,,bypass race condition to avoid flakiness in click behaviour test,"add a workaround to bypass race condition that appears on slow networks during saving the dashboard

[✅ stress 30/30](https://github.com/metabase/metabase/actions/runs/10882999620/job/30195182448)",uladzimirdev,2024-09-13 11:05:33+00:00,['uladzimirdev'],2024-10-08 16:14:38+00:00,2024-09-17 12:36:35+00:00,https://github.com/metabase/metabase/pull/47917,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2524486491,pull_request,closed,,fix broken test about resizing column by readonly user,"### Description

Fix for a flaky test 

stress run [✅ 30/30](https://github.com/metabase/metabase/actions/runs/10847675551/job/30103229739)


[failing job](https://github.com/metabase/metabase/actions/runs/10838589676/job/30077431240?pr=47628)

### How to verify

run this spec locally

### Demo

https://github.com/user-attachments/assets/e5d93b0f-2e02-4e00-bdc4-c235df37ef42
",uladzimirdev,2024-09-13 10:25:44+00:00,['uladzimirdev'],2024-09-18 11:00:11+00:00,2024-09-13 13:58:28+00:00,https://github.com/metabase/metabase/pull/47916,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2349026312, 'issue_id': 2524486491, 'author': 'uladzimirdev', 'body': ""✅ [stress test after Nemanja's commit](https://github.com/metabase/metabase/actions/runs/10850412203/job/30111791499)"", 'created_at': datetime.datetime(2024, 9, 13, 13, 56, 3, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-09-13 13:56:03 UTC): ✅ [stress test after Nemanja's commit](https://github.com/metabase/metabase/actions/runs/10850412203/job/30111791499)

"
2524299250,pull_request,closed,,fix a warning about outdated meta tag,"Fix a warning about outdated meta tag

<img width=""1601"" alt=""image"" src=""https://github.com/user-attachments/assets/743ab13f-3b4b-4a58-afba-7e55616ef6f1"">
",uladzimirdev,2024-09-13 09:06:51+00:00,['uladzimirdev'],2024-10-03 14:17:16+00:00,2024-10-03 13:23:12+00:00,https://github.com/metabase/metabase/pull/47915,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2524298148,pull_request,closed,,Rename public-settings to settings after making most settings authenticated,"### Description

Renames `public-settings.clj` to `settings.clj` to reflect the fact that most settings must be `:authenticated` by default unless strictly necessary (i.e. used by the setup flow, login flow, static and interactive embedding) - this is a continuation from https://github.com/metabase/metabase/pull/47901

I wanted to separate public settings to `public-settings.clj` too so we keep private and public settings in separate files, but the diffs are already scary from a renaming, so let's keep it this way for now.

### How to verify

Tests should continue to function as usual.",heypoom,2024-09-13 09:06:22+00:00,['heypoom'],2024-10-02 23:43:43+00:00,2024-10-02 23:43:42+00:00,https://github.com/metabase/metabase/pull/47914,"[('.Team/Embedding', '')]","[{'comment_id': 2348598592, 'issue_id': 2524298148, 'author': 'heypoom', 'body': 'Tests are failing here because of the upstream PR, [see this comment.](https://github.com/metabase/metabase/pull/47901#issuecomment-2348596482)', 'created_at': datetime.datetime(2024, 9, 13, 10, 25, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2389987202, 'issue_id': 2524298148, 'author': 'heypoom', 'body': 'Closing for now due to changing requirements.', 'created_at': datetime.datetime(2024, 10, 2, 23, 43, 42, tzinfo=datetime.timezone.utc)}]","heypoom (Issue Creator) on (2024-09-13 10:25:35 UTC): Tests are failing here because of the upstream PR, [see this comment.](https://github.com/metabase/metabase/pull/47901#issuecomment-2348596482)

heypoom (Issue Creator) on (2024-10-02 23:43:42 UTC): Closing for now due to changing requirements.

"
2524296822,pull_request,closed,,rename Last to Previous in date filters,"[Epic](https://github.com/metabase/metabase/issues/47911)

### Description

Change Last to Previous in filters


https://github.com/user-attachments/assets/28ab9c4a-85d6-4f65-9706-96f47a28f0fb

",uladzimirdev,2024-09-13 09:05:40+00:00,['uladzimirdev'],2025-01-08 07:36:14+00:00,2024-09-13 17:29:26+00:00,https://github.com/metabase/metabase/pull/47913,"[('.Team/Querying', '')]","[{'comment_id': 2574698451, 'issue_id': 2524296822, 'author': 'kamilmielnik', 'body': '@uladzimirdev we should also update the copy in dashboard parameter mapping:\r\n![image](https://github.com/user-attachments/assets/eb0f8982-72e4-4863-b241-598f33d38caa)', 'created_at': datetime.datetime(2025, 1, 7, 8, 43, 36, tzinfo=datetime.timezone.utc)}]","kamilmielnik on (2025-01-07 08:43:36 UTC): @uladzimirdev we should also update the copy in dashboard parameter mapping:
![image](https://github.com/user-attachments/assets/eb0f8982-72e4-4863-b241-598f33d38caa)

"
2524198132,pull_request,closed,,Add scoped search in the Search tab in Entity Picker - no global search,"Alternative to #47839

### Description

This PR uses GET `/api/collection/:id/items` and `/api/database/:id/schemas/:id` endpoints for FE-side scoped search (instead of GET `/api/search` like the original PR).
",kamilmielnik,2024-09-13 08:22:09+00:00,['kamilmielnik'],2024-09-13 13:03:08+00:00,2024-09-13 13:03:06+00:00,https://github.com/metabase/metabase/pull/47912,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2524025042,pull_request,closed,,[Notification] Strict type for channel template and notification recipient,"- Add schema for model/ChannelTemplate, especially for emails templates
  - Email Templates have subtypes and are defined by channel_template.details.type
  - We currently support 2 email templates: a mustache template as string and a mustache template as a resource file
- Add schema for notification_recipient which it could have multiple types user/group/external-email
- Also, reorganizing the code (probably taking 60% of the lines change to this PR). Sorry if it gets messy.

Epic: https://github.com/metabase/metabase/issues/47438",qnkhuat,2024-09-13 06:59:22+00:00,['qnkhuat'],2024-09-30 12:06:48+00:00,2024-09-30 05:21:26+00:00,https://github.com/metabase/metabase/pull/47910,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2361654544, 'issue_id': 2524025042, 'author': 'qnkhuat', 'body': ""The CI errors are flaky and should be fixed by one of Chris's PRs"", 'created_at': datetime.datetime(2024, 9, 19, 16, 57, 49, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-09-19 16:57:49 UTC): The CI errors are flaky and should be fixed by one of Chris's PRs

"
2523986061,pull_request,closed,,"🤖 backported ""[serdes] field name is only unique in combination with parent_id""","  #47808
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-13 06:33:18+00:00,"['piranha', 'github-automation-metabase']",2024-09-13 09:21:05+00:00,2024-09-13 09:21:04+00:00,https://github.com/metabase/metabase/pull/47909,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2523522178,pull_request,closed,,Dashboard Settings Sidebar + Enhance Dashboard Info Sidebar,"

Closes https://github.com/metabase/metabase/issues/47131

### Description

Separates Dashboard Settings into their own sidesheet

![dashboardSettingsSidebar](https://github.com/user-attachments/assets/b9a90d11-6618-4483-95ec-2770e9e7451d)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-12 23:27:04+00:00,['iethree'],2024-09-24 13:16:21+00:00,2024-09-24 13:16:20+00:00,https://github.com/metabase/metabase/pull/47905,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2523397406,pull_request,closed,,Use case expression type inference logic similar to annotate middleware in MLv2,"Closes https://github.com/metabase/metabase/issues/47887
Closes https://github.com/metabase/metabase/issues/48010
Closes https://github.com/metabase/metabase/issues/47888

### Initial description (not actual anymore)

~~The issue is that we infer return type for `case` expression as most specific common ancestor. If the arguments are `:type/Date` and `:type/DateTime` the ancestor is `:type/Temporal`. That results in limited filter picker options.~~

~~This PR adds special case for arguments of aforemementioned types. The `:type/Date` is picked as the expression type.~~

~~The question is however, whether the current behavior is really erroneous. To the best of my knowledge there's no way to decide correct argument type in this case, and picking the `:type/Date` is best effort, that could enable some cases, but may result in error in others.~~

~~Following stack (in reverse) is significant for the context (ie. if you are interested in how I got to this specific change):~~
```
metabase.lib.util/top-level-expression-clause
metabase.lib.schema.expression/type-of :case
metabase.lib.schema.expression.conditional/best-return-type
```

### Description

This PR solves multiple problems.

#### Generic filter picker

We stopped checking for the type `Temporal` when selecting a appropriate filter picker, and switched to `Date` or `DateTime`. The case expression in #47887 is a bit tricky. It returns `DateTime` value when condition is met and `Date` value in default case. The MLv2 expression inference code was returning most specific common ancestor in this case - `Temporal`.

This PR changes the MLv2 case expression inference code to follow the logic in `metabase.query-processor.middleware.annotate/infer-expression-type`.

#### Bigquery error

Bigquery bugs have a different cause. Something changed in a way we compute expressions. In older version that was done in subquery. But in the current version, the expression from reproduction is computed on the same level. The Bigquery logic for appropriate _database type_ inference is now presented with the case expression instead of reference to field from subquery.

This PR adds `metabase.driver.bigquery-cloud-sdk.query-processor/temporal-type` implementation for `:case` expression, that follows same logic laid out in the `annotate/infer-expression-type`.

Long story short, that results in appropriate type reconciliation by means of `metabase.driver.bigquery-cloud-sdk.query-processor/reconcile-temporal-types`.

### Is that a right decision to model inference by `annotate/infer-expression-type`?

Depends on context. Yes in short term. Those 2 bugs are recent regressions and this PR addresses them in relatively non-invasive manner, expanding approach that is taken already in neighboring part of the code base.

In long term, when looking for general right solution to [Type system issues](https://www.notion.so/metabase/Type-system-issues-f95eff50b21642b0b1182ea78616e83b?pvs=4) mentioned by Ranquild, we should keep in mind this case.

Maybe that would entail creating new type hierarchies for different contexts as [noted](https://github.com/metabase/metabase/pull/47902#pullrequestreview-2303233507) by Metamben.",lbrdnk,2024-09-12 21:32:38+00:00,['lbrdnk'],2024-10-18 16:13:54+00:00,2024-10-18 15:41:41+00:00,https://github.com/metabase/metabase/pull/47902,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2407822965, 'issue_id': 2523397406, 'author': 'appleby', 'body': ""> To me, this means that we are saying that all operations that are valid for `:type/Date` are valid for a case expression containing a `:type/DateTime` value. If that's true, then `:type/Date` should be an ancestor of `:type/DateTime`, and this hack is not needed. If that's not true, then this invites trouble.\r\n> \r\n> I have the feeling we are expecting too much from a single type hierarchy.\r\n\r\nI guess this comment was about a previous iteration of this PR, but overall agree. Maybe now it's even more lax since IIUC the temporal type of the case expression now depends on the order of the clauses, so we're saying any temporal type should be equivalent?"", 'created_at': datetime.datetime(2024, 10, 11, 17, 13, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422812135, 'issue_id': 2523397406, 'author': 'lbrdnk', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 18, 16, 12, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422815315, 'issue_id': 2523397406, 'author': 'github-actions[bot]', 'body': '@lbrdnk something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11407202136)', 'created_at': datetime.datetime(2024, 10, 18, 16, 13, 53, tzinfo=datetime.timezone.utc)}]","appleby on (2024-10-11 17:13:24 UTC): I guess this comment was about a previous iteration of this PR, but overall agree. Maybe now it's even more lax since IIUC the temporal type of the case expression now depends on the order of the clauses, so we're saying any temporal type should be equivalent?

lbrdnk (Issue Creator) on (2024-10-18 16:12:02 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-18 16:13:53 UTC): @lbrdnk something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11407202136)

"
2523275865,pull_request,closed,,Allow CORS in properties API and mark settings as authenticated,"Closes https://github.com/metabase/metabase/issues/47884

### Description

Marks settings that does not need to be public (not i.e. settings required by the setup flow, static and interactive embedding, or user login flow via SSO/LDAP) as authenticated to prevent leaking sensitive information, such as the instance version according to Alex's recommendation in [this thread](https://metaboat.slack.com/archives/C97M2U8M6/p1726072284724699?thread_ts=1726050496.687369&cid=C97M2U8M6).

In addition, it modifies the CORS middleware to always allow CORS for `/api/session/properties` to allow querying public settings from the SDK. This helps the [visual cue in SDK](https://github.com/metabase/metabase/pull/47821) project to be able to query information such as the `embedding-sdk` feature token and `enable-embedding-sdk` settings, to be able to display helpful warning and error UI if the user has a misconfiguration, and they haven't configured CORS yet.

It also marks the `embedding` setting to be public, as that is needed for the visual cue feature in the SDK.

This does NOT allow fetching with cookies, as it does not add the `Access-Control-Allow-Credentials` header, so security-wise it is safe. We won't be able to get the authenticated session properties from the SDK.

### How to verify

- Open a page in your browser, such as `youtube.com`
- Call the `/api/session/properties` endpoint. Try this: `fetch(""http://localhost:3000/api/session/properties"").then(x => x.json()).then(console.log)`.
- Open the network tab. There should be the origin CORS header now, and we can fetch the public settings now.

### Checklist

- [ ] Add unit test for the endpoint",heypoom,2024-09-12 20:16:39+00:00,['heypoom'],2024-09-30 12:47:03+00:00,2024-09-30 12:47:03+00:00,https://github.com/metabase/metabase/pull/47901,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2348596482, 'issue_id': 2523275865, 'author': 'heypoom', 'body': 'NOTE: this PR is getting a lot of failing checks, as most of the E2E tests are failing because many more flows seems to rely on the settings being public.\r\n\r\nSome of the failing tests makes sense (and have been fixed), e.g. login page illustration for whitelabelling, since that must be there before authentication. Other failing ones are quite unexpected though, e.g. dashboard actions. Might need more investigation.', 'created_at': datetime.datetime(2024, 9, 13, 10, 24, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2383093160, 'issue_id': 2523275865, 'author': 'heypoom', 'body': ""Closing this PR for the time being because of changing requirements on the SDK's end."", 'created_at': datetime.datetime(2024, 9, 30, 12, 47, 3, tzinfo=datetime.timezone.utc)}]","heypoom (Issue Creator) on (2024-09-13 10:24:25 UTC): NOTE: this PR is getting a lot of failing checks, as most of the E2E tests are failing because many more flows seems to rely on the settings being public.

Some of the failing tests makes sense (and have been fixed), e.g. login page illustration for whitelabelling, since that must be there before authentication. Other failing ones are quite unexpected though, e.g. dashboard actions. Might need more investigation.

heypoom (Issue Creator) on (2024-09-30 12:47:03 UTC): Closing this PR for the time being because of changing requirements on the SDK's end.

"
2523092482,pull_request,closed,,"🤖 backported ""cleanup data reference tooltips""","  #47747


✅  Conflicts resolved manually",github-automation-metabase,2024-09-12 18:39:34+00:00,"['iethree', 'github-automation-metabase']",2024-09-13 22:51:54+00:00,2024-09-13 22:51:52+00:00,https://github.com/metabase/metabase/pull/47898,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2523053031,pull_request,closed,,Add Select all to dashboard parameters,"Epic https://github.com/metabase/metabase/issues/47860
Closes https://github.com/metabase/metabase/issues/47896

Same as https://github.com/metabase/metabase/issues/47861 but for dashboards. 

How to verify:
- New -> Question -> Orders -> Save as Q1
- New -> Dashboard -> Add Q1 -> Filter -> Text or Category -> Connect to Category -> Save
- Click on the filter widget -> Click Select all

<img width=""631"" alt=""Screenshot 2024-09-12 at 15 24 45"" src=""https://github.com/user-attachments/assets/ecc2aa2b-4d92-427c-91b4-65fe30803d19"">

",ranquild,2024-09-12 18:16:03+00:00,['ranquild'],2024-09-13 20:17:06+00:00,2024-09-13 20:17:04+00:00,https://github.com/metabase/metabase/pull/47897,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', ''), ('loki-update', '')]",[],
2522909265,pull_request,closed,,add entity insertion library,"- this lets us use `add-load/from-script`

Insert a single card:

```clojure
(add-load/from-script
   [[:model/Card {:?/model-id :id} {:type :model}]])
;; => {:model-id 653}
```

Insert n cards:

```clojure
;; If we want to keep track of multiple ids:

(defn idx-kw [kw n]
  (keyword (namespace kw) (str (name kw) ""_"" n)))

(defn create-n-models [n]
  (mapv (fn [idx] [:model/Card {(idx-kw :?/model-id idx) :id} {:type :model}])
        (range n)))

(create-n-models 3)
;;=>
;;  [[:model/Card {:?/model-id_0 :id} {:type :model}]
;;   [:model/Card {:?/model-id_1 :id} {:type :model}]
;;   [:model/Card {:?/model-id_2 :id} {:type :model}]]

(add-load/from-script
 (create-n-models 3))
;; => {:model-id_0 663, :model-id_1 664, :model-id_2 665}

```

Insert non-serialized entities:

```clojure
(add-load/from-script
   [[:model/Card {:?/model-id :id} {:type :model}]
    [:model/Card {:?/card-id :id} {}]
    [:model/Field {:?/field-id :id} {}]
    [:model/Table {:?/table-id :id} {}]
    [:model/User {:?/user-id :id} {}]
    [:model/PermissionsGroup {:?/group-id :id} {}]
    [:model/PermissionsGroupMembership {} {:user_id :?/user-id :group_id :?/group-id}]])
;;=> {:model-id 650, :card-id 651, :field-id 896, :table-id 130, :user-id 12, :group-id 9}
```

Those shapes can be compilation targets (like hiccup):
```clojure
(defn- build-load
  ""Creates n instances of every model capable of having an entity_id, minus Dimension as of Aug 2024:""
  [n]
  (vec (reduce concat []
               [;; Needed dependency entities for the load to point to
                [[:model/Card {:?/model-id :id} {:type :model}]
                 [:model/Card {:?/card-id :id} {}]
                 [:model/Field {:?/field-id :id} {}]
                 [:model/Table {:?/table-id :id} {}]]
                (mapv (fn [idx] [:model/Action {(idx-kw :?/action_id idx) :id
                                               (idx-kw :action_eid idx) :entity_id}
                                {:name ""action""
                                 :model_id :?/model-id
                                 :type :http}]) (range n))
                (mapv (fn [idx] [:model/Collection {(idx-kw :?/collection_id idx) :id
                                                   (idx-kw :collection_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/User {(idx-kw :?/core_user_id idx) :id} {}]) (range n))
                ;;(mapv (fn [idx] [:model/Dimension {:?/dimension_id :id, (idx-kw :dimension_eid idx) :entity_id} {:field_id :?/field-id}]) (range n))
                (mapv (fn [idx] [:model/NativeQuerySnippet {(idx-kw :?/native_query_snippet_id idx) :id
                                                           (idx-kw :native_query_snippet_eid idx) :entity_id} {:creator_id (idx-kw :?/core_user_id idx)}]) (range n))
                (mapv (fn [idx] [:model/PermissionsGroup {(idx-kw :?/permissions_group_id idx) :id
                                                         (idx-kw :permissions_group_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/Pulse {(idx-kw :?/pulse_id idx) :id
                                              (idx-kw :pulse_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/PulseCard {(idx-kw :?/pulse_card_id idx) :id
                                                  (idx-kw :pulse_card_eid idx) :entity_id} {:pulse_id (idx-kw :?/pulse_id idx) :card_id :?/card-id}]) (range n))
                (mapv (fn [idx] [:model/PulseChannel {(idx-kw :?/pulse_channel_id idx) :id
                                                     (idx-kw :pulse_channel_eid idx) :entity_id} {:pulse_id (idx-kw :?/pulse_id idx)}]) (range n))
                (mapv (fn [idx] [:model/Card {(idx-kw :?/report_card_id idx) :id
                                             (idx-kw :report_card_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/Dashboard {(idx-kw :?/report_dashboard_id idx) :id
                                                  (idx-kw :report_dashboard_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/DashboardTab {(idx-kw :?/dashboard_tab_id idx) :id
                                                     (idx-kw :dashboard_tab_eid idx) :entity_id} {:dashboard_id (idx-kw :?/report_dashboard_id idx)}]) (range n))
                (mapv (fn [idx] [:model/DashboardCard {(idx-kw :?/report_dashboardcard_id idx) :id
                                                      (idx-kw :report_dashboardcard_eid idx) :entity_id} {:dashboard_id (idx-kw :?/report_dashboard_id idx)}]) (range n))
                (mapv (fn [idx] [:model/Segment {(idx-kw :?/segment_id idx) :id
                                                (idx-kw :segment_eid idx) :entity_id} {}]) (range n))
                (mapv (fn [idx] [:model/Timeline {(idx-kw :?/timeline_id idx) :id
                                                 (idx-kw :timeline_eid idx) :entity_id} {}]) (range n))])))

;; The data it creates:
(assert (= (build-load 1)
           [[:model/Card {:?/model-id :id} {:type :model}]
            [:model/Card {:?/card-id :id} {}]
            [:model/Field {:?/field-id :id} {}]
            [:model/Table {:?/table-id :id} {}]
            [:model/Action {:?/action_id_0 :id, :action_eid_0 :entity_id} {:name ""action"", :model_id :?/model-id, :type :http}]
            [:model/Collection {:?/collection_id_0 :id, :collection_eid_0 :entity_id} {}]
            [:model/User {:?/core_user_id_0 :id} {}]
            [:model/NativeQuerySnippet {:?/native_query_snippet_id_0 :id, :native_query_snippet_eid_0 :entity_id} {:creator_id :?/core_user_id_0}]
            [:model/PermissionsGroup {:?/permissions_group_id_0 :id, :permissions_group_eid_0 :entity_id} {}]
            [:model/Pulse {:?/pulse_id_0 :id, :pulse_eid_0 :entity_id} {}]
            [:model/PulseCard {:?/pulse_card_id_0 :id, :pulse_card_eid_0 :entity_id} {:pulse_id :?/pulse_id_0, :card_id :?/card-id}]
            [:model/PulseChannel {:?/pulse_channel_id_0 :id, :pulse_channel_eid_0 :entity_id} {:pulse_id :?/pulse_id_0}]
            [:model/Card {:?/report_card_id_0 :id, :report_card_eid_0 :entity_id} {}]
            [:model/Dashboard {:?/report_dashboard_id_0 :id, :report_dashboard_eid_0 :entity_id} {}]
            [:model/DashboardTab {:?/dashboard_tab_id_0 :id, :dashboard_tab_eid_0 :entity_id} {:dashboard_id :?/report_dashboard_id_0}]
            [:model/DashboardCard {:?/report_dashboardcard_id_0 :id, :report_dashboardcard_eid_0 :entity_id} {:dashboard_id :?/report_dashboard_id_0}]
            [:model/Segment {:?/segment_id_0 :id, :segment_eid_0 :entity_id} {}]
            [:model/Timeline {:?/timeline_id_0 :id, :timeline_eid_0 :entity_id} {}]]))
```

Then this can be used like so:

```clojure
;; 5 minutes to load 29000 entites:
  (def items (add-load/from-script (build-load 1000)))
```

And items will be a map from every tracked id -> the id for that entity",escherize,2024-09-12 16:57:09+00:00,['escherize'],2025-01-27 22:12:15+00:00,2025-01-09 15:48:19+00:00,https://github.com/metabase/metabase/pull/47895,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2578691738, 'issue_id': 2522909265, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/118583_tests-1e06aa7a-purple)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>e2e-storage-ingestion-test</code> | Expected a specific entity, but got nil instead. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE&runId=696123c7-1557-596f-8415-5592e595ed76) |\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2025, 1, 8, 21, 21, 12, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2025-01-08 21:21:12 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/118583_tests-1e06aa7a-purple)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>e2e-storage-ingestion-test</code> | Expected a specific entity, but got nil instead. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment&runConclusion=FAILURE&runId=696123c7-1557-596f-8415-5592e595ed76) |
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47895?repo=metabase/metabase&commitHash=1e06aa7a64b1b20defc61b0bd34268b22afc8743&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

"
2522856301,pull_request,closed,,backport of update prettier so we can use `satisfies`,"manual backport of https://github.com/metabase/metabase/pull/47858

Created by running
- `yarn add prettier@^3.3.3`
- `yarn prettier` (which runs prettier on our codebase)",npretto,2024-09-12 16:29:49+00:00,['npretto'],2024-09-12 17:03:45+00:00,2024-09-12 17:03:14+00:00,https://github.com/metabase/metabase/pull/47894,"[('.Team/Embedding', ''), ('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2346755913, 'issue_id': 2522856301, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a3a1046dcc6b992dd34b8586a8f76b437a8332cb...bacbca8aa9b25c8b8df2b117303f0680a64694c8.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/ChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChoroplethMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/table_format.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/shared/utils/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/FontWidget/FontWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx |', 'created_at': datetime.datetime(2024, 9, 12, 16, 31, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-12 16:31:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a3a1046dcc6b992dd34b8586a8f76b437a8332cb...bacbca8aa9b25c8b8df2b117303f0680a64694c8.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/ChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChoroplethMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/table_format.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/shared/utils/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/FontWidget/FontWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx |

"
2522648390,pull_request,closed,,Dashboard Info Sidebar,"

Closes https://github.com/metabase/metabase/issues/47130
simplification of https://github.com/metabase/metabase/pull/47672

### Description

![dashboardinfo](https://github.com/user-attachments/assets/8be9df52-beaa-4f69-85e1-ffc09858741e)


### Checklist
TODO: unit tests
- [ ] Tests have been added/updated to cover changes in this PR
",iethree,2024-09-12 14:57:23+00:00,['iethree'],2024-09-13 17:11:07+00:00,2024-09-13 17:11:06+00:00,https://github.com/metabase/metabase/pull/47893,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2522558819,pull_request,closed,,Basic batching for search index population,"### Describe 

One quick trick to hopefully speed up / reduce the cost of populating the search index in staging.

This also removes the `indexed-entity` index, for two reasons:

1. They dominate the index, making up 70% of the rows.
2. They already *are* an index, we should optimize that index itself maybe.",crisptrutski,2024-09-12 14:25:56+00:00,['crisptrutski'],2024-10-08 16:14:50+00:00,2024-09-12 15:49:21+00:00,https://github.com/metabase/metabase/pull/47892,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2522505599,pull_request,closed,,Update embedding admin settings copy,"> [!note]
> Please refer to this [comment](https://github.com/metabase/metabase/pull/47891#discussion_r1758709000), on how to review the tests. tl;dr I suggest comparing tests in your tools of choice, I used VS code.
>
> And try to review the code first before moving on to tests to get the whole picture.

Closes https://github.com/metabase/metabase/issues/47767

### Description

Update copy according to the [new design (Figma)](https://www.figma.com/design/W1TfzdrR8ldzp4vdjP1z36/SDK-Embedding%3A-admin-settings-%2B-embed-flow?node-id=10563-15285&node-type=section&t=DuKuGp7fWFyJxyIR-0).

### How to verify

Compare all embedding admin settings to the design.

Tryout 3 scenarios
1. OSS
2. Starter (hosted without token) it should look everything like OSS except the API key banner that doesn't have link about migrating Metabase binaries
3. Pro/EE self-hosted
4. Pro/EE cloud: It should look almost like pro self hosted but with version pinning CTA

### Demo
https://github.com/metabase/metabase/issues/47767#issue-2514012670

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-12 14:05:17+00:00,"['WiNloSt', 'oisincoveney']",2024-09-30 10:58:47+00:00,2024-09-26 10:16:17+00:00,https://github.com/metabase/metabase/pull/47891,"[('.Team/Embedding', '')]","[{'comment_id': 2367961485, 'issue_id': 2522505599, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e51c5799ed1cb6bb11808047a75ffc06dd359653...48c03dbea9b1f44f3bc190fdf2adc5f1fdd8e616.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts |', 'created_at': datetime.datetime(2024, 9, 23, 11, 41, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2367986934, 'issue_id': 2522505599, 'author': 'oisincoveney', 'body': ""@npretto I've requested your review since you reviewed last time - here's what's changed:\r\n- I've split out the different option components into different files/folders so it's not all in one huge file\r\n- I've removed the .module.css and .styled files to settle that discussion about the CSS hack 😄 \r\n- I've converted components using CSS and emotion to Mantine components\r\n\r\nIt looks like there's a bunch of new files but quite a few are barrels - I think the diff should be about the same"", 'created_at': datetime.datetime(2024, 9, 23, 11, 51, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2368722432, 'issue_id': 2522505599, 'author': 'npretto', 'body': ""CI is red and I've seen some errors in the terminal when running the unit tests locally which I think will show up in the main app too so I'd fix them before merging\r\n![image](https://github.com/user-attachments/assets/510b574d-f285-46da-8348-4317f06c8ab6)\r\n\r\nCode looks good, but I see we're adding a new component to metabase/ui which we probably have to do on a separate PR (and discuss it with team admin web app + designers)"", 'created_at': datetime.datetime(2024, 9, 23, 15, 59, 49, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-23 11:41:09 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e51c5799ed1cb6bb11808047a75ffc06dd359653...48c03dbea9b1f44f3bc190fdf2adc5f1fdd8e616.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/Badge.ts |

oisincoveney (Assginee) on (2024-09-23 11:51:15 UTC): @npretto I've requested your review since you reviewed last time - here's what's changed:
- I've split out the different option components into different files/folders so it's not all in one huge file
- I've removed the .module.css and .styled files to settle that discussion about the CSS hack 😄 
- I've converted components using CSS and emotion to Mantine components

It looks like there's a bunch of new files but quite a few are barrels - I think the diff should be about the same

npretto on (2024-09-23 15:59:49 UTC): CI is red and I've seen some errors in the terminal when running the unit tests locally which I think will show up in the main app too so I'd fix them before merging
![image](https://github.com/user-attachments/assets/510b574d-f285-46da-8348-4317f06c8ab6)

Code looks good, but I see we're adding a new component to metabase/ui which we probably have to do on a separate PR (and discuss it with team admin web app + designers)

"
2522356441,pull_request,closed,,Fix empty header in BooleanFilterPicker,"Slack https://metaboat.slack.com/archives/C02H619CJ8K/p1726085413877219

Usually there is a filter operator picker in the filter picker header, but not for booleans. If there is no back button, it results in an empty header. In this PR we remove the header if it is empty.

<img width=""569"" alt=""Screenshot 2024-09-12 at 09 06 22"" src=""https://github.com/user-attachments/assets/c615326e-097b-40f1-97aa-d7bea0550077"">
<img width=""469"" alt=""Screenshot 2024-09-12 at 09 06 30"" src=""https://github.com/user-attachments/assets/56cae973-e186-46e4-897f-686cc485d567"">
<img width=""341"" alt=""Screenshot 2024-09-12 at 09 06 41"" src=""https://github.com/user-attachments/assets/ecc2b059-3e7d-4b76-88aa-d0d9bcb5e747"">
<img width=""335"" alt=""Screenshot 2024-09-12 at 09 06 45"" src=""https://github.com/user-attachments/assets/d2118268-b28f-45d1-8adb-c2013e27b1f8"">
",ranquild,2024-09-12 13:09:24+00:00,['ranquild'],2024-10-08 16:14:52+00:00,2024-09-12 14:55:19+00:00,https://github.com/metabase/metabase/pull/47889,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2521839457,pull_request,closed,,Verified metrics,"
Closes https://github.com/metabase/metabase/issues/47803

### Description

Adds support for verified metrics to the browse metrics page in Enterprise Metabase.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Run Metabase EE and make sure you have a token set up with the `content_verification` feature
2. Make sure you have two metrics
3. Navigate to `/browse/metrics` by clicking `Metrics` in the sidenav
4. Navigate to one of the metrics
5. On the metric page click the ""..."" menu and click ""Verify this metric""
6. Navigate back to `/browse/metrics` by clicking `Metrics` in the sidenav
7. A filter option should now be availble in the top right, play around with selecting and unselecting it to makes sure it works by filtering the metrics
8. Unverify the verified metric and make sure the filter on `/browse/metrics` is gone again

### Demo

https://github.com/user-attachments/assets/98f8bf4e-505f-4412-8213-a768ca62881a
",romeovs,2024-09-12 09:21:22+00:00,['romeovs'],2024-09-24 16:44:32+00:00,2024-09-24 16:44:31+00:00,https://github.com/metabase/metabase/pull/47886,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2348590770, 'issue_id': 2521839457, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 13, 10, 21, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2348593557, 'issue_id': 2521839457, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 5639635553d2ed54a4e2409df0da03c405ffe23e...bdcf4be00874c546e5c150034285ca463849f86c.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 9, 13, 10, 22, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2348934722, 'issue_id': 2521839457, 'author': 'romeovs', 'body': ""@ranquild I've simplified the plugin a little bit and added an content moderation to `metabase/api`."", 'created_at': datetime.datetime(2024, 9, 13, 13, 13, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2370547171, 'issue_id': 2521839457, 'author': 'romeovs', 'body': ""> @ranquild  everything is great, but (!) the user setting is not saved now, ever. I think you could update it in `MetricFilterControls` when the value changes. Please fix this + add a e2e test for this case.\r\n\r\nI've added e2e tests for this and fixed the bug!"", 'created_at': datetime.datetime(2024, 9, 24, 8, 0, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2371560180, 'issue_id': 2521839457, 'author': 'ranquild', 'body': '@rafpaf could you take another look?', 'created_at': datetime.datetime(2024, 9, 24, 14, 59, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-13 10:21:35 UTC): <!---conventional commit reminder comment ID-->
@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-13 10:22:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 5639635553d2ed54a4e2409df0da03c405ffe23e...bdcf4be00874c546e5c150034285ca463849f86c.

No notifications.

romeovs (Issue Creator) on (2024-09-13 13:13:06 UTC): @ranquild I've simplified the plugin a little bit and added an content moderation to `metabase/api`.

romeovs (Issue Creator) on (2024-09-24 08:00:40 UTC): I've added e2e tests for this and fixed the bug!

ranquild on (2024-09-24 14:59:30 UTC): @rafpaf could you take another look?

"
2521672083,pull_request,closed,,fix(sdk): remove the unknown premium feature console warnings,"Closes https://github.com/metabase/metabase/issues/47656

### Description

Removes the ""unknown premium feature"" warning that spams the SDK's console logs by removing EE plugins and overrides. See [this comment](https://github.com/metabase/metabase/pull/47885#pullrequestreview-2299641382).

![image](https://github.com/user-attachments/assets/d4053b63-6012-4d67-b3e4-78812e3d34a7)

### How to verify

- Use the SDK
- There should no longer be console warnings",heypoom,2024-09-12 08:11:28+00:00,['heypoom'],2024-09-12 17:39:32+00:00,2024-09-12 17:39:30+00:00,https://github.com/metabase/metabase/pull/47885,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2345650300, 'issue_id': 2521672083, 'author': 'WiNloSt', 'body': 'Does feature flags in the SDK actually work? Does this change fix an instance where we call `hasPremiumFeature` before the token is loaded in the SDK?', 'created_at': datetime.datetime(2024, 9, 12, 8, 44, 28, tzinfo=datetime.timezone.utc)}]","WiNloSt on (2024-09-12 08:44:28 UTC): Does feature flags in the SDK actually work? Does this change fix an instance where we call `hasPremiumFeature` before the token is loaded in the SDK?

"
2521649062,pull_request,closed,,Respect `embedding` feature flag for interactive toggle,"Closes https://github.com/metabase/metabase/issues/47881

### Description

Respects `embedding` flag, so `enable-embedding-interactive` can only be toggled when this flag is present

### How to verify

Run MB in OSS, and EE and see that the interactive embedding toggle should be disabled on OSS. Please note that you can't test or rather don't need to test the toggle inside the interactive settings page, because that settings page is already only allow access for EE users.

### Demo

![image](https://github.com/user-attachments/assets/68ad268c-5623-4cce-8135-4afbaec03525)



### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-12 08:00:32+00:00,['WiNloSt'],2024-09-12 13:28:11+00:00,2024-09-12 13:28:10+00:00,https://github.com/metabase/metabase/pull/47883,"[('.Team/Embedding', '')]",[],
2521078454,pull_request,closed,,configurable pivot exports and attachments,"[Product doc](https://www.notion.so/metabase/Offer-reliable-pivoted-CSV-and-XLSX-exports-49e55b2d4cba41d3b2b2bbff2443975c?pvs=4)

### Description

- Improves exports popover UI and adds the ability to export pivoted results.
- Reuses the same UI for subscriptions attachments configuration

Updates the UI of the exports popover and adds a new settings whether to apply pivoting to export results.

### Demo

#### Question with a large number of rows
<img width=""337"" alt=""Screenshot 2024-09-12 at 10 52 23 PM"" src=""https://github.com/user-attachments/assets/61f56dda-f768-4b2a-8156-c4dc37e966ee"">

#### Dashcard pivot table exports 
<img width=""1066"" alt=""Screenshot 2024-09-12 at 10 52 01 PM"" src=""https://github.com/user-attachments/assets/4e757fb6-43be-4786-8949-fffea02f587c"">

#### Dashboard subscriptions
<img width=""393"" alt=""Screenshot 2024-09-12 at 10 51 41 PM"" src=""https://github.com/user-attachments/assets/24385298-ea4a-4366-8297-685172306620"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-09-12 00:48:27+00:00,['alxnddr'],2024-09-28 04:12:07+00:00,2024-09-25 23:35:33+00:00,https://github.com/metabase/metabase/pull/47880,"[('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2345041117, 'issue_id': 2521078454, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8b072b4e882bfb062ee97ad4d817efac6e7d8659...8e13de868bbc22b37cb56ecd66a4965dfd7b6897.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx |\n| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 9, 12, 0, 49, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-12 00:49:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8b072b4e882bfb062ee97ad4d817efac6e7d8659...8e13de868bbc22b37cb56ecd66a4965dfd7b6897.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx |
| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |

"
2520961206,pull_request,closed,,Fix pie rows settings include filtered out values,"Closes https://github.com/metabase/metabase/issues/47867

### Description

After editing pie rows settings, if dataset returned fewer rows we still showed previously existing rows in the settings sidebar. This PR filters them out.

### How to verify

- Create a Pie chart, reorder rows
- Apply filter or row limit to remove some rows from the dataset
- Ensure the settings sidebar shows rows that only exist in the dataset

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-09-11 23:16:55+00:00,['alxnddr'],2024-09-13 14:32:52+00:00,2024-09-13 14:32:51+00:00,https://github.com/metabase/metabase/pull/47879,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2347313537, 'issue_id': 2520961206, 'author': 'alxnddr', 'body': '@EmmadUsmani thanks, I fixed that', 'created_at': datetime.datetime(2024, 9, 12, 21, 54, 59, tzinfo=datetime.timezone.utc)}]","alxnddr (Issue Creator) on (2024-09-12 21:54:59 UTC): @EmmadUsmani thanks, I fixed that

"
2520917331,pull_request,closed,,Controlled upgrades,"Let's add a `rollout` number 0-100 on `latest`


Version information has two keys:

```clojure
{:latest {:version ""v1.50.25"",
          :released ""2024-09-10"",
          :patch true,
          :highlights [,,,]},
 :older [{:version ""v1.50.24"",
          :released ""2024-09-03"",
          :patch true,
          :highlights [,,,]}]}
```

The proposal here is that we add a `rollout` to the `latest` map, and then we only show the `latest` to the frontend (and therefore the upgrade) if some number of the local instance is lower than the rollout number.

```clojure
{:latest {:version ""v1.50.25"",
          :released ""2024-09-10"",
          :rollout 50 ;; number between 0 - 100 <--------- new
          :patch true,
          :highlights [,,,]},
 :older [{:version ""v1.50.24"",
          :released ""2024-09-03"",
          :patch true,
          :highlights [,,,]}]}
```

<img width=""1247"" alt=""image"" src=""https://github.com/user-attachments/assets/7c0e18c3-b609-4b80-a95b-14445b58b167"">


This derives the rollout threshold of the instance from the `site-uuid` which is constant for all instances in a cluster.

```clojure
(defsetting upgrade-threshold
  (deferred-tru ""Threshold (value in 0-100) indicating at which treshold it should offer an upgrade to the latest major version."")
  :visibility :internal
  :export?    false
  :type       :integer
  :setter     :none
  :getter     (fn []
                (-> (site-uuid) hash (mod 100))))
```

(and of course overridable with `MB_UPGRADE_THRESHOLD=90 java -jar ...` if they want to be in a higher cohort)

This lets us uniformly distribute self-hosted instances into buckets of 0-100. And as we increase the `rollout` number of the version-info json file, more instances will show the upgrade information in the application.


```shell
❯ http get ""http://localhost:3000/api/setting/version-info"" x-api-key:$API_KEY | jq 'keys'
[
  ""older""
]

## vs when it should show
❯ http get ""http://localhost:3000/api/setting/version-info"" x-api-key:$API_KEY | jq 'keys'
[
  ""latest"",
  ""older""
]
```

This really only matters across major upgrades. We always show upgrades of minor upgrades in the same major.
Ex: `0.49.5` will always show a banner for a latest of `0.49.6`
Of course `0.49.5` will compare rollout thresholds on whether to show an update to the latest of `0.50.2`
Also, `0.49.5` will compare rollout thresholds on whether to show an update to the latest of `0.51.2` (*2* majors). We can make this show the latest 50 in the future if we want. (and the same scenario for more exaggerated version jumps, 49 -> 83 ,etc).

See [this explanation](https://www.notion.so/metabase/Checking-A-feature-in-multiple-instances-0064e6a643624b1d91cb94a5221df6da) in notion of how it worked running it 200 times.

Started a jar up 200 times, fetching versions that included a 25% rollout threshold and had the following results:
<img width=""738"" alt=""image"" src=""https://github.com/user-attachments/assets/c616ed13-ec6b-4974-9aba-99c361b50994"">

```
site-uuid, threshold, upgrade-available, latest-version
35095708-ad3f-42b2-8e26-65b475ec5cd7, 2, true, 1.51.1
a247324a-82c1-41e1-9f91-7016a66e9014, 87, false, 
8072a554-3ded-4a4f-83ec-0d363e7f0deb, 23, true, 1.51.1
b40db850-028e-4d17-8806-0d27758395f6, 67, false, 
a466def7-fa50-4cf7-a2ee-8b31b422749a, 20, true, 1.51.1
5effa39b-9065-49ca-b686-f17eaecf4198, 85, false, 
4158efe4-3703-4372-b94a-9458f975fa7c, 55, false, 
```",dpsutton,2024-09-11 22:43:01+00:00,"['dpsutton', 'iethree']",2024-09-13 20:22:13+00:00,2024-09-13 14:58:35+00:00,https://github.com/metabase/metabase/pull/47877,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2520910556,pull_request,closed,,Fix ordering by the accumulated column,"Closes #47613 

### Description

If we sort by an aggregation expression, then include that expression in the `OVER` clause before any other columns.

### How to verify

See #47613 and the new `cumulative-sum-ordered-by-aggregation-expression-test` reproducing the query from the issue.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-09-11 22:36:56+00:00,['metamben'],2024-09-13 23:15:13+00:00,2024-09-13 23:15:11+00:00,https://github.com/metabase/metabase/pull/47875,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2520846534,pull_request,closed,,fix: snowflake compile day trunc to timestamp_ltz,"Fixes #47426

Date operations return values based on the timestamp offset rather than the session/db timezone. Converting to `timestamp_ltz` first ensures that we get predictable results.

In the test, it is important that database timezone matches report_timezone so that post-processing gives proper results.
",snoe,2024-09-11 21:48:52+00:00,['snoe'],2024-09-16 22:03:51+00:00,2024-09-16 22:03:49+00:00,https://github.com/metabase/metabase/pull/47874,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]",[],
2520753154,pull_request,closed,,docs - metrics v2,"Preliminary docs for metrics v2.

- Does this cover all the major stuff for metrics?
- Any tips re: metrics we should include? Or gotchas to avoid?
- Any other differences between metrics v1 and v2 we should call out?",jeff-bruemmer,2024-09-11 20:56:24+00:00,['jeff-bruemmer'],2024-10-08 16:13:23+00:00,2024-10-07 18:54:32+00:00,https://github.com/metabase/metabase/pull/47872,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2520693431,pull_request,closed,,(wip) Port the dashboard 'More' menu to Mantine,"This PR introduces a Mantine `Menu` component to power the ""More"" menu in the dashboard header.",rafpaf,2024-09-11 20:25:02+00:00,['rafpaf'],2025-02-04 17:34:17+00:00,2025-02-04 01:31:18+00:00,https://github.com/metabase/metabase/pull/47871,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2344636079, 'issue_id': 2520693431, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47871?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#47871** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47871?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#47256** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47256?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47672** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47672?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47100** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47100?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 11, 20, 25, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449719, 'issue_id': 2520693431, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557505, 'issue_id': 2520693431, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 18, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-09-11 20:25:10 UTC): * **#47871** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47871?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#47256** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47256?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47672** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47672?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47100** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47100?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2025-01-21 01:31:04 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:18 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2520614662,pull_request,closed,,"Separate Releasing from ""Latest"" release determination","Closes https://github.com/metabase/metabase/issues/47786

### Description

In a number of cases, we might not want the most recently released version be the official ""latest"" version. This change makes ""latest"" a fully manual determination.  (It also supports manually determining any number of other release channels: currently ""latest"", ""beta"" and ""nightly"" are included)

1. Removes the code that determines ""latest"" based on fixed logic.
2. Removes the code from the release process that uploads to the s3 `latest/` director, tags docker images with the `:latest` tag, and sets the ""latest"" property in version-info.json
3. Adds a new `release-tag` workflow that allows any version to be manually set as the ""nightly"", ""beta"", or ""latest"" by (a) uploading to that directory in s3, (2) setting that tag in dockerhub,(3) adding git tags for release channels, (4) for latest: setting the latest property in version-info.json. This workflow supports different channel designations for EE and OSS.
4. When the release-tag workflow sets a ""latest"" version, it adds a `rollout` property to the `latest` property in version-info.json that we can use in metabase instances to control what percentage of instances are notified of that upgrade.

![Screen Shot 2024-09-11 at 3 29 33 PM](https://github.com/user-attachments/assets/96dcd777-8923-4b55-af87-287d426ce6da)

![Screen Shot 2024-09-11 at 1 29 24 PM](https://github.com/user-attachments/assets/498659e9-a3ae-4809-b09a-9ca71143339f)


5. Adds some updates to the release log workflow to show the channel tags in the release log, and adds a separate summary page which shows what versions are tagged with which release channels.

![Screen Shot 2024-09-11 at 1 37 03 PM](https://github.com/user-attachments/assets/3e673c66-5da0-4224-be66-9f0bef1ad368)
![Screen Shot 2024-09-11 at 1 36 52 PM](https://github.com/user-attachments/assets/6a338028-8701-42d2-b646-2d432e1062fb)

Note: this makes no in-product changes at all, and customer update notifications should only be affected insofar as this could change the timing of when a new ""latest"" version is show in the UI.

[Sample run in my fork
](https://github.com/iethree/metabase/actions/runs/10817852621)


To do after this merges:
- [ ] link this new action in ops issues
- [ ] automate `nightly` tag for auto patch releases
",iethree,2024-09-11 19:37:47+00:00,['iethree'],2024-09-24 17:14:02+00:00,2024-09-24 17:14:00+00:00,https://github.com/metabase/metabase/pull/47868,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2520579483,pull_request,closed,,Revert to non-truncating mbql.u/unique-name-generator in annotate-native-cols,"Related to (backport will close) #47584 

### Description

Context from slack: https://metaboat.slack.com/archives/C0645JP1W81/p1725899230235759

To summarize, when converting a native sql question with this query

```sql
SELECT
  count(*) AS coun,
  state AS Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count
FROM people
GROUP BY
  Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count
```

to a model, we get the following error

```
Column ""source.TOTAL_NUMBER_OF_PEOPLE_FROM_EACH_STATE_SEPARATED_BY_165e2c32"" not found; SQL statement:
SELECT
  ""source"".""COUN"" AS ""COUN"",
  ""source"".""TOTAL_NUMBER_OF_PEOPLE_FROM_EACH_STATE_SEPARATED_BY_165e2c32""
    AS ""TOTAL_NUMBER_OF_PEOPLE_FROM_EACH_STATE_SEPARATED_BY_165e2c32""
FROM (
  select 
    count(*) as coun, 
    state as Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count 
  from people
  group by 
    Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count
) AS ""source"" LIMIT 2000 [42122-214]
```

Note that this error does not occur in master due to the new `driver/query-result-metadata :sql-jdbc` method which does not truncate the aliases, but I assume it still makes sense to land the fix (and tests) in master first and backport it to v50, but can retarget this to the release branch if not.

After the changes in this PR, we instead generate the following SQL, which does not produce the error:

```sql
SELECT
  ""source"".""COUN"" AS ""COUN"",
  ""source"".""TOTAL_NUMBER_OF_PEOPLE_FROM_EACH_STATE_SEPARATED_BY_STATE_AND_THEN_WE_DO_A_COUNT"" AS ""TOTAL_NUMBER_OF_PEOPLE_FROM_EACH_STATE_SEPARATED_BY_165e2c32""
FROM
  (
    SELECT
      count(*) AS coun,
      state AS Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count
    FROM
      people
    GROUP BY 
      Total_number_of_people_from_each_state_separated_by_state_and_then_we_do_a_count
  ) AS ""source""
```

### How to verify

Use repro steps from #47584 or see included tests.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-09-11 19:18:54+00:00,['appleby'],2024-09-13 22:10:05+00:00,2024-09-13 18:58:05+00:00,https://github.com/metabase/metabase/pull/47866,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2520445066,pull_request,closed,,Add Select all in ListValuePicker in the QB,"Epic https://github.com/metabase/metabase/issues/47860
Closes https://github.com/metabase/metabase/issues/47861
Slack discussion https://metaboat.slack.com/archives/C0645JP1W81/p1726078869890019

How to verify:
- New -> Question -> Orders
- Filter -> Product -> Category
- There should be new `Select all` option which changes to `Select none` if all items are selected

<img width=""483"" alt=""Screenshot 2024-09-11 at 15 29 22"" src=""https://github.com/user-attachments/assets/7c5011de-5c75-4463-84ce-04c3bdeda9f5"">
<img width=""480"" alt=""Screenshot 2024-09-11 at 15 29 33"" src=""https://github.com/user-attachments/assets/24813d29-cc74-41f6-b6ca-aeb002d2ecac"">
<img width=""476"" alt=""Screenshot 2024-09-11 at 15 29 37"" src=""https://github.com/user-attachments/assets/1d3b71bb-6d87-4b1b-be8b-0c7c548102c4"">

",ranquild,2024-09-11 18:25:01+00:00,['ranquild'],2024-09-13 03:38:27+00:00,2024-09-12 18:37:19+00:00,https://github.com/metabase/metabase/pull/47865,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2520422972,pull_request,closed,,Fix overflow in FilterPicker,"Epic https://github.com/metabase/metabase/issues/47860
Reimplements https://github.com/metabase/metabase/pull/40075

Currently the max-height of the filter widget is hardcoded. This PR changes that and allows the list of values expand to the maximum popover size.

How to verify:
- New -> Question -> Orders
- Filter -> Product -> Category -> There is no scroll; normal size
- Filter -> User -> State -> There is scroll; the list of values occupies all available space
- Filter -> Orders -> Quantity -> Change the operator to ""Equal to""

<img width=""625"" alt=""Screenshot 2024-09-11 at 14 10 10"" src=""https://github.com/user-attachments/assets/ded17bd3-0055-4a9d-a687-d1e0b0991808"">
<img width=""625"" alt=""Screenshot 2024-09-11 at 14 10 26"" src=""https://github.com/user-attachments/assets/06fc5936-eb6e-4ec5-9bb1-379f2f6700c1"">
",ranquild,2024-09-11 18:12:43+00:00,['ranquild'],2025-02-04 14:52:01+00:00,2024-09-12 16:35:48+00:00,https://github.com/metabase/metabase/pull/47864,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2520253435,pull_request,closed,,fix: Don't show error page when command palette documentation link is clicked,"Closes #47829

### Description

The bug: when you click or press enter on a command palette documentation link, the documentation opens in another tab, but the page where the command palette was displayed changes to an error page. In this branch, we fix this problem by preventDefault'ing the link's normal behavior.

### How to verify

Search for ""asdf"" in the command palette. You'll see a documentation link below the results. (""asdf"" ensures that there are no results, which is convenient.) Try the following:

* Click the link
* Press enter while the link is selected
* Right click and open in new tab
* Middle click to open a new tab (if this works in your environment)

[Loom](https://www.loom.com/share/de524315c8e54751aaf494bbf05fd87a?sid=de1af7c8-4bf0-4d87-b5dc-20357eab5b3e) - this shows that left clicking and middle clicking on documentation and view-results links works, whether Metabase is hosted normally or on a subpath. Pressing enter also works, but I forgot to include that in the video.",rafpaf,2024-09-11 16:54:23+00:00,['rafpaf'],2024-10-01 13:51:58+00:00,2024-10-01 13:41:59+00:00,https://github.com/metabase/metabase/pull/47862,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2344186950, 'issue_id': 2520253435, 'author': 'rafpaf', 'body': '* **#47862** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47862?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 11, 16, 54, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2375476773, 'issue_id': 2520253435, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (09/26/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 9, 26, 0, 5, 10, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-09-11 16:54:42 UTC): * **#47862** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47862?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-09-26 00:05:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (09/26/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

"
2520131053,pull_request,closed,,[Notification] Render system event emails,"5th bullet point of https://github.com/metabase/metabase/issues/47438

The goal of this PR is to get a basic flow working from e2e. See the `metabase.notification.system-event-test/system-event-e2e-test` test.

Other changes included:
- simple parameter substitution with syntax `{{paramName}}`, this is used for email subject template
- channel/render-notification now take an additional argument: template
- reorganize notification test helpers into one single namespace: `metabase.notification.test-util`


It's somewhat half-baked in some areas, which I'll improve in the following PRs:
- schema for `channel_template.details` and a way to identify different template types of for the same channel. For example, for the email, I can see we have 2 template types: one in which the mustache is stored in `channel_template.details`, one with the template stored in resource/, and we store the link reference in `channel_template.details`
- schema for `recipient.details` and support for dynamic recipient value
- event info hydration (see the tech doc for more info)",qnkhuat,2024-09-11 15:55:35+00:00,['qnkhuat'],2024-09-18 10:13:56+00:00,2024-09-18 10:13:53+00:00,https://github.com/metabase/metabase/pull/47859,"[('.Team/Workflows', 'aka BEC')]",[],
2520110519,pull_request,closed,,update prettier so we can use `satisfies`,"### Description
<img width=""1075"" alt=""image"" src=""https://github.com/user-attachments/assets/5ab00564-708c-437d-81d1-3f6f4d203ee1"">

We currently can't use the typescript `satisfies` keyword because we have an old version of prettier that will make it fail on the pre-commit.

It seems like the new version formats things a bit differently though, so I ran it with `yarn prettier --write '(frontend|enterprise/frontend)/**/*.{js,jsx,ts,tsx}'` 

All the changes are purely formatting so conflicts shouldn't be an issue



Edit: manual backport for v50: https://github.com/metabase/metabase/pull/47894",npretto,2024-09-11 15:46:07+00:00,['npretto'],2024-10-08 16:14:49+00:00,2024-09-12 16:22:06+00:00,https://github.com/metabase/metabase/pull/47858,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2344036497, 'issue_id': 2520110519, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 11, 15, 46, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2344039089, 'issue_id': 2520110519, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0064a6aac75cad26a1562b242fff0c4177219e29...520c4bdd42d664c1568bc16bf11dccaad3c8fb40.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/ChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChoroplethMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/table_format.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/shared/utils/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/FontWidget/FontWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/types.ts |', 'created_at': datetime.datetime(2024, 9, 11, 15, 47, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2345449303, 'issue_id': 2520110519, 'author': 'kamilmielnik', 'body': '@npretto Please backport this change to reduce the probability of conflicts in our backports :pray:', 'created_at': datetime.datetime(2024, 9, 12, 7, 14, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2345646039, 'issue_id': 2520110519, 'author': 'npretto', 'body': ""@kamilmielnik thanks good point, I was thinking conflicts are easy to solve but we don't want them on the automatic backports.\r\nI'm wondering if I should use the backport label or do it manually so we're sure the bot doesn't backport wrong things, I'm thinking the latter is safer and takes ~10 minutes so I'll do that"", 'created_at': datetime.datetime(2024, 9, 12, 8, 42, 23, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-11 15:46:29 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-11 15:47:35 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0064a6aac75cad26a1562b242fff0c4177219e29...520c4bdd42d664c1568bc16bf11dccaad3c8fb40.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/ChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChoroplethMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/table_format.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/shared/utils/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/FontWidget/FontWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/types.ts |

kamilmielnik on (2024-09-12 07:14:15 UTC): @npretto Please backport this change to reduce the probability of conflicts in our backports :pray:

npretto (Issue Creator) on (2024-09-12 08:42:23 UTC): @kamilmielnik thanks good point, I was thinking conflicts are easy to solve but we don't want them on the automatic backports.
I'm wondering if I should use the backport label or do it manually so we're sure the bot doesn't backport wrong things, I'm thinking the latter is safer and takes ~10 minutes so I'll do that

"
2520102085,pull_request,closed,,[Notification] System event notification,Feature branch for https://github.com/metabase/metabase/issues/47438,qnkhuat,2024-09-11 15:42:18+00:00,[],2024-11-26 18:52:46+00:00,2024-10-10 06:12:57+00:00,https://github.com/metabase/metabase/pull/47857,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2519995434,pull_request,closed,,"🤖 backported ""store user_parameter_value asynchronously""","  #47719
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-11 14:58:03+00:00,"['piranha', 'github-automation-metabase']",2024-09-12 08:11:26+00:00,2024-09-12 08:11:26+00:00,https://github.com/metabase/metabase/pull/47856,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2519910404,pull_request,closed,,"🤖 backported ""docs - remove firebolt link""",#47852,github-automation-metabase,2024-09-11 14:26:21+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-11 14:28:03+00:00,2024-09-11 14:28:02+00:00,https://github.com/metabase/metabase/pull/47853,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2519893759,pull_request,closed,,docs - remove firebolt link,Remove broken firebolt link.,jeff-bruemmer,2024-09-11 14:20:14+00:00,['jeff-bruemmer'],2024-09-11 14:28:27+00:00,2024-09-11 14:25:32+00:00,https://github.com/metabase/metabase/pull/47852,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2519785205,pull_request,closed,,docs - update api docs,Updates API docs for master.,jeff-bruemmer,2024-09-11 13:40:08+00:00,['jeff-bruemmer'],2024-10-08 16:14:54+00:00,2024-09-11 14:12:17+00:00,https://github.com/metabase/metabase/pull/47851,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2519745739,pull_request,closed,,"🤖 backported ""Misc. API auto-generated documentation fixes.""","  #47827
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-11 13:24:04+00:00,"['camsaul', 'github-automation-metabase']",2024-10-14 17:21:55+00:00,2024-10-14 17:21:53+00:00,https://github.com/metabase/metabase/pull/47850,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2519682574,pull_request,closed,,"🤖 backported ""ci(admin/performance): Test several caching strategies and methods""","  #45231
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-11 12:58:18+00:00,"['rafpaf', 'github-automation-metabase']",2024-09-11 13:00:16+00:00,2024-09-11 13:00:16+00:00,https://github.com/metabase/metabase/pull/47849,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2519635098,pull_request,closed,,Include completions of the final word in fulltext search,"### Description

This switches to a slightly lower level query type, so we can include completions of the final word.

~~We could do more to preserve support for operators like and, or, and not, but I think this is enough for a v1.~~ It turned out I needed to do some more clean up of the input stream, so just went ahead and got this working, as it was fun.

A big difference from the existing search is that we require all the terms, rather than some. Biasing towards search being fast, and typically this is what people will want.",crisptrutski,2024-09-11 12:38:08+00:00,['crisptrutski'],2024-10-08 16:14:52+00:00,2024-09-12 14:51:27+00:00,https://github.com/metabase/metabase/pull/47848,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2343556624, 'issue_id': 2519635098, 'author': 'crisptrutski', 'body': '* **#47848** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47848?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#47846** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47846?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 11, 12, 38, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2345698380, 'issue_id': 2519635098, 'author': 'crisptrutski', 'body': ""> I think it would be nice to test output of `search-query`, so it's 1) easier to understand what are you going for 2) easier to improve\r\n\r\nYeah it's going to be crucial to have these tests. I haven't gone deep down this route yet as I need to figure out how to properly encapsulate the appdb state for these tests. Coming soon!"", 'created_at': datetime.datetime(2024, 9, 12, 9, 6, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2346297384, 'issue_id': 2519635098, 'author': 'crisptrutski', 'body': '@piranha how about these tests? https://github.com/metabase/metabase/blob/9bda9b513c5b7eed408d51b6beabcd901d5037d7/test/metabase/search/postgres/index_test.clj#L114-L140', 'created_at': datetime.datetime(2024, 9, 12, 13, 32, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2346518989, 'issue_id': 2519635098, 'author': 'piranha', 'body': '@crisptrutski this is exactly what I wanted ☺️', 'created_at': datetime.datetime(2024, 9, 12, 14, 50, 7, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-11 12:38:23 UTC): * **#47848** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47848?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#47846** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47846?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

crisptrutski (Issue Creator) on (2024-09-12 09:06:36 UTC): Yeah it's going to be crucial to have these tests. I haven't gone deep down this route yet as I need to figure out how to properly encapsulate the appdb state for these tests. Coming soon!

crisptrutski (Issue Creator) on (2024-09-12 13:32:31 UTC): @piranha how about these tests? https://github.com/metabase/metabase/blob/9bda9b513c5b7eed408d51b6beabcd901d5037d7/test/metabase/search/postgres/index_test.clj#L114-L140

piranha on (2024-09-12 14:50:07 UTC): @crisptrutski this is exactly what I wanted ☺️

"
2519582325,pull_request,closed,,Basic search index management,"### Description

A very minimal set up for managing the search index, this will get refined significantly in the further 2 milestones.",crisptrutski,2024-09-11 12:14:13+00:00,['crisptrutski'],2024-10-08 16:14:53+00:00,2024-09-12 12:02:19+00:00,https://github.com/metabase/metabase/pull/47846,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2343561066, 'issue_id': 2519582325, 'author': 'tsmacdonald', 'body': 'No tests?', 'created_at': datetime.datetime(2024, 9, 11, 12, 40, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343566877, 'issue_id': 2519582325, 'author': 'crisptrutski', 'body': '> No tests?\r\n\r\nNot sure its worth testing the declarative task stuff, it just delegates to tested stuff.\r\n\r\nYeah, I guess I should add some API tests. A bit lazy and impatient as its just for dev and staging use really.', 'created_at': datetime.datetime(2024, 9, 11, 12, 43, 5, tzinfo=datetime.timezone.utc)}]","tsmacdonald on (2024-09-11 12:40:25 UTC): No tests?

crisptrutski (Issue Creator) on (2024-09-11 12:43:05 UTC): Not sure its worth testing the declarative task stuff, it just delegates to tested stuff.

Yeah, I guess I should add some API tests. A bit lazy and impatient as its just for dev and staging use really.

"
2519460859,pull_request,closed,,Make E2E test for #47061 less flaky,"Related to #47061 

Reported on [Slack](https://metaboat.slack.com/archives/C5XHN8GLW/p1725991025680609?thread_ts=1725990227.181689&cid=C5XHN8GLW)

### Description

The last assertion that assert the height doesn't retry, and from my observation even after the dashboard has rendered, it's not guaranteed that the iframe will already be resized. So to fix this changing it to `should`, should retry the assertion inside until it's true fixing the flake

### How to verify

The [stress test](https://github.com/metabase/metabase/actions/runs/10810651789) passes. [20/20] ✅ 

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-11 11:23:20+00:00,['WiNloSt'],2024-10-08 16:14:57+00:00,2024-09-11 12:28:26+00:00,https://github.com/metabase/metabase/pull/47845,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2343374774, 'issue_id': 2519460859, 'author': 'WiNloSt', 'body': ""Not backporting this because the original PR isn't backported https://github.com/metabase/metabase/pull/47115. And it's not backported because this is only regression on master and didn't happen in 50."", 'created_at': datetime.datetime(2024, 9, 11, 11, 29, 28, tzinfo=datetime.timezone.utc)}]","WiNloSt (Issue Creator) on (2024-09-11 11:29:28 UTC): Not backporting this because the original PR isn't backported https://github.com/metabase/metabase/pull/47115. And it's not backported because this is only regression on master and didn't happen in 50.

"
2519237768,pull_request,closed,,feat: Added Elestio as one-click deploy option,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes #47843 

### Description

This PR introduces new one-click deployment option Elestio

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",kaiwalyakoparkar,2024-09-11 09:54:12+00:00,[],2025-02-04 01:31:20+00:00,2025-02-04 01:31:20+00:00,https://github.com/metabase/metabase/pull/47844,"[('Stale', 'Stale PRs that will be auto-closed')]","[{'comment_id': 2603449744, 'issue_id': 2519237768, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557526, 'issue_id': 2519237768, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:05 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:19 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2519075155,pull_request,closed,,Add scoped search in the Search tab in Entity Picker,"Closes #47291

### How to verify



- first folder (i.e. a collection or a database) in each tab (except ""Recents"" and ""Search"") should automatically be selected when given tab is opened for the first time (unless entity picker already has a value)
- tab state should be preserved when navigating between tabs
- search is scoped to a given folder (non-recursive) when a folder is selected and a given tab is opened

This change affects all entity pickers (data picker, question picker, collection picker, dashboard picker).

### Demo

https://github.com/user-attachments/assets/de2d9cf3-217e-46c7-b90e-df4bd04a31a2



",kamilmielnik,2024-09-11 08:58:15+00:00,['kamilmielnik'],2024-09-13 20:35:59+00:00,2024-09-13 20:35:57+00:00,https://github.com/metabase/metabase/pull/47839,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2347107834, 'issue_id': 2519075155, 'author': 'kamilmielnik', 'body': '> There seems to be issues with the root collection and/or metrics https://www.loom.com/share/cd319917e9644dbd85ea5aae69d92fa5\r\n\r\nAnswered all comments in [Slack](https://metaboat.slack.com/archives/C0645JP1W81/p1726169845328769?thread_ts=1726161967.066949&cid=C0645JP1W81), reported #47899 separately and added to the epic.', 'created_at': datetime.datetime(2024, 9, 12, 19, 45, 35, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-09-12 19:45:35 UTC): Answered all comments in [Slack](https://metaboat.slack.com/archives/C0645JP1W81/p1726169845328769?thread_ts=1726161967.066949&cid=C0645JP1W81), reported #47899 separately and added to the epic.

"
2518981442,pull_request,closed,,fix flaky embedding dashboard test,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-09-11 08:27:05+00:00,['uladzimirdev'],2024-09-11 12:01:30+00:00,2024-09-11 12:01:01+00:00,https://github.com/metabase/metabase/pull/47838,"[('.Team/Querying', '')]","[{'comment_id': 2343475198, 'issue_id': 2518981442, 'author': 'uladzimirdev', 'body': 'closed in favour of https://github.com/metabase/metabase/pull/47845', 'created_at': datetime.datetime(2024, 9, 11, 12, 1, 29, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-09-11 12:01:29 UTC): closed in favour of https://github.com/metabase/metabase/pull/47845

"
2518408445,pull_request,closed,,"🤖 backported ""fix static visualizations dashcard settings merging""","  #47789
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-11 04:05:18+00:00,"['alxnddr', 'github-automation-metabase']",2024-09-11 18:42:05+00:00,2024-09-11 18:42:04+00:00,https://github.com/metabase/metabase/pull/47836,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2344114162, 'issue_id': 2518408445, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f3bbfd44bbe0b57541cce0f0beff5f4744351111...5b9b085b09cc43b93f41ec0918dee56821a79186.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/settings.js<br>frontend/src/metabase/visualizations/lib/settings.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.ts<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.unit.spec.ts<br>frontend/src/metabase/visualizations/types/visualization.ts |', 'created_at': datetime.datetime(2024, 9, 11, 16, 21, 43, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-11 16:21:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f3bbfd44bbe0b57541cce0f0beff5f4744351111...5b9b085b09cc43b93f41ec0918dee56821a79186.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/settings.js<br>frontend/src/metabase/visualizations/lib/settings.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.ts<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.unit.spec.ts<br>frontend/src/metabase/visualizations/types/visualization.ts |

"
2518182063,pull_request,closed,,Pivot Exports/Downloads Should Not include pivot-grouping or 'Extra' Rows,"Fixes #46561

When downloading a pivot table's data, a column 'pivot-grouping' is included as well as 'extra' rows that correspond to various totals in the table.

This PR removes the pivot-grouping column and any of these 'extra' rows from the downloads/exports.
",adam-james-v,2024-09-11 00:01:07+00:00,['adam-james-v'],2024-09-26 12:28:00+00:00,2024-09-17 19:26:31+00:00,https://github.com/metabase/metabase/pull/47832,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2358255037, 'issue_id': 2518182063, 'author': 'natashamathur', 'body': 'Which release will this come out in?', 'created_at': datetime.datetime(2024, 9, 18, 11, 49, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2367550989, 'issue_id': 2518182063, 'author': 'piranha', 'body': ""@natashamathur that's going to be the first release in the 50.* after the backport merges, so something like 50.27 or 28."", 'created_at': datetime.datetime(2024, 9, 23, 8, 33, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2367833824, 'issue_id': 2518182063, 'author': 'synque-dev-admin', 'body': '@piranha , please let us know when is 50.27 will be released. Please and thank you!', 'created_at': datetime.datetime(2024, 9, 23, 10, 37, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2367845935, 'issue_id': 2518182063, 'author': 'piranha', 'body': ""@synque-dev-admin I don't have any good tools to do that, so in case I'm not very on time: add yourself to watch backport, and when it's merged next release will contain that."", 'created_at': datetime.datetime(2024, 9, 23, 10, 43, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2376064505, 'issue_id': 2518182063, 'author': 'piranha', 'body': '@natashamathur @synque-dev-admin 50.27 is out :)', 'created_at': datetime.datetime(2024, 9, 26, 6, 42, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2376615716, 'issue_id': 2518182063, 'author': 'natashamathur', 'body': 'Thank you!', 'created_at': datetime.datetime(2024, 9, 26, 10, 55, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2376815501, 'issue_id': 2518182063, 'author': 'synque-dev-admin', 'body': 'Thank you @piranha', 'created_at': datetime.datetime(2024, 9, 26, 12, 27, 58, tzinfo=datetime.timezone.utc)}]","natashamathur on (2024-09-18 11:49:07 UTC): Which release will this come out in?

piranha on (2024-09-23 08:33:02 UTC): @natashamathur that's going to be the first release in the 50.* after the backport merges, so something like 50.27 or 28.

synque-dev-admin on (2024-09-23 10:37:33 UTC): @piranha , please let us know when is 50.27 will be released. Please and thank you!

piranha on (2024-09-23 10:43:36 UTC): @synque-dev-admin I don't have any good tools to do that, so in case I'm not very on time: add yourself to watch backport, and when it's merged next release will contain that.

piranha on (2024-09-26 06:42:07 UTC): @natashamathur @synque-dev-admin 50.27 is out :)

natashamathur on (2024-09-26 10:55:17 UTC): Thank you!

synque-dev-admin on (2024-09-26 12:27:58 UTC): Thank you @piranha

"
2518174955,pull_request,closed,,"🤖 backported ""Add v0.50.25 to the list of releases""",#47822,github-automation-metabase,2024-09-10 23:53:18+00:00,"['alexyarosh', 'github-automation-metabase']",2024-09-10 23:54:58+00:00,2024-09-10 23:54:57+00:00,https://github.com/metabase/metabase/pull/47831,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2518161245,pull_request,closed,,Pivot Options are Properly Calculated for Questions based on Models with Joins,"Fixes #46575

Creating a Pivot Table Question that is based off of a model that has at least one column derived from a join failed to display row totals.

This is because the pivot-options map was being mis-calculated; not all column indices were correctly found/passed in to the :pivot-rows or :pivot-cols keys, causing the pivot query not to compute all necessary data.

Here, I just modify the :lib/source key of the columns whose source is a card (as determined by the existence of :lib/card-id). The columns being checked will all have :source/breakout, which caused, in the issue's repro example, the ""NAME"" column to be missed. If it instead has :lib/source :source/card, the logic inside `lib/find-matching-column` works.

 ",adam-james-v,2024-09-10 23:37:50+00:00,['adam-james-v'],2024-09-27 14:38:54+00:00,2024-09-27 14:38:53+00:00,https://github.com/metabase/metabase/pull/47830,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2342342034, 'issue_id': 2518161245, 'author': 'adam-james-v', 'body': ""@bshepherdson , I want to add a test yet, but could you have a look and let me know if there's a smarter way to achieve things here?"", 'created_at': datetime.datetime(2024, 9, 10, 23, 38, 40, tzinfo=datetime.timezone.utc)}]","adam-james-v (Issue Creator) on (2024-09-10 23:38:40 UTC): @bshepherdson , I want to add a test yet, but could you have a look and let me know if there's a smarter way to achieve things here?

"
2518109768,pull_request,closed,,Misc. API auto-generated documentation fixes.,"Fix some errors mentioned in https://metaboat.slack.com/archives/C051AG38B2S/p1725900105564369?thread_ts=1722278253.246549&cid=C051AG38B2S

- Fix duplicate enum values for Card `type`
- Fix schemas inside our registry not getting dereferenced if they were wrapped in `[:maybe ...]`

Generated documentation for `POST /api/card/` is now:

## `POST /api/card/`

Create a new `Card`. Card `type` can be `question`, `metric`, or `model`.

### PARAMS:

-  **`visualization_settings`** Value must be a map.

-  **`parameters`** nullable sequence of parameter must be a map with :id and :type keys.

-  **`description`** nullable value must be a non-blank string.

-  **`collection_position`** nullable value must be an integer greater than zero.

-  **`result_metadata`** nullable value must be an array of valid results column metadata maps.

-  **`collection_id`** nullable value must be an integer greater than zero.

-  **`name`** value must be a non-blank string.

-  **`type`** nullable enum of :question, :metric, :model.

-  **`cache_ttl`** nullable value must be an integer greater than zero.

-  **`dataset_query`** Value must be a map.

-  **`parameter_mappings`** nullable sequence of parameter_mapping must be a map with :parameter_id and :target keys.

-  **`display`** value must be a non-blank string.",camsaul,2024-09-10 22:47:47+00:00,['camsaul'],2024-10-14 17:22:24+00:00,2024-09-11 13:23:14+00:00,https://github.com/metabase/metabase/pull/47827,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2411838393, 'issue_id': 2518109768, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 14, 17, 22, 23, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 17:22:23 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2518089235,pull_request,closed,,"🤖 backported ""Enable named aggregations in :offset expressions""","  #47783

The test from the original fix is not applicable here. On popular demand, I can add another one.",github-automation-metabase,2024-09-10 22:35:33+00:00,"['metamben', 'github-automation-metabase']",2024-09-12 14:58:58+00:00,2024-09-12 14:58:56+00:00,https://github.com/metabase/metabase/pull/47826,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2517906857,pull_request,closed,,Migrate stats ping to Snowplow,"Product doc: https://www.notion.so/metabase/Migrate-Anonymous-Stats-ping-to-Snowplow-18f155e235d34ba09f45518a866336e2

This implements milestone 1 of the above doc:
* Adds a new `instance_stats` Snowplow schema
* Updates `phone-home-stats!` to send data to Snowplow in addition to the pre-existing stats endpoint
* New event includes:
	* `:instance-attributes` — key/value pairs which are mostly pulled from the existing stats data. The main exception is `has_activation_signals_completed` which implements a new metric for detecting whether Pro & Starter instances have been activated.
	* `:features` — details about available features, and whether they are enabled on the instance. 
	* `:metadata` — for now, just includes the stats processing time
* Updates our Snowplow Micro config & docker compose file to allow testing against unpublished schemas
* Adds a basic e2e test that triggers a stats send and asserts that a valid Snowplow event was received",noahmoss,2024-09-10 21:35:12+00:00,['noahmoss'],2024-10-08 16:14:21+00:00,2024-09-25 19:34:23+00:00,https://github.com/metabase/metabase/pull/47823,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2342051450, 'issue_id': 2517906857, 'author': 'noahmoss', 'body': '* **#47823** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47823?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 10, 21, 35, 44, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-10 21:35:44 UTC): * **#47823** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47823?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2517779340,pull_request,closed,,Add v0.50.25 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-09-10 20:51:43+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-09-10 23:55:22+00:00,2024-09-10 23:51:34+00:00,https://github.com/metabase/metabase/pull/47822,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2517640490,pull_request,closed,,feat(sdk): add visual cues in sdk around evaluation usage and feature flags,"Closes https://github.com/metabase/metabase/issues/47824

### Description

Adds a visual indicator for evaluation usage (e.g. using API keys in development) and feature flags

### How to verify

Follow the test cases listed in `enterprise/frontend/src/embedding-sdk/lib/usage-problem.ts` and in the test code at `enterprise/frontend/src/embedding-sdk/components/private/SdkUsageProblem/SdkUsageProblemDisplay.unit.spec.tsx`. This is also described in [this part of the product doc](https://www.notion.so/metabase/Add-visual-cues-in-SDK-around-evaluation-usage-and-feature-flag-004be55a2ed247839cc9521e9a58f6d4?pvs=4#52b68b5b877240339a1d38bfcf0d4e0f).

For example, you can use the SDK with API keys in localhost, and the warning indicator should pop up. If you click on it, the card should open.

### Demo

Testing each test cases for visual cues

<div>
    <a href=""https://www.loom.com/share/117c21d3fd954d0194855f56370b33c6"">
      <p>Testing each cases in the Visual Cues PR - Private Loom</p>
    </a>
    <a href=""https://www.loom.com/share/117c21d3fd954d0194855f56370b33c6"">
      <img style=""max-width:300px;"" src=""https://cdn.loom.com/sessions/thumbnails/117c21d3fd954d0194855f56370b33c6-4da3dabb5e4544fa-full-play.gif"">
    </a>
  </div>

Shows a warning when we are using API keys in development

![CleanShot 2567-09-11 at 05 17 46@2x](https://github.com/user-attachments/assets/4eea1f02-8470-4fa0-a5c9-c51470f946ad)

Shows an error when we are using API keys on production

![CleanShot 2567-09-11 at 05 48 15@2x](https://github.com/user-attachments/assets/a057efe4-5605-431f-a701-6300dc2892a4)

Renders properly in Shoppy's Pug theme

![CleanShot 2567-09-11 at 21 15 07@2x](https://github.com/user-attachments/assets/fb74246b-e554-4a50-8b6a-5efcd6fbd5cf)

Renders properly in Shoppy's Luminara theme

![CleanShot 2567-09-11 at 21 16 05@2x](https://github.com/user-attachments/assets/84d79970-e1b1-4fbd-b061-4e187701e955)

Renders properly in Shoppy's Stitch theme

![CleanShot 2567-09-11 at 21 15 52@2x](https://github.com/user-attachments/assets/77a392ad-a05e-461d-8be4-84e7ec49b07b)

### Caveat

There is a known edge case with CORS on non-localhost origins. If the user hasn't entered their license key and haven't configured their authorized origins yet, the CORS headers will be missing from the /api/session/properties endpoint, therefore all requests on non-localhost origins will fail. [We're addressing this.](https://metaboat.slack.com/archives/C063Q3F1HPF/p1726050178995979)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",heypoom,2024-09-10 20:05:40+00:00,['heypoom'],2024-09-13 20:18:57+00:00,2024-09-13 20:18:55+00:00,https://github.com/metabase/metabase/pull/47821,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2342292217, 'issue_id': 2517640490, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 16e31051b0987f3e54ea92b2ae76146802265b54...7e3ed9dc60605a870bcfa6806e829c235180dd37.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/warning_round_filled.svg<br>frontend/src/metabase/ui/components/utils/Portal/index.ts<br>frontend/src/metabase/ui/components/utils/index.ts |', 'created_at': datetime.datetime(2024, 9, 10, 22, 44, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343608523, 'issue_id': 2517640490, 'author': 'WiNloSt', 'body': 'It looks weird on shoppy, maybe we need to play around with CSS a bit more.\r\n![image](https://github.com/user-attachments/assets/66171d5e-3a4c-4f86-9736-85283ab1fb99)', 'created_at': datetime.datetime(2024, 9, 11, 13, 0, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343628781, 'issue_id': 2517640490, 'author': 'heypoom', 'body': '@WiNloSt good catch, let me try with portals and make it a bit more resilient to themes and external styles.', 'created_at': datetime.datetime(2024, 9, 11, 13, 8, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343972350, 'issue_id': 2517640490, 'author': 'heypoom', 'body': '@WiNloSt I updated the theming so now it works with themed usages such as Shoppy (see screenshot above). I\'ve also added support for checking the settings (using `enable-embedding` for now), and added comments on the optimistic behaviour. Thanks for the feedback and testing!\r\n\r\nI think we can safely skip the ""CORS error"" scenario for now to prevent errors from accidentally showing up in production, until the issue mentioned by [AlexP](https://metaboat.slack.com/archives/C97M2U8M6/p1726051507979579?thread_ts=1726050496.687369&cid=C97M2U8M6) is resolved. We do have a good support for localhost dev scenario though.', 'created_at': datetime.datetime(2024, 9, 11, 15, 18, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2347031941, 'issue_id': 2517640490, 'author': 'heypoom', 'body': ""@WiNloSt Thanks for reviewing with care! I addressed your comments above.\r\n\r\n> I feel like more cases when we're not running on localhost are not properly tested. Like I've mentioned, if some of the code part aren't going to be asserted, then we shouldn't have them.\r\n\r\nAgree. I just recorded a [private Loom video](https://www.loom.com/share/117c21d3fd954d0194855f56370b33c6?sid=5252cacc-2785-49b7-9480-e45e77b33811) that tests every condition we have defined in `usage-problem.ts`, and removed ones that do not match assertions. That should cover it 💪🏻"", 'created_at': datetime.datetime(2024, 9, 12, 19, 2, 8, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-10 22:44:25 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 16e31051b0987f3e54ea92b2ae76146802265b54...7e3ed9dc60605a870bcfa6806e829c235180dd37.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/warning_round_filled.svg<br>frontend/src/metabase/ui/components/utils/Portal/index.ts<br>frontend/src/metabase/ui/components/utils/index.ts |

WiNloSt on (2024-09-11 13:00:51 UTC): It looks weird on shoppy, maybe we need to play around with CSS a bit more.
![image](https://github.com/user-attachments/assets/66171d5e-3a4c-4f86-9736-85283ab1fb99)

heypoom (Issue Creator) on (2024-09-11 13:08:50 UTC): @WiNloSt good catch, let me try with portals and make it a bit more resilient to themes and external styles.

heypoom (Issue Creator) on (2024-09-11 15:18:52 UTC): @WiNloSt I updated the theming so now it works with themed usages such as Shoppy (see screenshot above). I've also added support for checking the settings (using `enable-embedding` for now), and added comments on the optimistic behaviour. Thanks for the feedback and testing!

I think we can safely skip the ""CORS error"" scenario for now to prevent errors from accidentally showing up in production, until the issue mentioned by [AlexP](https://metaboat.slack.com/archives/C97M2U8M6/p1726051507979579?thread_ts=1726050496.687369&cid=C97M2U8M6) is resolved. We do have a good support for localhost dev scenario though.

heypoom (Issue Creator) on (2024-09-12 19:02:08 UTC): @WiNloSt Thanks for reviewing with care! I addressed your comments above.


Agree. I just recorded a [private Loom video](https://www.loom.com/share/117c21d3fd954d0194855f56370b33c6?sid=5252cacc-2785-49b7-9480-e45e77b33811) that tests every condition we have defined in `usage-problem.ts`, and removed ones that do not match assertions. That should cover it 💪🏻

"
2517610496,pull_request,closed,,Use context for field id computation while hydrating dashbaord,"Closes https://github.com/metabase/metabase/issues/42829

### Description

This PR builds on the https://github.com/metabase/metabase/pull/45068. The original solution is updated to compute `filterable-columns` of a dashcard only once per `hydrate-dashboard-details`. That means sharing of intermediate results not only per reduction in `dashcards->param-field-ids*`, but also between hydration of `:param_fields` and `:param_values`.

Metadata provider that's in use here is cached by means of `metabase.lib.metadata.jvm/*metadata-provider-cache*`

### How to verify

Run new tests, existing e2es or attempt reproduction from the issue.

### Checklist

- [X] Tests have been added/updated to cover changes in this PR
",lbrdnk,2024-09-10 19:56:12+00:00,['lbrdnk'],2024-10-03 18:49:32+00:00,2024-10-03 18:49:30+00:00,https://github.com/metabase/metabase/pull/47820,"[('.Backend', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2517384484,pull_request,closed,,Allow filtering on all stages in the QB,"Epic https://github.com/metabase/metabase/issues/47800
Closes https://github.com/metabase/metabase/issues/47817

Allows to add & remove filters from all query stages in the filter modal, like the notebook does. 

How to verify:
- New -> Question -> Products
- Summarize -> Count, Breakout -> Category (stage 1)
- Summarize -> Count, Breakout -> Category (stage 2)
- Summarize -> Count, Breakout -> Category (stage 3)
- Visualize
- Filter (the filter modal adds stage 4 for convenience)
- Try to add filters on each stage -> Apply filters
- Click Filter again and make sure the filters are in correct groups

<img width=""1146"" alt=""Screenshot 2024-09-10 at 14 48 13"" src=""https://github.com/user-attachments/assets/a698ba9f-a3f2-4e9e-9230-ec912b7801be"">
",ranquild,2024-09-10 18:49:19+00:00,['ranquild'],2024-09-12 15:03:06+00:00,2024-09-12 15:03:04+00:00,https://github.com/metabase/metabase/pull/47818,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2517029619,pull_request,closed,,Show temporal metric value on browse metrics table,"Closes https://github.com/metabase/metabase/issues/47797

### Description

Renders values for metrics with a temporal breakout.

1. make sure you have at least one metric with a temporal breakout
2. navigate to the `/browse/metrics` page by clicking ""Metrics"" in the sidebar
3. The table should show a value for the temporal metric, with a label matching the value


<img width=""1474"" alt=""Screenshot 2024-09-11 at 13 57 54"" src=""https://github.com/user-attachments/assets/45e0799f-2593-4da4-83c9-20ad4b243d63"">


",romeovs,2024-09-10 17:09:30+00:00,['romeovs'],2024-09-12 16:11:58+00:00,2024-09-12 16:11:57+00:00,https://github.com/metabase/metabase/pull/47814,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2516922822,pull_request,closed,,"🤖 backported ""Tidy up CSV encoding detection""",#47809,github-automation-metabase,2024-09-10 16:28:57+00:00,"['crisptrutski', 'github-automation-metabase']",2024-09-10 18:03:34+00:00,2024-09-10 18:03:33+00:00,https://github.com/metabase/metabase/pull/47813,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2516909441,pull_request,closed,,Remove FE hacks for empty display names for column groups,"Epic https://github.com/metabase/metabase/issues/47800
Closes https://github.com/metabase/metabase/issues/47811
",ranquild,2024-09-10 16:22:01+00:00,['ranquild'],2024-09-10 18:39:10+00:00,2024-09-10 18:39:09+00:00,https://github.com/metabase/metabase/pull/47812,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2516750048,pull_request,closed,,Tidy up CSV encoding detection,Thanks for the suggestions that didn't make it before the auto merge - worth the extra PR I reckon.,crisptrutski,2024-09-10 15:12:30+00:00,['crisptrutski'],2024-09-10 18:04:01+00:00,2024-09-10 16:28:05+00:00,https://github.com/metabase/metabase/pull/47809,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2516722838,pull_request,closed,,[serdes] field name is only unique in combination with parent_id,"so we need to account for that in serialization paths, storage paths and when exporting/importing foreign keys

fixes #47795",piranha,2024-09-10 15:02:15+00:00,['piranha'],2024-09-13 06:32:28+00:00,2024-09-13 06:32:27+00:00,https://github.com/metabase/metabase/pull/47808,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2343070572, 'issue_id': 2516722838, 'author': 'crisptrutski', 'body': 'A lot of tests far away from serialization are busted. Don\'t really want to review this until you\'ve looked at those 😄 \r\n\r\n""Hopefully"" they\'re just terrible tests that need their data fixed.', 'created_at': datetime.datetime(2024, 9, 11, 9, 4, 56, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-09-11 09:04:56 UTC): A lot of tests far away from serialization are busted. Don't really want to review this until you've looked at those 😄 

""Hopefully"" they're just terrible tests that need their data fixed.

"
2516693932,pull_request,closed,,"🤖 backported ""Handle non UTF-8 encoded CSV uploads""","  #47799
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-10 14:50:36+00:00,"['crisptrutski', 'github-automation-metabase']",2024-09-10 16:00:04+00:00,2024-09-10 16:00:03+00:00,https://github.com/metabase/metabase/pull/47807,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2516669029,pull_request,closed,,Remove column group singularization,"Epic https://github.com/metabase/metabase/issues/47800
Closes https://github.com/metabase/metabase/issues/47802
Context https://metaboat.slack.com/archives/C01LQQ2UW03/p1725912348509929

Removes the logic to singularize column group names.

How to verify:
- New -> Question -> Orders
- Join -> Products
- Add a breakout. ""Orders"" should say ""Orders"" (and not ""Order""), ""Products"" -> ""Products"", and FK fields should remain the same.

<img width=""1298"" alt=""Screenshot 2024-09-10 at 11 53 49"" src=""https://github.com/user-attachments/assets/780c4345-5911-4f64-9195-6722e4ee5650"">
",ranquild,2024-09-10 14:40:01+00:00,['ranquild'],2024-09-10 17:41:08+00:00,2024-09-10 17:41:05+00:00,https://github.com/metabase/metabase/pull/47805,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2516555632,pull_request,closed,,Change search input placeholder depending on selected folder & tab in Entity Picker,"Closes #47290
Closes #47292

### Description

Tests will be added later.

### How to verify

1. New > Question
2. Select a collection or a database or a schema 

Search input placeholder should update accordingly.

If database has only 1 schema, the placeholder should mention the database, not the schema.

### Demo

https://github.com/user-attachments/assets/74cb8d67-b758-4691-ad3b-a1445aeef05e


",kamilmielnik,2024-09-10 13:55:21+00:00,['kamilmielnik'],2024-09-11 07:32:36+00:00,2024-09-11 07:32:34+00:00,https://github.com/metabase/metabase/pull/47801,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2516434583,pull_request,closed,,Handle non UTF-8 encoded CSV uploads,"Closes https://github.com/metabase/metabase/issues/45689

### Description

~~This adds very rudimentary character set detection, and uses it to handle a ""legacy"" file encoding.~~

This adds a very mature library for handling character sets.",crisptrutski,2024-09-10 13:10:22+00:00,['crisptrutski'],2024-09-10 14:54:58+00:00,2024-09-10 14:49:44+00:00,https://github.com/metabase/metabase/pull/47799,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2341129219, 'issue_id': 2516434583, 'author': 'crisptrutski', 'body': ""> Agree it's safer to just use a lib.\r\n\r\nI was initially put off by how large the first dependency I saw recommended was, with tons of other scope. This one is really nice and svelte though.\r\n\r\n> I don't know what went into the 8kb buffer choice but I'm sure it's fine\r\n\r\nDoubling the size I saw in their test example, because that was closer to the 10kb limit I'd thumb sucked in my no-dependency version. No real science.\r\n\r\nSo far people have always complained about text in the headers, so this is probably overkill."", 'created_at': datetime.datetime(2024, 9, 10, 14, 54, 56, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-10 14:54:56 UTC): I was initially put off by how large the first dependency I saw recommended was, with tons of other scope. This one is really nice and svelte though.


Doubling the size I saw in their test example, because that was closer to the 10kb limit I'd thumb sucked in my no-dependency version. No real science.

So far people have always complained about text in the headers, so this is probably overkill.

"
2516227400,pull_request,closed,,Return to previously opened tab when search input is cleared in Entity Picker,"Closes #47289

### Description

See PR title.

_This PR does not include changes from #47794_

### Demo

#### Before


https://github.com/user-attachments/assets/29d4691a-607a-4bad-8091-173a4777be42



#### After

https://github.com/user-attachments/assets/0711d2e0-b9e8-4e80-8247-ef5577f99b74




",kamilmielnik,2024-09-10 11:53:35+00:00,['kamilmielnik'],2024-09-10 14:45:12+00:00,2024-09-10 14:45:09+00:00,https://github.com/metabase/metabase/pull/47798,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2341077777, 'issue_id': 2516227400, 'author': 'kamilmielnik', 'body': '3 tests are failing in CI but passing locally. Merging.', 'created_at': datetime.datetime(2024, 9, 10, 14, 45, 6, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-09-10 14:45:06 UTC): 3 tests are failing in CI but passing locally. Merging.

"
2515944401,pull_request,closed,,Maintain tab state in Entity Picker,"Closes #47454

### Description

This PR lifts `path` state from `QuestionPicker`, `CollectionPicker`, `DashboardPicker` and `TablePicker` components and adds `path` + `onPathChange` props to them. Thanks to this entity picker tab state is preserved when a tab is unmounted (i.e. different tab is opened).

Tests will be added separately. This PR goes to an integration branch.

----

Initially I tried 2 different approaches:
1. Using `keepMounted` prop in Mantine's `Tabs` component. Unfortunately this caused lots of e2e tests to fail because Cypress could now access elements from inactive tabs. Fixing that would require changing every place that uses `entityPickerModal()` helper (> 250 usages). Not good.
2. ""Smartly"" managing the state in `EntityPickerModal`. The downside is that it's hell to make it work with generic types. Type casting is not a reliable workaround.

### How to verify

CI is green.
Tab state is remembered when navigating through tabs in the entity picker (collection picker, question picker, table picker, dashboard picker). This does not apply to ""Recents"" and ""Search"" tabs.

### Demo

#### Before

https://github.com/user-attachments/assets/bbd11968-905d-44e7-a858-f9edad871469


#### After

https://github.com/user-attachments/assets/90aef6a5-6fea-4198-9cd2-422f506bf8ca

",kamilmielnik,2024-09-10 09:43:23+00:00,['kamilmielnik'],2024-09-10 13:53:54+00:00,2024-09-10 13:53:51+00:00,https://github.com/metabase/metabase/pull/47794,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2515112630,pull_request,closed,,docs: progress bar docs,"Thinking about our most-complained-about visualization docs and starting with the progress bar as the easiest one.

Here's what I'm thinking as the structure for these docs:

- Example use cases (what are you trying to communicate with this data)
- Prerequisites (what shape of data do you need, and anything else if applicable)
- Chart settings (I'm thinking including examples of how setting change the chart rather than just listing settings)
- Drill through actions (more interesting when we'll have docs for what drill through actually is)
- Alternatives (what other similar charts could you look at)

Let me know what you think!
",alexyarosh,2024-09-09 23:41:00+00:00,['alexyarosh'],2024-09-13 16:00:17+00:00,2024-09-13 15:57:23+00:00,https://github.com/metabase/metabase/pull/47792,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2346970754, 'issue_id': 2515112630, 'author': 'alexyarosh', 'body': '@jeff-bruemmer I streamlined the doc based on what we talked about!', 'created_at': datetime.datetime(2024, 9, 12, 18, 28, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2349278799, 'issue_id': 2515112630, 'author': 'alexyarosh', 'body': '@jeff-bruemmer thanks! I need some kind of vscode extensions for contractions 😅', 'created_at': datetime.datetime(2024, 9, 13, 15, 56, 39, tzinfo=datetime.timezone.utc)}]","alexyarosh (Issue Creator) on (2024-09-12 18:28:02 UTC): @jeff-bruemmer I streamlined the doc based on what we talked about!

alexyarosh (Issue Creator) on (2024-09-13 15:56:39 UTC): @jeff-bruemmer thanks! I need some kind of vscode extensions for contractions 😅

"
2515069371,pull_request,closed,,replace embedding-app-origin -> embedding-app-origins-sdk,resolves #47522,escherize,2024-09-09 22:57:50+00:00,['escherize'],2025-02-04 18:14:40+00:00,2024-09-13 21:50:42+00:00,https://github.com/metabase/metabase/pull/47791,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2350376790, 'issue_id': 2515069371, 'author': 'escherize', 'body': ""Thanks for the comments @WiNloSt. I've rolled this work into https://github.com/metabase/metabase/pull/47933."", 'created_at': datetime.datetime(2024, 9, 13, 21, 50, 42, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-09-13 21:50:42 UTC): Thanks for the comments @WiNloSt. I've rolled this work into https://github.com/metabase/metabase/pull/47933.

"
2515067601,pull_request,closed,,47522 add embedding app origins sdk setting,,escherize,2024-09-09 22:56:06+00:00,[],2024-09-09 22:57:33+00:00,2024-09-09 22:57:31+00:00,https://github.com/metabase/metabase/pull/47790,[],[],
2514926885,pull_request,closed,,fix static visualizations dashcard settings merging,"Closes https://github.com/metabase/metabase/issues/47495

### Description

This PR fixes broken static charts in the following case:
- A native question was added to a dashboard
- Dashcard viz settings were changed
- Then the native query got updated with columns renaming

The static viz renderer incorrectly handled dashcard settings and this PR makes it the same as in the dynamic viz.

### How to verify

- Create a question
```
select 'foo' x, 10 y
union all select 'bar', 20
```

- Add on a dashboard
- Update any dashcard viz setting
- Go to the question and update query to 
```
select 'foo' x, 10 y1
union all select 'bar', 20
```
- Go to the dashboard and try sending a subscription
- Ensure it does not break

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-09-09 21:09:42+00:00,['alxnddr'],2024-09-11 04:04:27+00:00,2024-09-11 04:04:26+00:00,https://github.com/metabase/metabase/pull/47789,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2514782716,pull_request,closed,,"🤖 backported ""[QP] Correctly handle `:lib/internal-remap` columns in `:result_metadata`""",#47587,github-automation-metabase,2024-09-09 19:49:39+00:00,"['bshepherdson', 'github-automation-metabase']",2024-09-09 21:17:54+00:00,2024-09-09 21:17:53+00:00,https://github.com/metabase/metabase/pull/47788,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2514753185,pull_request,closed,,"🤖 backported ""perf: Use more efficient query validation when the argument is valid""",#47724,github-automation-metabase,2024-09-09 19:32:53+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-09-09 21:09:22+00:00,2024-09-09 21:09:21+00:00,https://github.com/metabase/metabase/pull/47787,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2514583663,pull_request,closed,,Questions in Dashboards Milestone 1,"Closes #50172  (milestone 1)

### Description

Allows users to
- save questions in dashboards
- move questions between dashboards and collections

![Screen Shot 2024-11-18 at 3 27 37 PM](https://github.com/user-attachments/assets/6c00dcfc-c98e-412f-8c7c-182776f7ac79)
![Screen Shot 2024-11-18 at 3 27 10 PM](https://github.com/user-attachments/assets/e1516568-e376-48a1-96ca-f0dad08886f5)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",sloansparger,2024-09-09 18:01:03+00:00,"['npfitz', 'sloansparger', 'iethree']",2024-12-10 20:33:01+00:00,2024-12-10 19:51:38+00:00,https://github.com/metabase/metabase/pull/47784,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2377290502, 'issue_id': 2514583663, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c9b18c5fc640c3aa09ae3c39375680cab5a9cc23...63736d4350f1e7bf0555d2698f21784a82330019.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 9, 26, 15, 27, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2466468052, 'issue_id': 2514583663, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/132338_tests-63736d43-purple)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/0-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 9, 21, 40, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2483407677, 'issue_id': 2514583663, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 11, 18, 15, 39, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2532635800, 'issue_id': 2514583663, 'author': 'escherize', 'body': 'I am seeing the following warnings in the logs:\r\n\r\n``` java\r\n2024-12-10 18:46:57,758 WARN api.common :: Unexpected parameters at [:post ""/api/dashboard/10/dashcard/98/card/119/query""]: [:dashboard_id]\r\nPlease add them to the schema or remove them from the API client\r\n```\r\n\r\nWe usually just ignore these (for better or worse), but there\'s a subtle thing here: in the [defendpoint definition](https://github.com/metabase/metabase/blob/ss%2Fdashboard-and-dashboard-question-page-updates/src/metabase/api/dashboard.clj#L1333-L1348), we are looking for (and getting) `dashboard-id` as a route param. But we also send them as `dashboard_id` in the request payload. Seems like they always match, but it may be better to send the dashboard id 1 way, what do you think?', 'created_at': datetime.datetime(2024, 12, 10, 19, 3, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2532645509, 'issue_id': 2514583663, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 63736d4350f1e7bf0555d2698f21784a82330019.\n✅ Preview:\n    https://pr47784.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 12, 10, 19, 8, 32, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-26 15:27:12 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c9b18c5fc640c3aa09ae3c39375680cab5a9cc23...63736d4350f1e7bf0555d2698f21784a82330019.

No notifications.

trunk-io[bot] on (2024-11-09 21:40:22 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/132338_tests-63736d43-purple)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/0-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment&runConclusion=QUARANTINED)


<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/47784?repo=metabase/metabase&commitHash=63736d4350f1e7bf0555d2698f21784a82330019&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

github-actions[bot] on (2024-11-18 15:39:41 UTC): <!---conventional commit reminder comment ID-->
@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

escherize on (2024-12-10 19:03:01 UTC): I am seeing the following warnings in the logs:

``` java
2024-12-10 18:46:57,758 WARN api.common :: Unexpected parameters at [:post ""/api/dashboard/10/dashcard/98/card/119/query""]: [:dashboard_id]
Please add them to the schema or remove them from the API client
```

We usually just ignore these (for better or worse), but there's a subtle thing here: in the [defendpoint definition](https://github.com/metabase/metabase/blob/ss%2Fdashboard-and-dashboard-question-page-updates/src/metabase/api/dashboard.clj#L1333-L1348), we are looking for (and getting) `dashboard-id` as a route param. But we also send them as `dashboard_id` in the request payload. Seems like they always match, but it may be better to send the dashboard id 1 way, what do you think?

github-actions[bot] on (2024-12-10 19:08:32 UTC): 👋 Deploying a preview environment for commit 63736d4350f1e7bf0555d2698f21784a82330019.
✅ Preview:
    https://pr47784.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2514544488,pull_request,closed,,Enable named aggregations in :offset expressions,"Fixes #47735

### Description

The schema didn't allow `:offset` expressions embedding `:aggregation-options` clauses.

### How to verify

Use the repro steps from from #47735. A BE test reproduces the repro steps.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-09-09 17:42:18+00:00,['metamben'],2024-09-10 22:34:49+00:00,2024-09-10 22:34:47+00:00,https://github.com/metabase/metabase/pull/47783,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2514506549,pull_request,closed,,[Notification] Channel template table and model,"4th bullet point of https://github.com/metabase/metabase/issues/47438
This introduce the channel_template table and its model",qnkhuat,2024-09-09 17:26:26+00:00,['qnkhuat'],2024-09-11 10:51:07+00:00,2024-09-11 10:34:40+00:00,https://github.com/metabase/metabase/pull/47782,"[('.Team/Workflows', 'aka BEC')]",[],
2514503692,pull_request,closed,,"🤖 backported ""Convey cancelation info when the client closes the connection""",#47740,github-automation-metabase,2024-09-09 17:24:45+00:00,"['metamben', 'github-automation-metabase']",2024-09-09 18:18:49+00:00,2024-09-09 18:18:48+00:00,https://github.com/metabase/metabase/pull/47781,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2514503364,pull_request,closed,,docs - snowflake connection update,Clarify account vs hostname connection.,jeff-bruemmer,2024-09-09 17:24:33+00:00,['jeff-bruemmer'],2024-10-09 21:07:09+00:00,2024-10-09 21:04:03+00:00,https://github.com/metabase/metabase/pull/47780,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2514496368,pull_request,closed,,docs - snowflake connection info,Update Snowflake connection docs to clarify connection via account vs host.,jeff-bruemmer,2024-09-09 17:20:32+00:00,['jeff-bruemmer'],2025-02-05 22:56:15+00:00,2025-02-05 22:56:12+00:00,https://github.com/metabase/metabase/pull/47779,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2514471688,pull_request,open,,Allow markdown in database/table/field descriptions,"Closes https://github.com/metabase/metabase/issues/15814

### Description

This adds support for markdown to database/table/field descriptions. There's already a `Markdown` component, so I've just replaced the containers for these fields using that Markdown component instead. For the `Detail` component I've added an `isMarkdown` prop as well, to avoid any issues with the use of the component by non-editable fields (e.g. it's used by the table name as well) - although this might not be necessary.

NB: I haven't added tests, but happy to do so if they're desired - if so, would appreciate some guidance on what a suitable level of testing would be for this change.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Open a database/table/field through the Databases menu
2. Edit a field so it includes markdown
3. The markdown should be rendered on saving.

### Demo

Some before/after screenshots:

<img width=""1209"" alt=""Screenshot 2024-09-02 at 21 40 41"" src=""https://github.com/user-attachments/assets/53433ce8-f790-4314-b90d-9b1a1a0e2797"">
<img width=""1209"" alt=""Screenshot 2024-09-02 at 21 39 36"" src=""https://github.com/user-attachments/assets/81d120bc-81ef-41e6-8b76-a673b79ae08a"">

<img width=""1209"" alt=""Screenshot 2024-09-02 at 21 40 48"" src=""https://github.com/user-attachments/assets/c98bb780-7eae-437d-8ff9-d9aaca75d19e"">
<img width=""1209"" alt=""Screenshot 2024-09-02 at 21 39 44"" src=""https://github.com/user-attachments/assets/d8fb24f8-0aa9-483c-9af6-7c5e81ccb746"">


### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",amardatar,2024-09-09 17:06:27+00:00,[],2025-01-22 01:31:05+00:00,,https://github.com/metabase/metabase/pull/47778,[],"[{'comment_id': 2603449758, 'issue_id': 2514471688, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2604209847, 'issue_id': 2514471688, 'author': 'amardatar', 'body': ""Hey @AlexVialaBellander @uladzimirdev just wanted to pick up your thoughts on this? I can see the previous PR #29549 was changing tooltips which I assume was where the rendering got a bit wacky.\r\n\r\nIn this case I'm only trying to change the docs pages, so the blast radius should be much smaller, and it's only affecting well-defined sections of the page (rather than tooltips being able to be anywhere on a page). Thinking is this is a good first step to hopefully looking at tooltips again (be great to have markdown in tooltips!) but this is a start."", 'created_at': datetime.datetime(2025, 1, 21, 9, 53, 44, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:07 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

amardatar (Issue Creator) on (2025-01-21 09:53:44 UTC): Hey @AlexVialaBellander @uladzimirdev just wanted to pick up your thoughts on this? I can see the previous PR #29549 was changing tooltips which I assume was where the rendering got a bit wacky.

In this case I'm only trying to change the docs pages, so the blast radius should be much smaller, and it's only affecting well-defined sections of the page (rather than tooltips being able to be anywhere on a page). Thinking is this is a good first step to hopefully looking at tooltips again (be great to have markdown in tooltips!) but this is a start.

"
2514377167,pull_request,closed,,Extract MetricEditor component from DatasetEditor,"Changes:
- Removes metrics from `DatasetEditor`. From now on, `DatasetEditor` will be used for models only.
- Creates a separate `MetricEditor` component. It is meant to be query builder-independent. 

How to verify:
- CI is green
- Try creating and editing metrics and compare with master",ranquild,2024-09-09 16:17:09+00:00,['ranquild'],2024-10-08 16:15:03+00:00,2024-09-10 14:24:48+00:00,https://github.com/metabase/metabase/pull/47774,"[('Type:Tech Debt', 'or Refactoring'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2514319930,pull_request,closed,,"🤖 backported ""fix: bigquery add null checks to result processing""","  #47590
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-09 15:48:28+00:00,"['snoe', 'github-automation-metabase']",2024-09-16 19:01:59+00:00,2024-09-16 19:01:58+00:00,https://github.com/metabase/metabase/pull/47773,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2514302229,pull_request,closed,,add capability to store session data locally and button to send the data to slack,"### Description

This adds the functionality to record sessions in Metabase. Before releasing, we need to make sure this is enabled only on status.metabase.com and local development.

tl;dr of the feature:
- when user opens metabase, rrweb package starts recording events to browser’s indexed database
- ~clicking on a button ""download bug report data"" will collect the database information, save it to json file and download it~
- this will be changed, we’ll be sending that to slack instead ✅
- we also collect network information to this database (rrweb does not collect it, although there seems to be a plugin in development for it) ✅ 
- no console legs yet, but will be added
- build information and debug information will be added as well
- data collected can be viewed and debugged using ""[metabase-debugger](https://github.com/metabase/metabase-debugger)"" which you can clone and run locally (we may add deployment too ✅  found [here](https://metabase-debugger.vercel.app/))

### things to consider:
- compressing data
- placement of the rrweb script 
- how to handle the fact we want to load this only on certain domains
- how can we make this play nice with debugging data we already have e.g. in the admin section

UPDATE 16th Sep 2024:
- the recording capability is now working
- setting a `MS_INTERNAL_BUILD` flag to `true` will enable the session recording
- bug reports are sent to [#bug-reports-internal](https://metaboat.slack.com/archives/C07MSLAUVK2) slack channel
- right now, json files can be downloaded from the slack channel and debugged on the [debugger app](https://metabase-debugger.vercel.app/) 
- in order for the recorder to be able to send the data, `MB_SLACK_BOT_TOKEN` needs to be set up
- currently, there is no build that would enable this anywhere. in order to make this into production (stats.metabase.com) we need to create a separate build with `MB_INTERNAL_BUILD` flag set to true

",filiphric,2024-09-09 15:40:26+00:00,['filiphric'],2024-09-26 21:01:07+00:00,2024-09-26 21:01:06+00:00,https://github.com/metabase/metabase/pull/47772,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2352705349, 'issue_id': 2514302229, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1174d9cc9ece3d5c03878adc2a7a1fa60216eb65...637f959db115afde705ffefe413bb48e3413433e.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/bug.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts |', 'created_at': datetime.datetime(2024, 9, 16, 11, 53, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2377929425, 'issue_id': 2514302229, 'author': 'iethree', 'body': 'Closing in favor of browser extension approach 👍', 'created_at': datetime.datetime(2024, 9, 26, 21, 1, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-16 11:53:55 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1174d9cc9ece3d5c03878adc2a7a1fa60216eb65...637f959db115afde705ffefe413bb48e3413433e.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/bug.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts |

iethree on (2024-09-26 21:01:06 UTC): Closing in favor of browser extension approach 👍

"
2514138723,pull_request,closed,,Add 2 more embedding toggle settings,"> [!note]
> The diff might look intimidating, but most of them are from 3 unit tests file
> Please refer to [this comment](https://github.com/metabase/metabase/pull/47770#discussion_r1755300862) that explains how to review that easier.

Closes https://github.com/metabase/metabase/issues/47766

### Description

Add embedding toggles to
- static embedding card
- static embedding settings page
- interactive embedding card
- interactive embedding settings page

### How to verify

### Demo
![image](https://github.com/user-attachments/assets/e592e316-905e-4cda-bfce-5de38a2bb2c5)


### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-09 14:30:47+00:00,['WiNloSt'],2024-09-12 10:59:30+00:00,2024-09-12 10:59:27+00:00,https://github.com/metabase/metabase/pull/47770,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2338289709, 'issue_id': 2514138723, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 7fbe16ecef3c5e904be1158c510a31c4676fd138...2b0dc0b0c6c13e466f71b21f2d809720045633a2.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx |', 'created_at': datetime.datetime(2024, 9, 9, 14, 32, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2344398119, 'issue_id': 2514138723, 'author': 'WiNloSt', 'body': '@iethree I want your feedback on the admin settings related change, but more other feedback are welcome.', 'created_at': datetime.datetime(2024, 9, 11, 18, 33, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-09 14:32:18 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 7fbe16ecef3c5e904be1158c510a31c4676fd138...2b0dc0b0c6c13e466f71b21f2d809720045633a2.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx |

WiNloSt (Issue Creator) on (2024-09-11 18:33:19 UTC): @iethree I want your feedback on the admin settings related change, but more other feedback are welcome.

"
2513937182,pull_request,closed,,Add snowplow to e2e docs,"### Description

A small improvement on e2e docs, mentioning snowplow in more detail",filiphric,2024-09-09 13:12:58+00:00,['filiphric'],2024-09-20 10:53:46+00:00,2024-09-20 10:50:41+00:00,https://github.com/metabase/metabase/pull/47765,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2513832041,pull_request,closed,,first iteration to scope sdk styles to our components,"
Most of the issues were caused by MetabaseProvider having css styles and passing it down to children, my solution was to remove all of them and moving them instead to the public component wrapper.

# Changes
- removes almost all css things applied to the provider
- moves them instead on the public component wrapper so that they don't leak into the host app
- adds to the public component wrapper some ""reset"" to prevent host app css to leak into our app



DEMO: https://www.loom.com/share/951197b0ef7e4112bac664f0d14865b9



Before:
- background color of the provider leaks in host app
- font family inside the provider is ours, not the host's
- font size also leaks from outside to inside (not shown)
<img width=""1001"" alt=""image"" src=""https://github.com/user-attachments/assets/dd10e2dd-85c3-409b-93cc-4ec5d2632f4b"">


After:

<img width=""1092"" alt=""image"" src=""https://github.com/user-attachments/assets/1b502cc7-4964-4cfb-b37d-973634871cb7"">



Code for the example:
```tsx
import { MetabaseProvider } from ""@metabase/embedding-sdk-react"";
import { Page } from ""./Page"";

const config = {
  metabaseInstanceUrl: ""http://localhost:3000"",
  jwtProviderUri: ""http://localhost:8888/api/sso"",
};

function App() {
  return (
    <div>
      <link rel=""preconnect"" href=""https://fonts.googleapis.com"" />
      <link
        rel=""preconnect""
        href=""https://fonts.gstatic.com""
        crossOrigin=""true""
      />

      <link
        href=""https://fonts.googleapis.com/css2?family=Sevillana&display=swap""
        rel=""stylesheet""
      ></link>
      <p>outside of the provider</p>
      <style>
        {`
          body {
            font-family: Sevillana, serif;
            color: #FFAAAA;
            background-color: #000000;
            font-size: 30px;
             font-weight: bold;
          }
            p,h1,h2,h3,h4,h5,h6 {
             text-decoration: underline;
            }
        `}
      </style>
      <MetabaseProvider
        //
        theme={
          {
            // fontFamily: ""Oswald, serif"",
            // fontSize: ""20px"",
          }
        }
        config={config}
      >
        <hr />
        <p>inside of the provider, should be the same as above</p>
        <Page />
      </MetabaseProvider>
    </div>
  );
}

export default App;
```

```tsx
import {
  CreateQuestion,
  ModifyQuestion,
  StaticQuestion,
  useMetabaseAuthStatus,
} from ""@metabase/embedding-sdk-react"";

export const Page = () => {
  const userStatus = useMetabaseAuthStatus();
  return (
    <div>
      <h1>Page</h1>
      <pre>{JSON.stringify(userStatus)}</pre>
      <StaticQuestion questionId={15} />
      <StaticQuestion questionId={3} />

      <ModifyQuestion
        isSaveEnabled={true}
        questionId={1}
        onSave={(data) => console.log(""Saved question"", data)}
        onBeforeSave={async (data) => {
          console.log(""Before save"", data);
        }}
      />
    </div>
  );
};
```",npretto,2024-09-09 12:28:58+00:00,['npretto'],2024-10-08 16:14:43+00:00,2024-09-13 17:16:20+00:00,https://github.com/metabase/metabase/pull/47764,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2337994316, 'issue_id': 2513832041, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 9, 12, 29, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2346429230, 'issue_id': 2513832041, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 49cfe35881a92d519d7ba16fd54890491bfd14a9...abf74149e151b777013ecbf0c53da1ca6664cec2.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 9, 12, 14, 16, 43, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-09 12:29:18 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-09-12 14:16:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 49cfe35881a92d519d7ba16fd54890491bfd14a9...abf74149e151b777013ecbf0c53da1ca6664cec2.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

"
2513724205,pull_request,closed,,[WIP] Expose Postgres Full-Text Search via API,"### Description

This is intended to achieve Milestone 1 of [Improved Search](https://github.com/metabase/metabase/issues/40964).

### TODO
- [x] Require a user setting / cookie to opt-in
- [x] Fix getting a different index between CI and dev",crisptrutski,2024-09-09 11:42:42+00:00,['crisptrutski'],2024-09-10 10:03:37+00:00,2024-09-10 10:03:35+00:00,https://github.com/metabase/metabase/pull/47763,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2337887513, 'issue_id': 2513724205, 'author': 'crisptrutski', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47763?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#47763** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47763?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#47752** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47752?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 9, 11, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2339876982, 'issue_id': 2513724205, 'author': 'qnkhuat', 'body': ""we don't have any entry into `(search.postgres/init!)` yet so it won't work on stats out of the box."", 'created_at': datetime.datetime(2024, 9, 10, 7, 26, 41, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-09 11:43:00 UTC): * **#47763** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47763?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#47752** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47752?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

qnkhuat on (2024-09-10 07:26:41 UTC): we don't have any entry into `(search.postgres/init!)` yet so it won't work on stats out of the box.

"
2513715599,pull_request,closed,,Update SDK version to 0.1.36,Update Readme version references and published npm package version to 0.1.36,github-automation-metabase,2024-09-09 11:38:28+00:00,"['heypoom', 'github-automation-metabase']",2024-10-08 16:15:08+00:00,2024-09-09 11:42:57+00:00,https://github.com/metabase/metabase/pull/47762,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2337879102, 'issue_id': 2513715599, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 9, 11, 38, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-09 11:38:50 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2513693646,pull_request,closed,,Add embedding SDK CORS tests,"Closes https://github.com/metabase/metabase/issues/47754

### Description

This PR makes sure to test the embedding SDK with proper CORS header by enabling `chromeWebSecurity` in Cypress option.

### How to verify

#### Prerequisites
1. Run storybook with:
    ```sh
    yarn storybook-embedding-sdk-cypress
    ```
1. Run Cypress with:
    ```sh
    yarn test-cypress-open-sdk
    ```

#### Tests

1. Run tests in `e2e/test/scenarios/embedding-sdk/static-dashboard.cy.spec.js`

You should observe that all Metabase requests response headers contains proper CORS headers.


### Demo

https://github.com/metabase/metabase/blob/0b2d1353ecc86fe526e43d5754b7cf575b3a62bb/enterprise/frontend/src/embedding-sdk/test/CommonSdkStoryWrapper.tsx#L21-L24

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-09-09 11:28:16+00:00,['WiNloSt'],2024-09-11 13:26:38+00:00,2024-09-11 13:26:35+00:00,https://github.com/metabase/metabase/pull/47761,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2341361248, 'issue_id': 2513693646, 'author': 'npretto', 'body': ""I ran the test and it runs locally, but are we sure the extra configuration (new env, new package.json commands, new things on storybook etc) is worth the cors test?\r\nThis test is testing the combination of:\r\n- BE header which is already tested on the BE (I think)\r\n- browser respecting CORS, which is unlikely to change, and we're \r\n- the FE behaviour, where we don't actually know if it's a CORS error or just a network error\r\n\r\nI'm note sure the e2e gives me much more confidence, especially because it's running on cypress"", 'created_at': datetime.datetime(2024, 9, 10, 16, 3, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2341454717, 'issue_id': 2513693646, 'author': 'WiNloSt', 'body': ""> I ran the test and it runs locally, but are we sure the extra configuration (new env, new package.json commands, new things on storybook etc) is worth the cors test? This test is testing the combination of:\r\n> \r\n> * BE header which is already tested on the BE (I think)\r\n> * browser respecting CORS, which is unlikely to change, and we're\r\n> * the FE behaviour, where we don't actually know if it's a CORS error or just a network error\r\n> \r\n> I'm note sure the e2e gives me much more confidence, especially because it's running on cypress\r\n\r\nActually they give me quite a lot of confidence that our settings will work in tandem. These tests actually test how `enable-embedding-sdk` will work together with `embedding-app-origins-sdk` and the feature flag `embedding-sdk`.\r\n\r\nWithout the [configuration change](https://docs.cypress.io/guides/guides/web-security#Set-chromeWebSecurity-to-false), CORS headers won't be asserted since Cypress will skip `cross-site` check. I was kind of wondering in the past why when I disabled embedding and didn't set a proper CORS origin, the Cypress tests still worked. These new tests eliminate that curiosity by testing everything."", 'created_at': datetime.datetime(2024, 9, 10, 16, 40, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343014275, 'issue_id': 2513693646, 'author': 'npretto', 'body': '> > I ran the test and it runs locally, but are we sure the extra configuration (new env, new package.json commands, new things on storybook etc) is worth the cors test? This test is testing the combination of:\r\n> > \r\n> > * BE header which is already tested on the BE (I think)\r\n> > * browser respecting CORS, which is unlikely to change, and we\'re\r\n> > * the FE behaviour, where we don\'t actually know if it\'s a CORS error or just a network error\r\n> > \r\n> > I\'m note sure the e2e gives me much more confidence, especially because it\'s running on cypress\r\n> \r\n> Actually they give me quite a lot of confidence that our settings will work in tandem. These tests actually test how `enable-embedding-sdk` will work together with `embedding-app-origins-sdk` and the feature flag `embedding-sdk`.\r\n> \r\n> Without the [configuration change](https://docs.cypress.io/guides/guides/web-security#Set-chromeWebSecurity-to-false), CORS headers won\'t be asserted since Cypress will skip `cross-site` check. I was kind of wondering in the past why when I disabled embedding and didn\'t set a proper CORS origin, the Cypress tests still worked. These new tests eliminate that curiosity by testing everything.\r\n\r\nI see, I\'m just worried about all the configurations and envs etc that we\'re adding to both the main app, and to the sdk, are increasing a bit too much, the package.json script section doesn\'t fit my 32"" 4k monitor anymore, with this pr it\'d be 96 lines.\r\n\r\nI understand the need for a proper e2e CORS test though, what about adding a specific cypress suite for CORS, and a a specific story that unsets the fetchToken function in the provider?', 'created_at': datetime.datetime(2024, 9, 11, 8, 39, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2343038117, 'issue_id': 2513693646, 'author': 'WiNloSt', 'body': ""> I understand the need for a proper e2e CORS test though, what about adding a specific cypress suite for CORS, and a a specific story that unsets the fetchToken function in the provider?\r\n\r\nThat's a good advice. I can make that happen."", 'created_at': datetime.datetime(2024, 9, 11, 8, 50, 21, tzinfo=datetime.timezone.utc)}]","npretto on (2024-09-10 16:03:39 UTC): I ran the test and it runs locally, but are we sure the extra configuration (new env, new package.json commands, new things on storybook etc) is worth the cors test?
This test is testing the combination of:
- BE header which is already tested on the BE (I think)
- browser respecting CORS, which is unlikely to change, and we're 
- the FE behaviour, where we don't actually know if it's a CORS error or just a network error

I'm note sure the e2e gives me much more confidence, especially because it's running on cypress

WiNloSt (Issue Creator) on (2024-09-10 16:40:53 UTC): Actually they give me quite a lot of confidence that our settings will work in tandem. These tests actually test how `enable-embedding-sdk` will work together with `embedding-app-origins-sdk` and the feature flag `embedding-sdk`.

Without the [configuration change](https://docs.cypress.io/guides/guides/web-security#Set-chromeWebSecurity-to-false), CORS headers won't be asserted since Cypress will skip `cross-site` check. I was kind of wondering in the past why when I disabled embedding and didn't set a proper CORS origin, the Cypress tests still worked. These new tests eliminate that curiosity by testing everything.

npretto on (2024-09-11 08:39:19 UTC): I see, I'm just worried about all the configurations and envs etc that we're adding to both the main app, and to the sdk, are increasing a bit too much, the package.json script section doesn't fit my 32"" 4k monitor anymore, with this pr it'd be 96 lines.

I understand the need for a proper e2e CORS test though, what about adding a specific cypress suite for CORS, and a a specific story that unsets the fetchToken function in the provider?

WiNloSt (Issue Creator) on (2024-09-11 08:50:21 UTC): That's a good advice. I can make that happen.

"
2513386787,pull_request,closed,,[Notification] Handlers + recipients,"The 3rd bullet point of milestone 1 in https://github.com/metabase/metabase/issues/47438

This introduces 2 tables : notification_handler and notification_recipient and utility function to create them",qnkhuat,2024-09-09 09:09:24+00:00,['qnkhuat'],2024-09-11 10:50:20+00:00,2024-09-11 10:39:59+00:00,https://github.com/metabase/metabase/pull/47759,"[('.Team/Workflows', 'aka BEC')]",[],
2513208790,pull_request,closed,,"🤖 backported ""[serdes] api: better error when archive looks weird""",#47721,github-automation-metabase,2024-09-09 08:00:30+00:00,"['piranha', 'github-automation-metabase']",2024-09-09 08:57:20+00:00,2024-09-09 08:57:19+00:00,https://github.com/metabase/metabase/pull/47756,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2513207433,pull_request,closed,,[Epic] Search in selection in entity picker,"Closes #47281
Closes #47182

### Description

This is a PR with integration branch for #47281
",kamilmielnik,2024-09-09 07:59:59+00:00,['kamilmielnik'],2024-10-08 08:05:10+00:00,2024-10-08 08:05:09+00:00,https://github.com/metabase/metabase/pull/47755,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2393798351, 'issue_id': 2513207433, 'author': 'romeovs', 'body': '@metabase/core-frontend-querying please review my additional changes to this PR', 'created_at': datetime.datetime(2024, 10, 4, 14, 6, 55, tzinfo=datetime.timezone.utc)}]","romeovs on (2024-10-04 14:06:55 UTC): @metabase/core-frontend-querying please review my additional changes to this PR

"
2512580525,pull_request,closed,,docs: add greptimedb community driver plugin,"
### Description

Add [GreptimeDB](https://github.com/GreptimeTeam/greptimedb-metabase-driver) to community driver.
",sunng87,2024-09-08 21:24:05+00:00,[],2024-10-01 03:08:45+00:00,2024-10-01 01:20:57+00:00,https://github.com/metabase/metabase/pull/47753,[],"[{'comment_id': 2350748282, 'issue_id': 2512580525, 'author': 'sunng87', 'body': ""@camsaul I assume I don't need to sign the CLA for this small change. Let me know if there is anything to add to get this merged. Thank you!"", 'created_at': datetime.datetime(2024, 9, 14, 0, 47, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2380865045, 'issue_id': 2512580525, 'author': 'sunng87', 'body': 'Looks like the ci failures are not related to this change.', 'created_at': datetime.datetime(2024, 9, 28, 18, 55, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2384595083, 'issue_id': 2512580525, 'author': 'perivamsi', 'body': 'This is merged through https://github.com/metabase/metabase/pull/48214', 'created_at': datetime.datetime(2024, 10, 1, 1, 20, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2384691062, 'issue_id': 2512580525, 'author': 'sunng87', 'body': '@perivamsi Thank you!', 'created_at': datetime.datetime(2024, 10, 1, 3, 8, 43, tzinfo=datetime.timezone.utc)}]","sunng87 (Issue Creator) on (2024-09-14 00:47:28 UTC): @camsaul I assume I don't need to sign the CLA for this small change. Let me know if there is anything to add to get this merged. Thank you!

sunng87 (Issue Creator) on (2024-09-28 18:55:34 UTC): Looks like the ci failures are not related to this change.

perivamsi on (2024-10-01 01:20:57 UTC): This is merged through https://github.com/metabase/metabase/pull/48214

sunng87 (Issue Creator) on (2024-10-01 03:08:43 UTC): @perivamsi Thank you!

"
2512378355,pull_request,closed,,Introduce Postgres-only search index,"Refs https://github.com/metabase/metabase/issues/40964

### Description

This pull request adds a full-text Postgres search index, and allows it to be swapped out for the `LIKE` based filtering in the in-place search implementation.

This is a first step towards an index-only based approach, to give us a feeling around the performance for populating and using the index, and exploring how the set of results is going to change.

Most of the code ends up being REPL stuff in /dev 😄 ",crisptrutski,2024-09-08 13:01:44+00:00,['crisptrutski'],2024-10-08 16:15:02+00:00,2024-09-10 16:12:47+00:00,https://github.com/metabase/metabase/pull/47752,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2340270014, 'issue_id': 2512378355, 'author': 'crisptrutski', 'body': "">  - guard this behind an env (please see my comment [here](https://metaboat.slack.com/archives/C0641E4PB9B/p1725954542220259?thread_ts=1725952430.590579&cid=C0641E4PB9B))\r\n\r\n> Also, I think the API PR didn't init the full text search, so if we deploy this on stats it won't work out of the box\r\n\r\nGood idea to gate on this setting too. I need to add a setting to opt-into creating the index anyway, just haven't gotten there yet. Will use the same setting for both.\r\n\r\n>  we add a permissions test for the fulltext implementation (I couldn't find any, lmk if I miss it)\r\n\r\nI'm happy to add some basic tests, but I'm not keen on this being a blocker for releasing any search engines. Part of the plan is to implement a non-hybrid approach that doesn't touch the entity tables themselves. The idea there is to add filtering and permissions bit by bit there, see [Milestone 2](https://github.com/metabase/metabase/issues/40964). So there will be a bit of a regression with that flavor in return for much better performance."", 'created_at': datetime.datetime(2024, 9, 10, 10, 24, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2340674081, 'issue_id': 2512378355, 'author': 'crisptrutski', 'body': ""> How do you plan to create the index on stats without a repl? I don't see any way to initialize it without one.\r\n\r\nFor Milestone 1 I'm thinking:\r\n\r\n1. During bootstrap if `postgres && feature-flag`\r\n2. Admin-only API to synchronously reindex.\r\n\r\nFor Milestone 2:\r\n\r\n1. Add: Periodic task which periodically reindexes.\r\n2. Add: hooks to reindex models when they or their related models change.\r\n3. Change Admin-only API to prompt job rather than do it directly.\r\n\r\nFor Milestone 3:\r\n\r\n1. Change: bootstrap to only run if `schema != expected`."", 'created_at': datetime.datetime(2024, 9, 10, 12, 56, 16, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-09-10 10:24:08 UTC): Good idea to gate on this setting too. I need to add a setting to opt-into creating the index anyway, just haven't gotten there yet. Will use the same setting for both.


I'm happy to add some basic tests, but I'm not keen on this being a blocker for releasing any search engines. Part of the plan is to implement a non-hybrid approach that doesn't touch the entity tables themselves. The idea there is to add filtering and permissions bit by bit there, see [Milestone 2](https://github.com/metabase/metabase/issues/40964). So there will be a bit of a regression with that flavor in return for much better performance.

crisptrutski (Issue Creator) on (2024-09-10 12:56:16 UTC): For Milestone 1 I'm thinking:

1. During bootstrap if `postgres && feature-flag`
2. Admin-only API to synchronously reindex.

For Milestone 2:

1. Add: Periodic task which periodically reindexes.
2. Add: hooks to reindex models when they or their related models change.
3. Change Admin-only API to prompt job rather than do it directly.

For Milestone 3:

1. Change: bootstrap to only run if `schema != expected`.

"
2511459591,pull_request,closed,,"🤖 backported ""fix(sdk): Fix entity ID logic to use the correct status""","  #47748
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-07 04:25:33+00:00,"['escherize', 'github-automation-metabase']",2025-02-04 18:14:29+00:00,2024-09-13 21:11:42+00:00,https://github.com/metabase/metabase/pull/47749,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2350226147, 'issue_id': 2511459591, 'author': 'escherize', 'body': ""We didn't backport the original stable entity IDs, so this backport isn't needed."", 'created_at': datetime.datetime(2024, 9, 13, 21, 11, 42, tzinfo=datetime.timezone.utc)}]","escherize (Assginee) on (2024-09-13 21:11:42 UTC): We didn't backport the original stable entity IDs, so this backport isn't needed.

"
2511308884,pull_request,closed,,fix(sdk): Fix entity ID logic to use the correct status,"For reasons, the `status` attribute in the `entity_id` API endpoint has been changed from `success` to `ok`, so we need to account for that if entity IDs are going to work in the SDK.",oisincoveney,2024-09-06 23:20:13+00:00,['oisincoveney'],2024-10-08 16:15:12+00:00,2024-09-07 04:24:44+00:00,https://github.com/metabase/metabase/pull/47748,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2511290581,pull_request,closed,,cleanup data reference tooltips,"[discussion](https://metaboat.slack.com/archives/C02H619CJ8K/p1725578482670289)

### Description

**Before**

Some short things get enormous tooltips

![Screen Shot 2024-09-06 at 4 49 31 PM](https://github.com/user-attachments/assets/b7d81885-b6d4-419d-a78a-879199bfe802)

Some long things don't get tooltips or ellipses at all

![Screen Shot 2024-09-06 at 4 49 48 PM](https://github.com/user-attachments/assets/2df36516-b923-48d9-857d-86ade95450ae)

**After**

Tooltips are a normal size, and long names get ellipsified properly

![Screen Shot 2024-09-06 at 4 52 01 PM](https://github.com/user-attachments/assets/9ddb2ce2-3796-410f-8bdf-617c21d50932)

There are still some cases where tooltips show up unnecessarily, but I didn't want to waste any more time on that.

![Screen Shot 2024-09-06 at 4 47 01 PM](https://github.com/user-attachments/assets/246034c2-d75f-42e1-bac4-c1562ddb11bc)

",iethree,2024-09-06 22:52:34+00:00,['iethree'],2024-09-13 22:52:19+00:00,2024-09-12 18:38:46+00:00,https://github.com/metabase/metabase/pull/47747,"[('Type:Bug', 'Product defects'), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2511285689,pull_request,closed,,Convert `ChartType` components to Mantine,"Converts the `ChartType` components to Mantine. This will help us with theming and customization within the Embedding SDK, and also just gives us a few more Mantine components to work with 😄 ",oisincoveney,2024-09-06 22:45:07+00:00,['oisincoveney'],2024-10-08 16:14:16+00:00,2024-09-27 09:06:24+00:00,https://github.com/metabase/metabase/pull/47745,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2334909367, 'issue_id': 2511285689, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d489654cba2e8063b710cc8e66a1889ea7d1a3fc...fe78c1e6e0440c8c2c82c65c4cea1d8be2bfc510.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx<br>frontend/src/metabase/ui/components/utils/Space/index.ts<br>frontend/src/metabase/ui/components/utils/index.ts |', 'created_at': datetime.datetime(2024, 9, 6, 22, 46, 28, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-06 22:46:28 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d489654cba2e8063b710cc8e66a1889ea7d1a3fc...fe78c1e6e0440c8c2c82c65c4cea1d8be2bfc510.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx<br>frontend/src/metabase/ui/components/utils/Space/index.ts<br>frontend/src/metabase/ui/components/utils/index.ts |

"
2511284008,pull_request,closed,,feat(sdk): Add chart viz selection for `InteractiveQuestion`,"Adds the Chart Type selectors to the `QuestionEditor` and `InteractiveQuestion`.

There is a few bits of hacky CSS that you will see in the diff - I am all ears in terms of fixing those, but I think I'll need to fix the `Visualization` component at some point to actually work as expected.

<img width=""1009"" alt=""image"" src=""https://github.com/user-attachments/assets/b29f40eb-06fa-42c3-a2d8-b409e6db8df7"">
",oisincoveney,2024-09-06 22:42:39+00:00,['oisincoveney'],2024-10-17 11:25:49+00:00,2024-10-14 09:07:36+00:00,https://github.com/metabase/metabase/pull/47744,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2379536993, 'issue_id': 2511284008, 'author': 'npretto', 'body': ""I'm running into a bit of issues when trying it with an <InteractiveQuestion />\r\n- the button is not visible unless hovered (i'm not customizing any theme)\r\n- the animation is very slow\r\n- the question doesn't seem to take up the space it should\r\nhttps://github.com/user-attachments/assets/f933a975-6df9-4cfd-97d0-041a6bdd2c14\r\n\r\nWith CreateQuestion it's working much better, only the button style still looks broken though\r\n\r\n\r\nhttps://github.com/user-attachments/assets/4f8ca509-abd5-48b1-9640-7755e37e4b50"", 'created_at': datetime.datetime(2024, 9, 27, 15, 22, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2402920773, 'issue_id': 2511284008, 'author': 'oisincoveney', 'body': ""@heypoom tomorrow morning when you have a chance, feel free to try this again. I noticed that there was a lot of div nesting and things that could be removed and hopefully solve the visualization sizing problem.\r\n\r\nI ended up going with a CSS grid solution and I think it's actually working."", 'created_at': datetime.datetime(2024, 10, 9, 17, 41, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2402923169, 'issue_id': 2511284008, 'author': 'heypoom', 'body': '@oisincoveney sure thing, will make sure to review this tomorrow. Thanks!', 'created_at': datetime.datetime(2024, 10, 9, 17, 42, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2405426908, 'issue_id': 2511284008, 'author': 'heypoom', 'body': ""@oisincoveney Sorry for the delay, just got time to play around with the PR! Here are some issues I noticed while testing. This is the entire setup:\r\n\r\n```tsx\r\n  <Box>\r\n    <InteractiveQuestion questionId={95} />\r\n  </Box>\r\n```\r\n\r\nFor the line chart, they are only visible when the chart type sidebar is visible. They became invisible once the chart type sidebar is hidden using the eye button.\r\n\r\n![CleanShot 2567-10-10 at 22 16 04@2x](https://github.com/user-attachments/assets/f305ae12-b37e-498c-9844-5f6b955ed32b)\r\n\r\nI think the boat image is supposed to be below the filter bar's line? Right now they look a bit strange.\r\n\r\n![CleanShot 2567-10-10 at 22 12 33@2x](https://github.com/user-attachments/assets/6ae205de-2c01-4195-b9eb-0b76ac7ae4f2)\r\n\r\n![CleanShot 2567-10-10 at 22 13 40@2x](https://github.com/user-attachments/assets/5c399013-0573-4cd4-bc86-d21ba04fe9fb)\r\n\r\nLooks like the chart type sidebar takes a lot more space than the visualization when the viewport is shrunk, or we don't have a lot of space (e.g. in a modal).\r\n\r\n![CleanShot 2567-10-10 at 22 21 28@2x](https://github.com/user-attachments/assets/9b999dff-c7b6-42bb-a83b-3681b39c2a59)\r\n\r\n![CleanShot 2567-10-10 at 22 17 18@2x](https://github.com/user-attachments/assets/a351200a-1e3c-4352-9981-906b768a26c7)\r\n\r\n![CleanShot 2567-10-10 at 22 20 45@2x](https://github.com/user-attachments/assets/b72f5047-4351-4616-b6ea-a1bf8de75557)\r\n\r\nAlso, I think we should add a prop to disable the visualization selector, and/or make it possible to collapse the chart type selection by default."", 'created_at': datetime.datetime(2024, 10, 10, 15, 23, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2408049037, 'issue_id': 2511284008, 'author': 'heypoom', 'body': 'Awesome work, the styling now looks good! I\'m testing this on Shoppy:\r\n\r\nHeight now shows up properly when the sidebar is hidden.\r\n\r\n![CleanShot 2567-10-12 at 02 57 35@2x](https://github.com/user-attachments/assets/8551d6e5-85fc-4ec4-a833-5d10658188b8)\r\n\r\n![CleanShot 2567-10-12 at 02 57 54@2x](https://github.com/user-attachments/assets/4cee3db3-53f8-4c5c-8ced-b8618c8f6069)\r\n\r\n![CleanShot 2567-10-12 at 03 00 08@2x](https://github.com/user-attachments/assets/69b63032-b721-4a25-a4d6-02cccd9ff9b5)\r\n\r\nVisualization type selection sidebar works well in narrow containers (e.g. centered modals)\r\n\r\n![CleanShot 2567-10-12 at 02 58 42@2x](https://github.com/user-attachments/assets/45683e61-a3ec-44bb-8f06-7332a5ccf832)\r\n\r\nThe ""No Results"" view shows up properly without positioning issues:\r\n\r\n![CleanShot 2567-10-12 at 03 00 59@2x](https://github.com/user-attachments/assets/0c0d3c64-c29e-4bbc-abfe-47e676fbde31)', 'created_at': datetime.datetime(2024, 10, 11, 20, 1, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2419144328, 'issue_id': 2511284008, 'author': 'oisincoveney', 'body': '@metabase-bot backport release-x.51.x', 'created_at': datetime.datetime(2024, 10, 17, 10, 23, 58, tzinfo=datetime.timezone.utc)}]","npretto on (2024-09-27 15:22:59 UTC): I'm running into a bit of issues when trying it with an <InteractiveQuestion />
- the button is not visible unless hovered (i'm not customizing any theme)
- the animation is very slow
- the question doesn't seem to take up the space it should
https://github.com/user-attachments/assets/f933a975-6df9-4cfd-97d0-041a6bdd2c14

With CreateQuestion it's working much better, only the button style still looks broken though


https://github.com/user-attachments/assets/4f8ca509-abd5-48b1-9640-7755e37e4b50

oisincoveney (Issue Creator) on (2024-10-09 17:41:25 UTC): @heypoom tomorrow morning when you have a chance, feel free to try this again. I noticed that there was a lot of div nesting and things that could be removed and hopefully solve the visualization sizing problem.

I ended up going with a CSS grid solution and I think it's actually working.

heypoom on (2024-10-09 17:42:49 UTC): @oisincoveney sure thing, will make sure to review this tomorrow. Thanks!

heypoom on (2024-10-10 15:23:26 UTC): @oisincoveney Sorry for the delay, just got time to play around with the PR! Here are some issues I noticed while testing. This is the entire setup:

```tsx
  <Box>
    <InteractiveQuestion questionId={95} />
  </Box>
```

For the line chart, they are only visible when the chart type sidebar is visible. They became invisible once the chart type sidebar is hidden using the eye button.

![CleanShot 2567-10-10 at 22 16 04@2x](https://github.com/user-attachments/assets/f305ae12-b37e-498c-9844-5f6b955ed32b)

I think the boat image is supposed to be below the filter bar's line? Right now they look a bit strange.

![CleanShot 2567-10-10 at 22 12 33@2x](https://github.com/user-attachments/assets/6ae205de-2c01-4195-b9eb-0b76ac7ae4f2)

![CleanShot 2567-10-10 at 22 13 40@2x](https://github.com/user-attachments/assets/5c399013-0573-4cd4-bc86-d21ba04fe9fb)

Looks like the chart type sidebar takes a lot more space than the visualization when the viewport is shrunk, or we don't have a lot of space (e.g. in a modal).

![CleanShot 2567-10-10 at 22 21 28@2x](https://github.com/user-attachments/assets/9b999dff-c7b6-42bb-a83b-3681b39c2a59)

![CleanShot 2567-10-10 at 22 17 18@2x](https://github.com/user-attachments/assets/a351200a-1e3c-4352-9981-906b768a26c7)

![CleanShot 2567-10-10 at 22 20 45@2x](https://github.com/user-attachments/assets/b72f5047-4351-4616-b6ea-a1bf8de75557)

Also, I think we should add a prop to disable the visualization selector, and/or make it possible to collapse the chart type selection by default.

heypoom on (2024-10-11 20:01:44 UTC): Awesome work, the styling now looks good! I'm testing this on Shoppy:

Height now shows up properly when the sidebar is hidden.

![CleanShot 2567-10-12 at 02 57 35@2x](https://github.com/user-attachments/assets/8551d6e5-85fc-4ec4-a833-5d10658188b8)

![CleanShot 2567-10-12 at 02 57 54@2x](https://github.com/user-attachments/assets/4cee3db3-53f8-4c5c-8ced-b8618c8f6069)

![CleanShot 2567-10-12 at 03 00 08@2x](https://github.com/user-attachments/assets/69b63032-b721-4a25-a4d6-02cccd9ff9b5)

Visualization type selection sidebar works well in narrow containers (e.g. centered modals)

![CleanShot 2567-10-12 at 02 58 42@2x](https://github.com/user-attachments/assets/45683e61-a3ec-44bb-8f06-7332a5ccf832)

The ""No Results"" view shows up properly without positioning issues:

![CleanShot 2567-10-12 at 03 00 59@2x](https://github.com/user-attachments/assets/0c0d3c64-c29e-4bbc-abfe-47e676fbde31)

oisincoveney (Issue Creator) on (2024-10-17 10:23:58 UTC): @metabase-bot backport release-x.51.x

"
2511219284,pull_request,closed,,fixup: Static embed dashboard and question endpoints (#47270),"* entity id translation + tests

* add api level test

* simplify definition of eid-table->model + add test

* update tests to take keywords

* improve comment

* generate the eid-table->model map

* delete now-obsolete test

* make it work in oss

* put the resulting response into a key, so we can add more information later

* formatting

* use model names without the model/ prefix as keys

* Creates list of `api/model->db-model`

- update keys for util/entity_id request
- update shape of util/entity_id response
- add test for not-found eids

* formatting

* Respond to code review feedback

* entity-ids work on /embed/{card,dashboard}* routes

* make entity id translation work for all tokens

* Merge branch 'static-embed-dashboard-and-question-endpoints' of github.com:metabase/metabase into static-embed-dashboard-and-question-endpoints

* massage schema. add tons of tests

* decode more eids

* test alignment

* don't require ns inside of itself :think:

* make the test functions to create tokens better

* bring back `dashboard-url`

---------

Co-authored-by: Oisin Coveney <oisin@metabase.com>

docs: clarify cumulative aggregations (#47545) (#47645)

* cumulative aggregations

* Apply suggestions from code review

* cumulative articles

* consolidate cumsum and cumcount articlesa

* links

* remove previews

* sort clarification

* Apply suggestions from code review

* link

---------

Co-authored-by: Alex Yarosh <alexandra@metabase.com>
Co-authored-by: Jeff Bruemmer <jeff.bruemmer@gmail.com>

fix hidden pivot table scroll bar in QB (#47629) (#47647)

* fix hidden pivot table scroll bar in QB

* Update Loki Snapshots

* Update Loki Snapshots

---------

Co-authored-by: Aleksandr Lesnenko <alxnddr@users.noreply.github.com>

perf: Add more timeseries insights optimizations (#47651) (#47662)

* perf: [insights] Optimize last-2 allocations

* perf: [insights] Optimize best-fit allocations when creating validation sample

* perf: [insights] Optimize simple-linear-regression

Co-authored-by: Oleksandr Yakushev <alex@bytopia.org>

[serdes] improve dir detection (#47653) (#47664)

Co-authored-by: Alexander Solovyov <alexander@solovyov.net>

docs - embedding params edits (#47635) (#47671)

Co-authored-by: Jeff Bruemmer <jeff.bruemmer@gmail.com>

newsletter-toggle-clicked event (#47410) (#47669)

* newsletter-toggle-clicked event

* use ValidateEvent,

* rename event -> simple_event and trackEvent -> trackSimpleEvent

* use the renamed trackSimpleEvent function

Co-authored-by: Nicolò Pretto <info@npretto.com>

Dashboard subscriptions and alerts should exclude archived cards (#47667)

(#47650)

Co-authored-by: Ngoc Khuat <qn.khuat@gmail.com>

add swc to gitignore (#47648)

Fix visualization with warnings doesn't work when embedding (#47622)

* Fix visualization with warnings doesn't work when embedding

* Clarify the test name

[insights] Simplify args to simple-linear-regresion (#47665) (#47678)

Co-authored-by: Oleksandr Yakushev <alex@bytopia.org>

fixup more tests

fix a test in api.embed-test

fix typo

fix dox typo

api.embed-test is passing

Add backport resolution script

perf: Miscellaneous card rendering improvements (#47679) (#47691)

* perf: Optimize reading rows into vectors in JDBC driver

* perf: Use direct interop when computing with-time-zone-same-instant

Co-authored-by: Oleksandr Yakushev <alex@bytopia.org>

Catch Errors in Download process and only write error message (#47482) (#47696)

* walk the error to remove any visualization settings

Thanks Dan for the patch, this approach is nice because it doesn't require changing all 3 streaming-response-writer implementations (json csv and xlsx). It keeps behaviour basically the same, but just cleans up the output to not include potentially sensitive column/dataset details.

* add a test that confirms json/csv errors are cleaned

* walk the error to remove any visualization settings

Thanks Dan for the patch, this approach is nice because it doesn't require changing all 3 streaming-response-writer implementations (json csv and xlsx). It keeps behaviour basically the same, but just cleans up the output to not include potentially sensitive column/dataset details.

* add a test that confirms json/csv errors are cleaned

* fix dataset error test

* cljfmt

* try to be a little more surgical with what we take out of the error

* formatting again, oops

* pass export format, only modify the obj for file exports

In the case of errors being saved to files, the obj is a map with a :status :failed key assoc'd by the qp somewhere along the way. The format-exception cond branch is not used in this case, so we can't rely on modifying `format-exception` to just dissoc ex-data.

Instead, I've kept the obj modification, but it excludes the query and the preprocessed keys, which are the only 2 keys where we see :viz-settings. This doesn't eliminate the problem of needing to exclude other keys in the future, but it does improve the surface area - the query and viz settings are the most likely candidates for holding potentially sensitive info.

I'd prefer to stick with this solution, as we can get a fix for the security concern in quicker, and perhaps a non-security bug can be opened regarding the most correct way to indicate errors to users whose downloads have failed.

* keep format-exception the same

* cleaner passing of export-format to write-error!

Co-authored-by: adam-james <21064735+adam-james-v@users.noreply.github.com>

Revert ""Hide upload config when data warehouse is attached"" (#47611) (#47666)

The way this was implemented, it also hid the section for management of uploaded CSV files.  Further, admins might want to intentionally switch from uploading to the data warehouse provided by Metabase to one of their own.

This reverts commit fbaf58ad032afd3283baa3d6c7fb056ac6a23b8a.

References: https://github.com/metabase/harbormaster/issues/5121
References: https://metaboat.slack.com/archives/C032LFJFANL/p1725296255637989
Co-authored-by: Dennis Schridde <63082+devurandom@users.noreply.github.com>

Hide attached DWH database details (#47419)

== Goal ==

Hide attached DWH database details from anyone incl. admins:
* Do not show them in the UI
* Do not permit to change them
* Do not serialize them

The aim is that customers cannot gain access to (parts of) credentials, and they cannot break a feature they are paying for by changing connection details.

Database details are already generally excluded from H2 dump snapshots (see `metabase.cmd.copy/*copy-h2-database-details*`), thus nothing changes there.

== Implementation ==

The Metabase backend already contains provisions in the implementation of `metabase.models.interface/to-json` for `:model/Database` to hide the `details` of the database in HTTP responses, if the user lacks write permission on the database.  We utilize this by adding an `is_attached_dwh` column to the `database` table and rejecting `metabase.models.interface/can-write?` when this flag is enabled.  In the ""admin"" UI, we show a replacement text instead of the edit form when the flag is set.  (It might be correct to show this whenever `details` is absent.  See below for possible follow-up work.)

However, several sections of the frontend code expected the `details` field to always be present.  In order to make `details` optional, as the backend seems to handle it, we fix the respective code to treat this case in the way that appears appropriate in the context.

== How to test ==

=== New behaviour ===

Setting the `is_attached_dwh` field hides the database details:

1. Configure a database as described in https://www.metabase.com/docs/latest/configuring-metabase/config-file#databases.
   - In addition to the fields you would normally set, also set `is_attached_dwh: true`.
   - This also works when adding this flag to a database that previously did not have this flag set.
2. Start your Metabase instance.
3. Verify the database shows up in the ""admin"" section (`/admin/databases`).
4. Verify that clicking the database to see its details only reveals ""This database cannot be modified.""
5. Verify that responses from the backend do not include a `details` field for this database.

=== Original behaviour ===

Behaviour without setting the `is_attached_dwh` field is unchanged:

1. Configure a database as described in https://www.metabase.com/docs/latest/configuring-metabase/config-file#databases.
   - Only set the fields you would normally set.  Do not set `is_attached_dwh` (or set it to `false`).
2. Start your Metabase instance.
3. Verify the database shows up in the ""admin"" section (`/admin/databases`).
4. Verify that clicking the database to see its details only reveal the regular edit form, showing connection fields like `host`, `user`, etc. with the values you configured.

== How this will be rolled out ==

1. Upgrade existing Metabase Cloud instances with data warehouse to a Metabase version that supports `is_attached_dwh`.
2. Set `is_attached_dwh` in the database section of the config file for Metabase Cloud instances with a data warehouse.

== Possible follow-up work ==

In https://github.com/metabase/metabase/issues/25715, absent `database.details` was identified as a bug.  Since then, `details` was made `NOT NULL` in the application database, so this bug can no longer occur.  However, today backend responses can be missing the `details` field, if the current user lacks write permission to the database setting (see above).  Fully re-evaluating #25715 in this context is outside the scope of this PR.

Closes: https://github.com/metabase/harbormaster/issues/5051
Backports: https://github.com/metabase/metabase/pull/47247
Backports: https://github.com/metabase/metabase/pull/47517
Backports: https://github.com/metabase/metabase/pull/47469
Backports: https://github.com/metabase/metabase/pull/47419
Co-authored-by: Dennis Schridde <63082+devurandom@users.noreply.github.com>

Fix Transparent disabled state on mantine switch label (#47677) (#47718)

* make custom disabled state more specific than transparent style

* make it less nesty

Co-authored-by: Ryan Laurie <30528226+iethree@users.noreply.github.com>

update docs (#47725)

Support field remapping in pivot queries (#47592) (#47693)

* Support field remapping in pivot queries

* Generate breakouts without inversions

Co-authored-by: metamben <103100869+metamben@users.noreply.github.com>

perf: Optimize some query processor functions (#47658) (#47716)

* perf: [metabase.util.performance] Faster mapv for small collections

* perf: Optimize some query processor functions

Co-authored-by: Oleksandr Yakushev <alex@bytopia.org>

🤖 backported ""recents updates to better support metrics"" (#47141)

* recents updates to better support metrics (#47032)

* recents updates to better support metrics

allows updating metric views through the API
improves parent_collection calculation

* add 2 tests for metrics

* 🤖 backported ""Entity id translation service""

---------

Co-authored-by: Bryan Maass <bryan.maass@gmail.com>

fix: sqlserver handle uniqueidentifier uuids (#47544) (#47638)

* fix: sqlserver handle uniqueidentifier uuids

Fixes #46148

Include sqlserver in `uuid-type` handling as its `uniqueidentifier` type stores uuids.

* Don't be so precise with varchar size

* Add seam for drivers to cast to text type

* Fix arg order

Co-authored-by: Case Nelson <case@metabase.com>

Always allow localhost:* on CORS (#47663) (#47710)

* Always allow localhost:* on CORS

* Use `embedding-app-origin-sdk` method for the headers

* Fix BE code formatting

* Fix BE formatting

Co-authored-by: Mahatthana (Kelvin) Nomsawadi <me@bboykelvin.dev>

🤖 backported ""Revert multiple inheritance with SnowflakeVariant"" (#47695)

* Revert multiple inheritance with SnowflakeVariant (#47680)

* Revert multiple inheritance with SnowflakeVariant (#47680)

* CI

---------

Co-authored-by: Alexander Polyankin <alexander.polyankin@metabase.com>

Entity id translation analytics (#47432)

* tracking entity id translation

* add total and more tests

* indentation

* realign the last test

* Backport fixups

🤖 backported ""upgrade webpack to address security issue"" (#47604)

Co-authored-by: Uladzimir Havenchyk <125459446+uladzimirdev@users.noreply.github.com>

Catch Errors in Download process and only write error message (#47482) (#47696)

* walk the error to remove any visualization settings

Thanks Dan for the patch, this approach is nice because it doesn't require changing all 3 streaming-response-writer implementations (json csv and xlsx). It keeps behaviour basically the same, but just cleans up the output to not include potentially sensitive column/dataset details.

* add a test that confirms json/csv errors are cleaned

* walk the error to remove any visualization settings

Thanks Dan for the patch, this approach is nice because it doesn't require changing all 3 streaming-response-writer implementations (json csv and xlsx). It keeps behaviour basically the same, but just cleans up the output to not include potentially sensitive column/dataset details.

* add a test that confirms json/csv errors are cleaned

* fix dataset error test

* cljfmt

* try to be a little more surgical with what we take out of the error

* formatting again, oops

* pass export format, only modify the obj for file exports

In the case of errors being saved to files, the obj is a map with a :status :failed key assoc'd by the qp somewhere along the way. The format-exception cond branch is not used in this case, so we can't rely on modifying `format-exception` to just dissoc ex-data.

Instead, I've kept the obj modification, but it excludes the query and the preprocessed keys, which are the only 2 keys where we see :viz-settings. This doesn't eliminate the problem of needing to exclude other keys in the future, but it does improve the surface area - the query and viz settings are the most likely candidates for holding potentially sensitive info.

I'd prefer to stick with this solution, as we can get a fix for the security concern in quicker, and perhaps a non-security bug can be opened regarding the most correct way to indicate errors to users whose downloads have failed.

* keep format-exception the same

* cleaner passing of export-format to write-error!

Co-authored-by: adam-james <21064735+adam-james-v@users.noreply.github.com>

Revert ""Hide upload config when data warehouse is attached"" (#47611) (#47666)

The way this was implemented, it also hid the section for management of uploaded CSV files.  Further, admins might want to intentionally switch from uploading to the data warehouse provided by Metabase to one of their own.

This reverts commit fbaf58ad032afd3283baa3d6c7fb056ac6a23b8a.

References: https://github.com/metabase/harbormaster/issues/5121
References: https://metaboat.slack.com/archives/C032LFJFANL/p1725296255637989
Co-authored-by: Dennis Schridde <63082+devurandom@users.noreply.github.com>

Hide attached DWH database details (#47419)

== Goal ==

Hide attached DWH database details from anyone incl. admins:
* Do not show them in the UI
* Do not permit to change them
* Do not serialize them

The aim is that customers cannot gain access to (parts of) credentials, and they cannot break a feature they are paying for by changing connection details.

Database details are already generally excluded from H2 dump snapshots (see `metabase.cmd.copy/*copy-h2-database-details*`), thus nothing changes there.

== Implementation ==

The Metabase backend already contains provisions in the implementation of `metabase.models.interface/to-json` for `:model/Database` to hide the `details` of the database in HTTP responses, if the user lacks write permission on the database.  We utilize this by adding an `is_attached_dwh` column to the `database` table and rejecting `metabase.models.interface/can-write?` when this flag is enabled.  In the ""admin"" UI, we show a replacement text instead of the edit form when the flag is set.  (It might be correct to show this whenever `details` is absent.  See below for possible follow-up work.)

However, several sections of the frontend code expected the `details` field to always be present.  In order to make `details` optional, as the backend seems to handle it, we fix the respective code to treat this case in the way that appears appropriate in the context.

== How to test ==

=== New behaviour ===

Setting the `is_attached_dwh` field hides the database details:

1. Configure a database as described in https://www.metabase.com/docs/latest/configuring-metabase/config-file#databases.
   - In addition to the fields you would normally set, also set `is_attached_dwh: true`.
   - This also works when adding this flag to a database that previously did not have this flag set.
2. Start your Metabase instance.
3. Verify the database shows up in the ""admin"" section (`/admin/databases`).
4. Verify that clicking the database to see its details only reveals ""This database cannot be modified.""
5. Verify that responses from the backend do not include a `details` field for this database.

=== Original behaviour ===

Behaviour without setting the `is_attached_dwh` field is unchanged:

1. Configure a database as described in https://www.metabase.com/docs/latest/configuring-metabase/config-file#databases.
   - Only set the fields you would normally set.  Do not set `is_attached_dwh` (or set it to `false`).
2. Start your Metabase instance.
3. Verify the database shows up in the ""admin"" section (`/admin/databases`).
4. Verify that clicking the database to see its details only reveal the regular edit form, showing connection fields like `host`, `user`, etc. with the values you configured.

== How this will be rolled out ==

1. Upgrade existing Metabase Cloud instances with data warehouse to a Metabase version that supports `is_attached_dwh`.
2. Set `is_attached_dwh` in the database section of the config file for Metabase Cloud instances with a data warehouse.

== Possible follow-up work ==

In https://github.com/metabase/metabase/issues/25715, absent `database.details` was identified as a bug.  Since then, `details` was made `NOT NULL` in the application database, so this bug can no longer occur.  However, today backend responses can be missing the `details` field, if the current user lacks write permission to the database setting (see above).  Fully re-evaluating #25715 in this context is outside the scope of this PR.

Closes: https://github.com/metabase/harbormaster/issues/5051
Backports: https://github.com/metabase/metabase/pull/47247
Backports: https://github.com/metabase/metabase/pull/47517
Backports: https://github.com/metabase/metabase/pull/47469
Backports: https://github.com/metabase/metabase/pull/47419
Co-authored-by: Dennis Schridde <63082+devurandom@users.noreply.github.com>

Fix Transparent disabled state on mantine switch label (#47677) (#47718)

* make custom disabled state more specific than transparent style

* make it less nesty

Co-authored-by: Ryan Laurie <30528226+iethree@users.noreply.github.com>

update docs (#47725)

Support field remapping in pivot queries (#47592) (#47693)

* Support field remapping in pivot queries

* Generate breakouts without inversions

Co-authored-by: metamben <103100869+metamben@users.noreply.github.com>

perf: Optimize some query processor functions (#47658) (#47716)

* perf: [metabase.util.performance] Faster mapv for small collections

* perf: Optimize some query processor functions

Co-authored-by: Oleksandr Yakushev <alex@bytopia.org>

🤖 backported ""recents updates to better support metrics"" (#47141)

* recents updates to better support metrics (#47032)

* recents updates to better support metrics

allows updating metric views through the API
improves parent_collection calculation

* add 2 tests for metrics

* 🤖 backported ""Entity id translation service""

---------

Co-authored-by: Bryan Maass <bryan.maass@gmail.com>

fix: sqlserver handle uniqueidentifier uuids (#47544) (#47638)

* fix: sqlserver handle uniqueidentifier uuids

Fixes #46148

Include sqlserver in `uuid-type` handling as its `uniqueidentifier` type stores uuids.

* Don't be so precise with varchar size

* Add seam for drivers to cast to text type

* Fix arg order

Co-authored-by: Case Nelson <case@metabase.com>

Always allow localhost:* on CORS (#47663) (#47710)

* Always allow localhost:* on CORS

* Use `embedding-app-origin-sdk` method for the headers

* Fix BE code formatting

* Fix BE formatting

Co-authored-by: Mahatthana (Kelvin) Nomsawadi <me@bboykelvin.dev>

🤖 backported ""Revert multiple inheritance with SnowflakeVariant"" (#47695)

* Revert multiple inheritance with SnowflakeVariant (#47680)

* Revert multiple inheritance with SnowflakeVariant (#47680)

* CI

---------

Co-authored-by: Alexander Polyankin <alexander.polyankin@metabase.com>

🤖 backported ""upgrade webpack to address security issue"" (#47604)

Co-authored-by: Uladzimir Havenchyk <125459446+uladzimirdev@users.noreply.github.com>

fix merge commit

> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",escherize,2024-09-06 21:30:25+00:00,[],2024-09-06 21:31:20+00:00,2024-09-06 21:31:16+00:00,https://github.com/metabase/metabase/pull/47743,[],[],
2511203705,pull_request,closed,,"🤖 backported ""Fix admin override for public actions""",#47717,github-automation-metabase,2024-09-06 21:14:56+00:00,"['noahmoss', 'github-automation-metabase']",2024-09-06 22:30:45+00:00,2024-09-06 22:30:44+00:00,https://github.com/metabase/metabase/pull/47742,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2511182098,pull_request,closed,,Convey cancelation info when the client closes the connection,"Fixes #47555

### Description

Bind `canceled-chan` when creating a streaming response. I tested the fix with presto because I did the repro with that, but the problem is much wider.

### How to verify

The modified `cancelation-test`, which doesn't succeed on timeout, should fail without the change in the production code and pass with it.

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-09-06 20:55:40+00:00,['metamben'],2024-09-09 17:23:57+00:00,2024-09-09 17:23:55+00:00,https://github.com/metabase/metabase/pull/47740,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2511175825,pull_request,closed,,"🤖 backported ""Simplify backend Snowplow API in preparation for migrating stats ping to Snowplow""","  #47687
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-06 20:50:09+00:00,"['noahmoss', 'github-automation-metabase']",2024-09-06 22:14:26+00:00,2024-09-06 22:14:25+00:00,https://github.com/metabase/metabase/pull/47739,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2511172341,pull_request,closed,,Update SDK version to 0.1.35,Update Readme version references and published npm package version to 0.1.35,github-automation-metabase,2024-09-06 20:47:28+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-08 16:15:14+00:00,2024-09-06 20:51:36+00:00,https://github.com/metabase/metabase/pull/47738,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2334787581, 'issue_id': 2511172341, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 6, 20, 47, 48, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-06 20:47:48 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2511079034,pull_request,closed,,Split ChartType components into files,"This PR:
- Splits `ChartType` components into separate files
- Moves the logic of displaying chart types away from the sidebar component into its own component (for use within the SDK)
- Removes the dependence of ML elements from the inner components (i.e. `question`, `result`, `query`) so we can give more customization options to users in the future. For example, maybe they want to use a list of visualizations rather than the current grid of circles


I'll fix the tests tomorrow (PDT) but if y'all have feedback on the code I would appreciate it.",oisincoveney,2024-09-06 19:34:22+00:00,['oisincoveney'],2024-10-08 16:15:13+00:00,2024-09-06 23:18:32+00:00,https://github.com/metabase/metabase/pull/47737,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2334694455, 'issue_id': 2511079034, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 9, 6, 19, 34, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334766751, 'issue_id': 2511079034, 'author': 'oisincoveney', 'body': '> Hey @oisincoveney 👋 The component separation looks good!\r\n> \r\n> I found that it is not possible to change viz type:\r\n> \r\n>  Screen.Recording.2024-09-06.at.4.26.58.PM.mov\r\n\r\nYep, just ran into that one right now 😅 working on it right now!', 'created_at': datetime.datetime(2024, 9, 6, 20, 31, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334778592, 'issue_id': 2511079034, 'author': 'oisincoveney', 'body': ""@alxnddr problem is solved! It was just a matter of some logic that shouldn't have been inside an `if` statement 🙃"", 'created_at': datetime.datetime(2024, 9, 6, 20, 40, 23, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-06 19:34:44 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

oisincoveney (Issue Creator) on (2024-09-06 20:31:12 UTC): Yep, just ran into that one right now 😅 working on it right now!

oisincoveney (Issue Creator) on (2024-09-06 20:40:23 UTC): @alxnddr problem is solved! It was just a matter of some logic that shouldn't have been inside an `if` statement 🙃

"
2511077361,pull_request,closed,,fix github job summary,"### Description

Fix github summary layout in case when one block contains failing tests in different files

![image](https://github.com/user-attachments/assets/4a117361-fdc2-4588-840b-0834fe707d94)


<img width=""1371"" alt=""image"" src=""https://github.com/user-attachments/assets/482c75ef-25a0-41d1-b2e0-9a28d411afe4"">

### fixed version

<img width=""1349"" alt=""image"" src=""https://github.com/user-attachments/assets/03fbaef7-238f-4f3d-adca-b4b3d2a589f9"">

",uladzimirdev,2024-09-06 19:33:01+00:00,['uladzimirdev'],2025-02-03 11:30:26+00:00,2025-02-03 11:30:26+00:00,https://github.com/metabase/metabase/pull/47736,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2510958387,pull_request,closed,,Hide temporal comparisons in the notebook editor for metrics,"Epic https://github.com/metabase/metabase/issues/47147
Closes https://github.com/metabase/metabase/issues/47701

Removes `Compare to the past` option in the AggregationPicker for metrics.

How to verify:
- New -> Metric -> Orders 
- Click on `Count` -> There should be no `Compare to the past` option
- Save
- Click `Show editor` to edit an ad-hoc question based on the metric
- Click on `Count` -> There should be the `Compare to the past` option

Metric editor:
<img width=""1317"" alt=""Screenshot 2024-09-06 at 14 40 15"" src=""https://github.com/user-attachments/assets/f0c3038b-dc7f-430e-b906-6fc65bab846c"">

Ad-hoc question based on a metric:
<img width=""1393"" alt=""Screenshot 2024-09-06 at 14 40 27"" src=""https://github.com/user-attachments/assets/46306687-0f28-4202-b0f0-d8d316c900ba"">
",ranquild,2024-09-06 18:08:32+00:00,['ranquild'],2024-09-06 20:40:15+00:00,2024-09-06 20:40:14+00:00,https://github.com/metabase/metabase/pull/47732,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2510922579,pull_request,closed,,Don't encrypt `site-locale`,Don't encrypt site locale. It's not a secret and doesn't need to be encrypted even if an encryption key is set.,johnswanson,2024-09-06 17:44:16+00:00,['johnswanson'],2024-10-08 16:14:59+00:00,2024-09-10 19:29:25+00:00,https://github.com/metabase/metabase/pull/47731,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2334677932, 'issue_id': 2510922579, 'author': 'noahmoss', 'body': ""Looks like there's a test failing which explicitly assumes that it can be encrypted..."", 'created_at': datetime.datetime(2024, 9, 6, 19, 21, 51, tzinfo=datetime.timezone.utc)}]","noahmoss on (2024-09-06 19:21:51 UTC): Looks like there's a test failing which explicitly assumes that it can be encrypted...

"
2510892902,pull_request,closed,,Enable advanced-permissions feature in public-action test,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",noahmoss,2024-09-06 17:26:50+00:00,['noahmoss'],2024-09-06 18:23:42+00:00,2024-09-06 18:23:42+00:00,https://github.com/metabase/metabase/pull/47730,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2334512212, 'issue_id': 2510892902, 'author': 'noahmoss', 'body': '* **#47730** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47730?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 6, 17, 27, 4, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-09-06 17:27:04 UTC): * **#47730** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47730?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2510875284,pull_request,closed,,handle errors without crashing in SliceNameWidget,"Thread https://metaboat.slack.com/archives/C05MPF0TM3L/p1725494736816499

### Description

To prevent the chart from crashing completely, we should return `null` instead of throwing an error when the correct `pieRow` cannot be found in `SliceNameWidget`. It's more preferable for the user to not be able to rename slices, than to not be able to see the chart entirely or remove it from a dashboard.

### How to verify

Confirm slice renaming still works

1. Create a pie chart (e.g. count of products by category)
2. Confirm you can rename slices in viz settings

### Demo

https://github.com/user-attachments/assets/484b4e07-f187-4fcb-8310-4a3a9589661a

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-09-06 17:14:50+00:00,['EmmadUsmani'],2024-10-08 16:15:07+00:00,2024-09-09 16:31:13+00:00,https://github.com/metabase/metabase/pull/47729,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2334493363, 'issue_id': 2510875284, 'author': 'EmmadUsmani', 'body': '* **#47729** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47729?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 9, 6, 17, 15, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334543187, 'issue_id': 2510875284, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d284a703016f7a33e87e079edc9500d8b29840da...3bb9f0f8e5156bd8c9fc4a2f146afcb2ffd4d4a4.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 9, 6, 17, 44, 37, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-09-06 17:15:04 UTC): * **#47729** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47729?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-09-06 17:44:37 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d284a703016f7a33e87e079edc9500d8b29840da...3bb9f0f8e5156bd8c9fc4a2f146afcb2ffd4d4a4.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.unit.spec.tsx |

"
2510752057,pull_request,closed,,fix test: make sure there is a db and perm group,,escherize,2024-09-06 16:01:20+00:00,['escherize'],2024-10-08 16:15:17+00:00,2024-09-06 17:39:34+00:00,https://github.com/metabase/metabase/pull/47728,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2510561288,pull_request,closed,,fix(sdk): remove usage of legacy query in static question,"Closes https://github.com/metabase/metabase/issues/47690

We do not need to pass in `query` anymore to `visualization.isSensible`, so we are safe to remove that from the viz selector in chart type sidebar.

### Demo

The visualization selector continues to work in the SDK's StaticQuestion, and in the main Metabase app.

<img src=""https://github.com/user-attachments/assets/dd5604ac-bb92-478a-bdba-49b3d958dc95"" width=""300"">
",heypoom,2024-09-06 14:23:07+00:00,['heypoom'],2024-09-09 11:21:18+00:00,2024-09-09 11:21:17+00:00,https://github.com/metabase/metabase/pull/47727,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2334178719, 'issue_id': 2510561288, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 43332678243e75fce5339b607568000e29a3d115...a279092d98431ddac39d1a9119770ef1655a5f9c.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts |', 'created_at': datetime.datetime(2024, 9, 6, 14, 24, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334469092, 'issue_id': 2510561288, 'author': 'uladzimirdev', 'body': '👏', 'created_at': datetime.datetime(2024, 9, 6, 17, 0, 22, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-06 14:24:31 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 43332678243e75fce5339b607568000e29a3d115...a279092d98431ddac39d1a9119770ef1655a5f9c.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts |

uladzimirdev on (2024-09-06 17:00:22 UTC): 👏

"
2510520320,pull_request,closed,,docs - update API docs for 50.24,Like it says on the tin.,jeff-bruemmer,2024-09-06 14:04:44+00:00,['jeff-bruemmer'],2024-09-06 14:16:53+00:00,2024-09-06 14:16:27+00:00,https://github.com/metabase/metabase/pull/47725,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2510493056,pull_request,closed,,perf: Use more efficient query validation when the argument is valid,"Currently, `matching-locations` is always used during query validation logic (triggered by Malli). That function creates a bunch of data structures and allocates objects so that it can record the matched path in case some form matches – and they most frequently do not match. The proposed change runs a cheaper alloc-free predicate first, and invokes `matching-locations` only if the cheap predicate passes.",alexander-yakushev,2024-09-06 13:52:38+00:00,['alexander-yakushev'],2024-10-01 22:14:37+00:00,2024-09-09 19:32:04+00:00,https://github.com/metabase/metabase/pull/47724,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2510463415,pull_request,closed,,Always show metrics and models in menu,"This is a follow up for https://github.com/metabase/metabase/pull/47277

### Description

After some discussion it was decided that we want to show the browse models and browse metrics link in the sidebar even when there are no models or metrics.

### How to verify


1. Make sure you delete all models and metrics
2. Both `models` and `metrics` should still show up in the sidebar and navigate to the correct pages
",romeovs,2024-09-06 13:38:11+00:00,['romeovs'],2024-10-08 16:14:58+00:00,2024-09-11 07:24:26+00:00,https://github.com/metabase/metabase/pull/47723,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2510439930,pull_request,closed,,Reduce frequency of release status messages,"
### Description

Reduces pre-release messages to ~1 day before release (from 3)
",iethree,2024-09-06 13:28:47+00:00,['iethree'],2024-10-08 16:15:19+00:00,2024-09-06 14:03:19+00:00,https://github.com/metabase/metabase/pull/47722,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2510438135,pull_request,closed,,[serdes] api: better error when archive looks weird,,piranha,2024-09-06 13:27:49+00:00,['piranha'],2024-10-01 22:15:31+00:00,2024-09-09 07:59:41+00:00,https://github.com/metabase/metabase/pull/47721,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2510435702,pull_request,closed,,"🤖 backported ""[serdes] option to dump full stacktraces on errors""","  #47676
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-09-06 13:26:31+00:00,"['piranha', 'github-automation-metabase']",2024-09-09 10:33:03+00:00,2024-09-09 10:33:02+00:00,https://github.com/metabase/metabase/pull/47720,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2510428987,pull_request,closed,,store user_parameter_value asynchronously,fixes #47660 ,piranha,2024-09-06 13:23:02+00:00,['piranha'],2024-09-11 14:57:15+00:00,2024-09-11 14:57:13+00:00,https://github.com/metabase/metabase/pull/47719,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2334177687, 'issue_id': 2510428987, 'author': 'dpsutton', 'body': ""Couple thoughts:\r\n\r\nthe 100ms seems quite fast. Why is hitting this 10 times every second better than hitting this once every 10 seconds?\r\n\r\nWe seem to care about `:default (:default parameter)` when getting all of the values, but it's not set in the update and not selected in the insert, so we ultimately just throw this information away. Why did we select it to not use it immediately after in `batched-insert!`?\r\n\r\nThis does a lot of repeated db calls. I actually wonder if this takes longer than 100ms if we start queueing up more db interactions. Is there a benefit to batching this a bit more? IE, right now it does `doseq ... t2/insert`.  Can we delete everything, from both the `to-delete` and `to-upsert` and then just do a single `t2/insert` style (maybe partitioned by some amount so it's not huge?)"", 'created_at': datetime.datetime(2024, 9, 6, 14, 23, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334189949, 'issue_id': 2510428987, 'author': 'piranha', 'body': ""@dpsutton TBH I chose 100 ms just to make it faster in tests, given there is a way to disable it for tests I can put whatever there, like maybe 5 seconds?\r\n\r\nDefaults influence how we treat `nil` in values, i.e. if there is a default value, then we should store `nil`s. Anyways, I really tried not to change the behavior itself so that the fix will take less time, but what I'd love to do is to have real `upsert` using respective approaches for different dbs.\r\n\r\nBut maybe you're right and delete/insert is a better way to go about it, because this loop is seriously irritating."", 'created_at': datetime.datetime(2024, 9, 6, 14, 30, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334226652, 'issue_id': 2510428987, 'author': 'dpsutton', 'body': 'This looks simpler.\r\n\r\nTwo more thoughts:\r\nWhen doing the deletions and insertions, if we get lots of values, those statements can get large quite quickly. Might be sensible to `doseq` over a `partition 5000` or something similar.\r\n\r\nYou mentioned `100ms` was a good interval for testing purposes. But you can also use [the wakup method](https://github.com/junegunn/grouper/blob/master/src/grouper/core.clj#L24) on the grouper instance to kick it when you want.\r\n\r\n```clojure\r\nprocess-userland-query=> (def foo (delay (grouper/start!\r\n                                           (fn [stuff]\r\n                                             (println ""i\'m computing stuff"" (count stuff)))\r\n                                           :capacity 500\r\n                                           :interval (* 50 1000))))\r\n#\'metabase.query-processor.middleware.process-userland-query/foo\r\nprocess-userland-query=> (grouper/submit! @foo 1)\r\nnil\r\nprocess-userland-query=> (doseq [_ (range 400)]\r\n                           (grouper/submit! @foo 1))\r\nnil\r\nprocess-userland-query=> (.wakeUp @foo)\r\nnil\r\ni\'m computing stuff 400\r\n\r\n```', 'created_at': datetime.datetime(2024, 9, 6, 14, 47, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2334238563, 'issue_id': 2510428987, 'author': 'piranha', 'body': 'Ah right partitions!\r\n\r\nAs for .wakeUp - there is a helper for tests to make in synchronous, works fairly well.', 'created_at': datetime.datetime(2024, 9, 6, 14, 53, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2336468854, 'issue_id': 2510428987, 'author': 'dpsutton', 'body': ""One more comment. I think we can do way less work. \r\n\r\nThe repro of this has 20 cards on a dashboard, and each query of that card will update the last used params. It's this flurry of of transactions that is causing issues. We should absolutely do less work than we are currently doing. We are kinda working around a central way to do this by grabbing parameters off of every query that we run. We should be smarter and actually just send this form state to the BE rather than try to sniff it out of every query and do a ton of extra work.\r\n\r\nBut in the meantime, maybe we should just hydrate the last used param values and see if they are even different before putting them into the transaction that updates them or inserts them. \r\n\r\nIn `metabase.query-processor.dashboard`, in `resolve-params-for-query`, we can add the hydration `(t2/hydrate :resolved-params :last_used_param_values)` (we're already grabbing the resolved-params, so add last used) and then just check which ones are different.\r\n\r\n#### before\r\n```clojure\r\n      (when (seq request-params)\r\n        (user-parameter-value/batched-upsert!\r\n         user-id dashboard-id\r\n         request-params))\r\n```\r\n\r\n#### after\r\n```clojure\r\n      (when (seq request-params)\r\n        (let [last-used (:last_used_param_values dashboard)\r\n              changed   (into []\r\n                              (filter (fn [param] (not= (get last-used (:id param)) (:value param))))\r\n                              request-params)]\r\n          (when (seq changed)\r\n            (user-parameter-value/batched-upsert! user-id dashboard-id changed))))\r\n```"", 'created_at': datetime.datetime(2024, 9, 7, 22, 26, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2336707429, 'issue_id': 2510428987, 'author': 'perivamsi', 'body': 'Separately (out of scope for this PR) we should explore sending the dashboard_id + user_id + parameters in a single API call instead of duplicating it at the query level.', 'created_at': datetime.datetime(2024, 9, 8, 14, 28, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2337283015, 'issue_id': 2510428987, 'author': 'piranha', 'body': ""@dpsutton to be honest, while better logic here makes sense, I'd be unhappy about db requests this adds on a main thread (the one that executes the query), and I think the better plan would be to merge the dumbest fix (what this pr has right now) and then just make frontend do a separate call to store those values (as I'd wish we did from the get go). Basically what @perivamsi said."", 'created_at': datetime.datetime(2024, 9, 9, 6, 59, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2338387206, 'issue_id': 2510428987, 'author': 'dpsutton', 'body': 'I agree we should make this stuff first class. I said that in my comment\r\n\r\n> We are kinda working around a central way to do this by grabbing parameters off of every query that we run. We should be smarter and actually just send this form state to the BE rather than try to sniff it out of every query and do a ton of extra work.\r\n\r\nIronically, doing this query every time makes us do fewer queries everytime.\r\n\r\non 50.24, we do 15 db calls per card query\r\n> POST /api/dashboard/10/dashcard/108/card/108/query 202 [ASYNC: completed] 128.4 ms (15 DB calls)\r\n\r\nif i patch this to fetch the last_used_param_values, it goes down to 14 calls per request.\r\n\r\n> POST /api/dashboard/10/dashcard/108/card/108/query 202 [ASYNC: completed] 99.9 ms (14 DB calls)\r\n\r\nThis is of course because we are doing two queries (and update and an insert) for every one to update the param values that were used. So adding one query saved us two mutation queries.\r\n\r\nUsing the patched jar from this PR I see the following:\r\n\r\n> POST /api/dashboard/10/dashcard/103/card/108/query 202 [ASYNC: completed] 143.4 ms (13 DB calls)\r\n\r\nCompared to the results from my optimization\r\n\r\n> POST /api/dashboard/10/dashcard/104/card/108/query 202 [ASYNC: completed] 154.3 ms (14 DB calls)', 'created_at': datetime.datetime(2024, 9, 9, 15, 9, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2338429696, 'issue_id': 2510428987, 'author': 'piranha', 'body': ""@dpsutton you still have to execute a read query per request right? Or do you mean adding it to the resulting batch writer?\r\n\r\nWe have `row-diff` right now which can select what's in there and return what needs to be inserted/updated/deleted, so this is a possibility for us, but maybe keeping it simple is better?"", 'created_at': datetime.datetime(2024, 9, 9, 15, 27, 47, tzinfo=datetime.timezone.utc)}]","dpsutton on (2024-09-06 14:23:58 UTC): Couple thoughts:

the 100ms seems quite fast. Why is hitting this 10 times every second better than hitting this once every 10 seconds?

We seem to care about `:default (:default parameter)` when getting all of the values, but it's not set in the update and not selected in the insert, so we ultimately just throw this information away. Why did we select it to not use it immediately after in `batched-insert!`?

This does a lot of repeated db calls. I actually wonder if this takes longer than 100ms if we start queueing up more db interactions. Is there a benefit to batching this a bit more? IE, right now it does `doseq ... t2/insert`.  Can we delete everything, from both the `to-delete` and `to-upsert` and then just do a single `t2/insert` style (maybe partitioned by some amount so it's not huge?)

piranha (Issue Creator) on (2024-09-06 14:30:24 UTC): @dpsutton TBH I chose 100 ms just to make it faster in tests, given there is a way to disable it for tests I can put whatever there, like maybe 5 seconds?

Defaults influence how we treat `nil` in values, i.e. if there is a default value, then we should store `nil`s. Anyways, I really tried not to change the behavior itself so that the fix will take less time, but what I'd love to do is to have real `upsert` using respective approaches for different dbs.

But maybe you're right and delete/insert is a better way to go about it, because this loop is seriously irritating.

dpsutton on (2024-09-06 14:47:17 UTC): This looks simpler.

Two more thoughts:
When doing the deletions and insertions, if we get lots of values, those statements can get large quite quickly. Might be sensible to `doseq` over a `partition 5000` or something similar.

You mentioned `100ms` was a good interval for testing purposes. But you can also use [the wakup method](https://github.com/junegunn/grouper/blob/master/src/grouper/core.clj#L24) on the grouper instance to kick it when you want.

```clojure
process-userland-query=> (def foo (delay (grouper/start!
                                           (fn [stuff]
                                             (println ""i'm computing stuff"" (count stuff)))
                                           :capacity 500
                                           :interval (* 50 1000))))
#'metabase.query-processor.middleware.process-userland-query/foo
process-userland-query=> (grouper/submit! @foo 1)
nil
process-userland-query=> (doseq [_ (range 400)]
                           (grouper/submit! @foo 1))
nil
process-userland-query=> (.wakeUp @foo)
nil
i'm computing stuff 400

```

piranha (Issue Creator) on (2024-09-06 14:53:34 UTC): Ah right partitions!

As for .wakeUp - there is a helper for tests to make in synchronous, works fairly well.

dpsutton on (2024-09-07 22:26:43 UTC): One more comment. I think we can do way less work. 

The repro of this has 20 cards on a dashboard, and each query of that card will update the last used params. It's this flurry of of transactions that is causing issues. We should absolutely do less work than we are currently doing. We are kinda working around a central way to do this by grabbing parameters off of every query that we run. We should be smarter and actually just send this form state to the BE rather than try to sniff it out of every query and do a ton of extra work.

But in the meantime, maybe we should just hydrate the last used param values and see if they are even different before putting them into the transaction that updates them or inserts them. 

In `metabase.query-processor.dashboard`, in `resolve-params-for-query`, we can add the hydration `(t2/hydrate :resolved-params :last_used_param_values)` (we're already grabbing the resolved-params, so add last used) and then just check which ones are different.

#### before
```clojure
      (when (seq request-params)
        (user-parameter-value/batched-upsert!
         user-id dashboard-id
         request-params))
```

#### after
```clojure
      (when (seq request-params)
        (let [last-used (:last_used_param_values dashboard)
              changed   (into []
                              (filter (fn [param] (not= (get last-used (:id param)) (:value param))))
                              request-params)]
          (when (seq changed)
            (user-parameter-value/batched-upsert! user-id dashboard-id changed))))
```

perivamsi on (2024-09-08 14:28:08 UTC): Separately (out of scope for this PR) we should explore sending the dashboard_id + user_id + parameters in a single API call instead of duplicating it at the query level.

piranha (Issue Creator) on (2024-09-09 06:59:24 UTC): @dpsutton to be honest, while better logic here makes sense, I'd be unhappy about db requests this adds on a main thread (the one that executes the query), and I think the better plan would be to merge the dumbest fix (what this pr has right now) and then just make frontend do a separate call to store those values (as I'd wish we did from the get go). Basically what @perivamsi said.

dpsutton on (2024-09-09 15:09:36 UTC): I agree we should make this stuff first class. I said that in my comment


Ironically, doing this query every time makes us do fewer queries everytime.

on 50.24, we do 15 db calls per card query

if i patch this to fetch the last_used_param_values, it goes down to 14 calls per request.


This is of course because we are doing two queries (and update and an insert) for every one to update the param values that were used. So adding one query saved us two mutation queries.

Using the patched jar from this PR I see the following:


Compared to the results from my optimization

piranha (Issue Creator) on (2024-09-09 15:27:47 UTC): @dpsutton you still have to execute a read query per request right? Or do you mean adding it to the resulting batch writer?

We have `row-diff` right now which can select what's in there and return what needs to be inserted/updated/deleted, so this is a possibility for us, but maybe keeping it simple is better?

"
2510409569,pull_request,closed,,"🤖 backported ""Fix Transparent disabled state on mantine switch label""",#47677,github-automation-metabase,2024-09-06 13:12:58+00:00,"['iethree', 'github-automation-metabase']",2024-09-06 13:45:09+00:00,2024-09-06 13:45:08+00:00,https://github.com/metabase/metabase/pull/47718,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2334031139, 'issue_id': 2510409569, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 64849ebdeab7aff8188f9c81e6aa47b951b3c64d...b68e9a1fbdf16b8d33bc10767444072cc6e6d3ec.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx |', 'created_at': datetime.datetime(2024, 9, 6, 13, 14, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-06 13:14:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 64849ebdeab7aff8188f9c81e6aa47b951b3c64d...b68e9a1fbdf16b8d33bc10767444072cc6e6d3ec.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx |

"
