id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2603713355,pull_request,closed,,"🤖 backported ""docs - various""",#48958,github-automation-metabase,2024-10-21 21:35:37+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-21 21:37:03+00:00,2024-10-21 21:37:02+00:00,https://github.com/metabase/metabase/pull/48964,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2603710946,pull_request,closed,,docs - sidesheets and exports,"- Adds note about info sidesheets
- Update on model persistence
- Adds new export settings for 51.",jeff-bruemmer,2024-10-21 21:33:55+00:00,['jeff-bruemmer'],2024-10-22 17:13:59+00:00,2024-10-22 17:10:52+00:00,https://github.com/metabase/metabase/pull/48963,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2603681902,pull_request,closed,,[QP] Fix query caching for pivot queries,"This was throwing errors trying to `nippy/freeze!` an Atom.

Closes #47284.

### Description

That was because in certain circumstances a pMBQL query can end up in
`(:json_query metadata)` for a query, and those can contain an atom
due to `metabase.lib.cache` and both `CachedMetadataProvider` and
`InvocationTracker`.

I added `lib.query/serializable` as a single location to strip out
anything that isn't serializable, such as atoms. (And the entire
`:lib/metadata`, which is a wasted effort to serialize.)


### How to verify

1. Turn on query caching
2. Make a pivot query slow enough to permit caching
3. Observer errors in the console without this change

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",bshepherdson,2024-10-21 21:16:21+00:00,['bshepherdson'],2024-10-23 11:48:34+00:00,2024-10-23 11:40:26+00:00,https://github.com/metabase/metabase/pull/48962,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2427735113, 'issue_id': 2603681902, 'author': 'bshepherdson', 'body': '* **#48962** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48962?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @bshepherdson and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 21, 21, 16, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2431857016, 'issue_id': 2603681902, 'author': 'bshepherdson', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 23, 11, 47, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2431861810, 'issue_id': 2603681902, 'author': 'github-actions[bot]', 'body': '@bshepherdson something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11479200831)', 'created_at': datetime.datetime(2024, 10, 23, 11, 48, 33, tzinfo=datetime.timezone.utc)}]","bshepherdson (Issue Creator) on (2024-10-21 21:16:38 UTC): * **#48962** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48962?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @bshepherdson and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

bshepherdson (Issue Creator) on (2024-10-23 11:47:21 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-23 11:48:33 UTC): @bshepherdson something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11479200831)

"
2603656738,pull_request,closed,,Expose model persistence refresh icon when model is still in creating state,"Little tweak to expose the model persistence ""refresh"" icon even before the model has been initially persisted, so that you can manually trigger it and not wait for the refresh task to run. 

Slack discussion: https://metaboat.slack.com/archives/C01LQQ2UW03/p1729542134085539

Before:
<img src='https://github.com/user-attachments/assets/15948fb1-af5c-4bf8-823b-af9c4bb5d15d' alt='' width=500/>

After:
<img src='https://github.com/user-attachments/assets/328f2f29-2d23-49bc-8886-a242b053c4cc' alt='' width=500/>

I've also added a ""disabled"" state for users who aren't admins or DB managers.",noahmoss,2024-10-21 21:00:21+00:00,['noahmoss'],2024-10-23 20:49:38+00:00,2024-10-23 19:15:24+00:00,https://github.com/metabase/metabase/pull/48961,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2427709025, 'issue_id': 2603656738, 'author': 'noahmoss', 'body': '* **#48961** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48961?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 21, 21, 0, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2429255144, 'issue_id': 2603656738, 'author': 'rafpaf', 'body': 'Maybe the ""add"" icon could work when the tooltip says ""Create now""? Or for the sake of clarity the button could have no icon, just the label ""Create model now"".', 'created_at': datetime.datetime(2024, 10, 22, 13, 13, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2430331363, 'issue_id': 2603656738, 'author': 'noahmoss', 'body': '@rafpaf Switched it to just saying `Create now` which I think feels reasonably clear in the context', 'created_at': datetime.datetime(2024, 10, 22, 21, 19, 15, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-21 21:00:39 UTC): * **#48961** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48961?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf on (2024-10-22 13:13:51 UTC): Maybe the ""add"" icon could work when the tooltip says ""Create now""? Or for the sake of clarity the button could have no icon, just the label ""Create model now"".

noahmoss (Issue Creator) on (2024-10-22 21:19:15 UTC): @rafpaf Switched it to just saying `Create now` which I think feels reasonably clear in the context

"
2603609554,pull_request,closed,,Fix native query preview for mongo,"Fixes https://github.com/metabase/metabase/issues/47793

How to verify:
- Add MongoDB sample DB
- New -> Question -> Orders -> Save
- Conver to Native
- Add a variable like `{ $match: { quantity: {{quantity}} }}` (see the included e2e test for the whole query)
- Click Preview
- It should work

<img width=""1325"" alt=""Screenshot 2024-10-21 at 23 05 47"" src=""https://github.com/user-attachments/assets/dc0c70ab-c585-49fc-9617-d5634efb153b"">
",ranquild,2024-10-21 20:37:48+00:00,['ranquild'],2024-10-22 18:06:48+00:00,2024-10-22 18:06:47+00:00,https://github.com/metabase/metabase/pull/48960,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2603576489,pull_request,closed,,Add athena and databricks logos for engines + setup flow,"Adds svg logos for Amazon Athena and Databricks.

![Screenshot 2024-10-21 at 4 29 45 PM](https://github.com/user-attachments/assets/e41867ac-7e6d-4f63-b3cf-734658a76045)
",kdoh,2024-10-21 20:20:26+00:00,['kdoh'],2024-10-22 17:18:01+00:00,2024-10-22 15:55:32+00:00,https://github.com/metabase/metabase/pull/48959,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2603575717,pull_request,closed,,docs - various,"- Note on tooltips
- Iframe allowed domains.",jeff-bruemmer,2024-10-21 20:20:00+00:00,['jeff-bruemmer'],2024-10-21 21:37:27+00:00,2024-10-21 21:34:45+00:00,https://github.com/metabase/metabase/pull/48958,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2603572141,pull_request,closed,,Do not localize c3p0 metric descriptions,"### Description

Remove localization for some additional metrics that were missed in #48896.

The admin settings allow you to download a json file with these values, but as far as I can tell the metric descriptions do not appear in the UI anywhere and therefore don't need to be localized.

### How to verify

Metrics are still published at `/metrics` endpoint

```
# HELP c3p0_num_connections C3P0 Number of connections
# TYPE c3p0_num_connections gauge
c3p0_num_connections{database=""metabase-h2-app-db"",} 4.0
```

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-21 20:17:55+00:00,['appleby'],2024-10-22 18:43:32+00:00,2024-10-22 17:37:25+00:00,https://github.com/metabase/metabase/pull/48957,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2603563665,pull_request,closed,,Dashboard verifications,"Closes https://github.com/metabase/metabase/issues/48954

### Description
Adds Moderation Status to the Dashboard entity in places like get Dashboard, recents and search.

### How to verify

1. Navigate to a dashboard, go to the actions menu and click ""Verify this Dashboard""
2. There should be a verified Icon in the dashboard header
3. navigate to the collections page and you should see a verified icon in the table.
4. Open the command palette. There should be a verified icon next to the dashboard in recents and search

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [x] FE Tests have been added/updated to cover changes in this PR
- [x] BE Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-21 20:13:03+00:00,"['escherize', 'npfitz']",2024-11-02 01:39:25+00:00,2024-11-02 01:39:23+00:00,https://github.com/metabase/metabase/pull/48956,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2450845294, 'issue_id': 2603563665, 'author': 'escherize', 'body': 'Searching for verified dashboards should be fixed now:\r\n\r\n## No verified filter:\r\n\r\n<img width=""1060"" alt=""Screenshot 2024-10-31 at 2 39 12\u202fPM"" src=""https://github.com/user-attachments/assets/8cdca938-3208-4fcb-9f58-4868e2b1a2a0"">\r\n\r\n\r\n## Verified only:\r\n\r\n<img width=""1062"" alt=""Screenshot 2024-10-31 at 2 39 15\u202fPM"" src=""https://github.com/user-attachments/assets/9320cfb7-b724-4586-9da4-f08e3d378fe8"">', 'created_at': datetime.datetime(2024, 10, 31, 21, 28, 37, tzinfo=datetime.timezone.utc)}]","escherize (Assginee) on (2024-10-31 21:28:37 UTC): Searching for verified dashboards should be fixed now:

## No verified filter:

<img width=""1060"" alt=""Screenshot 2024-10-31 at 2 39 12 PM"" src=""https://github.com/user-attachments/assets/8cdca938-3208-4fcb-9f58-4868e2b1a2a0"">


## Verified only:

<img width=""1062"" alt=""Screenshot 2024-10-31 at 2 39 15 PM"" src=""https://github.com/user-attachments/assets/9320cfb7-b724-4586-9da4-f08e3d378fe8"">

"
2603554236,pull_request,closed,,"🤖 backported ""Split View into components""",#48929,github-automation-metabase,2024-10-21 20:07:47+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-21 21:13:58+00:00,2024-10-21 21:13:57+00:00,https://github.com/metabase/metabase/pull/48955,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2603504151,pull_request,closed,,"🤖 backported ""fix: bigquery repeated records should not expose nested fields""",#48860,github-automation-metabase,2024-10-21 19:43:45+00:00,"['snoe', 'github-automation-metabase']",2024-10-21 20:59:19+00:00,2024-10-21 20:59:18+00:00,https://github.com/metabase/metabase/pull/48953,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2603426954,pull_request,closed,,Reset join condition state when the rhs table changes,"Fixes https://github.com/metabase/metabase/issues/46675

Case 1: source table change
- New -> Question -> Orders
- Join -> Reviews -> ID (LHS column). Do not pick the RHS column.
- Click on Orders -> Change to Products
- The draft join state should be reset; Reviews should not be present

Case 2: RHS table change
- New -> Question -> Orders
- Join -> Reviews -> ID (LHS column). Do not pick the RHS column.
- Click on Reviews -> Change to Orders
- The draft join state should be reset; the LHS column should not be selected and there should be a column picker opened.

<img width=""1088"" alt=""Screenshot 2024-10-21 at 15 24 40"" src=""https://github.com/user-attachments/assets/18945de9-99ba-451e-8346-2153620d3e60"">
",ranquild,2024-10-21 19:07:28+00:00,['ranquild'],2024-10-22 16:33:42+00:00,2024-10-22 16:33:40+00:00,https://github.com/metabase/metabase/pull/48951,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2603392333,pull_request,closed,,[Databricks] Use system's information schema during sync,"As per [discussion on slack](https://metaboat.slack.com/archives/C07L35T7UFQ/p1729519730751409?thread_ts=1729512048.097999&cid=C07L35T7UFQ), federated catalogs info must be searched in system's information schema. This PR adjusts sync to do that.",lbrdnk,2024-10-21 18:50:17+00:00,['lbrdnk'],2024-10-31 17:46:09+00:00,2024-10-31 16:50:42+00:00,https://github.com/metabase/metabase/pull/48950,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', ''), ('Database/Databricks', '')]","[{'comment_id': 2448586917, 'issue_id': 2603392333, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@lbrdnk You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 30, 22, 37, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2448588842, 'issue_id': 2603392333, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 78d29c9b065974b8e91a77128ae5cd7c10790b0d...4bb109258b3cb483c75efadc60b494ac199749b0.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/HideColumnAction/HideColumnAction.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/ChartSettingsFooter.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/ChartSettingsFooter.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/ChartSettingsVisualization.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/ChartSettingsVisualization.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/DashboardChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/DashboardChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/QuestionChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/hooks.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorPicker/ChartSettingColorPicker.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingInputNumeric.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingMaxCategories.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/constants/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/guards.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/other-series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/constants.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/option.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/label.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/label.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/action.js<br>frontend/src/metabase/visualizations/lib/action.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/text.ts<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/lock_filled.svg<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>src/metabase/email/alert_new_confirmation.mustache<br>src/metabase/email/messages.clj<br>src/metabase/email/new_user_invite.mustache<br>src/metabase/email/slack_token_error.mustache |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/CODENOTIFY<br>frontend/src/metabase/account/CODENOTIFY<br>frontend/src/metabase/auth/CODENOTIFY<br>frontend/src/metabase/home/CODENOTIFY<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/HeaderWithDismiss.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/NeedMoreInfoCard.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/SDKContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticEmbedContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/analytics.ts<br>frontend/src/metabase/home/components/EmbedHomepage/tests/EmbedHomepage.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/premium.unit.spec.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.unit.spec.tsx<br>frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/home/components/Onboarding/Onboarding.module.css<br>frontend/src/metabase/home/components/Onboarding/Onboarding.tsx<br>frontend/src/metabase/home/components/Onboarding/analytics.ts<br>frontend/src/metabase/home/components/Onboarding/index.ts<br>frontend/src/metabase/home/components/Onboarding/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/premium.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/setup.tsx<br>frontend/src/metabase/home/components/Onboarding/types.ts<br>frontend/src/metabase/lib/colors/CODENOTIFY<br>frontend/src/metabase/lib/colors/charts.ts<br>frontend/src/metabase/lib/colors/groups.ts<br>frontend/src/metabase/lib/colors/groups.unit.spec.ts<br>frontend/src/metabase/lib/colors/palette.ts<br>frontend/src/metabase/lib/colors/types.ts<br>frontend/src/metabase/setup/CODENOTIFY<br>frontend/src/metabase/sharing/CODENOTIFY<br>frontend/src/metabase/status/CODENOTIFY<br>frontend/src/metabase/timelines/CODENOTIFY |', 'created_at': datetime.datetime(2024, 10, 30, 22, 38, 52, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-30 22:37:45 UTC): <!---conventional commit reminder comment ID-->
@lbrdnk You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-30 22:38:52 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 78d29c9b065974b8e91a77128ae5cd7c10790b0d...4bb109258b3cb483c75efadc60b494ac199749b0.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/HideColumnAction/HideColumnAction.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/ChartSettingsFooter.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/ChartSettingsFooter.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsFooter/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/ChartSettingsVisualization.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/ChartSettingsVisualization.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/ChartSettingsVisualization/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/DashboardChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/DashboardChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/DashboardChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/QuestionChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/hooks.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/index.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/types.ts<br>frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsView.tsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorPicker/ChartSettingColorPicker.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingColorsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingInputNumeric.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingMaxCategories.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/constants/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/guards.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/other-series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/constants.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/option.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/label.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/label.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/action.js<br>frontend/src/metabase/visualizations/lib/action.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/text.ts<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/lock_filled.svg<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>src/metabase/email/alert_new_confirmation.mustache<br>src/metabase/email/messages.clj<br>src/metabase/email/new_user_invite.mustache<br>src/metabase/email/slack_token_error.mustache |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/CODENOTIFY<br>frontend/src/metabase/account/CODENOTIFY<br>frontend/src/metabase/auth/CODENOTIFY<br>frontend/src/metabase/home/CODENOTIFY<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/HeaderWithDismiss.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/NeedMoreInfoCard.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/SDKContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticEmbedContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/analytics.ts<br>frontend/src/metabase/home/components/EmbedHomepage/tests/EmbedHomepage.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/premium.unit.spec.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.unit.spec.tsx<br>frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/home/components/Onboarding/Onboarding.module.css<br>frontend/src/metabase/home/components/Onboarding/Onboarding.tsx<br>frontend/src/metabase/home/components/Onboarding/analytics.ts<br>frontend/src/metabase/home/components/Onboarding/index.ts<br>frontend/src/metabase/home/components/Onboarding/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/premium.unit.spec.tsx<br>frontend/src/metabase/home/components/Onboarding/tests/setup.tsx<br>frontend/src/metabase/home/components/Onboarding/types.ts<br>frontend/src/metabase/lib/colors/CODENOTIFY<br>frontend/src/metabase/lib/colors/charts.ts<br>frontend/src/metabase/lib/colors/groups.ts<br>frontend/src/metabase/lib/colors/groups.unit.spec.ts<br>frontend/src/metabase/lib/colors/palette.ts<br>frontend/src/metabase/lib/colors/types.ts<br>frontend/src/metabase/setup/CODENOTIFY<br>frontend/src/metabase/sharing/CODENOTIFY<br>frontend/src/metabase/status/CODENOTIFY<br>frontend/src/metabase/timelines/CODENOTIFY |

"
2603371715,pull_request,closed,,"🤖 backported ""Reset the question's viz settings when converting to a model""",#48939,github-automation-metabase,2024-10-21 18:40:58+00:00,"['ranquild', 'github-automation-metabase']",2024-10-21 19:48:44+00:00,2024-10-21 19:48:43+00:00,https://github.com/metabase/metabase/pull/48948,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2603351167,pull_request,closed,,Bump ring-core and ring-jetty-adapter,There was a new version that supports jetty 11.0.24 https://github.com/ring-clojure/ring/blob/master/CHANGELOG.md,paoliniluis,2024-10-21 18:31:56+00:00,['paoliniluis'],2024-10-22 08:13:22+00:00,2024-10-22 07:06:47+00:00,https://github.com/metabase/metabase/pull/48947,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2603334974,pull_request,closed,,Add temporal unit to display name,"This is the first part of the solution to https://github.com/metabase/metabase/issues/47579

### Description

_Removal of `formatColumn` and `getFriendlyName` in favor of `displayNameForColumn` on FE._ As mentioned in the linked issue, FE was formatting some of displayed names and appending temporal unit into those. Other display names were computed BE wise. This PR factors out `formatColumn`. Now correct display names are computed on the BE, including temporal unit.

_Display name of bucketed col now contains unit._ If the column is bucketed again, the new unit is appended. For details on the behavior see the new `temporal-bucket-test` namespace in qp tests.

_`:inherited-temporal-unit` was added._ To achieve the former, new options property was added to track whether column was bucketed on previous stages. This opens a way to reasonable follow-up: we can use it to provide only meaningful bucketing options in temporal bucket picker. More context on `:inherited-temporal-unit` can be found [on slack](Context [on slack](https://metaboat.slack.com/archives/C0645JP1W81/p1729524406416229).). Propagation of the property is tested in `calculation-test` namespace.

_Default temporal unit is now computed differently._ I've noticed (thanks to the e2e tests), that next stage bucketing sets fixed month default for already bucketed columns of previous stage. This generated situations as col bucketed by year had default bucketing set to month on a next stage. Hence this default was changed to none for columns with non default `:inherited-temporal-unit`. The change is captured in tests, either modfied e2e or BE 

_`middleware/auto-bucket-datetimes`_. One of the reasons it was decided for `:inherited-temporal-unit` was the fact that this middleware adds day bucketing to non-bucketed temporal fields. As we currently add bucketing to every field that ought to be bucketed on FE, this middleware may be redundant. As a follow-up, prometheus metrics should be added into it as _qeueries processed_, and _queries modified_, so we are sure whether this change would be safe.",lbrdnk,2024-10-21 18:24:45+00:00,['lbrdnk'],2024-11-20 13:01:15+00:00,2024-11-18 13:49:19+00:00,https://github.com/metabase/metabase/pull/48946,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2429529893, 'issue_id': 2603334974, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 09ee5aa2e8dcede18da0ddf03a905944059b79d7...c9806a3f6445a354b90399c2074c496a2dc93560.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/KeyValuePairChartTooltip/KeyValuePairChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/FunnelNormal.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/lib/warnings.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/Table.tsx |', 'created_at': datetime.datetime(2024, 10, 22, 15, 0, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2468027143, 'issue_id': 2603334974, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n![Static Badge](https://img.shields.io/badge/123947_tests-c9806a3f-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/0-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)\n\n\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48946?repo=metabase/metabase&commitHash=c9806a3f6445a354b90399c2074c496a2dc93560&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 11, 12, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-22 15:00:37 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 09ee5aa2e8dcede18da0ddf03a905944059b79d7...c9806a3f6445a354b90399c2074c496a2dc93560.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/KeyValuePairChartTooltip/KeyValuePairChartTooltip.tsx<br>frontend/src/metabase/visualizations/components/FunnelNormal.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/lib/warnings.js<br>frontend/src/metabase/visualizations/shared/settings/cartesian-chart.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/Table.tsx |

trunk-io[bot] on (2024-11-11 12:11:00 UTC): <!-- Trunk Test Analytics -->


![Static Badge](https://img.shields.io/badge/123947_tests-c9806a3f-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/0-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)


<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48946?repo=metabase/metabase&commitHash=c9806a3f6445a354b90399c2074c496a2dc93560&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)

</sub>

"
2603081929,pull_request,closed,,[DO NOT MERGE] POC of component testing for SDK,"### Description

This is a POC, not meant to be merged.
It's currently based of a template for webpack in plain js: ts is not supported and the folder has its own installation and configuration for cypress.

### Results

It works!
It loads the bundled sdk directly from the resources folder, without the need to re-install the package (it plays nice with [embedding-sdk:dev: --watch that makes ""fixed"" dts (+189 −53)](https://github.com/metabase/metabase/pull/48574))

I find writing the tests in this way a lot better than having to do the storybook story, write the test, load the correct page and pass the parameters etc.
You can see the migrated tests for font leaking here: https://github.com/metabase/metabase/pull/48943/files#diff-e527de6ab21a2982f1f097d7aa372438e82930007472521dc5092eac5bfba15e

The issue is that it's _a bit_ slow when the sdk is re-built, like 10-20 seconds sometimes and sometimes it seems just broken loading forever. When only the tests are changed it seems pretty fast though.




### How to test
For simplicity, this currently doesn't connect to the test db or test be.

- start the backend (and enable the sdk etc)
- `cd sdk-embedding-tests`
- `yarn`
- `NODE_OPTIONS=--max_old_space_size=8192 yarn cypress open` (we need the extra memory to make webpack not crash)

### Demo

<img width=""2681"" alt=""image"" src=""https://github.com/user-attachments/assets/659715c6-2025-4971-91ea-88f95b049cfa"">

",npretto,2024-10-21 16:27:22+00:00,['npretto'],2025-02-04 14:55:32+00:00,2024-10-29 09:04:27+00:00,https://github.com/metabase/metabase/pull/48943,"[('.Team/Embedding', '')]","[{'comment_id': 2429238772, 'issue_id': 2603081929, 'author': 'WiNloSt', 'body': 'This works as advertised. I like the approach more than using the storybook with our E2E test as this seems to be a lot more lightweight.', 'created_at': datetime.datetime(2024, 10, 22, 13, 7, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2443633006, 'issue_id': 2603081929, 'author': 'npretto', 'body': 'Closing this as it was only meant to gather feedback', 'created_at': datetime.datetime(2024, 10, 29, 9, 4, 27, tzinfo=datetime.timezone.utc)}]","WiNloSt on (2024-10-22 13:07:05 UTC): This works as advertised. I like the approach more than using the storybook with our E2E test as this seems to be a lot more lightweight.

npretto (Issue Creator) on (2024-10-29 09:04:27 UTC): Closing this as it was only meant to gather feedback

"
2603072030,pull_request,closed,,[Testing] new button -> go button,"
![Screen Shot 2024-10-21 at 10 22 23 AM](https://github.com/user-attachments/assets/27d7be07-b1fa-4dcb-a579-9e44cab2f9f9)
",iethree,2024-10-21 16:22:49+00:00,['iethree'],2024-11-12 23:52:02+00:00,2024-11-12 23:51:59+00:00,https://github.com/metabase/metabase/pull/48942,"[('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2427163656, 'issue_id': 2603072030, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 76ee656d510aecb75ab7a099e808fc5820def2b3.\n✅ Preview:\n    https://pr48942.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 21, 16, 31, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2471878309, 'issue_id': 2603072030, 'author': 'iethree', 'body': 'Good night, sweet prince\r\n\r\nsee also #49885', 'created_at': datetime.datetime(2024, 11, 12, 23, 51, 59, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-21 16:31:14 UTC): 👋 Deploying a preview environment for commit 76ee656d510aecb75ab7a099e808fc5820def2b3.
✅ Preview:
    https://pr48942.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

iethree (Issue Creator) on (2024-11-12 23:51:59 UTC): Good night, sweet prince

see also #49885

"
2602944602,pull_request,closed,,Convert Visualization Settings Actions to TS,"Converts the visualization actions to typescript. There's only two so it's relatively simple as a refactor. 

I also took the liberty to rename some of the dashcard function names to reflect that they are using the function made for dashboards, not the one for the query builder. Those names confused me for a little bit.",oisincoveney,2024-10-21 15:38:04+00:00,['oisincoveney'],2024-10-22 14:07:53+00:00,2024-10-22 13:22:29+00:00,https://github.com/metabase/metabase/pull/48941,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2602840369,pull_request,closed,,"🤖 backported ""Automate SDK release version numbers""",#48838,github-automation-metabase,2024-10-21 15:03:52+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-22 07:33:32+00:00,2024-10-22 07:33:31+00:00,https://github.com/metabase/metabase/pull/48940,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602806154,pull_request,closed,,Reset the question's viz settings when converting to a model,"Fixes https://github.com/metabase/metabase/issues/20624

This was discussed in Slack some time ago but I cannot find a thread now. The decision was to drop the viz settings during the conversion to a model to avoid issues like this.

How to verify:
- New -> Question -> Products -> Visualize
- Rename some of the columns via table column headers (i.e. viz settings) -> Save
- Dot menu -> Turn into a model -> Confirm
- The original column name is visible now and the user needs to modify the query metadata to make it work (which doesn't use viz settings)",ranquild,2024-10-21 14:51:59+00:00,['ranquild'],2024-10-21 18:39:27+00:00,2024-10-21 18:39:26+00:00,https://github.com/metabase/metabase/pull/48939,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2602789235,pull_request,closed,,"🤖 backported ""Fix - Actions are broken in 50.30 when Models are based on SQL""",#48927,metabase-bot[bot],2024-10-21 14:46:45+00:00,['kamilmielnik'],2024-10-22 07:50:39+00:00,2024-10-22 07:50:38+00:00,https://github.com/metabase/metabase/pull/48938,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602788720,pull_request,closed,,"🤖 backported ""Fix - Actions are broken in 50.30 when Models are based on SQL""",#48927,metabase-bot[bot],2024-10-21 14:46:35+00:00,['kamilmielnik'],2024-10-21 16:07:54+00:00,2024-10-21 16:07:53+00:00,https://github.com/metabase/metabase/pull/48937,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602643517,pull_request,closed,,"🤖 backported ""Make metabot centered again""",#48912,github-automation-metabase,2024-10-21 13:55:35+00:00,"['iethree', 'github-automation-metabase']",2024-10-21 14:57:37+00:00,2024-10-21 14:57:36+00:00,https://github.com/metabase/metabase/pull/48936,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2426763171, 'issue_id': 2602643517, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55865e11ccbdb366ad8cc5d06861af591cf4257c...7c903ca5662c60cd068a463718c19844f0ef3e80.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx |', 'created_at': datetime.datetime(2024, 10, 21, 13, 57, 2, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-21 13:57:02 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55865e11ccbdb366ad8cc5d06861af591cf4257c...7c903ca5662c60cd068a463718c19844f0ef3e80.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx |

"
2602637035,pull_request,closed,,"🤖 backported ""Hide time inputs in the date picker when the column does not support date+time filters""",#48818,github-automation-metabase,2024-10-21 13:53:38+00:00,"['ranquild', 'github-automation-metabase']",2024-10-21 14:36:12+00:00,2024-10-21 14:36:11+00:00,https://github.com/metabase/metabase/pull/48935,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602542325,pull_request,closed,,"🤖 backported ""Bump Toucan2 version""",#48919,github-automation-metabase,2024-10-21 13:20:05+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-10-21 14:02:05+00:00,2024-10-21 14:02:04+00:00,https://github.com/metabase/metabase/pull/48934,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602376270,pull_request,closed,,"🤖 backported ""upgrade jetty to 11.0.24 to mitigate DoS vulnerability""",#48819,github-automation-metabase,2024-10-21 12:18:28+00:00,"['piranha', 'github-automation-metabase']",2024-10-21 13:02:00+00:00,2024-10-21 13:01:59+00:00,https://github.com/metabase/metabase/pull/48931,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2602282917,pull_request,closed,,feat(sdk): improve password generation in the cli,"### Description

Use the main app's `generatePassword` method instead of rolling our own to generate passwords. We remove the reference to `MetabaseSettings` from the `generatePassword` method and pass it explicitly, so the CLI does not need to resolve the referenced modules (e.g. SVG assets).

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",heypoom,2024-10-21 11:41:15+00:00,['heypoom'],2025-02-04 15:19:53+00:00,2024-11-06 12:20:12+00:00,https://github.com/metabase/metabase/pull/48930,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2602257326,pull_request,closed,,Split View into components,Splits the `View` component in `View.jsx` into multiple components. I'm working on splitting some of the sidebar components out into their own components for the SDK and this will make things a little easier for the future.,oisincoveney,2024-10-21 11:31:22+00:00,['oisincoveney'],2024-10-21 21:14:24+00:00,2024-10-21 20:06:55+00:00,https://github.com/metabase/metabase/pull/48929,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2601985421,pull_request,closed,,Fix - Actions are broken in 50.30 when Models are based on SQL,"Fixes #48878

### Description

We're going to need to backport it to v51 and v50. Bug appeared in 0.50.28.6.

What was happening:
- this issue reproduces only when GET `/api/collection/root/items?models=dataset` ends before GET `/api/card/:id` (it's a race condition, you may hit it or not)
- GET `/api/collection/root/items?models=dataset` populates `entities.questions` in redux store (entity framework) with an incomplete card object (it does not have `dataset_query` attribute)
- `ActionViz/Action` component uses `useQuestionQuery` which will give this incomplete card from redux store (entity framework)

### How to verify

CI is green.
The new test fails if run in `master`.
Stress test: https://github.com/metabase/metabase/actions/runs/11442473756",kamilmielnik,2024-10-21 09:50:00+00:00,['kamilmielnik'],2024-10-21 15:11:22+00:00,2024-10-21 15:11:21+00:00,https://github.com/metabase/metabase/pull/48927,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2426899998, 'issue_id': 2601985421, 'author': 'kamilmielnik', 'body': '@metabase-bot backport release-x.51.x', 'created_at': datetime.datetime(2024, 10, 21, 14, 45, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2426900182, 'issue_id': 2601985421, 'author': 'kamilmielnik', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 21, 14, 45, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2426907563, 'issue_id': 2601985421, 'author': 'kamilmielnik', 'body': 'I set `no-backport` label on this PR because I called the bot manually (see above)', 'created_at': datetime.datetime(2024, 10, 21, 14, 48, 18, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-21 14:45:48 UTC): @metabase-bot backport release-x.51.x

kamilmielnik (Issue Creator) on (2024-10-21 14:45:52 UTC): @metabase-bot backport release-x.50.x

kamilmielnik (Issue Creator) on (2024-10-21 14:48:18 UTC): I set `no-backport` label on this PR because I called the bot manually (see above)

"
2601966666,pull_request,closed,,"🤖 backported ""run prettier on sdk readme""",#48905,github-automation-metabase,2024-10-21 09:43:56+00:00,"['npretto', 'github-automation-metabase']",2024-10-21 12:39:52+00:00,2024-10-21 12:39:51+00:00,https://github.com/metabase/metabase/pull/48926,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2601824863,pull_request,closed,,[Backport 50] Use case expression type inference logic similar to annotate middleware in MLv2 (#47902),Backport of the PR #47902 into `release-x.50.x`.,lbrdnk,2024-10-21 08:50:30+00:00,['lbrdnk'],2024-10-31 17:03:48+00:00,2024-10-31 17:03:13+00:00,https://github.com/metabase/metabase/pull/48923,[],[],
2598844914,pull_request,closed,,Bump Toucan2 version,Contains some of the latest performance improvements.,alexander-yakushev,2024-10-19 07:16:00+00:00,['alexander-yakushev'],2024-10-21 14:02:33+00:00,2024-10-21 13:18:59+00:00,https://github.com/metabase/metabase/pull/48919,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2598633085,pull_request,closed,,fix pie chart labels are hidden when they should not be,"Closes https://github.com/metabase/metabase/issues/48587

### Description

- Fix pie chart labels available space computation
- Truncate labels when they are too long

### How to verify

- Create a pie/sunburst chart with labels and percentages inside slices enabled
- Ensure it truncates labels instead of hiding them fully

### Demo

Top-left label is not visible even without truncation.

Before
<img width=""518"" alt=""Screenshot 2024-10-21 at 9 49 58 PM"" src=""https://github.com/user-attachments/assets/c6183269-9de1-43f5-9c4a-8b50789d6b09"">

After
<img width=""535"" alt=""Screenshot 2024-10-21 at 9 49 34 PM"" src=""https://github.com/user-attachments/assets/587e86b3-3af5-42d5-97d2-0643e0352343"">

Before
<img width=""619"" alt=""Screenshot 2024-10-21 at 11 41 33 PM"" src=""https://github.com/user-attachments/assets/fdb38a40-af5b-48d4-b38e-c21f7839b3fb"">

After
<img width=""630"" alt=""Screenshot 2024-10-21 at 11 41 44 PM"" src=""https://github.com/user-attachments/assets/29c85b66-bc78-40cc-bf96-089d1a8b6807"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-19 01:20:10+00:00,['alxnddr'],2024-10-22 18:20:50+00:00,2024-10-22 18:20:49+00:00,https://github.com/metabase/metabase/pull/48918,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2598599508,pull_request,closed,,"🤖 backported ""Modularize metabase.pulse; add metabase.pulse.core API namespace""","  #48640
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-19 00:11:38+00:00,"['camsaul', 'github-automation-metabase']",2024-10-30 18:52:40+00:00,2024-10-30 18:52:37+00:00,https://github.com/metabase/metabase/pull/48916,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2598484393,pull_request,closed,,"🤖 backported ""fix react warnings""",#48564,github-automation-metabase,2024-10-18 22:21:23+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-11-04 09:28:30+00:00,2024-11-04 09:28:29+00:00,https://github.com/metabase/metabase/pull/48914,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2598455598,pull_request,closed,,"🤖 backported ""More grouped metrics data""",#48900,github-automation-metabase,2024-10-18 21:52:40+00:00,"['escherize', 'github-automation-metabase']",2024-10-18 22:35:59+00:00,2024-10-18 22:35:58+00:00,https://github.com/metabase/metabase/pull/48913,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2598419877,pull_request,closed,,Make metabot centered again,"
### Description

Center the tooltip on the metabot logo. Removes deprecated tooltip component while we're at it.


![Screen Shot 2024-10-18 at 3 28 12 PM](https://github.com/user-attachments/assets/ff8f63f5-a2a8-41a0-a8d7-891fe4550c65)
",iethree,2024-10-18 21:30:52+00:00,['iethree'],2024-10-21 14:58:04+00:00,2024-10-21 13:54:44+00:00,https://github.com/metabase/metabase/pull/48912,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2423261485, 'issue_id': 2598419877, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a249c0bc37e5b7deeb4fba59023e428b784e9728...a97221757cc049495c467d2d57efb08b63e6a497.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx |', 'created_at': datetime.datetime(2024, 10, 18, 21, 32, 23, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 21:32:23 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a249c0bc37e5b7deeb4fba59023e428b784e9728...a97221757cc049495c467d2d57efb08b63e6a497.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/HomeGreeting/HomeGreeting.tsx |

"
2598304428,pull_request,closed,,Prep for enabling multi-arch docker builds + Java 21,"## Description

This will all help smooth the way for Soon ™️  releasing java 21 images and enabling multi-arch builds

1. Updates github actions versions for docker actions (ours were starting to throw deprecation warnings)
![Screen Shot 2024-10-24 at 6 37 05 AM](https://github.com/user-attachments/assets/8b1e9a5c-c189-4e3b-a42f-a63e64c4b504)

3. simplifies release actions for docker pushing
4. adds testing for Java 21 (but doesn't release anything on it yet)

[discussion](https://metaboat.slack.com/archives/C864UT5CZ/p1729280788168099)
[test multi-arch images, the end goal](https://hub.docker.com/r/iethree/metabase/tags)

",iethree,2024-10-18 20:06:44+00:00,['iethree'],2024-11-26 18:51:41+00:00,2024-11-08 16:27:48+00:00,https://github.com/metabase/metabase/pull/48910,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2435852338, 'issue_id': 2598304428, 'author': 'paoliniluis', 'body': 'Fixes https://github.com/metabase/metabase/issues/13119', 'created_at': datetime.datetime(2024, 10, 24, 17, 5, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2455745207, 'issue_id': 2598304428, 'author': 'iethree', 'body': '> Fixes #13119\r\n\r\nnot quite, but when we get there (probably v52 or v53), this will make it easy to flip the switch', 'created_at': datetime.datetime(2024, 11, 4, 21, 32, 43, tzinfo=datetime.timezone.utc)}]","paoliniluis on (2024-10-24 17:05:21 UTC): Fixes https://github.com/metabase/metabase/issues/13119

iethree (Issue Creator) on (2024-11-04 21:32:43 UTC): not quite, but when we get there (probably v52 or v53), this will make it easy to flip the switch

"
2598299343,pull_request,closed,,remove deprecated button from stories,Removes old Button story from storybook to avoid confusion.,kdoh,2024-10-18 20:02:45+00:00,['kdoh'],2024-11-26 18:52:29+00:00,2024-10-18 20:46:17+00:00,https://github.com/metabase/metabase/pull/48909,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2598175284,pull_request,closed,,Sanatize props passed to icons,"### Description
Ever since switching the `<Icon>` prop to be a box, we have had a large number of invalid dom prop warnings in the app. Even just loading the home screen causes a handful. This change sanitizes the props that are being passed to Box so that only valid Mantine style props make it through


### How to verify
1. Open the home page and look at the console
2. Rejoice as it's not completely filled with red (though there is an invalid dom nesting warning still there)

### Demo
before:
![image](https://github.com/user-attachments/assets/1514cf14-d696-4e37-b491-42de290ec749)

",npfitz,2024-10-18 18:48:05+00:00,['npfitz'],2024-10-31 19:24:00+00:00,2024-10-31 19:24:00+00:00,https://github.com/metabase/metabase/pull/48908,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2423049478, 'issue_id': 2598175284, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff aa72eb83aebd2adc3dbd700d28f1b7d18b2e0987...7b5ab6602493a7a647112d7472c865e4b08f5c44.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx |', 'created_at': datetime.datetime(2024, 10, 18, 18, 49, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 18:49:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff aa72eb83aebd2adc3dbd700d28f1b7d18b2e0987...7b5ab6602493a7a647112d7472c865e4b08f5c44.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx |

"
2598142569,pull_request,closed,,`with-dynamic-redefs`: clarify infinite loop,This was really confusing to me for a while before I figured it out and found the relevant example - especially because the test would pass the first time and fail on all subsequent runs. :sob:,johnswanson,2024-10-18 18:29:26+00:00,['johnswanson'],2025-02-04 15:09:33+00:00,2025-02-04 01:31:11+00:00,https://github.com/metabase/metabase/pull/48907,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2426563509, 'issue_id': 2598142569, 'author': 'crisptrutski', 'body': 'Since Cam tripped over the same thing I agree that we need to do *something* about this foot gun.\r\n\r\nPerhaps it makes more sense to do some static tree-walking to find naked references in the new definitions?', 'created_at': datetime.datetime(2024, 10, 21, 12, 42, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2426582144, 'issue_id': 2598142569, 'author': 'johnswanson', 'body': '> It looks like this could use a test\r\n\r\nDoh - thanks for fixing that, I can add one for sure.\r\n\r\n> I worry that this is a bit limiting, for example maybe the function is meant to be recursive, and does terminate?\r\n\r\n> Since Cam tripped over the same thing I agree that we need to do something about this foot gun.\r\n\r\n> Perhaps it makes more sense to do some static tree-walking to find naked references in the new definitions?\r\n\r\nThe concern about functions that are intentionally recursive is fair. Another option would be to capture the args in the ""already called"" set as well, though of course someone could do something odd (e.g. a recursive function that\'s waiting for some side effect to occur).\r\n\r\nI can absolutely see something like `t2/insert!` calling a before-insert hook that calls `t2/insert!` on some other model. Capturing the args would work for that.\r\n\r\nBut I do like the tree-walking idea, seems more robust, plus a better experience (you\'ll get the errors when you first eval the code instead of the second time you run the test).', 'created_at': datetime.datetime(2024, 10, 21, 12, 50, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449529, 'issue_id': 2598142569, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557369, 'issue_id': 2598142569, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 11, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-10-21 12:42:12 UTC): Since Cam tripped over the same thing I agree that we need to do *something* about this foot gun.

Perhaps it makes more sense to do some static tree-walking to find naked references in the new definitions?

johnswanson (Issue Creator) on (2024-10-21 12:50:21 UTC): Doh - thanks for fixing that, I can add one for sure.




The concern about functions that are intentionally recursive is fair. Another option would be to capture the args in the ""already called"" set as well, though of course someone could do something odd (e.g. a recursive function that's waiting for some side effect to occur).

I can absolutely see something like `t2/insert!` calling a before-insert hook that calls `t2/insert!` on some other model. Capturing the args would work for that.

But I do like the tree-walking idea, seems more robust, plus a better experience (you'll get the errors when you first eval the code instead of the second time you run the test).

github-actions[bot] on (2025-01-21 01:30:50 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:11 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2598126368,pull_request,closed,,Dashboard filter columns be fixes,"Closes #48441
Closes #48884

### How to verify

Check that the E2E tests pass.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",metamben,2024-10-18 18:20:16+00:00,[],2024-10-24 22:30:05+00:00,2024-10-24 22:26:17+00:00,https://github.com/metabase/metabase/pull/48906,[],[],
2598125399,pull_request,closed,,run prettier on sdk readme,"## Why
~I opened it, changed a file, saved it and it all changed, which makes me sad~

The formatting on the code samples were not consistent with formatting, there shouldn't be any downside in having the readme formatted by prettier.

I also added it to the lint-staged rules, so that we don't have to rely on people having prettier on the IDE

# Non formatting changes

Due to some snippets being technically not valid code, there are some code changes.
Mostly `{...}` being modified into
```tsx
{
  //...
}
```
I also modified some
````
```typescript jsx
````
into
````
```tsx
````
To make them consistent",npretto,2024-10-18 18:19:31+00:00,['npretto'],2024-10-21 12:40:20+00:00,2024-10-21 09:43:07+00:00,https://github.com/metabase/metabase/pull/48905,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2423004862, 'issue_id': 2598125399, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 18, 18, 19, 52, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 18:19:52 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2598116951,pull_request,closed,,"🤖 backported ""feat(sdk): `defineEmbeddingSdkConfig` to make typing easier """,#48879,github-automation-metabase,2024-10-18 18:13:28+00:00,"['npretto', 'github-automation-metabase']",2024-10-18 19:33:37+00:00,2024-10-18 19:33:36+00:00,https://github.com/metabase/metabase/pull/48904,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2598078026,pull_request,closed,,"🤖 backported ""rework ChartSettings to typescript""",#48877,github-automation-metabase,2024-10-18 17:48:57+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-18 18:31:20+00:00,2024-10-18 18:31:19+00:00,https://github.com/metabase/metabase/pull/48903,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2422961710, 'issue_id': 2598078026, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1f26097a5691454c29f50f82a7d767e9389aaa6d...bee966f47508827d4e5e3538dffeaa4424dd9675.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |', 'created_at': datetime.datetime(2024, 10, 18, 17, 50, 25, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 17:50:25 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1f26097a5691454c29f50f82a7d767e9389aaa6d...bee966f47508827d4e5e3538dffeaa4424dd9675.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |

"
2598069024,pull_request,closed,,Questions in dashboards,"This is not reviewable, I'm creating it as non-draft solely to trigger CI.

Dashboard Questions! 🎉 ",johnswanson,2024-10-18 17:44:30+00:00,['johnswanson'],2025-02-04 15:09:39+00:00,2025-01-30 13:59:32+00:00,https://github.com/metabase/metabase/pull/48902,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2623320837, 'issue_id': 2598069024, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 30, 1, 30, 52, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-30 01:30:52 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

"
2598055060,pull_request,closed,,"🤖 backported ""Do not localize prometheus metric descriptions""",#48896,github-automation-metabase,2024-10-18 17:35:29+00:00,"['appleby', 'github-automation-metabase']",2024-10-18 19:10:23+00:00,2024-10-18 19:10:22+00:00,https://github.com/metabase/metabase/pull/48901,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597980175,pull_request,closed,,More grouped metrics data,"- [x] [Adds query_executions_by_source_24h and entity_id_translations_last_24h](https://github.com/metabase/metabase/commit/da1ca0c83b370ce8f9be1e12a4f6c8c0011fe198)

- [x] Adds post-cleanup hook for clearing things after the stat ping is sent

- [x] Adds `deep-string-keywords` to make sure we don't send through keywords (which _is_ easy to do if you are in a hurry).

Notes:

reuses the query for `query-executions` to generate `query-executions-24h`, with a test to make sure `after?` is done right.
",escherize,2024-10-18 16:49:41+00:00,['escherize'],2024-10-18 22:36:24+00:00,2024-10-18 21:51:40+00:00,https://github.com/metabase/metabase/pull/48900,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2597959519,pull_request,closed,,"🤖 backported ""Adds export description when unformatted option is selected""",#48869,github-automation-metabase,2024-10-18 16:38:56+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-18 17:57:34+00:00,2024-10-18 17:57:33+00:00,https://github.com/metabase/metabase/pull/48899,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597952102,pull_request,closed,,"Better Onboarding: Introduce ""Admin onboarding checklist""","### What does this PR accomplish?
- Resolves #48387
- Resolves #49092

Here's a short Loom overview for your convenience: https://www.loom.com/share/0c0e4b87668b4fda8b75f9554df47c98

> [!TIP]
> All of the information you need to review this PR is in the previously linked _Milestone_ and _Testing plan_ issues. But the tl;dr is:
>
> **We're adding an onboarding checklist page whose link will show only (1) for admins, (2) on instances that are younger than 31 days, (3) when Metabase is not running in embedded mode, and (4) when application name is not whitelabelled.**

This is the first component that uses fresh new `use-temp-storage` hook in order to remember the last opened accordion item.

### Note re: Accordion custom styling (and style overrides)
You will notice somewhat ugly CSS hacks `.foo:not([data-css-specificity-hack=""🪗""])` that are currently needed to override:
1. the default Mantine styles
2. our custom accordion theme overrides

> [!NOTE]
> There is a plan to tidy up the Accordion component according to our Design System guidelines, but the design is still WIP. The hacks are put in place temporarily in order to unblock this PR.
> 
> See: https://github.com/metabase/metabase/issues/49162

### Testing

If you want to manually test this, there is an ephemeral instance linked in the comment section below.

<details>

<summary>Click to expand and see the list of all test results</summary>

Unit
```
 PASS  frontend/src/metabase/nav/containers/MainNavbar/MainNavbar.unit.spec.tsx (9.029 s)
  nav > containers > MainNavbar
    homepage link
      ○ skipped should render
      ○ skipped should be highlighted if selected
    how to use Metabase
      ✓ should render for admins (351 ms)
      ✓ should not render for non-admins (173 ms)
      ✓ should be highlighted if selected (156 ms)
      ✓ should render if the instance was created less than 30 days ago (216 ms)
      ✓ should not render if the instance was created more than 30 days ago (323 ms)
```

```
 PASS  frontend/src/metabase/home/components/Onboarding/tests/common.unit.spec.tsx (14.263 s)
  Onboarding
    ✓ should have four sections by default (621 ms)
    ✓ 'database' accordion item should be open by default (187 ms)
    ✓ should be possible to open a different item (212 ms)
    ✓ only one item can be expanded at a time (219 ms)
    'Set up your Metabase' section
      ✓ 'add database' item should render properly (143 ms)
      ✓ 'invite people' item should render properly (115 ms)
    'Start visualizing your data' section
      ✓ 'x-ray' item should render properly (148 ms)
      ✓ 'x-ray' CTA should not render if x-rays are disabled (63 ms)
      ✓ 'notebook' item should render properly (132 ms)
      ✓ 'sql' item should render properly (126 ms)
      ✓ 'dashboard' item should render properly (126 ms)
      ✓ should not render CTA for the example dashboard if example dashboard doesn't exist (107 ms)
    'Get email updates and alerts' section
      ✓ 'subscription' item should render properly (142 ms)
      ✓ should not render CTA for the example dashboard if example dashboard doesn't exist (57 ms)
      ✓ should not render subscription email and slack setup links for hosted instances (67 ms)
      ✓ should not render alert email and slack setup links for hosted instances (60 ms)
      ✓ 'alert' item should render properly (128 ms)
      ✓ 'alert' item docs links (58 ms)
      ✓ should not render subscription email and Slack setup links for hosted instances (64 ms)
      ✓ should not render alert email and Slack setup links for hosted instances (59 ms)
      ✓ should not render CTA for the example question if example dashboard doesn't exist (59 ms)
    footer
      ✓ should render the 'learning' section (68 ms)
      ✓ should not render the 'help' section (66 ms)
```

```
 PASS  frontend/src/metabase/home/components/Onboarding/tests/enterprise.unit.spec.tsx (6.703 s)
  Onboarding (EE without token)
    'Set up your Metabase' section
      ✓ 'invite people' should show the default copy without the activated token (1562 ms)
    footer
      ✓ should render the 'learning' section (143 ms)
      ✓ should not render the 'help' section (90 ms)
```

```
 PASS  frontend/src/metabase/home/components/Onboarding/tests/premium.unit.spec.tsx (6.674 s)
  Onboarding (EE with token)
    'Set up your Metabase' section
      ✓ 'invite people' should have a tailored copy for the starter and pro plans (1481 ms)
    documentation links
      ✓ should not render for 'sql' item (114 ms)
      ✓ should not render for 'dashboard' item (84 ms)
      ✓ should not render for 'alert' item (72 ms)
    footer
      ✓ should not render the 'learning' section is `showMetabaseLinks` has been turned off in whitelabeling (116 ms)
      ✓ should render the 'help' section for paid plans (98 ms)
```

E2E
![image](https://github.com/user-attachments/assets/eb669c16-e3c1-44d9-b447-ceed523a6da2)
</details>",nemanjaglumac,2024-10-18 16:33:45+00:00,['nemanjaglumac'],2024-10-28 19:58:05+00:00,2024-10-28 19:58:03+00:00,https://github.com/metabase/metabase/pull/48898,"[('backport', 'Automatically create PR on current release branch on merge'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2422849524, 'issue_id': 2597952102, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ea8328f2bb3e892aa7d7d0ab6c7bcb77ca09ebd6...048966d3f7832cf1c3d42c5507f4b9108f0bfaea.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 18, 16, 35, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2437622810, 'issue_id': 2597952102, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 048966d3f7832cf1c3d42c5507f4b9108f0bfaea.\n✅ Preview:\n    https://pr48898.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 25, 12, 12, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2437648495, 'issue_id': 2597952102, 'author': 'nemanjaglumac', 'body': '@Somtom tagging you only in case you want to peek at the new analytics events.', 'created_at': datetime.datetime(2024, 10, 25, 12, 26, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2442500275, 'issue_id': 2597952102, 'author': 'nemanjaglumac', 'body': ""Thank you for a thoughtful review, @rafpaf ! \r\nI've taken notes of your comments but was reluctant to implement them right away for two reasons:\r\n\r\n1. this PR has been stuck for far too long\r\n2. some business decisions are most likely going to change pretty soon so I'll have to follow-up either way"", 'created_at': datetime.datetime(2024, 10, 28, 19, 57, 37, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 16:35:16 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ea8328f2bb3e892aa7d7d0ab6c7bcb77ca09ebd6...048966d3f7832cf1c3d42c5507f4b9108f0bfaea.

No notifications.

github-actions[bot] on (2024-10-25 12:12:36 UTC): 👋 Deploying a preview environment for commit 048966d3f7832cf1c3d42c5507f4b9108f0bfaea.
✅ Preview:
    https://pr48898.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

nemanjaglumac (Issue Creator) on (2024-10-25 12:26:32 UTC): @Somtom tagging you only in case you want to peek at the new analytics events.

nemanjaglumac (Issue Creator) on (2024-10-28 19:57:37 UTC): Thank you for a thoughtful review, @rafpaf ! 
I've taken notes of your comments but was reluctant to implement them right away for two reasons:

1. this PR has been stuck for far too long
2. some business decisions are most likely going to change pretty soon so I'll have to follow-up either way

"
2597901434,pull_request,closed,,"🍒 manual backport ""Self-heal database sync triggers""",#48882,devurandom,2024-10-18 16:01:49+00:00,[],2024-10-18 20:44:39+00:00,2024-10-18 20:44:38+00:00,https://github.com/metabase/metabase/pull/48897,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597878435,pull_request,closed,,Do not localize prometheus metric descriptions,"### Description

Don't call `trs` to localize prometheus metric descriptions.

https://metaboat.slack.com/archives/CKZEMT1MJ/p1729250473701929

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-18 15:51:27+00:00,['appleby'],2024-10-18 19:10:52+00:00,2024-10-18 17:34:37+00:00,https://github.com/metabase/metabase/pull/48896,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2597876462,pull_request,closed,,"🤖 backported ""Reduce cache TTL for billing info from 5h to 5min""",#48762,metabase-bot[bot],2024-10-18 15:50:18+00:00,['devurandom'],2024-10-18 19:50:00+00:00,2024-10-18 19:50:00+00:00,https://github.com/metabase/metabase/pull/48895,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597861980,pull_request,closed,,"🤖 backported ""Self-heal database sync triggers""",#48882,github-automation-metabase,2024-10-18 15:44:04+00:00,"['devurandom', 'github-automation-metabase']",2024-10-18 19:53:16+00:00,2024-10-18 19:53:15+00:00,https://github.com/metabase/metabase/pull/48894,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597858326,pull_request,closed,,"🤖 backported ""Use case expression type inference logic similar to annotate middleware in MLv2""",#47902,github-automation-metabase,2024-10-18 15:42:31+00:00,"['lbrdnk', 'github-automation-metabase']",2024-10-21 09:48:45+00:00,2024-10-21 09:48:44+00:00,https://github.com/metabase/metabase/pull/48893,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597827188,pull_request,closed,,"🤖 backported ""Optimize pie charts rendering with many rows""",#48670,github-automation-metabase,2024-10-18 15:27:42+00:00,"['kulyk', 'github-automation-metabase']",2024-10-21 13:21:21+00:00,2024-10-21 13:21:20+00:00,https://github.com/metabase/metabase/pull/48892,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2422734173, 'issue_id': 2597827188, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 4a1330a112600ac052c3ef71c9d700140dae8225...665128c6835fe7154423bc3af8041f6b5963f992.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts |', 'created_at': datetime.datetime(2024, 10, 18, 15, 29, 13, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 15:29:13 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 4a1330a112600ac052c3ef71c9d700140dae8225...665128c6835fe7154423bc3af8041f6b5963f992.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts |

"
2597808110,pull_request,closed,,"refactor(sdk): simplify auth init, remove headaching inducing useEffect",,npretto,2024-10-18 15:17:24+00:00,['npretto'],2025-02-04 14:55:25+00:00,2024-10-29 17:50:20+00:00,https://github.com/metabase/metabase/pull/48891,"[('.Team/Embedding', '')]",[],
2597707056,pull_request,closed,,SDK auth error playground,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-10-18 14:34:24+00:00,['oisincoveney'],2024-10-21 12:01:12+00:00,2024-10-21 12:01:12+00:00,https://github.com/metabase/metabase/pull/48890,"[('.Team/Embedding', '')]","[{'comment_id': 2426473869, 'issue_id': 2597707056, 'author': 'oisincoveney', 'body': 'just used this for demoing something. not useful in the real world', 'created_at': datetime.datetime(2024, 10, 21, 12, 1, 12, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-10-21 12:01:12 UTC): just used this for demoing something. not useful in the real world

"
2597702191,pull_request,closed,,"🤖 backported ""Reduce cache TTL for billing info from 5h to 5min""",#48762,github-automation-metabase,2024-10-18 14:32:06+00:00,"['devurandom', 'github-automation-metabase']",2024-10-18 16:12:51+00:00,2024-10-18 16:12:50+00:00,https://github.com/metabase/metabase/pull/48889,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2597674887,pull_request,closed,,Popover timing tweaks,"
Closes https://github.com/metabase/metabase/issues/47694

### Description

Tweaks the timing of the info popovers to make them less intrusive.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Open a question or table and select the table visualisation
2. Hover the header items and make sure the information popover is visible, but only after hovering for 1s
3. Move the cursor to other header items and make sure the popover shows immediately
4. Click the headers and make sure the popover does not flicker

### Demo


https://github.com/user-attachments/assets/c6d17681-f1e8-411c-8cb7-d450700742ee



### Checklist
No functionality changed, just some timing",romeovs,2024-10-18 14:19:49+00:00,['romeovs'],2024-10-22 06:32:16+00:00,2024-10-22 06:32:14+00:00,https://github.com/metabase/metabase/pull/48888,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2426875661, 'issue_id': 2597674887, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b853f9d0e0972c1bde763b7c8bf4af5cc0b44482...026236f1e7f1182c58ae7156b705a4806c675ee7.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 10, 21, 14, 36, 57, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-21 14:36:57 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b853f9d0e0972c1bde763b7c8bf4af5cc0b44482...026236f1e7f1182c58ae7156b705a4806c675ee7.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

"
2597589302,pull_request,closed,,"🤖 backported ""Fixing broken Configure Slack links""",#48758,github-automation-metabase,2024-10-18 13:55:01+00:00,"['npfitz', 'github-automation-metabase']",2024-10-18 14:38:31+00:00,2024-10-18 14:38:30+00:00,https://github.com/metabase/metabase/pull/48886,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2422539478, 'issue_id': 2597589302, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2f4e3770753e196d6c9fb115f92f4c050c391141...4cb09230d6f037157f0cfce20a551e06c917c3b1.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/NewPulseSidebar.tsx |', 'created_at': datetime.datetime(2024, 10, 18, 13, 56, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 13:56:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2f4e3770753e196d6c9fb115f92f4c050c391141...4cb09230d6f037157f0cfce20a551e06c917c3b1.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/NewPulseSidebar.tsx |

"
2597463181,pull_request,closed,,"🤖 backported ""filter out virtual cards when creating a subscription""",#48861,github-automation-metabase,2024-10-18 13:01:53+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-18 13:44:23+00:00,2024-10-18 13:44:22+00:00,https://github.com/metabase/metabase/pull/48883,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2422430585, 'issue_id': 2597463181, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b469405f212499959ed98be51e70cdab00900d9f...c267d92908d0388278f891b668c23767023cc8aa.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 18, 13, 3, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 13:03:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b469405f212499959ed98be51e70cdab00900d9f...c267d92908d0388278f891b668c23767023cc8aa.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.unit.spec.tsx |

"
2597422239,pull_request,closed,,Self-heal database sync triggers,"== Behaviour without this fix ==

See #48881

== Behaviour with this fix ==

1. Metabase starts with an empty application database, and a config file
   containing configuration for a connected database
3. By the time it reaches ""INFO metabase.task :: Task scheduler started"",
   `qrtz_triggers` contains `metabase.task.sync-and-analyze.trigger.1`
   (sample DB) and `metabase.task.sync-and-analyze.trigger.2` (DB from
   config file)

Closes: https://github.com/metabase/metabase/issues/48881",devurandom,2024-10-18 12:41:38+00:00,['devurandom'],2024-10-18 19:56:31+00:00,2024-10-18 15:43:11+00:00,https://github.com/metabase/metabase/pull/48882,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2422771069, 'issue_id': 2597422239, 'author': 'devurandom', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 18, 15, 49, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422772977, 'issue_id': 2597422239, 'author': 'github-actions[bot]', 'body': '@devurandom something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11406878670)', 'created_at': datetime.datetime(2024, 10, 18, 15, 50, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422800041, 'issue_id': 2597422239, 'author': 'devurandom', 'body': '> @devurandom something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11406878670)\r\n\r\nmanual backport: https://github.com/metabase/metabase/pull/48897', 'created_at': datetime.datetime(2024, 10, 18, 16, 5, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422844778, 'issue_id': 2597422239, 'author': 'devurandom', 'body': '* v50: https://github.com/metabase/metabase/pull/48897\r\n* v51: https://github.com/metabase/metabase/pull/48894', 'created_at': datetime.datetime(2024, 10, 18, 16, 32, 13, tzinfo=datetime.timezone.utc)}]","devurandom (Issue Creator) on (2024-10-18 15:49:32 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-18 15:50:40 UTC): @devurandom something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11406878670)

devurandom (Issue Creator) on (2024-10-18 16:05:31 UTC): manual backport: https://github.com/metabase/metabase/pull/48897

devurandom (Issue Creator) on (2024-10-18 16:32:13 UTC): * v50: https://github.com/metabase/metabase/pull/48897
* v51: https://github.com/metabase/metabase/pull/48894

"
2597229137,pull_request,closed,,feat(sdk): `defineEmbeddingSdkConfig` to make typing easier ,"tldr: do what vite (and other tools) do: https://vite.dev/config/#config-intellisense


In the past couple of weeks I had to edit some configuration for libraries/tools etc, and one of the thing that annoyed me the most was when the configs were in plain js as it wasn't typed. It's not a good ""first time"" experience.

For JS users we're kinda on the same boat, if they do
```
const config = {}

const Component = () => {
  return <MetabaseProvider config={config}>...</MetabaseProvider>
 }
```
They won't have any auto complete or docs available.

Similarly in typescript, they have to type it as `SDKConfig`, which they need to know even exists.

For this reason I propose we add this `defineEmbeddingSdkConfig` function *and use it on all code snippets/samples we have*.

The function is just to add the type, it literally does nothing once built, the benefits are:

- js users will have autocomplete and docs depending on their setup (for vscode this should work out of the box)
- the code snippets will be the same between js and ts, as no explicit type needs to be written in the them
- for ts users, the main benefit is that we can make all code samples use the function, and they'll have type safety at the config definition level without having to type it manually


## Demo
<img width=""780"" alt=""image"" src=""https://github.com/user-attachments/assets/0f6fe935-18e0-4943-af23-cf8cb3d60012"">
",npretto,2024-10-18 11:08:42+00:00,['npretto'],2024-10-18 19:34:06+00:00,2024-10-18 18:12:39+00:00,https://github.com/metabase/metabase/pull/48879,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2422217305, 'issue_id': 2597229137, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 18, 11, 9, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 11:09:06 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2596913295,pull_request,closed,,rework ChartSettings to typescript,"### Description

Rework `ChartSettings` to typescript, types can be not accurate

CI should be green

related to https://github.com/metabase/metabase/issues/47911",uladzimirdev,2024-10-18 09:01:06+00:00,['uladzimirdev'],2024-10-18 18:31:46+00:00,2024-10-18 17:48:10+00:00,https://github.com/metabase/metabase/pull/48877,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2421895787, 'issue_id': 2596913295, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 619202e3d4e40b01b536a9366ed69566d005862c...d3228859edbf4a260f600494291a26dfe0593cde.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |', 'created_at': datetime.datetime(2024, 10, 18, 9, 2, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422204710, 'issue_id': 2596913295, 'author': 'oisincoveney', 'body': ""I'd like to do one thing to see if I can type the `section` thing real quick"", 'created_at': datetime.datetime(2024, 10, 18, 11, 2, 2, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 09:02:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 619202e3d4e40b01b536a9366ed69566d005862c...d3228859edbf4a260f600494291a26dfe0593cde.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartNestedSettingsSeriesMultiple.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.unit.spec.js<br>frontend/src/metabase/visualizations/components/settings/ChartSettingStacked.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js |

oisincoveney on (2024-10-18 11:02:02 UTC): I'd like to do one thing to see if I can type the `section` thing real quick

"
2596803283,pull_request,closed,,[Notification] Rework APIs for better modularization,"- `metabase.notification.core` is now an api file only, it was broken down to:
  -  `metabase.notification.send` : where the send-sync, send-async! stuff live
  - a new sub-module: `metabase.notification.payload` that has one multimethod: `payload`
    - this `payload` multimethod takes a `notification` and dispatch on `payload_type`, it returns the content that will be used in `channel/render-notification`
    - this module also has a `impl/` folder; currently, it only has one file, `system_event,` but in the future code that implements the `payload` multimethod for alerts, the dash sub will live here.
    - `notification` module will expose 2 apis only: `send-notification!` and `notification-payload`
       - `notification-payload` will be useful in the future when we need to populate the content data for users to design channel templates. 
- notification-payload: all channel methods now take a unified data structure with 4 keys:
  - id : notification id
  - payload_type
  - payload: resulted from calling `metabase.notification.payload/payload`.
  - context: various application settings
- This is nice for template rendering because keys are consistent and clearly defined
This change requires us to change the email migration we merged earlier, which I'm open to discussing in the comment below.
- new folder `channel/impl` where all implementations for HTTP, email, slack will live

Why is this change nice?
Let's say we need to add support for a new notification type, we just need to do 2 things:
- create a new namespace: `metabase.notification.payload.impl.new-subscription` and implements the `payload` multimethod.
- implement `channel/render-notification` method for the supported channels of this notification.",qnkhuat,2024-10-18 08:14:43+00:00,['qnkhuat'],2024-11-26 18:52:23+00:00,2024-10-23 04:08:12+00:00,https://github.com/metabase/metabase/pull/48876,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2426313441, 'issue_id': 2596803283, 'author': 'qnkhuat', 'body': ""Updates:\r\n- Migrated are modified inplace, I'll handle stats so these migrations are cleared and re-run\r\n- /s/extra-context/custom\r\n- /s/-/_"", 'created_at': datetime.datetime(2024, 10, 21, 10, 48, 43, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-10-21 10:48:43 UTC): Updates:
- Migrated are modified inplace, I'll handle stats so these migrations are cleared and re-run
- /s/extra-context/custom
- /s/-/_

"
2596765722,pull_request,closed,,Change errors for JWT to accommodate SDK,"I've modified the backend endpoints to return error codes that the SDK will use for handling different errors and provide users with more specific, actionable errors.",oisincoveney,2024-10-18 07:58:42+00:00,['oisincoveney'],2024-10-22 16:30:26+00:00,2024-10-22 15:25:49+00:00,https://github.com/metabase/metabase/pull/48875,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2596670026,pull_request,closed,,"🤖 backported ""fix(sdk): Change QuestionEditor tab name to 'Editor'""",#48821,github-automation-metabase,2024-10-18 07:24:20+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-18 08:07:09+00:00,2024-10-18 08:07:08+00:00,https://github.com/metabase/metabase/pull/48872,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2596630782,pull_request,closed,,some tests for sdk auth,,npretto,2024-10-18 07:04:17+00:00,['npretto'],2025-02-04 14:55:21+00:00,2024-10-30 08:19:07+00:00,https://github.com/metabase/metabase/pull/48871,"[('.Team/Embedding', '')]",[],
2596176735,pull_request,closed,,Adds export description when unformatted option is selected,"### Description

Adds export formatting description when unformatted option is selected.

### Demo

Before
<img width=""288"" alt=""Screenshot 2024-10-17 at 9 53 16 PM"" src=""https://github.com/user-attachments/assets/43d7806e-2013-4652-a479-a8922d1c3ae5"">

After
<img width=""292"" alt=""Screenshot 2024-10-18 at 8 59 29 AM"" src=""https://github.com/user-attachments/assets/eceb8085-1512-41d5-b175-33ce86c6f9d2"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-18 01:54:30+00:00,['alxnddr'],2024-10-18 16:38:09+00:00,2024-10-18 16:38:07+00:00,https://github.com/metabase/metabase/pull/48869,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2596058763,pull_request,closed,,Fix a Couple bugs related to pivot exports," - [x] pivot-grouping value, when not an int (in the case of Oracle dbs), would cause exports to contain zero rows. This fixes that fixes #48849
 - [x] json formatted/unformatted for the dataset API endpoints (unsaved questions) was not being used, so all exports were formatted fixes #48868
 - [x] pivot-grouping column removal should also remove cell styles in xlsx to apply the proper styles to cols after the grouping column fixes #48158
",adam-james-v,2024-10-18 00:20:48+00:00,['adam-james-v'],2024-10-22 02:46:57+00:00,2024-10-22 02:46:56+00:00,https://github.com/metabase/metabase/pull/48867,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2596027255,pull_request,closed,,fix(sdk): ability to save questions in interactive question,"Closes https://github.com/metabase/metabase/issues/48788

### Description

Implement the UI to save questions in the `InteractiveQuestion` component

### How to verify

- Add the `InteractiveQuestion` component to a page
- Add the `isSaveEnabled={true}` prop to your component
- The ""save"" button should be **disabled** by default
- Make change to your question a bit (e.g. removing filters, or drag to zoom into question, or add filters)
- The ""save"" button should be **enabled**
- Click on ""Save""
- A save dialog should appear
- You should be able to save the question now

### Demo

The ""Save"" button now appears.

![CleanShot 2567-10-18 at 07 41 17@2x](https://github.com/user-attachments/assets/c65c3a74-b671-4b11-ab39-c4787773317c)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR - e2e
",heypoom,2024-10-17 23:56:56+00:00,['heypoom'],2024-10-24 20:49:39+00:00,2024-10-24 20:49:38+00:00,https://github.com/metabase/metabase/pull/48866,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2420990976, 'issue_id': 2596027255, 'author': 'heypoom', 'body': 'TODO: add tests', 'created_at': datetime.datetime(2024, 10, 18, 0, 46, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2436179391, 'issue_id': 2596027255, 'author': 'heypoom', 'body': '@oisincoveney I added an E2E test here. Thanks!', 'created_at': datetime.datetime(2024, 10, 24, 19, 26, 17, tzinfo=datetime.timezone.utc)}]","heypoom (Issue Creator) on (2024-10-18 00:46:31 UTC): TODO: add tests

heypoom (Issue Creator) on (2024-10-24 19:26:17 UTC): @oisincoveney I added an E2E test here. Thanks!

"
2596013209,pull_request,closed,,"🤖 backported ""fix(sdk): reduce visual artifacts on PDF/PNG exports on custom sdk themes""",#48645,github-automation-metabase,2024-10-17 23:47:09+00:00,"['heypoom', 'github-automation-metabase']",2024-10-24 08:35:28+00:00,2024-10-24 08:35:27+00:00,https://github.com/metabase/metabase/pull/48865,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595975990,pull_request,closed,,"🤖 backported ""fix(sdk): fix defaultProps react error""",#48764,github-automation-metabase,2024-10-17 23:26:54+00:00,"['heypoom', 'github-automation-metabase']",2024-10-21 09:59:13+00:00,2024-10-21 09:59:12+00:00,https://github.com/metabase/metabase/pull/48864,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595928273,pull_request,closed,,"🤖 backported ""fix(sdk): hide downloads by default""",#48755,github-automation-metabase,2024-10-17 22:54:10+00:00,"['heypoom', 'github-automation-metabase']",2024-10-17 23:37:00+00:00,2024-10-17 23:37:00+00:00,https://github.com/metabase/metabase/pull/48863,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595874749,pull_request,closed,,"🤖 backported ""Track SCIM users + API response success/error counts""","  #48702
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-17 22:24:25+00:00,"['noahmoss', 'github-automation-metabase']",2024-10-17 23:30:19+00:00,2024-10-17 23:30:18+00:00,https://github.com/metabase/metabase/pull/48862,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595830958,pull_request,closed,,filter out virtual cards when creating a subscription,"### Description

While working on [enabling pivot exports by default](https://github.com/metabase/metabase/pull/48859), I noticed that subscriptions are not getting created on dashboards that have placeholder or iframe cards. This is because the subscriptions component had a duplicated array of virtual card types which got outdated: https://github.com/metabase/metabase/pull/48861/files#diff-310e2261120875ae00968a33b4fe47a510fc77b707d93e6b0b559ecc74b33e5cL71 

### How to verify

- Create a dashboard with placeholder and iframe cards
- Try creating and saving a dashboard subscription
- It should work as expected

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-17 21:53:31+00:00,['alxnddr'],2024-10-18 13:44:56+00:00,2024-10-18 13:01:04+00:00,https://github.com/metabase/metabase/pull/48861,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('Cloud-Blocker:51', 'Issues blocking the cloud customers to be upgraded to v51')]","[{'comment_id': 2420670330, 'issue_id': 2595830958, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6ccadee046a3fc68c763cfea9cb8edb074ad2a28...e47c02e344d88bf4d6c3fadb27f9cd6844a3703c.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 17, 21, 54, 57, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 21:54:57 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6ccadee046a3fc68c763cfea9cb8edb074ad2a28...e47c02e344d88bf4d6c3fadb27f9cd6844a3703c.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.unit.spec.tsx |

"
2595786914,pull_request,closed,,fix: bigquery repeated records should not expose nested fields,"Fixes #48642

Repeated (array) records were exposing the record's subfields, but we can't do that through arrays.",snoe,2024-10-17 21:29:00+00:00,['snoe'],2024-10-21 19:42:58+00:00,2024-10-21 19:42:56+00:00,https://github.com/metabase/metabase/pull/48860,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]",[],
2595763297,pull_request,closed,,pivot exports by default,"### Description

[Slack convo](https://metaboat.slack.com/archives/C064QMXEV9N/p1729176141796499) 
Makes ""Keep data pivoted"" enabled by default on pivot table exports.
<img width=""294"" alt=""Screenshot 2024-10-18 at 3 41 37 PM"" src=""https://github.com/user-attachments/assets/e63e4100-4731-45af-8cf5-ec1105c91faf"">

### How to verify

- Create a pivot table and save question
- Try to download results -> Ensure ""Keep data pivoted"" is enabled

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-17 21:13:31+00:00,['alxnddr'],2024-10-24 03:05:06+00:00,2024-10-24 02:19:44+00:00,https://github.com/metabase/metabase/pull/48859,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2420586819, 'issue_id': 2595763297, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6805734db49a25991ae17bd74a53e5ee6be3a729...440cca9e9badc00a90e56adf4b4a47c4c064e5a2.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 17, 21, 14, 55, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 21:14:55 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6805734db49a25991ae17bd74a53e5ee6be3a729...440cca9e9badc00a90e56adf4b4a47c4c064e5a2.

No notifications.

"
2595526624,pull_request,closed,,"🤖 backported ""adding webhook counter to AlertListItem""",#48853,github-automation-metabase,2024-10-17 19:09:01+00:00,"['npfitz', 'github-automation-metabase']",2024-10-17 19:51:24+00:00,2024-10-17 19:51:23+00:00,https://github.com/metabase/metabase/pull/48858,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595524307,pull_request,closed,,"🤖 backported ""Splice expression into appropriate stage during v2 metric expansion""",#48800,github-automation-metabase,2024-10-17 19:07:36+00:00,"['lbrdnk', 'github-automation-metabase']",2024-10-17 20:14:18+00:00,2024-10-17 20:14:17+00:00,https://github.com/metabase/metabase/pull/48857,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595516117,pull_request,closed,,🚧[WIP] - Entity picker updates dashboard questions,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-17 19:02:29+00:00,['npfitz'],2024-10-31 19:24:15+00:00,2024-10-31 19:24:14+00:00,https://github.com/metabase/metabase/pull/48856,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2595510863,pull_request,closed,,Databricks #48585 follow-up,"Follow-up of the PR https://github.com/metabase/metabase/pull/48585, that addresses review remarks.",lbrdnk,2024-10-17 18:59:28+00:00,['lbrdnk'],2025-01-31 16:02:55+00:00,2025-01-31 15:09:11+00:00,https://github.com/metabase/metabase/pull/48855,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2603449552, 'issue_id': 2595510863, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2625221848, 'issue_id': 2595510863, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/74851_tests-31751829-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/119-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/7-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>with-upload-table!-and-do-with-uploaded-example-csv!-test</code> | The Redshift schema \'2025\\_01\\_30\\_ddcb3f9a\\_16f4\\_40fb\\_af1d\\_4edbd44bb105\\_schema\' does not exist. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=b3d85987-ddcd-52cf-8895-71ea3d65febd) |\n| <code>append-with-really-long-names-test</code> | The schema ""metabase\\_cache\\_fe4a7\\_1"" was dropped by a concurrent transaction. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=ad51a60e-be55-564b-824f-eb3a0ca6a562) |\n| <code>group-by-default-test</code> | No table \'incidents\' found in Redshift database. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=aaeba03a-f2cb-5314-ba79-6ddec01efb4e) |\n| <code>filter-by-expression-relative-time-interval-test</code> | No Table \'checkins\' found for Redshift database. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=27d7134e-1623-5682-81d7-005671b9ab86) |\n\n[... and 115 more](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE)\n\n\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>issues 11914, 18978, 18977, 23857 should not display query editing controls and \'Browse databases\' link</code> | The test timed out while trying to find an element with the text ""Repro"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=71f0c57f-4c3a-5c54-a87f-098b950584ae) |\n| <code>command palette should render a searchable command palette</code> | Unable to find an accessible element with the role ""option"" and name ""Orders, Count"" within a certain time limit. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=f3754f9b-cb97-5eb1-9b5d-52cf93428df5) |\n| <code>scenarios > model indexes should not reload the model for record in the same model</code> | Unable to find an accessible element with the role ""option"" and name ""Small Marble Shoes"" within 4000ms. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=60fd3517-47d8-5058-ad25-dc54d4e68dd4) |\n| <code>scenarios > native question > data reference sidebar should show models</code> | The test timed out while trying to find an element with the text ""2 models"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=b6263b47-94fc-5bb4-bd10-7dd5cfac62c3) |\n\n[... and 3 more](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE)\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2025, 1, 30, 18, 8, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2625743224, 'issue_id': 2595510863, 'author': 'github-actions[bot]', 'body': ""## e2e tests failed on `3175182995b167f597dc99e960e8070722a559a3-2`\n\n  [e2e test run](https://github.com/metabase/metabase/actions/runs/13062378135?pr=48855)\n\n  File | Test Name\n  ---- | ---------\n  `model-indexes.cy.spec.js` | (_flaky_) scenarios > model indexes > should not reload the model for record in the same model\n`command-palette.cy.spec.js` | (_flaky_) command palette > should render a searchable command palette\n`reproductions-1.cy.spec.js` | (_flaky_) issues 11914, 18978, 18977, 23857 > should not display query editing controls and 'Browse databases' link"", 'created_at': datetime.datetime(2025, 1, 30, 22, 37, 36, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:30:52 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

trunk-io[bot] on (2025-01-30 18:08:05 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/74851_tests-31751829-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/119-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/7-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>with-upload-table!-and-do-with-uploaded-example-csv!-test</code> | The Redshift schema '2025\_01\_30\_ddcb3f9a\_16f4\_40fb\_af1d\_4edbd44bb105\_schema' does not exist. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=b3d85987-ddcd-52cf-8895-71ea3d65febd) |
| <code>append-with-really-long-names-test</code> | The schema ""metabase\_cache\_fe4a7\_1"" was dropped by a concurrent transaction. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=ad51a60e-be55-564b-824f-eb3a0ca6a562) |
| <code>group-by-default-test</code> | No table 'incidents' found in Redshift database. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=aaeba03a-f2cb-5314-ba79-6ddec01efb4e) |
| <code>filter-by-expression-relative-time-interval-test</code> | No Table 'checkins' found for Redshift database. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=27d7134e-1623-5682-81d7-005671b9ab86) |

[... and 115 more](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE)


| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>issues 11914, 18978, 18977, 23857 should not display query editing controls and 'Browse databases' link</code> | The test timed out while trying to find an element with the text ""Repro"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=71f0c57f-4c3a-5c54-a87f-098b950584ae) |
| <code>command palette should render a searchable command palette</code> | Unable to find an accessible element with the role ""option"" and name ""Orders, Count"" within a certain time limit. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=f3754f9b-cb97-5eb1-9b5d-52cf93428df5) |
| <code>scenarios > model indexes should not reload the model for record in the same model</code> | Unable to find an accessible element with the role ""option"" and name ""Small Marble Shoes"" within 4000ms. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=60fd3517-47d8-5058-ad25-dc54d4e68dd4) |
| <code>scenarios > native question > data reference sidebar should show models</code> | The test timed out while trying to find an element with the text ""2 models"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE&runId=b6263b47-94fc-5bb4-bd10-7dd5cfac62c3) |

[... and 3 more](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment&runConclusion=FAILURE)
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48855?repo=metabase/metabase&commitHash=3175182995b167f597dc99e960e8070722a559a3&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

github-actions[bot] on (2025-01-30 22:37:36 UTC): ## e2e tests failed on `3175182995b167f597dc99e960e8070722a559a3-2`

  [e2e test run](https://github.com/metabase/metabase/actions/runs/13062378135?pr=48855)

  File | Test Name
  ---- | ---------
  `model-indexes.cy.spec.js` | (_flaky_) scenarios > model indexes > should not reload the model for record in the same model
`command-palette.cy.spec.js` | (_flaky_) command palette > should render a searchable command palette
`reproductions-1.cy.spec.js` | (_flaky_) issues 11914, 18978, 18977, 23857 > should not display query editing controls and 'Browse databases' link

"
2595476241,pull_request,closed,,Switch to Java 21,"- Upgrade to Snowflake 3.20.0
- Add `--add-opens` option everywhere we run `java -jar` or document running it
- Bump Docker base image from Alpine+Temurin 11 to Alpine+Temurin 21
- Make sure CI runs tests against Java 21
- Bump GH Actions release stuff to build/release with Java 21

https://metaboat.slack.com/archives/C05MPF0TM3L/p1729188909680859?thread_ts=1729074092.396789&cid=C05MPF0TM3L",camsaul,2024-10-17 18:43:21+00:00,['camsaul'],2024-11-12 21:03:29+00:00,2024-11-12 20:06:32+00:00,https://github.com/metabase/metabase/pull/48854,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2451113210, 'issue_id': 2595476241, 'author': 'trunk-io[bot]', 'body': ""<!-- Trunk Test Analytics -->\n\n\n**30 tests** were run on `a5cbeeb8`. ❌ **4 Failed**, ⚠️ **7 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment)\n\n\n<details>\n<summary>❌ 4 Failed</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>model-index-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=33d76862-11e6-545b-8d5b-3f488409f228) |\n| <code>model-index-test-2</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=76b91f59-ebad-56bc-bba7-e348aef33dd7) |\n| <code>quick-run-through</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=d4e63234-935b-5d6a-9c5d-8fd6e826fe67) |\n| <code>model-index-test-3</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=9fbe13fe-4c7e-5f30-97ee-a2b061a8a105) |\n</details>\n<details>\n<summary>⚠️ 7 Flakes</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>related-update-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=5faa98d6-b44f-5619-ba43-39afc1c287bd) |\n| <code>incremental-update-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=c0c63e59-2ac1-5cb6-bdee-9286b974f9e7) |\n| <code>indexed-entity-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=8dc2e9ef-3fb8-5014-a25e-0d4b2d26752d) |\n| <code>indexed-entity-perms-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=c1b983cc-62f6-5178-adce-6e1c9181c340) |\n| <code>full-lifecycle-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=b9cb994b-1aa8-56a1-93dc-2db5fab001df) |\n| <code>create-linked-dashboard-test-regular-queries</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=57042792-341f-5d7c-8a15-27dc5525b0c9) |\n| <code>create-linked-dashboard-test-single-link</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=da9ca1ef-a0eb-5466-b490-93fa88845cd5) |\n</details>\n<details>\n<summary>⏭️ 19 Skipped</summary>\n\n- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>\n- <code>ThemeProvider applies the metabase theme overrides</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>\n\n[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=SKIPPED)\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)\n\n</sub>"", 'created_at': datetime.datetime(2024, 11, 1, 1, 15, 29, tzinfo=datetime.timezone.utc)}, {'comment_id': 2460431452, 'issue_id': 2595476241, 'author': 'camsaul', 'body': ""Let's not merge this in yet we need to update all the Docker images and what not still"", 'created_at': datetime.datetime(2024, 11, 6, 17, 56, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2462919547, 'issue_id': 2595476241, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@camsaul You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 11, 7, 18, 13, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2471387457, 'issue_id': 2595476241, 'author': 'camsaul', 'body': 'See also #49430 which updated the Oracle driver', 'created_at': datetime.datetime(2024, 11, 12, 19, 28, 52, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2024-11-01 01:15:29 UTC): <!-- Trunk Test Analytics -->


**30 tests** were run on `a5cbeeb8`. ❌ **4 Failed**, ⚠️ **7 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment)


<details>
<summary>❌ 4 Failed</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>model-index-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=33d76862-11e6-545b-8d5b-3f488409f228) |
| <code>model-index-test-2</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=76b91f59-ebad-56bc-bba7-e348aef33dd7) |
| <code>quick-run-through</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=d4e63234-935b-5d6a-9c5d-8fd6e826fe67) |
| <code>model-index-test-3</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=9fbe13fe-4c7e-5f30-97ee-a2b061a8a105) |
</details>
<details>
<summary>⚠️ 7 Flakes</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>related-update-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=5faa98d6-b44f-5619-ba43-39afc1c287bd) |
| <code>incremental-update-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=c0c63e59-2ac1-5cb6-bdee-9286b974f9e7) |
| <code>indexed-entity-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=8dc2e9ef-3fb8-5014-a25e-0d4b2d26752d) |
| <code>indexed-entity-perms-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=c1b983cc-62f6-5178-adce-6e1c9181c340) |
| <code>full-lifecycle-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=b9cb994b-1aa8-56a1-93dc-2db5fab001df) |
| <code>create-linked-dashboard-test-regular-queries</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=57042792-341f-5d7c-8a15-27dc5525b0c9) |
| <code>create-linked-dashboard-test-single-link</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=da9ca1ef-a0eb-5466-b490-93fa88845cd5) |
</details>
<details>
<summary>⏭️ 19 Skipped</summary>

- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>
- <code>ThemeProvider applies the metabase theme overrides</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>

[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48854?repo=metabase/metabase&commitHash=a5cbeeb8f8a843d0357cff8b9c3440318b6e3551&utm_source=gh-comment&runConclusion=SKIPPED)
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)

</sub>

camsaul (Issue Creator) on (2024-11-06 17:56:52 UTC): Let's not merge this in yet we need to update all the Docker images and what not still

github-actions[bot] on (2024-11-07 18:13:16 UTC): <!---conventional commit reminder comment ID-->
@camsaul You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

camsaul (Issue Creator) on (2024-11-12 19:28:52 UTC): See also #49430 which updated the Oracle driver

"
2595276367,pull_request,closed,,adding webhook counter to AlertListItem,"Closes https://github.com/metabase/metabase/issues/48803

### Description
Small update to `AlertListItem` to include a counter of HTTP channels on an alert

### How to verify

1. Go to any question and set up an alert with an active HTTP Channel
2. Click save, then go to the sharing menu and select Edit Alerts
3. You should see your alert listed with a number beside a webhook icon

### Demo
![image](https://github.com/user-attachments/assets/d9c3de2b-ab14-4245-944e-e76172abac32)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-17 17:01:11+00:00,['npfitz'],2024-10-17 19:08:08+00:00,2024-10-17 19:08:06+00:00,https://github.com/metabase/metabase/pull/48853,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2595172799,pull_request,closed,,Add utm params to doc link in expression editor,"### Description

Add utm parameters to docs link in expression editor.

Also adds helpers to add utm parameters to urls more easily.
",romeovs,2024-10-17 16:08:28+00:00,['romeovs'],2024-11-26 18:52:27+00:00,2024-10-21 14:26:09+00:00,https://github.com/metabase/metabase/pull/48852,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2595163978,pull_request,closed,,"🤖 backported ""Use name from metric aggregation after preprocessing""",#48705,github-automation-metabase,2024-10-17 16:03:45+00:00,"['lbrdnk', 'github-automation-metabase']",2024-10-17 16:47:44+00:00,2024-10-17 16:47:43+00:00,https://github.com/metabase/metabase/pull/48850,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595155119,pull_request,closed,,"🤖 backported ""Fix question header when the original question is a native query""","  #48815
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-17 15:59:30+00:00,"['ranquild', 'github-automation-metabase']",2024-10-18 02:12:49+00:00,2024-10-18 02:12:48+00:00,https://github.com/metabase/metabase/pull/48848,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595099788,pull_request,closed,,Update SDK version to 1.52.1,Update Readme version references and published npm package version to 1.52.1,github-automation-metabase,2024-10-17 15:39:11+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-22 09:23:06+00:00,2024-10-17 15:47:50+00:00,https://github.com/metabase/metabase/pull/48843,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2419890156, 'issue_id': 2595099788, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 17, 15, 39, 37, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 15:39:37 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2595086989,pull_request,closed,,"🤖 backported ""fix: Always cast json number types as decimal""",#48648,github-automation-metabase,2024-10-17 15:34:55+00:00,"['snoe', 'github-automation-metabase']",2024-10-17 16:55:04+00:00,2024-10-17 16:55:03+00:00,https://github.com/metabase/metabase/pull/48842,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2595085786,pull_request,closed,,Update SDK version to 1.51.1,Update Readme version references and published npm package version to 1.51.1,github-automation-metabase,2024-10-17 15:34:30+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-22 09:23:06+00:00,2024-10-17 15:47:51+00:00,https://github.com/metabase/metabase/pull/48841,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2595037321,pull_request,closed,,ci(sdk): [release 51] Prepare SDK numver version for release automation,"[Context](https://metaboat.slack.com/archives/C063Q3F1HPF/p1729167399901159)

This PR bumps the version of `release-x.51.x` to `1.51.0`. This should be merged before #48838.

",WiNloSt,2024-10-17 15:13:09+00:00,['WiNloSt'],2024-10-17 15:22:39+00:00,2024-10-17 15:22:09+00:00,https://github.com/metabase/metabase/pull/48840,"[('.Team/Embedding', '')]",[],
2595031503,pull_request,closed,,ci(sdk): [master] Prepare SDK numver version for release automation,"[Context](https://metaboat.slack.com/archives/C063Q3F1HPF/p1729167399901159)

This PR bumps the version of master to `1.52.0`. This should be merged before #48838.
",WiNloSt,2024-10-17 15:10:32+00:00,['WiNloSt'],2024-11-26 18:52:31+00:00,2024-10-17 15:22:14+00:00,https://github.com/metabase/metabase/pull/48839,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2419821855, 'issue_id': 2595031503, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 17, 15, 10, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2419828764, 'issue_id': 2595031503, 'author': 'WiNloSt', 'body': 'Not backporting this because I have another PR that targets the release branch directly https://github.com/metabase/metabase/pull/48840', 'created_at': datetime.datetime(2024, 10, 17, 15, 13, 48, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 15:10:55 UTC): <!---conventional commit reminder comment ID-->
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

WiNloSt (Issue Creator) on (2024-10-17 15:13:48 UTC): Not backporting this because I have another PR that targets the release branch directly https://github.com/metabase/metabase/pull/48840

"
2595017864,pull_request,closed,,Automate SDK release version numbers,"Closes https://github.com/metabase/metabase/issues/48822


### Description

This is one of the first steps to automate SDK release process better.

This PR changes the workflow input to only require a `branch` and nothing else. And we'll figure out the version number from `package.template.json` instead.

### How to verify
These runs were tested with [2423d91](https://github.com/metabase/metabase/pull/48838/commits/2423d9140ff4297d9b3b8bd3a71baa248bca65cc)
- [Mock `release-x.51.x` deployment](https://github.com/metabase/metabase/actions/runs/11388055173)
  - [docs PR](https://github.com/metabase/metabase/pull/48841/files) (Correct version, but wrong changelog which will be addressed in https://github.com/metabase/metabase/issues/48844)
- [Mock `master` deployment](https://github.com/metabase/metabase/actions/runs/11388131790)
  - [docs PR](https://github.com/metabase/metabase/pull/48843/files) (Correct version, but wrong changelog which will be addressed in https://github.com/metabase/metabase/issues/48844)
### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~
",WiNloSt,2024-10-17 15:04:55+00:00,['WiNloSt'],2024-10-21 15:03:04+00:00,2024-10-21 15:03:01+00:00,https://github.com/metabase/metabase/pull/48838,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2426946769, 'issue_id': 2595017864, 'author': 'WiNloSt', 'body': 'The latest 3 commits are tested with https://github.com/metabase/metabase/actions/runs/11442966749. And all changes are contained within the step until ""Determine SDK version"" which ran perfectly.', 'created_at': datetime.datetime(2024, 10, 21, 15, 2, 49, tzinfo=datetime.timezone.utc)}]","WiNloSt (Issue Creator) on (2024-10-21 15:02:49 UTC): The latest 3 commits are tested with https://github.com/metabase/metabase/actions/runs/11442966749. And all changes are contained within the step until ""Determine SDK version"" which ran perfectly.

"
2594984640,pull_request,closed,,fix(sdk): Improve InteractiveQuestion chart selector,A special `SegmentedControl` for the query builder that will also be used for the SDK for chart settings,oisincoveney,2024-10-17 14:53:13+00:00,['oisincoveney'],2024-10-29 09:47:31+00:00,2024-10-29 09:03:30+00:00,https://github.com/metabase/metabase/pull/48837,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2419777473, 'issue_id': 2594984640, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ea8328f2bb3e892aa7d7d0ab6c7bcb77ca09ebd6...5912edf82953c5d20db905287d9984fa997a8297.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx |', 'created_at': datetime.datetime(2024, 10, 17, 14, 54, 45, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 14:54:45 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ea8328f2bb3e892aa7d7d0ab6c7bcb77ca09ebd6...5912edf82953c5d20db905287d9984fa997a8297.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx |

"
2594847463,pull_request,closed,,Update SDK version to 0.1.38,Update Readme version references and published npm package version to 0.1.38,github-automation-metabase,2024-10-17 14:02:37+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-17 14:03:32+00:00,2024-10-17 14:03:32+00:00,https://github.com/metabase/metabase/pull/48834,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2594821206,pull_request,closed,,"🤖 backported ""Hide the toggle all checkbox when there are no search results""",#48817,github-automation-metabase,2024-10-17 13:53:43+00:00,"['ranquild', 'github-automation-metabase']",2024-10-17 19:32:10+00:00,2024-10-17 19:32:09+00:00,https://github.com/metabase/metabase/pull/48833,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2594802052,pull_request,closed,,"🤖 backported ""Add missing `key` prop to all tags used inside `jt`""",#48825,github-automation-metabase,2024-10-17 13:46:52+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-10-17 15:07:12+00:00,2024-10-17 15:07:11+00:00,https://github.com/metabase/metabase/pull/48832,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2419602132, 'issue_id': 2594802052, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 821f07d3c354d91d2096cc3e59ec7eb2d6818066...9309420b260c73267346341146380b30e390942c.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx |', 'created_at': datetime.datetime(2024, 10, 17, 13, 48, 22, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 13:48:22 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 821f07d3c354d91d2096cc3e59ec7eb2d6818066...9309420b260c73267346341146380b30e390942c.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx |

"
2594776575,pull_request,closed,,"🤖 backported ""Support resolving names in source-metadata by ID""",#48765,github-automation-metabase,2024-10-17 13:38:45+00:00,"['metamben', 'github-automation-metabase']",2024-10-17 14:20:34+00:00,2024-10-17 14:20:33+00:00,https://github.com/metabase/metabase/pull/48831,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2594747589,pull_request,closed,,"🤖 backported ""[serdes] check full export for escaping cards""",#48521,github-automation-metabase,2024-10-17 13:27:42+00:00,"['piranha', 'github-automation-metabase']",2024-10-21 08:02:06+00:00,2024-10-21 08:02:05+00:00,https://github.com/metabase/metabase/pull/48830,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2594557024,pull_request,closed,,FE - Show columns from all stages in click behavior (target question) ,"Closes #49218 
Closes #46528

### Description

Part of testing plan: #46520
We decided to keep it in the main epic: https://metaboat.slack.com/archives/C0645JP1W81/p1730734070635409?thread_ts=1730728129.684959&cid=C0645JP1W81

### How to verify

CI is green.",kamilmielnik,2024-10-17 12:14:14+00:00,['kamilmielnik'],2024-11-05 08:26:22+00:00,2024-11-05 08:26:20+00:00,https://github.com/metabase/metabase/pull/48828,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2441246045, 'issue_id': 2594557024, 'author': 'kamilmielnik', 'body': 'Postponing this from main epic (#46519) to follow-up epic (#48681).', 'created_at': datetime.datetime(2024, 10, 28, 10, 52, 30, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-28 10:52:30 UTC): Postponing this from main epic (#46519) to follow-up epic (#48681).

"
2594497167,pull_request,closed,,Update SDK version to 0.1.40,Update Readme version references and published npm package version to 0.1.40,github-automation-metabase,2024-10-17 11:53:17+00:00,"['oisincoveney', 'github-automation-metabase']",2024-11-26 18:52:32+00:00,2024-10-17 11:57:52+00:00,https://github.com/metabase/metabase/pull/48827,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2419320246, 'issue_id': 2594497167, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 17, 11, 53, 39, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 11:53:39 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2594466178,pull_request,closed,,smaller implementation of better auth errors,wip,npretto,2024-10-17 11:41:02+00:00,['npretto'],2025-02-04 14:55:24+00:00,2024-10-29 17:49:00+00:00,https://github.com/metabase/metabase/pull/48826,"[('.Team/Embedding', '')]",[],
2594438413,pull_request,closed,,Add missing `key` prop to all tags used inside `jt`,"### Description

Fixes these warnings:

![image](https://github.com/user-attachments/assets/f7db0343-0b08-4d5f-b65a-cb661aa0b4b2)


### How to verify

All components and DOM elements rendered as children of `jt` have exactly only one `key` prop.
",kamilmielnik,2024-10-17 11:29:11+00:00,['kamilmielnik'],2024-10-17 15:07:42+00:00,2024-10-17 13:46:01+00:00,https://github.com/metabase/metabase/pull/48825,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2419273320, 'issue_id': 2594438413, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff deac5cbcc7e68d20f7ffe71d021dafa73e6e9de6...89be474331216def83d24e604a2dc1569b139781.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx |', 'created_at': datetime.datetime(2024, 10, 17, 11, 30, 37, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 11:30:37 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff deac5cbcc7e68d20f7ffe71d021dafa73e6e9de6...89be474331216def83d24e604a2dc1569b139781.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx |

"
2594293365,pull_request,closed,,"🤖 backported ""feat(sdk): Add chart viz selection for `InteractiveQuestion`""",#47744,metabase-bot[bot],2024-10-17 10:24:47+00:00,['oisincoveney'],2024-10-17 11:25:21+00:00,2024-10-17 11:25:20+00:00,https://github.com/metabase/metabase/pull/48823,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2593974251,pull_request,closed,,fix(sdk): Change QuestionEditor tab name to 'Editor',"https://metaboat.slack.com/archives/C063Q3F1HPF/p1729103639982819

Also I added `ttag` for the tab names since it's nice

<!-- av pr metadata
This information is embedded by the av CLI when creating PRs to track the status of stacks when using Aviator. Please do not delete or edit this section of the PR.
```
{""parent"":""master"",""parentHead"":"""",""trunk"":""master""}
```
-->
",oisincoveney,2024-10-17 08:11:46+00:00,['oisincoveney'],2024-10-18 08:07:35+00:00,2024-10-18 07:23:28+00:00,https://github.com/metabase/metabase/pull/48821,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2418862619, 'issue_id': 2593974251, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 17, 8, 12, 5, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 08:12:05 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2593833839,pull_request,closed,,upgrade jetty to 11.0.24 to mitigate DoS vulnerability,"https://github.com/jetty/jetty.project/security/advisories/GHSA-g8m5-722r-8whq
",piranha,2024-10-17 07:09:12+00:00,['piranha'],2024-11-04 10:46:55+00:00,2024-10-21 12:17:31+00:00,https://github.com/metabase/metabase/pull/48819,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2454090062, 'issue_id': 2593833839, 'author': 'piranha', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 11, 4, 8, 31, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2454381028, 'issue_id': 2593833839, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51.1](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 11, 4, 10, 46, 54, tzinfo=datetime.timezone.utc)}]","piranha (Issue Creator) on (2024-11-04 08:31:40 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-11-04 10:46:54 UTC): 🚀 This should also be released by [v0.51.1](https://github.com/metabase/metabase/milestone/231)

"
2593494508,pull_request,closed,,Hide time inputs in the date picker when the column does not support date+time filters,"Related to https://github.com/metabase/metabase/issues/48608

Takes `availableUnits` into account in specific & relative date pickers.

How to verify:
- New -> Question -> People
- Filter -> Created At -> Specific dates... -> There is ""Add time"" button
- Filter -> Birth Date -> Specific dates... -> There is no ""Add time"" button
- Filter -> Birth Date -> Relative dates... -> There is no ""hours"" unit

<img width=""504"" alt=""Screenshot 2024-10-16 at 23 16 56"" src=""https://github.com/user-attachments/assets/535fdf8f-7982-4559-9db3-78416fd55cd5"">
<img width=""730"" alt=""Screenshot 2024-10-16 at 23 17 02"" src=""https://github.com/user-attachments/assets/3e914940-9123-4149-a86c-73d534ab1b33"">
",ranquild,2024-10-17 03:12:41+00:00,['ranquild'],2024-10-21 14:36:41+00:00,2024-10-21 13:52:50+00:00,https://github.com/metabase/metabase/pull/48818,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2422143906, 'issue_id': 2593494508, 'author': 'kamilmielnik', 'body': '> @[kamilmielnik](https://github.com/kamilmielnik) kamilmielnik [force-pushed](https://github.com/metabase/metabase/compare/5d4388a2d9dd8bda5f20a40dcc6afc657e3182a4..6631dc1c0dd723eda978f4890bae671ce6a17b20) the 48608-date-filter-time branch from [5d4388a ](https://github.com/metabase/metabase/commit/5d4388a2d9dd8bda5f20a40dcc6afc657e3182a4)to [6631dc1 ](https://github.com/metabase/metabase/commit/6631dc1c0dd723eda978f4890bae671ce6a17b20)\r\n[now](https://github.com/metabase/metabase/pull/48818#event-14717662196)\r\n\r\nI accidentally pushed my commits to the wrong branch :see_no_evil: Fixed.', 'created_at': datetime.datetime(2024, 10, 18, 10, 31, 36, tzinfo=datetime.timezone.utc)}]","kamilmielnik on (2024-10-18 10:31:36 UTC): [now](https://github.com/metabase/metabase/pull/48818#event-14717662196)

I accidentally pushed my commits to the wrong branch :see_no_evil: Fixed.

"
2593471657,pull_request,closed,,Hide the toggle all checkbox when there are no search results,"Fixes https://github.com/metabase/metabase/issues/48761

How to verify:
- New -> Question -> Orders -> Save as Q1
- New -> Dashboard -> Save
- Edit -> Add Q1 -> Filter -> Text or Category -> Product.Category -> Save
- Open the filter widget -> Type some non-existing category
- There should be an empty state but no Select all/none checkbox

Before:
![image](https://github.com/user-attachments/assets/5609603d-9b22-41f0-baa4-af18280c9b80)

After:
<img width=""358"" alt=""Screenshot 2024-10-16 at 22 51 40"" src=""https://github.com/user-attachments/assets/8ba83d2b-4bb2-4d0e-8c7e-4d75fa1fb272"">
",ranquild,2024-10-17 02:54:52+00:00,['ranquild'],2024-10-17 13:52:52+00:00,2024-10-17 13:52:51+00:00,https://github.com/metabase/metabase/pull/48817,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2593421867,pull_request,closed,,Fix question header when the original question is a native query,"Fixes https://github.com/metabase/metabase/issues/48690

Changes:
- Converts `QuestionDataSource` utils to TypeScript
- Fixes a bug with an icon when the original question is a native query

How to verify:
- New -> SQL query -> `SELECT * FROM ORDERS` -> Save as `SQL query` -> Run
- Click on a cell -> Filter -> Click on an operator -> You should get an ad-hoc query
- Check that the icon in the query builder header is now `table2`, which matches what you get in the notebook editor (click `Show Editor` to verify)

<img width=""1727"" alt=""Screenshot 2024-10-16 at 21 53 51"" src=""https://github.com/user-attachments/assets/518bb7d2-b9c6-4657-99d0-ad6c7ea1c93d"">
",ranquild,2024-10-17 02:16:01+00:00,['ranquild'],2024-10-17 15:58:33+00:00,2024-10-17 15:58:31+00:00,https://github.com/metabase/metabase/pull/48815,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2593274578,pull_request,closed,,MetaBot v3 PoC,"You can try this out locally as follows:

First, spin up [AI Proxy](https://github.com/metabase/ai-proxy) locally using my core integration branch (https://github.com/metabase/ai-proxy/pull/22). Then:

### From Clojure REPL

```clj
((requiring-resolve 'metabase.db/setup-db!) :create-sample-content? false)
((requiring-resolve 'metabase-enterprise.metabot-v3.repl/user-repl))
```

### From CLI REPL

```sh
$ clj -X:ee:metabot-v3/repl

Starting MetaBot REPL... 🤖

> Hello
🗨  Hello
🤖 Hello! How can I assist you today with Metabase?

> Send an invite to Cam
🗨  Send an invite to Cam
🤖 I can help with that! Could you please provide Cam's email address so I can send the invite?

> cam@metabase.com
🗨  cam@metabase.com
🔧 🪛 (metabase-enterprise.metabot-v3.tools.interface/invoke-tool :invite-user {:email ""cam@metabase.com"", :another-param ""Cool""})
Tool is not yet implemented: (:invite-user {:email ""cam@metabase.com"", :another-param ""Cool""})
```

### With cURL

```sh
# Not picutred: X-Metabase-Session header, but you will need to include this as well.
$ curl -X POST http://localhost:3000/api/ee/metabot-v3/agent --json '{""message"": ""Hello"", ""context"": {}}'

[{""type"":""metabot.reaction/message"",""message"":""Hello! How can I assist you today?""}]
```",camsaul,2024-10-16 23:47:25+00:00,['camsaul'],2025-01-22 02:14:48+00:00,2025-01-22 02:14:42+00:00,https://github.com/metabase/metabase/pull/48814,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2429624064, 'issue_id': 2593274578, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ce19393b3763af6c2ab82c8d20ecf68d62016ade...5669cb0161fabc82bc37af8eac596052a2628391.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/metabot.svg |', 'created_at': datetime.datetime(2024, 10, 22, 15, 38, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2463702262, 'issue_id': 2593274578, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 5669cb0161fabc82bc37af8eac596052a2628391.\n✅ Preview:\n    https://pr48814.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 11, 8, 3, 50, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2466464613, 'issue_id': 2593274578, 'author': 'trunk-io[bot]', 'body': ""<!-- Trunk Test Analytics -->\n\n\n**111059 tests** were run on `193dad90`. ❌ **153 Failed**, ⚠️ **8 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment)\n\n\n<details>\n<summary>❌ 153 Failed</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>scenarios > question > summarize sidebar selected dimensions becomes pinned to the top of the dimensions list</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=a97dcd62-ee8d-5db5-a754-814578c97615) |\n| <code>scenarios > question > summarize sidebar selected dimensions from another table includes the table alias when becomes pinned to the top</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=59e63942-29cb-5389-afc9-8c5425a6dd32) |\n| <code>scenarios > question > summarize sidebar should handle (removing) multiple metrics when one is sorted (metabase\\$112625)</code> | Unable to find a label with the text 'Sum of Total' within the expected time. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=aeb3ed64-399a-5c01-9f76-62c5685d8b41) |\n| <code>scenarios > question > summarize sidebar selecting a binning adds a dimension</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=02fc093d-de08-5923-8915-0dba3e666a2f) |\n| <code>scenarios > question > settings resetting state should reset modal state when navigating away</code> | The \\$1cy.click()\\$1 command timed out because the page updated while the command was executing, causing the element to disappear. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=1201c5db-f2f0-5d21-8042-a4de780833f2) |\n| <code>scenarios > question > saved should show the question lineage when a saved question is changed</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=3aa4ce56-e671-5220-85ba-c2fc67855269) |\n| <code>scenarios > filters > sql filters > values source > number parameter static list source (search box) should be able to use a static list source in...</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=a03d14ba-5f09-5c2e-8667-143c5fe79526) |\n| <code>issue 20624 should reset the question's viz settings when converting to a model (metabase\\$120624)</code> | The \\$1cy.find()\\$1 command timed out because the page updated and the element was removed from the DOM. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=19f485fb-f8b0-5d6d-91e9-6f4786dc46df) |\n| <code>scenarios > filters > sql filters > values source > number parameter static list source with custom labels (dropdown) should be able to use a stati...</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=2eea5729-b671-58b9-9f51-3d61dd52ae09) |\n| <code>issue 45924 should preserve model metadata when re-running the query (metabase\\$145924)</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=de9308de-b92e-5daa-9387-f722a0936809) |\n\n[... and 143 more](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED)\n</details>\n<details>\n<summary>⚠️ 8 Flakes</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>update-settings-last-updated-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=911f4a69-8fe4-5712-ae2d-c536d6c9eb30) |\n| <code>identity-hash-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=ce0ebab3-2fec-5377-a1be-3e9a289d6ec2) |\n| <code>identity-hash-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=8d22f84c-49e9-5fcb-8aeb-5bb8dc1bf973) |\n| <code>identity-hash-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=6ea826a1-44bb-5e1d-ab71-6afd0faf1fbf) |\n| <code>identity-hash-test</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=baf339a5-49a2-5676-a355-4fa44e5cfb4a) |\n| <code>scenarios > visualizations > waterfall multi-series (metabase\\$115152) should correctly switch into single-series mode for ad-hoc queries</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=06f417ff-bfbf-5b5f-bd17-9a417dcb065d) |\n| <code>issue 25374 should retain comma-separated values when reverting to default (metabase\\$125374-3)</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=845d4164-0de6-5956-9dff-398c506c128f) |\n| <code>scenarios > visualizations > bar chart should allow grouping series into a single 'Other' series</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=16f19e7e-9f85-55e9-8a8b-8192143f0dbe) |\n</details>\n<details>\n<summary>⏭️ 19 Skipped</summary>\n\n- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>\n- <code>ThemeProvider applies the metabase theme overrides</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>\n\n[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=SKIPPED)\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)\n\n</sub>"", 'created_at': datetime.datetime(2024, 11, 9, 21, 26, 21, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-22 15:38:33 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ce19393b3763af6c2ab82c8d20ecf68d62016ade...5669cb0161fabc82bc37af8eac596052a2628391.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/metabot.svg |

github-actions[bot] on (2024-11-08 03:50:41 UTC): 👋 Deploying a preview environment for commit 5669cb0161fabc82bc37af8eac596052a2628391.
✅ Preview:
    https://pr48814.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

trunk-io[bot] on (2024-11-09 21:26:21 UTC): <!-- Trunk Test Analytics -->


**111059 tests** were run on `193dad90`. ❌ **153 Failed**, ⚠️ **8 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment)


<details>
<summary>❌ 153 Failed</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>scenarios > question > summarize sidebar selected dimensions becomes pinned to the top of the dimensions list</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=a97dcd62-ee8d-5db5-a754-814578c97615) |
| <code>scenarios > question > summarize sidebar selected dimensions from another table includes the table alias when becomes pinned to the top</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=59e63942-29cb-5389-afc9-8c5425a6dd32) |
| <code>scenarios > question > summarize sidebar should handle (removing) multiple metrics when one is sorted (metabase\$112625)</code> | Unable to find a label with the text 'Sum of Total' within the expected time. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=aeb3ed64-399a-5c01-9f76-62c5685d8b41) |
| <code>scenarios > question > summarize sidebar selecting a binning adds a dimension</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=02fc093d-de08-5923-8915-0dba3e666a2f) |
| <code>scenarios > question > settings resetting state should reset modal state when navigating away</code> | The \$1cy.click()\$1 command timed out because the page updated while the command was executing, causing the element to disappear. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=1201c5db-f2f0-5d21-8042-a4de780833f2) |
| <code>scenarios > question > saved should show the question lineage when a saved question is changed</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=3aa4ce56-e671-5220-85ba-c2fc67855269) |
| <code>scenarios > filters > sql filters > values source > number parameter static list source (search box) should be able to use a static list source in...</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=a03d14ba-5f09-5c2e-8667-143c5fe79526) |
| <code>issue 20624 should reset the question's viz settings when converting to a model (metabase\$120624)</code> | The \$1cy.find()\$1 command timed out because the page updated and the element was removed from the DOM. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=19f485fb-f8b0-5d6d-91e9-6f4786dc46df) |
| <code>scenarios > filters > sql filters > values source > number parameter static list source with custom labels (dropdown) should be able to use a stati...</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=2eea5729-b671-58b9-9f51-3d61dd52ae09) |
| <code>issue 45924 should preserve model metadata when re-running the query (metabase\$145924)</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=de9308de-b92e-5daa-9387-f722a0936809) |

[... and 143 more](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED)
</details>
<details>
<summary>⚠️ 8 Flakes</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>update-settings-last-updated-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=911f4a69-8fe4-5712-ae2d-c536d6c9eb30) |
| <code>identity-hash-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=ce0ebab3-2fec-5377-a1be-3e9a289d6ec2) |
| <code>identity-hash-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=8d22f84c-49e9-5fcb-8aeb-5bb8dc1bf973) |
| <code>identity-hash-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=6ea826a1-44bb-5e1d-ab71-6afd0faf1fbf) |
| <code>identity-hash-test</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=baf339a5-49a2-5676-a355-4fa44e5cfb4a) |
| <code>scenarios > visualizations > waterfall multi-series (metabase\$115152) should correctly switch into single-series mode for ad-hoc queries</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=06f417ff-bfbf-5b5f-bd17-9a417dcb065d) |
| <code>issue 25374 should retain comma-separated values when reverting to default (metabase\$125374-3)</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=845d4164-0de6-5956-9dff-398c506c128f) |
| <code>scenarios > visualizations > bar chart should allow grouping series into a single 'Other' series</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=16f19e7e-9f85-55e9-8a8b-8192143f0dbe) |
</details>
<details>
<summary>⏭️ 19 Skipped</summary>

- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>
- <code>ThemeProvider applies the metabase theme overrides</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>

[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48814?repo=metabase/metabase&commitHash=193dad90996ba035ba1ecd2a354d0fe3658e6870&utm_source=gh-comment&runConclusion=SKIPPED)
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)

</sub>

"
2593212658,pull_request,closed,,"🤖 backported ""SDK embedding prometheus""","  #48578
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-16 22:52:29+00:00,"['escherize', 'github-automation-metabase']",2024-10-22 16:56:27+00:00,2024-10-22 16:56:26+00:00,https://github.com/metabase/metabase/pull/48813,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2593014180,pull_request,closed,,"🤖 backported ""Let non-admins see tables in recents""",#48769,github-automation-metabase,2024-10-16 20:41:53+00:00,"['dpsutton', 'github-automation-metabase']",2024-10-16 21:24:25+00:00,2024-10-16 21:24:24+00:00,https://github.com/metabase/metabase/pull/48812,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2592946432,pull_request,closed,,"🤖 backported ""Add a new prometheus metrics in m.qp.middleware.metrics/adjust""","  #48598
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-16 20:07:32+00:00,"['appleby', 'github-automation-metabase']",2024-10-17 14:43:41+00:00,2024-10-17 14:43:39+00:00,https://github.com/metabase/metabase/pull/48811,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2417885666, 'issue_id': 2592946432, 'author': 'appleby', 'body': 'Resolved minor conflict in prometheus.clj due to unbackported #48578', 'created_at': datetime.datetime(2024, 10, 16, 20, 27, 41, tzinfo=datetime.timezone.utc)}]","appleby (Assginee) on (2024-10-16 20:27:41 UTC): Resolved minor conflict in prometheus.clj due to unbackported #48578

"
2592560975,pull_request,closed,,fix(sdk): static question should cancel requests on component unmount,"### Description

When the `StaticQuestion` component unmounts, e.g. when we navigate to other pages, the old requests are still running. This PR adds request cancellation to the StaticQuestion component.

### How to verify

- Open Shoppy
- Use the switch shop button to switch shop
- You should see requests cancelled per the below screenshot

### Demo

Pending requests are getting properly cancelled. Notice the **(canceled)** in DevTools.

![CleanShot 2567-10-17 at 00 18 52@2x](https://github.com/user-attachments/assets/a4d3ba80-1173-4246-b280-e586a468a669)",heypoom,2024-10-16 17:21:58+00:00,['heypoom'],2024-10-25 11:40:20+00:00,2024-10-25 05:54:28+00:00,https://github.com/metabase/metabase/pull/48808,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2592544286,pull_request,closed,,fix(sdk): Improve auth error messages,"Changes error handling for the SDK, with some changes in the JWT parts of the backend to accommodate that. Instead of using descriptions everywhere, I've introduced status codes to hopefully standardize or at least make our lives easier in terms of adding/modifying error codes and descriptions.

For the backend, I've added some of the status codes and added those changes to the relevant endpoints.

For the frontend:
- I modified `SdkError` to take in different status codes (with types of course) and then created a mapping between those codes and the actual information that we want to display. 
- I changed `use-init-data` to use `ts-pattern` and added different error codes throughout the different stages of authentication. Hopefully this will save a lot of pain for people",oisincoveney,2024-10-16 17:16:14+00:00,['oisincoveney'],2024-10-23 13:19:56+00:00,2024-10-23 13:19:56+00:00,https://github.com/metabase/metabase/pull/48807,"[('.Team/Embedding', '')]","[{'comment_id': 2419297749, 'issue_id': 2592544286, 'author': 'npretto', 'body': 'I tried to re-implement the logic using as little FE code as possible here: https://github.com/metabase/metabase/pull/48826\r\nIt\'s still a WIP, let me know what you think and we can sync later.\r\nI tried to be as ""transparent"" as possible with errors, making them surfaces in the console with the original stack trace even if they are ""host code"" errors\r\n<img width=""929"" alt=""image"" src=""https://github.com/user-attachments/assets/e41ced2f-9475-46c7-ba20-6f0ce8a7edef"">', 'created_at': datetime.datetime(2024, 10, 17, 11, 42, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2432149937, 'issue_id': 2592544286, 'author': 'oisincoveney', 'body': 'Will pause this for now until 51 is released and we have refactored the `use-init-data` hook and auth code in general.\r\n\r\ncc @npretto', 'created_at': datetime.datetime(2024, 10, 23, 13, 19, 56, tzinfo=datetime.timezone.utc)}]","npretto on (2024-10-17 11:42:45 UTC): I tried to re-implement the logic using as little FE code as possible here: https://github.com/metabase/metabase/pull/48826
It's still a WIP, let me know what you think and we can sync later.
I tried to be as ""transparent"" as possible with errors, making them surfaces in the console with the original stack trace even if they are ""host code"" errors
<img width=""929"" alt=""image"" src=""https://github.com/user-attachments/assets/e41ced2f-9475-46c7-ba20-6f0ce8a7edef"">

oisincoveney (Issue Creator) on (2024-10-23 13:19:56 UTC): Will pause this for now until 51 is released and we have refactored the `use-init-data` hook and auth code in general.

cc @npretto

"
2592411713,pull_request,closed,,poc component testing,"Sample code for https://github.com/metabase/metabase/issues/48784#issuecomment-2417366340

Run with `NODE_OPTIONS=--max_old_space_size=8192 y cypress open -C e2e/support/cypress.config.js`

<img width=""1456"" alt=""image"" src=""https://github.com/user-attachments/assets/3fa873c6-7e87-4234-b38d-aa59819cfeb8"">


It works until we import something from the our code",npretto,2024-10-16 16:28:30+00:00,['npretto'],2025-02-04 14:55:29+00:00,2024-10-29 17:48:50+00:00,https://github.com/metabase/metabase/pull/48806,"[('.Team/Embedding', '')]","[{'comment_id': 2417331237, 'issue_id': 2592411713, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 16, 16, 28, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-16 16:28:54 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2592408912,pull_request,closed,,Add allowed iframe host setting,"Closes https://github.com/metabase/metabase-private/issues/238

### Description

Adds a setting to configure allowed iframe hosts under Admin -> General.

<img width=""721"" alt=""Screenshot 2024-10-22 at 8 25 22 PM"" src=""https://github.com/user-attachments/assets/f16f3f8b-9358-4f75-b435-fab17ed28425"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-16 16:27:38+00:00,"['alxnddr', 'kulyk']",2024-10-23 17:46:06+00:00,2024-10-23 17:46:03+00:00,https://github.com/metabase/metabase/pull/48805,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('Cloud-Blocker:51', 'Issues blocking the cloud customers to be upgraded to v51')]","[{'comment_id': 2430752149, 'issue_id': 2592408912, 'author': 'dpsutton', 'body': 'Couple things we will need to address:\r\n1. This gets called a _lot_. Instrumented it and reloaded on a question invoked this 20 times. This doesn\'t do a tiny amount of work: we are parsing lots of strings, detecting hosts, etc. It\'s non-substantial to do on every request. It\'s also deterministic on its input. We should memoize it in some manner.\r\n2. I\'m not sure if you are able to restore the current behavior of `*`: `security=> (parse-allowed-iframe-hosts ""*"") [""*:*""]`\r\n3. The parser is weird about trailing slashes and a provided www. It\'s a bit of a rough edge:\r\n```\r\nsecurity=> (parse-allowed-iframe-hosts ""www.google.com"")\r\n[""www.google.com""]\r\nsecurity=> (parse-allowed-iframe-hosts ""google.com"")\r\n[""google.com"" ""*.google.com""]\r\nsecurity=> (parse-allowed-iframe-hosts ""google.com/"")\r\n[]\r\nsecurity=> (parse-allowed-iframe-hosts ""docs.google.com"")\r\n[""docs.google.com""]\r\n```\r\nI don\'t know what the right answers are here, but i don\'t see it discussed anywhere.\r\n4. We use `log/error` here. I\'m not sure what the level should be here. I\'m not sure what else `parse-url` is used for that it is erroneous. Is an invalid url here erroneous? How noisy should that be?\r\n5. `parse-allowed-iframe-hosts` returns either a vector of hosts `[""google.com"" ""*.google.com""]` or a string error message. This is weird. It should _Log_ an error message and not return the `(catch Exception e (ex-message e))` instead of the parsed hosts.', 'created_at': datetime.datetime(2024, 10, 23, 3, 9, 37, tzinfo=datetime.timezone.utc)}]","dpsutton on (2024-10-23 03:09:37 UTC): Couple things we will need to address:
1. This gets called a _lot_. Instrumented it and reloaded on a question invoked this 20 times. This doesn't do a tiny amount of work: we are parsing lots of strings, detecting hosts, etc. It's non-substantial to do on every request. It's also deterministic on its input. We should memoize it in some manner.
2. I'm not sure if you are able to restore the current behavior of `*`: `security=> (parse-allowed-iframe-hosts ""*"") [""*:*""]`
3. The parser is weird about trailing slashes and a provided www. It's a bit of a rough edge:
```
security=> (parse-allowed-iframe-hosts ""www.google.com"")
[""www.google.com""]
security=> (parse-allowed-iframe-hosts ""google.com"")
[""google.com"" ""*.google.com""]
security=> (parse-allowed-iframe-hosts ""google.com/"")
[]
security=> (parse-allowed-iframe-hosts ""docs.google.com"")
[""docs.google.com""]
```
I don't know what the right answers are here, but i don't see it discussed anywhere.
4. We use `log/error` here. I'm not sure what the level should be here. I'm not sure what else `parse-url` is used for that it is erroneous. Is an invalid url here erroneous? How noisy should that be?
5. `parse-allowed-iframe-hosts` returns either a vector of hosts `[""google.com"" ""*.google.com""]` or a string error message. This is weird. It should _Log_ an error message and not return the `(catch Exception e (ex-message e))` instead of the parsed hosts.

"
2592393398,pull_request,closed,,"🤖 backported ""Snowplow Stats Ping: keywords only allowed at the top level""",#48802,github-automation-metabase,2024-10-16 16:21:43+00:00,"['escherize', 'github-automation-metabase']",2024-10-17 14:48:39+00:00,2024-10-17 14:48:38+00:00,https://github.com/metabase/metabase/pull/48804,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2592264965,pull_request,closed,,Snowplow Stats Ping: keywords only allowed at the top level,"This is a fix for this issue:

Top level keywords get converted to strings, but they're the only ones.

Eventually we should fix this because it's a little counter-intuitive, since it feels like we are building json from edn data (which would stringify keywords). 


[Here's the response from http://localhost:9090/micro/good](https://gist.github.com/escherize/480e129a92d835bde9acc967d6ede815) after running the stats ping locally. To verify that it is actually fixed.",escherize,2024-10-16 15:36:13+00:00,['escherize'],2024-10-17 14:49:04+00:00,2024-10-16 16:20:55+00:00,https://github.com/metabase/metabase/pull/48802,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2592150723,pull_request,closed,,Splice expression into appropriate stage during v2 metric expansion,"Closes https://github.com/metabase/metabase/issues/48722

### Description

Problem was that expression was added to 0th stage. If metric with source other than table was used, its source was expanded to another stage. This PR adjusts the stage to which expressions are added.

### How to verify

Follow reproduction steps or execute newly added test.

### Checklist

- [X] Tests have been added/updated to cover changes in this PR
",lbrdnk,2024-10-16 14:55:09+00:00,['lbrdnk'],2024-10-17 19:06:42+00:00,2024-10-17 19:06:40+00:00,https://github.com/metabase/metabase/pull/48800,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2420326118, 'issue_id': 2592150723, 'author': 'lbrdnk', 'body': 'Flaky test has passed locally. Merging.', 'created_at': datetime.datetime(2024, 10, 17, 19, 6, 21, tzinfo=datetime.timezone.utc)}]","lbrdnk (Issue Creator) on (2024-10-17 19:06:21 UTC): Flaky test has passed locally. Merging.

"
2592134973,pull_request,closed,,Update SDK version to 0.1.39,Update Readme version references and published npm package version to 0.1.39,github-automation-metabase,2024-10-16 14:50:44+00:00,"['WiNloSt', 'github-automation-metabase']",2024-11-26 18:52:34+00:00,2024-10-16 14:55:28+00:00,https://github.com/metabase/metabase/pull/48799,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2417069585, 'issue_id': 2592134973, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 16, 14, 51, 9, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-16 14:51:09 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2592018972,pull_request,closed,,"🤖 backported ""Convert `dashcardData` dashboard reducers to TS""",#48679,github-automation-metabase,2024-10-16 14:08:44+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-16 14:52:21+00:00,2024-10-16 14:52:20+00:00,https://github.com/metabase/metabase/pull/48798,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2591937392,pull_request,closed,,Manual backport: Fix flaky x-ray test (#48786),Manual backport of https://github.com/metabase/metabase/pull/48786,kulyk,2024-10-16 13:42:13+00:00,['kulyk'],2024-10-16 14:50:46+00:00,2024-10-16 14:50:17+00:00,https://github.com/metabase/metabase/pull/48796,"[('.Team/DashViz', 'Dashboard and Viz team')]",[],
2591854681,pull_request,closed,,"🤖 backported ""ci(sdk): Remove unnecessary uberjar process from SDK workflow""",#48729,github-automation-metabase,2024-10-16 13:12:01+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-16 13:13:34+00:00,2024-10-16 13:13:33+00:00,https://github.com/metabase/metabase/pull/48793,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2591851976,pull_request,closed,,"🤖 backported ""Ensure new fields in permissions table are set properly for Examples collection""",#48746,github-automation-metabase,2024-10-16 13:10:50+00:00,"['noahmoss', 'github-automation-metabase']",2024-10-16 14:27:29+00:00,2024-10-16 14:27:28+00:00,https://github.com/metabase/metabase/pull/48792,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2591800112,pull_request,closed,,"Show ""view-only"" badge when the question is not editable","Closes https://github.com/metabase/metabase/issues/15947

[Testing plan](https://www.notion.so/metabase/Testing-plan-Disallow-editing-queries-with-hidden-tables-12369354c90180f9be40c4bea7fba5ba)

### Description

This PR makes the situation in https://github.com/metabase/metabase/issues/15947 a bit clearer by adding a badge explaining why the question is read-only.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> Orders -> Save
2. Admin Settings -> Table Metadata -> Make Orders hidden
3. Navigate to the question you created before
4. It should not be editable and it should show a `view-only` badge
5. Hover the badge and verify the copy in the popover makes sense

### Demo

<img width=""1474"" alt=""Screenshot 2024-10-16 at 14 51 32"" src=""https://github.com/user-attachments/assets/782dc4e8-34f5-40a1-be23-37a2dd99af00"">
",romeovs,2024-10-16 12:51:51+00:00,['romeovs'],2024-10-22 15:47:34+00:00,2024-10-22 15:47:31+00:00,https://github.com/metabase/metabase/pull/48791,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2416761061, 'issue_id': 2591800112, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff eefd754357b6386496898ed191ca564295b07ca3...a758a37007aa28f02950297771cfb9fb054d1825.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/lock_filled.svg |', 'created_at': datetime.datetime(2024, 10, 16, 12, 53, 27, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-16 12:53:27 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff eefd754357b6386496898ed191ca564295b07ca3...a758a37007aa28f02950297771cfb9fb054d1825.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/lock_filled.svg |

"
2591770219,pull_request,closed,,"🤖 backported ""Fix flaky x-ray test""","  #48786
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-16 12:39:03+00:00,"['kulyk', 'github-automation-metabase']",2024-10-16 13:43:06+00:00,2024-10-16 13:43:03+00:00,https://github.com/metabase/metabase/pull/48790,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2416882836, 'issue_id': 2591770219, 'author': 'kulyk', 'body': 'Closing in favor of manual backport: #48796', 'created_at': datetime.datetime(2024, 10, 16, 13, 43, 3, tzinfo=datetime.timezone.utc)}]","kulyk (Assginee) on (2024-10-16 13:43:03 UTC): Closing in favor of manual backport: #48796

"
2591403045,pull_request,closed,,Fix flaky x-ray test,"Fixes a flaky x-ray test that was asserting a dynamic value of a ""Transactions in the last 30 days"" query (introduced in #48742)",kulyk,2024-10-16 10:24:09+00:00,['kulyk'],2024-10-16 14:50:45+00:00,2024-10-16 12:38:13+00:00,https://github.com/metabase/metabase/pull/48786,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2591283747,pull_request,closed,,Bump jetty-server to fix CVSS,"### Description

- Bump jetty-server to 11.0.24

### How to verify

Me again! Similar to #46229, our Snyk CI has flagged another vulnerability.

![image](https://github.com/user-attachments/assets/dc370ae7-ab72-4c09-92ad-7bb1b342c552)

Not relevant to this PR, but it would be a good idea to add Snyk in to this. If you need help setting that up, I can certainly look into PRing that myself 😄 

The CVSS in question is [this](https://security.snyk.io/vuln/SNYK-JAVA-ORGECLIPSEJETTY-8186142) and carries quite a high severity, so assuming this doesn't break much I would imagine you would want to merge this quite soon.

Thanks again for a great bit of software!

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",elken,2024-10-16 09:41:18+00:00,[],2024-10-21 18:31:38+00:00,2024-10-21 18:27:50+00:00,https://github.com/metabase/metabase/pull/48785,[],"[{'comment_id': 2427427844, 'issue_id': 2591283747, 'author': 'paoliniluis', 'body': 'done already', 'created_at': datetime.datetime(2024, 10, 21, 18, 27, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2427435453, 'issue_id': 2591283747, 'author': 'elken', 'body': 'Done as part of https://github.com/metabase/metabase/pull/48819 yes', 'created_at': datetime.datetime(2024, 10, 21, 18, 31, 35, tzinfo=datetime.timezone.utc)}]","paoliniluis on (2024-10-21 18:27:50 UTC): done already

elken (Issue Creator) on (2024-10-21 18:31:35 UTC): Done as part of https://github.com/metabase/metabase/pull/48819 yes

"
2591136491,pull_request,closed,,"🤖 backported ""Fix failed Loki snapshots not uploading to CI""",#48779,github-automation-metabase,2024-10-16 08:51:23+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-16 09:06:42+00:00,2024-10-16 09:06:41+00:00,https://github.com/metabase/metabase/pull/48782,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2591051856,pull_request,closed,,Fix failed Loki snapshots not uploading to CI,"Closes https://github.com/metabase/metabase/issues/48778

### Description

GitHub Action `upload-artifact` seems to be updated with a breaking change recently. [See here](https://github.com/actions/upload-artifact/commit/d7c12077c478ad3d03aeeb01e2f6917d1ac93c3a) that they've added the section about the new breaking change in the Readme recently.

### How to verify

The current Loki snapshot should fail since I just override one snapshot with another snapshot from a totally different component, and we should see the failed snapshots in the uploaded artifact once again.

Andddd the artifact is back!!! [See the run here.](https://github.com/metabase/metabase/actions/runs/11361688558?pr=48779) I tested with this commit 5923306c66

### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~ (No tests since it's a CI fix)
",WiNloSt,2024-10-16 08:18:08+00:00,['WiNloSt'],2024-10-16 08:50:32+00:00,2024-10-16 08:50:31+00:00,https://github.com/metabase/metabase/pull/48779,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2590932027,pull_request,closed,,"🤖 backported ""make sure all top-level API paths are present in OpenAPI doc""",#48718,github-automation-metabase,2024-10-16 07:33:12+00:00,"['piranha', 'github-automation-metabase']",2024-10-17 07:17:05+00:00,2024-10-17 07:17:04+00:00,https://github.com/metabase/metabase/pull/48777,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2590904631,pull_request,closed,,"🤖 backported ""Do not open sidesheets on SDK""",#48630,github-automation-metabase,2024-10-16 07:23:10+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-17 07:19:44+00:00,2024-10-17 07:19:43+00:00,https://github.com/metabase/metabase/pull/48776,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2590221860,pull_request,closed,,Downgrade migration for table-level native perms,Downgrade-only migration to clear table-level native query perms when migrating down from 52 to 51,noahmoss,2024-10-16 00:09:39+00:00,['noahmoss'],2024-10-18 13:46:23+00:00,2024-10-18 13:46:20+00:00,https://github.com/metabase/metabase/pull/48773,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2590215388,pull_request,closed,,Iframe Whitelist,"Add a public setting that stores the allowed domains for iframes in Dashboards

",adam-james-v,2024-10-16 00:05:21+00:00,['adam-james-v'],2024-10-16 21:09:10+00:00,2024-10-16 21:09:09+00:00,https://github.com/metabase/metabase/pull/48772,"[('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2417968966, 'issue_id': 2590215388, 'author': 'adam-james-v', 'body': 'superseded by: https://github.com/metabase/metabase/pull/48805', 'created_at': datetime.datetime(2024, 10, 16, 21, 9, 9, tzinfo=datetime.timezone.utc)}]","adam-james-v (Issue Creator) on (2024-10-16 21:09:09 UTC): superseded by: https://github.com/metabase/metabase/pull/48805

"
2590098192,pull_request,closed,,fix(sdk): remove unsafe lifecycle react errors,"Closes https://github.com/metabase/metabase/issues/48497

### Description

Removes the react errors in the console on unsafe lifecycle

<img src=""https://github.com/user-attachments/assets/7c263c80-47ed-44cb-ace2-3299e409eb58"" width=""300"">

### TODO

- [x] Remapped (HoC)
- [x] Visualization
- [x] DashboardGrid
- Link - this is from `react-router` so we can't do anything about it, except updating it 

### How to verify

- Render the InteractiveDashboard component
- These errors should go away",heypoom,2024-10-15 22:45:37+00:00,[],2025-01-23 06:28:10+00:00,2025-01-23 06:27:46+00:00,https://github.com/metabase/metabase/pull/48770,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2416752918, 'issue_id': 2590098192, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 595f302e3d4ad989f9fd29bc676663c5713f12f8...b3db7582d799b6d1a4a0b915f4fb162851b3c393.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx |', 'created_at': datetime.datetime(2024, 10, 16, 12, 49, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2608964172, 'issue_id': 2590098192, 'author': 'heypoom', 'body': 'Closing this first as the branch is too far behind. Will delete this branch once I am done with implementing https://github.com/metabase/metabase/issues/48497', 'created_at': datetime.datetime(2025, 1, 23, 6, 27, 46, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-16 12:49:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 595f302e3d4ad989f9fd29bc676663c5713f12f8...b3db7582d799b6d1a4a0b915f4fb162851b3c393.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx |

heypoom (Issue Creator) on (2025-01-23 06:27:46 UTC): Closing this first as the branch is too far behind. Will delete this branch once I am done with implementing https://github.com/metabase/metabase/issues/48497

"
2590090579,pull_request,closed,,Let non-admins see tables in recents,"Closes https://github.com/metabase/metabase/issues/47420

```shell
❯ http get ""localhost:3000/api/activity/recents?context=views"" Cookie:""metabase.SESSION=ba..3d"" -pb
{
    ""recents"": [
        {
            ""can_write"": false,
            ""database"": {
                ""id"": 6,
                ""initial_sync_status"": ""complete"",
                ""name"": ""pg restaurants""
            },
            ""description"": null,
            ""display_name"": ""Restaurants"",
            ""id"": 112,
            ""model"": ""table"",
            ""name"": ""restaurants"",
            ""table_schema"": ""public"",
            ""timestamp"": ""2024-10-15T22:11:39.412100Z""
        },
        {
            ""can_write"": false,
            ""database"": {
                ""id"": 6,
                ""initial_sync_status"": ""complete"",
                ""name"": ""pg restaurants""
            },
            ""description"": null,
            ""display_name"": ""Reviews"",
            ""id"": 110,
            ""model"": ""table"",
            ""name"": ""reviews"",
            ""table_schema"": ""public"",
            ""timestamp"": ""2024-10-15T19:53:19.999445Z""
        }
    ]
}
```

We were getting permissions of a ""fake"" table. Instead, let the db select it and get the proper stuff. Worked for admins because mi/can-read? is presumably always true for tables, and worked in tests because we mocked mi/can-read?
",dpsutton,2024-10-15 22:41:04+00:00,['dpsutton'],2024-10-16 20:41:06+00:00,2024-10-16 20:41:04+00:00,https://github.com/metabase/metabase/pull/48769,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2590079530,pull_request,closed,,"🤖 backported ""Add v0.50.30 to the list of releases""",#48766,metabase-bot[bot],2024-10-15 22:34:46+00:00,['alexyarosh'],2024-10-15 22:36:11+00:00,2024-10-15 22:36:10+00:00,https://github.com/metabase/metabase/pull/48768,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2590075746,pull_request,closed,,"🤖 backported ""Add v0.50.30 to the list of releases""",#48766,github-automation-metabase,2024-10-15 22:32:16+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-15 22:34:07+00:00,2024-10-15 22:34:06+00:00,https://github.com/metabase/metabase/pull/48767,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2590062379,pull_request,closed,,Add v0.50.30 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-10-15 22:22:09+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-15 22:36:39+00:00,2024-10-15 22:31:28+00:00,https://github.com/metabase/metabase/pull/48766,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2415285277, 'issue_id': 2590062379, 'author': 'alexyarosh', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 15, 22, 33, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2415288134, 'issue_id': 2590062379, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 15, 22, 36, 38, tzinfo=datetime.timezone.utc)}]","alexyarosh on (2024-10-15 22:33:55 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-15 22:36:38 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2590007428,pull_request,closed,,Support resolving names in source-metadata by ID,"Fixes #48639

### Description

Support resolving field references in source-metadata by ID.

### How to verify

See `model-self-join-test`.  Build such a question with the FE and check that it doesn't crash.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-10-15 21:49:56+00:00,['metamben'],2024-10-17 13:38:39+00:00,2024-10-17 13:37:56+00:00,https://github.com/metabase/metabase/pull/48765,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2590000116,pull_request,closed,,fix(sdk): fix defaultProps react error,"Closes https://github.com/metabase/metabase/issues/48496

### Description

Removes these console errors

- `Modal: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.`
- `ReactMarkdown: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.`

### How to verify

- Renders the `InteractiveDashboard` component in either Vite or create-react-app
- Search for ""defaultProps"" in console
- Error should be gone

### Changelog for react-markdown version bump

8.0.7 - 2023-04-12

* [`c289176`](https://github.com/remarkjs/react-markdown/commit/c289176)
  Fix performance for keys
  by [**@wooorm**](https://github.com/wooorm)
  in [#738](https://github.com/remarkjs/react-markdown/pull/738)
* [`9034dbd`](https://github.com/remarkjs/react-markdown/commit/9034dbd)
  Fix types in syntax highlight example
  by [**@dlqqq**](https://github.com/dlqqq)
  in [#736](https://github.com/remarkjs/react-markdown/pull/736)

**Full Changelog**: <https://github.com/remarkjs/react-markdown/compare/8.0.6...8.0.7>

8.0.6 - 2023-03-20

* [`33ab015`](https://github.com/remarkjs/react-markdown/commit/33ab015)
  Update to TS 5\
  by [**@Methuselah96**](https://github.com/Methuselah96)
  in [#734](https://github.com/remarkjs/react-markdown/issues/734)

8.0.5 - 2023-01-17

* [`d640d40`](https://github.com/remarkjs/react-markdown/commit/d640d40)
  Update to use `node16` module resolution in `tsconfig.json`\
  by [**@ChristianMurphy**](https://github.com/ChristianMurphy)
  in [#723](https://github.com/remarkjs/react-markdown/pull/723)
* [`402fea3`](https://github.com/remarkjs/react-markdown/commit/402fea3)
  Fix typo in `plugins` deprecation message\
  by [**@marc2332**](https://github.com/marc2332)
  in [#719](https://github.com/remarkjs/react-markdown/pull/719)
* [`4f98f73`](https://github.com/remarkjs/react-markdown/commit/4f98f73)
  Remove deprecated and unneeded `defaultProps`\
  by [**@Lepozepo**](https://github.com/Lepozepo)
  in [#718](https://github.com/remarkjs/react-markdown/pull/718)
",heypoom,2024-10-15 21:45:38+00:00,['heypoom'],2024-10-17 23:26:04+00:00,2024-10-17 23:26:03+00:00,https://github.com/metabase/metabase/pull/48764,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2589943304,pull_request,closed,,Reduce cache TTL for billing info from 5h to 5min,"Store API can handle higher load and customers might want to see
changes earlier.

Fixes: cc28ee604134a36c4ff8aad20f6da6f02bd4b9d6
",devurandom,2024-10-15 21:11:53+00:00,['devurandom'],2024-10-18 16:14:07+00:00,2024-10-18 14:31:10+00:00,https://github.com/metabase/metabase/pull/48762,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2422770944, 'issue_id': 2589943304, 'author': 'devurandom', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 18, 15, 49, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2422815690, 'issue_id': 2589943304, 'author': 'devurandom', 'body': '* v50: https://github.com/metabase/metabase/pull/48895\r\n* v51: https://github.com/metabase/metabase/pull/48889', 'created_at': datetime.datetime(2024, 10, 18, 16, 14, 5, tzinfo=datetime.timezone.utc)}]","devurandom (Issue Creator) on (2024-10-18 15:49:27 UTC): @metabase-bot backport release-x.50.x

devurandom (Issue Creator) on (2024-10-18 16:14:05 UTC): * v50: https://github.com/metabase/metabase/pull/48895
* v51: https://github.com/metabase/metabase/pull/48889

"
2589876427,pull_request,closed,,"🤖 backported ""Adds missing schemas + data for metrics to snowplow stats ping""",#48476,github-automation-metabase,2024-10-15 20:48:02+00:00,"['escherize', 'github-automation-metabase']",2024-10-15 23:40:44+00:00,2024-10-15 23:40:43+00:00,https://github.com/metabase/metabase/pull/48760,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2589807912,pull_request,closed,,Select data source in MBQL queries by default,"Epic https://github.com/metabase/metabase/issues/48747
Closes https://github.com/metabase/metabase/issues/48748",ranquild,2024-10-15 20:28:11+00:00,['ranquild'],2024-10-15 22:34:10+00:00,2024-10-15 22:34:08+00:00,https://github.com/metabase/metabase/pull/48759,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2589793531,pull_request,closed,,Fixing broken Configure Slack links,"Closes https://github.com/metabase/metabase/issues/48751
### Description
Currently in the app there are some ""configure slack"" links that are broken. This PR fixes those links, as well as adds webhooks to the ""setup channels"" modal for alerts

### How to verify

1. Have an instance with no channels setup (email/slack/webhooks)
2. Navigate to a question and open the share modal
3. Test that the links are not broken
4. Navigate to a dashboard and open the subscriptions side panel
5. Ensure that the setup slack link is not broken

### Demo
![image](https://github.com/user-attachments/assets/eef232ad-ecc1-440b-b72b-caed292851bc)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-15 20:21:28+00:00,['npfitz'],2024-10-18 13:54:09+00:00,2024-10-18 13:54:07+00:00,https://github.com/metabase/metabase/pull/48758,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2414934928, 'issue_id': 2589793531, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8e950e8c1c65c19bea658cc740788b0a086aed55...0e6794cd18fabc61f2f7c106551f9193f791da32.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/NewPulseSidebar.tsx |', 'created_at': datetime.datetime(2024, 10, 15, 20, 22, 56, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 20:22:56 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 8e950e8c1c65c19bea658cc740788b0a086aed55...0e6794cd18fabc61f2f7c106551f9193f791da32.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/NewPulseSidebar.tsx |

"
2589768535,pull_request,closed,,"(wip) port Select, MultiSelect, Autocomplete, and MultiAutocomplete","port Select-related components to Mantine

Closes #48756",rafpaf,2024-10-15 20:08:24+00:00,['rafpaf'],2025-02-04 17:32:18+00:00,2024-10-18 14:20:17+00:00,https://github.com/metabase/metabase/pull/48757,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2414909029, 'issue_id': 2589768535, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48757?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#48757** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48757?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48464** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48464?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 1 other dependent PR ([#48465](https://github.com/metabase/metabase/pull/48465) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48465?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>)\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 15, 20, 8, 41, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-15 20:08:41 UTC): * **#48757** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48757?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48464** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48464?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 1 other dependent PR ([#48465](https://github.com/metabase/metabase/pull/48465) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48465?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>)
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2589713376,pull_request,closed,,fix(sdk): hide downloads by default,"### Description

As we have issues on [visual artifacts](https://github.com/metabase/metabase/issues/48716) in PNG/PDF image downloads in the SDK when custom themes are being applied, we decided to hide all downloads by default.

### How to verify

- Render a StaticDashboard or InteractiveDashboard
- Both the PDF exports and the dashcard download should be disabled by default.
- Using the `withDownloads` prop should enable the downloads.",heypoom,2024-10-15 19:40:55+00:00,['heypoom'],2024-10-17 23:37:28+00:00,2024-10-17 22:53:15+00:00,https://github.com/metabase/metabase/pull/48755,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2416603584, 'issue_id': 2589713376, 'author': 'WiNloSt', 'body': 'Can you update the readme on the 3 components as well? https://github.com/metabase/metabase/blob/24c570c98d9207e7a7d5d6358a60ab263379a0c2/enterprise/frontend/src/embedding-sdk/README.md#L440\r\n\r\nIt should say something like `Whether to show the download button` now since the default value is now `false`. Maybe noting that the default value is `false` would also be great.', 'created_at': datetime.datetime(2024, 10, 16, 11, 57, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2416620165, 'issue_id': 2589713376, 'author': 'heypoom', 'body': '@WiNloSt Good call! I updated the README below.', 'created_at': datetime.datetime(2024, 10, 16, 12, 3, 30, tzinfo=datetime.timezone.utc)}]","WiNloSt on (2024-10-16 11:57:02 UTC): Can you update the readme on the 3 components as well? https://github.com/metabase/metabase/blob/24c570c98d9207e7a7d5d6358a60ab263379a0c2/enterprise/frontend/src/embedding-sdk/README.md#L440

It should say something like `Whether to show the download button` now since the default value is now `false`. Maybe noting that the default value is `false` would also be great.

heypoom (Issue Creator) on (2024-10-16 12:03:30 UTC): @WiNloSt Good call! I updated the README below.

"
2589590662,pull_request,closed,,"🤖 backported ""use simple_event schema to track iframe card creation""",#48739,github-automation-metabase,2024-10-15 18:45:45+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-15 19:45:19+00:00,2024-10-15 19:45:18+00:00,https://github.com/metabase/metabase/pull/48750,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2589549828,pull_request,closed,,"🤖 backported ""Fix maps visualization crashing on x-rays""",#48742,github-automation-metabase,2024-10-15 18:27:36+00:00,"['kulyk', 'github-automation-metabase']",2024-10-15 19:09:47+00:00,2024-10-15 19:09:46+00:00,https://github.com/metabase/metabase/pull/48749,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2414728188, 'issue_id': 2589549828, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a2ba92f5388d99d91114be78df006403a87bea3e...8a019ac7145a62fb350fbdac1b9d1fda972b0b90.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/LegendHorizontal.jsx |', 'created_at': datetime.datetime(2024, 10, 15, 18, 29, 1, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 18:29:01 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a2ba92f5388d99d91114be78df006403a87bea3e...8a019ac7145a62fb350fbdac1b9d1fda972b0b90.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/LegendHorizontal.jsx |

"
2589495960,pull_request,closed,,Ensure new fields in permissions table are set properly for Examples collection,"@johnswanson added new `:perm_type`, `:perm_value` and `:collection_id` fields on the `permissions` table in #46942. Since those migrations were backported to 49, they run _before_ the migration which creates the sample content and `Examples` collection on new instances. This means that this collection doesn't have the new fields correctly populated, and thus was not showing up in the collection tree for any non-admin users.

In this PR I've updated the `CreateSampleContent` migration to set these fields correctly, and added a test case to verify.

Resolves https://github.com/metabase/metabase/issues/48594",noahmoss,2024-10-15 17:59:38+00:00,['noahmoss'],2024-10-16 13:10:01+00:00,2024-10-16 13:09:59+00:00,https://github.com/metabase/metabase/pull/48746,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2414672409, 'issue_id': 2589495960, 'author': 'noahmoss', 'body': '* **#48746** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48746?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 15, 17, 59, 54, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-15 17:59:54 UTC): * **#48746** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48746?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2589311629,pull_request,closed,,Fix maps visualization crashing on x-rays,"Fixes #48519

Map visualizations were failing on x-rays because of undefined `hiddenIndices` prop in the legend component (introduced in #47581)

### To verify

1. Open `/browse/databases/1-sample-database`
2. X-ray the orders table
3. Ensure the ""Sales per state"" card renders without errors",kulyk,2024-10-15 16:40:40+00:00,['kulyk'],2024-10-15 18:26:50+00:00,2024-10-15 18:26:48+00:00,https://github.com/metabase/metabase/pull/48742,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2414514217, 'issue_id': 2589311629, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 880119e76bb4457f371e9db17d5abdc97c6659f5...be8bad7cc538f9a9215781aa2b88b8439ceaab1a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/LegendHorizontal.jsx |', 'created_at': datetime.datetime(2024, 10, 15, 16, 42, 4, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 16:42:04 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 880119e76bb4457f371e9db17d5abdc97c6659f5...be8bad7cc538f9a9215781aa2b88b8439ceaab1a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/LegendHorizontal.jsx |

"
2589280442,pull_request,closed,,"🤖 backported ""fix circular deps in query_builder/components""",#48604,github-automation-metabase,2024-10-15 16:23:23+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-15 17:26:41+00:00,2024-10-15 17:26:40+00:00,https://github.com/metabase/metabase/pull/48741,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2589265272,pull_request,closed,,"🤖 backported ""Incremental Pivot Processing for Exports""",#46995,github-automation-metabase,2024-10-15 16:16:52+00:00,"['adam-james-v', 'github-automation-metabase']",2024-10-15 16:59:00+00:00,2024-10-15 16:58:59+00:00,https://github.com/metabase/metabase/pull/48740,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2414466019, 'issue_id': 2589265272, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 29b8b466e4a71e4ca466615be5c4919fc23df940...cc6e1604227eaa924d55aebe67fbc0d8c9473e28.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>src/metabase/email/messages.clj |\n| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 15, 16, 18, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 16:18:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 29b8b466e4a71e4ca466615be5c4919fc23df940...cc6e1604227eaa924d55aebe67fbc0d8c9473e28.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>src/metabase/email/messages.clj |
| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |

"
2589219686,pull_request,closed,,use simple_event schema to track iframe card creation,"[Slack convo](https://metaboat.slack.com/archives/C064QMXEV9N/p1728927068374829)

### Description

We want to limit snowplow schema changes and utilize `simple_event` with a flexible schema more often for tracking. This PR changes the iframe cards tracking. 

Previously, the event assumed to have the following shape with its own schema:
```
{
    event: ""new_iframe_card_created"",
    dashboard_id: 1,
    domain_name: ""example.com"",
}
```

After switching to `simple_event` it will have this shape
```
{
    event: ""new_iframe_card_created"",
    target_id: 2,
    event_detail: ""example.com"",
}
```

### How to verify

An [E2E spec](https://github.com/metabase/metabase/pull/48739/files#diff-cfb3a167f618f4bcc7c0e578d6485d27a884ef0d24609e570160407d6b4e2dd1R1157) verifies correct tracking.

- Enable analytics tracking
- Create a dashboard
- While editing add iframe dashcards and save
- Ensure new_iframe_card_created event is fired with the hostname of the iframe content

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-15 15:55:38+00:00,['alxnddr'],2024-10-15 19:45:46+00:00,2024-10-15 18:44:48+00:00,https://github.com/metabase/metabase/pull/48739,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2588942934,pull_request,closed,,"🤖 backported ""fix iframe dashcards crash subscriptions""",#48589,github-automation-metabase,2024-10-15 14:22:11+00:00,"['adam-james-v', 'github-automation-metabase']",2024-10-16 20:20:43+00:00,2024-10-16 20:20:43+00:00,https://github.com/metabase/metabase/pull/48736,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588839680,pull_request,closed,,"🤖 backported ""Remove ""Replace or save question"" UI when saving and edited question from a metric""",#48669,github-automation-metabase,2024-10-15 13:46:38+00:00,"['romeovs', 'github-automation-metabase']",2024-10-16 11:43:07+00:00,2024-10-16 11:43:06+00:00,https://github.com/metabase/metabase/pull/48732,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588681336,pull_request,closed,,Add Release Channel selection in-product (#48126),"🍒 Manual Backport of https://github.com/metabase/metabase/pull/48425 and https://github.com/metabase/metabase/pull/48378 to v50
",iethree,2024-10-15 12:47:55+00:00,['iethree'],2024-10-15 16:55:06+00:00,2024-10-15 16:54:36+00:00,https://github.com/metabase/metabase/pull/48731,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588618299,pull_request,closed,,Update SDK version to 0.1.39-test1,Update Readme version references and published npm package version to 0.1.39-test1,github-automation-metabase,2024-10-15 12:21:20+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-15 12:22:07+00:00,2024-10-15 12:22:02+00:00,https://github.com/metabase/metabase/pull/48730,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2413763815, 'issue_id': 2588618299, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 15, 12, 21, 44, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 12:21:44 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2588589692,pull_request,closed,,ci(sdk): Remove unnecessary uberjar process from SDK workflow,"Closes https://github.com/metabase/metabase/issues/48728

### Description

This PR removes the unnecessary uberjar process from the SDK workflow. We don't need it anymore. You can read the issue for more details.

### How to verify
I tested with this commit https://github.com/metabase/metabase/pull/48729/commits/f9caf23d00ff69b660f9e6830b47603c204d5a67.

- View the [SDK release run detail](https://github.com/metabase/metabase/actions/runs/11345728654) (using `npm publish --dry-run` so we don't actually publish anything). It should be green.
- The Docs PR [Update SDK version to 0.1.39-test1](https://github.com/metabase/metabase/pull/48730#top) is created successfully.

",WiNloSt,2024-10-15 12:08:40+00:00,['WiNloSt'],2024-10-16 13:10:57+00:00,2024-10-16 13:10:53+00:00,https://github.com/metabase/metabase/pull/48729,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2588515720,pull_request,closed,,FE - e2e - Cover combination of unit of time parameter + non-last-stage filters with tests,"Closes #48445

### Description

This PR:
- adds a test that caught some issues in FE-side implementation
- fixes these issues

### How to verify

The following 4 e2e tests are expected to fail due to #48787:
- `multiple-column-breakouts.cy.spec.ts`
    - `should be able to use temporal-unit parameters with multiple temporal breakouts of a column`
- `visualizations-tabular/pivot_tables.cy.spec.js`
    - `should allow filtering drill through (metabase#14632) (metabase#14465)`
- `temporal-unit-parameters.cy.spec.js`
    - `should connect a parameter to a question and drill thru`
    - `should connect multiple parameters to a card with multiple breakouts and drill thru`

In all these cases drilling works but ""pivot table"" setting does not get enabled/properly recognized in the table viz.",kamilmielnik,2024-10-15 11:41:31+00:00,['kamilmielnik'],2024-10-18 08:48:07+00:00,2024-10-18 08:48:04+00:00,https://github.com/metabase/metabase/pull/48726,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2588497080,pull_request,closed,,"🤖 backported ""chore: more another flaky test to jail""",#48677,github-automation-metabase,2024-10-15 11:36:22+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-15 12:18:48+00:00,2024-10-15 12:18:47+00:00,https://github.com/metabase/metabase/pull/48725,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588344298,pull_request,closed,,Backport #48672 - Refactor remaining e2e API commands to TS helper functions (v50),"Manual backport of #48672
",kamilmielnik,2024-10-15 10:33:05+00:00,['kamilmielnik'],2024-10-15 14:36:27+00:00,2024-10-15 14:36:26+00:00,https://github.com/metabase/metabase/pull/48724,"[('.Team/Querying', ''), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588323837,pull_request,closed,,"🤖 backported ""Refactor remaining e2e API commands to TS helper functions""",#48672,github-automation-metabase,2024-10-15 10:23:36+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-10-15 11:05:13+00:00,2024-10-15 11:05:13+00:00,https://github.com/metabase/metabase/pull/48723,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2588122450,pull_request,closed,,[Notification] Cron trigger,"Add cron trigger to the new notification system.
We still use Quartz as the scheduler backend, all tasks will be called with `notification/*send-notification*`, which then puts the task into a fixed thread pool to execute.",qnkhuat,2024-10-15 09:06:05+00:00,[],2024-11-26 18:52:36+00:00,2024-10-16 04:15:23+00:00,https://github.com/metabase/metabase/pull/48719,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2588065770,pull_request,closed,,make sure all top-level API paths are present in OpenAPI doc,I've noticed that `/api/pulse` is not present in OpenAPI and it's because not all middlewares were passing necessary metadata forward.,piranha,2024-10-15 08:44:23+00:00,['piranha'],2024-10-17 07:17:33+00:00,2024-10-16 07:32:25+00:00,https://github.com/metabase/metabase/pull/48718,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2415955591, 'issue_id': 2588065770, 'author': 'piranha', 'body': ""Maybe... but then you have to remember to use it, so I don't think it'll be wildly useful.\r\n\r\nIt's going to be easier if we ever switch from compojure to doing something like interceptors or at least adding middleware in some data-specified way, right now it's going to be a pain. Hopefully that test will catch a problem next time we encounter it. :)"", 'created_at': datetime.datetime(2024, 10, 16, 7, 32, 16, tzinfo=datetime.timezone.utc)}]","piranha (Issue Creator) on (2024-10-16 07:32:16 UTC): Maybe... but then you have to remember to use it, so I don't think it'll be wildly useful.

It's going to be easier if we ever switch from compojure to doing something like interceptors or at least adding middleware in some data-specified way, right now it's going to be a pain. Hopefully that test will catch a problem next time we encounter it. :)

"
2587998239,pull_request,closed,,"🤖 backported ""fix flaky test on embed share behaviour snowplow events""",#48665,github-automation-metabase,2024-10-15 08:14:50+00:00,"['npretto', 'github-automation-metabase']",2024-10-15 09:18:28+00:00,2024-10-15 09:18:27+00:00,https://github.com/metabase/metabase/pull/48717,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2587926605,pull_request,closed,,"🤖 backported ""Change Metrics and Summaries copy""",#48451,github-automation-metabase,2024-10-15 07:43:46+00:00,"['romeovs', 'github-automation-metabase']",2024-10-15 08:31:59+00:00,2024-10-15 08:31:58+00:00,https://github.com/metabase/metabase/pull/48715,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2587412572,pull_request,closed,,MetaBot v3 [WIP],,camsaul,2024-10-15 01:45:13+00:00,['camsaul'],2024-10-16 21:23:35+00:00,2024-10-16 21:23:31+00:00,https://github.com/metabase/metabase/pull/48710,"[('.Team/DevEx', '')]",[],
2587177435,pull_request,closed,,"🤖 backported ""Implement inactive field removal""",#48636,github-automation-metabase,2024-10-14 22:22:24+00:00,"['metamben', 'github-automation-metabase']",2024-10-15 14:26:47+00:00,2024-10-15 14:26:46+00:00,https://github.com/metabase/metabase/pull/48709,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2587110544,pull_request,closed,,"🤖 backported ""Use `information_schema` as a basis for `describe-database` in Databricks driver""",#48585,github-automation-metabase,2024-10-14 21:32:07+00:00,"['lbrdnk', 'github-automation-metabase']",2024-10-15 21:19:12+00:00,2024-10-15 21:19:12+00:00,https://github.com/metabase/metabase/pull/48708,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2587065676,pull_request,closed,,Manual backport 'Use saved card metadata to filter fields in query metadata for sandboxed tables' to 50,Manual backport of #48577 to v50,noahmoss,2024-10-14 21:00:47+00:00,['noahmoss'],2024-10-15 16:16:45+00:00,2024-10-15 16:16:44+00:00,https://github.com/metabase/metabase/pull/48706,"[('.Team/AdminWebapp', 'Admin and Webapp team'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586985633,pull_request,closed,,Use name from metric aggregation after preprocessing,"Closes https://github.com/metabase/metabase/issues/48625

### Description

Prior to this PR name of metric's aggregation from before preprocessing was used. For migrated metrics (and probably also for other metrics) that was `nil`. This PR adjusts that, so the name is used after it was added by preprocessing.

### How to verify

Run the new test or follow reproduction steps from the linked issue.

### Checklist

- [X] Tests have been added/updated to cover changes in this PR
",lbrdnk,2024-10-14 20:31:10+00:00,['lbrdnk'],2024-10-17 16:02:54+00:00,2024-10-17 16:02:53+00:00,https://github.com/metabase/metabase/pull/48705,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', ''), ('Querying/Metrics', 'v2')]",[],
2586970095,pull_request,closed,,Add missing newline,Fixes a lint issue on master,rafpaf,2024-10-14 20:23:50+00:00,['rafpaf'],2024-11-26 18:52:40+00:00,2024-10-14 20:46:00+00:00,https://github.com/metabase/metabase/pull/48704,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2412165837, 'issue_id': 2586970095, 'author': 'rafpaf', 'body': '* **#48704** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48704?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 14, 20, 24, 3, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-14 20:24:03 UTC): * **#48704** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48704?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2586879097,pull_request,closed,,Track SCIM users + API response success/error counts,"* Tracks SCIM-created users under the `:sso_source` key and includes a count in the stats ping of the number of SCIM users created in the last 24 hours
  * Using `sso_source` for this isn't totally accurate since it's not strictly an SSO method, but I think this is the most logical place to track this information
* Adds Prometheus counters for SCIM success and error responses, and adds a macro to wrap each SCIM endpoint and increment the counters when appropriate",noahmoss,2024-10-14 19:34:48+00:00,['noahmoss'],2024-10-17 23:30:44+00:00,2024-10-17 22:23:34+00:00,https://github.com/metabase/metabase/pull/48702,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2417764983, 'issue_id': 2586879097, 'author': 'noahmoss', 'body': '* **#48702** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48702?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 16, 19, 29, 40, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-16 19:29:40 UTC): * **#48702** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48702?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2586843244,pull_request,closed,,Consolidate config for MySQL/MariaDB jobs in CI driver test config,"The config for MySQL and MariaDB is a 98% the same between the four different job definitions; since we're already already defining a matrix we can actually consolidate them all into one single job definition using the matrix to switch between versions. 

I switched away from the CircleCI images to the normal ones that we use in the https://github.com/metabase/dev-scripts repo as well.",camsaul,2024-10-14 19:16:03+00:00,['camsaul'],2025-01-09 00:58:44+00:00,2025-01-09 00:58:41+00:00,https://github.com/metabase/metabase/pull/48701,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2586840751,pull_request,closed,,ui: Remove Accordion theme overrides,"### What does this PR accomplish?
Removes a global Mantine Accordion style override.

> [!Important]
> Even though Accordion has a very handy `unstyled` prop, using it would mean removing the default styling that makes sense in 80-90% of the cases. OTOH, by not relying on that prop I had to find a way to override _some_ of the default Mantine styles. I have used a hack that @iethree showed me `:not[data-css-specificity-hack=""foo""`. This hack will most likely not be needed when we migrate to Mantine v7. 

### Why?
Context: https://metaboat.slack.com/archives/C057WD5L0JG/p1728393902269439?thread_ts=1728376094.332229&cid=C057WD5L0JG

tl;dr
We still don't have any plans to add the accordion to our design system. We're just relying on Mantine's functionality (and maybe some basic styling). All custom styles should be added _in situ_, and not globally.

### Demo
Comparison of the changes (on the left) with the custom theme override (on the right)
![image](https://github.com/user-attachments/assets/cd40d044-e126-486c-a925-67660912c839)

",nemanjaglumac,2024-10-14 19:14:18+00:00,['nemanjaglumac'],2024-10-28 16:52:50+00:00,2024-10-28 16:52:46+00:00,https://github.com/metabase/metabase/pull/48700,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2412035770, 'issue_id': 2586840751, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3fcdf9d5934b94055bff6032cae0949480c6b9b7...dda7b150bd35ed9adfb9ecd2cb4e26088649c81c.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/data-display/Accordion/Accordion.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/index.ts<br>frontend/src/metabase/ui/theme.ts |', 'created_at': datetime.datetime(2024, 10, 14, 19, 15, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2442123494, 'issue_id': 2586840751, 'author': 'nemanjaglumac', 'body': 'It will be superseded by the proper Accordion implementation which will render these hacky solutions unnecessary.\r\nSee: https://github.com/metabase/metabase/issues/49162', 'created_at': datetime.datetime(2024, 10, 28, 16, 52, 46, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 19:15:48 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3fcdf9d5934b94055bff6032cae0949480c6b9b7...dda7b150bd35ed9adfb9ecd2cb4e26088649c81c.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/data-display/Accordion/Accordion.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/index.ts<br>frontend/src/metabase/ui/theme.ts |

nemanjaglumac (Issue Creator) on (2024-10-28 16:52:46 UTC): It will be superseded by the proper Accordion implementation which will render these hacky solutions unnecessary.
See: https://github.com/metabase/metabase/issues/49162

"
2586825176,pull_request,closed,,🏎️ 🚀 Partition Postgres CI jobs; shave 10 minutes off of CI 🏎️ 🚀 ,"Part of #45009

Now that #48422 and #48489 are in, Postgres tests are the new slowest backend test jobs at approximately ~40 minutes each.

This is an alternative approach to #48697.

Split the Postgres jobs into two jobs each: 

1. Tests for the `:postgres` driver (~15 minutes)
2. Normal non-driver tests (Postgres as the app DB) (~30 minutes)",camsaul,2024-10-14 19:03:19+00:00,['camsaul'],2024-11-26 18:50:49+00:00,2024-11-22 10:19:32+00:00,https://github.com/metabase/metabase/pull/48699,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2486810461, 'issue_id': 2586825176, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n![Static Badge](https://img.shields.io/badge/57020_tests-e4a86087-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/0-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)\n\n\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48699?repo=metabase/metabase&commitHash=e4a86087ba1d33f6a1bef42d138a4d2c44941c78&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 19, 21, 41, 55, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2024-11-19 21:41:55 UTC): <!-- Trunk Test Analytics -->


![Static Badge](https://img.shields.io/badge/57020_tests-e4a86087-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/0-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)


<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48699?repo=metabase/metabase&commitHash=e4a86087ba1d33f6a1bef42d138a4d2c44941c78&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)

</sub>

"
2586759189,pull_request,closed,,Partition (parallelize) Postgres driver tests,"Part of #45009

Now that #48422 and #48489 are in, Postgres tests are the new slowest backend test jobs at approximately ~40 minutes each.

This PR splits the 2 Postgres jobs up into 4 which will hopefully make things a little bit faster overall.

After this PR the slower job is ~32 minutes, so this shaves ~8 minutes off of Postgres test runs",camsaul,2024-10-14 18:31:04+00:00,['camsaul'],2024-11-19 21:13:12+00:00,2024-11-19 21:13:09+00:00,https://github.com/metabase/metabase/pull/48697,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2412018762, 'issue_id': 2586759189, 'author': 'camsaul', 'body': 'Experimenting with #48699 as an alternative approach', 'created_at': datetime.datetime(2024, 10, 14, 19, 3, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2486764283, 'issue_id': 2586759189, 'author': 'camsaul', 'body': 'Closing in favor of #48699', 'created_at': datetime.datetime(2024, 11, 19, 21, 13, 9, tzinfo=datetime.timezone.utc)}]","camsaul (Issue Creator) on (2024-10-14 19:03:39 UTC): Experimenting with #48699 as an alternative approach

camsaul (Issue Creator) on (2024-11-19 21:13:09 UTC): Closing in favor of #48699

"
2586657649,pull_request,closed,,"🤖 backported ""fix: calculate row for object details correctly""",#48673,github-automation-metabase,2024-10-14 17:36:20+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-14 18:43:38+00:00,2024-10-14 18:43:37+00:00,https://github.com/metabase/metabase/pull/48696,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2411867176, 'issue_id': 2586657649, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b78a5005fd4c40fefdd207834928acc283234c9...08dfd7ea488d82afeb6926927b7c1cf8ffc3e18f.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 10, 14, 17, 37, 46, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 17:37:46 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b78a5005fd4c40fefdd207834928acc283234c9...08dfd7ea488d82afeb6926927b7c1cf8ffc3e18f.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

"
2586628400,pull_request,closed,,"🤖 backported ""session generation for sdk should be gated by enable-embedding-sdk, not static.""",#48637,github-automation-metabase,2024-10-14 17:21:43+00:00,"['escherize', 'github-automation-metabase']",2024-10-14 18:27:48+00:00,2024-10-14 18:27:47+00:00,https://github.com/metabase/metabase/pull/48695,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586604054,pull_request,closed,,"🤖 backported ""Collapse `metabase.shared.*` namespaces""",#48646,github-automation-metabase,2024-10-14 17:07:00+00:00,"['camsaul', 'github-automation-metabase']",2024-10-14 18:25:20+00:00,2024-10-14 18:25:19+00:00,https://github.com/metabase/metabase/pull/48694,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2411810548, 'issue_id': 2586604054, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b78a5005fd4c40fefdd207834928acc283234c9...1663eeb57e1c00628f48b649290645934833779c.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/shared/utils/sizes.ts |', 'created_at': datetime.datetime(2024, 10, 14, 17, 8, 33, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 17:08:33 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b78a5005fd4c40fefdd207834928acc283234c9...1663eeb57e1c00628f48b649290645934833779c.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/shared/utils/sizes.ts |

"
2586514419,pull_request,closed,,Convert createAction to redux-toolkit,"Changes the import of `createAction` from `redux-actions` to `@reduxjs/toolkit`. This will help us convert actions and reducers to better-formed typescript in the future, since the `createAction` in `redux-actions` is problematic when trying to use actions with `createReducer`.


**Edit** I thought this somehow would be an easy typescript conversion but somehow I missed the whole javascript thing, which is why the tests aren't passing. Will look into this",oisincoveney,2024-10-14 16:25:04+00:00,['oisincoveney'],2024-12-06 15:06:36+00:00,2024-12-06 15:06:36+00:00,https://github.com/metabase/metabase/pull/48689,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2412051850, 'issue_id': 2586514419, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 14, 19, 27, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2412053788, 'issue_id': 2586514419, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d477b55947d6235e516a72c093f3b22ce5876079...74a7ad9599822bd186604a2bcda9dd058286f663.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 14, 19, 28, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2466466317, 'issue_id': 2586514419, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n**10477 tests** were run on `c84ee201`. ⚠️ **1 Flaked**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48689?repo=metabase/metabase&commitHash=c84ee20141463767357f54c2d4902e10b75221c5&utm_source=gh-comment)\n\n\n<details>\n<summary>⚠️ 1 Flakes</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>issue 16559 should always show the most recent revision (metabase\\$116559)</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48689?repo=metabase/metabase&commitHash=c84ee20141463767357f54c2d4902e10b75221c5&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=edb9554d-1045-57dc-9890-ae687b8edf39) |\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 9, 21, 33, 8, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 19:27:02 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-14 19:28:06 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d477b55947d6235e516a72c093f3b22ce5876079...74a7ad9599822bd186604a2bcda9dd058286f663.

No notifications.

trunk-io[bot] on (2024-11-09 21:33:08 UTC): <!-- Trunk Test Analytics -->


**10477 tests** were run on `c84ee201`. ⚠️ **1 Flaked**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48689?repo=metabase/metabase&commitHash=c84ee20141463767357f54c2d4902e10b75221c5&utm_source=gh-comment)


<details>
<summary>⚠️ 1 Flakes</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>issue 16559 should always show the most recent revision (metabase\$116559)</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48689?repo=metabase/metabase&commitHash=c84ee20141463767357f54c2d4902e10b75221c5&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=edb9554d-1045-57dc-9890-ae687b8edf39) |
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)

</sub>

"
2586350931,pull_request,closed,,"🤖 backported ""Fix flaky dashcards test""",#48676,metabase-bot[bot],2024-10-14 15:13:40+00:00,['kamilmielnik'],2024-10-14 15:45:58+00:00,2024-10-14 15:45:58+00:00,https://github.com/metabase/metabase/pull/48688,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586350386,pull_request,closed,,"🤖 backported ""Fix flaky dashcards test""",#48676,github-automation-metabase,2024-10-14 15:13:26+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-10-14 16:19:39+00:00,2024-10-14 16:19:39+00:00,https://github.com/metabase/metabase/pull/48687,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586299786,pull_request,closed,,"🤖 backported ""Create metric button and docs link in empty state""","  #48468
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-14 14:54:12+00:00,"['romeovs', 'github-automation-metabase']",2024-10-16 11:39:20+00:00,2024-10-16 11:39:19+00:00,https://github.com/metabase/metabase/pull/48685,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586298647,pull_request,closed,,"🤖 backported ""Do not save metric viz settings to metric""","  #48609
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-14 14:53:48+00:00,"['romeovs', 'github-automation-metabase']",2024-10-15 12:48:55+00:00,2024-10-15 12:48:53+00:00,https://github.com/metabase/metabase/pull/48684,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586297993,pull_request,closed,,"🤖 backported "" Repro: App crashes when editing custom expression referencing metric when dependent metadata is not loaded""",#48560,github-automation-metabase,2024-10-14 14:53:34+00:00,"['romeovs', 'github-automation-metabase']",2024-10-14 15:58:53+00:00,2024-10-14 15:58:52+00:00,https://github.com/metabase/metabase/pull/48683,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586293202,pull_request,closed,,"🤖 backported ""Metrics empty copy""",#48449,github-automation-metabase,2024-10-14 14:52:13+00:00,"['romeovs', 'github-automation-metabase']",2024-10-15 10:17:53+00:00,2024-10-15 10:17:52+00:00,https://github.com/metabase/metabase/pull/48682,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586241952,pull_request,closed,,Convert `dashcards` dashboard reducer to TS,,oisincoveney,2024-10-14 14:37:54+00:00,['oisincoveney'],2024-12-06 15:06:36+00:00,2024-12-06 15:06:36+00:00,https://github.com/metabase/metabase/pull/48680,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2466463115, 'issue_id': 2586241952, 'author': 'trunk-io[bot]', 'body': ""<!-- Trunk Test Analytics -->\n\n\n**25 tests** were run on `0b3ded76`. ❌ **4 Failed**, ⚠️ **2 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment)\n\n\n<details>\n<summary>❌ 4 Failed</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>Write Actions on Dashboards (postgres) editing action before executing it allows to edit action query and parameters in action execute modal</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=18f13f2a-e19b-5e5c-b9e9-cf9cb9037341) |\n| <code>Write Actions on Dashboards (postgres) editing action before executing it allows to edit action title and field placeholder in action execute modal</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=9bdba561-7710-5d54-adba-0793d5dd147e) |\n| <code>Write Actions on Dashboards (mysql) editing action before executing it allows to edit action query and parameters in action execute modal</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=e635bd0b-6340-5083-930a-6fde8c95fa31) |\n| <code>Write Actions on Dashboards (mysql) editing action before executing it allows to edit action title and field placeholder in action execute modal</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=839f3304-0880-52de-8c63-50001783d772) |\n</details>\n<details>\n<summary>⚠️ 2 Flakes</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>Write Actions on Dashboards (postgres) adding and executing actions hidden fields adds a query action and runs it</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=28cfd752-2b88-5320-958e-bc4660b788a4) |\n| <code>scenarios > custom column > boolean functions dashboards should be able setup an 'open dashboard' click behavior for the same dashboard</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=e4edb292-bda8-5f4c-8fcc-09c891c6a609) |\n</details>\n<details>\n<summary>⏭️ 19 Skipped</summary>\n\n- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>\n- <code>ThemeProvider applies the metabase theme overrides</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>\n\n[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=SKIPPED)\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)\n\n</sub>"", 'created_at': datetime.datetime(2024, 11, 9, 21, 19, 51, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2024-11-09 21:19:51 UTC): <!-- Trunk Test Analytics -->


**25 tests** were run on `0b3ded76`. ❌ **4 Failed**, ⚠️ **2 Flaked**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment)


<details>
<summary>❌ 4 Failed</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>Write Actions on Dashboards (postgres) editing action before executing it allows to edit action query and parameters in action execute modal</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=18f13f2a-e19b-5e5c-b9e9-cf9cb9037341) |
| <code>Write Actions on Dashboards (postgres) editing action before executing it allows to edit action title and field placeholder in action execute modal</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=9bdba561-7710-5d54-adba-0793d5dd147e) |
| <code>Write Actions on Dashboards (mysql) editing action before executing it allows to edit action query and parameters in action execute modal</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=e635bd0b-6340-5083-930a-6fde8c95fa31) |
| <code>Write Actions on Dashboards (mysql) editing action before executing it allows to edit action title and field placeholder in action execute modal</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=839f3304-0880-52de-8c63-50001783d772) |
</details>
<details>
<summary>⚠️ 2 Flakes</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>Write Actions on Dashboards (postgres) adding and executing actions hidden fields adds a query action and runs it</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=28cfd752-2b88-5320-958e-bc4660b788a4) |
| <code>scenarios > custom column > boolean functions dashboards should be able setup an 'open dashboard' click behavior for the same dashboard</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=e4edb292-bda8-5f4c-8fcc-09c891c6a609) |
</details>
<details>
<summary>⏭️ 19 Skipped</summary>

- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>
- <code>ThemeProvider applies the metabase theme overrides</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>

[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48680?repo=metabase/metabase&commitHash=0b3ded765b185c1ab4607a19a88ec2b50f48b97d&utm_source=gh-comment&runConclusion=SKIPPED)
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)

</sub>

"
2586223464,pull_request,closed,,Convert `dashcardData` dashboard reducers to TS,"I've converted the `dashcardData` dashboard reducer to typescript. This one was relatively straight forward, just converting the reducer map to a builder pattern. 

The only real change I had to do was add a `model_id` to `Revision` which I think is accurate anyway.",oisincoveney,2024-10-14 14:30:58+00:00,['oisincoveney'],2024-10-16 14:52:51+00:00,2024-10-16 14:07:55+00:00,https://github.com/metabase/metabase/pull/48679,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2586199572,pull_request,closed,,Add v0.51.0.3-beta to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-10-14 14:21:15+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-15 20:07:21+00:00,2024-10-15 20:07:21+00:00,https://github.com/metabase/metabase/pull/48678,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2586195899,pull_request,closed,,chore: more another flaky test to jail,Move flaky test to jail,uladzimirdev,2024-10-14 14:19:40+00:00,['uladzimirdev'],2024-10-15 12:19:15+00:00,2024-10-15 11:35:33+00:00,https://github.com/metabase/metabase/pull/48677,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2586135947,pull_request,closed,,Fix flaky dashcards test,"### Description

Fixes failures such as: https://github.com/metabase/metabase/actions/runs/11327024490/job/31499519042

Follow up on #48556.
Reverts #48556 - the diagnosis was correct, but the fix should have been made higher up the call stack.

### How to verify

CI is green.
Stress test: https://github.com/metabase/metabase/actions/runs/11329315624",kamilmielnik,2024-10-14 13:56:32+00:00,['kamilmielnik'],2024-10-14 16:20:06+00:00,2024-10-14 15:12:38+00:00,https://github.com/metabase/metabase/pull/48676,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2411558635, 'issue_id': 2586135947, 'author': 'kamilmielnik', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 14, 15, 12, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2411711614, 'issue_id': 2586135947, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 14, 16, 20, 5, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-14 15:12:46 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-14 16:20:05 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2586090021,pull_request,closed,,"🤖 backported ""deps: upgrade cookie package""",#48661,github-automation-metabase,2024-10-14 13:41:45+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-16 08:16:25+00:00,2024-10-16 08:16:24+00:00,https://github.com/metabase/metabase/pull/48675,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2586018605,pull_request,closed,,fix: calculate row for object details correctly,"fixes https://github.com/metabase/metabase/issues/48323

### Description

the bug appeared in https://github.com/metabase/metabase/pull/48109 as a result of migration away from the old React api - findDomNode

### How to verify

Describe the steps to verify that the changes are working as expected.

1. open orders table -> scroll down by several screens 
2. click on expand icon that appears when you place mouse over a row
3. correct data should be displayed in the modal - the same as displayed in the row you selected

### Demo


### Before

https://github.com/user-attachments/assets/726fa16e-7f18-4c39-8f0b-b9be03a3bac3



### After

https://github.com/user-attachments/assets/3f1a9bea-9146-4fd1-99c5-d26e862ace6a





### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-10-14 13:14:29+00:00,['uladzimirdev'],2024-10-14 17:35:33+00:00,2024-10-14 17:35:32+00:00,https://github.com/metabase/metabase/pull/48673,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2411239704, 'issue_id': 2586018605, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 187e9508a9120d6609932f9f60ca51cf2d6104e0...965b376e85bb5ccb1c642fa299860bb9ca556876.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 10, 14, 13, 15, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2411446377, 'issue_id': 2586018605, 'author': 'uladzimirdev', 'body': ""@kamilmielnik it's a pretty fresh issue and it appeared only 3 weeks ago, an old issue has been fixed\r\n\r\nhttps://github.com/metabase/metabase/issues/39477\r\nhttps://github.com/metabase/metabase/issues/34070\r\n\r\nhttps://github.com/metabase/metabase/pull/40874"", 'created_at': datetime.datetime(2024, 10, 14, 14, 34, 33, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 13:15:56 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 187e9508a9120d6609932f9f60ca51cf2d6104e0...965b376e85bb5ccb1c642fa299860bb9ca556876.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

uladzimirdev (Issue Creator) on (2024-10-14 14:34:33 UTC): @kamilmielnik it's a pretty fresh issue and it appeared only 3 weeks ago, an old issue has been fixed

https://github.com/metabase/metabase/issues/39477
https://github.com/metabase/metabase/issues/34070

https://github.com/metabase/metabase/pull/40874

"
2585965882,pull_request,closed,,Refactor remaining e2e API commands to TS helper functions,"### Description

Refactors remaining `support/commands/api` commands to TS and deprecates the relevant commands.

### How to verify

CI is green.
",kamilmielnik,2024-10-14 12:55:51+00:00,['kamilmielnik'],2024-10-15 14:36:54+00:00,2024-10-15 10:22:48+00:00,https://github.com/metabase/metabase/pull/48672,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2413499773, 'issue_id': 2585965882, 'author': 'kamilmielnik', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 15, 10, 25, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2413501937, 'issue_id': 2585965882, 'author': 'github-actions[bot]', 'body': '@kamilmielnik something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11344149638)', 'created_at': datetime.datetime(2024, 10, 15, 10, 26, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414118450, 'issue_id': 2585965882, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 15, 14, 36, 53, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-15 10:25:13 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-15 10:26:15 UTC): @kamilmielnik something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11344149638)

github-actions[bot] on (2024-10-15 14:36:53 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2585964416,pull_request,closed,,docs - embedding sdk quickstart,Temporary branch.,jeff-bruemmer,2024-10-14 12:55:11+00:00,['jeff-bruemmer'],2024-10-14 13:00:55+00:00,2024-10-14 13:00:54+00:00,https://github.com/metabase/metabase/pull/48671,"[('Type:Documentation', '')]",[],
2585956092,pull_request,closed,,Optimize pie charts rendering with many rows,"Fixes #48458 

Optimizes pie chart rendering performance, cutting rendering time from ~3s to ~200ms for 32K rows. There're two changes:

1. [Optimized ring color selection code](https://github.com/metabase/metabase/commit/fc72d0417cd277592586baa5fdc4ed069ae5555f). We're calling `getColorForRing` for each row, and [it's making a hex color to accent color index map internally](https://github.com/metabase/metabase/blob/187e9508a9120d6609932f9f60ca51cf2d6104e0/frontend/src/metabase/visualizations/echarts/pie/util/colors.ts#L51). Building that map appeared to be expensive, so we're now building it once and then re-using for getting color indices. That reduced total chart rendering time from ~3s to ~770ms
2. [Memoized `pie.rows` viz setting calculation] (https://github.com/metabase/metabase/commit/5b73efa52fbeaf12f96e4e999ab6004431444943). It used to be recalculated ~3 times with the same `rawSeries` and `settings`. That reduced total chart rendering time from ~770ms (after the color code optimization) to ~200ms.

### Benchmarks

<details>
<summary>Before</summary>

![before](https://github.com/user-attachments/assets/3f2c8eb2-2672-45f4-82bb-c362f4f6e896)

</details>

<details>
<summary>After</summary>

![after](https://github.com/user-attachments/assets/02e3df2c-763c-47c2-b8e1-6748b6f42aed)

</details>
",kulyk,2024-10-14 12:51:25+00:00,['kulyk'],2024-10-18 15:26:47+00:00,2024-10-18 15:26:45+00:00,https://github.com/metabase/metabase/pull/48670,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2411151376, 'issue_id': 2585956092, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c42d411cab9fde9d20fa0c7b6714a0b5aa98b5fc...9505448e2662fdde31eb334bfb3de1f80743a05a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts |', 'created_at': datetime.datetime(2024, 10, 14, 12, 52, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-14 12:52:54 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c42d411cab9fde9d20fa0c7b6714a0b5aa98b5fc...9505448e2662fdde31eb334bfb3de1f80743a05a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/util/colors.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/chart-definition-legacy.js<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieRowsPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts |

"
2585877735,pull_request,closed,,"Remove ""Replace or save question"" UI when saving and edited question from a metric","Solves part of https://github.com/metabase/metabase/issues/48555

### Description

When editing the question that is created from navigating to a metric and saving that question, we show the ""Replace or save question?"" UI, which is confusing.

This PR removes that UI.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Create a metric (ie. New -> Metric -> Orders -> Count)
2. Navigate to the new metric
3. Add a filter or summarize
4. Click ""Save""
5. The modal should not show the ""Replace or save question?""

### Demo

<img width=""697"" alt=""Screenshot 2024-10-14 at 14 19 38"" src=""https://github.com/user-attachments/assets/96ee060b-bac3-4585-afa5-651d9fba9914"">",romeovs,2024-10-14 12:19:53+00:00,['romeovs'],2024-10-16 11:43:32+00:00,2024-10-15 13:45:48+00:00,https://github.com/metabase/metabase/pull/48669,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2411237583, 'issue_id': 2585877735, 'author': 'romeovs', 'body': ""> but the issue mentions https://github.com/metabase/metabase/issues/48555#issuecomment-2406718154 and the expected result has not been achieved. Let's confirm this with product team.\r\n\r\nI agree, and have updated the issue description accordingly."", 'created_at': datetime.datetime(2024, 10, 14, 13, 14, 58, tzinfo=datetime.timezone.utc)}]","romeovs (Issue Creator) on (2024-10-14 13:14:58 UTC): I agree, and have updated the issue description accordingly.

"
2585818099,pull_request,closed,,"🤖 backported ""version and channel query params for version info""",#48616,github-automation-metabase,2024-10-14 11:57:36+00:00,"['johnswanson', 'github-automation-metabase']",2024-10-14 13:03:51+00:00,2024-10-14 13:03:50+00:00,https://github.com/metabase/metabase/pull/48668,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2585719203,pull_request,closed,,"🤖 backported ""Update markdown link that has been moved""",#48663,metabase-bot[bot],2024-10-14 11:21:52+00:00,['kamilmielnik'],2024-10-14 11:23:27+00:00,2024-10-14 11:23:26+00:00,https://github.com/metabase/metabase/pull/48667,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2585712929,pull_request,closed,,"🤖 backported ""Update markdown link that has been moved""",#48663,github-automation-metabase,2024-10-14 11:18:55+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-10-14 11:20:31+00:00,2024-10-14 11:20:31+00:00,https://github.com/metabase/metabase/pull/48666,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2585679941,pull_request,closed,,fix flaky test on embed share behaviour snowplow events,"Attempt to close #48634

Stress test: https://github.com/metabase/metabase/actions/runs/11328876682/job/31503083670",npretto,2024-10-14 11:05:50+00:00,['npretto'],2024-10-15 08:14:01+00:00,2024-10-15 08:14:00+00:00,https://github.com/metabase/metabase/pull/48665,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2585436367,pull_request,closed,,Update markdown link that has been moved,"Example CI failure: https://github.com/metabase/metabase/actions/runs/11322728691/job/31483985575?pr=48610#logs

https://github.com/search?q=metabase+driver now redirects to https://github.com/search?q=metabase+driver&type=repositories

### How to verify

`markdown-link-check` jobs is green in CI",kamilmielnik,2024-10-14 09:41:26+00:00,['kamilmielnik'],2024-10-14 11:23:56+00:00,2024-10-14 11:18:06+00:00,https://github.com/metabase/metabase/pull/48663,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2410914847, 'issue_id': 2585436367, 'author': 'kamilmielnik', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 14, 11, 21, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2410920945, 'issue_id': 2585436367, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 14, 11, 23, 54, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-14 11:21:04 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-14 11:23:54 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2585276789,pull_request,closed,,deps: upgrade cookie package,"closes https://github.com/metabase/metabase/security/dependabot/167

it's a dependency of storybook so we don't have another way to upgrade it except resolutions",uladzimirdev,2024-10-14 08:44:15+00:00,['uladzimirdev'],2024-10-16 08:16:53+00:00,2024-10-14 13:40:56+00:00,https://github.com/metabase/metabase/pull/48661,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2585184741,pull_request,closed,,"🤖 backported ""[ParseSQL] log less warnings/errors""",#48614,github-automation-metabase,2024-10-14 08:15:54+00:00,"['piranha', 'github-automation-metabase']",2024-10-14 09:21:53+00:00,2024-10-14 09:21:52+00:00,https://github.com/metabase/metabase/pull/48660,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2584700247,pull_request,closed,,[Notification] Minor changes to the channel template type name,"rename the type for `channel_template.details.type`
- email/resource -> email/mustache-resource
- email/mustache -> email/mustache-text

the motivation is that we might use more than just mustache as the template in the future

also added an alias to run notification tests

```
clj -X:dev:ee:ee-dev:test:test/notification
```",qnkhuat,2024-10-14 04:30:43+00:00,['qnkhuat'],2024-10-14 10:01:48+00:00,2024-10-14 10:01:47+00:00,https://github.com/metabase/metabase/pull/48658,"[('.Team/Workflows', 'aka BEC')]",[],
2584641142,pull_request,closed,,Prometheus tracking for http channel,Resolve https://github.com/metabase/metabase/issues/48624,qnkhuat,2024-10-14 03:35:20+00:00,['qnkhuat'],2024-11-18 13:13:39+00:00,2024-11-18 13:13:39+00:00,https://github.com/metabase/metabase/pull/48657,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2410248073, 'issue_id': 2584641142, 'author': 'qnkhuat', 'body': 'discussing how to make this more generic in https://metaboat.slack.com/archives/C010ZSXQY87/p1728889944089869', 'created_at': datetime.datetime(2024, 10, 14, 7, 22, 10, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-10-14 07:22:10 UTC): discussing how to make this more generic in https://metaboat.slack.com/archives/C010ZSXQY87/p1728889944089869

"
2582672891,pull_request,closed,,"add a logic check to paging parameter parsing, to ensure duplicate params don't cause a 500","Closes https://github.com/metabase/metabase/issues/45345

### Description

This is straightforward, no-frills, direct fix to the reported user issue.

I'm (non-rhetorically) not sure if a more general solution (per [this comment](https://github.com/metabase/metabase/issues/45345#issuecomment-2221412523)) is still needed, as the query params on this page appear to not even be used anymore.  (Rather, the entire query state is now base64 encoded and appended to the URL as an HTML anchor)

### How to verify

1.  Manually edit a given question URL to contain duplicate parameters, e.g. http://localhost:3000/question/27-orders-with-people-10-rows?limit=4&limit=4
2.  Page successfully loads.  (`?limit=4&limit=4` ends up being stripped off the URL)

### Demo
![2024-10-12 00 59 44](https://github.com/user-attachments/assets/a802f63b-b84b-4aaa-afaf-6668c44df613)

### Checklist

- [ x ] Tests have been added/updated to cover changes in this PR
",aaronfi,2024-10-12 08:03:21+00:00,[],2024-10-17 02:50:02+00:00,2024-10-17 02:50:02+00:00,https://github.com/metabase/metabase/pull/48650,[],[],
2582431868,pull_request,closed,,"🤖 backported ""Add e2e tests for native query drills""",#48503,github-automation-metabase,2024-10-12 02:47:14+00:00,"['ranquild', 'github-automation-metabase']",2024-10-12 11:53:18+00:00,2024-10-12 11:53:17+00:00,https://github.com/metabase/metabase/pull/48649,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2582376636,pull_request,closed,,fix: Always cast json number types as decimal,"Fixes #48507
",snoe,2024-10-12 00:43:44+00:00,['snoe'],2024-10-17 15:34:08+00:00,2024-10-17 15:34:06+00:00,https://github.com/metabase/metabase/pull/48648,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]",[],
2582274131,pull_request,closed,,Collapse `metabase.shared.*` namespaces,"Part of the https://github.com/metabase/metabase/issues/42434 project

When we added our first Cljs code it all lived in `shared/src` and `shared/test` and was named `metabase.shared.*`... a while back we decide there was no reason for these files to live in their own directory tree so I merged them into `src` and `test` in #35834. We discussed renaming everything at the time but it was considered low priority. This PR does away with the last vestiges of that distinction by moving the shared stuff into appropriate modules (mostly `metabase.util`).

I also combined `metabase.util.i18n` and `metabase.util.shared.i18n` so there is now just one i18n util namespace again",camsaul,2024-10-11 22:27:16+00:00,['camsaul'],2024-10-14 18:25:48+00:00,2024-10-14 17:06:11+00:00,https://github.com/metabase/metabase/pull/48646,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2408196820, 'issue_id': 2582274131, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b1c644f9a4cd05e2026a776c76102684d756df23...6f83ef113830e0965d2f77f32b9bb3f84c0e89ed.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/shared/utils/sizes.ts |', 'created_at': datetime.datetime(2024, 10, 11, 22, 28, 43, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-11 22:28:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b1c644f9a4cd05e2026a776c76102684d756df23...6f83ef113830e0965d2f77f32b9bb3f84c0e89ed.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/settings/column.js<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/shared/utils/sizes.ts |

"
2582241083,pull_request,closed,,fix(sdk): reduce visual artifacts on PDF/PNG exports on custom sdk themes,"Partially fixes https://github.com/metabase/metabase/issues/48716

### Description

We support custom themes in the embedding sdk. Currently, PDF exports via ""Export to PDF"" on dashboards look broken on the sdk when a custom theme is applied. This PR partially fixes some of the visual artifacts present in the PDF exports, but not all of them.

### Fixes

- Background color of the export is incorrect. It does not follow the theme.
- Text are being cut off vertically.

### How to verify

- Run the Shoppy demo app locally
- Go to a dashboard, such as [/admin/analytics/17](https://embedded-analytics-sdk-demo.metabase.com/admin/analytics/17). Note that PDF exports are currently disabled, so you have to change `withDownloads={false}` to true in Shoppy in `DashboardPage.tsx`.
- Use the ""Export as PDF"" button on the top right, and the PNG exports in the dashcards.

Check that we are not breaking the main Metabase app (courtesy of Nicolo):

- Public and static embeds has three themes.
- Dashboards has the dark theme switch when in fullscreen
- There are dashboard downloads as PDF, cards on dashboard downloads as PNG, and standalone question downloads as PNG.

### Demo

Before - current state of PDF/PNG exports in Shoppy

![CleanShot 2567-10-16 at 02 17 03@2x](https://github.com/user-attachments/assets/5724e12f-304a-4a98-8cb7-c82055b539ca)

After apply the fix. Note that there are [more visual artifacts remaining](https://github.com/metabase/metabase/issues/48716) to be fixed later.

![CleanShot 2567-10-16 at 02 14 24@2x](https://github.com/user-attachments/assets/8e79b493-9032-4c3e-a380-60b6c7f7835f)

Static embedding still looks correct in the preview

![CleanShot 2567-10-16 at 18 05 17@2x](https://github.com/user-attachments/assets/5bfa7522-3003-4a13-add5-ae9c017a7c07)

![CleanShot 2567-10-16 at 18 05 12@2x](https://github.com/user-attachments/assets/f9d8d707-9103-49da-8bb9-64e6ced0f8ad)",heypoom,2024-10-11 21:50:47+00:00,['heypoom'],2024-10-17 23:46:23+00:00,2024-10-17 23:46:22+00:00,https://github.com/metabase/metabase/pull/48645,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2582221588,pull_request,closed,,"🤖 backported ""docs - collection cleaning""",#48241,github-automation-metabase,2024-10-11 21:37:55+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-11 21:39:38+00:00,2024-10-11 21:39:37+00:00,https://github.com/metabase/metabase/pull/48644,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2582171564,pull_request,closed,,"🤖 backported ""Use saved card metadata to filter fields in query metadata for sandboxed tables""",#48577,github-automation-metabase,2024-10-11 20:54:17+00:00,"['noahmoss', 'github-automation-metabase']",2024-10-14 14:15:50+00:00,2024-10-14 14:15:49+00:00,https://github.com/metabase/metabase/pull/48643,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2582121945,pull_request,open,,proof of concept of nextjs + mdx design system docs,"Takes a stab at using nextjs and mdx for core component documentation instead of using storybook.

[Here's a loom](https://www.loom.com/share/52eb7d2c2fc84c9c9a0ae384a6cc34df?sid=4dc9d292-35ec-4afe-9f09-309bf50ff3b9)

# Why this, why now
I've found storybook to be a big pain when it comes to documenting our core design system components. The chromatic published version and dev version are realllly slow, the auto generated code snippets don't provide accurate samples as of right now, and it doesn't make it particularly easy to write or view documentation because the docs plugin is currently defaulted to being behind a click.

All of this leads to the feeling that the system isn't well curated and well maintained as a source of truth. While we could invest in improving our storybook implementation, I also get the sense it's the wrong tool for this type of job, as it's focused more on component playgrounds than component documentation. As we start to really invest more in this system, I want us to have docs that actually document, and that feel snappy, well maintained, and well built and that create a sense of pride in the work we're doing here.

# Goals
- Design can easily update the documentation and curate the experience for developers, including writing about aspects of the system not neatly captured by a single component.
- Devs should have a fast reliable source of truth for working with our core system components.
- Storybook could continue to have a possible role as a space for component playgrounds as needed, but should not be expected to be a source of truth for the design system itself. 

# Approach
I've chosen a static site using nextjs alongside mdx.
- Mdx because markdown simplifies the ability for anyone, but especially designers, to feel empowered to keep the docs up to date.
- Nextjs because it's a mature framework that plays nicely with react and the rest of our stack. The fact that it creates a static build means we have lots of hosting options for the content and it'll be fast.

We've used Nextjs for the store and I've found it to have sane defaults and really solid devx so it also means the team is familiar.

# Future
Now that I have the bare bones working, here are some potential next steps.
- Validate the approach with team-admin-webapp and the other designers
- Continue moving docs over from storybook to here
",kdoh,2024-10-11 20:16:45+00:00,['kdoh'],2025-01-13 16:57:15+00:00,,https://github.com/metabase/metabase/pull/48641,[],[],
2582113808,pull_request,closed,,Modularize metabase.pulse; add metabase.pulse.core API namespace,"Part of the #42434 project

Fixes #48647

- Add new `metabase.pulse.core` namespace to the the API namespace for the `metabase.pulse` module; all outside access has to use stuff from this namespace and no other namespaces
- Move `metabase.pulse.markdown` to `metabase.util.markdown` since it's used outside of Pulses and isn't Pulse-specific
- Move `metabase.pulse` to `metabase.pulse.send` to make it clear that it's part of the pulse module and not the pulse module API namespace
- Change the alias for `metabase.models.pulse` from `pulse` to `models.pulse` to fix conflicts with the alias for the Pulse API namespace, which was also `pulse`
- Move email result attachment stuff into its own namespace to prevent circular references
- Some work towards decoupling the `metabase.models` module's dependence on the `metabase.emails` module",camsaul,2024-10-11 20:09:47+00:00,['camsaul'],2024-10-19 00:10:54+00:00,2024-10-19 00:10:52+00:00,https://github.com/metabase/metabase/pull/48640,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2408254501, 'issue_id': 2582113808, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff eefd754357b6386496898ed191ca564295b07ca3...9f6522faf9013d6bf6f27eb8f6c1f61ee679d96e.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | src/metabase/email/messages.clj<br>src/metabase/email/result_attachment.clj |', 'created_at': datetime.datetime(2024, 10, 12, 0, 7, 56, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-12 00:07:56 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff eefd754357b6386496898ed191ca564295b07ca3...9f6522faf9013d6bf6f27eb8f6c1f61ee679d96e.

| Notify | File(s) |
|-|-|
| @kdoh | src/metabase/email/messages.clj<br>src/metabase/email/result_attachment.clj |

"
2582086716,pull_request,closed,,Do not create personal collections for API keys,"Functions like `user->personal-collection-id` automatically create a personal collection. These were called during permissions checks and some hydration functions for the User API. I modified these to skip creating personal collections for API key users.

One complicating factor here is that `:type` is not typically one of the columns returned when you do `(t2/select :model/User)`. This means that even when we have a `user` available, we usually can't cheaply check to see whether it's an API key user (this might be something we should change, but I think it would be more involved and still wouldn't guarantee that the `type` is present when we need it).

It would also be potentially expensive to maintain a guarantee that we never insert a personal collection for an API key user, because we'd need to do that in the `before-insert` hook for collections, grabbing the relevant `:model/User`. Of course, we only need to do this for collections with a `personal_owner_id`, and maybe in production not many collections are going to be created at once, but...

The second point here is that if we do end up creating a personal collection for an API key user, it's not a huge problem - we definitely shouldn't do it, but I think in production it's probably better to create it rather than throwing an exception.

As a compromise, I added a check that asserts that the user isn't an API key user, but only in dev/test environments, not prod. This way, if we added a codepath that created one, we'd hopefully catch it there.
",johnswanson,2024-10-11 19:50:56+00:00,['johnswanson'],2024-10-23 17:25:24+00:00,2024-10-23 16:36:56+00:00,https://github.com/metabase/metabase/pull/48638,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2582015696,pull_request,closed,,"session generation for sdk should be gated by enable-embedding-sdk, not static.","This was a miss stemming from the logic that ""static embedding is handled via JWT."" However we actually return a jwt with session info when setting up the sdk. so this specific instance needs to make sure that the enable-embedding-sdk, is setup not enable-embedding-static.",escherize,2024-10-11 19:03:48+00:00,['escherize'],2024-10-14 18:28:15+00:00,2024-10-14 17:20:56+00:00,https://github.com/metabase/metabase/pull/48637,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2581868573,pull_request,closed,,Implement inactive field removal,"Closes #12721

### Description

#### The intention

This PR implements the simplest thing we can do: let queries that don't depend on removed columns (other than showing  them) run and show the available data. Queries that use removed fields otherwise, e.g., for filtering or summary will continue to fail.

We only try to fix queries if we know a column has been removed. We recognize this during the next sync: deleted columns are marked `active = false`.

I want to make sure the blast radius is minimal:
- queries that don't refer to removed columns should not be modified,
- the columns returned should be the same minus the deleted columns.

#### The implementation

A new preprocessing middleware is added to the chain after the point where the implicit `:fields` clauses added to the query. We determine which direct database field references are referencing active fields and remove the others. Then we recursively remove references to the removed columns.

Originally, I wanted to reuse the `remove-clause` logic implemented for MLv2, but the query at this stage of preprocessing doesn't allow that without lots of changes in that code, so I ended up implementing another version of reference chase. This still requires special conversion code, which could be removed but require reimplementing the new middleware function to work on legacy queries.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Create a new question based on a (few) table(s) and deselect some of the fields. Add filters and other stuff as you like.
2. Optionally, create questions based on the saved question created in step 1 or 2. Add filters and other stuff as you like.
3. Drop a few columns referenced in field selections but not anywhere else.
4. Run the queries. They should fail (unless a scheduled sync has run after the columns were dropped).
5. Sync the DW.
6. Run the queries again. Now they should work.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",metamben,2024-10-11 17:32:06+00:00,['metamben'],2024-10-14 22:21:35+00:00,2024-10-14 22:21:34+00:00,https://github.com/metabase/metabase/pull/48636,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2581775919,pull_request,closed,,Add release channel option to publish job,"closes https://github.com/metabase/metabase/issues/48627

## Description

This does a few things to simplify the release workflow

1. Removes now-irrelevant options to skip certain release steps. We only wanted to skip these steps in order to release more ""slowly"". Now that we have release channels, and a separate job to set them on demand, as well as patches that we can release quietly, we don't need to be able to skip release steps (some of which had implicit dependencies that made certain combinations of step skips impossible).
2. Combines the job-complete-message step for patches and regular releases. The only difference is whether they send a message to the #general slack channel
3. Doing the above greatly simplifies the ability to adds an input parameter to be able to (optionally) trigger the set-release-channel job at the end of a release.

![Screen Shot 2024-10-23 at 4 43 15 PM](https://github.com/user-attachments/assets/80748ddb-893a-43f2-bbc5-8d6acdca5d0b)

- ✅ [Test 1 - set nightly release channel](https://github.com/iethree/metabase/actions/runs/11497177638) (failing steps were irrelevant ones that don't work in my fork)
- ✅ [Test 2 - don't set release channel](https://github.com/iethree/metabase/actions/runs/11497358693)
",iethree,2024-10-11 16:36:29+00:00,['iethree'],2024-11-04 19:42:14+00:00,2024-11-04 19:42:11+00:00,https://github.com/metabase/metabase/pull/48633,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2581760193,pull_request,closed,,"🤖 backported ""Convert `loadingDashboards` redux actions to TS""",#48456,github-automation-metabase,2024-10-11 16:27:20+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-11 17:08:42+00:00,2024-10-11 17:08:41+00:00,https://github.com/metabase/metabase/pull/48631,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581751928,pull_request,closed,,Do not open sidesheets on SDK,"Closes https://github.com/metabase/metabase/issues/48354

### Description

Sidesheets shouldn't be open on the SDK since it opens the dashboard detail from the side which breaks the component aspect of the SDK.

We discussed that only Modal is appropriate for the SDK.

### How to verify

Run the new test in this PR. And to do that:
1. Run `yarn storybook-embedding-sdk` and
1. Run `yarn test-cypress-open-sdk`

### Demo
![Screenshot 2024-10-11 at 11 18 01 PM](https://github.com/user-attachments/assets/59019dc9-7043-4ef6-9c17-45eb32ba1796)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-10-11 16:21:48+00:00,['WiNloSt'],2024-10-16 07:22:16+00:00,2024-10-16 07:22:14+00:00,https://github.com/metabase/metabase/pull/48630,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2581682494,pull_request,closed,,Only tag nightly on the current version,"
Updates automatic release workflow to only tag the current metabase version with the `nightly` tag
",iethree,2024-10-11 15:44:36+00:00,['iethree'],2024-10-24 12:12:40+00:00,2024-10-24 12:12:39+00:00,https://github.com/metabase/metabase/pull/48629,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2435118337, 'issue_id': 2581682494, 'author': 'iethree', 'body': 'the approach in this PR is a dead-end, and made me realize this needed more thought, which led to a better design 😌', 'created_at': datetime.datetime(2024, 10, 24, 12, 12, 39, tzinfo=datetime.timezone.utc)}]","iethree (Issue Creator) on (2024-10-24 12:12:39 UTC): the approach in this PR is a dead-end, and made me realize this needed more thought, which led to a better design 😌

"
2581681430,pull_request,closed,,Enforce empty line before it and describe,"Closes https://github.com/metabase/metabase/issues/48553

### Description

I often get PR reviews about not putting white space between tests.

This PR adds an `eslint` rule to enforce that so we can avoid wasting our time on debating formatting rules in PR reviews.

It uses a new plugin: [`eslint-plugin-formatting`](https://github.com/dangreenisrael/eslint-plugin-jest-formatting), which was built just for this use case.

[`eslint-plugin-jest` also supports this](https://github.com/jest-community/eslint-plugin-jest/issues/1251), but requires version `28.8.0` and that requires `eslint` at `>8.0.0` which is a way bigger project.

The plugin that @kamilmielnik  recommended `padding-line-between-statements` is way to generic and so could not be made to lint just the whitespace between tests.",romeovs,2024-10-11 15:44:09+00:00,['romeovs'],2024-10-14 15:36:37+00:00,2024-10-14 15:36:36+00:00,https://github.com/metabase/metabase/pull/48628,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2407682097, 'issue_id': 2581681430, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 187e9508a9120d6609932f9f60ca51cf2d6104e0...9be8aae8052c43bc247a20c3b87344a63d019848.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/Visualization.unit.spec.js<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.unit.spec.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.tz.unit.spec.js<br>frontend/src/metabase/visualizations/lib/errors.unit.spec.js<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/renderer_utils.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/column.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/settings/visualization.unit.spec.js<br>frontend/src/metabase/visualizations/lib/table.unit.spec.js<br>frontend/src/metabase/visualizations/lib/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/utils.unit.spec.ts |\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 11, 15, 45, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2410485193, 'issue_id': 2581681430, 'author': 'uladzimirdev', 'body': ""I don't like new packages for formatting, but here it works fine and built in eslint rules do not allow to achieve the same\r\n\r\n🏅"", 'created_at': datetime.datetime(2024, 10, 14, 8, 49, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2410487680, 'issue_id': 2581681430, 'author': 'uladzimirdev', 'body': '@iethree how the upgrade to eslint 9 is going?', 'created_at': datetime.datetime(2024, 10, 14, 8, 50, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2410862247, 'issue_id': 2581681430, 'author': 'romeovs', 'body': ""> Approving but lint check is failing in some .tsx files. Let's make sure `yarn eslint-fix` is able to auto-fix these files.\r\n\r\nThat's because I'm selectively fixing code (otherwise `yarn eslint-fix` takes ages on my machine). I must've forgotten some files. Trying again!"", 'created_at': datetime.datetime(2024, 10, 14, 10, 58, 2, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-11 15:45:46 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 187e9508a9120d6609932f9f60ca51cf2d6104e0...9be8aae8052c43bc247a20c3b87344a63d019848.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/Visualization/Visualization.unit.spec.js<br>frontend/src/metabase/visualizations/components/skeletons/ChartSkeleton/ChartSkeleton.unit.spec.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.tz.unit.spec.js<br>frontend/src/metabase/visualizations/lib/errors.unit.spec.js<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/renderer_utils.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/column.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/typed-utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/settings/visualization.unit.spec.js<br>frontend/src/metabase/visualizations/lib/table.unit.spec.js<br>frontend/src/metabase/visualizations/lib/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/utils.unit.spec.ts |
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.unit.spec.tsx |

uladzimirdev on (2024-10-14 08:49:42 UTC): I don't like new packages for formatting, but here it works fine and built in eslint rules do not allow to achieve the same

🏅

uladzimirdev on (2024-10-14 08:50:50 UTC): @iethree how the upgrade to eslint 9 is going?

romeovs (Issue Creator) on (2024-10-14 10:58:02 UTC): That's because I'm selectively fixing code (otherwise `yarn eslint-fix` takes ages on my machine). I must've forgotten some files. Trying again!

"
2581632602,pull_request,open,,WIP/draft - perf: Replace Cheshire with Jsonista,_WIP_ – don't review yet. The PR is not a draft to allow tests to run.,alexander-yakushev,2024-10-11 15:19:16+00:00,['alexander-yakushev'],2025-01-27 01:31:18+00:00,,https://github.com/metabase/metabase/pull/48626,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2422468046, 'issue_id': 2581632602, 'author': 'alexander-yakushev', 'body': ""@noahmoss Not sure how that happened, sorry:) I'll leave a comment when this is ready for review."", 'created_at': datetime.datetime(2024, 10, 18, 13, 22, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2614700111, 'issue_id': 2581632602, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 27, 1, 31, 16, tzinfo=datetime.timezone.utc)}]","alexander-yakushev (Issue Creator) on (2024-10-18 13:22:19 UTC): @noahmoss Not sure how that happened, sorry:) I'll leave a comment when this is ready for review.

github-actions[bot] on (2025-01-27 01:31:16 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

"
2581505896,pull_request,closed,,"🤖 backported ""adding snowplow event for archiving stale items""",#48586,github-automation-metabase,2024-10-11 14:22:34+00:00,"['npfitz', 'sloansparger', 'github-automation-metabase']",2024-10-11 19:14:57+00:00,2024-10-11 19:14:56+00:00,https://github.com/metabase/metabase/pull/48623,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581488688,pull_request,closed,,"🤖 backported ""upgrade rspack and swc""",#48558,github-automation-metabase,2024-10-11 14:14:24+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-14 14:01:04+00:00,2024-10-14 14:01:03+00:00,https://github.com/metabase/metabase/pull/48621,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581466111,pull_request,closed,,"🤖 backported ""docs(sdk): Add a guide on how to use the SDK with Next.js""",#48569,github-automation-metabase,2024-10-11 14:02:57+00:00,"['WiNloSt', 'github-automation-metabase']",2024-10-11 14:07:41+00:00,2024-10-11 14:07:40+00:00,https://github.com/metabase/metabase/pull/48620,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581446425,pull_request,closed,,"🤖 backported ""Add v0.50.29 to the list of releases""",#48600,metabase-bot[bot],2024-10-11 13:54:17+00:00,['jeff-bruemmer'],2024-10-11 15:01:32+00:00,2024-10-11 15:01:31+00:00,https://github.com/metabase/metabase/pull/48618,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581442963,pull_request,closed,,"🤖 backported ""Add v0.50.29 to the list of releases""",#48600,github-automation-metabase,2024-10-11 13:52:56+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-11 13:54:56+00:00,2024-10-11 13:54:55+00:00,https://github.com/metabase/metabase/pull/48617,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2581437512,pull_request,closed,,version and channel query params for version info,"Fixes https://github.com/metabase/metabase/issues/48615
",johnswanson,2024-10-11 13:50:56+00:00,['johnswanson'],2024-10-14 11:56:51+00:00,2024-10-14 11:56:49+00:00,https://github.com/metabase/metabase/pull/48616,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2581337046,pull_request,closed,,[ParseSQL] log less warnings/errors,"Two reasons: it's very noisy, and the feature is not very user-visible, so does not make a lot of sense yet.

See [Slack thread](https://metaboat.slack.com/archives/C0641E4PB9B/p1728554132345679) for context.
",piranha,2024-10-11 13:04:45+00:00,['piranha'],2024-10-14 09:22:19+00:00,2024-10-14 08:15:06+00:00,https://github.com/metabase/metabase/pull/48614,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2581175665,pull_request,closed,,convert qb actions to ts,"### Description

query_builder actions were a mix of js and ts, let's switch to ts",uladzimirdev,2024-10-11 11:41:18+00:00,['uladzimirdev'],2024-11-09 21:19:09+00:00,2024-11-06 11:36:15+00:00,https://github.com/metabase/metabase/pull/48611,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2442025079, 'issue_id': 2581175665, 'author': 'dpsutton', 'body': ""I'm removing @iethree from the reviewers list. This PR already has changes requested and conflicts. It also seems a few weeks old. Please re-request his review if and when you need it."", 'created_at': datetime.datetime(2024, 10, 28, 16, 12, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2466461889, 'issue_id': 2581175665, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n**27 tests** were run on `7c4e80f0`. ❌ **8 Failed**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment)\n\n\n<details>\n<summary>❌ 8 Failed</summary>\n\n| Test Name | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>scenarios > organization > timelines > question as admin should open the sidebar when clicking an event icon</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=0db1bdb4-fa9e-5720-8bb0-b1ff5f3dee38) |\n| <code>scenarios > organization > timelines > question as admin should color the event icon when hovering</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=f47289f1-251b-5188-8d97-ccb833d593f8) |\n| <code>scenarios > organization > timelines > question as admin should show events for native queries</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=2cbfbb83-2a9e-5975-b897-bf67e91209dc) |\n| <code>scenarios > organization > timelines > question as admin should toggle individual event visibility</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=02a7e440-c157-5e50-828e-681341f0a126) |\n| <code>scenarios > organization > timelines > question as admin should show events for ad-hoc questions</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=89042f8e-96c6-5701-9308-e5ec4b89cd47) |\n| <code>scenarios > home > homepage after setup homepage should not flicker when syncing databases and showing xrays</code> | The element with class ""emotion-pok2ny.ezkffvd0"" was not expected to be in the DOM, but it was found continuously. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=1061f54d-66df-5e07-a480-728d143725f2) |\n| <code>dashboard filters values source config clearing and restoring should clear and restore parameter static-list values when the type changes</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=51fb378e-767b-5c63-81d2-cda1f6c2cb80) |\n| <code>scenarios > dashboard > dashboard cards > click behavior line chart allows setting saved question with single parameter as custom destination</code> |  | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=18d92675-103e-56dd-9fc0-fc087fc85286) |\n</details>\n<details>\n<summary>⏭️ 19 Skipped</summary>\n\n- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>\n- <code>ThemeProvider applies the metabase theme overrides</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to \'none\'</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>\n- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>\n\n[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=SKIPPED)\n</details>\n<sub>\n\n[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 9, 21, 14, 53, tzinfo=datetime.timezone.utc)}]","dpsutton on (2024-10-28 16:12:31 UTC): I'm removing @iethree from the reviewers list. This PR already has changes requested and conflicts. It also seems a few weeks old. Please re-request his review if and when you need it.

trunk-io[bot] on (2024-11-09 21:14:53 UTC): <!-- Trunk Test Analytics -->


**27 tests** were run on `7c4e80f0`. ❌ **8 Failed**, ⏭️ **19 Skipped**. [View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment)


<details>
<summary>❌ 8 Failed</summary>

| Test Name | Failure Summary | Logs |
| --- | --- | --- |
| <code>scenarios > organization > timelines > question as admin should open the sidebar when clicking an event icon</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=0db1bdb4-fa9e-5720-8bb0-b1ff5f3dee38) |
| <code>scenarios > organization > timelines > question as admin should color the event icon when hovering</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=f47289f1-251b-5188-8d97-ccb833d593f8) |
| <code>scenarios > organization > timelines > question as admin should show events for native queries</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=2cbfbb83-2a9e-5975-b897-bf67e91209dc) |
| <code>scenarios > organization > timelines > question as admin should toggle individual event visibility</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=02a7e440-c157-5e50-828e-681341f0a126) |
| <code>scenarios > organization > timelines > question as admin should show events for ad-hoc questions</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=89042f8e-96c6-5701-9308-e5ec4b89cd47) |
| <code>scenarios > home > homepage after setup homepage should not flicker when syncing databases and showing xrays</code> | The element with class ""emotion-pok2ny.ezkffvd0"" was not expected to be in the DOM, but it was found continuously. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=1061f54d-66df-5e07-a480-728d143725f2) |
| <code>dashboard filters values source config clearing and restoring should clear and restore parameter static-list values when the type changes</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=51fb378e-767b-5c63-81d2-cda1f6c2cb80) |
| <code>scenarios > dashboard > dashboard cards > click behavior line chart allows setting saved question with single parameter as custom destination</code> |  | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=FAILURE&flakinessStatusFilter=NOT_FLAKY&quarantineStatusFilter=NOT_QUARANTINED&runId=18d92675-103e-56dd-9fc0-fc087fc85286) |
</details>
<details>
<summary>⏭️ 19 Skipped</summary>

- <code>ThemeProvider merges the theme overrides when the theme prop is provided</code>
- <code>ThemeProvider applies the metabase theme overrides</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if SameSite cookie is set to 'none'</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should not display a note if all authorized origins match the instance domain</code>
- <code>SettingsEditor SameSite cookie note check with authorized origins should display a note if any authorized origins do not match the instance domain</code>

[... and 14 more](https://app.trunk.io/metabase/flaky-tests/pr/48611?repo=metabase/metabase&commitHash=7c4e80f074e0391b3cc2c39ab16a0f5632e336f1&utm_source=gh-comment&runConclusion=SKIPPED)
</details>
<sub>

[settings](https://app.trunk.io/metabase/settings/repo?repo=metabase/metabase&utm_source=gh-comment#flaky-tests)

</sub>

"
2581160339,pull_request,closed,,Create a new e2e test group: dashboard-filters-2,"Target PR: #48289

### Description

Tests in #48289 were timing out due to 45min limit: https://github.com/metabase/metabase/actions/runs/11276760715/job/31361810208?pr=48289

This PR moves new `dashboard-filters-query-stages.cy.spec.ts` suite to a new group.
This suite has been introduced in epic #46519 (not in `master` yet).
It's a separate PR to avoid having a huge diff.

### How to verify

Only `markdown-link-check` fails in CI.
And possibly sharing tests (see https://metaboat.slack.com/archives/C0643FZ5E83/p1728655827106879?thread_ts=1728654843.510599&cid=C0643FZ5E83).",kamilmielnik,2024-10-11 11:36:51+00:00,['kamilmielnik'],2024-10-14 10:59:24+00:00,2024-10-14 10:59:23+00:00,https://github.com/metabase/metabase/pull/48610,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2581058208,pull_request,closed,,Do not save metric viz settings to metric,"Closes https://github.com/metabase/metabase/issues/44171

### Description

This PR adds a reproduction for #44171, and fixes the underlying issue.

It does this by not unsetting `visualization_settings` when saving a metric, so it does not get written.

### How to verify
  - New → Metric, Orders, Count, Created At → Save as Metric 1 **without previewing**
  - New → Metric, Orders, Count, Created At → Save as Metric 2 without previewing
  - Now click on the run button and see the results for Metric 2
  - Click “Edit query definition” and change “Count” to “Sum of Total” and save the query **without previewing**
  - Create a dashboard and add Metric 1
  - Hover → Add series → Make sure you see have Metric 2 in the list


",romeovs,2024-10-11 10:46:34+00:00,['romeovs'],2024-10-14 14:52:53+00:00,2024-10-14 14:18:28+00:00,https://github.com/metabase/metabase/pull/48609,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2580968059,pull_request,closed,,"🤖 backported ""Document MySQL row limit issue with Vitess""",#48568,github-automation-metabase,2024-10-11 09:59:39+00:00,"['abdhabli', 'github-automation-metabase']",2024-10-11 10:01:13+00:00,2024-10-11 10:01:12+00:00,https://github.com/metabase/metabase/pull/48607,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2580912494,pull_request,closed,,"🤖 backported ""keep the keys in send-pulse task history underscored""",#48601,github-automation-metabase,2024-10-11 09:33:46+00:00,"['qnkhuat', 'github-automation-metabase']",2024-10-11 10:14:05+00:00,2024-10-11 10:14:04+00:00,https://github.com/metabase/metabase/pull/48606,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2580854368,pull_request,closed,,fix circular deps in query_builder/components,"### Description

fixed circular deps problem on `query_builder/components` folder, reported by eslint
",uladzimirdev,2024-10-11 09:05:06+00:00,['uladzimirdev'],2024-10-15 17:27:13+00:00,2024-10-15 16:22:38+00:00,https://github.com/metabase/metabase/pull/48604,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2406969367, 'issue_id': 2580854368, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 11, 9, 5, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-11 09:05:30 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2580712174,pull_request,closed,,"🤖 backported ""Migrate dashboard embed endpoints to RTK""",#48444,github-automation-metabase,2024-10-11 07:54:40+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-11 09:43:11+00:00,2024-10-11 09:43:10+00:00,https://github.com/metabase/metabase/pull/48603,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2580556684,pull_request,closed,,Bump HoneySQL version,"This release includes performance improvements: https://github.com/seancorfield/honeysql/pull/545 and https://github.com/seancorfield/honeysql/pull/546.
",alexander-yakushev,2024-10-11 06:36:31+00:00,['alexander-yakushev'],2024-11-26 18:52:22+00:00,2024-10-23 14:00:18+00:00,https://github.com/metabase/metabase/pull/48602,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2426827588, 'issue_id': 2580556684, 'author': 'crisptrutski', 'body': ""Since we recently had a driver break from a HoneySQL version bump, I'm nervous about us pinning to LATEST.\r\n\r\n~~Can we not push for an official release to be cut instead?~~ Can we rather upgrade to 2.6.1196?"", 'created_at': datetime.datetime(2024, 10, 21, 14, 20, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2428958942, 'issue_id': 2580556684, 'author': 'paoliniluis', 'body': '@alexander-yakushev I guess this now can be replaced by 2.6.1196 right? can you push that so we can merge this change?', 'created_at': datetime.datetime(2024, 10, 22, 10, 54, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2428963809, 'issue_id': 2580556684, 'author': 'alexander-yakushev', 'body': ""1196 is the version that contains the bug. I've committed the SNAPSHOT only to see if tests pass, I don't plan to merge this. Let me ask Sean for a release."", 'created_at': datetime.datetime(2024, 10, 22, 10, 57, 19, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-10-21 14:20:09 UTC): Since we recently had a driver break from a HoneySQL version bump, I'm nervous about us pinning to LATEST.

~~Can we not push for an official release to be cut instead?~~ Can we rather upgrade to 2.6.1196?

paoliniluis on (2024-10-22 10:54:54 UTC): @alexander-yakushev I guess this now can be replaced by 2.6.1196 right? can you push that so we can merge this change?

alexander-yakushev (Issue Creator) on (2024-10-22 10:57:19 UTC): 1196 is the version that contains the bug. I've committed the SNAPSHOT only to see if tests pass, I don't plan to merge this. Let me ask Sean for a release.

"
2580336678,pull_request,closed,,keep the keys in send-pulse task history underscored,discussed here https://github.com/metabase/metabase/pull/48437/files#r1795563631,qnkhuat,2024-10-11 03:23:30+00:00,['qnkhuat'],2024-10-11 10:14:31+00:00,2024-10-11 09:32:56+00:00,https://github.com/metabase/metabase/pull/48601,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2580327523,pull_request,closed,,Add v0.50.29 to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-10-11 03:11:46+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-11 15:02:03+00:00,2024-10-11 13:52:06+00:00,https://github.com/metabase/metabase/pull/48600,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2407464735, 'issue_id': 2580327523, 'author': 'jeff-bruemmer', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 11, 13, 52, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2407601659, 'issue_id': 2580327523, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 11, 15, 2, 1, tzinfo=datetime.timezone.utc)}]","jeff-bruemmer (Assginee) on (2024-10-11 13:52:42 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-11 15:02:01 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2580148034,pull_request,closed,,Remove duplicated lines from release workflow,"Follow up to #48596 

- I duplicated lines and make the release workflow invalid 😩  🤦‍♀️ ",iethree,2024-10-11 00:44:57+00:00,['iethree'],2024-11-26 18:52:43+00:00,2024-10-11 00:47:10+00:00,https://github.com/metabase/metabase/pull/48599,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2580100575,pull_request,closed,,Add a new prometheus metrics in m.qp.middleware.metrics/adjust,"### Description

Context: https://metaboat.slack.com/archives/C0645JP1W81/p1728471378145769

Add a new prometheus counter to count errors in `metabase.query-processor.middleware.metrics/adjust`.

### How to verify

* Set `MB_PROMETHEUS_SERVER_PORT` and then check the `/metrics` endpoint, should see logs like

```
# HELP metabase_query_processor_metrics_total Number metrics processed by the query processor.
# TYPE metabase_query_processor_metrics_total counter
metabase_query_processor_metrics_total 0.0
# HELP metabase_query_processor_metrics_errors_total Number of errors when processing metrics.
# TYPE metabase_query_processor_metrics_errors_total counter
metabase_query_processor_metrics_errors_total 0.0
# HELP metabase_query_processor_metrics_created Number metrics processed by the query processor.
# TYPE metabase_query_processor_metrics_created gauge
metabase_query_processor_metrics_created 1.728947783982E9
# HELP metabase_query_processor_metrics_errors_created Number of errors when processing metrics.
# TYPE metabase_query_processor_metrics_errors_created gauge
metabase_query_processor_metrics_errors_created 1.728947783982E9
```

* Or see [dpsutton's comment](https://github.com/metabase/metabase/pull/48547#issuecomment-2405875446) about testing from the repl
* See included tests

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-11 00:05:18+00:00,['appleby'],2024-10-17 14:44:05+00:00,2024-10-16 20:06:43+00:00,https://github.com/metabase/metabase/pull/48598,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2414179311, 'issue_id': 2580100575, 'author': 'dpsutton', 'body': 'One thing i notice about the tests is that we\'re spending ~80 lines writing tests to see if a number gets incremented or not. But we can just instrument the existing tests. Here I\'m grabbing the before and after values. Perhaps we could just instrument one or two of these?\r\n\r\n```clojure\r\nmetrics-test=> (let [f! #(-> #\'metabase.analytics.prometheus/system var-get :registry :metabase-query-processor/metrics iapetos.core/value)\r\n                     e! #(-> #\'metabase.analytics.prometheus/system var-get :registry :metabase-query-processor/metrics-errors iapetos.core/value)]\r\n                 (doseq [[s v] (ns-publics *ns*)\r\n                         :when (-> v meta test)]\r\n                   (let [before (f!)\r\n                         before-e (e!)]\r\n                     (try (v) (catch Exception _e))\r\n                     (println s "": incremented "" (long (- (f!) before)) "" errors: "" (long (- (e!) before-e))))))\r\ncustom-aggregation-test : incremented  1  errors:  0\r\nmetric-question-on-native-model-test : incremented  1  errors:  0\r\ne2e-source-card-test : incremented  0  errors:  0\r\nadjust-filter-test : incremented  1  errors:  0\r\nmetric-question-on-model-based-on-model-test : incremented  1  errors:  0\r\nmodel-based-metric-with-implicit-join-test : incremented  1  errors:  0\r\navailable-metrics-test : incremented  0  errors:  0\r\nmetric-with-explicit-join-test : incremented  1  errors:  0\r\nadjust-aggregation-metric-ref-test : incremented  1  errors:  0\r\noverride-source-names-test : incremented  1  errors:  0\r\nno-metric-should-result-in-exact-same-query : incremented  0  errors:  0\r\nmetric-in-offset-test : incremented  1  errors:  0\r\nmetric-with-implicit-join-test : incremented  3  errors:  0\r\nmetric-question-on-multi-stage-model-test : incremented  1  errors:  0\r\nmetric-question-on-aggregate-column-model-test : incremented  1  errors:  0\r\nexecute-single-stage-metric : incremented  3  errors:  0\r\nadjust-mixed-multi-source-test : incremented  2  errors:  0\r\ndefault-metric-names-test : incremented  1  errors:  0\r\nadjust-basic-source-table-test : incremented  1  errors:  0\r\nfiltered-metric-test : incremented  1  errors:  0\r\nadjust-aggregation-metric-ordering-test : incremented  1  errors:  0\r\ne2e-source-metric-results-test : incremented  1  errors:  0\r\njoined-question-based-on-metric-based-on-metric-based-on-metric-test : incremented  2  errors:  0\r\nadjust-prometheus-metrics-test : incremented  0  errors:  0\r\ninclude-source-names-test : incremented  1  errors:  0\r\nmetric-with-nested-segments-test : incremented  2  errors:  0\r\nmultiple-source-metrics-with-implicit-join-test : incremented  1  errors:  0\r\nadjust : incremented  0  errors:  0\r\nquestion-based-on-metric-based-on-metric-based-on-metric-test : incremented  3  errors:  0\r\nadjust-expression-test : incremented  1  errors:  0\r\nmaintain-aggregation-refs-test : incremented  2  errors:  0\r\nadjust-join-test : incremented  1  errors:  0\r\nadjust-basic-source-metric-test : incremented  1  errors:  0\r\ne2e-source-table-results-test : incremented  1  errors:  0\r\nmetric-question-on-custom-column-model-test : incremented  1  errors:  0\r\nmodel-based-metric-use-test : incremented  1  errors:  0\r\nadjust-expression-name-collision-test : incremented  1  errors:  0\r\nexpand-macros-in-nested-queries-test : incremented  2  errors:  0\r\n```', 'created_at': datetime.datetime(2024, 10, 15, 14, 58, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414742364, 'issue_id': 2580100575, 'author': 'appleby', 'body': ""> One thing i notice about the tests is that we're spending ~80 lines writing tests to see if a number gets incremented or not. But we can just instrument the existing tests. Here I'm grabbing the before and after values. Perhaps we could just instrument one or two of these?\r\n\r\nI see two separate (and valid!) parts to this:\r\n\r\n1. Why not read the counter values directly, rather than mocking out calls to `prometheus/inc!`.\r\n2. Why not instrument existing tests, rather than write (tedious) bespoke hand-crafted artisanal tests\r\n\r\nFor (1), reading the counter values was my first instinct as well, possibly adding some helper function/macro to capture the before/after values or else reset the counters (or maybe just use existing `with-prometheus-system!` in the prometheus tests), but then I stumbled on [the discussion](https://github.com/metabase/metabase/pull/31333#issuecomment-1639803104) between yourself and devurandom in #31333, and the arguments there by devurandom about keeping testing concerns separate seemed reasonable, so I followed that approach.\r\n\r\nFor (2), I also considered this! Possibly adding metadata to existing tests to filter them for inclusion/instrumentation. In the end I was worried this would be brittle as the tests could break if anyone updates the existing tests to run more queries, etc. It wouldn't be hard to go back and update the expectation to match, but I guess it could be mildly annoying / confusing if you aren't aware the prometheus tests exist, because typically if you modify some test, you also modified some code as well, so now you need to convince yourself that the new values are correct (not hard but still)."", 'created_at': datetime.datetime(2024, 10, 15, 18, 37, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414788685, 'issue_id': 2580100575, 'author': 'appleby', 'body': 'Moving this back to draft to respond to PR feedback', 'created_at': datetime.datetime(2024, 10, 15, 19, 0, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414912924, 'issue_id': 2580100575, 'author': 'appleby', 'body': ""> One thing i notice about the tests is that we're spending ~80 lines writing tests to see if a number gets incremented or not. But we can just instrument the existing tests. Here I'm grabbing the before and after values. Perhaps we could just instrument one or two of these?\r\n\r\nTotally agree with the underlying concern here though, which is that it's not ideal if we have to add 80ish lines of bespoke tests every time we add prometheus metrics to some module, and it would be better if we had some low-cost / low-friction way to add such tests to an existing module."", 'created_at': datetime.datetime(2024, 10, 15, 20, 10, 45, tzinfo=datetime.timezone.utc)}]","dpsutton on (2024-10-15 14:58:22 UTC): One thing i notice about the tests is that we're spending ~80 lines writing tests to see if a number gets incremented or not. But we can just instrument the existing tests. Here I'm grabbing the before and after values. Perhaps we could just instrument one or two of these?

```clojure
metrics-test=> (let [f! #(-> #'metabase.analytics.prometheus/system var-get :registry :metabase-query-processor/metrics iapetos.core/value)
                     e! #(-> #'metabase.analytics.prometheus/system var-get :registry :metabase-query-processor/metrics-errors iapetos.core/value)]
                 (doseq [[s v] (ns-publics *ns*)
                         :when (-> v meta test)]
                   (let [before (f!)
                         before-e (e!)]
                     (try (v) (catch Exception _e))
                     (println s "": incremented "" (long (- (f!) before)) "" errors: "" (long (- (e!) before-e))))))
custom-aggregation-test : incremented  1  errors:  0
metric-question-on-native-model-test : incremented  1  errors:  0
e2e-source-card-test : incremented  0  errors:  0
adjust-filter-test : incremented  1  errors:  0
metric-question-on-model-based-on-model-test : incremented  1  errors:  0
model-based-metric-with-implicit-join-test : incremented  1  errors:  0
available-metrics-test : incremented  0  errors:  0
metric-with-explicit-join-test : incremented  1  errors:  0
adjust-aggregation-metric-ref-test : incremented  1  errors:  0
override-source-names-test : incremented  1  errors:  0
no-metric-should-result-in-exact-same-query : incremented  0  errors:  0
metric-in-offset-test : incremented  1  errors:  0
metric-with-implicit-join-test : incremented  3  errors:  0
metric-question-on-multi-stage-model-test : incremented  1  errors:  0
metric-question-on-aggregate-column-model-test : incremented  1  errors:  0
execute-single-stage-metric : incremented  3  errors:  0
adjust-mixed-multi-source-test : incremented  2  errors:  0
default-metric-names-test : incremented  1  errors:  0
adjust-basic-source-table-test : incremented  1  errors:  0
filtered-metric-test : incremented  1  errors:  0
adjust-aggregation-metric-ordering-test : incremented  1  errors:  0
e2e-source-metric-results-test : incremented  1  errors:  0
joined-question-based-on-metric-based-on-metric-based-on-metric-test : incremented  2  errors:  0
adjust-prometheus-metrics-test : incremented  0  errors:  0
include-source-names-test : incremented  1  errors:  0
metric-with-nested-segments-test : incremented  2  errors:  0
multiple-source-metrics-with-implicit-join-test : incremented  1  errors:  0
adjust : incremented  0  errors:  0
question-based-on-metric-based-on-metric-based-on-metric-test : incremented  3  errors:  0
adjust-expression-test : incremented  1  errors:  0
maintain-aggregation-refs-test : incremented  2  errors:  0
adjust-join-test : incremented  1  errors:  0
adjust-basic-source-metric-test : incremented  1  errors:  0
e2e-source-table-results-test : incremented  1  errors:  0
metric-question-on-custom-column-model-test : incremented  1  errors:  0
model-based-metric-use-test : incremented  1  errors:  0
adjust-expression-name-collision-test : incremented  1  errors:  0
expand-macros-in-nested-queries-test : incremented  2  errors:  0
```

appleby (Issue Creator) on (2024-10-15 18:37:16 UTC): I see two separate (and valid!) parts to this:

1. Why not read the counter values directly, rather than mocking out calls to `prometheus/inc!`.
2. Why not instrument existing tests, rather than write (tedious) bespoke hand-crafted artisanal tests

For (1), reading the counter values was my first instinct as well, possibly adding some helper function/macro to capture the before/after values or else reset the counters (or maybe just use existing `with-prometheus-system!` in the prometheus tests), but then I stumbled on [the discussion](https://github.com/metabase/metabase/pull/31333#issuecomment-1639803104) between yourself and devurandom in #31333, and the arguments there by devurandom about keeping testing concerns separate seemed reasonable, so I followed that approach.

For (2), I also considered this! Possibly adding metadata to existing tests to filter them for inclusion/instrumentation. In the end I was worried this would be brittle as the tests could break if anyone updates the existing tests to run more queries, etc. It wouldn't be hard to go back and update the expectation to match, but I guess it could be mildly annoying / confusing if you aren't aware the prometheus tests exist, because typically if you modify some test, you also modified some code as well, so now you need to convince yourself that the new values are correct (not hard but still).

appleby (Issue Creator) on (2024-10-15 19:00:00 UTC): Moving this back to draft to respond to PR feedback

appleby (Issue Creator) on (2024-10-15 20:10:45 UTC): Totally agree with the underlying concern here though, which is that it's not ideal if we have to add 80ish lines of bespoke tests every time we add prometheus metrics to some module, and it would be better if we had some low-cost / low-friction way to add such tests to an existing module.

"
2580086029,pull_request,closed,,"🤖 backported ""Relax concat args to allow any ExpressionArg""",#48506,github-automation-metabase,2024-10-10 23:53:41+00:00,"['appleby', 'github-automation-metabase']",2024-10-11 17:54:37+00:00,2024-10-11 17:54:36+00:00,https://github.com/metabase/metabase/pull/48597,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2580032086,pull_request,closed,,Make beta releases play nicer,"### Description

1. Fixes a bug in _last_ release parsing so that we can accurately calculate the version number of the _next_ release.
2. Fixes a broken assumption in git branch parsing (that we should parse back to RC1 tag to find everything in the release branch) used to find commit history and produce release logs
3. (temporarily) Disables automatic ""nightly"" release tagging because it is susceptible to a race condition when multiple automatic patches run at the same time. (I have a fix for this, but I want to test it more thoroughly before pushing it)


",iethree,2024-10-10 23:18:07+00:00,['iethree'],2024-11-26 18:52:43+00:00,2024-10-11 00:28:00+00:00,https://github.com/metabase/metabase/pull/48596,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2580024940,pull_request,closed,,unpivoted Pivot Exports use Pivot Settings to Determine Col Order,"Fixes #48442

The column order for pivoted exports was still using the column order of the regular Table Viz settings (if present), or using whatever default order happend to occur.

This PR changes the column ordering behaviour to take into account the pivot settings and adds a test to verify the column order is preserved.

Note that this change may be superseded by merging the improved pivot exports PR #46995",adam-james-v,2024-10-10 23:12:04+00:00,['adam-james-v'],2024-10-22 16:04:34+00:00,2024-10-22 16:04:33+00:00,https://github.com/metabase/metabase/pull/48595,"[('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2429685921, 'issue_id': 2580024940, 'author': 'adam-james-v', 'body': 'Closing this as this PR: https://github.com/metabase/metabase/pull/46995 properly solves the issue, though it is for 51', 'created_at': datetime.datetime(2024, 10, 22, 16, 4, 33, tzinfo=datetime.timezone.utc)}]","adam-james-v (Issue Creator) on (2024-10-22 16:04:33 UTC): Closing this as this PR: https://github.com/metabase/metabase/pull/46995 properly solves the issue, though it is for 51

"
2579852985,pull_request,closed,,rework query builder controls for visualization,"closes https://github.com/metabase/metabase/issues/50025
closes https://github.com/metabase/metabase/issues/50263

partial implementation of ML2 of [[Epic] Make query builder UI controls more predictable](https://github.com/metabase/metabase/issues/47911)

### Description

[video overview](https://www.loom.com/share/ce06c40e05774b8db4778efe22780fa5) - UPDATED


Main changes

- new control to switch between viz, tabular data and editor
<img width=""334"" alt=""image"" src=""https://github.com/user-attachments/assets/603bc769-f285-445b-a3a3-95fcd02da3b1"">

- sidebar now contains both Chart type selector and Viz settings

<img width=""338"" alt=""image"" src=""https://github.com/user-attachments/assets/36253097-3fc8-40dc-94b1-ad650bd11387"">
<img width=""346"" alt=""image"" src=""https://github.com/user-attachments/assets/44efeb7d-a3ea-4464-a78b-8df23d9c5932"">",uladzimirdev,2024-10-10 21:10:44+00:00,['uladzimirdev'],2025-01-10 09:15:46+00:00,2025-01-10 09:15:40+00:00,https://github.com/metabase/metabase/pull/48593,"[('.Team/Querying', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2420454405, 'issue_id': 2579852985, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 66d31044c12159a1cbf6d98063f8b78d1de6cea4...f19449544b92a3ebd429fa02a814aaa1646f429a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/hooks.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/QuestionChartSettings.tsx<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx |\n| @kdoh | frontend/src/metabase/ui/components/navigation/Tabs/Tabs.styled.tsx |', 'created_at': datetime.datetime(2024, 10, 17, 20, 8, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2467674331, 'issue_id': 2579852985, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/50626_tests-a2a4fff4-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/2-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/3-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>scenarios > embedding-sdk > create-question can create a question via the CreateQuestion component</code> | The test timed out while trying to find a label with the text ""Switch to visualization"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=95033af6-2d59-5e56-a6be-c9c264a50670) |\n| <code>converting question to a native query (metabase\\#15946, metabase\\#32121, metabase\\#38181) should work for both simple and nested questions based on...</code> | The expected text was not found in the HTML content within the timeout of 4000ms. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=b0ead475-d509-5a80-b719-b2b8ef3b84aa) |\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>issue 8490 static embeddings should respect \\`\\#locale\\` hash parameter (metabase\\#8490, metabase\\#50182)</code> | Unable to find an element with the text ""11월 2023"" after 4000ms, possibly due to broken text being split by multiple elements. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=afb12d82-2a4c-5764-9642-2ebf07a08a56) |\n| <code>scenarios > filters > sql filters > field filter > Date when set as the default value for a required filter</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=e51fccf8-eddf-59b6-a8b6-78faefbca085) |\n| <code>scenarios > filters > sql filters > field filter > Date when set through the filter widget</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=29092b46-6b43-54c2-8bd7-4989860ef0a4) |\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 11, 9, 40, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2515081471, 'issue_id': 2579852985, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit f19449544b92a3ebd429fa02a814aaa1646f429a.\n✅ Preview:\n    https://pr48593.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 12, 3, 16, 47, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2582140389, 'issue_id': 2579852985, 'author': 'uladzimirdev', 'body': ""It's reimplemented in different PRs"", 'created_at': datetime.datetime(2025, 1, 10, 9, 15, 45, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-17 20:08:01 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 66d31044c12159a1cbf6d98063f8b78d1de6cea4...f19449544b92a3ebd429fa02a814aaa1646f429a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/BaseChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings/BaseChartSettings/hooks.ts<br>frontend/src/metabase/visualizations/components/ChartSettings/QuestionChartSettings/QuestionChartSettings.tsx<br>frontend/src/metabase/visualizations/visualizations/Map/Map.jsx |
| @kdoh | frontend/src/metabase/ui/components/navigation/Tabs/Tabs.styled.tsx |

trunk-io[bot] on (2024-11-11 09:40:58 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/50626_tests-a2a4fff4-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/2-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/3-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>scenarios > embedding-sdk > create-question can create a question via the CreateQuestion component</code> | The test timed out while trying to find a label with the text ""Switch to visualization"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=95033af6-2d59-5e56-a6be-c9c264a50670) |
| <code>converting question to a native query (metabase\#15946, metabase\#32121, metabase\#38181) should work for both simple and nested questions based on...</code> | The expected text was not found in the HTML content within the timeout of 4000ms. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=b0ead475-d509-5a80-b719-b2b8ef3b84aa) |
| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>issue 8490 static embeddings should respect \`\#locale\` hash parameter (metabase\#8490, metabase\#50182)</code> | Unable to find an element with the text ""11월 2023"" after 4000ms, possibly due to broken text being split by multiple elements. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=afb12d82-2a4c-5764-9642-2ebf07a08a56) |
| <code>scenarios > filters > sql filters > field filter > Date when set as the default value for a required filter</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=e51fccf8-eddf-59b6-a8b6-78faefbca085) |
| <code>scenarios > filters > sql filters > field filter > Date when set through the filter widget</code> | The test timed out while trying to find an element with the text ""Synergistic Steel Chair"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment&runConclusion=FAILURE&runId=29092b46-6b43-54c2-8bd7-4989860ef0a4) |
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48593?repo=metabase/metabase&commitHash=a2a4fff4aadc20c8b596cda932a6309b1d1d1380&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

github-actions[bot] on (2024-12-03 16:47:45 UTC): 👋 Deploying a preview environment for commit f19449544b92a3ebd429fa02a814aaa1646f429a.
✅ Preview:
    https://pr48593.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

uladzimirdev (Issue Creator) on (2025-01-10 09:15:45 UTC): It's reimplemented in different PRs

"
2579832837,pull_request,closed,,Remove old `MB_API_KEY` setting,"Remove `MB_API_KEY` setting.

A bit awkwardly, we never set `:deprecated` on the setting before. We
can retroactively deprecate this as of v50.

I'm adding back the setting purely to emit the warning message on startup.

This has been replaced by API keys (set via the admin panel).

Fixes #48210",johnswanson,2024-10-10 20:59:24+00:00,['johnswanson'],2024-10-14 11:57:35+00:00,2024-10-14 11:57:34+00:00,https://github.com/metabase/metabase/pull/48592,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2579804627,pull_request,closed,,"🤖 backported ""48049 error diagnostic command palette""",#48544,github-automation-metabase,2024-10-10 20:44:30+00:00,"['npfitz', 'github-automation-metabase']",2024-10-11 14:24:06+00:00,2024-10-11 14:24:05+00:00,https://github.com/metabase/metabase/pull/48590,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2579799983,pull_request,closed,,fix iframe dashcards crash subscriptions,"### Description

Fixes iframe dashcards crash dashboard subscriptions by filtering out these cards.

### How to verify

- Create a dashboard with an iframe dashcard
- Send a test dashboard subscription 
- Ensure it does not fail

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-10 20:41:30+00:00,['adam-james-v'],2024-10-15 14:21:21+00:00,2024-10-15 14:21:20+00:00,https://github.com/metabase/metabase/pull/48589,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('Cloud-Blocker:51', 'Issues blocking the cloud customers to be upgraded to v51')]",[],
2579798651,pull_request,closed,,"🤖 backported ""Always startup prometheus metrics""",#48547,github-automation-metabase,2024-10-10 20:40:36+00:00,"['dpsutton', 'github-automation-metabase']",2024-10-10 21:23:57+00:00,2024-10-10 21:23:56+00:00,https://github.com/metabase/metabase/pull/48588,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2579788455,pull_request,closed,,adding snowplow event for archiving stale items,"Closes https://github.com/metabase/metabase/issues/48566

### Description
Adds snowplow tracking to archiving stale items via the modal

### How to verify

1. Start up Metabase with snowplow enabled and pointing to a local snowplow instance
2. Go to a collection, and move some stale stuff to the trash
3. You should see `stale_items_archived` events with the number of items archived, and the collection id they were in

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-10 20:33:44+00:00,['npfitz'],2024-10-11 14:21:49+00:00,2024-10-11 14:21:46+00:00,https://github.com/metabase/metabase/pull/48586,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2579778673,pull_request,closed,,Use `information_schema` as a basis for `describe-database` in Databricks driver,"Closes #48584

### Description

This PR makes `describe-database` use `information_schema` instead of jdbc `.getSchemas`.

### How to verify

`describe-database` test was extended.",lbrdnk,2024-10-10 20:30:02+00:00,['lbrdnk'],2024-10-17 18:57:42+00:00,2024-10-14 21:31:18+00:00,https://github.com/metabase/metabase/pull/48585,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2579640423,pull_request,closed,,"🤖 backported ""Select all changes for dashboards""","  #48531
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-10 19:18:12+00:00,"['ranquild', 'github-automation-metabase']",2024-10-11 02:56:48+00:00,2024-10-11 02:56:47+00:00,https://github.com/metabase/metabase/pull/48579,"[('was-backported', 'apply this to PRs that are themselves backports'), ('loki-update', '')]",[],
2579559826,pull_request,closed,,SDK embedding prometheus,Adds prometheus counter for sdk-embedding response successes and errors,escherize,2024-10-10 18:37:07+00:00,['escherize'],2025-02-04 18:14:06+00:00,2024-10-16 18:00:20+00:00,https://github.com/metabase/metabase/pull/48578,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2579541105,pull_request,closed,,Use saved card metadata to filter fields in query metadata for sandboxed tables,"When fetching the `query_metadata` for a table which is sandboxed using a source card, the sandboxing card might only include a subset of the columns in the table. So we need to filter out fields from the table's metadata which are not present in the sandboxing card.

Previously, this was done by looking for field references in the sandboxing query itself. This worked for MBQL queries but never worked for native queries. 

I've changed this to instead look at the sandboxing card's `result_metadata`. If it's an MBQL card, we filter out fields from the table's metadata by ID. If it's a native card, we correlate them by name, since we don't have an ID mapping.",noahmoss,2024-10-10 18:25:42+00:00,['noahmoss'],2024-10-15 16:17:16+00:00,2024-10-11 20:52:40+00:00,https://github.com/metabase/metabase/pull/48577,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2405774926, 'issue_id': 2579541105, 'author': 'noahmoss', 'body': '* **#48577** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48577?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 10, 18, 25, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414462228, 'issue_id': 2579541105, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 15, 16, 17, 15, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-10 18:25:56 UTC): * **#48577** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48577?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-10-15 16:17:15 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2579383023,pull_request,closed,,perf: Implement faster sync methods for postgres,"Fixes #48575

Pulls work from redshift into the common postgres driver.
",snoe,2024-10-10 16:57:51+00:00,['snoe'],2024-11-15 10:38:07+00:00,2024-10-30 20:24:39+00:00,https://github.com/metabase/metabase/pull/48576,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Drivers', '')]","[{'comment_id': 2478501875, 'issue_id': 2579383023, 'author': 'artem-levashov', 'body': 'I have 5 differend DBs on same  Mysql server. all 5 has tables with exact same name. tables has different  fields. after scan DB table metadata of sunced table contains merged list of  fields from all 5 tables. it started after I upated to version 0.51.3   Fir 8 Nov 2024.  Is it possible that  toptimization from this  pull reuqest generates  my issue?', 'created_at': datetime.datetime(2024, 11, 15, 10, 26, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2478522962, 'issue_id': 2579383023, 'author': 'artem-levashov', 'body': '![image](https://github.com/user-attachments/assets/f69a4dd7-d928-4f01-a34e-1f10a2de9ac1)\r\nloos like lost filter by  TABLE_SCHEMA', 'created_at': datetime.datetime(2024, 11, 15, 10, 37, 38, tzinfo=datetime.timezone.utc)}]","artem-levashov on (2024-11-15 10:26:08 UTC): I have 5 differend DBs on same  Mysql server. all 5 has tables with exact same name. tables has different  fields. after scan DB table metadata of sunced table contains merged list of  fields from all 5 tables. it started after I upated to version 0.51.3   Fir 8 Nov 2024.  Is it possible that  toptimization from this  pull reuqest generates  my issue?

artem-levashov on (2024-11-15 10:37:38 UTC): ![image](https://github.com/user-attachments/assets/f69a4dd7-d928-4f01-a34e-1f10a2de9ac1)
loos like lost filter by  TABLE_SCHEMA

"
2579369514,pull_request,closed,,"`embedding-sdk:dev`: --watch that makes ""fixed"" dts","Demo: https://www.loom.com/share/cdf941ff0ea941cd9a3bec71d7c3eacc?sid=96deeb22-d40b-469c-9822-7b852cfafdb1

This may not work 100% correctly on all use cases, for example the first iteration didn't support not finding the dist folder when it started, please try it out and report any issue 🙏 

# Changes
- `embedding-sdk:dev` command that is like --watch but also outputs fixed dts files
- switched the sdk to use --incremental for tsc, which makes it a lot faster after the first run
- it still uses fork-ts-checker for production builds just to be safe (see notes below)
- `embedding-sdk:clean` command tha cleans the .tsbuildinfo + dist folder
- the fixup command now accepts `--watch`
- vscode tasks that run all the needed commands on split terminals so that the output is readable:
<img width=""1965"" alt=""image"" src=""https://github.com/user-attachments/assets/d30a6af6-a71d-4663-8c41-fd9daef40d79"">


## about `tsc --watch`
This uses `tsc --watch` to build the dts files which has some behaviour that may be confusing if it's the first time you use it.
AFAIK when `tsc --watch` starts, it builds everything and *only after that* it starts watching for file changes. This mean that if you start it and immediately save a file, it may not get that change. Just saving the file again should work.

# Note about the errors
`tsc` is showing LOTS of errors, I [tried to understand](https://metaboat.slack.com/archives/C063Q3F1HPF/p1728570857095239) why fork-ts-checker is not doing that.

The errors doesn't seem to show up in the types we export though, we it should be ok.
Please report if it happens.",npretto,2024-10-10 16:51:59+00:00,['npretto'],2024-11-26 18:52:35+00:00,2024-10-16 13:05:33+00:00,https://github.com/metabase/metabase/pull/48574,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2414130043, 'issue_id': 2579369514, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 15, 14, 41, 17, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-15 14:41:17 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2579348062,pull_request,closed,,"🤖 backported ""Lean on DB queries for describe-table for Mongo""",#46598,github-automation-metabase,2024-10-10 16:41:24+00:00,"['snoe', 'github-automation-metabase']",2024-10-10 16:42:40+00:00,2024-10-10 16:42:23+00:00,https://github.com/metabase/metabase/pull/48573,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2405590779, 'issue_id': 2579348062, 'author': 'snoe', 'body': 'Duplicate of #48572', 'created_at': datetime.datetime(2024, 10, 10, 16, 42, 39, tzinfo=datetime.timezone.utc)}]","snoe (Assginee) on (2024-10-10 16:42:39 UTC): Duplicate of #48572

"
2579346601,pull_request,closed,,"🤖 backported ""Lean on DB queries for describe-table for Mongo""",#46598,metabase-bot[bot],2024-10-10 16:41:02+00:00,['snoe'],2024-10-15 17:20:29+00:00,2024-10-15 17:20:28+00:00,https://github.com/metabase/metabase/pull/48572,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2579298755,pull_request,closed,,"🤖 backported ""fix flakiness during resize""",#48556,github-automation-metabase,2024-10-10 16:16:38+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-10-16 07:57:22+00:00,2024-10-16 07:56:52+00:00,https://github.com/metabase/metabase/pull/48570,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2416006958, 'issue_id': 2579298755, 'author': 'uladzimirdev', 'body': 'not needed as @kamilmielnik reverted this change and merged another fix', 'created_at': datetime.datetime(2024, 10, 16, 7, 57, 19, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Assginee) on (2024-10-16 07:57:19 UTC): not needed as @kamilmielnik reverted this change and merged another fix

"
2579236787,pull_request,closed,,docs(sdk): Add a guide on how to use the SDK with Next.js,"Add a guide for using the SDK with Next.js

To test Next.js please use my forked repos:
- App Router: https://github.com/WiNloSt/next-app-template
- Pages Router: https://github.com/WiNloSt/next-pages-template",WiNloSt,2024-10-10 15:47:20+00:00,['WiNloSt'],2024-10-11 14:08:06+00:00,2024-10-11 14:02:09+00:00,https://github.com/metabase/metabase/pull/48569,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2579218754,pull_request,closed,,Document MySQL row limit issue with Vitess,"Check this Slack thread [here](https://metaboat.slack.com/archives/C864UT5CZ/p1728490676071639).
Add a section about a known issue with Vitess and MySQL row limits. ",abdhabli,2024-10-10 15:40:20+00:00,['abdhabli'],2024-10-11 10:01:39+00:00,2024-10-11 09:58:51+00:00,https://github.com/metabase/metabase/pull/48568,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2406465168, 'issue_id': 2579218754, 'author': 'alexyarosh', 'body': ""@abdhabli don't forget to backport it to 50 as well once you merge 😉"", 'created_at': datetime.datetime(2024, 10, 11, 3, 1, 9, tzinfo=datetime.timezone.utc)}]","alexyarosh on (2024-10-11 03:01:09 UTC): @abdhabli don't forget to backport it to 50 as well once you merge 😉

"
2579003098,pull_request,closed,,"🤖 backported ""Rename ResizeObserver variable to prevent global clash""","  #48563
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-10 14:16:22+00:00,"['oisincoveney', 'github-automation-metabase']",2024-10-11 14:10:27+00:00,2024-10-11 14:10:26+00:00,https://github.com/metabase/metabase/pull/48565,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2578836007,pull_request,closed,,fix react warnings,"### Description

fixes some of the warnings from emotion and react",uladzimirdev,2024-10-10 13:19:38+00:00,['uladzimirdev'],2024-11-04 09:29:01+00:00,2024-10-18 22:20:34+00:00,https://github.com/metabase/metabase/pull/48564,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2407482950, 'issue_id': 2578836007, 'author': 'nemanjaglumac', 'body': 'Thank you much for doing this! @uladzimirdev \r\nDid you want to keep it within a certain scope or would you like to get rid of most (all) of the errors. Asking because I found more, but I am not sure do you want to keep iterating in this PR?\r\n\r\nMaybe we can create a list somewhere and then addressing these errors separately?', 'created_at': datetime.datetime(2024, 10, 11, 14, 1, 53, tzinfo=datetime.timezone.utc)}]","nemanjaglumac on (2024-10-11 14:01:53 UTC): Thank you much for doing this! @uladzimirdev 
Did you want to keep it within a certain scope or would you like to get rid of most (all) of the errors. Asking because I found more, but I am not sure do you want to keep iterating in this PR?

Maybe we can create a list somewhere and then addressing these errors separately?

"
2578736620,pull_request,closed,,Rename ResizeObserver variable to prevent global clash,"@npretto mentioned that we should rename the `ResizeObserver` const to something else, since there is the possibility that the const name could clash with the global of the same name.

Let's make sure that doesn't happen, we have better things to do.",oisincoveney,2024-10-10 12:42:05+00:00,['oisincoveney'],2024-10-11 14:10:53+00:00,2024-10-10 14:15:28+00:00,https://github.com/metabase/metabase/pull/48563,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2578719794,pull_request,closed,,fix(sdk): Attempt to fix resize observer issues (#48227),#48227,metabase-bot[bot],2024-10-10 12:35:18+00:00,['oisincoveney'],2024-10-11 07:36:46+00:00,2024-10-11 07:36:44+00:00,https://github.com/metabase/metabase/pull/48561,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2578717197,pull_request,closed,, Repro: App crashes when editing custom expression referencing metric when dependent metadata is not loaded,"Closes https://github.com/metabase/metabase/issues/47058

Adds a ""reproduction"" for #47058 which is now fixed because the notebook editor renders a loading indicator when the metadata has not been loaded yet, so the race condition no longer exists.

It's not a real reproduction since the issue no longer exists really, but it tests that the conditions for the issue no longer exist.

[Stress test](https://github.com/metabase/metabase/actions/runs/11288376305)",romeovs,2024-10-10 12:34:20+00:00,['romeovs'],2024-10-14 14:52:47+00:00,2024-10-11 10:22:57+00:00,https://github.com/metabase/metabase/pull/48560,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2578651087,pull_request,closed,,"🤖 backported ""Fix types on dashboard API, and add types for dashboard redux""",#48399,metabase-bot[bot],2024-10-10 12:04:17+00:00,['oisincoveney'],2024-10-10 13:09:02+00:00,2024-10-10 13:09:01+00:00,https://github.com/metabase/metabase/pull/48559,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2404911088, 'issue_id': 2578651087, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 158253cadb5008524ca175543081c93db7e8ca06...6959f3e969873d1d61c4435bb8916267e06857fa.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |', 'created_at': datetime.datetime(2024, 10, 10, 12, 5, 57, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-10 12:05:57 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 158253cadb5008524ca175543081c93db7e8ca06...6959f3e969873d1d61c4435bb8916267e06857fa.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |

"
2578603962,pull_request,closed,,upgrade rspack and swc,"### Description

upgrade swc and rspack to ~shave 1s from build at CI~ get some bug fixes  ",uladzimirdev,2024-10-10 11:45:34+00:00,['uladzimirdev'],2024-10-14 14:01:32+00:00,2024-10-11 14:13:31+00:00,https://github.com/metabase/metabase/pull/48558,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2578599977,pull_request,closed,,[WIP] Temporary PR just to run CI for #47219 fix attempt,"Temporary PR just to run CI

without https://github.com/metabase/metabase/pull/48289/commits/35b47a10f219caa126a0f25b2248dac3b1709d71",kamilmielnik,2024-10-10 11:44:08+00:00,['kamilmielnik'],2024-10-10 13:01:20+00:00,2024-10-10 13:01:16+00:00,https://github.com/metabase/metabase/pull/48557,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2405032493, 'issue_id': 2578599977, 'author': 'kamilmielnik', 'body': '1 more test suite is failing here', 'created_at': datetime.datetime(2024, 10, 10, 13, 1, 16, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-10-10 13:01:16 UTC): 1 more test suite is failing here

"
2578582315,pull_request,closed,,fix flakiness during resize,"`should` retries, `expect` doesn't retry and resizing is always flaky, so we have to retry

stress test https://github.com/metabase/metabase/actions/runs/11273383328/job/31350278141

it ran too many tests and failed because of that but all the tests we're interested in (1280*800, 2 high cells) passed

example of a failing job https://github.com/metabase/metabase/actions/runs/11272842062/job/31350486802",uladzimirdev,2024-10-10 11:37:28+00:00,['uladzimirdev'],2024-11-26 18:52:44+00:00,2024-10-10 16:15:47+00:00,https://github.com/metabase/metabase/pull/48556,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2578365435,pull_request,closed,,pr env repl test,"(ignore this pr, even if it's marked as not being a draft)",filipesilva,2024-10-10 10:25:34+00:00,['filipesilva'],2024-12-19 10:23:09+00:00,2024-10-10 15:46:03+00:00,https://github.com/metabase/metabase/pull/48554,"[('no-backport', 'Do not backport this PR to any branch'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2405416408, 'issue_id': 2578365435, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit e4835caad5a641c485809aa88974827d11853042.\n✅ Preview:\n    https://pr48554.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 10, 15, 18, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-10 15:18:54 UTC): 👋 Deploying a preview environment for commit e4835caad5a641c485809aa88974827d11853042.
✅ Preview:
    https://pr48554.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2577913021,pull_request,closed,,"🤖 backported ""don't set enable-embedding and setup-embedding-autoenabled in /setup""",#48517,github-automation-metabase,2024-10-10 07:30:39+00:00,"['npretto', 'github-automation-metabase']",2024-10-10 08:31:15+00:00,2024-10-10 08:31:14+00:00,https://github.com/metabase/metabase/pull/48552,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2404283102, 'issue_id': 2577913021, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2576cd7f5274f2148eda21b9a27adf9ae4582099...a216b5487bcce00da8fefb8d93fd5fe0aa9ad1c2.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 10, 7, 32, 7, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-10 07:32:07 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2576cd7f5274f2148eda21b9a27adf9ae4582099...a216b5487bcce00da8fefb8d93fd5fe0aa9ad1c2.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx |

"
2577300807,pull_request,closed,,[WIP] Offset aggregation picker changes,"Epic https://github.com/metabase/metabase/issues/48533
Closes https://github.com/metabase/metabase/issues/48534

Changes:
- The form works as described in the doc, with separate units for grouping & offset
- Aggregations that use offset are excluded

<img width=""1275"" alt=""Screenshot 2024-10-11 at 15 10 14"" src=""https://github.com/user-attachments/assets/6e4b775f-599f-4aea-997e-431bb7e5fc06"">
",ranquild,2024-10-10 01:39:50+00:00,['ranquild'],2024-10-15 22:32:31+00:00,2024-10-15 22:32:28+00:00,https://github.com/metabase/metabase/pull/48548,"[('do not merge', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2408012871, 'issue_id': 2577300807, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ba06b99e2c0b05569874bb0cccfb65615d92491f...053539b1b1a2270f88aeff3b1d788bb5c8a729ff.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx |', 'created_at': datetime.datetime(2024, 10, 11, 19, 32, 24, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414170831, 'issue_id': 2577300807, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 053539b1b1a2270f88aeff3b1d788bb5c8a729ff.\n✅ Preview:\n    https://pr48548.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 15, 14, 55, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-11 19:32:24 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff ba06b99e2c0b05569874bb0cccfb65615d92491f...053539b1b1a2270f88aeff3b1d788bb5c8a729ff.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx |

github-actions[bot] on (2024-10-15 14:55:54 UTC): 👋 Deploying a preview environment for commit 053539b1b1a2270f88aeff3b1d788bb5c8a729ff.
✅ Preview:
    https://pr48548.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2576977738,pull_request,closed,,Always startup prometheus metrics,"previously only started up when a port was provided

```
MB_PROMETHEUS_SERVER_PORT=9191 java -jar metabase.jar
```

But these counters are useful to be included in anonymous stats. So let's start up the collectors and then we can get their values like:

```clojure
prometheus=> (dotimes [_ 500] (inc :metabase-email/messages))
nil
;; prometheus/value is iapetos.core/value here
prometheus=> (-> system :registry :metabase-email/messages prometheus/value)
501.0
```
 and at startup

```
2024-10-09 20:49:35,543 INFO metabase.core :: Setting up prometheus metrics
2024-10-09 20:49:35,544 INFO analytics.prometheus :: Running prometheus metrics without a webserver.
2024-10-09 20:49:35,544 INFO analytics.prometheus :: Starting prometheus metrics collector
```",dpsutton,2024-10-09 21:20:32+00:00,['dpsutton'],2024-10-10 21:24:23+00:00,2024-10-10 20:39:42+00:00,https://github.com/metabase/metabase/pull/48547,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2405875446, 'issue_id': 2576977738, 'author': 'dpsutton', 'body': 'How to test new stuff you\'ve added\r\n\r\n```clojure\r\nprometheus=> (require \'iapetos.export)\r\nnil\r\nprometheus=> (let [registry (prometheus/collector-registry ""testing"")]\r\n               (prometheus/register registry (prometheus/counter :example/foo {:description ""demo for demoing purposes""}))\r\n               (dotimes [_ 500] (inc! :example/foo))\r\n               (spit ""metrics"" (iapetos.export/text-format registry)))\r\nnil\r\n```\r\n\r\nand then seeing `metrics` file:\r\n\r\n```\r\n# HELP example_foo_total demo for demoing purposes\r\n# TYPE example_foo_total counter\r\nexample_foo_total 0.0\r\n# HELP example_foo_created demo for demoing purposes\r\n# TYPE example_foo_created gauge\r\nexample_foo_created 1.728588259489E9\r\n```', 'created_at': datetime.datetime(2024, 10, 10, 19, 25, 14, tzinfo=datetime.timezone.utc)}]","dpsutton (Issue Creator) on (2024-10-10 19:25:14 UTC): How to test new stuff you've added

```clojure
prometheus=> (require 'iapetos.export)
nil
prometheus=> (let [registry (prometheus/collector-registry ""testing"")]
               (prometheus/register registry (prometheus/counter :example/foo {:description ""demo for demoing purposes""}))
               (dotimes [_ 500] (inc! :example/foo))
               (spit ""metrics"" (iapetos.export/text-format registry)))
nil
```

and then seeing `metrics` file:

```
# HELP example_foo_total demo for demoing purposes
# TYPE example_foo_total counter
example_foo_total 0.0
# HELP example_foo_created demo for demoing purposes
# TYPE example_foo_created gauge
example_foo_created 1.728588259489E9
```

"
2576972352,pull_request,closed,,"🤖 backported ""docs - add time grouping""",#47930,github-automation-metabase,2024-10-09 21:16:30+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-09 21:18:08+00:00,2024-10-09 21:18:07+00:00,https://github.com/metabase/metabase/pull/48546,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576956210,pull_request,closed,,"🤖 backported ""docs - snowflake connection update""",#47780,github-automation-metabase,2024-10-09 21:04:55+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-09 21:06:41+00:00,2024-10-09 21:06:40+00:00,https://github.com/metabase/metabase/pull/48545,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576902108,pull_request,closed,,48049 error diagnostic command palette,"Closes https://github.com/metabase/metabase/issues/48049 

### Description
Adds an option in the command palette to open the Error Diagnostic modal. This involved moving the state of the modal to redux.

### How to verify
1. Press `cmd+k` to open the command palette, and type `Error`
2. You should see the option `Open error diagnostic modal`. Select it
3. You should be presented with the diagnostic modal.
4. close the modal, and then press `cmd+f1` on OSX, or `ctrl+f1` on Windows. The modal should re-open

### Demo
![chrome_40ZWc8Taqw](https://github.com/user-attachments/assets/de846b51-8489-4ebd-9953-06b07ebc6c20)

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-09 20:35:21+00:00,['npfitz'],2024-10-10 20:43:37+00:00,2024-10-10 20:43:36+00:00,https://github.com/metabase/metabase/pull/48544,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2403403864, 'issue_id': 2576902108, 'author': 'sloansparger', 'body': ""approved, though would like to see some kind of comment around the `cy.wait` if it can't be removed or replaced with something else (e.g. wait on some network request)."", 'created_at': datetime.datetime(2024, 10, 9, 20, 49, 56, tzinfo=datetime.timezone.utc)}]","sloansparger on (2024-10-09 20:49:56 UTC): approved, though would like to see some kind of comment around the `cy.wait` if it can't be removed or replaced with something else (e.g. wait on some network request).

"
2576875008,pull_request,closed,,"🤖 backported ""docs - user provisioning with SCIM""",#48411,github-automation-metabase,2024-10-09 20:20:48+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-09 20:24:25+00:00,2024-10-09 20:24:24+00:00,https://github.com/metabase/metabase/pull/48542,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576815951,pull_request,closed,,fix(sdk): fix findDOMNode console errors in ExplicitSize component,"Closes https://github.com/metabase/metabase/issues/48498

### Description

React throws the `findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference` in the Embedding SDK's npm package. The ExplicitSize component has multiple usages that caused huge log spams, e.g. DashboardGrid, Visualization),RowChartRendererInner.

This PR replaces `findDOMNode` with `forwardedRef.current`.

### How to verify

Tests should pass, and ExplicitSize should continue to work as normal.

### Demo

Before - 15 console errors about ""findDOMNode"" when embedding a dashboard

![CleanShot 2567-10-10 at 02 57 52@2x](https://github.com/user-attachments/assets/accc8c70-37c9-4a74-b0ba-fb6d04d0ada4)
",heypoom,2024-10-09 19:47:30+00:00,['heypoom'],2025-01-15 05:41:16+00:00,2025-01-15 05:41:16+00:00,https://github.com/metabase/metabase/pull/48541,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2576796378,pull_request,closed,,"🤖 backported ""docs: add a clarification about disabling password logins""",#48532,metabase-bot[bot],2024-10-09 19:38:13+00:00,['alexyarosh'],2024-10-09 19:39:55+00:00,2024-10-09 19:39:54+00:00,https://github.com/metabase/metabase/pull/48540,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576790871,pull_request,closed,,"🤖 backported ""Do not ignore-errors in pprint-native-query-with-best-strategy""",#48246,github-automation-metabase,2024-10-09 19:35:03+00:00,"['appleby', 'github-automation-metabase']",2024-10-09 20:18:21+00:00,2024-10-09 20:18:20+00:00,https://github.com/metabase/metabase/pull/48539,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576790378,pull_request,closed,,"🤖 backported ""Add some more examples to db querying docstrings in dev.clj""",#48248,github-automation-metabase,2024-10-09 19:34:43+00:00,"['appleby', 'github-automation-metabase']",2024-10-09 20:59:19+00:00,2024-10-09 20:59:18+00:00,https://github.com/metabase/metabase/pull/48538,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576787222,pull_request,closed,,"🤖 backported ""Remove duplicate is-clause? fn""",#48423,github-automation-metabase,2024-10-09 19:32:44+00:00,"['appleby', 'github-automation-metabase']",2024-10-09 21:21:29+00:00,2024-10-09 21:21:28+00:00,https://github.com/metabase/metabase/pull/48537,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576761079,pull_request,closed,,"🤖 backported ""docs: add a clarification about disabling password logins""",#48532,github-automation-metabase,2024-10-09 19:19:17+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-09 19:21:18+00:00,2024-10-09 19:21:17+00:00,https://github.com/metabase/metabase/pull/48536,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576752791,pull_request,closed,,Update SDK version to 0.1.38,Update Readme version references and published npm package version to 0.1.38,github-automation-metabase,2024-10-09 19:15:46+00:00,"['heypoom', 'github-automation-metabase']",2024-11-26 18:52:47+00:00,2024-10-09 19:20:25+00:00,https://github.com/metabase/metabase/pull/48535,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2403243185, 'issue_id': 2576752791, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 9, 19, 16, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 19:16:11 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2576700900,pull_request,closed,,docs: add a clarification about disabling password logins,using phrasing suggested in [this thread](https://metaboat.slack.com/archives/C013N8XL286/p1728423886248479),alexyarosh,2024-10-09 18:55:34+00:00,['alexyarosh'],2024-10-09 19:40:22+00:00,2024-10-09 19:18:24+00:00,https://github.com/metabase/metabase/pull/48532,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2403264572, 'issue_id': 2576700900, 'author': 'alexyarosh', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 9, 19, 21, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2403266444, 'issue_id': 2576700900, 'author': 'github-actions[bot]', 'body': '@alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11261663661)', 'created_at': datetime.datetime(2024, 10, 9, 19, 22, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2403278529, 'issue_id': 2576700900, 'author': 'github-actions[bot]', 'body': '@alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11261663661)', 'created_at': datetime.datetime(2024, 10, 9, 19, 30, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2403290023, 'issue_id': 2576700900, 'author': 'alexyarosh', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 9, 19, 37, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2403294638, 'issue_id': 2576700900, 'author': 'github-actions[bot]', 'body': '🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)', 'created_at': datetime.datetime(2024, 10, 9, 19, 40, 20, tzinfo=datetime.timezone.utc)}]","alexyarosh (Issue Creator) on (2024-10-09 19:21:45 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-09 19:22:53 UTC): @alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11261663661)

github-actions[bot] on (2024-10-09 19:30:08 UTC): @alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11261663661)

alexyarosh (Issue Creator) on (2024-10-09 19:37:15 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-09 19:40:20 UTC): 🚀 This should also be released by [v0.51](https://github.com/metabase/metabase/milestone/231)

"
2576680597,pull_request,closed,,Select all changes for dashboards,"Epic https://github.com/metabase/metabase/issues/48394
Closes https://github.com/metabase/metabase/issues/48408

Changes:
- Normal text weight for the checkbox label
- `Select these` instead of `Select none` when there is active search

<img width=""633"" alt=""Screenshot 2024-10-09 at 14 46 26"" src=""https://github.com/user-attachments/assets/8ce11358-59a1-4222-af5c-956b552910d3"">
<img width=""571"" alt=""Screenshot 2024-10-09 at 14 46 32"" src=""https://github.com/user-attachments/assets/a5ab1d48-6c1c-4511-8d56-276951a291af"">
<img width=""622"" alt=""Screenshot 2024-10-09 at 14 46 36"" src=""https://github.com/user-attachments/assets/7d3d4f68-431e-4c2c-ade8-e2b6207179de"">
",ranquild,2024-10-09 18:48:00+00:00,['ranquild'],2024-10-10 19:17:23+00:00,2024-10-10 19:17:22+00:00,https://github.com/metabase/metabase/pull/48531,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', ''), ('loki-update', '')]",[],
2576563429,pull_request,closed,,docs - embedded analytics sdk,"- Mention of SDK, link to existing docs.
- Updates static embedding parameters (downloads, background).
- Updates screenshots to reflect UI updates.
- Some peripheral cleanup.
- Adds quickstart with sample application.",jeff-bruemmer,2024-10-09 17:49:36+00:00,['jeff-bruemmer'],2024-10-24 17:02:26+00:00,2024-10-24 16:59:32+00:00,https://github.com/metabase/metabase/pull/48530,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2426635237, 'issue_id': 2576563429, 'author': 'jeff-bruemmer', 'body': ""> I left a few comments for what stood out the most. In addition, I am surprised we go with JWT and Pro for the Quickstart. This makes it less accessible for people to start with the SDK.\r\n> \r\n> We made it possible to use the SDK with API keys so anyone could try it out w/o having to get a license, an EE binary or have to implement JWT. I think having both makes sense. Or having API keys be the starting point and then JWT be the next, more advanced step.\r\n\r\nMentioned on Slack, but commenting here for posterity; I haven't really started documenting the SDK yet; this is essentially a port of the existing docs. And there are some key pieces still in flux (e.g., ModifyQuestion) to handle.\r\n\r\nI did the JWT quick start to take advantage of the sample app, and the setup is actually pretty easy, but we'll do an API keys quickstart too so people can try without a license. As we discussed a while back, we may want to pluck out that JWT setup later on so that it can be used in both interactive and SDK quickstarts, but I don't want to start optimizing until we have everything documented first."", 'created_at': datetime.datetime(2024, 10, 21, 13, 9, 28, tzinfo=datetime.timezone.utc)}]","jeff-bruemmer (Issue Creator) on (2024-10-21 13:09:28 UTC): Mentioned on Slack, but commenting here for posterity; I haven't really started documenting the SDK yet; this is essentially a port of the existing docs. And there are some key pieces still in flux (e.g., ModifyQuestion) to handle.

I did the JWT quick start to take advantage of the sample app, and the setup is actually pretty easy, but we'll do an API keys quickstart too so people can try without a license. As we discussed a while back, we may want to pluck out that JWT setup later on so that it can be used in both interactive and SDK quickstarts, but I don't want to start optimizing until we have everything documented first.

"
2576523463,pull_request,closed,,"🤖 backported ""[MS2] Better Onboarding UX: Expanded CSV upload permissions""",#48475,github-automation-metabase,2024-10-09 17:30:38+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-10-09 18:14:45+00:00,2024-10-09 18:14:44+00:00,https://github.com/metabase/metabase/pull/48529,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576392084,pull_request,closed,,"🤖 backported ""fix(sdk): allow checking React version without npm install and allow continuing setup if React is not found""",#48491,github-automation-metabase,2024-10-09 16:21:54+00:00,"['heypoom', 'github-automation-metabase']",2024-10-11 20:42:36+00:00,2024-10-11 20:42:35+00:00,https://github.com/metabase/metabase/pull/48528,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576342518,pull_request,open,,visualizer feature branch,"Closes https://github.com/metabase/metabase/issues/48280

### Description

Visualizer feature branch
",alxnddr,2024-10-09 15:57:44+00:00,"['alxnddr', 'kulyk']",2025-01-27 15:15:47+00:00,,https://github.com/metabase/metabase/pull/48527,"[('.Team/DashViz', 'Dashboard and Viz team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2466465369, 'issue_id': 2576342518, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/104262_tests-25f596c7-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/122-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/3-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>scenarios > visualizations > trend chart (SmartScalar) should gracefully handle errors (metabase\\#42948)</code> | The expected element \\`.Icon-warning\\` was not found within 4000ms. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=b8ff1e9e-78bb-5f8f-91c7-5b616b97de90) |\n| <code>scenarios > visualizations > trend chart (SmartScalar) should allow data settings to be changed and display should reflect changes</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=a55f987b-e438-54d1-8605-0c2f58a16cc6) |\n| <code>scenarios > visualizations > trend chart (SmartScalar) should handle up to 3 comparisons</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=6c4969a3-8105-5465-abba-f841e4e48795) |\n| <code>scenarios > visualizations > trend chart (SmartScalar) should reset \'another column\' comparison when it becomes invalid</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=e2b38bb9-1e2e-585d-ba86-f2830397258d) |\n\n[... and 118 more](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE)\n\n\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>issue 16559 should always show the most recent revision (metabase\\#16559)</code> | The test timed out while trying to find an element with data-testid ""sidesheet"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=0f7da8db-bde8-54d0-a460-415f42536db3) |\n| <code>e2e-storage-ingestion-test</code> | The expected and actual values do not match for the \'timeline\' entity. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=b33376ef-cd3d-5f6b-8f33-4a02a13da9a3) |\n| <code>bin-width-float-test</code> | The query result set was closed unexpectedly, preventing further processing. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=7cf79073-5d3f-5f7f-927a-0ee62d7065d8) |\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 9, 21, 29, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615837022, 'issue_id': 2576342518, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 25f596c73d4160f1add2c89a5e2db34a0d857c9f.\n✅ Preview:\n    https://pr48527.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2025, 1, 27, 13, 58, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2615841925, 'issue_id': 2576342518, 'author': 'github-actions[bot]', 'body': '## e2e tests failed on `25f596c73d4160f1add2c89a5e2db34a0d857c9f-1`\n\n  [e2e test run](https://github.com/metabase/metabase/actions/runs/12990454360?pr=48527)\n\n  File | Test Name\n  ---- | ---------\n  `smartscalar-trend.cy.spec.js` | scenarios > visualizations > trend chart (SmartScalar) > should gracefully handle errors (metabase#42948)', 'created_at': datetime.datetime(2025, 1, 27, 14, 0, 51, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2024-11-09 21:29:32 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/104262_tests-25f596c7-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/122-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/3-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>scenarios > visualizations > trend chart (SmartScalar) should gracefully handle errors (metabase\#42948)</code> | The expected element \`.Icon-warning\` was not found within 4000ms. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=b8ff1e9e-78bb-5f8f-91c7-5b616b97de90) |
| <code>scenarios > visualizations > trend chart (SmartScalar) should allow data settings to be changed and display should reflect changes</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=a55f987b-e438-54d1-8605-0c2f58a16cc6) |
| <code>scenarios > visualizations > trend chart (SmartScalar) should handle up to 3 comparisons</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=6c4969a3-8105-5465-abba-f841e4e48795) |
| <code>scenarios > visualizations > trend chart (SmartScalar) should reset 'another column' comparison when it becomes invalid</code> | The test timed out while trying to find an element with the text ""vs. previous month"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=e2b38bb9-1e2e-585d-ba86-f2830397258d) |

[... and 118 more](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE)


| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>issue 16559 should always show the most recent revision (metabase\#16559)</code> | The test timed out while trying to find an element with data-testid ""sidesheet"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=0f7da8db-bde8-54d0-a460-415f42536db3) |
| <code>e2e-storage-ingestion-test</code> | The expected and actual values do not match for the 'timeline' entity. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=b33376ef-cd3d-5f6b-8f33-4a02a13da9a3) |
| <code>bin-width-float-test</code> | The query result set was closed unexpectedly, preventing further processing. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment&runConclusion=FAILURE&runId=7cf79073-5d3f-5f7f-927a-0ee62d7065d8) |
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48527?repo=metabase/metabase&commitHash=25f596c73d4160f1add2c89a5e2db34a0d857c9f&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

github-actions[bot] on (2025-01-27 13:58:59 UTC): 👋 Deploying a preview environment for commit 25f596c73d4160f1add2c89a5e2db34a0d857c9f.
✅ Preview:
    https://pr48527.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

github-actions[bot] on (2025-01-27 14:00:51 UTC): ## e2e tests failed on `25f596c73d4160f1add2c89a5e2db34a0d857c9f-1`

  [e2e test run](https://github.com/metabase/metabase/actions/runs/12990454360?pr=48527)

  File | Test Name
  ---- | ---------
  `smartscalar-trend.cy.spec.js` | scenarios > visualizations > trend chart (SmartScalar) > should gracefully handle errors (metabase#42948)

"
2576231828,pull_request,closed,,"Point to a solution when the ""Unknown premium setting xxx"" is shown during tests","# Demo
<img width=""1249"" alt=""image"" src=""https://github.com/user-attachments/assets/334f01a4-e6a3-4130-958c-ee8d8dbaa21d"">

This warning easily fills the entire terminal when running jest tests, at the same time I only found out what the cause was after months of being here, I wouldn't be surprise if a lot of people don't know they're supposed to use `mockSettings`

This PR adds a suggestion when the warning shows up during tests, guiding the developer make the right thing",npretto,2024-10-09 15:14:34+00:00,['npretto'],2024-11-26 18:52:45+00:00,2024-10-10 07:29:37+00:00,https://github.com/metabase/metabase/pull/48526,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2576139901,pull_request,closed,,"🤖 backported ""docs - update api and env var docs""",#48414,github-automation-metabase,2024-10-09 14:39:54+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-09 15:23:03+00:00,2024-10-09 15:23:01+00:00,https://github.com/metabase/metabase/pull/48525,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2576089021,pull_request,closed,,"🤖 backported ""Remove source hacks for native query drills""",#48482,github-automation-metabase,2024-10-09 14:20:55+00:00,"['ranquild', 'github-automation-metabase']",2024-10-09 15:26:10+00:00,2024-10-09 15:26:09+00:00,https://github.com/metabase/metabase/pull/48523,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2575942831,pull_request,closed,,[serdes] check full export for escaping cards,"Fixes #47991 

Combines two paths of serialization we had before (`extract-metabase` and `extract-subtrees`) into a single one, so that `escape-analysis` is always checked. Also contains rewrite of `escape-analysis` to reduce the number of queries in an attempt to lessen the slowdown of full export.

@bshepherdson asking for your review just because my serialization-reviewing teammate is ooo for 1.5 weeks :)

----

*Timings for the full export*

On my laptop for stats db after a few runs
Old way: 256s
New way: 278s

This is a 9% slowdown, which I think is acceptable to make it more correct. It's not very scientific though as it fluctuates from 200 to 250s. 🤯 Also partial exports are a bit faster, since those had escape analysis anyways and now it makes less requests to the database.",piranha,2024-10-09 13:27:42+00:00,['piranha'],2024-10-17 13:26:51+00:00,2024-10-17 13:26:50+00:00,https://github.com/metabase/metabase/pull/48521,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2404541516, 'issue_id': 2575942831, 'author': 'qnkhuat', 'body': 'oh, how about we add `:skip-escape-analysis` option?', 'created_at': datetime.datetime(2024, 10, 10, 9, 11, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404735655, 'issue_id': 2575942831, 'author': 'piranha', 'body': 'Oh, nice idea.', 'created_at': datetime.datetime(2024, 10, 10, 10, 40, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404748572, 'issue_id': 2575942831, 'author': 'piranha', 'body': ""Ah, nope, other way around. Escape analysis phase takes 1-2 seconds of the whole time, most of the time added is spent running ascendants/descendants, and obviously in that code there is no good way around it (unless we have a separate path like before, but I'd love to not have it)."", 'created_at': datetime.datetime(2024, 10, 10, 10, 47, 33, tzinfo=datetime.timezone.utc)}]","qnkhuat on (2024-10-10 09:11:57 UTC): oh, how about we add `:skip-escape-analysis` option?

piranha (Issue Creator) on (2024-10-10 10:40:54 UTC): Oh, nice idea.

piranha (Issue Creator) on (2024-10-10 10:47:33 UTC): Ah, nope, other way around. Escape analysis phase takes 1-2 seconds of the whole time, most of the time added is spent running ascendants/descendants, and obviously in that code there is no good way around it (unless we have a separate path like before, but I'd love to not have it).

"
2575932003,pull_request,closed,,"🤖 backported ""Ensure that features in stats ping can only be enabled if available""",#48493,github-automation-metabase,2024-10-09 13:23:50+00:00,"['noahmoss', 'github-automation-metabase']",2024-10-09 14:09:53+00:00,2024-10-09 14:09:52+00:00,https://github.com/metabase/metabase/pull/48520,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2575844729,pull_request,closed,,Fix a broken link,"Context: https://metaboat.slack.com/archives/C5XHN8GLW/p1728477835087219

Example of a failure: https://github.com/metabase/metabase/actions/runs/11254932253/job/31293394758?pr=48475#step:4:823",nemanjaglumac,2024-10-09 12:51:17+00:00,['nemanjaglumac'],2024-10-09 13:05:08+00:00,2024-10-09 13:05:05+00:00,https://github.com/metabase/metabase/pull/48518,"[('Type:Documentation', ''), ('.CI & Tests', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2402281659, 'issue_id': 2575844729, 'author': 'nemanjaglumac', 'body': ""This wasn't about a broken link, after all.\r\n`429` - too many requests.\r\n\r\nNothing that this PR can fix now."", 'created_at': datetime.datetime(2024, 10, 9, 13, 5, 5, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Issue Creator) on (2024-10-09 13:05:05 UTC): This wasn't about a broken link, after all.
`429` - too many requests.

Nothing that this PR can fix now.

"
2575706542,pull_request,closed,,don't set enable-embedding and setup-embedding-autoenabled in /setup,"
Follow up after  [update embedding homepage now that we don't auto-enable embedding](https://github.com/metabase/metabase/pull/48455)

# Changes
- don't set ""enable-embedding"" and ""setup-embedding-autoenabled"" to true anymore in /setup
- remove ""setup-embedding-autoenabled"" from the FE settings types
- updated tests accordingly",npretto,2024-10-09 11:52:55+00:00,['npretto'],2024-10-10 08:31:42+00:00,2024-10-10 07:29:49+00:00,https://github.com/metabase/metabase/pull/48517,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2402112630, 'issue_id': 2575706542, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b28389c800b37725dfb6265ce60b1678b8bf692...650436732976c687761f1ee243be07d0ed5d3aaf.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 9, 11, 54, 24, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 11:54:24 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1b28389c800b37725dfb6265ce60b1678b8bf692...650436732976c687761f1ee243be07d0ed5d3aaf.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx |

"
2575684959,pull_request,closed,,Manual backport - [Epic] Search in selection in entity picker (#47755),"Manual backport of #47755 (epic: #47281)

I had to remove stuff related to Metrics v2 which we roll out in v51.

----

:heavy_check_mark: ~TODO: when this is merged, update milestone to 0.50.29 in #47281 & #47182~",kamilmielnik,2024-10-09 11:44:35+00:00,['kamilmielnik'],2024-10-10 07:28:23+00:00,2024-10-10 07:21:00+00:00,https://github.com/metabase/metabase/pull/48516,"[('.Team/Querying', ''), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2575157764,pull_request,closed,,Use rtk hooks for public questions,"Removes the actions for `CREATE_PUBLIC_LINK` and `DELETE_PUBLIC_LINK`, and modifies the RTK endpoints to include IDs. Then, I've removed the intermediate actions and use the RTK query hooks directly in the redux actions with matchers.",oisincoveney,2024-10-09 08:11:47+00:00,['oisincoveney'],2024-10-10 09:25:13+00:00,2024-10-10 09:25:12+00:00,https://github.com/metabase/metabase/pull/48514,"[('.Team/Embedding', '')]","[{'comment_id': 2401717228, 'issue_id': 2575157764, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a44b4783d6dbb3b98b09496332d41d97d407ed12...09b52629bdcee23714a37942323b44c1888fa1d1.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |', 'created_at': datetime.datetime(2024, 10, 9, 8, 46, 20, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 08:46:20 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a44b4783d6dbb3b98b09496332d41d97d407ed12...09b52629bdcee23714a37942323b44c1888fa1d1.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |

"
2575156200,pull_request,closed,,Use rtk hooks for public dashboards,"Removes the actions for `CREATE_PUBLIC_LINK` and `DELETE_PUBLIC_LINK`, and modifies the RTK endpoints to include IDs. Then, I've removed the intermediate actions and use the RTK query hooks directly in the redux actions with matchers.",oisincoveney,2024-10-09 08:11:02+00:00,['oisincoveney'],2024-10-10 08:43:37+00:00,2024-10-10 08:43:35+00:00,https://github.com/metabase/metabase/pull/48513,[],"[{'comment_id': 2401726702, 'issue_id': 2575156200, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 50915be7191d0534251a0c318bd319236845cf8f...a44b4783d6dbb3b98b09496332d41d97d407ed12.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx |', 'created_at': datetime.datetime(2024, 10, 9, 8, 50, 40, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 08:50:40 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 50915be7191d0534251a0c318bd319236845cf8f...a44b4783d6dbb3b98b09496332d41d97d407ed12.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx |

"
2574953518,pull_request,closed,,Update contributing.md,"
### Description

Replaced all mentions of a stale/empty label (""Help Wanted"") with the correct one (""good first issue"").  Confirmed by Vamsi as desired behavior.  @perivamsi 

### How to verify

n/a

### Demo

n/a

### Checklist

n/a",aaronfi,2024-10-09 06:51:00+00:00,[],2024-10-17 02:50:02+00:00,2024-10-17 02:50:02+00:00,https://github.com/metabase/metabase/pull/48510,[],[],
2574598017,pull_request,closed,,"🤖 backported ""Ensure we realize row before putting it on queue""",#48446,github-automation-metabase,2024-10-09 02:51:58+00:00,"['crisptrutski', 'github-automation-metabase']",2024-10-10 17:28:11+00:00,2024-10-10 17:28:10+00:00,https://github.com/metabase/metabase/pull/48509,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2574457640,pull_request,closed,,Add v0.51.0-beta to the list of releases,Like it says on the tin 😁,github-automation-metabase,2024-10-09 00:15:05+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-10-09 14:12:15+00:00,2024-10-09 14:12:15+00:00,https://github.com/metabase/metabase/pull/48508,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2574391587,pull_request,closed,,Relax concat args to allow any ExpressionArg,"Closes #39439

### Description

Relax the arg types to `ExpressionArg` for `:concat` expressions since many DBs allow to concatenate non-string types. This also aligns with the corresponding MLv2 schema and with the [reference docs](https://www.metabase.com/docs/latest/questions/query-builder/expressions/concat.html#accepted-data-types).

MLv2 schema:
```clojure
(mbql-clause/define-catn-mbql-clause :concat :- :type/Text
  [:args [:repeat {:min 2} [:schema [:ref ::expression/expression]]]])
```

### How to verify

Follow repro steps in linked issue, or see tests added.

### Demo

<img width=""542"" alt=""Screenshot 2024-10-08 at 4 03 49 PM"" src=""https://github.com/user-attachments/assets/ecc126e5-4a62-4cd3-b930-724fcd23f540"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-08 23:13:13+00:00,['appleby'],2024-10-10 23:52:45+00:00,2024-10-10 23:52:43+00:00,https://github.com/metabase/metabase/pull/48506,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2574337278,pull_request,closed,,"🤖 backported ""Remove ""Draw box to filter"" from grid maps for native queries""",#48463,github-automation-metabase,2024-10-08 22:32:16+00:00,"['ranquild', 'github-automation-metabase']",2024-10-09 19:52:53+00:00,2024-10-09 19:52:52+00:00,https://github.com/metabase/metabase/pull/48505,"[('was-backported', 'apply this to PRs that are themselves backports'), ('loki-update', '')]","[{'comment_id': 2400934719, 'issue_id': 2574337278, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d35eee97f632d87a1e3e9fc8adebd1769a605981...edf33a23da3cc947b852958dfbe4c206349412cf.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/components/PinMap.jsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |', 'created_at': datetime.datetime(2024, 10, 8, 22, 33, 59, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 22:33:59 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d35eee97f632d87a1e3e9fc8adebd1769a605981...edf33a23da3cc947b852958dfbe4c206349412cf.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/components/PinMap.jsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |

"
2574283907,pull_request,closed,,"🤖 backported ""add iframe dashcards tracking""",#48382,github-automation-metabase,2024-10-08 21:49:01+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-09 00:08:47+00:00,2024-10-09 00:08:46+00:00,https://github.com/metabase/metabase/pull/48504,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2400884104, 'issue_id': 2574283907, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f69afc29fa1b3e34d5bc33689634ad60b4cac9a3...d005da9d49288fbf623335fcd4dee35be2b2d124.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |', 'created_at': datetime.datetime(2024, 10, 8, 21, 50, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 21:50:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f69afc29fa1b3e34d5bc33689634ad60b4cac9a3...d005da9d49288fbf623335fcd4dee35be2b2d124.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.ts<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/utils.unit.spec.ts |

"
2574271874,pull_request,closed,,Add e2e tests for native query drills,"Epic https://github.com/metabase/metabase/issues/48466
Testing plan https://github.com/metabase/metabase/issues/48469",ranquild,2024-10-08 21:42:15+00:00,['ranquild'],2024-10-12 11:53:46+00:00,2024-10-12 02:46:27+00:00,https://github.com/metabase/metabase/pull/48503,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2404316531, 'issue_id': 2574271874, 'author': 'kamilmielnik', 'body': ""> Also we have this [PR in progress](https://github.com/metabase/metabase/pull/48289) from @kamilmielnik , I expect some overlap as well\r\n\r\nThe PR I'm working on tests drilling via dashcard headers on non-native queries, I don't think there's any overlap."", 'created_at': datetime.datetime(2024, 10, 10, 7, 40, 15, tzinfo=datetime.timezone.utc)}]","kamilmielnik on (2024-10-10 07:40:15 UTC): The PR I'm working on tests drilling via dashcard headers on non-native queries, I don't think there's any overlap.

"
2574253279,pull_request,closed,,Ensure the temp directory exists (#48488),"manual backport of https://github.com/metabase/metabase/pull/48488
backport to 51 is https://github.com/metabase/metabase/pull/48501
https://github.com/metabase/metabase/issues/41919#issuecomment-2400542908

This issue goes away in 5.3.1 of apache poi. Seems like they have a yearly release cadence so we can ensure this exists for the time being and then remove this when we can bump to 5.3.1

```diff
index b763a1ffdf..c87992c935 100644
--- a/deps.edn
+++ b/deps.edn
@@ -122,7 +122,7 @@
   {:mvn/version ""2.23.1""}             ; allows the slf4j2 API to work with log4j 2
   org.apache.logging.log4j/log4j-layout-template-json
   {:mvn/version ""2.23.1""}             ; allows the custom json logging format
-  org.apache.poi/poi                        {:mvn/version ""5.2.5""}              ; Work with Office documents (e.g. Excel spreadsheets) -- newer version than one specified by Docjure
+  org.apache.poi/poi                        {:mvn/version ""5.3.1""}              ; Work with Office documents (e.g. Excel spreadsheets) -- newer version than one specified by Docjure
   org.apache.poi/poi-ooxml                  {:mvn/version ""5.2.5""
                                              :exclusions  [org.bouncycastle/bcpkix-jdk15on
                                                            org.bouncycastle/bcprov-jdk15on]}
```
",dpsutton,2024-10-08 21:31:20+00:00,['dpsutton'],2024-10-08 23:11:22+00:00,2024-10-08 23:10:52+00:00,https://github.com/metabase/metabase/pull/48502,[],[],
2574230265,pull_request,closed,,"🤖 backported ""Ensure the temp directory exists""",#48488,github-automation-metabase,2024-10-08 21:18:25+00:00,"['dpsutton', 'github-automation-metabase']",2024-10-08 22:22:38+00:00,2024-10-08 22:22:37+00:00,https://github.com/metabase/metabase/pull/48501,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2574146004,pull_request,closed,,"🤖 backported ""isomorphic viz settings computation""",#47963,github-automation-metabase,2024-10-08 20:30:11+00:00,"['alxnddr', 'github-automation-metabase']",2024-10-08 21:40:11+00:00,2024-10-08 21:40:11+00:00,https://github.com/metabase/metabase/pull/48494,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2400766328, 'issue_id': 2574146004, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 449a7e6977ce2381801ba35c1374c40f0ab98dc4...4ee4275d3a581bd4f1b66df697687cae126d8173.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/format.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/hooks/use-browser-rendering-context.ts<br>frontend/src/metabase/visualizations/index.ts<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/Funnel/funnel-bar-transform.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.js |', 'created_at': datetime.datetime(2024, 10, 8, 20, 31, 42, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 20:31:42 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 449a7e6977ce2381801ba35c1374c40f0ab98dc4...4ee4275d3a581bd4f1b66df697687cae126d8173.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/format.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/hooks/use-browser-rendering-context.ts<br>frontend/src/metabase/visualizations/index.ts<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/Funnel/funnel-bar-transform.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.js |

"
2574142164,pull_request,closed,,Ensure that features in stats ping can only be enabled if available,"Context: https://metaboat.slack.com/archives/C064EB1UE5P/p1728377049645549

* Adds a post-processing step to ensure that we only report a feature in the stats ping as `enabled` if it is also `available`
* Adds a test to verify this
* Fixes the `available`/`enabled` values for some features ",noahmoss,2024-10-08 20:27:57+00:00,['noahmoss'],2024-10-09 14:10:26+00:00,2024-10-09 13:23:00+00:00,https://github.com/metabase/metabase/pull/48493,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2400760693, 'issue_id': 2574142164, 'author': 'noahmoss', 'body': '* **#48493** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48493?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 20, 28, 12, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-10-08 20:28:12 UTC): * **#48493** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48493?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2574130986,pull_request,closed,,"🤖 backported ""Update Settings Copy to kick Ci + fix milestone setting bug""",#48486,github-automation-metabase,2024-10-08 20:23:38+00:00,"['iethree', 'github-automation-metabase']",2024-10-08 23:05:11+00:00,2024-10-08 23:05:10+00:00,https://github.com/metabase/metabase/pull/48492,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2574106285,pull_request,closed,,fix(sdk): allow checking React version without npm install and allow continuing setup if React is not found,"### Description

The CLI used to abort when we didn't install the node modules via `npm install` or `yarn install`, as we only check in `node_modules/react/package.json` whether React is present. In addition, we force to CLI setup to quit as opposed to just showing a warning message, so they can continue at their own risk.

This PR adds two things:

- Make version check more reliable, by checking both the project's `package.json` file AND the underlying `node_modules/react/package.json` file. This handles both edge cases: for when the `node_modules` is not installed, and allows us to determine the **exact** version of React to show to the user, instead of a SemVer range.
- Allows setup to continue even if React is not present, or has an incompatible version. It shows a warning message, and allows you to continue.
 
### How to verify

- Run `docker rm -f metabase-enterprise-embedding && yarn add file:../metabase/resources/embedding-sdk` in your project first to link the SDK. This is important to do first, so we don't accidentally install `react` or `react-dom` again.
- Next, remove `react` and `react-dom` from both the project's `package.json` and remove `node_modules/react` and `node_modules/react-dom` and run the CLI. You should get a similar result to below screenshot.
- Next, try adding the `react` and `react-dom` to your `package.json`, but do not run `yarn install`. (Or, you could delete `node_modules/react` as well.)
- Now, you should see a SemVer range (e.g. `^18.1.x`) from package.json instead of the exact version.
- Next, try running `yarn install` as usual.
- Now you should see the exact version for both React and SDK.

### Demo

When ""react"" and/or ""react-dom"" is NOT present in both `package.json` and `node_modules/react/package.json`, you are hit with a warning prompt, but you can continue setup by selecting ""Continus""

![CleanShot 2567-10-09 at 03 19 53@2x](https://github.com/user-attachments/assets/6b06a35e-92b7-4ae6-9a38-b46cb0a1c5b4)

An exact version is shown once you `yarn install`

![CleanShot 2567-10-09 at 03 29 45@2x](https://github.com/user-attachments/assets/cbb673f8-b5a1-4236-9cd2-029dad61f6c8)
",heypoom,2024-10-08 20:07:55+00:00,['heypoom'],2024-10-11 20:43:12+00:00,2024-10-09 16:21:06+00:00,https://github.com/metabase/metabase/pull/48491,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2574059335,pull_request,closed,,"🍒 [MS1, MS2] Better Onboarding: ""Add Data"" Section in the Main Sidebar (#48369)","Manual backport of 
- #48369 and
- #48475
to the `release-x.50.x` branch.

It wasn't a really clean cherry-pick. I had to resolve conflicts manually.

---

**This concludes the new ""Add data"" section in the main sidebar!**",nemanjaglumac,2024-10-08 19:42:17+00:00,['nemanjaglumac'],2024-10-10 18:52:57+00:00,2024-10-10 12:06:54+00:00,https://github.com/metabase/metabase/pull/48490,"[('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2400686003, 'issue_id': 2574059335, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1547bb3b37f5a56cced5aeaf41f4f7a54a88463b...3a439b4e2d83cbf5f38ed856f5077791e9b87afc.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |', 'created_at': datetime.datetime(2024, 10, 8, 19, 43, 49, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 19:43:49 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1547bb3b37f5a56cced5aeaf41f4f7a54a88463b...3a439b4e2d83cbf5f38ed856f5077791e9b87afc.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |

"
2574046352,pull_request,closed,,🏎️ SHAVE 16 MINUTES OFF OF MYSQL TESTS IN CI 🏎️ ,"Follow on to #48422

The results of #48422 weren't as dramatic as I hoped (~5 minutes), since most of the really slow tests ended up in the first partition. Split MySQL tests into 4 partitions instead of 2 so we can get a real dramatic speedup. Split is still pretty uneven but the work it would take to make this more even is not really worth it at this point in time, and we still get a nice 16 minute speedup which is still a win in my book

### `be-tests-mysql-latest-ee` last week (before #48422):

1. ~51 minute job

### Before this PR: 

1. ~45 minute job
2. ~15 minute job

### Before this PR:

1. ~28 minute job
3. ~29 minute job
4. ~ 10 minute job
5. ~ 11 minute job",camsaul,2024-10-08 19:35:56+00:00,['camsaul'],2024-11-26 18:52:42+00:00,2024-10-14 07:50:30+00:00,https://github.com/metabase/metabase/pull/48489,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2573958188,pull_request,closed,,Ensure the temp directory exists,"Fixes #41919

tl;dr: apache poi keeps some scratch documents on disk to make workbooks. It keeps them (tidily) in a directory at `<tempfile-location>/poifiles`. But if that temp file goes away it isn't smart enough to ensure it does exist. 

This has been fixed in their repo but not yet released. It will be in 5.3.1 when it comes out. They have ~ a yearly cadence of releases so might be a while. Let's ensure the file exists. The test can stay when we bump to 5.3.1 and we can remove our check to ensure the directory exists.

https://github.com/metabase/metabase/issues/41919#issuecomment-2400542908

This issue goes away in 5.3.1 of apache poi. Seems like they have a yearly release cadence so we can ensure this exists for the time being and then remove this when we can bump to 5.3.1

```diff
index b763a1ffdf..c87992c935 100644
--- a/deps.edn
+++ b/deps.edn
@@ -122,7 +122,7 @@
   {:mvn/version ""2.23.1""}             ; allows the slf4j2 API to work with log4j 2
   org.apache.logging.log4j/log4j-layout-template-json
   {:mvn/version ""2.23.1""}             ; allows the custom json logging format
-  org.apache.poi/poi                        {:mvn/version ""5.2.5""}              ; Work with Office documents (e.g. Excel spreadsheets) -- newer version than one specified by Docjure
+  org.apache.poi/poi                        {:mvn/version ""5.3.1""}              ; Work with Office documents (e.g. Excel spreadsheets) -- newer version than one specified by Docjure
   org.apache.poi/poi-ooxml                  {:mvn/version ""5.2.5""
                                              :exclusions  [org.bouncycastle/bcpkix-jdk15on
                                                            org.bouncycastle/bcprov-jdk15on]}
```
",dpsutton,2024-10-08 18:52:53+00:00,['dpsutton'],2024-10-08 21:19:31+00:00,2024-10-08 21:17:37+00:00,https://github.com/metabase/metabase/pull/48488,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2400838672, 'issue_id': 2573958188, 'author': 'dpsutton', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 8, 21, 18, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400841417, 'issue_id': 2573958188, 'author': 'github-actions[bot]', 'body': '@dpsutton something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11243889797)', 'created_at': datetime.datetime(2024, 10, 8, 21, 19, 30, tzinfo=datetime.timezone.utc)}]","dpsutton (Issue Creator) on (2024-10-08 21:18:18 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-08 21:19:30 UTC): @dpsutton something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11243889797)

"
2573949646,pull_request,closed,,"🤖 backported ""Collection of UI updates to the alert modal""",#48431,github-automation-metabase,2024-10-08 18:48:26+00:00,"['npfitz', 'github-automation-metabase']",2024-10-08 20:45:36+00:00,2024-10-08 20:45:35+00:00,https://github.com/metabase/metabase/pull/48487,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2573941436,pull_request,closed,,Update Settings Copy to kick Ci + fix milestone setting bug,"
### Description

1. Updates a little settings copy on the backend to kick backend CI on the release branch
2. Updates frontend string context on the frontend to trigger frontend CI on the release branch
3. fixes boolean check for milestone setting (in this context, booleans get cast to strings)
",iethree,2024-10-08 18:44:04+00:00,['iethree'],2024-10-08 23:05:40+00:00,2024-10-08 20:22:48+00:00,https://github.com/metabase/metabase/pull/48486,"[('.Building & Releasing', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2573928106,pull_request,closed,,Alert isValid check only looks at configured channels,"Closes https://github.com/metabase/metabase/issues/48406

### Description

Updates a couple components to functional, and leverages RTK hooks to grab formInput data.

### How to verify

1. Have an instance without Email configured.
2. Go to a question and open the create alert modal
3. Notice that even though Email is enabled, the ""done"" button is greyed out. This is because Email is not configured
4. The same should be true for any existing alert, and for Slack

### Demo
![image](https://github.com/user-attachments/assets/54942294-8e99-4694-9739-009828cad54e)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-08 18:39:26+00:00,['npfitz'],2024-10-23 21:03:23+00:00,2024-10-23 21:03:21+00:00,https://github.com/metabase/metabase/pull/48485,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2573887868,pull_request,closed,,Update SDK version to 1.51.0,Update Readme version references and published npm package version to 1.51.0,github-automation-metabase,2024-10-08 18:16:16+00:00,"['heypoom', 'github-automation-metabase']",2024-11-26 18:52:50+00:00,2024-10-08 18:21:01+00:00,https://github.com/metabase/metabase/pull/48483,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2400524454, 'issue_id': 2573887868, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 8, 18, 16, 40, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 18:16:40 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2573884959,pull_request,closed,,Remove source hacks for native query drills,"Epic https://github.com/metabase/metabase/issues/48466
Follow up for https://github.com/metabase/metabase/pull/48232

The actual intent was always to check whether the `top-level-query` has aggregations or breakouts. This PR removes the hack added in a hackathon and adds the check.",ranquild,2024-10-08 18:14:42+00:00,['ranquild'],2024-10-09 15:26:38+00:00,2024-10-09 14:19:57+00:00,https://github.com/metabase/metabase/pull/48482,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2400734773, 'issue_id': 2573884959, 'author': 'uladzimirdev', 'body': '@ranquild what about test? is it useless?', 'created_at': datetime.datetime(2024, 10, 8, 20, 11, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400736033, 'issue_id': 2573884959, 'author': 'ranquild', 'body': ""@uladzimirdev it tests that underlying records can be applied when it shouldn't be possible to do so"", 'created_at': datetime.datetime(2024, 10, 8, 20, 12, 43, tzinfo=datetime.timezone.utc)}]","uladzimirdev on (2024-10-08 20:11:55 UTC): @ranquild what about test? is it useless?

ranquild (Issue Creator) on (2024-10-08 20:12:43 UTC): @uladzimirdev it tests that underlying records can be applied when it shouldn't be possible to do so

"
2573874365,pull_request,closed,,Mantine v7 - Testing Env,This is just to let CI run tests for components. Main work can be followed in `mantine-v7/main`.,sloansparger,2024-10-08 18:08:49+00:00,['sloansparger'],2024-10-11 15:07:14+00:00,2024-10-11 15:07:14+00:00,https://github.com/metabase/metabase/pull/48481,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2400512856, 'issue_id': 2573874365, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff cdea683a7ad9572a67941430a7a49196d2e5ad7a...f8fd8abb7ecd7221928877c550283acddcc7fffb.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.config.ts<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.module.css<br>frontend/src/metabase/ui/components/overlays/Popover/index.tsx<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.module.css<br>frontend/src/metabase/ui/components/utils/Paper/Paper.styled.tsx<br>frontend/src/metabase/ui/components/utils/Paper/index.ts<br>frontend/src/metabase/ui/theme.ts<br>frontend/src/metabase/ui/utils/colors.ts |', 'created_at': datetime.datetime(2024, 10, 8, 18, 10, 18, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 18:10:18 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff cdea683a7ad9572a67941430a7a49196d2e5ad7a...f8fd8abb7ecd7221928877c550283acddcc7fffb.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.config.ts<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.module.css<br>frontend/src/metabase/ui/components/overlays/Popover/index.tsx<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.module.css<br>frontend/src/metabase/ui/components/utils/Paper/Paper.styled.tsx<br>frontend/src/metabase/ui/components/utils/Paper/index.ts<br>frontend/src/metabase/ui/theme.ts<br>frontend/src/metabase/ui/utils/colors.ts |

"
2573842624,pull_request,closed,,"🤖 backported ""docs: fix hash links""",#48478,github-automation-metabase,2024-10-08 17:52:08+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-08 17:53:48+00:00,2024-10-08 17:53:47+00:00,https://github.com/metabase/metabase/pull/48480,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2573822174,pull_request,closed,,docs: fix hash links,https://github.com/metabase/metabase/pull/43049#discussion_r1792260947,alexyarosh,2024-10-08 17:42:08+00:00,['alexyarosh'],2024-11-26 18:52:51+00:00,2024-10-08 17:51:20+00:00,https://github.com/metabase/metabase/pull/48478,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2400481032, 'issue_id': 2573822174, 'author': 'alexyarosh', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 8, 17, 52, 39, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400483084, 'issue_id': 2573822174, 'author': 'github-actions[bot]', 'body': '@alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11240954564)', 'created_at': datetime.datetime(2024, 10, 8, 17, 53, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400488756, 'issue_id': 2573822174, 'author': 'alexyarosh', 'body': ""wait im stupid we don't have trash docs in v50 🤦🏼"", 'created_at': datetime.datetime(2024, 10, 8, 17, 56, 57, tzinfo=datetime.timezone.utc)}]","alexyarosh (Issue Creator) on (2024-10-08 17:52:39 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-08 17:53:44 UTC): @alexyarosh something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11240954564)

alexyarosh (Issue Creator) on (2024-10-08 17:56:57 UTC): wait im stupid we don't have trash docs in v50 🤦🏼

"
2573821545,pull_request,closed,,"🤖 backported ""[MS1] Better Onboarding UX""",#48369,github-automation-metabase,2024-10-08 17:41:48+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-10-08 18:23:30+00:00,2024-10-08 18:23:29+00:00,https://github.com/metabase/metabase/pull/48477,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2400464827, 'issue_id': 2573821545, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 570fb57b2653cb7dd95b0f3752187b8f5fed93d7...27a0a6e0f15e758085ed3caa7334005fe735fb7b.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |', 'created_at': datetime.datetime(2024, 10, 8, 17, 43, 16, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 17:43:16 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 570fb57b2653cb7dd95b0f3752187b8f5fed93d7...27a0a6e0f15e758085ed3caa7334005fe735fb7b.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |

"
2573806019,pull_request,closed,,Adds missing schemas + data for metrics to snowplow stats ping,"resolves #48424

Most of the info for this section was in the legacy stats info. The new stuff is calculated in [`->snowplow-metric-info`](https://github.com/metabase/metabase/blob/add-metrics-to-snowplow-ping/src/metabase/analytics/stats.clj#L599).

The specified tags are included with `""metrics""`.

Also, I refactored this to be more repl-friendly. We can call `generate-instance-stats!` from the repl to see its value.

This adds the jsonschema for `""metrics""` section, as well as `""grouped_metrics""`.",escherize,2024-10-08 17:33:09+00:00,['escherize'],2024-10-15 20:47:15+00:00,2024-10-15 20:47:12+00:00,https://github.com/metabase/metabase/pull/48476,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2408202275, 'issue_id': 2573806019, 'author': 'escherize', 'body': ""I've tested this with snowplow mini, and it accepts the value 🎉.\r\n\r\n## Open question:\r\n\r\n- According to the snowplow docs, adding a required field (as we are in this PR) is a breaking change and should mean bumping to 2-0-0. However I also read that we generally shouldn't need to do that, so I could use some clarity there.\r\n\r\n## Answered:\r\n\r\n- Let's go with a `2-0-0` version."", 'created_at': datetime.datetime(2024, 10, 11, 22, 36, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2413413550, 'issue_id': 2573806019, 'author': 'albertoperdomo', 'body': 'Should this not be backported to the 51 release branch so it makes it into 51? I see the no-backport label.', 'created_at': datetime.datetime(2024, 10, 15, 9, 47, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414339060, 'issue_id': 2573806019, 'author': 'escherize', 'body': ""> Should this not be backported to the 51 release branch so it makes it into 51? I see the no-backport label.\r\n\r\nThanks, I've switched the labels so we will backport it."", 'created_at': datetime.datetime(2024, 10, 15, 15, 32, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414571640, 'issue_id': 2573806019, 'author': 'escherize', 'body': ""Since we don't have telemetry data for embedding usage, we've expedited that piece and added the `query_executions_by_source` grouped metric in this PR."", 'created_at': datetime.datetime(2024, 10, 15, 17, 9, 47, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-10-11 22:36:21 UTC): I've tested this with snowplow mini, and it accepts the value 🎉.

## Open question:

- According to the snowplow docs, adding a required field (as we are in this PR) is a breaking change and should mean bumping to 2-0-0. However I also read that we generally shouldn't need to do that, so I could use some clarity there.

## Answered:

- Let's go with a `2-0-0` version.

albertoperdomo on (2024-10-15 09:47:16 UTC): Should this not be backported to the 51 release branch so it makes it into 51? I see the no-backport label.

escherize (Issue Creator) on (2024-10-15 15:32:56 UTC): Thanks, I've switched the labels so we will backport it.

escherize (Issue Creator) on (2024-10-15 17:09:47 UTC): Since we don't have telemetry data for embedding usage, we've expedited that piece and added the `query_executions_by_source` grouped metric in this PR.

"
2573778034,pull_request,closed,,[MS2] Better Onboarding UX: Expanded CSV upload permissions,"### What does this PR accomplish?
- Resolves #48325

> [!TIP]
> All of the information you need to review this PR is in the _Milestone_ issue linked above. It contains the testing plan. But the tl;dr is:
>
> **We're expanding permissions for CSV uploads from this section to some non-admin users**

### Does anything change for admins?
- No. Everything should still work the same and all tests should be passing.

### What are the new rules for non-admins
They _must_ have:
  1. ""write"" permissions for the root collection AND
  2.  either:
    a) !uploadsEnabled => data access to any of the databases OR
    b) uploadsEnabled => ""upload"" permissions for the database for which uploads are enabled

### What else changed since #48369
> [!IMPORTANT]
> We decided to [remove the Metabase _learn_ link](https://github.com/metabase/metabase/pull/48475/commits/a314e7e0875dba4d02703f3b37ca83698ce44c27) until we introduce a [new checklist page](https://github.com/metabase/metabase/issues/48387).

---
### Documentation implication
@metabase/writers might have to update the documentation after this PR gets merged to `master`. Since we're backporting it to both 51.x release branch AND to the 50.x branch, some docs changes might be needed in there as well.

### Testing
All of these changes were possible to test with Jest integration tests. No E2E bloat needed.

Results of a local run:
```
better onboarding section
  add data section
    ✓ should render for admins (683 ms)
    ✓ intro CTA should not render when there are databases connected (392 ms)
    ✓ should render for regular users with 'curate' root collection permissions if uploads are disabled, but they have general data access (434 ms)
    ✓ should render for regular users with 'curate' root collection permissions if uploads are enabled for a database and they can upload to that database (449 ms)
    ✓ should not render for regular users if they cannot 'curate' the root collection (477 ms)
    ✓ should not render for regular users if they don't have data access (492 ms)
  'Add a database' menu item
    ✓ should be wrapped in a link (922 ms)
    ✓ should render properly for admins (877 ms)
    ✓ should not render for regular users (903 ms)
  'Upload a spreadsheet' menu item
    ✓ should render properly for admins (825 ms)
    ✓ should render properly for regular users (854 ms)
    ✓ clicking on it should show a CSV info modal for an admin, if uploads are disabled (1007 ms)
    ✓ clicking on it should show a CSV info modal for a regular user, if uploads are disabled (954 ms)
    ✓ clicking on it should not show a CSV info modal for an admin, if uploads are enabled (1019 ms)
    ✓ clicking on it should not show a CSV info modal for a regular user, if uploads are enabled (982 ms)
```",nemanjaglumac,2024-10-08 17:18:02+00:00,['nemanjaglumac'],2024-10-09 17:29:39+00:00,2024-10-09 17:29:38+00:00,https://github.com/metabase/metabase/pull/48475,"[('backport', 'Automatically create PR on current release branch on merge'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2402795312, 'issue_id': 2573778034, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 1ad9349c1f2b3faaee9e8defc5c756a23e5aba32.\n✅ Preview:\n    https://pr48475.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 9, 16, 33, 47, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-09 16:33:47 UTC): 👋 Deploying a preview environment for commit 1ad9349c1f2b3faaee9e8defc5c756a23e5aba32.
✅ Preview:
    https://pr48475.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2573777654,pull_request,closed,,"🤖 backported ""Fix typo in devguide""",#48247,github-automation-metabase,2024-10-08 17:17:47+00:00,"['iethree', 'github-automation-metabase']",2024-10-08 17:19:40+00:00,2024-10-08 17:19:18+00:00,https://github.com/metabase/metabase/pull/48474,"[('Type:Documentation', ''), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2573745201,pull_request,closed,,"Set :lib/source-uuid from the field ref, not from column metadata","I bumped into this during fixing a bug, but didn't need to change in the end. Still, this change makes sense to me.",metamben,2024-10-08 16:58:57+00:00,['metamben'],2024-11-26 18:52:34+00:00,2024-10-16 15:05:10+00:00,https://github.com/metabase/metabase/pull/48472,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2573713072,pull_request,closed,,"🤖 backported ""Fix query_metadata not including metadata for native queries""",#48459,github-automation-metabase,2024-10-08 16:44:20+00:00,"['ranquild', 'github-automation-metabase']",2024-10-08 19:40:39+00:00,2024-10-08 19:40:39+00:00,https://github.com/metabase/metabase/pull/48470,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2573708426,pull_request,closed,,Create metric button and docs link in empty state,"Closes https://github.com/metabase/metabase/issues/48453 

### Description

Adds a link to create a metric and to the metrics docs to the empty state for the browse metrics page.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Make sure you have no metrics in your instance
2. Browse -> Metrics
3. The ""Read the docs"" link should show up (unless you are on premium with whitelabel turned on) and should point to the correct docs page (<https://www.metabase.com/docs/latest/data-modeling/metrics>)
4. The ""Create metric"" button should show up and clicking it should open the metric editor

### Demo

<img width=""1474"" alt=""Screenshot 2024-10-08 at 18 40 27"" src=""https://github.com/user-attachments/assets/caade6e2-2f81-4f2d-87b1-96c93ac01f12"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",romeovs,2024-10-08 16:42:32+00:00,['romeovs'],2024-10-14 14:52:22+00:00,2024-10-11 14:31:53+00:00,https://github.com/metabase/metabase/pull/48468,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2406975469, 'issue_id': 2573708426, 'author': 'romeovs', 'body': 'This is blocked by the docs going live.', 'created_at': datetime.datetime(2024, 10, 11, 9, 8, 30, tzinfo=datetime.timezone.utc)}]","romeovs (Issue Creator) on (2024-10-11 09:08:30 UTC): This is blocked by the docs going live.

"
2573702790,pull_request,closed,,Cards in Dashboards Milestone 2,"Cards in Dashboards Milestone 2:

- dashboard items, similar to collection items... but for dashboards!
- add `here` for dashboards on collection items, just like we provide for collections
- provide `location` for dashboards in collection items, just like we provide for collections
- when archiving a dashboard, we archive its dashboard questions - this contains a fix for that behavior. Normally we filter `archived` questions out of the list of dashboard `dashcards`. For Dashboard Questions, we don't want to do that - an archived dashboard should still ""contain"" its archived DQs.
- move dashboard questions!
  - to a new Dashboard
  - to a Collection
- move regular questions to Dashboards
- autoplace Dashboard Questions when they are moved (but not when they are created). This inconsistency is because we like the flow on create (you create the DQ, then place it - if you stop halfway through, the DQ is archived, which is a consistent state since you didn't ""finish"" creating it) but for moves, we definitely don't want the DQ to ""disappear"" if you don't complete the move including placement.
- archive DQs when they have no Dashcards, unarchive DQs when a Dashcard is recreated",johnswanson,2024-10-08 16:39:18+00:00,['johnswanson'],2025-02-04 15:09:30+00:00,2025-02-04 01:31:13+00:00,https://github.com/metabase/metabase/pull/48467,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2407829497, 'issue_id': 2573702790, 'author': 'johnswanson', 'body': '@escherize thank you!', 'created_at': datetime.datetime(2024, 10, 11, 17, 17, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449588, 'issue_id': 2573702790, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 30, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557408, 'issue_id': 2573702790, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 12, tzinfo=datetime.timezone.utc)}]","johnswanson (Issue Creator) on (2024-10-11 17:17:44 UTC): @escherize thank you!

github-actions[bot] on (2025-01-21 01:30:54 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:12 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2573684013,pull_request,closed,,Convert Skeleton to Mantine 7,"![Kapture 2024-10-08 at 12 18 25](https://github.com/user-attachments/assets/fbebe495-14d1-4561-a8fe-30b614951c1d)
",rafpaf,2024-10-08 16:28:36+00:00,['rafpaf'],2025-02-04 17:32:11+00:00,2024-10-15 19:49:32+00:00,https://github.com/metabase/metabase/pull/48465,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2400329775, 'issue_id': 2573684013, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48465?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#48465** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48465?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48464** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48464?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 1 other dependent PR ([#48757](https://github.com/metabase/metabase/pull/48757) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48757?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>)\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 16, 28, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414875157, 'issue_id': 2573684013, 'author': 'rafpaf', 'body': 'I pushed this code to the main mantine 7 branch so closing this PR', 'created_at': datetime.datetime(2024, 10, 15, 19, 49, 32, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-08 16:28:50 UTC): * **#48465** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48465?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48464** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48464?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 1 other dependent PR ([#48757](https://github.com/metabase/metabase/pull/48757) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48757?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>)
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-15 19:49:32 UTC): I pushed this code to the main mantine 7 branch so closing this PR

"
2573683929,pull_request,closed,,[WIP] Mantine v7,closes https://github.com/metabase/metabase/issues/45941,rafpaf,2024-10-08 16:28:33+00:00,"['rafpaf', 'iethree']",2024-10-24 12:51:50+00:00,2024-10-24 12:51:50+00:00,https://github.com/metabase/metabase/pull/48464,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2423189529, 'issue_id': 2573683929, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 10, 18, 20, 31, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2423197802, 'issue_id': 2573683929, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff df31f565bccf1f895aef210e42c20209f6e73251...f22f84b61635a0059c0232abf0c48d5a2c758495.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.module.css<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx<br>frontend/src/metabase/visualizations/components/Visualization/Visualization-themed.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/DimensionsWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/SmartScalarSettingsWidgets.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/StaticNumberForm.tsx |\n| @kdoh | frontend/src/metabase/ui/Theme.module.css<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionButton.stories.tsx<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.module.css<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx<br>frontend/src/metabase/ui/components/buttons/ActionIcon/index.ts<br>frontend/src/metabase/ui/components/buttons/Button/Button.module.css<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/Button/Button.styled.tsx<br>frontend/src/metabase/ui/components/buttons/Button/index.ts<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.config.ts<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.module.css<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/index.ts<br>frontend/src/metabase/ui/components/data-display/Card/Card.config.ts<br>frontend/src/metabase/ui/components/data-display/Card/Card.module.css<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Card/index.ts<br>frontend/src/metabase/ui/components/data-display/Image/Image.tsx<br>frontend/src/metabase/ui/components/data-display/Image/index.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.module.css<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/index.ts<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/ProgressStyles.module.css<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.config.ts<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.module.css<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/index.ts<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.config.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/index.ts<br>frontend/src/metabase/ui/components/inputs/Calendar/Calendar.module.css<br>frontend/src/metabase/ui/components/inputs/Calendar/Calendar.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Calendar/index.ts<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.config.ts<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.module.css<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/index.ts<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.config.ts<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.module.css<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Chip/index.ts<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/index.ts<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/index.ts<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.module.css<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInputValue.styled.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInputValue.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Input/Input.module.css<br>frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Input/index.ts<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/index.ts<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.config.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.module.css<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.styled.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/index.ts<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.config.ts<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.module.css<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/index.ts<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.config.ts<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.module.css<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/index.ts<br>frontend/src/metabase/ui/components/inputs/Select/Select.config.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.module.css<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectDropdown/SelectDropdown.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectDropdown/index.ts<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.module.css<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/utils.ts<br>frontend/src/metabase/ui/components/inputs/Select/index.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.config.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.module.css<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/index.ts<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/index.ts<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.module.css<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/index.ts<br>frontend/src/metabase/ui/components/inputs/index.ts<br>frontend/src/metabase/ui/components/layout/ScrollArea/ScrollArea.module.css<br>frontend/src/metabase/ui/components/layout/ScrollArea/ScrollArea.styled.tsx<br>frontend/src/metabase/ui/components/layout/ScrollArea/index.ts<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.config.ts<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.module.css<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.stories.tsx<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.styled.tsx<br>frontend/src/metabase/ui/components/navigation/NavLink/index.ts<br>frontend/src/metabase/ui/components/navigation/Tabs/Tab.module.css<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.styled.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/index.ts<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.module.css<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.styled.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/index.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.config.ts<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.module.css<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/index.ts<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.module.css<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.config.ts<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.module.css<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/index.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.module.css<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/index.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.unit.spec.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.module.css<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.styled.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/index.ts<br>frontend/src/metabase/ui/components/typography/List/List.module.css<br>frontend/src/metabase/ui/components/typography/List/List.styled.tsx<br>frontend/src/metabase/ui/components/typography/List/index.ts<br>frontend/src/metabase/ui/components/typography/Text/Text.module.css<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.styled.tsx<br>frontend/src/metabase/ui/components/typography/Text/index.ts<br>frontend/src/metabase/ui/components/typography/Title/Title.module.css<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.styled.tsx<br>frontend/src/metabase/ui/components/typography/Title/index.ts<br>frontend/src/metabase/ui/components/utils/Divider/Divider.module.css<br>frontend/src/metabase/ui/components/utils/Divider/Divider.styled.tsx<br>frontend/src/metabase/ui/components/utils/Divider/index.ts<br>frontend/src/metabase/ui/components/utils/Paper/Paper.module.css<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.styled.tsx<br>frontend/src/metabase/ui/components/utils/Paper/index.ts<br>frontend/src/metabase/ui/index.ts<br>frontend/src/metabase/ui/theme.ts<br>frontend/src/metabase/ui/utils/colors.ts |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/HelpLinkSettings/HelpLinkSettings.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationTitle.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/NeedMoreInfoCard.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/SDKContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticEmbedContent.tsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/AlertMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/DashboardSubscriptionMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/ExportPdfMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/PublicLinkMenuItem.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx |', 'created_at': datetime.datetime(2024, 10, 18, 20, 38, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2423200451, 'issue_id': 2573683929, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/18/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 18, 20, 40, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2434936914, 'issue_id': 2573683929, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit f22f84b61635a0059c0232abf0c48d5a2c758495.\n✅ Preview:\n    https://pr48464.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 24, 10, 48, 51, tzinfo=datetime.timezone.utc)}, {'comment_id': 2435213105, 'issue_id': 2573683929, 'author': 'iethree', 'body': '(closing this PR to get the benefit of some new testing tooling on another)', 'created_at': datetime.datetime(2024, 10, 24, 12, 51, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-18 20:31:36 UTC): <!---conventional commit reminder comment ID-->
@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-10-18 20:38:09 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff df31f565bccf1f895aef210e42c20209f6e73251...f22f84b61635a0059c0232abf0c48d5a2c758495.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.module.css<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx<br>frontend/src/metabase/visualizations/components/Visualization/Visualization-themed.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/IFrameViz/IFrameViz.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/DimensionsWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/SmartScalarSettingsWidgets.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/StaticNumberForm.tsx |
| @kdoh | frontend/src/metabase/ui/Theme.module.css<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionButton.stories.tsx<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.module.css<br>frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx<br>frontend/src/metabase/ui/components/buttons/ActionIcon/index.ts<br>frontend/src/metabase/ui/components/buttons/Button/Button.module.css<br>frontend/src/metabase/ui/components/buttons/Button/Button.stories.tsx<br>frontend/src/metabase/ui/components/buttons/Button/Button.styled.tsx<br>frontend/src/metabase/ui/components/buttons/Button/index.ts<br>frontend/src/metabase/ui/components/buttons/PopoverBackButton/PopoverBackButton.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.config.ts<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.module.css<br>frontend/src/metabase/ui/components/data-display/Accordion/Accordion.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Accordion/index.ts<br>frontend/src/metabase/ui/components/data-display/Card/Card.config.ts<br>frontend/src/metabase/ui/components/data-display/Card/Card.module.css<br>frontend/src/metabase/ui/components/data-display/Card/Card.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Card/Card.styled.tsx<br>frontend/src/metabase/ui/components/data-display/Card/index.ts<br>frontend/src/metabase/ui/components/data-display/Image/Image.tsx<br>frontend/src/metabase/ui/components/data-display/Image/index.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.module.css<br>frontend/src/metabase/ui/components/feedback/Alert/Alert.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Alert/index.ts<br>frontend/src/metabase/ui/components/feedback/Loader/Loader.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/Progress.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Progress/ProgressStyles.module.css<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.config.ts<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.module.css<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.stories.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.tsx<br>frontend/src/metabase/ui/components/feedback/Skeleton/index.ts<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.config.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/Autocomplete.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Autocomplete/index.ts<br>frontend/src/metabase/ui/components/inputs/Calendar/Calendar.module.css<br>frontend/src/metabase/ui/components/inputs/Calendar/Calendar.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Calendar/index.ts<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.config.ts<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.module.css<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/index.ts<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.config.ts<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.module.css<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Chip/Chip.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Chip/index.ts<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/DateInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DateInput/index.ts<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/index.ts<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.mdx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.module.css<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInputValue.styled.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/FileInputValue.tsx<br>frontend/src/metabase/ui/components/inputs/FileInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Input/Input.module.css<br>frontend/src/metabase/ui/components/inputs/Input/Input.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Input/index.ts<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/MultiAutocomplete.tsx<br>frontend/src/metabase/ui/components/inputs/MultiAutocomplete/index.ts<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.config.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.module.css<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.stories.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/MultiSelect.styled.tsx<br>frontend/src/metabase/ui/components/inputs/MultiSelect/index.ts<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/NumberInput.tsx<br>frontend/src/metabase/ui/components/inputs/NumberInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.config.ts<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.module.css<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/index.ts<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.config.ts<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.module.css<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.stories.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/SegmentedControl.styled.tsx<br>frontend/src/metabase/ui/components/inputs/SegmentedControl/index.ts<br>frontend/src/metabase/ui/components/inputs/Select/Select.config.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.module.css<br>frontend/src/metabase/ui/components/inputs/Select/Select.stories.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectDropdown/SelectDropdown.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectDropdown/index.ts<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.module.css<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/utils.ts<br>frontend/src/metabase/ui/components/inputs/Select/index.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.config.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.module.css<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/index.ts<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.stories.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/TextInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInput/index.ts<br>frontend/src/metabase/ui/components/inputs/Textarea/Textarea.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Textarea/index.ts<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.module.css<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/index.ts<br>frontend/src/metabase/ui/components/inputs/index.ts<br>frontend/src/metabase/ui/components/layout/ScrollArea/ScrollArea.module.css<br>frontend/src/metabase/ui/components/layout/ScrollArea/ScrollArea.styled.tsx<br>frontend/src/metabase/ui/components/layout/ScrollArea/index.ts<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.config.ts<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.module.css<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.stories.tsx<br>frontend/src/metabase/ui/components/navigation/NavLink/NavLink.styled.tsx<br>frontend/src/metabase/ui/components/navigation/NavLink/index.ts<br>frontend/src/metabase/ui/components/navigation/Tabs/Tab.module.css<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.stories.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/Tabs.styled.tsx<br>frontend/src/metabase/ui/components/navigation/Tabs/index.ts<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.module.css<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.stories.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/HoverCard.styled.tsx<br>frontend/src/metabase/ui/components/overlays/HoverCard/index.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.config.ts<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.module.css<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/Menu.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Menu/index.ts<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.module.css<br>frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.config.ts<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.module.css<br>frontend/src/metabase/ui/components/overlays/Popover/Popover.stories.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/index.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.module.css<br>frontend/src/metabase/ui/components/overlays/Tooltip/Tooltip.styled.tsx<br>frontend/src/metabase/ui/components/overlays/Tooltip/index.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.unit.spec.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.module.css<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.stories.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/Anchor.styled.tsx<br>frontend/src/metabase/ui/components/typography/Anchor/index.ts<br>frontend/src/metabase/ui/components/typography/List/List.module.css<br>frontend/src/metabase/ui/components/typography/List/List.styled.tsx<br>frontend/src/metabase/ui/components/typography/List/index.ts<br>frontend/src/metabase/ui/components/typography/Text/Text.module.css<br>frontend/src/metabase/ui/components/typography/Text/Text.stories.tsx<br>frontend/src/metabase/ui/components/typography/Text/Text.styled.tsx<br>frontend/src/metabase/ui/components/typography/Text/index.ts<br>frontend/src/metabase/ui/components/typography/Title/Title.module.css<br>frontend/src/metabase/ui/components/typography/Title/Title.stories.tsx<br>frontend/src/metabase/ui/components/typography/Title/Title.styled.tsx<br>frontend/src/metabase/ui/components/typography/Title/index.ts<br>frontend/src/metabase/ui/components/utils/Divider/Divider.module.css<br>frontend/src/metabase/ui/components/utils/Divider/Divider.styled.tsx<br>frontend/src/metabase/ui/components/utils/Divider/index.ts<br>frontend/src/metabase/ui/components/utils/Paper/Paper.module.css<br>frontend/src/metabase/ui/components/utils/Paper/Paper.stories.tsx<br>frontend/src/metabase/ui/components/utils/Paper/Paper.styled.tsx<br>frontend/src/metabase/ui/components/utils/Paper/index.ts<br>frontend/src/metabase/ui/index.ts<br>frontend/src/metabase/ui/theme.ts<br>frontend/src/metabase/ui/utils/colors.ts |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/HelpLinkSettings/HelpLinkSettings.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationTitle.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/NeedMoreInfoCard.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/SDKContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticEmbedContent.tsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/AlertMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/DashboardSubscriptionMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/ExportPdfMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/PublicLinkMenuItem.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx |

graphite-app[bot] on (2024-10-18 20:40:11 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/18/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

github-actions[bot] on (2024-10-24 10:48:51 UTC): 👋 Deploying a preview environment for commit f22f84b61635a0059c0232abf0c48d5a2c758495.
✅ Preview:
    https://pr48464.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

iethree (Assginee) on (2024-10-24 12:51:50 UTC): (closing this PR to get the benefit of some new testing tooling on another)

"
2573575052,pull_request,closed,,"Remove ""Draw box to filter"" from grid maps for native queries","How to verify:
- New -> SQL query -> `SELECT * FROM PEOPLE LIMIT 10` -> Save
- Change the viz type to Map
- Viz settings -> Map type -> Grid map. Select columns (latitude, longitude) -> **Save**
- Make sure that `Draw box to filter` isn't available
- Viz settings -> Map type -> Pin map -> **Save**
- Make sure that `Draw box to filter` is available

Grid map:
<img width=""1728"" alt=""Screenshot 2024-10-08 at 12 39 35"" src=""https://github.com/user-attachments/assets/c29450bd-ef08-4031-8af7-8cc51f245bfb"">

Pin map:
<img width=""1728"" alt=""Screenshot 2024-10-08 at 12 41 10"" src=""https://github.com/user-attachments/assets/1613eadc-3680-4e5c-8cdd-ba395961873b"">
",ranquild,2024-10-08 15:41:47+00:00,['ranquild'],2024-10-09 19:53:23+00:00,2024-10-08 22:31:20+00:00,https://github.com/metabase/metabase/pull/48463,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2400204267, 'issue_id': 2573575052, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 20cfb4239902d51c4be219c83aa84f2893ceb5e3...74fc538c3e3ed228fa01fefa3110132d120477b0.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/components/PinMap.jsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |', 'created_at': datetime.datetime(2024, 10, 8, 15, 43, 13, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 15:43:13 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 20cfb4239902d51c4be219c83aa84f2893ceb5e3...74fc538c3e3ed228fa01fefa3110132d120477b0.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/LeafletMap.jsx<br>frontend/src/metabase/visualizations/components/PinMap.jsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts |

"
2573545535,pull_request,closed,,draft - fix unknown premium feature log on tests,this should actually fail and tell me where we have the warnings so i can look into removing them,npretto,2024-10-08 15:30:02+00:00,['npretto'],2025-02-04 14:55:14+00:00,2024-10-09 15:21:58+00:00,https://github.com/metabase/metabase/pull/48462,"[('.Team/Embedding', '')]",[],
2573534775,pull_request,closed,,ignore .loki from vscode search,"The screenshots have such long names that they show up on the quick open even for totally unrelated searches, unless @metabase/dashviz  uses the search to open those, I think it's better to exclude them from search.

I would exclude them locally but since we committed the vscode settings file, I don't know of an easy way to do it (If you know of a way, please tell me)

Before:
Not the end of the word, but I'd want to see `SetupChecklist/index` in not that below in the list
<img width=""715"" alt=""image"" src=""https://github.com/user-attachments/assets/71513fff-2d17-43eb-9e37-ff814eaff593"">
After:
<img width=""726"" alt=""image"" src=""https://github.com/user-attachments/assets/a96c9df6-dbee-4ea5-81af-841a08f3da5c"">",npretto,2024-10-08 15:25:08+00:00,['npretto'],2025-02-04 14:55:12+00:00,2024-10-09 14:50:07+00:00,https://github.com/metabase/metabase/pull/48460,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2573471020,pull_request,closed,,Fix query_metadata not including metadata for native queries,"Follow up https://github.com/metabase/metabase/pull/48232

Removes a FE hack to compute metadata from the dashboard response and adds card-level metadata for native queries in `query_metadata`.

How to verify 1:
- New -> SQL query -> SELECT 1 -> Run -> Visualize as a table -> Save as Q1
- Add Q1 to a dashboard and refresh the page
- Click on a cell in Q1. Drills should work.

How to verify 2:
- New -> SQL query -> SELECT * FROM ORDERS-> Run (but do not save)
- Click on a cell -> Click ""Save"" -> Set the name and save
- Click on the cell again. Drills should appear.",ranquild,2024-10-08 14:58:44+00:00,['ranquild'],2024-11-26 18:52:53+00:00,2024-10-08 16:43:34+00:00,https://github.com/metabase/metabase/pull/48459,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2573292826,pull_request,closed,,Convert `loadingDashboards` redux actions to TS,I had a little extra time and I saw that this could be done relatively quickly. It just converts the loadingDashboards slice to TS and removes one unused line,oisincoveney,2024-10-08 13:55:26+00:00,['oisincoveney'],2024-10-11 17:09:08+00:00,2024-10-11 16:26:30+00:00,https://github.com/metabase/metabase/pull/48456,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2402998424, 'issue_id': 2573292826, 'author': 'oisincoveney', 'body': ""> Nice work! I think type checks are still failing on this PR though, could you take a look?\n\nA bunch of tests are still failing 😅😅 I'll need to look into it tomorrow"", 'created_at': datetime.datetime(2024, 10, 9, 18, 24, 58, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-10-09 18:24:58 UTC): A bunch of tests are still failing 😅😅 I'll need to look into it tomorrow

"
2573281412,pull_request,closed,,update embedding homepage now that we don't auto-enable embedding,"https://metaboat.slack.com/archives/C063Q3F1HPF/p1728393877512229?thread_ts=1728033780.348469&cid=C063Q3F1HPF

## Changes

After we split the embedding setting in three independent toggles, we don't automatically enabled embedding for the user. This changes the embedding homepage to reflect that

- Removes
![image](https://github.com/user-attachments/assets/b43db023-ace2-459a-baaa-949619fb1104)
- always show the ""Enable embedding"" step
- specify which embedding needs to be enabled (static/interactive)

I'll create a follow up PR to change the setup to not send the `embedding-autoenabled` setting and to clean up related code and tests, this PR is to unblock master
",npretto,2024-10-08 13:51:44+00:00,['npretto'],2024-10-08 16:58:46+00:00,2024-10-08 15:47:49+00:00,https://github.com/metabase/metabase/pull/48455,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2399914680, 'issue_id': 2573281412, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2ec9fdb1783d6028d64d87609c25c33e2ff14d7d...1a21c22cb4a4fa47e39375b4cbc420eaca17d708.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/enterprise.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 10, 8, 13, 53, 7, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-08 13:53:07 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2ec9fdb1783d6028d64d87609c25c33e2ff14d7d...1a21c22cb4a4fa47e39375b4cbc420eaca17d708.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.stories.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepage.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/EmbedHomepageView.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/enterprise.unit.spec.tsx |

"
2573275862,pull_request,closed,,"🤖 backported ""Update release channel settings copy""","  #48425
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-08 13:49:54+00:00,"['iethree', 'github-automation-metabase']",2024-10-15 12:48:20+00:00,2024-10-15 12:48:19+00:00,https://github.com/metabase/metabase/pull/48454,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2413823630, 'issue_id': 2573275862, 'author': 'iethree', 'body': 'replaced with https://github.com/metabase/metabase/pull/48731', 'created_at': datetime.datetime(2024, 10, 15, 12, 48, 20, tzinfo=datetime.timezone.utc)}]","iethree (Assginee) on (2024-10-15 12:48:20 UTC): replaced with https://github.com/metabase/metabase/pull/48731

"
2573259602,pull_request,closed,,(wip) Sidesheet polish,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",rafpaf,2024-10-08 13:44:42+00:00,['rafpaf'],2025-02-04 17:33:58+00:00,2024-10-15 19:50:55+00:00,https://github.com/metabase/metabase/pull/48452,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2399893399, 'issue_id': 2573259602, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48452?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#48452** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48452?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 13, 45, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414877512, 'issue_id': 2573259602, 'author': 'rafpaf', 'body': 'Not relevant right now', 'created_at': datetime.datetime(2024, 10, 15, 19, 50, 55, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-08 13:45:01 UTC): * **#48452** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48452?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 4 other dependent PRs ([#48283](https://github.com/metabase/metabase/pull/48283) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48283?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> and 1 other)
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-15 19:50:55 UTC): Not relevant right now

"
2573204514,pull_request,closed,,Change Metrics and Summaries copy,"Closes https://github.com/metabase/metabase/issues/48450 

### Description

Changes the copy for ""Basic Metrics"" and ""Common Metrics"" to ""Basic Functions"" and ""Metrics"".

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> Orders -> Pick the metric you want to see
2. The dropdown should have `Basic Functions` and `Metrics` (if there are metrics on this table)
3. Click visualize and play with the summarize sidebar in chill mode, the dropdown should have the same copy

### Demo

<img width=""342"" alt=""Screenshot 2024-10-10 at 09 55 24"" src=""https://github.com/user-attachments/assets/64fc1202-58c0-48b8-9eb7-580dea348801"">
<img width=""348"" alt=""Screenshot 2024-10-10 at 09 55 42"" src=""https://github.com/user-attachments/assets/672b9cda-225c-4010-9ad8-9348551a1ed6"">
<img width=""463"" alt=""Screenshot 2024-10-10 at 09 55 51"" src=""https://github.com/user-attachments/assets/978ad726-cd52-4962-8549-c467ea200def"">
<img width=""321"" alt=""Screenshot 2024-10-10 at 09 55 57"" src=""https://github.com/user-attachments/assets/2c2ca5cb-73d0-48d8-a1dd-7065ed45d6c7"">

cc @mazameli @AlessioLaiso this changes the copy on the summarize button, so please review.
",romeovs,2024-10-08 13:25:02+00:00,['romeovs'],2024-10-15 07:42:58+00:00,2024-10-15 07:42:57+00:00,https://github.com/metabase/metabase/pull/48451,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2404364088, 'issue_id': 2573204514, 'author': 'romeovs', 'body': 'For some reason the cross version tests are triggered on this PR, but we do not want to back port this one.', 'created_at': datetime.datetime(2024, 10, 10, 7, 59, 59, tzinfo=datetime.timezone.utc)}]","romeovs (Issue Creator) on (2024-10-10 07:59:59 UTC): For some reason the cross version tests are triggered on this PR, but we do not want to back port this one.

"
2573147110,pull_request,closed,,Metrics empty copy,"Closes https://github.com/metabase/metabase/issues/48448

### Description

Update the metric copy to be more consistent

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New -> Metric
2. The copy on the bottom of the page should match the copy on the empty `/browse/metrics` page (when it's empty).

### Demo

<img width=""1474"" alt=""Screenshot 2024-10-08 at 15 03 12"" src=""https://github.com/user-attachments/assets/3d4f3839-2ab9-40ca-ad27-391c02046a44"">

<img width=""1474"" alt=""Screenshot 2024-10-08 at 15 03 19"" src=""https://github.com/user-attachments/assets/57878f06-496c-4ad5-9a2a-f7a13d6cfc1a"">
",romeovs,2024-10-08 13:03:58+00:00,['romeovs'],2024-10-14 14:51:18+00:00,2024-10-09 09:12:22+00:00,https://github.com/metabase/metabase/pull/48449,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2573098083,pull_request,closed,,Ensure we realize row before putting it on queue,"Refs https://github.com/metabase/metabase/issues/48310

### Description

It seems like we're putting unrealized transients on the queue, which might get closed before we process it on the worker thread.

I'm not sure why this race condition has never shown up in dev or stats for me, even when processing thousands of events. Might have something to do with the number of cards and the beefiness of the box?

Or perhaps this is not the root cause.",crisptrutski,2024-10-08 12:43:12+00:00,['crisptrutski'],2024-10-10 17:28:37+00:00,2024-10-09 02:51:08+00:00,https://github.com/metabase/metabase/pull/48446,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2573040630,pull_request,closed,,Migrate dashboard embed endpoints to RTK,"Migrates the Dashboard embed endpoints to RTK query - these endpoints are  for enabling embedding and setting embedding parameters.

_**Why?**_
We're able to use RTK query now for validating and invalidating lists, instead of using a `key` to ensure that lists are loaded on the embed settings.

It also removes the intermediate `updateEnableEmbedding` and `updateEmbeddingParams` actions, so it should be easier to track things in the future.
",oisincoveney,2024-10-08 12:18:25+00:00,['oisincoveney'],2024-10-11 09:43:54+00:00,2024-10-11 07:53:52+00:00,https://github.com/metabase/metabase/pull/48444,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2572465288,pull_request,closed,,[Notification] Task history and retry ,"See https://www.notion.so/metabase/Simple-text-notification-74beda71982e4d2cab62efeb5b7f3734?pvs=4#de1dce610ae949c98feac34e261ac406 for the design

Example of a trigger with 2 notifications, each has 1 handler

```
metabase=#  select task, status, task_details from task_history order by id asc;
          task          | status  |                                                                                                                    task_details
------------------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 notification-triggered | success | {""trigger_type"":""notification-subscription/system-event"",""event_name"":""event/slack-token-invalid"",""notification_ids"":[3,4]}
 send-notification      | success | {""notification_id"":3,""notification_handlers"":[{""id"":3,""channel_type"":""channel/email"",""channel_id"":null,""template_id"":3}]}
 channel-send           | success | {""retry_config"":{""max-attempts"":7,""initial-interval-millis"":500,""multiplier"":2.0,""randomization-factor"":0.1,""max-interval-millis"":30000},""channel_id"":null,""channel_type"":""channel/email"",""template_id"":3,""notifcation_id"":3,""recipient_ids"":[3,4]}
 send-notification      | success | {""notification_id"":4,""notification_handlers"":[{""id"":4,""channel_type"":""channel/email"",""channel_id"":null,""template_id"":4}]}
 channel-send           | success | {""retry_config"":{""max-attempts"":7,""initial-interval-millis"":500,""multiplier"":2.0,""randomization-factor"":0.1,""max-interval-millis"":30000},""channel_id"":null,""channel_type"":""channel/email"",""template_id"":4,""notifcation_id"":4,""recipient_ids"":[5,6]}
(5 rows)
```

The log

```
2024-10-09 07:00:08,460 INFO events.notification :: Found 2 notifications for event: :event/slack-token-invalid
2024-10-09 07:00:08,475 DEBUG notification.core :: [Notification 3] Found 1 handler
2024-10-09 07:00:08,484 DEBUG notification.core :: [Notification 3] Got 1 message for channel channel/email with template 3
2024-10-09 07:00:08,484 DEBUG notification.core :: [Notification 3] Sending a message to channel channel/email
2024-10-09 07:00:08,487 DEBUG notification.core :: [Notification 3] Sent to channel channel/email with 0 retries
2024-10-09 07:00:08,490 DEBUG notification.core :: [Notification 4] Found 1 handler
2024-10-09 07:00:08,509 DEBUG notification.core :: [Notification 4] Got 1 message for channel channel/email with template 4
2024-10-09 07:00:08,509 DEBUG notification.core :: [Notification 4] Sending a message to channel channel/email
2024-10-09 07:00:08,513 DEBUG notification.core :: [Notification 4] Sent to channel channel/email with 0 retries
```


Example when there is an error
```
metabase=#  select task, status, task_details from task_history order by id asc;
         task         | status  |                                                                                                                                                                                                                    task_details
----------------------+---------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 notification-trigger | success | {""trigger_type"":""notification-subscription/system-event"",""event_name"":""event/slack-token-invalid"",""notification_ids"":[3]}
 send-notification    | success | {""notification_id"":3,""notification_handlers"":[{""id"":3,""channel_type"":""channel/email"",""channel_id"":null,""template_id"":3}]}
 channel-send         | success | {""retry_config"":{""max-attempts"":7,""initial-interval-millis"":500,""multiplier"":2.0,""randomization-factor"":0.1,""max-interval-millis"":30000},""channel_id"":null,""channel_type"":""channel/email"",""template_id"":3,""notifcation_id"":3,""recipient_ids"":[3,4],""attempted_retries"":2,""retry_errors"":[{""message"":""Failed to send email"",""timestamp"":""2024-10-09T10:52:33.17073Z""},{""message"":""Failed to send email"",""timestamp"":""2024-10-09T10:52:33.665902Z""}]}
(3 rows)
```

The log

```
2024-10-09 10:52:33,093 INFO events.notification :: Found 1 notification for event: :event/slack-token-invalid
2024-10-09 10:52:33,142 DEBUG notification.core :: [Notification 3] Found 1 handler
2024-10-09 10:52:33,166 DEBUG notification.core :: [Notification 3] Got 1 message for channel channel/email with template 3
2024-10-09 10:52:33,166 DEBUG notification.core :: [Notification 3] Sending a message to channel channel/email
2024-10-09 10:52:33,170 WARN notification.core :: [Notification 3] Failed to send to channel channel/email , retrying...
clojure.lang.ExceptionInfo: Failed to send email {}
        at metabase.channel.email$eval191098$_AMPERSAND_f__191100.invoke(NO_SOURCE_FILE:64)
        at metabase.channel.email$eval191098$fn__191103.invoke(NO_SOURCE_FILE:60)
        at clojure.lang.MultiFn.invoke(MultiFn.java:234)
...
2024-10-09 10:52:33,666 WARN notification.core :: [Notification 3] Failed to send to channel channel/email , retrying...
clojure.lang.ExceptionInfo: Failed to send email {}
        at metabase.channel.email$eval191098$_AMPERSAND_f__191100.invoke(NO_SOURCE_FILE:64)
        at metabase.channel.email$eval191098$fn__191103.invoke(NO_SOURCE_FILE:60)
        at clojure.lang.MultiFn.invoke(MultiFn.java:234)
        at metabase.notification.core$channel_send_retrying_BANG_$send_BANG___189333.invoke(NO_SOURCE_FILE:90)
        at clojure.lang.AFn.applyToHelper(AFn.java:152)
        at clojure.lang.AFn.applyTo(AFn.java:144)
        at clojure.core$apply.invokeStatic(core.clj:667)
        at clojure.core$apply.invoke(core.clj:662)
...
2024-10-09 10:52:34,582 DEBUG notification.core :: [Notification 3] Sent to channel channel/email with 2 retries
```",qnkhuat,2024-10-08 08:23:53+00:00,['qnkhuat'],2024-11-26 18:52:38+00:00,2024-10-15 10:06:09+00:00,https://github.com/metabase/metabase/pull/48437,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2406496311, 'issue_id': 2572465288, 'author': 'qnkhuat', 'body': ""> but would love to discuss logging a bit\r\n\r\nyes! it's important that we make debugging notifications easier given all the things we've been through with pulse :D"", 'created_at': datetime.datetime(2024, 10, 11, 3, 40, 10, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-10-11 03:40:10 UTC): yes! it's important that we make debugging notifications easier given all the things we've been through with pulse :D

"
2572340992,pull_request,closed,,Revert `enable-embedding` workarounds in Milestone 2 ,"Reverts the changes from https://github.com/metabase/metabase/commit/0888589d373d694a715582da2c30f8bed2abb8cb to make the tests in Milestone 2 work. Now that the backend stuff has been merged, tests should continue to pass.",oisincoveney,2024-10-08 07:30:57+00:00,['oisincoveney'],2024-10-08 08:28:42+00:00,2024-10-08 08:28:40+00:00,https://github.com/metabase/metabase/pull/48435,"[('.Team/Embedding', '')]","[{'comment_id': 2399084621, 'issue_id': 2572340992, 'author': 'oisincoveney', 'body': ""> The change looks logical to me, but I don't know why `fe-type-check` is failing. Have you tried merging master into the milestone 2 branch?\r\n\r\nyep, just a bad merge conflict resolve I think"", 'created_at': datetime.datetime(2024, 10, 8, 7, 40, 8, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-10-08 07:40:08 UTC): yep, just a bad merge conflict resolve I think

"
2572004376,pull_request,closed,,Integration branch for recent sidesheets work,This is an integration branch to facilitate design review,rafpaf,2024-10-08 04:13:52+00:00,['rafpaf'],2025-02-04 17:32:15+00:00,2024-10-14 19:15:29+00:00,https://github.com/metabase/metabase/pull/48433,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2398789557, 'issue_id': 2572004376, 'author': 'rafpaf', 'body': '* **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 3  dependent PRs ([#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48452](https://github.com/metabase/metabase/pull/48452) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48452?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>) 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 4, 14, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2401000082, 'issue_id': 2572004376, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/08/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 8, 23, 45, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2412035562, 'issue_id': 2572004376, 'author': 'rafpaf', 'body': ""We're no longer using this integration branch, so I've closed it"", 'created_at': datetime.datetime(2024, 10, 14, 19, 15, 39, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-08 04:14:06 UTC): * **#48433** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48433?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>: 3  dependent PRs ([#48312](https://github.com/metabase/metabase/pull/48312) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48312?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48313](https://github.com/metabase/metabase/pull/48313) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48313?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>, [#48452](https://github.com/metabase/metabase/pull/48452) <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48452?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>) 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-10-08 23:45:11 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/08/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

rafpaf (Issue Creator) on (2024-10-14 19:15:39 UTC): We're no longer using this integration branch, so I've closed it

"
2571946711,pull_request,closed,,Mock audit info requests,"This PR
* mocks audit requests in tests of `DashboardInfoSidebar` and `QuestionInfoSidebar` (these tests were flaking)
* introduces a helper, `setupAuditEndpoints`, to facilitate this in the future
* uses the helper in one other place where audit requests were getting mocked
",rafpaf,2024-10-08 03:20:22+00:00,['rafpaf'],2024-10-08 16:13:18+00:00,2024-10-08 12:58:29+00:00,https://github.com/metabase/metabase/pull/48432,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2398685229, 'issue_id': 2571946711, 'author': 'rafpaf', 'body': '* **#48432** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48432?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 8, 3, 20, 40, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-08 03:20:40 UTC): * **#48432** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48432?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2571883910,pull_request,closed,,Collection of UI updates to the alert modal,"Closes https://github.com/metabase/metabase/issues/48428
Closes https://github.com/metabase/metabase/issues/48407
Closes https://github.com/metabase/metabase/issues/48402

### Description
A collection of small fixes to the Alert modal

### How to verify

1. Set up an instance with Email and a couple webhooks configured
2. Go to a question, and start creating an alert
3. Notice that Slack isn't displayed. Now disable Email and enable your webhooks
4. Create the alert
5. Go back to the alert modal and click ""Delete this alert""
6. the names of the webhooks will be rendered in the checklist, and ""Email"" isn't in the checklist

Bonus:
1. Have an instance with Email and Slack set up
2. Go to a question and start creating a modal
3. Enable Slack. Notice that the ""Done"" button is greyed out, because you haven't yet selected a channel (previously, you could have still created the alert).


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-08 02:24:00+00:00,['npfitz'],2024-10-08 18:47:39+00:00,2024-10-08 18:47:37+00:00,https://github.com/metabase/metabase/pull/48431,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2571688482,pull_request,closed,,Update release channel settings copy,"follow up to https://github.com/metabase/metabase/pull/48126

see [discussion](https://metaboat.slack.com/archives/C064EB1UE5P/p1728340680724549?thread_ts=1727725973.449529&cid=C064EB1UE5P)

### Description

Updates release channel settings copy to be more human-friendly.

![Screen Shot 2024-10-07 at 5 02 38 PM](https://github.com/user-attachments/assets/0f7e2f64-2566-498e-9434-ac28ea0d7e70)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-10-07 23:04:03+00:00,['iethree'],2024-10-08 16:13:17+00:00,2024-10-08 13:49:03+00:00,https://github.com/metabase/metabase/pull/48425,"[('.Building & Releasing', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2571637966,pull_request,closed,,Remove duplicate is-clause? fn,"Closes #39333

### Description

Move `mbql-clause?`, `is-clause?`, and `check-clause` from `mbql.u` to `schema.helpers`, and remove the duplicate definition of `is-clause?`.

If we want to reduce churn, we could just have `mbql.u` re-export the symbols from `schema.helpers`, but it seemed better to update all callers to `require` them from the new location.

h/t to @sdduursma as this is a re-implementation of his changes in #40945

### How to verify

No new tests added, but these funcs should be well covered by existing tests.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-07 22:35:23+00:00,['appleby'],2024-10-09 19:31:55+00:00,2024-10-09 19:31:54+00:00,https://github.com/metabase/metabase/pull/48423,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2400250489, 'issue_id': 2571637966, 'author': 'appleby', 'body': ""> I actually think we do want to re-export from `mbql.u`. That's quite common in our `util` namespaces and I find it surprising to be accessing `foo.schema.helpers` from outside `foo.schema` and even more so outside `foo.*`.\r\n\r\nYeah fair enough, was on the fence about this. Will update."", 'created_at': datetime.datetime(2024, 10, 8, 16, 4, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400337057, 'issue_id': 2571637966, 'author': 'appleby', 'body': ""> > I actually think we do want to re-export from `mbql.u`. That's quite common in our `util` namespaces and I find it surprising to be accessing `foo.schema.helpers` from outside `foo.schema` and even more so outside `foo.*`.\r\n> \r\n> Yeah fair enough, was on the fence about this. Will update.\r\n\r\nDone. Fwiw, there are a couple of existing places where we were already using `schema.helpers` outside of the `legacy-mbql` namespace, but they are the exception rather than the rule."", 'created_at': datetime.datetime(2024, 10, 8, 16, 32, 34, tzinfo=datetime.timezone.utc)}]","appleby (Issue Creator) on (2024-10-08 16:04:12 UTC): Yeah fair enough, was on the fence about this. Will update.

appleby (Issue Creator) on (2024-10-08 16:32:34 UTC): Done. Fwiw, there are a couple of existing places where we were already using `schema.helpers` outside of the `legacy-mbql` namespace, but they are the exception rather than the rule.

"
2571556300,pull_request,closed,,🏎️🚀 🏎️🚀 🏎️🚀 Test partitioning for MySQL: shave ~5 minutes off of CI runs 🏎️🚀🏎️🚀 🏎️🚀,"Closes https://github.com/metabase/metabase/issues/45009

Split off from https://github.com/metabase/metabase/pull/47681

Split up our the slowest CI jobs (MySQL and MariaDB) into two separate jobs (one to run the first half of the tests and one to run the second half of the tests) using the new test partitioning features I added to Hawk in https://github.com/metabase/hawk/pull/28 and https://github.com/metabase/hawk/pull/31 

This turns our ~50 minute jobs into one ~45 minute job and one ~15 minute job. I'm still investigating why the split isn't closer to ~30/~30, I think it's because test run time is dominated by a few certain mega-slow tests (SerDes and migration tests)... once this PR lands I'll experiment with splitting tests up into additional jobs or maybe just splitting the migration tests off into their own jobs",camsaul,2024-10-07 21:49:47+00:00,['camsaul'],2024-10-08 19:11:30+00:00,2024-10-08 19:11:28+00:00,https://github.com/metabase/metabase/pull/48422,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2398916323, 'issue_id': 2571556300, 'author': 'piranha', 'body': 'Again seems like failures because some tests were not run?', 'created_at': datetime.datetime(2024, 10, 8, 5, 57, 23, tzinfo=datetime.timezone.utc)}]","piranha on (2024-10-08 05:57:23 UTC): Again seems like failures because some tests were not run?

"
2571525664,pull_request,closed,,tweak sunburst chart styles,"### Description

This PR addresses [feedback](https://metaboat.slack.com/archives/C064QMXEV9N/p1728065779771149) on the sunburst chart styling. It makes slices gap and label rotation consistent for charts with >1 ring.

### Demo

#### Pie chart

No changes at all. Labels are horizontal, the gap is rougly 1°

<img width=""646"" alt=""Screenshot 2024-10-07 at 5 31 12 PM"" src=""https://github.com/user-attachments/assets/a2b18c91-a3ca-4daa-87da-27136b41b8c9"">

#### 2 rings

Before
<img width=""602"" alt=""Screenshot 2024-10-07 at 5 33 59 PM"" src=""https://github.com/user-attachments/assets/f25b1c64-88c5-49bf-83c8-03146180445b"">

After
<img width=""652"" alt=""Screenshot 2024-10-07 at 5 31 04 PM"" src=""https://github.com/user-attachments/assets/0a555374-c7b2-4202-a852-647d02124ebf"">

#### 3 rings

Before
<img width=""628"" alt=""Screenshot 2024-10-07 at 5 34 08 PM"" src=""https://github.com/user-attachments/assets/595d6937-afbb-40cb-84a4-9eb7e90088db"">

After
<img width=""671"" alt=""Screenshot 2024-10-07 at 5 30 56 PM"" src=""https://github.com/user-attachments/assets/b986f9fc-7999-437d-93d3-58db9b559c36"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-07 21:34:55+00:00,['alxnddr'],2024-10-22 13:52:26+00:00,2024-10-22 01:56:14+00:00,https://github.com/metabase/metabase/pull/48421,"[('backport', 'Automatically create PR on current release branch on merge'), ('loki-update', '')]",[],
2571512381,pull_request,closed,,DB Connection swapping PoC,,camsaul,2024-10-07 21:28:13+00:00,['camsaul'],2025-01-08 22:45:56+00:00,2025-01-08 22:45:53+00:00,https://github.com/metabase/metabase/pull/48420,"[('.Team/DevEx', '')]",[],
2571498725,pull_request,closed,,fix(sdk): update utm tags in embedding sdk cli,"Updates the UTM tags for the embedding SDK's CLI to conform with [our specifications](https://www.notion.so/metabase/Product-UTM-Instrumentation-fc47f3584d5b48bea2e0ad02cda0376d?pvs=4).

> I think the strings are not formatted exactly as the spec. It is supposed to use - to separate between keywords and _ as space. So if embedding sdk is a single word, it should be separated by _.",heypoom,2024-10-07 21:19:26+00:00,['heypoom'],2024-10-08 16:13:20+00:00,2024-10-08 08:55:38+00:00,https://github.com/metabase/metabase/pull/48419,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2571311408,pull_request,closed,,Make all icons fixed size,Gets rid of FixedSizeIcon and makes all icons fixed-size,rafpaf,2024-10-07 19:40:02+00:00,['rafpaf'],2025-02-04 17:33:53+00:00,2024-10-15 20:13:46+00:00,https://github.com/metabase/metabase/pull/48417,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2397740588, 'issue_id': 2571311408, 'author': 'rafpaf', 'body': '* **#48417** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48417?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 7, 19, 40, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414918124, 'issue_id': 2571311408, 'author': 'rafpaf', 'body': 'Not relevant right now', 'created_at': datetime.datetime(2024, 10, 15, 20, 13, 46, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-07 19:40:16 UTC): * **#48417** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48417?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-15 20:13:46 UTC): Not relevant right now

"
2571173420,pull_request,closed,,"🤖 backported ""Implement better partitioning and sorting in window functions""","  #48028
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-07 18:37:47+00:00,"['metamben', 'github-automation-metabase']",2024-10-07 18:58:56+00:00,2024-10-07 18:58:55+00:00,https://github.com/metabase/metabase/pull/48416,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2397663190, 'issue_id': 2571173420, 'author': 'metamben', 'body': 'We decided not to backport.', 'created_at': datetime.datetime(2024, 10, 7, 18, 58, 55, tzinfo=datetime.timezone.utc)}]","metamben (Assginee) on (2024-10-07 18:58:55 UTC): We decided not to backport.

"
2571085731,pull_request,closed,,[example] fix question source link in sidesheet,"fixes link to question sources

![Screen Shot 2024-10-07 at 11 42 51 AM](https://github.com/user-attachments/assets/dbcba3db-4c43-4190-96c8-f6bf6dd3a6e0)
",iethree,2024-10-07 17:51:03+00:00,['iethree'],2024-10-07 23:06:48+00:00,2024-10-07 23:06:48+00:00,https://github.com/metabase/metabase/pull/48415,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2571005413,pull_request,closed,,docs - update api and env var docs,Like it says on the tin.,jeff-bruemmer,2024-10-07 17:10:26+00:00,['jeff-bruemmer'],2024-10-09 15:23:29+00:00,2024-10-09 14:38:59+00:00,https://github.com/metabase/metabase/pull/48414,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('no-backport', 'Do not backport this PR to any branch')]",[],
2570991784,pull_request,closed,,[wip: attempt at unblocking CI] Add insights to question and dashboard sidesheets,"This purpose of this PR is to examine another PR – #48283 – to find the cause of the BE/driver failures there.

This commit includes a portion of the files in the PR to see if this prevents the driver/BE test failures.
",rafpaf,2024-10-07 17:02:27+00:00,['rafpaf'],2025-02-04 17:33:47+00:00,2024-10-07 18:32:21+00:00,https://github.com/metabase/metabase/pull/48413,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2397457125, 'issue_id': 2570991784, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/07/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 7, 17, 5, 11, tzinfo=datetime.timezone.utc)}]","graphite-app[bot] on (2024-10-07 17:05:11 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/07/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

"
2570986697,pull_request,closed,,Default to `=` operator when `Filtering on this field` is set to `A list of all values` or `Search box`,"Epic https://github.com/metabase/metabase/issues/48409

`Filtering on this field` - `A list of all values` or `Search box` - are set automatically when there are field values stored during the sync. Setting `Plain input` discards field values. Use this setting to set the default filter operator to `=` when there are field values, regardless of the semantic type.

When the field values for a column satisfy certain constraints, it's possible to set `A list of all values` or `Search box` manually and force the app to store the field values in the app db. Unfortunately, there is no UI feedback when setting these values has no effect.

Please note that it's possible that the setting goes out of sync with the app db state. We could think that there are field values, attempt to fetch them, and get an empty list. In this case the `=` operator will be still selected.

How to verify:
- New -> Question -> People
- Filter -> Email
- Now we default to `=` and not `contains` because there are field values for `Email`.

",ranquild,2024-10-07 16:59:41+00:00,['ranquild'],2024-10-08 16:13:19+00:00,2024-10-08 12:19:57+00:00,https://github.com/metabase/metabase/pull/48412,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2570976683,pull_request,closed,,docs - user provisioning with SCIM,Documents support for SCIM for Okta and Entra.,jeff-bruemmer,2024-10-07 16:55:29+00:00,['jeff-bruemmer'],2024-10-09 20:24:53+00:00,2024-10-09 20:19:53+00:00,https://github.com/metabase/metabase/pull/48411,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2570933329,pull_request,closed,,"🤖 backported ""docs: gauge chart""",#48269,github-automation-metabase,2024-10-07 16:35:04+00:00,"['alexyarosh', 'github-automation-metabase']",2024-10-07 16:36:36+00:00,2024-10-07 16:36:35+00:00,https://github.com/metabase/metabase/pull/48410,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2570836836,pull_request,closed,,Select All follow-ups (QB),"Epic https://github.com/metabase/metabase/issues/48394
Closes https://github.com/metabase/metabase/issues/48395

Changes:
- Rename `Select all` to `Select these` when there is an active search term, make it regular weight
- Make the operator dropdown fit the content
- Remove the border below the column name and the operator
- Fix stacked checkboxes - bg-dark color, same layout as normal ones
- Add a search icon to the search input in filters
- Increase padding in the filter picker footer

How to verify:
- New -> Question -> People
- Filter -> State
- Try changing operators

<img width=""377"" alt=""Screenshot 2024-10-07 at 11 48 19"" src=""https://github.com/user-attachments/assets/dc6158dd-153f-48c9-afa9-558d125c54d7"">
<img width=""383"" alt=""Screenshot 2024-10-07 at 11 48 02"" src=""https://github.com/user-attachments/assets/d4973415-c217-4a58-9eb5-116a125d9747"">
<img width=""381"" alt=""Screenshot 2024-10-07 at 11 48 08"" src=""https://github.com/user-attachments/assets/695ce38f-95c5-41b4-8cb0-d840b19a98ab"">
<img width=""373"" alt=""Screenshot 2024-10-07 at 11 48 36"" src=""https://github.com/user-attachments/assets/e106a475-5506-4efe-bd82-093c0dd9a2bc"">
",ranquild,2024-10-07 15:49:33+00:00,['ranquild'],2024-10-07 22:46:48+00:00,2024-10-07 22:46:47+00:00,https://github.com/metabase/metabase/pull/48405,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', ''), ('loki-update', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2397313517, 'issue_id': 2570836836, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 39ba5b866d76b3c5cacf7a6032f100454661524a...d29bb6ea4340f77dd8dbfd0c4acca868433ba9f1.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx |', 'created_at': datetime.datetime(2024, 10, 7, 15, 56, 3, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397364710, 'issue_id': 2570836836, 'author': 'AlessioLaiso', 'body': 'Everything looks good to me with the exception of the selected state of this icon, where the square in the background kind of merges visually with the one in the forefront. What do we need to do to fix this? Is this an SVG that needs to be tweaked or something that can be done by an engineer?\r\n\r\n<img width=""124"" alt=""Screenshot 2024-10-07 at 17 16 12"" src=""https://github.com/user-attachments/assets/507feefb-5643-4be1-b628-4ea42c8bd87a"">', 'created_at': datetime.datetime(2024, 10, 7, 16, 17, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2397660222, 'issue_id': 2570836836, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit d29bb6ea4340f77dd8dbfd0c4acca868433ba9f1.\n✅ Preview:\n    https://pr48405.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 7, 18, 57, 18, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-07 15:56:03 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 39ba5b866d76b3c5cacf7a6032f100454661524a...d29bb6ea4340f77dd8dbfd0c4acca868433ba9f1.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx |

AlessioLaiso on (2024-10-07 16:17:52 UTC): Everything looks good to me with the exception of the selected state of this icon, where the square in the background kind of merges visually with the one in the forefront. What do we need to do to fix this? Is this an SVG that needs to be tweaked or something that can be done by an engineer?

<img width=""124"" alt=""Screenshot 2024-10-07 at 17 16 12"" src=""https://github.com/user-attachments/assets/507feefb-5643-4be1-b628-4ea42c8bd87a"">

github-actions[bot] on (2024-10-07 18:57:18 UTC): 👋 Deploying a preview environment for commit d29bb6ea4340f77dd8dbfd0c4acca868433ba9f1.
✅ Preview:
    https://pr48405.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2570829868,pull_request,closed,,Support downgrading to 47 from newer versions,"Closes #47232

### Description

This works by inserting dummy changelog executed entries for all the migrations that were aggregated from version 48 onwards.

This was developed against 48, and will need to be forward ported to 49, 50, and master.

### How to verify

1. Start on version 48.
2. `metabase=# select filename, count(*) from databasechangelog group by 1;`
  ```sql
               filename                | count
---------------------------------------+-------
 migrations/001_update_migrations.yaml |   210
```
3. `clojure -M:ee:ee-dev:run migrate down`
4. `metabase=# select filename, count(*) from databasechangelog group by 1;`
  ```sql
               filename                | count
---------------------------------------+-------
 migrations/000_migrations.yaml        |   465
 migrations/001_update_migrations.yaml |   156
```
5. Switch to version 47.
6. `clojure -M:ee:ee-dev:run migrate up`
7. No migrations run, and more importantly: no errors.",crisptrutski,2024-10-07 15:46:49+00:00,['crisptrutski'],2024-10-22 09:31:07+00:00,2024-10-22 09:31:06+00:00,https://github.com/metabase/metabase/pull/48404,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2397327705, 'issue_id': 2570829868, 'author': 'replay-io[bot]', 'body': '<h3></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><b>Status</b></td>\n      <td width=""2000""><a href=""https://app.replay.io/team/dzoyNTM4ZjRmOC05YmFlLTRiYjYtYjljYi1jOGYzOWUyMjRhZWY=/runs?testRunId=623b7f7a-c397-44eb-8191-0d5ca97c087e"" target=""_blank"">Complete ↗︎</a></td>\n    </tr>\n    <tr>\n      <td><b>Commit</b></td>\n      <td>f5fe09cb22a3f15c143a83aa00171dd6b2d29615</td>\n    </tr>\n    <tr>\n      <td valign=""top""><b>Results</b></td>\n      <td><div>⚠️ <b>5 Flaky</b></div>\n<div>✅ <b>2110 Passed</b></div>\n</td>\n    </tr>\n  </tbody>\n</table>', 'created_at': datetime.datetime(2024, 10, 7, 16, 2, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2398532069, 'issue_id': 2570829868, 'author': 'qnkhuat', 'body': ""should we target this PR to 48 only? :D I don't see much reasons to include this on 50, 51"", 'created_at': datetime.datetime(2024, 10, 8, 2, 21, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399085416, 'issue_id': 2570829868, 'author': 'crisptrutski', 'body': '> should we target this PR to 48 only? :D I don\'t see much reasons to include this on 50, 51\r\n\r\nAt risk of stating what you already noticed, this PR is targeting 48.\r\n\r\nI\'d still like to get this forward ported all the way to master as it fixes the ""consolidate migrations"" pattern, which we may end up doing again in a future version.', 'created_at': datetime.datetime(2024, 10, 8, 7, 40, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399244949, 'issue_id': 2570829868, 'author': 'qnkhuat', 'body': "":D sorry I thought this is targeting master, all's good then"", 'created_at': datetime.datetime(2024, 10, 8, 8, 49, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2399822513, 'issue_id': 2570829868, 'author': 'crisptrutski', 'body': ""@qnkhuat @piranha any blockers to a tick?\r\n\r\n~~I think our test SQL server instance is acting up again, so might need a force merge ☹️~~ This branch didn't have our downgrade to the SQL image."", 'created_at': datetime.datetime(2024, 10, 8, 13, 16, 25, tzinfo=datetime.timezone.utc)}]","replay-io[bot] on (2024-10-07 16:02:27 UTC): <h3></h3>
<table>
  <tbody>
    <tr>
      <td><b>Status</b></td>
      <td width=""2000""><a href=""https://app.replay.io/team/dzoyNTM4ZjRmOC05YmFlLTRiYjYtYjljYi1jOGYzOWUyMjRhZWY=/runs?testRunId=623b7f7a-c397-44eb-8191-0d5ca97c087e"" target=""_blank"">Complete ↗︎</a></td>
    </tr>
    <tr>
      <td><b>Commit</b></td>
      <td>f5fe09cb22a3f15c143a83aa00171dd6b2d29615</td>
    </tr>
    <tr>
      <td valign=""top""><b>Results</b></td>
      <td><div>⚠️ <b>5 Flaky</b></div>
<div>✅ <b>2110 Passed</b></div>
</td>
    </tr>
  </tbody>
</table>

qnkhuat on (2024-10-08 02:21:13 UTC): should we target this PR to 48 only? :D I don't see much reasons to include this on 50, 51

crisptrutski (Issue Creator) on (2024-10-08 07:40:32 UTC): At risk of stating what you already noticed, this PR is targeting 48.

I'd still like to get this forward ported all the way to master as it fixes the ""consolidate migrations"" pattern, which we may end up doing again in a future version.

qnkhuat on (2024-10-08 08:49:11 UTC): :D sorry I thought this is targeting master, all's good then

crisptrutski (Issue Creator) on (2024-10-08 13:16:25 UTC): @qnkhuat @piranha any blockers to a tick?

~~I think our test SQL server instance is acting up again, so might need a force merge ☹️~~ This branch didn't have our downgrade to the SQL image.

"
2570767053,pull_request,closed,,Fix unit tests in CollectionInfoSidebar,The serialization token feature is now required for entity ids. This PR updates some tests in light of that change,rafpaf,2024-10-07 15:20:42+00:00,['rafpaf'],2024-10-08 16:13:25+00:00,2024-10-07 16:29:16+00:00,https://github.com/metabase/metabase/pull/48403,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2397231619, 'issue_id': 2570767053, 'author': 'rafpaf', 'body': '* **#48403** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48403?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 7, 15, 20, 59, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-07 15:20:59 UTC): * **#48403** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48403?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2570736312,pull_request,closed,,Remove unnecessary query parameters from create/delete links,"Removes the `params` from creating and deleting public links. I noticed that there is the possibility that we could send _all_ of a card or dashboard's values in the query params, we definitely don't want that.",oisincoveney,2024-10-07 15:08:36+00:00,['oisincoveney'],2024-10-08 16:13:21+00:00,2024-10-08 06:36:12+00:00,https://github.com/metabase/metabase/pull/48401,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2570696308,pull_request,closed,,Add types for current card reducers,"Fixes types on the dashboard API for public/embed methods, and adds some types to the `dashboard` redux reducers.

**_Why?_**
1. The API should exactly reflect what it needs and what it returns. Right now it's a little too generic. It won't affect actual functionality (because TS) but I don't want anyone to be led the wrong way here.
2. I'm adding types and using the builder pattern so we can use the RTK query endpoints for triggering actions with `builder.addMatcher` for things like `createPublicLink` and `deletePublicLink`. This will be done in a followup PR.

This PR is part 1, which focuses on dashboards. The one for dashboards is [here](https://github.com/metabase/metabase/pull/48399)",oisincoveney,2024-10-07 14:57:32+00:00,['oisincoveney'],2024-10-09 07:54:15+00:00,2024-10-09 07:54:13+00:00,https://github.com/metabase/metabase/pull/48400,"[('.Team/Embedding', '')]",[],
2570688518,pull_request,closed,,"Fix types on dashboard API, and add types for dashboard redux","Fixes types on the dashboard API for public/embed methods, and adds some types to the `dashboard` redux reducers.

**_Why?_**
1. I noticed that we were passing params into the public and embed link APIs. I don't think we need it and we shouldn't be doing it
2. I'm adding types and using the builder pattern so we can use the RTK query endpoints for triggering actions with `builder.addMatcher` for things like `createPublicLink` and `deletePublicLink`. This will be done in a followup PR.

This PR is part 1, which focuses on dashboards. The one for cards is [here](https://github.com/metabase/metabase/pull/48400)",oisincoveney,2024-10-07 14:54:48+00:00,['oisincoveney'],2024-10-10 13:09:30+00:00,2024-10-10 11:10:47+00:00,https://github.com/metabase/metabase/pull/48399,"[('.Team/Embedding', '')]","[{'comment_id': 2404477806, 'issue_id': 2570688518, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d6314cc476180c6579238522fa982d4d2c74214b...7041d0870b6d10975bf0f3852718f6f7f2614205.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |', 'created_at': datetime.datetime(2024, 10, 10, 8, 44, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404905868, 'issue_id': 2570688518, 'author': 'oisincoveney', 'body': '@metabase-bot backport release-x.51.x', 'created_at': datetime.datetime(2024, 10, 10, 12, 3, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404905986, 'issue_id': 2570688518, 'author': 'oisincoveney', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 10, 12, 3, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2404908042, 'issue_id': 2570688518, 'author': 'github-actions[bot]', 'body': '@oisincoveney something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11273607300)', 'created_at': datetime.datetime(2024, 10, 10, 12, 4, 29, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-10 08:44:59 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d6314cc476180c6579238522fa982d4d2c74214b...7041d0870b6d10975bf0f3852718f6f7f2614205.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx |

oisincoveney (Issue Creator) on (2024-10-10 12:03:19 UTC): @metabase-bot backport release-x.51.x

oisincoveney (Issue Creator) on (2024-10-10 12:03:23 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-10 12:04:29 UTC): @oisincoveney something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11273607300)

"
2570635209,pull_request,closed,,Allow Box props in Icon,"Make `Icon` work closer to other `metabase/ui` components and allow to pass `Box` props. The only downside is that we cannot filter `styled`  properties automatically this way - so we should migrate from `styled(Icon)<SomeProps>`.

How to verify:
- Find any usage of `Icon`. Try `c=""text-dark""` or `m=""lg""` and see if it works.",ranquild,2024-10-07 14:36:33+00:00,['ranquild'],2024-10-08 16:13:24+00:00,2024-10-07 17:25:52+00:00,https://github.com/metabase/metabase/pull/48398,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2397118319, 'issue_id': 2570635209, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6bcd9acf05b0b7b1086669ff2a217a9215fe3f42...0c153fc33a2492b365d83500bf98de712578d9e2.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx |', 'created_at': datetime.datetime(2024, 10, 7, 14, 37, 57, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-07 14:37:57 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 6bcd9acf05b0b7b1086669ff2a217a9215fe3f42...0c153fc33a2492b365d83500bf98de712578d9e2.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx |

"
2570580845,pull_request,closed,,Update team.json remove Emmad,,perivamsi,2024-10-07 14:18:11+00:00,['perivamsi'],2024-10-08 16:13:26+00:00,2024-10-07 14:21:24+00:00,https://github.com/metabase/metabase/pull/48397,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2569853729,pull_request,closed,,[Notification] Migrate emails,"No need for review as all commits are reviewed individually

Feature branch for Milestone 2 of https://github.com/metabase/metabase/issues/47438",qnkhuat,2024-10-07 09:21:38+00:00,['qnkhuat'],2024-11-26 18:52:39+00:00,2024-10-15 03:16:19+00:00,https://github.com/metabase/metabase/pull/48392,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2569807273,pull_request,closed,,Convert card embedding endpoints to RTK,"Migrates the card embed endpoints to RTK query - these endpoints are  for enabling embedding and setting embedding parameters.

_**Why?**_
We're able to use RTK query now for validating and invalidating lists, instead of using a `key` to ensure that lists are loaded on the embed settings.

It also removes the intermediate `updateEnableEmbedding` and `updateEmbeddingParams` actions, so it should be easier to track things in the future.
",oisincoveney,2024-10-07 09:01:26+00:00,['oisincoveney'],2024-10-10 11:46:42+00:00,2024-10-10 11:46:41+00:00,https://github.com/metabase/metabase/pull/48391,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2568933309,pull_request,closed,,XLSX Pivot Exports/Downloads should also remove pivot-grouping`s cell style,"Fix [#48158](https://github.com/metabase/metabase/issues/48158)

When the `pivot-grouping` column is removed, the corresponding cell style should also be removed. Otherwise, the cell style of the adjacent cells will be incorrect.

Related PR https://github.com/metabase/metabase/pull/47832",givemesomefaces,2024-10-06 22:07:27+00:00,[],2024-10-25 18:33:54+00:00,2024-10-25 18:33:54+00:00,https://github.com/metabase/metabase/pull/48389,[],[],
2568323586,pull_request,closed,,Use correct icon for cards,"before:

![image](https://github.com/user-attachments/assets/27fac389-a193-4643-98b3-267fd979bbb4)


after:

![image](https://github.com/user-attachments/assets/f7e11d45-6821-49cf-bb29-eb00a8ec6fb1)
",rafpaf,2024-10-05 21:02:27+00:00,['rafpaf'],2025-02-04 17:33:28+00:00,2024-10-15 19:52:05+00:00,https://github.com/metabase/metabase/pull/48386,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2395196472, 'issue_id': 2568323586, 'author': 'rafpaf', 'body': '* **#48386** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48386?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 5, 21, 2, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414879341, 'issue_id': 2568323586, 'author': 'rafpaf', 'body': 'Not relevant right now', 'created_at': datetime.datetime(2024, 10, 15, 19, 52, 5, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-05 21:02:40 UTC): * **#48386** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48386?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-15 19:52:05 UTC): Not relevant right now

"
2568320117,pull_request,closed,,Show dashboard tab entity ids in dashboard info sidesheet,"Screenshot of dashboard sidesheet entity id card in this branch:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/dc6b06c0-262d-43f1-aad2-f677ae967a83.png)

[Figma](https://www.figma.com/design/NOCVfjRaqkVhNqNq8jL9mX/Rework-the-info-sidebar-and-entity-actions?node-id=5862-39508&node-type=frame&t=QBBHcnRGM6St88ix-0)

Figma screenshot:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/141984aa-ee97-4a94-8366-360e4bcea85b.png)",rafpaf,2024-10-05 20:52:00+00:00,['rafpaf'],2024-11-26 18:52:39+00:00,2024-10-15 02:42:53+00:00,https://github.com/metabase/metabase/pull/48385,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2395194357, 'issue_id': 2568320117, 'author': 'rafpaf', 'body': '* **#48385** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 5, 20, 52, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395535081, 'issue_id': 2568320117, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/06/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 6, 18, 25, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2412032733, 'issue_id': 2568320117, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 84330bf3d17845c7873bf7363ef3af290cb8f8eb...c4ca88da623c8ae32bb9e71ae18d00df751d98b7.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 10, 14, 19, 13, 32, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-05 20:52:17 UTC): * **#48385** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48385?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-10-06 18:25:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/06/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

github-actions[bot] on (2024-10-14 19:13:32 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 84330bf3d17845c7873bf7363ef3af290cb8f8eb...c4ca88da623c8ae32bb9e71ae18d00df751d98b7.

No notifications.

"
2568280048,pull_request,closed,,Add unit tests for Urls.collection,"Adds some unit tests

The tests uncovered that this function returns `/collection/trash` for trash collections, rather than `/trash` (which is the return value that the authors of the function were intending). I think this is harmless since `/collection/trash` redirects to `/trash`.",rafpaf,2024-10-05 19:17:34+00:00,['rafpaf'],2025-02-04 17:33:40+00:00,2025-01-17 04:05:55+00:00,https://github.com/metabase/metabase/pull/48384,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2395163456, 'issue_id': 2568280048, 'author': 'rafpaf', 'body': '* **#48384** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48384?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈 <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48384?utm_source=stack-comment-view-in-graphite"" target=""_blank"">(View in Graphite)</a>\n* `master`\n\n\n<h2></h2>\n\nThis stack of pull requests is managed by <a href=""https://graphite.dev?utm-source=stack-comment""><b>Graphite</b></a>. Learn more about <a href=""https://stacking.dev/?utm_source=stack-comment"">stacking</a>.\n<!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 5, 19, 17, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2522110166, 'issue_id': 2568280048, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/51088_tests-667fee14-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/8-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>Cache invalidation for dashboards and questions oss questions can inherit adaptive strategy from instance-wide default policy</code> | The \\`cy.wait()\\` command timed out waiting for the first request to the route \\`cardQuery86\\`, but no request was made. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=298972d3-b538-5bf0-b14d-a176dce7a19b) |\n| <code>Cache invalidation for dashboards and questions oss dashboards can inherit adaptive strategy from instance-wide default policy</code> | The test timed out while trying to find an element with the text ""Old Value"" in the UI. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=cf91ab82-059d-5a29-87d2-c07102815abc) |\n| <code>Cache invalidation for dashboards and questions ee no-caching policy questions can use no-caching policy</code> | The test timed out while trying to find an element with data-testid ""visualization-root"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=f7583a91-dfcb-5c5b-81d3-68d4fb755890) |\n| <code>Cache invalidation for dashboards and questions ee no-caching policy questions can inherit no-caching policy from database</code> | The test timed out while trying to find an element with data-testid ""visualization-root"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=0c99c563-62cb-56d4-b10e-3f4885570dd3) |\n\n[... and 4 more](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE)\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 12, 6, 4, 40, 51, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-05 19:17:48 UTC): * **#48384** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48384?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈 <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48384?utm_source=stack-comment-view-in-graphite"" target=""_blank"">(View in Graphite)</a>
* `master`


<h2></h2>

This stack of pull requests is managed by <a href=""https://graphite.dev?utm-source=stack-comment""><b>Graphite</b></a>. Learn more about <a href=""https://stacking.dev/?utm_source=stack-comment"">stacking</a>.
<!-- Current dependencies on/for this PR: -->

trunk-io[bot] on (2024-12-06 04:40:51 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/51088_tests-667fee14-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/8-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>Cache invalidation for dashboards and questions oss questions can inherit adaptive strategy from instance-wide default policy</code> | The \`cy.wait()\` command timed out waiting for the first request to the route \`cardQuery86\`, but no request was made. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=298972d3-b538-5bf0-b14d-a176dce7a19b) |
| <code>Cache invalidation for dashboards and questions oss dashboards can inherit adaptive strategy from instance-wide default policy</code> | The test timed out while trying to find an element with the text ""Old Value"" in the UI. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=cf91ab82-059d-5a29-87d2-c07102815abc) |
| <code>Cache invalidation for dashboards and questions ee no-caching policy questions can use no-caching policy</code> | The test timed out while trying to find an element with data-testid ""visualization-root"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=f7583a91-dfcb-5c5b-81d3-68d4fb755890) |
| <code>Cache invalidation for dashboards and questions ee no-caching policy questions can inherit no-caching policy from database</code> | The test timed out while trying to find an element with data-testid ""visualization-root"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE&runId=0c99c563-62cb-56d4-b10e-3f4885570dd3) |

[... and 4 more](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment&runConclusion=FAILURE)
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48384?repo=metabase/metabase&commitHash=667fee142d94807f4652f76c0a87bd90a77a3b81&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

"
2568278878,pull_request,closed,,"(wip, do not merge) Add insights to question and dashboard sidesheets (new PR to avoid unrelated CI failures)","_I've removed/reset some files to see if this removes the unrelated zip errors in driver tests_:
* the usage analytics PNG
* UpsellCard.stories.tsx
* ./frontend/src/metabase/ui/components/icons/Icon/icons/gem.svg

----

In the dashboard and question sidebars, give EE admins a link to insights:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/1dd32139-0b87-4154-92d7-d2756309b1ce.png)

In the dashboard and question sidebars, give OSS admins a tab with an Insights upsell:
![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/b6e345a1-a348-4a68-adf0-3d0d01c09a5f.png)

",rafpaf,2024-10-05 19:14:22+00:00,['rafpaf'],2025-02-04 17:33:19+00:00,2024-10-07 18:56:36+00:00,https://github.com/metabase/metabase/pull/48383,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2395162490, 'issue_id': 2568278878, 'author': 'rafpaf', 'body': '* **#48383** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48383?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 5, 19, 14, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395163026, 'issue_id': 2568278878, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55a42c7e800587d6302d3461a93d805b38552bb3...9811b33ebadc828d85866609aaa32316c9229940.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/gem.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts |', 'created_at': datetime.datetime(2024, 10, 5, 19, 16, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2395164152, 'issue_id': 2568278878, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/05/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 10, 5, 19, 20, 10, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-10-05 19:14:37 UTC): * **#48383** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48383?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-10-05 19:16:18 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 55a42c7e800587d6302d3461a93d805b38552bb3...9811b33ebadc828d85866609aaa32316c9229940.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/gem.svg<br>frontend/src/metabase/ui/components/icons/Icon/icons/index.ts |

graphite-app[bot] on (2024-10-05 19:20:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR • (10/05/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

"
2567620443,pull_request,closed,,add iframe dashcards tracking,"### Description

Adds a new Snowplow event to track the creation of iframe dashcards. Although this event is similar with other cards creation events, since we want to track the hostnames of the iframe, we must fire the event when the actual dashcard is about to be created and we can access its content — before saving dashboards. This is different from link cards creation tracking where we fire event immediately once it is added to dashboard in editing mode before saving.

### How to verify

[This E2E spec](https://github.com/metabase/metabase/pull/48382/files#diff-cfb3a167f618f4bcc7c0e578d6485d27a884ef0d24609e570160407d6b4e2dd1R1140) should pass.

- Enable analytics tracking
- Create a dashboard
- While editing add iframe dashcards and save
- Ensure `new_iframe_card_created` event is fired with the hostname of the iframe content

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-10-05 03:17:26+00:00,['alxnddr'],2024-10-09 00:09:13+00:00,2024-10-08 21:48:09+00:00,https://github.com/metabase/metabase/pull/48382,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2567515251,pull_request,closed,,[Auto Clean-up] Add alert prompting admins to clean up a collection,"Closes #48348

### Description

Makes collection clean up more visible via an alert making admins aware of the feature for collection withs stale content.
This PR does not implement the ability to dismiss it, we're going to ship without it then add as a fast follow ([see slack thread](https://metaboat.slack.com/archives/C079CR0C27J/p1728071808761629?thread_ts=1728069240.941279&cid=C079CR0C27J)).
This PR also changes the default staleness threshold from 6 months to 3.

### How to verify

- As an admin, visit a collection with content that's over 3 months old (use `POST /api/testing/mark-stale` to create stale content if you need)
- As an admin, visit a collection without stale content
- As a non-admin, visit collections w/ + w/o stale content to verify it does not appear

### Demo
When not shown
![CleanShot 2024-10-04 at 17 47 59@2x](https://github.com/user-attachments/assets/48843bb5-f6a0-4369-8884-2c1f89af13c4)
When shown
![CleanShot 2024-10-08 at 09 15 30@2x](https://github.com/user-attachments/assets/f3042d0b-2e83-428a-9301-c70f3850ebde)
Clicking the link in the alert takes you to the clean up modal page
![CleanShot 2024-10-04 at 17 48 26@2x](https://github.com/user-attachments/assets/35c08004-44d9-4859-a460-a1403e6127de)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR",sloansparger,2024-10-04 23:04:18+00:00,['sloansparger'],2024-11-21 17:20:46+00:00,2024-11-21 17:20:43+00:00,https://github.com/metabase/metabase/pull/48381,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2491422966, 'issue_id': 2567515251, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n![Static Badge](https://img.shields.io/badge/20_tests-36b1f188-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/1-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)\n\n\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>delay-queue-test</code> | failure\\$1text: queue\\$1test.clj:92expected: (nil? (queue/take-delayed-batch! q 3 90 0))  actual: (not (nil? [1621186346553 1621185266774])) | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48381?repo=metabase/metabase&commitHash=36b1f18803b44244a3ad777b4f0da6b9b640a643&utm_source=gh-comment&runConclusion=FAILURE&runId=07476223-488f-571f-8a1f-9aea289d580b) |\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48381?repo=metabase/metabase&commitHash=36b1f18803b44244a3ad777b4f0da6b9b640a643&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 21, 14, 45, 15, tzinfo=datetime.timezone.utc)}]","trunk-io[bot] on (2024-11-21 14:45:15 UTC): <!-- Trunk Test Analytics -->


![Static Badge](https://img.shields.io/badge/20_tests-36b1f188-purple) &ensp; ![Static Badge](https://img.shields.io/badge/0-failed-crimson) &ensp; ![Static Badge](https://img.shields.io/badge/1-flaky-red) &ensp; ![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)


| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>delay-queue-test</code> | failure\$1text: queue\$1test.clj:92expected: (nil? (queue/take-delayed-batch! q 3 90 0))  actual: (not (nil? [1621186346553 1621185266774])) | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48381?repo=metabase/metabase&commitHash=36b1f18803b44244a3ad777b4f0da6b9b640a643&utm_source=gh-comment&runConclusion=FAILURE&runId=07476223-488f-571f-8a1f-9aea289d580b) |
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48381?repo=metabase/metabase&commitHash=36b1f18803b44244a3ad777b4f0da6b9b640a643&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests/github-pull-request-comments?utm_source=gh-comment)

</sub>

"
2567479940,pull_request,closed,,Allow filter params targeting native stages,"Closes #48258 

### Description

Move filters on nested native stages to parent stage in `expand-mbql-params`, similar to the existing handling in `move-join-condition-to-source-query`.

This fixes filter params that directly target a native stage with a non-negative `:stage-number`, e.g. when applying
dashboard filters to a card where the card query is native.

### How to verify

Run the BE test included in this PR, or the existing e2e test in 

https://github.com/metabase/metabase/blob/92d615073a3ba31710e26be9f2e83141352d1d1c/e2e/test/scenarios/dashboard-filters/dashboard-filters-nested.cy.spec.js#L26


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-10-04 22:14:42+00:00,['appleby'],2024-10-07 16:01:06+00:00,2024-10-07 16:01:04+00:00,https://github.com/metabase/metabase/pull/48379,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2567470672,pull_request,closed,,"🤖 backported ""Add Release Channel selection in-product""","  #48126
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-10-04 22:03:22+00:00,"['iethree', 'github-automation-metabase']",2024-10-15 12:48:27+00:00,2024-10-15 12:48:27+00:00,https://github.com/metabase/metabase/pull/48378,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2413823906, 'issue_id': 2567470672, 'author': 'iethree', 'body': 'replaced with https://github.com/metabase/metabase/pull/48731', 'created_at': datetime.datetime(2024, 10, 15, 12, 48, 27, tzinfo=datetime.timezone.utc)}]","iethree (Assginee) on (2024-10-15 12:48:27 UTC): replaced with https://github.com/metabase/metabase/pull/48731

"
2567334628,pull_request,closed,,[Databricks] Address initial remarks,This PR addresses initial remarks that driver received as in [this slack thread](https://metaboat.slack.com/archives/C07HJBQ9VAN/p1727465195712169).,lbrdnk,2024-10-04 20:47:43+00:00,['lbrdnk'],2024-10-08 09:16:05+00:00,2024-10-08 09:16:04+00:00,https://github.com/metabase/metabase/pull/48377,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2567326966,pull_request,closed,,Simple API for storing KV pairs per-user,"https://www.notion.so/metabase/Easier-Product-Call-Outs-11569354c90180de84aac20ad872143f

https://www.notion.so/metabase/Tech-Generic-user-specific-state-storage-14369354c901807390cbd89a381e8c12#15169354c9018096820ccf20a62e38e0



Provide a very simple store - essentially a set of keys. This is intended for use as a way to allow the frontend to do very lightweight things like ""this user dismissed this modal, don't show it again"" or ""this user was shown some Thing, don't show it again"", etc.

Each KV-pair is stored for a particular user, in a particular context.

Each context has a malli schema that allows frontend folks to easily define a schema within a given context - for example, one context could only have integer values, or a defined set of allowed keys, etc. In development, these schemas are automatically reloaded anytime they change, while in production they're only read once.",johnswanson,2024-10-04 20:44:38+00:00,['johnswanson'],2025-01-27 22:12:50+00:00,2024-12-20 23:48:41+00:00,https://github.com/metabase/metabase/pull/48376,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2401176902, 'issue_id': 2567326966, 'author': 'qnkhuat', 'body': 'would be interested to know the reasoning behind the change from a generic kv store to the new use-case specific model.', 'created_at': datetime.datetime(2024, 10, 9, 3, 5, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2405688569, 'issue_id': 2567326966, 'author': 'johnswanson', 'body': ""@qnkhuat / @piranha / @crisptrutski sorry, this got a bit more attention than I think it might've been ready for 😅 we're still a bit uncertain about exactly what we need, and this was more a POC/spike than a full fledged PR.\r\n\r\nPart of me does like the more generic version, but I'm a little worried that something totally open-ended also opens the door for use cases we don't necessarily want, and so far I at least can't think of any good use cases for storing things besides booleans from the frontend. Is it worth building something more generic if that adds some risk if we don't have a tangible, immediate benefit from it?\r\n\r\nSee [here](https://www.notion.so/metabase/Easier-Product-Call-Outs-11569354c90180de84aac20ad872143f) for the motivation here if you're curious."", 'created_at': datetime.datetime(2024, 10, 10, 17, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2407083722, 'issue_id': 2567326966, 'author': 'piranha', 'body': '@johnswanson I\'ve been thinking that a more generic system could solve our `user_parameter_value` needs too, as just a generic ""store this key/value"" approach.', 'created_at': datetime.datetime(2024, 10, 11, 10, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2498254138, 'issue_id': 2567326966, 'author': 'trunk-io[bot]', 'body': '<!-- Trunk Test Analytics -->\n\n\n[![Static Badge](https://img.shields.io/badge/125110_tests-192fcb76-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/2-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=QUARANTINED)\n\n\n| Failed Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>e2e-storage-ingestion-test</code> | Expected entity to match the expected value, but actual value was different. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=064f03e6-a3a2-5417-8744-dd347310d907) |\n\n\n| Flaky Test | Failure Summary | Logs |\n| --- | --- | --- |\n| <code>set-stage-number-in-viz-settings-parameter-mappings-test</code> | Expected parameterMappings to have stage numbers, but they were missing. | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=37a1faa8-f8c0-5ecd-a2ae-dfe85f6e63fb) |\n| <code>issue 16886 shouldn\'t remove parts of the query when choosing \'Run selected text\' (metabase\\#16886)</code> | The test timed out while trying to find an element with data-testid ""scalar-value"". | [Logs\xa0↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=f46f4ba4-ca7e-53cd-ab52-4a66402abb2b) |\n<sub>\n\n[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)\n\n</sub>', 'created_at': datetime.datetime(2024, 11, 25, 14, 58, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2557680474, 'issue_id': 2567326966, 'author': 'noahmoss', 'body': ""For onlookers: we want to get this merged because it's been open for quite a while, and we want to get a basic implementation landed so that we can start building on it and figure out what we _actually_ need from this.\r\n\r\nTo that end, I've taken this over from John, and I've simplified the bulk fetch endpoint to just take a namespace and return all the keys in the namespace for the current user. (Accepting a list of keys as query params isn't working for still-unknown reasons. And after some discussion we decided that this can be omitted for v1.) Also cleaned up the tests a bit and added a couple more assertions.\r\n\r\nFurther review is appreciated, but any extensions to the existing functionality we'll probably save to future PRs for the sake of efficient prioritization."", 'created_at': datetime.datetime(2024, 12, 20, 20, 32, 15, tzinfo=datetime.timezone.utc)}]","qnkhuat on (2024-10-09 03:05:23 UTC): would be interested to know the reasoning behind the change from a generic kv store to the new use-case specific model.

johnswanson (Issue Creator) on (2024-10-10 17:36:00 UTC): @qnkhuat / @piranha / @crisptrutski sorry, this got a bit more attention than I think it might've been ready for 😅 we're still a bit uncertain about exactly what we need, and this was more a POC/spike than a full fledged PR.

Part of me does like the more generic version, but I'm a little worried that something totally open-ended also opens the door for use cases we don't necessarily want, and so far I at least can't think of any good use cases for storing things besides booleans from the frontend. Is it worth building something more generic if that adds some risk if we don't have a tangible, immediate benefit from it?

See [here](https://www.notion.so/metabase/Easier-Product-Call-Outs-11569354c90180de84aac20ad872143f) for the motivation here if you're curious.

piranha on (2024-10-11 10:09:00 UTC): @johnswanson I've been thinking that a more generic system could solve our `user_parameter_value` needs too, as just a generic ""store this key/value"" approach.

trunk-io[bot] on (2024-11-25 14:58:40 UTC): <!-- Trunk Test Analytics -->


[![Static Badge](https://img.shields.io/badge/125110_tests-192fcb76-purple)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment) &ensp; [![Static Badge](https://img.shields.io/badge/1-failed-crimson)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/2-flaky-red)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE) &ensp; [![Static Badge](https://img.shields.io/badge/0-quarantined-yellow)](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=QUARANTINED)


| Failed Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>e2e-storage-ingestion-test</code> | Expected entity to match the expected value, but actual value was different. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=064f03e6-a3a2-5417-8744-dd347310d907) |


| Flaky Test | Failure Summary | Logs |
| --- | --- | --- |
| <code>set-stage-number-in-viz-settings-parameter-mappings-test</code> | Expected parameterMappings to have stage numbers, but they were missing. | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=37a1faa8-f8c0-5ecd-a2ae-dfe85f6e63fb) |
| <code>issue 16886 shouldn't remove parts of the query when choosing 'Run selected text' (metabase\#16886)</code> | The test timed out while trying to find an element with data-testid ""scalar-value"". | [Logs ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment&runConclusion=FAILURE&runId=f46f4ba4-ca7e-53cd-ab52-4a66402abb2b) |
<sub>

[View Full Report ↗︎](https://app.trunk.io/metabase/flaky-tests/pr/48376?repo=metabase/metabase&commitHash=192fcb766a6c4b690ceef6f75266d387dccbd615&utm_source=gh-comment) ⋅ [Docs](https://docs.trunk.io/flaky-tests?utm_source=gh-comment)

</sub>

noahmoss on (2024-12-20 20:32:15 UTC): For onlookers: we want to get this merged because it's been open for quite a while, and we want to get a basic implementation landed so that we can start building on it and figure out what we _actually_ need from this.

To that end, I've taken this over from John, and I've simplified the bulk fetch endpoint to just take a namespace and return all the keys in the namespace for the current user. (Accepting a list of keys as query params isn't working for still-unknown reasons. And after some discussion we decided that this can be omitted for v1.) Also cleaned up the tests a bit and added a couple more assertions.

Further review is appreciated, but any extensions to the existing functionality we'll probably save to future PRs for the sake of efficient prioritization.

"
2567233588,pull_request,closed,,docs - iframe cards,Adds docs for iframe cards on dashboards.,jeff-bruemmer,2024-10-04 19:56:23+00:00,['jeff-bruemmer'],2024-10-08 16:13:27+00:00,2024-10-07 14:02:01+00:00,https://github.com/metabase/metabase/pull/48375,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2567066560,pull_request,closed,,[MS1] Better Onboarding UX,"### What does this PR accomplish?
- Resolves #48335
- Resolves #48380

> [!TIP]
> All of the information you need to review this PR is in the previously linked _Milestone_ and _Testing plan_ issues. But the tl;dr is:
>
> **We're adding an educational section fixed at the very bottom of the main navigation sidebar.**

It has two parts:
1. _How to use Metabase_ link to the external Metabase learn content (shown to everyone always) [^1]
2. _Add data_ section (shown only to admins)

Add data's function is to facilitate faster data upload, which gives Metabase admin more value out of Metabase sooner.
They can either (1) Add a database, or (2) Upload a spreadsheet.

> [!IMPORTANT]
> Since this button can be accessed from **any** page, all CSV uploads are hooked up to go to the root collection!

---
### How it interacts with the existing UI elements with similar functionality?
- Completely replaces ""Add your own data"" button from the sidebar
- Completely replaces ""Upload CSVs"" button from the sidebar [^2]
- Doesn't interfere with the existing upload buttons present in collections

### Design system / component library considerations
We're adding a new (`learn`) icon. No other changes have been made.

### Documentation implication
@metabase/writers might have to update the documentation after this PR gets merged to `master`. Since we're backporting it to the current 50.x release, some changes might be needed in that branch as well.

---
### Analytics
Two new simple events are being sent to Snowplow. [^3]
End-to-end tests are put in place to ensure this functionality.

### Testing
- The majority of these changes were possible to cover with Jest integration tests.
- There are also some end-to-end tests in the newly added `add-initial-data.cy.spec.ts`

The PR is touching a lot of completely unrelated tests because they had unscoped `cy.icon(""add_data"")` selector. We're adding the same icon to the sidebar now. The solution was to use more semantic `cy.findByLabelText(""Custom column"")` selector.

Adding `uploadFile` action to the sidebar affected some related unit/integration tests. Fixed by 9f2bad1f21ebdcbfb1dfd3998ce6900c0318b9a3.

[^1]: This link will be transformed to an in-app link to the new route that contains the onboarding checklist. That is the scope of the future milestone of this project.
[^2]: Added specifically for the DWH instances during [this project](https://github.com/metabase/metabase/issues/42381).
[^3]: We're removing the obsolete `csv_upload_clicked` simple event.",nemanjaglumac,2024-10-04 18:41:49+00:00,['nemanjaglumac'],2024-10-08 19:02:47+00:00,2024-10-08 17:40:57+00:00,https://github.com/metabase/metabase/pull/48369,"[('backport', 'Automatically create PR on current release branch on merge'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2394360870, 'issue_id': 2567066560, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 313fde98793fa2e390e3b534ea7cb7d7e15a8cec...6384a3525c0f9e6105d8a664d40b9beac4d38f10.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |', 'created_at': datetime.datetime(2024, 10, 4, 18, 43, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2396310326, 'issue_id': 2567066560, 'author': 'nemanjaglumac', 'body': ""> Only looked at the new events and they look valid to me 👍 . Maybe @npretto or @ranquild want to have another sanity check as well on those.\r\n\r\nThanks.\r\nYes, I tagged you specifically because of those new analytic events since this is the first time I'm working with them (since the overhaul)."", 'created_at': datetime.datetime(2024, 10, 7, 8, 50, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2396313889, 'issue_id': 2567066560, 'author': 'github-actions[bot]', 'body': '👋 Deploying a preview environment for commit 6384a3525c0f9e6105d8a664d40b9beac4d38f10.\n✅ Preview:\n    https://pr48369.coredev.metabase.com\n🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 10, 7, 8, 52, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400605153, 'issue_id': 2567066560, 'author': 'nemanjaglumac', 'body': '@metabase-bot backport release-x.50.x', 'created_at': datetime.datetime(2024, 10, 8, 19, 1, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2400607383, 'issue_id': 2567066560, 'author': 'github-actions[bot]', 'body': '@nemanjaglumac something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11241974929)', 'created_at': datetime.datetime(2024, 10, 8, 19, 2, 45, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-10-04 18:43:13 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 313fde98793fa2e390e3b534ea7cb7d7e15a8cec...6384a3525c0f9e6105d8a664d40b9beac4d38f10.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/icons/index.ts<br>frontend/src/metabase/ui/components/icons/Icon/icons/learn.svg |

nemanjaglumac (Issue Creator) on (2024-10-07 08:50:40 UTC): Thanks.
Yes, I tagged you specifically because of those new analytic events since this is the first time I'm working with them (since the overhaul).

github-actions[bot] on (2024-10-07 08:52:16 UTC): 👋 Deploying a preview environment for commit 6384a3525c0f9e6105d8a664d40b9beac4d38f10.
✅ Preview:
    https://pr48369.coredev.metabase.com
🗒️ [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

nemanjaglumac (Issue Creator) on (2024-10-08 19:01:35 UTC): @metabase-bot backport release-x.50.x

github-actions[bot] on (2024-10-08 19:02:45 UTC): @nemanjaglumac something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/11241974929)

"
2567056206,pull_request,closed,,sunburst click behavior e2e test,"### Description

Adding a test for click behavior per feedback on https://github.com/metabase/metabase/pull/47208

### Demo

https://github.com/user-attachments/assets/dc221a9c-4c2e-4acd-b642-31f64c00f2de

Stress test: https://github.com/metabase/metabase/actions/runs/11187647682
 
### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-10-04 18:37:01+00:00,['alxnddr'],2024-10-08 16:13:30+00:00,2024-10-05 21:03:53+00:00,https://github.com/metabase/metabase/pull/48367,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2394352541, 'issue_id': 2567056206, 'author': 'EmmadUsmani', 'body': '* **#48367** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48367?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 10, 4, 18, 37, 16, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-10-04 18:37:16 UTC): * **#48367** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/48367?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> 👈
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2567021834,pull_request,open,,Entity Picker Search gracefully handle API errors,"Closes https://github.com/metabase/metabase/issues/45586

### Description
In the event that the API returns an error or non-json response on search, we should handle this gracefully. Previously, the entity picker would either display an infinite loading indicator, or it would crash completely. Now, we will display a search panel with an error message

### How to verify

1. Find a way to force an error with the `/search` endpoint (this can be done in chrome by right clicking a search request and selecting ""block request url""
2. Open the entity picker (new => dashbaord => pick collection), and perform a search
3. You should see an error message displayed in the picker

### Demo
![image](https://github.com/user-attachments/assets/a019f189-6e59-41e7-9c21-44bda3b9887e)

### Checklist

- [s] Tests have been added/updated to cover changes in this PR
",npfitz,2024-10-04 18:21:43+00:00,['npfitz'],2024-12-13 18:18:03+00:00,,https://github.com/metabase/metabase/pull/48366,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2566986278,pull_request,closed,,docs - databricks,Adds page for databricks.,jeff-bruemmer,2024-10-04 18:05:32+00:00,['jeff-bruemmer'],2024-10-08 16:13:32+00:00,2024-10-04 18:36:24+00:00,https://github.com/metabase/metabase/pull/48365,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2566753998,pull_request,closed,,don't bundle the deps,"Other than the changes in the commit, the host app needed
```
    ""esbuild-plugin-react-virtualized"": ""^1.0.4"",
    ""events"": ""^3.3.0"",
    ""querystring"": ""^0.2.1"",
 ```
 
 the plugin is for vite, the other two we should be able to add as deps of the sdk and we should be good",npretto,2024-10-04 16:34:13+00:00,['npretto'],2025-02-04 14:55:14+00:00,2024-10-16 07:31:03+00:00,https://github.com/metabase/metabase/pull/48360,"[('.Team/Embedding', '')]",[],
