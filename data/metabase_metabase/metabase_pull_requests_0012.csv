id,type,state,state_reason,title,body,author,created_at,assignees,updated_at,closed_at,url,labels,comments_list,comment_thread
2479384545,pull_request,closed,,"ü§ñ backported ""Add missing day in :minute timestamp formatter""",#47104,github-automation-metabase,2024-08-21 22:48:54+00:00,"['adam-james-v', 'github-automation-metabase']",2024-08-21 23:40:38+00:00,2024-08-21 23:40:37+00:00,https://github.com/metabase/metabase/pull/47107,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2479199779,pull_request,closed,,feat: BigQuery nested fields,"Fixes #2662 

Updates dataset definitions to allow `nested-fields`

Adds the `::sql.qp/nfc-path` to include nfc-path in the field identifier.

",snoe,2024-08-21 21:44:39+00:00,['snoe'],2024-09-11 16:15:11+00:00,2024-08-23 22:05:17+00:00,https://github.com/metabase/metabase/pull/47106,"[('no-backport', 'Do not backport this PR to any branch'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2307639410, 'issue_id': 2479199779, 'author': 'github-actions[bot]', 'body': 'üëã Deploying a preview environment for commit cce8b94f2aa826b01c17f0f59f2c6e4ab19a41d6.\n‚úÖ Preview:\n    https://pr47106.coredev.metabase.com\nüóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 8, 23, 18, 54, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2344100784, 'issue_id': 2479199779, 'author': 'cbeauch', 'body': ""Hey @snoe, from a user perspective how does this work? I created a table with a nested field and was hoping to be able to filter on the values from the GUI. My only options are empty or not empty. I'm on v1.50.22"", 'created_at': datetime.datetime(2024, 9, 11, 16, 15, 9, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-23 18:54:16 UTC): üëã Deploying a preview environment for commit cce8b94f2aa826b01c17f0f59f2c6e4ab19a41d6.
‚úÖ Preview:
    https://pr47106.coredev.metabase.com
üóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

cbeauch on (2024-09-11 16:15:09 UTC): Hey @snoe, from a user perspective how does this work? I created a table with a nested field and was hoping to be able to filter on the values from the GUI. My only options are empty or not empty. I'm on v1.50.22

"
2479199399,pull_request,closed,,"ü§ñ backported ""Make sure we insert special segmented permission paths for sandboxed tables on downgrade to 49""",#47085,github-automation-metabase,2024-08-21 21:44:26+00:00,"['noahmoss', 'github-automation-metabase']",2024-08-22 02:19:07+00:00,2024-08-22 02:19:07+00:00,https://github.com/metabase/metabase/pull/47105,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2479118259,pull_request,closed,,Add missing day in :minute timestamp formatter,"Fixes #47090

For some reason, the default date time formatting string for `:minute` temporal units did not include the day.
This PR adds that into the default, just like we have for `:hour` and `:week`",adam-james-v,2024-08-21 21:04:42+00:00,['adam-james-v'],2024-08-21 22:48:06+00:00,2024-08-21 22:48:06+00:00,https://github.com/metabase/metabase/pull/47104,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2479103054,pull_request,closed,,"Repro #42773: ""-modified"" suffix briefly shown in a model's name input during creation","### What does this PR accomplish?
It adds E2E reproduction for #42773, which confirms that the issue has been fixed on `master`.

### Before
The test utilizes extremely short timeout of 10ms in order to catch this string while it's still in the DOM. I've removed the fix from `master` to verify that we can consistently test this, and the test failed every single time.
![image](https://github.com/user-attachments/assets/1193721d-94eb-4323-9262-7ab5aaa25044)

In order to verify that the test catches the issue, please apply this patch on `master`:
```
diff --git a/frontend/src/metabase/components/SaveQuestionForm/context.tsx b/frontend/src/metabase/components/SaveQuestionForm/context.tsx
index 0528b065d0..86f9892255 100644
--- a/frontend/src/metabase/components/SaveQuestionForm/context.tsx
+++ b/frontend/src/metabase/components/SaveQuestionForm/context.tsx
@@ -32,14 +32,12 @@ export const SaveQuestionContext =
 
 export const SaveQuestionProvider = ({
   question,
-  originalQuestion: latestOriginalQuestion,
+  originalQuestion,
   onCreate,
   onSave,
   multiStep = false,
   children,
 }: PropsWithChildren<SaveQuestionProps>) => {
-  const [originalQuestion] = useState(latestOriginalQuestion); // originalQuestion from props changes during saving
-
   const defaultCollectionId = useGetDefaultCollectionId(
     originalQuestion?.collectionId(),
   );
```

### After
The test is reliably passing
![image](https://github.com/user-attachments/assets/bd8a3ba4-78c0-49ed-996b-10748df206d4)

### Stress-test
50/50 ‚úÖ https://github.com/metabase/metabase/actions/runs/10497508100

### Additional notes
I'll cherry pick this repro to #47086 to finally fix it in the release-x.50.x branch as well.",nemanjaglumac,2024-08-21 20:57:45+00:00,['nemanjaglumac'],2024-10-08 16:16:44+00:00,2024-08-21 21:52:10+00:00,https://github.com/metabase/metabase/pull/47103,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2479069536,pull_request,closed,,fix pivot table overflow,"Closes https://github.com/metabase/metabase/issues/46928
Closes https://github.com/metabase/metabase/issues/47019

### Description

Fixes unnecessary pivot table overflow that causes having additional scroll bars.

### How to verify

- Create a pivot table with 3 row columns
- Add it on a dashboard and try different dashcard sizes:
  - Narrow so that there is no or little (<240px) table body visible ‚Äî should have outer horizontal scroll
  - Wide enough so there is more than 240px for the table body: should not have an outer scroll
  - At no point it should have outer vertical scroll

Also verify there is no scroll glitch in the edit mode while resizing or moving the card.

### Demo

**Before**
Scroll bars glitching in the edit mode
<video src=""https://github.com/user-attachments/assets/e7046509-2896-44a1-8bae-1824e5c756c8"" />

Unnecessary vertical scroll bar:
<img width=""575"" alt=""Screenshot 2024-08-21 at 8 49 28‚ÄØPM"" src=""https://github.com/user-attachments/assets/6cfaead1-0819-4e73-a20e-fbf440d743fd"">

**After**
No scroll bars in the edit mode
<video src=""https://github.com/user-attachments/assets/12237269-68a1-4538-a67f-21c43f0478a8"" />

No unnecessary vertical scroll bar
<img width=""560"" alt=""Screenshot 2024-08-21 at 8 49 43‚ÄØPM"" src=""https://github.com/user-attachments/assets/9341ab43-3b46-4754-98aa-d98e1ab88fec"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR ‚Äî visual 
",alxnddr,2024-08-21 20:42:24+00:00,['alxnddr'],2024-08-22 15:55:49+00:00,2024-08-22 15:55:48+00:00,https://github.com/metabase/metabase/pull/47102,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2479035398,pull_request,closed,,Basic Sidesheet Components,"
Closes https://github.com/metabase/metabase/issues/46639

### Description

Creates basic sidesheet components, and storybook stories for all of it

- `Sidesheet` - main container
- `SidesheetSubPage` - variant of main container with a special header
- `SidesheetCard` - card for use in sidesheets
- `SidesheetCardSection` - sections within cards
- `SidesheetButton`- idiomatic button for use in the sidesheet
- `SidesheetButtonWithChevron` - another button with a chevron that shows up a lot in designs
- `SidesheetTabPanelContainer` - so you don't have to reinvent the flexbox wheel to get tabs to stick to the top

![withtabs](https://github.com/user-attachments/assets/99f1d94f-069b-4208-8c27-8fbff2d5de55)

![subpageSidesheets](https://github.com/user-attachments/assets/7b86da07-2092-4d17-8b5c-d870279600d7)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-08-21 20:27:13+00:00,"['rafpaf', 'iethree']",2024-09-11 20:25:24+00:00,2024-09-06 20:53:21+00:00,https://github.com/metabase/metabase/pull/47100,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2302957146, 'issue_id': 2479035398, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2af9fff059e33564fe0a849271e2511be3eded54...d1edc7806a231fe7cf2f0f10136d66b68725c3cc.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/index.ts |', 'created_at': datetime.datetime(2024, 8, 21, 20, 28, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311011585, 'issue_id': 2479035398, 'author': 'rafpaf', 'body': '* **#47871** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47871?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47256** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47256?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47672** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47672?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47100** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47100?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @iethree and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 26, 20, 18, 46, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-21 20:28:34 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2af9fff059e33564fe0a849271e2511be3eded54...d1edc7806a231fe7cf2f0f10136d66b68725c3cc.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/index.ts |

rafpaf (Assginee) on (2024-08-26 20:18:46 UTC): * **#47871** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47871?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47256** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47256?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47672** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47672?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47100** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47100?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @iethree and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2478995920,pull_request,closed,,Add notification about closed Epics,,NevRA,2024-08-21 20:11:07+00:00,['NevRA'],2024-10-08 16:16:46+00:00,2024-08-21 20:24:09+00:00,https://github.com/metabase/metabase/pull/47099,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2478942421,pull_request,closed,,Query validator FE,"Closes https://github.com/metabase/metabase/issues/45546

Depends on https://github.com/metabase/harbormaster/issues/5156

### Description
Adds a UI for the Query Field Validation Feature. This will display queries with broken data references in a table under `Admin -> Troubleshooting -> Query Validation`. 

### How to verify
The easiest way to create an invalid card is to do so via SQL Queries. Go to New -> SQL Query and type `Select foo from Orders`. Save the card, then go to  `Admin -> Troubleshooting -> Query Validation`.  Your card should be present.

### Demo
![image](https://github.com/user-attachments/assets/c9118822-1d4f-4a44-bec0-4b3bc961d426)
(pretend creator is populated above)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-08-21 19:48:25+00:00,['npfitz'],2024-08-29 19:20:57+00:00,2024-08-29 19:20:55+00:00,https://github.com/metabase/metabase/pull/47098,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2478851922,pull_request,closed,,removing cal,,perivamsi,2024-08-21 19:12:34+00:00,['perivamsi'],2024-10-08 16:16:45+00:00,2024-08-21 20:25:11+00:00,https://github.com/metabase/metabase/pull/47096,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2478796113,pull_request,closed,,Entity id translation service,"Resolves #47043

### What is this?

Embedding customers want to use entity ids. But our endpoints do not support looking things up by their entity ids (e.g. on `GET /api/card/:id`). This is a quick addition that adds an endpoint to translate from entity_id -> id.

In particular it adds an endpoint that takes a json body like 

```json
{""entity_ids"": 
  {""card"": [""entity_id1"", ""entity_id2""], 
   ""dashboard"" : [""entity_id3""]}}
```
where each key maps to a model, and the value is an array of entity ids

This endpoint returns a mapping from entity_id -> sequential id (aka id).

```json
{""entity_ids"" {""entity_id1"": {""id"": 8, ""status"":""ok"", ""type"":""card""},
               ""entity_id2"": {""id"": 9, ""status"":""ok"", ""type"":""card""}, 
               ""entity_id3"": {""id"": 9, ""status"":""ok"", ""type"":""dashboard""}}
```

The embedding user can then translate their requests and in effect use entity ids with out entire api.

### What's been done?

- [x] Tests for multiple entity ids
- [x] Tests for every table with an entity id
- [x] Test on api layer
- [x] Work-out shape of the api with FE consumer
- [x] Adds a standardized naming convention for models for FE <-> BE collaboration (reused in e.g. search too)
- [x] Perf testing

----

### Perf findings:
I've added 35,000 entities with entity_ids, and here are the results:

```clojure
  (def realistic-request
    (update-vals (:request (run-translation items))
                 (comp #(take 5 %) shuffle)))

  (-> realistic-request vals flatten count)
  ;; => 70
  
  (criterium/bench
   ;70 items, 35,000 entities total
   (api.embed.common/table->entity-ids->ids realistic-request))
   ;;   Evaluation count : 13260 in 60 samples of 221 calls.
   ;;              Execution time mean : 5.284078 ms
   ;;     Execution time std-deviation : 818.174829 ¬µs
   ;;    Execution time lower quantile : 4.336682 ms ( 2.5%)
   ;;    Execution time upper quantile : 7.759709 ms (97.5%)
   ;;                    Overhead used : 1.898153 ns
   ;;
   ;; Found 4 outliers in 60 samples (6.6667 %)
   ;; 	low-severe	 2 (3.3333 %)
   ;; 	low-mild	 2 (3.3333 %)
   ;;  Variance from outliers : 85.8508 % Variance is severely inflated by outliers

  (def big-request
    (update-vals (:request (run-translation items))
                 (comp #(take 50 %) shuffle)))

  (-> big-request vals flatten count)

  (criterium/bench
   ;; => 700 items, 35,000 entities total
   (api.embed.common/table->entity-ids->ids big-request))
;; Evaluation count : 1260 in 60 samples of 21 calls.
;;              Execution time mean : 47.418405 ms
;;     Execution time std-deviation : 5.405070 ms
;;    Execution time lower quantile : 34.629211 ms ( 2.5%)
;;    Execution time upper quantile : 53.895442 ms (97.5%)
;;                    Overhead used : 1.898153 ns
;;
;; Found 1 outliers in 60 samples (1.6667 %)
;; 	low-severe	 1 (1.6667 %)
;;  Variance from outliers : 75.4886 % Variance is severely inflated by outliers
```

I think this is pretty fast already, with no optimizations. I'm not 100% sure what a typical request will look like, but with 70 items, we see ~5ms response time, and with 700 (much higher than usual, IME) we see ~50ms response time.

The current strategy is naive: we sequentially go through each table -> ids keypair passed into the handler, and find the [entity_id id] pairs for each. Finally we combine them into a map and return it.

If needed we can speed this up by parallelizing the lookups, caching the ids, and more. But it feels like a premature optimization at this time.",escherize,2024-08-21 18:57:37+00:00,['escherize'],2024-08-27 13:45:44+00:00,2024-08-27 13:45:42+00:00,https://github.com/metabase/metabase/pull/47094,"[('Embedding/', 'Use this label when unsure which flavor of embedding is impacted'), ('.Backend', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2307128669, 'issue_id': 2478796113, 'author': 'oisincoveney', 'body': ""~~In terms of functionality it's working for me! I'll make the FE changes in a different branch so feel free to merge once the BE has approved üòÑ~~\r\n\r\nSome requested changes below ‚Üì"", 'created_at': datetime.datetime(2024, 8, 23, 13, 44, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307179571, 'issue_id': 2478796113, 'author': 'oisincoveney', 'body': '@escherize after doing some work with this, could we actually make these changes:\r\n- could the entities in the map conform to the types found in places like `frontend/src/metabase-types/api/collection.ts` where they\'re lowercase and conform to the types of the entities:\r\n```\r\n  ""card"",\r\n  ""dataset"",\r\n  ""metric"",\r\n  ""dashboard"",\r\n  ""snippet"",\r\n  ""collection"",\r\n  ""indexed-entity"",\r\n```\r\n\r\nAnother question: could we possibly just pass a single entity ID and/or an array of entity IDs, and then return the type and the ID of entity? I do like the API as it us but I think it\'ll become unwieldy since (from what I am seeing so far) the usage will be confined to single entity IDs for the most part. Something like this:\r\n`EntityId[] => [{type: card, id: 1}, {type: dashboard, id: 123}]` . I also do still like having the map there - maybe it can be a 1<>1 mapping between the entityId and the card/id object', 'created_at': datetime.datetime(2024, 8, 23, 14, 10, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307352866, 'issue_id': 2478796113, 'author': 'escherize', 'body': '> could the entities in the map conform to the types found in places like frontend/src/metabase-types/api/collection.ts where they\'re lowercase and conform to the types of the entities:\r\n\r\n>  ``` \r\n>  ""card""\r\n>  ""dataset""\r\n>  ""metric""\r\n>  ""dashboard""\r\n>  ""snippet""\r\n>  ""collection""\r\n>  ""indexed-entity""\r\n>  ```\r\n\r\nI am good with renaming: ""card"", ""dataset"", ""metric"", ""dashboard"", ""snippet"", ""collection"".\r\n As for `""indexed-entity""`, those don\'t have entity_ids, so we won\'t be able to look them up with this endpoint.\r\n \r\nThe complete list of look-uppable models is: `""action""`, `""card""`, `""collection""`, `""dashboard""`, `""dashboard-card""`, `""dashboard-tab""`, `""dimension""`, `""snippet`""), `""permissions-group""`, `""pulse""`, `""pulse-card""`, `""pulse-channel""`, `""segment""`, `""timeline""`, `""user""`.  I see that we have some prior art for referring to models in the search endpoint, and I will extend that a bit so you can refer to them in (I think) an ergonomic way. Some model names are already setup in the search endpoint, and some will be new.\r\n\r\n------\r\n\r\n>  Do you think you could map the entity ID to an object with a status for each? i.e.:\r\n\r\n```\r\n  {\r\n    entity_ids: {\r\n      eid1: {\r\n        id: 1,\r\n        type: ""card"",\r\n        status: ""ok"",\r\n      },\r\n      eid2: {\r\n        id: 2,\r\n        type: ""model"",\r\n        status: ""ok"",\r\n      },\r\n      eid3: {\r\n        status: ""error"",\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nLet\'s do it!', 'created_at': datetime.datetime(2024, 8, 23, 15, 46, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307409269, 'issue_id': 2478796113, 'author': 'escherize', 'body': 'Had a great huddle with Oisin about this, and I am going to switch up what the response value looks like (see above), and re-use some model names from what we use in search, to work toward a standard for naming models FE <-> BE.', 'created_at': datetime.datetime(2024, 8, 23, 16, 22, 7, tzinfo=datetime.timezone.utc)}]","oisincoveney on (2024-08-23 13:44:17 UTC): ~~In terms of functionality it's working for me! I'll make the FE changes in a different branch so feel free to merge once the BE has approved üòÑ~~

Some requested changes below ‚Üì

oisincoveney on (2024-08-23 14:10:35 UTC): @escherize after doing some work with this, could we actually make these changes:
- could the entities in the map conform to the types found in places like `frontend/src/metabase-types/api/collection.ts` where they're lowercase and conform to the types of the entities:
```
  ""card"",
  ""dataset"",
  ""metric"",
  ""dashboard"",
  ""snippet"",
  ""collection"",
  ""indexed-entity"",
```

Another question: could we possibly just pass a single entity ID and/or an array of entity IDs, and then return the type and the ID of entity? I do like the API as it us but I think it'll become unwieldy since (from what I am seeing so far) the usage will be confined to single entity IDs for the most part. Something like this:
`EntityId[] => [{type: card, id: 1}, {type: dashboard, id: 123}]` . I also do still like having the map there - maybe it can be a 1<>1 mapping between the entityId and the card/id object

escherize (Issue Creator) on (2024-08-23 15:46:23 UTC): I am good with renaming: ""card"", ""dataset"", ""metric"", ""dashboard"", ""snippet"", ""collection"".
 As for `""indexed-entity""`, those don't have entity_ids, so we won't be able to look them up with this endpoint.
 
The complete list of look-uppable models is: `""action""`, `""card""`, `""collection""`, `""dashboard""`, `""dashboard-card""`, `""dashboard-tab""`, `""dimension""`, `""snippet`""), `""permissions-group""`, `""pulse""`, `""pulse-card""`, `""pulse-channel""`, `""segment""`, `""timeline""`, `""user""`.  I see that we have some prior art for referring to models in the search endpoint, and I will extend that a bit so you can refer to them in (I think) an ergonomic way. Some model names are already setup in the search endpoint, and some will be new.

------


```
  {
    entity_ids: {
      eid1: {
        id: 1,
        type: ""card"",
        status: ""ok"",
      },
      eid2: {
        id: 2,
        type: ""model"",
        status: ""ok"",
      },
      eid3: {
        status: ""error"",
      }
    }
  }
```

Let's do it!

escherize (Issue Creator) on (2024-08-23 16:22:07 UTC): Had a great huddle with Oisin about this, and I am going to switch up what the response value looks like (see above), and re-use some model names from what we use in search, to work toward a standard for naming models FE <-> BE.

"
2478757459,pull_request,closed,,Ensure blocked tables downgrade into blocked dbs,"As it says on the tin.

One test makes a database with 1 table, and blocks the table. That results in a downgraded-blocked-database.

The other test makes a database with 2 tables, unrestricts the db, and then blocks one of the tables. That results in a downgraded-blocked-database, too.",escherize,2024-08-21 18:41:43+00:00,['escherize'],2024-08-22 03:18:55+00:00,2024-08-22 01:22:39+00:00,https://github.com/metabase/metabase/pull/47093,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2478681901,pull_request,closed,,"ü§ñ backported ""Fix `docker-compose` not available on Mac""",#47054,github-automation-metabase,2024-08-21 18:07:29+00:00,"['WiNloSt', 'github-automation-metabase']",2024-08-21 19:05:13+00:00,2024-08-21 19:05:12+00:00,https://github.com/metabase/metabase/pull/47092,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478616486,pull_request,closed,,"ü§ñ backported ""docs: Update MongoDB Atlas connection instructions""",#47088,github-automation-metabase,2024-08-21 17:40:26+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-21 17:42:05+00:00,2024-08-21 17:42:04+00:00,https://github.com/metabase/metabase/pull/47091,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478532289,pull_request,closed,,Toggle series visibility from chart legend (cartesian charts),"Implements #2697 for cartesian charts ([product doc](https://www.notion.so/metabase/Let-users-hide-show-series-by-clicking-on-the-legend-90a5ec138b534f039136ea7f377252b8?pvs=4))

Allows to toggle series visibility from the chart legend by clicking the legend item dot (FWIW, series visibility set like that isn't meant to be persisted). Also, updates the `graph.series_order` visualization setting widget to better distinguish its ""hide"" action from the new legend behavior.

Currently supported charts: bar, line, area, combo, scatter (going to put together a separate PR for pie charts)

### To verify

1. Create a multi-series chart (e.g., Count of Orders per Product Category)
2. Ensure you can click the legend dots to show/hide the series
3. Ensure you can't hide the last series
4. In chill mode, ensure you can manage series order and related settings via the ""Data"" tab

### Demo

https://github.com/user-attachments/assets/a2c82570-6cb2-4825-a70e-a0a023a61305

",kulyk,2024-08-21 16:58:00+00:00,['kulyk'],2024-11-08 18:29:48+00:00,2024-09-03 15:01:10+00:00,https://github.com/metabase/metabase/pull/47089,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2310660012, 'issue_id': 2478532289, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a359852b4b77b079d95278915b1df67182d58757...a6db792333ff8a5556b595ca24e8ae02d1be576a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/legend/Legend.jsx<br>frontend/src/metabase/visualizations/components/legend/Legend.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItem.jsx<br>frontend/src/metabase/visualizations/components/legend/LegendItem.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItemDot.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItemDot.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendLayout.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/trend-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/index.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/CartesianChart.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/use-models-and-option.ts |', 'created_at': datetime.datetime(2024, 8, 26, 17, 1, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2313004337, 'issue_id': 2478532289, 'author': 'mazameli', 'body': ""I'm tagging @kdoh for design review rather than me now that he's back, since he's the designer on this."", 'created_at': datetime.datetime(2024, 8, 27, 16, 19, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2318229995, 'issue_id': 2478532289, 'author': 'cdeweyx', 'body': '> Looks awesome! I found a couple of minor things, please have a look:\r\n> \r\n> 1. Add series modal on dashcards. There is missing spacing between circles and titles. Also AFAIR there existed the ability to remove series via a cross icon button on the right from the title.\r\n> \r\n> <img alt=""Screenshot 2024-08-28 at 3 45 22\u202fPM"" width=""1100"" src=""https://private-user-images.githubusercontent.com/14301985/362432805-b59b5eaf-709e-4183-9f18-772c8b277b39.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ5NDc0MTQsIm5iZiI6MTcyNDk0NzExNCwicGF0aCI6Ii8xNDMwMTk4NS8zNjI0MzI4MDUtYjU5YjVlYWYtNzA5ZS00MTgzLTlmMTgtNzcyYzhiMjc3YjM5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA4MjklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwODI5VDE1NTgzNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWU0YWQ2ZTgxYzYyZDkyMGRhNzgxNmZhYjllYjRlMzk0ZmYwNzFlYzE0Yjk3OTAzMjM1Y2U1ZmNhNTViOGU5ZjcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.f5dPdK5LyFFI38lD58VHqwX8HhSXgUDTv4rOHBfD0Wk"">\r\n> 2. We probably want to hide trend lines of series that are hidden:\r\n> \r\n> <img alt=""Screenshot 2024-08-28 at 3 51 24\u202fPM"" width=""1702"" src=""https://private-user-images.githubusercontent.com/14301985/362432749-97700c69-2676-43fb-b0e6-2df4a325063c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ5NDc0MTQsIm5iZiI6MTcyNDk0NzExNCwicGF0aCI6Ii8xNDMwMTk4NS8zNjI0MzI3NDktOTc3MDBjNjktMjY3Ni00M2ZiLWIwZTYtMmRmNGEzMjUwNjNjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA4MjklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwODI5VDE1NTgzNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTc3MWZjMTg3M2YwOGI4ZTAxMzU1ZGRiNzgyYTlhOTA5NmVhNmE4NDk0ODUzYjI3ODg2OGU1ZWEyZmI1NzFkZDYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.jSmxhjPoN8X-lDedvV-zQVEJf9cENw-30JMv4moGnSc"">\r\n\r\nYeah this shouldn\'t be available in the add series modal, this is a consumption thing.', 'created_at': datetime.datetime(2024, 8, 29, 15, 59, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2321814087, 'issue_id': 2478532289, 'author': 'kulyk', 'body': '@alxnddr thanks for great callouts, everything should be addressed now üëç \r\nEDIT: seems like ""remove series"" in the ""add series"" model is broken on master as well, I\'ll file an issue', 'created_at': datetime.datetime(2024, 8, 30, 16, 11, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2425925743, 'issue_id': 2478532289, 'author': 'aruizhong', 'body': 'can  we double click the legend , the chart only show that series', 'created_at': datetime.datetime(2024, 10, 21, 8, 7, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2454863330, 'issue_id': 2478532289, 'author': 'ruslankhd', 'body': ""> can we double click the legend , the chart only show that series\r\n\r\n@kulyk could you please answer this question from @aruizhong?\r\nI'm also very interested. Hard to tell watching the video."", 'created_at': datetime.datetime(2024, 11, 4, 14, 28, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2454903455, 'issue_id': 2478532289, 'author': 'kulyk', 'body': ""@aruizhong @ruslankhd, at this moment we're only supporting a single click to toggle single series visibility"", 'created_at': datetime.datetime(2024, 11, 4, 14, 44, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2455140325, 'issue_id': 2478532289, 'author': 'ruslankhd', 'body': ""> @aruizhong @ruslankhd, at this moment we're only supporting a single click to toggle single series visibility\r\n\r\n@kulyk Any plans of isolating a series by double-clicking on it? \r\n\r\nhttps://github.com/user-attachments/assets/236e84da-5904-489d-84d0-1a9b8929ac14"", 'created_at': datetime.datetime(2024, 11, 4, 16, 18, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2465469397, 'issue_id': 2478532289, 'author': 'ruslankhd', 'body': '@kulyk could you please answer the question above?', 'created_at': datetime.datetime(2024, 11, 8, 18, 11, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2465484269, 'issue_id': 2478532289, 'author': 'kulyk', 'body': ""> @kulyk could you please answer the question above?\n\n@ruslankhd AFAIK, it's not currently planned"", 'created_at': datetime.datetime(2024, 11, 8, 18, 21, 46, tzinfo=datetime.timezone.utc)}, {'comment_id': 2465496573, 'issue_id': 2478532289, 'author': 'ruslankhd', 'body': ""> > @kulyk could you please answer the question above?\r\n> \r\n> @ruslankhd AFAIK, it's not currently planned\r\n\r\nThank you!"", 'created_at': datetime.datetime(2024, 11, 8, 18, 29, 47, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-26 17:01:30 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a359852b4b77b079d95278915b1df67182d58757...a6db792333ff8a5556b595ca24e8ae02d1be576a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartTooltip/EChartsTooltip/EChartsTooltip.tsx<br>frontend/src/metabase/visualizations/components/legend/Legend.jsx<br>frontend/src/metabase/visualizations/components/legend/Legend.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItem.jsx<br>frontend/src/metabase/visualizations/components/legend/LegendItem.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItemDot.styled.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendItemDot.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendLayout.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingSeriesOrder.tsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/legend.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/trend-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/index.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/CartesianChart.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/use-models-and-option.ts |

mazameli on (2024-08-27 16:19:54 UTC): I'm tagging @kdoh for design review rather than me now that he's back, since he's the designer on this.

cdeweyx on (2024-08-29 15:59:45 UTC): Yeah this shouldn't be available in the add series modal, this is a consumption thing.

kulyk (Issue Creator) on (2024-08-30 16:11:45 UTC): @alxnddr thanks for great callouts, everything should be addressed now üëç 
EDIT: seems like ""remove series"" in the ""add series"" model is broken on master as well, I'll file an issue

aruizhong on (2024-10-21 08:07:45 UTC): can  we double click the legend , the chart only show that series

ruslankhd on (2024-11-04 14:28:45 UTC): @kulyk could you please answer this question from @aruizhong?
I'm also very interested. Hard to tell watching the video.

kulyk (Issue Creator) on (2024-11-04 14:44:58 UTC): @aruizhong @ruslankhd, at this moment we're only supporting a single click to toggle single series visibility

ruslankhd on (2024-11-04 16:18:41 UTC): @kulyk Any plans of isolating a series by double-clicking on it? 

https://github.com/user-attachments/assets/236e84da-5904-489d-84d0-1a9b8929ac14

ruslankhd on (2024-11-08 18:11:46 UTC): @kulyk could you please answer the question above?

kulyk (Issue Creator) on (2024-11-08 18:21:46 UTC): @ruslankhd AFAIK, it's not currently planned

ruslankhd on (2024-11-08 18:29:47 UTC): Thank you!

"
2478528090,pull_request,closed,,docs: Update MongoDB Atlas connection instructions,Related: https://github.com/metabase/metabase.github.io/pull/3780,alexyarosh,2024-08-21 16:56:07+00:00,['alexyarosh'],2024-08-21 17:42:33+00:00,2024-08-21 17:39:35+00:00,https://github.com/metabase/metabase/pull/47088,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2478523800,pull_request,closed,,Use the initial `originalQuestion` in the `saveModal`,"### Description
This PR fixes #42773 by mimicking the solution we already have in `master` (that's proven to be working).

tl;dr
We need to remember the *initial* state of the ""original"" question because it changes to the ad-hoc question in Redux just before the save modal is closed.

### How to verify
Follow the repro steps and make sure you don't see `- Modified` at any stage during the question/metric/model save.

### Checklist
- [x] Tests have been added/updated to cover changes in this PR

> [!Important]
> Adds the same repro from #47103",nemanjaglumac,2024-08-21 16:54:12+00:00,['nemanjaglumac'],2024-08-22 06:42:42+00:00,2024-08-22 06:42:42+00:00,https://github.com/metabase/metabase/pull/47086,[],[],
2478511697,pull_request,closed,,Make sure we insert special segmented permission paths for sandboxed tables on downgrade to 49,"Fixes https://github.com/metabase/metabase/issues/47082

Adjusts permissions rollback to handle sandboxing better:
* If a table is sandboxed, we add a `/query/segmented/` permission path on the rollback so that it will be included properly in the permissions graph on 49
* If at least one table in a DB is sandboxed, and all the other tables are unrestricted, we need to add granular permission paths for the non-sandboxed tables.",noahmoss,2024-08-21 16:48:51+00:00,['noahmoss'],2024-08-21 21:43:40+00:00,2024-08-21 21:43:38+00:00,https://github.com/metabase/metabase/pull/47085,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2302540851, 'issue_id': 2478511697, 'author': 'noahmoss', 'body': '* **#47085** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47085?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 21, 16, 49, 12, tzinfo=datetime.timezone.utc)}]","noahmoss (Issue Creator) on (2024-08-21 16:49:12 UTC): * **#47085** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47085?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @noahmoss and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2478312528,pull_request,closed,,"ü§ñ backported ""docs - blocked at table level""",#46937,github-automation-metabase,2024-08-21 15:13:21+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-21 15:14:56+00:00,2024-08-21 15:14:55+00:00,https://github.com/metabase/metabase/pull/47080,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478256568,pull_request,closed,,"ü§ñ backported ""dx: forbid imports from storybook testing-library outside stories""",  #47056,github-automation-metabase,2024-08-21 14:56:25+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-26 08:09:14+00:00,2024-08-26 08:09:13+00:00,https://github.com/metabase/metabase/pull/47078,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478250248,pull_request,closed,,"ü§ñ backported ""Add v0.50.21 to the list of releases""",#47073,github-automation-metabase,2024-08-21 14:54:13+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-21 14:56:24+00:00,2024-08-21 14:56:23+00:00,https://github.com/metabase/metabase/pull/47077,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478234624,pull_request,closed,,handle warnings from reselect about broken selectors rules,"Closes https://github.com/metabase/metabase/issues/47087

### Description

Cleanup warnings in console about wrong usage of selectors. Some of the warnings are valid, some are false positives, so we remove noise from them

One warning is valid, and I'll keep it to handle properly later: `const getQuestionsMemoized = createDeepEqualSelector`

### How to verify

- open app in dev mode
- verify console

### Demo

### Before

https://github.com/user-attachments/assets/d714a1d4-b57e-4c83-a3fb-09d5632db6e7

### After


https://github.com/user-attachments/assets/6a7f1efb-7371-4942-b777-11c950be6976
",uladzimirdev,2024-08-21 14:48:29+00:00,['uladzimirdev'],2024-08-22 11:22:43+00:00,2024-08-22 11:22:42+00:00,https://github.com/metabase/metabase/pull/47076,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2302243110, 'issue_id': 2478234624, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1fe4c5c1765ebbd02b5bfcc4f10b0cac7e7b5fc3...b7447aa40e350b2f4f07078af169e1b8396018c1.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx |', 'created_at': datetime.datetime(2024, 8, 21, 14, 50, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304316948, 'issue_id': 2478234624, 'author': 'uladzimirdev', 'body': '@kamilmielnik thanks for review, valid points, everything should be fixed now', 'created_at': datetime.datetime(2024, 8, 22, 10, 27, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2304389830, 'issue_id': 2478234624, 'author': 'uladzimirdev', 'body': '@kamilmielnik unfortunately it looks like MLv2 warnings can be fixed only in clojure', 'created_at': datetime.datetime(2024, 8, 22, 11, 4, 13, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-21 14:50:13 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 1fe4c5c1765ebbd02b5bfcc4f10b0cac7e7b5fc3...b7447aa40e350b2f4f07078af169e1b8396018c1.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx |

uladzimirdev (Issue Creator) on (2024-08-22 10:27:32 UTC): @kamilmielnik thanks for review, valid points, everything should be fixed now

uladzimirdev (Issue Creator) on (2024-08-22 11:04:13 UTC): @kamilmielnik unfortunately it looks like MLv2 warnings can be fixed only in clojure

"
2478191700,pull_request,closed,,"ü§ñ backported ""Bump presto driver to v288""",#47071,github-automation-metabase,2024-08-21 14:30:01+00:00,"['paoliniluis', 'github-automation-metabase']",2024-08-21 16:24:20+00:00,2024-08-21 16:24:19+00:00,https://github.com/metabase/metabase/pull/47075,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2478178337,pull_request,closed,,docs - add download row limit,"Related to: https://github.com/metabase/metabase/pull/47072, but for the 50 release branch.",jeff-bruemmer,2024-08-21 14:24:12+00:00,['jeff-bruemmer'],2024-08-21 15:24:56+00:00,2024-08-21 15:24:27+00:00,https://github.com/metabase/metabase/pull/47074,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2478157520,pull_request,closed,,Add v0.50.21 to the list of releases,Like it says on the tin üòÅ,github-automation-metabase,2024-08-21 14:15:00+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-21 14:56:53+00:00,2024-08-21 14:53:01+00:00,https://github.com/metabase/metabase/pull/47073,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2478151696,pull_request,closed,,docs - update env vars,Closes https://github.com/metabase/metabase/issues/47034,jeff-bruemmer,2024-08-21 14:12:27+00:00,['jeff-bruemmer'],2024-08-23 12:49:12+00:00,2024-08-23 12:49:12+00:00,https://github.com/metabase/metabase/pull/47072,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2478061947,pull_request,closed,,Bump presto driver to v288,Bumping to see if a bug on queries with field filters and cte's is fixed with this,paoliniluis,2024-08-21 13:34:13+00:00,['paoliniluis'],2024-08-21 16:24:47+00:00,2024-08-21 14:28:51+00:00,https://github.com/metabase/metabase/pull/47071,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2302188596, 'issue_id': 2478061947, 'author': 'crisptrutski', 'body': 'Relevant changelogs:\r\n\r\n- https://prestodb.io/docs/current/release/release-0.287.html\r\n- https://prestodb.io/docs/current/release/release-0.288.html', 'created_at': datetime.datetime(2024, 8, 21, 14, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302191216, 'issue_id': 2478061947, 'author': 'crisptrutski', 'body': ""Nothing jumps out from the changelogs, and that's a huge number of fixes - holding thumbs for the use case in question."", 'created_at': datetime.datetime(2024, 8, 21, 14, 28, 12, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-08-21 14:27:00 UTC): Relevant changelogs:

- https://prestodb.io/docs/current/release/release-0.287.html
- https://prestodb.io/docs/current/release/release-0.288.html

crisptrutski on (2024-08-21 14:28:12 UTC): Nothing jumps out from the changelogs, and that's a huge number of fixes - holding thumbs for the use case in question.

"
2477928313,pull_request,closed,,fix import order,lint error,uladzimirdev,2024-08-21 12:34:00+00:00,['uladzimirdev'],2024-08-21 13:07:23+00:00,2024-08-21 13:06:57+00:00,https://github.com/metabase/metabase/pull/47069,[],[],
2477860736,pull_request,closed,,Fix SchemaItem type,Looks like a copy-pasting leftover.,kamilmielnik,2024-08-21 12:01:22+00:00,['kamilmielnik'],2024-08-22 07:55:13+00:00,2024-08-22 07:21:22+00:00,https://github.com/metabase/metabase/pull/47068,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2477828702,pull_request,closed,,Reduce the number of choices in onboarding flow [backport],"Manual backport of https://github.com/metabase/metabase/issues/46741, closes https://github.com/metabase/metabase/issues/46741

I didn't realize it was supposed to go out on v50 but we do: https://metaboat.slack.com/archives/C063Q3F1HPF/p1724236439696599?thread_ts=1724230345.613399&cid=C063Q3F1HPF

The backports includes all PRs from the epic, outside of the test refactor that was already backported.


There were some conflicts because we changed how we handle colors and that was not backported, so please double check if that's right",npretto,2024-08-21 11:45:45+00:00,['npretto'],2024-08-22 11:26:39+00:00,2024-08-22 11:26:37+00:00,https://github.com/metabase/metabase/pull/47067,"[('.Team/Embedding', ''), ('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2301855762, 'issue_id': 2477828702, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f7d4a3d49857caf9b3e12a14b59dccd8b9901240...bac9f60a91e91cd421962b9da38f34be5e93644f.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/analytics.ts<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.unit.spec.tsx<br>frontend/src/metabase/setup/components/DataUsageStep/DataUsageStep.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.styled.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/index.ts<br>frontend/src/metabase/setup/reducers.ts<br>frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx<br>frontend/src/metabase/setup/utils.ts |', 'created_at': datetime.datetime(2024, 8, 21, 11, 47, 10, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-21 11:47:10 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f7d4a3d49857caf9b3e12a14b59dccd8b9901240...bac9f60a91e91cd421962b9da38f34be5e93644f.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/analytics.ts<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.unit.spec.tsx<br>frontend/src/metabase/setup/components/DataUsageStep/DataUsageStep.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.styled.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/index.ts<br>frontend/src/metabase/setup/reducers.ts<br>frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx<br>frontend/src/metabase/setup/utils.ts |

"
2477808273,pull_request,closed,,fix(#46893) - Sharing popover in query builder view should be next to button,"Closes https://github.com/metabase/metabase/issues/46893

### Description

Ensures that there's a ref-able container in the `AdminEmbedMenu` component to ensure that the sharing popover has a `ref` it can attach to, ensuring that its position is right next to the button.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Login as an admin
2. Ensure public sharing is enabled
3. Go to a question
4. On the bottom right, click on the share button (tooltip should say Sharing or Embedding)
5. The popover should be right next to the button, not at the top left of the screen

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-08-21 11:35:57+00:00,['oisincoveney'],2024-08-21 18:28:50+00:00,2024-08-21 14:36:12+00:00,https://github.com/metabase/metabase/pull/47065,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2302566048, 'issue_id': 2477808273, 'author': 'iethree', 'body': 'this component is deleted by https://github.com/metabase/metabase/pull/46593', 'created_at': datetime.datetime(2024, 8, 21, 17, 3, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302567106, 'issue_id': 2477808273, 'author': 'iethree', 'body': ""@oisincoveney go eat a donut long enough for me to get this dang PR merged so you stop updating files I've deleted üòÇ"", 'created_at': datetime.datetime(2024, 8, 21, 17, 3, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302710146, 'issue_id': 2477808273, 'author': 'oisincoveney', 'body': ""> @oisincoveney go eat a donut long enough for me to get this dang PR merged so you stop updating files I've deleted üòÇ\r\n\r\nThat might be one of the greatest things ever said to me üòÇ"", 'created_at': datetime.datetime(2024, 8, 21, 18, 28, 49, tzinfo=datetime.timezone.utc)}]","iethree on (2024-08-21 17:03:09 UTC): this component is deleted by https://github.com/metabase/metabase/pull/46593

iethree on (2024-08-21 17:03:45 UTC): @oisincoveney go eat a donut long enough for me to get this dang PR merged so you stop updating files I've deleted üòÇ

oisincoveney (Issue Creator) on (2024-08-21 18:28:49 UTC): That might be one of the greatest things ever said to me üòÇ

"
2477792505,pull_request,closed,,Improve Query Analysis sweeper scheduling,"### Description

This tweaks the way that we schedule background query analysis.

1. Always run immediately on start-up, unless its already running on another instance.
2. If we're still running when a trigger fires, start immediately again once it finishes.

This should help with staleness and gaps on new deployments.",crisptrutski,2024-08-21 11:28:15+00:00,['crisptrutski'],2024-10-08 16:16:50+00:00,2024-08-21 15:15:20+00:00,https://github.com/metabase/metabase/pull/47064,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2301822513, 'issue_id': 2477792505, 'author': 'crisptrutski', 'body': '* **#47064** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47064?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* **#47063** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47063?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 21, 11, 28, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301829239, 'issue_id': 2477792505, 'author': 'crisptrutski', 'body': 'Not really sure how to test this, besides watching it on stats.', 'created_at': datetime.datetime(2024, 8, 21, 11, 32, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302211132, 'issue_id': 2477792505, 'author': 'crisptrutski', 'body': ""Low stakes to just see how it functions in stats, not going to block on Ngoc's input"", 'created_at': datetime.datetime(2024, 8, 21, 14, 36, 59, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-08-21 11:28:25 UTC): * **#47064** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47064?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* **#47063** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47063?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

crisptrutski (Issue Creator) on (2024-08-21 11:32:08 UTC): Not really sure how to test this, besides watching it on stats.

crisptrutski (Issue Creator) on (2024-08-21 14:36:59 UTC): Low stakes to just see how it functions in stats, not going to block on Ngoc's input

"
2477727464,pull_request,closed,,Strip model cache tables from query analysis,"### Description

This adds a quick hack to make sure we don't report false positives for unknown tables, due to references to cached cards.

",crisptrutski,2024-08-21 10:54:54+00:00,['crisptrutski'],2024-10-08 16:16:52+00:00,2024-08-21 12:17:51+00:00,https://github.com/metabase/metabase/pull/47063,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC'), ('Querying/Native/Parser', '')]","[{'comment_id': 2301822490, 'issue_id': 2477727464, 'author': 'crisptrutski', 'body': '* **#47064** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47064?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#47063** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47063?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 21, 11, 28, 24, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-08-21 11:28:24 UTC): * **#47064** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47064?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#47063** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47063?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @crisptrutski and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2477687008,pull_request,closed,,Add notification about closed Epics,,NevRA,2024-08-21 10:34:46+00:00,['NevRA'],2024-10-08 16:16:53+00:00,2024-08-21 11:38:33+00:00,https://github.com/metabase/metabase/pull/47062,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2477628693,pull_request,closed,,feat(sdk): generate sample Express.js api and user switcher components via cli,"Closes https://github.com/metabase/metabase/issues/47059

### Description

Generates an example Express.js server with hard-coded users and user switching / SSO endpoints, and generates React components to support user switching.

### How to verify

- Run `yarn build-embedding-sdk-cli:watch` in one terminal to build the CLI
- Create an empty React project with Vite
- Run `docker rm -f metabase-enterprise-embedding && yarn add file:../metabase/resources/embedding-sdk && npx @metabase/embedding-sdk-react start`
  - This kills existing Docker container, links the built SDK to your React project, then starts the CLI.
  - This only works if your metabase repo is adjacent to the React project. If not, adjust the `file:..` part
- Verify that group permissions are defined correctly in the Admin Panel
- Follow the flow. Import the `<AnalyticsPage />` React component per the instructions and play with it.

### Demo

<div>
    <a href=""https://www.loom.com/share/64bd4f3173654e298c5c59ee57c82a95"">
      <p>WIP - August 21 - CLI - Watch Video</p>
    </a>
    <a href=""https://www.loom.com/share/64bd4f3173654e298c5c59ee57c82a95"">
      <img style=""max-width:300px;"" src=""https://cdn.loom.com/sessions/thumbnails/64bd4f3173654e298c5c59ee57c82a95-259da30626ca3371-full-play.gif"">
    </a>
  </div>",heypoom,2024-08-21 10:07:37+00:00,['heypoom'],2024-08-28 17:05:12+00:00,2024-08-28 17:05:10+00:00,https://github.com/metabase/metabase/pull/47060,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2306686207, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': '@heypoom It seems like for multi-tenancy step, the first option I got was always `people`\r\n- <img width=""1104"" alt=""Screenshot 2024-08-23 at 4 27 58\u202fPM"" src=""https://github.com/user-attachments/assets/6a698212-e60d-467c-92df-3936d7e7f146"">\r\n- <img width=""1121"" alt=""Screenshot 2024-08-23 at 4 28 23\u202fPM"" src=""https://github.com/user-attachments/assets/2c8120c9-4d72-41f5-bbf8-2ca3da11e707"">\r\n\r\nCould you take a look?', 'created_at': datetime.datetime(2024, 8, 23, 9, 29, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306688031, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt thanks for testing this, we got the same issue when [play-testing with Alberto](https://www.notion.so/metabase/CLI-PR-review-8a9be6a85d214910af165e12b1cdfaf0?pvs=4) yesterday, so I'm looking into this now üôèüèª"", 'created_at': datetime.datetime(2024, 8, 23, 9, 30, 33, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306779512, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""Changing users doesn't seem to call `sso/metabase` again, and I got the same result for all users in my case Alice has `customer_id: 11` is linked with `account_id`, but Charlie has `customer_id: 16`.\r\n\r\nI should see the result with `account_id: 16` not 11\r\n\r\n![image](https://github.com/user-attachments/assets/2bb349ed-ebb2-43df-8cba-044c3bf05f78)"", 'created_at': datetime.datetime(2024, 8, 23, 10, 19, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306786964, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt it appears we don't call `sso/metabase` when switching users in Shoppy either, so I think that is expected. I'll look into the multi-tenancy issues again today üôèüèª"", 'created_at': datetime.datetime(2024, 8, 23, 10, 23, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306886658, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""> it seems like for multi-tenancy step, the first option I got was always people\r\n\r\n@WiNloSt thanks for spotting this - I fixed this issue in https://github.com/metabase/metabase/pull/46857 (base of this PR), and merged it to this PR. It was caused by a race condition in `Promise.all`. You can use this PR to continue testing. \r\n\r\nI'll look into the issue with changing users next üôèüèª"", 'created_at': datetime.datetime(2024, 8, 23, 11, 24, 21, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306894785, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""> @WiNloSt it appears we don't call `sso/metabase` when switching users in Shoppy either, so I think that is expected. I'll look into the multi-tenancy issues again today üôèüèª\r\n\r\nI'm not sure this is expected. When you change users you should sign JWT using different user info. No matter how many times I change users, my Metabase still have only 1 JWT user Alice, but I should see all 3."", 'created_at': datetime.datetime(2024, 8, 23, 11, 29, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306898793, 'issue_id': 2477628693, 'author': 'heypoom', 'body': '@WiNloSt I think the signing JWT part is done by `POST /switch-user` in this case, which should sign the JWT and call `sso/metabase` under the hood, and then set the cookie back. Do you see `POST /switch-user` when switching between users in your Network tab?', 'created_at': datetime.datetime(2024, 8, 23, 11, 31, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306904616, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': '> @WiNloSt I think the signing JWT part is done by `POST /switch-user` in this case, which should sign the JWT and call `sso/metabase` under the hood, and then set the cookie back. Do you see `POST /switch-user` when switching between users in your Network tab?\r\n\r\nYeah I see multiple `switch-user` calls\r\n![image](https://github.com/user-attachments/assets/022186f5-83b2-4518-95fe-dfdedaf18d68)\r\n\r\nbut only one `metabase/sso` call.\r\n\r\n![image](https://github.com/user-attachments/assets/d5b11dd8-3b38-4a3c-938d-be77d20383da)\r\n\r\nWe need to call Metabase `/auth/sso` with a new JWT for a new user every time.', 'created_at': datetime.datetime(2024, 8, 23, 11, 35, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307345547, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt I just realized that the issue of `/metabase/sso` not being called on user change also happened in Shoppy on a page with full-page dashboards, so I'll take the time on Monday to update the SDK to support refreshing the user - maybe by exposing a hook. \r\n\r\nJust to make this PR possible to test for the time being, I modified the snippet to storage the last user in localStorage and do a full page reload.\r\n\r\n(PS. I have no idea why Shoppy calls `/metabase/sso` when we change the page, I've tried to reproduce it with `key={...}` and re-rendering the `MetabaseProvider`, but none of that works. Why it consistently worked in Shoppy aside from the dashboard page is beyond me.)"", 'created_at': datetime.datetime(2024, 8, 23, 15, 41, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2309689239, 'issue_id': 2477628693, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d7d93633e9062e16677af653559063f75f2a3b28...e8867c084458d8d768a34a94af5112c18996d8e7.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/ChartSettingTableColumns.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.unit.spec.ts |\n| @kdoh | frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 26, 8, 50, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311930858, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""I don't know why but without removing these lines\r\nhttps://github.com/metabase/metabase/blob/0191e91fe16146c9e71326063c14aa4097a7d9e9/enterprise/frontend/src/embedding-sdk/cli/utils/get-tenancy-isolation-sandboxes.ts#L56-L58\r\n\r\nI always got an error `metabase Cannot find matching FK Table ID for FK Field`.\r\n\r\nAfter some debugging. I found that the mapping value is different between the one set by the CLI and the one set by the UI\r\n\r\n#### By CLI\r\n![Screenshot 2024-08-27 at 3 40 29\u202fPM](https://github.com/user-attachments/assets/5af169fd-d707-4ee4-b277-cbc2dd797883)\r\n\r\nNote that this one includes `source-field` which is in the snippet mentioned above, and the UI doesn't display the field in the dropdown.\r\n\r\n#### By the UI\r\n![Screenshot 2024-08-27 at 3 40 39\u202fPM](https://github.com/user-attachments/assets/ef49b6c4-3609-42e8-a20b-c97705b9e9b4)\r\n\r\nThis one doesn't include `source-field`, and the UI display the field name in the dropdown correctly.\r\n\r\nWith the above snippet removed I can view my sandboxed data as expected. Can you double-check if `source-field` is still needed?"", 'created_at': datetime.datetime(2024, 8, 27, 8, 48, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312013103, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""> @WiNloSt I just realized that the issue of `/metabase/sso` not being called on user change also happened in Shoppy on a page with full-page dashboards, so I'll take the time on Monday to update the SDK to support refreshing the user - maybe by exposing a hook.\r\n> \r\n> Just to make this PR possible to test for the time being, I modified the snippet to storage the last user in localStorage and do a full page reload.\r\n> \r\n> (PS. I have no idea why Shoppy calls `/metabase/sso` when we change the page, I've tried to reproduce it with `key={...}` and re-rendering the `MetabaseProvider`, but none of that works. Why it consistently worked in Shoppy aside from the dashboard page is beyond me.)\r\n\r\nThis seems to be a Redux's doing. From my brief testing, it seems Redux still keeps the data on memory so even if we unmount the provider and mount it again, it still retains the data. I tested really quickly, and shoppy set the exp time really short. I think that's 15 seconds.\r\n https://github.com/metabase/shoppy/blob/cbf54c874204deee2b6d21ab6ca6e4a5f45ae2af/api/src/auth/sign.ts#L18\r\n\r\nSo, every 15s the JWT endpoint would be call again regardless of the user.\r\n\r\nWe probably need to provide some knob e.g. `userKey` that when this key changes our SDK would call `jwtProviderUri` again once this key changed explicitly."", 'created_at': datetime.datetime(2024, 8, 27, 9, 27, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2313686856, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt good catch, thank you so much for the extensive re-testing!\r\n\r\nre: `source-field`, I've checked the UI and the source-field is required only when it's a foreign key which is referenced by `fk_target_field_id` (not `field.id`). I've updated the PR so that it only adds the source-field when it's a foreign key. I re-tested this and now it works for both FK and non-FK scenarios.\r\n\r\n![CleanShot 2567-08-28 at 05 29 23@2x](https://github.com/user-attachments/assets/cd67b80a-2683-4725-b4c2-9419f0c38d81)\r\n\r\nre: user login, I've [gotten feedback from Alberto](https://metaboat.slack.com/archives/C063Q3F1HPF/p1724784214484189?thread_ts=1724751130.585409&cid=C063Q3F1HPF) that we can keep the current reload behaviour as-is, as it's intended to be a PoC code that the user can modify."", 'created_at': datetime.datetime(2024, 8, 27, 22, 30, 56, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314782636, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""@heypoom Can you double-check `source-field` again?\r\n\r\n\r\n\r\nThe latest commit still gives me the same error.\r\n\r\nFrom my testing, unless you choose fields from tables of a foreign key.\r\n![Screenshot 2024-08-28 at 4 04 26\u202fPM](https://github.com/user-attachments/assets/353ae19a-841c-4d66-9e62-3820de79c7f9)\r\n\r\nI won't have `source-field` when saving the sandboxing permission.\r\n\r\nFrom the screenshot above, if I choose any field from `feedback` I won't get the `source-field`. Only when I choose fields that maps from foreign keys e.g. `accounts.*` then I'll get `source-field` with the ID of `feedback.account_id`, and another observation is that a FK's `fk_target_field_id` is actually the ID of the ID field of the foreign table e.g. `feedbacks.account_id`'s `fk_target_field_id` is `accounts.id`.\r\n\r\nThat means in actual case when `source-field` is needed, we won't be using `fk_target_field_id` directly anyway.\r\n\r\nCan you provide me with reproduction steps that use has `source-field` using Postgres sample database?\r\n\r\nYou can start it with\r\n```sh\r\nyarn test-qa-dbs:up\r\n```\r\n\r\nand use this credential\r\nhttps://github.com/metabase/metabase/blob/44888103944f545c3b6c84c489832fdc2868e534/e2e/support/cypress_data.js#L164-L172"", 'created_at': datetime.datetime(2024, 8, 28, 9, 16, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314817221, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt Let me test it with the Postgres sample database, I'm currently testing it with [this sample database](https://www.postgresqltutorial.com/postgresql-getting-started/postgresql-sample-database/) for both FK and non-FK scenarios, and that works in my testing.\r\n\r\nIt's very strange that you are still getting the same error... What you're describing is the behavior I expected, where non-FK fields should not append `source-field`, and FK field should append `source-field` as the target field's ID, and I think that's what the Web UI does.\r\n\r\n> That means in actual case when source-field is needed, we won't be using fk_target_field_id directly anyway.\r\n\r\nFrom my observation, the ID of the field itself is always different from the `source-field` when inspected thru network inspector, so that is why I think using `fk_target_field_id` makes sense."", 'created_at': datetime.datetime(2024, 8, 28, 9, 32, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314860660, 'issue_id': 2477628693, 'author': 'heypoom', 'body': ""@WiNloSt I think I know where my confusion comes from. In the UI, it's possible to add both the ID of the current column (e.g. `account_id`), or we can add the ID of the column in the referenced table (e.g. `account.id`).\r\n\r\nBut for our intents and purposes, we really only need the ID for **our own column** (not the referenced table's) because we scan for `tenant_id` from **our own table** (not the tenant table), so you're right that we don't need `source-field`. That took me a while to understand, I'll update the PR to get rid of `source-table` then üòÖ \r\n\r\n![CleanShot 2567-08-28 at 16 48 58@2x](https://github.com/user-attachments/assets/c4ae5cd0-59c3-4db6-aa1c-23bc79ca0428)\r\n\r\n![CleanShot 2567-08-28 at 16 50 47@2x](https://github.com/user-attachments/assets/0766433b-ce3b-4a60-b817-8d0533e19efd)"", 'created_at': datetime.datetime(2024, 8, 28, 9, 52, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314864772, 'issue_id': 2477628693, 'author': 'WiNloSt', 'body': ""> @WiNloSt I think I know where my confusion comes from. In the UI, it's possible to add both the ID of the current column (e.g. `account_id`), or we can add the ID of the column in the referenced table (e.g. `account.id`).\r\n> \r\n> But for our intents and purposes, we really only need the ID for **our own column** (not the referenced table's) because we scan for `tenant_id` from **our own table** (not the tenant table), so you're right that we don't need `source-field`. That took me a while to understand, I'll update the PR to get rid of `source-table` then üòÖ\r\n> \r\n> ![CleanShot 2567-08-28 at 16 48 58@2x](https://private-user-images.githubusercontent.com/4714175/362231417-c4ae5cd0-59c3-4db6-aa1c-23bc79ca0428.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ4MzkwOTMsIm5iZiI6MTcyNDgzODc5MywicGF0aCI6Ii80NzE0MTc1LzM2MjIzMTQxNy1jNGFlNWNkMC01OWMzLTRkYjYtYWExYy0yM2JjNzljYTA0MjgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgyOCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MjhUMDk1MzEzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OGYyZGM4NmE3NTJkNzUxZGFlMmU4MTY5NDgxY2FhYzRlOGIyMTBmMDkxNzk3Yjg5MjM3ODk2YjdjNTAxYTM4MiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-7M0nWD8FMetmRIb9A-WuFkDAMPmFRC_OLEKXBBzp3A)\r\n> \r\n> ![CleanShot 2567-08-28 at 16 50 47@2x](https://private-user-images.githubusercontent.com/4714175/362232196-0766433b-ce3b-4a60-b817-8d0533e19efd.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ4MzkwOTMsIm5iZiI6MTcyNDgzODc5MywicGF0aCI6Ii80NzE0MTc1LzM2MjIzMjE5Ni0wNzY2NDMzYi1jZTNiLTRhNjAtYjgxNy04ZDA1MzNlMTllZmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgyOCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MjhUMDk1MzEzWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NzQ3ZjUwYTZhN2JhNjAyNjUzY2NkYmEwZTNhMzI0NjQ1NmJkOWQyYTc3MmM3MGIzNWYwOTJmYjkyYjU4YTk5NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Q4otyUYEY1krfeh9JpYkM5nfH6QJnd7Wta5xlI7VJAw)\r\n\r\nOk we're aligned now. I forgot to mention what you've said here that since we don't show fields from tables of foreign keys, we don't need `source-field`. You summed that up correctly."", 'created_at': datetime.datetime(2024, 8, 28, 9, 54, 43, tzinfo=datetime.timezone.utc)}]","WiNloSt on (2024-08-23 09:29:37 UTC): @heypoom It seems like for multi-tenancy step, the first option I got was always `people`
- <img width=""1104"" alt=""Screenshot 2024-08-23 at 4 27 58‚ÄØPM"" src=""https://github.com/user-attachments/assets/6a698212-e60d-467c-92df-3936d7e7f146"">
- <img width=""1121"" alt=""Screenshot 2024-08-23 at 4 28 23‚ÄØPM"" src=""https://github.com/user-attachments/assets/2c8120c9-4d72-41f5-bbf8-2ca3da11e707"">

Could you take a look?

heypoom (Issue Creator) on (2024-08-23 09:30:33 UTC): @WiNloSt thanks for testing this, we got the same issue when [play-testing with Alberto](https://www.notion.so/metabase/CLI-PR-review-8a9be6a85d214910af165e12b1cdfaf0?pvs=4) yesterday, so I'm looking into this now üôèüèª

WiNloSt on (2024-08-23 10:19:54 UTC): Changing users doesn't seem to call `sso/metabase` again, and I got the same result for all users in my case Alice has `customer_id: 11` is linked with `account_id`, but Charlie has `customer_id: 16`.

I should see the result with `account_id: 16` not 11

![image](https://github.com/user-attachments/assets/2bb349ed-ebb2-43df-8cba-044c3bf05f78)

heypoom (Issue Creator) on (2024-08-23 10:23:38 UTC): @WiNloSt it appears we don't call `sso/metabase` when switching users in Shoppy either, so I think that is expected. I'll look into the multi-tenancy issues again today üôèüèª

heypoom (Issue Creator) on (2024-08-23 11:24:21 UTC): @WiNloSt thanks for spotting this - I fixed this issue in https://github.com/metabase/metabase/pull/46857 (base of this PR), and merged it to this PR. It was caused by a race condition in `Promise.all`. You can use this PR to continue testing. 

I'll look into the issue with changing users next üôèüèª

WiNloSt on (2024-08-23 11:29:11 UTC): I'm not sure this is expected. When you change users you should sign JWT using different user info. No matter how many times I change users, my Metabase still have only 1 JWT user Alice, but I should see all 3.

heypoom (Issue Creator) on (2024-08-23 11:31:27 UTC): @WiNloSt I think the signing JWT part is done by `POST /switch-user` in this case, which should sign the JWT and call `sso/metabase` under the hood, and then set the cookie back. Do you see `POST /switch-user` when switching between users in your Network tab?

WiNloSt on (2024-08-23 11:35:02 UTC): Yeah I see multiple `switch-user` calls
![image](https://github.com/user-attachments/assets/022186f5-83b2-4518-95fe-dfdedaf18d68)

but only one `metabase/sso` call.

![image](https://github.com/user-attachments/assets/d5b11dd8-3b38-4a3c-938d-be77d20383da)

We need to call Metabase `/auth/sso` with a new JWT for a new user every time.

heypoom (Issue Creator) on (2024-08-23 15:41:45 UTC): @WiNloSt I just realized that the issue of `/metabase/sso` not being called on user change also happened in Shoppy on a page with full-page dashboards, so I'll take the time on Monday to update the SDK to support refreshing the user - maybe by exposing a hook. 

Just to make this PR possible to test for the time being, I modified the snippet to storage the last user in localStorage and do a full page reload.

(PS. I have no idea why Shoppy calls `/metabase/sso` when we change the page, I've tried to reproduce it with `key={...}` and re-rendering the `MetabaseProvider`, but none of that works. Why it consistently worked in Shoppy aside from the dashboard page is beyond me.)

github-actions[bot] on (2024-08-26 08:50:22 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d7d93633e9062e16677af653559063f75f2a3b28...e8867c084458d8d768a34a94af5112c18996d8e7.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/Mode/Mode.ts<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/ChartSettingTableColumns.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.tsx<br>frontend/src/metabase/visualizations/echarts/tooltip/index.unit.spec.ts |
| @kdoh | frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx |

WiNloSt on (2024-08-27 08:48:17 UTC): I don't know why but without removing these lines
https://github.com/metabase/metabase/blob/0191e91fe16146c9e71326063c14aa4097a7d9e9/enterprise/frontend/src/embedding-sdk/cli/utils/get-tenancy-isolation-sandboxes.ts#L56-L58

I always got an error `metabase Cannot find matching FK Table ID for FK Field`.

After some debugging. I found that the mapping value is different between the one set by the CLI and the one set by the UI

#### By CLI
![Screenshot 2024-08-27 at 3 40 29‚ÄØPM](https://github.com/user-attachments/assets/5af169fd-d707-4ee4-b277-cbc2dd797883)

Note that this one includes `source-field` which is in the snippet mentioned above, and the UI doesn't display the field in the dropdown.

#### By the UI
![Screenshot 2024-08-27 at 3 40 39‚ÄØPM](https://github.com/user-attachments/assets/ef49b6c4-3609-42e8-a20b-c97705b9e9b4)

This one doesn't include `source-field`, and the UI display the field name in the dropdown correctly.

With the above snippet removed I can view my sandboxed data as expected. Can you double-check if `source-field` is still needed?

WiNloSt on (2024-08-27 09:27:01 UTC): This seems to be a Redux's doing. From my brief testing, it seems Redux still keeps the data on memory so even if we unmount the provider and mount it again, it still retains the data. I tested really quickly, and shoppy set the exp time really short. I think that's 15 seconds.
 https://github.com/metabase/shoppy/blob/cbf54c874204deee2b6d21ab6ca6e4a5f45ae2af/api/src/auth/sign.ts#L18

So, every 15s the JWT endpoint would be call again regardless of the user.

We probably need to provide some knob e.g. `userKey` that when this key changes our SDK would call `jwtProviderUri` again once this key changed explicitly.

heypoom (Issue Creator) on (2024-08-27 22:30:56 UTC): @WiNloSt good catch, thank you so much for the extensive re-testing!

re: `source-field`, I've checked the UI and the source-field is required only when it's a foreign key which is referenced by `fk_target_field_id` (not `field.id`). I've updated the PR so that it only adds the source-field when it's a foreign key. I re-tested this and now it works for both FK and non-FK scenarios.

![CleanShot 2567-08-28 at 05 29 23@2x](https://github.com/user-attachments/assets/cd67b80a-2683-4725-b4c2-9419f0c38d81)

re: user login, I've [gotten feedback from Alberto](https://metaboat.slack.com/archives/C063Q3F1HPF/p1724784214484189?thread_ts=1724751130.585409&cid=C063Q3F1HPF) that we can keep the current reload behaviour as-is, as it's intended to be a PoC code that the user can modify.

WiNloSt on (2024-08-28 09:16:55 UTC): @heypoom Can you double-check `source-field` again?



The latest commit still gives me the same error.

From my testing, unless you choose fields from tables of a foreign key.
![Screenshot 2024-08-28 at 4 04 26‚ÄØPM](https://github.com/user-attachments/assets/353ae19a-841c-4d66-9e62-3820de79c7f9)

I won't have `source-field` when saving the sandboxing permission.

From the screenshot above, if I choose any field from `feedback` I won't get the `source-field`. Only when I choose fields that maps from foreign keys e.g. `accounts.*` then I'll get `source-field` with the ID of `feedback.account_id`, and another observation is that a FK's `fk_target_field_id` is actually the ID of the ID field of the foreign table e.g. `feedbacks.account_id`'s `fk_target_field_id` is `accounts.id`.

That means in actual case when `source-field` is needed, we won't be using `fk_target_field_id` directly anyway.

Can you provide me with reproduction steps that use has `source-field` using Postgres sample database?

You can start it with
```sh
yarn test-qa-dbs:up
```

and use this credential
https://github.com/metabase/metabase/blob/44888103944f545c3b6c84c489832fdc2868e534/e2e/support/cypress_data.js#L164-L172

heypoom (Issue Creator) on (2024-08-28 09:32:35 UTC): @WiNloSt Let me test it with the Postgres sample database, I'm currently testing it with [this sample database](https://www.postgresqltutorial.com/postgresql-getting-started/postgresql-sample-database/) for both FK and non-FK scenarios, and that works in my testing.

It's very strange that you are still getting the same error... What you're describing is the behavior I expected, where non-FK fields should not append `source-field`, and FK field should append `source-field` as the target field's ID, and I think that's what the Web UI does.


From my observation, the ID of the field itself is always different from the `source-field` when inspected thru network inspector, so that is why I think using `fk_target_field_id` makes sense.

heypoom (Issue Creator) on (2024-08-28 09:52:48 UTC): @WiNloSt I think I know where my confusion comes from. In the UI, it's possible to add both the ID of the current column (e.g. `account_id`), or we can add the ID of the column in the referenced table (e.g. `account.id`).

But for our intents and purposes, we really only need the ID for **our own column** (not the referenced table's) because we scan for `tenant_id` from **our own table** (not the tenant table), so you're right that we don't need `source-field`. That took me a while to understand, I'll update the PR to get rid of `source-table` then üòÖ 

![CleanShot 2567-08-28 at 16 48 58@2x](https://github.com/user-attachments/assets/c4ae5cd0-59c3-4db6-aa1c-23bc79ca0428)

![CleanShot 2567-08-28 at 16 50 47@2x](https://github.com/user-attachments/assets/0766433b-ce3b-4a60-b817-8d0533e19efd)

WiNloSt on (2024-08-28 09:54:43 UTC): Ok we're aligned now. I forgot to mention what you've said here that since we don't show fields from tables of foreign keys, we don't need `source-field`. You summed that up correctly.

"
2477512540,pull_request,closed,,dx: forbid imports from storybook testing-library outside stories,"### Description

we shouldn't use storybook testing-library outside stories",uladzimirdev,2024-08-21 09:12:53+00:00,['uladzimirdev'],2024-08-26 08:09:41+00:00,2024-08-21 14:55:31+00:00,https://github.com/metabase/metabase/pull/47056,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]",[],
2477489501,pull_request,closed,,bump onboarding version to 1.3.0,"Epic: https://github.com/metabase/metabase/issues/46741

[notion thread](https://www.notion.so/Reduce-the-number-of-choices-in-onboarding-flow-f74849658dce4cceb9a9fd33b243f820?d=a3f0972fcf7a42939106f0e09f4aa6f6&pvs=4#a62f60c6438f4f55a3831c812e5c21b3)

This updates the onboarding version to 1.3.0.

The new onboarding version includes the changes from [Reduce the number of choices in onboarding flow](https://www.notion.so/metabase/Reduce-the-number-of-choices-in-onboarding-flow-f74849658dce4cceb9a9fd33b243f820):
- [make the newsletter signup a checkbox instead of a button (+122 ‚àí211)](https://github.com/metabase/metabase/pull/46783) 
- [skip analytics opt out step for people on cloud (+191 ‚àí25)](https://github.com/metabase/metabase/pull/46965)",npretto,2024-08-21 09:02:26+00:00,['npretto'],2024-10-08 16:16:51+00:00,2024-08-21 14:23:17+00:00,https://github.com/metabase/metabase/pull/47055,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2301540820, 'issue_id': 2477489501, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 62fdd015f9346a29ba03d3089314f1586c9c169f...344e1cd24c38b2049825adad208d41cc08098c9e.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/analytics.ts |', 'created_at': datetime.datetime(2024, 8, 21, 9, 3, 48, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-21 09:03:48 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 62fdd015f9346a29ba03d3089314f1586c9c169f...344e1cd24c38b2049825adad208d41cc08098c9e.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/analytics.ts |

"
2477467201,pull_request,closed,,Fix `docker-compose` not available on Mac,"[Raised here](https://metaboat.slack.com/archives/C010L1Z4F9S/p1721291516766999). But I finally pull the plug.

> Our Cypress commands are still using the V1 command, and with the [latest bug in Docker for Mac](https://docs.docker.com/desktop/release-notes/#for-mac-2), docker-compose will return command not found error. But this doesn‚Äôt affect the V2 docker compose command.

### How to test
Test both `test-qa-dbs:down` and `test-qa-dbs:up` that they still work.
",WiNloSt,2024-08-21 08:52:18+00:00,['WiNloSt'],2024-08-21 19:05:38+00:00,2024-08-21 18:06:34+00:00,https://github.com/metabase/metabase/pull/47054,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2477404293,pull_request,closed,,try pnpm,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-08-21 08:22:55+00:00,['uladzimirdev'],2024-08-21 08:55:37+00:00,2024-08-21 08:55:35+00:00,https://github.com/metabase/metabase/pull/47053,"[('.Team/DevEx', '')]",[],
2477290186,pull_request,closed,,Include collection path in the app bar for metrics,"Related to #47006, but does not fully resolve it.
It simply adds a collection breadcrumb to the app bar for metrics.",nemanjaglumac,2024-08-21 07:30:59+00:00,['nemanjaglumac'],2024-10-08 16:16:56+00:00,2024-08-21 09:23:06+00:00,https://github.com/metabase/metabase/pull/47051,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2477249195,pull_request,closed,,[notification] Fix test pulse endpoint does not work properly for htt‚Ä¶,"https://github.com/metabase/metabase/pull/46474

but to the feature branch this time",qnkhuat,2024-08-21 07:09:47+00:00,['qnkhuat'],2024-08-21 07:32:11+00:00,2024-08-21 07:32:10+00:00,https://github.com/metabase/metabase/pull/47050,"[('.Team/Workflows', 'aka BEC')]",[],
2477213974,pull_request,closed,,"ü§ñ backported ""[serdes] move most of the models over to using spec""","Backport of #46966, #47121, #47171, #47136, #46973
",github-automation-metabase,2024-08-21 06:50:28+00:00,"['piranha', 'github-automation-metabase']",2024-08-26 05:52:30+00:00,2024-08-26 05:52:29+00:00,https://github.com/metabase/metabase/pull/47049,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2476936782,pull_request,closed,,Cljfmt config part 4,"Final part of the `cljfmt` project. Run `cljfmt` against `test`.

I went over all of these changes and made sure everything looked good and made several passes tweaking configuration as well as discovering and fixing (https://github.com/weavejester/cljfmt/issue/351) in PR https://github.com/weavejester/cljfmt/pull/352 and running things again until I was happy. 

Sorry this PR is so big but I guess it proves how desperately we needed it! It seems like a lot of people have editors that don't understand the community indentation rules. About 50% of the things fixed here are things that are obviously indented wrong e.g.

```clj
(defn x []
    (let [y 1] 
    y))    

(+ 1
  2)
```

Some of these are the result of renaming stuff and not fixing formatting for places that use them, some are completely inexplicable.

Maybe another 40% are indented the wrong way for the current form e.g. using `1` space for stuff with an implicit `let` like `do`

```clj
(try
 (x)) ; 1 space instead of 2
```

or `try` or using `2` spaces for a plain function call e.g.

```clj
(+
  1
  2)
```
  
Most of these are probably from people using editors that don't know how to indent Lisp code properly.

The last 10% or so are ones that were indented correctly once upon a time e.g.

```clj
;; at one point we had `{:style/indent 1}` for toucan.core/select, but this was several years ago. 
;; select is a normal function and should be indented as such
(t2/select User
  :id 1)
  ```
  
but is no longer correct given that we've updated most of of `:style/indent` rules to match the community rules in https://guide.clojure.style/#vertically-align-fn-args and https://guide.clojure.style/#one-space-indent over the years. So that 10% or so of misindented code is finally getting fixed so it follows the community style guide more closely.

Oh yeah I also added a convenient `./bin/cljfmt.sh` script here so you can easily reformat code that has changed since the last commit:

```sh
./bin/cljfmt-updated.sh
```

or relative to a specific git ref e.g. `master`

```sh
./bin/cljfmt-updated.sh master
```

I also added a `./bin/kondo-updated.sh` script for running Kondo against only the files that have changed",camsaul,2024-08-21 03:03:07+00:00,['camsaul'],2024-10-08 16:16:41+00:00,2024-08-22 16:24:17+00:00,https://github.com/metabase/metabase/pull/47047,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2476923529,pull_request,closed,,Cljfmt config part 3,"Follow on to https://github.com/metabase/metabase/pull/46998 and #47035 

This PR enables `cljfmt` for everything except for `test`... I submitted two more upstream bugfix PRs, https://github.com/weavejester/cljfmt/pull/348 and https://github.com/weavejester/cljfmt/pull/350, to ensure our code indents nicely. 

I manually verified all of the whitespace changes, see https://metaboat.slack.com/archives/CKZEMT1MJ/p1724183177483639 for more info

Quick ‚úÖ appreciated.",camsaul,2024-08-21 02:51:12+00:00,['camsaul'],2024-10-08 16:16:46+00:00,2024-08-21 19:27:09+00:00,https://github.com/metabase/metabase/pull/47046,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2476680448,pull_request,closed,,"ü§ñ backported ""docs: clean up Azure AD references""",#47041,github-automation-metabase,2024-08-20 23:06:02+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-20 23:07:34+00:00,2024-08-20 23:07:33+00:00,https://github.com/metabase/metabase/pull/47045,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2476671815,pull_request,closed,,translation endpoint to convert entity IDs to sequential IDs,"Resolves #47043

Adds endpoint and functions that take a json body with `{model: [entity_id1, entity_id2, ...]}` and returns a mapping from entity_id -> sequential ids (aka ids).

- [x] Tests for multiple entity ids
- [x] Tests for every table with an entity id
- [x] Perf testing

# Perf findings:
I've added 35,000 entities with entity_ids, and here are the results:

```clojure
  (def realistic-request
    (update-vals (:request (run-translation items))
                 (comp #(take 5 %) shuffle)))

  (-> realistic-request vals flatten count)
  ;; => 70
  
  (criterium/bench
   ;70 items, 35,000 entities total
   (api.embed.common/table->entity-ids->ids realistic-request))
   ;;   Evaluation count : 13260 in 60 samples of 221 calls.
   ;;              Execution time mean : 5.284078 ms
   ;;     Execution time std-deviation : 818.174829 ¬µs
   ;;    Execution time lower quantile : 4.336682 ms ( 2.5%)
   ;;    Execution time upper quantile : 7.759709 ms (97.5%)
   ;;                    Overhead used : 1.898153 ns
   ;;
   ;; Found 4 outliers in 60 samples (6.6667 %)
   ;; 	low-severe	 2 (3.3333 %)
   ;; 	low-mild	 2 (3.3333 %)
   ;;  Variance from outliers : 85.8508 % Variance is severely inflated by outliers

  (def big-request
    (update-vals (:request (run-translation items))
                 (comp #(take 50 %) shuffle)))

  (-> big-request vals flatten count)

  (criterium/bench
   ;; => 700 items, 35,000 entities total
   (api.embed.common/table->entity-ids->ids big-request))
;; Evaluation count : 1260 in 60 samples of 21 calls.
;;              Execution time mean : 47.418405 ms
;;     Execution time std-deviation : 5.405070 ms
;;    Execution time lower quantile : 34.629211 ms ( 2.5%)
;;    Execution time upper quantile : 53.895442 ms (97.5%)
;;                    Overhead used : 1.898153 ns
;;
;; Found 1 outliers in 60 samples (1.6667 %)
;; 	low-severe	 1 (1.6667 %)
;;  Variance from outliers : 75.4886 % Variance is severely inflated by outliers
```
",escherize,2024-08-20 22:56:21+00:00,['escherize'],2024-08-21 19:59:07+00:00,2024-08-21 18:57:20+00:00,https://github.com/metabase/metabase/pull/47044,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2302760976, 'issue_id': 2476671815, 'author': 'escherize', 'body': 'Moved to `entity-id-translation-service` branch: https://github.com/metabase/metabase/pull/47094', 'created_at': datetime.datetime(2024, 8, 21, 18, 57, 20, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-08-21 18:57:20 UTC): Moved to `entity-id-translation-service` branch: https://github.com/metabase/metabase/pull/47094

"
2476639956,pull_request,closed,,docs: clean up Azure AD references,,alexyarosh,2024-08-20 22:29:52+00:00,['alexyarosh'],2024-08-20 23:07:59+00:00,2024-08-20 23:05:15+00:00,https://github.com/metabase/metabase/pull/47041,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2476582635,pull_request,closed,,Add database type adjustments to server side generated temporal values,"Closes #46924

This PR fixes casting of timestamps to server side relative datetime logic on Snowflake. Datetime are casted to type of corresponding field.",lbrdnk,2024-08-20 21:40:11+00:00,['lbrdnk'],2024-08-26 10:36:17+00:00,2024-08-26 10:36:15+00:00,https://github.com/metabase/metabase/pull/47039,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2305034208, 'issue_id': 2476582635, 'author': 'metamben', 'body': ""> While I agree that needing to do this sucks, I don't think it's an abuse of dynamic vars. I'm not aware of a better way to achieve this.\r\n\r\nI think the usual approach is to annotate the value to be transformed with the information from the context. Could we do that here?"", 'created_at': datetime.datetime(2024, 8, 22, 15, 31, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2305858416, 'issue_id': 2476582635, 'author': 'lbrdnk', 'body': '> While I agree that needing to do this sucks, I don\'t think it\'s an abuse of dynamic vars. I\'m not aware of a better way to achieve this.\r\n> \r\n> However, I\'m concerned that needing to know about this `binding` and do it in the right places is a complexity I\'d be glad to avoid. It would be great to do something like a Methodical ""around"" wrapper than did the binding automatically, in one place, for all expressions. But the generic `->honeysql` is too broad, so I\'m not sure it\'s practical.\r\n\r\nThank you for the feedback. What you mention would be ideal. In this case however it may be problematic. The `:=` implementation first transforms the field prior to honeysql call. I believe the wrapper would need to be passed that transforming function.\r\n\r\nThe places where the binding should occur are described in the vars docstring.', 'created_at': datetime.datetime(2024, 8, 22, 22, 31, 48, tzinfo=datetime.timezone.utc)}]","metamben on (2024-08-22 15:31:13 UTC): I think the usual approach is to annotate the value to be transformed with the information from the context. Could we do that here?

lbrdnk (Issue Creator) on (2024-08-22 22:31:48 UTC): Thank you for the feedback. What you mention would be ideal. In this case however it may be problematic. The `:=` implementation first transforms the field prior to honeysql call. I believe the wrapper would need to be passed that transforming function.

The places where the binding should occur are described in the vars docstring.

"
2476555963,pull_request,closed,,[prototype] Content translation (yaml approach),This is a prototype,rafpaf,2024-08-20 21:18:26+00:00,['rafpaf'],2024-08-27 22:36:33+00:00,2024-08-27 22:36:33+00:00,https://github.com/metabase/metabase/pull/47038,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2299784108, 'issue_id': 2476555963, 'author': 'rafpaf', 'body': '* **#47038** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47038?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 20, 21, 18, 42, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-20 21:18:42 UTC): * **#47038** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47038?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2476554714,pull_request,closed,,[prototype] Content translation (hybrid approach),This is a prototype,rafpaf,2024-08-20 21:17:26+00:00,['rafpaf'],2024-08-27 22:36:24+00:00,2024-08-27 22:36:23+00:00,https://github.com/metabase/metabase/pull/47037,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2476514236,pull_request,closed,,Cljfmt config part 2,"Follow on to #46998

This PR enables `cljfmt` for `enterprise/backend` and `modules/drivers` and makes a few adjustments to the config so they format nicely. I manually verified all of the changes and adjusted config where needed and tweaked a few indent specs but things look pretty good now I think.",camsaul,2024-08-20 20:46:59+00:00,['camsaul'],2024-10-08 16:16:49+00:00,2024-08-21 17:29:42+00:00,https://github.com/metabase/metabase/pull/47035,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2476449160,pull_request,closed,,"ü§ñ backported ""docs: bring back code highlighting""",#47029,github-automation-metabase,2024-08-20 20:03:13+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-20 20:04:54+00:00,2024-08-20 20:04:53+00:00,https://github.com/metabase/metabase/pull/47033,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2476446686,pull_request,closed,,recents updates to better support metrics,"When I wrote the recents api backend, there was not a notion of Metrics, since then they've been added in, and I noticed a bug, as well as a slack thread about not allowing metrics to be updated via `POST /api/activity/recents`.

Some fixes for better supporting Metrics in the recents API:

- [x] allows updating metric views through `POST /api/activity/recents` 
- [x] improves parent_collection calculation",escherize,2024-08-20 20:01:40+00:00,['escherize'],2024-09-06 15:42:43+00:00,2024-08-22 17:48:02+00:00,https://github.com/metabase/metabase/pull/47032,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2304949598, 'issue_id': 2476446686, 'author': 'escherize', 'body': ""Good Idea, I'll add a test for it, and add metrics into the test that covers all models."", 'created_at': datetime.datetime(2024, 8, 22, 15, 14, 5, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-08-22 15:14:05 UTC): Good Idea, I'll add a test for it, and add metrics into the test that covers all models.

"
2476440198,pull_request,closed,,Bump Macaw to 0.2.3 and improve logging,"### Description

This will fix some hallucinated fields being analyzed, and add a bit more logging around performance.",crisptrutski,2024-08-20 19:57:55+00:00,['crisptrutski'],2024-10-08 16:16:55+00:00,2024-08-21 10:20:20+00:00,https://github.com/metabase/metabase/pull/47031,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2476432094,pull_request,closed,,extending table component features,"### Description

Add a few new features to out existing simple table component:
- `ifEmpty` prop for when there are no rows
- `formatValueForSorting` to handle sorting complex values
- pagination controls 
- `cols` prop to add column groups
- decouple the table from the default sorting (useful for API driven tables)

### How to verify
Currently, this table is only used for API Keys and Upload Management, Ensure that things work as expected in those areas

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-08-20 19:53:13+00:00,['npfitz'],2024-08-23 14:49:45+00:00,2024-08-22 18:31:43+00:00,https://github.com/metabase/metabase/pull/47030,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2476422979,pull_request,closed,,docs: bring back code highlighting,"A while ago i removed code highlighting from some SQL articles because wrong highlights made the code very difficult to read. With https://github.com/metabase/metabase.github.io/pull/3786, highlighting is fixed, so we can bring it back.",alexyarosh,2024-08-20 19:47:57+00:00,['alexyarosh'],2024-08-20 20:05:22+00:00,2024-08-20 20:02:22+00:00,https://github.com/metabase/metabase/pull/47029,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2476394784,pull_request,closed,,"ü§ñ backported ""fix: upgrade elliptic to resolve security issues""",#47014,github-automation-metabase,2024-08-20 19:32:02+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-20 20:25:51+00:00,2024-08-20 20:25:50+00:00,https://github.com/metabase/metabase/pull/47028,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2476379347,pull_request,closed,,"ü§ñ backported ""refactor: Simplify question data source""",Backport #46989,github-automation-metabase,2024-08-20 19:23:40+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-20 21:29:54+00:00,2024-08-20 21:29:54+00:00,https://github.com/metabase/metabase/pull/47027,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2476191805,pull_request,closed,,remove pnpm lockfile,I accidentally committed that file,uladzimirdev,2024-08-20 17:40:04+00:00,['uladzimirdev'],2024-10-08 16:17:01+00:00,2024-08-20 17:42:49+00:00,https://github.com/metabase/metabase/pull/47024,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2476122952,pull_request,closed,,[Permissions] Data permissions graph utils reorganization,"### Description

`frontend/src/metabase/admin/permissions/utils/graph/data-permissions.ts` has been increasingly hard to navigate with ~1700 LoC. This PR splits up the code into three major areas of concern:
1. accessing parts of the data permissions graph
2. updating the graph
3. detecting permissions existing in the graph

This is part of a iterative effort of mine to take our permissions utils and organize it into a library with a simpler (and documented) API and make it more easily unit tested.

### How to verify

The code should be functionally equivalent to what existed before.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
Not needed
",sloansparger,2024-08-20 16:58:31+00:00,['sloansparger'],2024-08-23 19:44:49+00:00,2024-08-23 19:07:13+00:00,https://github.com/metabase/metabase/pull/47023,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2476106932,pull_request,closed,,Enabling Webhook Alerts,"Closes https://github.com/metabase/metabase/issues/46341

### Description
Adds the ability to enable webhook notifications for questions

### How to verify
1. Create a valid webhook
2. Go to any saved question and click the share button in the header
3. Select ""create an alert"" and enable your webhook
4. click test if you'd like to test the alert. Otherwise hit save

### Demo
![chrome_QW2pLjZL3Y](https://github.com/user-attachments/assets/aab1b8a5-f9ff-4741-9d8a-9ea9e309851b)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-08-20 16:49:01+00:00,['npfitz'],2024-08-29 03:43:13+00:00,2024-08-29 03:43:11+00:00,https://github.com/metabase/metabase/pull/47022,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2476102868,pull_request,closed,,fix padding on setup completed step when on cloud,"Epic: https://github.com/metabase/metabase/issues/46741

# Description
Fixed a bug caused by [make the newsletter signup a checkbox instead of a button (+122 ‚àí211)](https://github.com/metabase/metabase/pull/46783/files#diff-32fa510a1d23f2fe49fd596fc072a20377e836c9d804c3f3b51776719747de2eL8)

I removed a margin bottom that it seemingly had no visual need, but it turns out it's needed to add space between the `Completed Step` and the `CloudMigrationHelp` component, which is only visible when on cloud (you can simulate it with the CYPRESS_NO_FEATURES_TOKEN, or by changing [this line](https://github.com/metabase/metabase/blob/2e770300280f88d08c948bef3deaa973381d335b/frontend/src/metabase/setup/components/CloudMigrationHelp/CloudMigrationHelp.tsx#L15-L16))

Before
<img width=""946"" alt=""image"" src=""https://github.com/user-attachments/assets/015c4108-cf60-4277-8b32-5f044215bbef"">


After
<img width=""908"" alt=""image"" src=""https://github.com/user-attachments/assets/f82021da-a609-4060-92ac-c1d0225ae8e4"">
",npretto,2024-08-20 16:46:52+00:00,['npretto'],2024-10-08 16:16:58+00:00,2024-08-21 07:41:07+00:00,https://github.com/metabase/metabase/pull/47021,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2299309164, 'issue_id': 2476102868, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a556e1cd8eb0e3ff1661096030ae81d48c912e75...2e770300280f88d08c948bef3deaa973381d335b.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 20, 16, 48, 14, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-20 16:48:14 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a556e1cd8eb0e3ff1661096030ae81d48c912e75...2e770300280f88d08c948bef3deaa973381d335b.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx |

"
2476049710,pull_request,closed,,"ü§ñ backported ""Update later stage stale references on clause removal""",#46926,github-automation-metabase,2024-08-20 16:18:54+00:00,"['lbrdnk', 'github-automation-metabase']",2024-08-20 19:06:48+00:00,2024-08-20 19:06:47+00:00,https://github.com/metabase/metabase/pull/47020,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2475811226,pull_request,closed,,"ü§ñ backported ""refactor: sort import members inside destructuring""",  #47009,github-automation-metabase,2024-08-20 14:30:18+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-20 18:11:37+00:00,2024-08-20 18:11:36+00:00,https://github.com/metabase/metabase/pull/47016,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2299400754, 'issue_id': 2475811226, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d7eac998e9e441ec58da9386585cb2aac6920d22...fa1a3d5f3399c90d84231eb438e507c64c9bd79f.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/DashboardClickAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartCaption.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidget.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetList.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetPopover.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/TimelineEventTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/ColumnSettings.jsx<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectRelationships.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/utils.ts<br>frontend/src/metabase/visualizations/components/ScalarValue/ScalarValue.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableCell.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableFooter.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.tsx<br>frontend/src/metabase/visualizations/components/TransformedVisualization/TransformedVisualization.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/components/skeletons/SkeletonCaption/SkeletonCaption.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/goal-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/utils.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/index.ts<br>frontend/src/metabase/visualizations/echarts/types.ts<br>frontend/src/metabase/visualizations/lib/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/errors.js<br>frontend/src/metabase/visualizations/lib/graph/columns.ts<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/scalar_utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/series.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/settings/validation.js<br>frontend/src/metabase/visualizations/lib/settings/visualization.js<br>frontend/src/metabase/visualizations/lib/table.js<br>frontend/src/metabase/visualizations/lib/table_format.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChartView/RowChartView.tsx<br>frontend/src/metabase/visualizations/shared/utils/data.ts<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/DashCardPlaceholder.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTableCell.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/types.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/Progress/Progress.jsx<br>frontend/src/metabase/visualizations/visualizations/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/visualizations/Scalar/Scalar.jsx<br>frontend/src/metabase/visualizations/visualizations/ScatterPlot/ScatterPlot.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.jsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.tsx<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Text/Text.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/WaterfallChart/WaterfallChart.tsx |\n| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInputBlurChange/TextInputBlurChange.unit.spec.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/use-floating-auto-update.ts<br>frontend/src/metabase/ui/components/overlays/Popover/use-popover.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.unit.spec.tsx<br>frontend/src/metabase/ui/theme.ts |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/ChartColorSettings/utils.unit.spec.ts<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/LogoIcon.jsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.jsx<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.unit.spec.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/NotificationsApp.jsx<br>frontend/src/metabase/account/password/components/UserPasswordForm/UserPasswordForm.tsx<br>frontend/src/metabase/auth/components/GoogleButton/GoogleButton.tsx<br>frontend/src/metabase/home/components/CustomHomePageModal/CustomHomePageModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/setup/components/ActiveStep/ActiveStep.tsx<br>frontend/src/metabase/setup/components/InactiveStep/InactiveStep.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/SetupSection/SetupSection.tsx<br>frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts<br>frontend/src/metabase/sharing/components/AddEditSidebar/CaveatMessage/CaveatMessage.styled.tsx<br>frontend/src/metabase/sharing/components/AddEditSidebar/DeleteSubscriptionAction.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/sharing/components/NewPulseSidebar.tsx<br>frontend/src/metabase/sharing/components/PulsesListSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/common.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/enterprise.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/premium.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx<br>frontend/src/metabase/status/components/StatusLarge/StatusLarge.tsx<br>frontend/src/metabase/status/components/StatusSmall/StatusSmall.tsx<br>frontend/src/metabase/status/hooks/use-status-visibility.ts<br>frontend/src/metabase/timelines/common/components/ModalHeader/ModalHeader.tsx<br>frontend/src/metabase/timelines/common/components/MoveEventModal/MoveEventModal.tsx<br>frontend/src/metabase/timelines/questions/components/EventCard/EventCard.tsx<br>frontend/src/metabase/timelines/questions/components/TimelineCard/TimelineCard.tsx |', 'created_at': datetime.datetime(2024, 8, 20, 17, 39, 34, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-20 17:39:34 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d7eac998e9e441ec58da9386585cb2aac6920d22...fa1a3d5f3399c90d84231eb438e507c64c9bd79f.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/DashboardClickAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartCaption.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidget.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetList.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetPopover.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/TimelineEventTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/ColumnSettings.jsx<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectRelationships.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/utils.ts<br>frontend/src/metabase/visualizations/components/ScalarValue/ScalarValue.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableCell.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableFooter.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.tsx<br>frontend/src/metabase/visualizations/components/TransformedVisualization/TransformedVisualization.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/components/skeletons/SkeletonCaption/SkeletonCaption.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/goal-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/utils.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/index.ts<br>frontend/src/metabase/visualizations/echarts/types.ts<br>frontend/src/metabase/visualizations/lib/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/errors.js<br>frontend/src/metabase/visualizations/lib/graph/columns.ts<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/scalar_utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/series.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/settings/validation.js<br>frontend/src/metabase/visualizations/lib/settings/visualization.js<br>frontend/src/metabase/visualizations/lib/table.js<br>frontend/src/metabase/visualizations/lib/table_format.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChartView/RowChartView.tsx<br>frontend/src/metabase/visualizations/shared/utils/data.ts<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/DashCardPlaceholder.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.jsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTableCell.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/types.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/Progress/Progress.jsx<br>frontend/src/metabase/visualizations/visualizations/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/visualizations/Scalar/Scalar.jsx<br>frontend/src/metabase/visualizations/visualizations/ScatterPlot/ScatterPlot.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.jsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.tsx<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Text/Text.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/WaterfallChart/WaterfallChart.tsx |
| @kdoh | frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInputBlurChange/TextInputBlurChange.unit.spec.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/use-floating-auto-update.ts<br>frontend/src/metabase/ui/components/overlays/Popover/use-popover.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.unit.spec.tsx<br>frontend/src/metabase/ui/theme.ts |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/ChartColorSettings/utils.unit.spec.ts<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/LogoIcon.jsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.jsx<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.unit.spec.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/NotificationsApp.jsx<br>frontend/src/metabase/account/password/components/UserPasswordForm/UserPasswordForm.tsx<br>frontend/src/metabase/auth/components/GoogleButton/GoogleButton.tsx<br>frontend/src/metabase/home/components/CustomHomePageModal/CustomHomePageModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/setup/components/ActiveStep/ActiveStep.tsx<br>frontend/src/metabase/setup/components/InactiveStep/InactiveStep.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/SetupSection/SetupSection.tsx<br>frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts<br>frontend/src/metabase/sharing/components/AddEditSidebar/CaveatMessage/CaveatMessage.styled.tsx<br>frontend/src/metabase/sharing/components/AddEditSidebar/DeleteSubscriptionAction.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/sharing/components/NewPulseSidebar.tsx<br>frontend/src/metabase/sharing/components/PulsesListSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/common.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/enterprise.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/premium.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx<br>frontend/src/metabase/status/components/StatusLarge/StatusLarge.tsx<br>frontend/src/metabase/status/components/StatusSmall/StatusSmall.tsx<br>frontend/src/metabase/status/hooks/use-status-visibility.ts<br>frontend/src/metabase/timelines/common/components/ModalHeader/ModalHeader.tsx<br>frontend/src/metabase/timelines/common/components/MoveEventModal/MoveEventModal.tsx<br>frontend/src/metabase/timelines/questions/components/EventCard/EventCard.tsx<br>frontend/src/metabase/timelines/questions/components/TimelineCard/TimelineCard.tsx |

"
2475808001,pull_request,closed,,"üçí backported ""refactor: rework QueryModals to a functional component""",Manual backport of #45457 (after a failed previous attempt #45548).,nemanjaglumac,2024-08-20 14:28:52+00:00,['nemanjaglumac'],2024-08-20 15:27:12+00:00,2024-08-20 15:27:10+00:00,https://github.com/metabase/metabase/pull/47015,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2475692903,pull_request,closed,,fix: upgrade elliptic to resolve security issues,"closes https://github.com/metabase/metabase/security/dependabot/151
closes https://github.com/metabase/metabase/security/dependabot/152
closes https://github.com/metabase/metabase/security/dependabot/153",uladzimirdev,2024-08-20 13:43:08+00:00,['uladzimirdev'],2024-08-20 20:26:18+00:00,2024-08-20 19:31:13+00:00,https://github.com/metabase/metabase/pull/47014,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]",[],
2475580909,pull_request,closed,,"ü§ñ backported ""docs - locked filter note""",#46940,github-automation-metabase,2024-08-20 12:55:37+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-20 12:57:18+00:00,2024-08-20 12:57:17+00:00,https://github.com/metabase/metabase/pull/47012,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2475498769,pull_request,closed,,"ü§ñ backported ""Fix 46221: Wrong collection shown in ad-hoc model-based questions""",Automated backport of #47008 with the manual conflict resolution due to #44347 not being backported.,github-automation-metabase,2024-08-20 12:16:04+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-20 20:17:45+00:00,2024-08-20 20:17:45+00:00,https://github.com/metabase/metabase/pull/47010,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2475406915,pull_request,closed,,refactor: sort import members inside destructuring,"Closes https://github.com/metabase/metabase/issues/46962

### Description

Sort imported items inside destructuring

So `import {b,a} from ""x""` becomes `import {a,b} from ""x""`.

Order is sensitive to case, so `import {c,B,a, type D} from ""y""}` becomes `import {B, type D, a, c} from ""y""`

### How to verify

CI is green, import order is correct
",uladzimirdev,2024-08-20 11:28:49+00:00,['uladzimirdev'],2024-08-20 22:00:35+00:00,2024-08-20 14:29:09+00:00,https://github.com/metabase/metabase/pull/47009,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2298628818, 'issue_id': 2475406915, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 20, 11, 29, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2298630961, 'issue_id': 2475406915, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e0a0734c62ac9fa60238f03706cb4fd90f50531c...e158fc55a41127e06f3d75cd278d7dbebdf271e4.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/DashboardClickAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartCaption.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidget.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetList.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetPopover.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/KeyValuePairChartTooltip/KeyValuePairChartTooltip.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/TimelineEventTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/ColumnSettings.jsx<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectRelationships.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/utils.ts<br>frontend/src/metabase/visualizations/components/ScalarValue/ScalarValue.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableCell.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableFooter.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.tsx<br>frontend/src/metabase/visualizations/components/TransformedVisualization/TransformedVisualization.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendLabel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/components/skeletons/SkeletonCaption/SkeletonCaption.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/goal-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/utils.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/types.ts<br>frontend/src/metabase/visualizations/hooks/use-browser-rendering-context.ts<br>frontend/src/metabase/visualizations/lib/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/errors.js<br>frontend/src/metabase/visualizations/lib/graph/columns.ts<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/scalar_utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/series.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/settings/validation.js<br>frontend/src/metabase/visualizations/lib/settings/visualization.js<br>frontend/src/metabase/visualizations/lib/table.js<br>frontend/src/metabase/visualizations/lib/table_format.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChartView/RowChartView.tsx<br>frontend/src/metabase/visualizations/shared/utils/data.ts<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/DashCardPlaceholder.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTableCell.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/types.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/Progress/Progress.jsx<br>frontend/src/metabase/visualizations/visualizations/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/visualizations/Scalar/Scalar.jsx<br>frontend/src/metabase/visualizations/visualizations/ScatterPlot/ScatterPlot.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.jsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.tsx<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Text/Text.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/WaterfallChart/WaterfallChart.tsx |\n| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/utils.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInputBlurChange/TextInputBlurChange.unit.spec.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/use-floating-auto-update.ts<br>frontend/src/metabase/ui/components/overlays/Popover/use-popover.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.unit.spec.tsx<br>frontend/src/metabase/ui/theme.ts |\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/ChartColorSettings/utils.unit.spec.ts<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/LogoIcon.jsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.jsx<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.unit.spec.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/NotificationsApp.jsx<br>frontend/src/metabase/account/password/components/UserPasswordForm/UserPasswordForm.tsx<br>frontend/src/metabase/auth/actions.ts<br>frontend/src/metabase/auth/components/GoogleButton/GoogleButton.tsx<br>frontend/src/metabase/home/components/CustomHomePageModal/CustomHomePageModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/setup/components/ActiveStep/ActiveStep.tsx<br>frontend/src/metabase/setup/components/InactiveStep/InactiveStep.tsx<br>frontend/src/metabase/setup/components/SetupSection/SetupSection.tsx<br>frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts<br>frontend/src/metabase/sharing/components/AddEditSidebar/CaveatMessage/CaveatMessage.styled.tsx<br>frontend/src/metabase/sharing/components/AddEditSidebar/DeleteSubscriptionAction.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/sharing/components/NewPulseSidebar.tsx<br>frontend/src/metabase/sharing/components/PulsesListSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/common.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/enterprise.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/premium.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx<br>frontend/src/metabase/status/components/StatusLarge/StatusLarge.tsx<br>frontend/src/metabase/status/components/StatusSmall/StatusSmall.tsx<br>frontend/src/metabase/status/hooks/use-status-visibility.ts<br>frontend/src/metabase/timelines/common/components/ModalHeader/ModalHeader.tsx<br>frontend/src/metabase/timelines/common/components/MoveEventModal/MoveEventModal.tsx<br>frontend/src/metabase/timelines/questions/components/EventCard/EventCard.tsx<br>frontend/src/metabase/timelines/questions/components/TimelineCard/TimelineCard.tsx |', 'created_at': datetime.datetime(2024, 8, 20, 11, 30, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2299835846, 'issue_id': 2475406915, 'author': 'iethree', 'body': 'holy merge conflicts batman üò´', 'created_at': datetime.datetime(2024, 8, 20, 22, 0, 34, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-20 11:29:08 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-08-20 11:30:22 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e0a0734c62ac9fa60238f03706cb4fd90f50531c...e158fc55a41127e06f3d75cd278d7dbebdf271e4.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/DashboardClickAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/ExtractColumnAction/ExtractColumnAction.tsx<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.ts<br>frontend/src/metabase/visualizations/click-actions/actions/NativeQueryClickFallback.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartCaption.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidget.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetList.tsx<br>frontend/src/metabase/visualizations/components/ChartSettingsWidgetPopover.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/KeyValuePairChartTooltip/KeyValuePairChartTooltip.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.styled.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/StackedDataTooltip/StackedDataTooltip.tsx<br>frontend/src/metabase/visualizations/components/ChartTooltip/TimelineEventTooltip.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionControl.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/ColumnSettings.jsx<br>frontend/src/metabase/visualizations/components/LeafletGridHeatMap.jsx<br>frontend/src/metabase/visualizations/components/MiniBar.jsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectRelationships.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/utils.ts<br>frontend/src/metabase/visualizations/components/ScalarValue/ScalarValue.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableCell.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableFooter.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.stories.tsx<br>frontend/src/metabase/visualizations/components/TableSimple/TableSimple.tsx<br>frontend/src/metabase/visualizations/components/TransformedVisualization/TransformedVisualization.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.tsx<br>frontend/src/metabase/visualizations/components/Visualization/LoadingView/LoadingView.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/legend/LegendLabel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPicker.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingTableColumns/TableColumnPanel/TableColumnPanel.unit.spec.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/components/settings/ColumnItem/ColumnItem.tsx<br>frontend/src/metabase/visualizations/components/skeletons/SkeletonCaption/SkeletonCaption.tsx<br>frontend/src/metabase/visualizations/echarts/cartesian/model/axis.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/model/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/goal-line.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/series.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/types.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/option/utils.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/scatter/model/index.ts<br>frontend/src/metabase/visualizations/echarts/cartesian/utils/timeseries.unit.spec.js<br>frontend/src/metabase/visualizations/echarts/cartesian/waterfall/model/dataset.ts<br>frontend/src/metabase/visualizations/echarts/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/types.ts<br>frontend/src/metabase/visualizations/hooks/use-browser-rendering-context.ts<br>frontend/src/metabase/visualizations/lib/dataset.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/errors.js<br>frontend/src/metabase/visualizations/lib/graph/columns.ts<br>frontend/src/metabase/visualizations/lib/numeric.unit.spec.js<br>frontend/src/metabase/visualizations/lib/scalar_utils.unit.spec.ts<br>frontend/src/metabase/visualizations/lib/series.ts<br>frontend/src/metabase/visualizations/lib/settings/graph.js<br>frontend/src/metabase/visualizations/lib/settings/graph.unit.spec.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/settings/utils.js<br>frontend/src/metabase/visualizations/lib/settings/validation.js<br>frontend/src/metabase/visualizations/lib/settings/visualization.js<br>frontend/src/metabase/visualizations/lib/table.js<br>frontend/src/metabase/visualizations/lib/table_format.unit.spec.js<br>frontend/src/metabase/visualizations/lib/utils.js<br>frontend/src/metabase/visualizations/lib/utils.unit.spec.js<br>frontend/src/metabase/visualizations/shared/components/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/shared/components/RowChartView/RowChartView.tsx<br>frontend/src/metabase/visualizations/shared/utils/data.ts<br>frontend/src/metabase/visualizations/shared/utils/parameter-substitution.js<br>frontend/src/metabase/visualizations/types/click-actions.ts<br>frontend/src/metabase/visualizations/visualizations/BarChart.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/CartesianChart/events.ts<br>frontend/src/metabase/visualizations/visualizations/DashCardPlaceholder.tsx<br>frontend/src/metabase/visualizations/visualizations/Funnel/Funnel.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.tsx<br>frontend/src/metabase/visualizations/visualizations/Heading/Heading.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.tsx<br>frontend/src/metabase/visualizations/visualizations/LinkViz/LinkViz.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/ObjectDetail.jsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.unit.spec.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTableCell.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/RowToggleIcon.tsx<br>frontend/src/metabase/visualizations/visualizations/PivotTable/settings.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/types.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.ts<br>frontend/src/metabase/visualizations/visualizations/PivotTable/utils.unit.spec.ts<br>frontend/src/metabase/visualizations/visualizations/Progress/Progress.jsx<br>frontend/src/metabase/visualizations/visualizations/RowChart/RowChart.tsx<br>frontend/src/metabase/visualizations/visualizations/Scalar/Scalar.jsx<br>frontend/src/metabase/visualizations/visualizations/ScatterPlot/ScatterPlot.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/AnotherColumnForm.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/ComparisonPicker.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SettingsComponents/PeriodsAgoMenuOption.tsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.jsx<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/SmartScalar.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/SmartScalar/compute.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Table.tsx<br>frontend/src/metabase/visualizations/visualizations/Table.unit.spec.js<br>frontend/src/metabase/visualizations/visualizations/Text/Text.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/WaterfallChart/WaterfallChart.tsx |
| @kdoh | frontend/src/metabase/ui/components/feedback/Skeleton/Skeleton.styled.tsx<br>frontend/src/metabase/ui/components/icons/Icon/Icon.tsx<br>frontend/src/metabase/ui/components/inputs/Checkbox/Checkbox.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/Select.styled.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/SelectItem.tsx<br>frontend/src/metabase/ui/components/inputs/Select/SelectItem/utils.ts<br>frontend/src/metabase/ui/components/inputs/Switch/Switch.styled.tsx<br>frontend/src/metabase/ui/components/inputs/TextInputBlurChange/TextInputBlurChange.unit.spec.tsx<br>frontend/src/metabase/ui/components/inputs/TimeInput/TimeInput.tsx<br>frontend/src/metabase/ui/components/overlays/Popover/use-floating-auto-update.ts<br>frontend/src/metabase/ui/components/overlays/Popover/use-popover.ts<br>frontend/src/metabase/ui/components/theme/ThemeProvider/ThemeProvider.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.tsx<br>frontend/src/metabase/ui/components/utils/DelayGroup/DelayGroup.unit.spec.tsx<br>frontend/src/metabase/ui/theme.ts |
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/ChartColorSettings/utils.unit.spec.ts<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/IllustrationWidget/IllustrationWidget.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/ImageUploadInfoDot.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/LogoIcon.jsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/components/MetabaseLinksToggleWidget/MetabaseLinksToggleDescription.tsx<br>enterprise/frontend/src/metabase-enterprise/whitelabel/index.js<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.jsx<br>frontend/src/metabase/account/notifications/components/NotificationCard/NotificationCard.unit.spec.js<br>frontend/src/metabase/account/notifications/containers/NotificationsApp/NotificationsApp.jsx<br>frontend/src/metabase/account/password/components/UserPasswordForm/UserPasswordForm.tsx<br>frontend/src/metabase/auth/actions.ts<br>frontend/src/metabase/auth/components/GoogleButton/GoogleButton.tsx<br>frontend/src/metabase/home/components/CustomHomePageModal/CustomHomePageModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/FeedbackModal.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/InteractiveTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/StaticTabContent.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/common.unit.spec.tsx<br>frontend/src/metabase/home/components/EmbedHomepage/tests/setup.tsx<br>frontend/src/metabase/home/components/HomeContent/HomeContent.tsx<br>frontend/src/metabase/home/components/HomeXraySection/HomeXraySection.tsx<br>frontend/src/metabase/setup/components/ActiveStep/ActiveStep.tsx<br>frontend/src/metabase/setup/components/InactiveStep/InactiveStep.tsx<br>frontend/src/metabase/setup/components/SetupSection/SetupSection.tsx<br>frontend/src/metabase/setup/components/UserForm/UserForm.tsx<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts<br>frontend/src/metabase/sharing/components/AddEditSidebar/CaveatMessage/CaveatMessage.styled.tsx<br>frontend/src/metabase/sharing/components/AddEditSidebar/DeleteSubscriptionAction.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/sharing/components/NewPulseSidebar.tsx<br>frontend/src/metabase/sharing/components/PulsesListSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/SharingSidebar.jsx<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/common.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/enterprise.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/premium.unit.spec.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatus/FileUploadStatus.tsx<br>frontend/src/metabase/status/components/FileUploadStatusLarge/FileUploadStatusLarge.tsx<br>frontend/src/metabase/status/components/StatusLarge/StatusLarge.tsx<br>frontend/src/metabase/status/components/StatusSmall/StatusSmall.tsx<br>frontend/src/metabase/status/hooks/use-status-visibility.ts<br>frontend/src/metabase/timelines/common/components/ModalHeader/ModalHeader.tsx<br>frontend/src/metabase/timelines/common/components/MoveEventModal/MoveEventModal.tsx<br>frontend/src/metabase/timelines/questions/components/EventCard/EventCard.tsx<br>frontend/src/metabase/timelines/questions/components/TimelineCard/TimelineCard.tsx |

iethree on (2024-08-20 22:00:34 UTC): holy merge conflicts batman üò´

"
2475400950,pull_request,closed,,Fix 46221: Wrong collection shown in ad-hoc model-based questions,"Reproduces and closes #46221 

### Description
The PR fixes the wrong collection shown in the header breadcrumb for ad-hoc questions started from models.

Even though a collection was marked as a prop in `SourceDatasetBreadcrumbs`, it was missing in an [""ad-hoc question based on a model"" scenario](https://github.com/metabase/metabase/pull/47008/files#diff-07451a7d6dee0bda8f57111c88091ed316b21f909d8779318401e69795c36613R61-R69).
![image](https://github.com/user-attachments/assets/258e99f2-8fbe-47ad-83b9-698c492a1ca9)


This PR moves the collection fetching logic inside that component. This also contains the logic to where it's absolutely needed.

### How to verify
- Follow the steps from the original issue.
- Run accompanied E2E test

### Demo
https://github.com/user-attachments/assets/38e00cf2-904f-439c-afef-be41baad6ec9

### Checklist
- [x] Tests have been added/updated to cover changes in this PR

### Stress-test
50/50 ‚úÖ https://github.com/metabase/metabase/actions/runs/10471232741

### Additional notes
- This PR does not address #47006
",nemanjaglumac,2024-08-20 11:25:42+00:00,['nemanjaglumac'],2024-08-20 12:15:15+00:00,2024-08-20 12:15:13+00:00,https://github.com/metabase/metabase/pull/47008,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2474872653,pull_request,closed,,"ü§ñ backported ""Remove extra bottom margin from summarized ad-hoc question""","Automated backport of #46993 with the manual conflict resolution.
The conflict was due to the decision not to backport #44347.
",github-automation-metabase,2024-08-20 07:02:10+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-20 14:21:23+00:00,2024-08-20 14:21:21+00:00,https://github.com/metabase/metabase/pull/46999,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2474573562,pull_request,closed,,Update cljfmt config and add to GH Actions,"We've talked about doing this for years and years but no one cared enough to actually get it over the line... now that I have some DevEx cycles I thought I would give this project a go.

- Switch to temporary fork of https://github.com/weavejester/cljfmt with my two bugfix PRs https://github.com/weavejester/cljfmt/pull/346 and https://github.com/weavejester/cljfmt/pull/347 merged in
- Add `dev.generate-cljfmt-config` to automatically generate the Cljfmt config file based on our existing `:style/indent` metadata 
- Update `.cljfmt.edn`
- Remove lots of incorrect `:style/indent` specs on functions that shouldn't get special indentation
- Add `cljfmt check` to GH Actions to enforce indentation rules
- Run cljfmt against QP source files and `bin/build` to fix issues as a proof of concept

I didn't want to turn this into a gigantic PR that reformats the whole code base, so for now just `src/metabase/query_processor` and `bin/build` are formatted. Once this PR lands I'll do some follow-on PRs that opt-in more directories until everything gets formatted nicely",camsaul,2024-08-20 02:10:18+00:00,['camsaul'],2024-10-08 16:17:00+00:00,2024-08-20 18:23:17+00:00,https://github.com/metabase/metabase/pull/46998,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2474533573,pull_request,closed,,zoom-in-timeseries-drill: do not include :hour and :minute for DATE columns,"
Closes https://github.com/metabase/metabase/issues/39366

### Description

When the user attempts to drill through a DATE column, we should not return `:hour` or `:minute` drill throughs from `available-drill-thrus`. Previously we did, which resulted in an error being displayed when the user attempted to select them.

Modify `next-breakout-unit` in zoom_in_timeseries.cljc to not return :hour or :minute units for :type/Date columns, which prevents these from being returned by `available-drill-thrus`, which prevents them appearing in UI context menus.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Databases -> Sample Database -> People
2. Summarize -> Count -> Done
3. Breakout by -> Time -> BIRTH_DATE
4. Select ""All Time"" by ""Day"" at the bottom
5. Click on a datapoint in the graph
6. Verify that ""See this day by hour"" does *not* appear in the context menu

You can also do a similar process for a pivot table visualization, and probably 10 other ways I'm not aware of üò¨.

### Demo

#### before

<img width=""1323"" alt=""zoom-in-timeseries-before"" src=""https://github.com/user-attachments/assets/8f7db905-1d57-4079-9cee-33f6ee9d1086"">

<img width=""1322"" alt=""before-error"" src=""https://github.com/user-attachments/assets/4010cf58-5afc-4c0c-92cd-31cd7c822d30"">


#### after

<img width=""1325"" alt=""zoom-in-timeseries-after"" src=""https://github.com/user-attachments/assets/d1eec540-2e77-4a7f-82b6-dfb670fbbbbb"">


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",appleby,2024-08-20 01:23:11+00:00,['appleby'],2024-08-27 17:27:48+00:00,2024-08-27 17:27:47+00:00,https://github.com/metabase/metabase/pull/46997,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2299612770, 'issue_id': 2474533573, 'author': 'appleby', 'body': 'AFAICT, the test failures look unrelated to this PR. The failing e2e test appears to be flake. The failing bigquery driver test has a name that looks like it could possibly be something broken by this PR, but the actual error appears to just be a read timeout, so maybe not? Not sure what the protocol is for re-running tests when they are suspected flakes...\r\n\r\n```\r\nERROR in metabase.query-processor-test.date-bucketing-test/count-of-grouping-test-2 (get_or_create.clj:145)\r\n\r\n:bigquery-cloud-sdk\r\n 4 checkins per hour dataset group by hour\r\nfilter by hour = [:relative-datetime :current]\r\nexpected: (= 4 (apply count-of-grouping checkins:4-per-hour :hour args))\r\n  actual: \r\n                 clojure.lang.ExceptionInfo: Failed to sync test database ""interval_900"": Read timed out\r\n```', 'created_at': datetime.datetime(2024, 8, 20, 19, 29, 59, tzinfo=datetime.timezone.utc)}, {'comment_id': 2305571016, 'issue_id': 2474533573, 'author': 'appleby', 'body': '@ranquild @bshepherdson\r\n\r\nThis is ready for re-review whenever you get a chance.', 'created_at': datetime.datetime(2024, 8, 22, 20, 26, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2310707106, 'issue_id': 2474533573, 'author': 'appleby', 'body': 'Rebased onto master and updated the label from `no-backport` to `backport`', 'created_at': datetime.datetime(2024, 8, 26, 17, 27, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2310978105, 'issue_id': 2474533573, 'author': 'appleby', 'body': ""> Well overall this LGTM but I would consider combining all those very similar tests into one single test with `doseq` to make things a little more concise before merging\r\n\r\nThat's actually how I implemented it in a first pass, then noticed the existing tests for DateTime were separate tests and copied that, thinking maybe we prefer to break them out to increase parallelism or else just prefer to have separate test cases to make it easier to identify which test failed.\r\n\r\nWill update before merging."", 'created_at': datetime.datetime(2024, 8, 26, 20, 0, 44, tzinfo=datetime.timezone.utc)}]","appleby (Issue Creator) on (2024-08-20 19:29:59 UTC): AFAICT, the test failures look unrelated to this PR. The failing e2e test appears to be flake. The failing bigquery driver test has a name that looks like it could possibly be something broken by this PR, but the actual error appears to just be a read timeout, so maybe not? Not sure what the protocol is for re-running tests when they are suspected flakes...

```
ERROR in metabase.query-processor-test.date-bucketing-test/count-of-grouping-test-2 (get_or_create.clj:145)

:bigquery-cloud-sdk
 4 checkins per hour dataset group by hour
filter by hour = [:relative-datetime :current]
expected: (= 4 (apply count-of-grouping checkins:4-per-hour :hour args))
  actual: 
                 clojure.lang.ExceptionInfo: Failed to sync test database ""interval_900"": Read timed out
```

appleby (Issue Creator) on (2024-08-22 20:26:43 UTC): @ranquild @bshepherdson

This is ready for re-review whenever you get a chance.

appleby (Issue Creator) on (2024-08-26 17:27:58 UTC): Rebased onto master and updated the label from `no-backport` to `backport`

appleby (Issue Creator) on (2024-08-26 20:00:44 UTC): That's actually how I implemented it in a first pass, then noticed the existing tests for DateTime were separate tests and copied that, thinking maybe we prefer to break them out to increase parallelism or else just prefer to have separate test cases to make it easier to identify which test failed.

Will update before merging.

"
2474524054,pull_request,closed,,hide echarts tooltip on scroll,"### Description

Hides ECharts tooltip on scroll so it does not look stuck on dashboards.

### How to verify

- Add a cartesian and a pie chart on a dashboard
- Hover chart elements to see the tooltip
- Scroll and ensure the tooltip hides

### Demo

https://github.com/user-attachments/assets/2d00d50c-cd4b-40c7-a6fe-3b1c2588e528

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-08-20 01:12:06+00:00,['alxnddr'],2024-10-08 16:16:59+00:00,2024-08-21 03:59:46+00:00,https://github.com/metabase/metabase/pull/46996,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2474508197,pull_request,closed,,Incremental Pivot Processing for Exports,"**Outstanding work**
- [x] - Embedding endpoints fail when `pivot_results` is passes like `/api/embed/dashboard/:token/dashcard/1/card/1/csv?format_rows=true&pivot_results=false`
- [x] - XLSX formatting setting is not working
- [x] FE: use Chip component

Fixes pivot exports for CSV and xlsx.

Fixes #44556

This PR:
- moves the `format_rows` query param for the various dowload endpoints (card, dashcard, public questions, etc.) to a `format-rows` body param (boolean)
- adds `pivot_results` boolean body param to the same endpoints to allow downloading pivot results either in pivoted form OR as the unpivoted results
- for xlsx exports, adds a 'native' pivot table matching the row/column/measure settings and allows the user to interact with an actual pivot table if they open the file in a spreadsheet app (assuming the app can handle pivot tables)
  - the unpivoted results are included in a 'data' sheet, and are the source data for the pivot table
  - the file is initialized with an empty pivot table, but rows are added in a streaming manner, keeping the memory use of this pivot export roughly equivalent to a non-pivoted export
- for csv pivoted exports, a nested map structure is used to build up the pivot data on a row-by-row basis, saving only the relevant aggregated data, keeping memory usage lower than if all rows are stored in memory and 'post processed' all at once.

In cases where the pivot rows/cols do combine into many many columns and rows, this can still be a large set of data,
but it should behave much better now in most cases.

The Excel export is a little more straightforward: create the export rows in the same fashion, streaming one row at a
time, and just post-process the sheet to add the pivot table in one shot at the end.

A CSV export of a pivot table, when exporting pivoted, looks like the pivoted data:

![image](https://github.com/user-attachments/assets/13b3ba81-4872-464f-bb69-10a32ab22698)




A Pivot table export when exporting 'non-pivoted' now correctly removes the 'pivot-grouping' column as well as the additional rows related to grand total/sub-totals/row-totals.

![image](https://github.com/user-attachments/assets/cc995440-eef2-4cc1-8d69-bdccaf7959fd)

A 'native' pivot export 
![image](https://github.com/user-attachments/assets/0be6ee1d-88ea-4302-9953-cfaf6601fb76)

",adam-james-v,2024-08-20 00:50:19+00:00,"['alxnddr', 'noahmoss']",2024-10-15 16:31:44+00:00,2024-10-15 16:16:03+00:00,https://github.com/metabase/metabase/pull/46995,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2368680680, 'issue_id': 2474508197, 'author': 'NevRA', 'body': '@bshepherdson can you please review this?', 'created_at': datetime.datetime(2024, 9, 23, 15, 42, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2375450699, 'issue_id': 2474508197, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff caf4284014e896bd7a52946d2ee833531ee71573...548a2908c171806a074e7e2b0a96675cff226dff.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>src/metabase/email/messages.clj |\n| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 9, 25, 23, 37, tzinfo=datetime.timezone.utc)}]","NevRA on (2024-09-23 15:42:36 UTC): @bshepherdson can you please review this?

github-actions[bot] on (2024-09-25 23:37:00 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff caf4284014e896bd7a52946d2ee833531ee71573...548a2908c171806a074e7e2b0a96675cff226dff.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Radio/Radio.stories.mdx<br>frontend/src/metabase/ui/components/inputs/Radio/Radio.styled.tsx<br>src/metabase/email/messages.clj |
| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.jsx<br>frontend/src/metabase/sharing/components/EmailAttachmentPicker.unit.spec.js<br>frontend/src/metabase/status/components/DownloadsStatus/DownloadsStatus.unit.spec.tsx |

"
2474402534,pull_request,closed,,Prevent metrics from being returned for inaccessible collections,Fixes #45832,metamben,2024-08-19 23:01:51+00:00,['metamben'],2024-08-21 18:45:55+00:00,2024-08-21 18:45:53+00:00,https://github.com/metabase/metabase/pull/46994,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2474348173,pull_request,closed,,Remove extra bottom margin from summarized ad-hoc question,"Fixes #46991

### Before
https://github.com/user-attachments/assets/16aa9a78-bc8f-4890-9a0c-43d953f90185

### Now
https://github.com/user-attachments/assets/a76eafd5-38ac-4bb0-9478-c6226187e04c

",nemanjaglumac,2024-08-19 22:29:07+00:00,['nemanjaglumac'],2024-08-20 07:01:21+00:00,2024-08-20 07:01:20+00:00,https://github.com/metabase/metabase/pull/46993,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2474263505,pull_request,closed,,refactor: Simplify question data source,"### Description

1. This PR makes `QuestionDataSource` component easier to reason about by [splitting utils into a separate file](https://github.com/metabase/metabase/pull/46989/commits/2c7971833131ec16c4358a79cf31b99dbbe7d9e4).
2. It also slightly improves its performance since it optimizes how many times we're calling an expensive `question.query()`.
    - [call it once instead of three times](https://github.com/metabase/metabase/pull/46989/commits/51ba1a6664fff4f80cf79d774d88583d282cd603)
    - [call it once instead of twice](https://github.com/metabase/metabase/pull/46989/commits/e876d21f986be95ea7276c28b218d1bb587bbfa9)


### How to verify
Everything should still behave and work like before. No changes in functionality. Therefore, all tests should pass in CI.
",nemanjaglumac,2024-08-19 21:45:34+00:00,['nemanjaglumac'],2024-08-20 21:30:20+00:00,2024-08-20 19:22:48+00:00,https://github.com/metabase/metabase/pull/46989,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2299473126, 'issue_id': 2474263505, 'author': 'ranquild', 'body': ""@nemanjaglumac calling `.query()` is expensive only if it wasn't parsed; all subsequent calls are free"", 'created_at': datetime.datetime(2024, 8, 20, 18, 22, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2299557916, 'issue_id': 2474263505, 'author': 'nemanjaglumac', 'body': ""> @nemanjaglumac calling `.query()` is expensive only if it wasn't parsed; all subsequent calls are free\r\n\r\nTIL.\r\nThank you."", 'created_at': datetime.datetime(2024, 8, 20, 19, 1, 23, tzinfo=datetime.timezone.utc)}]","ranquild on (2024-08-20 18:22:49 UTC): @nemanjaglumac calling `.query()` is expensive only if it wasn't parsed; all subsequent calls are free

nemanjaglumac (Issue Creator) on (2024-08-20 19:01:23 UTC): TIL.
Thank you.

"
2474246106,pull_request,closed,,"ü§ñ backported ""Add no-access table-level and schema-level permission""","  #46542
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-19 21:34:32+00:00,"['sloansparger', 'github-automation-metabase']",2024-08-19 22:39:00+00:00,2024-08-19 22:38:58+00:00,https://github.com/metabase/metabase/pull/46988,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2474169904,pull_request,closed,,"ü§ñ Manual backport: ""Single Log Out saml-slo-enabled defsetting"" to 49","This is a manual backport of https://github.com/metabase/metabase/pull/44794

----

ü§ñ Manual backport: ""Single Log Out saml-slo-enabled defsetting"" to 49

----


- backport:
  - use `client/client-real-response`, instead of `client-full-response`
* stop using strings for enum values (prefer kw)
* only do SLO when saml-slo-enabled is true
* make defsetting docstring formatting consistent
* log-direction is a string
* add test for enabling / disabling saml slo
* also return a 403 when the client tries, but it's disabled
* use client-full-response, which won't add '/api'.
* fix typo in deftest name",escherize,2024-08-19 20:41:55+00:00,['escherize'],2024-08-19 22:02:14+00:00,2024-08-19 22:01:46+00:00,https://github.com/metabase/metabase/pull/46987,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2474086434,pull_request,closed,,tech: Delete old analytics code,Follow up after #46980,nemanjaglumac,2024-08-19 19:50:53+00:00,['nemanjaglumac'],2024-10-08 16:17:08+00:00,2024-08-19 22:41:33+00:00,https://github.com/metabase/metabase/pull/46986,"[('Type:Tech Debt', 'or Refactoring'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2474062999,pull_request,closed,,"ü§ñ backported ""docs: special field filter syntax""",#46982,github-automation-metabase,2024-08-19 19:37:22+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-19 19:38:52+00:00,2024-08-19 19:38:51+00:00,https://github.com/metabase/metabase/pull/46985,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2474056108,pull_request,closed,,Combine filter header buttons,"Closes https://github.com/metabase/metabase/issues/46192

### Description

Combines filter header buttons (to open filter modal and then to toggle the filter bar) into a single button.

![Screen Shot 2024-08-19 at 4 29 29 PM](https://github.com/user-attachments/assets/8aa34a5c-dfd4-481a-986d-8ec474a4132f)
![filterButton states](https://github.com/user-attachments/assets/e126ea46-9bd6-4631-9fd8-3b2a35b73374)

### How to verify

Open any question, add some filters, see the little button addon that lets you toggle the filter bar.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-08-19 19:33:10+00:00,['iethree'],2024-08-29 15:45:24+00:00,2024-08-29 15:45:22+00:00,https://github.com/metabase/metabase/pull/46984,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2474024013,pull_request,closed,,Show an error message when the temporal unit is not applicable to a dashboard card,"Closes https://github.com/metabase/metabase/issues/42118

How to verify:
- New -> SQL -> `SELECT CAST('10:00' AS TIME) AS TIME` -> Save as `Q1`
- New -> Question -> `Q1` -> Aggregation by `Count`, Breakout by `TIME` -> Save as `Q2`
- Add `Q2` to a dashboard -> add a temporal unit parameter -> map to `TIME`
- Try to set the parameter value to `Year`.

Note - this is the existing UI/layout. We only show the new error message from the BE here.

<img width=""438"" alt=""Screenshot 2024-08-19 at 15 13 13"" src=""https://github.com/user-attachments/assets/c9cea1d6-5151-41bc-bb2d-ff06d9b24996"">
<img width=""430"" alt=""Screenshot 2024-08-19 at 15 17 36"" src=""https://github.com/user-attachments/assets/a932874c-d67b-4db8-b08b-ae144045a0d9"">

",ranquild,2024-08-19 19:15:24+00:00,['ranquild'],2024-08-20 11:49:12+00:00,2024-08-20 11:49:11+00:00,https://github.com/metabase/metabase/pull/46983,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2473973002,pull_request,closed,,docs: special field filter syntax,"[Slack thread](https://metaboat.slack.com/archives/C013N8XL286/p1724090273363419). We also have received tickets about this issue last few months, I just never got around to fixing this.

This note was moved from Field Filters article to SQL editor article [here](https://github.com/metabase/metabase/commit/41aed8c32b6fd191314605948ad19ab6d3c37327).
I think it should be placed back into the field filters article.

I'm putting it into that article because it's only an issue when using field filters, it doesn't apply not with general queries. So you can write your queries in BQ and never experience an issue, but as soon as you try a field filter, you get an error. That means that people are not likely to look in the general SQL editor docs (because until now, sql editor was working just fine) but in the field filter docs (because that's what changed when they got an error)

We even have users pointing out in docs feedback that backticks are not usually required.

I also changed the heading so that it'd be easier to find for BQ and Oracle users when skimming the article. 


",alexyarosh,2024-08-19 18:44:30+00:00,['alexyarosh'],2024-08-19 19:39:17+00:00,2024-08-19 19:36:28+00:00,https://github.com/metabase/metabase/pull/46982,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2473772654,pull_request,closed,,tech: Remove the last GoogleAnalytics tracking bits and references ,"### What does this PR accomplish?
This PR removes the last references to the long forgotten and dead `trackStructEvent`, as well as references to the GoogleAnalytics.

### How to test
All code should work as before (no functional changes), and all tests should still pass in CI.

### Notes
Please review this carefully.
I tried to divide the PR into separate meaningful commits for the sake of easier review, but the chance for a human mistake is still high.",nemanjaglumac,2024-08-19 16:44:05+00:00,['nemanjaglumac'],2024-10-08 16:17:10+00:00,2024-08-19 17:25:45+00:00,https://github.com/metabase/metabase/pull/46980,"[('Type:Tech Debt', 'or Refactoring'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2297001189, 'issue_id': 2473772654, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 57e1a4fba0aef652942370476a08dc1b8b76a1d6...613995a579c3d533a18c942fcd152d7ca241effb.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/lib/analytics.js<br>frontend/src/metabase/visualizations/components/CardRenderer.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/lib/settings.js |\n| @ranquild | frontend/src/metabase/auth/actions.ts<br>frontend/src/metabase/auth/analytics.ts<br>frontend/src/metabase/lib/analytics.js |', 'created_at': datetime.datetime(2024, 8, 19, 16, 45, 29, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-19 16:45:29 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 57e1a4fba0aef652942370476a08dc1b8b76a1d6...613995a579c3d533a18c942fcd152d7ca241effb.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/lib/analytics.js<br>frontend/src/metabase/visualizations/components/CardRenderer.jsx<br>frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/ClickActions/ClickActionsPopover.tsx<br>frontend/src/metabase/visualizations/components/ClickActions/utils.ts<br>frontend/src/metabase/visualizations/components/Visualization/Visualization.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingsTableFormatting.jsx<br>frontend/src/metabase/visualizations/lib/settings.js |
| @ranquild | frontend/src/metabase/auth/actions.ts<br>frontend/src/metabase/auth/analytics.ts<br>frontend/src/metabase/lib/analytics.js |

"
2473770891,pull_request,closed,,Fix issues with column matching for multiple breakouts of the same column,"Epic https://github.com/metabase/metabase/issues/46536

Issues I found so far:
- Incorrect parsing of legacy field refs in `findColumnIndexesFromLegacyRefs` that caused `Multiple plausible matches` error. Because field refs were parsed as `{:temporal-unit ""month""}` and not `{:temporal-unit :month}`.
- Not handling for binning in `find-matching-column`.
- Issues with comparing binning values. We should only compare binning strategy-specific properties. This is the QP returning stuff like `{:strategy :bin-width :bin-width 10 :num-bins 3}` where it shouldn't. 
",ranquild,2024-08-19 16:42:57+00:00,['ranquild'],2024-10-08 16:16:35+00:00,2024-08-23 17:21:46+00:00,https://github.com/metabase/metabase/pull/46979,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2306051681, 'issue_id': 2473770891, 'author': 'ranquild', 'body': '@bshepherdson please take a look again', 'created_at': datetime.datetime(2024, 8, 23, 2, 6, 28, tzinfo=datetime.timezone.utc)}]","ranquild (Issue Creator) on (2024-08-23 02:06:28 UTC): @bshepherdson please take a look again

"
2473710530,pull_request,closed,,"[Permissions] Prevent ""Granular"" option in DB View Data options from changing permissions to unrestricted","Fixes issue caught by @noahmoss here: https://metaboat.slack.com/archives/C064EB1UE5P/p1724081356105479?thread_ts=1724080399.461629&cid=C064EB1UE5P

### Description

This PR stops some past logic that was preventing schema/tables from turning into 'Blocked' which wasn't previously supported. Now this is a valid scenario, we want to make sure and allow this.

### How to verify

- Go to permissions page for a group
- Change the DB permission to ""Blocked""
- Change the DB permission to ""Granular""
- Validate that all tables/schemas (which even you are taken to for your DB) are all set to ""Blocked""

### Demo
Flow if child contains is able to be set to the same permission as parent
![CleanShot 2024-08-19 at 11 20 14@2x](https://github.com/user-attachments/assets/11f1cd5b-e38a-4ba8-86b8-49c91e702e50)
![CleanShot 2024-08-19 at 11 20 23@2x](https://github.com/user-attachments/assets/962c78f2-4e97-42ff-a729-356139f9ea23)
![CleanShot 2024-08-19 at 11 20 29@2x](https://github.com/user-attachments/assets/385df868-62a1-4e10-b19a-6fbe3d96257c)

Flow if the child cannot be set to the same value as the parent permission
![CleanShot 2024-08-19 at 12 08 15@2x](https://github.com/user-attachments/assets/b296193e-1ebc-4b74-8b3f-e8676998c2c4)
![CleanShot 2024-08-19 at 12 08 25@2x](https://github.com/user-attachments/assets/ba910c14-bb44-44a3-b511-5d33dc802fa4)
![CleanShot 2024-08-19 at 12 10 40@2x](https://github.com/user-attachments/assets/57e541ed-06c5-49e3-8f70-6fa5b7720303)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR",sloansparger,2024-08-19 16:06:21+00:00,['sloansparger'],2024-08-19 18:21:05+00:00,2024-08-19 18:21:02+00:00,https://github.com/metabase/metabase/pull/46976,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2473688201,pull_request,closed,,"ü§ñ backported ""Allow missing `Content-type` header on GeoJSON""",#46920,github-automation-metabase,2024-08-19 15:54:05+00:00,"['johnswanson', 'github-automation-metabase']",2024-08-19 16:46:15+00:00,2024-08-19 16:46:14+00:00,https://github.com/metabase/metabase/pull/46975,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2473672386,pull_request,closed,,"ü§ñ backported ""Update Translations for v50.21""",#46609,github-automation-metabase,2024-08-19 15:45:37+00:00,"['iethree', 'github-automation-metabase']",2024-08-19 17:19:26+00:00,2024-08-19 17:19:26+00:00,https://github.com/metabase/metabase/pull/46974,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2473611964,pull_request,closed,,[serdes] move Action to using spec,"References #43068 

This is for Actions. It makes output format different, but I think having rigid static config for serialization is valuable by itself - it's quite easy to analyze and see if everything makes sense.",piranha,2024-08-19 15:15:50+00:00,['piranha'],2024-08-26 10:10:03+00:00,2024-08-21 08:33:33+00:00,https://github.com/metabase/metabase/pull/46973,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2473556176,pull_request,closed,,Add new generic analytics event and bring types to trackSchemaEvent,"# UPDATE by npretto: this pr was updated by both me and @ranquild so here's the tldr:
- the original PR added a simpler way to track events without having to make new snowplow schema (read below for the context)
- the analytics file got converted to TS as it was in plain js
- @ranquild added a lot of ts types to make also old events typed

`frontend/src/metabase-types/analytics/event.ts` shows how we would define events using the new schema


### Original Description

Right now, adding a new Snowplow event is a painful process that might take up to multiple days. Some example issues we see (more context [here](https://www.notion.so/metabase/Make-it-less-painful-to-track-events-with-Snowplow-e67bb5351c794714868b678153f72de4)):

1. It is unclear where to track new events
2. It is unclear in which schema to put new events: Our schemas are very messy. They are a mixture of entities and events / actions that we track. 
3. It takes multiple days since we have some blocking dependencies

This PR introduces a new `event` that should serve as a generic event to track actions and interactions across the app. New events should use this structure or have a very good reason not to. 
There will be more docs and help around the topic in Notion that also helps where to track what, etc..

Because the new schema is untyped by design, we need to add TypeScript-level typing to schemas. This PR makes sure that every snowplow schema used in the app is typed, and you don't need to specify the schema version when tracking events anymore.

### How to verify

Not implemented any action events yet so there is not much to verify.

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",Somtom,2024-08-19 14:51:10+00:00,['Somtom'],2024-08-30 04:38:18+00:00,2024-08-29 15:35:54+00:00,https://github.com/metabase/metabase/pull/46972,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2298008526, 'issue_id': 2473556176, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b6602d562cc58ca6a46974fe2305396ec70f3e83...f5892876925be1479e2b285242469ebff31ea4a9.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/settings/analytics.ts |\n| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/analytics.ts<br>frontend/src/metabase/setup/analytics.ts |', 'created_at': datetime.datetime(2024, 8, 20, 5, 39, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301266226, 'issue_id': 2473556176, 'author': 'Somtom', 'body': '> I don\'t think this is an improvement. We lose all the schema checks, and for any real property we need to add a separate schema for the entity.\r\n\r\n@ranquild Why would we lose schema checks? The structured action event also has a schema which is checked against.\r\n\r\nRegarding ""real"" properties I would suggest we have a sync on this but I highly recommend reading the[ design doc ](https://www.notion.so/metabase/Make-it-less-painful-to-track-events-with-Snowplow-e67bb5351c794714868b678153f72de4) we created that lists problems of the current approach we have.\r\n\r\nHere some context why we think this will improve things:\r\n\r\n1. Fewer schema chances to expect (yes there might be some context entity schemas we need to add initially but since they are reusable building blocks, that will become less + they are not needed for most of the events (like clicks))\r\n2. Fewer downstream changes needed when adding new events: The data is available right away through the data pipeline without the need to wait for the data team\r\n3. Simpler and faster: Simple tracking asks can be implemented way faster with less dependencies on other people\r\n\r\nWe don\'t take away the option to create a custom schema for a event in cases where it is really needed but we want to minimize those cases and then perform better there (e.g. not doing event schemas as we do them right now by ""categorizing"" a schema and adding multiple events with very different schema requirements into the same schema -> this makes the schema checks useless since most properties will not be required).', 'created_at': datetime.datetime(2024, 8, 21, 6, 50, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2312976314, 'issue_id': 2473556176, 'author': 'npretto', 'body': ""@Somtom I added the backport label, as I'd like to use this on [Analytics event for newsletter subscription opt-in/opt-out during the setup](https://github.com/metabase/metabase/issues/47280) which needs to get backported, do you see any issue with that?"", 'created_at': datetime.datetime(2024, 8, 27, 16, 7, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2314421827, 'issue_id': 2473556176, 'author': 'Somtom', 'body': '@npretto sounds good to me. I just need to do some last adjustments to the schema as stated [here](https://github.com/metabase/metabase/pull/46972#discussion_r1733151695). \r\nThen, when we get approval, we should be able to merge.\r\n\r\nJust double-checking: Have you been able to test the changes after you refactored to TS? Just want to avoid weird surprises :D', 'created_at': datetime.datetime(2024, 8, 28, 6, 28, 22, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-20 05:39:40 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b6602d562cc58ca6a46974fe2305396ec70f3e83...f5892876925be1479e2b285242469ebff31ea4a9.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/settings/analytics.ts |
| @ranquild | frontend/src/metabase/home/components/EmbedHomepage/analytics.ts<br>frontend/src/metabase/setup/analytics.ts |

Somtom (Issue Creator) on (2024-08-21 06:50:06 UTC): @ranquild Why would we lose schema checks? The structured action event also has a schema which is checked against.

Regarding ""real"" properties I would suggest we have a sync on this but I highly recommend reading the[ design doc ](https://www.notion.so/metabase/Make-it-less-painful-to-track-events-with-Snowplow-e67bb5351c794714868b678153f72de4) we created that lists problems of the current approach we have.

Here some context why we think this will improve things:

1. Fewer schema chances to expect (yes there might be some context entity schemas we need to add initially but since they are reusable building blocks, that will become less + they are not needed for most of the events (like clicks))
2. Fewer downstream changes needed when adding new events: The data is available right away through the data pipeline without the need to wait for the data team
3. Simpler and faster: Simple tracking asks can be implemented way faster with less dependencies on other people

We don't take away the option to create a custom schema for a event in cases where it is really needed but we want to minimize those cases and then perform better there (e.g. not doing event schemas as we do them right now by ""categorizing"" a schema and adding multiple events with very different schema requirements into the same schema -> this makes the schema checks useless since most properties will not be required).

npretto on (2024-08-27 16:07:55 UTC): @Somtom I added the backport label, as I'd like to use this on [Analytics event for newsletter subscription opt-in/opt-out during the setup](https://github.com/metabase/metabase/issues/47280) which needs to get backported, do you see any issue with that?

Somtom (Issue Creator) on (2024-08-28 06:28:22 UTC): @npretto sounds good to me. I just need to do some last adjustments to the schema as stated [here](https://github.com/metabase/metabase/pull/46972#discussion_r1733151695). 
Then, when we get approval, we should be able to merge.

Just double-checking: Have you been able to test the changes after you refactored to TS? Just want to avoid weird surprises :D

"
2473553372,pull_request,closed,,"ü§ñ backported ""Remove unnecessary calls to `/api/collection`""","  #46752

‚úÖ  conflicts resolved",github-automation-metabase,2024-08-19 14:49:52+00:00,"['iethree', 'github-automation-metabase']",2024-08-21 20:05:18+00:00,2024-08-21 20:05:17+00:00,https://github.com/metabase/metabase/pull/46971,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2299407538, 'issue_id': 2473553372, 'author': 'paoliniluis', 'body': '@iethree üëÜüèª', 'created_at': datetime.datetime(2024, 8, 20, 17, 43, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2299826335, 'issue_id': 2473553372, 'author': 'iethree', 'body': ""> @iethree üëÜüèª\r\n\r\nI'm aware. Significant portions of this have to be reworked for v50 due to a few refactors that didn't get backported üò´"", 'created_at': datetime.datetime(2024, 8, 20, 21, 52, 9, tzinfo=datetime.timezone.utc)}]","paoliniluis on (2024-08-20 17:43:48 UTC): @iethree üëÜüèª

iethree (Assginee) on (2024-08-20 21:52:09 UTC): I'm aware. Significant portions of this have to be reworked for v50 due to a few refactors that didn't get backported üò´

"
2473505021,pull_request,closed,,Sparkline,"Closes https://github.com/metabase/metabase/issues/46957

### Description

Introduces a simple sparline component to `metabase/ui`.

This sparkline does not do any grouping or aggregating of data currently.

### How to verify

Launch storybook and open the [`Sparkline story`](http://localhost:6006/?path=/story/data-display-sparkline--simple).


<img width=""143"" alt=""Screenshot 2024-08-19 at 16 17 45"" src=""https://github.com/user-attachments/assets/774c7ca8-0258-4961-adfc-98fabab405a7"">
",romeovs,2024-08-19 14:28:01+00:00,['romeovs'],2024-08-21 07:15:19+00:00,2024-08-21 07:15:18+00:00,https://github.com/metabase/metabase/pull/46969,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2296721091, 'issue_id': 2473505021, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 65ac2f18ca8a0b6620ded4a0c5db5964dd44fd20...83923fbddd1d048e973e4c54df1a48e251dd4abc.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/data-display/Sparkline/BinnedSparkline.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.unit.spec.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/index.tsx |', 'created_at': datetime.datetime(2024, 8, 19, 14, 29, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2301309048, 'issue_id': 2473505021, 'author': 'romeovs', 'body': ""I'm closing this PR for now as I was jumping the shark!"", 'created_at': datetime.datetime(2024, 8, 21, 7, 15, 18, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-19 14:29:26 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 65ac2f18ca8a0b6620ded4a0c5db5964dd44fd20...83923fbddd1d048e973e4c54df1a48e251dd4abc.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/data-display/Sparkline/BinnedSparkline.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.stories.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/Sparkline.unit.spec.tsx<br>frontend/src/metabase/ui/components/data-display/Sparkline/index.tsx |

romeovs (Issue Creator) on (2024-08-21 07:15:18 UTC): I'm closing this PR for now as I was jumping the shark!

"
2473481470,pull_request,closed,,Improve text contrast in object detail in static embed,"Closes https://github.com/metabase/metabase/issues/43532

### Description

Improve contrast in object detail card in static embed/public sharing. This should land in v51 since the foundation for theming isn't backported to v50.

### How to verify

1. Run `yarn storybook`
1. Open http://localhost:6006/?path=/story/embed-publicorembeddeddashboardview--card-visualizations-dark-theme

The contrast should look good.

### Demo

#### After
![image](https://github.com/user-attachments/assets/7b06b98e-2151-45f2-8801-eb3cded21800)

#### Before
![image](https://github.com/user-attachments/assets/1dbd38fb-6f2d-41a4-ae83-ce476898e389)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-08-19 14:17:37+00:00,['WiNloSt'],2024-08-21 08:24:46+00:00,2024-08-21 08:24:44+00:00,https://github.com/metabase/metabase/pull/46968,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2296718162, 'issue_id': 2473481470, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5e85d17b1242c02dce02cc83a9c71049be6ff63...a37a9abd2c86b2c8c6314bbc3397600375556778.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx |', 'created_at': datetime.datetime(2024, 8, 19, 14, 28, 15, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-19 14:28:15 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff c5e85d17b1242c02dce02cc83a9c71049be6ff63...a37a9abd2c86b2c8c6314bbc3397600375556778.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailsTable.tsx |

"
2473369249,pull_request,closed,,refactor: sort imported items inside destructuring group,"related to https://github.com/metabase/metabase/issues/46962

### Description

In this PR I'm applying new sorting config on `e2e` folder (which is close to what we have now, but if I enable autofix on whole codebase, I meet circular deps problem)

### How to verify

ci is green, destructuring inside imports are in order 

### Demo

<img width=""1236"" alt=""image"" src=""https://github.com/user-attachments/assets/66be12b5-a621-44ba-bfc9-692079e7a099"">
",uladzimirdev,2024-08-19 13:28:19+00:00,['uladzimirdev'],2024-08-20 11:10:23+00:00,2024-08-20 11:10:16+00:00,https://github.com/metabase/metabase/pull/46967,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2296581559, 'issue_id': 2473369249, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 19, 13, 28, 38, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-19 13:28:38 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2473292502,pull_request,closed,,[serdes] move most of the models over to using spec,"Refs #43068

It moves most of the models to using spec, others need a bit more involvement so I want them to be separate so it's not too messy. It's easier to read every commit separately, they are quite self-contained.",piranha,2024-08-19 12:53:50+00:00,['piranha'],2024-08-26 05:52:56+00:00,2024-08-21 06:49:38+00:00,https://github.com/metabase/metabase/pull/46966,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2473241503,pull_request,closed,,skip analytics opt out step for people on cloud,"# Description

Second part of  [[Epic] Reduce the number of choices in onboarding flow](https://github.com/metabase/metabase/issues/46741).
This PR hides the analytics opt-out for hosted instances

# How to verify

You'll need to copy the ""CYPRESS_NO_FEATURES_TOKEN"" from 1 password

Remove/backup your app db and run
`MB_PREMIUM_EMBEDDING_TOKEN='the token from above' yarn dev-ee`

You should now be able to do the setup and see that you won't see the analytics opt out step


Note: there will be a broken padding on the last step until  [fix padding on setup completed step when on cloud (+1 ‚àí0)](https://github.com/metabase/metabase/pull/47021) is merged

# Tests

Simulating pro/starter on e2e for the setup is not easy, as the `setTokenFeatures` calls an authenticated API that requires admin permissions.
We could do it after the user step, since after that step the user is logged in as admin, but it doesn't seem like a realistic scenario.
We also only have two tokens, the ""no feature"" ones that actually has the `hosting` feature (to simulate cloud/starter) and the ""all features"" that has all of them, there would be no way to check for pro self-hosted.
I also didn't want to mock the properties and mock the feature-tokens as it kinda kills the point of testing e2e.

For this reason I decided to go with jest test.
Even though it could have been enough to just update the old jest tests as they were testing the scenario of a pro user (`hosting` and `embedding` feature-tokens), I wanted specifically also test for the starter plan (so only `hosting` feature) and for the ""pro but self hosted"" scenario to make sure we're not breaking the onboarding.

To simulate all scenarios I decided to go with jest tests and to split the already existing `setup/tests/premium.unit.spec.tsx` in 3 different files:
- `premium-pro-cloud...` both `embedding` and `hosting` features to simulate a pro/ee customer on cloud
- `premium-pro-selfhosted...`: only the `embedding`: feature to simulate a pro/ee customer self-hosting
- `premium-starter-cloud...`: only the `hosting` feature to simulate a starter customer

plus the already existing files:
- `enterprise...`: for ee build but no token
- `common...`: to simulate the oss build

These tests should cover all realistic scenarios, if you notice something is missing please let me know.

In the tests I then check if the analytics opt out step is visible or not, and if the token activation step is visible or not.



This is the recap of the new files and what they test:
<img width=""1116"" alt=""image"" src=""https://github.com/user-attachments/assets/976bc543-4982-41e0-841c-34df39c9c4fe"">
",npretto,2024-08-19 12:29:08+00:00,['npretto'],2024-10-08 16:16:54+00:00,2024-08-21 10:57:42+00:00,https://github.com/metabase/metabase/pull/46965,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2296460607, 'issue_id': 2473241503, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a556e1cd8eb0e3ff1661096030ae81d48c912e75...e9fed996a2270293cd14e0bb5dfb42c39c145327.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/components/DataUsageStep/DataUsageStep.tsx<br>frontend/src/metabase/setup/reducers.ts<br>frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 8, 19, 12, 30, 29, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-19 12:30:29 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a556e1cd8eb0e3ff1661096030ae81d48c912e75...e9fed996a2270293cd14e0bb5dfb42c39c145327.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/actions.ts<br>frontend/src/metabase/setup/components/DataUsageStep/DataUsageStep.tsx<br>frontend/src/metabase/setup/reducers.ts<br>frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-pro-selfhosted.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium-starter-cloud.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |

"
2473183194,pull_request,closed,,"ü§ñ backported ""Remove unused @ts-expect-error directive""","  #46959
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-19 11:58:55+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-08-19 12:09:53+00:00,2024-08-19 12:09:50+00:00,https://github.com/metabase/metabase/pull/46963,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2296422274, 'issue_id': 2473183194, 'author': 'kamilmielnik', 'body': 'It should not have been backported', 'created_at': datetime.datetime(2024, 8, 19, 12, 9, 50, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Assginee) on (2024-08-19 12:09:50 UTC): It should not have been backported

"
2473159098,pull_request,closed,,print nice test summary,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-08-19 11:45:14+00:00,['uladzimirdev'],2024-09-04 08:16:46+00:00,2024-09-04 08:16:14+00:00,https://github.com/metabase/metabase/pull/46961,"[('.Team/DevEx', '')]","[{'comment_id': 2328212146, 'issue_id': 2473159098, 'author': 'uladzimirdev', 'body': 'solution has been implemented in https://github.com/metabase/metabase/pull/47134', 'created_at': datetime.datetime(2024, 9, 4, 8, 16, 45, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-09-04 08:16:45 UTC): solution has been implemented in https://github.com/metabase/metabase/pull/47134

"
2473042557,pull_request,closed,,"ü§ñ backported ""Simple util to measure allocations for single-threaded code""",#46951,github-automation-metabase,2024-08-19 10:42:33+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-19 11:33:55+00:00,2024-08-19 11:33:54+00:00,https://github.com/metabase/metabase/pull/46960,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2472980224,pull_request,closed,,Remove unused @ts-expect-error directive,"![image](https://github.com/user-attachments/assets/8cce3b3f-685f-4d3e-b612-bee4ee64815c)
",kamilmielnik,2024-08-19 10:10:10+00:00,['kamilmielnik'],2024-10-08 16:17:12+00:00,2024-08-19 11:58:08+00:00,https://github.com/metabase/metabase/pull/46959,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2296385565, 'issue_id': 2472980224, 'author': 'uladzimirdev', 'body': ""@kamilmielnik why typescript didn't catch it earlier? in the code if you have unused ts-expect-error, it will throw TS error"", 'created_at': datetime.datetime(2024, 8, 19, 11, 49, 47, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296417944, 'issue_id': 2472980224, 'author': 'kamilmielnik', 'body': ""> @kamilmielnik why typescript didn't catch it earlier? in the code if you have unused ts-expect-error, it will throw TS error\r\n\r\n@uladzimirdev I don't think we have a script to run this check. `e2e/` directory is not included in the main `tsconfig.json`.\r\nIt seems that Cypress will just run these tests despite TS errors.\r\nYou probably wouldn't see the error unless you opened that spec in your editor."", 'created_at': datetime.datetime(2024, 8, 19, 12, 7, 39, tzinfo=datetime.timezone.utc)}]","uladzimirdev on (2024-08-19 11:49:47 UTC): @kamilmielnik why typescript didn't catch it earlier? in the code if you have unused ts-expect-error, it will throw TS error

kamilmielnik (Issue Creator) on (2024-08-19 12:07:39 UTC): @uladzimirdev I don't think we have a script to run this check. `e2e/` directory is not included in the main `tsconfig.json`.
It seems that Cypress will just run these tests despite TS errors.
You probably wouldn't see the error unless you opened that spec in your editor.

"
2472972941,pull_request,closed,,FE - e2e - Cover dashboard filters with tests,"Closes #46527
Closes #47304

Part of testing plan: #46520
Epic: #46519

### Description

This PR adds e2e tests that assert which columns dashboard filters can be mapped to. It tests the following dimensions:
- entity type
- number of query stages
- presence of aggregations and/or breakouts in last query stage

This test suite will also serve as a boilerplate for the upcoming tasks (see section below).
It will grow and queries will be reused.

BE changes in this PR are a fix for #47304

#### What's remaining according to the testing plan

- #47219 - applying the filters in dashboard and title drills for Q1-Q8 for every column source
- #46528 - custom click behavior for Q1-Q8 for every column source
- #47234

### How to verify

CI is green except 1 failing test due to #47304.",kamilmielnik,2024-08-19 10:06:51+00:00,['kamilmielnik'],2024-09-02 08:57:59+00:00,2024-09-02 08:57:57+00:00,https://github.com/metabase/metabase/pull/46958,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2472867591,pull_request,closed,,"ü§ñ backported ""Refactor e2e JavaScript API commands to TypeScript function helpers""",#46934,github-automation-metabase,2024-08-19 09:15:18+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-08-19 10:31:29+00:00,2024-08-19 10:31:29+00:00,https://github.com/metabase/metabase/pull/46952,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2472854038,pull_request,closed,,Simple util to measure allocations for single-threaded code,"Measuring total allocations for code on the JVM is pretty involved, but doing it for single threaded code is pretty easy!

Note that this method is not 100% accurate, but the error seems to be small and deterministic. 

The first use case for this code is measuring the overhead for analyzing large SQL queries.",crisptrutski,2024-08-19 09:08:34+00:00,['crisptrutski'],2024-08-19 11:34:19+00:00,2024-08-19 10:41:43+00:00,https://github.com/metabase/metabase/pull/46951,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2296258333, 'issue_id': 2472854038, 'author': 'crisptrutski', 'body': ""Re: putting the version in code, its visible in the deprecation warning on the code so I don't think there's much point. The real version of interest is when they will remove the legacy method!"", 'created_at': datetime.datetime(2024, 8, 19, 10, 38, 33, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-08-19 10:38:33 UTC): Re: putting the version in code, its visible in the deprecation warning on the code so I don't think there's much point. The real version of interest is when they will remove the legacy method!

"
2472657491,pull_request,closed,,Update outdated loki snapshots,"### Description

Reported in https://metaboat.slack.com/archives/C5XHN8GLW/p1723834655159299. After my investigation, I concluded that these are actual failure since the padding on the failed tests in the report were different than other snapshots.

I ran all the tests locally and got all the same 4 failed tests as in [this check](https://github.com/metabase/metabase/actions/runs/10446943123). ~So I just updated these 4 snapshots.~ The line chart still flakes after some more runs, so I reverted it for now, I only update the embedding snapshots instead.

### How to verify

Loki CI check doesn't fail. (Welp, it still fails on the line chart, but at least all other failures are less flaky now)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR (update snapshots)
",WiNloSt,2024-08-19 07:30:41+00:00,['WiNloSt'],2024-10-08 16:17:09+00:00,2024-08-19 20:41:30+00:00,https://github.com/metabase/metabase/pull/46950,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2297078593, 'issue_id': 2472657491, 'author': 'heypoom', 'body': ""I think one of them has failed, let me update the branch so that it re-runs the Loki checks:\r\n\r\n```\r\nFAIL chrome.docker/chrome.laptop/viz/LineChart/Embedding Huge Font: Screenshot differs from reference, see .loki/difference/chrome_laptop_viz_LineChart_Embedding_Huge_Font.png\r\n```\r\n\r\nedit: I ran it multiple times and it all failed, so let's skip this for the time being, until we can fix it."", 'created_at': datetime.datetime(2024, 8, 19, 17, 29, 49, tzinfo=datetime.timezone.utc)}, {'comment_id': 2297261380, 'issue_id': 2472657491, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2899046d8c878a8916942e71829b7697a3f33915...5f435d3461e0d7886e25acd194abb620c48e3573.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx |', 'created_at': datetime.datetime(2024, 8, 19, 19, 12, 42, tzinfo=datetime.timezone.utc)}]","heypoom on (2024-08-19 17:29:49 UTC): I think one of them has failed, let me update the branch so that it re-runs the Loki checks:

```
FAIL chrome.docker/chrome.laptop/viz/LineChart/Embedding Huge Font: Screenshot differs from reference, see .loki/difference/chrome_laptop_viz_LineChart_Embedding_Huge_Font.png
```

edit: I ran it multiple times and it all failed, so let's skip this for the time being, until we can fix it.

github-actions[bot] on (2024-08-19 19:12:42 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2899046d8c878a8916942e71829b7697a3f33915...5f435d3461e0d7886e25acd194abb620c48e3573.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/LineChart/LineChart.stories.tsx |

"
2471214097,pull_request,closed,,fix echarts tooltip issues,"### Description & Demo

A follow-up on https://github.com/metabase/metabase/pull/46359
This PR fixes a few ECharts tooltip issues.

**1. Positioning**
Initially I used supported `confine: true` tooltip option to prevent it from going out of the screen but it is more aggressive than needed because it tries to keep the tooltip within its chart viewport. Unfortunately, using `confine: false` lets the tooltip go out of screen so now there is a custom positioning function set in `getTooltipBaseOption`.

https://github.com/user-attachments/assets/26557757-c0e6-49e1-b829-c8e57ffdbb75

**2. Click actions popover conflict**
Now tooltip gets and keeps being hidden when the click actions popover is visible. Brushing is also disabled.

https://github.com/user-attachments/assets/48420dff-cd9f-4254-abf1-54e5e254c99d

**3. No tooltip when brushing**
The tooltip is hidden when brushing.

https://github.com/user-attachments/assets/9dcb2bb6-f6f9-41d4-9f03-fd419b9779ac

### How to verify

Verify the cases above.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-08-17 00:12:43+00:00,['alxnddr'],2024-10-08 16:17:00+00:00,2024-08-21 02:30:24+00:00,https://github.com/metabase/metabase/pull/46946,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2471152283,pull_request,closed,,RFC: More useful dev docker compose file,"### Description

Updates the `dev/docker-compose.yml` to be more comprehensive for various local dev tasks

The main goal here is you should never have to go hunting for a docker container to test something locally, they should all be in one place.


usage: `docker-compose -f dev/docker-compose.yml --profile e2e up -d`

Available profiles:
- `e2e:` data dbs, notifications, sso and snowplow required to run e2e tests locally
- `app-dbs`: Postgres and MySQL databases for Metabase to connect to
- `data-dbs`: Sample databases for testing Metabase
- `notifications`: Maildev and webhook-tester for testing email and webhook notifications
- `sso`: SAML and LDAP for testing SSO
- `snowplow`: Snowplow micro for testing Snowplow
",iethree,2024-08-16 23:01:22+00:00,['iethree'],2024-11-12 23:51:09+00:00,2024-11-12 23:51:08+00:00,https://github.com/metabase/metabase/pull/46945,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2471877382, 'issue_id': 2471152283, 'author': 'iethree', 'body': 'this is a great idea, gotta devote some actual time to it though', 'created_at': datetime.datetime(2024, 11, 12, 23, 51, 8, tzinfo=datetime.timezone.utc)}]","iethree (Issue Creator) on (2024-11-12 23:51:08 UTC): this is a great idea, gotta devote some actual time to it though

"
2471063763,pull_request,closed,,Include missing opts arg for transform->nested,"was missing from the call.

Also had to disable hooks to commit:

```
‚úñ clj-kondo --config ./.clj-kondo/config.edn --config-dir ./.clj-kondo --parallel --lint:
metabase/enterprise/backend/test/metabase_enterprise/serialization/v2/extract_test.clj:458:20: warning: Unresolved var: ts/extract-one
metabase/enterprise/backend/test/metabase_enterprise/serialization/v2/extract_test.clj:1691:8: warning: Unresolved var: mbc/ensure-audit-db-installed!
metabase/enterprise/backend/test/metabase_enterprise/serialization/v2/extract_test.clj:1757:18: warning: Unresolved var: ts/create!
linting took 247ms, errors: 0, warnings: 3
error Command failed with exit code 1.
```
",dpsutton,2024-08-16 21:23:13+00:00,['dpsutton'],2024-10-08 16:17:14+00:00,2024-08-16 22:47:39+00:00,https://github.com/metabase/metabase/pull/46944,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2294336964, 'issue_id': 2471063763, 'author': 'dpsutton', 'body': ""Fixes a bug introduced in https://github.com/metabase/metabase/pull/46912. That PR is backporting in https://github.com/metabase/metabase/pull/46936 but is not merged yet due to conflicts. So i'm setting this to not backport for the moment."", 'created_at': datetime.datetime(2024, 8, 16, 21, 28, 33, tzinfo=datetime.timezone.utc)}]","dpsutton (Issue Creator) on (2024-08-16 21:28:33 UTC): Fixes a bug introduced in https://github.com/metabase/metabase/pull/46912. That PR is backporting in https://github.com/metabase/metabase/pull/46936 but is not merged yet due to conflicts. So i'm setting this to not backport for the moment.

"
2470915829,pull_request,closed,,Test defn/defmacro exclamation point linter should also use `:parallel/disallowed`,"In #37126 @qnkhuat added a linter to enforce that helper functions and macros in test code that call thread-unsafe functions that end in `!` are themselves required to end in `!`... that linter makes `!` ""sticky"" and helps make it clear which functions are and aren't safe to use in `^:parallel` tests.

We have a separate linter that warns you if you use thread-unsafe functions in `^:parallel` tests. In addition to disallowing functions that end in `!`, it has its own blacklist of other functions that don't follow that pattern but are unsafe, for example `with-redefs`.

This PR updates the `defn`/`defmacro` linter to also use the blacklist used by the `^:parallel` `deftest` linter which means functions in tests that use things like `with-redefs` are now required to end in `!`. As a result I had to do a lot of renaming to propagate the unsafetiness, but this is for the best since now it is much more clear whether a test can be marked `^:parallel` or not and helps enforce our conventions better

Next steps are probably to rename all the helpers that are thread-unsafe but don't end in `!` so we don't need to maintain a big list of exceptions",camsaul,2024-08-16 20:07:25+00:00,['camsaul'],2024-10-08 16:17:08+00:00,2024-08-20 05:10:08+00:00,https://github.com/metabase/metabase/pull/46943,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2470904829,pull_request,closed,,Much better collection permission performance,"## Migrations: add and populate indexed columns `perm_value`, `perm_type`, and `collection_id` to `permissions`

These fields allows us to efficiently run queries based on collection permissions in the DB without string manipulation. Keeping the table as `permissions` allows us to do this migration in-place. **Note that in some cases collections may have been deleted from the database without deleting the associated permissions row (since there was no foreign key before).** We need to be defensive here: if we have a permissions row without a corresponding collection, delete the row before running the rest of the migration.

## Write `perm_value`, `perm_type`, and `collection_id` for new collection permissions

A very simple `before-insert` method sets these fields before a collection permission is written to the DB.

## Replace `collection/permissions-set->visible-collection-ids` and `collection/visible-collection-ids->honeysql-filter-clause` with `collection/honeysql-filter-clause`

Previously, just about everywhere we used `permissions-set->visible-collection-ids`, what we were essentially doing was an in-app join: select all the collection IDs you have permission on, then convert it to a SQL clause like `WHERE collection_id IN ( all of those collection IDs)`.

Replace both of these with `honeysql-filter-clause`, which uses the new fields we added to `permissions` above to construct a honeysql filter representing ""all the collections I have permissions on"", without needing to round-trip them to the application and back to the DB.

Of course, we can then write a function `visible-collection-ids`, which uses `honeysql-filter-clause`, for those cases where we *do* actually need the whole bunch in the application (we use this, for example, when constructing the `effective-location` for a collection).

I also added one more toggle to the `VisibilityConfig` that's passed into the `honeysql-filter-clause` (and used to be passed to `permissions-set->visible-collection-ids`), allowing you to select only the effective children of some collection.

The following graph shows the old vs new code doing a search for a non-admin:

```
(search/search
                                          (search/search-context
                                           {:archived                            false
                                            :created-at                          nil
                                            :created-by                          nil
                                            :current-user-id                     api/*current-user-id*
                                            :current-user-perms                  @api/*current-user-permissions-set*
                                            :filter-items-in-personal-collection nil
                                            :last-edited-at                      nil
                                            :last-edited-by                      nil
                                            :limit                               1
                                            :model-ancestors?                    false
                                            :models                              #{""dashboard"" ""dataset"" ""card""}
                                            :offset                              nil
                                            :search-native-query                 nil
                                            :search-string                       nil
                                            :table-db-id                         nil
                                            :verified                            nil
                                            :ids                                 nil}))
```

X-axis is number of collections, Y-axis is ms to complete. Also note that the timing jump for the old code coincided with it beginning to fail with an error about too many SQL parameters.

<img width=""909"" alt=""Screenshot 2024-08-21 at 12 52 17"" src=""https://github.com/user-attachments/assets/442ded6f-bcee-42c1-b0bd-a1c65be0a2b4"">

This is the fix for https://github.com/metabase/metabase/issues/46510 (but needs to be backported, as that issue is for v49)",johnswanson,2024-08-16 19:58:08+00:00,['johnswanson'],2024-09-03 15:37:13+00:00,2024-08-26 19:06:29+00:00,https://github.com/metabase/metabase/pull/46942,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2326839590, 'issue_id': 2470904829, 'author': 'github-actions[bot]', 'body': 'üöÄ This should also be released by [v0.50.23](https://github.com/metabase/metabase/milestone/266)', 'created_at': datetime.datetime(2024, 9, 3, 15, 37, 12, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-03 15:37:12 UTC): üöÄ This should also be released by [v0.50.23](https://github.com/metabase/metabase/milestone/266)

"
2470769219,pull_request,closed,,docs - locked filter note,"Note clarifying how locked params, like linked filters, can limit values available to other editable filters.",jeff-bruemmer,2024-08-16 18:36:23+00:00,['jeff-bruemmer'],2024-08-20 12:57:45+00:00,2024-08-20 12:54:41+00:00,https://github.com/metabase/metabase/pull/46940,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2470658697,pull_request,closed,,Refine sandboxed user perms for query builder access,"This is a fix for the scenario where if a user has a sandboxed adhoc query, they can use it to read from tables they are blocked on. üò±

If you use the query builder to setup a sandboxed query that joins to a table you are `can-view = blocked` on, we no longer grant you `create-queries` access to it when doing the sandboxing permissions calculations.

How:

- Limit create-queries permissions to unblocked tables only
- Check user permissions for each table before granting query builder access
- Prevent querying of blocked joined tables from query builder for sandboxed users
",escherize,2024-08-16 17:19:15+00:00,['escherize'],2024-08-16 19:41:01+00:00,2024-08-16 19:40:59+00:00,https://github.com/metabase/metabase/pull/46939,"[('.Backend', ''), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2470580316,pull_request,closed,,docs - blocked at table level,"Contingent on https://github.com/metabase/metabase/pull/46542.

- Adds docs for table-level ""blocked"" permission setting.
- Clarifies permission setup transition from 49 to 50.",jeff-bruemmer,2024-08-16 16:26:48+00:00,['jeff-bruemmer'],2024-08-21 15:15:22+00:00,2024-08-21 15:12:32+00:00,https://github.com/metabase/metabase/pull/46937,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2470506216,pull_request,closed,,"ü§ñ backported ""[serdes] extract-nested instead of relying on hydration""","  #46912
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-16 15:37:25+00:00,"['piranha', 'github-automation-metabase']",2024-08-18 08:33:08+00:00,2024-08-18 08:33:07+00:00,https://github.com/metabase/metabase/pull/46936,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2470486404,pull_request,closed,,Support dashboard filters targeting multiple stages in QP,"Fixes #46914
",metamben,2024-08-16 15:25:10+00:00,['metamben'],2024-08-26 17:16:02+00:00,2024-08-26 17:16:00+00:00,https://github.com/metabase/metabase/pull/46935,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2470381260,pull_request,closed,,Refactor e2e JavaScript API commands to TypeScript function helpers,"### Description

Refactors the following custom Cypress commands to TypeScript function helpers:
- `cy.getCurrentUser`
- `cy.createAlert`
- `cy.createModerationReview`
- `cy.createPulse`

With small steps we'll get them all eventually :crossed_fingers: ",kamilmielnik,2024-08-16 14:24:19+00:00,['kamilmielnik'],2024-08-19 10:31:56+00:00,2024-08-19 09:14:32+00:00,https://github.com/metabase/metabase/pull/46934,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2295963449, 'issue_id': 2470381260, 'author': 'uladzimirdev', 'body': '@kamilmielnik could you please remind me why did we decide to use separate functions and not `cy.`? AFAIK we can benefit from typescript in either way', 'created_at': datetime.datetime(2024, 8, 19, 8, 22, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2296026970, 'issue_id': 2470381260, 'author': 'kamilmielnik', 'body': ""> @kamilmielnik could you please remind me why did we decide to use separate functions and not `cy.`? AFAIK we can benefit from typescript in either way\r\n\r\n@uladzimirdev \r\n\r\nAFAIR it was mostly about discoverability and simplicity:\r\n- we didn't like the pattern where a global object (`cy`) is used to share utils\r\n- single source of helpers\r\n- clear distinction between Cypress API and our helpers\r\n- it was unclear what should be a command and what should be a function helper\r\n- with Cypress commands there are extra TypeScript hoops to go through (small, but still)"", 'created_at': datetime.datetime(2024, 8, 19, 8, 51, 57, tzinfo=datetime.timezone.utc)}]","uladzimirdev on (2024-08-19 08:22:40 UTC): @kamilmielnik could you please remind me why did we decide to use separate functions and not `cy.`? AFAIK we can benefit from typescript in either way

kamilmielnik (Issue Creator) on (2024-08-19 08:51:57 UTC): @uladzimirdev 

AFAIR it was mostly about discoverability and simplicity:
- we didn't like the pattern where a global object (`cy`) is used to share utils
- single source of helpers
- clear distinction between Cypress API and our helpers
- it was unclear what should be a command and what should be a function helper
- with Cypress commands there are extra TypeScript hoops to go through (small, but still)

"
2470360298,pull_request,closed,,"ü§ñ backported ""Fix warnings/errors in memoized-supports? when SnakeHatingMap is passed as database""","  #46868
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-16 14:12:31+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-08-16 14:28:48+00:00,2024-08-16 14:28:48+00:00,https://github.com/metabase/metabase/pull/46933,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2470350183,pull_request,closed,,Update SDK version to 0.1.31,Update Readme version references and published npm package version to 0.1.31,github-automation-metabase,2024-08-16 14:07:00+00:00,"['albertoperdomo', 'github-automation-metabase']",2024-10-08 16:17:18+00:00,2024-08-16 14:14:33+00:00,https://github.com/metabase/metabase/pull/46931,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2293578854, 'issue_id': 2470350183, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 16, 14, 7, 20, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-16 14:07:20 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2470335865,pull_request,closed,,"ü§ñ backported ""docs - notes on memory usage""",#46156,github-automation-metabase,2024-08-16 13:59:07+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-16 14:14:38+00:00,2024-08-16 14:14:37+00:00,https://github.com/metabase/metabase/pull/46930,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2470313278,pull_request,closed,,[wip] Check query permissions during preprocessing,,johnswanson,2024-08-16 13:46:28+00:00,['johnswanson'],2025-02-04 15:11:01+00:00,2024-09-24 21:21:08+00:00,https://github.com/metabase/metabase/pull/46927,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2470311363,pull_request,closed,,Update later stage stale references on clause removal,"Closes https://github.com/metabase/metabase/issues/40046

This PR adds functionality that updates field ref identifiers in later stages after clause removal. If stage contains multiple clauses of a same name, next stage references to those clauses are identified by the name deduplicated (eg. sum becoming sum, sum_2, sum_3 etc.).

When the clause producing next stage sum is removed, also the next stage sum field ref is removed. Remaining sum_2 and sum_3 references are than stale. With this PR in, those name identifiers are correctly adjusted.",lbrdnk,2024-08-16 13:45:25+00:00,['lbrdnk'],2024-08-20 16:18:05+00:00,2024-08-20 16:18:02+00:00,https://github.com/metabase/metabase/pull/46926,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2470302655,pull_request,closed,,Allow setting user attributes in advanced config,"Basically, I find this useful in local development (e.g. to test sandboxing). It might be useful for others as well.
",johnswanson,2024-08-16 13:40:52+00:00,['johnswanson'],2025-02-04 15:11:03+00:00,2024-08-16 13:55:39+00:00,https://github.com/metabase/metabase/pull/46925,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2293558733, 'issue_id': 2470302655, 'author': 'johnswanson', 'body': ""Closing, this isn't necessary - you can set the attributes already without modifying the spec (since it's open). Doh!"", 'created_at': datetime.datetime(2024, 8, 16, 13, 55, 39, tzinfo=datetime.timezone.utc)}]","johnswanson (Issue Creator) on (2024-08-16 13:55:39 UTC): Closing, this isn't necessary - you can set the attributes already without modifying the spec (since it's open). Doh!

"
2470236566,pull_request,closed,,Update team.json,,NevRA,2024-08-16 13:02:55+00:00,['NevRA'],2024-10-08 16:17:19+00:00,2024-08-16 13:15:28+00:00,https://github.com/metabase/metabase/pull/46922,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2470220621,pull_request,closed,,Manual backport ‚Äî Fix public dashboards are cut when printing,Manual backport of #46829,kulyk,2024-08-16 12:53:35+00:00,['kulyk'],2024-08-16 15:24:18+00:00,2024-08-16 15:24:16+00:00,https://github.com/metabase/metabase/pull/46921,"[('.Team/DashViz', 'Dashboard and Viz team'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2470198694,pull_request,closed,,Allow missing `Content-type` header on GeoJSON,"If the content-type header is missing entirely, let it through. We're not trying to be overly restrictive here, just prohibit things that are clearly not GeoJSON.

Fixes https://github.com/metabase/metabase/issues/46918",johnswanson,2024-08-16 12:39:50+00:00,['johnswanson'],2024-08-19 15:53:07+00:00,2024-08-19 15:53:06+00:00,https://github.com/metabase/metabase/pull/46920,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2469954751,pull_request,closed,,e2e: upload files to s3,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-08-16 10:11:55+00:00,['uladzimirdev'],2025-02-03 11:29:23+00:00,2025-02-03 11:29:13+00:00,https://github.com/metabase/metabase/pull/46917,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/DevEx', '')]","[{'comment_id': 2324879396, 'issue_id': 2469954751, 'author': 'github-actions[bot]', 'body': 'Test run in progress.\n<!-- Sticky Pull Request Commentmocha-test-results -->', 'created_at': datetime.datetime(2024, 9, 2, 14, 27, 27, tzinfo=datetime.timezone.utc)}, {'comment_id': 2324880031, 'issue_id': 2469954751, 'author': 'github-actions[bot]', 'body': 'Some tests failed. See the [link](http://metabase-mocha-reports.s3-website-us-east-1.amazonaws.com/2024-09-02/10668978701/1/mocha-12) for details.\n<!-- Sticky Pull Request Commentmocha-test-results -->', 'created_at': datetime.datetime(2024, 9, 2, 14, 27, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2324935338, 'issue_id': 2469954751, 'author': 'github-actions[bot]', 'body': 'Some tests failed. See the [link]() for details.\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 2, 14, 57, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2324953191, 'issue_id': 2469954751, 'author': 'github-actions[bot]', 'body': 'Some tests failed. See the [link]() for details.\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 9, 2, 15, 6, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449870, 'issue_id': 2469954751, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 14, tzinfo=datetime.timezone.utc)}, {'comment_id': 2630683412, 'issue_id': 2469954751, 'author': 'uladzimirdev', 'body': 'not needed anymore', 'created_at': datetime.datetime(2025, 2, 3, 11, 29, 22, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-09-02 14:27:27 UTC): Test run in progress.
<!-- Sticky Pull Request Commentmocha-test-results -->

github-actions[bot] on (2024-09-02 14:27:48 UTC): Some tests failed. See the [link](http://metabase-mocha-reports.s3-website-us-east-1.amazonaws.com/2024-09-02/10668978701/1/mocha-12) for details.
<!-- Sticky Pull Request Commentmocha-test-results -->

github-actions[bot] on (2024-09-02 14:57:50 UTC): Some tests failed. See the [link]() for details.
<!-- Sticky Pull Request Comment -->

github-actions[bot] on (2024-09-02 15:06:54 UTC): Some tests failed. See the [link]() for details.
<!-- Sticky Pull Request Comment -->

github-actions[bot] on (2025-01-21 01:31:14 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

uladzimirdev (Issue Creator) on (2025-02-03 11:29:22 UTC): not needed anymore

"
2469865886,pull_request,closed,,"ü§ñ backported ""Fix public dashboards are cut when printing""","  #46829
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-16 09:19:04+00:00,"['kulyk', 'github-automation-metabase']",2024-08-16 12:54:05+00:00,2024-08-16 12:54:03+00:00,https://github.com/metabase/metabase/pull/46913,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2293458402, 'issue_id': 2469865886, 'author': 'kulyk', 'body': 'Manual backport: #46921', 'created_at': datetime.datetime(2024, 8, 16, 12, 54, 3, tzinfo=datetime.timezone.utc)}]","kulyk (Assginee) on (2024-08-16 12:54:03 UTC): Manual backport: #46921

"
2469810583,pull_request,closed,,[serdes] extract-nested instead of relying on hydration,"Serialization mostly relies on hydration to get access to nested data, and it's not very consistent: sometimes hydration is done for the convenience of developer and contains surprising data that's hard to export in a generalized way.

This PR replaces that with a new behavior, which traverses `:transform` of a serialization spec for the model and fetches required nested data recursively. Also, it automatically detects if a model supports being filtered by collection.

References #43068

It makes sense to read commits separately since first one is mostly ""pre-factoring"".",piranha,2024-08-16 08:46:17+00:00,['piranha'],2024-08-18 08:33:36+00:00,2024-08-16 15:36:33+00:00,https://github.com/metabase/metabase/pull/46912,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2469778622,pull_request,closed,,Fix master failed to build,"CI is failing to build uberjar ([job](https://github.com/metabase/metabase/actions/runs/10416011193/job/28847704938#step:5:1396))

We shouldn't use `trs` at top level",qnkhuat,2024-08-16 08:26:44+00:00,['qnkhuat'],2024-10-08 16:17:23+00:00,2024-08-16 10:11:48+00:00,https://github.com/metabase/metabase/pull/46911,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2293077491, 'issue_id': 2469778622, 'author': 'qnkhuat', 'body': ""I'll cherry pick this to the backport PR https://github.com/metabase/metabase/pull/46909#pullrequestreview-2242080069"", 'created_at': datetime.datetime(2024, 8, 16, 8, 32, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2293164338, 'issue_id': 2469778622, 'author': 'piranha', 'body': 'Would be nice to have a linter for that or something :)', 'created_at': datetime.datetime(2024, 8, 16, 9, 28, 35, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-08-16 08:32:25 UTC): I'll cherry pick this to the backport PR https://github.com/metabase/metabase/pull/46909#pullrequestreview-2242080069

piranha on (2024-08-16 09:28:35 UTC): Would be nice to have a linter for that or something :)

"
2469744907,pull_request,closed,,"ü§ñ backported ""Put a band-aid around flake with spec generator""",#46762,github-automation-metabase,2024-08-16 08:08:55+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-16 09:01:52+00:00,2024-08-16 09:01:52+00:00,https://github.com/metabase/metabase/pull/46910,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2469635784,pull_request,closed,,"ü§ñ backported ""Fix unable to send pulse with multi-series""","  #46908
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-16 07:00:02+00:00,"['qnkhuat', 'github-automation-metabase']",2024-08-19 08:39:13+00:00,2024-08-19 08:39:13+00:00,https://github.com/metabase/metabase/pull/46909,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2469356487,pull_request,closed,,Fix unable to send pulse with multi-series,"lazy seq + dynamic binding is biting us again.

Introduced in https://github.com/metabase/metabase/pull/43428

Closes https://github.com/metabase/metabase/issues/46892",qnkhuat,2024-08-16 03:20:41+00:00,['qnkhuat'],2024-08-16 06:59:12+00:00,2024-08-16 06:59:10+00:00,https://github.com/metabase/metabase/pull/46908,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2469143983,pull_request,closed,,Misc Kondo Config cleanup,"- Move the config constants for some of our custom linters from the source code for the linters into the Kondo config file so they're easier to find and edit
- Drop the really-long-test threshold from 200 LoC to 180 and fix a few tests that are insanely long. Please stop writing these insanely long tests with like a hundred assertions people they are impossible to debug when they fail
- Add consistent alias rule for `[java-time.api :as t]` and fix one namespace not following i
- Remove config related to Honey SQL 1 which we don't use anymore",camsaul,2024-08-15 23:28:32+00:00,['camsaul'],2024-10-08 16:17:13+00:00,2024-08-16 23:48:13+00:00,https://github.com/metabase/metabase/pull/46907,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2469092650,pull_request,closed,,"ü§ñ backported ""perf: Optimize CSV exporting""",#45757,github-automation-metabase,2024-08-15 22:25:13+00:00,"['alexander-yakushev', 'github-automation-metabase']",2024-08-20 18:17:11+00:00,2024-08-20 18:17:09+00:00,https://github.com/metabase/metabase/pull/46904,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2299411921, 'issue_id': 2469092650, 'author': 'paoliniluis', 'body': '@perivamsi this is ready to rock', 'created_at': datetime.datetime(2024, 8, 20, 17, 46, 29, tzinfo=datetime.timezone.utc)}]","paoliniluis on (2024-08-20 17:46:29 UTC): @perivamsi this is ready to rock

"
2469060926,pull_request,closed,,"MS4: E2E sandboxing test coverage for ""Link to the data source from notebook"" project","Resolves #46201
Resolves #46203

### Description
This PR concludes the Milestone 4 of #46201, and it also concludes the whole project (including the testing plan for it). It adds two simple sandboxing test scenarios (one for the data step, and one for the join step).

### How to verify
Tests should pass in CI

### Demo
Data step
<img width=""1993"" alt=""image"" src=""https://github.com/user-attachments/assets/bf98946d-30ac-4a50-80af-19a4d15d12fe"">

Join step
<img width=""1993"" alt=""image"" src=""https://github.com/user-attachments/assets/42a0ddd8-3c8d-4d39-b64a-b72318db661a"">


### Checklist
- [x] Tests have been added/updated to cover changes in this PR

### Stress-test
20/20 ‚úÖ https://github.com/metabase/metabase/actions/runs/10417076964",nemanjaglumac,2024-08-15 22:08:49+00:00,['nemanjaglumac'],2024-08-16 11:55:48+00:00,2024-08-16 11:55:47+00:00,https://github.com/metabase/metabase/pull/46903,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2468833873,pull_request,closed,,Fix `padding` prop on Mantine Modals,"### Description
Doesn't close a particular issue, but moves the default padding from the composed modal components to `<Modal>` itself. This allows padding to be set on modals and have it take effect. I also took the opportunity to convert a couple modals that were only composed to change the padding values. I verified all the places where the Mantine Modal is used, things still look sane (though there may be a few pixels of difference)

### How to verify
I used `Modal.*\} from ""metabase/ui` in my file search to find all the places that modals are used, but in general just poking around and ensuring things still look good should suffice

",npfitz,2024-08-15 20:00:18+00:00,['npfitz'],2024-10-08 16:16:35+00:00,2024-08-23 14:57:52+00:00,https://github.com/metabase/metabase/pull/46900,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2292106829, 'issue_id': 2468833873, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0d50f7b1e63eef91e39acacb47662178f02b0f85...cd515d960c88b14595e3945e283b94f58ecc8fe2.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 15, 20, 1, 39, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-15 20:01:39 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0d50f7b1e63eef91e39acacb47662178f02b0f85...cd515d960c88b14595e3945e283b94f58ecc8fe2.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/overlays/Modal/Modal.styled.tsx |

"
2468763490,pull_request,closed,,"ü§ñ backported ""skip some troubleshooting stats when hosted""",#46749,github-automation-metabase,2024-08-15 19:17:14+00:00,"['escherize', 'github-automation-metabase']",2024-08-15 20:08:56+00:00,2024-08-15 20:08:55+00:00,https://github.com/metabase/metabase/pull/46899,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2468572108,pull_request,closed,,"ü§ñ backported ""Remove double prefix""","  #46884
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-15 17:29:43+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-16 12:35:32+00:00,2024-08-16 12:35:28+00:00,https://github.com/metabase/metabase/pull/46898,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2293432136, 'issue_id': 2468572108, 'author': 'crisptrutski', 'body': ""We didn't actually have the bad link in v50"", 'created_at': datetime.datetime(2024, 8, 16, 12, 35, 28, tzinfo=datetime.timezone.utc)}]","crisptrutski (Assginee) on (2024-08-16 12:35:28 UTC): We didn't actually have the bad link in v50

"
2468382360,pull_request,closed,,"ü§ñ backported ""docs: concat clarification""",#46851,github-automation-metabase,2024-08-15 16:07:02+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-21 12:15:13+00:00,2024-08-21 12:15:12+00:00,https://github.com/metabase/metabase/pull/46895,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2468302558,pull_request,closed,,feat(sdk): Edit Question,"Refactors the `NewQuestion` component into `CreateQuestion` and `ModifyQuestion`

_**What's changed:**_

- `NewQuestion` has been refactored into `QuestionEditor`, which takes in a `questionId` and `plugins` for the interactive question
- `QuestionEditor`, instead of using the `InteractiveQuestionProvider` just uses `InteractiveQuestion` and its subcomponents. This will allow us to use existing components and keep some level of consolidation under the `InteractiveQuestion` banner, and will probably let us merge `InteractiveQuestion` components in the future.
- `CreateQuestion` and `ModifyQuestion` are essentially aliases for `QuestionEditor` except that `ModifyQuestion` needs a `questionId`
- I've moved the `SaveButton` and `SaveQuestionForm` to the `InteractiveQuestion/components`, since they're components that use the `InteractiveQuestionProvider` to display data. We can probably expose those components to users in the future once everything is a little more cleaned up",oisincoveney,2024-08-15 15:28:17+00:00,['oisincoveney'],2024-10-08 16:16:49+00:00,2024-08-21 15:15:53+00:00,https://github.com/metabase/metabase/pull/46894,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2468066024,pull_request,closed,,hide terminal-report logs from console,"closes https://github.com/metabase/metabase/issues/46954

### Description

This PR hides cypress-terminal-reports logs from github actions, as users said it's hard to find a failing test name because of the noise from terminal-report.

From now, cypress-terminal-report logs will be inside mocha report only

### How to verify

Currently we have a single explicitly failing test, check logs of dashboard-ee job and verify that there is no log from cypress-terminal-report

download mocha report from the artifacts section of the job, unzip and verify that mocha report contains logs from cypress-terminal-report (above the screenshot)

<img width=""1563"" alt=""image"" src=""https://github.com/user-attachments/assets/35cb7f0e-e205-4b73-ab17-70ec22d223f8"">


### Demo

check the [failing job](https://github.com/metabase/metabase/actions/runs/10410178544/job/28831691309?pr=46891), it's much cleaner than before, you can easily navigate to the error if needed

mocha report has logs from cypress-terminal-report 
<img width=""1614"" alt=""image"" src=""https://github.com/user-attachments/assets/82ac7d6f-dd33-4cea-9ec5-b4feffff450c"">

",uladzimirdev,2024-08-15 13:33:55+00:00,['uladzimirdev'],2024-08-20 12:50:24+00:00,2024-08-20 12:50:22+00:00,https://github.com/metabase/metabase/pull/46891,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2468043831,pull_request,closed,,fix CSP error in prod,"Closes https://github.com/metabase/metabase/issues/46889

### Description

We have CSP errors in prod as well

### How to verify

use PR-env (temporal deployment) and to to new -> question
there shouldn't be a CSP error in console

### Demo

### Before

https://github.com/user-attachments/assets/016dc641-c6c9-4a06-8a4f-8c006aedeaf3

### After




https://github.com/user-attachments/assets/a05a7e8a-397f-4847-b896-f2a9e13fa397


",uladzimirdev,2024-08-15 13:19:57+00:00,['uladzimirdev'],2024-08-16 08:42:31+00:00,2024-08-16 08:42:29+00:00,https://github.com/metabase/metabase/pull/46890,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2291270711, 'issue_id': 2468043831, 'author': 'github-actions[bot]', 'body': 'üëã Deploying a preview environment for commit 739dfef2c909f8cace09d2ff6bea615b8b2614d4.\n‚úÖ Preview:\n    https://pr46890.coredev.metabase.com\nüóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 8, 15, 13, 29, 12, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-15 13:29:12 UTC): üëã Deploying a preview environment for commit 739dfef2c909f8cace09d2ff6bea615b8b2614d4.
‚úÖ Preview:
    https://pr46890.coredev.metabase.com
üóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2467904147,pull_request,closed,,Simplify finding metrics in Summarize,"Closes https://github.com/metabase/metabase/issues/46847
Closes https://github.com/metabase/metabase/issues/46843

### Description

- Use global search (searchbar on top) for the aggregation picker
- Allow operators and metrics to be search (and fix https://github.com/metabase/metabase/issues/46843)
- Add info icon for metrics in the aggregation picker
- Sort the available metrics

### How to verify

Describe the steps to verify that the changes are working as expected.

1. Create a metric (ie. New -> Metric -> Orders -> Aggregate -> Count -> Save -> name: `Metric Foo`, description: `This is a description`)
2. New -> Question -> Orders
3. Create a new aggregation
4. Verify that the search bar is visible and on top
5. In the search bar, type `Count`. Verify that the filtering works correctly and only shows relevant matches
6. In the search bar, type (part of) type `Foo`. Verify that your metric is visible.
7. Hover the metric, an info icon should appear.
8. Hover the info icon, your description should show in a card.
9. Create another metric and call it `AAA`
10. New -> Question -> Orders
11. Create a new aggregation 
12. Verify that the metrics are sorted

### Demo


https://github.com/user-attachments/assets/f558b293-6ba2-4d3b-90d6-559fca496c0e


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",romeovs,2024-08-15 11:48:36+00:00,['romeovs'],2024-09-02 09:40:05+00:00,2024-08-22 14:35:04+00:00,https://github.com/metabase/metabase/pull/46887,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2291642531, 'issue_id': 2467904147, 'author': 'romeovs', 'body': ""@ranquild \r\n\r\n> I have a metric with a description but it isn't shown in the popover\r\n\r\nStrange I cannot reproduce that, all my metrics with descriptions show the icon... Can you tell me what the value of `item.description` is on [this line](https://github.com/metabase/metabase/pull/46887/files#diff-f398a211ca1bf3802d002be844d765031e6bfef79264d34fc4f91763121f36c8R388) for those metrics?"", 'created_at': datetime.datetime(2024, 8, 15, 16, 21, 11, tzinfo=datetime.timezone.utc)}, {'comment_id': 2297063995, 'issue_id': 2467904147, 'author': 'ranquild', 'body': '@metabase/core-backend-querying please review the mbql lib changes', 'created_at': datetime.datetime(2024, 8, 19, 17, 21, 34, tzinfo=datetime.timezone.utc)}]","romeovs (Issue Creator) on (2024-08-15 16:21:11 UTC): @ranquild 


Strange I cannot reproduce that, all my metrics with descriptions show the icon... Can you tell me what the value of `item.description` is on [this line](https://github.com/metabase/metabase/pull/46887/files#diff-f398a211ca1bf3802d002be844d765031e6bfef79264d34fc4f91763121f36c8R388) for those metrics?

ranquild on (2024-08-19 17:21:34 UTC): @metabase/core-backend-querying please review the mbql lib changes

"
2467851660,pull_request,closed,,Remove double prefix,"Closes https://github.com/metabase/metabase/issues/46865

### Description

Remove duplicate prefix from documentation link.",crisptrutski,2024-08-15 11:04:43+00:00,['crisptrutski'],2024-08-15 17:28:55+00:00,2024-08-15 17:28:53+00:00,https://github.com/metabase/metabase/pull/46884,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2467771693,pull_request,closed,,Add missing field to serialization exception,"Not sure how this line went missing, and how tests passed on the original branch.",crisptrutski,2024-08-15 10:01:05+00:00,['crisptrutski'],2024-10-08 16:17:27+00:00,2024-08-15 10:37:22+00:00,https://github.com/metabase/metabase/pull/46883,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2291014669, 'issue_id': 2467771693, 'author': 'nemanjaglumac', 'body': 'I added the `no-backport` label to appease the ""Backport Reminder"" check, but please add this change to the currently stuck original backport.\r\nhttps://github.com/metabase/metabase/pull/46878\r\n\r\ncc @crisptrutski', 'created_at': datetime.datetime(2024, 8, 15, 10, 8, 51, tzinfo=datetime.timezone.utc)}]","nemanjaglumac on (2024-08-15 10:08:51 UTC): I added the `no-backport` label to appease the ""Backport Reminder"" check, but please add this change to the currently stuck original backport.
https://github.com/metabase/metabase/pull/46878

cc @crisptrutski

"
2467767273,pull_request,closed,,Improve saveDashboard helper [WIP],"Still WIP.
Enabling the PR only to run the CI tests.",nemanjaglumac,2024-08-15 09:57:48+00:00,['nemanjaglumac'],2024-08-19 10:43:54+00:00,2024-08-19 10:43:51+00:00,https://github.com/metabase/metabase/pull/46882,"[('.Team/Querying', '')]","[{'comment_id': 2296268156, 'issue_id': 2467767273, 'author': 'nemanjaglumac', 'body': 'We should fix re-rendering at the source.', 'created_at': datetime.datetime(2024, 8, 19, 10, 43, 51, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Issue Creator) on (2024-08-19 10:43:51 UTC): We should fix re-rendering at the source.

"
2467712595,pull_request,open,,More date formats,"### Description

- Adds 2-digit date formats (`YYYY-MM-DD` as opposed to `YYYY-M-D`), because some of us prefer a 'fixed width' label regardless of the exact date.
- Removes comma after `MMMM` in `D MMMM, YYYY` format ( reference https://en.wikipedia.org/wiki/Wikipedia:Manual_of_Style/Dates_and_numbers#Dates,_months,_and_years )
-  Add `dddd, D MMMM YYYY` date format

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",igitur,2024-08-15 09:17:40+00:00,[],2025-01-22 01:31:08+00:00,,https://github.com/metabase/metabase/pull/46879,[],"[{'comment_id': 2603449896, 'issue_id': 2467712595, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603622461, 'issue_id': 2467712595, 'author': 'igitur', 'body': 'Bump', 'created_at': datetime.datetime(2025, 1, 21, 4, 16, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:15 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

igitur (Issue Creator) on (2025-01-21 04:16:11 UTC): Bump

"
2467698389,pull_request,closed,,"ü§ñ backported ""Clean up serdes v2 exceptions""",#46577,github-automation-metabase,2024-08-15 09:07:56+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-15 11:40:15+00:00,2024-08-15 11:40:15+00:00,https://github.com/metabase/metabase/pull/46878,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2467697682,pull_request,closed,,"ü§ñ backported ""reduce logs during setup tests""",#46834,github-automation-metabase,2024-08-15 09:07:28+00:00,"['npretto', 'github-automation-metabase']",2024-08-16 07:44:29+00:00,2024-08-16 07:44:29+00:00,https://github.com/metabase/metabase/pull/46877,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2290939367, 'issue_id': 2467697682, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 64d1a8adbb3d0d2eda997401a01d23d500b674db...b6d9455cd83025020fceb4e5a556598510a6612e.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 8, 15, 9, 8, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-15 09:08:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 64d1a8adbb3d0d2eda997401a01d23d500b674db...b6d9455cd83025020fceb4e5a556598510a6612e.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |

"
2467670135,pull_request,closed,,fix(sdk): Fix CLI not showing Postgres password field,"### Description

When running the CLI, and adding Postgres, there wouldn't be a prompt for the password field, and the CLI will fail to connect to the DB.

### How to verify

1. run
    ```
    yarn build-embedding-sdk-cli:watch
    ```
1. In another terminal, possibly a different directory with a React application (I haven't tested if testing in Metabase folder works), run
    ```
    node ../metabase/resources/embedding-sdk/dist/cli.js start
    ```
    This assumes your project is at the same level as the Metabase folder.
1. Follows the steps and add Postgres DB. You should now see the password field

### Demo
#### After
<img width=""1179"" alt=""image"" src=""https://github.com/user-attachments/assets/a29e6eab-fc69-44ff-88c5-5eb6f1e15ea7"">

#### Before
<img width=""1178"" alt=""image"" src=""https://github.com/user-attachments/assets/823edfaf-aac6-449d-94a8-2a8b8f402283"">



### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~
",WiNloSt,2024-08-15 08:50:03+00:00,['WiNloSt'],2024-10-08 16:17:28+00:00,2024-08-15 09:23:28+00:00,https://github.com/metabase/metabase/pull/46876,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2467572799,pull_request,closed,,"ü§ñ backported ""Speed up updating user parameter value""","  #46615
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-15 07:36:06+00:00,"['qnkhuat', 'github-automation-metabase']",2024-08-16 08:43:35+00:00,2024-08-16 08:43:34+00:00,https://github.com/metabase/metabase/pull/46875,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2467085349,pull_request,closed,,Kondo config cleanup,,camsaul,2024-08-15 01:09:00+00:00,['camsaul'],2024-08-15 23:24:05+00:00,2024-08-15 23:24:03+00:00,https://github.com/metabase/metabase/pull/46873,[],[],
2466887192,pull_request,closed,,perf: Reuse ZoneRegion/UTC instead of creating new object when parsing dates,"Date parsing happens quite a bit inside `metabase.analyze.fingerprint.insights/timeseries-insight`. This small optimization if a low-hanging fruit; I'll see how it behaves after the change, maybe this should be enough. Otherwise, we may try to cache the parsed dates.
",alexander-yakushev,2024-08-14 21:40:28+00:00,['alexander-yakushev'],2024-10-08 16:17:28+00:00,2024-08-15 09:15:34+00:00,https://github.com/metabase/metabase/pull/46871,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2466870030,pull_request,closed,,Fix warnings/errors in memoized-supports? when SnakeHatingMap is passed as database,"This is an aftermath of #46673. Looking up `:updated_at` in a SnakeHatingMap produces errors if memorization of `supports?` is enabled locally, and probably causes a lot of warnings in production mode.",alexander-yakushev,2024-08-14 21:26:52+00:00,['alexander-yakushev'],2024-10-08 16:17:18+00:00,2024-08-16 13:50:08+00:00,https://github.com/metabase/metabase/pull/46868,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2466868681,pull_request,closed,,ci: enable cypress-terminal-report only at CI,"Closes https://github.com/metabase/metabase/issues/46870

### Description

We need to use cypress-terminal-report only at CI, locally we have cypress timeline.

Also I added a filter, so now xhr body will not be printed in console

### How to verify

- run cypress locally
- focus on a specific test and change it so it fails
- make sure when test failed, there is no report in terminal",uladzimirdev,2024-08-14 21:25:43+00:00,['uladzimirdev'],2024-08-15 17:26:06+00:00,2024-08-15 17:26:04+00:00,https://github.com/metabase/metabase/pull/46866,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2466750989,pull_request,closed,,Don't allow viewing a timeline without coll perms,"If we don't have access to the collection, we shouldn't have access to
the timelines within it.",johnswanson,2024-08-14 20:14:57+00:00,['johnswanson'],2024-08-22 14:33:51+00:00,2024-08-22 13:38:05+00:00,https://github.com/metabase/metabase/pull/46863,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2466738563,pull_request,closed,,fix(browse): Remove some dead code,This PR removes a utility function that is no longer used,rafpaf,2024-08-14 20:07:26+00:00,['rafpaf'],2024-10-08 16:16:36+00:00,2024-08-23 14:25:12+00:00,https://github.com/metabase/metabase/pull/46861,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2289777355, 'issue_id': 2466738563, 'author': 'rafpaf', 'body': '* **#46861** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46861?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 14, 20, 7, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2307206259, 'issue_id': 2466738563, 'author': 'rafpaf', 'body': '### Merge activity\n\n* **Aug 23, 10:25 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/46861).', 'created_at': datetime.datetime(2024, 8, 23, 14, 25, 13, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-14 20:07:42 UTC): * **#46861** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46861?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-08-23 14:25:13 UTC): ### Merge activity

* **Aug 23, 10:25 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/46861).

"
2466698116,pull_request,closed,,"ü§ñ backported ""46657 pulse edit migration""","  #46693
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-14 19:41:58+00:00,"['npfitz', 'github-automation-metabase']",2024-08-15 11:48:04+00:00,2024-08-15 11:48:02+00:00,https://github.com/metabase/metabase/pull/46859,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2289749157, 'issue_id': 2466698116, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3fb0cf22669b03e12c2ee2f5b264e8c490695597...35aee9899e27c7188501c88bbf58437b47946c20.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/SlackChannelField/SlackChannelField.tsx |', 'created_at': datetime.datetime(2024, 8, 14, 19, 51, 8, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 19:51:08 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3fb0cf22669b03e12c2ee2f5b264e8c490695597...35aee9899e27c7188501c88bbf58437b47946c20.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/SlackChannelField/SlackChannelField.tsx |

"
2466691786,pull_request,closed,,"ü§ñ backported ""fix(browse): Use a simpler approach for representing paths responsively""","  #46530
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-14 19:37:42+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-21 11:37:28+00:00,2024-08-21 11:37:26+00:00,https://github.com/metabase/metabase/pull/46858,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2466656057,pull_request,closed,,feat(sdk): setup permissions and sandboxing for embedding cli,"Closes https://github.com/metabase/metabase/issues/46788

### Description

Asks the user for their multi-tenancy columns, configures the permissions graph with sandboxing enabled, and creates customer collections.

### How to verify

- Run `yarn build-embedding-sdk-cli:watch` in one terminal to build the CLI
- Create an empty React project with Vite
- Run `docker rm -f metabase-enterprise-embedding && yarn add file:../metabase/resources/embedding-sdk && npx @metabase/embedding-sdk-react start`
  - This kills existing Docker container, links the built SDK to your React project, then starts the CLI.
  - This only works if your metabase repo is adjacent to the React project. If not, adjust the `file:..` part
- Verify that group permissions are defined correctly in the Admin Panel
- Follow the flow. Import the `<AnalyticsPage />` React component per the instructions and play with it.

### Work in progress

- [x] Loading the dashboard currently returns `Query requires user attribute customer_id` - I'm working on sampling the tenancy column values, and assigning it to user attributes.
  - This will be assigned via the generated Express server.
- The 3 customer collections doesn't have curated permissions yet - working on this

### Demo

NOTE: this PR does not generate server and component files, those are part of https://github.com/metabase/metabase/pull/47060 which is based on this branch.

[Private Loom](https://www.loom.com/share/64bd4f3173654e298c5c59ee57c82a95?sid=ef6ab729-4353-456e-bb4d-bb326ecb9b1e)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",heypoom,2024-08-14 19:22:27+00:00,['heypoom'],2024-08-28 16:14:00+00:00,2024-08-28 16:13:58+00:00,https://github.com/metabase/metabase/pull/46857,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2466555638,pull_request,closed,,(loading/error wrapper): Let RTK query results be passed directly,"*Draft for discussion*

This branch adds a `result` prop to the `LoadingAndErrorWrapper` component. This allows an RTK query result to be passed directly to the component without needing to destructure it into `isLoading` and `error`. For example, you can do this:

```typescript
const { data, ...result } = useQuery();
return (
   <LoadingAndErrorWrapper result={result}>
       <HappyPath data={data} />
   </Loading>
 );
```

You can also pass an array of results. If you do so, the `LoadingAndErrorWrapper` component will display a loading indicator if any one of the results is loading. If one or more results has an error, the first error message will be displayed.

- [x] Tests have been added/updated to cover changes in this PR",rafpaf,2024-08-14 18:31:21+00:00,['rafpaf'],2025-02-04 01:31:25+00:00,2025-02-04 01:31:25+00:00,https://github.com/metabase/metabase/pull/46855,"[('Stale', 'Stale PRs that will be auto-closed'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2289562135, 'issue_id': 2466555638, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 14, 18, 31, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449908, 'issue_id': 2466555638, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 17, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557631, 'issue_id': 2466555638, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 25, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-14 18:31:44 UTC): * **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2025-01-21 01:31:17 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:25 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2466535936,pull_request,closed,,[Permissions] Bug fix - upgrading Create Queries permissions for a table removes 'Blocked' View Data permissions of sibling tables,"### Description

Fixes this bug flagged by @luizarakaki. See the Loom:
https://www.loom.com/share/e2ad5a6477f54ede9a63dceca35c1b0c?sid=68832e88-8526-4ad7-85a1-6ddeb456ad52
 
### Demo

https://github.com/user-attachments/assets/04627233-ceca-4d7e-908f-6f2cf6431baf

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",sloansparger,2024-08-14 18:21:39+00:00,['sloansparger'],2024-08-14 22:58:29+00:00,2024-08-14 22:58:27+00:00,https://github.com/metabase/metabase/pull/46854,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2466511578,pull_request,closed,,Sandboxing doesn't implicitly grant create-queries: add no access table level permission,"We found that with sandboxing enabled, users are implicitly granted create-queries permissions for the sandboxed tables, even if they have create-queries set to `no`. [metabase-enterprise.sandbox.query-processor.middleware.row-level-restrictions/sandbox->required-perms](https://github.com/metabase/metabase/blob/master/enterprise/backend/src/metabase_enterprise/sandbox/query_processor/middleware/row_level_restrictions.clj#L246) is in charge of granting perms ontop of sandboxed queries. The change made here is to not add :perms/create-queries perms as well. 

But it turns out that reintroduces bug https://github.com/metabase/metabase/issues/15105, so I think we should leave it the way it is, and fix that as a follow up bit of work.

This is https://github.com/metabase/metabase/pull/15105, and the test for it [is on master here](https://github.com/metabase/metabase/blob/master/enterprise/backend/test/metabase_enterprise/sandbox/query_processor/middleware/row_level_restrictions_test.clj#L821)


[Sandboxing doesn't implicitly grant create-queries](https://github.com/metabase/metabase/commit/878a6bc38fda9b4fb2207848c992218b7e5f8e63)",escherize,2024-08-14 18:12:58+00:00,['escherize'],2025-02-04 18:14:56+00:00,2024-08-16 15:17:34+00:00,https://github.com/metabase/metabase/pull/46853,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2293700140, 'issue_id': 2466511578, 'author': 'escherize', 'body': 'Closing as this fix is imperfect and outside scope for table-level block.\r\n\r\nThe TLDR is this function is in charge of granting perms ontop of sandboxed queries. The change made here is to not have it add :perms/create-queries perms. But that reintroduces bug #15105, so I think we should leave it the way it is, and fix that as a follow up bit of work.\r\n\r\nThis is [15105](https://github.com/metabase/metabase/pull/15105), and the test for it [is on master here](https://github.com/metabase/metabase/blob/master/enterprise/backend/test/metabase_enterprise/sandbox/query_processor/middleware/row_level_restrictions_test.clj#L821)', 'created_at': datetime.datetime(2024, 8, 16, 15, 17, 34, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-08-16 15:17:34 UTC): Closing as this fix is imperfect and outside scope for table-level block.

The TLDR is this function is in charge of granting perms ontop of sandboxed queries. The change made here is to not have it add :perms/create-queries perms. But that reintroduces bug #15105, so I think we should leave it the way it is, and fix that as a follow up bit of work.

This is [15105](https://github.com/metabase/metabase/pull/15105), and the test for it [is on master here](https://github.com/metabase/metabase/blob/master/enterprise/backend/test/metabase_enterprise/sandbox/query_processor/middleware/row_level_restrictions_test.clj#L821)

"
2466406590,pull_request,closed,,Remove Mongo exclusions from fks tests,"Closes https://github.com/metabase/metabase/issues/46836

WIP",lbrdnk,2024-08-14 17:20:48+00:00,['lbrdnk'],2025-02-04 01:31:27+00:00,2025-02-04 01:31:26+00:00,https://github.com/metabase/metabase/pull/46852,"[('Database/Mongo', None), ('Stale', 'Stale PRs that will be auto-closed'), ('.Team/Querying', '')]","[{'comment_id': 2603449924, 'issue_id': 2466406590, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 18, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557666, 'issue_id': 2466406590, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 26, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:18 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:26 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2466386814,pull_request,closed,,docs: concat clarification,[Slack thread](https://metaboat.slack.com/archives/C01R1JY03J4/p1723654113587129),alexyarosh,2024-08-14 17:13:25+00:00,['alexyarosh'],2024-08-21 12:15:40+00:00,2024-08-15 16:06:12+00:00,https://github.com/metabase/metabase/pull/46851,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2466190913,pull_request,closed,,"ü§ñ backported ""make local cypress dx great again""",#46839,github-automation-metabase,2024-08-14 15:33:33+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-14 18:36:29+00:00,2024-08-14 18:36:28+00:00,https://github.com/metabase/metabase/pull/46846,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2466180109,pull_request,closed,,Allow editing the breakout bin from the compare aggregation picker and provide presets,"Closes https://github.com/metabase/metabase/issues/46531

### Description

This PR:
- allows users to edit the breakout temporal binning directly from the aggregation picker,
- adds presets for offsets
- fixes some small ui inconsistencies

### How to verify
1. New -> Question -> Orders
2. Add aggregation -> Count of rows
3. Add aggregation -> Compare to the past
4. Play around with the popover to configure your aggregations
  a. Add an offset comparison by from a preset:
    1. Click ""Previous year""
    2. Click ""Done""
    3. Verify that a breakout for ""Created At: Year"" was added
  b. Add an offset comparison by from a preset:
    1. Click ""Previous year""
    2. Customize the offset and unit (eg. ""2 Years ago"")
    3. Click ""Done""
    4. Verify that a breakout for ""Created At: Year"" was added
  c. Add a comparison with a moving average
    1. Click ""Moving average""
    2. Customize the offset and unit (eg. ""2 Year moving average"")
    3. Click ""Done""
    4. Verify that a breakout for ""Created At: Year"" was added
  d. (the same as c. but with ""include this year"" selected)
6. Verify that the expression for the newly added aggregations make sense, as well as their names


### Demo

<img width=""503"" alt=""Screenshot 2024-08-15 at 18 07 32"" src=""https://github.com/user-attachments/assets/d13b0477-12a5-4259-9cbf-6929d7cef34d"">
<img width=""499"" alt=""Screenshot 2024-08-15 at 18 07 38"" src=""https://github.com/user-attachments/assets/acb8fa48-ad1d-468f-9f83-022d23d420f2"">

https://github.com/user-attachments/assets/c75f44d2-ba7b-4497-aafd-c4b4067e12a6

",romeovs,2024-08-14 15:28:04+00:00,['romeovs'],2024-08-21 09:11:44+00:00,2024-08-21 09:11:42+00:00,https://github.com/metabase/metabase/pull/46844,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2466170418,pull_request,closed,,"fix: Use 'loading-indicator', not 'loading-spinner', as the testid for loading indicators","On `master` we changed (in #44265) the testid for loading spinners from `""loading-spinner""` to `""loading-indicator""`. This was to avoid confusion, since we now sometimes use skeletons as loading indicators.

This PR backports this change, to ensure that new unit tests that refer to the testid `""loading-indicator""` can be backported.",rafpaf,2024-08-14 15:23:16+00:00,['rafpaf'],2024-08-21 12:22:25+00:00,2024-08-20 19:58:13+00:00,https://github.com/metabase/metabase/pull/46842,"[('.Team/AdminWebapp', 'Admin and Webapp team'), ('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2289105931, 'issue_id': 2466170418, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46842?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#46842** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46842?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* **#46841** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46841?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 14, 15, 23, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289144662, 'issue_id': 2466170418, 'author': 'rafpaf', 'body': 'Please ignore the reference to #46841 in the comment above. Graphite got confused', 'created_at': datetime.datetime(2024, 8, 14, 15, 41, 50, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289752365, 'issue_id': 2466170418, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 89d12f8795ce9f165ff5e1f811abee3625578dce...57704e5d8605b05bacaa068f2129f4a34b7ade0a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 8, 14, 19, 53, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289764159, 'issue_id': 2466170418, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/14/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 8, 14, 20, 0, 13, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291030520, 'issue_id': 2466170418, 'author': 'nemanjaglumac', 'body': 'One commit got merged before this that introduced another reference to the loading-spinner. So now the fe unit test is failing.\r\nSorry about that.', 'created_at': datetime.datetime(2024, 8, 15, 10, 22, 18, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-14 15:23:57 UTC): * **#46842** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46842?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* **#46841** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46841?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-08-14 15:41:50 UTC): Please ignore the reference to #46841 in the comment above. Graphite got confused

github-actions[bot] on (2024-08-14 19:53:08 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 89d12f8795ce9f165ff5e1f811abee3625578dce...57704e5d8605b05bacaa068f2129f4a34b7ade0a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.unit.spec.tsx |

graphite-app[bot] on (2024-08-14 20:00:13 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/14/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

nemanjaglumac on (2024-08-15 10:22:18 UTC): One commit got merged before this that introduced another reference to the loading-spinner. So now the fe unit test is failing.
Sorry about that.

"
2466170263,pull_request,closed,,Scroll to created column when extracting or combining columns in chill mode (#42650) (#42832),"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label
> to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this
> PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71)
> in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not
> apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",rafpaf,2024-08-14 15:23:11+00:00,[],2024-08-14 15:30:13+00:00,2024-08-14 15:29:09+00:00,https://github.com/metabase/metabase/pull/46841,[],"[{'comment_id': 2289105907, 'issue_id': 2466170263, 'author': 'rafpaf', 'body': '* **#46842** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46842?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46841** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46841?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 14, 15, 23, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289120220, 'issue_id': 2466170263, 'author': 'rafpaf', 'body': 'Graphite got confused and created this PR for me, I think because it corresponds to a branch that was on the same commit as the `release-x.50.x` branch', 'created_at': datetime.datetime(2024, 8, 14, 15, 30, 11, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-14 15:23:57 UTC): * **#46842** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46842?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46841** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46841?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-08-14 15:30:11 UTC): Graphite got confused and created this PR for me, I think because it corresponds to a branch that was on the same commit as the `release-x.50.x` branch

"
2465967491,pull_request,closed,,make local cypress dx great again,"Closes https://github.com/metabase/metabase/issues/46840

### Description

when we travel between cypress rendering history, there is an internal logic which replaces all `style` tags in the head, where emotion puts styles in dev mode. 
When we edit dashboard, there can be ~1.7k of style tags attached to the head, so every click took ~3s on my dev machine (M2Max + 32Gb RAM).

Using `speedy` option in emotion allow us to keep styles in memory and not in `head`, so cypress can replace styles way faster.

kudos to @Andarist for a tip!

### How to verify

- run cypress locally
- go to dashboard.cy.spec and choose one test, put `.only`
- wait for a test to pass, then click through the left sidebar - there shouldn't be any delay between UI ""states""

### Demo

### Before


https://github.com/user-attachments/assets/67841e48-17e9-4eba-bda8-ff4822e399cc


### After



https://github.com/user-attachments/assets/98d1f674-af22-4ef8-9533-328854a40963

",uladzimirdev,2024-08-14 14:09:40+00:00,['uladzimirdev'],2024-08-14 15:32:47+00:00,2024-08-14 15:32:45+00:00,https://github.com/metabase/metabase/pull/46839,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]",[],
2465863684,pull_request,closed,,convert hasPremiumFeature to TypeScript and add missing token features keys,"

### Description
While working on https://github.com/metabase/metabase/pull/46834 I noticed some token features were not typed/mocked properly.

This converts `hasPremiumFeature` to typescript and adds two missing keys to the `TokenFeature` type.

This should force us to have to keep `TokenFeature` and `createMockTokenFeatures` updated with new token features.
",npretto,2024-08-14 13:37:15+00:00,['npretto'],2024-10-08 16:17:32+00:00,2024-08-14 14:11:23+00:00,https://github.com/metabase/metabase/pull/46837,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2465851000,pull_request,closed,,Switch Perf test events to labels from comments,"### Description

Switch Perf test triggering from comment to label.",Onlinehead,2024-08-14 13:32:10+00:00,['Onlinehead'],2024-10-08 16:17:34+00:00,2024-08-14 13:34:08+00:00,https://github.com/metabase/metabase/pull/46835,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2465831780,pull_request,closed,,reduce logs during setup tests,"### Description

While working on https://github.com/metabase/metabase/pull/46783 I was running into issues because the terminal of jest tests was full of warnings:
- things not wrapped in act (caused by `getByText().click()` instead of using userEvent, I thought also .click was automatically wrapped in act by testing library, TIL), fixed by d78dfdc7de9da614d62a0d83b6705505cb956522
- unknown features, fixed by e59c6b175b98c275df9534b8dc5568d86d3d1313
- getSteps selector not being memoized, fixed by a6a5fc313296869ed865426fd2c3e933888a0465

There are still a few logs about some missing token-features but I'll address them in a separate PR as they're not mocked at all by our helpers

I extracted this refactor in a separate PR from the featuer so that we can backport this",npretto,2024-08-14 13:24:43+00:00,['npretto'],2024-08-16 07:44:56+00:00,2024-08-15 09:06:43+00:00,https://github.com/metabase/metabase/pull/46834,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2288741485, 'issue_id': 2465831780, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3df927c9749167447c615379363c37e81222e86c...e59c6b175b98c275df9534b8dc5568d86d3d1313.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 8, 14, 13, 26, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 13:26:11 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 3df927c9749167447c615379363c37e81222e86c...e59c6b175b98c275df9534b8dc5568d86d3d1313.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/selectors.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/tests/enterprise.unit.spec.tsx<br>frontend/src/metabase/setup/tests/premium.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |

"
2465766062,pull_request,closed,,"ü§ñ backported ""Don't disable triggers before data perms migration""",#46826,github-automation-metabase,2024-08-14 12:57:17+00:00,"['johnswanson', 'github-automation-metabase']",2024-08-14 13:48:29+00:00,2024-08-14 13:48:27+00:00,https://github.com/metabase/metabase/pull/46831,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2465731461,pull_request,closed,,Fix public dashboards are cut when printing,"Fixes #41926

This PR fixes the cut-off of public dashboards when trying to print the page. The root cause is the `overflow: auto` style on `EmbedFrame` (which is also used for public dashboards) added to address #40660. Fixed by making public dashboards use `overflow: visible` when printing.

### To verify

1. Create a dashboard with a table dashcard that shows 50 rows
2. Create and open a public link
3. Press CMD + P / Ctrl + P to print the page
4. Ensure the print preview contains all 50 rows

### Demo

**Before**

https://github.com/user-attachments/assets/b226cbc3-69c8-4cf9-b1fb-9e5c5fd9aa48

**After**

https://github.com/user-attachments/assets/b536653e-be6d-4bf5-ac88-af3d4cd7ad24

",kulyk,2024-08-14 12:42:23+00:00,['kulyk'],2024-08-16 09:18:15+00:00,2024-08-16 09:18:13+00:00,https://github.com/metabase/metabase/pull/46829,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2465715453,pull_request,closed,,Switch perf test trigger from label to comment,"### Description

Switch even type for initiate perf tests from label to comment. ",Onlinehead,2024-08-14 12:34:32+00:00,['Onlinehead'],2024-10-08 16:17:36+00:00,2024-08-14 12:39:58+00:00,https://github.com/metabase/metabase/pull/46828,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2465686938,pull_request,closed,,Manual backport Fix oom during sync field values #46524 to 49,#46524,qnkhuat,2024-08-14 12:20:51+00:00,['qnkhuat'],2024-08-16 12:24:36+00:00,2024-08-16 12:24:35+00:00,https://github.com/metabase/metabase/pull/46827,"[('.Team/Workflows', 'aka BEC')]",[],
2465595875,pull_request,closed,,Don't disable triggers before data perms migration,"I didn't consider that we might not have permissions necessary to disable triggers.
",johnswanson,2024-08-14 11:36:05+00:00,['johnswanson'],2024-08-14 13:48:55+00:00,2024-08-14 12:56:27+00:00,https://github.com/metabase/metabase/pull/46826,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2288538650, 'issue_id': 2465595875, 'author': 'github-actions[bot]', 'body': 'üëã Deploying a preview environment for commit 934b2b173b3f5cc7e4453a44040855ad8640795c.\n‚úÖ Preview:\n    https://pr46826.coredev.metabase.com\nüóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 8, 14, 11, 51, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288672237, 'issue_id': 2465595875, 'author': 'imrkd', 'body': '/perf', 'created_at': datetime.datetime(2024, 8, 14, 12, 57, 53, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 11:51:34 UTC): üëã Deploying a preview environment for commit 934b2b173b3f5cc7e4453a44040855ad8640795c.
‚úÖ Preview:
    https://pr46826.coredev.metabase.com
üóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

imrkd on (2024-08-14 12:57:53 UTC): /perf

"
2465540611,pull_request,closed,,RFC: disallow clobbered window globals,"There are a lot of methods and variables that live in the global `window` context (or in the `global` context in Node.js).

It‚Äôs possible to reference these variables directly, without the `window.` prefix. ie.

```jsx
// these both work
console.log(window.location)
console.log(location)
```

This can lead to subtle issues, especially when using variables that might clash with the names of these global variables. For example, Kamil recently brought up an anecdote where he had to debug a component that had a `close` prop, but this was being clobbered by the `window.close` global. This one case was fixed in a [recent PR](https://github.com/metabase/metabase/pull/46753).

## Proposal

We should introduce a lint rule that disallows using all of the `window.*` and `global.*` as direct values and require `window.{var}` be used instead.

Some notable exceptions can be made when it‚Äôs clear. Eg.:

- `setTimeout` and `clearTimeout`
- `document`
- `fetch`
- `history`
- `atob` and `btoa`


This PR implements just that, and fix up the code where need be.",romeovs,2024-08-14 11:07:57+00:00,['romeovs'],2024-10-29 10:32:27+00:00,2024-10-29 10:32:27+00:00,https://github.com/metabase/metabase/pull/46824,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2288466039, 'issue_id': 2465540611, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a4f1223d1deef0bd5c83d31b4cb1fa484dc68d8f...4a283be959dd3e7eb7fc2b327148ac24292e5465.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/LandingPageWidget/utils.ts<br>frontend/src/metabase/home/components/HomeContent/HomeContent.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 8, 14, 11, 9, 19, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 11:09:19 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a4f1223d1deef0bd5c83d31b4cb1fa484dc68d8f...4a283be959dd3e7eb7fc2b327148ac24292e5465.

| Notify | File(s) |
|-|-|
| @ranquild | enterprise/frontend/src/metabase-enterprise/whitelabel/components/LandingPageWidget/utils.ts<br>frontend/src/metabase/home/components/HomeContent/HomeContent.unit.spec.tsx<br>frontend/src/metabase/setup/tests/setup.tsx |

"
2465472136,pull_request,closed,,Remove @flaky tag from column-compare.cy.spec.ts,"Follow-up on #46817

[Slack](https://metaboat.slack.com/archives/C5XHN8GLW/p1723631335667069?thread_ts=1723576193.418819&cid=C5XHN8GLW) - thanks @nemanjaglumac !",kamilmielnik,2024-08-14 10:32:42+00:00,['kamilmielnik'],2024-10-08 16:17:38+00:00,2024-08-14 11:06:44+00:00,https://github.com/metabase/metabase/pull/46822,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2465424772,pull_request,closed,,Add label for #46771 test,@kamilmielnik left a comment on #46771 after I merged. I don't want him to feel bad,oisincoveney,2024-08-14 10:08:26+00:00,['oisincoveney'],2024-10-08 16:17:38+00:00,2024-08-14 10:27:16+00:00,https://github.com/metabase/metabase/pull/46821,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2288369374, 'issue_id': 2465424772, 'author': 'oisincoveney', 'body': ""> It's fine to push it as a part of another PR :)\r\n\r\nlet's pretend I thought about that üòÇ"", 'created_at': datetime.datetime(2024, 8, 14, 10, 13, 22, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-08-14 10:13:22 UTC): let's pretend I thought about that üòÇ

"
2465231097,pull_request,closed,,"ü§ñ backported ""Enable type info computation for string id fields""",#46488,github-automation-metabase,2024-08-14 08:35:17+00:00,"['lbrdnk', 'github-automation-metabase']",2024-08-14 16:02:44+00:00,2024-08-14 16:02:43+00:00,https://github.com/metabase/metabase/pull/46819,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2465198837,pull_request,closed,,[Notification] Handle channel name conflicts,"Currently if you deactivate a channel, you won't be able to create a new channel with the same name. This is due because we have a unique constraint on channel.name.

Changes:
- On channel deactivate: updates its name to free the name for reuse. E.g: Channel Name => DEACTIVATED_1 Channel Name(1 is the id)
- Creating a channel with a duplicated name will return a sensible error

Context: https://metaboat.slack.com/archives/C07318NQ5M2/p1723576176223559?thread_ts=1723573553.946069&cid=C07318NQ5M2",qnkhuat,2024-08-14 08:20:39+00:00,['qnkhuat'],2024-08-15 07:06:30+00:00,2024-08-15 07:06:28+00:00,https://github.com/metabase/metabase/pull/46818,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2288264325, 'issue_id': 2465198837, 'author': 'crisptrutski', 'body': ""It looks like you may need to truncate the names further, and this may warrant a different renaming scheme. I didn't look into the other test failures, perhaps the tests must simply be updated."", 'created_at': datetime.datetime(2024, 8, 14, 9, 19, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288444046, 'issue_id': 2465198837, 'author': 'qnkhuat', 'body': '@crisptrutski turns out `subs` will throw an error if the `end` exceeds the string length. I defined a `truncate` util function and used it instead.', 'created_at': datetime.datetime(2024, 8, 14, 10, 56, 15, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-08-14 09:19:01 UTC): It looks like you may need to truncate the names further, and this may warrant a different renaming scheme. I didn't look into the other test failures, perhaps the tests must simply be updated.

qnkhuat (Issue Creator) on (2024-08-14 10:56:15 UTC): @crisptrutski turns out `subs` will throw an error if the `end` exceeds the string length. I defined a `truncate` util function and used it instead.

"
2465185578,pull_request,closed,,Fix column-compare.cy.spec.ts flake,"https://metaboat.slack.com/archives/C5XHN8GLW/p1723576193418819

### Description

Stress test: https://github.com/metabase/metabase/actions/runs/10384086954",kamilmielnik,2024-08-14 08:13:59+00:00,['kamilmielnik'],2024-10-08 16:17:40+00:00,2024-08-14 09:55:08+00:00,https://github.com/metabase/metabase/pull/46817,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2465159179,pull_request,closed,,Theme Mantine DatePicker,"Closes https://github.com/metabase/metabase/issues/46521

### Description

This theme the Mantine DatePicker which is shown in #46521

### How to verify
2 ways:
#### SDK
1. run
    ```
    yarn build-release:cljs && yarn build-embedding-sdk:watch
    ```
1. Run Shoppy with the built SDK
    ```
    yarn dev:link && yarn dev
    ```
1. Visit http://localhost:3004/admin/products/1
1. Click on the bar chart and click on the date filter value (`Created At is Mar 30 ‚Äì May 31, 2024`) in the popover

You should see the date picker there

#### with Storybook
1. Run `yarn storybook`
1. Look for ""Inputs/DatePicker""'s ""dates range"" and ""dates range SDK""

### Demo
#### In app
#### After
![image](https://github.com/user-attachments/assets/b5b65410-5e39-4a3b-b6d6-1d895b24071d)

#### Before
![image](https://github.com/user-attachments/assets/62b39a46-4a90-42ed-b983-4fcd09045a94)

#### SDK
#### After
- ![image](https://github.com/user-attachments/assets/d3c612cb-55ce-4fdf-a9d7-12b989a8cfc2)
- ![image](https://github.com/user-attachments/assets/7da95afd-141f-4f70-9c72-117e427935bb)

#### Before
![img](https://private-user-images.githubusercontent.com/4714175/355439703-102ad6ea-a6c5-47f8-b3ba-331edf055363.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjM2MjI5NDQsIm5iZiI6MTcyMzYyMjY0NCwicGF0aCI6Ii80NzE0MTc1LzM1NTQzOTcwMy0xMDJhZDZlYS1hNmM1LTQ3ZjgtYjNiYS0zMzFlZGYwNTUzNjMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgxNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MTRUMDgwNDA0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDQ1ZGExN2RmZmIwNGQwZmZlNzI2OTk4Zjg4Y2Y2MDFkN2E5NWFmMGJjZGQ5MjNhZmRlYWY2NmE5MmQyYWU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GMidP_A4BRoaFLyLhE9-G0XabsDyxMD6U5bGZwaIVz4)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-08-14 07:59:47+00:00,['WiNloSt'],2024-08-14 15:27:51+00:00,2024-08-14 15:27:49+00:00,https://github.com/metabase/metabase/pull/46816,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2288096969, 'issue_id': 2465159179, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 763ebb7421a8490f530b83b774dcc4a299426046...9e319c63d4564a1e44aa7924f3fca42765972a35.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/inputs/Calendar/Calendar.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx |', 'created_at': datetime.datetime(2024, 8, 14, 8, 1, 12, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288377910, 'issue_id': 2465159179, 'author': 'albertoperdomo', 'body': 'This is 100% visual so I will defer on @AlessioLaiso to approve. Thanks', 'created_at': datetime.datetime(2024, 8, 14, 10, 17, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289039855, 'issue_id': 2465159179, 'author': 'AlessioLaiso', 'body': 'For dark mode, I would suggest the change below. The exact colors are not fundamental in this case, it\'s more about making the cell color of the range less prominent than the first and last. This would work better for the dark theme and will bring it more in line with the light theme.\r\n\r\n<img width=""697"" alt=""Screenshot 2024-08-14 at 15 51 44"" src=""https://github.com/user-attachments/assets/a90ec000-488a-4c12-9fcd-c78a9d91f36f"">', 'created_at': datetime.datetime(2024, 8, 14, 14, 54, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289086046, 'issue_id': 2465159179, 'author': 'WiNloSt', 'body': '> For dark mode, I would suggest the change below. The exact colors are not fundamental in this case, it\'s more about making the cell color of the range less prominent than the first and last. This would work better for the dark theme and will bring it more in line with the light theme.\r\n> \r\n> <img alt=""Screenshot 2024-08-14 at 15 51 44"" width=""697"" src=""https://private-user-images.githubusercontent.com/7041012/357873568-a90ec000-488a-4c12-9fcd-c78a9d91f36f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjM2NDc1NDksIm5iZiI6MTcyMzY0NzI0OSwicGF0aCI6Ii83MDQxMDEyLzM1Nzg3MzU2OC1hOTBlYzAwMC00ODhhLTRjMTItOWZjZC1jNzhhOWQ5MWYzNmYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgxNCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MTRUMTQ1NDA5WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDMyMTkxZWY3ZTBkOGVjZjQ4YjlmNTkxNjY1OTA4MDQzNTM2MjM3YWJlNzE3NmMzZDdkYWUzYzhmNmMzNmUyOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ._KP2ajU8bIXg5brh6So50h3uHZ34MmTC7ZzgliixMDc"">\r\n\r\nwe don\'t have this component in static embed as far as I can tell, so I couldn\'t really test the dark theme for this picker for real, but I try to apply the same style for dark theme in our storybook and this is how it looks without any further change. IMO, it already looks better but further adjustments could be made down the line.\r\n\r\n![image](https://github.com/user-attachments/assets/a66a3511-0ad1-437e-a434-fa438d688532)\r\n\r\nNow it\'s the responsibility of the SDK users to pass desired colors to make their design work, but currently, there\'s no mapping for these new semantic colors yet. So to make new color mappings is out of the scope of this PR.\r\n\r\nI\'ll merge the PR now, and if we need to support these colors let work on that on a separate issue/feature request.', 'created_at': datetime.datetime(2024, 8, 14, 15, 14, 36, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 08:01:12 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 763ebb7421a8490f530b83b774dcc4a299426046...9e319c63d4564a1e44aa7924f3fca42765972a35.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/inputs/Calendar/Calendar.styled.tsx<br>frontend/src/metabase/ui/components/inputs/DatePicker/DatePicker.stories.mdx |

albertoperdomo on (2024-08-14 10:17:58 UTC): This is 100% visual so I will defer on @AlessioLaiso to approve. Thanks

AlessioLaiso on (2024-08-14 14:54:06 UTC): For dark mode, I would suggest the change below. The exact colors are not fundamental in this case, it's more about making the cell color of the range less prominent than the first and last. This would work better for the dark theme and will bring it more in line with the light theme.

<img width=""697"" alt=""Screenshot 2024-08-14 at 15 51 44"" src=""https://github.com/user-attachments/assets/a90ec000-488a-4c12-9fcd-c78a9d91f36f"">

WiNloSt (Issue Creator) on (2024-08-14 15:14:36 UTC): we don't have this component in static embed as far as I can tell, so I couldn't really test the dark theme for this picker for real, but I try to apply the same style for dark theme in our storybook and this is how it looks without any further change. IMO, it already looks better but further adjustments could be made down the line.

![image](https://github.com/user-attachments/assets/a66a3511-0ad1-437e-a434-fa438d688532)

Now it's the responsibility of the SDK users to pass desired colors to make their design work, but currently, there's no mapping for these new semantic colors yet. So to make new color mappings is out of the scope of this PR.

I'll merge the PR now, and if we need to support these colors let work on that on a separate issue/feature request.

"
2465080922,pull_request,closed,,"ü§ñ backported ""Fix exported png got different backgrounds based on screen density""",#46769,github-automation-metabase,2024-08-14 07:16:07+00:00,"['WiNloSt', 'github-automation-metabase']",2024-08-14 07:48:37+00:00,2024-08-14 07:48:36+00:00,https://github.com/metabase/metabase/pull/46815,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2288024067, 'issue_id': 2465080922, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5b25cd9c2f346d104f8499fc410f71a3cb9b0aa...ad641e4e78318b3af8254eea6afc08948ea2aeb6.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/save-chart-image.ts |', 'created_at': datetime.datetime(2024, 8, 14, 7, 17, 54, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 07:17:54 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5b25cd9c2f346d104f8499fc410f71a3cb9b0aa...ad641e4e78318b3af8254eea6afc08948ea2aeb6.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/save-chart-image.ts |

"
2465079687,pull_request,closed,,"ü§ñ backported ""perf: Optimize XLSX export by using more efficient iteration""",#45669,metabase-bot[bot],2024-08-14 07:15:23+00:00,['crisptrutski'],2024-08-14 08:07:21+00:00,2024-08-14 08:07:20+00:00,https://github.com/metabase/metabase/pull/46814,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2465079290,pull_request,closed,,"ü§ñ backported ""perf: Work around Apache POI ColumnHelper performance bug""",#45667,metabase-bot[bot],2024-08-14 07:15:07+00:00,['crisptrutski'],2024-08-14 08:06:27+00:00,2024-08-14 08:06:26+00:00,https://github.com/metabase/metabase/pull/46813,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2464941806,pull_request,closed,,feat(sdk): cli only re-pulls the docker image when it is not the latest version,"### Description

Only re-pull the Docker image if the image is not already downloaded, or if the local image is different than the latest remote image's digest. This way, we do not have to pull the image every single time.",heypoom,2024-08-14 05:37:24+00:00,['heypoom'],2024-08-14 07:53:31+00:00,2024-08-14 07:52:45+00:00,https://github.com/metabase/metabase/pull/46812,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2288082565, 'issue_id': 2464941806, 'author': 'heypoom', 'body': ""Nevermind, `--pull always` does not actually always pull, it only pulls if the image is out-of-date. I misunderstood, argh. The current behaviour is already the optimal behaviour ü§¶üèª \r\n\r\n```\r\n$ docker run --pull always --detach -p 3366:3000 --name metabase-enterprise-embedding metabase/metabase-enterprise:latest\r\nlatest: Pulling from metabase/metabase-enterprise\r\nDigest: sha256:be07f6b5721aa9e94a9df383306da81d43c63a59ffb4739b0deb8c6bda6114a4\r\nStatus: Image is up to date for metabase/metabase-enterprise:latest\r\nWARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested\r\n97864c181562922ecf2ae4756e4ad30ff300d0be91680fde17f285d006bb023c\r\n```"", 'created_at': datetime.datetime(2024, 8, 14, 7, 52, 45, tzinfo=datetime.timezone.utc)}]","heypoom (Issue Creator) on (2024-08-14 07:52:45 UTC): Nevermind, `--pull always` does not actually always pull, it only pulls if the image is out-of-date. I misunderstood, argh. The current behaviour is already the optimal behaviour ü§¶üèª 

```
$ docker run --pull always --detach -p 3366:3000 --name metabase-enterprise-embedding metabase/metabase-enterprise:latest
latest: Pulling from metabase/metabase-enterprise
Digest: sha256:be07f6b5721aa9e94a9df383306da81d43c63a59ffb4739b0deb8c6bda6114a4
Status: Image is up to date for metabase/metabase-enterprise:latest
WARNING: The requested image's platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested
97864c181562922ecf2ae4756e4ad30ff300d0be91680fde17f285d006bb023c
```

"
2464824262,pull_request,closed,,"ü§ñ backported ""Limit the anon stats on query execution to 30 days""",#46560,github-automation-metabase,2024-08-14 03:37:29+00:00,"['qnkhuat', 'github-automation-metabase']",2024-08-14 04:45:57+00:00,2024-08-14 04:45:57+00:00,https://github.com/metabase/metabase/pull/46811,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2464812626,pull_request,closed,,feat(sdk): embedding cli opens the metabase store to get trial token and applies the license,"Closes https://github.com/metabase/metabase/issues/46761

### Description

Opens the Metabase Store in their browser in the license step if they do not have an active license, and applies the license accordingly at the last step.

### How to verify

- Run the CLI
- The CLI should take us to get the trial token in the browser if we answered that do not have an active license.",heypoom,2024-08-14 03:26:03+00:00,['heypoom'],2024-08-21 10:36:54+00:00,2024-08-21 10:36:53+00:00,https://github.com/metabase/metabase/pull/46810,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2464626864,pull_request,closed,,Rearrange buttons in the dashboard editing panel,"Product doc https://www.notion.so/metabase/Rearrange-buttons-in-the-dashboard-editing-panel-8432eb8df6e449c1ab69149ced425978

Changes:
- Moves `temporal-unit` parameters to the same popover where other parameters are
- Copy & layout changes

How to verify:
- Edit dashboard -> Click filter button
- Make sure that each parameter button is operational

<img width=""413"" alt=""Screenshot 2024-08-20 at 14 01 10"" src=""https://github.com/user-attachments/assets/2eb13178-9abc-4542-8eb6-56d13d037f0a"">
",ranquild,2024-08-14 01:00:39+00:00,['ranquild'],2024-10-08 16:16:52+00:00,2024-08-21 13:31:39+00:00,https://github.com/metabase/metabase/pull/46809,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', ''), ('loki-update', '')]","[{'comment_id': 2299457066, 'issue_id': 2464626864, 'author': 'ranquild', 'body': ""@kamilmielnik thanks! I've updated the PR to use `Menu`. The only thing is that I didn't manage to preserve the layout with CSS so I had to keep track of the max right section width with code. But otherwise this is way better."", 'created_at': datetime.datetime(2024, 8, 20, 18, 13, 39, tzinfo=datetime.timezone.utc)}]","ranquild (Issue Creator) on (2024-08-20 18:13:39 UTC): @kamilmielnik thanks! I've updated the PR to use `Menu`. The only thing is that I didn't manage to preserve the layout with CSS so I had to keep track of the max right section width with code. But otherwise this is way better.

"
2464616024,pull_request,closed,,"ü§ñ backported ""Add v0.50.20 to the list of releases""",#46804,github-automation-metabase,2024-08-14 00:54:57+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-14 00:56:24+00:00,2024-08-14 00:56:23+00:00,https://github.com/metabase/metabase/pull/46808,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2464501586,pull_request,closed,,[small] [opening for discussion] Add `keepalive` to frontend requests,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

‚úÖ License Agreement Signed

### Description

A lot of load-balancers will have separate timeouts for connection with keepalives sent and connections without. AWS ELBs default to 1 minute for no keep-alives and 1 hour with keep-alives. Setting up a question that takes more than 1 minute isn't that rare! And failures will look as if the question timed out rather than something at the network level timing out.

This won't fix it for [all browsers[(https://caniuse.com/?search=keepalive). (https://caniuse.com/\?search\=keepalive), but I think it'd solve it for some users, and it would avoid people needing to change their load-balancer settings to get metabase questions working properly.

<img width=""837"" alt=""Screenshot 2024-08-13 at 5 43 19‚ÄØPM"" src=""https://github.com/user-attachments/assets/00aa3801-3e7e-4ce9-8c8a-cdb0a65305c7"">

### How to verify

**Note: I haven't actually checked this one yet!** I wanted to open up this PR to check whether there was any context I was missing & whether the intention behind this change made sense. If it does, I'll test it out and make sure I'm actually editing the right `fetch` call.

I _have_ needed to tweak load-balancer settings to get slow metabase queries working properly.

- [Request docs for keepalive](https://developer.mozilla.org/en-US/docs/Web/API/Request)


If you want to test out against another load-balancer, I'd recommend setting up a sleep UDF if the database that you're testing with doesn't support `select sleep(300)`. Here's some code that works with Redshift:

```
CREATE OR REPLACE FUNCTION public.f_sleep(seconds INTEGER)
    RETURNS INTEGER
    IMMUTABLE AS
$$
    import time
    time.sleep(seconds)
    return seconds

$$ LANGUAGE plpythonu;
```

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",KelWill,2024-08-13 23:55:27+00:00,[],2025-02-04 01:31:29+00:00,2025-02-04 01:31:28+00:00,https://github.com/metabase/metabase/pull/46806,"[('Stale', 'Stale PRs that will be auto-closed')]","[{'comment_id': 2603449953, 'issue_id': 2464501586, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557704, 'issue_id': 2464501586, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 28, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:20 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:28 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2464476411,pull_request,closed,,e2e: Remove the assertion about the tooltip on returning to the notebook page,"### Description
The removed assertion was causing this test to flake in CI. [Example](https://github.com/metabase/metabase/actions/runs/10377932557/job/28734223118#step:13:808).
What's worse is that I can reliably see the tooltip in the UI 100% of the time when running Cypress locally, but the assertion is passing. I think this is a Cypress-specific quirk that cannot be replicated in normal usage.

See the tooltip in UI, but notice the last assertion passing
![image](https://github.com/user-attachments/assets/a3624de2-8192-4ad0-931c-05b3b71bec3a)

After confirming that this behavior is not present in the real app usage, I decided to remove the assertion to prevent further flakes and confusion.

### Explanation
After Cypress clicks on the data source it opens a new window with that source. Since this is not a real usage, Cypress asserts a few things on the new page, and then programmatically goes back. My assumption is that it either has the previous page state in cache or (more likely) the cursor is still in the same position which triggers the hover, and thus the tooltip to show.

### Conclusion
It is impossible to reliably test this in Cypress, and to mimic the real-world usage (human behavior).

### Demo
If I do things programmatically (that is if I only use my keyboard) then sure - I can replicate this behavior
https://github.com/user-attachments/assets/1e9dfd28-0f31-42a4-9261-17d748eddff8



But if I use the app like the average human would do and I use my mouse to see the new tab, there's no way I can see the tooltip still being present (without me explicitly hovering its container again) when I go back to the tab with the notebook open.
https://github.com/user-attachments/assets/65948c69-50b1-498c-8582-6ecd6415d4a5


",nemanjaglumac,2024-08-13 23:38:06+00:00,['nemanjaglumac'],2024-10-08 16:17:37+00:00,2024-08-14 11:43:44+00:00,https://github.com/metabase/metabase/pull/46805,"[('Type:Tech Debt', 'or Refactoring'), ('.CI & Tests', ''), ('flaky-test-fix', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2464366495,pull_request,closed,,Add v0.50.20 to the list of releases,Like it says on the tin üòÅ,github-automation-metabase,2024-08-13 22:34:34+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-14 00:56:53+00:00,2024-08-14 00:54:12+00:00,https://github.com/metabase/metabase/pull/46804,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2464280911,pull_request,closed,,"ü§ñ backported ""Add v0.49.23 to the list of releases""",#46800,github-automation-metabase,2024-08-13 21:45:50+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-13 21:47:20+00:00,2024-08-13 21:47:19+00:00,https://github.com/metabase/metabase/pull/46803,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2464275699,pull_request,closed,,feat(sdk): Add Dashboard creation components,"Closes [Embedding SDK Dashboard creation](https://www.notion.so/metabase/Expose-front-end-components-in-SDK-e2f96fa53cf043bda66002898bedf10c?pvs=4#322ebed58a10424b9f7ef1309601a7fe)

### Description

This adds `DashboardCreateModal` component and `useDashboardCreate` hook to kick-off dashboard creation, which then can be edited with `EditableDashboard` component added in https://github.com/metabase/metabase/pull/46255

### How to verify

1. Run Embedding SDK storybook - `yarn storybook-embedding-sdk`
2. Check DashboardCreateModal stories - `http://localhost:6006/?path=/story/embeddingsdk-dashboardcreatemodal--default`

Then also can checked in Shoppy:
1. Build the sdk - `yarn build-embedding-sdk`
2. Checkout https://github.com/metabase/shoppy/tree/testing-dashboard
3. Run `yarn install-and-start`
4. Open `https://localhost:3004/dash`

### Demo


https://github.com/user-attachments/assets/09f2c57f-ef0a-44ac-990e-02a287fb0e7d



### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",deniskaber,2024-08-13 21:42:16+00:00,['deniskaber'],2024-10-08 16:17:20+00:00,2024-08-16 13:10:59+00:00,https://github.com/metabase/metabase/pull/46802,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2287189109, 'issue_id': 2464275699, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@deniskaber You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 21, 42, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2290820563, 'issue_id': 2464275699, 'author': 'WiNloSt', 'body': '@deniskaber do you also need to update the readme since this PR adds a new component?', 'created_at': datetime.datetime(2024, 8, 15, 7, 35, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291159857, 'issue_id': 2464275699, 'author': 'WiNloSt', 'body': '@deniskaber I think we should also request a review from query components.', 'created_at': datetime.datetime(2024, 8, 15, 12, 13, 34, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291223739, 'issue_id': 2464275699, 'author': 'deniskaber', 'body': ""Hey @metabase/core-frontend-dashviz . Added you as reviewers so that you're of changes in [`frontend/src/metabase/dashboard/containers/CreateDashboardForm.tsx`](https://github.com/metabase/metabase/pull/46802/files#diff-e6327a4fd06f749dd489f3176b432cc81d81526315d5b89abe62b7eb4bd8f852)"", 'created_at': datetime.datetime(2024, 8, 15, 12, 59, 58, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291268774, 'issue_id': 2464275699, 'author': 'WiNloSt', 'body': '@deniskaber please discuss with @oisincoveney regarding the public component naming. I think components in this PR should be aligned with the component for creating questions in [feat(sdk): Create Question](https://github.com/metabase/metabase/pull/46618#top), otherwise, our APIs would be inconsistent.', 'created_at': datetime.datetime(2024, 8, 15, 13, 27, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291883265, 'issue_id': 2464275699, 'author': 'deniskaber', 'body': ""> @deniskaber please discuss with @oisincoveney regarding the public component naming. I think components in this PR should be aligned with the component for creating questions in [feat(sdk): Create Question](https://github.com/metabase/metabase/pull/46618#top), otherwise, our APIs would be inconsistent.\r\n\r\nI don't think we can provide the same API as with the new Question. Current behavior is different in case of a Dashboard. Here we have create a new empty dashboard first, and then edit it (and we already have a component for this). But overall let's check other team members opinions as well"", 'created_at': datetime.datetime(2024, 8, 15, 18, 11, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2292925319, 'issue_id': 2464275699, 'author': 'WiNloSt', 'body': ""> > @deniskaber please discuss with @oisincoveney regarding the public component naming. I think components in this PR should be aligned with the component for creating questions in [feat(sdk): Create Question](https://github.com/metabase/metabase/pull/46618#top), otherwise, our APIs would be inconsistent.\r\n> \r\n> I don't think we can provide the same API as with the new Question. Current behavior is different in case of a Dashboard. Here we have create a new empty dashboard first, and then edit it (and we already have a component for this). But overall let's check other team members opinions as well\r\n\r\nI was referring to APIs in general, that includes naming as well, at least the component names should be similar, or follow the same set of patterns.\r\n\r\nI'd agree with the component APIs (props) that they are different because the dashboard is created as an empty dashboard as we do in the app unlike question which couldn't be empty."", 'created_at': datetime.datetime(2024, 8, 16, 6, 48, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2293331821, 'issue_id': 2464275699, 'author': 'deniskaber', 'body': '@WiNloSt \r\n\r\n> but it\'s different from the collection browser\'s collectionId which limits the collections that users can see. This is just changing the starting collection. I think this feature needs to be made on the collection browser itself to support this.\r\n> \r\n> I still think it should be have similarly to our collection browsers collectionId` for consistency.\r\n\r\nI can argue that we don\'t know which behavior we need here. CollectionBrowser is a view level component, where we can assume that user might not have permissions to edit data or view anything else he doesn\'t have access to.\r\n\r\nHere, when we create a dashboard, it already means that a user have more rights than just ""view"". He still can be sandboxed, and then this modal should take this into account. You are absolutely correct that it doesn\'t work this way now. We should highlight this to the team and decide what should be the behavior.', 'created_at': datetime.datetime(2024, 8, 16, 11, 27, 10, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 21:42:35 UTC): <!---conventional commit reminder comment ID-->
@deniskaber You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

WiNloSt on (2024-08-15 07:35:23 UTC): @deniskaber do you also need to update the readme since this PR adds a new component?

WiNloSt on (2024-08-15 12:13:34 UTC): @deniskaber I think we should also request a review from query components.

deniskaber (Issue Creator) on (2024-08-15 12:59:58 UTC): Hey @metabase/core-frontend-dashviz . Added you as reviewers so that you're of changes in [`frontend/src/metabase/dashboard/containers/CreateDashboardForm.tsx`](https://github.com/metabase/metabase/pull/46802/files#diff-e6327a4fd06f749dd489f3176b432cc81d81526315d5b89abe62b7eb4bd8f852)

WiNloSt on (2024-08-15 13:27:54 UTC): @deniskaber please discuss with @oisincoveney regarding the public component naming. I think components in this PR should be aligned with the component for creating questions in [feat(sdk): Create Question](https://github.com/metabase/metabase/pull/46618#top), otherwise, our APIs would be inconsistent.

deniskaber (Issue Creator) on (2024-08-15 18:11:35 UTC): I don't think we can provide the same API as with the new Question. Current behavior is different in case of a Dashboard. Here we have create a new empty dashboard first, and then edit it (and we already have a component for this). But overall let's check other team members opinions as well

WiNloSt on (2024-08-16 06:48:44 UTC): I was referring to APIs in general, that includes naming as well, at least the component names should be similar, or follow the same set of patterns.

I'd agree with the component APIs (props) that they are different because the dashboard is created as an empty dashboard as we do in the app unlike question which couldn't be empty.

deniskaber (Issue Creator) on (2024-08-16 11:27:10 UTC): @WiNloSt 


I can argue that we don't know which behavior we need here. CollectionBrowser is a view level component, where we can assume that user might not have permissions to edit data or view anything else he doesn't have access to.

Here, when we create a dashboard, it already means that a user have more rights than just ""view"". He still can be sandboxed, and then this modal should take this into account. You are absolutely correct that it doesn't work this way now. We should highlight this to the team and decide what should be the behavior.

"
2464264772,pull_request,closed,,Add v0.49.23 to the list of releases,Like it says on the tin üòÅ,github-automation-metabase,2024-08-13 21:34:41+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-13 21:48:00+00:00,2024-08-13 21:45:02+00:00,https://github.com/metabase/metabase/pull/46800,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2464228013,pull_request,closed,,Fix handling explicit joins in metrics,Fixes the problem mentioned in [Slack](https://metaboat.slack.com/archives/C051AG38B2S/p1723578692370739?thread_ts=1723561234.651549&cid=C051AG38B2S).,metamben,2024-08-13 21:10:47+00:00,['metamben'],2024-10-08 16:17:43+00:00,2024-08-13 23:43:30+00:00,https://github.com/metabase/metabase/pull/46798,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2464213512,pull_request,closed,,docs - api note on card types,Note on available card types.,jeff-bruemmer,2024-08-13 21:02:08+00:00,['jeff-bruemmer'],2024-08-16 19:58:08+00:00,2024-08-16 19:58:07+00:00,https://github.com/metabase/metabase/pull/46797,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2464205140,pull_request,closed,,Rename loading/error wrapper,"_Draft for discussion_

This PR gives the loading/error wrapper a new name: `Loading`

Currently this PR also refactors a few components. I may move these changes to a separate downstream PR",rafpaf,2024-08-13 20:57:02+00:00,['rafpaf'],2024-10-15 20:14:38+00:00,2024-10-15 20:14:37+00:00,https://github.com/metabase/metabase/pull/46796,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2287125016, 'issue_id': 2464205140, 'author': 'rafpaf', 'body': '> [!WARNING]\n> <b>This pull request is not mergeable via GitHub because a downstack PR is open. Once all requirements are satisfied, merge this PR as a stack <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-downstack-mergeability-warning"" >on Graphite</a>.</b>\n> <a href=""https://graphite.dev/docs/merge-pull-requests"">Learn more</a>\n\n* **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 13, 20, 57, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2414919458, 'issue_id': 2464205140, 'author': 'rafpaf', 'body': ""I'll need to re-do this so closing for now"", 'created_at': datetime.datetime(2024, 10, 15, 20, 14, 37, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-13 20:57:16 UTC): * **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

rafpaf (Issue Creator) on (2024-10-15 20:14:37 UTC): I'll need to re-do this so closing for now

"
2464187841,pull_request,closed,,docs - update api docs,Updates API docs for 50.,jeff-bruemmer,2024-08-13 20:45:28+00:00,['jeff-bruemmer'],2024-08-21 20:26:20+00:00,2024-08-21 20:25:43+00:00,https://github.com/metabase/metabase/pull/46794,"[('Type:Documentation', ''), ('no-backport', 'Do not backport this PR to any branch')]",[],
2464122927,pull_request,closed,,(loading/error wrapper) Introduce new component,"_This is a draft, intended for open discussion_

This PR improves the loading and error wrapper in several ways:
* Removes the unused props `loadingScenes` and  `noBackground`
* Renames the component `LoadingAndErrorWrapper` to `Loading`
* Supports custom loading indicator
* Improves unit testing
* Adds a `delay` prop that makes the loading indicator wait 300ms before appearing (to reduce jitter)

The west frontend guild discussed this in an RFC in June: https://www.notion.so/metabase/101-Simplified-loading-wrapper-f0e7e6098fc441519d106a2f6a46c6bb

The core component is `frontend/src/metabase/components/Loading/Loading.tsx`

### Checklist

- [x] Tests have been added/updated to cover changes in this PR",rafpaf,2024-08-13 20:02:12+00:00,['rafpaf'],2025-02-04 01:31:30+00:00,2025-02-04 01:31:30+00:00,https://github.com/metabase/metabase/pull/46792,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2287030028, 'issue_id': 2464122927, 'author': 'rafpaf', 'body': '* **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 13, 20, 2, 32, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287035155, 'issue_id': 2464122927, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d2034416e05e37f7222ccd8cdeaff47955342166...2974b493c71360bcde63e429c4d3c6f0b744a789.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 8, 13, 20, 5, 44, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287042142, 'issue_id': 2464122927, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/13/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 8, 13, 20, 10, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603449985, 'issue_id': 2464122927, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557736, 'issue_id': 2464122927, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 29, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-13 20:02:32 UTC): * **#46796** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46796?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46855** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46855?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46792** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46792?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-08-13 20:05:44 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d2034416e05e37f7222ccd8cdeaff47955342166...2974b493c71360bcde63e429c4d3c6f0b744a789.

No notifications.

graphite-app[bot] on (2024-08-13 20:10:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/13/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

github-actions[bot] on (2025-01-21 01:31:22 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:29 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2463975043,pull_request,closed,,Improve Clear cache button text and question refresh button tooltip,"### Description

This PR introduces two changes:
* To clarify that the ""Clear cache"" button does not clear the entire cache, but just the cached results for a particular entity, this PR makes the text on that button more specific: ""Clear cache for this question"", ""Clear cache for this dashboard"", or ""Clear cache for this database"", depending on the context.
* On question pages, to clarify what the Refresh button does, its tooltip says ""Clear cache and refresh""

The new Clear cache button is at the bottom of each of these screenshots:

![image](https://github.com/user-attachments/assets/3dda2b9e-b841-4cd6-b94b-c44d34272c00)

![image](https://github.com/user-attachments/assets/d24359b7-b3f1-480d-8a26-8da45f591e0a)

![image](https://github.com/user-attachments/assets/153a0cb8-25c4-4aab-932f-476f71d5df68)

The new tooltip has this text:

![image](https://github.com/user-attachments/assets/211bfb68-0a9e-4fb9-a83d-397552a3847d)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",rafpaf,2024-08-13 18:36:40+00:00,['rafpaf'],2024-09-11 13:00:09+00:00,2024-08-27 18:16:44+00:00,https://github.com/metabase/metabase/pull/46791,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2286881882, 'issue_id': 2463975043, 'author': 'rafpaf', 'body': '* **#46791** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46791?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 13, 18, 36, 58, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-13 18:36:58 UTC): * **#46791** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46791?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2463972068,pull_request,closed,,"ü§ñ backported ""e2e: Fix dashboard ID filter flakes""","  #46787
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-13 18:34:48+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-13 18:44:16+00:00,2024-08-13 18:44:02+00:00,https://github.com/metabase/metabase/pull/46790,[],"[{'comment_id': 2286894579, 'issue_id': 2463972068, 'author': 'nemanjaglumac', 'body': ""Let's actually not backport.\r\nI haven't seen these flakes in the release 50 branch."", 'created_at': datetime.datetime(2024, 8, 13, 18, 44, 2, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Assginee) on (2024-08-13 18:44:02 UTC): Let's actually not backport.
I haven't seen these flakes in the release 50 branch.

"
2463967286,pull_request,closed,,Remove support for questions with metric source,Fixes #46782,metamben,2024-08-13 18:32:03+00:00,['metamben'],2024-08-14 14:04:39+00:00,2024-08-14 14:04:38+00:00,https://github.com/metabase/metabase/pull/46789,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2463926517,pull_request,closed,,e2e: Fix dashboard ID filter flakes,"For some reason these tests have been flaking almost constantly in the last couple of days.
After observing what's going on, I realized that we need to wait for the dashboard data responses.

Once I set those in place, the test started passing consistently.
<img width=""707"" alt=""image"" src=""https://github.com/user-attachments/assets/92c56b6c-8960-4c46-993c-2deb0bd3890f"">

> [!Important]
> I will force-merge this PR as soon as the stress-test confirms that the test is fixed. We need to unblock `master` ASAP.

### Stress-test
30/30 in progress https://github.com/metabase/metabase/actions/runs/10374864892",nemanjaglumac,2024-08-13 18:07:18+00:00,['nemanjaglumac'],2024-10-08 16:17:45+00:00,2024-08-13 18:33:47+00:00,https://github.com/metabase/metabase/pull/46787,"[('backport', 'Automatically create PR on current release branch on merge'), ('flaky-test-fix', ''), ('.Team/Querying', '')]",[],
2463910421,pull_request,closed,,"ü§ñ backported ""e2e: Fix dashboard number filter flakes""","  #46785
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-13 17:57:35+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-13 18:44:33+00:00,2024-08-13 18:44:25+00:00,https://github.com/metabase/metabase/pull/46786,[],"[{'comment_id': 2286895414, 'issue_id': 2463910421, 'author': 'nemanjaglumac', 'body': ""Let's actually not backport.\r\nI haven't seen these flakes in the release 50 branch."", 'created_at': datetime.datetime(2024, 8, 13, 18, 44, 25, tzinfo=datetime.timezone.utc)}]","nemanjaglumac (Assginee) on (2024-08-13 18:44:25 UTC): Let's actually not backport.
I haven't seen these flakes in the release 50 branch.

"
2463790574,pull_request,closed,,e2e: Fix dashboard number filter flakes,"For some reason these tests have been flaking almost constantly in the last couple of days.
After observing what's going on, I realized that we need to wait for the dashboard data responses.

Once I set those in place, the test started passing consistently.

> [!Important]
> I will force-merge this PR as soon as the stress-test confirms that the test is fixed. We need to unblock `master` ASAP.

### Stress-test
30/30 ‚úÖ https://github.com/metabase/metabase/actions/runs/10374282112",nemanjaglumac,2024-08-13 16:47:46+00:00,['nemanjaglumac'],2024-10-08 16:17:47+00:00,2024-08-13 17:56:43+00:00,https://github.com/metabase/metabase/pull/46785,"[('backport', 'Automatically create PR on current release branch on merge'), ('flaky-test-fix', ''), ('.Team/Querying', '')]",[],
2463775651,pull_request,closed,,[manual backport] Dowload Row Limit Env Var (#46401),"* Dowload Row Limit Env Var

Adds `MB_DOWNLOAD_ROW_LIMIT` to enable changing the row limit on downloads and alert/subscription attachments (not the rendered tables, but the .csv, etc.).

Based on: #44982 (Thanks, @r-kot)

Partially implements: #28144

The difference in this PR compared to #44982 is that the download limit applies to all downloads, the only exception being when the limit is above `qp.i/absolute-max-results` (1048575, based on Excel's limitation); in such a case, the user supplied limit is only used if the download is csv or json, and `qp.i/absolute-max-results` is used for xlsx.

This PR also fixes alert/subscription attachment limits; prior to this, they were set to the in-app limit of 2000 rows, but now they will follow the user supplied download-row-limit.

This PR also adds a test to the downloads-and-exports test namespace, confirming that they follow the supplied limit, or the max limit if none is supplied.

* add test confirming the default limit works

* fix test to use the download-row-limit

* address review feedback

* Update src/metabase/public_settings.clj



* add test covering case where download-row-limit is unset",adam-james-v,2024-08-13 16:38:49+00:00,['adam-james-v'],2024-08-13 20:28:10+00:00,2024-08-13 20:28:09+00:00,https://github.com/metabase/metabase/pull/46784,"[('visual', 'Run Percy visual testing'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2463735090,pull_request,closed,,make the newsletter signup a checkbox instead of a button,"Part of  [[Epic] Reduce the number of choices in onboarding flow](https://github.com/metabase/metabase/issues/46741)

# Description
This changes the newsletter subscription to be a checkbox instead of a button.
The technical details are explained in the [tech plan](https://www.notion.so/metabase/Tech-Reduce-the-number-of-choices-in-onboarding-flow-9def6e76d62d4c4f86b269191324ce69?pvs=4#e094a53229214ebf91f2da3c6a5a400b) but the tldr is that we use navigator.sendBeacon to make sure the request is not lost when navigating away from the page.

# How to verify
This is a bit tricky, to do a full test I had a mock backend logging what it received, i had it listening on a custom domain over https to make sure that the request successfully reached the server even with cors/https etc. (see video under the demo).
If you want to try it, you'll have to add the custom domain you're using in the [security.clj file](https://github.com/metabase/metabase/blob/60aa323343641d16c0b3fe21fd5df714a660af77/src/metabase/server/middleware/security.clj#L99-L103)
It seems it's working ok but if you have any issue or concern please raise it as I don't want to break the newsletter signup üôÉ 

# Demo
<img width=""1051"" alt=""image"" src=""https://github.com/user-attachments/assets/6b3c4a05-cfcc-40e3-8499-33d6dc331c83"">

https://github.com/user-attachments/assets/b4511c67-f664-4efd-97eb-2a8cf8c23ef9



",npretto,2024-08-13 16:19:14+00:00,"['npretto', 'dpsutton']",2024-10-08 16:17:05+00:00,2024-08-20 12:28:40+00:00,https://github.com/metabase/metabase/pull/46783,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2286641283, 'issue_id': 2463735090, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 07c1e2549a9addf8113e6e1ab451e6e69db65d78...28701c92489806b0ebc6536a49b7a0eca46a6d73.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.styled.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/index.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts |', 'created_at': datetime.datetime(2024, 8, 13, 16, 20, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2298438288, 'issue_id': 2463735090, 'author': 'npretto', 'body': '> Do we need the grey outline around the toggle? We could remove that and just align the toggle left to the title. Minor thing anyway, looks good overall!\r\n\r\nI added it as per design here: https://www.figma.com/design/oJN6OncmdrWVXCU0ITQF6w/Reduce-the-number-of-choices-in-onboarding-flow?node-id=3614-6791&t=b5otAYE4AHFaXBnh-4', 'created_at': datetime.datetime(2024, 8, 20, 9, 46, 20, tzinfo=datetime.timezone.utc)}, {'comment_id': 2298484373, 'issue_id': 2463735090, 'author': 'AlessioLaiso', 'body': ""> I added it as per design here: https://www.figma.com/design/oJN6OncmdrWVXCU0ITQF6w/Reduce-the-number-of-choices-in-onboarding-flow?node-id=3614-6791&t=b5otAYE4AHFaXBnh-4\r\n\r\nI see üëÄ Let's leave this as it is."", 'created_at': datetime.datetime(2024, 8, 20, 10, 9, 12, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 16:20:40 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 07c1e2549a9addf8113e6e1ab451e6e69db65d78...28701c92489806b0ebc6536a49b7a0eca46a6d73.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/setup/components/CompletedStep/CompletedStep.styled.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.tsx<br>frontend/src/metabase/setup/components/CompletedStep/CompletedStep.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.styled.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/NewsletterForm.unit.spec.tsx<br>frontend/src/metabase/setup/components/NewsletterForm/index.ts<br>frontend/src/metabase/setup/tests/common.unit.spec.tsx<br>frontend/src/metabase/setup/utils.ts |

npretto (Issue Creator) on (2024-08-20 09:46:20 UTC): I added it as per design here: https://www.figma.com/design/oJN6OncmdrWVXCU0ITQF6w/Reduce-the-number-of-choices-in-onboarding-flow?node-id=3614-6791&t=b5otAYE4AHFaXBnh-4

AlessioLaiso on (2024-08-20 10:09:12 UTC): I see üëÄ Let's leave this as it is.

"
2463657415,pull_request,closed,,"ü§ñ backported ""Ellipsify long dashboard filter values (strings only)""","  #46073
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-13 15:38:50+00:00,"['kulyk', 'github-automation-metabase']",2024-08-14 11:28:45+00:00,2024-08-14 11:28:43+00:00,https://github.com/metabase/metabase/pull/46780,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2463592380,pull_request,closed,,Add workflow to run per test on pr by /perf command,"### Description

Add perf test launch over the PR by adding a `/perf` comment.",Onlinehead,2024-08-13 15:08:31+00:00,['Onlinehead'],2024-10-08 16:17:36+00:00,2024-08-14 12:04:46+00:00,https://github.com/metabase/metabase/pull/46779,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2286496423, 'issue_id': 2463592380, 'author': 'Onlinehead', 'body': '/perf', 'created_at': datetime.datetime(2024, 8, 13, 15, 11, 11, tzinfo=datetime.timezone.utc)}]","Onlinehead (Issue Creator) on (2024-08-13 15:11:11 UTC): /perf

"
2463588858,pull_request,closed,,"ü§ñ backported ""Speed up permissions migrations (round 2)""",#46393,github-automation-metabase,2024-08-13 15:07:02+00:00,"['johnswanson', 'github-automation-metabase']",2024-08-13 15:58:41+00:00,2024-08-13 15:58:40+00:00,https://github.com/metabase/metabase/pull/46778,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2463495842,pull_request,closed,,[FE] Allow multiple breakouts for a column,"Epic https://github.com/metabase/metabase/issues/46536

How to verify:
- New -> Question -> Orders
- Summarize -> Count
- Breakout -> Created At (Year) 
- Breakout -> Created At (Quarter of Year) 
- Visualize
- Summarize (button) -> You should be able to change temporal bucketing for individual columns
- Filter (button) -> You should be able to apply filters to individual columns

Please note that names of the columns can be duplicate sometimes. This is not great but we can improve it later **as long as the column itself works correctly**.
",ranquild,2024-08-13 14:25:50+00:00,['ranquild'],2024-10-08 16:15:39+00:00,2024-09-03 18:02:11+00:00,https://github.com/metabase/metabase/pull/46776,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2318842321, 'issue_id': 2463495842, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 9adbbb9a5734231ec04180ebec60e83675fe819d...c2dc11b1b48592e9327f412f1155440698a27fda.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx |', 'created_at': datetime.datetime(2024, 8, 29, 20, 1, 29, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-29 20:01:29 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 9adbbb9a5734231ec04180ebec60e83675fe819d...c2dc11b1b48592e9327f412f1155440698a27fda.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/settings/ChartSettingFieldsPartition.jsx |

"
2463416796,pull_request,closed,,[Manual Backport] Allow disabling encryption for settings (#43085),"* Allow disabling encryption for settings

For two settings, we want to disable encryption entirely.

On the way out of the data source, we don't need to worry - the decryption is already backwards-compatible with non-encrypted data.

On the way in, things are a bit less straightforward. The core of the change is replacing the `t2/deftransform` that *always* runs `encryption/maybe-encrypt` on the value with:

- a define-after-select that always tries to decrypt the value (so we can handle existing encrypted values in the db)

- a define-before-insert that encrypts the value if the `defsetting` told us to, and

- a define-before-update that does the same thing.

For now, set two settings to be never-encrypted: `analytics-uuid` and `anon-tracking-enabled`.
",johnswanson,2024-08-13 13:52:42+00:00,['johnswanson'],2024-08-15 12:15:59+00:00,2024-08-15 12:15:33+00:00,https://github.com/metabase/metabase/pull/46773,"[('.Team/AdminWebapp', 'Admin and Webapp team'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2463406783,pull_request,closed,,Update SDK version to 0.1.30,Update Readme version references and published npm package version to 0.1.30,github-automation-metabase,2024-08-13 13:49:21+00:00,"['heypoom', 'github-automation-metabase']",2024-10-08 16:17:48+00:00,2024-08-13 13:53:29+00:00,https://github.com/metabase/metabase/pull/46772,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2286307223, 'issue_id': 2463406783, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 13, 49, 42, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 13:49:42 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2463285655,pull_request,closed,,fix #46765 - Add dashboard filter popover does not close on click outside ,Closes #46765,oisincoveney,2024-08-13 12:53:27+00:00,['oisincoveney'],2024-08-14 10:10:36+00:00,2024-08-14 09:59:33+00:00,https://github.com/metabase/metabase/pull/46771,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2463266617,pull_request,closed,,ci: deduplicate e2e-tests clojure cache,"### Description

accordingly with cache size, we can reuse one more cache, so we drop e2e-tests in favor of uberjar

https://github.com/metabase/metabase/actions/caches

<img width=""683"" alt=""Screenshot 2024-08-13 at 23 29 10"" src=""https://github.com/user-attachments/assets/4c1bc8f5-5368-4c3d-aaa2-c2caffef5b56"">
<img width=""817"" alt=""Screenshot 2024-08-13 at 23 28 55"" src=""https://github.com/user-attachments/assets/b594ca4c-eebf-4740-b637-3c694c4947f0"">
",uladzimirdev,2024-08-13 12:44:34+00:00,['uladzimirdev'],2024-10-08 16:17:27+00:00,2024-08-15 10:03:59+00:00,https://github.com/metabase/metabase/pull/46770,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2463263270,pull_request,closed,,Fix exported png got different backgrounds based on screen density,"Reported in https://metaboat.slack.com/archives/C01LQQ2UW03/p1723219945676859

This is very hard to debug, but thanks to @npretto for finding the GitHub issue that contains [this work around](https://github.com/niklasvh/html2canvas/issues/2302#issuecomment-672846820).

### Description

It seems different screen with different density produce exports with different background colors.

### How to verify

Well, just use normal screen, mine was 1080p desktop monitor. You can't use a Macbook or an iPad for this as it doesn't show the bug.

Then export a dashboard card. You should see a beautiful white background export without weird grey/brown tint color.

### Demo
on an external screen

#### After
- ![line chart-8_13_2024, 7_46_05 PM](https://github.com/user-attachments/assets/733a93ff-c3e6-46ef-8910-23f9fed29efa)

Static embed
- [New dash (6).pdf](https://github.com/user-attachments/files/16600008/New.dash.6.pdf)
- [New dash (7).pdf](https://github.com/user-attachments/files/16600014/New.dash.7.pdf)
- ![line chart-8_13_2024, 8_02_54 PM](https://github.com/user-attachments/assets/dde4b427-4d32-48e7-932b-1dbcaf128279)
- ![line chart-8_13_2024, 8_03_00 PM](https://github.com/user-attachments/assets/b2d17f36-65a9-4a2f-827c-f701e8f814fb)


#### Before
- ![line chart-8_13_2024, 7_46_21 PM](https://github.com/user-attachments/assets/8c412dbf-05f1-4c13-8073-c0278c132a09)

Static embed

- [New dash (4).pdf](https://github.com/user-attachments/files/16599937/New.dash.4.pdf)
- [New dash (5).pdf](https://github.com/user-attachments/files/16599938/New.dash.5.pdf)
- ![line chart-8_13_2024, 7_59_01 PM](https://github.com/user-attachments/assets/88936d06-33ef-41ce-ad2a-4b83cd4fd405)
- ![line chart-8_13_2024, 7_59_05 PM](https://github.com/user-attachments/assets/a4718035-2fa0-4222-8abb-72e4f991c8ab)


### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~ Absolutely no idea how to automate this.
",WiNloSt,2024-08-13 12:43:06+00:00,['WiNloSt'],2024-08-14 07:49:05+00:00,2024-08-14 07:15:16+00:00,https://github.com/metabase/metabase/pull/46769,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]","[{'comment_id': 2286176077, 'issue_id': 2463263270, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 67644874f31b99d3c42eb1cb229ae7dddf86c6fc...be18813c981a785d8770f98600e6b7ea3bcd83ee.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/lib/save-chart-image.ts |', 'created_at': datetime.datetime(2024, 8, 13, 12, 44, 34, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 12:44:34 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 67644874f31b99d3c42eb1cb229ae7dddf86c6fc...be18813c981a785d8770f98600e6b7ea3bcd83ee.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/lib/save-chart-image.ts |

"
2463236437,pull_request,closed,,ci: restore default strategy for yarn cache,"### Description

It turned out that yarn cache is saved multiple times with the same name, so most likely last cache overrides previous and it breaks the whole idea of cache restoring. This PR enables ""default"" strategy of cache restoring",uladzimirdev,2024-08-13 12:30:16+00:00,['uladzimirdev'],2024-10-08 16:17:29+00:00,2024-08-14 21:42:13+00:00,https://github.com/metabase/metabase/pull/46768,"[('.Team/DevEx', '')]",[],
2463223074,pull_request,closed,,dx: handle CSP errors in pivot table,"Related to https://github.com/metabase/metabase/issues/45698

### Description

Pivot Table component uses `AutoSizer` which adds styles in runtime, that thing breaks CSP

### How to verify

open app in dev mode, go to the dashboard with a question with pivot table, make sure there is no CSP error
in devtools 

### Demo

### Before


https://github.com/user-attachments/assets/0cf5ec5c-cbd9-4f79-b572-3ebc5a37b768

### After


https://github.com/user-attachments/assets/f92971d2-124e-4349-a054-3d93856e13ee

",uladzimirdev,2024-08-13 12:24:08+00:00,['uladzimirdev'],2024-10-08 16:17:40+00:00,2024-08-14 09:53:37+00:00,https://github.com/metabase/metabase/pull/46766,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]","[{'comment_id': 2286129347, 'issue_id': 2463223074, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0ff6ef52245a3a4a9e5f798aba4433e03a8adac8...33d2ee05f3e707a0ef70adf70e1b37d4ffe413d9.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx |', 'created_at': datetime.datetime(2024, 8, 13, 12, 25, 39, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 12:25:39 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0ff6ef52245a3a4a9e5f798aba4433e03a8adac8...33d2ee05f3e707a0ef70adf70e1b37d4ffe413d9.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/visualizations/PivotTable/PivotTable.tsx |

"
2462946858,pull_request,closed,,"ü§ñ backported ""Repro #46756: Add/remove a single column in a model with tables joined by themselves adds/removes all columns""",#46757,github-automation-metabase,2024-08-13 10:06:16+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-14 00:24:51+00:00,2024-08-14 00:24:50+00:00,https://github.com/metabase/metabase/pull/46764,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2462908678,pull_request,closed,,"ü§ñ backported ""fix: get correct values from theme to fill css variables""","  #46740
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-13 09:47:57+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-13 11:40:56+00:00,2024-08-13 11:40:51+00:00,https://github.com/metabase/metabase/pull/46763,[],[],
2462754418,pull_request,closed,,Put a band-aid around flake with spec generator,"References https://github.com/metabase/metabase/issues/45747

### Description

This increases the number of attempts we make at generating the specs from 100 to 500.

Unfortunately given hard far down the stack the actual generation occurs, I wasn't able to find a way to adjust the parameter directly. For this reason I have simply added a an extra layer of retries at the top-level.",crisptrutski,2024-08-13 08:39:31+00:00,['crisptrutski'],2024-08-16 09:02:19+00:00,2024-08-16 08:08:10+00:00,https://github.com/metabase/metabase/pull/46762,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2462598097,pull_request,closed,,Fix conventional commit reminder,"This fixes the bug created by #46625. The problem was that the condition to check PR titles was removed unintentionally.

#### How to verify

Look at the following results. I added commits that would trigger the workflow.

This is now [skipped correctly](https://github.com/metabase/metabase/actions/runs/10365461023/job/28692631545?pr=46760).

And it will also still remind you if the title doesn't follow the convention
![image](https://github.com/user-attachments/assets/1eaa6096-5246-4156-913e-4f9ac5bd1689)
",WiNloSt,2024-08-13 07:25:06+00:00,['WiNloSt'],2024-10-08 16:17:51+00:00,2024-08-13 07:33:12+00:00,https://github.com/metabase/metabase/pull/46760,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2285543885, 'issue_id': 2462598097, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 7, 29, 30, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 07:29:30 UTC): <!---conventional commit reminder comment ID-->
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2462413730,pull_request,closed,,"ü§ñ backported ""Fix the distance between ""Field to map to"" and ""required""""",#46747,github-automation-metabase,2024-08-13 05:26:04+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-13 05:59:16+00:00,2024-08-13 05:59:15+00:00,https://github.com/metabase/metabase/pull/46759,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2462072139,pull_request,closed,,Repro #46756: Add/remove a single column in a model with tables joined by themselves adds/removes all columns,"### Description
This PR reproduces #46756 and updates the original repro for #41785. The original reproduction was using Orders table which has thousands of rows. We're now using the Products table as it has only 200 rows. It should be a bit less resource heavy.

We've expended the assertions to check, not only that the error is not there, but also that only one column is actually being unchecked.

The test currently fails at this assertion.
![image](https://github.com/user-attachments/assets/ebeac91b-afde-4240-809d-4403e50ad38d)
",nemanjaglumac,2024-08-12 23:40:54+00:00,['nemanjaglumac'],2024-08-14 00:25:26+00:00,2024-08-13 10:05:31+00:00,https://github.com/metabase/metabase/pull/46757,"[('.CI & Tests', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2462033878,pull_request,closed,,"ü§ñ backported ""Remove unnecessary api call from create collection form""",#46736,github-automation-metabase,2024-08-12 23:03:42+00:00,"['iethree', 'github-automation-metabase']",2024-08-12 23:39:47+00:00,2024-08-12 23:39:46+00:00,https://github.com/metabase/metabase/pull/46755,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2462020745,pull_request,closed,,fix clearing parameter value closes tab,"Closes https://github.com/metabase/metabase/issues/46570

### Description

The issue exists only in the `release-x.50.x` branch which is caused by https://github.com/metabase/metabase/pull/46473
When backporting the release branch version in the component did not have the `close` function definition so the backported code that used `close` called the global one. 

### How to verify & demo

Reproduction steps:
https://www.loom.com/share/47b97d3e78b64278ae4c3e8b0f2e15f0?sid=ba9cd4c7-a39f-4aed-baa1-55050df5f49e

After the fix:
https://www.loom.com/share/e280d4eadc234fe2a0853dcb0d3aba98?sid=3b420e35-8839-49aa-9fdb-803361be2e1f

### Checklist

- [x] Tests have been added/updated to cover changes in this PR ‚Äî Added an ESLint rule as Cypress does not support cross-tab testing
",alxnddr,2024-08-12 22:50:50+00:00,['alxnddr'],2024-08-12 23:23:32+00:00,2024-08-12 23:23:31+00:00,https://github.com/metabase/metabase/pull/46754,"[('.Team/DashViz', 'Dashboard and Viz team')]",[],
2462014662,pull_request,closed,,disallow close global function usage,"### Description

This PR disallows using global `close` function as is because sometimes it can lead to an issue when there was a legit local `close` function which got removed but the usages are left in the codebase since there is no any typescript error. This happened here https://github.com/metabase/metabase/issues/46570

",alxnddr,2024-08-12 22:44:23+00:00,['alxnddr'],2024-10-08 16:17:44+00:00,2024-08-13 22:08:03+00:00,https://github.com/metabase/metabase/pull/46753,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2287005271, 'issue_id': 2462014662, 'author': 'alxnddr', 'body': ""> Let's backport this üôè\r\n\r\nI included the ESLint config update right into the PR so it should be fine without backporting"", 'created_at': datetime.datetime(2024, 8, 13, 19, 45, 53, tzinfo=datetime.timezone.utc)}]","alxnddr (Issue Creator) on (2024-08-13 19:45:53 UTC): I included the ESLint config update right into the PR so it should be fine without backporting

"
2461977891,pull_request,closed,,Remove unnecessary calls to `/api/collection`,"Closes https://github.com/metabase/metabase/issues/46695

### Description

Removes the remaining calls to very slow endpoint: `/api/collection` in the app, and removes one of the hooks that calls it. We were using this endpoint to find the ""Custom Reports"" collection for enterprise instances when a user would save a modified instance analytics question, our copy and save modals would default to this collection.

1. Creates a new hook: `useGetDefaultCollectionId` in enterprise and OSS flavors
2. The enterprise hook just calls the the endpoint that tells us the id of the custom reports collection, and returns it if the source question is in the instance analytics collection, instead of fetching all collections and searching through them for the custom reports collection
3. **Bonus bugfix**: checks whether the user has write permissions to the custom reports collection before suggesting it as a save target

### How to verify

On an EE instance:

User Type | Scenario | Suggested Collection
--|--|--
ee admin | copying an instance analytics dashboard | Custom Reports
ee admin | copying an instance analytics question | Custom Reports
ee admin | copying a regular dashboard | the parent collection of that dashboard
ee admin | copying a regular question | the parent collection of that question
ee admin | creating a new question |  Our Analytics
ee admin | creating a new dashboard | Our Analytics
ee limited user with curate access to custom reports  | copying an instance analytics dashboard | Custom Reports
ee limited user with curate access to custom reports | copying an instance analytics question | Custom Reports
ee limited user with view access to custom reports  | copying an instance analytics dashboard | Our analytics
ee limited user with view access to custom reports | copying an instance analytics question | Our analytics
ee limited user | creating a new question |  Our Analytics
ee limited user | creating a new dashboard | Our Analytics

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-08-12 22:11:16+00:00,['iethree'],2024-08-19 14:48:55+00:00,2024-08-19 14:48:54+00:00,https://github.com/metabase/metabase/pull/46752,"[('.Performance', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2461942795,pull_request,closed,,"WIP, playing around with collection perms","I took a bit of time to explore the possibility of adding collection perms to just play with the problem space and see what we're likely to run into. For example, I'd been concerned that we'd have issues with the NULL ids of the root collection(s!) - but in practice I think we can work around that pretty easily.

In this commit, which could either turn into something real or just be a throwaway exploratory thing, I:

- added a migration to populate the `collection_permissions` table, similar to the `data_permissions` table. One weird bit is that `collection_id` needs to be nullable - sadly - due to the fact that we need to express whether you have permissions on the root collection(s) (yeah, there are multiple - we have a root collection, and a root ""snippets"" collection). I want to check the performance of these migrations with large numbers of collections/groups, but hopefully this should be less of an issue than for data permissions.

- added a way to replace calls to `collection/permissions-set->visible-collection-ids`, which performs poorly with large numbers of IDs, with calls to
`collection-permissions/honeysql-filter-clause`. This takes a user-id and a ""configuration"" object (API isn't perfect, could use some work) and returns a HoneySQL clause appropriate for use in a `WHERE` clause. It supports all the same knobs as
`permissions-set->visible-collection-ids`, so you can still get archived/unarchived/both, trash (or not), a particular trash operation ID, or different permissions levels, etc. (Also, I tried creating 40,000 collections and running `(t2/select :model/Dashboard {:where [...]})` and the original version takes 2.3s, while this version takes 89ms, a 26x speedup - and with a few more collections the original version would stop working entirely as we're passing too many parameters to the query).

- used the new function *almost* everywhere we previously called `permissions-set->visible-collection-ids`

Still todo is:

- replacing the normal calls to `mi/can-read?` and `mi/can-write?` with equivalent checks using the `collection-permission` table. This needs some thought too - previously these calls were ""free"" because they were calculated in memory. We can do this in the new world too, of course, but that brings us back to a world where we're loading all the collection IDs you have permission on into memory... but I think it's still a big improvement.

- effective children calculations still use the old method, as there are some complex bits that I need to work into the new model.

- writes need to go to the new table instead of `:model/Permissions`

Actually as I write this, I wonder whether there's an alternative where we read/write `:model/CollectionPermissions` to the DB, but still calculate `*current-user-permissions-set*` (based on that) to be equivalent, so we don't need to change existing permissions code - might be a good path forward.
",johnswanson,2024-08-12 21:41:06+00:00,['johnswanson'],2025-02-04 15:11:04+00:00,2024-08-21 12:32:55+00:00,https://github.com/metabase/metabase/pull/46751,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2461853177,pull_request,closed,,skip some troubleshooting stats when hosted,"resolves #46580

When the app is hosted, we should remove `""system-info""`, and `""metabase-info.application-database-details""`.

The other fields seem like they could be helpful for troubleshooting so we left them in.


# Before (and when you are Not Hosted):

<img width=""790"" alt=""Screenshot 2024-08-12 at 3 20 47‚ÄØPM"" src=""https://github.com/user-attachments/assets/aa092538-76c4-4a09-8714-330f03d0ba48"">


# After (when you are Hosted):

<img width=""1090"" alt=""Screenshot 2024-08-12 at 4 05 59‚ÄØPM"" src=""https://github.com/user-attachments/assets/75d9b2af-d25f-4548-a1ce-6821e9935fa1"">


",escherize,2024-08-12 20:39:31+00:00,['escherize'],2024-08-15 19:16:20+00:00,2024-08-15 19:16:18+00:00,https://github.com/metabase/metabase/pull/46749,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2461839658,pull_request,closed,,Add appleby to team.json and github-slack-map.json,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

### Description

Add myself to .github/team.json and release/github-slack-map.json.

### How to verify

N/A

### Demo

N/A

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",appleby,2024-08-12 20:31:17+00:00,['appleby'],2024-10-08 16:17:57+00:00,2024-08-12 20:45:05+00:00,https://github.com/metabase/metabase/pull/46748,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2461787744,pull_request,closed,,"Fix the distance between ""Field to map to"" and ""required""","Closes #46724

### Description

This PR fixes the CSS regression described in #46724. I checked the version 49.14 where the space between these two words was 0.5rem.

I used this opportunity to replace the styled component with Mantine's `Text`.

### How to verify

1. New sql query
2. `select * from orders where {{ foo }}`
3. Set foo as the field filter but do not map it to any table
4. There should be a distance between ""Field to map to"" and ""(required)""

### Demo

**Before**
<img width=""975"" alt=""image"" src=""https://github.com/user-attachments/assets/4b4aca58-5b3a-4831-b400-52f275889543"">

**After**
<img width=""977"" alt=""image"" src=""https://github.com/user-attachments/assets/6c11bf74-9469-485b-bbe9-9ddf57760333"">

### Checklist
- [ ] Tests have been added/updated to cover changes in this PR
",nemanjaglumac,2024-08-12 19:58:38+00:00,['nemanjaglumac'],2024-08-13 07:14:26+00:00,2024-08-13 05:25:20+00:00,https://github.com/metabase/metabase/pull/46747,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2461759067,pull_request,closed,,"ü§ñ backported ""Show loading state while fetching data in a new model page""",#46694,github-automation-metabase,2024-08-12 19:40:42+00:00,"['nemanjaglumac', 'github-automation-metabase']",2024-08-14 16:13:19+00:00,2024-08-14 16:13:19+00:00,https://github.com/metabase/metabase/pull/46746,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2461754948,pull_request,closed,,[WIP] Show QP error messages in dashboards,,ranquild,2024-08-12 19:38:27+00:00,['ranquild'],2024-08-13 00:45:56+00:00,2024-08-13 00:45:53+00:00,https://github.com/metabase/metabase/pull/46745,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2461684018,pull_request,closed,,test: Update embedding state mocks,"This PR updates the embedding state mocks (helpers).

It exports `createMockEmbedOptions` that forces a user to explicitly pass the options but it also makes it available to mock `isEmbeddingSdk`, which wasn't possible before.",nemanjaglumac,2024-08-12 18:56:13+00:00,['nemanjaglumac'],2024-10-08 16:17:56+00:00,2024-08-12 22:52:35+00:00,https://github.com/metabase/metabase/pull/46744,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2461538354,pull_request,closed,,Prevent opening data source in a new tab for embedding SDK,"### Description
This PR prevents opening data source links from a notebook in an embedding SDK scenario. It is a part of the Milestone 4 of https://github.com/metabase/metabase/issues/46201.

### How to verify
- Run embedding SDK instance.
- Open notebook editor
- Make sure meta/ctrl or middle click do not open the data source in a new tab

Run provided unit tests.

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",nemanjaglumac,2024-08-12 17:25:46+00:00,['nemanjaglumac'],2024-10-08 16:17:55+00:00,2024-08-13 05:24:42+00:00,https://github.com/metabase/metabase/pull/46743,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2461494343,pull_request,closed,,"ü§ñ backported ""Add Timeseries insights even when Custom Columns exist""",#46253,github-automation-metabase,2024-08-12 17:01:23+00:00,"['adam-james-v', 'github-automation-metabase']",2024-08-15 20:57:01+00:00,2024-08-15 20:56:59+00:00,https://github.com/metabase/metabase/pull/46742,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2461459702,pull_request,closed,,fix: get correct values from theme to fill css variables,"### Description

Fixes background color of the dashcards after https://github.com/metabase/metabase/pull/46660

### How to verify

go to any dashboard with dashcards, make sure background of the cards is white

### Demo

### Before
<img width=""1293"" alt=""Screenshot 2024-08-12 at 19 43 55"" src=""https://github.com/user-attachments/assets/992aa182-0852-4a21-bcdd-150f468030d3"">

### After

<img width=""1291"" alt=""Screenshot 2024-08-12 at 19 44 15"" src=""https://github.com/user-attachments/assets/93d14b0a-eac7-46f2-b17a-6f8e932027b4"">




### Checklist


- [x] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-08-12 16:41:46+00:00,['uladzimirdev'],2024-10-08 16:17:50+00:00,2024-08-13 09:47:07+00:00,https://github.com/metabase/metabase/pull/46740,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2461451091,pull_request,closed,,fix(sdk): always pull the latest image in the cli,"Fixes https://github.com/metabase/metabase/issues/46738

Check https://docs.docker.com/reference/cli/docker/container/run/#pull",paoliniluis,2024-08-12 16:36:42+00:00,['paoliniluis'],2024-08-13 07:13:23+00:00,2024-08-13 07:12:35+00:00,https://github.com/metabase/metabase/pull/46739,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2284466745, 'issue_id': 2461451091, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@paoliniluis You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 12, 16, 37, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285512751, 'issue_id': 2461451091, 'author': 'heypoom', 'body': 'PS. We can change the tag from "":latest"" to another tag later @NevRA, once we have that tag.', 'created_at': datetime.datetime(2024, 8, 13, 7, 13, 22, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-12 16:37:00 UTC): <!---conventional commit reminder comment ID-->
@paoliniluis You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

heypoom on (2024-08-13 07:13:22 UTC): PS. We can change the tag from "":latest"" to another tag later @NevRA, once we have that tag.

"
2461387442,pull_request,closed,,"fix(sdk): make sure generated password has at least one number, one u‚Ä¶","
Using the sdk CI I ran into the issue where the user creation failed because the password was too common (??) which looking at the password seemed unlikely, but it was only characters without numbers so I thought that was the reason.

It's unlikely to happen, but from what I've seen it looks like this error requires the user to start the process again from the start so I did this little change to make it less likely to happen",npretto,2024-08-12 16:03:17+00:00,['npretto'],2024-10-08 16:17:53+00:00,2024-08-13 07:04:21+00:00,https://github.com/metabase/metabase/pull/46737,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2284365798, 'issue_id': 2461387442, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 12, 16, 3, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285495065, 'issue_id': 2461387442, 'author': 'heypoom', 'body': 'Merging this as this helps unblock the CLI, thanks @npretto!', 'created_at': datetime.datetime(2024, 8, 13, 7, 4, 16, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-12 16:03:38 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

heypoom on (2024-08-13 07:04:16 UTC): Merging this as this helps unblock the CLI, thanks @npretto!

"
2461371558,pull_request,closed,,Remove unnecessary api call from create collection form,"
part of https://github.com/metabase/metabase/issues/46695

### Description

Our authority level selection component was unnecessarily calling the very slow `/api/collection` endpoint any time an enterprise admin opened the ""Create Collection"" modal.

![Screen Shot 2024-08-12 at 9 52 33 AM](https://github.com/user-attachments/assets/83635242-d948-4b2e-a812-b2ac144a6fae)

.  | .
-- | --
Before |  ![Screen Shot 2024-08-12 at 9 50 29 AM](https://github.com/user-attachments/assets/51a195e2-0e09-47b0-b8bd-6fceacc0f514)
After | ![Screen Shot 2024-08-12 at 9 47 47 AM](https://github.com/user-attachments/assets/03db759a-ab79-410d-bfc6-d80a6cff52ab)

### How to verify

As an EE admin:

1. Click ""create new collection""
2. Don't see any api calls to `/api/collection`


",iethree,2024-08-12 15:55:53+00:00,['iethree'],2024-08-12 23:40:15+00:00,2024-08-12 23:02:55+00:00,https://github.com/metabase/metabase/pull/46736,"[('.Performance', ''), ('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2461357161,pull_request,closed,,Fix false negatives for query reference validation,"### Description

This PR should fix two issues that could lead to cards with issues not showing up in the query validation tool:

1. We were not picking up issues with table-only references (e.g. `SELECT COUNT(*) FROM unknown_table`)
2. Healthy field references could ""mask"" issues with other fields on a given query.

While this update should fix the issue, it comes at the cost of far less scalable query. Perhaps there's a smart way to optimize this query still, otherwise we might want to consider denormalizing whether a table or field is active on the corresponding analysis rows.

Update: this now fixes a 3rd issue where we didn't de-duplicate table references properly for MBQL cards.",crisptrutski,2024-08-12 15:50:11+00:00,['crisptrutski'],2024-10-08 16:17:51+00:00,2024-08-13 08:29:55+00:00,https://github.com/metabase/metabase/pull/46735,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2285609564, 'issue_id': 2461357161, 'author': 'crisptrutski', 'body': 'The plan is to revisit the query more rigorously when we do some stress testing.', 'created_at': datetime.datetime(2024, 8, 13, 8, 1, 55, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-08-13 08:01:55 UTC): The plan is to revisit the query more rigorously when we do some stress testing.

"
2461342504,pull_request,closed,,Backport: Nicer error messages for linting migrations (#43667),,johnswanson,2024-08-12 15:43:47+00:00,['johnswanson'],2024-08-13 13:52:13+00:00,2024-08-13 13:51:45+00:00,https://github.com/metabase/metabase/pull/46734,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2461337062,pull_request,closed,,fix(sdk): increase setup timeout to 15s to avoid 'user already created' issue on retry,"I had the cli run into this error a few times: (console logs added by me to debug, they're not present on master)
<img width=""1165"" alt=""image"" src=""https://github.com/user-attachments/assets/debd1641-8b35-4fad-97f8-da5a4ff36d1b"">

I think it happened because the first request got killed by the timeout, but it still reached the BE so it created the user, the next retry will therefore fail because the endpoint cannot be used if a user already exists.

I also reduced the retries, I think we only needed the high number because of the issue solved with [fix(sdk): fix health endpoint in pollMetabaseInstance (+1 ‚àí1)](https://github.com/metabase/metabase/pull/46730) (ie: the cli started this tasks too early when the BE was unresponsive, so this step failed many times before succeeding).",npretto,2024-08-12 15:41:28+00:00,['npretto'],2024-08-13 07:09:43+00:00,2024-08-13 07:09:41+00:00,https://github.com/metabase/metabase/pull/46733,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2284316656, 'issue_id': 2461337062, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 12, 15, 41, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285505253, 'issue_id': 2461337062, 'author': 'heypoom', 'body': ""I'm merging this to unblock the CLI, thanks @npretto!"", 'created_at': datetime.datetime(2024, 8, 13, 7, 9, 14, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-12 15:41:48 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

heypoom on (2024-08-13 07:09:14 UTC): I'm merging this to unblock the CLI, thanks @npretto!

"
2461250483,pull_request,closed,,Allow getting non-model ancestors in search API,"Previously we had a `model_ancestors` flag that allowed you to retrieve the ancestors of the collection a ""thing"" was in, when you discovered it in search.

This expands this a little, allowing you to get the collection ancestors for any type of model you retrieve (assuming that makes sense).",johnswanson,2024-08-12 15:05:22+00:00,['johnswanson'],2025-02-04 15:11:03+00:00,2025-02-04 01:31:31+00:00,https://github.com/metabase/metabase/pull/46732,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2603450011, 'issue_id': 2461250483, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 23, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557763, 'issue_id': 2461250483, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 31, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:23 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:31 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2461235658,pull_request,closed,,"ü§ñ backported ""Dowload Row Limit Env Var""","  #46401
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-12 14:58:44+00:00,"['adam-james-v', 'github-automation-metabase']",2024-08-12 17:00:22+00:00,2024-08-12 17:00:20+00:00,https://github.com/metabase/metabase/pull/46731,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2461210437,pull_request,closed,,fix(sdk): fix health endpoint in pollMetabaseInstance,"The endpoint was missing the `/api` prefix, the backend replies to `/health` with 200 and some html even before the initialization has finished, causing the next step to fail.",npretto,2024-08-12 14:47:31+00:00,['npretto'],2024-10-08 16:17:53+00:00,2024-08-13 07:05:01+00:00,https://github.com/metabase/metabase/pull/46730,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2284189701, 'issue_id': 2461210437, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 12, 14, 47, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285496029, 'issue_id': 2461210437, 'author': 'heypoom', 'body': 'Merging this as this works great for me, thanks @npretto!', 'created_at': datetime.datetime(2024, 8, 13, 7, 4, 43, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-12 14:47:52 UTC): <!---conventional commit reminder comment ID-->
@npretto You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

heypoom on (2024-08-13 07:04:43 UTC): Merging this as this works great for me, thanks @npretto!

"
2461205441,pull_request,closed,,ci(manual backport): improve logic for searching commit that wasn't merged correctly,"### Description
[context](https://metaboat.slack.com/archives/C0669P4AF9N/p1722869078935519)

Covers a case when PR is not merged correctly (by squash & merge button, which adds (#PR_NUMBER) to the end of the string)

e.g. [this commit](https://github.com/metabase/metabase/commit/fab23e52bebe0ec0344edcf4ae1aa1bf3ec5411e)
doesn't have `(#46453)` in the end, but has a variant without `()`

### How to verify

probably only fork allows to test it, but permissions will not allow to go through the steps",uladzimirdev,2024-08-12 14:45:37+00:00,['uladzimirdev'],2024-08-14 21:29:25+00:00,2024-08-14 21:29:24+00:00,https://github.com/metabase/metabase/pull/46729,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2461165430,pull_request,closed,,Moving average with offset clause,"Closes https://github.com/metabase/metabase/issues/46669


### Description

Adds the option to calculate the x-period moving average or difference (absolute or %) vs the moving average in the `Compare to past` menu.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New Question -> Orders
2. Aggregation -> Count
3. Aggregation -> Compare to past
4. Select `Moving average`
5. Click `Done`
6. Moving average columns should be added to the query

### Demo


https://github.com/user-attachments/assets/860dc09e-3437-45dc-8c5c-cdf618f2b70a



### Checklist

- Unit test have been added, I will add e2e test for this feature in a follow up PR for https://github.com/metabase/metabase/issues/46531, since they will change considerably.
",romeovs,2024-08-12 14:29:43+00:00,['romeovs'],2024-08-14 13:42:02+00:00,2024-08-14 13:42:00+00:00,https://github.com/metabase/metabase/pull/46726,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2461132856,pull_request,closed,,"ü§ñ backported ""Refactor parameters filters utils to TS""",  #46719,github-automation-metabase,2024-08-12 14:16:39+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-08-13 07:53:46+00:00,2024-08-13 07:53:45+00:00,https://github.com/metabase/metabase/pull/46725,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2461110482,pull_request,closed,,Fix broken popover in Segments form,"Closes https://github.com/metabase/metabase/issues/46714

### Description

Fixes #46714 by ensuring that the segment date picker isn't prematurely closed when trying to access the `Starting from` or `include (period)` options in the relative datepicker. The issue occurs because the segment filter popover (located within the `GuiQueryEditor` component) uses the old `TippyPopover` component, which saw any clicks on the relative date picker's options popover as ""outside"" its catchment area. Therefore, it would close the popover and the user would lose their filter options.

I've also updated the `OperatorSelector` component to use the Mantine Select component, which also had the problem of being hidden behind the main filter popover. I've updated the component and converted it to a smaller TS component. No functionality should have changed.


### How to verify

_**Relative Date Picker**_
1. Go to /admin/datamodel/segment/create
2. Choose ""Orders""
3. Filter by ""Created At""
4. Choose ""Relative dates...""
5. Choose either ""Previous"" or ""Next"" (it doesn't matter)
6. Click on the ""ellipsis"" menu and try choosing ""Starting from""
7. The popover should not disappear after clicking on ""Starting from"" (or ""include today""). The filter should be applied as normal


_**Operator Selector**_
1. Go to /admin/datamodel/segment/create
2. Choose ""Orders""
3. Filter by ""Total""
4. Click on the operator selector (the popover with `Equal to`)
5. See that the menu opens in front of the popover

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [X] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-08-12 14:07:29+00:00,['oisincoveney'],2024-08-14 08:30:13+00:00,2024-08-14 08:30:11+00:00,https://github.com/metabase/metabase/pull/46723,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2285884756, 'issue_id': 2461110482, 'author': 'nemanjaglumac', 'body': ""Let's just stress test the new repro before merging, please."", 'created_at': datetime.datetime(2024, 8, 13, 10, 12, 42, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288157219, 'issue_id': 2461110482, 'author': 'oisincoveney', 'body': 'Stress tested with:\r\n- `datamodel.cy.spec`: https://github.com/metabase/metabase/actions/runs/10369779677\r\n- `admin-reproductions.cy.spec`: https://github.com/metabase/metabase/actions/runs/10368095258', 'created_at': datetime.datetime(2024, 8, 14, 8, 30, 6, tzinfo=datetime.timezone.utc)}]","nemanjaglumac on (2024-08-13 10:12:42 UTC): Let's just stress test the new repro before merging, please.

oisincoveney (Issue Creator) on (2024-08-14 08:30:06 UTC): Stress tested with:
- `datamodel.cy.spec`: https://github.com/metabase/metabase/actions/runs/10369779677
- `admin-reproductions.cy.spec`: https://github.com/metabase/metabase/actions/runs/10368095258

"
2461100717,pull_request,closed,,Manual backport 46160,"Relates to https://github.com/metabase/metabase/pull/46255

Backport CORS headers to support Embedding SDK features in v50",deniskaber,2024-08-12 14:03:35+00:00,['deniskaber'],2024-08-13 15:29:15+00:00,2024-08-13 15:28:50+00:00,https://github.com/metabase/metabase/pull/46722,"[('was-backported', 'apply this to PRs that are themselves backports'), ('Embedding/SDK', 'Embedding SDK for React')]",[],
2460998218,pull_request,closed,,Move filter utils to metabase-lib so they can be reused,"Part of #46519

Depends on #46719

### Description

I left comments inline.

### How to verify

CI is green.",kamilmielnik,2024-08-12 13:22:38+00:00,['kamilmielnik'],2024-08-13 07:16:46+00:00,2024-08-13 07:16:43+00:00,https://github.com/metabase/metabase/pull/46721,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]","[{'comment_id': 2285518942, 'issue_id': 2460998218, 'author': 'kamilmielnik', 'body': ""> Can we move it to `metabase/querying/utils`? We already share filter logic this way\r\n\r\nNot if we want to reuse it in `metabase-lib/v1` (because of [import restrictions](https://github.com/metabase/metabase/blob/9839606a1bdeb6d2680f69a590b957ddb05432fd/frontend/src/metabase-lib/.eslintrc#L3-L27)).\r\n\r\nI'll try to find another way."", 'created_at': datetime.datetime(2024, 8, 13, 7, 16, 43, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-08-13 07:16:43 UTC): Not if we want to reuse it in `metabase-lib/v1` (because of [import restrictions](https://github.com/metabase/metabase/blob/9839606a1bdeb6d2680f69a590b957ddb05432fd/frontend/src/metabase-lib/.eslintrc#L3-L27)).

I'll try to find another way.

"
2460993545,pull_request,closed,,"ü§ñ backported ""[serdes] convert database, card and dashboard with friends to using spec""","  #46147
",github-automation-metabase,2024-08-12 13:20:52+00:00,"['piranha', 'github-automation-metabase']",2024-08-14 06:58:15+00:00,2024-08-14 06:58:13+00:00,https://github.com/metabase/metabase/pull/46720,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2460936728,pull_request,closed,,Refactor parameters filters utils to TS,"Part of #46519

### Description

I plan to add more utils to `frontend/src/metabase-lib/v1/parameters/utils/filters.js` in scope of #46519, so it had to be converted to TS first.


### How to verify

CI is green.",kamilmielnik,2024-08-12 12:57:47+00:00,['kamilmielnik'],2024-08-13 07:54:13+00:00,2024-08-12 14:15:49+00:00,https://github.com/metabase/metabase/pull/46719,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2460926298,pull_request,closed,,Improve test coverage around query_table,I lost my confidence that we're handling these cases as expected. Luckily we were.,crisptrutski,2024-08-12 12:53:29+00:00,['crisptrutski'],2024-10-08 16:18:00+00:00,2024-08-12 13:41:54+00:00,https://github.com/metabase/metabase/pull/46718,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2460861663,pull_request,closed,,"ü§ñ backported ""44723 human readable coercion strategies""",#46347,github-automation-metabase,2024-08-12 12:27:38+00:00,"['npfitz', 'github-automation-metabase']",2024-08-12 15:53:16+00:00,2024-08-12 15:53:15+00:00,https://github.com/metabase/metabase/pull/46717,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2460826355,pull_request,closed,,ci: move flaky specs to jail,"### Description

Both tests are failing in stress test. IDK is it an overhead of video recording and/or cypress-terminal-report, but to unblock other PRs let's move these two into flaky group
[stress test 1](https://github.com/metabase/metabase/actions/runs/10352409218/job/28652958428)
[stress test 2](https://github.com/metabase/metabase/actions/runs/10352413916/job/28652973624)

UPD:
- failed even before video recording has been enabled https://github.com/metabase/metabase/actions/runs/10352877105/job/28654453104",uladzimirdev,2024-08-12 12:10:50+00:00,['uladzimirdev'],2024-10-08 16:17:59+00:00,2024-08-12 14:19:12+00:00,https://github.com/metabase/metabase/pull/46715,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2460749120,pull_request,closed,,"ü§ñ backported ""refactor: replace lodash with alternatives and forbid its usage""","  #46660
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-12 11:32:36+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-12 11:39:27+00:00,2024-08-12 11:39:23+00:00,https://github.com/metabase/metabase/pull/46713,[],[],
2460748960,pull_request,closed,,[Notification] Disallow undefined key for http channel details,"- Make the schema for http details a closed schema
- Add a new key `fe-form-type` with 3 possible values: `basic, bearer, api-key`. This is used on FE to display the form properly",qnkhuat,2024-08-12 11:32:31+00:00,['qnkhuat'],2024-08-13 14:17:30+00:00,2024-08-13 14:17:27+00:00,https://github.com/metabase/metabase/pull/46712,"[('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2284656297, 'issue_id': 2460748960, 'author': 'npfitz', 'body': 'We may also need to include a ""none"" option', 'created_at': datetime.datetime(2024, 8, 12, 18, 27, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285258366, 'issue_id': 2460748960, 'author': 'qnkhuat', 'body': 'added ""none""', 'created_at': datetime.datetime(2024, 8, 13, 3, 10, tzinfo=datetime.timezone.utc)}]","npfitz on (2024-08-12 18:27:06 UTC): We may also need to include a ""none"" option

qnkhuat (Issue Creator) on (2024-08-13 03:10:00 UTC): added ""none""

"
2460659659,pull_request,closed,,Backport openapi improvements,"Needed to backport error skipping :)

Backport of #44239 ",piranha,2024-08-12 10:49:41+00:00,['piranha'],2024-08-12 15:09:13+00:00,2024-08-12 15:09:11+00:00,https://github.com/metabase/metabase/pull/46711,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2460518629,pull_request,closed,,"ü§ñ backported ""[serdes] ability to skip errors""","Backport of  #46591

Needs #46711",github-automation-metabase,2024-08-12 09:47:26+00:00,"['piranha', 'github-automation-metabase']",2024-08-12 17:51:26+00:00,2024-08-12 17:51:25+00:00,https://github.com/metabase/metabase/pull/46709,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2460503118,pull_request,closed,,add bundle size action,"Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

This action will print a comment with bundle diff size and reject a PR with a huge diff, but to test it properly we have to merge it to master

https://github.com/andresz1/size-limit-action

### How to verify

- merge to master
- create a new PR where you add some new dependency (e.g. lodash)
- verify that comment from action appeared on the PR

### Demo

not at the moment
",uladzimirdev,2024-08-12 09:39:49+00:00,['uladzimirdev'],2024-08-21 20:46:25+00:00,2024-08-21 20:46:23+00:00,https://github.com/metabase/metabase/pull/46708,"[('.Team/DevEx', ''), ('Run-perf', 'Run performance test over PR')]",[],
2460246368,pull_request,closed,,dx: get rid of csp error from cljs devtool,"### Description

Followup of https://github.com/metabase/metabase/issues/45698.

Removes CSP error from cljs devtool.

[the author of shadow-cljs released a new version with a ""fix""](https://github.com/thheller/shadow-cljs/discussions/1199#discussioncomment-10295057) 

### How to verify

open app in dev mode, reload the page - verify that console doesn't have CSP errors anymore

### Demo

### Before

https://github.com/user-attachments/assets/21b7dc44-ab1f-4920-a3d4-c9d3fdd2c22a


### After

https://github.com/user-attachments/assets/b3d061ae-c8b2-4848-92de-8f934cc60fd9


",uladzimirdev,2024-08-12 07:31:19+00:00,['uladzimirdev'],2024-10-08 16:18:01+00:00,2024-08-12 13:30:58+00:00,https://github.com/metabase/metabase/pull/46705,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DevEx', '')]",[],
2459969203,pull_request,closed,,Record field usage (again),"Quote [Braden](https://github.com/metabase/metabase/issues/45537#issuecomment-2228500487)
> For the near term like v51, I think the grouper change to make this a background batch job instead of linking it to the query processing is sufficient to make this acceptably fast.

We disabled it in https://github.com/metabase/metabase/pull/45536
Closes https://github.com/metabase/metabase/issues/45537


### Perf test
The query
<img width=""955"" alt=""Screenshot 2024-08-12 at 16 55 33"" src=""https://github.com/user-attachments/assets/91961c01-b7ba-46e1-8465-04d951420031"">
The command
`siege --concurrent=15 --time=180s --header=""Cookie: $ADMIN"" ""http://localhost:3000/api/card/112/query POST""`

**Without field usage tracking**
Transactions:                  19830 hits
Availability:                 100.00 %
Elapsed time:                 180.23 secs
Data transferred:              93.97 MB
Response time:                  0.14 secs
Transaction rate:             110.03 trans/sec
Throughput:                     0.52 MB/sec
Concurrency:                   14.99
Successful transactions:       19830
Failed transactions:               0
Longest transaction:            0.34
Shortest transaction:           0.06

**batch = 20**
Transactions:                  19737 hits
Availability:                 100.00 %
Elapsed time:                 180.02 secs
Data transferred:              93.53 MB
Response time:                  0.14 secs
Transaction rate:             109.64 trans/sec
Throughput:                     0.52 MB/sec
Concurrency:                   14.99
Successful transactions:       19737
Failed transactions:               0
Longest transaction:            0.35
Shortest transaction:           0.06

**batch = 50**
Transactions:                  19783 hits
Availability:                 100.00 %
Elapsed time:                 180.77 secs
Data transferred:              93.75 MB
Response time:                  0.14 secs
Transaction rate:             109.44 trans/sec
Throughput:                     0.52 MB/sec
Concurrency:                   14.99
Successful transactions:       19783
Failed transactions:               0
Longest transaction:            0.93
Shortest transaction:           0.06",qnkhuat,2024-08-12 03:32:52+00:00,['qnkhuat'],2024-09-09 12:06:33+00:00,2024-08-29 04:20:52+00:00,https://github.com/metabase/metabase/pull/46704,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2287984767, 'issue_id': 2459969203, 'author': 'crisptrutski', 'body': ""The code looks sensible to me, but I'm very surprised that there was higher latency with a larger batch size. I know that group will immediately process the full batch on the publishing thread when it is full, which can explain the worst case responses getting worse, but I don't understand why the average latency would be worse as well with 50 versus 20. I think it's worth digging in and understanding this, because it could suggest that something is not working as expected.\r\n\r\nI also just wanted to check whether 50 was a typo for 500 in your stats, given that was the old value."", 'created_at': datetime.datetime(2024, 8, 14, 6, 52, 8, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288416486, 'issue_id': 2459969203, 'author': 'qnkhuat', 'body': 'ok so I tested again, this time I test each configuration 3 times and the results are quite consistent, updated the description with the new result.\r\n\r\nI think the first time I test this, the result for batch = 50 probably got interleaved with a sync process or sth. \r\nWith the new result, batch = 50 even shows a better result, maybe we should use it as default ?\r\n\r\n<details>\r\n<summary>Keeping the old result in this comment for historical reasons</summary>\r\nWithout field usage tracking\r\n\r\nTransactions: 15978 hits\r\nAvailability: 100.00 %\r\nElapsed time: 180.66 secs\r\nData transferred: 74.93 MB\r\nResponse time: 0.17 secs\r\nTransaction rate: 88.44 trans/sec\r\nThroughput: 0.41 MB/sec\r\nConcurrency: 14.99\r\nSuccessful transactions: 15978\r\nFailed transactions: 0\r\nLongest transaction: 1.72\r\nShortest transaction: 0.06\r\n\r\nTracking enabled (batch = 20)\r\n\r\nTransactions: 15861 hits\r\nAvailability: 100.00 %\r\nElapsed time: 180.90 secs\r\nData transferred: 74.38 MB\r\nResponse time: 0.17 secs\r\nTransaction rate: 87.68 trans/sec\r\nThroughput: 0.41 MB/sec\r\nConcurrency: 14.99\r\nSuccessful transactions: 15861\r\nFailed transactions: 0\r\nLongest transaction: 1.48\r\nShortest transaction: 0.06\r\n\r\ntracking enabled(batch = 50)\r\nTransactions: 14031 hits\r\nAvailability: 100.00 %\r\nElapsed time: 180.25 secs\r\nData transferred: 65.80 MB\r\nResponse time: 0.19 secs\r\nTransaction rate: 77.84 trans/sec\r\nThroughput: 0.37 MB/sec\r\nConcurrency: 14.99\r\nSuccessful transactions: 14031\r\nFailed transactions: 0\r\nLongest transaction: 2.23\r\nShortest transaction: 0.06\r\n\r\n</detail>', 'created_at': datetime.datetime(2024, 8, 14, 10, 40, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2306415852, 'issue_id': 2459969203, 'author': 'crisptrutski', 'body': '> ok so I tested again, this time I test each configuration 3 times and the results are quite consistent, updated the description with the new result.\r\n> \r\n> I think the first time I test this, the result for batch = 50 probably got interleaved with a sync process or sth. With the new result, batch = 50 even shows a better result, maybe we should use it as default ?\r\n> Keeping the old result in this comment for historical reasons\r\n> Without field usage tracking\r\n\r\nIt looks like 20 and 50 are basically the same in most ways, except the tail latency for the latter is much higher, which makes sense if the main thread has to preemptively execute the whole queue. Keep it at 20 I think.', 'created_at': datetime.datetime(2024, 8, 23, 6, 53, 25, tzinfo=datetime.timezone.utc)}]","crisptrutski on (2024-08-14 06:52:08 UTC): The code looks sensible to me, but I'm very surprised that there was higher latency with a larger batch size. I know that group will immediately process the full batch on the publishing thread when it is full, which can explain the worst case responses getting worse, but I don't understand why the average latency would be worse as well with 50 versus 20. I think it's worth digging in and understanding this, because it could suggest that something is not working as expected.

I also just wanted to check whether 50 was a typo for 500 in your stats, given that was the old value.

qnkhuat (Issue Creator) on (2024-08-14 10:40:35 UTC): ok so I tested again, this time I test each configuration 3 times and the results are quite consistent, updated the description with the new result.

I think the first time I test this, the result for batch = 50 probably got interleaved with a sync process or sth. 
With the new result, batch = 50 even shows a better result, maybe we should use it as default ?

<details>
<summary>Keeping the old result in this comment for historical reasons</summary>
Without field usage tracking

Transactions: 15978 hits
Availability: 100.00 %
Elapsed time: 180.66 secs
Data transferred: 74.93 MB
Response time: 0.17 secs
Transaction rate: 88.44 trans/sec
Throughput: 0.41 MB/sec
Concurrency: 14.99
Successful transactions: 15978
Failed transactions: 0
Longest transaction: 1.72
Shortest transaction: 0.06

Tracking enabled (batch = 20)

Transactions: 15861 hits
Availability: 100.00 %
Elapsed time: 180.90 secs
Data transferred: 74.38 MB
Response time: 0.17 secs
Transaction rate: 87.68 trans/sec
Throughput: 0.41 MB/sec
Concurrency: 14.99
Successful transactions: 15861
Failed transactions: 0
Longest transaction: 1.48
Shortest transaction: 0.06

tracking enabled(batch = 50)
Transactions: 14031 hits
Availability: 100.00 %
Elapsed time: 180.25 secs
Data transferred: 65.80 MB
Response time: 0.19 secs
Transaction rate: 77.84 trans/sec
Throughput: 0.37 MB/sec
Concurrency: 14.99
Successful transactions: 14031
Failed transactions: 0
Longest transaction: 2.23
Shortest transaction: 0.06

</detail>

crisptrutski on (2024-08-23 06:53:25 UTC): It looks like 20 and 50 are basically the same in most ways, except the tail latency for the latter is much higher, which makes sense if the main thread has to preemptively execute the whole queue. Keep it at 20 I think.

"
2459720199,pull_request,closed,,Fix relative date options popover placement,"Fixes #46342

### Description

The issue was present in the release branch, but not in `master`.
I realized that we've switched to using Mantine popover in `master`, while still using the old and deprecated `TippyPopover` in the release branch.

My original solution was to start using Mantine Popover in the release branch, too. But that led to failures in the dashboard parameters relative date filter. Applying that solution would've had a cascading effect and would require a lot of other, unrelated changes.

In the end, the solution was way simpler.
The problem is that the offset popover is still based on the old `TippyPopover` whose z-index is set to 4, while the relative date picker lives in a Mantine Popover whose z-index is 300.

I've just applied the Mantine z-index to the TippyPopover, and the stacking context took care of the rest.

### Demo
https://github.com/user-attachments/assets/6596124e-b0f6-4090-91e2-2685037c5d2c

### How to verify
Follow the repro steps from the issue or run the E2E repro from this PR.

- [x] Tests have been added

### Stress-test
50/50 ‚úÖ https://github.com/metabase/metabase/actions/runs/10347967307",nemanjaglumac,2024-08-11 19:01:11+00:00,['nemanjaglumac'],2024-08-12 22:24:37+00:00,2024-08-12 22:24:36+00:00,https://github.com/metabase/metabase/pull/46702,"[('.Team/Querying', '')]",[],
2458919593,pull_request,closed,,"Update Props, descriptive names, units TableCell.styled.tsx","Ensured all props are correctly typed. Used more descriptive class names and component names. Replaced fixed units with relative units for padding. Added ARIA attributes and ensured color contrast meets accessibility standards. Added comments for components and functions.

> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Adjusted code for styling to add Props, changed the names to be more descriptive and make units not fixed.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",jmoore191,2024-08-10 05:45:21+00:00,[],2025-02-04 01:31:33+00:00,2025-02-04 01:31:33+00:00,https://github.com/metabase/metabase/pull/46699,"[('Stale', 'Stale PRs that will be auto-closed')]","[{'comment_id': 2603450031, 'issue_id': 2458919593, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 25, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557790, 'issue_id': 2458919593, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 32, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:25 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:32 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2458895953,pull_request,closed,,"ü§ñ backported ""Fix exports E2E flakes""","  #46690
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-10 04:40:12+00:00,"['alxnddr', 'github-automation-metabase']",2024-08-12 21:25:21+00:00,2024-08-12 21:25:20+00:00,https://github.com/metabase/metabase/pull/46698,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2458786319,pull_request,closed,,Show loading state while fetching data in a new model page,"Closes #44813

### Description

This PR introduces a Loader while the data `isFetching`

### How to verify

1. Throttle your network
2. Go to `http://localhost:3000/model/new`
3. You should briefly see a loading spinner before the notebook vs native model UI shows up

### Demo
https://github.com/user-attachments/assets/677404e3-a290-4179-8524-181b6658d2c4

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",nemanjaglumac,2024-08-09 23:23:21+00:00,['nemanjaglumac'],2024-08-12 19:39:50+00:00,2024-08-12 19:39:48+00:00,https://github.com/metabase/metabase/pull/46694,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2458635395,pull_request,closed,,46657 pulse edit migration,"Closes https://github.com/metabase/metabase/issues/46657

### Description
Migrates the `PulseEditChannel` and `RecipientPicker` components to functional and typed components. Also adds some tests around the recipient picker and fixes a bug that was probably causing incorrect events to be emitted to analytics

### How to verify
Green CI

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",npfitz,2024-08-09 20:36:23+00:00,['npfitz'],2024-08-14 19:41:08+00:00,2024-08-14 19:41:07+00:00,https://github.com/metabase/metabase/pull/46693,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2278723126, 'issue_id': 2458635395, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a97bdb25292e36a708b910932986d77b14ee1779...f4c75f5b52872506f192369cc2930e1209c1cf5d.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/SlackChannelField/SlackChannelField.tsx |', 'created_at': datetime.datetime(2024, 8, 9, 20, 37, 45, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 20:37:45 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff a97bdb25292e36a708b910932986d77b14ee1779...f4c75f5b52872506f192369cc2930e1209c1cf5d.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/sharing/components/AddEditSidebar/AddEditEmailSidebar.jsx<br>frontend/src/metabase/sharing/components/SlackChannelField/SlackChannelField.tsx |

"
2458574534,pull_request,closed,,"ü§ñ backported ""Export Formatting Correctness""",#46306,github-automation-metabase,2024-08-09 19:51:00+00:00,"['adam-james-v', 'github-automation-metabase']",2024-08-13 17:56:43+00:00,2024-08-13 17:56:42+00:00,https://github.com/metabase/metabase/pull/46692,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2458568252,pull_request,closed,,Expect broken field refs in filter drills,"Context https://metaboat.slack.com/archives/C01LQQ2UW03/p1721250484651969

When we cannot find the corresponding filterable column, we should not return the drill. Currently we return the drill with `{:column nil}` and the FE doesn't expect this.",ranquild,2024-08-09 19:47:06+00:00,['ranquild'],2024-10-08 16:17:44+00:00,2024-08-13 23:12:33+00:00,https://github.com/metabase/metabase/pull/46691,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2458533191,pull_request,closed,,Fix exports E2E flakes,"### Description

This PR fixes E2E flakes related to data export. We recently introduced an export status popup which hangs for a few seconds after a successful export until it gets closed automatically. In specs we need to close (or get it closed via a timeout) because it may cover elements that we want to click on further. The problem is that Cypress after downloading a file can hang an unpredictable amount of time so at the end we can't know whether the status popup is present or got closed already. Any attempts to close it are flaky so I changed it to waiting until it gets removed automatically.

Downloads specs stress tests:
- https://github.com/metabase/metabase/actions/runs/10328552618
- https://github.com/metabase/metabase/actions/runs/10328398897
- https://github.com/metabase/metabase/actions/runs/10328965922
",alxnddr,2024-08-09 19:22:01+00:00,['alxnddr'],2024-08-12 21:25:45+00:00,2024-08-10 04:39:25+00:00,https://github.com/metabase/metabase/pull/46690,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2458499513,pull_request,closed,,Enable zoom drill on questions based on questions,"Context https://metaboat.slack.com/archives/C01LQQ2UW03/p1722478398530239

How to verify:
- New -> Question -> Orders -> Save as Q1
- New -> Question -> Q1 -> Visualize
- You can click on any cell and then ""View details"" to open the object detail view
- Note that for FKs it works a bit differently but it's the same for tables
",ranquild,2024-08-09 18:58:07+00:00,['ranquild'],2024-10-15 22:32:15+00:00,2024-10-15 22:32:12+00:00,https://github.com/metabase/metabase/pull/46689,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2285160279, 'issue_id': 2458499513, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e10bf5f9502703f600b61114e76b554b4d348d6b...d3ead4f0fd336cd7ecb06b79eb40ba9d4ba007a2.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.unit.spec.tsx |', 'created_at': datetime.datetime(2024, 8, 13, 1, 12, 37, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 01:12:37 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e10bf5f9502703f600b61114e76b554b4d348d6b...d3ead4f0fd336cd7ecb06b79eb40ba9d4ba007a2.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.tsx<br>frontend/src/metabase/visualizations/components/ObjectDetail/ObjectDetailView.unit.spec.tsx |

"
2458396934,pull_request,closed,,Use the metric's source instead of the metric itself as base,"Fixes #46687
Fixes #46781",metamben,2024-08-09 17:51:48+00:00,['metamben'],2024-08-13 18:21:39+00:00,2024-08-13 18:21:38+00:00,https://github.com/metabase/metabase/pull/46688,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2286583004, 'issue_id': 2458396934, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 63295cefc6a4f4440a955e7ac99da41a0131907e...1d16c4b5a0a75b58169b2eda88b7f8f9ada440c1.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |', 'created_at': datetime.datetime(2024, 8, 13, 15, 50, 56, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 15:50:56 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 63295cefc6a4f4440a955e7ac99da41a0131907e...1d16c4b5a0a75b58169b2eda88b7f8f9ada440c1.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx |

"
2458376138,pull_request,closed,,Update SDK version to 0.1.29,Update Readme version references and published npm package version to 0.1.29,github-automation-metabase,2024-08-09 17:39:42+00:00,"['albertoperdomo', 'github-automation-metabase']",2024-10-08 16:18:07+00:00,2024-08-09 17:43:58+00:00,https://github.com/metabase/metabase/pull/46686,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2278429262, 'issue_id': 2458376138, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 17, 40, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 17:40:06 UTC): <!---conventional commit reminder comment ID-->
@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2458374339,pull_request,closed,,"ü§ñ backported ""fix(admin/performance): Ensure that the tab's title (e.g. Database caching) and 'Performance' are visible in document title""",#46602,github-automation-metabase,2024-08-09 17:38:26+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-13 18:31:26+00:00,2024-08-13 18:31:24+00:00,https://github.com/metabase/metabase/pull/46685,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2458313207,pull_request,closed,,Safely open in a new tab for a subpath scenario,"### Description

This PR introduces subpath-safe url helpers and fixes two features that were breaking if Metabase was deployed on a subpath.
1. Model links from `/browse/models`
2. Opening data source from notebook (#46201)

### How to verify

**Regular scenario**
Notebook
- check out this branch
- run your dev instance (oss or ee, doesn't matter)
- open any query in notebook view and cmd/ctrl click on a data source
- it should open in a new tab

Browse Models
- open `/browse/models`
- cmd/ctrl click on any listed model
- it should open in a new tab

**Subpath scenario**
_Prepare sub-path scenario_
Follow the instructions from this repo: https://github.com/iethree/metabase-subpath-proxy

Notebook
- open `localhost:9090/metabase` and then open any table in a notebook mode
- cmd/ctrl + click on the data source
- it should open correctly on a `localhost:9090/metabase/question#ey...` path

Browse Models
- open `localhost:9090/browse/models`
- cmd/ctrl click on any listed model
- it should open in a new tab on a sub path

### Demo
Notebook
https://github.com/user-attachments/assets/9a271387-08af-47c1-9406-067c31df977b

Browse Models
https://github.com/user-attachments/assets/e8c2439e-1b97-4ea9-9fe4-3b083f6df500

### Checklist
- [x] Tests have been added/updated to cover changes in this PR
",nemanjaglumac,2024-08-09 16:54:59+00:00,['nemanjaglumac'],2024-10-08 16:18:06+00:00,2024-08-09 22:17:19+00:00,https://github.com/metabase/metabase/pull/46684,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2458241830,pull_request,closed,,Fix tooltip style is mistakenly applied to popover,"Some reports:
- https://metaboat.slack.com/archives/C01LQQ2UW03/p1723217298588119
- https://metaboat.slack.com/archives/C01LQQ2UW03/p1723215108621859?thread_ts=1723168806.799189&cid=C01LQQ2UW03

### Description

After merging https://github.com/metabase/metabase/pull/46491, the tooltip style got unintentionally applied to Tippy Popover.

### How to verify

Visit any Tippy Popover components, or just run `yarn storybook` and look for `Component Compatibility` story.

### Demo
#### After
![Screenshot 2024-08-09 at 10 39 49‚ÄØPM](https://github.com/user-attachments/assets/56bafd66-53dc-4d90-bae3-5e4db4a00d07)

#### Before
![Screenshot 2024-08-09 at 10 39 15‚ÄØPM](https://github.com/user-attachments/assets/721b6c6b-3989-45a2-81fc-bda6eea3cde7)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-08-09 16:07:04+00:00,['WiNloSt'],2024-10-08 16:17:54+00:00,2024-08-13 06:41:20+00:00,https://github.com/metabase/metabase/pull/46683,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2458190333,pull_request,closed,,fix(sdk): Add location-specific provider for SDK,"Moves location logic from the general `InteractiveQuestion` context into a location-specific context called `InteractiveQuestionProviderWithLocation`. This provider will be used in all current applications, while the `InteractiveQuestionProvider` will be used for the `NewQuestion` component (and in the future, existing questions that are modified with the notebook).

I'm adding this because, for new Questions, I wasn't able to make things work with the current location logic. Using `Question.create()` and hashing the card for the existing provider, there were multiple issues with the card not syncing with notebook editor, and the question context not staying in sync with the save modal either. I felt this was the most logical way to make things work without any huge hacks.",oisincoveney,2024-08-09 15:37:51+00:00,['oisincoveney'],2024-10-08 16:18:04+00:00,2024-08-12 08:19:40+00:00,https://github.com/metabase/metabase/pull/46681,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2278227363, 'issue_id': 2458190333, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 15, 38, 11, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 15:38:11 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2457900040,pull_request,closed,,"ü§ñ backported ""dx: get rid of most of CSP errors in dev mode""","  #46666
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-09 13:15:36+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-12 07:42:22+00:00,2024-08-12 07:41:49+00:00,https://github.com/metabase/metabase/pull/46679,[],"[{'comment_id': 2283298582, 'issue_id': 2457900040, 'author': 'uladzimirdev', 'body': 'No need to backport it as we develop 90% of time in master branch', 'created_at': datetime.datetime(2024, 8, 12, 7, 42, 21, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Assginee) on (2024-08-12 07:42:21 UTC): No need to backport it as we develop 90% of time in master branch

"
2457879330,pull_request,closed,,Include function name in generated lambda name when using malli/defn,"This is a QOL change that makes functions defined via `mu/defn` distinguishable in stack traces and profiles. E.g., the profile before:

<img width=""874"" alt=""image"" src=""https://github.com/user-attachments/assets/a2ae0759-ba2b-48cc-b5cb-e5510816571a"">

After:

<img width=""862"" alt=""image"" src=""https://github.com/user-attachments/assets/2bf5a4e7-8f94-40d6-96e7-58c43d2e9b29"">",alexander-yakushev,2024-08-09 13:05:31+00:00,['alexander-yakushev'],2024-10-08 16:18:08+00:00,2024-08-09 17:16:49+00:00,https://github.com/metabase/metabase/pull/46678,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2457848695,pull_request,closed,,Convert UpdateAlertModalContent to ts,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-08-09 12:49:05+00:00,['oisincoveney'],2024-08-12 09:44:45+00:00,2024-08-12 09:44:45+00:00,https://github.com/metabase/metabase/pull/46677,"[('.Team/Embedding', '')]","[{'comment_id': 2278093358, 'issue_id': 2457848695, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 14, 34, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278095621, 'issue_id': 2457848695, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 69e011853d1f514792a8bd26eb4aab5d553f6215...b9a34ab2db798b3414a7dc9a5817ed35f426ad48.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 9, 14, 35, 58, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 14:34:55 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-08-09 14:35:58 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 69e011853d1f514792a8bd26eb4aab5d553f6215...b9a34ab2db798b3414a7dc9a5817ed35f426ad48.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx |

"
2457848484,pull_request,closed,,Convert CreateAlertModalContent to TS,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",oisincoveney,2024-08-09 12:48:57+00:00,['oisincoveney'],2024-08-12 09:44:50+00:00,2024-08-12 09:44:50+00:00,https://github.com/metabase/metabase/pull/46676,"[('.Team/Embedding', '')]",[],
2457793133,pull_request,closed,,perf: Remove redundant fetching of field values during DB sync,"During DB sync, `get-latest-full-field-values` is called twice for each field ‚Äì¬†once in `update-field-values-for-field!` and in `create-or-update-full-field-values!`. The suggested change simply passes the fetched values from one function to another. I also refactored the interface of `create-or-update-full-field-values!` to use kwargs because it already took one optional argument.",alexander-yakushev,2024-08-09 12:17:35+00:00,['alexander-yakushev'],2024-10-08 16:17:10+00:00,2024-08-19 20:16:34+00:00,https://github.com/metabase/metabase/pull/46674,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2292033146, 'issue_id': 2457793133, 'author': 'alexander-yakushev', 'body': 'Any reservations about this one? It seemed pretty straightforward to me but I might be missing something.', 'created_at': datetime.datetime(2024, 8, 15, 19, 20, 5, tzinfo=datetime.timezone.utc)}]","alexander-yakushev (Issue Creator) on (2024-08-15 19:20:05 UTC): Any reservations about this one? It seemed pretty straightforward to me but I might be missing something.

"
2457768618,pull_request,closed,,perf: Use database-id instead of database object in memoizing calls to driver/supports?,"When testing locally, I've noticed that the memorized calls to `metabase.driver.util/supports?*` are very often recomputed even if invoked against the same database. This can be explained by the fact that the whole `database` object is used for memorization, and that object seems to change often in some unrelated fields. The diff between two database objects returns something like this:

```clj
--- Contents:
  0. {:lib/methods {:escape-alias #function[clojure.core/partial/fn--5908]}}
  1. {:lib/methods {:escape-alias #function[clojure.core/partial/fn--5908]}}
```

The proposed change caches the calls to `supports?*` based on the unique database identifier rather than the whole object. This:
1. Drastically improves cache hit rate.
2. Significantly improves the performance of cache hits since hashing and equality of full `database` maps was costly.",alexander-yakushev,2024-08-09 12:03:18+00:00,['alexander-yakushev'],2024-10-08 16:18:05+00:00,2024-08-10 07:05:30+00:00,https://github.com/metabase/metabase/pull/46673,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2278039729, 'issue_id': 2457768618, 'author': 'piranha', 'body': 'Is there a reason to not change `memoize-for-application-db` so it affects everything using it?', 'created_at': datetime.datetime(2024, 8, 9, 14, 10, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278044676, 'issue_id': 2457768618, 'author': 'alexander-yakushev', 'body': ""`memoize-for-application-db` is more generic, it doesn't assume anything about the arguments of the function it memorizes. I also see that it is used to wrap different functions, including those that don't receive `database` argument at all."", 'created_at': datetime.datetime(2024, 8, 9, 14, 13, 6, tzinfo=datetime.timezone.utc)}]","piranha on (2024-08-09 14:10:48 UTC): Is there a reason to not change `memoize-for-application-db` so it affects everything using it?

alexander-yakushev (Issue Creator) on (2024-08-09 14:13:06 UTC): `memoize-for-application-db` is more generic, it doesn't assume anything about the arguments of the function it memorizes. I also see that it is used to wrap different functions, including those that don't receive `database` argument at all.

"
2457560482,pull_request,closed,,FE - Allow to use in dashboard filters both pre- and post- last aggregation columns,"Closes #46522
Closes #46915

### Description

This PR makes it possible to choose pre- and post- last aggregation columns in the UI (in both dashcard filter and click behavior mappings):
- This PR is targeted against an integration branch
- More tests will follow




### How to verify

To check integration with BE changes: `git merge origin/mblib-dashboard-filters-multiple-stage`

---

For any question (or model or metric), it should be possible to map dashboard filters (and click behavior when target destination is a saved question) to the same set of columns as the filter modal in chill mode shows for a given question (depending on dashboard filter type though). Drilling through a question with filter applied should work

Example:

1. New > Question > Custom column > Aggregate > Breakout > Custom column
2. Save and add to dashboard
3. Edit dashboard
4. It should be possible to map columns created by aggregations, breakouts, and custom column to dashboard filters (but column type and filter type need to match)
5. Create a parameter and mapping, save dashboard
6. Set parameter value
7. Click question title to drill through to it. Verify that filter is applied.

### Demo

Questions/Models used in the demo are the same as in unit tests (`createComplex1StageQuery` and `createComplex2StageQuery`).

https://github.com/user-attachments/assets/699bfb2d-695d-405d-ab33-129c3c0ba1e2


",kamilmielnik,2024-08-09 09:58:07+00:00,['kamilmielnik'],2024-08-23 07:40:35+00:00,2024-08-23 07:40:33+00:00,https://github.com/metabase/metabase/pull/46670,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2287985910, 'issue_id': 2457560482, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b3c72d9cece8c22a8e6c785b54f49b8ecde4232e...af72b8d805c2485c8a5b4de155687526bc52ef55.\n\nNo notifications.', 'created_at': datetime.datetime(2024, 8, 14, 6, 52, 59, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-14 06:52:59 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff b3c72d9cece8c22a8e6c785b54f49b8ecde4232e...af72b8d805c2485c8a5b4de155687526bc52ef55.

No notifications.

"
2457138664,pull_request,closed,,dx: get rid of most of CSP errors in dev mode,"Closes https://github.com/metabase/metabase/issues/45698

### Description

Get rid of CSP errors.

There are at least 3 reasons of CSP errors in dev mode:
1. `TableInteractive` component used `EmotionCacheProvider` without `ThemeProvider` to measure sizes, so `ThemeProvider` created its own cache, which didn't know about `nonce`
2. `mantine` -> `react-remove-scroll` uses `get-nonce` to get nonce from the [passed webpack variable](https://webpack.js.org/guides/csp/#examples), but we don't know `nonce` when the server starts, so we needed to set nonce manually for that lib.
3. `shadow-cljs` package, it puts a script without nonce into DOM and I didn't find a way to specify one. I hope @bshepherdson will be able to help with it. Meanwhile, I [started discussion](https://github.com/thheller/shadow-cljs/discussions/1199)


### How to verify

open app in a dev mode, go to any question with table interactive - there shouldn't be any error

### Before


https://github.com/user-attachments/assets/38a0ba29-1390-4af3-9c98-eeaf318c9cdf



### After
https://github.com/user-attachments/assets/4fc5b668-4d95-4cb1-afbe-15dae3d3197d
",uladzimirdev,2024-08-09 05:33:48+00:00,['uladzimirdev'],2024-08-09 13:14:51+00:00,2024-08-09 13:14:49+00:00,https://github.com/metabase/metabase/pull/46666,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', ''), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2277184657, 'issue_id': 2457138664, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5884d5706b06cb45d952aa3172a12a8000b7d88...91f4811d5d3480cc4ea95c5b8da4ad7e2c9cdf8a.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 9, 5, 35, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2277643509, 'issue_id': 2457138664, 'author': 'github-actions[bot]', 'body': 'üëã Deploying a preview environment for commit 91f4811d5d3480cc4ea95c5b8da4ad7e2c9cdf8a.\n‚úÖ Preview:\n    https://pr46666.coredev.metabase.com\nüóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 8, 9, 10, 28, 27, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 05:35:16 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff d5884d5706b06cb45d952aa3172a12a8000b7d88...91f4811d5d3480cc4ea95c5b8da4ad7e2c9cdf8a.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.jsx<br>frontend/src/metabase/visualizations/components/TableInteractive/TableInteractive.styled.tsx |

github-actions[bot] on (2024-08-09 10:28:27 UTC): üëã Deploying a preview environment for commit 91f4811d5d3480cc4ea95c5b8da4ad7e2c9cdf8a.
‚úÖ Preview:
    https://pr46666.coredev.metabase.com
üóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2456893010,pull_request,closed,,"ü§ñ backported ""Last Used Param Value doesn't fill in with default value if cleared""",#46468,github-automation-metabase,2024-08-09 00:45:25+00:00,"['adam-james-v', 'github-automation-metabase']",2024-08-09 02:05:10+00:00,2024-08-09 02:05:09+00:00,https://github.com/metabase/metabase/pull/46665,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2456826837,pull_request,closed,,Migrate CacheConfigAPI to RTK,Closes #42635,rafpaf,2024-08-08 23:21:50+00:00,['rafpaf'],2025-02-04 01:31:35+00:00,2025-02-04 01:31:34+00:00,https://github.com/metabase/metabase/pull/46664,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2276872473, 'issue_id': 2456826837, 'author': 'rafpaf', 'body': '* **#46664** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46664?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 8, 23, 22, 9, tzinfo=datetime.timezone.utc)}, {'comment_id': 2603450050, 'issue_id': 2456826837, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 26, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557816, 'issue_id': 2456826837, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 34, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-08 23:22:09 UTC): * **#46664** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46664?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2025-01-21 01:31:26 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:34 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2456809607,pull_request,closed,,[Permissions] Add e2e test coverage for blocked permissions enforcements,"### Description

Adds test coverage for the blocked permissions enforcements at both the database and table level.

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",sloansparger,2024-08-08 23:08:23+00:00,['sloansparger'],2024-08-13 22:53:44+00:00,2024-08-13 22:53:43+00:00,https://github.com/metabase/metabase/pull/46663,"[('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2456710420,pull_request,closed,,"ü§ñ backported ""fix: uuid join conditions should not cast""","  #46614
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 22:06:26+00:00,"['snoe', 'github-automation-metabase']",2024-08-13 15:04:57+00:00,2024-08-13 15:04:55+00:00,https://github.com/metabase/metabase/pull/46662,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2456610380,pull_request,closed,,refactor: replace lodash with alternatives and forbid its usage,"### Description

Historically we decided to go with underscore and not lodash at some point, so we dropped it from the bundle several times, but it appeared again. 

Now we not only drop it, but also add a new eslint rule to forbid appearing of new packages which are not maintained/have a lighter alternative into bundle. More details on https://e18e.dev/guide/ 

### How to verify

- run `yarn && yarn build-release` and verify size of the vendor file

### Demo

### Example of eslint complain

<img width=""707"" alt=""image"" src=""https://github.com/user-attachments/assets/654cf01f-ce68-4a98-9304-6059a9212480"">



### After

<img width=""523"" alt=""image"" src=""https://github.com/user-attachments/assets/051436db-f621-400a-a5cb-ac1b49d95220"">


### Before

<img width=""528"" alt=""Screenshot 2024-08-09 at 16 41 27"" src=""https://github.com/user-attachments/assets/54674667-1cf9-42e6-9523-4584e1ecd1bd"">
",uladzimirdev,2024-08-08 20:56:35+00:00,['uladzimirdev'],2024-10-08 16:18:02+00:00,2024-08-12 11:31:48+00:00,https://github.com/metabase/metabase/pull/46660,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2277164668, 'issue_id': 2456610380, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 5, 11, 51, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 05:11:51 UTC): <!---conventional commit reminder comment ID-->
@uladzimirdev You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2456590382,pull_request,closed,,Log full version history in release log,Logging full commit history back to x.0-RC1,iethree,2024-08-08 20:41:28+00:00,['iethree'],2024-10-08 16:18:12+00:00,2024-08-08 22:10:40+00:00,https://github.com/metabase/metabase/pull/46659,"[('.Building & Releasing', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team')]",[],
2456487980,pull_request,closed,,"ü§ñ backported ""fix downloads e2e flakes""","  #46612
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 19:32:41+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-10 04:47:51+00:00,2024-08-10 04:47:48+00:00,https://github.com/metabase/metabase/pull/46655,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2279222007, 'issue_id': 2456487980, 'author': 'alxnddr', 'body': 'Closing in favor of https://github.com/metabase/metabase/pull/46698', 'created_at': datetime.datetime(2024, 8, 10, 4, 47, 48, tzinfo=datetime.timezone.utc)}]","alxnddr on (2024-08-10 04:47:48 UTC): Closing in favor of https://github.com/metabase/metabase/pull/46698

"
2456223981,pull_request,closed,,fix(sdk): optimistic update query builder and update questions in notebook,"Closes https://github.com/metabase/metabase/issues/46523

### Description

The notebook component in the current version of the SDK do not work at all - they do not integrate with how we update and run questions using the `updateQuestion` and `runQuestion` method from the `useLoadQuestion` hook. This PR adds support for updating and running questions with the notebook component.

It also fixes a couple of issues:

- We were always running the query on every question change, even when the change could be deferred.
- We only update the question after fetching the metadata and the query, so the UI feels super slow.

### How to verify

- Use the interactive question's notebook, filter, filter bar and summarize components.
- It should be as fast as the main Metabase app's query builder in terms of loading states, and number of network requests.

### Checklist

- Tests have been added/updated to cover changes in this PR - will open a separate PR, finding ways to ensure that optimistic updates are happening before the metadata is re-fetched
",heypoom,2024-08-08 16:42:46+00:00,['heypoom'],2024-08-14 13:12:40+00:00,2024-08-14 13:12:38+00:00,https://github.com/metabase/metabase/pull/46652,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2285520459, 'issue_id': 2456223981, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@heypoom You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 7, 17, 30, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285568119, 'issue_id': 2456223981, 'author': 'heypoom', 'body': ""@oisincoveney PS - I'm figuring out how to test the optimistic update behaviour, let me know if you have some ideas on this üôèüèª"", 'created_at': datetime.datetime(2024, 8, 13, 7, 41, 32, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-13 07:17:30 UTC): <!---conventional commit reminder comment ID-->
@heypoom You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

heypoom (Issue Creator) on (2024-08-13 07:41:32 UTC): @oisincoveney PS - I'm figuring out how to test the optimistic update behaviour, let me know if you have some ideas on this üôèüèª

"
2456180854,pull_request,closed,,Fix query analysis clean up and add logging,"### Description

Added more logging around background query analysis. Fix clean-up to delete the new parent node.",crisptrutski,2024-08-08 16:16:00+00:00,['crisptrutski'],2024-10-08 16:18:03+00:00,2024-08-12 09:49:44+00:00,https://github.com/metabase/metabase/pull/46651,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2456136953,pull_request,closed,,fix(sdk): Fix unmapped theme colors,"Closes https://github.com/metabase/metabase/issues/46648

### Description

Add missing color mappings for some of the new semantic colors

### How to verify

Follow the repro in #46648

### Demo

#### Before
![image](https://github.com/user-attachments/assets/7f81063c-ec57-45c3-910f-e192593ef94d)

#### After (move this into a PR description)
![image](https://github.com/user-attachments/assets/7591732c-7b7c-4788-a66a-8a031bfafe4b)


### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~
",WiNloSt,2024-08-08 15:51:15+00:00,[],2024-08-09 14:11:38+00:00,2024-08-09 14:11:37+00:00,https://github.com/metabase/metabase/pull/46650,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2276194603, 'issue_id': 2456136953, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 8, 16, 12, 27, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 16:12:27 UTC): <!---conventional commit reminder comment ID-->
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2456133594,pull_request,closed,,Split form component from `SaveQuestionModal`,This PR splits the form component from the `SaveQuestionModal` so we can use it for the SDK,oisincoveney,2024-08-08 15:49:26+00:00,['oisincoveney'],2024-10-08 16:18:09+00:00,2024-08-09 14:57:34+00:00,https://github.com/metabase/metabase/pull/46649,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2456058652,pull_request,closed,,Convert functional and small class components in `AlertModals` to TS,"Converts a bunch of the components in the `AlertModals` folder to typescript. I've basically taken all of the functional components + some of the class components that have 1 function + a `render` function, and converted those since they're quite easy. I'll convert the remaining 3-4 in separate PRs.

No functionality has changed so tests should still pass.",oisincoveney,2024-08-08 15:12:14+00:00,['oisincoveney'],2024-08-12 09:50:54+00:00,2024-08-12 09:50:54+00:00,https://github.com/metabase/metabase/pull/46647,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2278098055, 'issue_id': 2456058652, 'author': 'iethree', 'body': ""üòÖ oh dear, this creates pretty significant merge conflicts for me in #46593, where I'm completely reworking how Alert modals trigger and display.\r\n\r\nSee also: https://github.com/metabase/metabase/pull/46394"", 'created_at': datetime.datetime(2024, 8, 9, 14, 37, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278100778, 'issue_id': 2456058652, 'author': 'oisincoveney', 'body': ""> üòÖ oh dear, this creates pretty significant merge conflicts for me in #46593, where I'm completely reworking how Alert modals trigger and display\r\n\r\nI'm absolutely fine with closing this PR for now. It took me about 10 minutes to do"", 'created_at': datetime.datetime(2024, 8, 9, 14, 38, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278103989, 'issue_id': 2456058652, 'author': 'iethree', 'body': ""> > üòÖ oh dear, this creates pretty significant merge conflicts for me in #46593, where I'm completely reworking how Alert modals trigger and display\r\n> \r\n> I'm absolutely fine with closing this PR for now. It took me about 10 minutes to do\r\n\r\nOh wait, actually maybe i freaked out too fast, might not be a problem since you didn't touch the modal components, and I didn't touch anything inside."", 'created_at': datetime.datetime(2024, 8, 9, 14, 39, 57, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278106524, 'issue_id': 2456058652, 'author': 'oisincoveney', 'body': ""> > > üòÖ oh dear, this creates pretty significant merge conflicts for me in #46593, where I'm completely reworking how Alert modals trigger and display\r\n> > \r\n> > \r\n> > I'm absolutely fine with closing this PR for now. It took me about 10 minutes to do\r\n> \r\n> Oh wait, actually maybe i freaked out too fast, might not be a problem since you didn't touch the modal components, and I didn't touch anything inside.\r\n\r\nIt's good you caught me there, I was about to touch the modals. But in that case, I'll get this one merged and stop touching this area until you're done üòÑ"", 'created_at': datetime.datetime(2024, 8, 9, 14, 41, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2283537332, 'issue_id': 2456058652, 'author': 'oisincoveney', 'body': 'will close', 'created_at': datetime.datetime(2024, 8, 12, 9, 50, 54, tzinfo=datetime.timezone.utc)}]","iethree on (2024-08-09 14:37:06 UTC): üòÖ oh dear, this creates pretty significant merge conflicts for me in #46593, where I'm completely reworking how Alert modals trigger and display.

See also: https://github.com/metabase/metabase/pull/46394

oisincoveney (Issue Creator) on (2024-08-09 14:38:22 UTC): I'm absolutely fine with closing this PR for now. It took me about 10 minutes to do

iethree on (2024-08-09 14:39:57 UTC): Oh wait, actually maybe i freaked out too fast, might not be a problem since you didn't touch the modal components, and I didn't touch anything inside.

oisincoveney (Issue Creator) on (2024-08-09 14:41:10 UTC): It's good you caught me there, I was about to touch the modals. But in that case, I'll get this one merged and stop touching this area until you're done üòÑ

oisincoveney (Issue Creator) on (2024-08-12 09:50:54 UTC): will close

"
2456024739,pull_request,closed,,"ü§ñ backported ""45003 entity picker recents context""","  #46289
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 14:58:05+00:00,"['npfitz', 'github-automation-metabase']",2024-08-23 18:54:18+00:00,2024-08-23 18:54:17+00:00,https://github.com/metabase/metabase/pull/46645,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2307153965, 'issue_id': 2456024739, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2f1e1c368a76c344dec4be5c5dedbd48fc233499...3a59910796888745490f29187880d7303eb05c9b.\n\n| Notify | File(s) |\n|-|-|\n| @ranquild | frontend/src/metabase/timelines/common/components/MoveTimelineModal/MoveTimelineModal.tsx |', 'created_at': datetime.datetime(2024, 8, 23, 13, 56, 34, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-23 13:56:34 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 2f1e1c368a76c344dec4be5c5dedbd48fc233499...3a59910796888745490f29187880d7303eb05c9b.

| Notify | File(s) |
|-|-|
| @ranquild | frontend/src/metabase/timelines/common/components/MoveTimelineModal/MoveTimelineModal.tsx |

"
2455981680,pull_request,closed,,[WIP] [Integration] Allow multiple breakouts of the same column,Epic https://github.com/metabase/metabase/issues/46536,ranquild,2024-08-08 14:38:32+00:00,['ranquild'],2024-08-08 15:29:48+00:00,2024-08-08 15:29:46+00:00,https://github.com/metabase/metabase/pull/46643,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2455935256,pull_request,closed,,"ü§ñ backported ""ci: replace docker-compose and fix mba usage""",#46517,metabase-bot[bot],2024-08-08 14:19:18+00:00,['uladzimirdev'],2024-08-08 14:25:39+00:00,2024-08-08 14:25:38+00:00,https://github.com/metabase/metabase/pull/46641,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455932487,pull_request,closed,,"ü§ñ backported ""ci: replace docker-compose with docker compose""",#46517,github-automation-metabase,2024-08-08 14:18:07+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-08 14:24:45+00:00,2024-08-08 14:24:44+00:00,https://github.com/metabase/metabase/pull/46640,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455850453,pull_request,closed,,Style download result popover on dark theme,"This is a follow up to #46491. Reported [on Slack](https://metaboat.slack.com/archives/C063Q3F1HPF/p1723116490598469?thread_ts=1722869146.028559&cid=C063Q3F1HPF)

### Description

Style the download results popover in dark theme.

### How to verify

1. Go to a dashboard
1. Click sharing > Embed
1. Select Static embedding
1. Select Look and Feel tab
1. Select dark mode and click preview

### Demo

#### After
![Screenshot 2024-08-08 at 8 39 30‚ÄØPM](https://github.com/user-attachments/assets/30ea1a9e-5f5a-4046-8463-1f413b7920b7)

#### Before
![Screenshot 2024-08-08 at 8 39 41‚ÄØPM](https://github.com/user-attachments/assets/f2a46a4b-67a9-42bf-b382-4e0d7e3192a7)

### Checklist

- [ ] ~Tests have been added/updated to cover changes in this PR~ I used to try to add loki tests for this, no matter what, I couldn't get the dashboard action to show up in loki.
",WiNloSt,2024-08-08 13:42:31+00:00,['WiNloSt'],2024-10-08 16:18:16+00:00,2024-08-08 15:40:33+00:00,https://github.com/metabase/metabase/pull/46637,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]",[],
2455849883,pull_request,closed,,"ü§ñ backported ""Refactors `getScheduleText` to use `ts-pattern`""",#46627,github-automation-metabase,2024-08-08 13:42:16+00:00,"['oisincoveney', 'github-automation-metabase']",2024-08-08 14:01:14+00:00,2024-08-08 14:01:13+00:00,https://github.com/metabase/metabase/pull/46636,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2275911173, 'issue_id': 2455849883, 'author': 'oisincoveney', 'body': ""Closing since we don't seem to have `ts-pattern` in v50. At the very least the linter is complaining that it can't find the package"", 'created_at': datetime.datetime(2024, 8, 8, 14, 1, 13, tzinfo=datetime.timezone.utc)}]","oisincoveney (Assginee) on (2024-08-08 14:01:13 UTC): Closing since we don't seem to have `ts-pattern` in v50. At the very least the linter is complaining that it can't find the package

"
2455809172,pull_request,closed,,"ü§ñ backported ""FE - Cover Unit of Time in `getParameterColumns` with tests""",#46529,github-automation-metabase,2024-08-08 13:25:53+00:00,"['kamilmielnik', 'github-automation-metabase']",2024-08-08 14:32:13+00:00,2024-08-08 14:32:10+00:00,https://github.com/metabase/metabase/pull/46633,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2275982946, 'issue_id': 2455809172, 'author': 'kamilmielnik', 'body': 'It should not have been backported :facepalm:', 'created_at': datetime.datetime(2024, 8, 8, 14, 32, 10, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Assginee) on (2024-08-08 14:32:10 UTC): It should not have been backported :facepalm:

"
2455767422,pull_request,closed,,Convert Dashboard Header buttons to Mantine,"Converts the action buttons on the dashboard header to Mantine components. This will help the Embedding team use these components in a consistent and unified way in the future when styling the SDK. This PR unifies the styling and functionality across all dashboard actions.

No functionality or styling should have been changed (noticeably). So all tests, including visual ones, should continue to pass.


The commits are structured on a button-by-button basis. If you are interested in reviewing the code, you can go through each of the commits and see the changes that I made for each of the buttons. ",oisincoveney,2024-08-08 13:09:03+00:00,['oisincoveney'],2024-10-08 16:17:58+00:00,2024-08-12 16:23:28+00:00,https://github.com/metabase/metabase/pull/46632,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2283791409, 'issue_id': 2455767422, 'author': 'oisincoveney', 'body': '@iethree before i merge this, is it going to break every commit in your PR?', 'created_at': datetime.datetime(2024, 8, 12, 12, 5, 41, tzinfo=datetime.timezone.utc)}]","oisincoveney (Issue Creator) on (2024-08-12 12:05:41 UTC): @iethree before i merge this, is it going to break every commit in your PR?

"
2455757129,pull_request,closed,,Convert QueryBuilder action buttons to Mantine,"Converts the bottom right row of QueryBuilder buttons to Mantine. This will help unify styling and functionality for all of the buttons, and removes a lot of boilerplate code from styled components. 


Each commit has been done on a button-by-button and change-by-change basis. So if you would like to review this PR (thank you!) then feel free to go commit-by-commit. It's 10 files so it shouldn't be _too_ bad.",oisincoveney,2024-08-08 13:04:55+00:00,['oisincoveney'],2024-10-08 16:18:04+00:00,2024-08-12 08:20:21+00:00,https://github.com/metabase/metabase/pull/46631,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2275779954, 'issue_id': 2455757129, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff db5347d5e37573105cb6681e472314dee381b753...de7096ae6042451db231568f101e81ef69f225d9.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 8, 13, 6, 35, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 13:06:35 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff db5347d5e37573105cb6681e472314dee381b753...de7096ae6042451db231568f101e81ef69f225d9.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |

"
2455744331,pull_request,closed,,fix(browse): Reduce flakiness of one test,,rafpaf,2024-08-08 12:59:34+00:00,['rafpaf'],2024-08-20 21:19:36+00:00,2024-08-20 21:19:36+00:00,https://github.com/metabase/metabase/pull/46630,"[('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2275764844, 'issue_id': 2455744331, 'author': 'rafpaf', 'body': '* **#46630** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46630?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 8, 12, 59, 48, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-08 12:59:48 UTC): * **#46630** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46630?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2455618777,pull_request,closed,,"ü§ñ backported ""Split `AlertModals` into multiple files""","  #46376
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 12:01:08+00:00,"['oisincoveney', 'github-automation-metabase']",2024-08-08 14:37:51+00:00,2024-08-08 14:37:48+00:00,https://github.com/metabase/metabase/pull/46629,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455596164,pull_request,closed,,Add `ToolbarButton` to start replacing dashboard header buttons,Adds the `ToolbarButton` to the codebase so @iethree can start using it for the dashboard buttons. This PR will be followed up by a few PRs that split #45368 into more manageable/reviewable chunks.,oisincoveney,2024-08-08 11:49:10+00:00,['oisincoveney'],2024-10-08 16:18:17+00:00,2024-08-08 14:34:33+00:00,https://github.com/metabase/metabase/pull/46628,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2275629256, 'issue_id': 2455596164, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 448eaa0eed033dced0b5033d2deaf819c31a12e1...baf7ef9349ceea1b4f18b9b059e445b22017a238.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |', 'created_at': datetime.datetime(2024, 8, 8, 11, 50, 50, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 11:50:50 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 448eaa0eed033dced0b5033d2deaf819c31a12e1...baf7ef9349ceea1b4f18b9b059e445b22017a238.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |

"
2455583207,pull_request,closed,,Refactors `getScheduleText` to use `ts-pattern`,"Refactors `getScheduleText` in `AlertScheduleText` to use ts-pattern, and adds tests.

For the tests, I created them based on the old code and then converted the getScheduleText code 
to the new form, so hopefully there's no regressions on the first run.

All tests should continue to pass as normal",oisincoveney,2024-08-08 11:42:08+00:00,['oisincoveney'],2024-10-08 16:18:17+00:00,2024-08-08 13:41:31+00:00,https://github.com/metabase/metabase/pull/46627,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2455548575,pull_request,closed,,"ü§ñ backported ""Convert `AlertListPopoverContent` to TS""",#46413,github-automation-metabase,2024-08-08 11:23:04+00:00,"['oisincoveney', 'github-automation-metabase']",2024-08-08 16:39:47+00:00,2024-08-08 16:39:46+00:00,https://github.com/metabase/metabase/pull/46626,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455469845,pull_request,closed,,Fix spammy GitHub Actions comments,"Fix the issue where GitHub actions comment other from conventional commit reminder got overridden unexpectedly.

See the example of an unexpected comments overridden in [this PR](https://github.com/metabase/metabase/pull/46491).

The conventional commit reminder should only edit the commit made to remind conventional commit, not other workflows' comments.

#### How does this work.
If you see the first comment by Github Actions, that was actually a conventional commit reminder, but I modify it to look like other workflow's comment.
![image](https://github.com/user-attachments/assets/353b3c01-d2df-44a9-bdac-151727ded8d2)

After updating the PR, you can see that there is only another 1 comment from this workflow here
![image](https://github.com/user-attachments/assets/73b5bd1e-45a2-41d0-8204-bafbe048bd26)

And compared to the previous workflow, seems `updateComment` take into account the actual comment and will only update the comment if the actual comment has changed
![image](https://github.com/user-attachments/assets/237851eb-9ebd-42ac-881e-73c374478876)

You can see that there are a bunch of comments but there are only 2 in the comment history when I change the comment to something else.

The last change which revert the comment back doesn't get updated here, because I also remove the readme file which trigger this workflow.

This shows the workflow is working as expected.

",WiNloSt,2024-08-08 10:42:04+00:00,['WiNloSt'],2024-10-08 16:18:20+00:00,2024-08-08 11:56:42+00:00,https://github.com/metabase/metabase/pull/46625,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2275519343, 'issue_id': 2455469845, 'author': 'github-actions[bot]', 'body': 'mock another action comment', 'created_at': datetime.datetime(2024, 8, 8, 10, 48, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275521482, 'issue_id': 2455469845, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n  different comment\n@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 8, 10, 50, 9, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 10:48:53 UTC): mock another action comment

github-actions[bot] on (2024-08-08 10:50:09 UTC): <!---conventional commit reminder comment ID-->
  different comment
@WiNloSt You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2455465396,pull_request,closed,,Update SDK version to 0.1.28,Update Readme version references and published npm package version to 0.1.28,github-automation-metabase,2024-08-08 10:39:42+00:00,"['heypoom', 'github-automation-metabase']",2024-10-08 16:18:22+00:00,2024-08-08 10:43:57+00:00,https://github.com/metabase/metabase/pull/46624,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2275504130, 'issue_id': 2455465396, 'author': 'github-actions[bot]', 'body': '@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\n\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 8, 10, 40, 2, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 10:40:02 UTC): @github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.

Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2455456522,pull_request,closed,,"ü§ñ backported ""Fix oom during sync field values""","  #46524
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 10:35:00+00:00,"['qnkhuat', 'github-automation-metabase']",2024-08-12 14:03:23+00:00,2024-08-12 14:03:22+00:00,https://github.com/metabase/metabase/pull/46623,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455368144,pull_request,closed,,"ü§ñ backported ""Add useCreateQuestion and useSaveQuestion for SDK's `Create Question`""","  #46621
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-08 09:51:28+00:00,"['oisincoveney', 'github-automation-metabase']",2024-08-08 14:36:18+00:00,2024-08-08 14:36:16+00:00,https://github.com/metabase/metabase/pull/46622,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2455204183,pull_request,closed,,Add useCreateQuestion and useSaveQuestion for SDK's `Create Question`,"Moves the `handleSave` and `handleCreate` functions to hooks so we can use them in #46618. Since the SDK components don't use the query builder, this refactor allows us to use the same logic to keep creating/updating questions consistent across the two platforms.",oisincoveney,2024-08-08 08:33:41+00:00,['oisincoveney'],2024-08-08 14:36:43+00:00,2024-08-08 09:50:40+00:00,https://github.com/metabase/metabase/pull/46621,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Embedding', '')]",[],
2455177200,pull_request,closed,,MS2 follow up: add more unit tests for joins,"Even though I added fairly comprehensive E2E test for joins in #46582, this PR adds additional unit tests for [this project](https://github.com/metabase/metabase/issues/46201).

Depends on https://github.com/metabase/metabase/pull/46552.",nemanjaglumac,2024-08-08 08:19:45+00:00,['nemanjaglumac'],2024-10-08 16:18:14+00:00,2024-08-08 19:25:10+00:00,https://github.com/metabase/metabase/pull/46619,"[('.CI & Tests', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2455156572,pull_request,closed,,feat(sdk): Create Question,"**Creating a Question with the SDK**

Adds functionality to create a question with the SDK. The functionality (for now) lies within the tabbed interface of the `NewQuestion` component, where the user is provided with the notebook editor and the visualization, as well as the ability to save the question in their collections with the data picker.

A few things still to be added
- Ability to prevent users from choosing specific entities (follow-up PR)
- Prevent users from saving questions (follow-up PR)


_**Demo**_

https://github.com/user-attachments/assets/adcb16d2-9e33-4c0d-ba39-46041324d303

",oisincoveney,2024-08-08 08:09:09+00:00,['oisincoveney'],2024-10-08 16:17:22+00:00,2024-08-16 11:17:57+00:00,https://github.com/metabase/metabase/pull/46618,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2278171163, 'issue_id': 2455156572, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 15, 8, 19, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286288877, 'issue_id': 2455156572, 'author': 'WiNloSt', 'body': 'I assume there should be a readme change for the new component `NewQuestion`?', 'created_at': datetime.datetime(2024, 8, 13, 13, 42, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286336839, 'issue_id': 2455156572, 'author': 'WiNloSt', 'body': ""Refresh the page on `<NewQuestion />` leads to an unauthenticated error. \r\n![image](https://github.com/user-attachments/assets/0026c708-0e50-4889-96eb-1c61a96c5af7)\r\n\r\nBut if I go to another page first then back to this page, again I'd see the tables as expected.\r\n\r\n![image](https://github.com/user-attachments/assets/3ae946c8-d644-4cef-bf41-3f739df9231b)"", 'created_at': datetime.datetime(2024, 8, 13, 14, 2, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286369115, 'issue_id': 2455156572, 'author': 'WiNloSt', 'body': ""There should also be an ability to identify the root folder a user can access similar to how we're allowing to set the root collection for the collection browser, otherwise, users might be able to pollute the root collection."", 'created_at': datetime.datetime(2024, 8, 13, 14, 14, 48, tzinfo=datetime.timezone.utc)}, {'comment_id': 2291507181, 'issue_id': 2455156572, 'author': 'oisincoveney', 'body': ""hey @metabase/querying-components! Kelvin requested that you guys take a look at this to make sure we've done the ML part of this relatively correctly üòÑ would appreciate a look!"", 'created_at': datetime.datetime(2024, 8, 15, 15, 19, 2, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-09 15:08:19 UTC): <!---conventional commit reminder comment ID-->
@oisincoveney You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

WiNloSt on (2024-08-13 13:42:48 UTC): I assume there should be a readme change for the new component `NewQuestion`?

WiNloSt on (2024-08-13 14:02:02 UTC): Refresh the page on `<NewQuestion />` leads to an unauthenticated error. 
![image](https://github.com/user-attachments/assets/0026c708-0e50-4889-96eb-1c61a96c5af7)

But if I go to another page first then back to this page, again I'd see the tables as expected.

![image](https://github.com/user-attachments/assets/3ae946c8-d644-4cef-bf41-3f739df9231b)

WiNloSt on (2024-08-13 14:14:48 UTC): There should also be an ability to identify the root folder a user can access similar to how we're allowing to set the root collection for the collection browser, otherwise, users might be able to pollute the root collection.

oisincoveney (Issue Creator) on (2024-08-15 15:19:02 UTC): hey @metabase/querying-components! Kelvin requested that you guys take a look at this to make sure we've done the ML part of this relatively correctly üòÑ would appreciate a look!

"
2454957750,pull_request,closed,,"ü§ñ backported ""make series style settings tab first""",#46549,github-automation-metabase,2024-08-08 06:15:20+00:00,"['alxnddr', 'github-automation-metabase']",2024-08-08 06:48:30+00:00,2024-08-08 06:48:29+00:00,https://github.com/metabase/metabase/pull/46617,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2275034273, 'issue_id': 2454957750, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 753c50d7ba3030aec693fadb631f41467d2e6a28...d952032e4b7c63034e8e669ce0f21934fef87643.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.jsx |', 'created_at': datetime.datetime(2024, 8, 8, 6, 16, 45, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-08 06:16:45 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 753c50d7ba3030aec693fadb631f41467d2e6a28...d952032e4b7c63034e8e669ce0f21934fef87643.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.jsx |

"
2454871047,pull_request,closed,,"ü§ñ backported ""fix: Handle tokens in strings when parsing params""",#46547,github-automation-metabase,2024-08-08 04:58:01+00:00,"['snoe', 'github-automation-metabase']",2024-08-20 23:01:36+00:00,2024-08-20 23:01:35+00:00,https://github.com/metabase/metabase/pull/46616,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2454822341,pull_request,closed,,Speed up updating user parameter value,"3.a of https://github.com/metabase/metabase/issues/45780

- Add an index on user_parameter_value(parameter_id, user_id) -- with this alone I think we can reduce a lot of contention and avoid deadlock
- Reduce # of db calls to update user_param_value. We could get it down to 2 db calls if we want to, see this [comment](https://github.com/metabase/metabase/pull/46615#issuecomment-2274988705)
- Fix N+1 in :last_used_paramater_values hydration where N is # of dashboard (though I don't think we batched hydrate this anywhere)

Result of viewing the ecormece insights dashboard with 4 filters
![Screenshot 2024-08-14 at 11 09 46](https://github.com/user-attachments/assets/fa1e9671-4dc7-4ddb-8f46-1dd865829e04)

master: 333 DB calls
this branch: 316 db calls
",qnkhuat,2024-08-08 04:02:16+00:00,['qnkhuat'],2024-08-16 08:44:05+00:00,2024-08-15 07:35:15+00:00,https://github.com/metabase/metabase/pull/46615,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2274988705, 'issue_id': 2454822341, 'author': 'qnkhuat', 'body': ""There is another way to reduce the # db calls further to just 2 calls, which is by using insert on conflict.\r\nBut this requires adding a unique constraint on (user_id, dashboard_id, parameter_id) and I'm not sure we whether we should do that because we'll need to write another migration to delete the duplicated rows.\r\n\r\nI'll let the @metabase/admin-webapp and @dpsutton make the call here as their team developed this feature."", 'created_at': datetime.datetime(2024, 8, 8, 5, 35, 16, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285647172, 'issue_id': 2454822341, 'author': 'qnkhuat', 'body': ""@piranha I've updated to implement the suggestion I made [here](https://github.com/metabase/metabase/pull/46615#issuecomment-2274988705)"", 'created_at': datetime.datetime(2024, 8, 13, 8, 19, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2290782424, 'issue_id': 2454822341, 'author': 'qnkhuat', 'body': ""Unfortunately, adding the unique index will make it easy to hit race conditions if you have one filter connected to multiple parameters.\r\n\r\nI can reproduce easily with one param that connects to 3 cards. \r\nI think to fully resolve this we need to re-think our schema for user_parameter_value. For now I'll reverse the change to add the unique index."", 'created_at': datetime.datetime(2024, 8, 15, 7, 0, 33, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-08-08 05:35:16 UTC): There is another way to reduce the # db calls further to just 2 calls, which is by using insert on conflict.
But this requires adding a unique constraint on (user_id, dashboard_id, parameter_id) and I'm not sure we whether we should do that because we'll need to write another migration to delete the duplicated rows.

I'll let the @metabase/admin-webapp and @dpsutton make the call here as their team developed this feature.

qnkhuat (Issue Creator) on (2024-08-13 08:19:05 UTC): @piranha I've updated to implement the suggestion I made [here](https://github.com/metabase/metabase/pull/46615#issuecomment-2274988705)

qnkhuat (Issue Creator) on (2024-08-15 07:00:33 UTC): Unfortunately, adding the unique index will make it easy to hit race conditions if you have one filter connected to multiple parameters.

I can reproduce easily with one param that connects to 3 cards. 
I think to fully resolve this we need to re-think our schema for user_parameter_value. For now I'll reverse the change to add the unique index.

"
2454800452,pull_request,closed,,fix: uuid join conditions should not cast,"Fixes: #46558

In #45575 we introduced casting uuid fields for drilldowns.

However we failed to include a check that the rhs was itself another field of uuid type and so no casting should occur. This broke joins on models when the database_type of the field may not be known.
",snoe,2024-08-08 03:35:53+00:00,['snoe'],2024-08-08 22:05:41+00:00,2024-08-08 22:05:39+00:00,https://github.com/metabase/metabase/pull/46614,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2454522918,pull_request,closed,,Fix pie e2e flake,"Stress test:
https://github.com/metabase/metabase/actions/runs/10294814547

The flake is caused by unexpected behavior when the second command executes before the first one. The hover action repalces ""TOTAL"" text with the value of a slice. Even 100ms cy.wait did not help there.

```
    // 1
    cy.findByTestId(""query-visualization-root"").within(() => {
      cy.findByText(""TOTAL"");
    });
    
    // 2
    cy.findAllByTestId(""legend-item"").eq(0).realHover();
```",alxnddr,2024-08-07 23:41:18+00:00,['alxnddr'],2024-10-08 16:18:27+00:00,2024-08-08 02:29:20+00:00,https://github.com/metabase/metabase/pull/46613,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2454509519,pull_request,closed,,fix downloads e2e flakes,"Cypress may get stuck for a few seconds after downloading a file which happens frequently on dashboards. So the step that closed successfull download status failed because it gets hidden by a timeout sooner than Cypress gets unstuck.

Stress test:
https://github.com/metabase/metabase/actions/runs/10294844338",alxnddr,2024-08-07 23:27:18+00:00,['alxnddr'],2024-10-08 16:18:13+00:00,2024-08-08 19:31:54+00:00,https://github.com/metabase/metabase/pull/46612,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team')]",[],
2454465984,pull_request,closed,,Update Translations for v50.21,"Update translations from POEditor for v50.20

See [translation update documentation](https://www.notion.so/metabase/Process-for-updating-translations-421db70048fe400da1153ad0b61102f4)

## To Do

- [x] Upload new strings to POEditor
- [ ] Message contributors on POEditor (manual)
- [x] Copy source strings to english language (manual)
- [x] Download translations from POEditor (github action)
- [x] Merge this PR and backport to the release branch (manual)
",github-actions[bot],2024-08-07 22:37:01+00:00,"['dpsutton', 'iethree']",2024-11-22 16:40:19+00:00,2024-08-19 15:44:40+00:00,https://github.com/metabase/metabase/pull/46609,"[('Customization/i18n', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2454462576,pull_request,closed,,"ü§ñ backported ""bump loki tolerance""","  #46600
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 22:33:41+00:00,"['alxnddr', 'github-automation-metabase']",2024-08-08 00:47:44+00:00,2024-08-08 00:47:42+00:00,https://github.com/metabase/metabase/pull/46608,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2454443947,pull_request,closed,,allow re-ordering and re-naming pie chart slices,"Closes https://github.com/metabase/metabase/issues/9312
Closes https://github.com/metabase/metabase/issues/37145

### Description

Allows users to rename and reorder pie chart slices. This is achieved by adding two new viz settings, `pie.rows` and `pie.sort_rows`.

`pie.rows` is the source of truth for slice order, name, and color. `pie.sort_rows` is a boolean flag determining whether the slices should automatically be sorted in descending order by measure value. If the user ever re-orders the slices manually from the sidebar, this will be set to false, and their manual order will be respected.

Regarding the behavior when rows are added and removed from the query results, I've recorded a loom explaining that: https://www.loom.com/share/03cee849cfae46128c5d46e9a45e9d30?sid=de71a64b-a6f7-45cc-9af3-26a776b9e01c

### How to verify

1. Create a pie chart
2. Try reordering, renaming, and recoloring slices
3. Add more rows to query result (can do this through limiting rows)
4. Confirm slices for these rows were added to end of chart sensibly
5. Remove rows (e.g. through limiting), then re-add them. Confirm their settings were preserved.

### Demo

^ see loom linked above

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",EmmadUsmani,2024-08-07 22:16:24+00:00,['EmmadUsmani'],2024-08-29 15:57:39+00:00,2024-08-29 15:57:37+00:00,https://github.com/metabase/metabase/pull/46607,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/DashViz', 'Dashboard and Viz team')]","[{'comment_id': 2274442107, 'issue_id': 2454443947, 'author': 'EmmadUsmani', 'body': '* **#47208** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47208?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46607** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46607?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* **#46505** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46505?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* **#46466** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46466?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 7, 22, 16, 45, tzinfo=datetime.timezone.utc)}, {'comment_id': 2309195707, 'issue_id': 2454443947, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f49407fcbdf18f40e247437f41b3bbefd1e227bf...33f8ca3b198bd6e65b851f8f772ca3493749ece1.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedSimple.tsx<br>frontend/src/metabase/visualizations/echarts/pie/format.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/types.ts<br>frontend/src/metabase/visualizations/echarts/pie/option.ts<br>frontend/src/metabase/visualizations/lib/settings.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/warnings.js<br>frontend/src/metabase/visualizations/shared/settings/pie.ts<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts |', 'created_at': datetime.datetime(2024, 8, 26, 2, 47, 38, tzinfo=datetime.timezone.utc)}, {'comment_id': 2311341962, 'issue_id': 2454443947, 'author': 'EmmadUsmani', 'body': ""@alxnddr Thanks for the review! Regarding the second point, showing items that were grouped into other in the sidebar, I kept it this way since that was the behavior before, but I'm happy to change it if we think it'd be better to remove those now. Will ask on Slack tomorrow."", 'created_at': datetime.datetime(2024, 8, 27, 0, 30, 7, tzinfo=datetime.timezone.utc)}, {'comment_id': 2313919808, 'issue_id': 2454443947, 'author': 'EmmadUsmani', 'body': ""@alxnddr I've fixed the bug with slices with 0 dimension values not being draggable. Turns out this is a bug in dnd-kit https://github.com/clauderic/dnd-kit/issues/858. My workaround was to just make `PieRow.key` always a string. This is fine because number dimension values are only needed for formatting correctly, which we do separately on the raw dimension value itself and store under `PieRow.name`."", 'created_at': datetime.datetime(2024, 8, 28, 1, 39, 54, tzinfo=datetime.timezone.utc)}, {'comment_id': 2316112599, 'issue_id': 2454443947, 'author': 'EmmadUsmani', 'body': '@alxnddr Other slices are now hidden from sidebar as well\r\n\r\nhttps://github.com/user-attachments/assets/d4767245-5fe9-4921-85c9-6c6c64ee8da3', 'created_at': datetime.datetime(2024, 8, 28, 19, 37, 35, tzinfo=datetime.timezone.utc)}]","EmmadUsmani (Issue Creator) on (2024-08-07 22:16:45 UTC): * **#47208** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/47208?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46607** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46607?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* **#46505** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46505?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* **#46466** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46466?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a>
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @EmmadUsmani and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

github-actions[bot] on (2024-08-26 02:47:38 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff f49407fcbdf18f40e247437f41b3bbefd1e227bf...33f8ca3b198bd6e65b851f8f772ca3493749ece1.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/components/ChartSettings.jsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedItems/ChartSettingOrderedItems.tsx<br>frontend/src/metabase/visualizations/components/settings/ChartSettingOrderedSimple.tsx<br>frontend/src/metabase/visualizations/echarts/pie/format.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/index.ts<br>frontend/src/metabase/visualizations/echarts/pie/model/types.ts<br>frontend/src/metabase/visualizations/echarts/pie/option.ts<br>frontend/src/metabase/visualizations/lib/settings.js<br>frontend/src/metabase/visualizations/lib/settings/series.js<br>frontend/src/metabase/visualizations/lib/warnings.js<br>frontend/src/metabase/visualizations/shared/settings/pie.ts<br>frontend/src/metabase/visualizations/types/visualization.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/PieChart.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.styled.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/SliceNameWidget.tsx<br>frontend/src/metabase/visualizations/visualizations/PieChart/chart-definition.ts<br>frontend/src/metabase/visualizations/visualizations/PieChart/use-chart-events.ts |

EmmadUsmani (Issue Creator) on (2024-08-27 00:30:07 UTC): @alxnddr Thanks for the review! Regarding the second point, showing items that were grouped into other in the sidebar, I kept it this way since that was the behavior before, but I'm happy to change it if we think it'd be better to remove those now. Will ask on Slack tomorrow.

EmmadUsmani (Issue Creator) on (2024-08-28 01:39:54 UTC): @alxnddr I've fixed the bug with slices with 0 dimension values not being draggable. Turns out this is a bug in dnd-kit https://github.com/clauderic/dnd-kit/issues/858. My workaround was to just make `PieRow.key` always a string. This is fine because number dimension values are only needed for formatting correctly, which we do separately on the raw dimension value itself and store under `PieRow.name`.

EmmadUsmani (Issue Creator) on (2024-08-28 19:37:35 UTC): @alxnddr Other slices are now hidden from sidebar as well

https://github.com/user-attachments/assets/d4767245-5fe9-4921-85c9-6c6c64ee8da3

"
2454375324,pull_request,closed,,"ü§ñ backported ""fix(webapp/sidenav): Move Browse sidebar section in between Trash and other collections""","Since the nav looks different on 50 I had to use a slightly different approach here

Here's how the nav looks on a fresh instance:

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/f5cad463-2c77-4617-a519-ea6f3509baeb.png)

#46457",github-automation-metabase,2024-08-07 21:23:09+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-13 17:31:11+00:00,2024-08-13 17:31:10+00:00,https://github.com/metabase/metabase/pull/46604,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2454368825,pull_request,closed,,fix(admin/performance): Ensure that the tab's title (e.g. Database caching) and 'Performance' are visible in document title,"Closes #46603

### Description

Adds the correct document title

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/54b00dca-016c-460b-9e49-9c19d98edf88.png)

![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/utGnP2ljFMMNOgi82vVn/ead3ef8b-072e-4c86-a160-1c9d40ce7a63.png)

### How to verify

Visit Admin / Performance and look at the title in your browser tab",rafpaf,2024-08-07 21:18:57+00:00,['rafpaf'],2024-08-09 17:37:38+00:00,2024-08-09 17:37:36+00:00,https://github.com/metabase/metabase/pull/46602,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2274366798, 'issue_id': 2454368825, 'author': 'rafpaf', 'body': '* **#46602** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46602?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 7, 21, 19, 16, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-07 21:19:16 UTC): * **#46602** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46602?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2454324769,pull_request,closed,,"ü§ñ backported ""docs: fix titles""",#46599,github-automation-metabase,2024-08-07 20:47:15+00:00,"['alexyarosh', 'github-automation-metabase']",2024-08-07 20:48:45+00:00,2024-08-07 20:48:44+00:00,https://github.com/metabase/metabase/pull/46601,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2454315118,pull_request,closed,,bump loki tolerance,"1) Increases tolerance to visual diffs to prevents flakes
2) Fixes `loki-update` command since the storybook dev mode required for certain stories to render",alxnddr,2024-08-07 20:41:34+00:00,['alxnddr'],2024-08-08 00:48:10+00:00,2024-08-07 22:32:54+00:00,https://github.com/metabase/metabase/pull/46600,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2454300583,pull_request,closed,,docs: fix titles,Some articles didn't have H1 titles which looked weird,alexyarosh,2024-08-07 20:33:56+00:00,['alexyarosh'],2024-08-07 20:49:12+00:00,2024-08-07 20:46:25+00:00,https://github.com/metabase/metabase/pull/46599,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2454254414,pull_request,closed,,Lean on DB queries for describe-table for Mongo,"Resolves https://github.com/metabase/metabase/issues/46277

This PR reimplements `driver/describe-table` for MongoDB. Before we would query a sample of documents from a collection and analyse them in Clojure. Instead, we now now execute a query that does a similar aggregation, but most of the calculation is done in the Mongo database.

Based on a few tests the performance is slightly slower when the collection contains small or deeply nested documents but much faster for large ones. But the main difference is in memory usage. This uses very little memory in the Metabase instance because all of the aggregation is done in the database.

### Timing tests: 

Create the test collections in mongosh:
```
// oom_test

function generateLargeArrayDocument(arraySize) {
  const largeArray = Array.from({ length: arraySize }, (_, index) => ({
    id: index,
    value: Math.random()
  }));
  return {
    _id: new ObjectId(),
    largeArray: largeArray
  };
}

db.createCollection(""oom_test"")
const numDocuments = 500;
const arraySize = 100000;
for (let i = 0; i < numDocuments; i++) {
  db.oom_test.insertOne(generateLargeArrayDocument(arraySize));
}

// nested_data

function randomDate(start, end) {
    return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
}

function generateDocument(id) {
    return {
        _id: id,
        string_field: `String value at depth 0 - ${id}`,
        number_field: Math.random() * 100,
        nested_object_1: {
            nested_1_string_field: `String value at depth 1 - ${id}`,
            nested_1_number_field: Math.random() * 100,
            nested_1_nested_object_1: {
                nested_1_nested_1_string_field: `String value at depth 2 - ${id}`,
                nested_1_nested_1_date_field: randomDate(new Date(2023, 0, 1), new Date(2025, 11, 31))
            },
            nested_1_nested_object_2: {
                nested_1_nested_2_string_field: `String value at depth 2 - ${id}`
            }
        },
        nested_object_2: {
            nested_2_string_field: `String value at depth 1 - ${id}`
        }
    };
}

db.nested_data.drop()
const numberOfDocuments = 1000;
let documents = [];
for (let i = 0; i < numberOfDocuments; i++) {
    documents.push(generateDocument(i));
}
db.nested_data.insertMany(documents);

// deep_data

function randomDate(start, end) {
    return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
}

function generateDeepObject(depth, maxDepth) {
    if (depth >= maxDepth) {
        return {
            leaf_string: `string at depth ${depth}`,
            leaf_number: Math.random() * 100,
            leaf_date: randomDate(new Date(2023, 0, 1), new Date(2025, 11, 31))
        };
    }
    return {
        string_field: `string at depth ${depth}`,
        number_field: Math.random() * 100,
        nested_object: generateDeepObject(depth + 1, maxDepth)
    };
}

function generateDocument(id, maxDepth) {
    return {
        _id: id,
        top_level_string: ""string"",
        top_level_number: Math.random() * 100,
        deep_nested_object: generateDeepObject(0, maxDepth)
    };
}

db.deep_data.drop()
const numberOfDocuments = 1000;
const maxDepth = 175; // any higher exceeds the limit for nesting
let documents = [];
for (let i = 0; i < numberOfDocuments; i++) {
    documents.push(generateDocument(i, maxDepth));
}
db.deep_data.insertMany(documents);

// wide_deep_data
function generateWideDeepObject(width, depth, currentDepth = 0) {
    let obj = {};
    let objectWidth = [0, 10, 20, 30, 40].includes(currentDepth) ? width : 1;
    for (let i = 0; i < objectWidth; i++) {
        let key = `key_${currentDepth}_${i}`;
        if (currentDepth < depth) {
            obj[key] = generateWideDeepObject(width, depth, currentDepth + 1);
        } else {
            obj[key] = Math.random();
        }
    }
    return obj;
}

function generateWideDeepDocument(id, width, depth) {
    return {
        _id: id,
        data: generateWideDeepObject(width, depth)
    };
}

db.wide_deep_data.drop();
const numberOfDocuments = 1000;
const width = 4;  // Adjust this for wider documents
const depth = 50;  // Adjust this for deeper nesting
let documents = [];
for (let i = 0; i < numberOfDocuments; i++) {
    documents.push(generateWideDeepDocument(i, width, depth));
}
db.wide_deep_data.insertMany(documents);
```

Then sync the database and run the benchmarks in the repl:
```
(comment
  (def table (t2/select-one :model/Table :name ""nested_data""))
  (def table (t2/select-one :model/Table :name ""oom_test""))
  (def table (t2/select-one :model/Table :name ""deep_data""))
  (def table (t2/select-one :model/Table :name ""wide_deep_data""))
  (def db (t2/select-one :model/Database (:db_id table)))
  (criterium.core/quick-bench (do (driver/describe-table :mongo db table) nil)))
```
**Timing on my M1 laptop**:

nested_data (small and fairly typical shaped documents with some nesting)
- Before: 83 ms
- After: 154 ms

deep_data (deeply nested data, basically the worst-case scenario for the new method)
- Before: 4311 ms
- After: 1439 ms

oom_test (documents with large arrays)
- Before: 237572 ms (if the JVM doesn't have enough memory, this can OOM)
- After: 4116 ms",calherries,2024-08-07 20:07:55+00:00,['snoe'],2024-10-10 16:40:35+00:00,2024-10-09 22:07:40+00:00,https://github.com/metabase/metabase/pull/46598,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2289077708, 'issue_id': 2454254414, 'author': 'perivamsi', 'body': 'Can we not backport this PR without having a discussion please?', 'created_at': datetime.datetime(2024, 8, 14, 15, 10, 52, tzinfo=datetime.timezone.utc)}, {'comment_id': 2289161692, 'issue_id': 2454254414, 'author': 'calherries', 'body': ""We're not going to backport this to 50 unless there is a customer that really needs it, and we get more confidence in it. https://metaboat.slack.com/archives/C0641E4PB9B/p1723648950115759?thread_ts=1723648266.831449&cid=C0641E4PB9B"", 'created_at': datetime.datetime(2024, 8, 14, 15, 50, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2297042355, 'issue_id': 2454254414, 'author': 'calherries', 'body': ""Unfortunately this query is timing out on sharded clusters, so can't be merged yet. I‚Äôd recommend whoever is responsible for this side of things now takes a look at the PR and decides whether to throw it away, adjust it to work for sharded clusters, or use the old code just for sharded clusters and the new stuff for regular single-node DBs"", 'created_at': datetime.datetime(2024, 8, 19, 17, 8, 53, tzinfo=datetime.timezone.utc)}, {'comment_id': 2405585391, 'issue_id': 2454254414, 'author': 'snoe', 'body': '@metabase-bot backport release-x.51.x', 'created_at': datetime.datetime(2024, 10, 10, 16, 40, 10, tzinfo=datetime.timezone.utc)}]","perivamsi on (2024-08-14 15:10:52 UTC): Can we not backport this PR without having a discussion please?

calherries (Issue Creator) on (2024-08-14 15:50:22 UTC): We're not going to backport this to 50 unless there is a customer that really needs it, and we get more confidence in it. https://metaboat.slack.com/archives/C0641E4PB9B/p1723648950115759?thread_ts=1723648266.831449&cid=C0641E4PB9B

calherries (Issue Creator) on (2024-08-19 17:08:53 UTC): Unfortunately this query is timing out on sharded clusters, so can't be merged yet. I‚Äôd recommend whoever is responsible for this side of things now takes a look at the PR and decides whether to throw it away, adjust it to work for sharded clusters, or use the old code just for sharded clusters and the new stuff for regular single-node DBs

snoe (Assginee) on (2024-10-10 16:40:10 UTC): @metabase-bot backport release-x.51.x

"
2454088422,pull_request,closed,,"ü§ñ backported ""Hide upload config when data warehouse is attached""","  #45842
",github-automation-metabase,2024-08-07 18:33:27+00:00,"['devurandom', 'github-automation-metabase']",2024-08-07 19:32:22+00:00,2024-08-07 19:32:20+00:00,https://github.com/metabase/metabase/pull/46597,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2454029194,pull_request,closed,,"ü§ñ backported ""docs - snowflake connection info""",#46588,github-automation-metabase,2024-08-07 17:57:35+00:00,"['paoliniluis', 'github-automation-metabase']",2024-08-07 17:59:03+00:00,2024-08-07 17:59:02+00:00,https://github.com/metabase/metabase/pull/46596,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453992425,pull_request,closed,,"ü§ñ backported ""Add v0.50.19 to the list of releases""",#46515,github-automation-metabase,2024-08-07 17:34:53+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-07 17:36:28+00:00,2024-08-07 17:36:27+00:00,https://github.com/metabase/metabase/pull/46595,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453984523,pull_request,closed,,[FE] Disable broken card refs,"Fixes https://github.com/metabase/metabase/issues/29763

With viz settings migrated from field refs keys, we can now use correct field refs for cards. This is required for https://github.com/metabase/metabase/pull/46555. 

There are no behavior changes, but internally field refs in `dataset_query` become different. 

How to verify:
- New -> Question -> Orders -> Save as Q1
- New -> Question -> Q1 -> Open the data source field picker and toggle off some of the fields -> Save
- Check that the field refs in `dataset_query.query.fields` are name-based (e.g. `[""field"", ""ID"", {""base-type"": ...}]`",ranquild,2024-08-07 17:29:59+00:00,['ranquild'],2024-08-13 18:11:43+00:00,2024-08-08 12:49:15+00:00,https://github.com/metabase/metabase/pull/46594,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2453936094,pull_request,closed,,Create Question and Dashboard Sharing Menu,"Closes https://github.com/metabase/metabase/issues/46191

### Description

Creates a dedicated dropdown menu for sharing on Dashboards and Questions.

Question | Dashboard
---|---
 ![Screen Shot 2024-08-09 at 10 09 12 AM](https://github.com/user-attachments/assets/3d0126ce-a95e-4e72-8132-8aba513345a5)| ![Screen Shot 2024-08-07 at 10 48 50 AM](https://github.com/user-attachments/assets/cd77e120-8eb8-434a-9c1b-811316e829d4)


Does a lot of code moving and reorganizing:
- Creates a new `SharingMenu` component that is usable in the header of both dashboards and questions
- Moves `PublicLinkPopover` to `metabase/sharing` from `metabase/dashboard` since it handles sharing both questions and dashboards
- Gets rid of `EmbedMenu` in favor of two different components: `EmbedMenuItem` and `PublicSharingMenuItem` which are easier to understand and test
- Removes the `DashboardSubscriptionButton` in favor of a `DashboardSubscriptionMenuItem`
- Moves the alerts button from the footer into the sharing menu
- and much, much more!


I also made some minor UX improvements, like when an admin is prompted to enable something in settings, these buttons now link to those settings pages
![Screen Shot 2024-08-07 at 11 06 21 AM](https://github.com/user-attachments/assets/e249c257-6ac3-476c-9382-c529664e2273)


### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-08-07 17:01:19+00:00,['iethree'],2024-08-21 19:08:55+00:00,2024-08-21 19:08:54+00:00,https://github.com/metabase/metabase/pull/46593,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/AdminWebapp', 'Admin and Webapp team'), ('PR-Env', 'See https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458')]","[{'comment_id': 2273922062, 'issue_id': 2453936094, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0a6d0a1928722839067d0ba8ca71a966b9c3ea37...e7a7f060303dc39352f355319a3f7b3db7de4678.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |\n| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.styled.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/index.ts<br>frontend/src/metabase/sharing/components/PublicLinkPopover/types.ts<br>frontend/src/metabase/sharing/components/SharingMenu/DashboardSharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/AlertMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/DashboardSubscriptionMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/ExportPdfMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/PublicLinkMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/QuestionSharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/SharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/SharingModals.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/index.ts<br>frontend/src/metabase/sharing/components/SharingMenu/test/DashboardSharingMenu.enterprise.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/DashboardSharingMenu.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/QuestionSharingMenu.enterprise.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/QuestionSharingMenu.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/types.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx |', 'created_at': datetime.datetime(2024, 8, 7, 17, 2, 40, tzinfo=datetime.timezone.utc)}, {'comment_id': 2287029290, 'issue_id': 2453936094, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 20, 2, tzinfo=datetime.timezone.utc)}, {'comment_id': 2302732976, 'issue_id': 2453936094, 'author': 'github-actions[bot]', 'body': 'üëã Deploying a preview environment for commit e7a7f060303dc39352f355319a3f7b3db7de4678.\n‚úÖ Preview:\n    https://pr46593.coredev.metabase.com\nüóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)\n<!-- Sticky Pull Request Comment -->', 'created_at': datetime.datetime(2024, 8, 21, 18, 43, 24, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-07 17:02:40 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 0a6d0a1928722839067d0ba8ca71a966b9c3ea37...e7a7f060303dc39352f355319a3f7b3db7de4678.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/ActionIcon/ActionIcon.styled.tsx |
| @ranquild | frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/DashboardPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.styled.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkCopyPanel.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/PublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/QuestionPublicLinkPopover.unit.spec.tsx<br>frontend/src/metabase/sharing/components/PublicLinkPopover/index.ts<br>frontend/src/metabase/sharing/components/PublicLinkPopover/types.ts<br>frontend/src/metabase/sharing/components/SharingMenu/DashboardSharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/AlertMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/DashboardSubscriptionMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/EmbedMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/ExportPdfMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/MenuItems/PublicLinkMenuItem.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/QuestionSharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/SharingMenu.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/SharingModals.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/index.ts<br>frontend/src/metabase/sharing/components/SharingMenu/test/DashboardSharingMenu.enterprise.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/DashboardSharingMenu.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/QuestionSharingMenu.enterprise.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/QuestionSharingMenu.unit.spec.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/test/setup.tsx<br>frontend/src/metabase/sharing/components/SharingMenu/types.ts<br>frontend/src/metabase/sharing/components/SharingSidebar/tests/setup.tsx |

github-actions[bot] on (2024-08-13 20:02:00 UTC): <!---conventional commit reminder comment ID-->
@iethree You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-08-21 18:43:24 UTC): üëã Deploying a preview environment for commit e7a7f060303dc39352f355319a3f7b3db7de4678.
‚úÖ Preview:
    https://pr46593.coredev.metabase.com
üóíÔ∏è [login instructions](https://www.notion.so/metabase/Ephemeral-PR-Environments-c74a3710c87a460dbf4fc0007a001458)
<!-- Sticky Pull Request Comment -->

"
2453846630,pull_request,closed,,[serdes] ability to skip errors,"Fixes #45371

It became considerably bigger than I expected, mostly because I had to improve some things around how logs are handled (turned out that I forgot about logs from `metabase.models.serialization` when doing API), how OpenAPI definitions are generated (so now we can type files in there!).

Also ""extract everything"" and ""extract only parts"" are going through quite different code paths and we'll have to handle that - but a bit later, since this will conflict a lot with `serdes-spec` branch.",piranha,2024-08-07 16:07:36+00:00,['piranha'],2024-08-12 09:46:37+00:00,2024-08-12 09:46:36+00:00,https://github.com/metabase/metabase/pull/46591,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2453821802,pull_request,closed,,"ü§ñ backported ""Handle non-number cases in NumberFingerprint""",#46579,github-automation-metabase,2024-08-07 15:54:11+00:00,"['romeovs', 'github-automation-metabase']",2024-08-07 16:29:03+00:00,2024-08-07 16:29:02+00:00,https://github.com/metabase/metabase/pull/46590,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453819708,pull_request,closed,,Update SDK version to 0.1.27,Update Readme version references and published npm package version to 0.1.27,github-automation-metabase,2024-08-07 15:53:07+00:00,"['heypoom', 'github-automation-metabase']",2024-10-08 16:18:30+00:00,2024-08-07 15:57:24+00:00,https://github.com/metabase/metabase/pull/46589,"[('no-backport', 'Do not backport this PR to any branch')]","[{'comment_id': 2273798156, 'issue_id': 2453819708, 'author': 'github-actions[bot]', 'body': '@github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\n\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 7, 15, 53, 33, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-07 15:53:33 UTC): @github-automation-metabase You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.

Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2453814825,pull_request,closed,,docs - snowflake connection info,Updates Snowflake connection docs to clarify how to get some of the info required to connect Metabase to Snowflake.,jeff-bruemmer,2024-08-07 15:50:32+00:00,['jeff-bruemmer'],2025-02-05 22:56:15+00:00,2024-08-07 17:56:47+00:00,https://github.com/metabase/metabase/pull/46588,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2453793357,pull_request,closed,,Hide non-qualified fields from query validator,"We started persisting *all* `:source-columns` in https://github.com/metabase/metabase/pull/46432, and this compensates that for that by suppressing any references that we couldn't nail down to a table.

See this question for examples of the kinds of references we'd be suppressing: https://stats.metabase.com/question/19045-phantom-query-analysis-fields",crisptrutski,2024-08-07 15:39:03+00:00,['crisptrutski'],2024-10-08 16:18:20+00:00,2024-08-08 11:51:21+00:00,https://github.com/metabase/metabase/pull/46587,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Workflows', 'aka BEC')]",[],
2453786290,pull_request,closed,,Use app DB for query execution metrics,"Follows up on https://github.com/metabase/metabase/pull/46560

This PR replaces the in-memory calculation of execution metrics with a SQL query that can do the same calculation in the app DB.",calherries,2024-08-07 15:35:24+00:00,['calherries'],2024-09-03 08:49:27+00:00,2024-09-03 07:14:53+00:00,https://github.com/metabase/metabase/pull/46586,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2288564848, 'issue_id': 2453786290, 'author': 'imrkd', 'body': '/perf', 'created_at': datetime.datetime(2024, 8, 14, 12, 6, 10, tzinfo=datetime.timezone.utc)}]","imrkd on (2024-08-14 12:06:10 UTC): /perf

"
2453778290,pull_request,closed,,"ü§ñ backported ""Protect against invalid file uploads""","  #46566
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 15:31:15+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-07 20:09:27+00:00,2024-08-07 20:09:23+00:00,https://github.com/metabase/metabase/pull/46585,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453697748,pull_request,closed,,"ü§ñ backported ""e2e: add cypress-terminal-report""",  #46483,github-automation-metabase,2024-08-07 14:54:13+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-08 06:46:01+00:00,2024-08-08 06:46:00+00:00,https://github.com/metabase/metabase/pull/46584,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453696387,pull_request,closed,,"ü§ñ backported ""Delete database using config file""",#46437,github-automation-metabase,2024-08-07 14:53:40+00:00,"['devurandom', 'github-automation-metabase']",2024-08-07 15:44:21+00:00,2024-08-07 15:44:20+00:00,https://github.com/metabase/metabase/pull/46583,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453687101,pull_request,closed,,MS2: Open notebook data source in new tab (joins),"### Description
This PR addresses the milestone 2 from #46201.
In fact, joins have been fully functional even after #46228, but this PR adds E2E test coverage that confirms that.

### How to verify
1. Create an ad-hoc query with as many joins, and as many types of joins you want
2. Make sure that cmd/ctrl clicking on the right hand side entities (table, question, model) opens in a new tab

Alternatively, run the accompanied E2E tests.

The query used in this test
<img width=""1259"" alt=""image"" src=""https://github.com/user-attachments/assets/373d1a4b-089a-45f2-9ced-2fdde8be7c4d"">

### Checklist
- [x] Tests have been added/updated to cover changes in this PR

### Stress-test
10/10 ‚úÖ https://github.com/metabase/metabase/actions/runs/10287092410
50x (in progress) https://github.com/metabase/metabase/actions/runs/10291760189",nemanjaglumac,2024-08-07 14:49:51+00:00,['nemanjaglumac'],2024-10-08 16:18:28+00:00,2024-08-07 22:52:04+00:00,https://github.com/metabase/metabase/pull/46582,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2453686844,pull_request,closed,,"ü§ñ backported ""Exclude javax.annotation/javax.annotation-api""",#46546,github-automation-metabase,2024-08-07 14:49:44+00:00,"['dpsutton', 'github-automation-metabase']",2024-08-07 15:40:42+00:00,2024-08-07 15:40:41+00:00,https://github.com/metabase/metabase/pull/46581,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453591214,pull_request,closed,,Handle non-number cases in NumberFingerprint,"Closes https://github.com/metabase/metabase/issues/46574

### Description

Fixes a P1 bug that caused the question to crash when displaying the fingerprint info for certain tables.

The TypeScript types are incorrect which made the code pass the checker. If fixed it locally but I think we should consider fixing all the incorrect api types (like the one for [`NumberFingerprintDisplayInfo`](https://github.com/metabase/metabase/blob/master/frontend/src/metabase-lib/types.ts#L193-L200)).

### How to verify

Follow the reproduction steps in the [issue](https://github.com/metabase/metabase/issues/46574) to see if the crash still happens.


### Checklist

- [x] Tests have been added/updated to cover changes in this PR, we don't have Oracle tests for Cypress so only a unit test was added
",romeovs,2024-08-07 14:10:46+00:00,['romeovs'],2024-08-07 15:53:21+00:00,2024-08-07 15:53:20+00:00,https://github.com/metabase/metabase/pull/46579,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Querying', '')]",[],
2453560834,pull_request,closed,,"ü§ñ backported ""e2e: allow cypress to start with --browser=firefox passed""",#46569,github-automation-metabase,2024-08-07 13:57:55+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-07 14:30:20+00:00,2024-08-07 14:30:19+00:00,https://github.com/metabase/metabase/pull/46578,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453549102,pull_request,closed,,Clean up serdes v2 exceptions,"Closes https://github.com/metabase/metabase/issues/45225

### Description

Not sure if I'm barking up the right tree here üòÑ 
",crisptrutski,2024-08-07 13:53:01+00:00,['crisptrutski'],2024-08-15 09:07:07+00:00,2024-08-15 09:07:06+00:00,https://github.com/metabase/metabase/pull/46577,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2288317476, 'issue_id': 2453549102, 'author': 'crisptrutski', 'body': 'Yeah, makes sense to kick the tires.', 'created_at': datetime.datetime(2024, 8, 14, 9, 46, 36, tzinfo=datetime.timezone.utc)}]","crisptrutski (Issue Creator) on (2024-08-14 09:46:36 UTC): Yeah, makes sense to kick the tires.

"
2453510389,pull_request,closed,,"ü§ñ backported ""Consider the first 10 lines when inferring upload separator""","  #46321
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 13:37:38+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-07 15:57:11+00:00,2024-08-07 15:11:27+00:00,https://github.com/metabase/metabase/pull/46576,"[('.Team/Workflows', 'aka BEC'), ('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453334846,pull_request,closed,,Automatically select offset breakout or move it to the front,"Closes https://github.com/metabase/metabase/issues/46532

### Description

As part of https://github.com/metabase/metabase/issues/46493, we want to pick the correct breakout automatically when using the ""Compare to the past"".

This PR does just that:
- [x] When a temporal breakout already exists, it gets moved to the front of the breakouts
- [x] When a temporal breakout does not exist, a temporal column gets picked and added as a breakout (at the front)
- [x] When both the above conditions are false, the ""Compare to the past"" item should not be shown (implemented in https://github.com/metabase/metabase/issues/46499).

### To verify
#### Scenario 1
- New question ‚Üí Orders
- Add aggregation: Sum of Total
- Add another aggregation: Click `Compare ""Sum of Total"" to previous period`
- Play around with the modal and click `Done`
- Verify that the correct columns have been added
- Verify that a new breakout was added `Created At: Month`

#### Scenario 2
- New question ‚Üí Orders
- Add aggregation: `Sum of Total`
- Add a breakout: `Created At: Year`
- Add another aggregation: Click `Compare ""Sum of Total"" to previous years`
- Play around with the modal and click `Done`
- Verify that the correct columns have been added
- Verify that no new breakout was created

#### Scenario 3
- New question ‚Üí Orders
- Add aggregation: `Sum of Total`
- Add a breakout: `Total: Auto binned`
- Add a breakout: `Created At: Year`
- Add another aggregation: Click `Compare ""Sum of Total"" to previous rows`
- Play around with the modal and click `Done`
- Verify that the correct columns have been added
- Verify that no new breakout was created and that `Created At: Year` was moved to be the first breakout",romeovs,2024-08-07 12:14:01+00:00,['romeovs'],2024-08-14 08:25:24+00:00,2024-08-14 08:25:22+00:00,https://github.com/metabase/metabase/pull/46573,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2273329690, 'issue_id': 2453334846, 'author': 'github-actions[bot]', 'body': '@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\n\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 7, 12, 14, 36, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273334379, 'issue_id': 2453334846, 'author': 'github-actions[bot]', 'body': '@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\n\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 7, 12, 17, 6, tzinfo=datetime.timezone.utc)}, {'comment_id': 2273782474, 'issue_id': 2453334846, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 763ebb7421a8490f530b83b774dcc4a299426046...5eff5a0ddccb41b0120eb5a1cdb6f8cbf366a588.\n\n| Notify | File(s) |\n|-|-|\n| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx |', 'created_at': datetime.datetime(2024, 8, 7, 15, 45, 43, tzinfo=datetime.timezone.utc)}, {'comment_id': 2278039124, 'issue_id': 2453334846, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 9, 14, 10, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2286628003, 'issue_id': 2453334846, 'author': 'romeovs', 'body': '@ranquild I removed `details`, so we should be good to go!', 'created_at': datetime.datetime(2024, 8, 13, 16, 13, 39, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-07 12:14:36 UTC): @romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.

Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-08-07 12:17:06 UTC): @romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.

Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

github-actions[bot] on (2024-08-07 15:45:43 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff 763ebb7421a8490f530b83b774dcc4a299426046...5eff5a0ddccb41b0120eb5a1cdb6f8cbf366a588.

| Notify | File(s) |
|-|-|
| @alxnddr | frontend/src/metabase/visualizations/click-actions/actions/CompareAggregationsAction/CompareAggregationsAction.tsx |

github-actions[bot] on (2024-08-09 14:10:31 UTC): <!---conventional commit reminder comment ID-->
@romeovs You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

romeovs (Issue Creator) on (2024-08-13 16:13:39 UTC): @ranquild I removed `details`, so we should be good to go!

"
2453271063,pull_request,closed,,"ü§ñ backported ""fix(webapp/browse): Fix e2e test of recently viewed models""","  #46568
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 11:40:06+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-08 10:40:52+00:00,2024-08-08 10:40:52+00:00,https://github.com/metabase/metabase/pull/46571,"[('was-backported', 'apply this to PRs that are themselves backports')]","[{'comment_id': 2275505591, 'issue_id': 2453271063, 'author': 'rafpaf', 'body': ""This PR will be backported here: https://github.com/metabase/metabase/pull/46559. Since it fixes a broken test introduced in another PR which also needs to be backported, it doesn't make sense to backport it individually."", 'created_at': datetime.datetime(2024, 8, 8, 10, 40, 52, tzinfo=datetime.timezone.utc)}]","rafpaf (Assginee) on (2024-08-08 10:40:52 UTC): This PR will be backported here: https://github.com/metabase/metabase/pull/46559. Since it fixes a broken test introduced in another PR which also needs to be backported, it doesn't make sense to backport it individually.

"
2453211821,pull_request,closed,,e2e: allow cypress to start with --browser=firefox passed,"### Description

verify that file exists before trying to remove it, for some reason it's firefox specific


### How to verify

`yarn test-cypress-open --browser=firefox` starts cypress locally

### Demo

https://github.com/user-attachments/assets/6cc32b2a-5425-4182-bb2c-b4905010b209

",uladzimirdev,2024-08-07 11:07:43+00:00,['uladzimirdev'],2024-08-07 14:30:47+00:00,2024-08-07 13:57:06+00:00,https://github.com/metabase/metabase/pull/46569,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]",[],
2453187859,pull_request,closed,,fix(webapp/browse): Fix e2e test of recently viewed models,"Fixes a broken e2e test that snuck onto master

‚úÖ [stress test](https://github.com/metabase/metabase/actions/runs/10283234753/job/28456630082) 30/30",rafpaf,2024-08-07 10:54:48+00:00,['rafpaf'],2024-10-08 16:18:34+00:00,2024-08-07 11:39:21+00:00,https://github.com/metabase/metabase/pull/46568,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2273191112, 'issue_id': 2453187859, 'author': 'rafpaf', 'body': '* **#46568** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46568?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 7, 10, 55, 4, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-07 10:55:04 UTC): * **#46568** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46568?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

"
2453134821,pull_request,closed,,Protect against invalid file uploads,"Do-over of https://github.com/metabase/metabase/pull/46482, which was merged prematurely.

Closes https://github.com/metabase/metabase-private/issues/227

### Description

This PR adds file type validation to the CSV upload API endpoints.",crisptrutski,2024-08-07 10:26:31+00:00,['crisptrutski'],2024-08-07 15:30:28+00:00,2024-08-07 15:30:27+00:00,https://github.com/metabase/metabase/pull/46566,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]",[],
2453123935,pull_request,closed,,"ü§ñ backported ""Protect against invalid file uploads""","  #46482
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 10:20:58+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-07 10:22:39+00:00,2024-08-07 10:22:39+00:00,https://github.com/metabase/metabase/pull/46565,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453033628,pull_request,closed,,"ü§ñ backported ""Add `relative-time-interval` mbql function 2""","  #46438
  > [!IMPORTANT]
  > Manual conflict resolution is required.
  Checkout the branch and run `./backport.sh` script. Force push your changes after cherry-picking.",github-automation-metabase,2024-08-07 09:37:31+00:00,"['lbrdnk', 'github-automation-metabase']",2024-08-07 16:15:18+00:00,2024-08-07 16:15:16+00:00,https://github.com/metabase/metabase/pull/46563,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2453029884,pull_request,closed,,deduplicate m2 cache,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",uladzimirdev,2024-08-07 09:35:42+00:00,['uladzimirdev'],2024-08-12 16:46:56+00:00,2024-08-12 16:46:54+00:00,https://github.com/metabase/metabase/pull/46562,"[('.Team/DevEx', '')]",[],
2452826740,pull_request,closed,,Limit the anon stats on query execution to 30 days,Context: https://metaboat.slack.com/archives/C01LQQ2UW03/p1722572166303169,qnkhuat,2024-08-07 07:56:40+00:00,['qnkhuat'],2024-08-14 04:46:22+00:00,2024-08-12 05:02:56+00:00,https://github.com/metabase/metabase/pull/46560,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2274845058, 'issue_id': 2452826740, 'author': 'qnkhuat', 'body': '@luizarakaki should we backport this?', 'created_at': datetime.datetime(2024, 8, 8, 2, 44, 54, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-08-08 02:44:54 UTC): @luizarakaki should we backport this?

"
2452146771,pull_request,closed,,"ü§ñ backported ""fix(webapp/browse): Fix bug where verified filter is applied to recents even when no verified models exist""","Unusually this is a backport of three PRs: #46462, #46487, and #46571. The last of these corrects a broken e2e test introduced when the other two were combined, so I think it makes sense to backport these as a single unit.",github-automation-metabase,2024-08-07 02:57:19+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-08 21:34:33+00:00,2024-08-08 21:34:31+00:00,https://github.com/metabase/metabase/pull/46559,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451822418,pull_request,closed,,"ü§ñ backported ""Allow edits to users with empty name fields""",#46511,github-automation-metabase,2024-08-06 23:02:06+00:00,"['iethree', 'github-automation-metabase']",2024-08-06 23:34:56+00:00,2024-08-06 23:34:55+00:00,https://github.com/metabase/metabase/pull/46557,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451813318,pull_request,closed,,Restore-feat-01,"> [!IMPORTANT]
> For those employed by Metabase: if you are merging into master, please add either a `backport` or a `no-backport` label to this PR. You will not be able to merge until you do this step. Refer to the section [Do I need to backport this PR?](https://www.notion.so/metabase/Metabase-Branching-Strategy-6eb577d5f61142aa960a626d6bbdfeb3?pvs=4#89f80d6f17714a0198aeb66c0efd1b71) in the Metabase Branching Strategy document for more details. If you're not employed by Metabase, this section does not apply to you, and the label will be taken care of by your reviewer.

> **Warning**
>
> If that is your first contribution to Metabase, please sign the [Contributor License Agreement](https://docs.google.com/a/metabase.com/forms/d/1oV38o7b9ONFSwuzwmERRMi9SYrhYeOrkbmNaq9pOJ_E/viewform) (unless it's a tiny documentation change). Also, if you're attempting to fix a translation issue, please submit your changes to our [POEditor project](https://poeditor.com/join/project/ynjQmwSsGh) instead of opening a PR.

Closes https://github.com/metabase/metabase/issues/[issue_number]

### Description

Describe the overall approach and the problem being solved.

### How to verify

Describe the steps to verify that the changes are working as expected.

1. New question -> Sample Dataset -> ...
2. ...

### Demo

_Upload a demo video or before/after screenshots if sensible or remove the section_

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR
",R1tter,2024-08-06 22:51:28+00:00,[],2024-08-06 22:52:25+00:00,2024-08-06 22:52:25+00:00,https://github.com/metabase/metabase/pull/46556,[],[],
2451755525,pull_request,closed,,[FE] Support multiple breakout positions,"Epic https://github.com/metabase/metabase/issues/46536

Some internal refactoring to allow multiple breakouts for the same column:
- Changes `breakoutPosition` to `breakoutPositions`, like `filterPositions` in MBQL lib
- Omits `:unit` and `:binning` on `lib/breakoutableColumns` because there is no 1:1 mapping. Makes `breakoutColumn` pass these properties instead because for a given breakout there is always 1 column.
- Makes `lib/breakout` ignore duplicate breakouts, like in `lib/filter`
- Makes `lib/replace-clause` ignore attempts to create duplicate breakouts in the query
- Makes the FE use it and expect multiple breakouts for the same column. We still don't allow that in the UI.

How to verify if it's ready to be merged:
- CI should be green, no behavior changes

How to verify it implements the task:
- Remove `breakoutPositions.length === 0` check https://github.com/metabase/metabase/blob/f551e6f6019ca26dec4517e40bb2375ceaff75fb/frontend/src/metabase/query_builder/components/notebook/steps/BreakoutStep/BreakoutStep.tsx#L114
- You would be able to create multiple breakouts for the same column; duplicate columns would be ignored, like we do for filters
- QP doesn't support this well in many cases, so we cannot really allow this now.",ranquild,2024-08-06 21:58:05+00:00,['ranquild'],2024-10-08 16:17:56+00:00,2024-08-12 20:54:37+00:00,https://github.com/metabase/metabase/pull/46555,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]",[],
2451727180,pull_request,closed,,MS3: Open notebook data source in new tab (tooltip),"### Description
This PR addresses the milestone 3 from #46201.
It implements the tooltip that instructs users to click (with a modifier) on a data source in order to open it in a new tab/window. The contents of the tooltip depends on the operating system. It shows `‚åò` for mac os, and `Ctrl` for Linux and Windows.

![image](https://github.com/user-attachments/assets/0e8b5dc4-2dfd-4259-bf17-f1b5fe2c4293)

![image](https://github.com/user-attachments/assets/ee775090-cf72-4390-b6e9-847c88d2009c)

### How to verify
1. Open any entity (except Metrics) in the notebook mode (raw table, question, model)
2. Hover the data source
3. A tooltip should appear
4. Add a join (any type of join)
5. The moment you select a right table for the join, you can hover it and the same tooltip should appear

Alternatively, run the accompanied tests.

### Demo
https://github.com/user-attachments/assets/d9c30c1d-33e7-4ebc-9707-2e29cf0fad2f

### Checklist
- [x] Tests have been added/updated to cover changes in this PR",nemanjaglumac,2024-08-06 21:32:19+00:00,['nemanjaglumac'],2024-10-08 16:18:14+00:00,2024-08-08 18:55:48+00:00,https://github.com/metabase/metabase/pull/46552,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2275505858, 'issue_id': 2451727180, 'author': 'AlessioLaiso', 'body': 'The tooltip looks good, including the update copy, but this seems to have ignored the part in Figma that specifies that ""Shown to the user a maximum of 3 times, or less if the uses uses ‚åò+click earlier."" I keep seeing the tooltip all the time.', 'created_at': datetime.datetime(2024, 8, 8, 10, 41, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275527817, 'issue_id': 2451727180, 'author': 'nemanjaglumac', 'body': '@AlessioLaiso Thank you.\r\n\r\nThat part (about hiding it after three hovers) is outdated. Please check the product doc comments.', 'created_at': datetime.datetime(2024, 8, 8, 10, 53, 49, tzinfo=datetime.timezone.utc)}]","AlessioLaiso on (2024-08-08 10:41:00 UTC): The tooltip looks good, including the update copy, but this seems to have ignored the part in Figma that specifies that ""Shown to the user a maximum of 3 times, or less if the uses uses ‚åò+click earlier."" I keep seeing the tooltip all the time.

nemanjaglumac (Issue Creator) on (2024-08-08 10:53:49 UTC): @AlessioLaiso Thank you.

That part (about hiding it after three hovers) is outdated. Please check the product doc comments.

"
2451693957,pull_request,closed,,"ü§ñ backported ""ci: do not save same m2 cache multiple times""",#46545,github-automation-metabase,2024-08-06 21:05:40+00:00,"['uladzimirdev', 'github-automation-metabase']",2024-08-07 08:35:22+00:00,2024-08-07 08:35:20+00:00,https://github.com/metabase/metabase/pull/46551,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451683132,pull_request,closed,,docs - update env vars,Autogenerated env var docs for 50 branch.,jeff-bruemmer,2024-08-06 20:57:59+00:00,['jeff-bruemmer'],2024-08-06 21:19:31+00:00,2024-08-06 21:19:07+00:00,https://github.com/metabase/metabase/pull/46550,[],[],
2451651781,pull_request,closed,,make series style settings tab first,"[Slack convo](https://metaboat.slack.com/archives/C064QMXEV9N/p1722970957608869)

### Description

This PR makes the series style settings tab first.

### How to verify

- New Orders -> Count by Created At -> it should show a line chart
- Open ""Count"" series settings
- Ensure it immediately shows the line style settings instead of formatting settings

### Demo

<img width=""894"" alt=""Screenshot 2024-08-06 at 3 45 54‚ÄØPM"" src=""https://github.com/user-attachments/assets/a52b6d59-b0cb-4d42-81ef-ca0f35ad2ccb"">

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",alxnddr,2024-08-06 20:36:59+00:00,['alxnddr'],2024-08-08 06:48:54+00:00,2024-08-08 06:14:32+00:00,https://github.com/metabase/metabase/pull/46549,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DashViz', 'Dashboard and Viz team'), ('loki-update', '')]",[],
2451605529,pull_request,closed,,fix: Handle tokens in strings when parsing params,"Fixes #38051
Fixes #36262
Fixes #11755
Fixes #32609

In the linked issues valid sql strings were causing the params parser to error. This swallows the errors or comment handling if those tokens `[[ {{ -- /*` appear inside a single quoted string `'/*--[[{{in here'`. 

This is further narrowing towards sql parsing, that started when we looked for comments. The risk of this failing to properly parse strings is that the query gets executed - returning a syntax error instead of the nicer parser error.
",snoe,2024-08-06 20:04:41+00:00,['snoe'],2024-08-21 12:21:26+00:00,2024-08-08 04:57:16+00:00,https://github.com/metabase/metabase/pull/46547,"[('backport', 'Automatically create PR on current release branch on merge')]",[],
2451549772,pull_request,closed,,Exclude javax.annotation/javax.annotation-api,"dep is brought in by google cloud

From `clj -X:deps tree :aliases '[:ee :drivers]'`

```
  . metabase/bigquery-cloud-sdk metabase/modules/drivers/bigquery-cloud-sdk
    . com.google.cloud/google-cloud-bigquery 2.38.1
      . com.google.cloud/google-cloud-core 2.35.0
      [...]
      . javax.annotation/javax.annotation-api 1.3.2
```

Before this change:

```
‚ùØ clj -X:deps tree :aliases '[:ee :drivers]' | grep 'javax.annotation/javax.annotation-api'
      . javax.annotation/javax.annotation-api 1.3.2
```

After:

```
‚ùØ clj -X:deps tree :aliases '[:ee :drivers]' > deps-master

‚ùØ echo $?
0
```

### Why remove this?

The project includes both the EPL and GPL 2.0 licenses: https://github.com/jakartaee/common-annotations-api/blob/master/LICENSE.md but we aren't sure if it's dual licensed or has pieces each of which are under one or the other. But it's not load bearing (just for compilation of java, not use of the bytecode) so we can exclude it.

(subject to checking bigquery use in the jar)",dpsutton,2024-08-06 19:27:49+00:00,['dpsutton'],2024-08-07 15:41:11+00:00,2024-08-07 14:48:57+00:00,https://github.com/metabase/metabase/pull/46546,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2273607647, 'issue_id': 2451549772, 'author': 'dpsutton', 'body': 'This excluded a dep from bigquery. As you can see the test suite for bigquery still passes and I\'m able to connect to bigquery locally from a jar on this branch:\r\n<img width=""1370"" alt=""image"" src=""https://github.com/user-attachments/assets/01d603eb-4cc1-43a4-98ee-de852d715396"">', 'created_at': datetime.datetime(2024, 8, 7, 14, 25, 42, tzinfo=datetime.timezone.utc)}]","dpsutton (Issue Creator) on (2024-08-07 14:25:42 UTC): This excluded a dep from bigquery. As you can see the test suite for bigquery still passes and I'm able to connect to bigquery locally from a jar on this branch:
<img width=""1370"" alt=""image"" src=""https://github.com/user-attachments/assets/01d603eb-4cc1-43a4-98ee-de852d715396"">

"
2451537207,pull_request,closed,,ci: do not save same m2 cache multiple times,"### Description

We save multiple caches of the same m2 cache with different keys and break the quota of available space at GitHub actions cache. Let's deduplicate this cache

### How to verify

CI is green, there is no cache per driver job, but one m2 cache is reused

https://github.com/metabase/metabase/actions/caches


",uladzimirdev,2024-08-06 19:19:40+00:00,['uladzimirdev'],2024-08-07 08:35:49+00:00,2024-08-06 21:04:53+00:00,https://github.com/metabase/metabase/pull/46545,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]",[],
2451494206,pull_request,closed,,"ü§ñ backported ""docs - add MariaDB page""",#45763,github-automation-metabase,2024-08-06 18:49:24+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-06 18:50:53+00:00,2024-08-06 18:50:52+00:00,https://github.com/metabase/metabase/pull/46544,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451426074,pull_request,closed,,fix(admin/performance): Ensure that adding or removing default values doesn't make cache policy form count as dirty,"Loom of the bug: https://www.loom.com/share/7b1981d1f6364ce5a9ef4f6a5e6446a1?sid=56b6eb83-13e5-49c4-8299-13bb575b8019

Loom of the bug fix: https://www.loom.com/share/c70cf15fb8684f14b047c0995fe55145?sid=9ebd9b06-17d9-4bb4-89b2-0ddc3f3f235f

- [x] unit test added

Closes #42974",rafpaf,2024-08-06 18:04:07+00:00,['rafpaf'],2024-08-28 14:10:05+00:00,2024-08-28 14:10:03+00:00,https://github.com/metabase/metabase/pull/46543,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2271854168, 'issue_id': 2451426074, 'author': 'rafpaf', 'body': '* **#46543** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46543?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 6, 18, 4, 35, tzinfo=datetime.timezone.utc)}, {'comment_id': 2274317496, 'issue_id': 2451426074, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/07/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 8, 7, 20, 45, 10, tzinfo=datetime.timezone.utc)}, {'comment_id': 2315433314, 'issue_id': 2451426074, 'author': 'rafpaf', 'body': '### Merge activity\n\n* **Aug 28, 10:10 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/46543).', 'created_at': datetime.datetime(2024, 8, 28, 14, 10, 4, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-06 18:04:35 UTC): * **#46543** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46543?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-08-07 20:45:10 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/07/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

rafpaf (Issue Creator) on (2024-08-28 14:10:04 UTC): ### Merge activity

* **Aug 28, 10:10 AM EDT**: @rafpaf merged this pull request with [Graphite](https://app.graphite.dev/github/pr/metabase/metabase/46543).

"
2451416628,pull_request,closed,,Add no-access table-level and schema-level permission,"This allows setting the `:blocked` data-view permission on the table and schema levels.

Prior to this we were only allowing this to be set on the database level.

- [x] allow `:blocked` to be saved for table level perms
- [x] ensure we are correctly handling `:blocked` as a value in the permission graph response
- [x] add test for saving table-level `:blocked`
- [x] add test for permission graph response value for a table-level `:blocked` perm 
- [x] rename function for verification of data perms
- [x] write a test where you run a query with a user that has data-perms, but not create-query
    - [x] Need to make sure [this exhaustive test output](https://github.com/metabase/metabase/pull/46542/files#diff-4ea27560c9fa50886e19f48ebcca2e87f13e1d0d5b182ca8645fc0ad04b9aa8cR113-R122) is the correct expected behavior
- [x] Ensure native queries for databases with blocked tables cannot run


---
Unrelated fixes:

- [x] Handle listing tables for sqlite, with it's `""""` schema.
",escherize,2024-08-06 17:57:55+00:00,"['escherize', 'johnswanson', 'sloansparger']",2024-08-19 22:39:24+00:00,2024-08-19 21:33:43+00:00,https://github.com/metabase/metabase/pull/46542,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2278567288, 'issue_id': 2451416628, 'author': 'escherize', 'body': 'I think I found a bug while fixing tests on this branch.\r\n\r\nWe were letting people run queries for which they had collection perms, even if they had missing data perms. That seems wrong to me, so I updated the test to show that you need data perms for the queries you are trying to run [in this commit](https://github.com/metabase/metabase/pull/46542/commits/008c90bf266f6b233d43fd65f26bee354bbf6504).', 'created_at': datetime.datetime(2024, 8, 9, 19, 2, 55, tzinfo=datetime.timezone.utc)}, {'comment_id': 2283967658, 'issue_id': 2451416628, 'author': 'johnswanson', 'body': ""So I was looking into the bug you mentioned, and it seems like the test is brittle, and *doesn't* pass on `master` when it's working correctly. The problem is that in a fresh REPL, running that test results in data perms like the following:\r\n\r\n```\r\n| :group_id | :db_id | :table_id |                   :perm_type |               :perm_value |\r\n|-----------+--------+-----------+------------------------------+---------------------------|\r\n|         1 |      2 |           | :perms/manage-table-metadata |                       :no |\r\n|         1 |      2 |           |       :perms/manage-database |                       :no |\r\n|         1 |      2 |           |        :perms/create-queries | :query-builder-and-native |\r\n|         1 |      2 |           |             :perms/view-data |             :unrestricted |\r\n|         1 |      2 |           |      :perms/download-results |         :one-million-rows |\r\n```\r\n\r\nBut why - since we're using `mt/with-no-data-perms-for-all-users!`? Because... at the point we use `mt/with-no-data-perms-for-all-users!` the database doesn't exist yet. Then, when we create it, we give it the default permissions - `:unrestricted`. So when the test runs *for the first time* (when the test DB doesn't exist yet) it passes. I think this is why it's been passing in CI.\r\n\r\nBut in reality, it shouldn't - and the second time I run it, it fails with an error that the user is blocked. So that's good - the bug is in the test, but the actual permissions behavior is like we want.\r\n\r\nI was able to get consistent (failing) behavior by moving the `mt/with-no-data-perms-for-all-users!` wrapper down, just after the `mt/with-temp` block. Then the test consistently fails with\r\n\r\n```\r\nexpected: (= [[1] [2]] (mt/rows (process-query-for-card child-card)))\r\n   error: clojure.lang.ExceptionInfo: Blocked: you are not allowed to run queries against Database 2.\r\n```"", 'created_at': datetime.datetime(2024, 8, 12, 13, 18, 15, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288572120, 'issue_id': 2451416628, 'author': 'imrkd', 'body': '/perf', 'created_at': datetime.datetime(2024, 8, 14, 12, 9, 1, tzinfo=datetime.timezone.utc)}, {'comment_id': 2294414540, 'issue_id': 2451416628, 'author': 'escherize', 'body': 'This last merge added [Include missing opts arg for transform->nested](https://github.com/metabase/metabase/pull/46944), which fixes some unrelated CI failures.', 'created_at': datetime.datetime(2024, 8, 16, 22, 48, 52, tzinfo=datetime.timezone.utc)}]","escherize (Issue Creator) on (2024-08-09 19:02:55 UTC): I think I found a bug while fixing tests on this branch.

We were letting people run queries for which they had collection perms, even if they had missing data perms. That seems wrong to me, so I updated the test to show that you need data perms for the queries you are trying to run [in this commit](https://github.com/metabase/metabase/pull/46542/commits/008c90bf266f6b233d43fd65f26bee354bbf6504).

johnswanson (Assginee) on (2024-08-12 13:18:15 UTC): So I was looking into the bug you mentioned, and it seems like the test is brittle, and *doesn't* pass on `master` when it's working correctly. The problem is that in a fresh REPL, running that test results in data perms like the following:

```
| :group_id | :db_id | :table_id |                   :perm_type |               :perm_value |
|-----------+--------+-----------+------------------------------+---------------------------|
|         1 |      2 |           | :perms/manage-table-metadata |                       :no |
|         1 |      2 |           |       :perms/manage-database |                       :no |
|         1 |      2 |           |        :perms/create-queries | :query-builder-and-native |
|         1 |      2 |           |             :perms/view-data |             :unrestricted |
|         1 |      2 |           |      :perms/download-results |         :one-million-rows |
```

But why - since we're using `mt/with-no-data-perms-for-all-users!`? Because... at the point we use `mt/with-no-data-perms-for-all-users!` the database doesn't exist yet. Then, when we create it, we give it the default permissions - `:unrestricted`. So when the test runs *for the first time* (when the test DB doesn't exist yet) it passes. I think this is why it's been passing in CI.

But in reality, it shouldn't - and the second time I run it, it fails with an error that the user is blocked. So that's good - the bug is in the test, but the actual permissions behavior is like we want.

I was able to get consistent (failing) behavior by moving the `mt/with-no-data-perms-for-all-users!` wrapper down, just after the `mt/with-temp` block. Then the test consistently fails with

```
expected: (= [[1] [2]] (mt/rows (process-query-for-card child-card)))
   error: clojure.lang.ExceptionInfo: Blocked: you are not allowed to run queries against Database 2.
```

imrkd on (2024-08-14 12:09:01 UTC): /perf

escherize (Issue Creator) on (2024-08-16 22:48:52 UTC): This last merge added [Include missing opts arg for transform->nested](https://github.com/metabase/metabase/pull/46944), which fixes some unrelated CI failures.

"
2451345862,pull_request,closed,,Make connection uri sensitive respecting exceptions,"Context [on slack](https://metaboat.slack.com/archives/C97M2U8M6/p1722501915213469).

#### The idea
Admins can see `conn-uri` of mongo dbs as they can edit the admin screen where this is configured:
<img width=""696"" alt=""image"" src=""https://github.com/user-attachments/assets/09d7d6d5-a959-46c1-987a-cd1f28f9a58f"">

But this connection string gets hydrated onto places unexpectedly: like when a db is hydrated onto field values. This PR adds `:conn-uri` to `default-sensitive-fields`. Then, by use of clojure's metadata, details returned from selected endpoints are marked to avoid redaction. Redaction happens in `to-json :model/Database` implementation, that is called after the enpoint functions complete, hence the decision to use metadata.",lbrdnk,2024-08-06 17:12:29+00:00,['lbrdnk'],2025-02-04 01:31:37+00:00,2025-02-04 01:31:36+00:00,https://github.com/metabase/metabase/pull/46539,"[('Stale', 'Stale PRs that will be auto-closed'), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2603450075, 'issue_id': 2451345862, 'author': 'github-actions[bot]', 'body': 'This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.', 'created_at': datetime.datetime(2025, 1, 21, 1, 31, 28, tzinfo=datetime.timezone.utc)}, {'comment_id': 2632557852, 'issue_id': 2451345862, 'author': 'github-actions[bot]', 'body': 'This pull request was closed because it had no activity for more than 90 days.', 'created_at': datetime.datetime(2025, 2, 4, 1, 31, 35, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2025-01-21 01:31:28 UTC): This pull request has had no activity for 90 days, it will be closed in 2 weeks if no further activity occurs.

github-actions[bot] on (2025-02-04 01:31:35 UTC): This pull request was closed because it had no activity for more than 90 days.

"
2451338551,pull_request,closed,,feat(sdk): generate sample react component with the embedding cli,"Closes https://github.com/metabase/metabase/issues/46417

### Description

Generates example React components that demonstrates how to setup the embedding SDK.

### How to verify

- Run `yarn build-embedding-sdk-cli:watch` in one terminal, in your Metabase directory
- Create an empty React project, using `yarn create vite`
- Run `yarn add file:../metabase/resources/embedding-sdk` to add the dev version of the SDK
- Run `npx @metabase/embedding-sdk-react start`
- Go through the CLI's steps until the end. Watch the below demo video. Make sure to add a license key, either at the beginning or after the setup step.
- You should get the same result as in the demo video below.

### Demo

<div>
    <a href=""https://www.loom.com/share/40edc8d096fe49e5ba1e6ea83631d9ff"">
      <p>Embedding CLI - From Zero to Dashboard - Watch Video</p>
    </a>
    <a href=""https://www.loom.com/share/40edc8d096fe49e5ba1e6ea83631d9ff"">
      <img style=""max-width:300px;"" src=""https://cdn.loom.com/sessions/thumbnails/40edc8d096fe49e5ba1e6ea83631d9ff-613f39c9b1ae5909-full-play.gif"">
    </a>
  </div>",heypoom,2024-08-06 17:07:47+00:00,['heypoom'],2024-08-13 13:30:16+00:00,2024-08-13 13:30:13+00:00,https://github.com/metabase/metabase/pull/46538,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', ''), ('Embedding/SDK', 'Embedding SDK for React')]","[{'comment_id': 2275378816, 'issue_id': 2451338551, 'author': 'heypoom', 'body': '(resolving merge conflicts)', 'created_at': datetime.datetime(2024, 8, 8, 9, 33, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2285391483, 'issue_id': 2451338551, 'author': 'github-actions[bot]', 'body': '<!---conventional commit reminder comment ID-->\n@heypoom You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.\nHere are all the supported types that will be shown in the changelog:\n- `feat`\n- `fix`\n- `perf`\n\nThese types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.\n\nPlease also make sure to include `sdk` scope, otherwise, the changelog will not include this task.\n\nFor example, these are valid PR titles:\n- `feat(sdk): Add interactive dashboard component`\n- `feat(sdk): Support theming pie chart`\n- `fix(sdk): Fix static dashboard crash`', 'created_at': datetime.datetime(2024, 8, 13, 5, 53, 54, tzinfo=datetime.timezone.utc)}]","heypoom (Issue Creator) on (2024-08-08 09:33:22 UTC): (resolving merge conflicts)

github-actions[bot] on (2024-08-13 05:53:54 UTC): <!---conventional commit reminder comment ID-->
@heypoom You have modified embedding SDK code. Please make sure the PR title follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) style.
Here are all the supported types that will be shown in the changelog:
- `feat`
- `fix`
- `perf`

These types `docs`, `style`, `refactor`, `test`, `build`, and `ci` are also encouraged for non-changelog related tasks.

Please also make sure to include `sdk` scope, otherwise, the changelog will not include this task.

For example, these are valid PR titles:
- `feat(sdk): Add interactive dashboard component`
- `feat(sdk): Support theming pie chart`
- `fix(sdk): Fix static dashboard crash`

"
2451209281,pull_request,closed,,"ü§ñ backported ""Fix bad i18n string""",#46454,github-automation-metabase,2024-08-06 15:50:29+00:00,"['dpsutton', 'github-automation-metabase']",2024-08-07 16:22:21+00:00,2024-08-07 16:22:20+00:00,https://github.com/metabase/metabase/pull/46537,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451159935,pull_request,closed,,"ü§ñ backported ""Gracefully handle ignored errors during sync""",#45968,github-automation-metabase,2024-08-06 15:24:55+00:00,"['crisptrutski', 'github-automation-metabase']",2024-08-06 16:13:20+00:00,2024-08-06 16:13:19+00:00,https://github.com/metabase/metabase/pull/46534,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451120350,pull_request,closed,,"ü§ñ backported ""fix(browse/models): Correct the number of recently viewed models shown""",#46487,github-automation-metabase,2024-08-06 15:06:06+00:00,"['rafpaf', 'github-automation-metabase']",2024-08-07 13:39:54+00:00,2024-08-07 13:39:53+00:00,https://github.com/metabase/metabase/pull/46533,"[('was-backported', 'apply this to PRs that are themselves backports')]",[],
2451048212,pull_request,closed,,fix(browse): Use a simpler approach for representing paths responsively,"### Description

The existing `CollectionBreadcrumbsWithTooltip` component was clunky and unperformant. This PR introduces a simpler, CSS-only approach.

### How to verify

Go to **Browse models** and look at the collection column.

### Checklist

- [ ] Tests have been added/updated to cover changes in this PR - since this is just CSS, I haven't added any tests",rafpaf,2024-08-06 14:33:52+00:00,['rafpaf'],2024-08-21 11:37:52+00:00,2024-08-14 19:36:56+00:00,https://github.com/metabase/metabase/pull/46530,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/AdminWebapp', 'Admin and Webapp team')]","[{'comment_id': 2271449842, 'issue_id': 2451048212, 'author': 'rafpaf', 'body': '* **#46530** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46530?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà\n* `master`\n\nThis stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>\n<h2></h2>\n\n Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>\n  <!-- Current dependencies on/for this PR: -->', 'created_at': datetime.datetime(2024, 8, 6, 14, 34, 5, tzinfo=datetime.timezone.utc)}, {'comment_id': 2271463620, 'issue_id': 2451048212, 'author': 'graphite-app[bot]', 'body': '### Graphite Automations\n<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/06/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau\'s automation.</p></details>', 'created_at': datetime.datetime(2024, 8, 6, 14, 40, 11, tzinfo=datetime.timezone.utc)}]","rafpaf (Issue Creator) on (2024-08-06 14:34:05 UTC): * **#46530** <a href=""https://app.graphite.dev/github/pr/metabase/metabase/46530?utm_source=stack-comment-icon"" target=""_blank""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""10px"" height=""10px""/></a> üëà
* `master`

This stack of pull requests is managed by Graphite. <a href=""https://stacking.dev/?utm_source=stack-comment"">Learn more about stacking.</a>
<h2></h2>

 Join @rafpaf and the rest of your teammates on <a href=""https://graphite.dev?utm-source=stack-comment""><img src=""https://static.graphite.dev/graphite-32x32-black.png"" alt=""Graphite"" width=""11px"" height=""11px""/> <b>Graphite</b></a>
  <!-- Current dependencies on/for this PR: -->

graphite-app[bot] on (2024-08-06 14:40:11 UTC): ### Graphite Automations
<details><summary><a href=""https://app.graphite.dev/automations/?org=metabase&ruleId=Yrh2LAyyUc6276rpQngn&ref=gt-automation-github-comment"">""Warn authors when publishing large PRs""</a> took an action on this PR ‚Ä¢ (08/06/24)</summary><p>1 teammate was notified to this PR based on Raphael Krut-Landau's automation.</p></details>

"
2451040335,pull_request,closed,,FE - Cover Unit of Time in `getParameterColumns` with tests,"Closes #46526

### Description

Part of testing plan: #46520
Nothing new, just covering the existing feature which needs not to change while we're working on #46519.
",kamilmielnik,2024-08-06 14:30:36+00:00,['kamilmielnik'],2024-08-08 14:32:19+00:00,2024-08-08 13:25:05+00:00,https://github.com/metabase/metabase/pull/46529,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2275553731, 'issue_id': 2451040335, 'author': 'kamilmielnik', 'body': ""> We should not use raw MBQL and instead generate queries with MBQL lib. This is important - we're changing MBQL in some cases.\r\n\r\n55d631ad16644434b2fe4ff8ec75eceb3d0d1a1e"", 'created_at': datetime.datetime(2024, 8, 8, 11, 8, 46, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-08-08 11:08:46 UTC): 55d631ad16644434b2fe4ff8ec75eceb3d0d1a1e

"
2450918218,pull_request,closed,,Throw reasonable error when incompatible temporal unit is used in time unit parameter,"Closes https://github.com/metabase/metabase/issues/46068

Context [on slack](https://metaboat.slack.com/archives/C0645JP1W81/p1722596802747439).",lbrdnk,2024-08-06 13:37:33+00:00,['lbrdnk'],2024-08-19 15:28:43+00:00,2024-08-19 15:28:40+00:00,https://github.com/metabase/metabase/pull/46525,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2450881520,pull_request,closed,,Fix oom during sync field values,"Fixes https://github.com/metabase/metabase/issues/46411 by reworking the `field-distinct-values` function so that it stops getting rows from jdbc if the total char of all rows exceeds the char limit.


### How to test:
1. Create a db with this script

```sql
CREATE TABLE example_table (id SERIAL PRIMARY KEY,
                            content TEXT);

INSERT INTO example_table (content)
SELECT
    substr(
        -- Generate a long random string
        repeat(
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text) ||
            md5(random()::text),
            90909  -- Number of repetitions to exceed 1,000,000 characters
        ),
        1,
        200000
    )
FROM generate_series(1, 999);
```
2. Start MB with a max heap size of 512mb
3. Sync the DB should succeed",qnkhuat,2024-08-06 13:21:47+00:00,['qnkhuat'],2024-08-14 12:02:33+00:00,2024-08-08 10:34:09+00:00,https://github.com/metabase/metabase/pull/46524,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/Workflows', 'aka BEC')]","[{'comment_id': 2288555960, 'issue_id': 2450881520, 'author': 'qnkhuat', 'body': '@metabase-bot backport release-x.49.x', 'created_at': datetime.datetime(2024, 8, 14, 12, 1, 31, tzinfo=datetime.timezone.utc)}, {'comment_id': 2288557979, 'issue_id': 2450881520, 'author': 'github-actions[bot]', 'body': '@qnkhuat something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/10387130752)', 'created_at': datetime.datetime(2024, 8, 14, 12, 2, 32, tzinfo=datetime.timezone.utc)}]","qnkhuat (Issue Creator) on (2024-08-14 12:01:31 UTC): @metabase-bot backport release-x.49.x

github-actions[bot] on (2024-08-14 12:02:32 UTC): @qnkhuat something went wrong while creating a backport [[Logs]](https://github.com/metabase/metabase/actions/runs/10387130752)

"
2450603745,pull_request,closed,,Prototype - Data Picker scoped search,"Product doc: https://www.notion.so/metabase/Search-in-selection-in-data-picker-e4d830a6a35a416abb135e103de1d452
[Slack thread](https://metaboat.slack.com/archives/C0645JP1W81/p1722430559770769)

:warning: this is not production quality, it's just a prototype, expect things to be broken :warning: ",kamilmielnik,2024-08-06 11:06:02+00:00,['kamilmielnik'],2024-08-22 07:47:11+00:00,2024-08-22 07:47:09+00:00,https://github.com/metabase/metabase/pull/46518,"[('do not merge', ''), ('no-backport', 'Do not backport this PR to any branch'), ('.Team/Querying', '')]","[{'comment_id': 2304004836, 'issue_id': 2450603745, 'author': 'kamilmielnik', 'body': 'The prototype has served its purpose. Closing.', 'created_at': datetime.datetime(2024, 8, 22, 7, 47, 9, tzinfo=datetime.timezone.utc)}]","kamilmielnik (Issue Creator) on (2024-08-22 07:47:09 UTC): The prototype has served its purpose. Closing.

"
2450552014,pull_request,closed,,ci: replace docker-compose and fix mba usage,"### Description

backports to release-49 branch are blocked because of presto-kerberos tests fail constantly,
this PR fixes a way we run tests and completes `docker-compose` -> `docker compose` migration

example of failure https://github.com/metabase/metabase/actions/runs/10263260858/job/28394941049

related PRs 
- https://github.com/metabase/presto-kerberos-docker/pull/3
- https://github.com/metabase/mba/pull/22",uladzimirdev,2024-08-06 10:40:10+00:00,['uladzimirdev'],2024-08-08 14:26:06+00:00,2024-08-08 14:17:14+00:00,https://github.com/metabase/metabase/pull/46517,"[('backport', 'Automatically create PR on current release branch on merge'), ('.Team/DevEx', '')]","[{'comment_id': 2275949899, 'issue_id': 2450552014, 'author': 'uladzimirdev', 'body': '@metabase-bot backport release-x.49.x', 'created_at': datetime.datetime(2024, 8, 8, 14, 18, 22, tzinfo=datetime.timezone.utc)}, {'comment_id': 2275968263, 'issue_id': 2450552014, 'author': 'github-actions[bot]', 'body': 'üöÄ This should also be released by [v0.50.20](https://github.com/metabase/metabase/milestone/262)', 'created_at': datetime.datetime(2024, 8, 8, 14, 26, 5, tzinfo=datetime.timezone.utc)}]","uladzimirdev (Issue Creator) on (2024-08-08 14:18:22 UTC): @metabase-bot backport release-x.49.x

github-actions[bot] on (2024-08-08 14:26:05 UTC): üöÄ This should also be released by [v0.50.20](https://github.com/metabase/metabase/milestone/262)

"
2450508351,pull_request,closed,,Fix unintentional color changes,"Closes https://github.com/metabase/metabase/issues/46513

### Description

This PR does 2 things:
1. Ensure `brand-light` and `brand-lighter` look as close as the previous color as possible. The new colors aren't exactly the same as the previous color, but they passed Loki tests.
2. Add [mistakenly removed colors](https://github.com/metabase/metabase/commit/3d5233bc6a18135766b2f06e741929c4e6621d8f#diff-f11ce598e3fb0b9484b4e5418d6befa090a84fb411dd1d0b93c00bfe4dced509L48-L67).

### How to verify

Follow the repro steps in #46513

### Demo

![img](https://raw.githubusercontent.com/metabase/metabase/155e89dc10a3eea3104d58f72390c181dd59353c/.loki/reference/chrome_laptop_Design_System_colors_Default.png)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",WiNloSt,2024-08-06 10:18:54+00:00,['WiNloSt'],2024-08-08 09:01:08+00:00,2024-08-08 09:01:07+00:00,https://github.com/metabase/metabase/pull/46516,"[('no-backport', 'Do not backport this PR to any branch'), ('.Team/Embedding', '')]","[{'comment_id': 2270942504, 'issue_id': 2450508351, 'author': 'github-actions[bot]', 'body': '<!-- codenotify:CODENOTIFY report -->\n[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e0c710780f348f0a4a530b382ba7080ee25eab76...095bed6d7da17c8a1d7aeebaf744be787f9b3c1a.\n\n| Notify | File(s) |\n|-|-|\n| @kdoh | frontend/src/metabase/ui/components/buttons/Button/Button.styled.tsx<br>frontend/src/metabase/ui/utils/colors.ts |\n| @ranquild | frontend/src/metabase/lib/colors/palette.ts |', 'created_at': datetime.datetime(2024, 8, 6, 10, 29, 6, tzinfo=datetime.timezone.utc)}]","github-actions[bot] on (2024-08-06 10:29:06 UTC): <!-- codenotify:CODENOTIFY report -->
[Codenotify](https://github.com/sourcegraph/codenotify): Notifying subscribers in CODENOTIFY files for diff e0c710780f348f0a4a530b382ba7080ee25eab76...095bed6d7da17c8a1d7aeebaf744be787f9b3c1a.

| Notify | File(s) |
|-|-|
| @kdoh | frontend/src/metabase/ui/components/buttons/Button/Button.styled.tsx<br>frontend/src/metabase/ui/utils/colors.ts |
| @ranquild | frontend/src/metabase/lib/colors/palette.ts |

"
2450471480,pull_request,closed,,Add v0.50.19 to the list of releases,Like it says on the tin üòÅ,github-automation-metabase,2024-08-06 10:01:10+00:00,"['jeff-bruemmer', 'github-automation-metabase']",2024-08-07 17:36:55+00:00,2024-08-07 17:34:07+00:00,https://github.com/metabase/metabase/pull/46515,"[('Type:Documentation', ''), ('backport', 'Automatically create PR on current release branch on merge')]",[],
2450186413,pull_request,closed,,Load system-wide user.clj when REPL starts,"This is a minor QOL feature that loads system-wide `user.clj` file from the project-local `user.clj`. The setup is described here: https://clojure-goes-fast.com/blog/system-wide-user-clj/. Don't know if anybody else uses something similar but it shouldn't disrupt anyone who doesn't. This is also dev-time only, so production builds will not be impacted.
",alexander-yakushev,2024-08-06 07:45:11+00:00,['alexander-yakushev'],2024-10-08 16:18:41+00:00,2024-08-06 10:05:10+00:00,https://github.com/metabase/metabase/pull/46514,"[('no-backport', 'Do not backport this PR to any branch')]",[],
2449650636,pull_request,closed,,Allow edits to users with empty name fields,"Closes https://github.com/metabase/metabase/issues/46446
Closes https://github.com/metabase/metabase/issues/40750

### Description

Our API allows metabase users to have an empty firstname and lastname. However, our user edit form was sending empty strings instead of nulls, which our API does not allow. This updates the admin user edit form to allow two previously unhandled cases:
1. Editing user details when they are missing either first name, last name or both (reported in the issue)
2. Removing a user's first name, last name, or both

![Screen Shot 2024-08-05 at 5 40 23 PM](https://github.com/user-attachments/assets/21130014-205b-4dc4-b4a1-450a9143f601)

### Checklist

- [x] Tests have been added/updated to cover changes in this PR
",iethree,2024-08-05 23:42:07+00:00,['iethree'],2024-08-06 23:01:21+00:00,2024-08-06 23:01:19+00:00,https://github.com/metabase/metabase/pull/46511,"[('backport', 'Automatically create PR on current release branch on merge')]","[{'comment_id': 2270759850, 'issue_id': 2449650636, 'author': 'nemanjaglumac', 'body': 'Can you please check this potentially related issue at the same time?\r\nhttps://github.com/metabase/metabase/issues/40750', 'created_at': datetime.datetime(2024, 8, 6, 9, 1, 4, tzinfo=datetime.timezone.utc)}, {'comment_id': 2271450966, 'issue_id': 2449650636, 'author': 'iethree', 'body': ""> Can you please check this potentially related issue at the same time? #40750\r\n\r\n@nemanjaglumac thanks for calling this out! I accidentally fixed this too! I'll add a test that covers attributes as well üëç"", 'created_at': datetime.datetime(2024, 8, 6, 14, 34, 34, tzinfo=datetime.timezone.utc)}]","nemanjaglumac on (2024-08-06 09:01:04 UTC): Can you please check this potentially related issue at the same time?
https://github.com/metabase/metabase/issues/40750

iethree (Issue Creator) on (2024-08-06 14:34:34 UTC): @nemanjaglumac thanks for calling this out! I accidentally fixed this too! I'll add a test that covers attributes as well üëç

"
